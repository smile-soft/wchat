!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Wchat=e()}}(function(){var e;return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return i(n?n:t)},f,f.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";function r(){if(u.length)throw u.shift()}function i(e){var t;t=a.length?a.pop():new o,t.task=e,s(t)}function o(){this.task=null}var s=e("./raw"),a=[],u=[],c=s.makeRequestCallFromTimer(r);t.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(u.push(e),c())}finally{this.task=null,a[a.length]=this}}},{"./raw":2}],2:[function(e,t,n){(function(e){"use strict";function n(e){a.length||(s(),u=!0),a[a.length]=e}function r(){for(;c<a.length;){var e=c;if(c+=1,a[e].call(),c>f){for(var t=0,n=a.length-c;n>t;t++)a[t]=a[t+c];a.length-=c,c=0}}a.length=0,c=0,u=!1}function i(e){var t=1,n=new l(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function o(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var s,a=[],u=!1,c=0,f=1024,l=e.MutationObserver||e.WebKitMutationObserver;s="function"==typeof l?i(r):o(r),n.requestFlush=s,n.makeRequestCallFromTimer=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===s||t===l?62:t===a||t===h?63:u>t?-1:u+10>t?t-u+26+26:f+26>t?t-f:c+26>t?t-c+26:void 0}function n(e){function n(e){c[l++]=e}var r,i,s,a,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=e.length;u="="===e.charAt(f-2)?2:"="===e.charAt(f-1)?1:0,c=new o(3*e.length/4-u),s=u>0?e.length-4:e.length;var l=0;for(r=0,i=0;s>r;r+=4,i+=3)a=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&a)):1===u&&(a=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,s,a=e.length%3,u="";for(i=0,s=e.length-a;s>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=n(o);switch(a){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],4:[function(e,t,n){},{}],5:[function(e,t,n){(function(t){function r(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e){return this instanceof o?(this.length=0,this.parent=void 0,"number"==typeof e?s(this,e):"string"==typeof e?a(this,e,arguments.length>1?arguments[1]:"utf8"):u(this,e)):arguments.length>1?new o(e,arguments[1]):new o(e)}function s(e,t){if(e=g(e,0>t?0:0|v(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;n++)e[n]=0;return e}function a(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var r=0|y(t,n);return e=g(e,r),e.write(t,n),e}function u(e,t){if(o.isBuffer(t))return c(e,t);if(J(t))return f(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return l(e,t);if(t instanceof ArrayBuffer)return h(e,t)}return t.length?p(e,t):d(e,t)}function c(e,t){var n=0|v(t.length);return e=g(e,n),t.copy(e,0,0,n),e}function f(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function l(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function h(e,t){return o.TYPED_ARRAY_SUPPORT?(t.byteLength,e=o._augment(new Uint8Array(t))):e=l(e,new Uint8Array(t)),e}function p(e,t){var n=0|v(t.length);e=g(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t){var n,r=0;"Buffer"===t.type&&J(t.data)&&(n=t.data,r=0|v(n.length)),e=g(e,r);for(var i=0;r>i;i+=1)e[i]=255&n[i];return e}function g(e,t){o.TYPED_ARRAY_SUPPORT?(e=o._augment(new Uint8Array(t)),e.__proto__=o.prototype):(e.length=t,e._isBuffer=!0);var n=0!==t&&t<=o.poolSize>>>1;return n&&(e.parent=X),e}function v(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function m(e,t){if(!(this instanceof m))return new m(e,t);var n=new o(e,t);return delete n.parent,n}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if(t=0|t,n=void 0===n||n===1/0?this.length:0|n,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return L(this,t,n);case"ascii":return O(this,t,n);case"binary":return T(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+s]=a}return s}function _(e,t,n,r){return G(H(t,e.length-n),e,n,r)}function x(e,t,n,r){return G(W(t),e,n,r)}function E(e,t,n,r){return x(e,t,n,r)}function j(e,t,n,r){return G($(t),e,n,r)}function S(e,t,n,r){return G(z(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function L(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(n>=i+a){var u,c,f,l;switch(a){case 1:128>o&&(s=o);break;case 2:u=e[i+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(s=l));break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c,l>2047&&(55296>l||l>57343)&&(s=l));break;case 4:u=e[i+1],c=e[i+2],f=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f,l>65535&&1114112>l&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return R(r)}function R(e){var t=e.length;if(Z>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;i++)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;o++)i+=Y(e[o]);return i}function I(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,r,i,s){if(!o.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||s>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range")}function M(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;i++)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;i++)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r,i,o){if(t>i||o>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function q(e,t,n,r,i){return i||P(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),V.write(e,t,n,r,23,4),n+4}function D(e,t,n,r,i){return i||P(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),V.write(e,t,n,r,52,8),n+8}function N(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Y(e){return 16>e?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;r>s;s++){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function W(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function z(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);s++)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function $(e){return K.toByteArray(N(e))}function G(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);i++)t[i+n]=e[i];return i}var K=e("base64-js"),V=e("ieee754"),J=e("isarray");n.Buffer=o,n.SlowBuffer=m,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var X={};o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array),o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,s=Math.min(n,r);s>i&&e[i]===t[i];)++i;return i!==s&&(n=e[i],r=t[i]),r>n?-1:n>r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!J(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new o(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var r=new o(t),i=0;for(n=0;n<e.length;n++){var s=e[n];s.copy(r,i),i+=s.length}return r},o.byteLength=y,o.prototype.length=void 0,o.prototype.parent=void 0,o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?L(this,0,e):b.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:o.compare(this,e)},o.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,i=0;n+i<e.length;i++)if(e[n+i]===t[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(o.isBuffer(e))return n(this,e,t);if("number"==typeof e)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},o.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=t,t=0|n,n=i}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return x(this,e,t,n);case"binary":return E(this,e,t,n);case"base64":return j(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=o._augment(this.subarray(e,t));else{var i=t-e;r=new o(i,void 0);for(var s=0;i>s;s++)r[s]=this[s+e]}return r.length&&(r.parent=this.parent||this),r},o.prototype.readUIntLE=function(e,t,n){e=0|e,t=0|t,n||C(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||C(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||C(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||C(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),V.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),V.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),V.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),V.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||B(this,e,t,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){e=+e,t=0|t,n=0|n,r||B(this,e,t,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}var o=0,s=1,a=0>e?1:0;for(this[t]=255&e;++o<n&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);B(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=(e/s>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||B(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,s=r-n;if(this===e&&t>n&&r>t)for(i=s-1;i>=0;i--)e[i+t]=this[i+n];else if(1e3>s||!o.TYPED_ARRAY_SUPPORT)for(i=0;s>i;i++)e[i+t]=this[i+n];else e._set(this.subarray(n,n+s),t);return s},o.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var i=H(e.toString()),o=i.length;for(r=t;n>r;r++)this[r]=i[r%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=o.prototype;o._augment=function(e){return e.constructor=o,e._isBuffer=!0,e._set=e.set,e.get=Q.get,e.set=Q.set,e.write=Q.write,e.toString=Q.toString,e.toLocaleString=Q.toString,e.toJSON=Q.toJSON,e.equals=Q.equals,e.compare=Q.compare,e.indexOf=Q.indexOf,e.copy=Q.copy,e.slice=Q.slice,e.readUIntLE=Q.readUIntLE,e.readUIntBE=Q.readUIntBE,e.readUInt8=Q.readUInt8,e.readUInt16LE=Q.readUInt16LE,e.readUInt16BE=Q.readUInt16BE,e.readUInt32LE=Q.readUInt32LE,e.readUInt32BE=Q.readUInt32BE,e.readIntLE=Q.readIntLE,e.readIntBE=Q.readIntBE,e.readInt8=Q.readInt8,e.readInt16LE=Q.readInt16LE,e.readInt16BE=Q.readInt16BE,e.readInt32LE=Q.readInt32LE,e.readInt32BE=Q.readInt32BE,e.readFloatLE=Q.readFloatLE,e.readFloatBE=Q.readFloatBE,e.readDoubleLE=Q.readDoubleLE,e.readDoubleBE=Q.readDoubleBE,e.writeUInt8=Q.writeUInt8,e.writeUIntLE=Q.writeUIntLE,e.writeUIntBE=Q.writeUIntBE,e.writeUInt16LE=Q.writeUInt16LE,e.writeUInt16BE=Q.writeUInt16BE,e.writeUInt32LE=Q.writeUInt32LE,e.writeUInt32BE=Q.writeUInt32BE,e.writeIntLE=Q.writeIntLE,e.writeIntBE=Q.writeIntBE,e.writeInt8=Q.writeInt8,e.writeInt16LE=Q.writeInt16LE,e.writeInt16BE=Q.writeInt16BE,e.writeInt32LE=Q.writeInt32LE,e.writeInt32BE=Q.writeInt32BE,e.writeFloatLE=Q.writeFloatLE,e.writeFloatBE=Q.writeFloatBE,e.writeDoubleLE=Q.writeDoubleLE,e.writeDoubleBE=Q.writeDoubleBE,e.fill=Q.fill,e.inspect=Q.inspect,e.toArrayBuffer=Q.toArrayBuffer,e};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":3,ieee754:10,isarray:13}],6:[function(e,t,n){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],7:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function a(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function f(e){return"[object RegExp]"===v(e)}function l(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===v(e)}function p(e){return"[object Error]"===v(e)||e instanceof Error}function d(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function v(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=f,n.isObject=l,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=g,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":12}],8:[function(e,t,n){function r(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var i=t.createElement("html");return i.innerHTML=e,i.removeChild(i.lastChild)}var o=s[r]||s._default,a=o[0],u=o[1],c=o[2],i=t.createElement("div");for(i.innerHTML=u+e+c;a--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var f=t.createDocumentFragment();i.firstChild;)f.appendChild(i.removeChild(i.firstChild));return f}t.exports=r;var i,o=!1;"undefined"!=typeof document&&(i=document.createElement("div"),i.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',o=!i.getElementsByTagName("link").length,i=void 0);var s={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:o?[1,"X<div>","</div>"]:[0,"",""]};s.td=s.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],s.option=s.optgroup=[1,'<select multiple="multiple">',"</select>"],s.thead=s.tbody=s.colgroup=s.caption=s.tfoot=[1,"<table>","</table>"],s.polyline=s.ellipse=s.polygon=s.circle=s.text=s.line=s.path=s.rect=s.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},{}],9:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,o,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,o);return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,o,a;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(a=o;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],10:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,p=e[t+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+e[t+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),t+=s+l>=1?h/u:h*Math.pow(2,1-l),t*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*u-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+p]=255&s,p+=d,s/=256,c-=8);e[n+p-d]|=128*g}},{}],11:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],12:[function(e,t,n){t.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],13:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],14:[function(e,t,n){var r=e("../internal/arrayEach"),i=e("../internal/baseEach"),o=e("../internal/createForEach"),s=o(r,i);t.exports=s},{"../internal/arrayEach":20,"../internal/baseEach":26,"../internal/createForEach":43}],15:[function(e,t,n){var r=e("../internal/getNative"),i=r(Date,"now"),o=i||function(){return(new Date).getTime()};t.exports=o},{"../internal/getNative":50}],16:[function(e,t,n){function r(e,t,n){function r(){m&&clearTimeout(m),p&&clearTimeout(p),b=0,p=m=y=void 0}function u(t,n){n&&clearTimeout(n),p=m=y=void 0,t&&(b=o(),d=e.apply(v,h),m||p||(h=v=void 0))}function c(){var e=t-(o()-g);0>=e||e>t?u(y,p):m=setTimeout(c,e)}function f(){u(_,m)}function l(){if(h=arguments,g=o(),v=this,y=_&&(m||!x),w===!1)var n=x&&!m;else{p||x||(b=g);var r=w-(g-b),i=0>=r||r>w;i?(p&&(p=clearTimeout(p)),b=g,d=e.apply(v,h)):p||(p=setTimeout(f,r))}return i&&m?m=clearTimeout(m):m||t===w||(m=setTimeout(c,t)),n&&(i=!0,d=e.apply(v,h)),!i||m||p||(h=v=void 0),d}var h,p,d,g,v,m,y,b=0,w=!1,_=!0;if("function"!=typeof e)throw new TypeError(s);if(t=0>t?0:+t||0,n===!0){var x=!0;_=!1}else i(n)&&(x=!!n.leading,
w="maxWait"in n&&a(+n.maxWait||0,t),_="trailing"in n?!!n.trailing:_);return l.cancel=r,l}var i=e("../lang/isObject"),o=e("../date/now"),s="Expected a function",a=Math.max;t.exports=r},{"../date/now":15,"../lang/isObject":70}],17:[function(e,t,n){function r(e,t){if("function"!=typeof e)throw new TypeError(i);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-t,0),s=Array(i);++r<i;)s[r]=n[t+r];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var a=Array(t+1);for(r=-1;++r<t;)a[r]=n[r];return a[t]=s,e.apply(this,a)}}var i="Expected a function",o=Math.max;t.exports=r},{}],18:[function(e,t,n){function r(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new TypeError(s);return n===!1?r=!1:o(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),i(e,t,{leading:r,maxWait:+t,trailing:a})}var i=e("./debounce"),o=e("../lang/isObject"),s="Expected a function";t.exports=r},{"../lang/isObject":70,"./debounce":16}],19:[function(e,t,n){function r(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.exports=r},{}],20:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=r},{}],21:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}t.exports=r},{}],22:[function(e,t,n){function r(e,t,n,r){return void 0!==e&&o.call(r,n)?e:t}var i=Object.prototype,o=i.hasOwnProperty;t.exports=r},{}],23:[function(e,t,n){function r(e,t,n){for(var r=-1,o=i(t),s=o.length;++r<s;){var a=o[r],u=e[a],c=n(u,t[a],a,e,t);(c===c?c===u:u!==u)&&(void 0!==u||a in e)||(e[a]=c)}return e}var i=e("../object/keys");t.exports=r},{"../object/keys":75}],24:[function(e,t,n){function r(e,t){return null==t?e:i(t,o(t),e)}var i=e("./baseCopy"),o=e("../object/keys");t.exports=r},{"../object/keys":75,"./baseCopy":25}],25:[function(e,t,n){function r(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}t.exports=r},{}],26:[function(e,t,n){var r=e("./baseForOwn"),i=e("./createBaseEach"),o=i(r);t.exports=o},{"./baseForOwn":29,"./createBaseEach":41}],27:[function(e,t,n){var r=e("./createBaseFor"),i=r();t.exports=i},{"./createBaseFor":42}],28:[function(e,t,n){function r(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keysIn");t.exports=r},{"../object/keysIn":76,"./baseFor":27}],29:[function(e,t,n){function r(e,t){return i(e,t,o)}var i=e("./baseFor"),o=e("../object/keys");t.exports=r},{"../object/keys":75,"./baseFor":27}],30:[function(e,t,n){function r(e,t,n,a,u,c){return e===t?!0:null==e||null==t||!o(e)&&!s(t)?e!==e&&t!==t:i(e,t,r,n,a,u,c)}var i=e("./baseIsEqualDeep"),o=e("../lang/isObject"),s=e("./isObjectLike");t.exports=r},{"../lang/isObject":70,"./baseIsEqualDeep":31,"./isObjectLike":55}],31:[function(e,t,n){function r(e,t,n,r,h,g,v){var m=a(e),y=a(t),b=f,w=f;m||(b=d.call(e),b==c?b=l:b!=l&&(m=u(e))),y||(w=d.call(t),w==c?w=l:w!=l&&(y=u(t)));var _=b==l,x=w==l,E=b==w;if(E&&!m&&!_)return o(e,t,b);if(!h){var j=_&&p.call(e,"__wrapped__"),S=x&&p.call(t,"__wrapped__");if(j||S)return n(j?e.value():e,S?t.value():t,r,h,g,v)}if(!E)return!1;g||(g=[]),v||(v=[]);for(var A=g.length;A--;)if(g[A]==e)return v[A]==t;g.push(e),v.push(t);var L=(m?i:s)(e,t,n,r,h,g,v);return g.pop(),v.pop(),L}var i=e("./equalArrays"),o=e("./equalByTag"),s=e("./equalObjects"),a=e("../lang/isArray"),u=e("../lang/isTypedArray"),c="[object Arguments]",f="[object Array]",l="[object Object]",h=Object.prototype,p=h.hasOwnProperty,d=h.toString;t.exports=r},{"../lang/isArray":65,"../lang/isTypedArray":72,"./equalArrays":44,"./equalByTag":45,"./equalObjects":46}],32:[function(e,t,n){function r(e,t,n,h,p){if(!u(e))return e;var d=a(t)&&(s(t)||f(t)),g=d?void 0:l(t);return i(g||t,function(i,s){if(g&&(s=i,i=t[s]),c(i))h||(h=[]),p||(p=[]),o(e,t,s,r,n,h,p);else{var a=e[s],u=n?n(a,i,s,e,t):void 0,f=void 0===u;f&&(u=i),void 0===u&&(!d||s in e)||!f&&(u===u?u===a:a!==a)||(e[s]=u)}}),e}var i=e("./arrayEach"),o=e("./baseMergeDeep"),s=e("../lang/isArray"),a=e("./isArrayLike"),u=e("../lang/isObject"),c=e("./isObjectLike"),f=e("../lang/isTypedArray"),l=e("../object/keys");t.exports=r},{"../lang/isArray":65,"../lang/isObject":70,"../lang/isTypedArray":72,"../object/keys":75,"./arrayEach":20,"./baseMergeDeep":33,"./isArrayLike":51,"./isObjectLike":55}],33:[function(e,t,n){function r(e,t,n,r,l,h,p){for(var d=h.length,g=t[n];d--;)if(h[d]==g)return void(e[n]=p[d]);var v=e[n],m=l?l(v,g,n,e,t):void 0,y=void 0===m;y&&(m=g,a(g)&&(s(g)||c(g))?m=s(v)?v:a(v)?i(v):[]:u(g)||o(g)?m=o(v)?f(v):u(v)?v:{}:y=!1),h.push(g),p.push(m),y?e[n]=r(m,g,l,h,p):(m===m?m!==v:v===v)&&(e[n]=m)}var i=e("./arrayCopy"),o=e("../lang/isArguments"),s=e("../lang/isArray"),a=e("./isArrayLike"),u=e("../lang/isPlainObject"),c=e("../lang/isTypedArray"),f=e("../lang/toPlainObject");t.exports=r},{"../lang/isArguments":64,"../lang/isArray":65,"../lang/isPlainObject":71,"../lang/isTypedArray":72,"../lang/toPlainObject":73,"./arrayCopy":19,"./isArrayLike":51}],34:[function(e,t,n){function r(e){return function(t){return null==t?void 0:t[e]}}t.exports=r},{}],35:[function(e,t,n){function r(e){return null==e?"":e+""}t.exports=r},{}],36:[function(e,t,n){function r(e,t){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e[t[n]];return i}t.exports=r},{}],37:[function(e,t,n){function r(e,t,n){if("function"!=typeof e)return i;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,s){return e.call(t,n,r,i,o,s)}}return function(){return e.apply(t,arguments)}}var i=e("../utility/identity");t.exports=r},{"../utility/identity":83}],38:[function(e,t,n){function r(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}t.exports=r},{}],39:[function(e,t,n){function r(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}t.exports=r},{}],40:[function(e,t,n){function r(e){return s(function(t,n){var r=-1,s=null==t?0:n.length,a=s>2?n[s-2]:void 0,u=s>2?n[2]:void 0,c=s>1?n[s-1]:void 0;for("function"==typeof a?(a=i(a,c,5),s-=2):(a="function"==typeof c?c:void 0,s-=a?1:0),u&&o(n[0],n[1],u)&&(a=3>s?void 0:a,s=1);++r<s;){var f=n[r];f&&e(t,f,a)}return t})}var i=e("./bindCallback"),o=e("./isIterateeCall"),s=e("../function/restParam");t.exports=r},{"../function/restParam":17,"./bindCallback":37,"./isIterateeCall":53}],41:[function(e,t,n){function r(e,t){return function(n,r){var a=n?i(n):0;if(!o(a))return e(n,r);for(var u=t?a:-1,c=s(n);(t?u--:++u<a)&&r(c[u],u,c)!==!1;);return n}}var i=e("./getLength"),o=e("./isLength"),s=e("./toObject");t.exports=r},{"./getLength":49,"./isLength":54,"./toObject":61}],42:[function(e,t,n){function r(e){return function(t,n,r){for(var o=i(t),s=r(t),a=s.length,u=e?a:-1;e?u--:++u<a;){var c=s[u];if(n(o[c],c,o)===!1)break}return t}}var i=e("./toObject");t.exports=r},{"./toObject":61}],43:[function(e,t,n){function r(e,t){return function(n,r,s){return"function"==typeof r&&void 0===s&&o(n)?e(n,r):t(n,i(r,s,3))}}var i=e("./bindCallback"),o=e("../lang/isArray");t.exports=r},{"../lang/isArray":65,"./bindCallback":37}],44:[function(e,t,n){function r(e,t,n,r,o,s,a){var u=-1,c=e.length,f=t.length;if(c!=f&&!(o&&f>c))return!1;for(;++u<c;){var l=e[u],h=t[u],p=r?r(o?h:l,o?l:h,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!i(t,function(e){return l===e||n(l,e,r,o,s,a)}))return!1}else if(l!==h&&!n(l,h,r,o,s,a))return!1}return!0}var i=e("./arraySome");t.exports=r},{"./arraySome":21}],45:[function(e,t,n){function r(e,t,n){switch(n){case i:case o:return+e==+t;case s:return e.name==t.name&&e.message==t.message;case a:return e!=+e?t!=+t:e==+t;case u:case c:return e==t+""}return!1}var i="[object Boolean]",o="[object Date]",s="[object Error]",a="[object Number]",u="[object RegExp]",c="[object String]";t.exports=r},{}],46:[function(e,t,n){function r(e,t,n,r,o,a,u){var c=i(e),f=c.length,l=i(t),h=l.length;if(f!=h&&!o)return!1;for(var p=f;p--;){var d=c[p];if(!(o?d in t:s.call(t,d)))return!1}for(var g=o;++p<f;){d=c[p];var v=e[d],m=t[d],y=r?r(o?m:v,o?v:m,d):void 0;if(!(void 0===y?n(v,m,r,o,a,u):y))return!1;g||(g="constructor"==d)}if(!g){var b=e.constructor,w=t.constructor;if(b!=w&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w))return!1}return!0}var i=e("../object/keys"),o=Object.prototype,s=o.hasOwnProperty;t.exports=r},{"../object/keys":75}],47:[function(e,t,n){function r(e){return i[e]}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};t.exports=r},{}],48:[function(e,t,n){function r(e){return"\\"+i[e]}var i={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};t.exports=r},{}],49:[function(e,t,n){var r=e("./baseProperty"),i=r("length");t.exports=i},{"./baseProperty":34}],50:[function(e,t,n){function r(e,t){var n=null==e?void 0:e[t];return i(n)?n:void 0}var i=e("../lang/isNative");t.exports=r},{"../lang/isNative":69}],51:[function(e,t,n){function r(e){return null!=e&&o(i(e))}var i=e("./getLength"),o=e("./isLength");t.exports=r},{"./getLength":49,"./isLength":54}],52:[function(e,t,n){function r(e,t){return e="number"==typeof e||i.test(e)?+e:-1,t=null==t?o:t,e>-1&&e%1==0&&t>e}var i=/^\d+$/,o=9007199254740991;t.exports=r},{}],53:[function(e,t,n){function r(e,t,n){if(!s(n))return!1;var r=typeof t;if("number"==r?i(n)&&o(t,n.length):"string"==r&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}var i=e("./isArrayLike"),o=e("./isIndex"),s=e("../lang/isObject");t.exports=r},{"../lang/isObject":70,"./isArrayLike":51,"./isIndex":52}],54:[function(e,t,n){function r(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}var i=9007199254740991;t.exports=r},{}],55:[function(e,t,n){function r(e){return!!e&&"object"==typeof e}t.exports=r},{}],56:[function(e,t,n){function r(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}t.exports=r},{}],57:[function(e,t,n){var r=/<%-([\s\S]+?)%>/g;t.exports=r},{}],58:[function(e,t,n){var r=/<%([\s\S]+?)%>/g;t.exports=r},{}],59:[function(e,t,n){var r=/<%=([\s\S]+?)%>/g;t.exports=r},{}],60:[function(e,t,n){function r(e){for(var t=u(e),n=t.length,r=n&&e.length,c=!!r&&a(r)&&(o(e)||i(e)),l=-1,h=[];++l<n;){var p=t[l];(c&&s(p,r)||f.call(e,p))&&h.push(p)}return h}var i=e("../lang/isArguments"),o=e("../lang/isArray"),s=e("./isIndex"),a=e("./isLength"),u=e("../object/keysIn"),c=Object.prototype,f=c.hasOwnProperty;t.exports=r},{"../lang/isArguments":64,"../lang/isArray":65,"../object/keysIn":76,"./isIndex":52,"./isLength":54}],61:[function(e,t,n){function r(e){return i(e)?e:Object(e)}var i=e("../lang/isObject");t.exports=r},{"../lang/isObject":70}],62:[function(e,t,n){function r(e){for(var t=-1,n=e.length;++t<n&&i(e.charCodeAt(t)););return t}var i=e("./isSpace");t.exports=r},{"./isSpace":56}],63:[function(e,t,n){function r(e){for(var t=e.length;t--&&i(e.charCodeAt(t)););return t}var i=e("./isSpace");t.exports=r},{"./isSpace":56}],64:[function(e,t,n){function r(e){return o(e)&&i(e)&&a.call(e,"callee")&&!u.call(e,"callee")}var i=e("../internal/isArrayLike"),o=e("../internal/isObjectLike"),s=Object.prototype,a=s.hasOwnProperty,u=s.propertyIsEnumerable;t.exports=r},{"../internal/isArrayLike":51,"../internal/isObjectLike":55}],65:[function(e,t,n){var r=e("../internal/getNative"),i=e("../internal/isLength"),o=e("../internal/isObjectLike"),s="[object Array]",a=Object.prototype,u=a.toString,c=r(Array,"isArray"),f=c||function(e){return o(e)&&i(e.length)&&u.call(e)==s};t.exports=f},{"../internal/getNative":50,"../internal/isLength":54,"../internal/isObjectLike":55}],66:[function(e,t,n){function r(e,t,n,r){n="function"==typeof n?o(n,r,3):void 0;var s=n?n(e,t):void 0;return void 0===s?i(e,t,n):!!s}var i=e("../internal/baseIsEqual"),o=e("../internal/bindCallback");t.exports=r},{"../internal/baseIsEqual":30,"../internal/bindCallback":37}],67:[function(e,t,n){function r(e){return i(e)&&"string"==typeof e.message&&a.call(e)==o}var i=e("../internal/isObjectLike"),o="[object Error]",s=Object.prototype,a=s.toString;t.exports=r},{"../internal/isObjectLike":55}],68:[function(e,t,n){function r(e){return i(e)&&a.call(e)==o}var i=e("./isObject"),o="[object Function]",s=Object.prototype,a=s.toString;t.exports=r},{"./isObject":70}],69:[function(e,t,n){function r(e){return null==e?!1:i(e)?f.test(u.call(e)):o(e)&&s.test(e)}var i=e("./isFunction"),o=e("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,c=a.hasOwnProperty,f=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{"../internal/isObjectLike":55,"./isFunction":68}],70:[function(e,t,n){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=r},{}],71:[function(e,t,n){function r(e){var t;if(!s(e)||f.call(e)!=a||o(e)||!c.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return i(e,function(e,t){n=t}),void 0===n||c.call(e,n)}var i=e("../internal/baseForIn"),o=e("./isArguments"),s=e("../internal/isObjectLike"),a="[object Object]",u=Object.prototype,c=u.hasOwnProperty,f=u.toString;t.exports=r},{"../internal/baseForIn":28,"../internal/isObjectLike":55,"./isArguments":64}],72:[function(e,t,n){function r(e){return o(e)&&i(e.length)&&!!O[k.call(e)]}var i=e("../internal/isLength"),o=e("../internal/isObjectLike"),s="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",f="[object Error]",l="[object Function]",h="[object Map]",p="[object Number]",d="[object Object]",g="[object RegExp]",v="[object Set]",m="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object Float32Array]",_="[object Float64Array]",x="[object Int8Array]",E="[object Int16Array]",j="[object Int32Array]",S="[object Uint8Array]",A="[object Uint8ClampedArray]",L="[object Uint16Array]",R="[object Uint32Array]",O={};O[w]=O[_]=O[x]=O[E]=O[j]=O[S]=O[A]=O[L]=O[R]=!0,O[s]=O[a]=O[b]=O[u]=O[c]=O[f]=O[l]=O[h]=O[p]=O[d]=O[g]=O[v]=O[m]=O[y]=!1;var T=Object.prototype,k=T.toString;t.exports=r},{"../internal/isLength":54,"../internal/isObjectLike":55}],73:[function(e,t,n){function r(e){return i(e,o(e))}var i=e("../internal/baseCopy"),o=e("../object/keysIn");t.exports=r},{"../internal/baseCopy":25,"../object/keysIn":76}],74:[function(e,t,n){var r=e("../internal/assignWith"),i=e("../internal/baseAssign"),o=e("../internal/createAssigner"),s=o(function(e,t,n){return n?r(e,t,n):i(e,t)});t.exports=s},{"../internal/assignWith":23,"../internal/baseAssign":24,"../internal/createAssigner":40}],75:[function(e,t,n){var r=e("../internal/getNative"),i=e("../internal/isArrayLike"),o=e("../lang/isObject"),s=e("../internal/shimKeys"),a=r(Object,"keys"),u=a?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&i(e)?s(e):o(e)?a(e):[]}:s;t.exports=u},{"../internal/getNative":50,"../internal/isArrayLike":51,"../internal/shimKeys":60,"../lang/isObject":70}],76:[function(e,t,n){function r(e){if(null==e)return[];u(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(o(e)||i(e))&&t||0;for(var n=e.constructor,r=-1,c="function"==typeof n&&n.prototype===e,l=Array(t),h=t>0;++r<t;)l[r]=r+"";for(var p in e)h&&s(p,t)||"constructor"==p&&(c||!f.call(e,p))||l.push(p);return l}var i=e("../lang/isArguments"),o=e("../lang/isArray"),s=e("../internal/isIndex"),a=e("../internal/isLength"),u=e("../lang/isObject"),c=Object.prototype,f=c.hasOwnProperty;t.exports=r},{"../internal/isIndex":52,"../internal/isLength":54,"../lang/isArguments":64,"../lang/isArray":65,"../lang/isObject":70}],77:[function(e,t,n){var r=e("../internal/baseMerge"),i=e("../internal/createAssigner"),o=i(r);t.exports=o},{"../internal/baseMerge":32,"../internal/createAssigner":40}],78:[function(e,t,n){function r(e){return e=i(e),e&&a.test(e)?e.replace(s,o):e}var i=e("../internal/baseToString"),o=e("../internal/escapeHtmlChar"),s=/[&<>"'`]/g,a=RegExp(s.source);t.exports=r},{"../internal/baseToString":35,"../internal/escapeHtmlChar":47}],79:[function(e,t,n){function r(e,t,n){var r=g.imports._.templateSettings||g;n&&h(e,t,n)&&(t=n=void 0),e=u(e),t=o(a({},n||t),r,i);var x,E,j=o(a({},t.imports),r.imports,i),S=p(j),A=c(j,S),L=0,R=t.interpolate||w,O="__p += '",T=RegExp((t.escape||w).source+"|"+R.source+"|"+(R===d?b:w).source+"|"+(t.evaluate||w).source+"|$","g"),k="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";e.replace(T,function(t,n,r,i,o,s){return r||(r=i),O+=e.slice(L,s).replace(_,f),n&&(x=!0,O+="' +\n__e("+n+") +\n'"),o&&(E=!0,O+="';\n"+o+";\n__p += '"),r&&(O+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),L=s+t.length,t}),O+="';\n";var I=t.variable;I||(O="with (obj) {\n"+O+"\n}\n"),O=(E?O.replace(v,""):O).replace(m,"$1").replace(y,"$1;"),O="function("+(I||"obj")+") {\n"+(I?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(x?", __e = _.escape":"")+(E?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+O+"return __p\n}";var C=s(function(){return Function(S,k+"return "+O).apply(void 0,A)});if(C.source=O,l(C))throw C;return C}var i=e("../internal/assignOwnDefaults"),o=e("../internal/assignWith"),s=e("../utility/attempt"),a=e("../internal/baseAssign"),u=e("../internal/baseToString"),c=e("../internal/baseValues"),f=e("../internal/escapeStringChar"),l=e("../lang/isError"),h=e("../internal/isIterateeCall"),p=e("../object/keys"),d=e("../internal/reInterpolate"),g=e("./templateSettings"),v=/\b__p \+= '';/g,m=/\b(__p \+=) '' \+/g,y=/(__e\(.*?\)|\b__t\)) \+\n'';/g,b=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,w=/($^)/,_=/['\n\r\u2028\u2029\\]/g;t.exports=r},{"../internal/assignOwnDefaults":22,"../internal/assignWith":23,"../internal/baseAssign":24,"../internal/baseToString":35,"../internal/baseValues":36,"../internal/escapeStringChar":48,"../internal/isIterateeCall":53,"../internal/reInterpolate":59,"../lang/isError":67,"../object/keys":75,"../utility/attempt":82,"./templateSettings":80}],80:[function(e,t,n){var r=e("./escape"),i=e("../internal/reEscape"),o=e("../internal/reEvaluate"),s=e("../internal/reInterpolate"),a={escape:i,evaluate:o,interpolate:s,variable:"",imports:{_:{escape:r}}};t.exports=a},{"../internal/reEscape":57,"../internal/reEvaluate":58,"../internal/reInterpolate":59,"./escape":78}],81:[function(e,t,n){function r(e,t,n){var r=e;return(e=i(e))?(n?a(r,t,n):null==t)?e.slice(u(e),c(e)+1):(t+="",e.slice(o(e,t),s(e,t)+1)):e}var i=e("../internal/baseToString"),o=e("../internal/charsLeftIndex"),s=e("../internal/charsRightIndex"),a=e("../internal/isIterateeCall"),u=e("../internal/trimmedLeftIndex"),c=e("../internal/trimmedRightIndex");t.exports=r},{"../internal/baseToString":35,"../internal/charsLeftIndex":38,"../internal/charsRightIndex":39,"../internal/isIterateeCall":53,"../internal/trimmedLeftIndex":62,"../internal/trimmedRightIndex":63}],82:[function(e,t,n){var r=e("../lang/isError"),i=e("../function/restParam"),o=i(function(e,t){try{return e.apply(void 0,t)}catch(n){return r(n)?n:new Error(n)}});t.exports=o},{"../function/restParam":17,"../lang/isError":67}],83:[function(e,t,n){function r(e){return e}t.exports=r},{}],84:[function(e,t,n){(function(e){"use strict";function n(t){for(var n=new Array(arguments.length-1),r=0;r<n.length;)n[r++]=arguments[r];e.nextTick(function(){t.apply(null,n)})}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=n:t.exports=e.nextTick}).call(this,e("_process"))},{_process:85}],85:[function(e,t,n){function r(){f=!1,a.length?c=a.concat(c):l=-1,c.length&&i()}function i(){if(!f){var e=setTimeout(r);f=!0;for(var t=c.length;t;){for(a=c,c=[];++l<t;)a&&a[l].run();l=-1,t=c.length}a=null,f=!1,clearTimeout(e)}}function o(e,t){this.fun=e,this.array=t}function s(){}var a,u=t.exports={},c=[],f=!1,l=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new o(e,t)),1!==c.length||f||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],86:[function(e,t,n){"use strict";t.exports=e("./lib")},{"./lib":91}],87:[function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(t){return m=t,y}}function o(e,t){try{return e(t)}catch(n){return m=n,y}}function s(e,t,n){try{e(t,n)}catch(r){return m=r,y}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._45=0,this._81=0,this._65=null,this._54=null,e!==r&&g(e,this)}function u(e,t,n){return new e.constructor(function(i,o){var s=new a(r);s.then(i,o),c(e,new d(t,n,s))})}function c(e,t){for(;3===e._81;)e=e._65;return a._10&&a._10(e),0===e._81?0===e._45?(e._45=1,void(e._54=t)):1===e._45?(e._45=2,void(e._54=[e._54,t])):void e._54.push(t):void f(e,t)}function f(e,t){v(function(){var n=1===e._81?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._81?l(t.promise,e._65):h(t.promise,e._65));var r=o(n,e._65);r===y?h(t.promise,m):l(t.promise,r)})}function l(e,t){if(t===e)return h(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=i(t);if(n===y)return h(e,m);if(n===e.then&&t instanceof a)return e._81=3,e._65=t,void p(e);if("function"==typeof n)return void g(n.bind(t),e)}e._81=1,e._65=t,p(e)}function h(e,t){e._81=2,e._65=t,a._97&&a._97(e,t),p(e)}function p(e){if(1===e._45&&(c(e,e._54),e._54=null),2===e._45){for(var t=0;t<e._54.length;t++)c(e,e._54[t]);e._54=null}}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function g(e,t){var n=!1,r=s(e,function(e){n||(n=!0,l(t,e))},function(e){n||(n=!0,h(t,e))});n||r!==y||(n=!0,h(t,m))}var v=e("asap/raw"),m=null,y={};t.exports=a,a._10=null,a._97=null,a._61=r,a.prototype.then=function(e,t){if(this.constructor!==a)return u(this,e,t);var n=new a(r);return c(this,new d(e,t,n)),n}},{"asap/raw":2}],88:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r,r.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})}},{"./core.js":87}],89:[function(e,t,n){"use strict";function r(e){var t=new i(i._61);return t._81=1,t._65=e,t}var i=e("./core.js");t.exports=i;var o=r(!0),s=r(!1),a=r(null),u=r(void 0),c=r(0),f=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return a;if(void 0===e)return u;if(e===!0)return o;if(e===!1)return s;if(0===e)return c;if(""===e)return f;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(n){return new i(function(e,t){t(n)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(s,a){if(a&&("object"==typeof a||"function"==typeof a)){if(a instanceof i&&a.then===i.prototype.then){for(;3===a._81;)a=a._65;return 1===a._81?r(s,a._65):(2===a._81&&n(a._65),void a.then(function(e){r(s,e)},n))}var u=a.then;if("function"==typeof u){var c=new i(u.bind(a));return void c.then(function(e){r(s,e)},n)}}t[s]=a,0===--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,s=0;s<t.length;s++)r(s,t[s])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":87}],90:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r,r.prototype["finally"]=function(e){return this.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})})}},{"./core.js":87}],91:[function(e,t,n){"use strict";t.exports=e("./core.js"),e("./done.js"),e("./finally.js"),e("./es6-extensions.js"),e("./node-extensions.js"),e("./synchronous.js")},{"./core.js":87,"./done.js":88,"./es6-extensions.js":89,"./finally.js":90,"./node-extensions.js":92,"./synchronous.js":93}],92:[function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;t>r;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}function i(e){for(var t=Math.max(e.length-1,3),n=[],r=0;t>r;r++)n.push("a"+r);var i=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(n.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}var o=e("./core.js"),s=e("asap");t.exports=o,o.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?r(e,t):i(e)};var a="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),n="function"==typeof t[t.length-1]?t.pop():null,r=this;try{return e.apply(this,arguments).nodeify(n,r)}catch(i){if(null===n||"undefined"==typeof n)return new o(function(e,t){t(i)});s(function(){n.call(r,i)})}}},o.prototype.nodeify=function(e,t){return"function"!=typeof e?this:void this.then(function(n){s(function(){e.call(t,null,n)})},function(n){s(function(){e.call(t,n)})})}},{"./core.js":87,asap:1}],93:[function(e,t,n){"use strict";var r=e("./core.js");t.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._81)return this._65.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._65},r.prototype.getReason=function(){if(3===this._81)return this._65.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._65},r.prototype.getState=function(){return 3===this._81?this._65.getState():-1===this._81||-2===this._81?0:this._81}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},{"./core.js":87}],94:[function(t,n,r){(function(t){!function(i){function o(e){throw RangeError(B[e])}function s(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function a(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(C,".");var i=e.split("."),o=s(i,t).join(".");return r+o}function u(e){for(var t,n,r=[],i=0,o=e.length;o>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&o>i?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function c(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=P(e>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function f(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:E}function l(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?U(e/L):e>>1,e+=U(e/t);e>M*S>>1;r+=E)e=U(e/M);return U(r+(M+1)*e/(e+A))}function p(e){var t,n,r,i,s,a,u,l,p,d,g=[],v=e.length,m=0,y=O,b=R;for(n=e.lastIndexOf(T),0>n&&(n=0),r=0;n>r;++r)e.charCodeAt(r)>=128&&o("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;v>i;){for(s=m,a=1,u=E;i>=v&&o("invalid-input"),l=f(e.charCodeAt(i++)),(l>=E||l>U((x-m)/a))&&o("overflow"),m+=l*a,p=b>=u?j:u>=b+S?S:u-b,!(p>l);u+=E)d=E-p,a>U(x/d)&&o("overflow"),a*=d;t=g.length+1,b=h(m-s,t,0==s),U(m/t)>x-y&&o("overflow"),y+=U(m/t),m%=t,g.splice(m++,0,y)}return c(g)}function d(e){var t,n,r,i,s,a,c,f,p,d,g,v,m,y,b,w=[];for(e=u(e),v=e.length,t=O,n=0,s=R,a=0;v>a;++a)g=e[a],128>g&&w.push(P(g));for(r=i=w.length,i&&w.push(T);v>r;){for(c=x,a=0;v>a;++a)g=e[a],g>=t&&c>g&&(c=g);for(m=r+1,c-t>U((x-n)/m)&&o("overflow"),n+=(c-t)*m,t=c,a=0;v>a;++a)if(g=e[a],t>g&&++n>x&&o("overflow"),g==t){for(f=n,p=E;d=s>=p?j:p>=s+S?S:p-s,!(d>f);p+=E)b=f-d,y=E-d,w.push(P(l(d+b%y,0))),f=U(b/y);w.push(P(l(f,0))),s=h(n,m,r==i),n=0,++r}++n,++t}return w.join("")}function g(e){return a(e,function(e){return k.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return a(e,function(e){return I.test(e)?"xn--"+d(e):e})}var m="object"==typeof r&&r&&!r.nodeType&&r,y="object"==typeof n&&n&&!n.nodeType&&n,b="object"==typeof t&&t;b.global!==b&&b.window!==b&&b.self!==b||(i=b);var w,_,x=2147483647,E=36,j=1,S=26,A=38,L=700,R=72,O=128,T="-",k=/^xn--/,I=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=E-j,U=Math.floor,P=String.fromCharCode;if(w={version:"1.3.2",ucs2:{decode:u,encode:c},decode:p,encode:d,toASCII:v,toUnicode:g},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(m&&y)if(n.exports==m)y.exports=w;else for(_ in w)w.hasOwnProperty(_)&&(m[_]=w[_]);else i.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],95:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=e.length;u>0&&c>u&&(c=u);for(var f=0;c>f;++f){var l,h,p,d,g=e[f].replace(a,"%20"),v=g.indexOf(n);v>=0?(l=g.substr(0,v),h=g.substr(v+1)):(l=g,h=""),p=decodeURIComponent(l),d=decodeURIComponent(h),r(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],96:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(s(e),function(s){var a=encodeURIComponent(i(s))+n;return o(e[s])?r(e[s],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[s]))}).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],97:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":95,"./encode":96}],98:[function(e,t,n){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":99}],99:[function(e,t,n){
"use strict";function r(e){return this instanceof r?(c.call(this,e),f.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(e){e.end()}var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=r;var a=e("process-nextick-args"),u=e("core-util-is");u.inherits=e("inherits");var c=e("./_stream_readable"),f=e("./_stream_writable");u.inherits(r,c);for(var l=s(f.prototype),h=0;h<l.length;h++){var p=l[h];r.prototype[p]||(r.prototype[p]=f.prototype[p])}},{"./_stream_readable":101,"./_stream_writable":103,"core-util-is":7,inherits:11,"process-nextick-args":84}],100:[function(e,t,n){"use strict";function r(e){return this instanceof r?void i.call(this,e):new r(e)}t.exports=r;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":102,"core-util-is":7,inherits:11}],101:[function(e,t,n){(function(n){"use strict";function r(t,n){var r=e("./_stream_duplex");t=t||{},this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(C||(C=e("string_decoder/").StringDecoder),this.decoder=new C(t.encoding),this.encoding=t.encoding)}function i(t){e("./_stream_duplex");return this instanceof i?(this._readableState=new r(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void R.call(this)):new i(t)}function o(e,t,n,r,i){var o=c(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,f(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),p(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){return e>=B?e=B:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function c(e,t){var n=null;return L.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,l(e)}}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(k("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?S(h,e):h(e))}function h(e){k("emit readable"),e.emit("readable"),b(e)}function p(e,t){t.readingMore||(t.readingMore=!0,S(d,e,t))}function d(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(k("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;k("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&O(e,"data")&&(t.flowing=!0,b(e))}}function v(e){k("readable nexttick read 0"),e.read(0)}function m(e,t){t.resumeScheduled||(t.resumeScheduled=!0,S(y,e,t))}function y(e,t){t.reading||(k("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;if(k("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function w(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):1===r.length?r[0]:L.concat(r,i),r.length=0;else if(e<r[0].length){var a=r[0];n=a.slice(0,e),r[0]=a.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new L(e);for(var u=0,c=0,f=r.length;f>c&&e>u;c++){var a=r[0],l=Math.min(e-u,a.length);o?n+=a.slice(0,l):a.copy(n,u,0,l),l<a.length?r[0]=a.slice(l):r.shift(),u+=l}}return n}function _(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,S(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function E(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function j(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var S=e("process-nextick-args"),A=e("isarray"),L=e("buffer").Buffer;i.ReadableState=r;var R,O=(e("events"),function(e,t){return e.listeners(t).length});!function(){try{R=e("stream")}catch(t){}finally{R||(R=e("events").EventEmitter)}}();var L=e("buffer").Buffer,T=e("core-util-is");T.inherits=e("inherits");var k,I=e("util");k=I&&I.debuglog?I.debuglog("stream"):function(){};var C;T.inherits(i,R),i.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new L(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.isPaused=function(){return this._readableState.flowing===!1},i.prototype.setEncoding=function(t){return C||(C=e("string_decoder/").StringDecoder),this._readableState.decoder=new C(t),this._readableState.encoding=t,this};var B=8388608;i.prototype.read=function(e){k("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return k("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?_(this):l(this),null;if(e=u(e,t),0===e&&t.ended)return 0===t.length&&_(this),null;var r=t.needReadable;k("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,k("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,k("reading or ended",r)),r&&(k("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=u(n,t));var i;return i=e>0?w(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&_(this),null!==i&&this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){k("onunpipe"),e===l&&o()}function i(){k("onend"),e.end()}function o(){k("cleanup"),e.removeListener("close",u),e.removeListener("finish",c),e.removeListener("drain",v),e.removeListener("error",a),e.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",s),m=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){k("ondata");var n=e.write(t);!1===n&&(1!==h.pipesCount||h.pipes[0]!==e||1!==l.listenerCount("data")||m||(k("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++),l.pause())}function a(t){k("onerror",t),f(),e.removeListener("error",a),0===O(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",c),f()}function c(){k("onfinish"),e.removeListener("close",u),f()}function f(){k("unpipe"),l.unpipe(e)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,k("pipe count=%d opts=%j",h.pipesCount,t);var p=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,d=p?i:o;h.endEmitted?S(d):l.once("end",d),e.on("unpipe",r);var v=g(l);e.on("drain",v);var m=!1;return l.on("data",s),e._events&&e._events.error?A(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",c),e.emit("pipe",l),h.flowing||(k("pipe resume"),l.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=j(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=R.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&l(this,r):S(v,this))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(k("resume"),e.flowing=!0,m(this,e)),this},i.prototype.pause=function(){return k("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(k("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(k("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(k("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return E(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){k("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":99,_process:85,buffer:5,"core-util-is":7,events:9,inherits:11,isarray:13,"process-nextick-args":84,"string_decoder/":113,util:4}],102:[function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":99,"core-util-is":7,inherits:11}],103:[function(e,t,n){"use strict";function r(){}function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function o(t,n){var r=e("./_stream_duplex");t=t||{},this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function s(t){var n=e("./_stream_duplex");return this instanceof s||this instanceof n?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void S.call(this)):new s(t)}function a(e,t){var n=new Error("write after end");e.emit("error",n),x(t,n)}function u(e,t,n,r){var i=!0;if(!E.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),x(r,o),i=!1}return i}function c(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new E(t,n)),t}function f(e,t,n,r,o){n=c(t,n,r),E.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var a=t.length<t.highWaterMark;if(a||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new i(n,r,o),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest}else l(e,t,!1,s,n,r,o);return a}function l(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,n,r,i){--t.pendingcb,n?x(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(p(n),t)h(e,n,r,t,i);else{var o=y(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||m(e,n),r?x(g,e,n,o,i):g(e,n,o,i)}}function g(e,t,n,r){n||v(e,t),t.pendingcb--,r(),w(e,t)}function v(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){for(var r=[],i=[];n;)i.push(n.callback),r.push(n),n=n.next;t.pendingcb++,t.lastBufferedRequest=null,l(e,t,!0,t.length,r,"",function(e){for(var n=0;n<i.length;n++)t.pendingcb--,i[n](e)})}else{for(;n;){var o=n.chunk,s=n.encoding,a=n.callback,u=t.objectMode?1:o.length;if(l(e,t,!1,u,o,s,a),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=y(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function _(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?x(n):e.once("finish",n)),t.ended=!0}t.exports=s;var x=e("process-nextick-args"),E=e("buffer").Buffer;s.WritableState=o;var j=e("core-util-is");j.inherits=e("inherits");var S,A={deprecate:e("util-deprecate")};!function(){try{S=e("stream")}catch(t){}finally{S||(S=e("events").EventEmitter)}}();var E=e("buffer").Buffer;j.inherits(s,S),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}(),s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,n){var i=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),E.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?a(this,n):u(this,i,e,n)&&(i.pendingcb++,o=f(this,i,e,t,n)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},s.prototype._write=function(e,t,n){n(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||_(this,r,n)}},{"./_stream_duplex":99,buffer:5,"core-util-is":7,events:9,inherits:11,"process-nextick-args":84,"util-deprecate":116}],104:[function(e,t,n){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":100}],105:[function(e,t,n){var r=function(){try{return e("stream")}catch(t){}}();n=t.exports=e("./lib/_stream_readable.js"),n.Stream=r||n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":99,"./lib/_stream_passthrough.js":100,"./lib/_stream_readable.js":101,"./lib/_stream_transform.js":102,"./lib/_stream_writable.js":103}],106:[function(e,t,n){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":102}],107:[function(e,t,n){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":103}],108:[function(e,t,n){function r(){i.call(this)}t.exports=r;var i=e("events").EventEmitter,o=e("inherits");o(r,i),r.Readable=e("readable-stream/readable.js"),r.Writable=e("readable-stream/writable.js"),r.Duplex=e("readable-stream/duplex.js"),r.Transform=e("readable-stream/transform.js"),r.PassThrough=e("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){f||(f=!0,e.end())}function s(){f||(f=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",n),e.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),e.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",n),e.on("drain",r),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",s));var f=!1;return c.on("error",a),e.on("error",a),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},{events:9,inherits:11,"readable-stream/duplex.js":98,"readable-stream/passthrough.js":104,"readable-stream/readable.js":105,"readable-stream/transform.js":106,"readable-stream/writable.js":107}],109:[function(e,t,n){var r=e("./lib/request"),i=e("xtend"),o=e("builtin-status-codes"),s=e("url"),a=n;a.request=function(e,t){e="string"==typeof e?s.parse(e):i(e);var n=e.protocol||"",o=e.hostname||e.host,a=e.port,u=e.path||"/";o&&-1!==o.indexOf(":")&&(o="["+o+"]"),e.url=(o?n+"//"+o:"")+(a?":"+a:"")+u,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var c=new r(e);return t&&c.on("response",t),c},a.get=function(e,t){var n=a.request(e,t);return n.end(),n},a.Agent=function(){},a.Agent.defaultMaxSockets=4,a.STATUS_CODES=o,a.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]},{"./lib/request":111,"builtin-status-codes":6,url:114,xtend:117}],110:[function(e,t,n){(function(e){function t(e){try{return o.responseType=e,o.responseType===e}catch(t){}return!1}function r(e){return"function"==typeof e}n.fetch=r(e.fetch)&&r(e.ReadableByteStream),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(i){}var o=new e.XMLHttpRequest;o.open("GET",e.location.host?"/":"https://example.com");var s="undefined"!=typeof e.ArrayBuffer,a=s&&r(e.ArrayBuffer.prototype.slice);n.arraybuffer=s&&t("arraybuffer"),n.msstream=!n.fetch&&a&&t("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&s&&t("moz-chunked-arraybuffer"),n.overrideMimeType=r(o.overrideMimeType),n.vbArray=r(e.VBArray),o=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],111:[function(e,t,n){(function(n,r,i){function o(e){return a.fetch?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}function s(e){try{return null!==e.status}catch(t){return!1}}var a=e("./capability"),u=e("inherits"),c=e("./response"),f=e("stream"),l=c.IncomingMessage,h=c.readyStates,p=t.exports=function(e){var t=this;f.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new i(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(n){t.setHeader(n,e.headers[n])});var n;if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}t._mode=o(n),t.on("finish",function(){t._onFinish()})};u(p,f.Writable),p.prototype.setHeader=function(e,t){var n=this,r=e.toLowerCase();-1===d.indexOf(r)&&(n._headers[r]={name:e,value:t})},p.prototype.getHeader=function(e){var t=this;return t._headers[e.toLowerCase()].value},p.prototype.removeHeader=function(e){var t=this;delete t._headers[e.toLowerCase()]},p.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t,o=e._opts,s=e._headers;if("POST"!==o.method&&"PUT"!==o.method&&"PATCH"!==o.method||(t=a.blobConstructor?new r.Blob(e._body.map(function(e){return e.toArrayBuffer()}),{type:(s["content-type"]||{}).value||""}):i.concat(e._body).toString()),"fetch"===e._mode){var u=Object.keys(s).map(function(e){return[s[e].name,s[e].value]});r.fetch(e._opts.url,{method:e._opts.method,headers:u,body:t,mode:"cors",credentials:o.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)})}else{var c=e._xhr=new r.XMLHttpRequest;try{c.open(e._opts.method,e._opts.url,!0)}catch(f){return void n.nextTick(function(){e.emit("error",f)})}"responseType"in c&&(c.responseType=e._mode.split(":")[0]),"withCredentials"in c&&(c.withCredentials=!!o.withCredentials),"text"===e._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),Object.keys(s).forEach(function(e){c.setRequestHeader(s[e].name,s[e].value)}),e._response=null,c.onreadystatechange=function(){switch(c.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(c.onprogress=function(){e._onXHRProgress()}),c.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{c.send(t)}catch(f){return void n.nextTick(function(){e.emit("error",f)})}}}},p.prototype._onXHRProgress=function(){var e=this;s(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},p.prototype._connect=function(){var e=this;e._destroyed||(e._response=new l(e._xhr,e._fetchResponse,e._mode),e.emit("response",e._response))},p.prototype._write=function(e,t,n){var r=this;r._body.push(e),n()},p.prototype.abort=p.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},p.prototype.end=function(e,t,n){var r=this;"function"==typeof e&&(n=e,e=void 0),f.Writable.prototype.end.call(r,e,t,n)},p.prototype.flushHeaders=function(){},p.prototype.setTimeout=function(){},p.prototype.setNoDelay=function(){},p.prototype.setSocketKeepAlive=function(){};var d=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":110,"./response":112,_process:85,buffer:5,inherits:11,stream:108}],112:[function(e,t,n){(function(t,r,i){var o=e("./capability"),s=e("inherits"),a=e("stream"),u=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=n.IncomingMessage=function(e,n,r){function s(){h.read().then(function(e){if(!u._destroyed){if(e.done)return void u.push(null);u.push(new i(e.value)),s()}})}var u=this;if(a.Readable.call(u),u._mode=r,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",function(){t.nextTick(function(){u.emit("close")})}),"fetch"===r){u._fetchResponse=n,u.statusCode=n.status,u.statusMessage=n.statusText;for(var c,f,l=n.headers[Symbol.iterator]();c=(f=l.next()).value,!f.done;)u.headers[c[0].toLowerCase()]=c[1],u.rawHeaders.push(c[0],c[1]);var h=n.body.getReader();s()}else{u._xhr=e,u._pos=0,u.statusCode=e.status,u.statusMessage=e.statusText;var p=e.getAllResponseHeaders().split(/\r?\n/);if(p.forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var n=t[1].toLowerCase();void 0!==u.headers[n]?u.headers[n]+=", "+t[2]:u.headers[n]=t[2],u.rawHeaders.push(t[1],t[2])}}),u._charset="x-user-defined",!o.overrideMimeType){var d=u.rawHeaders["mime-type"];if(d){var g=d.match(/;\s*charset=([^;])(;|$)/);g&&(u._charset=g[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};s(c,a.Readable),c.prototype._read=function(){},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{n=new r.VBArray(t.responseBody).toArray()}catch(o){}if(null!==n){e.push(new i(n));break}case"text":try{n=t.responseText}catch(o){e._mode="text:vbarray";break}if(n.length>e._pos){var s=n.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new i(s.length),c=0;c<s.length;c++)a[c]=255&s.charCodeAt(c);e.push(a)}else e.push(s,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==u.DONE)break;n=t.response,e.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==u.LOADING||!n)break;e.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==u.LOADING)break;var f=new r.MSStreamReader;f.onprogress=function(){f.result.byteLength>e._pos&&(e.push(new i(new Uint8Array(f.result.slice(e._pos)))),e._pos=f.result.byteLength)},f.onload=function(){e.push(null)},f.readAsArrayBuffer(n)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":110,_process:85,buffer:5,inherits:11,stream:108}],113:[function(e,t,n){function r(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:5}],114:[function(e,t,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&c.isObject(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return c.isString(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function s(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=e("punycode"),c=e("./util");n.parse=i,n.resolve=s,n.resolveObject=a,n.format=o,n.Url=r;var f=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],d=["{","}","|","\\","^","`"].concat(p),g=["'"].concat(d),v=["%","/","?",";","#"].concat(g),m=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},j=e("querystring");r.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),e=o.join(i);var a=e;if(a=a.trim(),!n&&1===e.split("#").length){var l=h.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=j.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=f.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(n||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===a.substr(0,2);
!S||p&&x[p]||(a=a.substr(2),this.slashes=!0)}if(!x[p]&&(S||p&&!E[p])){for(var A=-1,L=0;L<m.length;L++){var R=a.indexOf(m[L]);-1!==R&&(-1===A||A>R)&&(A=R)}var O,T;T=-1===A?a.lastIndexOf("@"):a.lastIndexOf("@",A),-1!==T&&(O=a.slice(0,T),a=a.slice(T+1),this.auth=decodeURIComponent(O)),A=-1;for(var L=0;L<v.length;L++){var R=a.indexOf(v[L]);-1!==R&&(-1===A||A>R)&&(A=R)}-1===A&&(A=a.length),this.host=a.slice(0,A),a=a.slice(A),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var I=this.hostname.split(/\./),L=0,C=I.length;C>L;L++){var B=I[L];if(B&&!B.match(b)){for(var M="",U=0,P=B.length;P>U;U++)M+=B.charCodeAt(U)>127?"x":B[U];if(!M.match(b)){var q=I.slice(0,L),D=I.slice(L+1),N=B.match(w);N&&(q.push(N[1]),D.unshift(N[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=q.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=u.toASCII(this.hostname));var F=this.port?":"+this.port:"",Y=this.hostname||"";this.host=Y+F,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!_[d])for(var L=0,C=g.length;C>L;L++){var H=g[L];if(-1!==a.indexOf(H)){var W=encodeURIComponent(H);W===H&&(W=escape(H)),a=a.split(H).join(W)}}var z=a.indexOf("#");-1!==z&&(this.hash=a.substr(z),a=a.slice(0,z));var $=a.indexOf("?");if(-1!==$?(this.search=a.substr($),this.query=a.substr($+1),t&&(this.query=j.parse(this.query)),a=a.slice(0,$)):t&&(this.search="",this.query={}),a&&(this.pathname=a),E[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",G=this.search||"";this.path=F+G}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=j.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||E[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),s=s.replace("#","%23"),t+i+n+s+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(c.isString(e)){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),u=0;u<a.length;u++){var f=a[u];"protocol"!==f&&(n[f]=e[f])}return E[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!E[e.protocol]){for(var l=Object.keys(e),h=0;h<l.length;h++){var p=l[h];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||x[e.protocol])n.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",v=n.search||"";n.path=g+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||m||n.host&&e.pathname,w=b,_=n.pathname&&n.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],j=n.protocol&&!E[n.protocol];if(j&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),b=b&&(""===d[0]||""===_[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(j){n.hostname=n.host=_.shift();var S=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=_.slice(-1)[0],L=(n.host||e.host||_.length>1)&&("."===A||".."===A)||""===A,R=0,O=_.length;O>=0;O--)A=_[O],"."===A?_.splice(O,1):".."===A?(_.splice(O,1),R++):R&&(_.splice(O,1),R--);if(!b&&!w)for(;R--;R)_.unshift("..");!b||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),L&&"/"!==_.join("/").substr(-1)&&_.push("");var T=""===_[0]||_[0]&&"/"===_[0].charAt(0);if(j){n.hostname=n.host=T?"":_.length?_.shift():"";var S=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;S&&(n.auth=S.shift(),n.host=n.hostname=S.shift())}return b=b||n.host&&_.length,b&&!T&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=l.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":115,punycode:94,querystring:97}],115:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],116:[function(e,t,n){(function(e){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null==r?!1:"true"===String(r).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],117:[function(e,t,n){function r(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)i.call(n,r)&&(e[r]=n[r])}return e}t.exports=r;var i=Object.prototype.hasOwnProperty},{}],118:[function(e,t,n){function r(e){return this.options=u.assign(f,e||{}),this.options.serverUrl=this.options.server+"/ipcc/$$$",this.session={sid:null,eventTimestamp:0,msgTimestamp:0,entity:"",chat:null},this.on("session/create",function(e){this.session.sid=e.sid}),this.on("Error",function(e,t){console.log("ERROR: ",e,t),404===e.code&&this.sessionTimeout(t),console.error(e,t)}),this}var i=e("events").EventEmitter,o=e("./storage"),s=e("./request"),a=e("url").parse(document.URL,!0),u=e("./lodash"),c=e("inherits"),f={server:"",path:"/wchat/"};c(r,i),t.exports=r,r.prototype.initModule=function(){var e=this.getState("entity"),t=this.getState("sid");a.query.chatSessionId?this.updateEvents([{shared:!0}],function(e,t){e||(this.saveState("entity","agent"),this.saveState("sid",a.query.chatSessionId),this.emit("session/join"))}.bind(this)):t?this.updateEvents([{url:a.href}],function(n,r){n||(this.saveState("sid",t),this.emit("session/continue",{entity:e}))}.bind(this)):(this.saveState("entity","user"),this.createSession(a.href))},r.prototype.createSession=function(e){s.post(this.options.serverUrl,{method:"createSession",params:{url:e||a.href}},function(e,t,n){return e?void this.emit("Error",e):(this.saveState("sid",n.result.sid),void this.emit("session/create",n.result))}.bind(this))},r.prototype.updateEvents=function(e,t){var n={method:"updateEvents",params:{sid:this.getState("sid"),timestamp:this.getState("eventTimestamp"),events:e}};s.post(this.options.serverUrl,n,function(e,r,i){return e?(this.emit("Error",e,n),t(e)):(this.saveState("eventTimestamp",i.result.timestamp),void t(null,i))}.bind(this))},r.prototype.getLanguages=function(e){s.post(this.options.serverUrl,{method:"getLanguages",params:{sid:this.getState("sid")}},function(t,n,r){return t?(this.emit("Error",t),e(t)):void e(null,r)}.bind(this))},r.prototype.chatRequest=function(e,t){e.sid=this.getState("sid"),s.post(this.options.serverUrl,{method:"chatRequest",params:e},function(e,n,r){return e?(this.emit("Error",e),void(t&&t(e))):(this.emit("chat/start",r.result),void(t&&t(null,r)))}.bind(this))},r.prototype.getMessages=function(e){s.post(this.options.serverUrl,{method:"getMessages",params:{sid:this.getState("sid"),timestamp:this.getState("msgTimestamp")}},function(t,n,r){return t?(this.emit("Error",t),e(t)):(r.result.messages?this.emit("message/new",r.result):r.result.typing&&this.emit("message/typing",r.result),this.saveState("msgTimestamp",r.result.timestamp),void(e&&e(null,r.result)))}.bind(this))},r.prototype.sendMessage=function(e,t){var n={sid:this.getState("sid"),text:e};t&&(n.file=t),s.post(this.options.serverUrl,{method:"setMessage",params:n},function(e,t,n){return e?(this.emit("Error",e),cb(e)):void 0})},r.prototype.closeChat=function(e){var t={method:"closeChat",params:{sid:this.getState("sid")}};e&&(t.params.rating=e),s.post(this.options.serverUrl,t,function(n,r,i){return n?void this.emit("Error",n,t):(this.saveState("chat",!1),void this.emit("chat/close",{rating:e}))}.bind(this))},r.prototype.sendEmail=function(e,t){e.sid=this.getState("sid"),s.post(this.options.serverUrl,{method:"sendMail",params:e},function(n,r,i){return n?(this.emit("Error",n),void(t&&t(n))):(this.emit("chat/send",e),void(t&&t(null,i)))}.bind(this))},r.prototype.disjoinSession=function(e){s.post(this.options.serverUrl,{method:"disjoinSession",params:{sid:e}},function(e,t,n){return e?void this.emit("Error",e):void this.emit("session/disjoin")}.bind(this))},r.prototype.setChatTimeout=function(e){return setTimeout(function(){this.emit("chat/timeout")}.bind(this),1e3*e)},r.prototype.userIsTyping=function(){s.post(this.options.serverUrl,{method:"typing",params:{sid:this.getState("sid")}},function(e){return e?void this.emit("Error",e):void 0}.bind(this))},r.prototype.linkFollowed=function(e){s.post(this.options.serverUrl,{method:"linkFollowed",params:{sid:this.getState("sid"),url:e}},function(e,t,n){return e?void this.emit("Error",e):void 0}.bind(this))},r.prototype.saveState=function(e,t,n){return this.session[e]=t,o.set(e,t,n),t},r.prototype.getState=function(e,t){return t?"cache"===t?this.session[e]:o.get(e,t):void 0!==this.session[e]&&null!==this.session[e]?this.session[e]:o.get(e)},r.prototype.removeState=function(e,t){delete this.session[e],o.remove(e)},r.prototype.sessionTimeout=function(e){this.emit("session/timeout",e)}},{"./lodash":119,"./request":121,"./storage":122,events:9,inherits:11,url:114}],119:[function(e,t,n){var r=e("lodash/string/template"),i=e("lodash/collection/forEach"),o=e("lodash/object/assign"),s=e("lodash/object/merge"),a=e("lodash/lang/isEqual"),u=e("lodash/string/trim"),c=e("lodash/function/throttle"),f=e("lodash/function/debounce");t.exports={template:r,forEach:i,assign:o,merge:s,isEqual:a,trim:u,throttle:c,debounce:f}},{"lodash/collection/forEach":14,"lodash/function/debounce":16,"lodash/function/throttle":18,"lodash/lang/isEqual":66,"lodash/object/assign":74,"lodash/object/merge":77,"lodash/string/template":79,"lodash/string/trim":81}],120:[function(e,t,n){var r=e("./widget.js");e("./core.js");t.exports=r},{"./core.js":118,"./widget.js":123}],121:[function(e,t,n){function r(e,t,n){var r=o.parse(e),i=JSON.stringify(t),a="",u={hostname:r.hostname,method:"POST",port:r.port,path:r.path,"Content-type":"application/json; charset=UTF-8","Content-length":i.length},c=s.request(u,function(e){e.setEncoding("utf8"),e.on("data",function(e){a+=e}),e.on("end",function(){"{}"===a&&(a=JSON.parse({result:"OK"})),a=JSON.parse(a),a.error?n(a.error):n(null,e,a)})});c.on("error",function(e){n(e)}),c.write(i),c.end()}function i(e,t,n){var r="";return e&&a[e]?n(null,a[e]):void s.get(t,function(t){t.setEncoding("utf8"),t.on("data",function(e){r+=e}),t.on("end",function(){e&&(a[e]=r),n(null,r)})}).on("error",function(e){n(e)})}var o=e("url"),s=e("http"),a={};t.exports={post:r,get:i}},{http:109,url:114}],122:[function(e,t,n){(function(e){var n=e.localStorage,r=e.sessionStorage,i="swc",o=".";t.exports={get:function(e,t){return"session"===t?JSON.parse(r.getItem(i+o+e)):JSON.parse(n.getItem(i+o+e))},set:function(e,t,s){return"session"===s?r.setItem(i+o+e,JSON.stringify(t)):n.setItem(i+o+e,JSON.stringify(t)),t},remove:function(e,t){"session"===t?r.removeItem(i+o+e):n.removeItem(i+o+e)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],123:[function(e,t,n){(function(n){function r(e){return we.merge(Ee,e||{}),ye=new ye(e).on("session/create",o).on("session/continue",o),Ee.widget&&ye.on("chat/start",g).on("chat/timeout",L).on("message/new",y).on("message/typing",R).on("form/submit",$).on("form/reject",G).on("widget/load",a),O(),be.get("forms_json",Ee.path+"forms.json",function(e,t){return e?ye.emit("Error",e):void(ce=JSON.parse(t).forms)}),be.get("forms_tmp",Ee.path+"partials/forms.html",function(e,t){return e?ye.emit("Error",e):void 0}),Re}function i(){ye.initModule()}function o(){Le=X(),O(),Ee.widget&&!je.initiated&&ae()&&s(),Y("timeout")&&(H("timeout"),u())}function s(e){var t;be.get("widget_tmp",Ee.path+"widget.html",function(e,n){e||(t=J(n,{defaults:Ee,languages:Ae,translations:xe,currLang:Le||Ee.lang,credentials:ye.getState("credentials","session")||{},_:we}),pe=_e(t),document.body.insertBefore(pe,document.body.firstChild),ye.emit("widget/load",pe))})}function a(e){ye.once("chat/languages",f),u()}function u(){ye.getLanguages(function(e,t){e||(t&&c(t.result),setTimeout(u,1e3*Ee.checkStatusTimeout))})}function c(e){var t,r=e.length?"online":"offline",i="";je.state!==r&&(Ae=e,pe&&Ee.intro.length&&(Ae.forEach(function(e){t=e===Le?"selected":"",i+='<option value="'+e+'" '+t+" >"+xe[e].lang+"</option>"}),n[Ee.prefix+"IntroForm"].lang.innerHTML=i),D({state:r}),ye.emit("chat/languages",e))}function f(){je.initiated=!0,k(pe),D({state:je.state}),Ee.hideOfflineButton&&F("no-button"),Ee.offer&&l(),ye.getState("chat")===!0&&(d(ye.getState("credentials","session")||{}),W()),ye.emit("widget/init")}function l(){setTimeout(function(){h({from:Ee.offer.from||xe[Le].default_title,time:Date.now(),text:Ee.offer.text||xe[Le].default_offer})},Ee.offer.inSeconds?1e3*Ee.offer.inSeconds:3e4)}function h(e){"online"!==je.state||ye.getState("interacted","session")||y({messages:[e]})}function p(){W(),ye.getState("chat","cache")||(Ae.length?Ee.intro.length?ye.getState("chat")?d(ye.getState("credentials","session")):q("credentials"):d({lang:Le}):q("sendemail"))}function d(e){e.uname||(e.uname=ye.getState("sid").split("_")[0]),e.lang&&e.lang!==Le&&ye.saveState("lang",e.lang),e.lang||(e.lang=Le),ye.saveState("credentials",e,"session"),ye.chatRequest(e)}function g(e){q("messages"),ye.saveState("chat",!0),e.timeout&&(le=ye.setChatTimeout(e.timeout)),v(),F("chat")}function v(){ye.getMessages(function(){ye.getState("chat")&&(fe=setTimeout(v,1e3*Ee.getMessagesTimeout))})}function m(e){ye.sendMessage(e),le&&clearTimeout(le)}function y(e){var t,r,i=!1,o=ye.getState("credentials","session")||{},s=ye.getState("aname","session"),a=o.uname?o.uname:"";a===ye.getState("sid").split("_")[0]&&(i=!0),e.messages.forEach(function(u,c){u.entity=u.from===a?"user":"agent",u.from="user"===u.entity&&i?xe[Le].default_user_name:u.from,u.time=Z(u.time?u.time:Date.now()),t=Q(u.text,u.file,u.entity),"form"===t.type?be.get("forms_tmp",Ee.path+"partials/forms.html",function(e,i){return e?cb(e):(r=J(i,{defaults:Ee,message:u,form:t.content,credentials:o,frases:xe[Le||Ee.lang],_:we}),n[t.content.name]&&G(t.content.name),he.insertAdjacentHTML("beforeend","<li>"+r+"</li>"),void(he.scrollTop=he.scrollHeight))}):(u.text=t.content,r=J(V(),u),he.insertAdjacentHTML("beforeend","<li>"+r+"</li>"),c===e.messages.length-1&&b(r),Se.push(r)),"agent"===u.entity&&s!==u.from&&ye.saveState("aname",u.from,"session")}),he.scrollTop=he.scrollHeight}function b(e){var t;je.active||(t=document.getElementById(Ee.prefix+"-lastmsg"),se(t,"animationend",["webkit","moz","MS","o",""],function(e){btn.children[0].style.height=e.target.scrollHeight+"px"}),t.innerHTML=e,F("notified"),N("notified"))}function w(e,t){var n;be.get("email_tmp",Ee.path+"partials/email.html",function(r,i){return r?t(r):(n=J(i,{defaults:Ee,content:e,frases:xe[Le||Ee.lang],_:we}),t?t(null,n):void 0)})}function _(e){var t=e.text.join("");w(t,function(t,n){t||(e.text=n,ye.sendEmail(e))})}function x(e){var t=[],n=J(V(),{from:xe[Le].email_subjects.complain+" "+e.email,text:e.text,entity:"",time:""});t=t.concat(n,'<br><p class="h1">'+xe[Le].email_subjects.dialog+" "+Ee.host+"</p><br>",Se).reduce(function(e,t){return e.concat(t)}),w(t,function(t,n){t||(e.text=n,ye.sendEmail(e))})}function E(e,t){var n=J(V(),{from:xe[Le].email_subjects.request+" "+e.uname+" ("+e.email+")",text:e.text,entity:"",time:""});w(n,function(n,r){n||(e.text=r,ye.sendEmail(e),t&&t())})}function j(e,t){var n;return t.email?(t.subject=xe[Le].email_subjects.request+" "+t.email,void(t.file?n=K(e.file,function(n,r){n?console.warn("File was not sent"):(t.filename=r.filename,t.filedata=r.filedata),delete t.file,E(t,function(){e.reset(),z()})}):E(t,function(){e.reset(),z()}))):void alert(xe[Le].required_error.email)}function S(e,t){var n=t&&t.rating?parseInt(t.rating,10):null;if(t&&t.sendDialog){if(!t.email)return void alert(xe[Le].required_error.email);_({to:t.email,subject:xe[Le].email_subjects.dialog+" "+Ee.host,text:Se})}if(t&&t.text){if(!t.email)return void alert(xe[Le].required_error.email);x({email:t.email,subject:xe[Le].email_subjects.complain+" "+t.email,text:t.text})}le&&clearTimeout(le),e&&e.reset(),A(n),z()}function A(e){ye.saveState("chat",!1),ye.closeChat(e),H("chat")}function L(){q("closechat"),A()}function R(e){ve||F("agent-typing"),clearTimeout(ve),ve=setTimeout(function(){ve=null,H("agent-typing")},5e3)}function O(){ye.listenerCount("session/timeout")>=1||ye.once("session/timeout",function(e){ye.getState("chat")===!0&&A(),pe&&z(),D({state:"timeout"}),N("timeout"),ye.removeState("sid"),e&&"updateEvents"===e.method&&i()})}function T(){var e=Ee.path+"window.html";de&&!de.closed||(de=window.open(e,"webchat",Ee.widgetWindowOptions),de.onbeforeunload=function(){ye.getState("chat","storage")&&A()},de.onload=function(){var e,t={};we.assign(t,Ee),t.widget=!0,e=this.Wchat(t),e.on("widget/init",e.initChat),e.initModule()}),de.focus&&de.focus()}function k(e){var t=document.getElementById(Ee.prefix+"-file-select"),n=document.getElementById(Ee.prefix+"-message-text");btn=document.getElementById(Ee.prefix+"-btn-cont"),ge=[].slice.call(e.querySelectorAll("."+Ee.prefix+"-wg-pane")),he=document.getElementById(Ee.prefix+"-messages-cont"),ue(btn,"click",C),ue(e,"click",I),ue(e,"submit",U),ue(t,"change",P),ue(n,"keypress",M)}function I(e){var t,n,r,i,o=e.target;"A"!==o.parentNode.tagName&&"BUTTON"!==o.parentNode.tagName||(o=o.parentNode),t=o.getAttribute("data-"+Ee.prefix+"-handler"),i=o.getAttribute("data-"+Ee.prefix+"-link"),"close"===t?z():"finish"===t?ye.getState("chat")?q("closechat"):z():"sendMessage"===t?B():"openWindow"===t?T():"cancel"===t&&ye.emit("form/reject",o.parentNode.name),"A"===o.tagName&&(r=o.href,i?ye.linkFollowed(i):-1!==r.indexOf("#")&&(e.preventDefault(),n=r.substring(o.href.indexOf("#")+1),n&&q(n)))}function C(e){e.preventDefault();var t=e.target,n=e.currentTarget;return ye.getState("interacted","session")||ye.saveState("interacted",!0,"session"),t.id===Ee.prefix+"-unnotify-btn"?(H("notified"),oe(btn.children[0]),void N(je.state)):void(n.id===Ee.prefix+"-btn-cont"&&(Y("timeout")?i():p()))}function B(){var e,t=document.getElementById(Ee.prefix+"-message-text");e=we.trim(t.value),e&&(m(e),t.value="",H("type-extend")),ye.getState("chat")||p()}function M(e){var t=e.target;10===e.keyCode||13===e.keyCode?(e.preventDefault(),B()):me||(me=setTimeout(function(){me=null,ye.userIsTyping()},1e3)),t.value.length>=80&&!Y("type-extend")&&F("type-extend"),t.value.length<80&&Y("type-extend")&&H("type-extend")}function U(e){var t=e.target;e.preventDefault(),"FORM"===t.tagName&&ye.emit("form/submit",t)}function P(e){var t=e.target;K(t,function(e,t){e?alert("File was not sent"):ye.sendMessage(t.filedata,t.filename)})}function q(e){var t="data-"+Ee.prefix+"-pane";ge.forEach(function(n){n.getAttribute(t)===e?n.classList.add("active"):n.classList.remove("active")})}function D(e){pe&&je.state!==e.state&&("offline"===e.state?H("online"):"online"===e.state&&H("offline"),je.state=e.state,F(e.state),N(e.state))}function N(e){if(pe&&void 0!==Ee.buttonStyles[e]){var t=pe.querySelector("."+Ee.prefix+"-wg-btn"),n=pe.querySelector("."+Ee.prefix+"-btn-icon");t.style.backgroundColor=Ee.buttonStyles[e].backgroundColor,n.style.color=Ee.buttonStyles[e].color||Ee.buttonStyles.color}}function F(e){pe&&pe.classList.add(e)}function Y(e){return pe?pe.classList.contains(e):!1}function H(e){pe&&pe.classList.remove(e)}function W(){je.active=!0,F("active"),H("notified"),oe(btn.children[0]),N(je.state),he.scrollTop=he.scrollHeight}function z(){window.opener?window.close():(je.active=!1,H("active"))}function $(e){var t=re(e);if(e.getAttribute("data-validate-form")){var n=ie(e);if(!n)return}e.id===Ee.prefix+"-closechat-form"?S(e,t):e.id===Ee.prefix+"-sendmail-form"?j(e,t):e.id===Ee.prefix+"-intro-form"?d(t):G(e.name,!0)}function G(e,t){var r=n[e];return r?void(t?r.outerHTML='<p class="'+Ee.prefix+'-text-center"><i class="'+Ee.prefix+"-text-success "+Ee.prefix+'-icon-check"></i><span> '+xe[Le].form_submitted+"</span></p>":r.outerHTML='<p class="'+Ee.prefix+'-text-center"><i class="'+Ee.prefix+"-text-danger "+Ee.prefix+'-icon-remove"></i><span> '+xe[Le].form_cancelled+"</span></p>"):!1}function K(e,t){var r,i,o=e.files;if(o.length){if(!n.FileReader)return void(t&&t("OBSOLETE_BROWSER"));r=o[0],i=new FileReader,i.onload=function(e){t&&t(null,{filedata:e.target.result,filename:r.name})},i.onerror=function(e){ye.emit("Error",e.target.error),t&&t(e.target.error)},i.readAsDataURL(r)}}function V(){var e='<div class="'+Ee.prefix+"-message "+Ee.prefix+'-<%=entity %>-msg"><span class="'+Ee.prefix+'-message-from"><%=from %></span><span class="'+Ee.prefix+'-message-time"> <%= time %></span><br><p class="'+Ee.prefix+'-message-content" <% if(entity === "user") { %> style="border-color:'+Ee.styles.primary.backgroundColor+'" <% } %>><%=text %></p></div>';return e}function J(e,t){var n=we.template(e);return n(t)}function X(){var e,t=ye.getState("lang"),r=[];if(t)e=t;else{for(var i in xe)r.push(i);Ee.langFromUrl&&n.location.pathname.split("/").forEach(function(t){-1!==r.indexOf(t)&&(e=t)}),e||(e=(navigator.language||navigator.userLanguage).split("-")[0],-1===r.indexOf(e)&&(e=Ee.lang))}return e}function Z(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes(),i=(10>n?"0"+n:n)+":"+(10>r?"0"+r:r);return i}function Q(e,t,n){var r,i;return t?(r=e.substring(e.indexOf("_")+1),ne(t)?{type:"image",content:'<a href="'+ye.options.server+"/ipcc/"+e+'" download="'+r+'"><img src="'+ye.options.server+"/ipcc/"+e+'" alt="file preview" /></a>'}:{type:"file",content:'<a href="'+ye.options.server+"/ipcc/"+e+'" download="'+r+'">'+r+"</a>"}):"agent"===n&&new RegExp("^{.+}$").test(e)?(ce.forEach(function(t){t.name===e.substring(1,e.length-1)&&(i=t)}),{type:i?"form":"text",content:i?i:e}):{type:"text",content:e.split(" ").map(ee).join(" ")}}function ee(e){var t=0,n=e;if(te(e)){for(;!n.charAt(n.length-1).match(/[a-z]/i);)n=n.slice(0,-1),t+=1;return'<a href="'+n+'" target="_blank" data-'+Ee.prefix+'-link="'+n+'">'+n+"</a>"+e.substr(e.length-t)}return e}function te(e){var t=new RegExp("http://|https://|www");return t.test(e)}function ne(e){var t=new RegExp("png|jpg|jpeg|gif"),n=e.substring(e.lastIndexOf(".")+1);return t.test(n)}function re(e){var t={};return[].slice.call(e.elements).forEach(function(e){"checkbox"===e.type?t[e.name]=e.checked:e.value&&(t[e.name]=e.value)}),t}function ie(e){var t=!0;return[].slice.call(e.elements).every(function(e){return!e.hasAttribute("required")||""!==e.value&&null!==e.value?!0:(alert(xe[Le].required_error[e.type]||xe[Le].required_error.fields),t=!1,!1)}),t}function oe(e){e.removeAttribute("style")}function se(e,t,n,r){for(var i=0;i<n.length;i++)n[i]||(t=t.toLowerCase()),e.addEventListener(n[i]+t,r,!1)}function ae(){return void 0!==document.body.classList}function ue(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}var ce,fe,le,he,pe,de,ge,ve,me,ye=e("./core"),be=(e("events").EventEmitter,e("./request")),we=e("./lodash"),_e=e("domify"),xe=(e("promise"),e("../translations.json")),Ee={prefix:"swc",intro:!1,widget:!0,title:"",lang:"en",langFromUrl:!1,position:"right",hideOfflineButton:!1,offer:!1,styles:{primary:{backgroundColor:"#555555",color:"#FFFFFF"},intro:{backgroundImage:"images/bgr-02.jpg"},sendmail:{backgroundImage:"images/bgr-01.jpg"},closeChat:{backgroundImage:"images/bgr-02.jpg"}},buttonStyles:{online:{backgroundColor:"rgba(175,229,255,0.8)",color:""},offline:{backgroundColor:"rgba(241,241,241,0.8)",color:""},timeout:{backgroundColor:"rgba(241,241,241,0.8)",color:""},notified:{backgroundColor:"rgba(253,250,129,0.8)",color:""},color:"#777"},widgetWindowOptions:"left=10,top=10,width=350,height=550,resizable=yes",path:"/wchat/",checkStatusTimeout:30,getMessagesTimeout:1,host:window.location.host},je={initiated:!1,active:!1,state:""},Se=[],Ae=[],Le="";t.exports=r;var Re={initModule:i,openWidget:T,initChat:p,on:function(e,t){return ye.on(e,t),this},emit:function(e,t){return ye.emit(e,t),this},setDefaultCredentials:function(e){return Ee.credentials=e,this}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../translations.json":124,"./core":118,"./lodash":119,"./request":121,domify:8,events:9,promise:86}],124:[function(e,t,n){t.exports={en:{lang:"English",greets:"Greetings!",cancel:"Cancel",close:"Close",finish:"Finish",back:"Back",send:"Send",send_message_button:"Send message",start_dialog_button:"Start dialog",finish_dialog_button:"Finish dialog",choose_dialog_lang:"Choose dialog language",intro_message:"Please, introduce yourself",offline_message:"We are offline now, please leave us a message, we'll contact you shortly",send_message_header:"Send a message",close_chat_header:"Thank you for reaching us!",send_dialog_label:"Send dialog to your email?",rate_agent:"Rate agent service",rates:{excellent:"Excellent",good:"Good",fair:"Fair",bad:"Bad"},email_subjects:{dialog:"Your dialog on",complain:"Dialog comment from",request:"New message from"},required_error:{fields:"Please fill in all required fields",email:"Please fill in your email",tel:"Please fill in your telephone number"},form_submitted:"Form sent, thank you!",form_cancelled:"Form cancelled",default_user_name:"You",default_title:"Live chat",default_offer:"Welcome, need some help?",pholder:{uname:"Your name",email:"Your email",phone:"Your phone",subject:"Dialog's subject",message:"Your message here...",comment:"Please, leave your comment here..."}},uk:{lang:"",greets:"!",cancel:"",close:"",finish:"",back:"",send:"",send_message_button:"",start_dialog_button:" ",finish_dialog_button:" ",choose_dialog_lang:"  ",intro_message:" ,   ",offline_message:"  ,  ,   ,  '    ",send_message_header:" ",close_chat_header:",    !",send_dialog_label:"    email?",rate_agent:"  ",rates:{excellent:"",good:"",fair:"",bad:""},email_subjects:{dialog:"  ",complain:"   ",request:"  "},required_error:{fields:" ,    ",email:" ,    ",tel:" ,    "},form_submitted:" , !",form_cancelled:" ",default_user_name:"",default_title:" ",default_offer:" ,  ?",pholder:{uname:" '",email:"  ",phone:" ",subject:" ",message:"  ...",comment:" ,    ..."}},ru:{lang:"",greets:"!",cancel:"",close:"",finish:"",back:"",send:"",send_message_button:"",start_dialog_button:" ",finish_dialog_button:" ",choose_dialog_lang:"  ",intro_message:",   ",offline_message:"  , ,   ,       ",send_message_header:" ",close_chat_header:",    !",send_dialog_label:"    email?",rate_agent:"  ",rates:{excellent:"",good:"",fair:"",bad:""},email_subjects:{dialog:"  ",complain:"   ",request:"  "},required_error:{fields:",    ",email:",    ",tel:",    "},form_submitted:" , !",form_cancelled:" ",default_user_name:"",default_title:" ",default_offer:" ,  ?",pholder:{uname:" ",email:"  ",phone:" ",subject:" ",message:"  ...",comment:",    ..."}}}},{}]},{},[120])(120)});