(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Wchat = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

/**
 * Expose `parse`.
 */

module.exports = parse;

/**
 * Tests for browser support.
 */

var innerHTMLBug = false;
var bugTestDiv;
if (typeof document !== 'undefined') {
  bugTestDiv = document.createElement('div');
  // Setup
  bugTestDiv.innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';
  // Make sure that link elements get serialized correctly by innerHTML
  // This requires a wrapper element in IE
  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;
  bugTestDiv = undefined;
}

/**
 * Wrap map from jquery.
 */

var map = {
  legend: [1, '<fieldset>', '</fieldset>'],
  tr: [2, '<table><tbody>', '</tbody></table>'],
  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],
  // for script/link/style tags to work in IE6-8, you have to wrap
  // in a div with a non-whitespace character in front, ha!
  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']
};

map.td =
map.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];

map.option =
map.optgroup = [1, '<select multiple="multiple">', '</select>'];

map.thead =
map.tbody =
map.colgroup =
map.caption =
map.tfoot = [1, '<table>', '</table>'];

map.polyline =
map.ellipse =
map.polygon =
map.circle =
map.text =
map.line =
map.path =
map.rect =
map.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">','</svg>'];

/**
 * Parse `html` and return a DOM Node instance, which could be a TextNode,
 * HTML DOM Node of some kind (<div> for example), or a DocumentFragment
 * instance, depending on the contents of the `html` string.
 *
 * @param {String} html - HTML string to "domify"
 * @param {Document} doc - The `document` instance to create the Node for
 * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance
 * @api private
 */

function parse(html, doc) {
  if ('string' != typeof html) throw new TypeError('String expected');

  // default to the global `document` object
  if (!doc) doc = document;

  // tag name
  var m = /<([\w:]+)/.exec(html);
  if (!m) return doc.createTextNode(html);

  html = html.replace(/^\s+|\s+$/g, ''); // Remove leading/trailing whitespace

  var tag = m[1];

  // body support
  if (tag == 'body') {
    var el = doc.createElement('html');
    el.innerHTML = html;
    return el.removeChild(el.lastChild);
  }

  // wrap map
  var wrap = map[tag] || map._default;
  var depth = wrap[0];
  var prefix = wrap[1];
  var suffix = wrap[2];
  var el = doc.createElement('div');
  el.innerHTML = prefix + html + suffix;
  while (depth--) el = el.lastChild;

  // one element
  if (el.firstChild == el.lastChild) {
    return el.removeChild(el.firstChild);
  }

  // several elements
  var fragment = doc.createDocumentFragment();
  while (el.firstChild) {
    fragment.appendChild(el.removeChild(el.firstChild));
  }

  return fragment;
}

},{}],2:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      }
      throw TypeError('Uncaught, unspecified "error" event.');
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}

},{}],3:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],4:[function(require,module,exports){
var arrayEach = require('../internal/arrayEach'),
    baseEach = require('../internal/baseEach'),
    createForEach = require('../internal/createForEach');

/**
 * Iterates over elements of `collection` invoking `iteratee` for each element.
 * The `iteratee` is bound to `thisArg` and invoked with three arguments:
 * (value, index|key, collection). Iteratee functions may exit iteration early
 * by explicitly returning `false`.
 *
 * **Note:** As with other "Collections" methods, objects with a "length" property
 * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
 * may be used for object iteration.
 *
 * @static
 * @memberOf _
 * @alias each
 * @category Collection
 * @param {Array|Object|string} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @param {*} [thisArg] The `this` binding of `iteratee`.
 * @returns {Array|Object|string} Returns `collection`.
 * @example
 *
 * _([1, 2]).forEach(function(n) {
 *   console.log(n);
 * }).value();
 * // => logs each value from left to right and returns the array
 *
 * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {
 *   console.log(n, key);
 * });
 * // => logs each value-key pair and returns the object (iteration order is not guaranteed)
 */
var forEach = createForEach(arrayEach, baseEach);

module.exports = forEach;

},{"../internal/arrayEach":10,"../internal/baseEach":16,"../internal/createForEach":33}],5:[function(require,module,exports){
var getNative = require('../internal/getNative');

/* Native method references for those with the same name as other `lodash` methods. */
var nativeNow = getNative(Date, 'now');

/**
 * Gets the number of milliseconds that have elapsed since the Unix epoch
 * (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @category Date
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => logs the number of milliseconds it took for the deferred function to be invoked
 */
var now = nativeNow || function() {
  return new Date().getTime();
};

module.exports = now;

},{"../internal/getNative":40}],6:[function(require,module,exports){
var isObject = require('../lang/isObject'),
    now = require('../date/now');

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Native method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed invocations. Provide an options object to indicate that `func`
 * should be invoked on the leading and/or trailing edge of the `wait` timeout.
 * Subsequent calls to the debounced function return the result of the last
 * `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
 * on the trailing edge of the timeout only if the the debounced function is
 * invoked more than once during the `wait` timeout.
 *
 * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options] The options object.
 * @param {boolean} [options.leading=false] Specify invoking on the leading
 *  edge of the timeout.
 * @param {number} [options.maxWait] The maximum time `func` is allowed to be
 *  delayed before it's invoked.
 * @param {boolean} [options.trailing=true] Specify invoking on the trailing
 *  edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // avoid costly calculations while the window size is in flux
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // invoke `sendMail` when the click event is fired, debouncing subsequent calls
 * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // ensure `batchLog` is invoked once after 1 second of debounced calls
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', _.debounce(batchLog, 250, {
 *   'maxWait': 1000
 * }));
 *
 * // cancel a debounced call
 * var todoChanges = _.debounce(batchLog, 1000);
 * Object.observe(models.todo, todoChanges);
 *
 * Object.observe(models, function(changes) {
 *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {
 *     todoChanges.cancel();
 *   }
 * }, ['delete']);
 *
 * // ...at some point `models.todo` is changed
 * models.todo.completed = true;
 *
 * // ...before 1 second has passed `models.todo` is deleted
 * // which cancels the debounced `todoChanges` call
 * delete models.todo;
 */
function debounce(func, wait, options) {
  var args,
      maxTimeoutId,
      result,
      stamp,
      thisArg,
      timeoutId,
      trailingCall,
      lastCalled = 0,
      maxWait = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = wait < 0 ? 0 : (+wait || 0);
  if (options === true) {
    var leading = true;
    trailing = false;
  } else if (isObject(options)) {
    leading = !!options.leading;
    maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function cancel() {
    if (timeoutId) {
      clearTimeout(timeoutId);
    }
    if (maxTimeoutId) {
      clearTimeout(maxTimeoutId);
    }
    lastCalled = 0;
    maxTimeoutId = timeoutId = trailingCall = undefined;
  }

  function complete(isCalled, id) {
    if (id) {
      clearTimeout(id);
    }
    maxTimeoutId = timeoutId = trailingCall = undefined;
    if (isCalled) {
      lastCalled = now();
      result = func.apply(thisArg, args);
      if (!timeoutId && !maxTimeoutId) {
        args = thisArg = undefined;
      }
    }
  }

  function delayed() {
    var remaining = wait - (now() - stamp);
    if (remaining <= 0 || remaining > wait) {
      complete(trailingCall, maxTimeoutId);
    } else {
      timeoutId = setTimeout(delayed, remaining);
    }
  }

  function maxDelayed() {
    complete(trailing, timeoutId);
  }

  function debounced() {
    args = arguments;
    stamp = now();
    thisArg = this;
    trailingCall = trailing && (timeoutId || !leading);

    if (maxWait === false) {
      var leadingCall = leading && !timeoutId;
    } else {
      if (!maxTimeoutId && !leading) {
        lastCalled = stamp;
      }
      var remaining = maxWait - (stamp - lastCalled),
          isCalled = remaining <= 0 || remaining > maxWait;

      if (isCalled) {
        if (maxTimeoutId) {
          maxTimeoutId = clearTimeout(maxTimeoutId);
        }
        lastCalled = stamp;
        result = func.apply(thisArg, args);
      }
      else if (!maxTimeoutId) {
        maxTimeoutId = setTimeout(maxDelayed, remaining);
      }
    }
    if (isCalled && timeoutId) {
      timeoutId = clearTimeout(timeoutId);
    }
    else if (!timeoutId && wait !== maxWait) {
      timeoutId = setTimeout(delayed, wait);
    }
    if (leadingCall) {
      isCalled = true;
      result = func.apply(thisArg, args);
    }
    if (isCalled && !timeoutId && !maxTimeoutId) {
      args = thisArg = undefined;
    }
    return result;
  }
  debounced.cancel = cancel;
  return debounced;
}

module.exports = debounce;

},{"../date/now":5,"../lang/isObject":60}],7:[function(require,module,exports){
/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Native method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Creates a function that invokes `func` with the `this` binding of the
 * created function and arguments from `start` and beyond provided as an array.
 *
 * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/Web/JavaScript/Reference/Functions/rest_parameters).
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @returns {Function} Returns the new function.
 * @example
 *
 * var say = _.restParam(function(what, names) {
 *   return what + ' ' + _.initial(names).join(', ') +
 *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);
 * });
 *
 * say('hello', 'fred', 'barney', 'pebbles');
 * // => 'hello fred, barney, & pebbles'
 */
function restParam(func, start) {
  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);
  return function() {
    var args = arguments,
        index = -1,
        length = nativeMax(args.length - start, 0),
        rest = Array(length);

    while (++index < length) {
      rest[index] = args[start + index];
    }
    switch (start) {
      case 0: return func.call(this, rest);
      case 1: return func.call(this, args[0], rest);
      case 2: return func.call(this, args[0], args[1], rest);
    }
    var otherArgs = Array(start + 1);
    index = -1;
    while (++index < start) {
      otherArgs[index] = args[index];
    }
    otherArgs[start] = rest;
    return func.apply(this, otherArgs);
  };
}

module.exports = restParam;

},{}],8:[function(require,module,exports){
var debounce = require('./debounce'),
    isObject = require('../lang/isObject');

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a throttled function that only invokes `func` at most once per
 * every `wait` milliseconds. The throttled function comes with a `cancel`
 * method to cancel delayed invocations. Provide an options object to indicate
 * that `func` should be invoked on the leading and/or trailing edge of the
 * `wait` timeout. Subsequent calls to the throttled function return the
 * result of the last `func` call.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
 * on the trailing edge of the timeout only if the the throttled function is
 * invoked more than once during the `wait` timeout.
 *
 * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
 * for details over the differences between `_.throttle` and `_.debounce`.
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to throttle.
 * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
 * @param {Object} [options] The options object.
 * @param {boolean} [options.leading=true] Specify invoking on the leading
 *  edge of the timeout.
 * @param {boolean} [options.trailing=true] Specify invoking on the trailing
 *  edge of the timeout.
 * @returns {Function} Returns the new throttled function.
 * @example
 *
 * // avoid excessively updating the position while scrolling
 * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
 *
 * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes
 * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
 *   'trailing': false
 * }));
 *
 * // cancel a trailing throttled call
 * jQuery(window).on('popstate', throttled.cancel);
 */
function throttle(func, wait, options) {
  var leading = true,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  if (options === false) {
    leading = false;
  } else if (isObject(options)) {
    leading = 'leading' in options ? !!options.leading : leading;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }
  return debounce(func, wait, { 'leading': leading, 'maxWait': +wait, 'trailing': trailing });
}

module.exports = throttle;

},{"../lang/isObject":60,"./debounce":6}],9:[function(require,module,exports){
/**
 * Copies the values of `source` to `array`.
 *
 * @private
 * @param {Array} source The array to copy values from.
 * @param {Array} [array=[]] The array to copy values to.
 * @returns {Array} Returns `array`.
 */
function arrayCopy(source, array) {
  var index = -1,
      length = source.length;

  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}

module.exports = arrayCopy;

},{}],10:[function(require,module,exports){
/**
 * A specialized version of `_.forEach` for arrays without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns `array`.
 */
function arrayEach(array, iteratee) {
  var index = -1,
      length = array.length;

  while (++index < length) {
    if (iteratee(array[index], index, array) === false) {
      break;
    }
  }
  return array;
}

module.exports = arrayEach;

},{}],11:[function(require,module,exports){
/**
 * A specialized version of `_.some` for arrays without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {boolean} Returns `true` if any element passes the predicate check,
 *  else `false`.
 */
function arraySome(array, predicate) {
  var index = -1,
      length = array.length;

  while (++index < length) {
    if (predicate(array[index], index, array)) {
      return true;
    }
  }
  return false;
}

module.exports = arraySome;

},{}],12:[function(require,module,exports){
/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used by `_.template` to customize its `_.assign` use.
 *
 * **Note:** This function is like `assignDefaults` except that it ignores
 * inherited property values when checking if a property is `undefined`.
 *
 * @private
 * @param {*} objectValue The destination object property value.
 * @param {*} sourceValue The source object property value.
 * @param {string} key The key associated with the object and source values.
 * @param {Object} object The destination object.
 * @returns {*} Returns the value to assign to the destination object.
 */
function assignOwnDefaults(objectValue, sourceValue, key, object) {
  return (objectValue === undefined || !hasOwnProperty.call(object, key))
    ? sourceValue
    : objectValue;
}

module.exports = assignOwnDefaults;

},{}],13:[function(require,module,exports){
var keys = require('../object/keys');

/**
 * A specialized version of `_.assign` for customizing assigned values without
 * support for argument juggling, multiple sources, and `this` binding `customizer`
 * functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {Function} customizer The function to customize assigned values.
 * @returns {Object} Returns `object`.
 */
function assignWith(object, source, customizer) {
  var index = -1,
      props = keys(source),
      length = props.length;

  while (++index < length) {
    var key = props[index],
        value = object[key],
        result = customizer(value, source[key], key, object, source);

    if ((result === result ? (result !== value) : (value === value)) ||
        (value === undefined && !(key in object))) {
      object[key] = result;
    }
  }
  return object;
}

module.exports = assignWith;

},{"../object/keys":65}],14:[function(require,module,exports){
var baseCopy = require('./baseCopy'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.assign` without support for argument juggling,
 * multiple sources, and `customizer` functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @returns {Object} Returns `object`.
 */
function baseAssign(object, source) {
  return source == null
    ? object
    : baseCopy(source, keys(source), object);
}

module.exports = baseAssign;

},{"../object/keys":65,"./baseCopy":15}],15:[function(require,module,exports){
/**
 * Copies properties of `source` to `object`.
 *
 * @private
 * @param {Object} source The object to copy properties from.
 * @param {Array} props The property names to copy.
 * @param {Object} [object={}] The object to copy properties to.
 * @returns {Object} Returns `object`.
 */
function baseCopy(source, props, object) {
  object || (object = {});

  var index = -1,
      length = props.length;

  while (++index < length) {
    var key = props[index];
    object[key] = source[key];
  }
  return object;
}

module.exports = baseCopy;

},{}],16:[function(require,module,exports){
var baseForOwn = require('./baseForOwn'),
    createBaseEach = require('./createBaseEach');

/**
 * The base implementation of `_.forEach` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array|Object|string} collection The collection to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array|Object|string} Returns `collection`.
 */
var baseEach = createBaseEach(baseForOwn);

module.exports = baseEach;

},{"./baseForOwn":19,"./createBaseEach":31}],17:[function(require,module,exports){
var createBaseFor = require('./createBaseFor');

/**
 * The base implementation of `baseForIn` and `baseForOwn` which iterates
 * over `object` properties returned by `keysFunc` invoking `iteratee` for
 * each property. Iteratee functions may exit iteration early by explicitly
 * returning `false`.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @returns {Object} Returns `object`.
 */
var baseFor = createBaseFor();

module.exports = baseFor;

},{"./createBaseFor":32}],18:[function(require,module,exports){
var baseFor = require('./baseFor'),
    keysIn = require('../object/keysIn');

/**
 * The base implementation of `_.forIn` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns `object`.
 */
function baseForIn(object, iteratee) {
  return baseFor(object, iteratee, keysIn);
}

module.exports = baseForIn;

},{"../object/keysIn":66,"./baseFor":17}],19:[function(require,module,exports){
var baseFor = require('./baseFor'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.forOwn` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns `object`.
 */
function baseForOwn(object, iteratee) {
  return baseFor(object, iteratee, keys);
}

module.exports = baseForOwn;

},{"../object/keys":65,"./baseFor":17}],20:[function(require,module,exports){
var baseIsEqualDeep = require('./baseIsEqualDeep'),
    isObject = require('../lang/isObject'),
    isObjectLike = require('./isObjectLike');

/**
 * The base implementation of `_.isEqual` without support for `this` binding
 * `customizer` functions.
 *
 * @private
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {Function} [customizer] The function to customize comparing values.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 */
function baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {
  if (value === other) {
    return true;
  }
  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {
    return value !== value && other !== other;
  }
  return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);
}

module.exports = baseIsEqual;

},{"../lang/isObject":60,"./baseIsEqualDeep":21,"./isObjectLike":45}],21:[function(require,module,exports){
var equalArrays = require('./equalArrays'),
    equalByTag = require('./equalByTag'),
    equalObjects = require('./equalObjects'),
    isArray = require('../lang/isArray'),
    isTypedArray = require('../lang/isTypedArray');

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    objectTag = '[object Object]';

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * A specialized version of `baseIsEqual` for arrays and objects which performs
 * deep comparisons and tracks traversed objects enabling objects with circular
 * references to be compared.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing objects.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA=[]] Tracks traversed `value` objects.
 * @param {Array} [stackB=[]] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var objIsArr = isArray(object),
      othIsArr = isArray(other),
      objTag = arrayTag,
      othTag = arrayTag;

  if (!objIsArr) {
    objTag = objToString.call(object);
    if (objTag == argsTag) {
      objTag = objectTag;
    } else if (objTag != objectTag) {
      objIsArr = isTypedArray(object);
    }
  }
  if (!othIsArr) {
    othTag = objToString.call(other);
    if (othTag == argsTag) {
      othTag = objectTag;
    } else if (othTag != objectTag) {
      othIsArr = isTypedArray(other);
    }
  }
  var objIsObj = objTag == objectTag,
      othIsObj = othTag == objectTag,
      isSameTag = objTag == othTag;

  if (isSameTag && !(objIsArr || objIsObj)) {
    return equalByTag(object, other, objTag);
  }
  if (!isLoose) {
    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

    if (objIsWrapped || othIsWrapped) {
      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);
    }
  }
  if (!isSameTag) {
    return false;
  }
  // Assume cyclic values are equal.
  // For more information on detecting circular references see https://es5.github.io/#JO.
  stackA || (stackA = []);
  stackB || (stackB = []);

  var length = stackA.length;
  while (length--) {
    if (stackA[length] == object) {
      return stackB[length] == other;
    }
  }
  // Add `object` and `other` to the stack of traversed objects.
  stackA.push(object);
  stackB.push(other);

  var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);

  stackA.pop();
  stackB.pop();

  return result;
}

module.exports = baseIsEqualDeep;

},{"../lang/isArray":55,"../lang/isTypedArray":62,"./equalArrays":34,"./equalByTag":35,"./equalObjects":36}],22:[function(require,module,exports){
var arrayEach = require('./arrayEach'),
    baseMergeDeep = require('./baseMergeDeep'),
    isArray = require('../lang/isArray'),
    isArrayLike = require('./isArrayLike'),
    isObject = require('../lang/isObject'),
    isObjectLike = require('./isObjectLike'),
    isTypedArray = require('../lang/isTypedArray'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.merge` without support for argument juggling,
 * multiple sources, and `this` binding `customizer` functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {Function} [customizer] The function to customize merged values.
 * @param {Array} [stackA=[]] Tracks traversed source objects.
 * @param {Array} [stackB=[]] Associates values with source counterparts.
 * @returns {Object} Returns `object`.
 */
function baseMerge(object, source, customizer, stackA, stackB) {
  if (!isObject(object)) {
    return object;
  }
  var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),
      props = isSrcArr ? undefined : keys(source);

  arrayEach(props || source, function(srcValue, key) {
    if (props) {
      key = srcValue;
      srcValue = source[key];
    }
    if (isObjectLike(srcValue)) {
      stackA || (stackA = []);
      stackB || (stackB = []);
      baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);
    }
    else {
      var value = object[key],
          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
          isCommon = result === undefined;

      if (isCommon) {
        result = srcValue;
      }
      if ((result !== undefined || (isSrcArr && !(key in object))) &&
          (isCommon || (result === result ? (result !== value) : (value === value)))) {
        object[key] = result;
      }
    }
  });
  return object;
}

module.exports = baseMerge;

},{"../lang/isArray":55,"../lang/isObject":60,"../lang/isTypedArray":62,"../object/keys":65,"./arrayEach":10,"./baseMergeDeep":23,"./isArrayLike":41,"./isObjectLike":45}],23:[function(require,module,exports){
var arrayCopy = require('./arrayCopy'),
    isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isArrayLike = require('./isArrayLike'),
    isPlainObject = require('../lang/isPlainObject'),
    isTypedArray = require('../lang/isTypedArray'),
    toPlainObject = require('../lang/toPlainObject');

/**
 * A specialized version of `baseMerge` for arrays and objects which performs
 * deep merges and tracks traversed objects enabling objects with circular
 * references to be merged.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {string} key The key of the value to merge.
 * @param {Function} mergeFunc The function to merge values.
 * @param {Function} [customizer] The function to customize merged values.
 * @param {Array} [stackA=[]] Tracks traversed source objects.
 * @param {Array} [stackB=[]] Associates values with source counterparts.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {
  var length = stackA.length,
      srcValue = source[key];

  while (length--) {
    if (stackA[length] == srcValue) {
      object[key] = stackB[length];
      return;
    }
  }
  var value = object[key],
      result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
      isCommon = result === undefined;

  if (isCommon) {
    result = srcValue;
    if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {
      result = isArray(value)
        ? value
        : (isArrayLike(value) ? arrayCopy(value) : []);
    }
    else if (isPlainObject(srcValue) || isArguments(srcValue)) {
      result = isArguments(value)
        ? toPlainObject(value)
        : (isPlainObject(value) ? value : {});
    }
    else {
      isCommon = false;
    }
  }
  // Add the source value to the stack of traversed objects and associate
  // it with its merged value.
  stackA.push(srcValue);
  stackB.push(result);

  if (isCommon) {
    // Recursively merge objects and arrays (susceptible to call stack limits).
    object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);
  } else if (result === result ? (result !== value) : (value === value)) {
    object[key] = result;
  }
}

module.exports = baseMergeDeep;

},{"../lang/isArguments":54,"../lang/isArray":55,"../lang/isPlainObject":61,"../lang/isTypedArray":62,"../lang/toPlainObject":63,"./arrayCopy":9,"./isArrayLike":41}],24:[function(require,module,exports){
/**
 * The base implementation of `_.property` without support for deep paths.
 *
 * @private
 * @param {string} key The key of the property to get.
 * @returns {Function} Returns the new function.
 */
function baseProperty(key) {
  return function(object) {
    return object == null ? undefined : object[key];
  };
}

module.exports = baseProperty;

},{}],25:[function(require,module,exports){
/**
 * Converts `value` to a string if it's not one. An empty string is returned
 * for `null` or `undefined` values.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {string} Returns the string.
 */
function baseToString(value) {
  return value == null ? '' : (value + '');
}

module.exports = baseToString;

},{}],26:[function(require,module,exports){
/**
 * The base implementation of `_.values` and `_.valuesIn` which creates an
 * array of `object` property values corresponding to the property names
 * of `props`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array} props The property names to get values for.
 * @returns {Object} Returns the array of property values.
 */
function baseValues(object, props) {
  var index = -1,
      length = props.length,
      result = Array(length);

  while (++index < length) {
    result[index] = object[props[index]];
  }
  return result;
}

module.exports = baseValues;

},{}],27:[function(require,module,exports){
var identity = require('../utility/identity');

/**
 * A specialized version of `baseCallback` which only supports `this` binding
 * and specifying the number of arguments to provide to `func`.
 *
 * @private
 * @param {Function} func The function to bind.
 * @param {*} thisArg The `this` binding of `func`.
 * @param {number} [argCount] The number of arguments to provide to `func`.
 * @returns {Function} Returns the callback.
 */
function bindCallback(func, thisArg, argCount) {
  if (typeof func != 'function') {
    return identity;
  }
  if (thisArg === undefined) {
    return func;
  }
  switch (argCount) {
    case 1: return function(value) {
      return func.call(thisArg, value);
    };
    case 3: return function(value, index, collection) {
      return func.call(thisArg, value, index, collection);
    };
    case 4: return function(accumulator, value, index, collection) {
      return func.call(thisArg, accumulator, value, index, collection);
    };
    case 5: return function(value, other, key, object, source) {
      return func.call(thisArg, value, other, key, object, source);
    };
  }
  return function() {
    return func.apply(thisArg, arguments);
  };
}

module.exports = bindCallback;

},{"../utility/identity":73}],28:[function(require,module,exports){
/**
 * Used by `_.trim` and `_.trimLeft` to get the index of the first character
 * of `string` that is not found in `chars`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @param {string} chars The characters to find.
 * @returns {number} Returns the index of the first character not found in `chars`.
 */
function charsLeftIndex(string, chars) {
  var index = -1,
      length = string.length;

  while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}
  return index;
}

module.exports = charsLeftIndex;

},{}],29:[function(require,module,exports){
/**
 * Used by `_.trim` and `_.trimRight` to get the index of the last character
 * of `string` that is not found in `chars`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @param {string} chars The characters to find.
 * @returns {number} Returns the index of the last character not found in `chars`.
 */
function charsRightIndex(string, chars) {
  var index = string.length;

  while (index-- && chars.indexOf(string.charAt(index)) > -1) {}
  return index;
}

module.exports = charsRightIndex;

},{}],30:[function(require,module,exports){
var bindCallback = require('./bindCallback'),
    isIterateeCall = require('./isIterateeCall'),
    restParam = require('../function/restParam');

/**
 * Creates a `_.assign`, `_.defaults`, or `_.merge` function.
 *
 * @private
 * @param {Function} assigner The function to assign values.
 * @returns {Function} Returns the new assigner function.
 */
function createAssigner(assigner) {
  return restParam(function(object, sources) {
    var index = -1,
        length = object == null ? 0 : sources.length,
        customizer = length > 2 ? sources[length - 2] : undefined,
        guard = length > 2 ? sources[2] : undefined,
        thisArg = length > 1 ? sources[length - 1] : undefined;

    if (typeof customizer == 'function') {
      customizer = bindCallback(customizer, thisArg, 5);
      length -= 2;
    } else {
      customizer = typeof thisArg == 'function' ? thisArg : undefined;
      length -= (customizer ? 1 : 0);
    }
    if (guard && isIterateeCall(sources[0], sources[1], guard)) {
      customizer = length < 3 ? undefined : customizer;
      length = 1;
    }
    while (++index < length) {
      var source = sources[index];
      if (source) {
        assigner(object, source, customizer);
      }
    }
    return object;
  });
}

module.exports = createAssigner;

},{"../function/restParam":7,"./bindCallback":27,"./isIterateeCall":43}],31:[function(require,module,exports){
var getLength = require('./getLength'),
    isLength = require('./isLength'),
    toObject = require('./toObject');

/**
 * Creates a `baseEach` or `baseEachRight` function.
 *
 * @private
 * @param {Function} eachFunc The function to iterate over a collection.
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseEach(eachFunc, fromRight) {
  return function(collection, iteratee) {
    var length = collection ? getLength(collection) : 0;
    if (!isLength(length)) {
      return eachFunc(collection, iteratee);
    }
    var index = fromRight ? length : -1,
        iterable = toObject(collection);

    while ((fromRight ? index-- : ++index < length)) {
      if (iteratee(iterable[index], index, iterable) === false) {
        break;
      }
    }
    return collection;
  };
}

module.exports = createBaseEach;

},{"./getLength":39,"./isLength":44,"./toObject":51}],32:[function(require,module,exports){
var toObject = require('./toObject');

/**
 * Creates a base function for `_.forIn` or `_.forInRight`.
 *
 * @private
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseFor(fromRight) {
  return function(object, iteratee, keysFunc) {
    var iterable = toObject(object),
        props = keysFunc(object),
        length = props.length,
        index = fromRight ? length : -1;

    while ((fromRight ? index-- : ++index < length)) {
      var key = props[index];
      if (iteratee(iterable[key], key, iterable) === false) {
        break;
      }
    }
    return object;
  };
}

module.exports = createBaseFor;

},{"./toObject":51}],33:[function(require,module,exports){
var bindCallback = require('./bindCallback'),
    isArray = require('../lang/isArray');

/**
 * Creates a function for `_.forEach` or `_.forEachRight`.
 *
 * @private
 * @param {Function} arrayFunc The function to iterate over an array.
 * @param {Function} eachFunc The function to iterate over a collection.
 * @returns {Function} Returns the new each function.
 */
function createForEach(arrayFunc, eachFunc) {
  return function(collection, iteratee, thisArg) {
    return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
      ? arrayFunc(collection, iteratee)
      : eachFunc(collection, bindCallback(iteratee, thisArg, 3));
  };
}

module.exports = createForEach;

},{"../lang/isArray":55,"./bindCallback":27}],34:[function(require,module,exports){
var arraySome = require('./arraySome');

/**
 * A specialized version of `baseIsEqualDeep` for arrays with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Array} array The array to compare.
 * @param {Array} other The other array to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing arrays.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
 */
function equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var index = -1,
      arrLength = array.length,
      othLength = other.length;

  if (arrLength != othLength && !(isLoose && othLength > arrLength)) {
    return false;
  }
  // Ignore non-index properties.
  while (++index < arrLength) {
    var arrValue = array[index],
        othValue = other[index],
        result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;

    if (result !== undefined) {
      if (result) {
        continue;
      }
      return false;
    }
    // Recursively compare arrays (susceptible to call stack limits).
    if (isLoose) {
      if (!arraySome(other, function(othValue) {
            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);
          })) {
        return false;
      }
    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {
      return false;
    }
  }
  return true;
}

module.exports = equalArrays;

},{"./arraySome":11}],35:[function(require,module,exports){
/** `Object#toString` result references. */
var boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    numberTag = '[object Number]',
    regexpTag = '[object RegExp]',
    stringTag = '[object String]';

/**
 * A specialized version of `baseIsEqualDeep` for comparing objects of
 * the same `toStringTag`.
 *
 * **Note:** This function only supports comparing values with tags of
 * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {string} tag The `toStringTag` of the objects to compare.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalByTag(object, other, tag) {
  switch (tag) {
    case boolTag:
    case dateTag:
      // Coerce dates and booleans to numbers, dates to milliseconds and booleans
      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.
      return +object == +other;

    case errorTag:
      return object.name == other.name && object.message == other.message;

    case numberTag:
      // Treat `NaN` vs. `NaN` as equal.
      return (object != +object)
        ? other != +other
        : object == +other;

    case regexpTag:
    case stringTag:
      // Coerce regexes to strings and treat strings primitives and string
      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.
      return object == (other + '');
  }
  return false;
}

module.exports = equalByTag;

},{}],36:[function(require,module,exports){
var keys = require('../object/keys');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A specialized version of `baseIsEqualDeep` for objects with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing values.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var objProps = keys(object),
      objLength = objProps.length,
      othProps = keys(other),
      othLength = othProps.length;

  if (objLength != othLength && !isLoose) {
    return false;
  }
  var index = objLength;
  while (index--) {
    var key = objProps[index];
    if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {
      return false;
    }
  }
  var skipCtor = isLoose;
  while (++index < objLength) {
    key = objProps[index];
    var objValue = object[key],
        othValue = other[key],
        result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;

    // Recursively compare objects (susceptible to call stack limits).
    if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {
      return false;
    }
    skipCtor || (skipCtor = key == 'constructor');
  }
  if (!skipCtor) {
    var objCtor = object.constructor,
        othCtor = other.constructor;

    // Non `Object` object instances with different constructors are not equal.
    if (objCtor != othCtor &&
        ('constructor' in object && 'constructor' in other) &&
        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
          typeof othCtor == 'function' && othCtor instanceof othCtor)) {
      return false;
    }
  }
  return true;
}

module.exports = equalObjects;

},{"../object/keys":65}],37:[function(require,module,exports){
/** Used to map characters to HTML entities. */
var htmlEscapes = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;',
  '`': '&#96;'
};

/**
 * Used by `_.escape` to convert characters to HTML entities.
 *
 * @private
 * @param {string} chr The matched character to escape.
 * @returns {string} Returns the escaped character.
 */
function escapeHtmlChar(chr) {
  return htmlEscapes[chr];
}

module.exports = escapeHtmlChar;

},{}],38:[function(require,module,exports){
/** Used to escape characters for inclusion in compiled string literals. */
var stringEscapes = {
  '\\': '\\',
  "'": "'",
  '\n': 'n',
  '\r': 'r',
  '\u2028': 'u2028',
  '\u2029': 'u2029'
};

/**
 * Used by `_.template` to escape characters for inclusion in compiled string literals.
 *
 * @private
 * @param {string} chr The matched character to escape.
 * @returns {string} Returns the escaped character.
 */
function escapeStringChar(chr) {
  return '\\' + stringEscapes[chr];
}

module.exports = escapeStringChar;

},{}],39:[function(require,module,exports){
var baseProperty = require('./baseProperty');

/**
 * Gets the "length" property value of `object`.
 *
 * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)
 * that affects Safari on at least iOS 8.1-8.3 ARM64.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {*} Returns the "length" value.
 */
var getLength = baseProperty('length');

module.exports = getLength;

},{"./baseProperty":24}],40:[function(require,module,exports){
var isNative = require('../lang/isNative');

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = object == null ? undefined : object[key];
  return isNative(value) ? value : undefined;
}

module.exports = getNative;

},{"../lang/isNative":59}],41:[function(require,module,exports){
var getLength = require('./getLength'),
    isLength = require('./isLength');

/**
 * Checks if `value` is array-like.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 */
function isArrayLike(value) {
  return value != null && isLength(getLength(value));
}

module.exports = isArrayLike;

},{"./getLength":39,"./isLength":44}],42:[function(require,module,exports){
/** Used to detect unsigned integer values. */
var reIsUint = /^\d+$/;

/**
 * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
 * of an array-like value.
 */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */
function isIndex(value, length) {
  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;
  length = length == null ? MAX_SAFE_INTEGER : length;
  return value > -1 && value % 1 == 0 && value < length;
}

module.exports = isIndex;

},{}],43:[function(require,module,exports){
var isArrayLike = require('./isArrayLike'),
    isIndex = require('./isIndex'),
    isObject = require('../lang/isObject');

/**
 * Checks if the provided arguments are from an iteratee call.
 *
 * @private
 * @param {*} value The potential iteratee value argument.
 * @param {*} index The potential iteratee index or key argument.
 * @param {*} object The potential iteratee object argument.
 * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.
 */
function isIterateeCall(value, index, object) {
  if (!isObject(object)) {
    return false;
  }
  var type = typeof index;
  if (type == 'number'
      ? (isArrayLike(object) && isIndex(index, object.length))
      : (type == 'string' && index in object)) {
    var other = object[index];
    return value === value ? (value === other) : (other !== other);
  }
  return false;
}

module.exports = isIterateeCall;

},{"../lang/isObject":60,"./isArrayLike":41,"./isIndex":42}],44:[function(require,module,exports){
/**
 * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
 * of an array-like value.
 */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 */
function isLength(value) {
  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}

module.exports = isLength;

},{}],45:[function(require,module,exports){
/**
 * Checks if `value` is object-like.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

module.exports = isObjectLike;

},{}],46:[function(require,module,exports){
/**
 * Used by `trimmedLeftIndex` and `trimmedRightIndex` to determine if a
 * character code is whitespace.
 *
 * @private
 * @param {number} charCode The character code to inspect.
 * @returns {boolean} Returns `true` if `charCode` is whitespace, else `false`.
 */
function isSpace(charCode) {
  return ((charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160) || charCode == 5760 || charCode == 6158 ||
    (charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279)));
}

module.exports = isSpace;

},{}],47:[function(require,module,exports){
/** Used to match template delimiters. */
var reEscape = /<%-([\s\S]+?)%>/g;

module.exports = reEscape;

},{}],48:[function(require,module,exports){
/** Used to match template delimiters. */
var reEvaluate = /<%([\s\S]+?)%>/g;

module.exports = reEvaluate;

},{}],49:[function(require,module,exports){
/** Used to match template delimiters. */
var reInterpolate = /<%=([\s\S]+?)%>/g;

module.exports = reInterpolate;

},{}],50:[function(require,module,exports){
var isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isIndex = require('./isIndex'),
    isLength = require('./isLength'),
    keysIn = require('../object/keysIn');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A fallback implementation of `Object.keys` which creates an array of the
 * own enumerable property names of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function shimKeys(object) {
  var props = keysIn(object),
      propsLength = props.length,
      length = propsLength && object.length;

  var allowIndexes = !!length && isLength(length) &&
    (isArray(object) || isArguments(object));

  var index = -1,
      result = [];

  while (++index < propsLength) {
    var key = props[index];
    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {
      result.push(key);
    }
  }
  return result;
}

module.exports = shimKeys;

},{"../lang/isArguments":54,"../lang/isArray":55,"../object/keysIn":66,"./isIndex":42,"./isLength":44}],51:[function(require,module,exports){
var isObject = require('../lang/isObject');

/**
 * Converts `value` to an object if it's not one.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {Object} Returns the object.
 */
function toObject(value) {
  return isObject(value) ? value : Object(value);
}

module.exports = toObject;

},{"../lang/isObject":60}],52:[function(require,module,exports){
var isSpace = require('./isSpace');

/**
 * Used by `_.trim` and `_.trimLeft` to get the index of the first non-whitespace
 * character of `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the first non-whitespace character.
 */
function trimmedLeftIndex(string) {
  var index = -1,
      length = string.length;

  while (++index < length && isSpace(string.charCodeAt(index))) {}
  return index;
}

module.exports = trimmedLeftIndex;

},{"./isSpace":46}],53:[function(require,module,exports){
var isSpace = require('./isSpace');

/**
 * Used by `_.trim` and `_.trimRight` to get the index of the last non-whitespace
 * character of `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the last non-whitespace character.
 */
function trimmedRightIndex(string) {
  var index = string.length;

  while (index-- && isSpace(string.charCodeAt(index))) {}
  return index;
}

module.exports = trimmedRightIndex;

},{"./isSpace":46}],54:[function(require,module,exports){
var isArrayLike = require('../internal/isArrayLike'),
    isObjectLike = require('../internal/isObjectLike');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Native method references. */
var propertyIsEnumerable = objectProto.propertyIsEnumerable;

/**
 * Checks if `value` is classified as an `arguments` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
function isArguments(value) {
  return isObjectLike(value) && isArrayLike(value) &&
    hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
}

module.exports = isArguments;

},{"../internal/isArrayLike":41,"../internal/isObjectLike":45}],55:[function(require,module,exports){
var getNative = require('../internal/getNative'),
    isLength = require('../internal/isLength'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var arrayTag = '[object Array]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/* Native method references for those with the same name as other `lodash` methods. */
var nativeIsArray = getNative(Array, 'isArray');

/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(function() { return arguments; }());
 * // => false
 */
var isArray = nativeIsArray || function(value) {
  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;
};

module.exports = isArray;

},{"../internal/getNative":40,"../internal/isLength":44,"../internal/isObjectLike":45}],56:[function(require,module,exports){
var baseIsEqual = require('../internal/baseIsEqual'),
    bindCallback = require('../internal/bindCallback');

/**
 * Performs a deep comparison between two values to determine if they are
 * equivalent. If `customizer` is provided it's invoked to compare values.
 * If `customizer` returns `undefined` comparisons are handled by the method
 * instead. The `customizer` is bound to `thisArg` and invoked with up to
 * three arguments: (value, other [, index|key]).
 *
 * **Note:** This method supports comparing arrays, booleans, `Date` objects,
 * numbers, `Object` objects, regexes, and strings. Objects are compared by
 * their own, not inherited, enumerable properties. Functions and DOM nodes
 * are **not** supported. Provide a customizer function to extend support
 * for comparing other values.
 *
 * @static
 * @memberOf _
 * @alias eq
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {Function} [customizer] The function to customize value comparisons.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'user': 'fred' };
 * var other = { 'user': 'fred' };
 *
 * object == other;
 * // => false
 *
 * _.isEqual(object, other);
 * // => true
 *
 * // using a customizer callback
 * var array = ['hello', 'goodbye'];
 * var other = ['hi', 'goodbye'];
 *
 * _.isEqual(array, other, function(value, other) {
 *   if (_.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/)) {
 *     return true;
 *   }
 * });
 * // => true
 */
function isEqual(value, other, customizer, thisArg) {
  customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
  var result = customizer ? customizer(value, other) : undefined;
  return  result === undefined ? baseIsEqual(value, other, customizer) : !!result;
}

module.exports = isEqual;

},{"../internal/baseIsEqual":20,"../internal/bindCallback":27}],57:[function(require,module,exports){
var isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var errorTag = '[object Error]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,
 * `SyntaxError`, `TypeError`, or `URIError` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an error object, else `false`.
 * @example
 *
 * _.isError(new Error);
 * // => true
 *
 * _.isError(Error);
 * // => false
 */
function isError(value) {
  return isObjectLike(value) && typeof value.message == 'string' && objToString.call(value) == errorTag;
}

module.exports = isError;

},{"../internal/isObjectLike":45}],58:[function(require,module,exports){
var isObject = require('./isObject');

/** `Object#toString` result references. */
var funcTag = '[object Function]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in older versions of Chrome and Safari which return 'function' for regexes
  // and Safari 8 which returns 'object' for typed array constructors.
  return isObject(value) && objToString.call(value) == funcTag;
}

module.exports = isFunction;

},{"./isObject":60}],59:[function(require,module,exports){
var isFunction = require('./isFunction'),
    isObjectLike = require('../internal/isObjectLike');

/** Used to detect host constructors (Safari > 5). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var fnToString = Function.prototype.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/**
 * Checks if `value` is a native function.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function, else `false`.
 * @example
 *
 * _.isNative(Array.prototype.push);
 * // => true
 *
 * _.isNative(_);
 * // => false
 */
function isNative(value) {
  if (value == null) {
    return false;
  }
  if (isFunction(value)) {
    return reIsNative.test(fnToString.call(value));
  }
  return isObjectLike(value) && reIsHostCtor.test(value);
}

module.exports = isNative;

},{"../internal/isObjectLike":45,"./isFunction":58}],60:[function(require,module,exports){
/**
 * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
 * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(1);
 * // => false
 */
function isObject(value) {
  // Avoid a V8 JIT bug in Chrome 19-20.
  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

module.exports = isObject;

},{}],61:[function(require,module,exports){
var baseForIn = require('../internal/baseForIn'),
    isArguments = require('./isArguments'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var objectTag = '[object Object]';

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * **Note:** This method assumes objects created by the `Object` constructor
 * have no inherited enumerable properties.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  var Ctor;

  // Exit early for non `Object` objects.
  if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||
      (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {
    return false;
  }
  // IE < 9 iterates inherited properties before own properties. If the first
  // iterated property is an object's own property then there are no inherited
  // enumerable properties.
  var result;
  // In most environments an object's own properties are iterated before
  // its inherited properties. If the last iterated property is an object's
  // own property then there are no inherited enumerable properties.
  baseForIn(value, function(subValue, key) {
    result = key;
  });
  return result === undefined || hasOwnProperty.call(value, result);
}

module.exports = isPlainObject;

},{"../internal/baseForIn":18,"../internal/isObjectLike":45,"./isArguments":54}],62:[function(require,module,exports){
var isLength = require('../internal/isLength'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    funcTag = '[object Function]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    objectTag = '[object Object]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    weakMapTag = '[object WeakMap]';

var arrayBufferTag = '[object ArrayBuffer]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';

/** Used to identify `toStringTag` values of typed arrays. */
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
typedArrayTags[dateTag] = typedArrayTags[errorTag] =
typedArrayTags[funcTag] = typedArrayTags[mapTag] =
typedArrayTags[numberTag] = typedArrayTags[objectTag] =
typedArrayTags[regexpTag] = typedArrayTags[setTag] =
typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is classified as a typed array.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isTypedArray(new Uint8Array);
 * // => true
 *
 * _.isTypedArray([]);
 * // => false
 */
function isTypedArray(value) {
  return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];
}

module.exports = isTypedArray;

},{"../internal/isLength":44,"../internal/isObjectLike":45}],63:[function(require,module,exports){
var baseCopy = require('../internal/baseCopy'),
    keysIn = require('../object/keysIn');

/**
 * Converts `value` to a plain object flattening inherited enumerable
 * properties of `value` to own properties of the plain object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {Object} Returns the converted plain object.
 * @example
 *
 * function Foo() {
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.assign({ 'a': 1 }, new Foo);
 * // => { 'a': 1, 'b': 2 }
 *
 * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
 * // => { 'a': 1, 'b': 2, 'c': 3 }
 */
function toPlainObject(value) {
  return baseCopy(value, keysIn(value));
}

module.exports = toPlainObject;

},{"../internal/baseCopy":15,"../object/keysIn":66}],64:[function(require,module,exports){
var assignWith = require('../internal/assignWith'),
    baseAssign = require('../internal/baseAssign'),
    createAssigner = require('../internal/createAssigner');

/**
 * Assigns own enumerable properties of source object(s) to the destination
 * object. Subsequent sources overwrite property assignments of previous sources.
 * If `customizer` is provided it's invoked to produce the assigned values.
 * The `customizer` is bound to `thisArg` and invoked with five arguments:
 * (objectValue, sourceValue, key, object, source).
 *
 * **Note:** This method mutates `object` and is based on
 * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).
 *
 * @static
 * @memberOf _
 * @alias extend
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @param {Function} [customizer] The function to customize assigned values.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {Object} Returns `object`.
 * @example
 *
 * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });
 * // => { 'user': 'fred', 'age': 40 }
 *
 * // using a customizer callback
 * var defaults = _.partialRight(_.assign, function(value, other) {
 *   return _.isUndefined(value) ? other : value;
 * });
 *
 * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
 * // => { 'user': 'barney', 'age': 36 }
 */
var assign = createAssigner(function(object, source, customizer) {
  return customizer
    ? assignWith(object, source, customizer)
    : baseAssign(object, source);
});

module.exports = assign;

},{"../internal/assignWith":13,"../internal/baseAssign":14,"../internal/createAssigner":30}],65:[function(require,module,exports){
var getNative = require('../internal/getNative'),
    isArrayLike = require('../internal/isArrayLike'),
    isObject = require('../lang/isObject'),
    shimKeys = require('../internal/shimKeys');

/* Native method references for those with the same name as other `lodash` methods. */
var nativeKeys = getNative(Object, 'keys');

/**
 * Creates an array of the own enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects. See the
 * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)
 * for more details.
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keys(new Foo);
 * // => ['a', 'b'] (iteration order is not guaranteed)
 *
 * _.keys('hi');
 * // => ['0', '1']
 */
var keys = !nativeKeys ? shimKeys : function(object) {
  var Ctor = object == null ? undefined : object.constructor;
  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||
      (typeof object != 'function' && isArrayLike(object))) {
    return shimKeys(object);
  }
  return isObject(object) ? nativeKeys(object) : [];
};

module.exports = keys;

},{"../internal/getNative":40,"../internal/isArrayLike":41,"../internal/shimKeys":50,"../lang/isObject":60}],66:[function(require,module,exports){
var isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isIndex = require('../internal/isIndex'),
    isLength = require('../internal/isLength'),
    isObject = require('../lang/isObject');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Creates an array of the own and inherited enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects.
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keysIn(new Foo);
 * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
 */
function keysIn(object) {
  if (object == null) {
    return [];
  }
  if (!isObject(object)) {
    object = Object(object);
  }
  var length = object.length;
  length = (length && isLength(length) &&
    (isArray(object) || isArguments(object)) && length) || 0;

  var Ctor = object.constructor,
      index = -1,
      isProto = typeof Ctor == 'function' && Ctor.prototype === object,
      result = Array(length),
      skipIndexes = length > 0;

  while (++index < length) {
    result[index] = (index + '');
  }
  for (var key in object) {
    if (!(skipIndexes && isIndex(key, length)) &&
        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
      result.push(key);
    }
  }
  return result;
}

module.exports = keysIn;

},{"../internal/isIndex":42,"../internal/isLength":44,"../lang/isArguments":54,"../lang/isArray":55,"../lang/isObject":60}],67:[function(require,module,exports){
var baseMerge = require('../internal/baseMerge'),
    createAssigner = require('../internal/createAssigner');

/**
 * Recursively merges own enumerable properties of the source object(s), that
 * don't resolve to `undefined` into the destination object. Subsequent sources
 * overwrite property assignments of previous sources. If `customizer` is
 * provided it's invoked to produce the merged values of the destination and
 * source properties. If `customizer` returns `undefined` merging is handled
 * by the method instead. The `customizer` is bound to `thisArg` and invoked
 * with five arguments: (objectValue, sourceValue, key, object, source).
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @param {Function} [customizer] The function to customize assigned values.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {Object} Returns `object`.
 * @example
 *
 * var users = {
 *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]
 * };
 *
 * var ages = {
 *   'data': [{ 'age': 36 }, { 'age': 40 }]
 * };
 *
 * _.merge(users, ages);
 * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }
 *
 * // using a customizer callback
 * var object = {
 *   'fruits': ['apple'],
 *   'vegetables': ['beet']
 * };
 *
 * var other = {
 *   'fruits': ['banana'],
 *   'vegetables': ['carrot']
 * };
 *
 * _.merge(object, other, function(a, b) {
 *   if (_.isArray(a)) {
 *     return a.concat(b);
 *   }
 * });
 * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }
 */
var merge = createAssigner(baseMerge);

module.exports = merge;

},{"../internal/baseMerge":22,"../internal/createAssigner":30}],68:[function(require,module,exports){
var baseToString = require('../internal/baseToString'),
    escapeHtmlChar = require('../internal/escapeHtmlChar');

/** Used to match HTML entities and HTML characters. */
var reUnescapedHtml = /[&<>"'`]/g,
    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

/**
 * Converts the characters "&", "<", ">", '"', "'", and "\`", in `string` to
 * their corresponding HTML entities.
 *
 * **Note:** No other characters are escaped. To escape additional characters
 * use a third-party library like [_he_](https://mths.be/he).
 *
 * Though the ">" character is escaped for symmetry, characters like
 * ">" and "/" don't need escaping in HTML and have no special meaning
 * unless they're part of a tag or unquoted attribute value.
 * See [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
 * (under "semi-related fun fact") for more details.
 *
 * Backticks are escaped because in Internet Explorer < 9, they can break out
 * of attribute values or HTML comments. See [#59](https://html5sec.org/#59),
 * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
 * [#133](https://html5sec.org/#133) of the [HTML5 Security Cheatsheet](https://html5sec.org/)
 * for more details.
 *
 * When working with HTML you should always [quote attribute values](http://wonko.com/post/html-escaping)
 * to reduce XSS vectors.
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The string to escape.
 * @returns {string} Returns the escaped string.
 * @example
 *
 * _.escape('fred, barney, & pebbles');
 * // => 'fred, barney, &amp; pebbles'
 */
function escape(string) {
  // Reset `lastIndex` because in IE < 9 `String#replace` does not.
  string = baseToString(string);
  return (string && reHasUnescapedHtml.test(string))
    ? string.replace(reUnescapedHtml, escapeHtmlChar)
    : string;
}

module.exports = escape;

},{"../internal/baseToString":25,"../internal/escapeHtmlChar":37}],69:[function(require,module,exports){
var assignOwnDefaults = require('../internal/assignOwnDefaults'),
    assignWith = require('../internal/assignWith'),
    attempt = require('../utility/attempt'),
    baseAssign = require('../internal/baseAssign'),
    baseToString = require('../internal/baseToString'),
    baseValues = require('../internal/baseValues'),
    escapeStringChar = require('../internal/escapeStringChar'),
    isError = require('../lang/isError'),
    isIterateeCall = require('../internal/isIterateeCall'),
    keys = require('../object/keys'),
    reInterpolate = require('../internal/reInterpolate'),
    templateSettings = require('./templateSettings');

/** Used to match empty string literals in compiled template source. */
var reEmptyStringLeading = /\b__p \+= '';/g,
    reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

/** Used to match [ES template delimiters](http://ecma-international.org/ecma-262/6.0/#sec-template-literal-lexical-components). */
var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

/** Used to ensure capturing order of template delimiters. */
var reNoMatch = /($^)/;

/** Used to match unescaped characters in compiled string literals. */
var reUnescapedString = /['\n\r\u2028\u2029\\]/g;

/**
 * Creates a compiled template function that can interpolate data properties
 * in "interpolate" delimiters, HTML-escape interpolated data properties in
 * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
 * properties may be accessed as free variables in the template. If a setting
 * object is provided it takes precedence over `_.templateSettings` values.
 *
 * **Note:** In the development build `_.template` utilizes
 * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)
 * for easier debugging.
 *
 * For more information on precompiling templates see
 * [lodash's custom builds documentation](https://lodash.com/custom-builds).
 *
 * For more information on Chrome extension sandboxes see
 * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The template string.
 * @param {Object} [options] The options object.
 * @param {RegExp} [options.escape] The HTML "escape" delimiter.
 * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
 * @param {Object} [options.imports] An object to import into the template as free variables.
 * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
 * @param {string} [options.sourceURL] The sourceURL of the template's compiled source.
 * @param {string} [options.variable] The data object variable name.
 * @param- {Object} [otherOptions] Enables the legacy `options` param signature.
 * @returns {Function} Returns the compiled template function.
 * @example
 *
 * // using the "interpolate" delimiter to create a compiled template
 * var compiled = _.template('hello <%= user %>!');
 * compiled({ 'user': 'fred' });
 * // => 'hello fred!'
 *
 * // using the HTML "escape" delimiter to escape data property values
 * var compiled = _.template('<b><%- value %></b>');
 * compiled({ 'value': '<script>' });
 * // => '<b>&lt;script&gt;</b>'
 *
 * // using the "evaluate" delimiter to execute JavaScript and generate HTML
 * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
 * compiled({ 'users': ['fred', 'barney'] });
 * // => '<li>fred</li><li>barney</li>'
 *
 * // using the internal `print` function in "evaluate" delimiters
 * var compiled = _.template('<% print("hello " + user); %>!');
 * compiled({ 'user': 'barney' });
 * // => 'hello barney!'
 *
 * // using the ES delimiter as an alternative to the default "interpolate" delimiter
 * var compiled = _.template('hello ${ user }!');
 * compiled({ 'user': 'pebbles' });
 * // => 'hello pebbles!'
 *
 * // using custom template delimiters
 * _.templateSettings.interpolate = /{{([\s\S]+?)}}/g;
 * var compiled = _.template('hello {{ user }}!');
 * compiled({ 'user': 'mustache' });
 * // => 'hello mustache!'
 *
 * // using backslashes to treat delimiters as plain text
 * var compiled = _.template('<%= "\\<%- value %\\>" %>');
 * compiled({ 'value': 'ignored' });
 * // => '<%- value %>'
 *
 * // using the `imports` option to import `jQuery` as `jq`
 * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';
 * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });
 * compiled({ 'users': ['fred', 'barney'] });
 * // => '<li>fred</li><li>barney</li>'
 *
 * // using the `sourceURL` option to specify a custom sourceURL for the template
 * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });
 * compiled(data);
 * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
 *
 * // using the `variable` option to ensure a with-statement isn't used in the compiled template
 * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });
 * compiled.source;
 * // => function(data) {
 * //   var __t, __p = '';
 * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';
 * //   return __p;
 * // }
 *
 * // using the `source` property to inline compiled templates for meaningful
 * // line numbers in error messages and a stack trace
 * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
 *   var JST = {\
 *     "main": ' + _.template(mainText).source + '\
 *   };\
 * ');
 */
function template(string, options, otherOptions) {
  // Based on John Resig's `tmpl` implementation (http://ejohn.org/blog/javascript-micro-templating/)
  // and Laura Doktorova's doT.js (https://github.com/olado/doT).
  var settings = templateSettings.imports._.templateSettings || templateSettings;

  if (otherOptions && isIterateeCall(string, options, otherOptions)) {
    options = otherOptions = undefined;
  }
  string = baseToString(string);
  options = assignWith(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);

  var imports = assignWith(baseAssign({}, options.imports), settings.imports, assignOwnDefaults),
      importsKeys = keys(imports),
      importsValues = baseValues(imports, importsKeys);

  var isEscaping,
      isEvaluating,
      index = 0,
      interpolate = options.interpolate || reNoMatch,
      source = "__p += '";

  // Compile the regexp to match each delimiter.
  var reDelimiters = RegExp(
    (options.escape || reNoMatch).source + '|' +
    interpolate.source + '|' +
    (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
    (options.evaluate || reNoMatch).source + '|$'
  , 'g');

  // Use a sourceURL for easier debugging.
  var sourceURL = 'sourceURL' in options ? '//# sourceURL=' + options.sourceURL + '\n' : '';

  string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
    interpolateValue || (interpolateValue = esTemplateValue);

    // Escape characters that can't be included in string literals.
    source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);

    // Replace delimiters with snippets.
    if (escapeValue) {
      isEscaping = true;
      source += "' +\n__e(" + escapeValue + ") +\n'";
    }
    if (evaluateValue) {
      isEvaluating = true;
      source += "';\n" + evaluateValue + ";\n__p += '";
    }
    if (interpolateValue) {
      source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
    }
    index = offset + match.length;

    // The JS engine embedded in Adobe products requires returning the `match`
    // string in order to produce the correct `offset` value.
    return match;
  });

  source += "';\n";

  // If `variable` is not specified wrap a with-statement around the generated
  // code to add the data object to the top of the scope chain.
  var variable = options.variable;
  if (!variable) {
    source = 'with (obj) {\n' + source + '\n}\n';
  }
  // Cleanup code by stripping empty strings.
  source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
    .replace(reEmptyStringMiddle, '$1')
    .replace(reEmptyStringTrailing, '$1;');

  // Frame code as the function body.
  source = 'function(' + (variable || 'obj') + ') {\n' +
    (variable
      ? ''
      : 'obj || (obj = {});\n'
    ) +
    "var __t, __p = ''" +
    (isEscaping
       ? ', __e = _.escape'
       : ''
    ) +
    (isEvaluating
      ? ', __j = Array.prototype.join;\n' +
        "function print() { __p += __j.call(arguments, '') }\n"
      : ';\n'
    ) +
    source +
    'return __p\n}';

  var result = attempt(function() {
    return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined, importsValues);
  });

  // Provide the compiled function's source by its `toString` method or
  // the `source` property as a convenience for inlining compiled templates.
  result.source = source;
  if (isError(result)) {
    throw result;
  }
  return result;
}

module.exports = template;

},{"../internal/assignOwnDefaults":12,"../internal/assignWith":13,"../internal/baseAssign":14,"../internal/baseToString":25,"../internal/baseValues":26,"../internal/escapeStringChar":38,"../internal/isIterateeCall":43,"../internal/reInterpolate":49,"../lang/isError":57,"../object/keys":65,"../utility/attempt":72,"./templateSettings":70}],70:[function(require,module,exports){
var escape = require('./escape'),
    reEscape = require('../internal/reEscape'),
    reEvaluate = require('../internal/reEvaluate'),
    reInterpolate = require('../internal/reInterpolate');

/**
 * By default, the template delimiters used by lodash are like those in
 * embedded Ruby (ERB). Change the following template settings to use
 * alternative delimiters.
 *
 * @static
 * @memberOf _
 * @type Object
 */
var templateSettings = {

  /**
   * Used to detect `data` property values to be HTML-escaped.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'escape': reEscape,

  /**
   * Used to detect code to be evaluated.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'evaluate': reEvaluate,

  /**
   * Used to detect `data` property values to inject.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'interpolate': reInterpolate,

  /**
   * Used to reference the data object in the template text.
   *
   * @memberOf _.templateSettings
   * @type string
   */
  'variable': '',

  /**
   * Used to import variables into the compiled template.
   *
   * @memberOf _.templateSettings
   * @type Object
   */
  'imports': {

    /**
     * A reference to the `lodash` function.
     *
     * @memberOf _.templateSettings.imports
     * @type Function
     */
    '_': { 'escape': escape }
  }
};

module.exports = templateSettings;

},{"../internal/reEscape":47,"../internal/reEvaluate":48,"../internal/reInterpolate":49,"./escape":68}],71:[function(require,module,exports){
var baseToString = require('../internal/baseToString'),
    charsLeftIndex = require('../internal/charsLeftIndex'),
    charsRightIndex = require('../internal/charsRightIndex'),
    isIterateeCall = require('../internal/isIterateeCall'),
    trimmedLeftIndex = require('../internal/trimmedLeftIndex'),
    trimmedRightIndex = require('../internal/trimmedRightIndex');

/**
 * Removes leading and trailing whitespace or specified characters from `string`.
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The string to trim.
 * @param {string} [chars=whitespace] The characters to trim.
 * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
 * @returns {string} Returns the trimmed string.
 * @example
 *
 * _.trim('  abc  ');
 * // => 'abc'
 *
 * _.trim('-_-abc-_-', '_-');
 * // => 'abc'
 *
 * _.map(['  foo  ', '  bar  '], _.trim);
 * // => ['foo', 'bar']
 */
function trim(string, chars, guard) {
  var value = string;
  string = baseToString(string);
  if (!string) {
    return string;
  }
  if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
    return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);
  }
  chars = (chars + '');
  return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);
}

module.exports = trim;

},{"../internal/baseToString":25,"../internal/charsLeftIndex":28,"../internal/charsRightIndex":29,"../internal/isIterateeCall":43,"../internal/trimmedLeftIndex":52,"../internal/trimmedRightIndex":53}],72:[function(require,module,exports){
var isError = require('../lang/isError'),
    restParam = require('../function/restParam');

/**
 * Attempts to invoke `func`, returning either the result or the caught error
 * object. Any additional arguments are provided to `func` when it's invoked.
 *
 * @static
 * @memberOf _
 * @category Utility
 * @param {Function} func The function to attempt.
 * @returns {*} Returns the `func` result or error object.
 * @example
 *
 * // avoid throwing errors for invalid selectors
 * var elements = _.attempt(function(selector) {
 *   return document.querySelectorAll(selector);
 * }, '>_>');
 *
 * if (_.isError(elements)) {
 *   elements = [];
 * }
 */
var attempt = restParam(function(func, args) {
  try {
    return func.apply(undefined, args);
  } catch(e) {
    return isError(e) ? e : new Error(e);
  }
});

module.exports = attempt;

},{"../function/restParam":7,"../lang/isError":57}],73:[function(require,module,exports){
/**
 * This method returns the first argument provided to it.
 *
 * @static
 * @memberOf _
 * @category Utility
 * @param {*} value Any value.
 * @returns {*} Returns `value`.
 * @example
 *
 * var object = { 'user': 'fred' };
 *
 * _.identity(object) === object;
 * // => true
 */
function identity(value) {
  return value;
}

module.exports = identity;

},{}],74:[function(require,module,exports){
var audioEl;
var dir = '';
var format = 'wav';
var volume = 0.5;

module.exports = {

	init: function(soundsDir) {
		audioEl = document.createElement('audio');
		audioEl.setAttribute('autoplay', true);
		if(soundsDir) dir = soundsDir;
		return this;
	},

	play: function(filename, loop) {
		if(filename) audioEl.src = (dir + filename + '.' + format);
		loop ? audioEl.setAttribute('loop', true) : audioEl.removeAttribute('loop');
		audioEl.volume = volume;
		audioEl.play();
	},

	stop: function() {
		audioEl.pause();
		audioEl.currentTime = 0;
	}

};
},{}],75:[function(require,module,exports){
var _ = require('./lodash');
var debug = require('./debug');
var remoteEvents = [];
var localEvents = [];
var initiated = false;
var shared = false;
var cursor = null;
var widget;
var entity = '';
var emit;
var path = '';
var eventTimestamp = 0;
// var updateInterval = null;
// var updateIntervalValue = 5000;
// var updateStateInterval = null;
// var checkEvery = _.debounce(unshareBrowser, 30000);
// var checkEvery = _.debounce(emitEvents, 100);
// var addEventsEvery = _.debounce(emitEvents, 100);
var addEventsEvery = _.throttle(emitEvents, 100, { 'trailing': true, 'leading': true });
var cursorX = 0, cursorY = 0;
var requestAF;

module.exports = {
	init: init,
	isInitiated: isInitiated,
	share: shareBrowser,
	unshare: unshareBrowser,
	// unshareAll: unshareAll,
	emitEvents: emitEvents,
	updateEvents: updateEvents
};

function isInitiated() {
	return initiated;
}

function init(options){
	if(initiated) return debug.info('Cobrowsing already initiated');

	addEvent(document, 'keyup', eventsHandler);
	addEvent(document, 'keydown', eventsHandler);
	addEvent(document, 'keypress', eventsHandler);
	addEvent(document, 'mouseup', eventsHandler);
	addEvent(document, 'click', eventsHandler);
	addEvent(document, 'change', eventsHandler);

	widget = (typeof options.widget === 'string') ? document.querySelector(options.widget) : options.widget;
	entity = options.entity;
	emit = options.emit;
	path = options.path;

	initiated = true;
	// updateInterval = setInterval(emitEvents, updateIntervalValue);

	debug.log('cobrowsing module initiated with parameters: ', options);
	emit('cobrowsing/init');
}

function shareBrowser(){
    if(shared) return debug.info('Browser already shared');
    addEvent(document, 'scroll', eventsHandler);
    addEvent(document, 'select', eventsHandler);
    addEvent(document, 'mousemove', eventsHandler);

    // addEvent(document, 'mouseover', eventsHandler);
    // addEvent(document, 'mouseout', eventsHandler);
    
    createRemoteCursor();
    
    shared = true;
    // updateStateInterval = setInterval(updateState, updateIntervalValue);
    // clearInterval(updateInterval);

    debug.log('browser shared');
    emit('cobrowsing/shared', { entity: entity });
}

function unshareBrowser(){
	if(!shared) return debug.info('Browser already unshared');

    removeEvent(document, 'scroll', eventsHandler);
    removeEvent(document, 'select', eventsHandler);
    removeEvent(document, 'mousemove', eventsHandler);

    // removeEvent(document, 'mouseover', eventsHandler);
    // removeEvent(document, 'mouseout', eventsHandler);
    
    removeRemoteCursor();
    shared = false;
    // updateInterval = setInterval(emitEvents, updateIntervalValue);
    // clearInterval(updateStateInterval);

	emit('cobrowsing/unshared', { entity: entity });
    debug.log('browser unshared');
}

// function unshareAll(){
	// removeEvent(document, 'keyup', eventsHandler);
	// removeEvent(document, 'keydown', eventsHandler);
	// removeEvent(document, 'keypress', eventsHandler);
	// removeEvent(document, 'mouseup', eventsHandler);
	// removeEvent(document, 'click', eventsHandler);
	// removeEvent(document, 'change', eventsHandler);
	// clearInterval(updateInterval);
// }

function createRemoteCursor(){
	var body = document.body;
	if(!cursor) {
		cursor= document.createElement('img');
		cursor.className = 'wc-rmt-ptr';
		cursor.setAttribute('src', path+'images/pointer.png');
		cursor.style.position = 'absolute';
		if(body.firstChild) {
			body.insertBefore(cursor, body.firstChild);
		} else {
			body.appendChild(cursor);
	
		}
		redrawCursor();
	}
}

function redrawCursor(){
	cursor.style.left = cursorX;
	cursor.style.top = cursorY;
	requestAF = window.requestAnimationFrame(redrawCursor);
}

function removeRemoteCursor(){
	if(!cursor) return;
	cancelAnimationFrame(requestAF);
	cursor.parentNode.removeChild(cursor);
	cursor = null;
}

//from http://stackoverflow.com/questions/2897155/get-cursor-position-in-characters-within-a-text-input-field
function getCaretPosition (oField) {
  // Initialize
	var iCaretPos = 0;

  // IE Support
    if (document.selection) {

    // Set focus on the element
        oField.focus ();

    // To get cursor position, get empty selection range
        var oSel = document.selection.createRange ();

    // Move selection start to 0 position
        oSel.moveStart ('character', -oField.value.length);

    // The caret position is selection length
        iCaretPos = oSel.text.length;
    }
    else if(oField.type && (oField.type === 'email' || oField.type === 'number')){
        iCaretPos = null;
    }
  // Firefox support
    else if (oField.selectionStart || oField.selectionStart == '0'){
        iCaretPos = oField.selectionStart;
    }
    else {
        iCaretPos = null;
    }
	// Return results
	return (iCaretPos);
}

function emitEvents(events){
	// if(localEvents.length) {
	emit('cobrowsing/event', { entity: entity, events: events });
		// localEvents = [];
	// }
}

// function addEvents(events) {
// 	localEvents.push(events);
// 	emitEvents();
// }

// function updateState(){
// 	localEvents.push({ shared: true, entity: entity });
// }

function eventsHandler(evt){
	var e = evt || window.event,
		etype = e.type,
		targ = e.target,
		nodeName = targ.nodeName,
		db = document.body,
		params = {},
		nodeIndex = null,
		nodes = document.getElementsByTagName(targ.nodeName),
		scrollTop = document.documentElement.scrollTop || document.body.scrollTop,
		scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft,
		i = 0;

	// if the target is text node, get parent node
	if(targ.nodeType === 3) targ = targ.parentNode;

	// return if the target node is the descendant of widget element
	if(entity === 'user' && isDescendant(widget, targ)) return;

	for(i=0; i < remoteEvents.length; i++){
		if(remoteEvents[i].event == etype){
			remoteEvents.splice(i, 1);
			return;
		}
	}

	// get the index of target node
	for(i=0; i<nodes.length; i++){
		if(nodes[i] == targ) nodeIndex = i;
	}

	// event type
	params.event = etype;
	// entity
	params.entity = entity;
	// target node
	params.tn = nodeName;
	// index of the target node
	params.tni = nodeIndex;
	// layout width of the document.body
	params.w = db.offsetWidth;
	// layout height of the document.body
	params.h = db.offsetHeight;
	params.sx = scrollLeft;
	params.sy = scrollTop;

	if(etype === 'mousemove' || etype === 'mouseover' || etype === 'mouseout') {
		var x = e.pageX || e.clientX + scrollTop;
		var y = e.pageY || e.clientY + scrollLeft;

		// cursor horisontal postion
		params.x = x;
		// cursor vertical position
		params.y = y;

		// for(i=0; i < localEvents.length; i++) {
		// 	if(localEvents[i].indexOf(etype) != -1) {
		// 		localEvents.splice(i, 1);
		// 		break;
		// 	}
		// }
	} else if(etype === 'scroll') {
		// for(i=0; i < localEvents.length; i++) {
		// 	if(localEvents[i].indexOf('scroll') != -1) {
		// 		localEvents.splice(i, 1);
		// 		break;
		// 	}
		// }
		
		// var st = window.pageYOffset || document.documentElement.scrollTop;
		// var sl = window.pageXOffset || document.documentElement.scrollLeft;

	} else if(etype == 'keyup' || etype == 'keydown' || etype == 'keypress') {
		var code = e.charCode || e.keyCode || e.which;
		var c = getCaretPosition(targ);

		if(nodeName === 'INPUT' && targ.type === 'password') return;

		if(etype == 'keyup') {
			if((c === null) || (code == 86 && (e.metaKey || e.ctrlKey))) {
				var tvalue = targ.value;
				if(tvalue) {
					tvalue = tvalue.replace(/\n/g, '<br>');
					// the value attribute of the target node, if exists
					params.value = tvalue;
				}
			} else {
				return;
			}
		} else if(etype == 'keydown') {
			if(c !== null && (code == 8 || code == 46 || code == 190)) {
				if(!targ.value) return;
				// caret position
				params.pos = c;
				// char code
				params.code = code;
			} else {
				return;
			}
		} else if(etype === 'keypress') {
			if(c !== null && code != 8 && code != 46) {
				// caret position
				params.pos = c;
				// char code
				params.code = code;
			} else {
				return;
			}
		}
	} else if(etype === 'change') {
		if(nodeName === 'INPUT' && targ.type === 'password') return;
		params.value = targ.value;

	} else if(etype == 'mouseup' || etype == 'select'){
		var selection = window.getSelection() || document.selection.createRange().text,
			so = selection.anchorOffset,
			eo = selection.focusOffset,
			anchorParentNodeIndex = 0,
			anchorParentNodeName = '',
			anchorNodeIndex = 0,
			anchorParent = '',
			focusParentNodeIndex = 0,
			focusParentNodeName = '',
			focusNodeIndex = 0,
			focusParent = '',
			reverse = false;

		if(selection.anchorNode !== null) {
			anchorParent = selection.anchorNode.parentNode;

			for(i=0; i<anchorParent.childNodes.length;i++) {
				if(anchorParent.childNodes[i] == selection.anchorNode) anchorNodeIndex = i;
			}
			
			anchorParentNodeName = anchorParent.nodeName.toLowerCase();
			nodes = document.getElementsByTagName(anchorParentNodeName);
			for(i=0;i<nodes.length;i++) {
				if(nodes[i] === anchorParent) anchorParentNodeIndex = i;
			}
			
			focusParent = selection.focusNode.parentNode;
			for(i=0; i<focusParent.childNodes.length;i++) {
				if(focusParent.childNodes[i] == selection.focusNode) focusNodeIndex = i;
			}
			
			focusParentNodeName = focusParent.nodeName.toLowerCase();
			nodes = document.getElementsByTagName(focusParentNodeName);
			for(i=0;i<nodes.length;i++) {
				if(nodes[i] === focusParent) focusParentNodeIndex = i;
			}
			

			if(anchorParentNodeName === focusParentNodeName &&
				anchorParentNodeIndex === focusParentNodeIndex &&
					anchorNodeIndex === focusNodeIndex &&
						so > eo)
							reverse = true;

			// name of the target node where selection started
			params.sn = anchorParentNodeName;
			params.sni = anchorParentNodeIndex;
			params.schi = anchorNodeIndex;
			// name of the target node where selection ended
			params.en = focusParentNodeName;
			params.eni = focusParentNodeIndex;
			params.echi = focusNodeIndex;
			params.so = reverse ? eo : so;
			params.eo = reverse ? so : eo;
		}
	} else if(etype == 'click') {
		params.scx = e.screenX;
		params.scy = e.screenY;
	}

	// debug.log('eventsHandler: ', params);
	// localEvents.push(params);
	// emitEvents();
	// addEvents(params);
	addEventsEvery(params);
}

function updateEvents(result){
	var mainElement = document.documentElement,
		target,
		evt = {};

	if(result.events) {

		// check for scrollTop/Left. 
		// IE and Firefox always return 0 from document.body.scrollTop/Left, 
		// while other browsers return 0 from document.documentElement
		// mainElement = ('ActiveXObject' in window || typeof InstallTrigger !== 'undefined') ? document.documentElement : document.body;

		// for(var i=0; i<result.events.length; i++) {
			// evt = result.events[i];
			evt = result.events;

			// if(evt.shared !== undefined) debug.log('shared events', eventTimestamp, evt, result.init);
			if(evt.timestamp < eventTimestamp) return;
			if(evt.entity === entity) return;
					
			// if(evt.shared !== undefined){
			// 	if(evt.shared){
			// 		checkEvery();
			// 		shareBrowser();
			// 	} else {
			// 		if(!result.historyEvents) unshareBrowser();
			// 	}
			// }
			if(evt.url) {
				// if(!result.historyEvents) {
					var url = evt.url;
					var docUrl = document.URL;
					if(docUrl.indexOf('chatSessionId') !== -1) {
						docUrl = docUrl.substr(0, docUrl.indexOf('chatSessionId')-1);
					}
					if(url != docUrl) changeURL(url);
				// }
			}
			if(evt.w){
				if(evt.entity === 'user') {
					var body = document.body;
					var innerW = body.offsetWidth;
					if(innerW !== evt.w) {
						document.body.style.width = evt.w + 'px';
					}
				}
			}
			if(evt.event === 'mousemove') {
				if(cursor) {
					cursorX = evt.x + 'px';
					cursorY = evt.y + 'px';
					// cursor.style.left = evt.x + 'px';
					// cursor.style.top = evt.y + 'px';
				}
			} else if(evt.event === 'scroll') {
				if(evt.tn !== undefined) {
					if(evt.tn === '#document') target = mainElement;
					else target = document.getElementsByTagName(evt.tn)[evt.tni];
					if(target){
						target.scrollTop = evt.sy;
						target.scrollLeft = evt.sx;
					}

					console.log('scroll event: ', target, evt.sy);
				}
			} else if(evt.event === 'mouseup' || evt.event === 'select'){
				if(evt.sn) {
					var startNode = document.getElementsByTagName(evt.sn)[evt.sni];
					var endNode = document.getElementsByTagName(evt.en)[evt.eni];
					if(document.createRange && startNode !== undefined && endNode !== undefined) {
						var rng = document.createRange();
						rng.setStart(startNode.childNodes[evt.schi], evt.so);
						rng.setEnd(endNode.childNodes[evt.echi], evt.eo);
						var sel = window.getSelection();
						sel.removeAllRanges();
						sel.addRange(rng);
					}
				}
			} else if(evt.event === 'keyup' || evt.event === 'keydown' || evt.event === 'keypress') {
				if(evt.tn !== undefined && evt.tni !== undefined) {
					target = document.getElementsByTagName(evt.tn)[evt.tni];
					if(target){
						var output;
						var a = target.value;
						if(evt.code == 8) {
							if(evt.pos == a.length-1) output = a.substr(0, evt.pos-1);
							else if(evt.pos === 0) return;
							else output = a.substr(0, evt.pos-1) + a.substr(evt.pos);
							target.value = output;
						} else if(evt.code == 46) {
							output = a.substr(0, evt.pos) + a.substr(evt.pos+1);
							target.value = output;
						} else if(evt.code == 190) {
							output = a.substr(0, evt.pos) + '.' + a.substr(evt.pos);
							target.value = output;
						} else if(evt.value !== undefined) {
							var tvalue = evt.value;
							tvalue = tvalue.replace(/<br>/g, '\n');
							target.value = tvalue;
						} else {
							var c = String.fromCharCode(evt.code);
							if(a) output = a.substr(0, evt.pos) + c + a.substr(evt.pos);
							else output = c;
							target.value = output;
						}
					}
				}
			} else if(evt.event === 'change') {
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				target.value = evt.value;
			} else if(evt.event === 'click'){
				// var elements = document.getElementsByTagName(evt.tn.toLowerCase());
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				if(target) target.click();
				// elements[evt.tni].style.backgroundColor = 'yellow';
			} else {
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				if(target) {
					var evtOpts = mouseEvent(evt.event, evt.x, evt.y, evt.x, evt.y);
					dispatchEvent(target, evtOpts);
				}
			}

			if(evt.event === 'click' || evt.event === 'scroll') remoteEvents.push(evt);
		// }
	}

	if(result.timestamp) eventTimestamp = result.timestamp;
	// if(shared) emitEvents();
}

function mouseEvent(type, sx, sy, cx, cy) {
	var evt;
	var e = {
		bubbles: true,
		cancelable: (type != "mousemove"),
		view: window,
		detail: 0,
		screenX: sx,
		screenY: sy,
		clientX: cx,
		clientY: cy,
		ctrlKey: false,
		altKey: false,
		shiftKey: false,
		metaKey: false,
		button: 0,
		relatedTarget: undefined
	};
	if (typeof( document.createEvent ) == "function") {
		evt = document.createEvent("MouseEvents");
		evt.initMouseEvent(
			type,
			e.bubbles,
			e.cancelable,
			e.view,
			e.detail,
			e.screenX,
			e.screenY,
			e.clientX,
			e.clientY,
			e.ctrlKey,
			e.altKey,
			e.shiftKey,
			e.metaKey,
			e.button,
			document.body.parentNode
		);
	} else if (document.createEventObject) {
		evt = document.createEventObject();
		for (var prop in e) {
			evt[prop] = e[prop];
		}
		evt.button = { 0:1, 1:4, 2:2 }[evt.button] || evt.button;
	}
	return evt;
}
function dispatchEvent (el, evt) {
	if (el.dispatchEvent) {
		el.dispatchEvent(evt);
	} else if (el.fireEvent) {
		el.fireEvent('on' + type, evt);
	}
	return evt;
}

function changeURL(url) {
    var docUrl = document.URL;
    if (docUrl !== url) {
		document.location.href = url;
    }
}

function isDescendant(parent, child) {
     var node = child.parentNode;
     while (node != null) {
         if (node == parent) return true;
         node = node.parentNode;
     }
     return false;
}

function addEvent(obj, evType, fn) {
  if (obj.addEventListener) obj.addEventListener(evType, fn, false);
  else if (obj.attachEvent) obj.attachEvent("on"+evType, fn);
}
function removeEvent(obj, evType, fn) {
  if (obj.removeEventListener) obj.removeEventListener(evType, fn, false);
  else if (obj.detachEvent) obj.detachEvent("on"+evType, fn);
}
},{"./debug":77,"./lodash":79}],76:[function(require,module,exports){
(function (global){
var EventEmitter = require('events').EventEmitter;
var storage = require('./storage');
var request = require('./request');
var debug = require('./debug');
// var websockets = require('./websockets');
// var url = require('url').parse(document.URL, true);
var url = global.location;
var _ = require('./lodash');
var inherits = require('inherits');
var websocketTry = 1;
var pollTurns = 1;
var mainAddress = "main.ringotel.net/chatbot/WebChat/";
// var publicUrl = "https://main.ringotel.net/public/";
var websocketUrl = "";
var moduleInit = false;
var sessionTimeout = null;
var chatTimeout = null;

/**
 * Core module implements main internal functionality
 * 
 * @param  {Object} options Instantiation options that overrides module defaults
 * @return {Object}         Return public API
 */

inherits(WchatAPI, EventEmitter);

module.exports = WchatAPI;

function WchatAPI(options){

	// extend default options
	// with provided object
	this.options = options || {};
	this.options.serverUrl = this.options.server + '/ipcc/$$$';
	this.session = {};

	if(!this.options.pageid) return console.error('Cannot initiate module: pageid is undefined');

	websocketUrl = mainAddress+this.options.pageid;

	this.createWebsocket();

	this.on('session/create', this.onSessionCreate.bind(this));
	// this.on('chat/close', function(data) {
	// 	storage.saveState('chat', false, 'session');
	// });
	this.on('Error', this.onError);

	return this;

}

WchatAPI.prototype.onError = function(err){
	debug.log('Error: ', err);
}

WchatAPI.prototype.onSessionCreate = function(data){
	this.session = _.merge(this.session, data);
	storage.saveState('sid', data.sid);
	// this.setSessionTimeout();
}

WchatAPI.prototype.setSessionTimeout = function(){
	var timeout = this.session.sessionTimeout;
	clearTimeout(sessionTimeout);
	if(timeout)
		sessionTimeout = setTimeout(this.onSessionTimeout.bind(this), timeout*1000);
}

WchatAPI.prototype.onSessionTimeout = function(){
	this.emit('session/timeout');
};

WchatAPI.prototype.sendData = function(data){
	if(this.websocket) this.websocket.send(JSON.stringify(data));
};

/**
 * Websocket messages handler
 */
WchatAPI.prototype.onWebsocketMessage = function(e){
	// this.emit('websocket/message', (e.data ? JSON.parse(e.data) : {}));
	var data = JSON.parse(e.data),
	    method = data.method;

	// debug.log('onWebsocketMessage: ', data);
	
	if(data.method) {
		if(data.method === 'session') {
			this.emit('session/create', data.params);

		} else if(data.method === 'messages') {
			if(data.params.list) {
				data.params.list.map(function(item) {
					this.emit('message/new', item);
					return item;
				}.bind(this));
			}

		} else if(data.method === 'message') {
			if(data.params.typing) {
				this.emit('message/typing');
			} else {
				this.emit('message/new', data.params);
				this.setSessionTimeout();
			}

		} else if(data.method === 'openShare') { // Agent ---> User
			if(this.session.sharedId === data.params.id) return;
			if(data.params.url && (url.href !== data.params.url)) return window.location = data.params.url;
			if(data.params.id) {
				this.session.sharedId = data.params.id;
				this.emit('session/joined', { url: url.href });
				this.shareOpened(data.params.id, url.href); // User ---> Agent
			}

		} else if(data.method === 'shareOpened') { // User ---> Agent
			if(data.params.id) {
				this.session.sharedId = data.params.id;
				this.emit('session/joined', { url: url.href });
			}

		} else if(data.method === 'shareClosed') {
			clearInterval(this.openShareInteval);
			this.session.sharedId = "";
			this.emit('session/disjoin');

		} else if(data.method === 'events') {
			this.emit('cobrowsing/update', data.params);

		}
	}
};

/**
 * Module initiation
 * Emits module/start event if module started
 */
// WchatAPI.prototype.initModule = function(){

	// _.poll(function(){
	// 	return (websocketInit === true);
	// }, function() {
	// 	debug.log('INIT');
	// 	this.init();
	// }.bind(this), function(){
	// 	if(pollTurns < 2) {
	// 		pollTurns++;
	// 	} else {
	// 		return this.emit('Error', 'Module wasn\'t initiated due to network error');
	// 	}
	// }.bind(this), 60000);
// };

WchatAPI.prototype.init = function(){
	moduleInit = true;

	var entity = storage.getState('entity', 'session'),
		sid = storage.getState('sid');
		strIndex = url.href.indexOf('chatSessionId');

	debug.log('initModule: ', this.session, entity, sid);

	// A chatSessionId parameter in the url query 
	// indicates that the web page was opened by agent.
	// In that case agent should join the session.
	if(strIndex !== -1) {
		sid = this.getSidFromUrl(url.href);
		entity = 'agent';
		var cleanUrl = url.href.substr(0, strIndex);
		cleanUrl = cleanUrl[cleanUrl.length-1] === '?' ? cleanUrl.substr(0, cleanUrl.length-1) : cleanUrl;

		storage.saveState('sid', sid);
		this.joinSession(cleanUrl);

	} else if(entity === 'agent') { // In case the cobrowsing session is active
		sid = storage.getState('sid');
		this.joinSession(url.href);

	} else {
		entity = 'user';
		this.createSession({ sid: sid, url: url.href });
	}

	this.session.sid = sid;
	this.session.entity = entity;
	storage.saveState('entity', entity, 'session');

};

/**
 * Create session
 * Emits session/create event
 * if initiation is successful
 *
 * @param 	{String} 	url 	Current full URL
 * @return 	{String}	sid 	New session id
 */
WchatAPI.prototype.createSession = function(params){
	var data = {
		method: 'createSession',
		params: {
			url: (params.url || url.href)
		}
	};

	if(params.sid) data.params.sid = params.sid;

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function (err, body){
		if(err) {
			this.emit('Error', err, { method: 'createSession', params: params });
			return;
		}

		this.emit('session/create', body.result);
	}.bind(this));
};

WchatAPI.prototype.joinSession = function(url){
	this.openShareInteval = setInterval(function() {
		this.openShare(url);
	}.bind(this), 3000);

	global.onclose = function() {
		this.shareClosed();
	}.bind(this);
};

/** 
 * Send/obtain events to/from the server. 
 * Events could be obtained from the server by specifying a timestamp
 * as a starting point from which an events would be obtained
**/
WchatAPI.prototype.updateEvents = function(events, cb){
	// var sessionId = storage.getState('sid'), data;
	// if(!sessionId) return cb();
	
	if(!this.session.sharedId) return;

	data = {
		method: 'events',
		params: {
			sid: this.session.sid,
			id: this.session.sharedId,
			timestamp: storage.getState('eventTimestamp', 'cache'),
			events: events
		}
	};

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function (err, body){
		if(err) {
			this.emit('Error', err, data);
			return cb(err); // TODO: handle error
		}

		if(body.result.timestamp > storage.getState('eventTimestamp', 'cache')) {
			storage.saveState('eventTimestamp', body.result.timestamp, 'cache');
			if(cb) cb(null, body.result);
		} else {
			if(cb) cb(null, { events: [] });
		}
			

	}.bind(this));
};

/**
 * Get available dialog languages
 * If languages are not available, 
 * then either there are no available agents or
 * languages weren't set in Admin Studio
 */
WchatAPI.prototype.getLanguages = function(cb){
	debug.log('this.session: ', this.session);
	cb(null, this.session.langs);	

	// var sessionId = storage.getState('sid');
	// if(!sessionId) return cb(true);

	// request.post(this.options.serverUrl, {
	// 	method: 'getLanguages',
	// 	params: {
	// 		sid: sessionId
	// 	}
	// }, function (err, body){
	// 	if(err) {
	// 		this.emit('Error', err, { method: 'getLanguages' });
	// 		return cb(err);
	// 	}

	// 	cb(null, body);
	// }.bind(this));
};

/**
 * Request chat session
 * 
 * @param  {Object} params - user parameters (name, phone, subject, language, etc.)
 */
WchatAPI.prototype.chatRequest = function(params, cb){
	params.sid = this.session.sid;

	debug.log('chatRequest params: ', params);

	var data = {
		method: 'chatRequest',
		params: params
	};

	this.setSessionTimeout();

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function (err, body){
		if(err) {
			this.emit('Error', err, { method: 'chatRequest', params: params });
			if(cb) cb(err);
			return;
		}

		params.url = url.href;
		this.emit('chat/start', _.merge(params, body.result));
		if(cb) cb(null, body);
	}.bind(this));
};

/**
 * Get dialog messages
 * 
 * @param  {Number} timestamp Get messages since provided timestamp
 */
WchatAPI.prototype.getMessages = function(cb){
	request.post(this.options.serverUrl, {
		method: 'getMessages',
		params: {
			sid: this.session.sid,
			timestamp: storage.getState('msgTimestamp')
		}
	}, function (err, body){
		if(err) {
			this.emit('Error', err, { method: 'getMessages' });
			return cb(err);
		}

		// Do not show old messages
		if(body.result.timestamp > storage.getState('msgTimestamp')) {
			storage.saveState('msgTimestamp', body.result.timestamp);
			if(body.result.messages) {
				this.emit('message/new', body.result);
			}
		}

		if(body.result.typing) {
			this.emit('message/typing', body.result);
		}
		if(cb) cb(null, body.result);

	}.bind(this));
};

/**
 * Close current chat session
 * 
 * @param  {Number} rating Service rating
 */
WchatAPI.prototype.closeChat = function(rating){
	var data = {
		method: 'closeChat',
		params: {
			sid: this.session.sid
		}
	};
	if(rating) data.params.rating = rating;

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function (err, body){
		if(err) {
			this.emit('Error', err, data);
			return;
		}
		storage.saveState('chat', false);
		this.emit('chat/close', { rating: rating, url: url.href });
	}.bind(this));
};

/**
 * Send message to the agent
 * 
 * @param  {String} text - message content in case of regular message 
 * or dataURL in case of file transfer
 * @param  {String} file - (Optional) file name
 */
WchatAPI.prototype.sendMessage = function(params, cb){
	var data = {
		method: 'message',
		params: {
			sid: this.session.sid,
			content: params.message
		}
	};

	// reset session timeout
	this.setSessionTimeout();

	if(this.websocket) {
		if(params.file) {
		// 	// var content = publicUrl+Date.now()+"_"+this.options.pageid+"_"+params.message;
			data.params.content = params.file;
			data.params.file = params.message;

		// 	request.put(content, params.file, function(err, result) {
		// 		if(err) return console.error('sendMessage error: ', err);
		// 		this.sendData(data);
		// 	});

		}
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function(err, body){
		if(err) {
			this.emit('Error', err, { method: 'sendMessage', params: data });
			if(cb) cb(err);
			return;
		}
		if(cb) cb();
	});
};

/**
 * Send dialog either to the specified email address (if parameter "to" has passed)
 * or to call center administrator (if parameter "email" has passed)
 *
 * Either
 * @param  {String} to			Destination email address
 *
 * Or
 * @param  {String} email		Sender email address
 * @param  {String} uname		Sender name
 * @param  {String} filename	Attachment filename
 * @param  {String} filedata	Attachment file URL
 *
 * Both
 * @param  {String} text		Email body
 */
WchatAPI.prototype.sendEmail = function(params, cb){
	params.sid = this.session.sid;

	var data = {
		method: 'sendMail',
		params: params
	};

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function (err, body){
		if(err) {
			this.emit('Error', err, { method: 'sendEmail', params: params });
			if(cb) cb(err);
			return;
		}

		this.emit('chat/send', params);
		if(cb) cb(null, body);
	}.bind(this));
};

/**
 * Send callback request
 * 
 * @param  {String} task - id of the callback task that configured in the Admin Studio
 * @param  {String} phone - User's phone number
 * @param  {Number} time - Timestamp of the call to be initiated
 */
WchatAPI.prototype.requestCallback = function(params, cb){
	params.sid = this.session.sid;

	var data = {
		method: 'requestCallback',
		params: params
	};

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function(err, body){
		if(err) {
			this.emit('Error', err, { method: 'requestCallback', params: params });
			return cb(err);
		}
		if(cb) cb(null, body.result);
	}.bind(this));
};

/**
 * Disjoin current active session
 * Emits session/disjoin event
 * if request is fulfilled
 *
 * @param {String} sid ID of active session
 */
WchatAPI.prototype.disjoinSession = function(sid){

	var data = {
		method: 'disjoinSession',
		params: {
			sid: sid
		}
	};

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function (err, body){
		if(err) {
			this.emit('Error', err, { method: 'disjoinSession', params: { sid: sid } });
			return;
		}

		this.emit('session/disjoin', { url: url.href });
	}.bind(this));
};

WchatAPI.prototype.shareOpened = function(){
	var data = {
		method: 'shareOpened',
		params: {
			id: this.session.sharedId,
			url: url.href
		}
	};

	if(this.websocket) {
		return this.sendData(data);
	}
};

WchatAPI.prototype.shareClosed = function(){
	var data = {
		method: 'shareClosed',
		params: {
			id: this.session.sharedId,
			url: url.href
		}
	};

	if(this.websocket) {
		return this.sendData(data);
	}
};

/**
 * Informs the server that the cobrowsing feature is turned on or off
 * @param  {Boolean} state Represents the state of cobrowsing feature
 * @param  {String} url   Url where the feature's state is changed
 * @return none
 */
WchatAPI.prototype.openShare = function(url){
	var data = {
		method: 'openShare',
		params: {
			sid: this.session.sid,
			url: url
		}
	};

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function(err, body){
		if(err) {
			this.emit('Error', err, { method: 'openShare', params: { state: state } });
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.setChatTimeout = function(timeout){
	return setTimeout(function (){
		this.emit('chat/timeout');
	}.bind(this), timeout*1000);
};

WchatAPI.prototype.userIsTyping = function(){
	var data = {
		method: 'typing',
		params: {
			sid: this.session.sid
		}
	};

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function (err){
		if(err) {
			this.emit('Error', err, { method: 'setChatTimeout' });
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.updateUrl = function(url){
	var data = {
		method: 'updateUrl',
		params: {
			sid: this.session.sid,
			url: url
		}
	};

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function(err, body){
		if(err) {
			this.emit('Error', err, { method: 'updateUrl', params: { url: url } });
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.linkFollowed = function(url){
	var data = {
		method: 'linkFollowed',
		params: {
			sid: this.session.sid,
			url: url
		}
	};

	if(this.websocket) {
		return this.sendData(data);
	}

	request.post(this.options.serverUrl, data, function (err, body){
		if(err) {
			this.emit('Error', err, { method: 'linkFollowed', params: { url: url } });
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.detectLanguage = function(frases){
	var storageLang = storage.getState('lang', 'session'),
		availableLangs = [], lang, path;

	// list available languages by translations keys
	for(var key in frases) {
		availableLangs.push(key);
	}

	if(storageLang) {
		lang = storageLang;
	} else if(this.options.lang) {
		lang = this.options.lang;
	} else if(this.options.langFromUrl) {

		url.pathname
		.split('/')
		.map(function(item) {
			item = handleAliases(item);
			if(availableLangs.indexOf(item) !== -1) {
				lang = item;
			}

			return item;
		});
	}

	if(!lang) lang = (navigator.language || navigator.userLanguage).split('-')[0];
	if(availableLangs.indexOf(lang) === -1) lang = 'en';

	debug.log('detected lang: ', availableLangs, storageLang, this.options.lang, this.options.langFromUrl, lang);
	this.session.lang = lang;
	return lang;
};

WchatAPI.prototype.getSidFromUrl = function(url) {
	var substr = url.substring(url.indexOf('chatSessionId='));
	substr = substr.substring(substr.indexOf('=')+1);
	return substr;
};

WchatAPI.prototype.createWebsocket = function(host){
    // var protocol = (global.location.protocol === 'https:') ? 'wss:' : 'ws:';
    var protocol = 'wss:';
    var websocket = new WebSocket(protocol + '//'+websocketUrl,'json.api.smile-soft.com'); //Init Websocket handshake

    websocket.onopen = function(e){
        console.log('WebSocket opened: ', e);
        websocketTry = 1;
        if(!moduleInit) {
        	this.init();
        }
    }.bind(this);
    websocket.onmessage = this.onWebsocketMessage.bind(this);
    websocket.onclose = this.onWebsocketClose.bind(this);
    websocket.onerror = this.onError;

    global.onbeforeunload = function() {
        websocket.onclose = function () {}; // disable onclose handler first
        websocket.close()
    };

    this.websocket = websocket;

}

WchatAPI.prototype.onWebsocketClose = function(e) {
    console.log('WebSocket closed', e);
    var time = generateInterval(websocketTry);
    setTimeout(function(){
        websocketTry++;
        this.createWebsocket();
    }.bind(this), time);
}

//Reconnection Exponential Backoff Algorithm taken from http://blog.johnryding.com/post/78544969349/how-to-reconnect-web-sockets-in-a-realtime-web-app
function generateInterval (k) {
    var maxInterval = (Math.pow(2, k) - 1) * 1000;
  
    if (maxInterval > 30*1000) {
        maxInterval = 30*1000; // If the generated interval is more than 30 seconds, truncate it down to 30 seconds.
    }
  
    // generate the interval to a random number between 0 and the maxInterval determined from above
    return Math.random() * maxInterval;
}

function handleAliases(alias) {
	var lang = alias;
	if(alias === 'ua') lang = 'uk';
	else if(alias === 'us' || alias === 'gb') lang = 'en';
	return lang;
}
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./debug":77,"./lodash":79,"./request":81,"./storage":82,"events":2,"inherits":3}],77:[function(require,module,exports){
(function (global){
module.exports = {
    log: function(){ log(arguments, 'log'); },
    info: function(){ log(arguments, 'info'); },
    warn: function(){ log(arguments, 'warn'); },
    error: function(){ log(arguments, 'error'); }
};

function log(args, method){
    if(global.localStorage.getItem('swc.debug')) {
        [].forEach.call(args, function(arg){
            global.console[method] ? global.console[method](arg) : global.console.log(arg);
        });
        return;
    }
}
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],78:[function(require,module,exports){
(function (global){
/*
 * JsSIP v2.0.1
 * the Javascript SIP library
 * Copyright: 2012-2016 José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)
 * Homepage: http://jssip.net
 * License: MIT
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.JsSIP=e()}}(function(){var e;return function t(e,n,r){function s(i,o){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!o&&u)return u(i,!0);if(l)return l(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return s(n?n:t)},c,c.exports,t,e,n,r)}return n[i].exports}for(var l="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e,t,n){var r=e("../package.json"),s={USER_AGENT:r.title+" "+r.version,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60};t.exports=s},{"../package.json":47}],2:[function(e,t,n){function r(e,t,n,r){var o;return this.uac_pending_reply=!1,this.uas_pending_reply=!1,t.hasHeader("contact")?(r=t instanceof i.IncomingResponse?t.status_code<200?s.STATUS_EARLY:s.STATUS_CONFIRMED:r||s.STATUS_CONFIRMED,o=t.parseHeader("contact"),"UAS"===n?(this.id={call_id:t.call_id,local_tag:t.to_tag,remote_tag:t.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=r,this.remote_seqnum=t.cseq,this.local_uri=t.parseHeader("to").uri,this.remote_uri=t.parseHeader("from").uri,this.remote_target=o.uri,this.route_set=t.getHeaders("record-route")):"UAC"===n&&(this.id={call_id:t.call_id,local_tag:t.from_tag,remote_tag:t.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=r,this.local_seqnum=t.cseq,this.local_uri=t.parseHeader("from").uri,this.remote_uri=t.parseHeader("to").uri,this.remote_target=o.uri,this.route_set=t.getHeaders("record-route").reverse()),this.owner=e,e.ua.dialogs[this.id.toString()]=this,void l("new "+n+" dialog created with status "+(this.state===s.STATUS_EARLY?"EARLY":"CONFIRMED"))):{error:"unable to create a Dialog without Contact header field"}}t.exports=r;var s={STATUS_EARLY:1,STATUS_CONFIRMED:2};r.C=s;var l=e("debug")("JsSIP:Dialog"),i=e("./SIPMessage"),o=e("./Constants"),u=e("./Transactions"),a=e("./Dialog/RequestSender");r.prototype={update:function(e,t){this.state=s.STATUS_CONFIRMED,l("dialog "+this.id.toString()+"  changed to CONFIRMED state"),"UAC"===t&&(this.route_set=e.getHeaders("record-route").reverse())},terminate:function(){l("dialog "+this.id.toString()+" deleted"),delete this.owner.ua.dialogs[this.id.toString()]},createRequest:function(e,t,n){var r,s;return t=t&&t.slice()||[],this.local_seqnum||(this.local_seqnum=Math.floor(1e4*Math.random())),r=e===o.CANCEL||e===o.ACK?this.local_seqnum:this.local_seqnum+=1,s=new i.OutgoingRequest(e,this.remote_target,this.owner.ua,{cseq:r,call_id:this.id.call_id,from_uri:this.local_uri,from_tag:this.id.local_tag,to_uri:this.remote_uri,to_tag:this.id.remote_tag,route_set:this.route_set},t,n),s.dialog=this,s},checkInDialogRequest:function(e){var t=this;if(this.remote_seqnum){if(e.cseq<this.remote_seqnum)return e.method!==o.ACK&&e.reply(500),!1;e.cseq>this.remote_seqnum&&(this.remote_seqnum=e.cseq)}else this.remote_seqnum=e.cseq;if(e.method===o.INVITE||e.method===o.UPDATE&&e.body){if(this.uac_pending_reply===!0)e.reply(491);else{if(this.uas_pending_reply===!0){var n=(10*Math.random()|0)+1;return e.reply(500,null,["Retry-After:"+n]),!1}this.uas_pending_reply=!0,e.server_transaction.on("stateChanged",function r(){this.state!==u.C.STATUS_ACCEPTED&&this.state!==u.C.STATUS_COMPLETED&&this.state!==u.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",r),t.uas_pending_reply=!1)})}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){this.state===u.C.STATUS_ACCEPTED&&(t.remote_target=e.parseHeader("contact").uri)})}else e.method===o.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){this.state===u.C.STATUS_COMPLETED&&(t.remote_target=e.parseHeader("contact").uri)});return!0},sendRequest:function(e,t,n){n=n||{};var r=n.extraHeaders&&n.extraHeaders.slice()||[],s=n.body||null,l=this.createRequest(t,r,s),i=new a(this,e,l);return i.send(),l},receiveRequest:function(e){this.checkInDialogRequest(e)&&this.owner.receiveRequest(e)}}},{"./Constants":1,"./Dialog/RequestSender":3,"./SIPMessage":18,"./Transactions":21,debug:33}],3:[function(e,t,n){function r(e,t,n){this.dialog=e,this.applicant=t,this.request=n,this.reattempt=!1,this.reattemptTimer=null}t.exports=r;var s=e("../Constants"),l=e("../Transactions"),i=e("../RTCSession"),o=e("../RequestSender");r.prototype={send:function(){var e=this,t=new o(this,this.dialog.owner.ua);t.send(),(this.request.method===s.INVITE||this.request.method===s.UPDATE&&this.request.body)&&t.clientTransaction.state!==l.C.STATUS_TERMINATED&&(this.dialog.uac_pending_reply=!0,t.clientTransaction.on("stateChanged",function n(){this.state!==l.C.STATUS_ACCEPTED&&this.state!==l.C.STATUS_COMPLETED&&this.state!==l.C.STATUS_TERMINATED||(t.clientTransaction.removeListener("stateChanged",n),e.dialog.uac_pending_reply=!1)}))},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(e){var t=this;408===e.status_code||481===e.status_code?this.applicant.onDialogError(e):e.method===s.INVITE&&491===e.status_code?this.reattempt?this.applicant.receiveResponse(e):(this.request.cseq.value=this.dialog.local_seqnum+=1,this.reattemptTimer=setTimeout(function(){t.applicant.owner.status!==i.C.STATUS_TERMINATED&&(t.reattempt=!0,t.request_sender.send())},1e3)):this.applicant.receiveResponse(e)}}},{"../Constants":1,"../RTCSession":11,"../RequestSender":17,"../Transactions":21}],4:[function(e,t,n){function r(e){this.credentials=e,this.cnonce=null,this.nc=0,this.ncHex="00000000",this.algorithm=null,this.realm=null,this.nonce=null,this.opaque=null,this.stale=null,this.qop=null,this.method=null,this.uri=null,this.ha1=null,this.response=null}t.exports=r;var s=e("debug")("JsSIP:DigestAuthentication"),l=e("debug")("JsSIP:ERROR:DigestAuthentication");l.log=console.warn.bind(console);var i=e("./Utils");r.prototype.get=function(e){switch(e){case"realm":return this.realm;case"ha1":return this.ha1;default:return void l('get() | cannot get "%s" parameter',e)}},r.prototype.authenticate=function(e,t){var n,r;if(this.algorithm=t.algorithm,this.realm=t.realm,this.nonce=t.nonce,this.opaque=t.opaque,this.stale=t.stale,this.algorithm){if("MD5"!==this.algorithm)return l('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this.algorithm="MD5";if(!this.nonce)return l("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this.realm)return l("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this.credentials.password){if(!this.credentials.ha1)return l("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this.credentials.realm!==this.realm)return l('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this.credentials.realm,this.realm),!1}if(t.qop)if(t.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(t.qop.indexOf("auth-int")>-1))return l('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this.qop="auth-int"}else this.qop=null;return this.method=e.method,this.uri=e.ruri,this.cnonce=i.createRandomToken(12),this.nc+=1,r=Number(this.nc).toString(16),this.ncHex="00000000".substr(0,8-r.length)+r,4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.credentials.password?this.ha1=i.calculateMD5(this.credentials.username+":"+this.realm+":"+this.credentials.password):this.ha1=this.credentials.ha1,"auth"===this.qop?(n=i.calculateMD5(this.method+":"+this.uri),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+n)):"auth-int"===this.qop?(n=i.calculateMD5(this.method+":"+this.uri+":"+i.calculateMD5(this.body?this.body:"")),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+n)):null===this.qop&&(n=i.calculateMD5(this.method+":"+this.uri),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+n)),s("authenticate() | response generated"),!0},r.prototype.toString=function(){var e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.credentials.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")}},{"./Utils":25,debug:33}],5:[function(e,t,n){var r={ConfigurationError:function(){var e=function(e,t){this.code=1,this.name="CONFIGURATION_ERROR",this.parameter=e,this.value=t,this.message=this.value?"Invalid value "+JSON.stringify(this.value)+' for parameter "'+this.parameter+'"':"Missing parameter: "+this.parameter};return e.prototype=new Error,e}(),InvalidStateError:function(){var e=function(e){this.code=2,this.name="INVALID_STATE_ERROR",this.status=e,this.message="Invalid status: "+e};return e.prototype=new Error,e}(),NotSupportedError:function(){var e=function(e){this.code=3,this.name="NOT_SUPPORTED_ERROR",this.message=e};return e.prototype=new Error,e}(),NotReadyError:function(){var e=function(e){this.code=4,this.name="NOT_READY_ERROR",this.message=e};return e.prototype=new Error,e}()};t.exports=r},{}],6:[function(e,t,n){t.exports=function(){function t(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,r){function s(e){Cr>_r||(_r>Cr&&(Cr=_r,Sr=[]),Sr.push(e))}function l(){var e;return"\r\n"===n.substr(_r,2)?(e="\r\n",_r+=2):(e=null,0===vr&&s('"\\r\\n"')),e}function i(){var e;return/^[0-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[0-9]")),e}function o(){var e;return/^[a-zA-Z]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-zA-Z]")),e}function u(){var e;return/^[0-9a-fA-F]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[0-9a-fA-F]")),e}function a(){var e;return e=d(),null===e&&(e=p()),e}function c(){var e;return/^[\0-\xFF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\0-\\xFF]")),e}function h(){var e;return/^["]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s('["]')),e}function d(){var e;return 32===n.charCodeAt(_r)?(e=" ",_r++):(e=null,0===vr&&s('" "')),e}function p(){var e;return 9===n.charCodeAt(_r)?(e="	",_r++):(e=null,0===vr&&s('"\\t"')),e}function f(){var e;return/^[a-zA-Z0-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-zA-Z0-9]")),e}function m(){var e;return 59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","'))))))))))),e}function g(){var e;return e=f(),null===e&&(e=T()),e}function T(){var e;return 45===n.charCodeAt(_r)?(e="-",_r++):(e=null,0===vr&&s('"-"')),null===e&&(95===n.charCodeAt(_r)?(e="_",_r++):(e=null,0===vr&&s('"_"')),null===e&&(46===n.charCodeAt(_r)?(e=".",_r++):(e=null,0===vr&&s('"."')),null===e&&(33===n.charCodeAt(_r)?(e="!",_r++):(e=null,0===vr&&s('"!"')),null===e&&(126===n.charCodeAt(_r)?(e="~",_r++):(e=null,0===vr&&s('"~"')),null===e&&(42===n.charCodeAt(_r)?(e="*",_r++):(e=null,0===vr&&s('"*"')),null===e&&(39===n.charCodeAt(_r)?(e="'",_r++):(e=null,0===vr&&s('"\'"')),null===e&&(40===n.charCodeAt(_r)?(e="(",_r++):(e=null,0===vr&&s('"("')),null===e&&(41===n.charCodeAt(_r)?(e=")",_r++):(e=null,0===vr&&s('")"')))))))))),e}function _(){var e,t,r,l,i;return l=_r,i=_r,37===n.charCodeAt(_r)?(e="%",_r++):(e=null,0===vr&&s('"%"')),null!==e?(t=u(),null!==t?(r=u(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){return t.join("")}(l,e)),null===e&&(_r=l),e}function v(){var e,t,n,r,s,i;for(r=_r,s=_r,i=_r,e=[],t=a();null!==t;)e.push(t),t=a();if(null!==e?(t=l(),null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),e=null!==e?e:"",null!==e){if(n=a(),null!==n)for(t=[];null!==n;)t.push(n),n=a();else t=null;null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return null!==e&&(e=function(e){return" "}(r)),null===e&&(_r=r),e}function C(){var e;return e=v(),e=null!==e?e:""}function S(){var e,t,r,l,i;for(l=_r,i=_r,e=[],t=d(),null===t&&(t=p());null!==t;)e.push(t),t=d(),null===t&&(t=p());return null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return":"}(l)),null===e&&(_r=l),e}function E(){var e,t,r,s,l,i,o;if(l=_r,i=_r,t=A(),null!==t)for(e=[];null!==t;)e.push(t),t=A();else e=null;if(null!==e){for(t=[],o=_r,r=[],s=v();null!==s;)r.push(s),s=v();for(null!==r?(s=A(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==r;){for(t.push(r),o=_r,r=[],s=v();null!==s;)r.push(s),s=v();null!==r?(s=A(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o)}null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r,e)}(l)),null===e&&(_r=l),e}function A(){var e;return/^[!-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[!-~]")),null===e&&(e=y()),e}function y(){var e;return/^[\x80-\uFFFF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\x80-\\uFFFF]")),e}function R(){var e;return/^[\x80-\xBF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\x80-\\xBF]")),e}function b(){var e;return e=i(),null===e&&(/^[a-f]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-f]"))),e}function I(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"'))))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function w(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"'))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function N(){var e;return 40===n.charCodeAt(_r)?(e="(",_r++):(e=null,0===vr&&s('"("')),null===e&&(41===n.charCodeAt(_r)?(e=")",_r++):(e=null,0===vr&&s('")"')),null===e&&(60===n.charCodeAt(_r)?(e="<",_r++):(e=null,0===vr&&s('"<"')),null===e&&(62===n.charCodeAt(_r)?(e=">",_r++):(e=null,0===vr&&s('">"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(92===n.charCodeAt(_r)?(e="\\",_r++):(e=null,0===vr&&s('"\\\\"')),null===e&&(e=h(),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(123===n.charCodeAt(_r)?(e="{",_r++):(e=null,0===vr&&s('"{"')),null===e&&(125===n.charCodeAt(_r)?(e="}",_r++):(e=null,0===vr&&s('"}"')),null===e&&(e=d(),null===e&&(e=p())))))))))))))))))),e}function D(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')),null===t&&(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null===t&&(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null===t&&(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null===t&&(62===n.charCodeAt(_r)?(t=">",_r++):(t=null,0===vr&&s('">"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(92===n.charCodeAt(_r)?(t="\\",_r++):(t=null,0===vr&&s('"\\\\"')),null===t&&(t=h(),null===t&&(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null===t&&(91===n.charCodeAt(_r)?(t="[",_r++):(t=null,0===vr&&s('"["')),null===t&&(93===n.charCodeAt(_r)?(t="]",_r++):(t=null,0===vr&&s('"]"')),null===t&&(63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null===t&&(123===n.charCodeAt(_r)?(t="{",_r++):(t=null,0===vr&&s('"{"')),null===t&&(125===n.charCodeAt(_r)?(t="}",_r++):(t=null,0===vr&&s('"}"'))))))))))))))))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')),null===t&&(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null===t&&(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null===t&&(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null===t&&(62===n.charCodeAt(_r)?(t=">",_r++):(t=null,0===vr&&s('">"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(92===n.charCodeAt(_r)?(t="\\",_r++):(t=null,0===vr&&s('"\\\\"')),null===t&&(t=h(),null===t&&(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null===t&&(91===n.charCodeAt(_r)?(t="[",_r++):(t=null,0===vr&&s('"["')),null===t&&(93===n.charCodeAt(_r)?(t="]",_r++):(t=null,0===vr&&s('"]"')),null===t&&(63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null===t&&(123===n.charCodeAt(_r)?(t="{",_r++):(t=null,0===vr&&s('"{"')),null===t&&(125===n.charCodeAt(_r)?(t="}",_r++):(t=null,0===vr&&s('"}"')))))))))))))))))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function O(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"*"}(l)),null===e&&(_r=l),e}function x(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"/"}(l)),null===e&&(_r=l),e}function U(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"="}(l)),null===e&&(_r=l),e}function M(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"("}(l)),null===e&&(_r=l),e}function P(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return")"}(l)),null===e&&(_r=l),e}function q(){var e,t,r,l;return r=_r,l=_r,62===n.charCodeAt(_r)?(e=">",_r++):(e=null,0===vr&&s('">"')),null!==e?(t=C(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e){return">"}(r)),null===e&&(_r=r),e}function L(){var e,t,r,l;return r=_r,l=_r,e=C(),null!==e?(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e){return"<"}(r)),null===e&&(_r=r),e}function k(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return","}(l)),null===e&&(_r=l),e}function H(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return";"}(l)),null===e&&(_r=l),e}function F(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return":"}(l)),null===e&&(_r=l),e}function G(){var e,t,n,r;return n=_r,r=_r,e=C(),null!==e?(t=h(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),null!==e&&(e=function(e){return'"'}(n)),null===e&&(_r=n),e}function j(){var e,t,n,r;return n=_r,r=_r,e=h(),null!==e?(t=C(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),null!==e&&(e=function(e){return'"'}(n)),null===e&&(_r=n),e}function W(){var e,t,n,r;if(r=_r,e=M(),null!==e){for(t=[],n=B(),null===n&&(n=J(),null===n&&(n=W()));null!==n;)t.push(n),n=B(),null===n&&(n=J(),null===n&&(n=W()));null!==t?(n=P(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)}else e=null,_r=r;return e}function B(){var e;return/^[!-']/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[!-']")),null===e&&(/^[*-[]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[*-[]")),null===e&&(/^[\]-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\]-~]")),null===e&&(e=y(),null===e&&(e=v())))),e}function z(){var e,t,r,s,l,i;if(l=_r,i=_r,e=C(),null!==e)if(t=h(),null!==t){for(r=[],s=Y(),null===s&&(s=J());null!==s;)r.push(s),s=Y(),null===s&&(s=J());null!==r?(s=h(),null!==s?e=[e,t,r,s]:(e=null,_r=i)):(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r,e)}(l)),null===e&&(_r=l),e}function V(){var e,t,r,s,l,i;if(l=_r,i=_r,e=C(),null!==e)if(t=h(),null!==t){for(r=[],s=Y(),null===s&&(s=J());null!==s;)r.push(s),s=Y(),null===s&&(s=J());null!==r?(s=h(),null!==s?e=[e,t,r,s]:(e=null,_r=i)):(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r-1,e+1)}(l)),null===e&&(_r=l),e}function Y(){var e;return e=v(),null===e&&(33===n.charCodeAt(_r)?(e="!",_r++):(e=null,0===vr&&s('"!"')),null===e&&(/^[#-[]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[#-[]")),null===e&&(/^[\]-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\]-~]")),null===e&&(e=y())))),e}function J(){var e,t,r;return r=_r,92===n.charCodeAt(_r)?(e="\\",_r++):(e=null,0===vr&&s('"\\\\"')),null!==e?(/^[\0-\t]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\0-\\t]")),null===t&&(/^[\x0B-\f]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\x0B-\\f]")),null===t&&(/^[\x0E-]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\x0E-]")))),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function K(){var e,t,r,l,i,o;return i=_r,o=_r,e=X(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=ee(),r=null!==r?r:"",null!==r?(l=se(),null!==l?e=[e,t,r,l]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e){try{yr.uri=new Er(yr.scheme,yr.user,yr.host,yr.port),delete yr.scheme,delete yr.user,delete yr.host,delete yr.host_type,delete yr.port}catch(t){yr=-1}}(i)),null===e&&(_r=i),e}function $(){var e,t,l,i,o,u,a,c;return a=_r,c=_r,e=X(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(l=ee(),l=null!==l?l:"",null!==l?(i=se(),null!==i?(o=ge(),null!==o?(u=Ne(),u=null!==u?u:"",null!==u?e=[e,t,l,i,o,u]:(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c),null!==e&&(e=function(e){try{yr.uri=new Er(yr.scheme,yr.user,yr.host,yr.port,yr.uri_params,yr.uri_headers),delete yr.scheme,delete yr.user,delete yr.host,delete yr.host_type,delete yr.port,delete yr.uri_params,"SIP_URI"===r&&(yr=yr.uri)}catch(t){yr=-1}}(a)),null===e&&(_r=a),e}function X(){var e;return e=Q(),null===e&&(e=Z()),e}function Q(){var e,t;return t=_r,"sips"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"sips"')),null!==e&&(e=function(e,t){yr.scheme=t.toLowerCase()}(t,e)),null===e&&(_r=t),e}function Z(){var e,t;return t=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"sip"')),null!==e&&(e=function(e,t){yr.scheme=t.toLowerCase()}(t,e)),null===e&&(_r=t),e}function ee(){var e,t,r,l,i,o;return l=_r,i=_r,e=te(),null!==e?(o=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=re(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?(64===n.charCodeAt(_r)?(r="@",
_r++):(r=null,0===vr&&s('"@"')),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.user=decodeURIComponent(n.substring(_r-1,e))}(l)),null===e&&(_r=l),e}function te(){var e,t;if(t=g(),null===t&&(t=_(),null===t&&(t=ne())),null!==t)for(e=[];null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(t=ne()));else e=null;return e}function ne(){var e;return 38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"'))))))))),e}function re(){var e,t,r;for(r=_r,e=[],t=g(),null===t&&(t=_(),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","'))))))));null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","'))))))));return null!==e&&(e=function(e){yr.password=n.substring(_r,e)}(r)),null===e&&(_r=r),e}function se(){var e,t,r,l,i;return l=_r,e=le(),null!==e?(i=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=me(),null!==r?t=[t,r]:(t=null,_r=i)):(t=null,_r=i),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e}function le(){var e,t;return t=_r,e=ie(),null===e&&(e=pe(),null===e&&(e=ae())),null!==e&&(e=function(e){return yr.host=n.substring(_r,e).toLowerCase(),yr.host}(t)),null===e&&(_r=t),e}function ie(){var e,t,r,l,i,o;for(l=_r,i=_r,e=[],o=_r,t=oe(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o);null!==t;)e.push(t),o=_r,t=oe(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o);return null!==e?(t=ue(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),r=null!==r?r:"",null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return yr.host_type="domain",n.substring(_r,e)}(l)),null===e&&(_r=l),e}function oe(){var e,t,r,l;if(l=_r,e=f(),null!==e){for(t=[],r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==r;)t.push(r),r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return e}function ue(){var e,t,r,l;if(l=_r,e=o(),null!==e){for(t=[],r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==r;)t.push(r),r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return e}function ae(){var e,t,r,l,i;return l=_r,i=_r,91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null!==e?(t=ce(),null!==t?(93===n.charCodeAt(_r)?(r="]",_r++):(r=null,0===vr&&s('"]"')),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return yr.host_type="IPv6",n.substring(_r,e)}(l)),null===e&&(_r=l),e}function ce(){var e,t,r,l,i,o,u,a,c,h,d,p,f,m,g,T;return m=_r,g=_r,e=he(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?(58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=he(),null!==c?(58===n.charCodeAt(_r)?(h=":",_r++):(h=null,0===vr&&s('":"')),null!==h?(d=he(),null!==d?(58===n.charCodeAt(_r)?(p=":",_r++):(p=null,0===vr&&s('":"')),null!==p?(f=de(),null!==f?e=[e,t,r,l,i,o,u,a,c,h,d,p,f]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=he(),null!==h?(58===n.charCodeAt(_r)?(d=":",_r++):(d=null,0===vr&&s('":"')),null!==d?(p=de(),null!==p?e=[e,t,r,l,i,o,u,a,c,h,d,p]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=de(),null!==h?e=[e,t,r,l,i,o,u,a,c,h]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=de(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=de(),null!==o?e=[e,t,r,l,i,o]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=de(),null!==l?e=[e,t,r,l]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=de(),null!==t?e=[e,t]:(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?e=[e,t]:(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?("::"===n.substr(_r,2)?(t="::",_r+=2):(t=null,0===vr&&s('"::"')),null!==t?(r=he(),null!==r?(58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=he(),null!==c?(58===n.charCodeAt(_r)?(h=":",_r++):(h=null,0===vr&&s('":"')),null!==h?(d=de(),null!==d?e=[e,t,r,l,i,o,u,a,c,h,d]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?("::"===n.substr(_r,2)?(r="::",_r+=2):(r=null,0===vr&&s('"::"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=de(),null!==h?e=[e,t,r,l,i,o,u,a,c,h]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?("::"===n.substr(_r,2)?(l="::",_r+=2):(l=null,0===vr&&s('"::"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=de(),null!==c?e=[e,t,r,l,i,o,u,a,c]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?("::"===n.substr(_r,2)?(i="::",_r+=2):(i=null,0===vr&&s('"::"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=de(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?("::"===n.substr(_r,2)?(o="::",_r+=2):(o=null,0===vr&&s('"::"')),null!==o?(u=de(),null!==u?e=[e,t,r,l,i,o,u]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?(T=_r,58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?o=[o,u]:(o=null,_r=T)):(o=null,_r=T),o=null!==o?o:"",null!==o?("::"===n.substr(_r,2)?(u="::",_r+=2):(u=null,0===vr&&s('"::"')),null!==u?(a=he(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?(T=_r,58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?o=[o,u]:(o=null,_r=T)):(o=null,_r=T),o=null!==o?o:"",null!==o?(T=_r,58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?u=[u,a]:(u=null,_r=T)):(u=null,_r=T),u=null!==u?u:"",null!==u?("::"===n.substr(_r,2)?(a="::",_r+=2):(a=null,0===vr&&s('"::"')),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g))))))))))))))),null!==e&&(e=function(e){return yr.host_type="IPv6",n.substring(_r,e)}(m)),null===e&&(_r=m),e}function he(){var e,t,n,r,s;return s=_r,e=u(),null!==e?(t=u(),t=null!==t?t:"",null!==t?(n=u(),n=null!==n?n:"",null!==n?(r=u(),r=null!==r?r:"",null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function de(){var e,t,r,l;return l=_r,e=he(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(e=pe()),e}function pe(){var e,t,r,l,i,o,u,a,c;return a=_r,c=_r,e=fe(),null!==e?(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null!==t?(r=fe(),null!==r?(46===n.charCodeAt(_r)?(l=".",_r++):(l=null,0===vr&&s('"."')),null!==l?(i=fe(),null!==i?(46===n.charCodeAt(_r)?(o=".",_r++):(o=null,0===vr&&s('"."')),null!==o?(u=fe(),null!==u?e=[e,t,r,l,i,o,u]:(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c),null!==e&&(e=function(e){return yr.host_type="IPv4",n.substring(_r,e)}(a)),null===e&&(_r=a),e}function fe(){var e,t,r,l;return l=_r,"25"===n.substr(_r,2)?(e="25",_r+=2):(e=null,0===vr&&s('"25"')),null!==e?(/^[0-5]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[0-5]")),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,50===n.charCodeAt(_r)?(e="2",_r++):(e=null,0===vr&&s('"2"')),null!==e?(/^[0-4]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[0-4]")),null!==t?(r=i(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,49===n.charCodeAt(_r)?(e="1",_r++):(e=null,0===vr&&s('"1"')),null!==e?(t=i(),null!==t?(r=i(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,/^[1-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[1-9]")),null!==e?(t=i(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null===e&&(e=i())))),e}function me(){var e,t,n,r,s,l,o;return l=_r,o=_r,e=i(),e=null!==e?e:"",null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?(r=i(),r=null!==r?r:"",null!==r?(s=i(),s=null!==s?s:"",null!==s?e=[e,t,n,r,s]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e,t){return t=parseInt(t.join("")),yr.port=t,t}(l,e)),null===e&&(_r=l),e}function ge(){var e,t,r,l;for(e=[],l=_r,59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=Te(),null!==r?t=[t,r]:(t=null,_r=l)):(t=null,_r=l);null!==t;)e.push(t),l=_r,59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=Te(),null!==r?t=[t,r]:(t=null,_r=l)):(t=null,_r=l);return e}function Te(){var e;return e=_e(),null===e&&(e=ve(),null===e&&(e=Ce(),null===e&&(e=Se(),null===e&&(e=Ee(),null===e&&(e=Ae(),null===e&&(e=ye())))))),e}function _e(){var e,t,r,l;return r=_r,l=_r,"transport="===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"transport="')),null!==e?("udp"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"udp"')),null===t&&("tcp"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"tcp"')),null===t&&("sctp"===n.substr(_r,4).toLowerCase()?(t=n.substr(_r,4),_r+=4):(t=null,0===vr&&s('"sctp"')),null===t&&("tls"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"tls"')),null===t&&(t=I())))),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.transport=t.toLowerCase()}(r,e[1])),null===e&&(_r=r),e}function ve(){var e,t,r,l;return r=_r,l=_r,"user="===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"user="')),null!==e?("phone"===n.substr(_r,5).toLowerCase()?(t=n.substr(_r,5),_r+=5):(t=null,0===vr&&s('"phone"')),null===t&&("ip"===n.substr(_r,2).toLowerCase()?(t=n.substr(_r,2),_r+=2):(t=null,0===vr&&s('"ip"')),null===t&&(t=I())),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.user=t.toLowerCase()}(r,e[1])),null===e&&(_r=r),e}function Ce(){var e,t,r,l;return r=_r,l=_r,"method="===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"method="')),null!==e?(t=at(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.method=t}(r,e[1])),null===e&&(_r=r),e}function Se(){var e,t,r,l;return r=_r,l=_r,"ttl="===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"ttl="')),null!==e?(t=Jn(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.ttl=t}(r,e[1])),null===e&&(_r=r),e}function Ee(){var e,t,r,l;return r=_r,l=_r,"maddr="===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"maddr="')),null!==e?(t=le(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.maddr=t}(r,e[1])),null===e&&(_r=r),e}function Ae(){var e,t,r,l,i,o;return l=_r,i=_r,"lr"===n.substr(_r,2).toLowerCase()?(e=n.substr(_r,2),_r+=2):(e=null,0===vr&&s('"lr"')),null!==e?(o=_r,61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=I(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.uri_params||(yr.uri_params={}),yr.uri_params.lr=void 0}(l)),null===e&&(_r=l),e}function ye(){var e,t,r,l,i,o;return l=_r,i=_r,e=Re(),null!==e?(o=_r,61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=be(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t,n){yr.uri_params||(yr.uri_params={}),n="undefined"==typeof n?void 0:n[1],yr.uri_params[t.toLowerCase()]=n}(l,e[0],e[1])),null===e&&(_r=l),e}function Re(){var e,t,n;if(n=_r,t=Ie(),null!==t)for(e=[];null!==t;)e.push(t),t=Ie();else e=null;return null!==e&&(e=function(e,t){return t.join("")}(n,e)),null===e&&(_r=n),e}function be(){var e,t,n;if(n=_r,t=Ie(),null!==t)for(e=[];null!==t;)e.push(t),t=Ie();else e=null;return null!==e&&(e=function(e,t){return t.join("")}(n,e)),null===e&&(_r=n),e}function Ie(){var e;return e=we(),null===e&&(e=g(),null===e&&(e=_())),e}function we(){var e;return 91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')))))))),e}function Ne(){var e,t,r,l,i,o,u;if(o=_r,63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null!==e)if(t=De(),null!==t){for(r=[],u=_r,38===n.charCodeAt(_r)?(l="&",_r++):(l=null,0===vr&&s('"&"')),null!==l?(i=De(),null!==i?l=[l,i]:(l=null,_r=u)):(l=null,_r=u);null!==l;)r.push(l),u=_r,38===n.charCodeAt(_r)?(l="&",_r++):(l=null,0===vr&&s('"&"')),null!==l?(i=De(),null!==i?l=[l,i]:(l=null,_r=u)):(l=null,_r=u);null!==r?e=[e,t,r]:(e=null,_r=o)}else e=null,_r=o;else e=null,_r=o;return e}function De(){var e,t,r,l,i;return l=_r,i=_r,e=Oe(),null!==e?(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=xe(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t,n){t=t.join("").toLowerCase(),n=n.join(""),yr.uri_headers||(yr.uri_headers={}),yr.uri_headers[t]?yr.uri_headers[t].push(n):yr.uri_headers[t]=[n]}(l,e[0],e[2])),null===e&&(_r=l),e}function Oe(){var e,t;if(t=Ue(),null===t&&(t=g(),null===t&&(t=_())),null!==t)for(e=[];null!==t;)e.push(t),t=Ue(),null===t&&(t=g(),null===t&&(t=_()));else e=null;return e}function xe(){var e,t;for(e=[],t=Ue(),null===t&&(t=g(),null===t&&(t=_()));null!==t;)e.push(t),t=Ue(),null===t&&(t=g(),null===t&&(t=_()));return e}function Ue(){var e;return 91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')))))))),e}function Me(){var e;return e=ct(),null===e&&(e=Pe()),e}function Pe(){var e,t,n,r,s,l;return l=_r,e=at(),null!==e?(t=d(),null!==t?(n=qe(),null!==n?(r=d(),null!==r?(s=Ze(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function qe(){var e;return e=$(),null===e&&(e=Le()),e}function Le(){var e,t,r,l;return l=_r,e=Je(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=ke(),null===r&&(r=Ge()),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function ke(){var e,t,r,l,i;return l=_r,e=He(),null===e&&(e=Fe()),null!==e?(i=_r,63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null!==t?(r=Qe(),null!==r?t=[t,r]:(t=null,_r=i)):(t=null,_r=i),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e}function He(){var e,t,r,l;return l=_r,"//"===n.substr(_r,2)?(e="//",_r+=2):(e=null,0===vr&&s('"//"')),null!==e?(t=Ke(),null!==t?(r=Fe(),r=null!==r?r:"",null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Fe(){var e,t,r;return r=_r,47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null!==e?(t=Be(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Ge(){var e,t,n,r;if(r=_r,e=We(),null!==e){for(t=[],n=je();null!==n;)t.push(n),n=je();null!==t?e=[e,t]:(e=null,_r=r)}else e=null,_r=r;return e}function je(){var e;return e=m(),null===e&&(e=g(),null===e&&(e=_())),e}function We(){var e;return e=g(),null===e&&(e=_(),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')))))))))))),e}function Be(){var e,t,r,l,i,o;if(i=_r,e=ze(),null!==e){for(t=[],o=_r,47===n.charCodeAt(_r)?(r="/",_r++):(r=null,0===vr&&s('"/"')),null!==r?(l=ze(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,47===n.charCodeAt(_r)?(r="/",_r++):(r=null,0===vr&&s('"/"')),null!==r?(l=ze(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function ze(){var e,t,r,l,i,o;for(i=_r,e=[],t=Ye();null!==t;)e.push(t),t=Ye();if(null!==e){for(t=[],o=_r,59===n.charCodeAt(_r)?(r=";",_r++):(r=null,0===vr&&s('";"')),null!==r?(l=Ve(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,59===n.charCodeAt(_r)?(r=";",_r++):(r=null,0===vr&&s('";"')),null!==r?(l=Ve(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function Ve(){var e,t;for(e=[],t=Ye();null!==t;)e.push(t),t=Ye();return e}function Ye(){var e;return e=g(),null===e&&(e=_(),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')))))))))),e}function Je(){var e,t,r,l,u;if(l=_r,u=_r,e=o(),null!==e){for(t=[],r=o(),null===r&&(r=i(),null===r&&(43===n.charCodeAt(_r)?(r="+",_r++):(r=null,0===vr&&s('"+"')),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."'))))));null!==r;)t.push(r),r=o(),null===r&&(r=i(),null===r&&(43===n.charCodeAt(_r)?(r="+",_r++):(r=null,0===vr&&s('"+"')),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."'))))));null!==t?e=[e,t]:(e=null,_r=u)}else e=null,_r=u;return null!==e&&(e=function(e){yr.scheme=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function Ke(){var e;return e=$e(),null===e&&(e=Xe()),e}function $e(){var e,t,r,l;return r=_r,l=_r,e=ee(),null!==e?(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e=null!==e?e:"",null!==e?(t=se(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e=null!==e?e:""}function Xe(){var e,t;if(t=g(),null===t&&(t=_(),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null===t&&(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"'))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null===t&&(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')))))))))));else e=null;return e}function Qe(){var e,t;for(e=[],t=je();null!==t;)e.push(t),t=je();return e}function Ze(){var e,t,r,l,o,u,a,c;if(a=_r,c=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null!==e)if(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null!==t){if(l=i(),null!==l)for(r=[];null!==l;)r.push(l),l=i();else r=null;if(null!==r)if(46===n.charCodeAt(_r)?(l=".",_r++):(l=null,0===vr&&s('"."')),null!==l){if(u=i(),null!==u)for(o=[];null!==u;)o.push(u),u=i();else o=null;null!==o?e=[e,t,r,l,o]:(e=null,_r=c)}else e=null,_r=c;else e=null,_r=c}else e=null,_r=c;else e=null,_r=c;return null!==e&&(e=function(e){yr.sip_version=n.substring(_r,e)}(a)),null===e&&(_r=a),e}function et(){var e;return"INVITE"===n.substr(_r,6)?(e="INVITE",_r+=6):(e=null,0===vr&&s('"INVITE"')),e}function tt(){var e;return"ACK"===n.substr(_r,3)?(e="ACK",_r+=3):(e=null,0===vr&&s('"ACK"')),e}function nt(){var e;return"OPTIONS"===n.substr(_r,7)?(e="OPTIONS",_r+=7):(e=null,0===vr&&s('"OPTIONS"')),e}function rt(){var e;return"BYE"===n.substr(_r,3)?(e="BYE",_r+=3):(e=null,0===vr&&s('"BYE"')),e}function st(){var e;return"CANCEL"===n.substr(_r,6)?(e="CANCEL",_r+=6):(e=null,0===vr&&s('"CANCEL"')),e}function lt(){var e;return"REGISTER"===n.substr(_r,8)?(e="REGISTER",_r+=8):(e=null,0===vr&&s('"REGISTER"')),e}function it(){var e;return"SUBSCRIBE"===n.substr(_r,9)?(e="SUBSCRIBE",_r+=9):(e=null,0===vr&&s('"SUBSCRIBE"')),e}function ot(){var e;return"NOTIFY"===n.substr(_r,6)?(e="NOTIFY",_r+=6):(e=null,0===vr&&s('"NOTIFY"')),e}function ut(){var e;return"REFER"===n.substr(_r,5)?(e="REFER",_r+=5):(e=null,0===vr&&s('"REFER"')),e}function at(){var e,t;return t=_r,e=et(),null===e&&(e=tt(),null===e&&(e=nt(),null===e&&(e=rt(),null===e&&(e=st(),null===e&&(e=lt(),null===e&&(e=it(),null===e&&(e=ot(),null===e&&(e=ut(),null===e&&(e=I()))))))))),null!==e&&(e=function(e){return yr.method=n.substring(_r,e),yr.method}(t)),null===e&&(_r=t),e}function ct(){var e,t,n,r,s,l;return l=_r,e=Ze(),null!==e?(t=d(),null!==t?(n=ht(),null!==n?(r=d(),null!==r?(s=pt(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function ht(){var e,t;return t=_r,e=dt(),null!==e&&(e=function(e,t){yr.status_code=parseInt(t.join(""))}(t,e)),null===e&&(_r=t),e}function dt(){var e,t,n,r;return r=_r,e=i(),null!==e?(t=i(),null!==t?(n=i(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function pt(){var e,t,r;for(r=_r,e=[],t=m(),null===t&&(t=g(),null===t&&(t=_(),null===t&&(t=y(),null===t&&(t=R(),null===t&&(t=d(),null===t&&(t=p()))))));null!==t;)e.push(t),t=m(),null===t&&(t=g(),null===t&&(t=_(),null===t&&(t=y(),null===t&&(t=R(),null===t&&(t=d(),null===t&&(t=p()))))));return null!==e&&(e=function(e){yr.reason_phrase=n.substring(_r,e)}(r)),null===e&&(_r=r),e}function ft(){var e,t,n,r,s,l;if(s=_r,e=Yt(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Yt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Yt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function mt(){var e,t,r,l,i,o;return l=_r,i=_r,e=D(),null!==e?(o=_r,64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?(r=D(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function gt(){var e,t,n,r,s,l,i;if(s=_r,e=O(),null===e)if(l=_r,e=Tt(),null!==e){for(t=[],i=_r,n=k(),null!==n?(r=Tt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=k(),null!==n?(r=Tt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,
_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t,n;for(n=yr.multi_header.length,t=0;n>t;t++)if(null===yr.multi_header[t].parsed){yr=null;break}yr=null!==yr?yr.multi_header:-1}(s)),null===e&&(_r=s),e}function Tt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Ct(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Ct(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t;yr.multi_header||(yr.multi_header=[]);try{t=new Ar(yr.uri,yr.display_name,yr.params),delete yr.uri,delete yr.display_name,delete yr.params}catch(n){t=null}yr.multi_header.push({possition:_r,offset:e,parsed:t})}(s)),null===e&&(_r=s),e}function _t(){var e,t,n,r,s;return s=_r,e=vt(),e=null!==e?e:"",null!==e?(t=L(),null!==t?(n=$(),null!==n?(r=q(),null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function vt(){var e,t,r,s,l,i,o;if(l=_r,i=_r,e=I(),null!==e){for(t=[],o=_r,r=v(),null!==r?(s=I(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,r=v(),null!==r?(s=I(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return null===e&&(e=z()),null!==e&&(e=function(e,t){t=n.substring(_r,e).trim(),'"'===t[0]&&(t=t.substring(1,t.length-1)),yr.display_name=t}(l,e)),null===e&&(_r=l),e}function Ct(){var e;return e=St(),null===e&&(e=Et(),null===e&&(e=Rt())),e}function St(){var e,t,r,l,i;return l=_r,i=_r,"q"===n.substr(_r,1).toLowerCase()?(e=n.substr(_r,1),_r++):(e=null,0===vr&&s('"q"')),null!==e?(t=U(),null!==t?(r=yt(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.q=t}(l,e[2])),null===e&&(_r=l),e}function Et(){var e,t,r,l,i;return l=_r,i=_r,"expires"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"expires"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.expires=t}(l,e[2])),null===e&&(_r=l),e}function At(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){return parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function yt(){var e,t,r,l,o,u,a,c;return u=_r,a=_r,48===n.charCodeAt(_r)?(e="0",_r++):(e=null,0===vr&&s('"0"')),null!==e?(c=_r,46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null!==t?(r=i(),r=null!==r?r:"",null!==r?(l=i(),l=null!==l?l:"",null!==l?(o=i(),o=null!==o?o:"",null!==o?t=[t,r,l,o]:(t=null,_r=c)):(t=null,_r=c)):(t=null,_r=c)):(t=null,_r=c),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=a)):(e=null,_r=a),null!==e&&(e=function(e){return parseFloat(n.substring(_r,e))}(u)),null===e&&(_r=u),e}function Rt(){var e,t,n,r,s,l;return r=_r,s=_r,e=I(),null!==e?(l=_r,t=U(),null!==t?(n=bt(),null!==n?t=[t,n]:(t=null,_r=l)):(t=null,_r=l),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=s)):(e=null,_r=s),null!==e&&(e=function(e,t,n){yr.params||(yr.params={}),n="undefined"==typeof n?void 0:n[1],yr.params[t.toLowerCase()]=n}(r,e[0],e[1])),null===e&&(_r=r),e}function bt(){var e;return e=I(),null===e&&(e=le(),null===e&&(e=z())),e}function It(){var e,t,n,r,s,l;if(s=_r,e=wt(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Nt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Nt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function wt(){var e;return"render"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"render"')),null===e&&("session"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"session"')),null===e&&("icon"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"icon"')),null===e&&("alert"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"alert"')),null===e&&(e=I())))),e}function Nt(){var e;return e=Dt(),null===e&&(e=Rt()),e}function Dt(){var e,t,r,l;return l=_r,"handling"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"handling"')),null!==e?(t=U(),null!==t?("optional"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"optional"')),null===r&&("required"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"required"')),null===r&&(r=I())),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Ot(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function xt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function Ut(){var e,t;return t=_r,e=Mt(),null!==e&&(e=function(e){yr=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function Mt(){var e,t,n,r,s,l,i,o;if(i=_r,e=Pt(),null!==e)if(t=x(),null!==t)if(n=Ft(),null!==n){for(r=[],o=_r,s=H(),null!==s?(l=Gt(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=H(),null!==s?(l=Gt(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function Pt(){var e;return e=qt(),null===e&&(e=Lt()),e}function qt(){var e;return"text"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"text"')),null===e&&("image"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"image"')),null===e&&("audio"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"audio"')),null===e&&("video"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"video"')),null===e&&("application"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"application"')),null===e&&(e=kt()))))),e}function Lt(){var e;return"message"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"message"')),null===e&&("multipart"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"multipart"')),null===e&&(e=kt())),e}function kt(){var e;return e=I(),null===e&&(e=Ht()),e}function Ht(){var e,t,r;return r=_r,"x-"===n.substr(_r,2).toLowerCase()?(e=n.substr(_r,2),_r+=2):(e=null,0===vr&&s('"x-"')),null!==e?(t=I(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Ft(){var e;return e=kt(),null===e&&(e=I()),e}function Gt(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=U(),null!==t?(n=jt(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function jt(){var e;return e=I(),null===e&&(e=z()),e}function Wt(){var e,t,n,r;return r=_r,e=Bt(),null!==e?(t=v(),null!==t?(n=at(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function Bt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr.value=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function zt(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr=t}(t,e)),null===e&&(_r=t),e}function Vt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=Yt(),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e,t){yr.event=t.join("").toLowerCase()}(s,e[0])),null===e&&(_r=s),e}function Yt(){var e,t,r,l,i,o;if(i=_r,e=w(),null!==e){for(t=[],o=_r,46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?(l=w(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?(l=w(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function Jt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Kt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Kt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t=yr.tag;try{yr=new Ar(yr.uri,yr.display_name,yr.params),t&&yr.setParam("tag",t)}catch(n){yr=-1}}(s)),null===e&&(_r=s),e}function Kt(){var e;return e=$t(),null===e&&(e=Rt()),e}function $t(){var e,t,r,l,i;return l=_r,i=_r,"tag"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.tag=t}(l,e[2])),null===e&&(_r=l),e}function Xt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function Qt(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr=t}(t,e)),null===e&&(_r=t),e}function Zt(){var e,t,n,r,s,l,i,o,u,a;for(o=_r,u=_r,e=[],t=vt();null!==t;)e.push(t),t=vt();if(null!==e)if(t=L(),null!==t)if(n=$(),null!==n)if(r=q(),null!==r){for(s=[],a=_r,l=H(),null!==l?(i=Rt(),null!==i?l=[l,i]:(l=null,_r=a)):(l=null,_r=a);null!==l;)s.push(l),a=_r,l=H(),null!==l?(i=Rt(),null!==i?l=[l,i]:(l=null,_r=a)):(l=null,_r=a);null!==s?e=[e,t,n,r,s]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;return null!==e&&(e=function(e){try{yr=new Ar(yr.uri,yr.display_name,yr.params)}catch(t){yr=-1}}(o)),null===e&&(_r=o),e}function en(){var e;return e=tn()}function tn(){var e,t,r,l,i,o,u,a;if(u=_r,"digest"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"Digest"')),null!==e)if(t=v(),null!==t)if(r=sn(),null!==r){for(l=[],a=_r,i=k(),null!==i?(o=sn(),null!==o?i=[i,o]:(i=null,_r=a)):(i=null,_r=a);null!==i;)l.push(i),a=_r,i=k(),null!==i?(o=sn(),null!==o?i=[i,o]:(i=null,_r=a)):(i=null,_r=a);null!==l?e=[e,t,r,l]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;return null===e&&(e=nn()),e}function nn(){var e,t,n,r,s,l,i,o;if(i=_r,e=I(),null!==e)if(t=v(),null!==t)if(n=rn(),null!==n){for(r=[],o=_r,s=k(),null!==s?(l=rn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=k(),null!==s?(l=rn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function rn(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=U(),null!==t?(n=I(),null===n&&(n=z()),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function sn(){var e;return e=ln(),null===e&&(e=un(),null===e&&(e=cn(),null===e&&(e=dn(),null===e&&(e=pn(),null===e&&(e=fn(),null===e&&(e=mn(),null===e&&(e=rn()))))))),e}function ln(){var e,t,r,l;return l=_r,"realm"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"realm"')),null!==e?(t=U(),null!==t?(r=on(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function on(){var e,t;return t=_r,e=V(),null!==e&&(e=function(e,t){yr.realm=t}(t,e)),null===e&&(_r=t),e}function un(){var e,t,r,l,i,o,u,a,c;if(a=_r,"domain"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"domain"')),null!==e)if(t=U(),null!==t)if(r=G(),null!==r)if(l=an(),null!==l){if(i=[],c=_r,u=d(),null!==u)for(o=[];null!==u;)o.push(u),u=d();else o=null;for(null!==o?(u=an(),null!==u?o=[o,u]:(o=null,_r=c)):(o=null,_r=c);null!==o;){if(i.push(o),c=_r,u=d(),null!==u)for(o=[];null!==u;)o.push(u),u=d();else o=null;null!==o?(u=an(),null!==u?o=[o,u]:(o=null,_r=c)):(o=null,_r=c)}null!==i?(o=j(),null!==o?e=[e,t,r,l,i,o]:(e=null,_r=a)):(e=null,_r=a)}else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;return e}function an(){var e;return e=Le(),null===e&&(e=Fe()),e}function cn(){var e,t,r,l;return l=_r,"nonce"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"nonce"')),null!==e?(t=U(),null!==t?(r=hn(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function hn(){var e,t;return t=_r,e=V(),null!==e&&(e=function(e,t){yr.nonce=t}(t,e)),null===e&&(_r=t),e}function dn(){var e,t,r,l,i;return l=_r,i=_r,"opaque"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"opaque"')),null!==e?(t=U(),null!==t?(r=V(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.opaque=t}(l,e[2])),null===e&&(_r=l),e}function pn(){var e,t,r,l,i;return l=_r,"stale"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"stale"')),null!==e?(t=U(),null!==t?(i=_r,"true"===n.substr(_r,4).toLowerCase()?(r=n.substr(_r,4),_r+=4):(r=null,0===vr&&s('"true"')),null!==r&&(r=function(e){yr.stale=!0}(i)),null===r&&(_r=i),null===r&&(i=_r,"false"===n.substr(_r,5).toLowerCase()?(r=n.substr(_r,5),_r+=5):(r=null,0===vr&&s('"false"')),null!==r&&(r=function(e){yr.stale=!1}(i)),null===r&&(_r=i)),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function fn(){var e,t,r,l,i;return l=_r,i=_r,"algorithm"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"algorithm"')),null!==e?(t=U(),null!==t?("md5"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"MD5"')),null===r&&("md5-sess"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"MD5-sess"')),null===r&&(r=I())),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.algorithm=t.toUpperCase()}(l,e[2])),null===e&&(_r=l),e}function mn(){var e,t,r,l,i,o,u,a,c,h;if(a=_r,"qop"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"qop"')),null!==e)if(t=U(),null!==t)if(r=G(),null!==r){if(c=_r,l=gn(),null!==l){for(i=[],h=_r,44===n.charCodeAt(_r)?(o=",",_r++):(o=null,0===vr&&s('","')),null!==o?(u=gn(),null!==u?o=[o,u]:(o=null,_r=h)):(o=null,_r=h);null!==o;)i.push(o),h=_r,44===n.charCodeAt(_r)?(o=",",_r++):(o=null,0===vr&&s('","')),null!==o?(u=gn(),null!==u?o=[o,u]:(o=null,_r=h)):(o=null,_r=h);null!==i?l=[l,i]:(l=null,_r=c)}else l=null,_r=c;null!==l?(i=j(),null!==i?e=[e,t,r,l,i]:(e=null,_r=a)):(e=null,_r=a)}else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;return e}function gn(){var e,t;return t=_r,"auth-int"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"auth-int"')),null===e&&("auth"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"auth"')),null===e&&(e=I())),null!==e&&(e=function(e,t){yr.qop||(yr.qop=[]),yr.qop.push(t.toLowerCase())}(t,e)),null===e&&(_r=t),e}function Tn(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function _n(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=vn(),null!==e){for(t=[],i=_r,n=k(),null!==n?(r=vn(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=k(),null!==n?(r=vn(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t,n;for(n=yr.multi_header.length,t=0;n>t;t++)if(null===yr.multi_header[t].parsed){yr=null;break}yr=null!==yr?yr.multi_header:-1}(s)),null===e&&(_r=s),e}function vn(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=_t(),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t;yr.multi_header||(yr.multi_header=[]);try{t=new Ar(yr.uri,yr.display_name,yr.params),delete yr.uri,delete yr.display_name,delete yr.params}catch(n){t=null}yr.multi_header.push({possition:_r,offset:e,parsed:t})}(s)),null===e&&(_r=s),e}function Cn(){var e,t,r,l,i,o,u;if(i=_r,o=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null===e&&(e=I()),null!==e){for(t=[],u=_r,r=H(),null!==r?(l=Sn(),null!==l?r=[r,l]:(r=null,_r=u)):(r=null,_r=u);null!==r;)t.push(r),u=_r,r=H(),null!==r?(l=Sn(),null!==l?r=[r,l]:(r=null,_r=u)):(r=null,_r=u);null!==t?e=[e,t]:(e=null,_r=o)}else e=null,_r=o;return null!==e&&(e=function(e,t){if(yr.protocol=t.toLowerCase(),yr.params||(yr.params={}),yr.params.text&&'"'===yr.params.text[0]){var n=yr.params.text;yr.text=n.substring(1,n.length-1),delete yr.params.text}}(i,e[0])),null===e&&(_r=i),e}function Sn(){var e;return e=En(),null===e&&(e=Rt()),e}function En(){var e,t,r,l,o,u;if(o=_r,u=_r,"cause"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"cause"')),null!==e)if(t=U(),null!==t){if(l=i(),null!==l)for(r=[];null!==l;)r.push(l),l=i();else r=null;null!==r?e=[e,t,r]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;return null!==e&&(e=function(e,t){yr.cause=parseInt(t.join(""))}(o,e[2])),null===e&&(_r=o),e}function An(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function yn(){var e,t,n,r,s,l;if(s=_r,e=Rn(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Rn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Rn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Rn(){var e,t,n,r,s,l;if(s=_r,e=_t(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function bn(){var e,t,n,r,s,l;if(s=_r,e=In(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=wn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=wn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function In(){var e,t;return t=_r,"active"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"active"')),null===e&&("pending"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"pending"')),null===e&&("terminated"===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"terminated"')),null===e&&(e=I()))),null!==e&&(e=function(e){yr.state=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function wn(){var e,t,r,l,i;return l=_r,i=_r,"reason"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"reason"')),null!==e?(t=U(),null!==t?(r=Nn(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.reason=t)}(l,e[2])),null===e&&(_r=l),null===e&&(l=_r,i=_r,"expires"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"expires"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.expires=t)}(l,e[2])),null===e&&(_r=l),null===e&&(l=_r,i=_r,"retry_after"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"retry_after"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.retry_after=t)}(l,e[2])),null===e&&(_r=l),null===e&&(e=Rt()))),e}function Nn(){var e;return"deactivated"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"deactivated"')),null===e&&("probation"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"probation"')),null===e&&("rejected"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"rejected"')),null===e&&("timeout"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"timeout"')),null===e&&("giveup"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"giveup"')),null===e&&("noresource"===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"noresource"')),null===e&&("invariant"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"invariant"')),null===e&&(e=I()))))))),e}function Dn(){var e;return e=E(),e=null!==e?e:""}function On(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e=null!==e?e:""}function xn(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Un(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Un(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t=yr.tag;try{yr=new Ar(yr.uri,yr.display_name,yr.params),t&&yr.setParam("tag",t)}catch(n){yr=-1}}(s)),null===e&&(_r=s),e}function Un(){var e;return e=$t(),null===e&&(e=Rt()),e}function Mn(){var e,t,n,r,s,l;if(s=_r,e=Pn(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Pn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Pn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Pn(){var e,t,n,r,s,l,i,o;if(i=_r,e=jn(),null!==e)if(t=v(),null!==t)if(n=zn(),null!==n){for(r=[],o=_r,s=H(),null!==s?(l=qn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=H(),null!==s?(l=qn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function qn(){var e;return e=Ln(),null===e&&(e=kn(),null===e&&(e=Hn(),null===e&&(e=Fn(),null===e&&(e=Gn(),null===e&&(e=Rt()))))),e}function Ln(){var e,t,r,l,i;return l=_r,i=_r,"ttl"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"ttl"')),null!==e?(t=U(),null!==t?(r=Jn(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.ttl=t}(l,e[2])),null===e&&(_r=l),e}function kn(){var e,t,r,l,i;return l=_r,i=_r,"maddr"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"maddr"')),null!==e?(t=U(),null!==t?(r=le(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.maddr=t}(l,e[2])),null===e&&(_r=l),e}function Hn(){var e,t,r,l,i;return l=_r,i=_r,"received"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"received"')),null!==e?(t=U(),null!==t?(r=pe(),null===r&&(r=ce()),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.received=t}(l,e[2])),null===e&&(_r=l),e}function Fn(){var e,t,r,l,i;return l=_r,i=_r,"branch"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"branch"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.branch=t}(l,e[2])),null===e&&(_r=l),e}function Gn(){var e,t,r,l,o,u,a;if(o=_r,u=_r,"rport"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"rport"')),null!==e){if(a=_r,t=U(),null!==t){for(r=[],l=i();null!==l;)r.push(l),l=i();null!==r?t=[t,r]:(t=null,_r=a)}else t=null,_r=a;t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=u)}else e=null,_r=u;return null!==e&&(e=function(e){"undefined"!=typeof response_port&&(yr.rport=response_port.join(""))}(o)),null===e&&(_r=o),e}function jn(){var e,t,n,r,s,l;return l=_r,e=Wn(),null!==e?(t=x(),null!==t?(n=I(),null!==n?(r=x(),null!==r?(s=Bn(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Wn(){var e,t;return t=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null===e&&(e=I()),null!==e&&(e=function(e,t){yr.protocol=t}(t,e)),null===e&&(_r=t),e}function Bn(){var e,t;return t=_r,"udp"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"UDP"')),null===e&&("tcp"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"TCP"')),null===e&&("tls"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"TLS"')),null===e&&("sctp"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"SCTP"')),null===e&&(e=I())))),null!==e&&(e=function(e,t){yr.transport=t}(t,e)),null===e&&(_r=t),e}function zn(){var e,t,n,r,s;return r=_r,e=Vn(),null!==e?(s=_r,t=F(),null!==t?(n=Yn(),null!==n?t=[t,n]:(t=null,_r=s)):(t=null,_r=s),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Vn(){var e,t;return t=_r,e=pe(),null===e&&(e=ae(),null===e&&(e=ie())),null!==e&&(e=function(e){yr.host=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function Yn(){var e,t,n,r,s,l,o;return l=_r,o=_r,e=i(),e=null!==e?e:"",null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?(r=i(),r=null!==r?r:"",null!==r?(s=i(),s=null!==s?s:"",null!==s?e=[e,t,n,r,s]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e,t){yr.port=parseInt(t.join(""))}(l,e)),null===e&&(_r=l),e}function Jn(){var e,t,n,r,s;return r=_r,s=_r,e=i(),null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?e=[e,t,n]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),null!==e&&(e=function(e,t){return parseInt(t.join(""))}(r,e)),null===e&&(_r=r),e}function Kn(){var e;return e=tn()}function $n(){var e,t,n,r,s,l;if(s=_r,e=Xn(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Qn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Qn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Xn(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr.expires=t}(t,e)),null===e&&(_r=t),e}function Qn(){var e;return e=Zn(),null===e&&(e=Rt()),e}function Zn(){var e,t,r,l,i;return l=_r,i=_r,"refresher"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"refresher"')),null!==e?(t=U(),null!==t?("uac"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"uac"')),null===r&&("uas"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"uas"'))),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.refresher=t.toLowerCase()}(l,e[2])),null===e&&(_r=l),e}function er(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=S(),null!==t?(n=tr(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function tr(){var e,t;for(e=[],t=A(),null===t&&(t=R(),null===t&&(t=v()));null!==t;)e.push(t),t=A(),null===t&&(t=R(),null===t&&(t=v()));return e}function nr(){var e,t;for(e=[],t=c();null!==t;)e.push(t),t=c();return e}function rr(){var e,t,r;return r=_r,"uuid:"===n.substr(_r,5)?(e="uuid:",_r+=5):(e=null,0===vr&&s('"uuid:"')),null!==e?(t=sr(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function sr(){var e,t,r,l,i,o,u,a,c,h,d;return h=_r,d=_r,e=ir(),null!==e?(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null!==t?(r=lr(),null!==r?(45===n.charCodeAt(_r)?(l="-",_r++):(l=null,0===vr&&s('"-"')),null!==l?(i=lr(),null!==i?(45===n.charCodeAt(_r)?(o="-",_r++):(o=null,0===vr&&s('"-"')),null!==o?(u=lr(),null!==u?(45===n.charCodeAt(_r)?(a="-",_r++):(a=null,0===vr&&s('"-"')),null!==a?(c=or(),null!==c?e=[e,t,r,l,i,o,u,a,c]:(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d),null!==e&&(e=function(e,t){yr=n.substring(_r+5,e)}(h,e[0])),null===e&&(_r=h),e}function lr(){var e,t,n,r,s;return s=_r,e=u(),null!==e?(t=u(),null!==t?(n=u(),null!==n?(r=u(),null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function ir(){var e,t,n;return n=_r,e=lr(),null!==e?(t=lr(),null!==t?e=[e,t]:(e=null,_r=n)):(e=null,_r=n),e}function or(){var e,t,n,r;return r=_r,e=lr(),null!==e?(t=lr(),null!==t?(n=lr(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function ur(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){try{yr=new Ar(yr.uri,yr.display_name,yr.params)}catch(t){yr=-1}}(s)),null===e&&(_r=s),e}function ar(){var e,t,n,r,s,l;if(s=_r,e=cr(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=hr(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=hr(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function cr(){var e,t,r,l,i,o;return l=_r,i=_r,e=D(),null!==e?(o=_r,64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?(r=D(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.call_id=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function hr(){var e;return e=dr(),null===e&&(e=pr(),null===e&&(e=fr(),null===e&&(e=Rt()))),e}function dr(){var e,t,r,l,i;return l=_r,i=_r,"to-tag"===n.substr(_r,6)?(e="to-tag",_r+=6):(e=null,0===vr&&s('"to-tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.to_tag=t}(l,e[2])),null===e&&(_r=l),e}function pr(){var e,t,r,l,i;return l=_r,i=_r,"from-tag"===n.substr(_r,8)?(e="from-tag",_r+=8):(e=null,0===vr&&s('"from-tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.from_tag=t}(l,e[2])),null===e&&(_r=l),e}function fr(){var e,t;return t=_r,"early-only"===n.substr(_r,10)?(e="early-only",_r+=10):(e=null,0===vr&&s('"early-only"')),null!==e&&(e=function(e){yr.early_only=!0}(t)),null===e&&(_r=t),e}function mr(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}function gr(){for(var e=1,t=1,r=!1,s=0;s<Math.max(_r,Cr);s++){var l=n.charAt(s);"\n"===l?(r||e++,t=1,r=!1):"\r"===l||"\u2028"===l||"\u2029"===l?(e++,t=1,r=!0):(t++,r=!1)}return{line:e,column:t}}var Tr={CRLF:l,DIGIT:i,ALPHA:o,HEXDIG:u,WSP:a,OCTET:c,DQUOTE:h,SP:d,HTAB:p,alphanum:f,reserved:m,unreserved:g,mark:T,escaped:_,LWS:v,SWS:C,HCOLON:S,TEXT_UTF8_TRIM:E,TEXT_UTF8char:A,UTF8_NONASCII:y,UTF8_CONT:R,LHEX:b,token:I,token_nodot:w,separators:N,word:D,STAR:O,SLASH:x,EQUAL:U,LPAREN:M,RPAREN:P,RAQUOT:q,LAQUOT:L,COMMA:k,SEMI:H,COLON:F,LDQUOT:G,RDQUOT:j,comment:W,ctext:B,quoted_string:z,quoted_string_clean:V,qdtext:Y,quoted_pair:J,SIP_URI_noparams:K,SIP_URI:$,uri_scheme:X,uri_scheme_sips:Q,uri_scheme_sip:Z,userinfo:ee,user:te,user_unreserved:ne,password:re,hostport:se,host:le,hostname:ie,domainlabel:oe,toplabel:ue,IPv6reference:ae,IPv6address:ce,h16:he,ls32:de,IPv4address:pe,dec_octet:fe,port:me,uri_parameters:ge,uri_parameter:Te,transport_param:_e,user_param:ve,method_param:Ce,ttl_param:Se,maddr_param:Ee,lr_param:Ae,other_param:ye,pname:Re,pvalue:be,paramchar:Ie,param_unreserved:we,headers:Ne,header:De,hname:Oe,hvalue:xe,hnv_unreserved:Ue,Request_Response:Me,Request_Line:Pe,Request_URI:qe,absoluteURI:Le,hier_part:ke,net_path:He,abs_path:Fe,opaque_part:Ge,uric:je,uric_no_slash:We,path_segments:Be,segment:ze,param:Ve,pchar:Ye,scheme:Je,authority:Ke,srvr:$e,reg_name:Xe,query:Qe,SIP_Version:Ze,INVITEm:et,ACKm:tt,OPTIONSm:nt,BYEm:rt,CANCELm:st,REGISTERm:lt,SUBSCRIBEm:it,NOTIFYm:ot,REFERm:ut,Method:at,Status_Line:ct,Status_Code:ht,extension_code:dt,Reason_Phrase:pt,
Allow_Events:ft,Call_ID:mt,Contact:gt,contact_param:Tt,name_addr:_t,display_name:vt,contact_params:Ct,c_p_q:St,c_p_expires:Et,delta_seconds:At,qvalue:yt,generic_param:Rt,gen_value:bt,Content_Disposition:It,disp_type:wt,disp_param:Nt,handling_param:Dt,Content_Encoding:Ot,Content_Length:xt,Content_Type:Ut,media_type:Mt,m_type:Pt,discrete_type:qt,composite_type:Lt,extension_token:kt,x_token:Ht,m_subtype:Ft,m_parameter:Gt,m_value:jt,CSeq:Wt,CSeq_value:Bt,Expires:zt,Event:Vt,event_type:Yt,From:Jt,from_param:Kt,tag_param:$t,Max_Forwards:Xt,Min_Expires:Qt,Name_Addr_Header:Zt,Proxy_Authenticate:en,challenge:tn,other_challenge:nn,auth_param:rn,digest_cln:sn,realm:ln,realm_value:on,domain:un,URI:an,nonce:cn,nonce_value:hn,opaque:dn,stale:pn,algorithm:fn,qop_options:mn,qop_value:gn,Proxy_Require:Tn,Record_Route:_n,rec_route:vn,Reason:Cn,reason_param:Sn,reason_cause:En,Require:An,Route:yn,route_param:Rn,Subscription_State:bn,substate_value:In,subexp_params:wn,event_reason_value:Nn,Subject:Dn,Supported:On,To:xn,to_param:Un,Via:Mn,via_param:Pn,via_params:qn,via_ttl:Ln,via_maddr:kn,via_received:Hn,via_branch:Fn,response_port:Gn,sent_protocol:jn,protocol_name:Wn,transport:Bn,sent_by:zn,via_host:Vn,via_port:Yn,ttl:Jn,WWW_Authenticate:Kn,Session_Expires:$n,s_e_expires:Xn,s_e_params:Qn,s_e_refresher:Zn,extension_header:er,header_value:tr,message_body:nr,uuid_URI:rr,uuid:sr,hex4:lr,hex8:ir,hex12:or,Refer_To:ur,Replaces:ar,call_id:cr,replaces_param:hr,to_tag:dr,from_tag:pr,early_flag:fr};if(void 0!==r){if(void 0===Tr[r])throw new Error("Invalid rule name: "+t(r)+".")}else r="CRLF";var _r=0,vr=0,Cr=0,Sr=[],Er=e("./URI"),Ar=e("./NameAddrHeader"),yr={},Rr=Tr[r]();if(null===Rr||_r!==n.length){var br=Math.max(_r,Cr),Ir=br<n.length?n.charAt(br):null,wr=gr();return new this.SyntaxError(mr(Sr),Ir,br,wr.line,wr.column),-1}return yr},toSource:function(){return this._source}};return n.SyntaxError=function(e,n,r,s,l){function i(e,n){var r,s;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return s=n?t(n):"end of input","Expected "+r+" but "+s+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=i(e,n),this.offset=r,this.line=s,this.column=l},n.SyntaxError.prototype=Error.prototype,n}()},{"./NameAddrHeader":9,"./URI":24}],7:[function(e,t,n){var r=e("debug")("JsSIP"),s=e("../package.json");r("version %s",s.version);var l=e("rtcninja"),i=e("./Constants"),o=e("./Exceptions"),u=e("./Utils"),a=e("./UA"),c=e("./URI"),h=e("./NameAddrHeader"),d=e("./Grammar"),p=e("./Socket"),f=e("./WebSocketInterface"),m=t.exports={C:i,Exceptions:o,Utils:u,UA:a,URI:c,NameAddrHeader:h,Socket:p,WebSocketInterface:f,Grammar:d,debug:e("debug"),rtcninja:l};Object.defineProperties(m,{name:{get:function(){return s.title}},version:{get:function(){return s.version}}})},{"../package.json":47,"./Constants":1,"./Exceptions":5,"./Grammar":6,"./NameAddrHeader":9,"./Socket":19,"./UA":23,"./URI":24,"./Utils":25,"./WebSocketInterface":26,debug:33,rtcninja:38}],8:[function(e,t,n){function r(e){this.ua=e,this.data={},l.EventEmitter.call(this)}t.exports=r;var s=e("util"),l=e("events"),i=e("./Constants"),o=e("./SIPMessage"),u=e("./Utils"),a=e("./RequestSender"),c=e("./Transactions"),h=e("./Exceptions");s.inherits(r,l.EventEmitter),r.prototype.send=function(e,t,n){var r,s,l,u,c,h=e;if(void 0===e||void 0===t)throw new TypeError("Not enough arguments");if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+h);n=n||{},c=n.extraHeaders&&n.extraHeaders.slice()||[],u=n.eventHandlers||{},l=n.contentType||"text/plain",this.content_type=l;for(s in u)this.on(s,u[s]);this.closed=!1,this.ua.applicants[this]=this,c.push("Content-Type: "+l),this.request=new o.OutgoingRequest(i.MESSAGE,e,this.ua,null,c),t?(this.request.body=t,this.content=t):this.content=null,r=new a(this,this.ua),this.newMessage("local",this.request),r.send()},r.prototype.receiveResponse=function(e){var t;if(!this.closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):delete this.ua.applicants[this],this.emit("succeeded",{originator:"remote",response:e});break;default:delete this.ua.applicants[this],t=u.sipErrorCause(e.status_code),this.emit("failed",{originator:"remote",response:e,cause:t})}},r.prototype.onRequestTimeout=function(){this.closed||this.emit("failed",{originator:"system",cause:i.causes.REQUEST_TIMEOUT})},r.prototype.onTransportError=function(){this.closed||this.emit("failed",{originator:"system",cause:i.causes.CONNECTION_ERROR})},r.prototype.close=function(){this.closed=!0,delete this.ua.applicants[this]},r.prototype.init_incoming=function(e){var t;this.request=e,this.content_type=e.getHeader("Content-Type"),e.body?this.content=e.body:this.content=null,this.newMessage("remote",e),t=this.ua.transactions.nist[e.via_branch],!t||t.state!==c.C.STATUS_TRYING&&t.state!==c.C.STATUS_PROCEEDING||e.reply(200)},r.prototype.accept=function(e){e=e||{};var t=e.extraHeaders&&e.extraHeaders.slice()||[],n=e.body;if("incoming"!==this.direction)throw new h.NotSupportedError('"accept" not supported for outgoing Message');this.request.reply(200,null,t,n)},r.prototype.reject=function(e){e=e||{};var t=e.status_code||480,n=e.reason_phrase,r=e.extraHeaders&&e.extraHeaders.slice()||[],s=e.body;if("incoming"!==this.direction)throw new h.NotSupportedError('"reject" not supported for outgoing Message');if(300>t||t>=700)throw new TypeError("Invalid status_code: "+t);this.request.reply(t,n,r,s)},r.prototype.newMessage=function(e,t){"remote"===e?(this.direction="incoming",this.local_identity=t.to,this.remote_identity=t.from):"local"===e&&(this.direction="outgoing",this.local_identity=t.from,this.remote_identity=t.to),this.ua.newMessage({originator:e,message:this,request:t})}},{"./Constants":1,"./Exceptions":5,"./RequestSender":17,"./SIPMessage":18,"./Transactions":21,"./Utils":25,events:28,util:32}],9:[function(e,t,n){function r(e,t,n){var r;if(!(e&&e instanceof s))throw new TypeError('missing or invalid "uri" parameter');this.uri=e,this.parameters={};for(r in n)this.setParam(r,n[r]);Object.defineProperties(this,{display_name:{get:function(){return t},set:function(e){t=0===e?"0":e}}})}t.exports=r;var s=e("./URI"),l=e("./Grammar");r.prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]="undefined"==typeof t||null===t?null:t.toString())},getParam:function(e){return e?this.parameters[e.toLowerCase()]:void 0},hasParam:function(e){return e?this.parameters.hasOwnProperty(e.toLowerCase())&&!0||!1:void 0},deleteParam:function(e){var t;return e=e.toLowerCase(),this.parameters.hasOwnProperty(e)?(t=this.parameters[e],delete this.parameters[e],t):void 0},clearParams:function(){this.parameters={}},clone:function(){return new r(this.uri.clone(),this.display_name,JSON.parse(JSON.stringify(this.parameters)))},toString:function(){var e,t;e=this.display_name||0===this.display_name?'"'+this.display_name+'" ':"",e+="<"+this.uri.toString()+">";for(t in this.parameters)e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]);return e}},r.parse=function(e){return e=l.parse(e,"Name_Addr_Header"),-1!==e?e:void 0}},{"./Grammar":6,"./URI":24}],10:[function(e,t,n){function r(e,t){var n=t,r=0,s=0;if(e.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(s=e.indexOf("\r\n",n),-1===s)return s;!e.substring(s+2,s+4).match(/(^\r\n)/)&&e.charAt(s+2).match(/(^\s+)/)?n=s+2:r=s}return r}function s(e,t,n,r){var s,l,i,a,c=t.indexOf(":",n),h=t.substring(n,c).trim(),d=t.substring(c+1,r).trim();switch(h.toLowerCase()){case"via":case"v":e.addHeader("via",d),1===e.getHeaders("via").length?(a=e.parseHeader("Via"),a&&(e.via=a,e.via_branch=a.branch)):a=0;break;case"from":case"f":e.setHeader("from",d),a=e.parseHeader("from"),a&&(e.from=a,e.from_tag=a.getParam("tag"));break;case"to":case"t":e.setHeader("to",d),a=e.parseHeader("to"),a&&(e.to=a,e.to_tag=a.getParam("tag"));break;case"record-route":for(a=o.parse(d,"Record_Route"),-1===a&&(a=void 0),i=a.length,l=0;i>l;l++)s=a[l],e.addHeader("record-route",d.substring(s.possition,s.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=s.parsed;break;case"call-id":case"i":e.setHeader("call-id",d),a=e.parseHeader("call-id"),a&&(e.call_id=d);break;case"contact":case"m":for(a=o.parse(d,"Contact"),-1===a&&(a=void 0),i=a.length,l=0;i>l;l++)s=a[l],e.addHeader("contact",d.substring(s.possition,s.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=s.parsed;break;case"content-length":case"l":e.setHeader("content-length",d),a=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",d),a=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",d),a=e.parseHeader("cseq"),a&&(e.cseq=a.value),e instanceof u.IncomingResponse&&(e.method=a.method);break;case"max-forwards":e.setHeader("max-forwards",d),a=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",d),a=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",d),a=e.parseHeader("proxy-authenticate");break;case"session-expires":case"x":e.setHeader("session-expires",d),a=e.parseHeader("session-expires"),a&&(e.session_expires=a.expires,e.session_expires_refresher=a.refresher);break;case"refer-to":case"r":e.setHeader("refer-to",d),a=e.parseHeader("refer-to"),a&&(e.refer_to=a);break;case"replaces":e.setHeader("replaces",d),a=e.parseHeader("replaces"),a&&(e.replaces=a);break;case"event":case"o":e.setHeader("event",d),a=e.parseHeader("event"),a&&(e.event=a);break;default:e.setHeader(h,d),a=0}return void 0===a?{error:'error parsing header "'+h+'"'}:!0}var l={};t.exports=l;var i=e("debug")("JsSIP:ERROR:Parser");i.log=console.warn.bind(console);var o=e("./Grammar"),u=e("./SIPMessage");l.parseMessage=function(e,t){var n,l,a,c,h,d=0,p=e.indexOf("\r\n");if(-1===p)return void i("parseMessage() | no CRLF found, not a SIP message");if(l=e.substring(0,p),h=o.parse(l,"Request_Response"),-1===h)return void i('parseMessage() | error parsing first line of SIP message: "'+l+'"');for(h.status_code?(n=new u.IncomingResponse,n.status_code=h.status_code,n.reason_phrase=h.reason_phrase):(n=new u.IncomingRequest(t),n.method=h.method,n.ruri=h.uri),n.data=e,d=p+2;;){if(p=r(e,d),-2===p){c=d+2;break}if(-1===p)return void i("parseMessage() | malformed message");if(h=s(n,e,d,p),h!==!0)return void i("parseMessage() |",h.error);d=p+2}return n.hasHeader("content-length")?(a=n.getHeader("content-length"),n.body=e.substr(c,a)):n.body=e.substring(c),n}},{"./Grammar":6,"./SIPMessage":18,debug:33}],11:[function(e,t,n){function r(e){G("new"),this.ua=e,this.status=k.STATUS_NULL,this.dialog=null,this.earlyDialogs={},this.connection=null,this.is_confirmed=!1,this.late_sdp=!1,this.rtcOfferConstraints=null,this.rtcAnswerConstraints=null,this.localMediaStream=null,this.localMediaStreamLocallyGenerated=!1,this.rtcReady=!0,this.timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},this.direction=null,this.local_identity=null,this.remote_identity=null,this.start_time=null,this.end_time=null,this.tones=null,this.audioMuted=!1,this.videoMuted=!1,this.localHold=!1,this.remoteHold=!1,this.sessionTimers={enabled:this.ua.configuration.session_timers,defaultExpires:z.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},this.referSubscribers={},this.data={},F.EventEmitter.call(this)}function s(e,t){var n=this,r=K.T1;this.timers.invite2xxTimer=setTimeout(function s(){n.status===k.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,["Contact: "+n.contact],t),r<K.T2&&(r=2*r,r>K.T2&&(r=K.T2)),n.timers.invite2xxTimer=setTimeout(s,r))},r)}function l(){var e=this;this.timers.ackTimer=setTimeout(function(){e.status===k.STATUS_WAITING_FOR_ACK&&(G("no ACK received, terminating the session"),clearTimeout(e.timers.invite2xxTimer),v.call(e,z.BYE),x.call(e,"remote",null,z.causes.NO_ACK))},K.TIMER_H)}function i(e,t){var n=this;this.connection=new W.RTCPeerConnection(e,t),this.connection.onaddstream=function(e,t){n.emit("addstream",{stream:t})},this.connection.onremovestream=function(e,t){n.emit("removestream",{stream:t})},this.connection.oniceconnectionstatechange=function(e,t){n.emit("iceconnectionstatechange",{state:t}),"failed"===t&&n.terminate({cause:z.causes.RTP_TIMEOUT,status_code:200,reason_phrase:z.causes.RTP_TIMEOUT})}}function o(e,t,n,r){function s(r){i.onicecandidate=function(n,r){if(!r){if(i.onicecandidate=null,l.rtcReady=!0,t){var s={originator:"local",type:e,sdp:i.localDescription.sdp};l.emit("sdp",s),t(s.sdp)}t=null}},i.setLocalDescription(r,function(){if("complete"===i.iceGatheringState){if(l.rtcReady=!0,t){var n={originator:"local",type:e,sdp:i.localDescription.sdp};l.emit("sdp",n),t(n.sdp)}t=null}},function(e){l.rtcReady=!0,n&&n(e)})}G("createLocalDescription()");var l=this,i=this.connection;if(this.rtcReady=!1,"offer"===e)i.createOffer(s,function(e){l.rtcReady=!0,n&&n(e)},r);else{if("answer"!==e)throw new Error('createLocalDescription() | type must be "offer" or "answer", but "'+e+'" was given');i.createAnswer(s,function(e){l.rtcReady=!0,n&&n(e)},r)}}function u(e,t,n){var r,s,l="UAS"===t?e.to_tag:e.from_tag,i="UAS"===t?e.from_tag:e.to_tag,o=e.call_id+l+i;return s=this.earlyDialogs[o],n?s?!0:(s=new X(this,e,t,X.C.STATUS_EARLY),s.error?(G(s.error),U.call(this,"remote",e,z.causes.INTERNAL_ERROR),!1):(this.earlyDialogs[o]=s,!0)):(this.from_tag=e.from_tag,this.to_tag=e.to_tag,s?(s.update(e,t),this.dialog=s,delete this.earlyDialogs[o],!0):(r=new X(this,e,t),r.error?(G(r.error),U.call(this,"remote",e,z.causes.INTERNAL_ERROR),!1):(this.dialog=r,!0)))}function a(e){function t(t){t=t||{},f=!0;var n=t.status_code||403,r=t.reason_phrase||"",s=t.extraHeaders&&t.extraHeaders.slice()||[];if(this.status!==k.STATUS_CONFIRMED)return!1;if(300>n||n>=700)throw new TypeError("Invalid status_code: "+n);e.reply(n,r,s)}function n(){r(function(t){var n=["Contact: "+h.contact];E.call(h,e,n),h.late_sdp&&(t=C.call(h,t)),e.reply(200,null,n,t,function(){h.status=k.STATUS_WAITING_FOR_ACK,s.call(h,e,t),l.call(h)}),"function"==typeof m.callback&&m.callback()},function(){e.reply(500)})}function r(e,t){h.late_sdp?o.call(h,"offer",e,t,h.rtcOfferConstraints):(h.remoteHold===!0&&p===!1?(h.remoteHold=!1,P.call(h,"remote")):h.remoteHold===!1&&p===!0&&(h.remoteHold=!0,M.call(h,"remote")),o.call(h,"answer",e,t,h.rtcAnswerConstraints))}G("receiveReinvite()");var i,u,a,c,h=this,d=e.getHeader("Content-Type"),p=!1,f=!1,m={request:e,callback:void 0,reject:t.bind(this)};if(this.emit("reinvite",m),!f)if(e.body){if(this.late_sdp=!1,"application/sdp"!==d)return G("invalid Content-Type"),void e.reply(415);for(i=e.parseSDP(),u=0;u<i.media.length;u++)if(c=i.media[u],-1!==re.indexOf(c.type)){if(a=c.direction||i.direction||"sendrecv","sendonly"!==a&&"inactive"!==a){p=!1;break}p=!0}var g={originator:"remote",type:"offer",sdp:e.body};this.emit("sdp",g),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:g.sdp}),n,function(){e.reply(488)})}else this.late_sdp=!0,n()}function c(e){function t(t){t=t||{},a=!0;var n=t.status_code||403,r=t.reason_phrase||"",s=t.extraHeaders&&t.extraHeaders.slice()||[];if(this.status!==k.STATUS_CONFIRMED)return!1;if(300>n||n>=700)throw new TypeError("Invalid status_code: "+n);e.reply(n,r,s)}G("receiveUpdate()");var n,r,s,l,i=this,u=e.getHeader("Content-Type"),a=!1,c=!1,h={request:e,callback:void 0,reject:t.bind(this)};if(this.emit("update",h),!a){if(!e.body){var d=[];return E.call(this,e,d),void e.reply(200,null,d)}if("application/sdp"!==u)return G("invalid Content-Type"),void e.reply(415);for(n=e.parseSDP(),r=0;r<n.media.length;r++)if(l=n.media[r],-1!==re.indexOf(l.type)){if(s=l.direction||n.direction||"sendrecv","sendonly"!==s&&"inactive"!==s){c=!1;break}c=!0}var p={originator:"remote",type:"offer",sdp:e.body};this.emit("sdp",p),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:p.sdp}),function(){i.remoteHold===!0&&c===!1?(i.remoteHold=!1,P.call(i,"remote")):i.remoteHold===!1&&c===!0&&(i.remoteHold=!0,M.call(i,"remote")),o.call(i,"answer",function(t){var n=["Contact: "+i.contact];E.call(i,e,n),e.reply(200,null,n,t),"function"==typeof h.callback&&h.callback()},function(){e.reply(500)})},function(){e.reply(488)},this.rtcAnswerConstraints)}}function h(e){function t(t,n){var l,i;return n=n||{},t="function"==typeof t?t:null,this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:(l=new r(this.ua),l.on("progress",function(e){s.notify(e.response.status_code,e.response.reason_phrase)}),l.on("accepted",function(e){s.notify(e.response.status_code,e.response.reason_phrase)}),l.on("failed",function(e){e.message?s.notify(e.message.status_code,e.message.reason_phrase):s.notify(487,e.cause)}),e.refer_to.uri.hasHeader("replaces")&&(i=decodeURIComponent(e.refer_to.uri.getHeader("replaces")),n.extraHeaders=n.extraHeaders||[],n.extraHeaders.push("Replaces: "+i)),void l.connect(e.refer_to.uri.toAor(),n,t))}function n(){s.notify(603)}G("receiveRefer()");var s,l=this;return void 0===typeof e.refer_to?(G("no Refer-To header field present in REFER"),void e.reply(400)):e.refer_to.uri.scheme!==z.SIP?(G("Refer-To header field points to a non-SIP URI scheme"),void e.reply(416)):(e.reply(202),s=new te(this,e.cseq),void this.emit("refer",{request:e,accept:function(e,n){t.call(l,e,n)},reject:function(){n.call(l)}}))}function d(e){switch(G("receiveNotify()"),void 0===typeof e.event&&e.reply(400),e.event.event){case"refer":var t=e.event.params.id,n=this.referSubscribers[t];if(!n)return void e.reply(481,"Subscription does not exist");n.receiveNotify(e),e.reply(200);break;default:e.reply(489)}}function p(e){function t(t){var n;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:(n=new r(this.ua),n.on("confirmed",function(){s.terminate()}),void n.init_incoming(e,t))}function n(){G("Replaced INVITE rejected by the user"),e.reply(486)}G("receiveReplaces()");var s=this;this.emit("replaces",{request:e,accept:function(e){t.call(s,e)},reject:function(){n.call(s)}})}function f(e,t,n){function r(e){u.status!==k.STATUS_TERMINATED&&(u.localMediaStream=e,e&&u.connection.addStream(e),u.emit("peerconnection",{peerconnection:u.connection}),w.call(u,u.request),o.call(u,"offer",l,i,t))}function s(){u.status!==k.STATUS_TERMINATED&&U.call(u,"local",null,z.causes.USER_DENIED_MEDIA_ACCESS)}function l(e){u.isCanceled||u.status===k.STATUS_TERMINATED||(u.request.body=e,u.status=k.STATUS_INVITE_SENT,u.emit("sending",{request:u.request}),a.send())}function i(){u.status!==k.STATUS_TERMINATED&&U.call(u,"system",null,z.causes.WEBRTC_ERROR)}var u=this,a=new Q(u,this.ua);this.receiveResponse=function(e){m.call(u,e)},n?setTimeout(function(){r(n)}):e.audio||e.video?(this.localMediaStreamLocallyGenerated=!0,W.getUserMedia(e,r,s)):r(null)}function m(e){G("receiveInviteResponse()");var t,n,r,s=this;if(this.dialog&&e.status_code>=200&&e.status_code<=299)return this.dialog.id.call_id===e.call_id&&this.dialog.id.local_tag===e.from_tag&&this.dialog.id.remote_tag===e.to_tag?void v.call(this,z.ACK):(n=new X(this,e,"UAC"),void 0!==n.error?void G(n.error):(n.sendRequest({owner:{status:k.STATUS_TERMINATED},onRequestTimeout:function(){},onTransportError:function(){},onDialogError:function(){},receiveResponse:function(){}},z.ACK),void n.sendRequest({owner:{status:k.STATUS_TERMINATED},onRequestTimeout:function(){},onTransportError:function(){},onDialogError:function(){},receiveResponse:function(){}},z.BYE)));if(this.isCanceled)return this.isCanceled=!1,void(e.status_code>=100&&e.status_code<200?this.request.cancel(this.cancelReason):e.status_code>=200&&e.status_code<299&&_.call(this,e));if(this.status===k.STATUS_INVITE_SENT||this.status===k.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this.status=k.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){G("1xx response received without to tag");break}if(e.hasHeader("contact")&&!u.call(this,e,"UAC",!0))break;if(this.status=k.STATUS_1XX_RECEIVED,N.call(this,"remote",e),!e.body)break;r={originator:"remote",type:"pranswer",sdp:e.body},this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"pranswer",sdp:r.sdp}),null,null);break;case/^2[0-9]{2}$/.test(e.status_code):if(this.status=k.STATUS_CONFIRMED,!e.body){_.call(this,e,400,z.causes.MISSING_SDP),U.call(this,"remote",e,z.causes.BAD_MEDIA_DESCRIPTION);break}if(!u.call(this,e,"UAC"))break;r={originator:"remote",type:"answer",sdp:e.body},this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:r.sdp}),function(){A.call(s,e),D.call(s,"remote",e),v.call(s,z.ACK),O.call(s,"local",null)},function(){_.call(s,e,488,"Not Acceptable Here"),U.call(s,"remote",e,z.causes.BAD_MEDIA_DESCRIPTION)});break;default:t=J.sipErrorCause(e.status_code),U.call(this,"remote",e,t)}}function g(e){function t(e){if(r.status!==k.STATUS_TERMINATED&&(v.call(r,z.ACK),!u)){if(A.call(r,e),!e.body)return void n();if("application/sdp"!==e.getHeader("Content-Type"))return void n();var t={originator:"remote",type:"answer",sdp:e.body};r.emit("sdp",t),r.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:t.sdp}),function(){l.succeeded&&l.succeeded(e)},function(){n()})}}function n(e){l.failed&&l.failed(e)}G("sendReinvite()"),e=e||{};var r=this,s=e.extraHeaders||[],l=e.eventHandlers||{},i=e.rtcOfferConstraints||this.rtcOfferConstraints||null,u=!1;s.push("Contact: "+this.contact),s.push("Content-Type: application/sdp"),this.sessionTimers.running&&s.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+(this.sessionTimers.refresher?"uac":"uas")),o.call(this,"offer",function(e){e=C.call(r,e);var l=new Z(r,z.INVITE);l.send({extraHeaders:s,body:e,eventHandlers:{onSuccessResponse:function(e){t(e),u=!0},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})},function(){n()},i)}function T(e){function t(e){if(r.status!==k.STATUS_TERMINATED&&!a)if(A.call(r,e),u){if(!e.body)return void n();if("application/sdp"!==e.getHeader("Content-Type"))return void n();var t={originator:"remote",type:"answer",sdp:e.body};r.emit("sdp",t),r.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:t.sdp}),function(){l.succeeded&&l.succeeded(e)},function(){n()})}else l.succeeded&&l.succeeded(e)}function n(e){l.failed&&l.failed(e)}G("sendUpdate()"),e=e||{};var r=this,s=e.extraHeaders||[],l=e.eventHandlers||{},i=e.rtcOfferConstraints||this.rtcOfferConstraints||null,u=e.sdpOffer||!1,a=!1;if(s.push("Contact: "+this.contact),this.sessionTimers.running&&s.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+(this.sessionTimers.refresher?"uac":"uas")),u)s.push("Content-Type: application/sdp"),o.call(this,"offer",function(e){e=C.call(r,e);var l=new Z(r,z.UPDATE);l.send({extraHeaders:s,body:e,eventHandlers:{onSuccessResponse:function(e){t(e),a=!0},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})},function(){n()},i);else{var c=new Z(r,z.UPDATE);c.send({extraHeaders:s,eventHandlers:{onSuccessResponse:function(e){t(e)},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})}}function _(e,t,n){G("acceptAndTerminate()");var r=[];t&&(n=n||z.REASON_PHRASE[t]||"",r.push("Reason: SIP ;cause="+t+'; text="'+n+'"')),(this.dialog||u.call(this,e,"UAC"))&&(v.call(this,z.ACK),v.call(this,z.BYE,{extraHeaders:r})),this.status=k.STATUS_TERMINATED}function v(e,t){G("sendRequest()");var n=new Z(this,e);n.send(t)}function C(e){var t,n,r;if(!this.localHold&&!this.remoteHold)return e;if(e=B.parse(e),this.localHold&&!this.remoteHold)for(G("mangleOffer() | me on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction?"sendrecv"===r.direction?r.direction="sendonly":"recvonly"===r.direction&&(r.direction="inactive"):r.direction="sendonly");else if(this.localHold&&this.remoteHold)for(G("mangleOffer() | both on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction="inactive");else if(this.remoteHold)for(G("mangleOffer() | remote on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction?"sendrecv"===r.direction?r.direction="recvonly":"recvonly"===r.direction&&(r.direction="inactive"):r.direction="recvonly");return B.write(e)}function S(){var e=!0,t=!0;(this.localHold||this.remoteHold)&&(e=!1,t=!1),this.audioMuted&&(e=!1),this.videoMuted&&(t=!1),R.call(this,!e),b.call(this,!t)}function E(e,t){if(this.sessionTimers.enabled){var n;e.session_expires&&e.session_expires>=z.MIN_SESSION_EXPIRES?(this.sessionTimers.currentExpires=e.session_expires,n=e.session_expires_refresher||"uas"):(this.sessionTimers.currentExpires=this.sessionTimers.defaultExpires,n="uas"),t.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+n),this.sessionTimers.refresher="uas"===n,y.call(this)}}function A(e){if(this.sessionTimers.enabled){var t;e.session_expires&&e.session_expires>=z.MIN_SESSION_EXPIRES?(this.sessionTimers.currentExpires=e.session_expires,t=e.session_expires_refresher||"uac"):(this.sessionTimers.currentExpires=this.sessionTimers.defaultExpires,t="uac"),this.sessionTimers.refresher="uac"===t,y.call(this)}}function y(){var e=this,t=this.sessionTimers.currentExpires;this.sessionTimers.running=!0,clearTimeout(this.sessionTimers.timer),this.sessionTimers.refresher?this.sessionTimers.timer=setTimeout(function(){e.status!==k.STATUS_TERMINATED&&(G("runSessionTimer() | sending session refresh request"),T.call(e,{eventHandlers:{succeeded:function(t){A.call(e,t)}}}))},500*t):this.sessionTimers.timer=setTimeout(function(){e.status!==k.STATUS_TERMINATED&&(j("runSessionTimer() | timer expired, terminating the session"),e.terminate({cause:z.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},1100*t)}function R(e){var t,n,r,s,l,i=this.connection.getLocalStreams();for(r=i.length,t=0;r>t;t++)for(l=i[t].getAudioTracks(),s=l.length,n=0;s>n;n++)l[n].enabled=!e}function b(e){var t,n,r,s,l,i=this.connection.getLocalStreams();for(r=i.length,t=0;r>t;t++)for(l=i[t].getVideoTracks(),s=l.length,n=0;s>n;n++)l[n].enabled=!e}function I(e,t){G("newRTCSession"),this.ua.newRTCSession({originator:e,session:this,request:t})}function w(e){G("session connecting"),this.emit("connecting",{request:e})}function N(e,t){G("session progress"),this.emit("progress",{originator:e,response:t||null})}function D(e,t){G("session accepted"),this.start_time=new Date,this.emit("accepted",{originator:e,response:t||null})}function O(e,t){G("session confirmed"),this.is_confirmed=!0,this.emit("confirmed",{originator:e,ack:t||null})}function x(e,t,n){G("session ended"),this.end_time=new Date,this.close(),this.emit("ended",{originator:e,message:t||null,cause:n})}function U(e,t,n){G("session failed"),this.close(),this.emit("failed",{originator:e,message:t||null,cause:n})}function M(e){G("session onhold"),S.call(this),this.emit("hold",{originator:e})}function P(e){G("session onunhold"),S.call(this),this.emit("unhold",{originator:e})}function q(e){G("session onmute"),S.call(this),this.emit("muted",{audio:e.audio,video:e.video})}function L(e){G("session onunmute"),S.call(this),this.emit("unmuted",{audio:e.audio,video:e.video})}t.exports=r;var k={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9};r.C=k;var H=e("util"),F=e("events"),G=e("debug")("JsSIP:RTCSession"),j=e("debug")("JsSIP:ERROR:RTCSession");j.log=console.warn.bind(console);var W=e("rtcninja"),B=e("sdp-transform"),z=e("./Constants"),V=e("./Exceptions"),Y=e("./Transactions"),J=e("./Utils"),K=e("./Timers"),$=e("./SIPMessage"),X=e("./Dialog"),Q=e("./RequestSender"),Z=e("./RTCSession/Request"),ee=e("./RTCSession/DTMF"),te=e("./RTCSession/ReferNotifier"),ne=e("./RTCSession/ReferSubscriber"),re=["audio","video"];H.inherits(r,F.EventEmitter),r.prototype.isInProgress=function(){switch(this.status){case k.STATUS_NULL:case k.STATUS_INVITE_SENT:case k.STATUS_1XX_RECEIVED:case k.STATUS_INVITE_RECEIVED:case k.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}},r.prototype.isEstablished=function(){switch(this.status){case k.STATUS_ANSWERED:case k.STATUS_WAITING_FOR_ACK:case k.STATUS_CONFIRMED:return!0;default:return!1}},r.prototype.isEnded=function(){switch(this.status){case k.STATUS_CANCELED:case k.STATUS_TERMINATED:return!0;default:return!1}},r.prototype.isMuted=function(){return{audio:this.audioMuted,video:this.videoMuted}},r.prototype.isOnHold=function(){return{local:this.localHold,remote:this.remoteHold}},r.prototype.isReadyToReOffer=function(){return this.rtcReady?this.dialog?this.dialog.uac_pending_reply===!0||this.dialog.uas_pending_reply===!0?(G("isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):!0:(G("isReadyToReOffer() | session not established yet"),!1):(G("isReadyToReOffer() | internal WebRTC status not ready"),!1)},r.prototype.connect=function(e,t,n){G("connect()"),t=t||{};var r,s,l=e,o=t.eventHandlers||{},u=t.extraHeaders&&t.extraHeaders.slice()||[],a=t.mediaConstraints||{audio:!0,video:!0},c=t.mediaStream||null,h=t.pcConfig||{iceServers:[]},d=t.rtcConstraints||null,p=t.rtcOfferConstraints||null;if(this.rtcOfferConstraints=p,this.rtcAnswerConstraints=t.rtcAnswerConstraints||null,this.sessionTimers.enabled&&J.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=z.MIN_SESSION_EXPIRES?this.sessionTimers.defaultExpires=t.sessionTimersExpires:this.sessionTimers.defaultExpires=z.SESSION_EXPIRES),this.data=t.data||this.data,void 0===e)throw new TypeError("Not enough arguments");if(!W.hasWebRTC())throw new V.NotSupportedError("WebRTC not supported");if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+l);if(this.status!==k.STATUS_NULL)throw new V.InvalidStateError(this.status);for(r in o)this.on(r,o[r]);this.from_tag=J.newTag(),this.anonymous=t.anonymous||!1,this.isCanceled=!1,s={from_tag:this.from_tag},this.contact=this.ua.contact.toString({anonymous:this.anonymous,outbound:!0}),this.anonymous&&(s.from_display_name="Anonymous",s.from_uri="sip:anonymous@anonymous.invalid",u.push("P-Preferred-Identity: "+this.ua.configuration.uri.toString()),u.push("Privacy: id")),u.push("Contact: "+this.contact),u.push("Content-Type: application/sdp"),this.sessionTimers.enabled&&u.push("Session-Expires: "+this.sessionTimers.defaultExpires),this.request=new $.OutgoingRequest(z.INVITE,e,this.ua,s,u),this.id=this.request.call_id+this.from_tag,i.call(this,h,d),this.ua.sessions[this.id]=this,this.direction="outgoing",this.local_identity=this.request.from,this.remote_identity=this.request.to,n?n(this):I.call(this,"local",this.request),f.call(this,a,p,c)},r.prototype.init_incoming=function(e,t){G("init_incoming()");var n,r=this,s=e.getHeader("Content-Type");return e.body&&"application/sdp"!==s?void e.reply(415):(this.status=k.STATUS_INVITE_RECEIVED,this.from_tag=e.from_tag,this.id=e.call_id+this.from_tag,this.request=e,this.contact=this.ua.contact.toString(),this.ua.sessions[this.id]=this,e.hasHeader("expires")&&(n=1e3*e.getHeader("expires")),e.to_tag=J.newTag(),u.call(this,e,"UAS",!0)?(e.body?this.late_sdp=!1:this.late_sdp=!0,this.status=k.STATUS_WAITING_FOR_ANSWER,this.timers.userNoAnswerTimer=setTimeout(function(){e.reply(408),U.call(r,"local",null,z.causes.NO_ANSWER)},this.ua.configuration.no_answer_timeout),n&&(this.timers.expiresTimer=setTimeout(function(){r.status===k.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),U.call(r,"system",null,z.causes.EXPIRES));
},n)),this.direction="incoming",this.local_identity=e.to,this.remote_identity=e.from,t?t(this):I.call(this,"remote",e),void(this.status!==k.STATUS_TERMINATED&&(e.reply(180,null,["Contact: "+r.contact]),N.call(r,"local",null)))):void e.reply(500,"Missing Contact header field"))},r.prototype.answer=function(e){function t(e){if(v.status!==k.STATUS_TERMINATED)if(v.localMediaStream=e,e&&v.connection.addStream(e),v.request.body||v.emit("peerconnection",{peerconnection:v.connection}),v.late_sdp)r();else{var t={originator:"remote",type:"offer",sdp:C.body};v.emit("sdp",t),v.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:t.sdp}),r,function(){C.reply(488),U.call(v,"system",null,z.causes.WEBRTC_ERROR)})}}function n(){v.status!==k.STATUS_TERMINATED&&(C.reply(480),U.call(v,"local",null,z.causes.USER_DENIED_MEDIA_ACCESS))}function r(){w.call(v,C),v.late_sdp?o.call(v,"offer",a,c,v.rtcOfferConstraints):o.call(v,"answer",a,c,I)}function a(e){function t(){v.status=k.STATUS_WAITING_FOR_ACK,s.call(v,C,e),l.call(v),D.call(v,"local")}function n(){U.call(v,"system",null,z.causes.CONNECTION_ERROR)}v.status!==k.STATUS_TERMINATED&&(E.call(v,C,S),C.reply(200,null,S,e,t,n))}function c(){v.status!==k.STATUS_TERMINATED&&(C.reply(500),U.call(v,"system",null,z.causes.WEBRTC_ERROR))}G("answer()"),e=e||{};var h,d,p,f,m=!1,g=!1,T=!1,_=!1,v=this,C=this.request,S=e.extraHeaders&&e.extraHeaders.slice()||[],A=e.mediaConstraints||{},y=e.mediaStream||null,R=e.pcConfig||{iceServers:[]},b=e.rtcConstraints||null,I=e.rtcAnswerConstraints||null;if(this.rtcAnswerConstraints=I,this.rtcOfferConstraints=e.rtcOfferConstraints||null,this.sessionTimers.enabled&&J.isDecimal(e.sessionTimersExpires)&&(e.sessionTimersExpires>=z.MIN_SESSION_EXPIRES?this.sessionTimers.defaultExpires=e.sessionTimersExpires:this.sessionTimers.defaultExpires=z.SESSION_EXPIRES),this.data=e.data||this.data,"incoming"!==this.direction)throw new V.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this.status!==k.STATUS_WAITING_FOR_ANSWER)throw new V.InvalidStateError(this.status);if(this.status=k.STATUS_ANSWERED,!u.call(this,C,"UAS"))return void C.reply(500,"Error creating dialog");for(clearTimeout(this.timers.userNoAnswerTimer),S.unshift("Contact: "+v.contact),p=C.parseSDP(),Array.isArray(p.media)||(p.media=[p.media]),h=p.media.length;h--;){var N=p.media[h];"audio"===N.type&&(m=!0,N.direction&&"sendrecv"!==N.direction||(T=!0)),"video"===N.type&&(g=!0,N.direction&&"sendrecv"!==N.direction||(_=!0))}if(y&&A.audio===!1)for(f=y.getAudioTracks(),d=f.length,h=0;d>h;h++)y.removeTrack(f[h]);if(y&&A.video===!1)for(f=y.getVideoTracks(),d=f.length,h=0;d>h;h++)y.removeTrack(f[h]);y||void 0!==A.audio||(A.audio=T),y||void 0!==A.video||(A.video=_),y||m||(A.audio=!1),y||g||(A.video=!1),i.call(this,R,b),y?t(y):A.audio||A.video?(v.localMediaStreamLocallyGenerated=!0,W.getUserMedia(A,t,n)):t(null)},r.prototype.terminate=function(e){G("terminate()"),e=e||{};var t,n,r=e.cause||z.causes.BYE,s=e.status_code,l=e.reason_phrase,i=e.extraHeaders&&e.extraHeaders.slice()||[],o=e.body,u=this;if(this.status===k.STATUS_TERMINATED)throw new V.InvalidStateError(this.status);switch(this.status){case k.STATUS_NULL:case k.STATUS_INVITE_SENT:case k.STATUS_1XX_RECEIVED:if(G("canceling sesssion"),s&&(200>s||s>=700))throw new TypeError("Invalid status_code: "+s);s&&(l=l||z.REASON_PHRASE[s]||"",t="SIP ;cause="+s+' ;text="'+l+'"'),this.status===k.STATUS_NULL?(this.isCanceled=!0,this.cancelReason=t):this.status===k.STATUS_INVITE_SENT?(this.isCanceled=!0,this.cancelReason=t):this.status===k.STATUS_1XX_RECEIVED&&this.request.cancel(t),this.status=k.STATUS_CANCELED,U.call(this,"local",null,z.causes.CANCELED);break;case k.STATUS_WAITING_FOR_ANSWER:case k.STATUS_ANSWERED:if(G("rejecting session"),s=s||480,300>s||s>=700)throw new TypeError("Invalid status_code: "+s);this.request.reply(s,l,i,o),U.call(this,"local",null,z.causes.REJECTED);break;case k.STATUS_WAITING_FOR_ACK:case k.STATUS_CONFIRMED:if(G("terminating session"),l=e.reason_phrase||z.REASON_PHRASE[s]||"",s&&(200>s||s>=700))throw new TypeError("Invalid status_code: "+s);s&&i.push("Reason: SIP ;cause="+s+'; text="'+l+'"'),this.status===k.STATUS_WAITING_FOR_ACK&&"incoming"===this.direction&&this.request.server_transaction.state!==Y.C.STATUS_TERMINATED?(n=this.dialog,this.receiveRequest=function(e){e.method===z.ACK&&(v.call(this,z.BYE,{extraHeaders:i,body:o}),n.terminate())},this.request.server_transaction.on("stateChanged",function(){this.state===Y.C.STATUS_TERMINATED&&(v.call(u,z.BYE,{extraHeaders:i,body:o}),n.terminate())}),x.call(this,"local",null,r),this.dialog=n,this.ua.dialogs[n.id.toString()]=n):(v.call(this,z.BYE,{extraHeaders:i,body:o}),x.call(this,"local",null,r))}},r.prototype.close=function(){G("close()");var e;if(this.status!==k.STATUS_TERMINATED){if(this.connection)try{this.connection.close()}catch(t){j("close() | error closing the RTCPeerConnection: %o",t)}this.localMediaStream&&this.localMediaStreamLocallyGenerated&&(G("close() | closing local MediaStream"),W.closeMediaStream(this.localMediaStream));for(e in this.timers)clearTimeout(this.timers[e]);clearTimeout(this.sessionTimers.timer),this.dialog&&(this.dialog.terminate(),delete this.dialog);for(e in this.earlyDialogs)this.earlyDialogs[e].terminate(),delete this.earlyDialogs[e];this.status=k.STATUS_TERMINATED,delete this.ua.sessions[this.id]}},r.prototype.sendDTMF=function(e,t){function n(){var e,o;if(i.status===k.STATUS_TERMINATED||!i.tones||l>=i.tones.length)return void(i.tones=null);if(e=i.tones[l],l+=1,","===e)o=2e3;else{var u=new ee(i);t.eventHandlers={failed:function(){i.tones=null}},u.send(e,t),o=r+s}setTimeout(n,o)}G("sendDTMF() | tones: %s",e);var r,s,l=0,i=this;if(t=t||{},r=t.duration||null,s=t.interToneGap||null,void 0===e)throw new TypeError("Not enough arguments");if(this.status!==k.STATUS_CONFIRMED&&this.status!==k.STATUS_WAITING_FOR_ACK)throw new V.InvalidStateError(this.status);if("number"==typeof e&&(e=e.toString()),!e||"string"!=typeof e||!e.match(/^[0-9A-D#*,]+$/i))throw new TypeError("Invalid tones: "+e);if(r&&!J.isDecimal(r))throw new TypeError("Invalid tone duration: "+r);if(r?r<ee.C.MIN_DURATION?(G('"duration" value is lower than the minimum allowed, setting it to '+ee.C.MIN_DURATION+" milliseconds"),r=ee.C.MIN_DURATION):r>ee.C.MAX_DURATION?(G('"duration" value is greater than the maximum allowed, setting it to '+ee.C.MAX_DURATION+" milliseconds"),r=ee.C.MAX_DURATION):r=Math.abs(r):r=ee.C.DEFAULT_DURATION,t.duration=r,s&&!J.isDecimal(s))throw new TypeError("Invalid interToneGap: "+s);return s?s<ee.C.MIN_INTER_TONE_GAP?(G('"interToneGap" value is lower than the minimum allowed, setting it to '+ee.C.MIN_INTER_TONE_GAP+" milliseconds"),s=ee.C.MIN_INTER_TONE_GAP):s=Math.abs(s):s=ee.C.DEFAULT_INTER_TONE_GAP,this.tones?void(this.tones+=e):(this.tones=e,void n())},r.prototype.mute=function(e){G("mute()"),e=e||{audio:!0,video:!1};var t=!1,n=!1;this.audioMuted===!1&&e.audio&&(t=!0,this.audioMuted=!0,R.call(this,!0)),this.videoMuted===!1&&e.video&&(n=!0,this.videoMuted=!0,b.call(this,!0)),t!==!0&&n!==!0||q.call(this,{audio:t,video:n})},r.prototype.unmute=function(e){G("unmute()"),e=e||{audio:!0,video:!0};var t=!1,n=!1;this.audioMuted===!0&&e.audio&&(t=!0,this.audioMuted=!1,this.localHold===!1&&R.call(this,!1)),this.videoMuted===!0&&e.video&&(n=!0,this.videoMuted=!1,this.localHold===!1&&b.call(this,!1)),t!==!0&&n!==!0||L.call(this,{audio:t,video:n})},r.prototype.hold=function(e,t){G("hold()"),e=e||{};var n,r=this;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.localHold===!0?!1:this.isReadyToReOffer()?(this.localHold=!0,M.call(this,"local"),n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}},e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.unhold=function(e,t){G("unhold()"),e=e||{};var n,r=this;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.localHold===!1?!1:this.isReadyToReOffer()?(this.localHold=!1,P.call(this,"local"),n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}},e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.renegotiate=function(e,t){G("renegotiate()"),e=e||{};var n,r=this,s=e.rtcOfferConstraints||null;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.isReadyToReOffer()?(n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}},S.call(this),e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,rtcOfferConstraints:s,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,rtcOfferConstraints:s,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.refer=function(e,t){G("refer()");var n,r,s=this,l=e;if(this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED)return!1;if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+l);return n=new ne(this),n.sendRefer(e,t),r=n.outgoingRequest.cseq,this.referSubscribers[r]=n,n.on("requestFailed",function(){delete s.referSubscribers[r]}),n.on("accepted",function(){delete s.referSubscribers[r]}),n.on("failed",function(){delete s.referSubscribers[r]}),n},r.prototype.receiveRequest=function(e){G("receiveRequest()");var t,n=this;if(e.method===z.CANCEL)this.status!==k.STATUS_WAITING_FOR_ANSWER&&this.status!==k.STATUS_ANSWERED||(this.status=k.STATUS_CANCELED,this.request.reply(487),U.call(this,"remote",e,z.causes.CANCELED));else switch(e.method){case z.ACK:if(this.status!==k.STATUS_WAITING_FOR_ACK)return;if(this.status=k.STATUS_CONFIRMED,clearTimeout(this.timers.ackTimer),clearTimeout(this.timers.invite2xxTimer),this.late_sdp){if(!e.body){this.terminate({cause:z.causes.MISSING_SDP,status_code:400});break}var r={originator:"remote",type:"answer",sdp:e.body};this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:r.sdp}),function(){n.is_confirmed||O.call(n,"remote",e)},function(){n.terminate({cause:z.causes.BAD_MEDIA_DESCRIPTION,status_code:488})})}else this.is_confirmed||O.call(this,"remote",e);break;case z.BYE:this.status===k.STATUS_CONFIRMED?(e.reply(200),x.call(this,"remote",e,z.causes.BYE)):this.status===k.STATUS_INVITE_RECEIVED?(e.reply(200),this.request.reply(487,"BYE Received"),x.call(this,"remote",e,z.causes.BYE)):e.reply(403,"Wrong Status");break;case z.INVITE:this.status===k.STATUS_CONFIRMED?e.hasHeader("replaces")?p.call(this,e):a.call(this,e):e.reply(403,"Wrong Status");break;case z.INFO:this.status===k.STATUS_CONFIRMED||this.status===k.STATUS_WAITING_FOR_ACK||this.status===k.STATUS_INVITE_RECEIVED?(t=e.getHeader("content-type"),t&&t.match(/^application\/dtmf-relay/i)?new ee(this).init_incoming(e):e.reply(415)):e.reply(403,"Wrong Status");break;case z.UPDATE:this.status===k.STATUS_CONFIRMED?c.call(this,e):e.reply(403,"Wrong Status");break;case z.REFER:this.status===k.STATUS_CONFIRMED?h.call(this,e):e.reply(403,"Wrong Status");break;case z.NOTIFY:this.status===k.STATUS_CONFIRMED?d.call(this,e):e.reply(403,"Wrong Status");break;default:e.reply(501)}},r.prototype.onTransportError=function(){j("onTransportError()"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:z.causes.CONNECTION_ERROR,cause:z.causes.CONNECTION_ERROR})},r.prototype.onRequestTimeout=function(){G("onRequestTimeout"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:z.causes.REQUEST_TIMEOUT,cause:z.causes.REQUEST_TIMEOUT})},r.prototype.onDialogError=function(){j("onDialogError()"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:z.causes.DIALOG_ERROR,cause:z.causes.DIALOG_ERROR})},r.prototype.newDTMF=function(e){G("newDTMF()"),this.emit("newDTMF",e)},r.prototype.resetLocalMedia=function(){G("resetLocalMedia()"),this.localHold=!1,this.audioMuted=!1,this.videoMuted=!1,S.call(this)}},{"./Constants":1,"./Dialog":2,"./Exceptions":5,"./RTCSession/DTMF":12,"./RTCSession/ReferNotifier":13,"./RTCSession/ReferSubscriber":14,"./RTCSession/Request":15,"./RequestSender":17,"./SIPMessage":18,"./Timers":20,"./Transactions":21,"./Utils":25,debug:33,events:28,rtcninja:38,"sdp-transform":44,util:32}],12:[function(e,t,n){function r(e){this.owner=e,this.direction=null,this.tone=null,this.duration=null}t.exports=r;var s={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};r.C=s;var l=e("debug")("JsSIP:RTCSession:DTMF"),i=e("debug")("JsSIP:ERROR:RTCSession:DTMF");i.log=console.warn.bind(console);var o=e("../Constants"),u=e("../Exceptions"),a=e("../RTCSession");r.prototype.send=function(e,t){var n,r;if(void 0===e)throw new TypeError("Not enough arguments");if(this.direction="outgoing",this.owner.status!==a.C.STATUS_CONFIRMED&&this.owner.status!==a.C.STATUS_WAITING_FOR_ACK)throw new u.InvalidStateError(this.owner.status);if(t=t||{},n=t.extraHeaders?t.extraHeaders.slice():[],this.eventHandlers=t.eventHandlers||{},"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError("Invalid tone: "+e);e=e.toString()}if(!e.match(/^[0-9A-D#*]$/))throw new TypeError("Invalid tone: "+e);this.tone=e,this.duration=t.duration,n.push("Content-Type: application/dtmf-relay"),r="Signal="+this.tone+"\r\n",r+="Duration="+this.duration,this.owner.newDTMF({originator:"local",dtmf:this,request:this.request}),this.owner.dialog.sendRequest(this,o.INFO,{extraHeaders:n,body:r})},r.prototype.receiveResponse=function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):l("onSuccessResponse"),this.eventHandlers.onSuccessResponse&&this.eventHandlers.onSuccessResponse(e);break;default:this.eventHandlers.onErrorResponse&&this.eventHandlers.onErrorResponse(e)}},r.prototype.onRequestTimeout=function(){i("onRequestTimeout"),this.eventHandlers.onRequestTimeout&&this.eventHandlers.onRequestTimeout()},r.prototype.onTransportError=function(){i("onTransportError"),this.eventHandlers.onTransportError&&this.eventHandlers.onTransportError()},r.prototype.onDialogError=function(){i("onDialogError"),this.eventHandlers.onDialogError&&this.eventHandlers.onDialogError()},r.prototype.init_incoming=function(e){var t,n=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,r=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;this.direction="incoming",this.request=e,e.reply(200),e.body&&(t=e.body.split("\n"),t.length>=1&&n.test(t[0])&&(this.tone=t[0].replace(n,"$2")),t.length>=2&&r.test(t[1])&&(this.duration=parseInt(t[1].replace(r,"$2"),10))),this.duration||(this.duration=s.DEFAULT_DURATION),this.tone?this.owner.newDTMF({originator:"remote",dtmf:this,request:e}):l("invalid INFO DTMF received, discarded")}},{"../Constants":1,"../Exceptions":5,"../RTCSession":11,debug:33}],13:[function(e,t,n){function r(e,t,n){this.session=e,this.id=t,this.expires=n||s.expires,this.active=!0,this.notify(100)}t.exports=r;var s={event_type:"refer",body_type:"message/sipfrag;version=2.0",expires:300},l=e("debug")("JsSIP:RTCSession:ReferNotifier"),i=e("../Constants"),o=e("./Request");r.prototype.notify=function(e,t){l("notify()");var n,r=this;if(this.active!==!1){t=t||i.REASON_PHRASE[e]||"",n=e>=200?"terminated;reason=noresource":"active;expires="+this.expires;var u=new o(this.session,i.NOTIFY);u.send({extraHeaders:["Event: "+s.event_type+";id="+r.id,"Subscription-State: "+n,"Content-Type: "+s.body_type],body:"SIP/2.0 "+e+" "+t,eventHandlers:{onErrorResponse:function(){r.active=!1}}})}}},{"../Constants":1,"./Request":15,debug:33}],14:[function(e,t,n){function r(e){this.session=e,this.timer=null,this.outgoingRequest=null,o.EventEmitter.call(this)}function s(){console.log("removeSubscriber()"),clearTimeout(this.timer),this.session.referSubscriber=null}t.exports=r;var l={expires:120},i=e("util"),o=e("events"),u=e("debug")("JsSIP:RTCSession:ReferSubscriber"),a=e("../Constants"),c=e("../Grammar"),h=e("./Request");i.inherits(r,o.EventEmitter),r.prototype.sendRefer=function(e,t){u("sendRefer()");var n,r,i,o=null,c=this;t=t||{},n=t.extraHeaders?t.extraHeaders.slice():[],r=t.eventHandlers||{};for(var d in r)this.on(d,r[d]);t.replaces&&(o=t.replaces.request.call_id,o+=";to-tag="+t.replaces.to_tag,o+=";from-tag="+t.replaces.from_tag,o=encodeURIComponent(o)),i="Refer-To: <"+e+(o?"?Replaces="+o:"")+">",n.push(i);var p=new h(this.session,a.REFER);this.timer=setTimeout(function(){s.call(c)},1e3*l.expires),p.send({extraHeaders:n,eventHandlers:{onSuccessResponse:function(e){c.emit("requestSucceeded",{response:e})},onErrorResponse:function(e){c.emit("requestFailed",{response:e,cause:a.causes.REJECTED})},onTransportError:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.CONNECTION_ERROR})},onRequestTimeout:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.REQUEST_TIMEOUT})},onDialogError:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.DIALOG_ERROR})}}}),this.outgoingRequest=p.outgoingRequest},r.prototype.receiveNotify=function(e){u("receiveNotify()");var t;if(e.body){if(t=c.parse(e.body,"Status_Line"),-1===t)return void u('receiveNotify() | error parsing NOTIFY body: "'+e.body+'"');switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):s.call(this),this.emit("accepted",{request:e,status_line:t});break;default:s.call(this),this.emit("failed",{request:e,status_line:t})}}}},{"../Constants":1,"../Grammar":6,"./Request":15,debug:33,events:28,util:32}],15:[function(e,t,n){function r(e,t){if(s("new | %s",t),this.session=e,this.method=t,this.outgoingRequest=null,this.session.status!==u.C.STATUS_1XX_RECEIVED&&this.session.status!==u.C.STATUS_WAITING_FOR_ANSWER&&this.session.status!==u.C.STATUS_WAITING_FOR_ACK&&this.session.status!==u.C.STATUS_CONFIRMED&&this.session.status!==u.C.STATUS_TERMINATED)throw new o.InvalidStateError(this.session.status);if(this.session.status===u.C.STATUS_TERMINATED&&t!==i.BYE)throw new o.InvalidStateError(this.session.status)}t.exports=r;var s=e("debug")("JsSIP:RTCSession:Request"),l=e("debug")("JsSIP:ERROR:RTCSession:Request");l.log=console.warn.bind(console);var i=e("../Constants"),o=e("../Exceptions"),u=e("../RTCSession");r.prototype.send=function(e){e=e||{};var t=e.extraHeaders&&e.extraHeaders.slice()||[],n=e.body||null;this.eventHandlers=e.eventHandlers||{},this.outgoingRequest=this.session.dialog.sendRequest(this,this.method,{extraHeaders:t,body:n})},r.prototype.receiveResponse=function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):s("onProgressResponse"),this.eventHandlers.onProgressResponse&&this.eventHandlers.onProgressResponse(e);break;case/^2[0-9]{2}$/.test(e.status_code):s("onSuccessResponse"),this.eventHandlers.onSuccessResponse&&this.eventHandlers.onSuccessResponse(e);break;default:s("onErrorResponse"),this.eventHandlers.onErrorResponse&&this.eventHandlers.onErrorResponse(e)}},r.prototype.onRequestTimeout=function(){l("onRequestTimeout"),this.eventHandlers.onRequestTimeout&&this.eventHandlers.onRequestTimeout()},r.prototype.onTransportError=function(){l("onTransportError"),this.eventHandlers.onTransportError&&this.eventHandlers.onTransportError()},r.prototype.onDialogError=function(){l("onDialogError"),this.eventHandlers.onDialogError&&this.eventHandlers.onDialogError()}},{"../Constants":1,"../Exceptions":5,"../RTCSession":11,debug:33}],16:[function(e,t,n){function r(e,t){var n=1;this.ua=e,this.transport=t,this.registrar=e.configuration.registrar_server,this.expires=e.configuration.register_expires,this.call_id=l.createRandomToken(22),this.cseq=0,this.to_uri=e.configuration.uri,this.registrationTimer=null,this.registered=!1,this.contact=this.ua.contact.toString(),this.contact+=";+sip.ice",this.extraHeaders=[],this.extraContactParams="",n&&(this.contact+=";reg-id="+n,this.contact+=';+sip.instance="<urn:uuid:'+this.ua.configuration.instance_id+'>"')}t.exports=r;var s=e("debug")("JsSIP:Registrator"),l=e("./Utils"),i=e("./Constants"),o=e("./SIPMessage"),u=e("./RequestSender");r.prototype={setExtraHeaders:function(e){Array.isArray(e)||(e=[]),this.extraHeaders=e.slice()},setExtraContactParams:function(e){e instanceof Object||(e={}),this.extraContactParams="";for(var t in e){var n=e[t];this.extraContactParams+=";"+t,n&&(this.extraContactParams+="="+n)}},register:function(){var e,t,n,r=this;n=this.extraHeaders.slice(),n.push("Contact: "+this.contact+";expires="+this.expires+this.extraContactParams),n.push("Expires: "+this.expires),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},n),e=new u(this,this.ua),this.receiveResponse=function(e){var n,o,u=e.getHeaders("contact").length;if(e.cseq===this.cseq)switch(null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):if(e.hasHeader("expires")&&(o=e.getHeader("expires")),!u){s("no Contact header in response to REGISTER, response ignored");break}for(;u--;){if(n=e.parseHeader("contact",u),n.uri.user===this.ua.contact.uri.user){o=n.getParam("expires");break}n=null}if(!n){s("no Contact header pointing to us, response ignored");break}o||(o=this.expires),this.registrationTimer=setTimeout(function(){r.registrationTimer=null,r.register()},1e3*o-3e3),n.hasParam("temp-gruu")&&(this.ua.contact.temp_gruu=n.getParam("temp-gruu").replace(/"/g,"")),n.hasParam("pub-gruu")&&(this.ua.contact.pub_gruu=n.getParam("pub-gruu").replace(/"/g,"")),this.registered||(this.registered=!0,this.ua.registered({response:e}));break;case/^423$/.test(e.status_code):e.hasHeader("min-expires")?(this.expires=e.getHeader("min-expires"),this.register()):(s("423 response received for REGISTER without Min-Expires"),this.registrationFailure(e,i.causes.SIP_FAILURE_CODE));break;default:t=l.sipErrorCause(e.status_code),this.registrationFailure(e,t)}},this.onRequestTimeout=function(){this.registrationFailure(null,i.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.registrationFailure(null,i.causes.CONNECTION_ERROR)},e.send()},unregister:function(e){var t;if(!this.registered)return void s("already unregistered");e=e||{},this.registered=!1,null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),t=this.extraHeaders.slice(),e.all?(t.push("Contact: *"+this.extraContactParams),t.push("Expires: 0"),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},t)):(t.push("Contact: "+this.contact+";expires=0"+this.extraContactParams),t.push("Expires: 0"),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},t));var n=new u(this,this.ua);this.receiveResponse=function(e){var t;switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this.unregistered(e);break;default:t=l.sipErrorCause(e.status_code),this.unregistered(e,t)}},this.onRequestTimeout=function(){this.unregistered(null,i.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.unregistered(null,i.causes.CONNECTION_ERROR)},n.send()},registrationFailure:function(e,t){this.ua.registrationFailed({response:e||null,cause:t}),this.registered&&(this.registered=!1,this.ua.unregistered({response:e||null,cause:t}))},unregistered:function(e,t){this.registered=!1,this.ua.unregistered({response:e||null,cause:t||null})},onTransportClosed:function(){null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),this.registered&&(this.registered=!1,this.ua.unregistered({}))},close:function(){this.registered&&this.unregister()}}},{"./Constants":1,"./RequestSender":17,"./SIPMessage":18,"./Utils":25,debug:33}],17:[function(e,t,n){function r(e,t){this.ua=t,this.applicant=e,this.method=e.request.method,this.request=e.request,this.auth=null,this.challenged=!1,this.staled=!1,t.status!==i.C.STATUS_USER_CLOSED||this.method===l.BYE&&this.method===l.ACK||this.onTransportError()}t.exports=r;var s=e("debug")("JsSIP:RequestSender"),l=e("./Constants"),i=e("./UA"),o=e("./DigestAuthentication"),u=e("./Transactions");r.prototype={send:function(){switch(this.method){case"INVITE":this.clientTransaction=new u.InviteClientTransaction(this,this.request,this.ua.transport);break;case"ACK":this.clientTransaction=new u.AckClientTransaction(this,this.request,this.ua.transport);break;default:this.clientTransaction=new u.NonInviteClientTransaction(this,this.request,this.ua.transport)}this.clientTransaction.send()},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(e){var t,n,r,i=e.status_code;if(401!==i&&407!==i||null===this.ua.configuration.password&&null===this.ua.configuration.ha1)this.applicant.receiveResponse(e);else{if(401===e.status_code?(n=e.parseHeader("www-authenticate"),r="authorization"):(n=e.parseHeader("proxy-authenticate"),r="proxy-authorization"),!n)return s(e.status_code+" with wrong or missing challenge, cannot authenticate"),void this.applicant.receiveResponse(e);if(!this.challenged||!this.staled&&n.stale===!0){if(this.auth||(this.auth=new o({username:this.ua.configuration.authorization_user,password:this.ua.configuration.password,realm:this.ua.configuration.realm,ha1:this.ua.configuration.ha1})),!this.auth.authenticate(this.request,n))return void this.applicant.receiveResponse(e);this.challenged=!0,this.ua.set("realm",this.auth.get("realm")),this.ua.set("ha1",this.auth.get("ha1")),n.stale&&(this.staled=!0),t=e.method===l.REGISTER?this.applicant.cseq+=1:this.request.dialog?this.request.dialog.local_seqnum+=1:this.request.cseq+1,this.request=this.request.clone(),this.request.cseq=t,this.request.setHeader("cseq",t+" "+this.method),this.request.setHeader(r,this.auth.toString()),this.send()}else this.applicant.receiveResponse(e)}}}},{"./Constants":1,"./DigestAuthentication":4,"./Transactions":21,"./UA":23,debug:33}],18:[function(e,t,n){function r(e,t,n,r,s,l){var i,o,u,d;return r=r||{},e&&t&&n?(this.ua=n,this.headers={},this.method=e,this.ruri=t,this.body=l,this.extraHeaders=s&&s.slice()||[],r.route_set?this.setHeader("route",r.route_set):n.configuration.use_preloaded_route&&this.setHeader("route","<"+n.transport.sip_uri+";lr>"),this.setHeader("via",""),this.setHeader("max-forwards",a.MAX_FORWARDS),i=r.to_display_name||0===r.to_display_name?'"'+r.to_display_name+'" ':"",i+="<"+(r.to_uri||t)+">",i+=r.to_tag?";tag="+r.to_tag:"",this.to=new h.parse(i),this.setHeader("to",i),o=r.from_display_name||0===r.from_display_name?'"'+r.from_display_name+'" ':n.configuration.display_name?'"'+n.configuration.display_name+'" ':"",o+="<"+(r.from_uri||n.configuration.uri)+">;tag=",o+=r.from_tag||c.newTag(),this.from=new h.parse(o),this.setHeader("from",o),u=r.call_id||n.configuration.jssip_id+c.createRandomToken(15),this.call_id=u,this.setHeader("call-id",u),d=r.cseq||Math.floor(1e4*Math.random()),this.cseq=d,void this.setHeader("cseq",d+" "+e)):null}function s(){this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}function l(e){this.ua=e,this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null}function i(){this.headers={},this.status_code=null,this.reason_phrase=null}t.exports={OutgoingRequest:r,IncomingRequest:l,IncomingResponse:i};var o=e("debug")("JsSIP:SIPMessage"),u=e("sdp-transform"),a=e("./Constants"),c=e("./Utils"),h=e("./NameAddrHeader"),d=e("./Grammar");r.prototype={setHeader:function(e,t){var n,r;for(n=new RegExp("^\\s*"+e+"\\s*:","i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[c.headerize(e)]=Array.isArray(t)?t:[t]},getHeader:function(e){var t,n,r=this.extraHeaders.length,s=this.headers[c.headerize(e)];if(s){if(s[0])return s[0]}else for(t=new RegExp("^\\s*"+e+"\\s*:","i"),n=0;r>n;n++)if(s=this.extraHeaders[n],t.test(s))return s.substring(s.indexOf(":")+1).trim()},getHeaders:function(e){var t,n,r,s=this.headers[c.headerize(e)],l=[];if(s){for(n=s.length,t=0;n>t;t++)l.push(s[t]);return l}for(n=this.extraHeaders.length,r=new RegExp("^\\s*"+e+"\\s*:","i"),t=0;n>t;t++)s=this.extraHeaders[t],r.test(s)&&l.push(s.substring(s.indexOf(":")+1).trim());return l},hasHeader:function(e){var t,n,r=this.extraHeaders.length;if(this.headers[c.headerize(e)])return!0;for(t=new RegExp("^\\s*"+e+"\\s*:","i"),n=0;r>n;n++)if(t.test(this.extraHeaders[n]))return!0;return!1},parseSDP:function(e){return!e&&this.sdp?this.sdp:(this.sdp=u.parse(this.body||""),this.sdp)},toString:function(){var e,t,n,r="",s=[];r+=this.method+" "+this.ruri+" SIP/2.0\r\n";for(e in this.headers)for(t=this.headers[e].length,n=0;t>n;n++)r+=e+": "+this.headers[e][n]+"\r\n";for(t=this.extraHeaders.length,n=0;t>n;n++)r+=this.extraHeaders[n].trim()+"\r\n";switch(this.method){case a.REGISTER:s.push("path","gruu");break;case a.INVITE:this.ua.configuration.session_timers&&s.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&s.push("gruu"),s.push("ice","replaces");break;case a.UPDATE:this.ua.configuration.session_timers&&s.push("timer"),s.push("ice")}return s.push("outbound"),r+="Allow: "+a.ALLOWED_METHODS+"\r\n",r+="Supported: "+s+"\r\n",r+="User-Agent: "+a.USER_AGENT+"\r\n",this.body?(t=c.str_utf8_length(this.body),r+="Content-Length: "+t+"\r\n\r\n",r+=this.body):r+="Content-Length: 0\r\n\r\n",r},clone:function(){var e=new r(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach(function(t){e.headers[t]=this.headers[t].slice()},this),e.body=this.body,e.extraHeaders=this.extraHeaders&&this.extraHeaders.slice()||[],e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e}},s.prototype={addHeader:function(e,t){var n={raw:t};e=c.headerize(e),this.headers[e]?this.headers[e].push(n):this.headers[e]=[n]},getHeader:function(e){var t=this.headers[c.headerize(e)];if(t)return t[0]?t[0].raw:void 0},getHeaders:function(e){var t,n,r=this.headers[c.headerize(e)],s=[];if(!r)return[];for(n=r.length,t=0;n>t;t++)s.push(r[t].raw);return s},hasHeader:function(e){return!!this.headers[c.headerize(e)]},parseHeader:function(e,t){var n,r,s;return e=c.headerize(e),t=t||0,this.headers[e]?t>=this.headers[e].length?void o('not so many "'+e+'" headers present'):(n=this.headers[e][t],r=n.raw,n.parsed?n.parsed:(s=d.parse(r,e.replace(/-/g,"_")),-1===s?(this.headers[e].splice(t,1),void o('error parsing "'+e+'" header field with value "'+r+'"')):(n.parsed=s,s))):void o('header "'+e+'" not present')},s:function(e,t){return this.parseHeader(e,t)},setHeader:function(e,t){var n={raw:t};this.headers[c.headerize(e)]=[n]},parseSDP:function(e){return!e&&this.sdp?this.sdp:(this.sdp=u.parse(this.body||""),this.sdp)},toString:function(){return this.data}},l.prototype=new s,l.prototype.reply=function(e,t,n,r,s,l){var i,o,u,h,d,p=[],f=this.getHeader("To"),m=0,g=0;if(e=e||null,t=t||null,!e||100>e||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);if(t=t||a.REASON_PHRASE[e]||"",n=n&&n.slice()||[],d="SIP/2.0 "+e+" "+t+"\r\n",this.method===a.INVITE&&e>100&&200>=e)for(i=this.getHeaders("record-route"),u=i.length,m;u>m;m++)d+="Record-Route: "+i[m]+"\r\n";for(o=this.getHeaders("via"),u=o.length,g;u>g;g++)d+="Via: "+o[g]+"\r\n";for(!this.to_tag&&e>100?f+=";tag="+c.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(f+=";tag="+this.to_tag),
d+="To: "+f+"\r\n",d+="From: "+this.getHeader("From")+"\r\n",d+="Call-ID: "+this.call_id+"\r\n",d+="CSeq: "+this.cseq+" "+this.method+"\r\n",u=n.length,h=0;u>h;h++)d+=n[h].trim()+"\r\n";switch(this.method){case a.INVITE:this.ua.configuration.session_timers&&p.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&p.push("gruu"),p.push("ice","replaces");break;case a.UPDATE:this.ua.configuration.session_timers&&p.push("timer"),r&&p.push("ice"),p.push("replaces")}p.push("outbound"),this.method===a.OPTIONS?(d+="Allow: "+a.ALLOWED_METHODS+"\r\n",d+="Accept: "+a.ACCEPTED_BODY_TYPES+"\r\n"):405===e?d+="Allow: "+a.ALLOWED_METHODS+"\r\n":415===e&&(d+="Accept: "+a.ACCEPTED_BODY_TYPES+"\r\n"),d+="Supported: "+p+"\r\n",r?(u=c.str_utf8_length(r),d+="Content-Type: application/sdp\r\n",d+="Content-Length: "+u+"\r\n\r\n",d+=r):d+="Content-Length: 0\r\n\r\n",this.server_transaction.receiveResponse(e,d,s,l)},l.prototype.reply_sl=function(e,t){var n,r,s=0,l=this.getHeaders("via"),i=l.length;if(e=e||null,t=t||null,!e||100>e||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);for(t=t||a.REASON_PHRASE[e]||"",r="SIP/2.0 "+e+" "+t+"\r\n",s;i>s;s++)r+="Via: "+l[s]+"\r\n";n=this.getHeader("To"),!this.to_tag&&e>100?n+=";tag="+c.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(n+=";tag="+this.to_tag),r+="To: "+n+"\r\n",r+="From: "+this.getHeader("From")+"\r\n",r+="Call-ID: "+this.call_id+"\r\n",r+="CSeq: "+this.cseq+" "+this.method+"\r\n",r+="Content-Length: 0\r\n\r\n",this.transport.send(r)},i.prototype=new s},{"./Constants":1,"./Grammar":6,"./NameAddrHeader":9,"./Utils":25,debug:33,"sdp-transform":44}],19:[function(e,t,n){function r(){}t.exports=r;var s=e("./Utils"),l=e("./Grammar"),i=e("debug")("JsSIP:ERROR:Socket");r.isSocket=function(e){if("undefined"==typeof e)return i("undefined JsSIP.Socket instance"),!1;try{if(!s.isString(e.url))throw i("missing or invalid JsSIP.Socket url property"),new Error;if(!s.isString(e.via_transport))throw i("missing or invalid JsSIP.Socket via_transport property"),new Error;if(-1===l.parse(e.sip_uri,"SIP_URI"))throw i("missing or invalid JsSIP.Socket sip_uri property"),new Error}catch(t){return!1}try{["connect","disconnect","send"].forEach(function(t){if(!s.isFunction(e[t]))throw i("missing or invalid JsSIP.Socket method: "+t),new Error})}catch(t){return!1}return!0}},{"./Grammar":6,"./Utils":25,debug:33}],20:[function(e,t,n){var r=500,s=4e3,l=5e3,i={T1:r,T2:s,T4:l,TIMER_B:64*r,TIMER_D:0*r,TIMER_F:64*r,TIMER_H:64*r,TIMER_I:0*r,TIMER_J:0*r,TIMER_K:0*l,TIMER_L:64*r,TIMER_M:64*r,PROVISIONAL_RESPONSE_INTERVAL:6e4};t.exports=i},{}],21:[function(e,t,n){function r(e,t,n){var r;this.type=a.NON_INVITE_CLIENT,this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),this.request_sender.ua.newTransaction(this),h.EventEmitter.call(this)}function s(e,t,n){var r,s=this;this.type=a.INVITE_CLIENT,this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),this.request_sender.ua.newTransaction(this),this.request.cancel=function(e){s.cancel_request(s,e)},h.EventEmitter.call(this)}function l(e,t,n){var r;this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),h.EventEmitter.call(this)}function i(e,t){this.type=a.NON_INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.state=a.STATUS_TRYING,t.newTransaction(this),h.EventEmitter.call(this)}function o(e,t){this.type=a.INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.state=a.STATUS_PROCEEDING,t.newTransaction(this),this.resendProvisionalTimer=null,e.reply(100),h.EventEmitter.call(this)}function u(e,t){var n;switch(t.method){case T.INVITE:if(n=e.transactions.ist[t.via_branch]){switch(n.state){case a.STATUS_PROCEEDING:n.transport.send(n.last_response);break;case a.STATUS_ACCEPTED:}return!0}break;case T.ACK:if(n=e.transactions.ist[t.via_branch],!n)return!1;if(n.state===a.STATUS_ACCEPTED)return!1;if(n.state===a.STATUS_COMPLETED)return n.state=a.STATUS_CONFIRMED,n.I=setTimeout(function(){n.timer_I()},_.TIMER_I),!0;break;case T.CANCEL:return n=e.transactions.ist[t.via_branch],n?(t.reply_sl(200),n.state!==a.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(n=e.transactions.nist[t.via_branch]){switch(n.state){case a.STATUS_TRYING:break;case a.STATUS_PROCEEDING:case a.STATUS_COMPLETED:n.transport.send(n.last_response)}return!0}}}t.exports={C:null,NonInviteClientTransaction:r,InviteClientTransaction:s,AckClientTransaction:l,NonInviteServerTransaction:i,InviteServerTransaction:o,checkTransaction:u};var a={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"};t.exports.C=a;var c=e("util"),h=e("events"),d=e("debug")("JsSIP:NonInviteClientTransaction"),p=e("debug")("JsSIP:InviteClientTransaction"),f=e("debug")("JsSIP:AckClientTransaction"),m=e("debug")("JsSIP:NonInviteServerTransaction"),g=e("debug")("JsSIP:InviteServerTransaction"),T=e("./Constants"),_=e("./Timers");c.inherits(r,h.EventEmitter),r.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},r.prototype.send=function(){var e=this;this.stateChanged(a.STATUS_TRYING),this.F=setTimeout(function(){e.timer_F()},_.TIMER_F),this.transport.send(this.request)||this.onTransportError()},r.prototype.onTransportError=function(){d("transport error occurred, deleting transaction "+this.id),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onTransportError()},r.prototype.timer_F=function(){d("Timer F expired for transaction "+this.id),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout()},r.prototype.timer_K=function(){this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},r.prototype.receiveResponse=function(e){var t=this,n=e.status_code;if(200>n)switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_PROCEEDING),this.request_sender.receiveResponse(e)}else switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.request_sender.onRequestTimeout():this.request_sender.receiveResponse(e),this.K=setTimeout(function(){t.timer_K()},_.TIMER_K);break;case a.STATUS_COMPLETED:}},c.inherits(s,h.EventEmitter),s.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},s.prototype.send=function(){var e=this;this.stateChanged(a.STATUS_CALLING),this.B=setTimeout(function(){e.timer_B()},_.TIMER_B),this.transport.send(this.request)||this.onTransportError()},s.prototype.onTransportError=function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==a.STATUS_ACCEPTED&&(p("transport error occurred, deleting transaction "+this.id),this.request_sender.onTransportError()),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},s.prototype.timer_M=function(){p("Timer M expired for transaction "+this.id),this.state===a.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this))},s.prototype.timer_B=function(){p("Timer B expired for transaction "+this.id),this.state===a.STATUS_CALLING&&(this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout())},s.prototype.timer_D=function(){p("Timer D expired for transaction "+this.id),clearTimeout(this.B),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},s.prototype.sendACK=function(e){var t=this;this.ack="ACK "+this.request.ruri+" SIP/2.0\r\n",this.ack+="Via: "+this.request.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.ack+="Route: "+this.request.headers.Route.toString()+"\r\n"),this.ack+="To: "+e.getHeader("to")+"\r\n",this.ack+="From: "+this.request.headers.From.toString()+"\r\n",this.ack+="Call-ID: "+this.request.headers["Call-ID"].toString()+"\r\n",this.ack+="CSeq: "+this.request.headers.CSeq.toString().split(" ")[0],this.ack+=" ACK\r\n",this.ack+="Content-Length: 0\r\n\r\n",this.D=setTimeout(function(){t.timer_D()},_.TIMER_D),this.transport.send(this.ack)},s.prototype.cancel_request=function(e,t){var n=e.request;this.cancel=T.CANCEL+" "+n.ruri+" SIP/2.0\r\n",this.cancel+="Via: "+n.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.cancel+="Route: "+n.headers.Route.toString()+"\r\n"),this.cancel+="To: "+n.headers.To.toString()+"\r\n",this.cancel+="From: "+n.headers.From.toString()+"\r\n",this.cancel+="Call-ID: "+n.headers["Call-ID"].toString()+"\r\n",this.cancel+="CSeq: "+n.headers.CSeq.toString().split(" ")[0]+" CANCEL\r\n",t&&(this.cancel+="Reason: "+t+"\r\n"),this.cancel+="Content-Length: 0\r\n\r\n",this.state===a.STATUS_PROCEEDING&&this.transport.send(this.cancel)},s.prototype.receiveResponse=function(e){var t=this,n=e.status_code;if(n>=100&&199>=n)switch(this.state){case a.STATUS_CALLING:this.stateChanged(a.STATUS_PROCEEDING),this.request_sender.receiveResponse(e);break;case a.STATUS_PROCEEDING:this.request_sender.receiveResponse(e)}else if(n>=200&&299>=n)switch(this.state){case a.STATUS_CALLING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_ACCEPTED),this.M=setTimeout(function(){t.timer_M()},_.TIMER_M),this.request_sender.receiveResponse(e);break;case a.STATUS_ACCEPTED:this.request_sender.receiveResponse(e)}else if(n>=300&&699>=n)switch(this.state){case a.STATUS_CALLING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),this.sendACK(e),this.request_sender.receiveResponse(e);break;case a.STATUS_COMPLETED:this.sendACK(e)}},c.inherits(l,h.EventEmitter),l.prototype.send=function(){this.transport.send(this.request)||this.onTransportError()},l.prototype.onTransportError=function(){f("transport error occurred for transaction "+this.id),this.request_sender.onTransportError()},c.inherits(i,h.EventEmitter),i.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},i.prototype.timer_J=function(){m("Timer J expired for transaction "+this.id),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this)},i.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,m("transport error occurred, deleting transaction "+this.id),clearTimeout(this.J),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},i.prototype.receiveResponse=function(e,t,n,r){var s=this;if(100===e)switch(this.state){case a.STATUS_TRYING:this.stateChanged(a.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case a.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=200&&699>=e)switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout(function(){s.timer_J()},_.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r());break;case a.STATUS_COMPLETED:}},c.inherits(o,h.EventEmitter),o.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},o.prototype.timer_H=function(){g("Timer H expired for transaction "+this.id),this.state===a.STATUS_COMPLETED&&g("ACK not received, dialog will be terminated"),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this)},o.prototype.timer_I=function(){this.stateChanged(a.STATUS_TERMINATED)},o.prototype.timer_L=function(){g("Timer L expired for transaction "+this.id),this.state===a.STATUS_ACCEPTED&&(this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},o.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,g("transport error occurred, deleting transaction "+this.id),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},o.prototype.resend_provisional=function(){this.transport.send(this.last_response)||this.onTransportError()},o.prototype.receiveResponse=function(e,t,n,r){var s=this;if(e>=100&&199>=e)switch(this.state){case a.STATUS_PROCEEDING:this.transport.send(t)||this.onTransportError(),this.last_response=t}if(e>100&&199>=e&&this.state===a.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval(function(){s.resend_provisional()},_.PROVISIONAL_RESPONSE_INTERVAL));else if(e>=200&&299>=e)switch(this.state){case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout(function(){s.timer_L()},_.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case a.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=300&&699>=e)switch(this.state){case a.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(a.STATUS_COMPLETED),this.H=setTimeout(function(){s.timer_H()},_.TIMER_H),n&&n()):(this.onTransportError(),r&&r())}}},{"./Constants":1,"./Timers":20,debug:33,events:28,util:32}],22:[function(e,t,n){function r(e,t){if(c("new()"),this.status=d.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=t||d.recovery_options,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1,"undefined"==typeof e)throw new TypeError("Invalid argument. undefined 'sockets' argument");e instanceof Array||(e=[e]),e.forEach(function(e){if(!a.isSocket(e.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(e.weight&&!Number(e.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:e.socket,weight:e.weight||0,status:d.SOCKET_STATUS_READY})},this),Object.defineProperties(this,{via_transport:{get:function(){return this.socket.via_transport}},url:{get:function(){return this.socket.url}},sip_uri:{get:function(){return this.socket.sip_uri}}}),u.call(this)}function s(){this.recover_attempts=0,this.status=d.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}function l(e,t,n){this.status=d.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:t,reason:n}),this.close_requested||(e&&(this.socket.status=d.SOCKET_STATUS_ERROR),o.call(this,e))}function i(e){if("\r\n"===e)return void c("received message with CRLF Keep Alive response");if("string"!=typeof e){try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(t){return void c("received binary message failed to be converted into string, message discarded")}c("received binary message:\n\n"+e+"\n")}else c("received text message:\n\n"+e+"\n");this.ondata({transport:this,message:e})}function o(){var e,t=this;this.recover_attempts+=1,e=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1),e<this.recovery_options.min_interval?e=this.recovery_options.min_interval:e>this.recovery_options.max_interval&&(e=this.recovery_options.max_interval),c("reconnection attempt: "+this.recover_attempts+". next connection attempt in "+e+" seconds"),this.recovery_timer=setTimeout(function(){t.close_requested||t.isConnected()||t.isConnecting()||(u.call(t),t.connect())},1e3*e)}function u(){var e=[];if(this.sockets.forEach(function(t){t.status!==d.SOCKET_STATUS_ERROR&&(0===e.length?e.push(t):t.weight>e[0].weight?e=[t]:t.weight===e[0].weight&&e.push(t))}),0===e.length)return this.sockets.forEach(function(e){e.status=d.SOCKET_STATUS_READY}),void u.call(this);var t=Math.floor(Math.random()*e.length);this.socket=e[t].socket}t.exports=r;var a=e("./Socket"),c=e("debug")("JsSIP:Transport"),h=e("debug")("JsSIP:ERROR:Transport"),d={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:2,max_interval:30}};r.prototype.connect=function(){return c("connect()"),this.isConnected()?void c("Transport is already connected"):this.isConnecting()?void c("Transport is connecting"):(this.close_requested=!1,this.status=d.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),void(this.close_requested||(this.socket.onconnect=s.bind(this),this.socket.ondisconnect=l.bind(this),this.socket.ondata=i.bind(this),this.socket.connect())))},r.prototype.disconnect=function(){c("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=d.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect()},r.prototype.send=function(e){if(c("send()"),!this.isConnected())return h("unable to send message, transport is not connected"),!1;var t=e.toString();return c("sending message:\n\n"+t+"\n"),this.socket.send(t)},r.prototype.isConnected=function(){return this.status===d.STATUS_CONNECTED},r.prototype.isConnecting=function(){return this.status===d.STATUS_CONNECTING}},{"./Socket":19,debug:33}],23:[function(e,t,n){function r(e){if(this.cache={credentials:{}},this.configuration={},this.dynConfiguration={},this.dialogs={},this.applicants={},this.sessions={},this.transport=null,this.contact=null,this.status=u.STATUS_INIT,this.error=null,this.transactions={nist:{},nict:{},ist:{},ict:{}},this.data={},Object.defineProperties(this,{transactionsCount:{get:function(){var e,t=["nist","nict","ist","ict"],n=0;for(e in t)n+=Object.keys(this.transactions[t[e]]).length;return n}},nictTransactionsCount:{get:function(){return Object.keys(this.transactions.nict).length}},nistTransactionsCount:{get:function(){return Object.keys(this.transactions.nist).length}},ictTransactionsCount:{get:function(){return Object.keys(this.transactions.ict).length}},istTransactionsCount:{get:function(){return Object.keys(this.transactions.ist).length}}}),void 0===e)throw new TypeError("Not enough arguments");try{this.loadConfig(e)}catch(t){throw this.status=u.STATUS_NOT_READY,this.error=u.CONFIGURATION_ERROR,t}this._registrator=new m(this),c.EventEmitter.call(this),p.called||p()}function s(e){this.emit("connecting",e)}function l(e){this.status!==u.STATUS_USER_CLOSED&&(this.status=u.STATUS_READY,this.error=null,this.emit("connected",e),this.dynConfiguration.register&&this._registrator.register())}function i(e){var t,n,r,s=["nict","ict","nist","ist"];for(r=s.length,t=0;r>t;t++)for(n in this.transactions[s[t]])this.transactions[s[t]][n].onTransportError();this.emit("disconnected",e),this._registrator.onTransportClosed(),this.status!==u.STATUS_USER_CLOSED&&(this.status=u.STATUS_NOT_READY,this.error=u.NETWORK_ERROR)}function o(e){var t,n=e.transport,s=e.message;if(s=b.parseMessage(s,this),s&&!(this.status===r.C.STATUS_USER_CLOSED&&s instanceof I.IncomingRequest)&&w(s,this,n))if(s instanceof I.IncomingRequest)s.transport=n,this.receiveRequest(s);else if(s instanceof I.IncomingResponse)switch(s.method){case f.INVITE:t=this.transactions.ict[s.via_branch],t&&t.receiveResponse(s);break;case f.ACK:break;default:t=this.transactions.nict[s.via_branch],t&&t.receiveResponse(s)}}t.exports=r;var u={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};r.C=u;var a=e("util"),c=e("events"),h=e("debug")("JsSIP:UA"),d=e("debug")("JsSIP:ERROR:UA");d.log=console.warn.bind(console);var p=e("rtcninja"),f=e("./Constants"),m=e("./Registrator"),g=e("./RTCSession"),T=e("./Message"),_=e("./Transactions"),v=e("./Transport"),C=e("./WebSocketInterface"),S=e("./Socket"),E=e("./Utils"),A=e("./Exceptions"),y=e("./URI"),R=e("./Grammar"),b=e("./Parser"),I=e("./SIPMessage"),w=e("./sanityCheck");a.inherits(r,c.EventEmitter),r.prototype.start=function(){function e(){h("restarting UA"),t.status=u.STATUS_READY,t.transport.connect()}h("start()");var t=this;this.status===u.STATUS_INIT?this.transport.connect():this.status===u.STATUS_USER_CLOSED?this.isConnected()?this.once("disconnected",e):e():h(this.status===u.STATUS_READY?"UA is in READY status, not restarted":"ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this.dynConfiguration.register=this.configuration.register},r.prototype.register=function(){h("register()"),this.dynConfiguration.register=!0,this._registrator.register()},r.prototype.unregister=function(e){h("unregister()"),this.dynConfiguration.register=!1,this._registrator.unregister(e)},r.prototype.registrator=function(){return this._registrator},r.prototype.isRegistered=function(){return!!this._registrator.registered},r.prototype.isConnected=function(){return this.transport.isConnected()},r.prototype.call=function(e,t){h("call()");var n;return n=new g(this),n.connect(e,t),n},r.prototype.sendMessage=function(e,t,n){h("sendMessage()");var r;return r=new T(this),r.send(e,t,n),r},r.prototype.terminateSessions=function(e){h("terminateSessions()");for(var t in this.sessions)this.sessions[t].isEnded()||this.sessions[t].terminate(e)},r.prototype.stop=function(){h("stop()");var e,t,n,r=this;if(this.dynConfiguration={},this.status===u.STATUS_USER_CLOSED)return void h("UA already closed");this._registrator.close(),n=Object.keys(this.sessions).length;for(e in this.sessions){h("closing session "+e);try{this.sessions[e].terminate()}catch(s){}}for(t in this.applicants)try{this.applicants[t].close()}catch(s){}this.status=u.STATUS_USER_CLOSED,0===this.nistTransactionsCount&&0===this.nictTransactionsCount&&0===this.ictTransactionsCount&&0===this.istTransactionsCount&&0===n?r.transport.disconnect():setTimeout(function(){r.transport.disconnect()},2e3)},r.prototype.normalizeTarget=function(e){return E.normalizeTarget(e,this.configuration.hostport_params)},r.prototype.get=function(e){switch(e){case"realm":return this.configuration.realm;case"ha1":return this.configuration.ha1;default:return void d('get() | cannot get "%s" parameter in runtime',e)}return!0},r.prototype.set=function(e,t){switch(e){case"password":this.configuration.password=String(t);break;case"realm":this.configuration.realm=String(t);break;case"ha1":this.configuration.ha1=String(t),this.configuration.password=null;break;case"display_name":if(-1===R.parse('"'+t+'"',"display_name"))return d('set() | wrong "display_name"'),!1;this.configuration.display_name=t;break;default:return d('set() | cannot set "%s" parameter in runtime',e),!1}return!0},r.prototype.newTransaction=function(e){this.transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})},r.prototype.destroyTransaction=function(e){delete this.transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})},r.prototype.newMessage=function(e){this.emit("newMessage",e)},r.prototype.newRTCSession=function(e){this.emit("newRTCSession",e)},r.prototype.registered=function(e){this.emit("registered",e)},r.prototype.unregistered=function(e){this.emit("unregistered",e)},r.prototype.registrationFailed=function(e){this.emit("registrationFailed",e)},r.prototype.receiveRequest=function(e){var t,n,r,s,l=e.method;if(e.ruri.user!==this.configuration.uri.user&&e.ruri.user!==this.contact.uri.user)return h("Request-URI does not point to us"),void(e.method!==f.ACK&&e.reply_sl(404));if(e.ruri.scheme===f.SIPS)return void e.reply_sl(416);if(!_.checkTransaction(this,e)){if(l===f.INVITE?new _.InviteServerTransaction(e,this):l!==f.ACK&&l!==f.CANCEL&&new _.NonInviteServerTransaction(e,this),l===f.OPTIONS)e.reply(200);else if(l===f.MESSAGE){if(0===this.listeners("newMessage").length)return void e.reply(405);r=new T(this),r.init_incoming(e)}else if(l===f.INVITE&&!e.to_tag&&0===this.listeners("newRTCSession").length)return void e.reply(405);if(e.to_tag)t=this.findDialog(e.call_id,e.from_tag,e.to_tag),t?t.receiveRequest(e):l===f.NOTIFY?(n=this.findSession(e),n?n.receiveRequest(e):(h("received NOTIFY request for a non existent subscription"),e.reply(481,"Subscription does not exist"))):l!==f.ACK&&e.reply(481);else switch(l){case f.INVITE:p.hasWebRTC()?e.hasHeader("replaces")?(s=e.replaces,t=this.findDialog(s.call_id,s.from_tag,s.to_tag),t?(n=t.owner,n.isEnded()?e.reply(603):n.receiveRequest(e)):e.reply(481)):(n=new g(this),n.init_incoming(e)):(h("INVITE received but WebRTC is not supported"),e.reply(488));break;case f.BYE:e.reply(481);break;case f.CANCEL:n=this.findSession(e),n?n.receiveRequest(e):h("received CANCEL request for a non existent session");break;case f.ACK:break;default:e.reply(405)}}},r.prototype.findSession=function(e){var t=e.call_id+e.from_tag,n=this.sessions[t],r=e.call_id+e.to_tag,s=this.sessions[r];return n?n:s?s:null},r.prototype.findDialog=function(e,t,n){var r=e+t+n,s=this.dialogs[r];return s?s:(r=e+n+t,s=this.dialogs[r],s?s:null)},r.prototype.loadConfig=function(e){var t,n,u,a,c,p={via_host:E.createRandomToken(12)+".invalid",contact_uri:null,password:null,realm:null,ha1:null,register_expires:600,register:!0,registrar_server:null,use_preloaded_route:!1,no_answer_timeout:60,session_timers:!0};for(t in r.configuration_check.mandatory){if(!e.hasOwnProperty(t))throw new A.ConfigurationError(t);if(n=e[t],u=r.configuration_check.mandatory[t].call(this,n),void 0===u)throw new A.ConfigurationError(t,n);p[t]=u}for(t in r.configuration_check.optional)if(e.hasOwnProperty(t)){if(n=e[t],E.isEmpty(n))continue;if(u=r.configuration_check.optional[t].call(this,n,e),void 0===u)throw new A.ConfigurationError(t,n);p[t]=u}0===p.display_name&&(p.display_name="0"),p.instance_id||(p.instance_id=E.newUUID()),p.jssip_id=E.createRandomToken(5),a=p.uri.clone(),a.user=null,p.hostport_params=a.toString().replace(/^sip:/i,"");var f=[];if(p.ws_servers&&Array.isArray(p.ws_servers)&&(f=f.concat(p.ws_servers)),p.sockets&&Array.isArray(p.sockets)&&(f=f.concat(p.sockets)),0===f.length)throw new A.ConfigurationError("sockets");try{this.transport=new v(f,{max_interval:p.connection_recovery_max_interval,min_interval:p.connection_recovery_min_interval}),this.transport.onconnecting=s.bind(this),this.transport.onconnect=l.bind(this),this.transport.ondisconnect=i.bind(this),this.transport.ondata=o.bind(this),delete p.connection_recovery_max_interval,delete p.connection_recovery_min_interval,delete p.ws_servers,delete p.sockets}catch(m){throw d(m),new A.ConfigurationError("sockets",f)}p.authorization_user||(p.authorization_user=p.uri.user),p.registrar_server||(c=p.uri.clone(),c.user=null,c.clearParams(),c.clearHeaders(),p.registrar_server=c),p.no_answer_timeout=1e3*p.no_answer_timeout,p.contact_uri?p.via_host=p.contact_uri.host:p.contact_uri=new y("sip",E.createRandomToken(8),p.via_host,null,{transport:"ws"}),this.contact={pub_gruu:null,temp_gruu:null,uri:p.contact_uri,toString:function(e){e=e||{};var t=e.anonymous||null,n=e.outbound||null,r="<";return r+=t?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!n||(t?this.temp_gruu:this.pub_gruu)||(r+=";ob"),r+=">"}};for(t in p)r.configuration_skeleton[t].value=p[t];Object.defineProperties(this.configuration,r.configuration_skeleton);for(t in p)r.configuration_skeleton[t].value="";h("configuration parameters after validation:");for(t in p)switch(t){case"uri":case"registrar_server":h("- "+t+": "+p[t]);break;case"password":case"ha1":h("- "+t+": NOT SHOWN");break;default:h("- "+t+": "+JSON.stringify(p[t]))}},r.configuration_skeleton=function(){var e,t,n,r={},s=["jssip_id","hostport_params","uri","authorization_user","contact_uri","display_name","instance_id","no_answer_timeout","session_timers","password","realm","ha1","register_expires","registrar_server","sockets","use_preloaded_route","ws_servers","via_core_value","via_host"],l=["password","realm","ha1","display_name"];for(e in s)t=s[e],n=-1!==l.indexOf(t),r[t]={value:"",writable:n,configurable:!1};return r.register={value:"",writable:!0,configurable:!1},r}(),r.configuration_check={mandatory:{uri:function(e){var t;return/^sip:/i.test(e)||(e=f.SIP+":"+e),t=y.parse(e),t&&t.user?t:void 0}},optional:{authorization_user:function(e){return-1===R.parse('"'+e+'"',"quoted_string")?void 0:e},connection_recovery_max_interval:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},connection_recovery_min_interval:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},contact_uri:function(e){if("string"==typeof e){var t=R.parse(e,"SIP_URI");if(-1!==t)return t}},display_name:function(e){return-1===R.parse('"'+e+'"',"display_name")?void 0:e},instance_id:function(e){return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===R.parse(e,"uuid")?void 0:e},no_answer_timeout:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},session_timers:function(e){return"boolean"==typeof e?e:void 0},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){return"boolean"==typeof e?e:void 0},register_expires:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},registrar_server:function(e){var t;return/^sip:/i.test(e)||(e=f.SIP+":"+e),t=y.parse(e),t?t.user?void 0:t:void 0},sockets:function(e){var t,n;if(S.isSocket(e))e=[{socket:e}];else{if(!Array.isArray(e)||!e.length)return;for(n=e.length,t=0;n>t;t++)S.isSocket(e[t])&&(e[t]={socket:e[t]})}return e},use_preloaded_route:function(e){return"boolean"==typeof e?e:void 0},ws_servers:function(e){var t,n,r=[];if("string"==typeof e)e=[{ws_uri:e}];else{if(!Array.isArray(e)||!e.length)return;for(n=e.length,t=0;n>t;t++)"string"==typeof e[t]&&(e[t]={ws_uri:e[t]})}for(n=e.length,t=0;n>t;t++)try{r.push({socket:new C(e[t].ws_uri),weight:e[t].weight||0})}catch(s){return void d(s)}return r}}}},{"./Constants":1,"./Exceptions":5,"./Grammar":6,"./Message":8,"./Parser":10,"./RTCSession":11,"./Registrator":16,"./SIPMessage":18,"./Socket":19,"./Transactions":21,"./Transport":22,"./URI":24,"./Utils":25,"./WebSocketInterface":26,"./sanityCheck":27,debug:33,events:28,rtcninja:38,util:32}],24:[function(e,t,n){function r(e,t,n,r,l,i){var o,u;if(!n)throw new TypeError('missing or invalid "host" parameter');e=e||s.SIP,this.parameters={},this.headers={};for(o in l)this.setParam(o,l[o]);for(u in i)this.setHeader(u,i[u]);Object.defineProperties(this,{scheme:{get:function(){return e},set:function(t){e=t.toLowerCase()}},user:{get:function(){return t},set:function(e){t=e}},host:{get:function(){return n},set:function(e){n=e.toLowerCase()}},port:{get:function(){return r},set:function(e){r=0===e?e:parseInt(e,10)||null}}})}t.exports=r;var s=e("./Constants"),l=e("./Utils"),i=e("./Grammar");r.prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]="undefined"==typeof t||null===t?null:t.toString())},getParam:function(e){return e?this.parameters[e.toLowerCase()]:void 0},hasParam:function(e){return e?this.parameters.hasOwnProperty(e.toLowerCase())&&!0||!1:void 0},deleteParam:function(e){var t;return e=e.toLowerCase(),this.parameters.hasOwnProperty(e)?(t=this.parameters[e],delete this.parameters[e],t):void 0},clearParams:function(){this.parameters={}},setHeader:function(e,t){this.headers[l.headerize(e)]=Array.isArray(t)?t:[t]},getHeader:function(e){return e?this.headers[l.headerize(e)]:void 0;
},hasHeader:function(e){return e?this.headers.hasOwnProperty(l.headerize(e))&&!0||!1:void 0},deleteHeader:function(e){var t;return e=l.headerize(e),this.headers.hasOwnProperty(e)?(t=this.headers[e],delete this.headers[e],t):void 0},clearHeaders:function(){this.headers={}},clone:function(){return new r(this.scheme,this.user,this.host,this.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))},toString:function(){var e,t,n,r,s=[];r=this.scheme+":",this.user&&(r+=l.escapeUser(this.user)+"@"),r+=this.host,(this.port||0===this.port)&&(r+=":"+this.port);for(t in this.parameters)r+=";"+t,null!==this.parameters[t]&&(r+="="+this.parameters[t]);for(e in this.headers)for(n=0;n<this.headers[e].length;n++)s.push(e+"="+this.headers[e][n]);return s.length>0&&(r+="?"+s.join("&")),r},toAor:function(e){var t;return t=this.scheme+":",this.user&&(t+=l.escapeUser(this.user)+"@"),t+=this.host,e&&(this.port||0===this.port)&&(t+=":"+this.port),t}},r.parse=function(e){return e=i.parse(e,"SIP_URI"),-1!==e?e:void 0}},{"./Constants":1,"./Grammar":6,"./Utils":25}],25:[function(e,t,n){var r={};t.exports=r;var s=e("./Constants"),l=e("./URI"),i=e("./Grammar");r.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length},r.isFunction=function(e){return void 0!==e?"[object Function]"===Object.prototype.toString.call(e):!1},r.isString=function(e){return void 0!==e?"[object String]"===Object.prototype.toString.call(e):!1},r.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},r.isEmpty=function(e){return null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e)?!0:void 0},r.hasMethods=function(e){for(var t,n=1;t=arguments[n++];)if(this.isFunction(e[t]))return!1;return!0},r.createRandomToken=function(e,t){var n,r,s="";for(t=t||32,n=0;e>n;n++)r=Math.random()*t|0,s+=r.toString(t);return s},r.newTag=function(){return r.createRandomToken(10)},r.newUUID=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});return e},r.hostType=function(e){return e?(e=i.parse(e,"host"),-1!==e?e.host_type:void 0):void 0},r.normalizeTarget=function(e,t){var n,i,o,u;if(e){if(e instanceof l)return e;if("string"==typeof e){switch(i=e.split("@"),i.length){case 1:if(!t)return;o=e,u=t;break;case 2:o=i[0],u=i[1];break;default:o=i.slice(0,i.length-1).join("@"),u=i[i.length-1]}return o=o.replace(/^(sips?|tel):/i,""),/^[\-\.\(\)]*\+?[0-9\-\.\(\)]+$/.test(o)&&(o=o.replace(/[\-\.\(\)]/g,"")),e=s.SIP+":"+r.escapeUser(o)+"@"+u,(n=l.parse(e))?n:void 0}}else;},r.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},r.headerize=function(e){var t,n={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),s="",l=r.length;for(t=0;l>t;t++)0!==t&&(s+="-"),s+=r[t].charAt(0).toUpperCase()+r[t].substring(1);return n[s]&&(s=n[s]),s},r.sipErrorCause=function(e){var t;for(t in s.SIP_ERROR_CAUSES)if(-1!==s.SIP_ERROR_CAUSES[t].indexOf(e))return s.causes[t];return s.causes.SIP_FAILURE_CODE},r.getRandomTestNetIP=function(){function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}return"192.0.2."+e(1,254)},r.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,s,l,i;return s=2147483648&e,l=2147483648&t,n=1073741824&e,r=1073741824&t,i=(1073741823&e)+(1073741823&t),n&r?2147483648^i^s^l:n|r?1073741824&i?3221225472^i^s^l:1073741824^i^s^l:i^s^l}function r(e,t,n){return e&t|~e&n}function s(e,t,n){return e&n|t&~n}function l(e,t,n){return e^t^n}function i(e,t,n){return t^(e|~n)}function o(e,s,l,i,o,u,a){return e=n(e,n(n(r(s,l,i),o),a)),n(t(e,u),s)}function u(e,r,l,i,o,u,a){return e=n(e,n(n(s(r,l,i),o),a)),n(t(e,u),r)}function a(e,r,s,i,o,u,a){return e=n(e,n(n(l(r,s,i),o),a)),n(t(e,u),r)}function c(e,r,s,l,o,u,a){return e=n(e,n(n(i(r,s,l),o),a)),n(t(e,u),r)}function h(e){for(var t,n=e.length,r=n+8,s=(r-r%64)/64,l=16*(s+1),i=new Array(l-1),o=0,u=0;n>u;)t=(u-u%4)/4,o=u%4*8,i[t]=i[t]|e.charCodeAt(u)<<o,u++;return t=(u-u%4)/4,o=u%4*8,i[t]=i[t]|128<<o,i[l-2]=n<<3,i[l-1]=n>>>29,i}function d(e){var t,n,r="",s="";for(n=0;3>=n;n++)t=e>>>8*n&255,s="0"+t.toString(16),r+=s.substr(s.length-2,2);return r}function p(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var f,m,g,T,_,v,C,S,E,A=[],y=7,R=12,b=17,I=22,w=5,N=9,D=14,O=20,x=4,U=11,M=16,P=23,q=6,L=10,k=15,H=21;for(e=p(e),A=h(e),v=1732584193,C=4023233417,S=2562383102,E=271733878,f=0;f<A.length;f+=16)m=v,g=C,T=S,_=E,v=o(v,C,S,E,A[f+0],y,3614090360),E=o(E,v,C,S,A[f+1],R,3905402710),S=o(S,E,v,C,A[f+2],b,606105819),C=o(C,S,E,v,A[f+3],I,3250441966),v=o(v,C,S,E,A[f+4],y,4118548399),E=o(E,v,C,S,A[f+5],R,1200080426),S=o(S,E,v,C,A[f+6],b,2821735955),C=o(C,S,E,v,A[f+7],I,4249261313),v=o(v,C,S,E,A[f+8],y,1770035416),E=o(E,v,C,S,A[f+9],R,2336552879),S=o(S,E,v,C,A[f+10],b,4294925233),C=o(C,S,E,v,A[f+11],I,2304563134),v=o(v,C,S,E,A[f+12],y,1804603682),E=o(E,v,C,S,A[f+13],R,4254626195),S=o(S,E,v,C,A[f+14],b,2792965006),C=o(C,S,E,v,A[f+15],I,1236535329),v=u(v,C,S,E,A[f+1],w,4129170786),E=u(E,v,C,S,A[f+6],N,3225465664),S=u(S,E,v,C,A[f+11],D,643717713),C=u(C,S,E,v,A[f+0],O,3921069994),v=u(v,C,S,E,A[f+5],w,3593408605),E=u(E,v,C,S,A[f+10],N,38016083),S=u(S,E,v,C,A[f+15],D,3634488961),C=u(C,S,E,v,A[f+4],O,3889429448),v=u(v,C,S,E,A[f+9],w,568446438),E=u(E,v,C,S,A[f+14],N,3275163606),S=u(S,E,v,C,A[f+3],D,4107603335),C=u(C,S,E,v,A[f+8],O,1163531501),v=u(v,C,S,E,A[f+13],w,2850285829),E=u(E,v,C,S,A[f+2],N,4243563512),S=u(S,E,v,C,A[f+7],D,1735328473),C=u(C,S,E,v,A[f+12],O,2368359562),v=a(v,C,S,E,A[f+5],x,4294588738),E=a(E,v,C,S,A[f+8],U,2272392833),S=a(S,E,v,C,A[f+11],M,1839030562),C=a(C,S,E,v,A[f+14],P,4259657740),v=a(v,C,S,E,A[f+1],x,2763975236),E=a(E,v,C,S,A[f+4],U,1272893353),S=a(S,E,v,C,A[f+7],M,4139469664),C=a(C,S,E,v,A[f+10],P,3200236656),v=a(v,C,S,E,A[f+13],x,681279174),E=a(E,v,C,S,A[f+0],U,3936430074),S=a(S,E,v,C,A[f+3],M,3572445317),C=a(C,S,E,v,A[f+6],P,76029189),v=a(v,C,S,E,A[f+9],x,3654602809),E=a(E,v,C,S,A[f+12],U,3873151461),S=a(S,E,v,C,A[f+15],M,530742520),C=a(C,S,E,v,A[f+2],P,3299628645),v=c(v,C,S,E,A[f+0],q,4096336452),E=c(E,v,C,S,A[f+7],L,1126891415),S=c(S,E,v,C,A[f+14],k,2878612391),C=c(C,S,E,v,A[f+5],H,4237533241),v=c(v,C,S,E,A[f+12],q,1700485571),E=c(E,v,C,S,A[f+3],L,2399980690),S=c(S,E,v,C,A[f+10],k,4293915773),C=c(C,S,E,v,A[f+1],H,2240044497),v=c(v,C,S,E,A[f+8],q,1873313359),E=c(E,v,C,S,A[f+15],L,4264355552),S=c(S,E,v,C,A[f+6],k,2734768916),C=c(C,S,E,v,A[f+13],H,1309151649),v=c(v,C,S,E,A[f+4],q,4149444226),E=c(E,v,C,S,A[f+11],L,3174756917),S=c(S,E,v,C,A[f+2],k,718787259),C=c(C,S,E,v,A[f+9],H,3951481745),v=n(v,m),C=n(C,g),S=n(S,T),E=n(E,_);var F=d(v)+d(C)+d(S)+d(E);return F.toLowerCase()}},{"./Constants":1,"./Grammar":6,"./URI":24}],26:[function(e,t,n){function r(e){a("new()");var t=null,n=null;this.ws=null,Object.defineProperties(this,{via_transport:{get:function(){return n},set:function(e){n=e.toUpperCase()}},sip_uri:{get:function(){return t}},url:{get:function(){return e}}});var r=u.parse(e,"absoluteURI");if(-1===r)throw c("invalid WebSocket URI: "+e),new TypeError("Invalid argument: "+e);if("wss"!==r.scheme&&"ws"!==r.scheme)throw c("invalid WebSocket URI scheme: "+r.scheme),new TypeError("Invalid argument: "+e);t="sip:"+r.host+(r.port?":"+r.port:"")+";transport=ws",this.via_transport=r.scheme}function s(){a("WebSocket "+this.url+" connected"),this.onconnect()}function l(e){a("WebSocket "+this.url+" closed"),e.wasClean===!1&&a("WebSocket abrupt disconnection"),this.ondisconnect(e.wasClean,e.code,e.reason)}function i(e){a("received WebSocket message"),this.ondata(e.data)}function o(e){c("WebSocket "+this.url+" error: "+e)}t.exports=r;var u=e("./Grammar"),a=e("debug")("JsSIP:WebSocketInterface"),c=e("debug")("JsSIP:ERROR:WebSocketInterface");r.prototype.connect=function(){if(a("connect()"),this.isConnected())return void a("WebSocket "+this.url+" is already connected");if(this.isConnecting())return void a("WebSocket "+this.url+" is connecting");this.ws&&this.ws.close(),a("connecting to WebSocket "+this.url);try{this.ws=new WebSocket(this.url,"sip"),this.ws.binaryType="arraybuffer",this.ws.onopen=s.bind(this),this.ws.onclose=l.bind(this),this.ws.onmessage=i.bind(this),this.ws.onerror=o.bind(this)}catch(e){o.call(this,e)}},r.prototype.disconnect=function(){a("disconnect()"),this.ws&&(this.ws.close(),this.ws=null)},r.prototype.send=function(e){return a("send()"),this.isConnected()?(this.ws.send(e),!0):(c("unable to send message, WebSocket is not open"),!1)},r.prototype.isConnected=function(){return this.ws&&this.ws.readyState===this.ws.OPEN},r.prototype.isConnecting=function(){return this.ws&&this.ws.readyState===this.ws.CONNECTING}},{"./Grammar":6,debug:33}],27:[function(e,t,n){function r(e,t,n){var r,s;for(d=e,p=t,f=n,r=S.length;r--;)if(s=S[r](d),s===!1)return!1;if(d instanceof T.IncomingRequest){for(r=v.length;r--;)if(s=v[r](d),s===!1)return!1}else if(d instanceof T.IncomingResponse)for(r=C.length;r--;)if(s=C[r](d),s===!1)return!1;return!0}function s(){return"sip"!==d.s("to").uri.scheme?(h(416),!1):void 0}function l(){return d.to_tag||d.call_id.substr(0,5)!==p.configuration.jssip_id?void 0:(h(482),!1)}function i(){var e=_.str_utf8_length(d.body),t=d.getHeader("content-length");return t>e?(h(400),!1):void 0}function o(){var e,t,n=d.from_tag,r=d.call_id,s=d.cseq;if(!d.to_tag)if(d.method===g.INVITE){if(p.transactions.ist[d.via_branch])return!1;for(t in p.transactions.ist)if(e=p.transactions.ist[t],e.request.from_tag===n&&e.request.call_id===r&&e.request.cseq===s)return h(482),!1}else{if(p.transactions.nist[d.via_branch])return!1;for(t in p.transactions.nist)if(e=p.transactions.nist[t],e.request.from_tag===n&&e.request.call_id===r&&e.request.cseq===s)return h(482),!1}}function u(){return d.getHeaders("via").length>1?(m("more than one Via header field present in the response, dropping the response"),!1):void 0}function a(){var e=_.str_utf8_length(d.body),t=d.getHeader("content-length");return t>e?(m("message body length is lower than the value in Content-Length header field, dropping the response"),!1):void 0}function c(){for(var e=["from","to","call_id","cseq","via"],t=e.length;t--;)if(!d.hasHeader(e[t]))return m("missing mandatory header field : "+e[t]+", dropping the response"),!1}function h(e){var t,n="SIP/2.0 "+e+" "+g.REASON_PHRASE[e]+"\r\n",r=d.getHeaders("via"),s=r.length,l=0;for(l;s>l;l++)n+="Via: "+r[l]+"\r\n";t=d.getHeader("To"),d.to_tag||(t+=";tag="+_.newTag()),n+="To: "+t+"\r\n",n+="From: "+d.getHeader("From")+"\r\n",n+="Call-ID: "+d.call_id+"\r\n",n+="CSeq: "+d.cseq+" "+d.method+"\r\n",n+="\r\n",f.send(n)}t.exports=r;var d,p,f,m=e("debug")("JsSIP:sanityCheck"),g=e("./Constants"),T=e("./SIPMessage"),_=e("./Utils"),v=[],C=[],S=[];v.push(s),v.push(l),v.push(i),v.push(o),C.push(u),C.push(a),S.push(c)},{"./Constants":1,"./SIPMessage":18,"./Utils":25,debug:33}],28:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function l(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!l(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,l,u,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),n.apply(this,l)}else if(i(n))for(l=Array.prototype.slice.call(arguments,1),a=n.slice(),r=a.length,u=0;r>u;u++)a[u].apply(this,l);return!0},r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(n=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,l,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],l=n.length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(o=l;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],s(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],29:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],30:[function(e,t,n){function r(){c&&o&&(c=!1,o.length?a=o.concat(a):h=-1,a.length&&s())}function s(){if(!c){var e=setTimeout(r);c=!0;for(var t=a.length;t;){for(o=a,a=[];++h<t;)o&&o[h].run();h=-1,t=a.length}o=null,c=!1,clearTimeout(e)}}function l(e,t){this.fun=e,this.array=t}function i(){}var o,u=t.exports={},a=[],c=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new l(e,t)),1!==a.length||c||setTimeout(s,0)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],31:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],32:[function(e,t,n){(function(t,r){function s(e,t){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),u(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function i(e,t){return e}function o(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&b(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var s=t.inspect(r,e);return v(s)||(s=u(e,s,r)),s}var l=a(e,t);if(l)return l;var i=Object.keys(t),m=o(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),R(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return c(t);if(0===i.length){if(b(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(y(t))return e.stylize(Date.prototype.toString.call(t),"date");if(R(t))return c(t)}var T="",_=!1,C=["{","}"];if(f(t)&&(_=!0,C=["[","]"]),b(t)){var S=t.name?": "+t.name:"";T=" [Function"+S+"]"}if(E(t)&&(T=" "+RegExp.prototype.toString.call(t)),y(t)&&(T=" "+Date.prototype.toUTCString.call(t)),R(t)&&(T=" "+c(t)),0===i.length&&(!_||0==t.length))return C[0]+T+C[1];if(0>r)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var A;return A=_?h(e,t,r,m,i):i.map(function(n){return d(e,t,r,m,n,_)}),e.seen.pop(),p(A,T,C)}function a(e,t){if(S(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return _(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,s){for(var l=[],i=0,o=t.length;o>i;++i)O(t,String(i))?l.push(d(e,t,n,r,String(i),!0)):l.push("");return s.forEach(function(s){s.match(/^\d+$/)||l.push(d(e,t,n,r,s,!0))}),l}function d(e,t,n,r,s,l){var i,o,a;if(a=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},a.get?o=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(o=e.stylize("[Setter]","special")),O(r,s)||(i="["+s+"]"),o||(e.seen.indexOf(a.value)<0?(o=g(n)?u(e,a.value,null):u(e,a.value,n-1),o.indexOf("\n")>-1&&(o=l?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=e.stylize("[Circular]","special")),S(i)){if(l&&s.match(/^\d+$/))return o;i=JSON.stringify(""+s),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+o}function p(e,t,n){var r=0,s=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return s>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function f(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function T(e){return null==e}function _(e){return"number"==typeof e}function v(e){return"string"==typeof e}function C(e){return"symbol"==typeof e}function S(e){return void 0===e}function E(e){return A(e)&&"[object RegExp]"===w(e)}function A(e){return"object"==typeof e&&null!==e}function y(e){return A(e)&&"[object Date]"===w(e)}function R(e){return A(e)&&("[object Error]"===w(e)||e instanceof Error)}function b(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function w(e){return Object.prototype.toString.call(e)}function N(e){return 10>e?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var x=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,l=r.length,i=String(e).replace(x,function(e){if("%%"===e)return"%";if(n>=l)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),o=r[n];l>n;o=r[++n])i+=g(o)||!A(o)?" "+o:" "+s(o);return i},n.deprecate=function(e,s){function l(){if(!i){if(t.throwDeprecation)throw new Error(s);t.traceDeprecation?console.trace(s):console.error(s),i=!0}return e.apply(this,arguments)}if(S(r.process))return function(){return n.deprecate(e,s).apply(this,arguments)};if(t.noDeprecation===!0)return e;var i=!1;return l};var U,M={};n.debuglog=function(e){if(S(U)&&(U=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(U)){var r=t.pid;M[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else M[e]=function(){};return M[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=f,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=T,n.isNumber=_,n.isString=v,n.isSymbol=C,n.isUndefined=S,n.isRegExp=E,n.isObject=A,n.isDate=y,n.isError=R,n.isFunction=b,n.isPrimitive=I,n.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",D(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!A(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":31,_process:30,inherits:29}],33:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function s(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var s=0,l=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(s++,"%c"===e&&(l=s))}),e.splice(l,0,r),e}function l(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function o(){var e;try{e=n.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=l,n.formatArgs=s,n.save=i,n.load=o,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(o())},{"./debug":34}],34:[function(e,t,n){function r(){return n.colors[c++%n.colors.length]}function s(e){function t(){}function s(){var e=s,t=+new Date,l=t-(a||t);e.diff=l,e.prev=a,e.curr=t,a=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var i=Array.prototype.slice.call(arguments);i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var o=0;i[0]=i[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;o++;var s=n.formatters[r];if("function"==typeof s){var l=i[o];t=s.call(e,l),i.splice(o,1),o--}return t}),"function"==typeof n.formatArgs&&(i=n.formatArgs.apply(e,i));var u=s.log||n.log||console.log.bind(console);u.apply(e,i)}t.enabled=!1,s.enabled=!0;var l=n.enabled(e)?s:t;return l.namespace=e,l}function l(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,s=0;r>s;s++)t[s]&&(e=t[s].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function i(){n.enable("")}function o(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=s,n.coerce=u,n.disable=i,n.enable=l,n.enabled=o,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var a,c=0},{ms:35}],35:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function s(e){return e>=c?Math.round(e/c)+"d":e>=a?Math.round(e/a)+"h":e>=u?Math.round(e/u)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}function l(e){return i(e,c,"day")||i(e,a,"hour")||i(e,u,"minute")||i(e,o,"second")||e+" ms"}function i(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var o=1e3,u=60*o,a=60*u,c=24*a,h=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?l(e):s(e)}},{}],36:[function(e,t,n){(function(n){"use strict";function r(e){function t(e){return function(){throw new Error("rtcninja: WebRTC not supported, missing "+e+" [browser: "+i.name+" "+i.version+"]")}}if(v&&i.chrome&&_>=32||i.android&&i.chrome&&_>=39||v&&i.opera&&_>=27||i.android&&i.opera&&_>=24||i.android&&i.webkit&&!i.chrome&&_>=37||l.webkitGetUserMedia&&s.webkitRTCPeerConnection)C=!0,a=l.webkitGetUserMedia.bind(l),c=s.webkitRTCPeerConnection,h=s.RTCSessionDescription,d=s.RTCIceCandidate,p=s.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=function(e,t){return e.src=URL.createObjectURL(t),e},g=!0,T=!1;else if(v&&i.firefox&&_>=22||i.android&&i.firefox&&_>=33||l.mozGetUserMedia&&s.mozRTCPeerConnection)C=!0,a=l.mozGetUserMedia.bind(l),c=s.mozRTCPeerConnection,h=s.mozRTCSessionDescription,d=s.mozRTCIceCandidate,p=s.MediaStreamTrack,m=function(e,t){return e.src=URL.createObjectURL(t),e},g=!1,T=!1;else if(e.plugin&&"function"==typeof e.plugin.isRequired&&e.plugin.isRequired()&&"function"==typeof e.plugin.isInstalled&&e.plugin.isInstalled()){var n=e.plugin["interface"];C=!0,a=n.getUserMedia,c=n.RTCPeerConnection,h=n.RTCSessionDescription,d=n.RTCIceCandidate,p=n.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=n.attachMediaStream,g=n.canRenegotiate,T=!0}else l.getUserMedia&&s.RTCPeerConnection&&(C=!0,a=l.getUserMedia.bind(l),c=s.RTCPeerConnection,h=s.RTCSessionDescription,d=s.RTCIceCandidate,p=s.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=s.attachMediaStream||function(e,t){return e.src=URL.createObjectURL(t),e},g=!0,T=!1);return r.hasWebRTC=function(){return C},a?r.getUserMedia=function(e,t,n){o("getUserMedia() | constraints: %o",e);try{a(e,function(e){o("getUserMedia() | success"),t&&t(e)},function(e){o("getUserMedia() | error:",e),n&&n(e)})}catch(r){u("getUserMedia() | error:",r),n&&n(r)}}:r.getUserMedia=function(e,n,r){u("getUserMedia() | WebRTC not supported"),r?r(new Error("rtcninja: WebRTC not supported, missing getUserMedia [browser: "+i.name+" "+i.version+"]")):t("getUserMedia")},r.RTCPeerConnection=c||t("RTCPeerConnection"),r.RTCSessionDescription=h||t("RTCSessionDescription"),r.RTCIceCandidate=d||t("RTCIceCandidate"),r.MediaStreamTrack=p||t("MediaStreamTrack"),r.getMediaDevices=f,r.attachMediaStream=m||t("attachMediaStream"),r.canRenegotiate=g,r.closeMediaStream=function(e){if(e)try{o("closeMediaStream() | calling stop() on all the MediaStreamTrack");var t,n,r;if(e.getTracks)for(t=e.getTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop();else{for(t=e.getAudioTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop();for(t=e.getVideoTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop()}}catch(s){"function"!=typeof e.stop&&"object"!=typeof e.stop||(o("closeMediaStream() | calling stop() on the MediaStream"),e.stop())}},r.fixPeerConnectionConfig=function(e){var t,n,r,s,l;for(Array.isArray(e.iceServers)||(e.iceServers=[]),t=0,n=e.iceServers.length;n>t;t+=1)r=e.iceServers[t],s=r.hasOwnProperty("urls"),l=r.hasOwnProperty("url"),"object"==typeof r&&(s&&!l?r.url=Array.isArray(r.urls)?r.urls[0]:r.urls:!s&&l&&(r.urls=Array.isArray(r.url)?r.url.slice():r.url),l&&Array.isArray(r.url)&&(r.url=r.url[0]))},r.fixRTCOfferOptions=function(e){e=e||{},T?(e.hasOwnProperty("offerToReceiveAudio")&&(e.mandatory=e.mandatory||{},e.mandatory.OfferToReceiveAudio=!!e.offerToReceiveAudio),e.hasOwnProperty("offerToReceiveVideo")&&(e.mandatory=e.mandatory||{},e.mandatory.OfferToReceiveVideo=!!e.offerToReceiveVideo)):(e.mandatory&&e.mandatory.hasOwnProperty("OfferToReceiveAudio")&&(e.offerToReceiveAudio=e.mandatory.OfferToReceiveAudio?1:0),e.mandatory&&e.mandatory.hasOwnProperty("OfferToReceiveVideo")&&(e.offerToReceiveVideo=e.mandatory.OfferToReceiveVideo?1:0),delete e.mandatory)},r}t.exports=r;var s,l,i=e("bowser"),o=e("debug")("rtcninja:Adapter"),u=e("debug")("rtcninja:ERROR:Adapter"),a=null,c=null,h=null,d=null,p=null,f=null,m=null,g=!1,T=!1,_=Number(i.version)||0,v=!(i.mobile||i.tablet&&!(i.msie&&_>=10)),C=!1;u.log=console.warn.bind(console),s=n.window||n,l=s.navigator||{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bowser:40,debug:33}],37:[function(e,t,n){"use strict";function r(e,t){h("new | [pcConfig:%o, pcConstraints:%o]",e,t),s.call(this,e),this.pcConstraints=t,this.ourLocalDescription=null,this.ourSignalingState=null,this.ourIceConnectionState=null,this.ourIceGatheringState=null,this.timerGatheringTimeout=null,this.timerGatheringTimeoutAfterRelay=null,this.ignoreIceGathering=!1,this.closed=!1,o.call(this),a.call(this)}function s(e){this.pcConfig=c(!0,e),p.fixPeerConnectionConfig(this.pcConfig),this.options={iceTransportsRelay:"relay"===this.pcConfig.iceTransports,iceTransportsNone:"none"===this.pcConfig.iceTransports,gatheringTimeout:this.pcConfig.gatheringTimeout,gatheringTimeoutAfterRelay:this.pcConfig.gatheringTimeoutAfterRelay},delete this.pcConfig.gatheringTimeout,delete this.pcConfig.gatheringTimeoutAfterRelay,h("setConfigurationAndOptions | processed pcConfig: %o",this.pcConfig)}function l(){return this.closed||this.pc&&"closed"===this.pc.iceConnectionState}function i(){var e=this,t=this.pc;t.onnegotiationneeded=function(t){l.call(e)||(h("onnegotiationneeded()"),e.onnegotiationneeded&&e.onnegotiationneeded(t))},t.onicecandidate=function(t){var n,r,s;if(!l.call(e)&&!e.ignoreIceGathering&&!e.options.iceTransportsNone)if(n=t.candidate){if(r=f.REGEXP_RELAY_CANDIDATE.test(n.candidate),e.options.iceTransportsRelay&&!r)return;r&&!e.timerGatheringTimeoutAfterRelay&&"number"==typeof e.options.gatheringTimeoutAfterRelay&&(h("onicecandidate() | first relay candidate found, ending gathering in %d ms",e.options.gatheringTimeoutAfterRelay),
e.timerGatheringTimeoutAfterRelay=setTimeout(function(){l.call(e)||(h("forced end of candidates after timeout"),delete e.timerGatheringTimeoutAfterRelay,clearTimeout(e.timerGatheringTimeout),delete e.timerGatheringTimeout,e.ignoreIceGathering=!0,e.onicecandidate&&e.onicecandidate({candidate:null},null))},e.options.gatheringTimeoutAfterRelay)),s=new p.RTCIceCandidate({sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,candidate:n.candidate}),null===m.normalizeCandidate&&(f.REGEXP_NORMALIZED_CANDIDATE.test(n.candidate)?m.normalizeCandidate=!1:(h('onicecandidate() | normalizing ICE candidates syntax (remove "a=" and "\\r\\n")'),m.normalizeCandidate=!0)),m.normalizeCandidate&&(s.candidate=n.candidate.replace(f.REGEXP_FIX_CANDIDATE,"")),h("onicecandidate() | m%d(%s) %s",s.sdpMLineIndex,s.sdpMid||"no mid",s.candidate),e.onicecandidate&&e.onicecandidate(t,s)}else h("onicecandidate() | end of candidates"),clearTimeout(e.timerGatheringTimeout),delete e.timerGatheringTimeout,clearTimeout(e.timerGatheringTimeoutAfterRelay),delete e.timerGatheringTimeoutAfterRelay,e.onicecandidate&&e.onicecandidate(t,null)},t.onaddstream=function(t){l.call(e)||(h("onaddstream() | stream: %o",t.stream),e.onaddstream&&e.onaddstream(t,t.stream))},t.onremovestream=function(t){l.call(e)||(h("onremovestream() | stream: %o",t.stream),e.onremovestream&&e.onremovestream(t,t.stream))},t.ondatachannel=function(t){l.call(e)||(h("ondatachannel() | datachannel: %o",t.channel),e.ondatachannel&&e.ondatachannel(t,t.channel))},t.onsignalingstatechange=function(n){t.signalingState!==e.ourSignalingState&&(h("onsignalingstatechange() | signalingState: %s",t.signalingState),e.ourSignalingState=t.signalingState,e.onsignalingstatechange&&e.onsignalingstatechange(n,t.signalingState))},t.oniceconnectionstatechange=function(n){t.iceConnectionState!==e.ourIceConnectionState&&(h("oniceconnectionstatechange() | iceConnectionState: %s",t.iceConnectionState),e.ourIceConnectionState=t.iceConnectionState,e.oniceconnectionstatechange&&e.oniceconnectionstatechange(n,t.iceConnectionState))},t.onicegatheringstatechange=function(n){l.call(e)||t.iceGatheringState!==e.ourIceGatheringState&&(h("onicegatheringstatechange() | iceGatheringState: %s",t.iceGatheringState),e.ourIceGatheringState=t.iceGatheringState,e.onicegatheringstatechange&&e.onicegatheringstatechange(n,t.iceGatheringState))},t.onidentityresult=function(t){l.call(e)||(h("onidentityresult()"),e.onidentityresult&&e.onidentityresult(t))},t.onpeeridentity=function(t){l.call(e)||(h("onpeeridentity()"),e.onpeeridentity&&e.onpeeridentity(t))},t.onidpassertionerror=function(t){l.call(e)||(h("onidpassertionerror()"),e.onidpassertionerror&&e.onidpassertionerror(t))},t.onidpvalidationerror=function(t){l.call(e)||(h("onidpvalidationerror()"),e.onidpvalidationerror&&e.onidpvalidationerror(t))}}function o(){this.pcConstraints?this.pc=new p.RTCPeerConnection(this.pcConfig,this.pcConstraints):this.pc=new p.RTCPeerConnection(this.pcConfig),i.call(this)}function u(){var e=this.pc,t=this.options,n=null;return e.localDescription?(t.iceTransportsRelay?n=e.localDescription.sdp.replace(f.REGEXP_SDP_NON_RELAY_CANDIDATES,""):t.iceTransportsNone&&(n=e.localDescription.sdp.replace(f.REGEXP_SDP_CANDIDATES,"")),this.ourLocalDescription=new p.RTCSessionDescription({type:e.localDescription.type,sdp:n||e.localDescription.sdp}),this.ourLocalDescription):(this.ourLocalDescription=null,null)}function a(){var e=this;Object.defineProperties(this,{peerConnection:{get:function(){return e.pc}},signalingState:{get:function(){return e.pc.signalingState}},iceConnectionState:{get:function(){return e.pc.iceConnectionState}},iceGatheringState:{get:function(){return e.pc.iceGatheringState}},localDescription:{get:function(){return u.call(e)}},remoteDescription:{get:function(){return e.pc.remoteDescription}},peerIdentity:{get:function(){return e.pc.peerIdentity}}})}t.exports=r;var c=e("merge"),h=e("debug")("rtcninja:RTCPeerConnection"),d=e("debug")("rtcninja:ERROR:RTCPeerConnection"),p=e("./Adapter"),f={REGEXP_NORMALIZED_CANDIDATE:new RegExp(/^candidate:/i),REGEXP_FIX_CANDIDATE:new RegExp(/(^a=|\r|\n)/gi),REGEXP_RELAY_CANDIDATE:new RegExp(/ relay /i),REGEXP_SDP_CANDIDATES:new RegExp(/^a=candidate:.*\r\n/gim),REGEXP_SDP_NON_RELAY_CANDIDATES:new RegExp(/^a=candidate:(.(?!relay ))*\r\n/gim)},m={normalizeCandidate:null};d.log=console.warn.bind(console),r.prototype.createOffer=function(e,t,n){h("createOffer()");var r=this;p.fixRTCOfferOptions(n),this.pc.createOffer(function(t){l.call(r)||(h("createOffer() | success"),e&&e(t))},function(e){l.call(r)||(d("createOffer() | error:",e),t&&t(e))},n)},r.prototype.createAnswer=function(e,t,n){h("createAnswer()");var r=this;this.pc.createAnswer(function(t){l.call(r)||(h("createAnswer() | success"),e&&e(t))},function(e){l.call(r)||(d("createAnswer() | error:",e),t&&t(e))},n)},r.prototype.setLocalDescription=function(e,t,n){function r(){"number"==typeof s.options.gatheringTimeout&&"complete"!==s.pc.iceGatheringState&&(h("setLocalDescription() | ending gathering in %d ms (gatheringTimeout option)",s.options.gatheringTimeout),s.timerGatheringTimeout=setTimeout(function(){l.call(s)||(h("forced end of candidates after gatheringTimeout timeout"),delete s.timerGatheringTimeout,clearTimeout(s.timerGatheringTimeoutAfterRelay),delete s.timerGatheringTimeoutAfterRelay,s.ignoreIceGathering=!0,s.onicecandidate&&s.onicecandidate({candidate:null},null))},s.options.gatheringTimeout))}h("setLocalDescription()");var s=this;this.pc.setLocalDescription(e,function(){l.call(s)||(h("setLocalDescription() | success"),clearTimeout(s.timerGatheringTimeout),delete s.timerGatheringTimeout,clearTimeout(s.timerGatheringTimeoutAfterRelay),delete s.timerGatheringTimeoutAfterRelay,r(),t&&t())},function(e){l.call(s)||(d("setLocalDescription() | error:",e),n&&n(e))}),this.ignoreIceGathering=!1},r.prototype.setRemoteDescription=function(e,t,n){h("setRemoteDescription()");var r=this;this.pc.setRemoteDescription(e,function(){l.call(r)||(h("setRemoteDescription() | success"),t&&t())},function(e){l.call(r)||(d("setRemoteDescription() | error:",e),n&&n(e))})},r.prototype.updateIce=function(e){h("updateIce() | pcConfig: %o",e),s.call(this,e),this.pc.updateIce(this.pcConfig),this.ignoreIceGathering=!1},r.prototype.addIceCandidate=function(e,t,n){h("addIceCandidate() | candidate: %o",e);var r=this;this.pc.addIceCandidate(e,function(){l.call(r)||(h("addIceCandidate() | success"),t&&t())},function(e){l.call(r)||(d("addIceCandidate() | error:",e),n&&n(e))})},r.prototype.getConfiguration=function(){return h("getConfiguration()"),this.pc.getConfiguration()},r.prototype.getLocalStreams=function(){return h("getLocalStreams()"),this.pc.getLocalStreams()},r.prototype.getRemoteStreams=function(){return h("getRemoteStreams()"),this.pc.getRemoteStreams()},r.prototype.getStreamById=function(e){return h("getStreamById() | streamId: %s",e),this.pc.getStreamById(e)},r.prototype.addStream=function(e){h("addStream() | stream: %s",e),this.pc.addStream(e)},r.prototype.removeStream=function(e){h("removeStream() | stream: %o",e),this.pc.removeStream(e)},r.prototype.close=function(){h("close()"),this.closed=!0,clearTimeout(this.timerGatheringTimeout),delete this.timerGatheringTimeout,clearTimeout(this.timerGatheringTimeoutAfterRelay),delete this.timerGatheringTimeoutAfterRelay,this.pc.close()},r.prototype.createDataChannel=function(){return h("createDataChannel()"),this.pc.createDataChannel.apply(this.pc,arguments)},r.prototype.createDTMFSender=function(e){return h("createDTMFSender()"),this.pc.createDTMFSender(e)},r.prototype.getStats=function(){return h("getStats()"),this.pc.getStats.apply(this.pc,arguments)},r.prototype.setIdentityProvider=function(){return h("setIdentityProvider()"),this.pc.setIdentityProvider.apply(this.pc,arguments)},r.prototype.getIdentityAssertion=function(){return h("getIdentityAssertion()"),this.pc.getIdentityAssertion()},r.prototype.reset=function(e){h("reset() | pcConfig: %o",e);var t=this.pc;t.onnegotiationneeded=null,t.onicecandidate=null,t.onaddstream=null,t.onremovestream=null,t.ondatachannel=null,t.onsignalingstatechange=null,t.oniceconnectionstatechange=null,t.onicegatheringstatechange=null,t.onidentityresult=null,t.onpeeridentity=null,t.onidpassertionerror=null,t.onidpvalidationerror=null,clearTimeout(this.timerGatheringTimeout),delete this.timerGatheringTimeout,clearTimeout(this.timerGatheringTimeoutAfterRelay),delete this.timerGatheringTimeoutAfterRelay,h("reset() | closing current peerConnection"),t.close(),s.call(this,e),o.call(this)}},{"./Adapter":36,debug:33,merge:41}],38:[function(e,t,n){"use strict";function r(e){var t=u(e||{});return c=!0,r.RTCPeerConnection=a,r.getUserMedia=t.getUserMedia,r.RTCSessionDescription=t.RTCSessionDescription,r.RTCIceCandidate=t.RTCIceCandidate,r.MediaStreamTrack=t.MediaStreamTrack,r.getMediaDevices=t.getMediaDevices,r.attachMediaStream=t.attachMediaStream,r.closeMediaStream=t.closeMediaStream,r.canRenegotiate=t.canRenegotiate,t.hasWebRTC()?(l("WebRTC supported"),!0):(i("WebRTC not supported"),!1)}t.exports=r;var s=e("bowser"),l=e("debug")("rtcninja"),i=e("debug")("rtcninja:ERROR"),o=e("./version"),u=e("./Adapter"),a=e("./RTCPeerConnection"),c=!1;i.log=console.warn.bind(console),l("version %s",o),l("detected browser: %s %s [mobile:%s, tablet:%s, android:%s, ios:%s]",s.name,s.version,!!s.mobile,!!s.tablet,!!s.android,!!s.ios),r.hasWebRTC=function(){return c||r(),u.hasWebRTC()},Object.defineProperty(r,"version",{get:function(){return o}}),Object.defineProperty(r,"called",{get:function(){return c}}),r.debug=e("debug"),r.browser=s},{"./Adapter":36,"./RTCPeerConnection":37,"./version":39,bowser:40,debug:33}],39:[function(e,t,n){"use strict";t.exports=e("../package.json").version},{"../package.json":42}],40:[function(t,n,r){!function(t,r){"undefined"!=typeof n&&n.exports?n.exports=r():"function"==typeof e&&e.amd?e(r):this[t]=r()}("bowser",function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function r(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var s,l=n(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),o=!i&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),a=!u&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),h=/silk/i.test(e),d=/sailfish/i.test(e),p=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),g=!m&&/windows/i.test(e),T=!l&&!h&&/macintosh/i.test(e),_=!o&&!d&&!p&&!f&&/linux/i.test(e),v=n(/edge\/(\d+(\.\d+)?)/i),C=n(/version\/(\d+(\.\d+)?)/i),S=/tablet/i.test(e),E=!S&&/[^-]mobi/i.test(e),A=/xbox/i.test(e);/opera|opr|opios/i.test(e)?s={name:"Opera",opera:t,version:C||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?s={name:"Opera Coast",coast:t,version:C||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?s={name:"Yandex Browser",yandexbrowser:t,version:C||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?s={name:"UC Browser",ucbrowser:t,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?s={name:"Maxthon",maxthon:t,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?s={name:"Epiphany",epiphany:t,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?s={name:"Puffin",puffin:t,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?s={name:"Sleipnir",sleipnir:t,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?s={name:"K-Meleon",kMeleon:t,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(s={name:"Windows Phone",windowsphone:t},v?(s.msedge=t,s.version=v):(s.msie=t,s.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?s={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?s={name:"Chrome",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?s={name:"Microsoft Edge",msedge:t,version:v}:/vivaldi/i.test(e)?s={name:"Vivaldi",vivaldi:t,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||C}:d?s={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?s={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(s={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(s.firefoxos=t)):h?s={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?s={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?s={name:"SlimerJS",slimer:t,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?s={name:"BlackBerry",blackberry:t,version:C||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(s={name:"WebOS",webos:t,version:C||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(s.touchpad=t)):/bada/i.test(e)?s={name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:p?s={name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||C}:/qupzilla/i.test(e)?s={name:"QupZilla",qupzilla:t,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||C}:/chromium/i.test(e)?s={name:"Chromium",chromium:t,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||C}:/chrome|crios|crmo/i.test(e)?s={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?s={name:"Android",version:C}:/safari|applewebkit/i.test(e)?(s={name:"Safari",safari:t},C&&(s.version=C)):l?(s={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},C&&(s.version=C)):s=/googlebot/i.test(e)?{name:"Googlebot",googlebot:t,version:n(/googlebot\/(\d+(\.\d+))/i)||C}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!s.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(s.name=s.name||"Blink",s.blink=t):(s.name=s.name||"Webkit",s.webkit=t),!s.version&&C&&(s.version=C)):!s.opera&&/gecko\//i.test(e)&&(s.name=s.name||"Gecko",s.gecko=t,s.version=s.version||n(/gecko\/(\d+(\.\d+)?)/i)),s.msedge||!o&&!s.silk?l?(s[l]=t,s.ios=t):T?s.mac=t:A?s.xbox=t:g?s.windows=t:_&&(s.linux=t):s.android=t;var y="";s.windowsphone?y=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(y=n(/os (\d+([_\s]\d+)*) like mac os x/i),y=y.replace(/[_\s]/g,".")):o?y=n(/android[ \/-](\d+(\.\d+)*)/i):s.webos?y=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):s.blackberry?y=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):s.bada?y=n(/bada\/(\d+(\.\d+)*)/i):s.tizen&&(y=n(/tizen[\/\s](\d+(\.\d+)*)/i)),y&&(s.osversion=y);var R=y.split(".")[0];return S||a||"ipad"==l||o&&(3==R||R>=4&&!E)||s.silk?s.tablet=t:(E||"iphone"==l||"ipod"==l||o||u||s.blackberry||s.webos||s.bada)&&(s.mobile=t),s.msedge||s.msie&&s.version>=10||s.yandexbrowser&&s.version>=15||s.vivaldi&&s.version>=1||s.chrome&&s.version>=20||s.firefox&&s.version>=20||s.safari&&s.version>=6||s.opera&&s.version>=10||s.ios&&s.osversion&&s.osversion.split(".")[0]>=6||s.blackberry&&s.version>=10.1?s.a=t:s.msie&&s.version<10||s.chrome&&s.version<20||s.firefox&&s.version<20||s.safari&&s.version<6||s.opera&&s.version<10||s.ios&&s.osversion&&s.osversion.split(".")[0]<6?s.c=t:s.x=t,s}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n._detect=e,n})},{}],41:[function(e,t,n){!function(e){function n(e,t){if("object"!==s(e))return t;for(var r in t)"object"===s(e[r])&&"object"===s(t[r])?e[r]=n(e[r],t[r]):e[r]=t[r];return e}function r(e,t,r){var i=r[0],o=r.length;(e||"object"!==s(i))&&(i={});for(var u=0;o>u;++u){var a=r[u],c=s(a);if("object"===c)for(var h in a){var d=e?l.clone(a[h]):a[h];t?i[h]=n(i[h],d):i[h]=d}}return i}function s(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var l=function(e){return r(e===!0,!1,arguments)},i="merge";l.recursive=function(e){return r(e===!0,!0,arguments)},l.clone=function(e){var t,n,r=e,i=s(e);if("array"===i)for(r=[],n=e.length,t=0;n>t;++t)r[t]=l.clone(e[t]);else if("object"===i){r={};for(t in e)r[t]=l.clone(e[t])}return r},e?t.exports=l:window[i]=l}("object"==typeof t&&t&&"object"==typeof t.exports&&t.exports)},{}],42:[function(e,t,n){t.exports={name:"rtcninja",version:"0.6.7",description:"WebRTC API wrapper to deal with different browsers",author:{name:"Iñaki Baz Castillo",email:"inaki.baz@eface2face.com",url:"http://eface2face.com"},contributors:[{name:"Jesús Pérez",email:"jesus.perez@eface2face.com"}],license:"MIT",main:"lib/rtcninja.js",homepage:"https://github.com/eface2face/rtcninja.js",repository:{type:"git",url:"git+https://github.com/eface2face/rtcninja.js.git"},keywords:["webrtc"],engines:{node:">=0.10.32"},dependencies:{bowser:"^1.2.0",debug:"^2.2.0",merge:"^1.2.0"},devDependencies:{browserify:"^13.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-expect-file":"0.0.7","gulp-filelog":"^0.4.1","gulp-header":"^1.8.2","gulp-jscs":"^3.0.2","gulp-jscs-stylish":"^1.4.0","gulp-jshint":"^2.0.1","gulp-rename":"^1.2.2","gulp-uglify":"^1.5.3","jshint-stylish":"^2.2.0","vinyl-source-stream":"^1.1.0"},readme:'# rtcninja.js <img src="http://www.pubnub.com/blog/wp-content/uploads/2014/01/google-webrtc-logo.png" height="30" width="30">\n\nWebRTC API wrapper to deal with different browsers transparently, [eventually](http://iswebrtcreadyyet.com/) this library shouldn\'t be needed. We only have to wait until W3C group in charge [finishes the specification](https://tools.ietf.org/wg/rtcweb/) and the different browsers implement it correctly :sweat_smile:.\n\n<img src="http://images4.fanpop.com/image/photos/21800000/browser-fight-google-chrome-21865454-600-531.jpg" height="250" width="250">\n\nSupported environments:\n* [Google Chrome](https://www.google.com/chrome/browser/desktop/index.html) (desktop & mobile)\n* [Google Canary](https://www.google.com/chrome/browser/canary.html) (desktop & mobile)\n* [Mozilla Firefox](https://www.mozilla.org/en-GB/firefox/new) (desktop & mobile)\n* [Firefox Nigthly](https://nightly.mozilla.org/) (desktop & mobile)\n* [Opera](http://www.opera.com/)\n* [Vivaldi](https://vivaldi.com/)\n* [CrossWalk](https://crosswalk-project.org/)\n* [Cordova](http://cordova.apache.org/): iOS support, you only have to use our plugin [following these steps](https://github.com/eface2face/cordova-plugin-iosrtc#usage).\n* [NW.js](https://github.com/nwjs/nw.js/)\n* [Electron](https://github.com/atom/electron)\n\n\n## Installation\n\n### **npm**:\n\n```bash\n$ npm install rtcninja\n```\n\nand then:\n\n```javascript\nvar rtcninja = require(\'rtcninja\');\n```\n\n### **bower**:\n\n```bash\n$ bower install rtcninja\n```\n\n\n## Browserified library\n\nTake a browserified version of the library from the `dist/` folder:\n\n* `dist/rtcninja.js`: The uncompressed version.\n* `dist/rtcninja.min.js`: The compressed production-ready version.\n\nThey expose the global `window.rtcninja` module.\n\n\n## Usage\n\nIn the [examples](./examples/) folder we provide a complete one.\n\n```javascript\n// Must first call it.\nrtcninja();\n\n// Then check.\nif (rtcninja.hasWebRTC()) {\n    // Do something.\n}\nelse {\n    // Do something.\n}\n```\n\n\n## Documentation\n\nYou can read the full [API documentation](docs/index.md) in the docs folder.\n\n\n## Issues\n\nhttps://github.com/eface2face/rtcninja.js/issues\n\n\n## Developer guide\n\n* Create a branch with a name including your user and a meaningful word about the fix/feature you\'re going to implement, ie: "jesusprubio/fixstuff"\n* Use [GitHub pull requests](https://help.github.com/articles/using-pull-requests).\n* Conventions:\n * We use [JSHint](http://jshint.com/) and [Crockford\'s Styleguide](http://javascript.crockford.com/code.html).\n * Please run `grunt lint` to be sure your code fits with them.\n\n\n### Debugging\n\nThe library includes the Node [debug](https://github.com/visionmedia/debug) module. In order to enable debugging:\n\nIn Node set the `DEBUG=rtcninja*` environment variable before running the application, or set it at the top of the script:\n\n```javascript\nprocess.env.DEBUG = \'rtcninja*\';\n```\n\nIn the browser run `rtcninja.debug.enable(\'rtcninja*\');` and reload the page. Note that the debugging settings are stored into the browser LocalStorage. To disable it run `rtcninja.debug.disable(\'rtcninja*\');`.\n\n\n## Copyright & License\n\n* eFace2Face Inc.\n* [MIT](./LICENSE)\n',readmeFilename:"README.md",gitHead:"d36b02d0503ca152771692935a4096130f28dc5d",bugs:{url:"https://github.com/eface2face/rtcninja.js/issues"},_id:"rtcninja@0.6.7",scripts:{},_shasum:"f7c8855f2c0e41ae08c638375bad1dc977369ec2",_from:"rtcninja@>=0.6.7 <0.7.0"}},{}],43:[function(e,t,n){var r=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{push:"invalid",names:["value"]}]};Object.keys(r).forEach(function(e){var t=r[e];t.forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],44:[function(e,t,n){var r=e("./parser"),s=e("./writer");n.write=s,n.parse=r.parse,n.parseFmtpConfig=r.parseFmtpConfig,n.parsePayloads=r.parsePayloads,n.parseRemoteCandidates=r.parseRemoteCandidates},{"./parser":45,"./writer":46}],45:[function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},s=function(e,t,n,s){if(s&&!n)t[s]=r(e[1]);else for(var l=0;l<n.length;l+=1)null!=e[l+1]&&(t[n[l]]=r(e[l+1]))},l=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var l=e.push?{}:r?t[e.name]:t;s(n.match(e.reg),l,e.names,e.name),e.push&&t[e.push].push(l)},i=e("./grammar"),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);n.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach(function(e){var t=e[0],s=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var o=0;o<(i[t]||[]).length;o+=1){var u=i[t][o];if(u.reg.test(s))return l(u,r,s)}}),t.media=n,t};var u=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length&&(e[n[0]]=r(n[1])),e};n.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(u,{})},n.parsePayloads=function(e){return e.split(" ").map(Number)},n.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),s=0;s<n.length;s+=3)t.push({component:n[s],ip:n[s+1],port:n[s+2]});return t}},{"./grammar":43}],46:[function(e,t,n){var r=e("./grammar"),s=/%[sdv%]/g,l=function(e){var t=1,n=arguments,r=n.length;return e.replace(s,function(e){if(t>=r)return e;var s=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},i=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,s=[e+"="+r];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?s.push(n[t.name][o]):s.push(n[t.names[i]])}else s.push(n[t.name]);return l.apply(null,s)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],u=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||o,s=t.innerOrder||u,l=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?l.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){l.push(i(t,n,e))})})}),e.media.forEach(function(e){l.push(i("m",r.m[0],e)),s.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?l.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){l.push(i(t,n,e))})})})}),l.join("\r\n")+"\r\n"}},{"./grammar":43}],47:[function(e,t,n){t.exports={name:"jssip",title:"JsSIP",description:"the Javascript SIP library",version:"2.0.1",homepage:"http://jssip.net",author:"José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (https://github.com/ibc)","Saúl Ibarra Corretgé <saghul@gmail.com> (https://github.com/saghul)"],main:"lib/JsSIP.js",keywords:["sip","websocket","webrtc","node","browser","library"],license:"MIT",repository:{type:"git",url:"https://github.com/versatica/JsSIP.git"},bugs:{url:"https://github.com/versatica/JsSIP/issues"},dependencies:{debug:"^2.2.0",rtcninja:"^0.6.7","sdp-transform":"^1.6.2"},devDependencies:{browserify:"^13.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-expect-file":"0.0.7","gulp-header":"^1.8.2","gulp-jshint":"^2.0.1","gulp-nodeunit-runner":"^0.2.2","gulp-rename":"^1.2.2","gulp-uglify":"^1.5.3","gulp-util":"^3.0.7",jshint:"^2.9.2","jshint-stylish":"^2.2.0",pegjs:"0.7.0","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"},scripts:{test:"gulp test"}}},{}]},{},[7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],79:[function(require,module,exports){
var _template = require('lodash/string/template');
var _forEach = require('lodash/collection/forEach');
var _assign = require('lodash/object/assign');
var _merge = require('lodash/object/merge');
var _isEqual = require('lodash/lang/isEqual');
var _trim = require('lodash/string/trim');
var _throttle = require('lodash/function/throttle');
var _debounce = require('lodash/function/debounce');

function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
}

function findParent(elem, selector) {

    var firstChar = selector.charAt(0);

    // Get closest match
    for ( ; elem && elem !== document; elem = elem.parentNode ) {
        if ( firstChar === '.' ) {
            if ( elem.classList.contains( selector.substr(1) ) ) {
                return elem;
            }
        } else if ( firstChar === '#' ) {
            if ( elem.id === selector.substr(1) ) {
                return elem;
            }
        } else if ( firstChar === '[' ) {
            if (elem.hasAttribute( selector.substr(1, selector.length - 2))) {
                return elem;
            }
        } else {
            if(elem.nodeName === selector.toUpperCase()){
                return elem;
            }
        }
    }

    return false;

}

function poll(fn, callback, errback, timeout, interval) {
    var endTime = Number(new Date()) + (timeout || 2000);
    interval = interval || 300;

    (function p() {
        // If the condition is met, we're done! 
        if(fn()) {
            callback();
        }
        // If the condition isn't met but the timeout hasn't elapsed, go again
        else if (Number(new Date()) < endTime) {
            setTimeout(p, interval);
        }
        // Didn't match and too much time, reject!
        else {
            errback(new Error('timed out for ' + fn + ': ' + arguments));
        }
    })();
}

module.exports = {
	template: _template,
	forEach: _forEach,
	assign: _assign,
	merge: _merge,
	isEqual: _isEqual,
	trim: _trim,
	throttle: _throttle,
	debounce: debounce,
    poll: poll,
	findParent: findParent
};
},{"lodash/collection/forEach":4,"lodash/function/debounce":6,"lodash/function/throttle":8,"lodash/lang/isEqual":56,"lodash/object/assign":64,"lodash/object/merge":67,"lodash/string/template":69,"lodash/string/trim":71}],80:[function(require,module,exports){
var widget = require('./widget.js');
var api = require('./core.js');

module.exports = widget.module;

},{"./core.js":76,"./widget.js":85}],81:[function(require,module,exports){
var debug = require('./debug');
var cache = {};

module.exports = {
	post: post,
	get: get,
	put: put
};

function post(url, data, cb){

	// debug.log('post request: ', url, data);

	var data = JSON.stringify(data);

	XmlHttpRequest('POST', url, data, function(err, res) {
		debug.log('post respose: ', err, res);

		if(err) return cb(err);

		cb(null, res);
	});
}

function get(selector, url, cb){

	if(selector && cache[selector]) {
		return cb(null, cache[selector]);
	}

	XmlHttpRequest('GET', url, null, function(err, res) {
		if(err) return cb(err);

		if(selector) cache[selector] = res;
		cb(null, res);
	});
}

function put(url, data, cb){

	// debug.log('post request: ', url, data);

	// var data = JSON.stringify(data);

	XmlHttpRequest('PUT', url, data, function(err, res) {
		debug.log('put respose: ', err, res);

		if(err) return cb(err);

		cb(null, res);
	});
}

/**
 * Send request to the server via XMLHttpRequest
 */
function XmlHttpRequest(method, url, data, callback){
	var xhr, response, requestTimer;

	xhr = new XMLHttpRequest();
	xhr.open(method, url, true);

	requestTimer = setTimeout(function(){
		xhr.abort();
	}, 60000);
	
	xhr.onreadystatechange = function() {
		if (xhr.readyState==4){
			clearTimeout(requestTimer);
			if(xhr.response) {
				response = method === 'POST' ? JSON.parse(xhr.response) : xhr.response;
				if(response.error) {
					return callback(response.error);
				}

				callback(null, response);
			}
		}
	};

	if(method === 'POST') {
		xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
	}

	if(data) {
		xhr.send(data);
	} else {
		xhr.send();
	}
}

},{"./debug":77}],82:[function(require,module,exports){
(function (global){
var storage = global.localStorage;
var session = global.sessionStorage;
var prefix = 'swc';
var delimiter = '.';

// Current cache object
var cache = {
	sid: null,
	eventTimestamp: 0,
	msgTimestamp: 0,
	entity: null,
	chat: null
};

module.exports = {
	get: getItem,
	set: setItem,
	remove: removeItem,
	getState: getState,
	saveState: saveState,
	removeState: removeState
};

function getItem(key, location) {
	if(location === 'session') {
		return JSON.parse(session.getItem(prefix+delimiter+key));
	} else {
		return JSON.parse(storage.getItem(prefix+delimiter+key));
	}
}

function setItem(key, value, location) {
	if(location === 'session') {
		session.setItem(prefix+delimiter+key, JSON.stringify(value));
	} else {
		storage.setItem(prefix+delimiter+key, JSON.stringify(value));
	}
	return value;
}

function removeItem(key, location) {
	if(location === 'session') {
		session.removeItem(prefix+delimiter+key);
	} else {
		storage.removeItem(prefix+delimiter+key);
	}
}

/**
 * Get saved property from localStorage or from session cache
 * @param  {String} key      - item key in storage memory
 * @param  {[type]} location - from where to retrieve item. 
 * Could be either "storage" - from localStorage, or "cache" - from session cache
 * @return {String|Object|Function}          - item value
 */
function getState(key, location){
	if(!location) {
		return (cache[key] !== undefined && cache[key] !== null) ? cache[key] : getItem(key);
	} else if(location === 'cache') {
		return cache[key];
	} else {
		return getItem(key, location);
	}
}

function saveState(key, value, location){
	cache[key] = value;
	if(location !== 'cache') {
		setItem(key, value, location);
	}
	return value;
}

function removeState(key, location) {
	delete cache[key];
	removeItem(key);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],83:[function(require,module,exports){
var _ = {};
var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;'
};
var escapeRegexp = new RegExp('[' + Object.keys(escapeMap).join('') + ']', 'g');
_.escape = function(string) {
    if (!string) return '';
    return String(string).replace(escapeRegexp, function(match) {
        return escapeMap[match];
    });
};
exports['email']= function(obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {

 var prefix = defaults.prefix; ;
__p += '\n<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html xmlns="http://www.w3.org/1999/xhtml">\n    <head>\n        <meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />\n        <!--[if !mso]><!-->\n            <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n        <!--<![endif]-->\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title></title>\n        <!--[if (gte mso 9)|(IE)]>\n        <style type="text/css">\n            table {border-collapse: collapse;}\n        </style>\n        <![endif]-->\n        <style type="text/css">\n            /* Basics */\n            body {\n            Margin: 0;\n                padding: 0;\n                min-width: 100%;\n                background-color: #ffffff;\n            }\n            table {\n                border-spacing: 0;\n                font-family: sans-serif;\n                color: #333333;\n            }\n            td {\n                padding: 0;\n            }\n            img {\n                border: 0;\n            }\n            .wrapper {\n                width: 100%;\n                table-layout: fixed;\n                -webkit-text-size-adjust: 100%;\n                -ms-text-size-adjust: 100%;\n                background-color: #F1F1F1;\n            }\n            .webkit {\n                max-width: 500px;\n            }\n            .outer {\n            Margin: 0 auto;\n                height: 100%;\n                width: 95%;\n                max-width: 500px;\n                padding: 10px;\n            }\n            p {\n                Margin: 0;\n            }\n            a {\n                color: #ee6a56;\n                text-decoration: underline;\n            }\n            .h1 {\n                font-size: 21px;\n                font-weight: bold;\n                Margin-bottom: 18px;\n            }\n            .h2 {\n                font-size: 18px;\n                font-weight: bold;\n                Margin-bottom: 12px;\n            }\n             \n            /* One column layout */\n            .one-column .contents {\n                text-align: left;\n                color:#505050;\n                font-family:Arial;\n                font-size:14px;\n                line-height:150%;\n            }\n            .one-column p {\n                font-size: 14px;\n                Margin-bottom: 10px;\n            }\n            .' +
__e( prefix ) +
'-message {\n                display: block;\n                margin-bottom: 10px;\n                padding: 10px;\n                background-color: #FFFFFF;\n                border-bottom: 4px solid #CCCCCC;\n            }\n            .' +
__e( prefix ) +
'-message img {\n                width: 100%;\n                max-width: 500px;\n                height: auto;\n            }\n            .' +
__e( prefix ) +
'-message span {\n                font-weight: bold;\n                color: #999999;\n            }\n            .' +
__e( prefix ) +
'-agent-msg .' +
__e( prefix ) +
'-message-from {\n                color: #555555;\n            }\n            .' +
__e( prefix ) +
'-user-msg .' +
__e( prefix ) +
'-message-from {\n                color: #F75B5D;\n            }\n\n            .' +
__e( prefix ) +
'-message .' +
__e( prefix ) +
'-message-time {\n                position: relative;\n                float: right;\n            }\n            .copyright {\n                margin-top: 5px;\n                font-size: 12px;\n                font-style: italic;\n                color: #CCCCCC;\n                text-align: right;\n            }\n\n        </style>\n    </head>\n    <body>\n        <center class="wrapper">\n            <div class="webkit">\n                <!--[if (gte mso 9)|(IE)]>\n                <table width="500" align="center" cellpadding="0" cellspacing="0" border="0">\n                <tr>\n                <td>\n                <![endif]-->\n                <table class="outer" align="center" cellpadding="0" cellspacing="0" border="0">\n                    <tr>\n                        <td class="one-column">\n                            <table width="100%">\n                                <tr>\n                                    <td class="inner contents">\n                                        ' +
((__t = ( content )) == null ? '' : __t) +
'\n                                    </td>\n                                </tr>\n                            </table>\n                        </td>\n                    </tr>\n                </table>\n                <!--[if (gte mso 9)|(IE)]>\n                </td>\n                </tr>\n                </table>\n                <![endif]-->\n            </div>\n        </center>\n    </body>\n</html>';

}
return __p
}
var _ = {};
var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;'
};
var escapeRegexp = new RegExp('[' + Object.keys(escapeMap).join('') + ']', 'g');
_.escape = function(string) {
    if (!string) return '';
    return String(string).replace(escapeRegexp, function(match) {
        return escapeMap[match];
    });
};
exports['forms']= function(obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="' +
__e( defaults.prefix ) +
'-message ' +
__e( defaults.prefix ) +
'-' +
__e( message.entity ) +
'-msg">\n\t<span class="' +
__e( defaults.prefix ) +
'-message-from">' +
__e( message.from ) +
'</span>\n\t<div class="' +
__e( defaults.prefix ) +
'-message-content" ';
 if(message.entity === "user") { ;
__p += ' style="border-color:\'' +
__e( defaults.styles.primary.backgroundColor ) +
'" ';
 } ;
__p += '>\n\t\t<form id="' +
__e( defaults.prefix ) +
'-' +
__e( form.name ) +
'" name="' +
__e( form.name ) +
'" ';
 if(form.autocomplete){ ;
__p += 'autocomplete="on"';
 } ;
__p += ' data-validate-form="true">\n\t\t\t';
 if(form.description) { ;
__p += '\n\t\t\t\t<p style="margin: 10px 0">' +
((__t = ( frases.FORMS.DESCRIPTIONS[form.description] || form.description )) == null ? '' : __t) +
'</p>\n\t\t\t';
 } ;
__p += '\n\t\t\t';
 _.forEach(form.fields, function(item){ ;
__p += '\n\t\t\t\t';
 if(item.type === 'select') { ;
__p += '\n\t\t\t\t\t<select name="' +
__e( item.name ) +
'">\n\t\t\t\t\t\t';
 _.forEach(item.options, function(option) { ;
__p += '\n\t\t\t\t\t\t\t<option value="' +
__e( option.value ) +
'" ';
 if(option.selected) { ;
__p += ' selected ';
 } ;
__p += ' >\n\t\t\t\t\t\t\t\t' +
__e( frases.FORMS.PLACEHOLDERS[option.text] || option.text ) +
'\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t';
 }); ;
__p += '\n\t\t\t\t\t</select>\n\t\t\t\t';
 } else if(item.type === 'textarea') { ;
__p += '\n\t\t\t\t\t<textarea \n\t\t\t\t\t\tname="' +
__e( item.name ) +
'"\n\t\t\t\t\t\tplaceholder="' +
((__t = ( frases.FORMS.PLACEHOLDERS[item.placeholder] || frases.FORMS.PLACEHOLDERS[item.name] )) == null ? '' : __t) +
' ';
 if(item.required){ ;
__p += '*';
 } ;
__p += '"\n\t\t\t\t\t></textarea>\n\t\t\t\t';
 } else { ;
__p += '\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype="' +
((__t = ( item.type || 'text' )) == null ? '' : __t) +
'"\n\t\t\t\t\t\tplaceholder="' +
((__t = ( frases.FORMS.PLACEHOLDERS[item.placeholder] || frases.FORMS.PLACEHOLDERS[item.name] )) == null ? '' : __t) +
' ';
 if(item.required){ ;
__p += '*';
 } ;
__p += '"\n\t\t\t\t\t\tname="' +
__e( item.name ) +
'" ';
 if(item.value){ ;
__p += '\n\t\t\t\t\t\tvalue="' +
__e( credentials[item.value] ) +
'" ';
 } ;
__p += ' ';
 if(item.required){ ;
__p += 'required';
 } ;
__p += '\n\t\t\t\t\t/>\n\t\t\t\t';
 } ;
__p += '\n\t\t\t';
 }); ;
__p += '\n\t\t\t<button \n\t\t\t\ttype="submit"\n\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block"\n\t\t\t\tstyle="background-color: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; color: ' +
__e( defaults.styles.primary.color ) +
'; border: 1px solid ' +
__e( defaults.styles.primary.backgroundColor ) +
';">' +
__e( frases.FORMS.send ) +
'</button>\n\t\t\t<button\n\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block"\n\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="rejectForm">' +
__e( frases.FORMS.cancel ) +
'</button>\n\t\t</form>\n\t</div>\n\t<span class="' +
__e( defaults.prefix ) +
'-message-time"> ' +
__e( message.time ) +
'</span>\n</div>';

}
return __p
}
var _ = {};
var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;'
};
var escapeRegexp = new RegExp('[' + Object.keys(escapeMap).join('') + ']', 'g');
_.escape = function(string) {
    if (!string) return '';
    return String(string).replace(escapeRegexp, function(match) {
        return escapeMap[match];
    });
};
exports['message']= function(obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="' +
__e( defaults.prefix ) +
'-message ' +
__e( defaults.prefix ) +
'-' +
__e( message.entity ) +
'-msg">\n\t<span class="' +
__e( defaults.prefix ) +
'-message-from">' +
__e( message.from ) +
'</span>\n\t<div class="' +
__e( defaults.prefix ) +
'-message-content"\n\t\t';
 if(message.entity !== "user") { ;
__p += ' \n\t\t\tstyle="border-color:' +
((__t = ( defaults.styles.primary.backgroundColor )) == null ? '' : __t) +
'" \n\t\t';
 } ;
__p += '>\n\t\t<p>' +
((__t = ( message.content )) == null ? '' : __t) +
'</p>\n\t</div>\n\t<span class="' +
__e( defaults.prefix ) +
'-message-time"> ' +
__e( message.time ) +
'</span>\n</div>';

}
return __p
}
var _ = {};
var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;'
};
var escapeRegexp = new RegExp('[' + Object.keys(escapeMap).join('') + ']', 'g');
_.escape = function(string) {
    if (!string) return '';
    return String(string).replace(escapeRegexp, function(match) {
        return escapeMap[match];
    });
};
exports['widget']= function(obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {

 var frases = translations; ;
__p += '\n';
 var panels = frases.PANELS; ;
__p += '\n';
 var channels = defaults.channels; ;
__p += '\n';
 var positionClass = defaults.position === 'right' ? 'position-right' : 'position-left' ;
__p += '\n<div id="' +
__e( defaults.prefix ) +
'-wg-cont" class="' +
__e( defaults.prefix ) +
'-wg-cont ' +
__e( positionClass ) +
'">\n\n\t<!-- ***** Panes container ***** -->\n\t<div \n\t\tid="' +
__e( defaults.prefix ) +
'-wg-panes" \n\t\tclass="' +
__e( defaults.prefix ) +
'-wg-panes" \n\t\tstyle="';
 if(defaults.styles.width) { ;
__p += 'width: ' +
__e( defaults.styles.width ) +
';';
 } ;
__p += '">\n\n\t\t<!-- ***** Top bar ***** -->\n\t\t<div \n\t\t\tclass="' +
__e( defaults.prefix ) +
'-top-bar" \n\t\t\tstyle="background: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; color: ' +
__e( defaults.styles.primary.color ) +
';">\n\n\t\t\t<!-- Main title -->\n\t\t\t<h4 class="' +
__e( defaults.prefix ) +
'-wg-title ' +
__e( defaults.prefix ) +
'-uppercase">\n\t\t\t\t' +
__e( defaults.title || frases.TOP_BAR.title ) +
'\n\t\t\t</h4>\n\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-wg-state-cont">\n\t\t\t\t<span class="' +
__e( defaults.prefix ) +
'-wg-state-icon"> </span>\n\t\t\t\t<span class="' +
__e( defaults.prefix ) +
'-wg-state"></span>\n\t\t\t</div>\n\n\t\t\t<!-- Action buttons (minimize, close) -->\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-wg-minimize">\n\n\t\t\t\t<!--<a \n\t\t\t\t\thref="#" \n\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="closeWidget">\n\t\t\t\t\t\n\t\t\t\t\t<span style="font-weight: bold">_</span>\n\t\t\t\t\n\t\t\t\t</a>-->\n\t\t\t\t\n\t\t\t\t<a \n\t\t\t\t\thref="#" \n\t\t\t\t\tstyle="color: ' +
__e( defaults.styles.primary.color ) +
'"\n\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="closeWidget"\n\t\t\t\t\t<span class="' +
__e( defaults.prefix ) +
'-icon-remove"></span>\n\n\t\t\t\t</a>\n\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Top bar ends ***** -->\n\n\t\t<!-- ***** Connection types pane ***** -->\n\t\t<div \n\t\t\tclass="' +
__e( defaults.prefix ) +
'-wg-pane" \n\t\t\tdata-' +
__e( defaults.prefix ) +
'-pane="chooseConnection">\n\t\t\t\n\t\t\t<!-- Panel\'s image container -->\n\t\t\t<div \n\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-pane-header ' +
__e( defaults.prefix ) +
'-dark" \n\t\t\t\t';
 if(defaults.styles.intro.backgroundImage) { ;
__p += ' \n\t\t\t\t\tstyle="background-image: url(' +
__e( defaults.clientPath ) +
'' +
__e( defaults.styles.intro.backgroundImage ) +
')" \n\t\t\t\t';
 } ;
__p += '>\n\n\t\t\t\t<!-- The text displayed on image -->\n\t\t\t\t<div class="' +
__e( defaults.prefix ) +
'-backdrop-cont ' +
__e( defaults.prefix ) +
'-white">\n\t\t\t\t\t<br>\n\t\t\t\t\t<p>' +
__e( panels.CONNECTION_TYPES.choose_conn_type ) +
'</p>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-pane-body">\n\n\t\t\t\t<form \n\t\t\t\t\tid="' +
__e( defaults.prefix ) +
'-init-form" \n\t\t\t\t\tname="' +
__e( defaults.prefix ) +
'InitForm">\n\n\t\t\t\t\t';
 if(channels.webrtc) { ;
__p += ' \n\t\t\t\t\t\t<!-- Display call button if WebRTC is enabled and supported by the browser -->\n\t\t\t\t\t\t';
 if(defaults.webrtcEnabled) { ;
__p += ' \n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\ttype="button" \n\t\t\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block" \n\t\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\t\tbackground: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; \n\t\t\t\t\t\t\t\t\tcolor: ' +
__e( defaults.styles.primary.color ) +
'; \n\t\t\t\t\t\t\t\t\tborder: 1px solid ' +
__e( defaults.styles.primary.color ) +
';"\n\t\t\t\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="initCall">\n\n\t\t\t\t\t\t\t\t' +
__e( panels.CONNECTION_TYPES.call_agent_btn ) +
'\n\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<!-- If WebRTC is not supported and fallback is set -->\n\t\t\t\t\t\t';
 } else if(channels.webrtc.fallback && channels.webrtc.fallback.sipCall) { ;
__p += '\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\ttype="button" \n\t\t\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block" \n\t\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\t\tbackground: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; \n\t\t\t\t\t\t\t\t\tcolor: ' +
__e( defaults.styles.primary.color ) +
'; \n\t\t\t\t\t\t\t\t\tborder: 1px solid ' +
__e( defaults.styles.primary.color ) +
';"\n\t\t\t\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="initFallbackCall">\n\n\t\t\t\t\t\t\t\t' +
__e( panels.CONNECTION_TYPES.call_agent_btn ) +
'\n\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t';
 } ;
__p += '\n\t\t\t\t\t';
 } ;
__p += '\n\n\t\t\t\t\t<!-- Display callback button if callback task is configured in the settings -->\n\t\t\t\t\t';
 if(channels.callback && channels.callback.task) { ;
__p += '\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttype="button" \n\t\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block" \n\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\tbackground: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; \n\t\t\t\t\t\t\t\tcolor: ' +
__e( defaults.styles.primary.color ) +
'; \n\t\t\t\t\t\t\t\tborder: 1px solid ' +
__e( defaults.styles.primary.color ) +
';"\n\t\t\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="initCallback">\n\n\t\t\t\t\t\t\t' +
__e( panels.CONNECTION_TYPES.callback_btn ) +
'\n\n\t\t\t\t\t\t</button>\n\t\t\t\t\t';
 } ;
__p += '\n\n\t\t\t\t\t<!-- Init chat button -->\n\t\t\t\t\t';
 if(defaults.chat) { ;
__p += '\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype="button" \n\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block" \n\t\t\t\t\t\tstyle="background: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; color: ' +
__e( defaults.styles.primary.color ) +
'; border: 1px solid ' +
__e( defaults.styles.primary.color ) +
';"\n\t\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="initChat">\n\t\t\t\t\t\t' +
__e( panels.CONNECTION_TYPES.chat_agent_btn ) +
'\n\t\t\t\t\t</button>\n\t\t\t\t\t';
 } ;
__p += '\n\n\t\t\t\t\t<!-- Close widget button -->\n\t\t\t\t\t<a href="#" class="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block" data-' +
__e( defaults.prefix ) +
'-handler="closeWidget">' +
__e( panels.CONNECTION_TYPES.cancel ) +
'</a>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Connection types pane ends ***** -->\n\n\t\t<!-- ***** Intro pane. Displayed if configured in the settings object. ***** -->\n\t\t';
 if(defaults.intro.length) { ;
__p += '\n\t\t\t<div \n\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-wg-pane" \n\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-pane="credentials">\n\n\t\t\t\t<!-- Panel\'s image container -->\n\t\t\t\t<div \n\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-pane-header ' +
__e( defaults.prefix ) +
'-dark" \n\t\t\t\t\t';
 if(defaults.styles.intro.backgroundImage) { ;
__p += ' \n\t\t\t\t\t\tstyle="background-image: url(' +
__e( defaults.clientPath ) +
'' +
__e( defaults.styles.intro.backgroundImage ) +
')" \n\t\t\t\t\t';
 } ;
__p += '>\n\n\t\t\t\t\t<!-- The text displayed on image -->\n\t\t\t\t\t<div class="' +
__e( defaults.prefix ) +
'-backdrop-cont ' +
__e( defaults.prefix ) +
'-white">\n\t\t\t\t\t\t<br>\n\t\t\t\t\t\t<p>' +
__e( panels.INTRO.intro_message ) +
'</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\n\t\t\t\t<div class="' +
__e( defaults.prefix ) +
'-pane-body">\n\t\t\t\t\t<form \n\t\t\t\t\t\tid="' +
__e( defaults.prefix ) +
'-intro-form" \n\t\t\t\t\t\tname="' +
__e( defaults.prefix ) +
'IntroForm" \n\t\t\t\t\t\tdata-validate-form="true">\n\n\t\t\t\t\t\t<!-- Iterating over intro array, which is a list of fields and their properties -->\n\t\t\t\t\t\t';
 _.forEach(defaults.intro, function(item){ ;
__p += '\n\t\t\t\t\t\t\t';
 if(item.name === 'lang') { ;
__p += '\n\t\t\t\t\t\t\t\t<select name="lang">\n\t\t\t\t\t\t\t\t\t';
 _.forEach(languages, function(lang) { ;
__p += '\n\t\t\t\t\t\t\t\t\t\t<option \n\t\t\t\t\t\t\t\t\t\t\tvalue="' +
__e( lang ) +
'" \n\t\t\t\t\t\t\t\t\t\t\t';
 if(lang === currLang) { ;
__p += ' selected ';
 } ;
__p += ' >\n\t\t\t\t\t\t\t\t\t\t\t' +
__e( translations[lang].lang ) +
'\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t';
 }); ;
__p += '\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t';
 } else if(item.name === 'message') { ;
__p += '\n\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\tname="message"\n\t\t\t\t\t\t\t\t\tplaceholder="' +
((__t = ( item.placeholder || panels.INTRO.PLACEHOLDERS[item.name] )) == null ? '' : __t) +
' ';
 if(item.required){ ;
__p += ' * ';
 } ;
__p += '"\n\t\t\t\t\t\t\t\t></textarea>\n\t\t\t\t\t\t\t';
 } else { ;
__p += '\n\t\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\t\ttype="' +
((__t = ( item.type || 'text' )) == null ? '' : __t) +
'" \n\t\t\t\t\t\t\t\t\tplaceholder="' +
((__t = ( item.placeholder || panels.INTRO.PLACEHOLDERS[item.name] )) == null ? '' : __t) +
' ';
 if(item.required){ ;
__p += ' * ';
 } ;
__p += '" \n\t\t\t\t\t\t\t\t\tname="' +
__e( item.name ) +
'" \n\t\t\t\t\t\t\t\t\t';
 if(item.save){ ;
__p += ' value="' +
__e( credentials[item.name] ) +
'" ';
 } ;
__p += ' \n\t\t\t\t\t\t\t\t\t';
 if(item.required){ ;
__p += ' required ';
 } ;
__p += '>\n\t\t\t\t\t\t\t';
 } ;
__p += '\n\n\t\t\t\t\t\t';
 }); ;
__p += '\n\n\t\t\t\t\t\t<!-- Init chat with intro properties -->\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\ttype="submit" \n\t\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block" \n\t\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\t\tbackground: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; \n\t\t\t\t\t\t\t\tcolor: ' +
__e( defaults.styles.primary.color ) +
'; \n\t\t\t\t\t\t\t\tborder: 1px solid ' +
__e( defaults.styles.primary.color ) +
';">\n\n\t\t\t\t\t\t\t' +
__e( panels.INTRO.start_dialog_button ) +
'\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t<!-- Close widget button -->\n\t\t\t\t\t\t<a href="#" class="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block" data-' +
__e( defaults.prefix ) +
'-handler="closeWidget">' +
__e( panels.INTRO.cancel ) +
'</a>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t';
 } ;
__p += '\n\t\t<!-- ***** Intro pane ends ***** -->\n\n\t\t<!-- ***** Messages pane ***** -->\n\t\t<div  class="' +
__e( defaults.prefix ) +
'-wg-pane" data-' +
__e( defaults.prefix ) +
'-pane="messages">\n\t\t\t\n\t\t\t<!-- Messages container -->\n\t\t\t<ul \n\t\t\t\tid="' +
__e( defaults.prefix ) +
'-messages-cont" \n\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-messages-cont" \n\t\t\t\tstyle="\n\t\t\t\t\t';
 if(defaults.styles.height) { ;
__p += '\n\t\t\t\t\t\theight: ' +
__e( defaults.styles.height ) +
';\n\t\t\t\t\t';
 } ;
__p += '">\n\t\t\t\t\t\n\t\t\t</ul>\n\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-write-cont">\n\t\t\t\t\n\t\t\t\t<!-- End dialog button -->\n\t\t\t\t<div class="' +
__e( defaults.prefix ) +
'-end-dialog-btn">\n\t\t\t\t\t<a href="#" data-' +
__e( defaults.prefix ) +
'-handler="finish">' +
__e( panels.MESSAGES.end_dialog ) +
'</a>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- "Agent is typing" indicator -->\n\t\t\t\t<div class="' +
__e( defaults.prefix ) +
'-loader">\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t\t<span></span>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- "Attach file" button -->\n\t\t\t\t<label \n\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-sendfile-cont" \n\t\t\t\t\tfor="' +
__e( defaults.prefix ) +
'-file-select">\n\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype="file" \n\t\t\t\t\t\tid="' +
__e( defaults.prefix ) +
'-file-select">\n\t\t\t\t\t\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-icon-upload" \n\t\t\t\t\t\tstyle="color: ' +
__e( defaults.styles.primary.backgroundColor ) +
'">\n\t\t\t\t\t<span>\n\n\t\t\t\t</label>\n\n\t\t\t\t<div id="' +
__e( defaults.prefix ) +
'-message-text-clone"  class="' +
__e( defaults.prefix ) +
'-msg-textarea-clone" ></div>\n\n\t\t\t\t<!-- Field for typing the user message -->\n\t\t\t\t<textarea \n\t\t\t\t\tid="' +
__e( defaults.prefix ) +
'-message-text" \n\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-msg-textarea" \n\t\t\t\t\tplaceholder="' +
__e( panels.MESSAGES.PLACEHOLDERS.message ) +
'" \n\t\t\t\t\tmaxlength="1000"></textarea>\n\t\t\t\t\n\t\t\t\t<!-- "Send a message" button -->\n\t\t\t\t<a \n\t\t\t\t\thref="#" \n\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-sendmsg-btn ' +
__e( defaults.prefix ) +
'-button" \n\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="sendMessage">\n\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-icon-paper-plane" \n\t\t\t\t\t\tstyle="color: ' +
__e( defaults.styles.primary.backgroundColor ) +
'">\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Messages pane ends ***** -->\n\n\t\t<!-- ***** Offline pane ***** -->\n\t\t<div \n\t\t\tclass="' +
__e( defaults.prefix ) +
'-wg-pane" \n\t\t\tdata-' +
__e( defaults.prefix ) +
'-pane="sendemail">\n\n\t\t\t<!-- Panel\'s image container -->\n\t\t\t<div \n\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-pane-header ' +
__e( defaults.prefix ) +
'-dark" \n\t\t\t\t';
 if(defaults.styles.sendmail.backgroundImage) { ;
__p += ' \n\t\t\t\t\tstyle="background-image: url(' +
__e( defaults.clientPath ) +
'' +
__e( defaults.styles.sendmail.backgroundImage ) +
')" \n\t\t\t\t';
 } ;
__p += '>\n\n\t\t\t\t<!-- The text displayed on image -->\n\t\t\t\t<div class="' +
__e( defaults.prefix ) +
'-backdrop-cont ' +
__e( defaults.prefix ) +
'-dark">\n\t\t\t\t\t<p>' +
__e( panels.OFFLINE.offline_message ) +
'</p>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-pane-body">\n\t\t\t\t<h4 class="' +
__e( defaults.prefix ) +
'-uppercase">' +
__e( panels.OFFLINE.send_message_header ) +
'</h4>\n\t\t\t\t<form id="' +
__e( defaults.prefix ) +
'-sendmail-form" data-validate-form="true">\n\t\t\t\t\t<input type="text" name="uname" placeholder="' +
__e( panels.OFFLINE.PLACEHOLDERS.uname ) +
'">\n\t\t\t\t\t<input type="email" name="email" placeholder="' +
__e( panels.OFFLINE.PLACEHOLDERS.email ) +
' *" required>\n\t\t\t\t\t<textarea name="text" placeholder="' +
__e( panels.OFFLINE.PLACEHOLDERS.message ) +
'" maxlength="1500"></textarea>\n\n\t\t\t\t\t<input type="file" name="file" id="' +
__e( defaults.prefix ) +
'-contactfile" class="' +
__e( defaults.prefix ) +
'-inputfile" />\n\t\t\t\t\t<label for="' +
__e( defaults.prefix ) +
'-contactfile">' +
__e( panels.OFFLINE.choose_file ) +
'</label>\n\n\t\t\t\t\t<!-- "Send offline message" button -->\n\t\t\t\t\t<button \n\t\t\t\t\t\ttype="submit" \n\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block" \n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tbackground: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; \n\t\t\t\t\t\t\tcolor: ' +
__e( defaults.styles.primary.color ) +
'; \n\t\t\t\t\t\t\tborder: 1px solid ' +
__e( defaults.styles.primary.color ) +
';">\n\n\t\t\t\t\t\t' +
__e( panels.OFFLINE.send_message_button ) +
'\n\t\t\t\t\t\t\t\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<!-- Close widget button -->\n\t\t\t\t\t<a href="#" class="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block" data-' +
__e( defaults.prefix ) +
'-handler="closeWidget">' +
__e( panels.OFFLINE.close ) +
'</a>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Offline pane ends ***** -->\n\n\t\t<!-- ***** Close chat pane ***** -->\n\t\t<div \n\t\t\tclass="' +
__e( defaults.prefix ) +
'-wg-pane" \n\t\t\tdata-' +
__e( defaults.prefix ) +
'-pane="closechat">\n\n\t\t\t<!-- Panel\'s image container -->\n\t\t\t<div \n\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-pane-header ' +
__e( defaults.prefix ) +
'-white" \n\t\t\t\t';
 if(defaults.styles.closeChat.backgroundImage) { ;
__p += ' \n\t\t\t\t\tstyle="background-image: url(' +
__e( defaults.clientPath ) +
'' +
__e( defaults.styles.closeChat.backgroundImage ) +
')" \n\t\t\t\t';
 } ;
__p += '>\n\n\t\t\t\t<!-- The text displayed on image -->\n\t\t\t\t<div class="' +
__e( defaults.prefix ) +
'-backdrop-cont ' +
__e( defaults.prefix ) +
'-white">\n\t\t\t\t\t<br>\n\t\t\t\t\t<p>' +
__e( panels.CLOSE_CHAT.close_chat_header ) +
'</p>\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-pane-body">\n\t\t\t\t<form id="' +
__e( defaults.prefix ) +
'-closechat-form" data-validate-form="true">\n\t\t\t\t\t<label for="' +
__e( defaults.prefix ) +
'-send-dialog">\n\t\t\t\t\t\t<input type="checkbox" name="sendDialog" id="' +
__e( defaults.prefix ) +
'-send-dialog" />\n\t\t\t\t\t\t<span>' +
__e( panels.CLOSE_CHAT.send_dialog_label ) +
'</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input type="email" name="email" placeholder="' +
__e( panels.CLOSE_CHAT.PLACEHOLDERS.email ) +
'">\n\t\t\t\t\t<select name="rating">\n\t\t\t\t\t\t<option value="">--- ' +
__e( panels.CLOSE_CHAT.rate_agent ) +
' ---</option>\n\t\t\t\t\t\t<option value="5">' +
__e( frases.AGENT_RATES.excellent ) +
'</option>\n\t\t\t\t\t\t<option value="4">' +
__e( frases.AGENT_RATES.good ) +
'</option>\n\t\t\t\t\t\t<option value="3">' +
__e( frases.AGENT_RATES.fair ) +
'</option>\n\t\t\t\t\t\t<option value="2">' +
__e( frases.AGENT_RATES.bad ) +
'</option>\n\t\t\t\t\t</select>\n\t\t\t\t\t<textarea placeholder="' +
__e( panels.CLOSE_CHAT.PLACEHOLDERS.comment ) +
'" name="text" maxlength="1500"></textarea>\n\n\t\t\t\t\t<!-- End chat and close widget button -->\n\t\t\t\t\t<button \n\t\t\t\t\t\ttype="submit" \n\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block" \n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tbackground: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; \n\t\t\t\t\t\t\tcolor: ' +
__e( defaults.styles.primary.color ) +
'; \n\t\t\t\t\t\t\tborder: 1px solid ' +
__e( defaults.styles.primary.color ) +
';">\n\n\t\t\t\t\t\t' +
__e( panels.CLOSE_CHAT.finish_dialog_button ) +
'\n\t\t\t\t\t\t\t\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<!-- "Back to the chat" button -->\n\t\t\t\t\t<a href="#messages" class="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block">' +
__e( panels.CLOSE_CHAT.back ) +
'</a>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Close chat pane ends ***** -->\n\n\t\t<!-- ***** Audio call pane ***** -->\n\t\t<div class="' +
__e( defaults.prefix ) +
'-wg-pane" data-' +
__e( defaults.prefix ) +
'-pane="callAgent">\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-pane-body">\n\t\t\t\t<div id="' +
__e( defaults.prefix ) +
'-call-spinner" class="' +
__e( defaults.prefix ) +
'-spinner-pane">\n\t\t\t\t\t<h3 class="' +
__e( defaults.prefix ) +
'-text-center">' +
__e( panels.AUDIO_CALL.confirm_access ) +
'</h3>\n\t\t\t\t\t<h3 class="' +
__e( defaults.prefix ) +
'-text-center ' +
__e( defaults.prefix ) +
'-loader ' +
__e( defaults.prefix ) +
'-shown" style="position: relative;">\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t\t<div id="' +
__e( defaults.prefix ) +
'-call-info" class="' +
__e( defaults.prefix ) +
'-hidden">\n\t\t\t\t\t<h3 class="' +
__e( defaults.prefix ) +
'-text-center" id="' +
__e( defaults.prefix ) +
'-call-state">' +
__e( panels.AUDIO_CALL.calling_agent ) +
'</h3>\n\t\t\t\t\t<h3 class="' +
__e( defaults.prefix ) +
'-text-center" id="' +
__e( defaults.prefix ) +
'-call-timer">00:00</h3>\n\t\t\t\t</div>\n\t\t\t\t<form id="' +
__e( defaults.prefix ) +
'-call-control">\n\t\t\t\t\t<hr>\n\t\t\t\t\t<button\n\t\t\t\t\t\tid="' +
__e( defaults.prefix ) +
'-tryagain-btn"\n\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block ' +
__e( defaults.prefix ) +
'-hidden"\n\t\t\t\t\t\tstyle="background: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; color: ' +
__e( defaults.styles.primary.color ) +
'; border: 1px solid ' +
__e( defaults.styles.primary.color ) +
';"\n\t\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="initCall">\n\t\t\t\t\t\t' +
__e( panels.AUDIO_CALL.try_again ) +
'\n\t\t\t\t\t</button>\t\n\t\t\t\t\t<button \n\t\t\t\t\t\ttype="button"\n\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-warn ' +
__e( defaults.prefix ) +
'-block"\n\t\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="endCall">\n\n\t\t\t\t\t\t' +
__e( panels.AUDIO_CALL.end_call ) +
'\n\n\t\t\t\t\t</button>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Audio call pane ends ***** -->\n\n\t\t<!-- ***** Audio call fallback pane ***** -->\n\t\t<div class="' +
__e( defaults.prefix ) +
'-wg-pane" data-' +
__e( defaults.prefix ) +
'-pane="callAgentFallback">\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-pane-body">\n\t\t\t\t<div class="' +
__e( defaults.prefix ) +
'-text-center">\n\t\t\t\t\t<h3>' +
__e( panels.AUDIO_CALL_FALLBACK.DOWNLOAD_MSG ) +
'</h3>\n\t\t\t\t\t<br>\n\t\t\t\t\t';
 if(defaults.webrtc && defaults.webrtc.fallback) { ;
__p += '\n\t\t\t\t\t\t<a href="' +
__e( defaults.webrtc.fallback.sipCall ) +
'">call.jnlp</a>\n\t\t\t\t\t';
 } ;
__p += '\n\t\t\t\t</div>\n\t\t\t\t<form>\n\t\t\t\t\t<hr>\n\t\t\t\t\t<a href="#chooseConnection" class="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block">' +
__e( panels.CALLBACK.back ) +
'</a>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Audio call fallback pane ends ***** -->\n\n\t\t<!-- ***** Callback pane ***** -->\n\t\t<div \n\t\t\tclass="' +
__e( defaults.prefix ) +
'-wg-pane" \n\t\t\tdata-' +
__e( defaults.prefix ) +
'-pane="callback">\n\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-pane-body">\n\t\t\t\t<div id="' +
__e( defaults.prefix ) +
'-callback-spinner" class="' +
__e( defaults.prefix ) +
'-hidden ' +
__e( defaults.prefix ) +
'-spinner-pane">\n\t\t\t\t\t<h3 class="' +
__e( defaults.prefix ) +
'-text-center">' +
__e( panels.CALLBACK.sending_request ) +
'</h3>\n\t\t\t\t\t<h3 class="' +
__e( defaults.prefix ) +
'-text-center ' +
__e( defaults.prefix ) +
'-loader ' +
__e( defaults.prefix ) +
'-shown" style="position: relative;">\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t\t<span></span>\n\t\t\t\t\t</h3>\n\t\t\t\t</div>\n\t\t\t\t<form id="' +
__e( defaults.prefix ) +
'-callback-settings">\n\t\t\t\t\t<p class="' +
__e( defaults.prefix ) +
'-text-center">' +
__e( panels.CALLBACK.title ) +
'</p>\n\t\t\t\t\t<hr>\n\t\t\t\t\t<label>' +
__e( panels.CALLBACK.LABELS.phone ) +
'</label>\n\t\t\t\t\t<input type="tel" name="phone" placeholder="' +
__e( panels.CALLBACK.PLACEHOLDERS.phone ) +
'" required>\n\t\t\t\t\t<label>' +
__e( panels.CALLBACK.LABELS.time ) +
'</label>\n\t\t\t\t\t<select name="time">\n\t\t\t\t\t\t';
 _.forEach(panels.CALLBACK.TIME_POINTS, function(point) { ;
__p += '\n\t\t\t\t\t\t\t<option value="' +
__e( point.minutes ) +
'">' +
__e( point.label ) +
'</option>\n\t\t\t\t\t\t';
 }); ;
__p += '\n\t\t\t\t\t</select>\n\t\t\t\t\t<hr>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype="submit"\n\t\t\t\t\t\tclass="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-button-primary ' +
__e( defaults.prefix ) +
'-block"\n\t\t\t\t\t\tstyle="\n\t\t\t\t\t\t\tbackground: ' +
__e( defaults.styles.primary.backgroundColor ) +
'; \n\t\t\t\t\t\t\tcolor: ' +
__e( defaults.styles.primary.color ) +
'; \n\t\t\t\t\t\t\tborder: 1px solid ' +
__e( defaults.styles.primary.color ) +
';"\n\t\t\t\t\t\tdata-' +
__e( defaults.prefix ) +
'-handler="setCallback">\n\n\t\t\t\t\t\t' +
__e( panels.CALLBACK.confirm_callback ) +
'\n\n\t\t\t\t\t</button>\n\n\t\t\t\t\t<a href="#chooseConnection" class="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block">' +
__e( panels.CALLBACK.back ) +
'</a>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Callback pane ends ***** -->\n\n\t\t<!-- ***** Callback sent pane ***** -->\n\t\t<div class="' +
__e( defaults.prefix ) +
'-wg-pane" data-' +
__e( defaults.prefix ) +
'-pane="callbackSent">\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-pane-body">\n\t\t\t\t<div id="' +
__e( defaults.prefix ) +
'-callback-sent">\n\t\t\t\t\t<h3 class="' +
__e( defaults.prefix ) +
'-text-center ' +
__e( defaults.prefix ) +
'-icon-check ' +
__e( defaults.prefix ) +
'-text-success"></h3>\n\t\t\t\t\t<p class="' +
__e( defaults.prefix ) +
'-text-center">' +
__e( panels.CALLBACK.request_sent ) +
'</p>\n\t\t\t\t\t<form>\n\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t<a href="#chooseConnection" class="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block">' +
__e( panels.CALLBACK.back ) +
'</a>\n\t\t\t\t\t\t<a href="#" class="' +
__e( defaults.prefix ) +
'-button ' +
__e( defaults.prefix ) +
'-block" data-' +
__e( defaults.prefix ) +
'-handler="closeWidget">' +
__e( panels.CALLBACK.close ) +
'</a>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<!-- ***** Callback sent pane ends ***** -->\n\n\t</div>\n\t<!-- ***** Panes container ends ***** -->\n\n\t<!-- ***** Floating button container ***** -->\n\t<div id="' +
__e( defaults.prefix ) +
'-btn-cont" class="' +
__e( defaults.prefix ) +
'-btn-cont">\n\t\t<div class="' +
__e( defaults.prefix ) +
'-wg-btn">\n\t\t\t<div class="' +
__e( defaults.prefix ) +
'-lastmsg-cont">\n\t\t\t\t<span class="' +
__e( defaults.prefix ) +
'-unnotify-btn" id="' +
__e( defaults.prefix ) +
'-unnotify-btn">' +
__e( frases.FLOATING_BUTTON.close ) +
'</span>\n\t\t\t\t<div id="' +
__e( defaults.prefix ) +
'-lastmsg" class="' +
__e( defaults.prefix ) +
'-lastmsg">\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t\t<a href="#" class="' +
__e( defaults.prefix ) +
'-btn-link">\n\t\t\t\t<span class="' +
__e( defaults.prefix ) +
'-btn-icon"></span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\t<!-- ***** Floating button container ends ***** -->\n\n</div>';

}
return __p
}
},{}],84:[function(require,module,exports){
var debug = require('./debug');
var events = {},
// JsSIP = require('jssip'),
JsSIP = require('./jssip.min.js'),
// JsSIP = global.JsSIP,
options,
sipClient,
sipSession,
sipCallEvents;

function isWebrtcSupported(){
	var RTC = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection,
		userMeida = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia,
		ice = window.mozRTCIceCandidate || window.RTCIceCandidate;

	return !!RTC && !!userMeida && !!ice;
}

function initJsSIPEvents(){
	sipClient.on('connected', function(e){ debug.log('sip connected event: ', e); });
	sipClient.on('disconnected', function(e){ debug.log('sip disconnected event: ', e); });
	sipClient.on('newMessage', function(e){ debug.log('sip newMessage event: ', e); });
	sipClient.on('newRTCSession', function(e){
		debug.log('sip newRTCSession event: ', e);
		events.emit('webrtc/newRTCSession', e);
		// if(e.session.direction === 'outgoing')
		// 	events.emit('webrtc/outgoingCall', e);
		// else
		// 	events.emit('webrtc/incomingCall', e);
		
			sipSession = e.session;
	});
	sipClient.on('registered', function(e){ debug.log('sip registered event: ', e); });
	sipClient.on('unregistered', function(e){ debug.log('sip unregistered event: ', e); });
	sipClient.on('registrationFailed', function(e){ debug.log('sip registrationFailed event: ', e); });

	sipCallEvents = {
		progress: function(e){
			debug.log('call progress event: ', e);
			events.emit('webrtc/progress', e);
		},
		failed: function(e){
			debug.log('call failed event:', e);
			events.emit('webrtc/failed', e);
		},
		ended: function(e){
			debug.log('call ended event: ', e);
			events.emit('webrtc/ended', e);
		},
		confirmed: function(e){
			debug.log('call confirmed event: ', e);
			events.emit('webrtc/confirmed', e);
		},
		addstream: function(e){
			debug.log('call addstream event: ', e);
			events.emit('webrtc/addstream', e);
			var stream = e.stream;
			options.audioRemote = JsSIP.rtcninja.attachMediaStream(options.audioRemote, stream);
		}
		// sdp: function(e){
		// 	debug.log('sdp: ', e);
		// }
	};
}

function isEstablished(){
	return sipSession.isEstablished();
}

function isInProgress(){
	return sipSession.isInProgress();
}

function isEnded(){
	return sipSession.isEnded();
}

function unregister(){
	sipClient.stop();
}

function audiocall(number){
	sipSession = sipClient.call(number, {
		eventHandlers: sipCallEvents,
		mediaConstraints: { audio: true, video: false }
	});
}

function terminate(){
	sipSession.terminate({
		status_code: 200
	});
	// sipClient.terminateSessions();
}

function answer(){
	debug.log('answer: ',sipClient);
	sipSession.answer();
}

function hold(){
	debug.log('hold: ', sipSession.isOnHold());
	if(sipSession && sipSession.isOnHold().local) {
		sipSession.unhold();
	} else {
		sipSession.hold();
	}
}

function createRemoteAudio(){
	var el = document.createElement('audio');
	el.setAttribute('autoplay', 'autoplay');
	document.body.appendChild(el);
	return el;
}

function init(opts){
	debug.log('Initiating WebRTC module:', opts);
	options = opts;
	if(options.sip.register === undefined) options.sip.register = false;
	var socket = new JsSIP.WebSocketInterface(options.sip.ws_servers);
	options.sip.sockets = [socket];

	// !!get rid of this!!
	events.emit = opts.emit;
	events.on = opts.on;
	// !!get rid of this!!

	options.audioRemote = createRemoteAudio();
	sipClient = new JsSIP.UA(options.sip);
	initJsSIPEvents();
	sipClient.start();
	// return sipClient;
}

module.exports = {
	lib: JsSIP,
	init: init,
	unregister: unregister,
	audiocall: audiocall,
	terminate: terminate,
	answer: answer,
	hold: hold,
	isInProgress: isInProgress,
	isEstablished: isEstablished,
	isEnded: isEnded,
	isSupported: isWebrtcSupported
};
},{"./debug":77,"./jssip.min.js":78}],85:[function(require,module,exports){
(function (global){
var domify = require('domify');
var core = require('./core');
var storage = require('./storage');
var request = require('./request');
var debug = require('./debug');
var _ = require('./lodash');
var frases = null;
var cobrowsing = require('./cobrowsing');
var templates = require('./templates');
var WebRTC = require('./webrtc');
var audio = require('./audio-control');
// var serverUrl = {};
var forms;
var api;

// Widget initiation options
var defaults = {
	// prefix for CSS classes and ids. 
	// Change it only if the default prefix 
	// matches with existed classes or ids on the website
	prefix: 'swc',
	// Init module on page load
	autoStart: true,
	// whether or not to ask user 
	// to introduce him self before the chat session
	intro: false,
	// whether or not to add widget to the webpage
	widget: true,
	// enable chat feature
	chat: true,
	// channels settings
	channels: {
		webrtc: {},
		callback: {}
	},
	// enable cobrowsing feature
	cobrowsing: false,
	// DOM element[s] selector that opens a widget
	buttonSelector: "",
	reCreateSession: true,
	title: '',
	lang: '',
	langFromUrl: true,
	position: 'right',
	hideOfflineButton: false,
	offer: false,
	styles: {
		primary: {
			backgroundColor: '#74b9ff',
			color: '#FFFFFF'
		},
		intro: {
			// backgroundImage: "images/bgr-02.jpg"
		},
		sendmail: {
			// backgroundImage: "images/bgr-01.jpg"
		},
		closeChat: {
			// backgroundImage: "images/bgr-02.jpg"
		}
	},
	buttonStyles: {
		online: {
			backgroundColor: 'rgba(175,229,255,0.8)',
			color: ''
		},
		offline: {
			backgroundColor: 'rgba(241,241,241,0.8)',
			color: ''
		},
		timeout: {
			backgroundColor: 'rgba(241,241,241,0.8)',
			color: ''
		},
		notified: {
			backgroundColor: 'rgba(253,250,129,0.8)',
			color: ''
		},
		color: 'rgb(70,70,70)'
	},
	widgetWindowOptions: 'left=10,top=10,width=350,height=550,resizable',
	// absolute path to the wchat folder
	path: '/ipcc/webchat/',
	// absolute path to the clients files. If not set, files requested from defaults.server + defaults.path.
	clientPath: 'https://cdn.smile-soft.com/wchat/v1/',
	// absolute path to the css flie
	stylesPath: '',
	// absolute path to the translations.json flie
	translationsPath: '',
	// displayed in the email template
	host: window.location.host,
	webrtcEnabled: false,
};

var globalSettings = "WchatSettings";

// Current widget state
var widgetState = {
	initiated: false,
	active: false,
	state: '', // "online" | "offline" | "timeout",
	share: false,
	sounds: true
};

var dialog = [];
var messages = [];

// available dialog languages
var langs = [];
// var currLang = '';
var sessionTimeout;
var chatTimeout;
var mouseFocused = false;
// Widget dom element
var widget;

// Widget in a separate window
var widgetWindow;
// Widget panes elements
var agentIsTypingTimeout;
var userIsTypingTimeout;
var timerUpdateInterval;
var pollTurns = 1;
var cobrowsingPermissionGiven = false;

var publicApi = {

	initModule: initModule,
	initWidgetState: initWidgetState,
	openWidget: openWidget,
	initChat: initChat,
	initCall: initCall,
	getWidgetElement: getWidgetElement,
	isWebrtcSupported: WebRTC.isSupported,
	getWidgetState: function() {
		return widgetState;
	},
	getEntity: function(){ return storage.getState('entity', 'session'); },
	on: function(evt, listener) {
		api.on(evt, listener);
		return this;
	},
	emit: function (evt, listener){
		api.emit(evt, listener);
		return this;
	},
	/**
	 * Set default user credentials.
	 * If "intro" is false, than dialog will start with these credentials.
	 * NOTE: Must be called before initModule method
	 * 
	 * @param {Object} params - User credentials, i.e. "uname", "lang", "phone", "subject"
	 */
	setDefaultCredentials: function(params) {
		defaults.credentials = params;
		return this;
	}
};

module.exports = {
	module: Widget,
	api: publicApi
};

// Initiate the module with the global settings
if(global[globalSettings] && global[globalSettings].autoStart !== false && defaults.autoStart) {
	if(document.readyState === "complete" || document.readyState === "interactive") {
	    Widget(global[globalSettings]);
	} else {
        document.addEventListener('DOMContentLoaded', function() { Widget(global[globalSettings]); }, false);
	}
}

function Widget(options){

	if(widgetState.initiated) return publicApi;

	_.merge(defaults, options || {});
	// _.assign(defaults, options || {});

	debug.log('Widget: ', options);

	defaults.clientPath = options.clientPath ? options.clientPath : (defaults.clientPath || (defaults.server + defaults.path));

	addWidgetStyles();
	if(defaults.buttonSelector) 
		setHandlers(defaults.buttonSelector);
	
	// serverUrl = require('url').parse(defaults.server, true);

	// Enabling audio module
	audio.init(defaults.clientPath+'sounds/');

	api = new core(defaults)
	.on('session/create', onSessionSuccess)
	.on('session/timeout', onSessionTimeout)
	.on('session/join', onSessionJoinRequest)
	.on('session/joined', onSessionJoin)
	.on('session/disjoin', onSessionDisjoin)
	.on('session/init', onSessionInit);
	// .on('chat/languages', function() {
	// 	changeWgState({ state: getWidgetState() });
	// });	

	if(defaults.widget) {
		api
		// .on('chat/start', startChat)
		.on('chat/close', onChatClose)
		.on('chat/timeout', onChatTimeout)
		.on('message/new', clearUndelivered)
		.on('message/new', newMessage)
		.on('message/typing', onAgentTyping)
		.on('callback/create', onCallbackRequested)
		.on('form/submit', onFormSubmit)
		.on('form/reject', closeForm)
		.on('widget/load', initWidget);
		// .on('widget/init', onWidgetInit);
		// .on('widget/statechange', changeWgState);
	}

	if(WebRTC.isSupported() && defaults.channels.webrtc && defaults.channels.webrtc.sip && defaults.channels.webrtc.sip.ws_servers !== undefined) {
		if(window.location.protocol === 'https:'){
		// if(window.location.protocol === 'https:' && serverUrl.protocol === 'https:'){
			// set flag to indicate that webrtc feature is supported and enabled
			defaults.webrtcEnabled = true;

			// set webrtc event handlers
			api.on('webrtc/newRTCSession', function(){
				initCallState('newRTCSession');
			});
			api.on('webrtc/progress', function(e){
				if(e.response.status_code === 180) {
					initCallState('ringing');
				} else {
					initCallState('confirmed');
				}
			});
			api.on('webrtc/addstream', function(){
				initCallState('connected');
			});
			api.on('webrtc/ended', function(){
				initCallState('ended');
			});
			api.on('webrtc/failed', function(e){
				if(e.cause === 'Canceled'){
					initCallState('canceled');
				} else {
					initCallState('failed');
				}
			});

			// ringTone audio element plays ringTone sound when calling to agent
			// ringTone = document.createElement('audio');
			// ringTone.src = defaults.clientPath+'sounds/ringout.wav';
			// document.body.appendChild(ringTone);

			// initiate webrtc module with parameters
			initWebrtcModule({
				sip: defaults.channels.webrtc.sip,
				emit: publicApi.emit,
				on: publicApi.on
			});
		} else {
			// webrtc is supported by the browser, but the current web page
			// is located on insecure origins, therefore the webrtc is not supported
			debug.warn('WebRTC feature is disabled');
			debug.warn('getUserMedia() no longer works on insecure origins. To use this feature, you should consider switching your application to a secure origin, such as HTTPS. See https://goo.gl/rStTGz for more details.');
		}
	}
	
	// setSessionTimeoutHandler();

	// load translations
	request.get('frases', (defaults.translationsPath || defaults.clientPath)+'translations.json', function (err, result){
		if(err) return api.emit('Error', err);
		frases = JSON.parse(result);
		frases = frases[api.detectLanguage(frases)]
	});
	
	// load forms
	request.get('forms_json', defaults.clientPath+'forms.json', function (err, result){
		if(err) return api.emit('Error', err);
		forms = JSON.parse(result).forms;
	});

	return publicApi;
}

function initModule(){
	api.init();
	return publicApi;
}

function initWebrtcModule(opts){
	debug.log('initWebrtcModule: ', opts);
	WebRTC.init(opts);
}

// Session is either created or continues
function onSessionSuccess(){	
	// Wait while translations are loaded
	_.poll(function(){
		debug.log('poll: ', frases);
		return (frases !== null);

	}, function() {
		initSession()
		// if window is not a opened window
		if(!defaults.external) {
			api.updateUrl(window.location.href);
		}

	}, function(){
		
		if(pollTurns < 2) {
			pollTurns++;
			Widget(defaults);
		} else {
			return api.emit('Error', 'Module wasn\'t initiated due to network errors');
		}

	}, 60000);

}

function initSession() {
	
	if(!defaults.chat && !defaults.webrtcEnabled && !defaults.channels.callback.task) return false;

	debug.log('session initiated', api.session);
	
	getLanguages();

	// If page loaded and "widget" property is set - load widget
	if(defaults.widget && !widgetState.initiated && isBrowserSupported()) {
		loadWidget();
	}

	// If timeout was occured, init chat after a session is created
	if(hasWgState('timeout')) {
		removeWgState('timeout');
	}

	api.emit('session/init', {session: api.session, options: defaults, url: global.location.href });
}

function onSessionInit(params){
	storage.saveState('init', true, 'session');
	
	if(widgetWindow && !widgetWindow.closed) widgetWindow.sessionStorage.setItem(defaults.prefix+'.init', true);
}

function requestBrowserAccess() {
	newMessage({
		from: storage.getState('aname', 'session'),
		time: Date.now(),
		content: "{request_browser_access}"
	});
}

function onSessionJoinRequest(params){
	debug.log('onSessionJoinRequest', storage.getState('shared', 'session'));
	if(!storage.getState('shared', 'session')) {
		requestBrowserAccess();
	} else {
		joinSession(params);
	}
}

function joinSession(params) {
	api.shareOpened(); // send confirmation to agent
	onSessionJoin(params);
}

// send shared event to the user's browser
function onSessionJoin(params){
	initCobrowsingModule({ url: params.url, entity: api.session.entity });
}

function onSessionDisjoin() {
	cobrowsing.unshare();
}

function initCobrowsingModule(params){
	// init cobrowsing module only on main window
	if(defaults.external || cobrowsing.isInitiated()) return;

	api.on('cobrowsing/init', function(){
		cobrowsing.share();
		// cobrowsing.emitEvents();
	});

	api.on('cobrowsing/update', function(params){
		cobrowsing.updateEvents(params);
	});

	api.on('cobrowsing/event', function(params){
		api.updateEvents(params.events)
	});

	api.on('cobrowsing/shared', function(){
		storage.saveState('shared', true, 'session');
	});

	api.on('cobrowsing/unshared', function(params){
		storage.saveState('shared', false, 'session');
	});
	
	cobrowsing.init({
		widget: params.widget,
		entity: params.entity,
		emit: publicApi.emit,
		path: defaults.clientPath
	});
}

function getWidgetElement(){
	return widget;
}

function getLanguages(){
	api.getLanguages(function (err, langs){
		debug.log('getLanguages: ', err, langs);
		if(err) return;
		if(langs) onNewLanguages(langs);
		// getLanguagesTimeout = setTimeout(getLanguages, defaults.checkStatusTimeout*1000);
	});
}

function onNewLanguages(languages){
	// debug.log('languages: ', languages);
	var state = languages.length ? 'online' : 'offline';

	langs = languages;

	// if(hasWgState(state)) return;
	// if(widgetState.state === state) return;

	changeWgState({ state: state });
	api.emit('chat/languages', languages);
}

function initWidget(){
	var options = '', selected;

	// debug.log('Init widget!');
	widgetState.initiated = true;

	setStyles();
	setListeners(widget);
	changeWgState({ state: getWidgetState() });

	if(defaults.hideOfflineButton) {
		addWgState('no-button');
	}

	if(defaults.offer) {
		setOffer();
	}

	// if chat started
	if(storage.getState('chat', 'session') === true) {
		requestChat(storage.getState('credentials', 'session') || {});
		if(storage.getState('opened', 'session')) showWidget();
		// initChat();
	}

	// if webrtc supported by the browser and ws_servers parameter is set - change button icon
	if(defaults.webrtcEnabled) {
		addWgState('webrtc-enabled');
	}

	if(widget && defaults.intro.length) {
		// Add languages to the template
		langs.forEach(function(lang) {
			if(frases && frases.lang) {
				selected = lang === api.session.lang ? 'selected' : '';
				options += '<option value="'+lang+'" '+selected+' >'+frases.lang+'</option>';
			}
		});
		global[defaults.prefix+'IntroForm'].lang.innerHTML = options;
	}

	// Widget is initiated
	api.emit('widget/init');
}

function loadWidget(cb){
	
	compiled = compileTemplate('widget', {
		defaults: defaults,
		languages: langs,
		translations: frases,
		credentials: storage.getState('credentials', 'session') || {},
		_: _
	});

	// Widget variable assignment
	widget = domify(compiled);
	document.body.appendChild(widget);
	api.emit('widget/load', widget);

}

function setOffer() {
	setTimeout(function() {
		showOffer({
			from: defaults.offer.from || frases.TOP_BAR.title,
			time: Date.now(),
			content: defaults.offer.text || frases.default_offer
		});
	}, defaults.offer.inSeconds ? defaults.offer.inSeconds*1000 : 30000);
}

function showOffer(message) {
	// Return if user already interact with the widget
	if(widgetState.state !== 'online' || isInteracted()) return;
	newMessage(message);
	// newMessage({ messages: [message] });
}

function setInteracted(){
	if(!storage.getState('interacted', 'session')) {
		storage.saveState('interacted', true, 'session');
	}
}

function isInteracted(){
	return storage.getState('interacted', 'session');
}

function initChat(){
	showWidget();

	// // if chat already started and widget was minimized - just show the widget
	if(storage.getState('chat', 'cache')) return;

	if(!langs.length) {
		switchPane('sendemail');
	} else if(defaults.intro.length) {
		if(storage.getState('chat', 'session')) {
			requestChat(storage.getState('credentials', 'session'));
		} else {
			switchPane('credentials');
		}
	} else {
		requestChat({ lang: api.session.lang });
	}
}

function requestChat(credentials){
	var chatStarted = storage.getState('chat', 'session');
	var message = credentials.message;

	if(!credentials.uname) credentials.uname = api.session.sid;

	// Save user language based on preferable dialog language
	// if(credentials.lang && credentials.lang !== currLang ) {
	// 	storage.saveState('lang', credentials.lang, 'session');
	// }
	if(!credentials.lang) {
		credentials.lang = api.session.lang;
	}
	
	// Save credentials for current session
	// It will be removed on session timeout
	storage.saveState('credentials', credentials, 'session');

	api.chatRequest(credentials);

	setTimeout(function() {
		console.log('requestChat: ', credentials.message, chatStarted);

		if(message && !chatStarted) {
			sendMessage({
				message: credentials.message
			});
		}
	}, 500);

	startChat(api.session);
	clearWgMessages();
	switchPane('messages');
}

function startChat(params){
	var timeout = params.answerTimeout;

	storage.saveState('chat', true, 'session');
	
	if(timeout) {
		chatTimeout = setTimeout(onChatTimeout, timeout*1000);
	}

	addWgState('chat');
}

function sendMessage(params){
	api.sendMessage(params);

	newMessage({
		from: storage.getState('credentials', 'session').uname,
		time: Date.now(),
		content: params.message
		// hidden: true
		// className: defaults.prefix+'-msg-undelivered'
	});

	// if(chatTimeout) clearTimeout(chatTimeout);
}

function newMessage(message){
	debug.log('new messages arrived!', message);

	var str,
		els = [],
		text,
		compiled,
		playSound = false,
		// defaultUname = false,
		credentials = storage.getState('credentials', 'session') || {},
		aname = storage.getState('aname', 'session'),
		uname = credentials.uname ? credentials.uname : ''
		messagesCont = document.getElementById(defaults.prefix+'-messages-cont');

	// if(uname === storage.getState('sid').split('_')[0]) {
	// 	defaultUname = true;
	// }

	// result.messages.forEach(function(message, index) {
		
		message.entity = message.from === uname ? 'user' : 'agent';
		// message.from = (message.entity === 'user' && defaultUname) ? frases.default_user_name : message.from;
		message.from = message.entity === 'user' ? '' : message.from;
		message.time = message.time ? parseTime(message.time) : parseTime(Date.now());

		text = parseMessage(message.content, message.file, message.entity);

		if(text.type === 'form') {

			compiled = compileTemplate('forms', {
				defaults: defaults,
				message: message,
				form: text.content,
				credentials: credentials,
				frases: frases,
				_: _
			});

			if(global[text.content.name]) closeForm({ formName: text.content.name });
			messagesCont.insertAdjacentHTML('beforeend', '<li>'+compiled+'</li>');
			messagesCont.scrollTop = messagesCont.scrollHeight;
		} else {
			if(!message.content) return;
			message.content = text.content;
			compiled = compileTemplate('message', { defaults: defaults, message: message });
			messagesCont.insertAdjacentHTML('beforeend', '<li '+(message.className ? 'class="'+message.className+'"' : '' )+'>'+compiled+'</li>');

			onLastMessage(compiled);

			// Need for sending dialog to email
			if(!message.hidden) {
				dialog.push(compiled);
				messages.push(message);
			}
		}

		// Save agent name
		if(message.entity === 'agent') {
			if(aname !== message.from) storage.saveState('aname', message.from, 'session');
			if(message.from) clearTimeout(chatTimeout);
		}

		if(message.entity !== 'user') playSound = true;

	// });

	messagesCont.scrollTop = messagesCont.scrollHeight;
	// if(playSound) playNewMsgTone();
}

function clearUndelivered(){
	var undelivered = [].slice.call(document.querySelectorAll('.'+defaults.prefix+'-msg-undelivered'));
	if(undelivered && undelivered.length) {
		undelivered.forEach(function(msg){
			msg.classList.add(defaults.prefix+'-hidden');
		});
	}
}

function playNewMsgTone() {
	audio.play('new_message');
}

/**
 * Visual notification about a new message fomr agent.
 * It is also used for offer notification
 * 
 * @param  {String} message - New message content 
 */
function onLastMessage(message){
	var lastMsg;
	if(!widgetState.active) {
		lastMsg = document.getElementById(defaults.prefix+'-lastmsg');

		// PrefixedEvent(lastMsg, 'animationend', ["webkit", "moz", "MS", "o", ""], function(e) {
		// 	btn.children[0].style.height = e.target.scrollHeight + 'px';
		// });

		lastMsg.innerHTML = message;
		// changeWgState({ state: 'notified' });
		addWgState('notified');
		setButtonStyle('notified');

	}
}

function compileEmail(content, cb) {
	var compiled = compileTemplate('email', {
		defaults: defaults,
		content: content,
		frases: frases,
		_: _
	});

	if(cb) return cb(null, compiled);
}

function sendDialog(params){
	var dialogStr = params.text.join('');
	compileEmail(dialogStr, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
	});
}

function sendComplain(params){
	var body = [];
	// TODO: explain...
	var complain = compileTemplate('message', {
		defaults: defaults,
		message: {
			from: frases.EMAIL_SUBJECTS.complain+' '+params.email,
			content: params.text,
			entity: '',
			time: ''
		}
	});

	body = body.concat(
		complain,
		'<br><p class="h1">'+frases.EMAIL_SUBJECTS.dialog+' '+defaults.host+'</p><br>',
		dialog
	).reduce(function(prev, curr) {
		return prev.concat(curr);
	});

	compileEmail(body, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
	});
}

function sendRequest(params, cb) {
	// TODO: explain...
	var msg = compileTemplate('message', {
		defaults: defaults,
		message: {
			from: frases.EMAIL_SUBJECTS.request+' '+params.uname+' ('+params.email+')',
			content: params.text,
			entity: '',
			time: ''
		}
	});

	compileEmail(msg, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
		if(cb) cb();
	});
}

function submitSendMailForm(form, data) {
	var params = {},
		file;

	if(!data.email) {
		alert(frases.ERRORS.email);
		return;
	}

	data.subject = frases.EMAIL_SUBJECTS.request+' '+data.email;

	if(data.file) {
		file = getFileContent(form.file, function(err, result) {
			if(!err) {
				data.filename = result.filename;
				data.filedata = result.filedata;
			} else {
				debug.warn('File wasn\'t sent');
			}
			delete data.file;
			sendRequest(data, function() {
				form.reset();
				closeWidget();
			});
		});
	} else {
		sendRequest(data, function() {
			form.reset();
			closeWidget();
		});
	}
}

function submitCloseChatForm(form, data){
	var rating = (data && data.rating) ? parseInt(data.rating, 10) : null;
	if(data && data.sendDialog) {
		if(!data.email) {
			alert(frases.ERRORS.email);
			return;
		}
		// debug.log('send dialog');
		sendDialog({
			to: data.email,
			subject: frases.EMAIL_SUBJECTS.dialog+' '+defaults.host,
			text: dialog // global variable
		});
	}
	if(data && data.text) {
		if(!data.email) {
			alert(frases.ERRORS.email);
			return;
		} else {
			// debug.log('send complain!');
			sendComplain({
				email: data.email,
				subject: frases.EMAIL_SUBJECTS.complain+' '+data.email,
				text: data.text
			});
		}
	}
	// if(chatTimeout) clearTimeout(chatTimeout);
	if(form) form.reset();
	
	closeChat(rating);
	closeWidget();
}

function closeChat(rating) {
	storage.saveState('chat', false, 'session');
	api.closeChat(rating);
	removeWgState('chat');

	if(storage.getState('shared', 'session')) {
		api.shareClosed(global.location.href);
		cobrowsing.unshare();
	}
}

function onChatClose(){
	if(storage.getState('shared', 'session')) cobrowsing.unshare();
}

function onChatTimeout(){
	debug.log('chat timeout!');
	// switchPane('closechat');
	// storage.saveState('chat', false, 'session');

	newMessage({
		from: "",
		time: Date.now(),
		content: "{queue_overload}"
	});

	var form = global['queue_overload'];
	if(form) form.text.value = messages.reduce(function(str, item){ if(item.entity === 'user') {str += (item.content+"\n")} return str; }, "");
}

function onAgentTyping(){
	// debug.log('Agent is typing!');
	if(!agentIsTypingTimeout) {
		addWgState('agent-typing');
	}
	clearTimeout(agentIsTypingTimeout);
	agentIsTypingTimeout = setTimeout(function() {
		agentIsTypingTimeout = null;
		removeWgState('agent-typing');
		// debug.log('agent is not typing anymore!');
	}, 5000);
}

function onSessionTimeout(){
	// if(api.listenerCount('session/timeout') >= 1) return;
	// api.once('session/timeout', function (){
		debug.log('Session timeout:');

		if(storage.getState('chat', 'session') === true) {
			closeChat();
		}

		switchPane('closechat');

		// if(widget) {
			// addWgState('timeout');
			// closeWidget();
		// }

		// changeWgState({ state: 'timeout' });
		// widgetState.state = 'timeout';
		// addWgState('timeout');
		// setButtonStyle('timeout');
		// storage.removeState('sid');

		// if(params && params.method === 'updateEvents') {
		// if(getLanguagesInterval) clearInterval(getLanguagesInterval);
		// if(messagesTimeout) clearTimeout(messagesTimeout);

		// if(defaults.reCreateSession) {
		// 	initModule();
		// }
		// }
	// });
}

function initCall(){
	switchPane('callAgent');
	WebRTC.audiocall(defaults.channels.webrtc.hotline);
	// WebRTC.audiocall('sip:'+channels.webrtc.hotline+'@'+serverUrl.host);
}

function initFallbackCall(){
	switchPane('callAgentFallback');
}

function initCallback(){
	switchPane('callback');
}

function setCallback(){
	var form = document.getElementById(defaults.prefix+'-callback-settings'),
		formData = getFormData(form),
		cbSpinner = document.getElementById(defaults.prefix+'-callback-spinner'),
		cbSent = document.getElementById(defaults.prefix+'-callback-sent');
	
	formData.phone = formData.phone ? formatPhoneNumber(formData.phone) : null;

	if(!formData.phone || formData.phone.length < 10) {
		return alert(frases.ERRORS.tel);
	}

	formData.time = parseFloat(formData.time);
	
	if(formData.time <= 0) return;

	formData.time = Date.now() + (formData.time * 60 * 1000);
	formData.task = defaults.channels.callback.task;
	debug.log('setCallback data: ', formData);

	form.classList.add(defaults.prefix+'-hidden');
	cbSpinner.classList.remove(defaults.prefix+'-hidden');

	api.requestCallback(formData);
	switchPane('callbackSent');

	form.reset();
}

function onCallbackRequested() {
	var form = document.getElementById(defaults.prefix+'-callback-settings'),
		cbSpinner = document.getElementById(defaults.prefix+'-callback-spinner');

	cbSpinner.classList.add(defaults.prefix+'-hidden');
	form.classList.remove(defaults.prefix+'-hidden');

	if(err) return;
	
	switchPane('callbackSent');
}

function initCallState(state){
	debug.log('initCallState: ', state);

	var spinner = document.getElementById(defaults.prefix+'-call-spinner'),
		info = document.getElementById(defaults.prefix+'-call-info'),
		textState = document.getElementById(defaults.prefix+'-call-state'),
		timer = document.getElementById(defaults.prefix+'-call-timer'),
		tryAgain = document.getElementById(defaults.prefix+'-tryagain-btn');

	if(state === 'newRTCSession') {
		initCallState('oncall');

	} else if(state === 'confirmed') {
		textState.innerText = frases.PANELS.AUDIO_CALL.calling_agent;
		info.classList.remove(defaults.prefix+'-hidden');
		spinner.classList.add(defaults.prefix+'-hidden');
		tryAgain.classList.add(defaults.prefix+'-hidden');

	} else if(state === 'ringing') {
		setTimer(timer, 'init', 0);
		timer.classList.remove(defaults.prefix+'-hidden');
		// audio.play('ringout_loop', true);

	} else if(state === 'connected') {
		textState.innerText = frases.PANELS.AUDIO_CALL.connected_with_agent;
		setTimer(timer, 'start', 0);
		audio.stop();

	} else if(state === 'ended') {
		textState.innerText = frases.PANELS.AUDIO_CALL.call_ended;
		setTimer(timer, 'stop');
		initCallState('oncallend');
		
	} else if(state === 'failed' || state === 'canceled') {
		if(state === 'failed') {
			textState.innerText = frases.PANELS.AUDIO_CALL.call_failed;
		} else {
			textState.innerText = frases.PANELS.AUDIO_CALL.call_canceled;
		}
		info.classList.remove(defaults.prefix+'-hidden');
		spinner.classList.add(defaults.prefix+'-hidden');
		timer.classList.add(defaults.prefix+'-hidden');
		tryAgain.classList.remove(defaults.prefix+'-hidden');
		initCallState('oncallend');
		audio.play('busy');

	} else if(state === 'oncall') {
		window.onbeforeunload = function(){
			return 'Your connection is in progress. Do you realy want to close it?';
		};
		storage.saveState('call', true, 'cache');
		addWgState('webrtc-call');

	} else if(state === 'oncallend') {
		window.onbeforeunload = null;
		storage.saveState('call', false, 'cache');
		removeWgState('webrtc-call');
		// stopRingTone();

	} else if('init') {
		info.classList.add(defaults.prefix+'-hidden');
		spinner.classList.remove(defaults.prefix+'-hidden');
		tryAgain.classList.add(defaults.prefix+'-hidden');
	}
}

function setTimer(timer, state, seconds){
	var time = seconds;
	if(state === 'start') {
		timerUpdateInterval = setInterval(function(){
			time = time+1;
			timer.textContent = convertTime(time);
		}, 1000);
	} else if(state === 'stop') {
		clearInterval(timerUpdateInterval);
	} else if(state === 'init') {
		timer.textContent = convertTime(0);
	}
}

function endCall(){
	if(WebRTC.isEstablished() || WebRTC.isInProgress()) {
		WebRTC.terminate();
	} else {
		closeWidget();
		initCallState('init');
	}
}

// function playRingTone(){
// 	if(ringToneInterval) return;
// 	ringToneInterval = setInterval(function(){
// 		ringTone.play();
// 	}, 3000);
// }

// function stopRingTone(){
// 	clearInterval(ringToneInterval);
// }

/**
 * Open web chat widget in a new window
 */
function openWidget(){
	var opts = {};
	
	if(!widgetWindow || widgetWindow.closed) {

		_.merge(opts, defaults);

		opts.widget = true;
		// set external flag to indicate that the module loads not in the main window
		opts.external = true;

		widgetWindow = window.open('', 'wchat', defaults.widgetWindowOptions);
		widgetWindow = constructWindow(widgetWindow);
		// widgetWindow[globalSettings] = opts;

		// widgetWindow.sessionStorage.setItem('wchat_options', JSON.stringify(opts));

		// Wait while the script is loaded, 
		// then init module in the child window
		_.poll(function(){
			return widgetWindow.Wchat !== undefined;
		}, function(){
			widgetWindow.Module = widgetWindow.Wchat(opts);
			widgetWindow.Module.on('widget/init', function(){
				widgetWindow.Module.initWidgetState();
			});
			
			/* 
			* Proxy all events that is emitted in the child window
			* to the main window, but with the 'window/' prefix before the event name.
			* So, for example, 'chat/start' event in the child window,
			* would be 'window/chat/start' in the main window 
			*/
			_.forEach(api._events, function(value, key, coll){
				widgetWindow.Module.on(key, function(params){
					params.url = global.location.href;
					api.emit('window/'+key, params);
				});
			});

			// widgetWindow.Module.initModule();

		}, function(){
			console.warn('Wchat module was not initiated due to network connection issues.');
		}, 120000);
		
		widgetWindow.onbeforeunload = function(){
			//close chat if user close the widget window
			//without ending a dialog
			if(storage.getState('chat', 'session')) closeChat();
		};
	}
	if(widgetWindow.focus) widgetWindow.focus();
}

function constructWindow(windowObject){
	var loader,
	script,
	link,
	charset,
	viewport,
	title,
	loaderElements = windowObject.document.createElement('div'),
	loaderStyles = createStylesheet(windowObject, 'swc-loader-styles'),
	head = windowObject.document.getElementsByTagName('head')[0],
	body = windowObject.document.getElementsByTagName('body')[0];

	loaderElements.className = "swc-widget-loader";
	loaderElements.innerHTML = "<span></span><span></span><span></span>";

	viewport = windowObject.document.createElement('meta');
	viewport.name = 'viewport';
	viewport.content = 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0';

	charset = windowObject.document.createElement('meta');
	charset.setAttribute('charset', 'utf-8');

	title = windowObject.document.createElement('title');
	title.textContent = frases.TOP_BAR.title;

	// loader = windowObject.document.createElement('script');
	// loader.src = defaults.clientPath+'loader.js';

	script = windowObject.document.createElement('script');
	script.src = defaults.clientPath+'wchat.min.js';
	script.charset = 'UTF-8';

	head.appendChild(viewport);
	head.appendChild(charset);
	head.appendChild(title);
	head.appendChild(loaderStyles);
	head.appendChild(script);

	body.id = 'swc-wg-window';
	body.appendChild(loaderElements);
	// body.appendChild(loader);

	addLoaderRules(head.getElementsByTagName('style')[0]);

	return windowObject;
}

function createStylesheet(windowObject, id){
	// Create the <style> tag
		var style = windowObject.document.createElement("style");
		style.type = 'text/css';
		if(id) style.id = id;

		// WebKit hack :(
		style.appendChild(windowObject.document.createTextNode(""));

		return style;
}

function addLoaderRules(style){
	var theRules = [
		"body { margin:0; background-color: #eee; }",
		"@keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		"@-webkit-keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		"@-moz-keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		"@-ms-keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		"@-o-keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		".swc-widget-loader {",
			"position: absolute;",
			"width: 100%;",
			"top: 50%;",
			"margin-top: -18px;",
			"text-align: center;",
		"}",
		".swc-widget-loader span {",
			"display: inline-block;",
			"width: 18px;",
			"height: 18px;",
			"border-radius: 50%;",
			"background-color: #fff;",
			"margin: 3px;",
		"}",
		".swc-widget-loader span:nth-last-child(1) { -webkit-animation: preloading .8s .1s linear infinite; -moz-animation: preloading .8s .1s linear infinite; -ms-animation: preloading .8s .1s linear infinite; -o-animation: preloading .8s .1s linear infinite; animation: preloading .8s .1s linear infinite; }",
		".swc-widget-loader span:nth-last-child(2) { -webkit-animation: preloading .8s .3s linear infinite; -moz-animation: preloading .8s .3s linear infinite; -ms-animation: preloading .8s .3s linear infinite; -o-animation: preloading .8s .3s linear infinite; animation: preloading .8s .3s linear infinite; }",
		".swc-widget-loader span:nth-last-child(3) { -webkit-animation: preloading .8s .5s linear infinite; -moz-animation: preloading .8s .5s linear infinite; -ms-animation: preloading .8s .5s linear infinite; -o-animation: preloading .8s .5s linear infinite; animation: preloading .8s .5s linear infinite; }",
	].join(" ");

	style.innerHTML = theRules;
}

/**
 * Set Widget event listeners
 * @param {DOMElement} widget - Widget HTML element
 */
function setListeners(widget){
	// var sendMsgBtn = document.getElementById(defaults.prefix+'-send-message'),
	var fileSelect = document.getElementById(defaults.prefix+'-file-select');
	var textField = document.getElementById(defaults.prefix+'-message-text');
	var inputs = [].slice.call(widget.querySelectorAll('.'+defaults.prefix+'-inputfile'));
	var btn = document.getElementById(defaults.prefix+'-btn-cont');
	var panes = [].slice.call(widget.querySelectorAll('.'+defaults.prefix+'-wg-pane'));
	var messagesCont = document.getElementById(defaults.prefix+'-messages-cont');

	inputs.forEach(function(input){
		var label = input.nextElementSibling,
			labelVal = label.textContent;

		addEvent(input, 'change', function(e){
			var fileName = e.target.value.split( '\\' ).pop();
			if(fileName)
				label.textContent = fileName;
			else
				label.textContent = labelVal;
		});
	});

	addEvent(btn, 'click', btnClickHandler);
	addEvent(widget, 'click', wgClickHandler);
	addEvent(widget, 'submit', wgSubmitHandler);
	// addEvent(sendMsgBtn, 'click', wgSendMessage);
	addEvent(fileSelect, 'change', wgSendFile);
	addEvent(textField, 'keypress', wgTypingHandler);
	addEvent(textField, 'focus', wgTextareaFocusHandler);
	addEvent(textField, 'blur', wgTextareaBlurHandler);

	addEvent(global, 'DOMMouseScroll', wgGlobalScrollHandler);
	addEvent(global, 'wheel', wgGlobalScrollHandler);
	// window.ontouchmove  = wgGlobalScrollHandler; // mobile

	addEvent(widget, 'mouseenter', onMouseEnter);
	addEvent(widget, 'mouseleave', onMouseLeave);

	// if(defaults.buttonElement) 
	// 	defaults.buttonElement.addEventListener('click', publicApi.openWidget, false);
}

function setHandlers(selector) {
	var fn = defaults.widget ? initWidgetState : openWidget;
	var els = [].slice.call(document.querySelectorAll(selector));
	els.map(function(el) { addEvent(el, 'click', fn); return el; });
}

/********************************
 * Widget event handlers *
 ********************************/

function onMouseEnter() {
	mouseFocused = true;
}

function onMouseLeave() {
	mouseFocused = false;
}

function wgClickHandler(e){
	var targ = e.target,
		handler,
		pane,
		href,
		dataHref;

	if(targ.parentNode.tagName === 'A' || targ.parentNode.tagName === 'BUTTON')
		targ = targ.parentNode;
	
	handler = targ.getAttribute('data-'+defaults.prefix+'-handler');
	dataHref = targ.getAttribute('data-'+defaults.prefix+'-link');

	if(handler === 'closeWidget') {
		closeWidget();
	} else if(handler === 'finish') {
		if(storage.getState('chat', 'session')) switchPane('closechat');
		else closeWidget();
	} else if(handler === 'sendMessage') {
		wgSendMessage();
	} else if(handler === 'openWindow') {
		openWidget();
	} else if(handler === 'rejectForm') {
		api.emit('form/reject', { formName: _.findParent(targ, 'form').name });
	} else if(handler === 'initCall') {
		initCall();
	} else if(handler === 'initFallbackCall') {
		initFallbackCall();
	} else if(handler === 'initCallback') {
		initCallback();
	} else if(handler === 'setCallback') {
		setCallback();
	} else if(handler === 'initChat') {
		initChat();
	} else if(handler === 'endCall') {
		endCall();
	}

	if(targ.tagName === 'A') {
		href = targ.href;

		if(dataHref) {
			api.linkFollowed(dataHref);
		} else if(href.indexOf('#') !== -1) {
			e.preventDefault();
			pane = href.substring(targ.href.indexOf('#')+1);
			if(pane) switchPane(pane);
		}
	}
}

function btnClickHandler(e){
	e.preventDefault();
	var targ = e.target,
		currTarg = e.currentTarget;

	// remove notification of a new message
	if(targ.id === defaults.prefix+'-unnotify-btn') {
		removeWgState('notified');
		// reset button height
		// resetStyles(btn.children[0]);
		setButtonStyle(widgetState.state);
		return;
	}

	if(currTarg.id === defaults.prefix+'-btn-cont') {
		initWidgetState();
	}
}

function wgGlobalScrollHandler(e) {
	var targ = document.getElementById(defaults.prefix+'-messages-cont');
	var dir = getScrollDirection(e);
	if(mouseFocused) {
		if(targ.scrollTop === 0 && dir === 'up') {
			e.stopPropagation();
			e.preventDefault();
		} else if (targ.scrollTop >= (targ.scrollHeight-targ.clientHeight) && dir === 'down') {
			e.stopPropagation();
			e.preventDefault();
		}
	}
}

function getScrollDirection(event) {
	var delta;

    if(event.wheelDelta) {
        delta = event.wheelDelta;
    } else {
        delta = -1 * event.deltaY;
    }

    if(delta < 0) {
        return "down";
    } else if(delta > 0) {
        return "up";
    }
}

function initWidgetState(){
	var chatInProgress = storage.getState('chat', 'session');
	var wasOpened = storage.getState('opened', 'session');
	var callInProgress = storage.getState('call', 'cache');
	// If element is interacted, then no notifications of a new message 
	// will occur during current browser session
	setInteracted();
	// If timeout is occured, init session first
	if(hasWgState('timeout')) {
		initModule();
	} else if(chatInProgress){
		showWidget();
	} else if(!langs.length){
		switchPane('sendemail');
		showWidget();
	} else if(defaults.webrtcEnabled){
		// if call is in progress - just show the widget
		if(callInProgress) {
			showWidget();
		} else {
			if(!defaults.chat && !defaults.channels.callback.task) {
				initCall();
			} else {
				switchPane('chooseConnection');
			}
			showWidget();
		}
	} else if(defaults.channels.callback.task) {
		if(!defaults.chat && !defaults.webrtcEnabled) {
			switchPane('callback');
			showWidget();
		} else {
			switchPane('chooseConnection');
			showWidget();
		}
	} else {
		initChat();
	}
}

function wgSendMessage(){
	var msg,
		textarea = document.getElementById(defaults.prefix+'-message-text');

	msg = _.trim(textarea.value);
	if(msg) {

		if(!storage.getState('chat', 'session')) {
			initChat();
		}

		sendMessage({ message: msg });
		textarea.value = '';
		removeWgState('type-extend');
	}
}

function wgTypingHandler(e){
	var targ = e.target;
	var clone = document.getElementById("swc-message-text-clone");

	if(e.keyCode === 10 || e.keyCode === 13) {
		e.preventDefault();
		wgSendMessage();
	} else {
		if(!userIsTypingTimeout) {
			userIsTypingTimeout = setTimeout(function() {
				userIsTypingTimeout = null;
				api.userIsTyping();
			}, 1000);
		}
	}

	clone.innerText = targ.value;
	targ.style.height = clone.clientHeight+'px';

	// if(targ.value.length >= 80 && !hasWgState('type-extend'))
	// 	addWgState('type-extend');
	// if(targ.value.length < 80 && hasWgState('type-extend'))
	// 	removeWgState('type-extend');
}

function wgTextareaFocusHandler(e) {
	var target = e.target;
	target.style.borderColor = defaults.styles.primary.backgroundColor;
}

function wgTextareaBlurHandler(e) {
	var target = e.target;
	target.style.borderColor = "#fff";
}

function wgSubmitHandler(e){
	var targ = e.target;
	e.preventDefault();
	if(targ.tagName === 'FORM')
		api.emit('form/submit', { formElement: targ, formData: getFormData(targ) });
}

function wgSendFile(e){
	var targ = e.target;
	var file = getFileContent(targ, function(err, result) {
		debug.log('wgSendFile: ', result);
		if(err) {
			alert('File was not sent');
		} else {
			sendMessage({ message: result.filename, file: result.filedata });
		}
	});
}

/********************************
 * Widget elements manipulation *
 ********************************/

function switchPane(pane){
	// var paneId = defaults.prefix+'-'+pane+'-pane';
	var attr = 'data-'+defaults.prefix+'-pane';
	var panes = [].slice.call(widget.querySelectorAll('.'+defaults.prefix+'-wg-pane'));
	// debug.log('switchPane panes:', panes, 'pane: ', pane);
	panes.forEach(function(item){
		if(item.getAttribute(attr) === pane) {
			item.classList.add('active');
		} else {
			item.classList.remove('active');
		}
	});

	// if(!widgetState.active) showWidget();
}

function changeWgState(params){
	if(!widget || widgetState.state === params.state) return;
	if(params.state === 'offline') {
		closeChat();
		removeWgState('online');
		switchPane('sendemail');
	} else if(params.state === 'online') {
		removeWgState('offline');
		
	}

	var state = document.querySelector('.'+defaults.prefix+'-wg-state');
	if(state) state.textContent = frases.TOP_BAR.STATUS[params.state];

	widgetState.state = params.state;
	addWgState(params.state);
	setButtonStyle(params.state);
	api.emit('widget/statechange', { state: params.state });
	
}

function getWidgetState() {
	return widgetState.state ? widgetState.state : ((langs &&langs.length) ? 'online' : 'offline');
}

function setStyles() {
	var wgBtn = widget.querySelector('.'+defaults.prefix+'-wg-btn');

	console.log('setStyles: ', wgBtn, defaults.buttonStyles);

	wgBtn.style.borderRadius = defaults.buttonStyles.borderRadius;
	wgBtn.style.boxShadow = defaults.buttonStyles.boxShadow;
}

// TODO: This is not a good solution or maybe not a good implementation
function setButtonStyle(state) {
	// debug.log('setButtonStyle: ', state);
	if(!widget || defaults.buttonStyles[state] === undefined) return;
	var wgBtn = widget.querySelector('.'+defaults.prefix+'-wg-btn'),
		btnIcon = widget.querySelector('.'+defaults.prefix+'-btn-icon');

	wgBtn.style.background = defaults.buttonStyles[state].backgroundColor;
	btnIcon.style.color = defaults.buttonStyles[state].color || defaults.buttonStyles.color;
}

function addWgState(state){
	if(widget) widget.classList.add(state);
}

function hasWgState(state){
	if(widget) return widget.classList.contains(state);
	else return false;
}

function removeWgState(state){
	if(widget) widget.classList.remove(state);
}

function showWidget(){
	var messagesCont = document.getElementById(defaults.prefix+'-messages-cont');

	widgetState.active = true;
	storage.saveState('opened', true, 'session');
	addWgState('active');
	removeWgState('notified');

	// reset button height
	// resetStyles(btn.children[0]);
	setButtonStyle(widgetState.state);

	messagesCont.scrollTop = messagesCont.scrollHeight;
}

function closeWidget(){
	if(window.opener) {
		window.close();
	} else {
		widgetState.active = false;
		storage.saveState('opened', false, 'session');
		removeWgState('active');
	}
}

function onFormSubmit(params){
	var form = params.formElement;
	var formData = params.formData;
	debug.log('onFormSubmit: ', form, formData);
	if(form.getAttribute('data-validate-form')) {
		var valid = validateForm(form);
		if(!valid) return;
		// debug.log('onFormSubmit valid: ', valid);
	}
	if(form.id === defaults.prefix+'-closechat-form') {
		submitCloseChatForm(form, formData);
	} else if(form.id === defaults.prefix+'-sendmail-form') {
		submitSendMailForm(form, formData);
	} else if(form.id === defaults.prefix+'-intro-form') {
		requestChat(formData);
	} else if(form.id === defaults.prefix+'-call-btn-form'){
		initCall();
	} else if(form.id === defaults.prefix+'-chat-btn-form'){
		initChat();
	} else if(form.id === defaults.prefix+'-queue_overload'){
		sendRequest(formData);
		closeForm({ formName: form.name }, true);
	} else if(form.id === defaults.prefix+'-request_browser_access'){
		joinSession({ url: global.location.href });
		closeForm({ formName: form.name }, true);
		closeWidget();
	} else {
		closeForm({ formName: form.name }, true);
	}
}

function closeForm(params, submitted){
	var form = global[params.formName];
	if(!form) return false;
	if(submitted) {
		form.outerHTML = '<p class="'+defaults.prefix+'-text-center">'+
							'<i class="'+defaults.prefix+'-text-success '+defaults.prefix+'-icon-check"></i>'+
							'<span> '+frases.FORMS.submitted+'</span>'+
						'</p>';
	} else {
		form.outerHTML = '<p class="'+defaults.prefix+'-text-center">'+
							'<i class="'+defaults.prefix+'-text-danger '+defaults.prefix+'-icon-remove"></i>'+
							'<span> '+frases.FORMS.canceled+'</span>'+
						'</p>';
	}
}

function getFileContent(element, cb){
	var files = element.files,
		file,
		data,
		reader;

	if(!files.length) return;
	if(!global.FileReader) {
		if(cb) cb('OBSOLETE_BROWSER');
		return;
	}

	file = files[0];

	reader = new FileReader();
	reader.onload = function(event) {
		data = event.target.result;
		data = data.substring(data.indexOf(',')+1);
		if(cb) cb(null, { filedata: data, filename: file.name });
	};
	reader.onerror = function(event) {
		api.emit('Error', event.target.error);
		if(cb) cb(event.target.error);
	};
	reader.readAsDataURL(file);
}

function compileTemplate(template, data){
	var compiled = templates[template];
	return compiled(data);
}

function clearWgMessages() {
	var cont = document.getElementById(defaults.prefix+'-messages-cont');
	var clone = cont.cloneNode();
	cont.parentNode.replaceChild(clone, cont);
}

/********************************
 * Helper functions *
 ********************************/

function browserIsObsolete() {
	debug.warn('Your browser is obsolete!');
}

function parseTime(ts) {
	var date = new Date(ts),
		hours = date.getHours(),
		minutes = date.getMinutes(),
		time = (hours < 10 ? '0'+hours : hours) + ':' + (minutes < 10 ? '0'+minutes : minutes);

	return time;
}

function parseMessage(text, file, entity){
	var filename, form;
	if(file) {
		filename = text.substring(text.indexOf('_')+1);
		if(isImage(file)) {
			return {
				type: 'image',
				content: '<a href="'+api.options.server+'/ipcc/'+text+'" download="'+filename+'">' +
						'<img src="'+api.options.server+'/ipcc/'+text+'" alt="file preview" />' +
					'</a>'
			};
		} else {
			return {
				type: 'file',
				content: '<a href="'+api.options.server+'/ipcc/'+text+'" download="'+filename+'">'+filename+'</a>'
			};
		}
	} else if(entity === 'agent' && isLink(text) && isImage(text)) {
		filename = text.substring(text.indexOf('_')+1)
		return {
			type: 'image',
			content: '<a href="'+text+'" target="_blank">' +
					'<img src="'+text+'" alt="'+filename+'" />' +
				'</a>'
		};
	} else if(entity === 'agent' && new RegExp('^{.+}$').test(text)) {
		forms.forEach(function(item) {
			if(item.name === text.substring(1, text.length-1)) {
				form = item;
			}
		});

		return {
			type: form ? 'form' : 'text',
			content: form ? form : text
		};
	} else {
		return {
			type: 'text',
			content: text.replace(/\n/g, ' <br> ').split(" ").map(convertLinks).join(" ").replace(' <br> ', '<br>')
		};
	}
}

function convertLinks(text){
	var leftovers = 0;
	var href = text;
	if(isLink(text)){

		while(!(href.charAt(href.length-1).match(/[a-z0-9\/]/i))){
			href = href.slice(0,-1);
			leftovers += 1;
		}
		return '<a href="'+href+'" target="_blank" data-'+defaults.prefix+'-link="'+href+'">'+href+'</a>' + text.substr(text.length - leftovers);
	} else {
		return text;
	}
}

function isLink(text){
	var pattern = new RegExp('^http:\/\/|^https:\/\/');
	return pattern.test(text);
}

function isImage(filename){
	var regex = new RegExp('png|PNG|jpg|JPG|JPEG|jpeg|gif|GIF');
	var ext = filename.substring(filename.lastIndexOf('.')+1);
	return regex.test(ext);
}

function getFormData(form){
	var formData = {};
	[].slice.call(form.elements).forEach(function(el) {
		if(el.type === 'checkbox') formData[el.name] = el.checked;
		else {
			if(el.value) formData[el.name] = el.value;
		}
	});
	return formData;
}

function validateForm(form){
	var valid = true;
	[].slice.call(form.elements).every(function(el) {
		// debug.log('validateForm el:', el, el.hasAttribute('required'), el.value, el.type);
		if(el.hasAttribute('required') && (el.value === "" || el.value === null)) {
			alert(frases.ERRORS[el.type] || frases.ERRORS.required);
			valid = false;
			return false;
		} else {
			return true;
		}
	});
	// debug.log('validateForm valid: ', valid);
	return valid;
}

// function resetStyles(element){
// 	element.removeAttribute('style');
// }

function addWidgetStyles(){
	
	var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.href = defaults.stylesPath || defaults.clientPath+'main.css';

	document.head.appendChild(link);
}

function PrefixedEvent(element, type, pfx, callback) {
	for (var p = 0; p < pfx.length; p++) {
		if (!pfx[p]) type = type.toLowerCase();
		element.addEventListener(pfx[p]+type, callback, false);
	}
}

function convertTime(seconds){
	var minutes = Math.floor(seconds / 60),
		secsRemain = seconds % 60,
		str = (minutes > 9 ? minutes : '0' + minutes) + ':' + (secsRemain > 9 ? secsRemain : '0' + secsRemain);
	return str;
}

function formatPhoneNumber(phone) {
	return phone.replace(/\D+/g, "");
}

function isBrowserSupported() {
	return document.body.classList !== undefined;
}

function addEvent(obj, evType, fn) {
  if (obj.addEventListener) obj.addEventListener(evType, fn, false);
  else if (obj.attachEvent) obj.attachEvent("on"+evType, fn);
}
function removeEvent(obj, evType, fn) {
  if (obj.removeEventListener) obj.removeEventListener(evType, fn, false);
  else if (obj.detachEvent) obj.detachEvent("on"+evType, fn);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./audio-control":74,"./cobrowsing":75,"./core":76,"./debug":77,"./lodash":79,"./request":81,"./storage":82,"./templates":83,"./webrtc":84,"domify":1}]},{},[80])(80)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZG9taWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJub2RlX21vZHVsZXMvaW5oZXJpdHMvaW5oZXJpdHNfYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvY29sbGVjdGlvbi9mb3JFYWNoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9kYXRlL25vdy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvZnVuY3Rpb24vZGVib3VuY2UuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2Z1bmN0aW9uL3Jlc3RQYXJhbS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvZnVuY3Rpb24vdGhyb3R0bGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2FycmF5Q29weS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYXJyYXlFYWNoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9hcnJheVNvbWUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Fzc2lnbk93bkRlZmF1bHRzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9hc3NpZ25XaXRoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlQXNzaWduLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlQ29weS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZUVhY2guanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VGb3IuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VGb3JJbi5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZUZvck93bi5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZUlzRXF1YWwuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VJc0VxdWFsRGVlcC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZU1lcmdlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlTWVyZ2VEZWVwLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlUHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VUb1N0cmluZy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZVZhbHVlcy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmluZENhbGxiYWNrLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9jaGFyc0xlZnRJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvY2hhcnNSaWdodEluZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9jcmVhdGVBc3NpZ25lci5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvY3JlYXRlQmFzZUVhY2guanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NyZWF0ZUJhc2VGb3IuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NyZWF0ZUZvckVhY2guanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2VxdWFsQXJyYXlzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9lcXVhbEJ5VGFnLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9lcXVhbE9iamVjdHMuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2VzY2FwZUh0bWxDaGFyLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9lc2NhcGVTdHJpbmdDaGFyLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9nZXRMZW5ndGguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2dldE5hdGl2ZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvaXNBcnJheUxpa2UuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2lzSW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2lzSXRlcmF0ZWVDYWxsLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9pc0xlbmd0aC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvaXNPYmplY3RMaWtlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9pc1NwYWNlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9yZUVzY2FwZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvcmVFdmFsdWF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvcmVJbnRlcnBvbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvc2hpbUtleXMuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL3RvT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC90cmltbWVkTGVmdEluZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC90cmltbWVkUmlnaHRJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc0FyZ3VtZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc0FycmF5LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL2lzRXF1YWwuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNFcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc0Z1bmN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL2lzTmF0aXZlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL2lzT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL2lzUGxhaW5PYmplY3QuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNUeXBlZEFycmF5LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL3RvUGxhaW5PYmplY3QuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL29iamVjdC9hc3NpZ24uanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL29iamVjdC9rZXlzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9vYmplY3Qva2V5c0luLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9vYmplY3QvbWVyZ2UuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL3N0cmluZy9lc2NhcGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL3N0cmluZy90ZW1wbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvc3RyaW5nL3RlbXBsYXRlU2V0dGluZ3MuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL3N0cmluZy90cmltLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC91dGlsaXR5L2F0dGVtcHQuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL3V0aWxpdHkvaWRlbnRpdHkuanMiLCJzb3VyY2Uvc2NyaXB0cy9hdWRpby1jb250cm9sLmpzIiwic291cmNlL3NjcmlwdHMvY29icm93c2luZy5qcyIsInNvdXJjZS9zY3JpcHRzL2NvcmUuanMiLCJzb3VyY2Uvc2NyaXB0cy9kZWJ1Zy5qcyIsInNvdXJjZS9zY3JpcHRzL2pzc2lwLm1pbi5qcyIsInNvdXJjZS9zY3JpcHRzL2xvZGFzaC5qcyIsInNvdXJjZS9zY3JpcHRzL21haW4uanMiLCJzb3VyY2Uvc2NyaXB0cy9yZXF1ZXN0LmpzIiwic291cmNlL3NjcmlwdHMvc3RvcmFnZS5qcyIsInNvdXJjZS9zY3JpcHRzL3RlbXBsYXRlcy5qcyIsInNvdXJjZS9zY3JpcHRzL3dlYnJ0Yy5qcyIsInNvdXJjZS9zY3JpcHRzL3dpZGdldC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2hrQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDcHZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzc1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25KQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJcbi8qKlxuICogRXhwb3NlIGBwYXJzZWAuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZTtcblxuLyoqXG4gKiBUZXN0cyBmb3IgYnJvd3NlciBzdXBwb3J0LlxuICovXG5cbnZhciBpbm5lckhUTUxCdWcgPSBmYWxzZTtcbnZhciBidWdUZXN0RGl2O1xuaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgYnVnVGVzdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAvLyBTZXR1cFxuICBidWdUZXN0RGl2LmlubmVySFRNTCA9ICcgIDxsaW5rLz48dGFibGU+PC90YWJsZT48YSBocmVmPVwiL2FcIj5hPC9hPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIi8+JztcbiAgLy8gTWFrZSBzdXJlIHRoYXQgbGluayBlbGVtZW50cyBnZXQgc2VyaWFsaXplZCBjb3JyZWN0bHkgYnkgaW5uZXJIVE1MXG4gIC8vIFRoaXMgcmVxdWlyZXMgYSB3cmFwcGVyIGVsZW1lbnQgaW4gSUVcbiAgaW5uZXJIVE1MQnVnID0gIWJ1Z1Rlc3REaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xpbmsnKS5sZW5ndGg7XG4gIGJ1Z1Rlc3REaXYgPSB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogV3JhcCBtYXAgZnJvbSBqcXVlcnkuXG4gKi9cblxudmFyIG1hcCA9IHtcbiAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcbiAgdHI6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddLFxuICAvLyBmb3Igc2NyaXB0L2xpbmsvc3R5bGUgdGFncyB0byB3b3JrIGluIElFNi04LCB5b3UgaGF2ZSB0byB3cmFwXG4gIC8vIGluIGEgZGl2IHdpdGggYSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXIgaW4gZnJvbnQsIGhhIVxuICBfZGVmYXVsdDogaW5uZXJIVE1MQnVnID8gWzEsICdYPGRpdj4nLCAnPC9kaXY+J10gOiBbMCwgJycsICcnXVxufTtcblxubWFwLnRkID1cbm1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG5tYXAub3B0aW9uID1cbm1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xuXG5tYXAudGhlYWQgPVxubWFwLnRib2R5ID1cbm1hcC5jb2xncm91cCA9XG5tYXAuY2FwdGlvbiA9XG5tYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcblxubWFwLnBvbHlsaW5lID1cbm1hcC5lbGxpcHNlID1cbm1hcC5wb2x5Z29uID1cbm1hcC5jaXJjbGUgPVxubWFwLnRleHQgPVxubWFwLmxpbmUgPVxubWFwLnBhdGggPVxubWFwLnJlY3QgPVxubWFwLmcgPSBbMSwgJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZlcnNpb249XCIxLjFcIj4nLCc8L3N2Zz4nXTtcblxuLyoqXG4gKiBQYXJzZSBgaHRtbGAgYW5kIHJldHVybiBhIERPTSBOb2RlIGluc3RhbmNlLCB3aGljaCBjb3VsZCBiZSBhIFRleHROb2RlLFxuICogSFRNTCBET00gTm9kZSBvZiBzb21lIGtpbmQgKDxkaXY+IGZvciBleGFtcGxlKSwgb3IgYSBEb2N1bWVudEZyYWdtZW50XG4gKiBpbnN0YW5jZSwgZGVwZW5kaW5nIG9uIHRoZSBjb250ZW50cyBvZiB0aGUgYGh0bWxgIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaHRtbCAtIEhUTUwgc3RyaW5nIHRvIFwiZG9taWZ5XCJcbiAqIEBwYXJhbSB7RG9jdW1lbnR9IGRvYyAtIFRoZSBgZG9jdW1lbnRgIGluc3RhbmNlIHRvIGNyZWF0ZSB0aGUgTm9kZSBmb3JcbiAqIEByZXR1cm4ge0RPTU5vZGV9IHRoZSBUZXh0Tm9kZSwgRE9NIE5vZGUsIG9yIERvY3VtZW50RnJhZ21lbnQgaW5zdGFuY2VcbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKGh0bWwsIGRvYykge1xuICBpZiAoJ3N0cmluZycgIT0gdHlwZW9mIGh0bWwpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1N0cmluZyBleHBlY3RlZCcpO1xuXG4gIC8vIGRlZmF1bHQgdG8gdGhlIGdsb2JhbCBgZG9jdW1lbnRgIG9iamVjdFxuICBpZiAoIWRvYykgZG9jID0gZG9jdW1lbnQ7XG5cbiAgLy8gdGFnIG5hbWVcbiAgdmFyIG0gPSAvPChbXFx3Ol0rKS8uZXhlYyhodG1sKTtcbiAgaWYgKCFtKSByZXR1cm4gZG9jLmNyZWF0ZVRleHROb2RlKGh0bWwpO1xuXG4gIGh0bWwgPSBodG1sLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTsgLy8gUmVtb3ZlIGxlYWRpbmcvdHJhaWxpbmcgd2hpdGVzcGFjZVxuXG4gIHZhciB0YWcgPSBtWzFdO1xuXG4gIC8vIGJvZHkgc3VwcG9ydFxuICBpZiAodGFnID09ICdib2R5Jykge1xuICAgIHZhciBlbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgZWwuaW5uZXJIVE1MID0gaHRtbDtcbiAgICByZXR1cm4gZWwucmVtb3ZlQ2hpbGQoZWwubGFzdENoaWxkKTtcbiAgfVxuXG4gIC8vIHdyYXAgbWFwXG4gIHZhciB3cmFwID0gbWFwW3RhZ10gfHwgbWFwLl9kZWZhdWx0O1xuICB2YXIgZGVwdGggPSB3cmFwWzBdO1xuICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcbiAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG4gIHZhciBlbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZWwuaW5uZXJIVE1MID0gcHJlZml4ICsgaHRtbCArIHN1ZmZpeDtcbiAgd2hpbGUgKGRlcHRoLS0pIGVsID0gZWwubGFzdENoaWxkO1xuXG4gIC8vIG9uZSBlbGVtZW50XG4gIGlmIChlbC5maXJzdENoaWxkID09IGVsLmxhc3RDaGlsZCkge1xuICAgIHJldHVybiBlbC5yZW1vdmVDaGlsZChlbC5maXJzdENoaWxkKTtcbiAgfVxuXG4gIC8vIHNldmVyYWwgZWxlbWVudHNcbiAgdmFyIGZyYWdtZW50ID0gZG9jLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgd2hpbGUgKGVsLmZpcnN0Q2hpbGQpIHtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChlbC5yZW1vdmVDaGlsZChlbC5maXJzdENoaWxkKSk7XG4gIH1cblxuICByZXR1cm4gZnJhZ21lbnQ7XG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuICB0aGlzLl9ldmVudHMgPSB0aGlzLl9ldmVudHMgfHwge307XG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC4xMC54XG5FdmVudEVtaXR0ZXIuRXZlbnRFbWl0dGVyID0gRXZlbnRFbWl0dGVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9ldmVudHMgPSB1bmRlZmluZWQ7XG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG5cbi8vIEJ5IGRlZmF1bHQgRXZlbnRFbWl0dGVycyB3aWxsIHByaW50IGEgd2FybmluZyBpZiBtb3JlIHRoYW4gMTAgbGlzdGVuZXJzIGFyZVxuLy8gYWRkZWQgdG8gaXQuIFRoaXMgaXMgYSB1c2VmdWwgZGVmYXVsdCB3aGljaCBoZWxwcyBmaW5kaW5nIG1lbW9yeSBsZWFrcy5cbkV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzID0gMTA7XG5cbi8vIE9idmlvdXNseSBub3QgYWxsIEVtaXR0ZXJzIHNob3VsZCBiZSBsaW1pdGVkIHRvIDEwLiBUaGlzIGZ1bmN0aW9uIGFsbG93c1xuLy8gdGhhdCB0byBiZSBpbmNyZWFzZWQuIFNldCB0byB6ZXJvIGZvciB1bmxpbWl0ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnNldE1heExpc3RlbmVycyA9IGZ1bmN0aW9uKG4pIHtcbiAgaWYgKCFpc051bWJlcihuKSB8fCBuIDwgMCB8fCBpc05hTihuKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlcicpO1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSBuO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGVyLCBoYW5kbGVyLCBsZW4sIGFyZ3MsIGksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmICh0eXBlID09PSAnZXJyb3InKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHMuZXJyb3IgfHxcbiAgICAgICAgKGlzT2JqZWN0KHRoaXMuX2V2ZW50cy5lcnJvcikgJiYgIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKSB7XG4gICAgICBlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgICAgfVxuICAgICAgdGhyb3cgVHlwZUVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LicpO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzVW5kZWZpbmVkKGhhbmRsZXIpKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAoaXNGdW5jdGlvbihoYW5kbGVyKSkge1xuICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgLy8gZmFzdCBjYXNlc1xuICAgICAgY2FzZSAxOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0sIGFyZ3VtZW50c1syXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gc2xvd2VyXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgaGFuZGxlci5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNPYmplY3QoaGFuZGxlcikpIHtcbiAgICBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICBsaXN0ZW5lcnMgPSBoYW5kbGVyLnNsaWNlKCk7XG4gICAgbGVuID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICBpZiAodGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyKVxuICAgIHRoaXMuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICBpc0Z1bmN0aW9uKGxpc3RlbmVyLmxpc3RlbmVyKSA/XG4gICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyIDogbGlzdGVuZXIpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIC8vIE9wdGltaXplIHRoZSBjYXNlIG9mIG9uZSBsaXN0ZW5lci4gRG9uJ3QgbmVlZCB0aGUgZXh0cmEgYXJyYXkgb2JqZWN0LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICBlbHNlIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgZ290IGFuIGFycmF5LCBqdXN0IGFwcGVuZC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0ucHVzaChsaXN0ZW5lcik7XG4gIGVsc2VcbiAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBbdGhpcy5fZXZlbnRzW3R5cGVdLCBsaXN0ZW5lcl07XG5cbiAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkgJiYgIXRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQpIHtcbiAgICBpZiAoIWlzVW5kZWZpbmVkKHRoaXMuX21heExpc3RlbmVycykpIHtcbiAgICAgIG0gPSB0aGlzLl9tYXhMaXN0ZW5lcnM7XG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgICB9XG5cbiAgICBpZiAobSAmJiBtID4gMCAmJiB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoID4gbSkge1xuICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmVycm9yKCcobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSAnICtcbiAgICAgICAgICAgICAgICAgICAgJ2xlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICdVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC4nLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbdHlwZV0ubGVuZ3RoKTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZS50cmFjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyBub3Qgc3VwcG9ydGVkIGluIElFIDEwXG4gICAgICAgIGNvbnNvbGUudHJhY2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgdmFyIGZpcmVkID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gZygpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGcpO1xuXG4gICAgaWYgKCFmaXJlZCkge1xuICAgICAgZmlyZWQgPSB0cnVlO1xuICAgICAgbGlzdGVuZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBnLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHRoaXMub24odHlwZSwgZyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBlbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWZmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZFxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBsaXN0LCBwb3NpdGlvbiwgbGVuZ3RoLCBpO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIGxpc3QgPSB0aGlzLl9ldmVudHNbdHlwZV07XG4gIGxlbmd0aCA9IGxpc3QubGVuZ3RoO1xuICBwb3NpdGlvbiA9IC0xO1xuXG4gIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fFxuICAgICAgKGlzRnVuY3Rpb24obGlzdC5saXN0ZW5lcikgJiYgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcblxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGxpc3QpKSB7XG4gICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gPiAwOykge1xuICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8XG4gICAgICAgICAgKGxpc3RbaV0ubGlzdGVuZXIgJiYgbGlzdFtpXS5saXN0ZW5lciA9PT0gbGlzdGVuZXIpKSB7XG4gICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHBvc2l0aW9uIDwgMClcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICBsaXN0Lmxlbmd0aCA9IDA7XG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaXN0LnNwbGljZShwb3NpdGlvbiwgMSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIga2V5LCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgLy8gbm90IGxpc3RlbmluZyBmb3IgcmVtb3ZlTGlzdGVuZXIsIG5vIG5lZWQgdG8gZW1pdFxuICBpZiAoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgZWxzZSBpZiAodGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIGZvciAoa2V5IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhrZXkpO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGxpc3RlbmVycyA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNGdW5jdGlvbihsaXN0ZW5lcnMpKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICB9IGVsc2UgaWYgKGxpc3RlbmVycykge1xuICAgIC8vIExJRk8gb3JkZXJcbiAgICB3aGlsZSAobGlzdGVuZXJzLmxlbmd0aClcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2xpc3RlbmVycy5sZW5ndGggLSAxXSk7XG4gIH1cbiAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgcmV0O1xuICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhdGhpcy5fZXZlbnRzW3R5cGVdKVxuICAgIHJldCA9IFtdO1xuICBlbHNlIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgcmV0ID0gW3RoaXMuX2V2ZW50c1t0eXBlXV07XG4gIGVsc2VcbiAgICByZXQgPSB0aGlzLl9ldmVudHNbdHlwZV0uc2xpY2UoKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgaWYgKHRoaXMuX2V2ZW50cykge1xuICAgIHZhciBldmxpc3RlbmVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oZXZsaXN0ZW5lcikpXG4gICAgICByZXR1cm4gMTtcbiAgICBlbHNlIGlmIChldmxpc3RlbmVyKVxuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuRXZlbnRFbWl0dGVyLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbihlbWl0dGVyLCB0eXBlKSB7XG4gIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG59O1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG4iLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cbiIsInZhciBhcnJheUVhY2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9hcnJheUVhY2gnKSxcbiAgICBiYXNlRWFjaCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VFYWNoJyksXG4gICAgY3JlYXRlRm9yRWFjaCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NyZWF0ZUZvckVhY2gnKTtcblxuLyoqXG4gKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYCBpbnZva2luZyBgaXRlcmF0ZWVgIGZvciBlYWNoIGVsZW1lbnQuXG4gKiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHlcbiAqIGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gKlxuICogKipOb3RlOioqIEFzIHdpdGggb3RoZXIgXCJDb2xsZWN0aW9uc1wiIG1ldGhvZHMsIG9iamVjdHMgd2l0aCBhIFwibGVuZ3RoXCIgcHJvcGVydHlcbiAqIGFyZSBpdGVyYXRlZCBsaWtlIGFycmF5cy4gVG8gYXZvaWQgdGhpcyBiZWhhdmlvciBgXy5mb3JJbmAgb3IgYF8uZm9yT3duYFxuICogbWF5IGJlIHVzZWQgZm9yIG9iamVjdCBpdGVyYXRpb24uXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBhbGlhcyBlYWNoXG4gKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8oWzEsIDJdKS5mb3JFYWNoKGZ1bmN0aW9uKG4pIHtcbiAqICAgY29uc29sZS5sb2cobik7XG4gKiB9KS52YWx1ZSgpO1xuICogLy8gPT4gbG9ncyBlYWNoIHZhbHVlIGZyb20gbGVmdCB0byByaWdodCBhbmQgcmV0dXJucyB0aGUgYXJyYXlcbiAqXG4gKiBfLmZvckVhY2goeyAnYSc6IDEsICdiJzogMiB9LCBmdW5jdGlvbihuLCBrZXkpIHtcbiAqICAgY29uc29sZS5sb2cobiwga2V5KTtcbiAqIH0pO1xuICogLy8gPT4gbG9ncyBlYWNoIHZhbHVlLWtleSBwYWlyIGFuZCByZXR1cm5zIHRoZSBvYmplY3QgKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqL1xudmFyIGZvckVhY2ggPSBjcmVhdGVGb3JFYWNoKGFycmF5RWFjaCwgYmFzZUVhY2gpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZvckVhY2g7XG4iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZ2V0TmF0aXZlJyk7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTm93ID0gZ2V0TmF0aXZlKERhdGUsICdub3cnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBVbml4IGVwb2NoXG4gKiAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IERhdGVcbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBsb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBmdW5jdGlvbiB0byBiZSBpbnZva2VkXG4gKi9cbnZhciBub3cgPSBuYXRpdmVOb3cgfHwgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbm93O1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpLFxuICAgIG5vdyA9IHJlcXVpcmUoJy4uL2RhdGUvbm93Jyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGludm9jYXRpb25zLiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlIHRoYXQgYGZ1bmNgXG4gKiBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3RcbiAqIGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXMgaW52b2tlZFxuICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiBpc1xuICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwOi8vZHJ1cGFsbW90aW9uLmNvbS9hcnRpY2xlL2RlYm91bmNlLWFuZC10aHJvdHRsZS12aXN1YWwtZXhwbGFuYXRpb24pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmdcbiAqICBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmVcbiAqICBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nXG4gKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gYXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eFxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBpbnZva2UgYHNlbmRNYWlsYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzXG4gKiBqUXVlcnkoJyNwb3N0Ym94Jykub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBlbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzXG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwge1xuICogICAnbWF4V2FpdCc6IDEwMDBcbiAqIH0pKTtcbiAqXG4gKiAvLyBjYW5jZWwgYSBkZWJvdW5jZWQgY2FsbFxuICogdmFyIHRvZG9DaGFuZ2VzID0gXy5kZWJvdW5jZShiYXRjaExvZywgMTAwMCk7XG4gKiBPYmplY3Qub2JzZXJ2ZShtb2RlbHMudG9kbywgdG9kb0NoYW5nZXMpO1xuICpcbiAqIE9iamVjdC5vYnNlcnZlKG1vZGVscywgZnVuY3Rpb24oY2hhbmdlcykge1xuICogICBpZiAoXy5maW5kKGNoYW5nZXMsIHsgJ3VzZXInOiAndG9kbycsICd0eXBlJzogJ2RlbGV0ZSd9KSkge1xuICogICAgIHRvZG9DaGFuZ2VzLmNhbmNlbCgpO1xuICogICB9XG4gKiB9LCBbJ2RlbGV0ZSddKTtcbiAqXG4gKiAvLyAuLi5hdCBzb21lIHBvaW50IGBtb2RlbHMudG9kb2AgaXMgY2hhbmdlZFxuICogbW9kZWxzLnRvZG8uY29tcGxldGVkID0gdHJ1ZTtcbiAqXG4gKiAvLyAuLi5iZWZvcmUgMSBzZWNvbmQgaGFzIHBhc3NlZCBgbW9kZWxzLnRvZG9gIGlzIGRlbGV0ZWRcbiAqIC8vIHdoaWNoIGNhbmNlbHMgdGhlIGRlYm91bmNlZCBgdG9kb0NoYW5nZXNgIGNhbGxcbiAqIGRlbGV0ZSBtb2RlbHMudG9kbztcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgYXJncyxcbiAgICAgIG1heFRpbWVvdXRJZCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHN0YW1wLFxuICAgICAgdGhpc0FyZyxcbiAgICAgIHRpbWVvdXRJZCxcbiAgICAgIHRyYWlsaW5nQ2FsbCxcbiAgICAgIGxhc3RDYWxsZWQgPSAwLFxuICAgICAgbWF4V2FpdCA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB3YWl0IDwgMCA/IDAgOiAoK3dhaXQgfHwgMCk7XG4gIGlmIChvcHRpb25zID09PSB0cnVlKSB7XG4gICAgdmFyIGxlYWRpbmcgPSB0cnVlO1xuICAgIHRyYWlsaW5nID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4V2FpdCA9ICdtYXhXYWl0JyBpbiBvcHRpb25zICYmIG5hdGl2ZU1heCgrb3B0aW9ucy5tYXhXYWl0IHx8IDAsIHdhaXQpO1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgIH1cbiAgICBsYXN0Q2FsbGVkID0gMDtcbiAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wbGV0ZShpc0NhbGxlZCwgaWQpIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgfVxuICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgIGxhc3RDYWxsZWQgPSBub3coKTtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGF5ZWQoKSB7XG4gICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93KCkgLSBzdGFtcCk7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgIGNvbXBsZXRlKHRyYWlsaW5nQ2FsbCwgbWF4VGltZW91dElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLCByZW1haW5pbmcpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1heERlbGF5ZWQoKSB7XG4gICAgY29tcGxldGUodHJhaWxpbmcsIHRpbWVvdXRJZCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICBzdGFtcCA9IG5vdygpO1xuICAgIHRoaXNBcmcgPSB0aGlzO1xuICAgIHRyYWlsaW5nQ2FsbCA9IHRyYWlsaW5nICYmICh0aW1lb3V0SWQgfHwgIWxlYWRpbmcpO1xuXG4gICAgaWYgKG1heFdhaXQgPT09IGZhbHNlKSB7XG4gICAgICB2YXIgbGVhZGluZ0NhbGwgPSBsZWFkaW5nICYmICF0aW1lb3V0SWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghbWF4VGltZW91dElkICYmICFsZWFkaW5nKSB7XG4gICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgIH1cbiAgICAgIHZhciByZW1haW5pbmcgPSBtYXhXYWl0IC0gKHN0YW1wIC0gbGFzdENhbGxlZCksXG4gICAgICAgICAgaXNDYWxsZWQgPSByZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiBtYXhXYWl0O1xuXG4gICAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xuICAgICAgICAgIG1heFRpbWVvdXRJZCA9IGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgbWF4VGltZW91dElkID0gc2V0VGltZW91dChtYXhEZWxheWVkLCByZW1haW5pbmcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNDYWxsZWQgJiYgdGltZW91dElkKSB7XG4gICAgICB0aW1lb3V0SWQgPSBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIXRpbWVvdXRJZCAmJiB3YWl0ICE9PSBtYXhXYWl0KSB7XG4gICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHdhaXQpO1xuICAgIH1cbiAgICBpZiAobGVhZGluZ0NhbGwpIHtcbiAgICAgIGlzQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgfVxuICAgIGlmIChpc0NhbGxlZCAmJiAhdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcbiAgICAgIGFyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG4iLCIvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGVcbiAqIGNyZWF0ZWQgZnVuY3Rpb24gYW5kIGFyZ3VtZW50cyBmcm9tIGBzdGFydGAgYW5kIGJleW9uZCBwcm92aWRlZCBhcyBhbiBhcnJheS5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlIFtyZXN0IHBhcmFtZXRlcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0Z1bmN0aW9ucy9yZXN0X3BhcmFtZXRlcnMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIHNheSA9IF8ucmVzdFBhcmFtKGZ1bmN0aW9uKHdoYXQsIG5hbWVzKSB7XG4gKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcbiAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuICogfSk7XG4gKlxuICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG4gKiAvLyA9PiAnaGVsbG8gZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIHJlc3RQYXJhbShmdW5jLCBzdGFydCkge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiAoK3N0YXJ0IHx8IDApLCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgIHJlc3QgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHJlc3RbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcbiAgICB9XG4gICAgc3dpdGNoIChzdGFydCkge1xuICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIHJlc3QpO1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIHJlc3QpO1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0sIHJlc3QpO1xuICAgIH1cbiAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcbiAgICBpbmRleCA9IC0xO1xuICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICB9XG4gICAgb3RoZXJBcmdzW3N0YXJ0XSA9IHJlc3Q7XG4gICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgb3RoZXJBcmdzKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXN0UGFyYW07XG4iLCJ2YXIgZGVib3VuY2UgPSByZXF1aXJlKCcuL2RlYm91bmNlJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0Jyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKipcbiAqIENyZWF0ZXMgYSB0aHJvdHRsZWQgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXJcbiAqIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgXG4gKiBtZXRob2QgdG8gY2FuY2VsIGRlbGF5ZWQgaW52b2NhdGlvbnMuIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGVcbiAqIHRoYXQgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZVxuICogYHdhaXRgIHRpbWVvdXQuIFN1YnNlcXVlbnQgY2FsbHMgdG8gdGhlIHRocm90dGxlZCBmdW5jdGlvbiByZXR1cm4gdGhlXG4gKiByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGNhbGwuXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcyBpbnZva2VkXG4gKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIGlzXG4gKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHA6Ly9kcnVwYWxtb3Rpb24uY29tL2FydGljbGUvZGVib3VuY2UtYW5kLXRocm90dGxlLXZpc3VhbC1leHBsYW5hdGlvbilcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8udGhyb3R0bGVgIGFuZCBgXy5kZWJvdW5jZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgaW52b2NhdGlvbnMgdG8uXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXSBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nXG4gKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0gU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmdcbiAqICBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBhdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nXG4gKiBqUXVlcnkod2luZG93KS5vbignc2Nyb2xsJywgXy50aHJvdHRsZSh1cGRhdGVQb3NpdGlvbiwgMTAwKSk7XG4gKlxuICogLy8gaW52b2tlIGByZW5ld1Rva2VuYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgYnV0IG5vdCBtb3JlIHRoYW4gb25jZSBldmVyeSA1IG1pbnV0ZXNcbiAqIGpRdWVyeSgnLmludGVyYWN0aXZlJykub24oJ2NsaWNrJywgXy50aHJvdHRsZShyZW5ld1Rva2VuLCAzMDAwMDAsIHtcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBjYW5jZWwgYSB0cmFpbGluZyB0aHJvdHRsZWQgY2FsbFxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhyb3R0bGVkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxlYWRpbmcgPSB0cnVlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgIGxlYWRpbmcgPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAnbGVhZGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy5sZWFkaW5nIDogbGVhZGluZztcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG4gIHJldHVybiBkZWJvdW5jZShmdW5jLCB3YWl0LCB7ICdsZWFkaW5nJzogbGVhZGluZywgJ21heFdhaXQnOiArd2FpdCwgJ3RyYWlsaW5nJzogdHJhaWxpbmcgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGhyb3R0bGU7XG4iLCIvKipcbiAqIENvcGllcyB0aGUgdmFsdWVzIG9mIGBzb3VyY2VgIHRvIGBhcnJheWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgZnJvbS5cbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheT1bXV0gVGhlIGFycmF5IHRvIGNvcHkgdmFsdWVzIHRvLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5Q29weShzb3VyY2UsIGFycmF5KSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gc291cmNlLmxlbmd0aDtcblxuICBhcnJheSB8fCAoYXJyYXkgPSBBcnJheShsZW5ndGgpKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBhcnJheVtpbmRleF0gPSBzb3VyY2VbaW5kZXhdO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcnJheUNvcHk7XG4iLCIvKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5mb3JFYWNoYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICovXG5mdW5jdGlvbiBhcnJheUVhY2goYXJyYXksIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKGl0ZXJhdGVlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSA9PT0gZmFsc2UpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXJyYXk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJyYXlFYWNoO1xuIiwiLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcnJheVNvbWU7XG4iLCIvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIGJ5IGBfLnRlbXBsYXRlYCB0byBjdXN0b21pemUgaXRzIGBfLmFzc2lnbmAgdXNlLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGFzc2lnbkRlZmF1bHRzYCBleGNlcHQgdGhhdCBpdCBpZ25vcmVzXG4gKiBpbmhlcml0ZWQgcHJvcGVydHkgdmFsdWVzIHdoZW4gY2hlY2tpbmcgaWYgYSBwcm9wZXJ0eSBpcyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBvYmplY3RWYWx1ZSBUaGUgZGVzdGluYXRpb24gb2JqZWN0IHByb3BlcnR5IHZhbHVlLlxuICogQHBhcmFtIHsqfSBzb3VyY2VWYWx1ZSBUaGUgc291cmNlIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBhc3NvY2lhdGVkIHdpdGggdGhlIG9iamVjdCBhbmQgc291cmNlIHZhbHVlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB2YWx1ZSB0byBhc3NpZ24gdG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduT3duRGVmYXVsdHMob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlLCBrZXksIG9iamVjdCkge1xuICByZXR1cm4gKG9iamVjdFZhbHVlID09PSB1bmRlZmluZWQgfHwgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKVxuICAgID8gc291cmNlVmFsdWVcbiAgICA6IG9iamVjdFZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc2lnbk93bkRlZmF1bHRzO1xuIiwidmFyIGtleXMgPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5cycpO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5hc3NpZ25gIGZvciBjdXN0b21pemluZyBhc3NpZ25lZCB2YWx1ZXMgd2l0aG91dFxuICogc3VwcG9ydCBmb3IgYXJndW1lbnQganVnZ2xpbmcsIG11bHRpcGxlIHNvdXJjZXMsIGFuZCBgdGhpc2AgYmluZGluZyBgY3VzdG9taXplcmBcbiAqIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBhc3NpZ25XaXRoKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcHJvcHMgPSBrZXlzKHNvdXJjZSksXG4gICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdLFxuICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyKHZhbHVlLCBzb3VyY2Vba2V5XSwga2V5LCBvYmplY3QsIHNvdXJjZSk7XG5cbiAgICBpZiAoKHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlc3VsdCAhPT0gdmFsdWUpIDogKHZhbHVlID09PSB2YWx1ZSkpIHx8XG4gICAgICAgICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpKSB7XG4gICAgICBvYmplY3Rba2V5XSA9IHJlc3VsdDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ25XaXRoO1xuIiwidmFyIGJhc2VDb3B5ID0gcmVxdWlyZSgnLi9iYXNlQ29weScpLFxuICAgIGtleXMgPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5cycpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmFzc2lnbmAgd2l0aG91dCBzdXBwb3J0IGZvciBhcmd1bWVudCBqdWdnbGluZyxcbiAqIG11bHRpcGxlIHNvdXJjZXMsIGFuZCBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gYmFzZUFzc2lnbihvYmplY3QsIHNvdXJjZSkge1xuICByZXR1cm4gc291cmNlID09IG51bGxcbiAgICA/IG9iamVjdFxuICAgIDogYmFzZUNvcHkoc291cmNlLCBrZXlzKHNvdXJjZSksIG9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUFzc2lnbjtcbiIsIi8qKlxuICogQ29waWVzIHByb3BlcnRpZXMgb2YgYHNvdXJjZWAgdG8gYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbS5cbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBjb3B5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3Q9e31dIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIHRvLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gYmFzZUNvcHkoc291cmNlLCBwcm9wcywgb2JqZWN0KSB7XG4gIG9iamVjdCB8fCAob2JqZWN0ID0ge30pO1xuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICBvYmplY3Rba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUNvcHk7XG4iLCJ2YXIgYmFzZUZvck93biA9IHJlcXVpcmUoJy4vYmFzZUZvck93bicpLFxuICAgIGNyZWF0ZUJhc2VFYWNoID0gcmVxdWlyZSgnLi9jcmVhdGVCYXNlRWFjaCcpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvckVhY2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAqL1xudmFyIGJhc2VFYWNoID0gY3JlYXRlQmFzZUVhY2goYmFzZUZvck93bik7XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUVhY2g7XG4iLCJ2YXIgY3JlYXRlQmFzZUZvciA9IHJlcXVpcmUoJy4vY3JlYXRlQmFzZUZvcicpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBiYXNlRm9ySW5gIGFuZCBgYmFzZUZvck93bmAgd2hpY2ggaXRlcmF0ZXNcbiAqIG92ZXIgYG9iamVjdGAgcHJvcGVydGllcyByZXR1cm5lZCBieSBga2V5c0Z1bmNgIGludm9raW5nIGBpdGVyYXRlZWAgZm9yXG4gKiBlYWNoIHByb3BlcnR5LiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHlcbiAqIHJldHVybmluZyBgZmFsc2VgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG52YXIgYmFzZUZvciA9IGNyZWF0ZUJhc2VGb3IoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlRm9yO1xuIiwidmFyIGJhc2VGb3IgPSByZXF1aXJlKCcuL2Jhc2VGb3InKSxcbiAgICBrZXlzSW4gPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5c0luJyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9ySW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VGb3JJbihvYmplY3QsIGl0ZXJhdGVlKSB7XG4gIHJldHVybiBiYXNlRm9yKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNJbik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUZvckluO1xuIiwidmFyIGJhc2VGb3IgPSByZXF1aXJlKCcuL2Jhc2VGb3InKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JPd25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VGb3JPd24ob2JqZWN0LCBpdGVyYXRlZSkge1xuICByZXR1cm4gYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlRm9yT3duO1xuIiwidmFyIGJhc2VJc0VxdWFsRGVlcCA9IHJlcXVpcmUoJy4vYmFzZUlzRXF1YWxEZWVwJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0JyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aXRob3V0IHN1cHBvcnQgZm9yIGB0aGlzYCBiaW5kaW5nXG4gKiBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICB9XG4gIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsO1xuIiwidmFyIGVxdWFsQXJyYXlzID0gcmVxdWlyZSgnLi9lcXVhbEFycmF5cycpLFxuICAgIGVxdWFsQnlUYWcgPSByZXF1aXJlKCcuL2VxdWFsQnlUYWcnKSxcbiAgICBlcXVhbE9iamVjdHMgPSByZXF1aXJlKCcuL2VxdWFsT2JqZWN0cycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJyYXknKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzVHlwZWRBcnJheScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIG9iamVjdHMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cbiAgaWYgKCFvYmpJc0Fycikge1xuICAgIG9ialRhZyA9IG9ialRvU3RyaW5nLmNhbGwob2JqZWN0KTtcbiAgICBpZiAob2JqVGFnID09IGFyZ3NUYWcpIHtcbiAgICAgIG9ialRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG9ialRhZyAhPSBvYmplY3RUYWcpIHtcbiAgICAgIG9iaklzQXJyID0gaXNUeXBlZEFycmF5KG9iamVjdCk7XG4gICAgfVxuICB9XG4gIGlmICghb3RoSXNBcnIpIHtcbiAgICBvdGhUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG90aGVyKTtcbiAgICBpZiAob3RoVGFnID09IGFyZ3NUYWcpIHtcbiAgICAgIG90aFRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG90aFRhZyAhPSBvYmplY3RUYWcpIHtcbiAgICAgIG90aElzQXJyID0gaXNUeXBlZEFycmF5KG90aGVyKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyxcbiAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyxcbiAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuICAgIHJldHVybiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZyk7XG4gIH1cbiAgaWYgKCFpc0xvb3NlKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCwgb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG4gIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblxuICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IG9iamVjdCkge1xuICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdID09IG90aGVyO1xuICAgIH1cbiAgfVxuICAvLyBBZGQgYG9iamVjdGAgYW5kIGBvdGhlcmAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICBzdGFja0EucHVzaChvYmplY3QpO1xuICBzdGFja0IucHVzaChvdGhlcik7XG5cbiAgdmFyIHJlc3VsdCA9IChvYmpJc0FyciA/IGVxdWFsQXJyYXlzIDogZXF1YWxPYmplY3RzKShvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblxuICBzdGFja0EucG9wKCk7XG4gIHN0YWNrQi5wb3AoKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsRGVlcDtcbiIsInZhciBhcnJheUVhY2ggPSByZXF1aXJlKCcuL2FycmF5RWFjaCcpLFxuICAgIGJhc2VNZXJnZURlZXAgPSByZXF1aXJlKCcuL2Jhc2VNZXJnZURlZXAnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc0FycmF5JyksXG4gICAgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0JyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzVHlwZWRBcnJheScpLFxuICAgIGtleXMgPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5cycpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1lcmdlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFyZ3VtZW50IGp1Z2dsaW5nLFxuICogbXVsdGlwbGUgc291cmNlcywgYW5kIGB0aGlzYCBiaW5kaW5nIGBjdXN0b21pemVyYCBmdW5jdGlvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnZWQgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgdmFsdWVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplciwgc3RhY2tBLCBzdGFja0IpIHtcbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuICB2YXIgaXNTcmNBcnIgPSBpc0FycmF5TGlrZShzb3VyY2UpICYmIChpc0FycmF5KHNvdXJjZSkgfHwgaXNUeXBlZEFycmF5KHNvdXJjZSkpLFxuICAgICAgcHJvcHMgPSBpc1NyY0FyciA/IHVuZGVmaW5lZCA6IGtleXMoc291cmNlKTtcblxuICBhcnJheUVhY2gocHJvcHMgfHwgc291cmNlLCBmdW5jdGlvbihzcmNWYWx1ZSwga2V5KSB7XG4gICAgaWYgKHByb3BzKSB7XG4gICAgICBrZXkgPSBzcmNWYWx1ZTtcbiAgICAgIHNyY1ZhbHVlID0gc291cmNlW2tleV07XG4gICAgfVxuICAgIGlmIChpc09iamVjdExpa2Uoc3JjVmFsdWUpKSB7XG4gICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcbiAgICAgIHN0YWNrQiB8fCAoc3RhY2tCID0gW10pO1xuICAgICAgYmFzZU1lcmdlRGVlcChvYmplY3QsIHNvdXJjZSwga2V5LCBiYXNlTWVyZ2UsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcih2YWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlzQ29tbW9uID0gcmVzdWx0ID09PSB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChpc0NvbW1vbikge1xuICAgICAgICByZXN1bHQgPSBzcmNWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICgocmVzdWx0ICE9PSB1bmRlZmluZWQgfHwgKGlzU3JjQXJyICYmICEoa2V5IGluIG9iamVjdCkpKSAmJlxuICAgICAgICAgIChpc0NvbW1vbiB8fCAocmVzdWx0ID09PSByZXN1bHQgPyAocmVzdWx0ICE9PSB2YWx1ZSkgOiAodmFsdWUgPT09IHZhbHVlKSkpKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU1lcmdlO1xuIiwidmFyIGFycmF5Q29weSA9IHJlcXVpcmUoJy4vYXJyYXlDb3B5JyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4uL2xhbmcvaXNBcnJheScpLFxuICAgIGlzQXJyYXlMaWtlID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZScpLFxuICAgIGlzUGxhaW5PYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzUGxhaW5PYmplY3QnKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzVHlwZWRBcnJheScpLFxuICAgIHRvUGxhaW5PYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL3RvUGxhaW5PYmplY3QnKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VNZXJnZWAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBtZXJnZXMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAqIHJlZmVyZW5jZXMgdG8gYmUgbWVyZ2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBtZXJnZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IG1lcmdlRnVuYyBUaGUgZnVuY3Rpb24gdG8gbWVyZ2UgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2VkIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIG9iamVjdHMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIHZhbHVlcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZU1lcmdlRGVlcChvYmplY3QsIHNvdXJjZSwga2V5LCBtZXJnZUZ1bmMsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoLFxuICAgICAgc3JjVmFsdWUgPSBzb3VyY2Vba2V5XTtcblxuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT0gc3JjVmFsdWUpIHtcbiAgICAgIG9iamVjdFtrZXldID0gc3RhY2tCW2xlbmd0aF07XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHZhciB2YWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKSA6IHVuZGVmaW5lZCxcbiAgICAgIGlzQ29tbW9uID0gcmVzdWx0ID09PSB1bmRlZmluZWQ7XG5cbiAgaWYgKGlzQ29tbW9uKSB7XG4gICAgcmVzdWx0ID0gc3JjVmFsdWU7XG4gICAgaWYgKGlzQXJyYXlMaWtlKHNyY1ZhbHVlKSAmJiAoaXNBcnJheShzcmNWYWx1ZSkgfHwgaXNUeXBlZEFycmF5KHNyY1ZhbHVlKSkpIHtcbiAgICAgIHJlc3VsdCA9IGlzQXJyYXkodmFsdWUpXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiAoaXNBcnJheUxpa2UodmFsdWUpID8gYXJyYXlDb3B5KHZhbHVlKSA6IFtdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdChzcmNWYWx1ZSkgfHwgaXNBcmd1bWVudHMoc3JjVmFsdWUpKSB7XG4gICAgICByZXN1bHQgPSBpc0FyZ3VtZW50cyh2YWx1ZSlcbiAgICAgICAgPyB0b1BsYWluT2JqZWN0KHZhbHVlKVxuICAgICAgICA6IChpc1BsYWluT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDoge30pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8vIEFkZCB0aGUgc291cmNlIHZhbHVlIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cyBhbmQgYXNzb2NpYXRlXG4gIC8vIGl0IHdpdGggaXRzIG1lcmdlZCB2YWx1ZS5cbiAgc3RhY2tBLnB1c2goc3JjVmFsdWUpO1xuICBzdGFja0IucHVzaChyZXN1bHQpO1xuXG4gIGlmIChpc0NvbW1vbikge1xuICAgIC8vIFJlY3Vyc2l2ZWx5IG1lcmdlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIG9iamVjdFtrZXldID0gbWVyZ2VGdW5jKHJlc3VsdCwgc3JjVmFsdWUsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKTtcbiAgfSBlbHNlIGlmIChyZXN1bHQgPT09IHJlc3VsdCA/IChyZXN1bHQgIT09IHZhbHVlKSA6ICh2YWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgb2JqZWN0W2tleV0gPSByZXN1bHQ7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlTWVyZ2VEZWVwO1xuIiwiLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHk7XG4iLCIvKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcbiAqIGZvciBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlVG9TdHJpbmc7XG4iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnZhbHVlc2AgYW5kIGBfLnZhbHVlc0luYCB3aGljaCBjcmVhdGVzIGFuXG4gKiBhcnJheSBvZiBgb2JqZWN0YCBwcm9wZXJ0eSB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvcGVydHkgbmFtZXNcbiAqIG9mIGBwcm9wc2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBnZXQgdmFsdWVzIGZvci5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gYmFzZVZhbHVlcyhvYmplY3QsIHByb3BzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleF0gPSBvYmplY3RbcHJvcHNbaW5kZXhdXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VWYWx1ZXM7XG4iLCJ2YXIgaWRlbnRpdHkgPSByZXF1aXJlKCcuLi91dGlsaXR5L2lkZW50aXR5Jyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlQ2FsbGJhY2tgIHdoaWNoIG9ubHkgc3VwcG9ydHMgYHRoaXNgIGJpbmRpbmdcbiAqIGFuZCBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiaW5kLlxuICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gKiBAcGFyYW0ge251bWJlcn0gW2FyZ0NvdW50XSBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2FsbGJhY2suXG4gKi9cbmZ1bmN0aW9uIGJpbmRDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBpZGVudGl0eTtcbiAgfVxuICBpZiAodGhpc0FyZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZ1bmM7XG4gIH1cbiAgc3dpdGNoIChhcmdDb3VudCkge1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgIH07XG4gICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICB9O1xuICAgIGNhc2UgNTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBvdGhlciwga2V5LCBvYmplY3QsIHNvdXJjZSkge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmluZENhbGxiYWNrO1xuIiwiLyoqXG4gKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltTGVmdGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgY2hhcmFjdGVyXG4gKiBvZiBgc3RyaW5nYCB0aGF0IGlzIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFycyBUaGUgY2hhcmFjdGVycyB0byBmaW5kLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGNoYXJhY3RlciBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAqL1xuZnVuY3Rpb24gY2hhcnNMZWZ0SW5kZXgoc3RyaW5nLCBjaGFycykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgY2hhcnMuaW5kZXhPZihzdHJpbmcuY2hhckF0KGluZGV4KSkgPiAtMSkge31cbiAgcmV0dXJuIGluZGV4O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNoYXJzTGVmdEluZGV4O1xuIiwiLyoqXG4gKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltUmlnaHRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGxhc3QgY2hhcmFjdGVyXG4gKiBvZiBgc3RyaW5nYCB0aGF0IGlzIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFycyBUaGUgY2hhcmFjdGVycyB0byBmaW5kLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgY2hhcmFjdGVyIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICovXG5mdW5jdGlvbiBjaGFyc1JpZ2h0SW5kZXgoc3RyaW5nLCBjaGFycykge1xuICB2YXIgaW5kZXggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlIChpbmRleC0tICYmIGNoYXJzLmluZGV4T2Yoc3RyaW5nLmNoYXJBdChpbmRleCkpID4gLTEpIHt9XG4gIHJldHVybiBpbmRleDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjaGFyc1JpZ2h0SW5kZXg7XG4iLCJ2YXIgYmluZENhbGxiYWNrID0gcmVxdWlyZSgnLi9iaW5kQ2FsbGJhY2snKSxcbiAgICBpc0l0ZXJhdGVlQ2FsbCA9IHJlcXVpcmUoJy4vaXNJdGVyYXRlZUNhbGwnKSxcbiAgICByZXN0UGFyYW0gPSByZXF1aXJlKCcuLi9mdW5jdGlvbi9yZXN0UGFyYW0nKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgYF8uYXNzaWduYCwgYF8uZGVmYXVsdHNgLCBvciBgXy5tZXJnZWAgZnVuY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGFzc2lnbmVyIFRoZSBmdW5jdGlvbiB0byBhc3NpZ24gdmFsdWVzLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYXNzaWduZXIgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUFzc2lnbmVyKGFzc2lnbmVyKSB7XG4gIHJldHVybiByZXN0UGFyYW0oZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2VzKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IG9iamVjdCA9PSBudWxsID8gMCA6IHNvdXJjZXMubGVuZ3RoLFxuICAgICAgICBjdXN0b21pemVyID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbbGVuZ3RoIC0gMl0gOiB1bmRlZmluZWQsXG4gICAgICAgIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQsXG4gICAgICAgIHRoaXNBcmcgPSBsZW5ndGggPiAxID8gc291cmNlc1tsZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcblxuICAgIGlmICh0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjdXN0b21pemVyID0gYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDUpO1xuICAgICAgbGVuZ3RoIC09IDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1c3RvbWl6ZXIgPSB0eXBlb2YgdGhpc0FyZyA9PSAnZnVuY3Rpb24nID8gdGhpc0FyZyA6IHVuZGVmaW5lZDtcbiAgICAgIGxlbmd0aCAtPSAoY3VzdG9taXplciA/IDEgOiAwKTtcbiAgICB9XG4gICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHNvdXJjZXNbMF0sIHNvdXJjZXNbMV0sIGd1YXJkKSkge1xuICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiBjdXN0b21pemVyO1xuICAgICAgbGVuZ3RoID0gMTtcbiAgICB9XG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgYXNzaWduZXIob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVBc3NpZ25lcjtcbiIsInZhciBnZXRMZW5ndGggPSByZXF1aXJlKCcuL2dldExlbmd0aCcpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpLFxuICAgIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi90b09iamVjdCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBgYmFzZUVhY2hgIG9yIGBiYXNlRWFjaFJpZ2h0YCBmdW5jdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VFYWNoKGVhY2hGdW5jLCBmcm9tUmlnaHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBnZXRMZW5ndGgoY29sbGVjdGlvbikgOiAwO1xuICAgIGlmICghaXNMZW5ndGgobGVuZ3RoKSkge1xuICAgICAgcmV0dXJuIGVhY2hGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKTtcbiAgICB9XG4gICAgdmFyIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTEsXG4gICAgICAgIGl0ZXJhYmxlID0gdG9PYmplY3QoY29sbGVjdGlvbik7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUJhc2VFYWNoO1xuIiwidmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi90b09iamVjdCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBiYXNlIGZ1bmN0aW9uIGZvciBgXy5mb3JJbmAgb3IgYF8uZm9ySW5SaWdodGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYmFzZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNGdW5jKSB7XG4gICAgdmFyIGl0ZXJhYmxlID0gdG9PYmplY3Qob2JqZWN0KSxcbiAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLFxuICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTE7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtrZXldLCBrZXksIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQmFzZUZvcjtcbiIsInZhciBiaW5kQ2FsbGJhY2sgPSByZXF1aXJlKCcuL2JpbmRDYWxsYmFjaycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJyYXknKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gZm9yIGBfLmZvckVhY2hgIG9yIGBfLmZvckVhY2hSaWdodGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGFycmF5RnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGFuIGFycmF5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBlYWNoIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVGb3JFYWNoKGFycmF5RnVuYywgZWFjaEZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaXRlcmF0ZWUgPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnID09PSB1bmRlZmluZWQgJiYgaXNBcnJheShjb2xsZWN0aW9uKSlcbiAgICAgID8gYXJyYXlGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKVxuICAgICAgOiBlYWNoRnVuYyhjb2xsZWN0aW9uLCBiaW5kQ2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVGb3JFYWNoO1xuIiwidmFyIGFycmF5U29tZSA9IHJlcXVpcmUoJy4vYXJyYXlTb21lJyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIGFycmF5cy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzTG9vc2UgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG4gIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG4gICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XSxcbiAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIoaXNMb29zZSA/IG90aFZhbHVlIDogYXJyVmFsdWUsIGlzTG9vc2UgPyBhcnJWYWx1ZSA6IG90aFZhbHVlLCBpbmRleCkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKGlzTG9vc2UpIHtcbiAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbEFycmF5cztcbiIsIi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2ZcbiAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdHMgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZykge1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgYm9vbFRhZzpcbiAgICBjYXNlIGRhdGVUYWc6XG4gICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWJlcnMsIGRhdGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgYm9vbGVhbnNcbiAgICAgIC8vIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzIG5vdCBlcXVhbC5cbiAgICAgIHJldHVybiArb2JqZWN0ID09ICtvdGhlcjtcblxuICAgIGNhc2UgZXJyb3JUYWc6XG4gICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICAvLyBUcmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWwuXG4gICAgICByZXR1cm4gKG9iamVjdCAhPSArb2JqZWN0KVxuICAgICAgICA/IG90aGVyICE9ICtvdGhlclxuICAgICAgICA6IG9iamVjdCA9PSArb3RoZXI7XG5cbiAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MgcHJpbWl0aXZlcyBhbmQgc3RyaW5nXG4gICAgICAvLyBvYmplY3RzIGFzIGVxdWFsLiBTZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMTAuNi40IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXF1YWxCeVRhZztcbiIsInZhciBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKTtcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc0xvb3NlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBpbmRleCA9IG9iakxlbmd0aDtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIGlmICghKGlzTG9vc2UgPyBrZXkgaW4gb3RoZXIgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCBrZXkpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICB2YXIgc2tpcEN0b3IgPSBpc0xvb3NlO1xuICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldLFxuICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihpc0xvb3NlID8gb3RoVmFsdWUgOiBvYmpWYWx1ZSwgaXNMb29zZT8gb2JqVmFsdWUgOiBvdGhWYWx1ZSwga2V5KSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIDogcmVzdWx0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgaWYgKCFza2lwQ3Rvcikge1xuICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cbiAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cbiAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG4gICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbE9iamVjdHM7XG4iLCIvKiogVXNlZCB0byBtYXAgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLiAqL1xudmFyIGh0bWxFc2NhcGVzID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiMzOTsnLFxuICAnYCc6ICcmIzk2Oydcbn07XG5cbi8qKlxuICogVXNlZCBieSBgXy5lc2NhcGVgIHRvIGNvbnZlcnQgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlSHRtbENoYXIoY2hyKSB7XG4gIHJldHVybiBodG1sRXNjYXBlc1tjaHJdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZUh0bWxDaGFyO1xuIiwiLyoqIFVzZWQgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuICovXG52YXIgc3RyaW5nRXNjYXBlcyA9IHtcbiAgJ1xcXFwnOiAnXFxcXCcsXG4gIFwiJ1wiOiBcIidcIixcbiAgJ1xcbic6ICduJyxcbiAgJ1xccic6ICdyJyxcbiAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAnXFx1MjAyOSc6ICd1MjAyOSdcbn07XG5cbi8qKlxuICogVXNlZCBieSBgXy50ZW1wbGF0ZWAgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaHIgVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICovXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmdDaGFyKGNocikge1xuICByZXR1cm4gJ1xcXFwnICsgc3RyaW5nRXNjYXBlc1tjaHJdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZVN0cmluZ0NoYXI7XG4iLCJ2YXIgYmFzZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9iYXNlUHJvcGVydHknKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYSBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MilcbiAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuICovXG52YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRMZW5ndGg7XG4iLCJ2YXIgaXNOYXRpdmUgPSByZXF1aXJlKCcuLi9sYW5nL2lzTmF0aXZlJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICByZXR1cm4gaXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuIiwidmFyIGdldExlbmd0aCA9IHJlcXVpcmUoJy4vZ2V0TGVuZ3RoJyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXlMaWtlO1xuIiwiLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL15cXGQrJC87XG5cbi8qKlxuICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgdmFsdWUgPSAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSA/ICt2YWx1ZSA6IC0xO1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSW5kZXg7XG4iLCJ2YXIgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlJyksXG4gICAgaXNJbmRleCA9IHJlcXVpcmUoJy4vaXNJbmRleCcpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSB2YWx1ZSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7Kn0gaW5kZXggVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBpbmRleCBvciBrZXkgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIG9iamVjdCBhcmd1bWVudC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGluZGV4LCBvYmplY3QpIHtcbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB0eXBlID0gdHlwZW9mIGluZGV4O1xuICBpZiAodHlwZSA9PSAnbnVtYmVyJ1xuICAgICAgPyAoaXNBcnJheUxpa2Uob2JqZWN0KSAmJiBpc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSlcbiAgICAgIDogKHR5cGUgPT0gJ3N0cmluZycgJiYgaW5kZXggaW4gb2JqZWN0KSkge1xuICAgIHZhciBvdGhlciA9IG9iamVjdFtpbmRleF07XG4gICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/ICh2YWx1ZSA9PT0gb3RoZXIpIDogKG90aGVyICE9PSBvdGhlcik7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSXRlcmF0ZWVDYWxsO1xuIiwiLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cbiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0xlbmd0aDtcbiIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG4iLCIvKipcbiAqIFVzZWQgYnkgYHRyaW1tZWRMZWZ0SW5kZXhgIGFuZCBgdHJpbW1lZFJpZ2h0SW5kZXhgIHRvIGRldGVybWluZSBpZiBhXG4gKiBjaGFyYWN0ZXIgY29kZSBpcyB3aGl0ZXNwYWNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gY2hhckNvZGUgVGhlIGNoYXJhY3RlciBjb2RlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGNoYXJDb2RlYCBpcyB3aGl0ZXNwYWNlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzU3BhY2UoY2hhckNvZGUpIHtcbiAgcmV0dXJuICgoY2hhckNvZGUgPD0gMTYwICYmIChjaGFyQ29kZSA+PSA5ICYmIGNoYXJDb2RlIDw9IDEzKSB8fCBjaGFyQ29kZSA9PSAzMiB8fCBjaGFyQ29kZSA9PSAxNjApIHx8IGNoYXJDb2RlID09IDU3NjAgfHwgY2hhckNvZGUgPT0gNjE1OCB8fFxuICAgIChjaGFyQ29kZSA+PSA4MTkyICYmIChjaGFyQ29kZSA8PSA4MjAyIHx8IGNoYXJDb2RlID09IDgyMzIgfHwgY2hhckNvZGUgPT0gODIzMyB8fCBjaGFyQ29kZSA9PSA4MjM5IHx8IGNoYXJDb2RlID09IDgyODcgfHwgY2hhckNvZGUgPT0gMTIyODggfHwgY2hhckNvZGUgPT0gNjUyNzkpKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTcGFjZTtcbiIsIi8qKiBVc2VkIHRvIG1hdGNoIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG52YXIgcmVFc2NhcGUgPSAvPCUtKFtcXHNcXFNdKz8pJT4vZztcblxubW9kdWxlLmV4cG9ydHMgPSByZUVzY2FwZTtcbiIsIi8qKiBVc2VkIHRvIG1hdGNoIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG52YXIgcmVFdmFsdWF0ZSA9IC88JShbXFxzXFxTXSs/KSU+L2c7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVFdmFsdWF0ZTtcbiIsIi8qKiBVc2VkIHRvIG1hdGNoIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG52YXIgcmVJbnRlcnBvbGF0ZSA9IC88JT0oW1xcc1xcU10rPyklPi9nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlSW50ZXJwb2xhdGU7XG4iLCJ2YXIgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4uL2xhbmcvaXNBcnJheScpLFxuICAgIGlzSW5kZXggPSByZXF1aXJlKCcuL2lzSW5kZXgnKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKSxcbiAgICBrZXlzSW4gPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5c0luJyk7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEEgZmFsbGJhY2sgaW1wbGVtZW50YXRpb24gb2YgYE9iamVjdC5rZXlzYCB3aGljaCBjcmVhdGVzIGFuIGFycmF5IG9mIHRoZVxuICogb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIHNoaW1LZXlzKG9iamVjdCkge1xuICB2YXIgcHJvcHMgPSBrZXlzSW4ob2JqZWN0KSxcbiAgICAgIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgbGVuZ3RoID0gcHJvcHNMZW5ndGggJiYgb2JqZWN0Lmxlbmd0aDtcblxuICB2YXIgYWxsb3dJbmRleGVzID0gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJlxuICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSk7XG5cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBbXTtcblxuICB3aGlsZSAoKytpbmRleCA8IHByb3BzTGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICBpZiAoKGFsbG93SW5kZXhlcyAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSkgfHwgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hpbUtleXM7XG4iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0Jyk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvT2JqZWN0O1xuIiwidmFyIGlzU3BhY2UgPSByZXF1aXJlKCcuL2lzU3BhY2UnKTtcblxuLyoqXG4gKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltTGVmdGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgbm9uLXdoaXRlc3BhY2VcbiAqIGNoYXJhY3RlciBvZiBgc3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICovXG5mdW5jdGlvbiB0cmltbWVkTGVmdEluZGV4KHN0cmluZykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgaXNTcGFjZShzdHJpbmcuY2hhckNvZGVBdChpbmRleCkpKSB7fVxuICByZXR1cm4gaW5kZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdHJpbW1lZExlZnRJbmRleDtcbiIsInZhciBpc1NwYWNlID0gcmVxdWlyZSgnLi9pc1NwYWNlJyk7XG5cbi8qKlxuICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbVJpZ2h0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlXG4gKiBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICovXG5mdW5jdGlvbiB0cmltbWVkUmlnaHRJbmRleChzdHJpbmcpIHtcbiAgdmFyIGluZGV4ID0gc3RyaW5nLmxlbmd0aDtcblxuICB3aGlsZSAoaW5kZXgtLSAmJiBpc1NwYWNlKHN0cmluZy5jaGFyQ29kZUF0KGluZGV4KSkpIHt9XG4gIHJldHVybiBpbmRleDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmltbWVkUmlnaHRJbmRleDtcbiIsInZhciBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzQXJyYXlMaWtlJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpICYmXG4gICAgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcmd1bWVudHM7XG4iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZ2V0TmF0aXZlJyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc0xlbmd0aCcpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVJc0FycmF5ID0gZ2V0TmF0aXZlKEFycmF5LCAnaXNBcnJheScpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5VGFnO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5O1xuIiwidmFyIGJhc2VJc0VxdWFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZUlzRXF1YWwnKSxcbiAgICBiaW5kQ2FsbGJhY2sgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iaW5kQ2FsbGJhY2snKTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXG4gKiBlcXVpdmFsZW50LiBJZiBgY3VzdG9taXplcmAgaXMgcHJvdmlkZWQgaXQncyBpbnZva2VkIHRvIGNvbXBhcmUgdmFsdWVzLlxuICogSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGAgY29tcGFyaXNvbnMgYXJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZFxuICogaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB1cCB0b1xuICogdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIG90aGVyIFssIGluZGV4fGtleV0pLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBib29sZWFucywgYERhdGVgIG9iamVjdHMsXG4gKiBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLCBhbmQgc3RyaW5ncy4gT2JqZWN0cyBhcmUgY29tcGFyZWQgYnlcbiAqIHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGdW5jdGlvbnMgYW5kIERPTSBub2Rlc1xuICogYXJlICoqbm90Kiogc3VwcG9ydGVkLiBQcm92aWRlIGEgY3VzdG9taXplciBmdW5jdGlvbiB0byBleHRlbmQgc3VwcG9ydFxuICogZm9yIGNvbXBhcmluZyBvdGhlciB2YWx1ZXMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBhbGlhcyBlcVxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgdmFsdWUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqIHZhciBvdGhlciA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqXG4gKiBvYmplY3QgPT0gb3RoZXI7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNFcXVhbChvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAqIHZhciBhcnJheSA9IFsnaGVsbG8nLCAnZ29vZGJ5ZSddO1xuICogdmFyIG90aGVyID0gWydoaScsICdnb29kYnllJ107XG4gKlxuICogXy5pc0VxdWFsKGFycmF5LCBvdGhlciwgZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gKiAgIGlmIChfLmV2ZXJ5KFt2YWx1ZSwgb3RoZXJdLCBSZWdFeHAucHJvdG90eXBlLnRlc3QsIC9eaCg/Oml8ZWxsbykkLykpIHtcbiAqICAgICByZXR1cm4gdHJ1ZTtcbiAqICAgfVxuICogfSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyLCB0aGlzQXJnKSB7XG4gIGN1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nID8gYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDMpIDogdW5kZWZpbmVkO1xuICB2YXIgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIG90aGVyKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuICByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplcikgOiAhIXJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0VxdWFsO1xuIiwidmFyIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBgRXJyb3JgLCBgRXZhbEVycm9yYCwgYFJhbmdlRXJyb3JgLCBgUmVmZXJlbmNlRXJyb3JgLFxuICogYFN5bnRheEVycm9yYCwgYFR5cGVFcnJvcmAsIG9yIGBVUklFcnJvcmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBlcnJvciBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Vycm9yKG5ldyBFcnJvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Vycm9yKEVycm9yKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlLm1lc3NhZ2UgPT0gJ3N0cmluZycgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZXJyb3JUYWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFcnJvcjtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNGdW5jdGlvbihfKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmkgd2hpY2ggcmV0dXJuICdmdW5jdGlvbicgZm9yIHJlZ2V4ZXNcbiAgLy8gYW5kIFNhZmFyaSA4IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGNvbnN0cnVjdG9ycy5cbiAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBmdW5jVGFnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb247XG4iLCJ2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJy4vaXNGdW5jdGlvbicpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDUpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZm5Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGZuVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZSgvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2csICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24uXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNOYXRpdmUoQXJyYXkucHJvdG90eXBlLnB1c2gpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNOYXRpdmUoXyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc05hdGl2ZSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICByZXR1cm4gcmVJc05hdGl2ZS50ZXN0KGZuVG9TdHJpbmcuY2FsbCh2YWx1ZSkpO1xuICB9XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHJlSXNIb3N0Q3Rvci50ZXN0KHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc05hdGl2ZTtcbiIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG4iLCJ2YXIgYmFzZUZvckluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZUZvckluJyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuL2lzQXJndW1lbnRzJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZVxuICogYE9iamVjdGAgY29uc3RydWN0b3Igb3Igb25lIHdpdGggYSBgW1tQcm90b3R5cGVdXWAgb2YgYG51bGxgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBhc3N1bWVzIG9iamVjdHMgY3JlYXRlZCBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3JcbiAqIGhhdmUgbm8gaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogfVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChuZXcgRm9vKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdCh7ICd4JzogMCwgJ3knOiAwIH0pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICB2YXIgQ3RvcjtcblxuICAvLyBFeGl0IGVhcmx5IGZvciBub24gYE9iamVjdGAgb2JqZWN0cy5cbiAgaWYgKCEoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBvYmplY3RUYWcgJiYgIWlzQXJndW1lbnRzKHZhbHVlKSkgfHxcbiAgICAgICghaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NvbnN0cnVjdG9yJykgJiYgKEN0b3IgPSB2YWx1ZS5jb25zdHJ1Y3RvciwgdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiAhKEN0b3IgaW5zdGFuY2VvZiBDdG9yKSkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIElFIDwgOSBpdGVyYXRlcyBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWZvcmUgb3duIHByb3BlcnRpZXMuIElmIHRoZSBmaXJzdFxuICAvLyBpdGVyYXRlZCBwcm9wZXJ0eSBpcyBhbiBvYmplY3QncyBvd24gcHJvcGVydHkgdGhlbiB0aGVyZSBhcmUgbm8gaW5oZXJpdGVkXG4gIC8vIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgdmFyIHJlc3VsdDtcbiAgLy8gSW4gbW9zdCBlbnZpcm9ubWVudHMgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMgYXJlIGl0ZXJhdGVkIGJlZm9yZVxuICAvLyBpdHMgaW5oZXJpdGVkIHByb3BlcnRpZXMuIElmIHRoZSBsYXN0IGl0ZXJhdGVkIHByb3BlcnR5IGlzIGFuIG9iamVjdCdzXG4gIC8vIG93biBwcm9wZXJ0eSB0aGVuIHRoZXJlIGFyZSBubyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICBiYXNlRm9ySW4odmFsdWUsIGZ1bmN0aW9uKHN1YlZhbHVlLCBrZXkpIHtcbiAgICByZXN1bHQgPSBrZXk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgcmVzdWx0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1BsYWluT2JqZWN0O1xuIiwidmFyIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNMZW5ndGgnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4vKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cbnR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID1cbnR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID1cbnR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1R5cGVkQXJyYXk7XG4iLCJ2YXIgYmFzZUNvcHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlQ29weScpLFxuICAgIGtleXNJbiA9IHJlcXVpcmUoJy4uL29iamVjdC9rZXlzSW4nKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgcGxhaW4gb2JqZWN0IGZsYXR0ZW5pbmcgaW5oZXJpdGVkIGVudW1lcmFibGVcbiAqIHByb3BlcnRpZXMgb2YgYHZhbHVlYCB0byBvd24gcHJvcGVydGllcyBvZiB0aGUgcGxhaW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBwbGFpbiBvYmplY3QuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8uYXNzaWduKHsgJ2EnOiAxIH0sIG5ldyBGb28pO1xuICogLy8gPT4geyAnYSc6IDEsICdiJzogMiB9XG4gKlxuICogXy5hc3NpZ24oeyAnYSc6IDEgfSwgXy50b1BsYWluT2JqZWN0KG5ldyBGb28pKTtcbiAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9XG4gKi9cbmZ1bmN0aW9uIHRvUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGJhc2VDb3B5KHZhbHVlLCBrZXlzSW4odmFsdWUpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b1BsYWluT2JqZWN0O1xuIiwidmFyIGFzc2lnbldpdGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9hc3NpZ25XaXRoJyksXG4gICAgYmFzZUFzc2lnbiA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VBc3NpZ24nKSxcbiAgICBjcmVhdGVBc3NpZ25lciA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NyZWF0ZUFzc2lnbmVyJyk7XG5cbi8qKlxuICogQXNzaWducyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3QocykgdG8gdGhlIGRlc3RpbmF0aW9uXG4gKiBvYmplY3QuIFN1YnNlcXVlbnQgc291cmNlcyBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy5cbiAqIElmIGBjdXN0b21pemVyYCBpcyBwcm92aWRlZCBpdCdzIGludm9rZWQgdG8gcHJvZHVjZSB0aGUgYXNzaWduZWQgdmFsdWVzLlxuICogVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBmaXZlIGFyZ3VtZW50czpcbiAqIChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgIGFuZCBpcyBiYXNlZCBvblxuICogW2BPYmplY3QuYXNzaWduYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LmFzc2lnbikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBhbGlhcyBleHRlbmRcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uYXNzaWduKHsgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICdhZ2UnOiA0MCB9LCB7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICogLy8gPT4geyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1cbiAqXG4gKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAqIHZhciBkZWZhdWx0cyA9IF8ucGFydGlhbFJpZ2h0KF8uYXNzaWduLCBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcbiAqICAgcmV0dXJuIF8uaXNVbmRlZmluZWQodmFsdWUpID8gb3RoZXIgOiB2YWx1ZTtcbiAqIH0pO1xuICpcbiAqIGRlZmF1bHRzKHsgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICdhZ2UnOiAzNiB9LCB7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICovXG52YXIgYXNzaWduID0gY3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpIHtcbiAgcmV0dXJuIGN1c3RvbWl6ZXJcbiAgICA/IGFzc2lnbldpdGgob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpXG4gICAgOiBiYXNlQXNzaWduKG9iamVjdCwgc291cmNlKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc2lnbjtcbiIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9nZXROYXRpdmUnKSxcbiAgICBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzQXJyYXlMaWtlJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0JyksXG4gICAgc2hpbUtleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9zaGltS2V5cycpO1xuXG4vKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUtleXMgPSBnZXROYXRpdmUoT2JqZWN0LCAna2V5cycpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LmtleXMpXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXMobmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogXy5rZXlzKCdoaScpO1xuICogLy8gPT4gWycwJywgJzEnXVxuICovXG52YXIga2V5cyA9ICFuYXRpdmVLZXlzID8gc2hpbUtleXMgOiBmdW5jdGlvbihvYmplY3QpIHtcbiAgdmFyIEN0b3IgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdC5jb25zdHJ1Y3RvcjtcbiAgaWYgKCh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlID09PSBvYmplY3QpIHx8XG4gICAgICAodHlwZW9mIG9iamVjdCAhPSAnZnVuY3Rpb24nICYmIGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG4gICAgcmV0dXJuIHNoaW1LZXlzKG9iamVjdCk7XG4gIH1cbiAgcmV0dXJuIGlzT2JqZWN0KG9iamVjdCkgPyBuYXRpdmVLZXlzKG9iamVjdCkgOiBbXTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5cztcbiIsInZhciBpc0FyZ3VtZW50cyA9IHJlcXVpcmUoJy4uL2xhbmcvaXNBcmd1bWVudHMnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc0FycmF5JyksXG4gICAgaXNJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzSW5kZXgnKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzTGVuZ3RoJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0Jyk7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5c0luKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InLCAnYyddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKi9cbmZ1bmN0aW9uIGtleXNJbihvYmplY3QpIHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICB9XG4gIHZhciBsZW5ndGggPSBvYmplY3QubGVuZ3RoO1xuICBsZW5ndGggPSAobGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiZcbiAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpICYmIGxlbmd0aCkgfHwgMDtcblxuICB2YXIgQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgIGluZGV4ID0gLTEsXG4gICAgICBpc1Byb3RvID0gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSA9PT0gb2JqZWN0LFxuICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKSxcbiAgICAgIHNraXBJbmRleGVzID0gbGVuZ3RoID4gMDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleF0gPSAoaW5kZXggKyAnJyk7XG4gIH1cbiAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgIGlmICghKHNraXBJbmRleGVzICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpKSAmJlxuICAgICAgICAhKGtleSA9PSAnY29uc3RydWN0b3InICYmIChpc1Byb3RvIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGtleXNJbjtcbiIsInZhciBiYXNlTWVyZ2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlTWVyZ2UnKSxcbiAgICBjcmVhdGVBc3NpZ25lciA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NyZWF0ZUFzc2lnbmVyJyk7XG5cbi8qKlxuICogUmVjdXJzaXZlbHkgbWVyZ2VzIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgdGhlIHNvdXJjZSBvYmplY3QocyksIHRoYXRcbiAqIGRvbid0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAgaW50byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LiBTdWJzZXF1ZW50IHNvdXJjZXNcbiAqIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyBzb3VyY2VzLiBJZiBgY3VzdG9taXplcmAgaXNcbiAqIHByb3ZpZGVkIGl0J3MgaW52b2tlZCB0byBwcm9kdWNlIHRoZSBtZXJnZWQgdmFsdWVzIG9mIHRoZSBkZXN0aW5hdGlvbiBhbmRcbiAqIHNvdXJjZSBwcm9wZXJ0aWVzLiBJZiBgY3VzdG9taXplcmAgcmV0dXJucyBgdW5kZWZpbmVkYCBtZXJnaW5nIGlzIGhhbmRsZWRcbiAqIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAqIHdpdGggZml2ZSBhcmd1bWVudHM6IChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgdXNlcnMgPSB7XG4gKiAgICdkYXRhJzogW3sgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICd1c2VyJzogJ2ZyZWQnIH1dXG4gKiB9O1xuICpcbiAqIHZhciBhZ2VzID0ge1xuICogICAnZGF0YSc6IFt7ICdhZ2UnOiAzNiB9LCB7ICdhZ2UnOiA0MCB9XVxuICogfTtcbiAqXG4gKiBfLm1lcmdlKHVzZXJzLCBhZ2VzKTtcbiAqIC8vID0+IHsgJ2RhdGEnOiBbeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSwgeyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1dIH1cbiAqXG4gKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAqIHZhciBvYmplY3QgPSB7XG4gKiAgICdmcnVpdHMnOiBbJ2FwcGxlJ10sXG4gKiAgICd2ZWdldGFibGVzJzogWydiZWV0J11cbiAqIH07XG4gKlxuICogdmFyIG90aGVyID0ge1xuICogICAnZnJ1aXRzJzogWydiYW5hbmEnXSxcbiAqICAgJ3ZlZ2V0YWJsZXMnOiBbJ2NhcnJvdCddXG4gKiB9O1xuICpcbiAqIF8ubWVyZ2Uob2JqZWN0LCBvdGhlciwgZnVuY3Rpb24oYSwgYikge1xuICogICBpZiAoXy5pc0FycmF5KGEpKSB7XG4gKiAgICAgcmV0dXJuIGEuY29uY2F0KGIpO1xuICogICB9XG4gKiB9KTtcbiAqIC8vID0+IHsgJ2ZydWl0cyc6IFsnYXBwbGUnLCAnYmFuYW5hJ10sICd2ZWdldGFibGVzJzogWydiZWV0JywgJ2NhcnJvdCddIH1cbiAqL1xudmFyIG1lcmdlID0gY3JlYXRlQXNzaWduZXIoYmFzZU1lcmdlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBtZXJnZTtcbiIsInZhciBiYXNlVG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlVG9TdHJpbmcnKSxcbiAgICBlc2NhcGVIdG1sQ2hhciA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2VzY2FwZUh0bWxDaGFyJyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycy4gKi9cbnZhciByZVVuZXNjYXBlZEh0bWwgPSAvWyY8PlwiJ2BdL2csXG4gICAgcmVIYXNVbmVzY2FwZWRIdG1sID0gUmVnRXhwKHJlVW5lc2NhcGVkSHRtbC5zb3VyY2UpO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBjaGFyYWN0ZXJzIFwiJlwiLCBcIjxcIiwgXCI+XCIsICdcIicsIFwiJ1wiLCBhbmQgXCJcXGBcIiwgaW4gYHN0cmluZ2AgdG9cbiAqIHRoZWlyIGNvcnJlc3BvbmRpbmcgSFRNTCBlbnRpdGllcy5cbiAqXG4gKiAqKk5vdGU6KiogTm8gb3RoZXIgY2hhcmFjdGVycyBhcmUgZXNjYXBlZC4gVG8gZXNjYXBlIGFkZGl0aW9uYWwgY2hhcmFjdGVyc1xuICogdXNlIGEgdGhpcmQtcGFydHkgbGlicmFyeSBsaWtlIFtfaGVfXShodHRwczovL210aHMuYmUvaGUpLlxuICpcbiAqIFRob3VnaCB0aGUgXCI+XCIgY2hhcmFjdGVyIGlzIGVzY2FwZWQgZm9yIHN5bW1ldHJ5LCBjaGFyYWN0ZXJzIGxpa2VcbiAqIFwiPlwiIGFuZCBcIi9cIiBkb24ndCBuZWVkIGVzY2FwaW5nIGluIEhUTUwgYW5kIGhhdmUgbm8gc3BlY2lhbCBtZWFuaW5nXG4gKiB1bmxlc3MgdGhleSdyZSBwYXJ0IG9mIGEgdGFnIG9yIHVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqIFNlZSBbTWF0aGlhcyBCeW5lbnMncyBhcnRpY2xlXShodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvYW1iaWd1b3VzLWFtcGVyc2FuZHMpXG4gKiAodW5kZXIgXCJzZW1pLXJlbGF0ZWQgZnVuIGZhY3RcIikgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBCYWNrdGlja3MgYXJlIGVzY2FwZWQgYmVjYXVzZSBpbiBJbnRlcm5ldCBFeHBsb3JlciA8IDksIHRoZXkgY2FuIGJyZWFrIG91dFxuICogb2YgYXR0cmlidXRlIHZhbHVlcyBvciBIVE1MIGNvbW1lbnRzLiBTZWUgWyM1OV0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzU5KSxcbiAqIFsjMTAyXShodHRwczovL2h0bWw1c2VjLm9yZy8jMTAyKSwgWyMxMDhdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMDgpLCBhbmRcbiAqIFsjMTMzXShodHRwczovL2h0bWw1c2VjLm9yZy8jMTMzKSBvZiB0aGUgW0hUTUw1IFNlY3VyaXR5IENoZWF0c2hlZXRdKGh0dHBzOi8vaHRtbDVzZWMub3JnLylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogV2hlbiB3b3JraW5nIHdpdGggSFRNTCB5b3Ugc2hvdWxkIGFsd2F5cyBbcXVvdGUgYXR0cmlidXRlIHZhbHVlc10oaHR0cDovL3dvbmtvLmNvbS9wb3N0L2h0bWwtZXNjYXBpbmcpXG4gKiB0byByZWR1Y2UgWFNTIHZlY3RvcnMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBTdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmVzY2FwZSgnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnKTtcbiAqIC8vID0+ICdmcmVkLCBiYXJuZXksICZhbXA7IHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZShzdHJpbmcpIHtcbiAgLy8gUmVzZXQgYGxhc3RJbmRleGAgYmVjYXVzZSBpbiBJRSA8IDkgYFN0cmluZyNyZXBsYWNlYCBkb2VzIG5vdC5cbiAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gIHJldHVybiAoc3RyaW5nICYmIHJlSGFzVW5lc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZVVuZXNjYXBlZEh0bWwsIGVzY2FwZUh0bWxDaGFyKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZTtcbiIsInZhciBhc3NpZ25Pd25EZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Fzc2lnbk93bkRlZmF1bHRzJyksXG4gICAgYXNzaWduV2l0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Fzc2lnbldpdGgnKSxcbiAgICBhdHRlbXB0ID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9hdHRlbXB0JyksXG4gICAgYmFzZUFzc2lnbiA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VBc3NpZ24nKSxcbiAgICBiYXNlVG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlVG9TdHJpbmcnKSxcbiAgICBiYXNlVmFsdWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZVZhbHVlcycpLFxuICAgIGVzY2FwZVN0cmluZ0NoYXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9lc2NhcGVTdHJpbmdDaGFyJyksXG4gICAgaXNFcnJvciA9IHJlcXVpcmUoJy4uL2xhbmcvaXNFcnJvcicpLFxuICAgIGlzSXRlcmF0ZWVDYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNJdGVyYXRlZUNhbGwnKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKSxcbiAgICByZUludGVycG9sYXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcmVJbnRlcnBvbGF0ZScpLFxuICAgIHRlbXBsYXRlU2V0dGluZ3MgPSByZXF1aXJlKCcuL3RlbXBsYXRlU2V0dGluZ3MnKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggZW1wdHkgc3RyaW5nIGxpdGVyYWxzIGluIGNvbXBpbGVkIHRlbXBsYXRlIHNvdXJjZS4gKi9cbnZhciByZUVtcHR5U3RyaW5nTGVhZGluZyA9IC9cXGJfX3AgXFwrPSAnJzsvZyxcbiAgICByZUVtcHR5U3RyaW5nTWlkZGxlID0gL1xcYihfX3AgXFwrPSkgJycgXFwrL2csXG4gICAgcmVFbXB0eVN0cmluZ1RyYWlsaW5nID0gLyhfX2VcXCguKj9cXCl8XFxiX190XFwpKSBcXCtcXG4nJzsvZztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggW0VTIHRlbXBsYXRlIGRlbGltaXRlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRlbXBsYXRlLWxpdGVyYWwtbGV4aWNhbC1jb21wb25lbnRzKS4gKi9cbnZhciByZUVzVGVtcGxhdGUgPSAvXFwkXFx7KFteXFxcXH1dKig/OlxcXFwuW15cXFxcfV0qKSopXFx9L2c7XG5cbi8qKiBVc2VkIHRvIGVuc3VyZSBjYXB0dXJpbmcgb3JkZXIgb2YgdGVtcGxhdGUgZGVsaW1pdGVycy4gKi9cbnZhciByZU5vTWF0Y2ggPSAvKCReKS87XG5cbi8qKiBVc2VkIHRvIG1hdGNoIHVuZXNjYXBlZCBjaGFyYWN0ZXJzIGluIGNvbXBpbGVkIHN0cmluZyBsaXRlcmFscy4gKi9cbnZhciByZVVuZXNjYXBlZFN0cmluZyA9IC9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZztcblxuLyoqXG4gKiBDcmVhdGVzIGEgY29tcGlsZWQgdGVtcGxhdGUgZnVuY3Rpb24gdGhhdCBjYW4gaW50ZXJwb2xhdGUgZGF0YSBwcm9wZXJ0aWVzXG4gKiBpbiBcImludGVycG9sYXRlXCIgZGVsaW1pdGVycywgSFRNTC1lc2NhcGUgaW50ZXJwb2xhdGVkIGRhdGEgcHJvcGVydGllcyBpblxuICogXCJlc2NhcGVcIiBkZWxpbWl0ZXJzLCBhbmQgZXhlY3V0ZSBKYXZhU2NyaXB0IGluIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXJzLiBEYXRhXG4gKiBwcm9wZXJ0aWVzIG1heSBiZSBhY2Nlc3NlZCBhcyBmcmVlIHZhcmlhYmxlcyBpbiB0aGUgdGVtcGxhdGUuIElmIGEgc2V0dGluZ1xuICogb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgXy50ZW1wbGF0ZVNldHRpbmdzYCB2YWx1ZXMuXG4gKlxuICogKipOb3RlOioqIEluIHRoZSBkZXZlbG9wbWVudCBidWlsZCBgXy50ZW1wbGF0ZWAgdXRpbGl6ZXNcbiAqIFtzb3VyY2VVUkxzXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy9kZXZlbG9wZXJ0b29scy9zb3VyY2VtYXBzLyN0b2Mtc291cmNldXJsKVxuICogZm9yIGVhc2llciBkZWJ1Z2dpbmcuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gcHJlY29tcGlsaW5nIHRlbXBsYXRlcyBzZWVcbiAqIFtsb2Rhc2gncyBjdXN0b20gYnVpbGRzIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vbG9kYXNoLmNvbS9jdXN0b20tYnVpbGRzKS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBDaHJvbWUgZXh0ZW5zaW9uIHNhbmRib3hlcyBzZWVcbiAqIFtDaHJvbWUncyBleHRlbnNpb25zIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZXh0ZW5zaW9ucy9zYW5kYm94aW5nRXZhbCkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBTdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgdGVtcGxhdGUgc3RyaW5nLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXNjYXBlXSBUaGUgSFRNTCBcImVzY2FwZVwiIGRlbGltaXRlci5cbiAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5ldmFsdWF0ZV0gVGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaW1wb3J0c10gQW4gb2JqZWN0IHRvIGltcG9ydCBpbnRvIHRoZSB0ZW1wbGF0ZSBhcyBmcmVlIHZhcmlhYmxlcy5cbiAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5pbnRlcnBvbGF0ZV0gVGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc291cmNlVVJMXSBUaGUgc291cmNlVVJMIG9mIHRoZSB0ZW1wbGF0ZSdzIGNvbXBpbGVkIHNvdXJjZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy52YXJpYWJsZV0gVGhlIGRhdGEgb2JqZWN0IHZhcmlhYmxlIG5hbWUuXG4gKiBAcGFyYW0tIHtPYmplY3R9IFtvdGhlck9wdGlvbnNdIEVuYWJsZXMgdGhlIGxlZ2FjeSBgb3B0aW9uc2AgcGFyYW0gc2lnbmF0dXJlLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjb21waWxlZCB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gdXNpbmcgdGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIgdG8gY3JlYXRlIGEgY29tcGlsZWQgdGVtcGxhdGVcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSB1c2VyICU+IScpO1xuICogY29tcGlsZWQoeyAndXNlcic6ICdmcmVkJyB9KTtcbiAqIC8vID0+ICdoZWxsbyBmcmVkISdcbiAqXG4gKiAvLyB1c2luZyB0aGUgSFRNTCBcImVzY2FwZVwiIGRlbGltaXRlciB0byBlc2NhcGUgZGF0YSBwcm9wZXJ0eSB2YWx1ZXNcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJzxiPjwlLSB2YWx1ZSAlPjwvYj4nKTtcbiAqIGNvbXBpbGVkKHsgJ3ZhbHVlJzogJzxzY3JpcHQ+JyB9KTtcbiAqIC8vID0+ICc8Yj4mbHQ7c2NyaXB0Jmd0OzwvYj4nXG4gKlxuICogLy8gdXNpbmcgdGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIgdG8gZXhlY3V0ZSBKYXZhU2NyaXB0IGFuZCBnZW5lcmF0ZSBIVE1MXG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JSBfLmZvckVhY2godXNlcnMsIGZ1bmN0aW9uKHVzZXIpIHsgJT48bGk+PCUtIHVzZXIgJT48L2xpPjwlIH0pOyAlPicpO1xuICogY29tcGlsZWQoeyAndXNlcnMnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XG4gKiAvLyA9PiAnPGxpPmZyZWQ8L2xpPjxsaT5iYXJuZXk8L2xpPidcbiAqXG4gKiAvLyB1c2luZyB0aGUgaW50ZXJuYWwgYHByaW50YCBmdW5jdGlvbiBpbiBcImV2YWx1YXRlXCIgZGVsaW1pdGVyc1xuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPCUgcHJpbnQoXCJoZWxsbyBcIiArIHVzZXIpOyAlPiEnKTtcbiAqIGNvbXBpbGVkKHsgJ3VzZXInOiAnYmFybmV5JyB9KTtcbiAqIC8vID0+ICdoZWxsbyBiYXJuZXkhJ1xuICpcbiAqIC8vIHVzaW5nIHRoZSBFUyBkZWxpbWl0ZXIgYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIGRlZmF1bHQgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlclxuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gJHsgdXNlciB9IScpO1xuICogY29tcGlsZWQoeyAndXNlcic6ICdwZWJibGVzJyB9KTtcbiAqIC8vID0+ICdoZWxsbyBwZWJibGVzISdcbiAqXG4gKiAvLyB1c2luZyBjdXN0b20gdGVtcGxhdGUgZGVsaW1pdGVyc1xuICogXy50ZW1wbGF0ZVNldHRpbmdzLmludGVycG9sYXRlID0gL3t7KFtcXHNcXFNdKz8pfX0vZztcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIHt7IHVzZXIgfX0hJyk7XG4gKiBjb21waWxlZCh7ICd1c2VyJzogJ211c3RhY2hlJyB9KTtcbiAqIC8vID0+ICdoZWxsbyBtdXN0YWNoZSEnXG4gKlxuICogLy8gdXNpbmcgYmFja3NsYXNoZXMgdG8gdHJlYXQgZGVsaW1pdGVycyBhcyBwbGFpbiB0ZXh0XG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JT0gXCJcXFxcPCUtIHZhbHVlICVcXFxcPlwiICU+Jyk7XG4gKiBjb21waWxlZCh7ICd2YWx1ZSc6ICdpZ25vcmVkJyB9KTtcbiAqIC8vID0+ICc8JS0gdmFsdWUgJT4nXG4gKlxuICogLy8gdXNpbmcgdGhlIGBpbXBvcnRzYCBvcHRpb24gdG8gaW1wb3J0IGBqUXVlcnlgIGFzIGBqcWBcbiAqIHZhciB0ZXh0ID0gJzwlIGpxLmVhY2godXNlcnMsIGZ1bmN0aW9uKHVzZXIpIHsgJT48bGk+PCUtIHVzZXIgJT48L2xpPjwlIH0pOyAlPic7XG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKHRleHQsIHsgJ2ltcG9ydHMnOiB7ICdqcSc6IGpRdWVyeSB9IH0pO1xuICogY29tcGlsZWQoeyAndXNlcnMnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XG4gKiAvLyA9PiAnPGxpPmZyZWQ8L2xpPjxsaT5iYXJuZXk8L2xpPidcbiAqXG4gKiAvLyB1c2luZyB0aGUgYHNvdXJjZVVSTGAgb3B0aW9uIHRvIHNwZWNpZnkgYSBjdXN0b20gc291cmNlVVJMIGZvciB0aGUgdGVtcGxhdGVcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSB1c2VyICU+IScsIHsgJ3NvdXJjZVVSTCc6ICcvYmFzaWMvZ3JlZXRpbmcuanN0JyB9KTtcbiAqIGNvbXBpbGVkKGRhdGEpO1xuICogLy8gPT4gZmluZCB0aGUgc291cmNlIG9mIFwiZ3JlZXRpbmcuanN0XCIgdW5kZXIgdGhlIFNvdXJjZXMgdGFiIG9yIFJlc291cmNlcyBwYW5lbCBvZiB0aGUgd2ViIGluc3BlY3RvclxuICpcbiAqIC8vIHVzaW5nIHRoZSBgdmFyaWFibGVgIG9wdGlvbiB0byBlbnN1cmUgYSB3aXRoLXN0YXRlbWVudCBpc24ndCB1c2VkIGluIHRoZSBjb21waWxlZCB0ZW1wbGF0ZVxuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGkgPCU9IGRhdGEudXNlciAlPiEnLCB7ICd2YXJpYWJsZSc6ICdkYXRhJyB9KTtcbiAqIGNvbXBpbGVkLnNvdXJjZTtcbiAqIC8vID0+IGZ1bmN0aW9uKGRhdGEpIHtcbiAqIC8vICAgdmFyIF9fdCwgX19wID0gJyc7XG4gKiAvLyAgIF9fcCArPSAnaGkgJyArICgoX190ID0gKCBkYXRhLnVzZXIgKSkgPT0gbnVsbCA/ICcnIDogX190KSArICchJztcbiAqIC8vICAgcmV0dXJuIF9fcDtcbiAqIC8vIH1cbiAqXG4gKiAvLyB1c2luZyB0aGUgYHNvdXJjZWAgcHJvcGVydHkgdG8gaW5saW5lIGNvbXBpbGVkIHRlbXBsYXRlcyBmb3IgbWVhbmluZ2Z1bFxuICogLy8gbGluZSBudW1iZXJzIGluIGVycm9yIG1lc3NhZ2VzIGFuZCBhIHN0YWNrIHRyYWNlXG4gKiBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbihjd2QsICdqc3QuanMnKSwgJ1xcXG4gKiAgIHZhciBKU1QgPSB7XFxcbiAqICAgICBcIm1haW5cIjogJyArIF8udGVtcGxhdGUobWFpblRleHQpLnNvdXJjZSArICdcXFxuICogICB9O1xcXG4gKiAnKTtcbiAqL1xuZnVuY3Rpb24gdGVtcGxhdGUoc3RyaW5nLCBvcHRpb25zLCBvdGhlck9wdGlvbnMpIHtcbiAgLy8gQmFzZWQgb24gSm9obiBSZXNpZydzIGB0bXBsYCBpbXBsZW1lbnRhdGlvbiAoaHR0cDovL2Vqb2huLm9yZy9ibG9nL2phdmFzY3JpcHQtbWljcm8tdGVtcGxhdGluZy8pXG4gIC8vIGFuZCBMYXVyYSBEb2t0b3JvdmEncyBkb1QuanMgKGh0dHBzOi8vZ2l0aHViLmNvbS9vbGFkby9kb1QpLlxuICB2YXIgc2V0dGluZ3MgPSB0ZW1wbGF0ZVNldHRpbmdzLmltcG9ydHMuXy50ZW1wbGF0ZVNldHRpbmdzIHx8IHRlbXBsYXRlU2V0dGluZ3M7XG5cbiAgaWYgKG90aGVyT3B0aW9ucyAmJiBpc0l0ZXJhdGVlQ2FsbChzdHJpbmcsIG9wdGlvbnMsIG90aGVyT3B0aW9ucykpIHtcbiAgICBvcHRpb25zID0gb3RoZXJPcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICBvcHRpb25zID0gYXNzaWduV2l0aChiYXNlQXNzaWduKHt9LCBvdGhlck9wdGlvbnMgfHwgb3B0aW9ucyksIHNldHRpbmdzLCBhc3NpZ25Pd25EZWZhdWx0cyk7XG5cbiAgdmFyIGltcG9ydHMgPSBhc3NpZ25XaXRoKGJhc2VBc3NpZ24oe30sIG9wdGlvbnMuaW1wb3J0cyksIHNldHRpbmdzLmltcG9ydHMsIGFzc2lnbk93bkRlZmF1bHRzKSxcbiAgICAgIGltcG9ydHNLZXlzID0ga2V5cyhpbXBvcnRzKSxcbiAgICAgIGltcG9ydHNWYWx1ZXMgPSBiYXNlVmFsdWVzKGltcG9ydHMsIGltcG9ydHNLZXlzKTtcblxuICB2YXIgaXNFc2NhcGluZyxcbiAgICAgIGlzRXZhbHVhdGluZyxcbiAgICAgIGluZGV4ID0gMCxcbiAgICAgIGludGVycG9sYXRlID0gb3B0aW9ucy5pbnRlcnBvbGF0ZSB8fCByZU5vTWF0Y2gsXG4gICAgICBzb3VyY2UgPSBcIl9fcCArPSAnXCI7XG5cbiAgLy8gQ29tcGlsZSB0aGUgcmVnZXhwIHRvIG1hdGNoIGVhY2ggZGVsaW1pdGVyLlxuICB2YXIgcmVEZWxpbWl0ZXJzID0gUmVnRXhwKFxuICAgIChvcHRpb25zLmVzY2FwZSB8fCByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgaW50ZXJwb2xhdGUuc291cmNlICsgJ3wnICtcbiAgICAoaW50ZXJwb2xhdGUgPT09IHJlSW50ZXJwb2xhdGUgPyByZUVzVGVtcGxhdGUgOiByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgKG9wdGlvbnMuZXZhbHVhdGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCQnXG4gICwgJ2cnKTtcblxuICAvLyBVc2UgYSBzb3VyY2VVUkwgZm9yIGVhc2llciBkZWJ1Z2dpbmcuXG4gIHZhciBzb3VyY2VVUkwgPSAnc291cmNlVVJMJyBpbiBvcHRpb25zID8gJy8vIyBzb3VyY2VVUkw9JyArIG9wdGlvbnMuc291cmNlVVJMICsgJ1xcbicgOiAnJztcblxuICBzdHJpbmcucmVwbGFjZShyZURlbGltaXRlcnMsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGVWYWx1ZSwgaW50ZXJwb2xhdGVWYWx1ZSwgZXNUZW1wbGF0ZVZhbHVlLCBldmFsdWF0ZVZhbHVlLCBvZmZzZXQpIHtcbiAgICBpbnRlcnBvbGF0ZVZhbHVlIHx8IChpbnRlcnBvbGF0ZVZhbHVlID0gZXNUZW1wbGF0ZVZhbHVlKTtcblxuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgY2FuJ3QgYmUgaW5jbHVkZWQgaW4gc3RyaW5nIGxpdGVyYWxzLlxuICAgIHNvdXJjZSArPSBzdHJpbmcuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShyZVVuZXNjYXBlZFN0cmluZywgZXNjYXBlU3RyaW5nQ2hhcik7XG5cbiAgICAvLyBSZXBsYWNlIGRlbGltaXRlcnMgd2l0aCBzbmlwcGV0cy5cbiAgICBpZiAoZXNjYXBlVmFsdWUpIHtcbiAgICAgIGlzRXNjYXBpbmcgPSB0cnVlO1xuICAgICAgc291cmNlICs9IFwiJyArXFxuX19lKFwiICsgZXNjYXBlVmFsdWUgKyBcIikgK1xcbidcIjtcbiAgICB9XG4gICAgaWYgKGV2YWx1YXRlVmFsdWUpIHtcbiAgICAgIGlzRXZhbHVhdGluZyA9IHRydWU7XG4gICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGVWYWx1ZSArIFwiO1xcbl9fcCArPSAnXCI7XG4gICAgfVxuICAgIGlmIChpbnRlcnBvbGF0ZVZhbHVlKSB7XG4gICAgICBzb3VyY2UgKz0gXCInICtcXG4oKF9fdCA9IChcIiArIGludGVycG9sYXRlVmFsdWUgKyBcIikpID09IG51bGwgPyAnJyA6IF9fdCkgK1xcbidcIjtcbiAgICB9XG4gICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAvLyBUaGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIHByb2R1Y3RzIHJlcXVpcmVzIHJldHVybmluZyB0aGUgYG1hdGNoYFxuICAgIC8vIHN0cmluZyBpbiBvcmRlciB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGBvZmZzZXRgIHZhbHVlLlxuICAgIHJldHVybiBtYXRjaDtcbiAgfSk7XG5cbiAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAvLyBJZiBgdmFyaWFibGVgIGlzIG5vdCBzcGVjaWZpZWQgd3JhcCBhIHdpdGgtc3RhdGVtZW50IGFyb3VuZCB0aGUgZ2VuZXJhdGVkXG4gIC8vIGNvZGUgdG8gYWRkIHRoZSBkYXRhIG9iamVjdCB0byB0aGUgdG9wIG9mIHRoZSBzY29wZSBjaGFpbi5cbiAgdmFyIHZhcmlhYmxlID0gb3B0aW9ucy52YXJpYWJsZTtcbiAgaWYgKCF2YXJpYWJsZSkge1xuICAgIHNvdXJjZSA9ICd3aXRoIChvYmopIHtcXG4nICsgc291cmNlICsgJ1xcbn1cXG4nO1xuICB9XG4gIC8vIENsZWFudXAgY29kZSBieSBzdHJpcHBpbmcgZW1wdHkgc3RyaW5ncy5cbiAgc291cmNlID0gKGlzRXZhbHVhdGluZyA/IHNvdXJjZS5yZXBsYWNlKHJlRW1wdHlTdHJpbmdMZWFkaW5nLCAnJykgOiBzb3VyY2UpXG4gICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ01pZGRsZSwgJyQxJylcbiAgICAucmVwbGFjZShyZUVtcHR5U3RyaW5nVHJhaWxpbmcsICckMTsnKTtcblxuICAvLyBGcmFtZSBjb2RlIGFzIHRoZSBmdW5jdGlvbiBib2R5LlxuICBzb3VyY2UgPSAnZnVuY3Rpb24oJyArICh2YXJpYWJsZSB8fCAnb2JqJykgKyAnKSB7XFxuJyArXG4gICAgKHZhcmlhYmxlXG4gICAgICA/ICcnXG4gICAgICA6ICdvYmogfHwgKG9iaiA9IHt9KTtcXG4nXG4gICAgKSArXG4gICAgXCJ2YXIgX190LCBfX3AgPSAnJ1wiICtcbiAgICAoaXNFc2NhcGluZ1xuICAgICAgID8gJywgX19lID0gXy5lc2NhcGUnXG4gICAgICAgOiAnJ1xuICAgICkgK1xuICAgIChpc0V2YWx1YXRpbmdcbiAgICAgID8gJywgX19qID0gQXJyYXkucHJvdG90eXBlLmpvaW47XFxuJyArXG4gICAgICAgIFwiZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XFxuXCJcbiAgICAgIDogJztcXG4nXG4gICAgKSArXG4gICAgc291cmNlICtcbiAgICAncmV0dXJuIF9fcFxcbn0nO1xuXG4gIHZhciByZXN1bHQgPSBhdHRlbXB0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBGdW5jdGlvbihpbXBvcnRzS2V5cywgc291cmNlVVJMICsgJ3JldHVybiAnICsgc291cmNlKS5hcHBseSh1bmRlZmluZWQsIGltcG9ydHNWYWx1ZXMpO1xuICB9KTtcblxuICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBmdW5jdGlvbidzIHNvdXJjZSBieSBpdHMgYHRvU3RyaW5nYCBtZXRob2Qgb3JcbiAgLy8gdGhlIGBzb3VyY2VgIHByb3BlcnR5IGFzIGEgY29udmVuaWVuY2UgZm9yIGlubGluaW5nIGNvbXBpbGVkIHRlbXBsYXRlcy5cbiAgcmVzdWx0LnNvdXJjZSA9IHNvdXJjZTtcbiAgaWYgKGlzRXJyb3IocmVzdWx0KSkge1xuICAgIHRocm93IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRlbXBsYXRlO1xuIiwidmFyIGVzY2FwZSA9IHJlcXVpcmUoJy4vZXNjYXBlJyksXG4gICAgcmVFc2NhcGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZUVzY2FwZScpLFxuICAgIHJlRXZhbHVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZUV2YWx1YXRlJyksXG4gICAgcmVJbnRlcnBvbGF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3JlSW50ZXJwb2xhdGUnKTtcblxuLyoqXG4gKiBCeSBkZWZhdWx0LCB0aGUgdGVtcGxhdGUgZGVsaW1pdGVycyB1c2VkIGJ5IGxvZGFzaCBhcmUgbGlrZSB0aG9zZSBpblxuICogZW1iZWRkZWQgUnVieSAoRVJCKS4gQ2hhbmdlIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlXG4gKiBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAdHlwZSBPYmplY3RcbiAqL1xudmFyIHRlbXBsYXRlU2V0dGluZ3MgPSB7XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gYmUgSFRNTC1lc2NhcGVkLlxuICAgKlxuICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAqIEB0eXBlIFJlZ0V4cFxuICAgKi9cbiAgJ2VzY2FwZSc6IHJlRXNjYXBlLFxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGRldGVjdCBjb2RlIHRvIGJlIGV2YWx1YXRlZC5cbiAgICpcbiAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgKiBAdHlwZSBSZWdFeHBcbiAgICovXG4gICdldmFsdWF0ZSc6IHJlRXZhbHVhdGUsXG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gaW5qZWN0LlxuICAgKlxuICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAqIEB0eXBlIFJlZ0V4cFxuICAgKi9cbiAgJ2ludGVycG9sYXRlJzogcmVJbnRlcnBvbGF0ZSxcblxuICAvKipcbiAgICogVXNlZCB0byByZWZlcmVuY2UgdGhlIGRhdGEgb2JqZWN0IGluIHRoZSB0ZW1wbGF0ZSB0ZXh0LlxuICAgKlxuICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAqIEB0eXBlIHN0cmluZ1xuICAgKi9cbiAgJ3ZhcmlhYmxlJzogJycsXG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gaW1wb3J0IHZhcmlhYmxlcyBpbnRvIHRoZSBjb21waWxlZCB0ZW1wbGF0ZS5cbiAgICpcbiAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgKiBAdHlwZSBPYmplY3RcbiAgICovXG4gICdpbXBvcnRzJzoge1xuXG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5ncy5pbXBvcnRzXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKi9cbiAgICAnXyc6IHsgJ2VzY2FwZSc6IGVzY2FwZSB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGVTZXR0aW5ncztcbiIsInZhciBiYXNlVG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlVG9TdHJpbmcnKSxcbiAgICBjaGFyc0xlZnRJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NoYXJzTGVmdEluZGV4JyksXG4gICAgY2hhcnNSaWdodEluZGV4ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvY2hhcnNSaWdodEluZGV4JyksXG4gICAgaXNJdGVyYXRlZUNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc0l0ZXJhdGVlQ2FsbCcpLFxuICAgIHRyaW1tZWRMZWZ0SW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC90cmltbWVkTGVmdEluZGV4JyksXG4gICAgdHJpbW1lZFJpZ2h0SW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC90cmltbWVkUmlnaHRJbmRleCcpO1xuXG4vKipcbiAqIFJlbW92ZXMgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBvciBzcGVjaWZpZWQgY2hhcmFjdGVycyBmcm9tIGBzdHJpbmdgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cmltLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz13aGl0ZXNwYWNlXSBUaGUgY2hhcmFjdGVycyB0byB0cmltLlxuICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cmltbWVkIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50cmltKCcgIGFiYyAgJyk7XG4gKiAvLyA9PiAnYWJjJ1xuICpcbiAqIF8udHJpbSgnLV8tYWJjLV8tJywgJ18tJyk7XG4gKiAvLyA9PiAnYWJjJ1xuICpcbiAqIF8ubWFwKFsnICBmb28gICcsICcgIGJhciAgJ10sIF8udHJpbSk7XG4gKiAvLyA9PiBbJ2ZvbycsICdiYXInXVxuICovXG5mdW5jdGlvbiB0cmltKHN0cmluZywgY2hhcnMsIGd1YXJkKSB7XG4gIHZhciB2YWx1ZSA9IHN0cmluZztcbiAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gIGlmICghc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfVxuICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgY2hhcnMsIGd1YXJkKSA6IGNoYXJzID09IG51bGwpIHtcbiAgICByZXR1cm4gc3RyaW5nLnNsaWNlKHRyaW1tZWRMZWZ0SW5kZXgoc3RyaW5nKSwgdHJpbW1lZFJpZ2h0SW5kZXgoc3RyaW5nKSArIDEpO1xuICB9XG4gIGNoYXJzID0gKGNoYXJzICsgJycpO1xuICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJzTGVmdEluZGV4KHN0cmluZywgY2hhcnMpLCBjaGFyc1JpZ2h0SW5kZXgoc3RyaW5nLCBjaGFycykgKyAxKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmltO1xuIiwidmFyIGlzRXJyb3IgPSByZXF1aXJlKCcuLi9sYW5nL2lzRXJyb3InKSxcbiAgICByZXN0UGFyYW0gPSByZXF1aXJlKCcuLi9mdW5jdGlvbi9yZXN0UGFyYW0nKTtcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBpbnZva2UgYGZ1bmNgLCByZXR1cm5pbmcgZWl0aGVyIHRoZSByZXN1bHQgb3IgdGhlIGNhdWdodCBlcnJvclxuICogb2JqZWN0LiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0J3MgaW52b2tlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFV0aWxpdHlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGF0dGVtcHQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYGZ1bmNgIHJlc3VsdCBvciBlcnJvciBvYmplY3QuXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIGF2b2lkIHRocm93aW5nIGVycm9ycyBmb3IgaW52YWxpZCBzZWxlY3RvcnNcbiAqIHZhciBlbGVtZW50cyA9IF8uYXR0ZW1wdChmdW5jdGlvbihzZWxlY3Rvcikge1xuICogICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gKiB9LCAnPl8+Jyk7XG4gKlxuICogaWYgKF8uaXNFcnJvcihlbGVtZW50cykpIHtcbiAqICAgZWxlbWVudHMgPSBbXTtcbiAqIH1cbiAqL1xudmFyIGF0dGVtcHQgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgYXJncykge1xuICB0cnkge1xuICAgIHJldHVybiBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHJldHVybiBpc0Vycm9yKGUpID8gZSA6IG5ldyBFcnJvcihlKTtcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXR0ZW1wdDtcbiIsIi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpZGVudGl0eTtcbiIsInZhciBhdWRpb0VsO1xudmFyIGRpciA9ICcnO1xudmFyIGZvcm1hdCA9ICd3YXYnO1xudmFyIHZvbHVtZSA9IDAuNTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cblx0aW5pdDogZnVuY3Rpb24oc291bmRzRGlyKSB7XG5cdFx0YXVkaW9FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5cdFx0YXVkaW9FbC5zZXRBdHRyaWJ1dGUoJ2F1dG9wbGF5JywgdHJ1ZSk7XG5cdFx0aWYoc291bmRzRGlyKSBkaXIgPSBzb3VuZHNEaXI7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0cGxheTogZnVuY3Rpb24oZmlsZW5hbWUsIGxvb3ApIHtcblx0XHRpZihmaWxlbmFtZSkgYXVkaW9FbC5zcmMgPSAoZGlyICsgZmlsZW5hbWUgKyAnLicgKyBmb3JtYXQpO1xuXHRcdGxvb3AgPyBhdWRpb0VsLnNldEF0dHJpYnV0ZSgnbG9vcCcsIHRydWUpIDogYXVkaW9FbC5yZW1vdmVBdHRyaWJ1dGUoJ2xvb3AnKTtcblx0XHRhdWRpb0VsLnZvbHVtZSA9IHZvbHVtZTtcblx0XHRhdWRpb0VsLnBsYXkoKTtcblx0fSxcblxuXHRzdG9wOiBmdW5jdGlvbigpIHtcblx0XHRhdWRpb0VsLnBhdXNlKCk7XG5cdFx0YXVkaW9FbC5jdXJyZW50VGltZSA9IDA7XG5cdH1cblxufTsiLCJ2YXIgXyA9IHJlcXVpcmUoJy4vbG9kYXNoJyk7XG52YXIgZGVidWcgPSByZXF1aXJlKCcuL2RlYnVnJyk7XG52YXIgcmVtb3RlRXZlbnRzID0gW107XG52YXIgbG9jYWxFdmVudHMgPSBbXTtcbnZhciBpbml0aWF0ZWQgPSBmYWxzZTtcbnZhciBzaGFyZWQgPSBmYWxzZTtcbnZhciBjdXJzb3IgPSBudWxsO1xudmFyIHdpZGdldDtcbnZhciBlbnRpdHkgPSAnJztcbnZhciBlbWl0O1xudmFyIHBhdGggPSAnJztcbnZhciBldmVudFRpbWVzdGFtcCA9IDA7XG4vLyB2YXIgdXBkYXRlSW50ZXJ2YWwgPSBudWxsO1xuLy8gdmFyIHVwZGF0ZUludGVydmFsVmFsdWUgPSA1MDAwO1xuLy8gdmFyIHVwZGF0ZVN0YXRlSW50ZXJ2YWwgPSBudWxsO1xuLy8gdmFyIGNoZWNrRXZlcnkgPSBfLmRlYm91bmNlKHVuc2hhcmVCcm93c2VyLCAzMDAwMCk7XG4vLyB2YXIgY2hlY2tFdmVyeSA9IF8uZGVib3VuY2UoZW1pdEV2ZW50cywgMTAwKTtcbi8vIHZhciBhZGRFdmVudHNFdmVyeSA9IF8uZGVib3VuY2UoZW1pdEV2ZW50cywgMTAwKTtcbnZhciBhZGRFdmVudHNFdmVyeSA9IF8udGhyb3R0bGUoZW1pdEV2ZW50cywgMTAwLCB7ICd0cmFpbGluZyc6IHRydWUsICdsZWFkaW5nJzogdHJ1ZSB9KTtcbnZhciBjdXJzb3JYID0gMCwgY3Vyc29yWSA9IDA7XG52YXIgcmVxdWVzdEFGO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0aW5pdDogaW5pdCxcblx0aXNJbml0aWF0ZWQ6IGlzSW5pdGlhdGVkLFxuXHRzaGFyZTogc2hhcmVCcm93c2VyLFxuXHR1bnNoYXJlOiB1bnNoYXJlQnJvd3Nlcixcblx0Ly8gdW5zaGFyZUFsbDogdW5zaGFyZUFsbCxcblx0ZW1pdEV2ZW50czogZW1pdEV2ZW50cyxcblx0dXBkYXRlRXZlbnRzOiB1cGRhdGVFdmVudHNcbn07XG5cbmZ1bmN0aW9uIGlzSW5pdGlhdGVkKCkge1xuXHRyZXR1cm4gaW5pdGlhdGVkO1xufVxuXG5mdW5jdGlvbiBpbml0KG9wdGlvbnMpe1xuXHRpZihpbml0aWF0ZWQpIHJldHVybiBkZWJ1Zy5pbmZvKCdDb2Jyb3dzaW5nIGFscmVhZHkgaW5pdGlhdGVkJyk7XG5cblx0YWRkRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ2tleWRvd24nLCBldmVudHNIYW5kbGVyKTtcblx0YWRkRXZlbnQoZG9jdW1lbnQsICdrZXlwcmVzcycsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ21vdXNldXAnLCBldmVudHNIYW5kbGVyKTtcblx0YWRkRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ2NoYW5nZScsIGV2ZW50c0hhbmRsZXIpO1xuXG5cdHdpZGdldCA9ICh0eXBlb2Ygb3B0aW9ucy53aWRnZXQgPT09ICdzdHJpbmcnKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy53aWRnZXQpIDogb3B0aW9ucy53aWRnZXQ7XG5cdGVudGl0eSA9IG9wdGlvbnMuZW50aXR5O1xuXHRlbWl0ID0gb3B0aW9ucy5lbWl0O1xuXHRwYXRoID0gb3B0aW9ucy5wYXRoO1xuXG5cdGluaXRpYXRlZCA9IHRydWU7XG5cdC8vIHVwZGF0ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoZW1pdEV2ZW50cywgdXBkYXRlSW50ZXJ2YWxWYWx1ZSk7XG5cblx0ZGVidWcubG9nKCdjb2Jyb3dzaW5nIG1vZHVsZSBpbml0aWF0ZWQgd2l0aCBwYXJhbWV0ZXJzOiAnLCBvcHRpb25zKTtcblx0ZW1pdCgnY29icm93c2luZy9pbml0Jyk7XG59XG5cbmZ1bmN0aW9uIHNoYXJlQnJvd3Nlcigpe1xuICAgIGlmKHNoYXJlZCkgcmV0dXJuIGRlYnVnLmluZm8oJ0Jyb3dzZXIgYWxyZWFkeSBzaGFyZWQnKTtcbiAgICBhZGRFdmVudChkb2N1bWVudCwgJ3Njcm9sbCcsIGV2ZW50c0hhbmRsZXIpO1xuICAgIGFkZEV2ZW50KGRvY3VtZW50LCAnc2VsZWN0JywgZXZlbnRzSGFuZGxlcik7XG4gICAgYWRkRXZlbnQoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBldmVudHNIYW5kbGVyKTtcblxuICAgIC8vIGFkZEV2ZW50KGRvY3VtZW50LCAnbW91c2VvdmVyJywgZXZlbnRzSGFuZGxlcik7XG4gICAgLy8gYWRkRXZlbnQoZG9jdW1lbnQsICdtb3VzZW91dCcsIGV2ZW50c0hhbmRsZXIpO1xuICAgIFxuICAgIGNyZWF0ZVJlbW90ZUN1cnNvcigpO1xuICAgIFxuICAgIHNoYXJlZCA9IHRydWU7XG4gICAgLy8gdXBkYXRlU3RhdGVJbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZVN0YXRlLCB1cGRhdGVJbnRlcnZhbFZhbHVlKTtcbiAgICAvLyBjbGVhckludGVydmFsKHVwZGF0ZUludGVydmFsKTtcblxuICAgIGRlYnVnLmxvZygnYnJvd3NlciBzaGFyZWQnKTtcbiAgICBlbWl0KCdjb2Jyb3dzaW5nL3NoYXJlZCcsIHsgZW50aXR5OiBlbnRpdHkgfSk7XG59XG5cbmZ1bmN0aW9uIHVuc2hhcmVCcm93c2VyKCl7XG5cdGlmKCFzaGFyZWQpIHJldHVybiBkZWJ1Zy5pbmZvKCdCcm93c2VyIGFscmVhZHkgdW5zaGFyZWQnKTtcblxuICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnc2Nyb2xsJywgZXZlbnRzSGFuZGxlcik7XG4gICAgcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdzZWxlY3QnLCBldmVudHNIYW5kbGVyKTtcbiAgICByZW1vdmVFdmVudChkb2N1bWVudCwgJ21vdXNlbW92ZScsIGV2ZW50c0hhbmRsZXIpO1xuXG4gICAgLy8gcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdtb3VzZW92ZXInLCBldmVudHNIYW5kbGVyKTtcbiAgICAvLyByZW1vdmVFdmVudChkb2N1bWVudCwgJ21vdXNlb3V0JywgZXZlbnRzSGFuZGxlcik7XG4gICAgXG4gICAgcmVtb3ZlUmVtb3RlQ3Vyc29yKCk7XG4gICAgc2hhcmVkID0gZmFsc2U7XG4gICAgLy8gdXBkYXRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChlbWl0RXZlbnRzLCB1cGRhdGVJbnRlcnZhbFZhbHVlKTtcbiAgICAvLyBjbGVhckludGVydmFsKHVwZGF0ZVN0YXRlSW50ZXJ2YWwpO1xuXG5cdGVtaXQoJ2NvYnJvd3NpbmcvdW5zaGFyZWQnLCB7IGVudGl0eTogZW50aXR5IH0pO1xuICAgIGRlYnVnLmxvZygnYnJvd3NlciB1bnNoYXJlZCcpO1xufVxuXG4vLyBmdW5jdGlvbiB1bnNoYXJlQWxsKCl7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCBldmVudHNIYW5kbGVyKTtcblx0Ly8gcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdrZXlkb3duJywgZXZlbnRzSGFuZGxlcik7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAna2V5cHJlc3MnLCBldmVudHNIYW5kbGVyKTtcblx0Ly8gcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdtb3VzZXVwJywgZXZlbnRzSGFuZGxlcik7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCBldmVudHNIYW5kbGVyKTtcblx0Ly8gcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdjaGFuZ2UnLCBldmVudHNIYW5kbGVyKTtcblx0Ly8gY2xlYXJJbnRlcnZhbCh1cGRhdGVJbnRlcnZhbCk7XG4vLyB9XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlbW90ZUN1cnNvcigpe1xuXHR2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdGlmKCFjdXJzb3IpIHtcblx0XHRjdXJzb3I9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRcdGN1cnNvci5jbGFzc05hbWUgPSAnd2Mtcm10LXB0cic7XG5cdFx0Y3Vyc29yLnNldEF0dHJpYnV0ZSgnc3JjJywgcGF0aCsnaW1hZ2VzL3BvaW50ZXIucG5nJyk7XG5cdFx0Y3Vyc29yLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRpZihib2R5LmZpcnN0Q2hpbGQpIHtcblx0XHRcdGJvZHkuaW5zZXJ0QmVmb3JlKGN1cnNvciwgYm9keS5maXJzdENoaWxkKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ym9keS5hcHBlbmRDaGlsZChjdXJzb3IpO1xuXHRcblx0XHR9XG5cdFx0cmVkcmF3Q3Vyc29yKCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVkcmF3Q3Vyc29yKCl7XG5cdGN1cnNvci5zdHlsZS5sZWZ0ID0gY3Vyc29yWDtcblx0Y3Vyc29yLnN0eWxlLnRvcCA9IGN1cnNvclk7XG5cdHJlcXVlc3RBRiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVkcmF3Q3Vyc29yKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlUmVtb3RlQ3Vyc29yKCl7XG5cdGlmKCFjdXJzb3IpIHJldHVybjtcblx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxdWVzdEFGKTtcblx0Y3Vyc29yLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY3Vyc29yKTtcblx0Y3Vyc29yID0gbnVsbDtcbn1cblxuLy9mcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjg5NzE1NS9nZXQtY3Vyc29yLXBvc2l0aW9uLWluLWNoYXJhY3RlcnMtd2l0aGluLWEtdGV4dC1pbnB1dC1maWVsZFxuZnVuY3Rpb24gZ2V0Q2FyZXRQb3NpdGlvbiAob0ZpZWxkKSB7XG4gIC8vIEluaXRpYWxpemVcblx0dmFyIGlDYXJldFBvcyA9IDA7XG5cbiAgLy8gSUUgU3VwcG9ydFxuICAgIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcblxuICAgIC8vIFNldCBmb2N1cyBvbiB0aGUgZWxlbWVudFxuICAgICAgICBvRmllbGQuZm9jdXMgKCk7XG5cbiAgICAvLyBUbyBnZXQgY3Vyc29yIHBvc2l0aW9uLCBnZXQgZW1wdHkgc2VsZWN0aW9uIHJhbmdlXG4gICAgICAgIHZhciBvU2VsID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlICgpO1xuXG4gICAgLy8gTW92ZSBzZWxlY3Rpb24gc3RhcnQgdG8gMCBwb3NpdGlvblxuICAgICAgICBvU2VsLm1vdmVTdGFydCAoJ2NoYXJhY3RlcicsIC1vRmllbGQudmFsdWUubGVuZ3RoKTtcblxuICAgIC8vIFRoZSBjYXJldCBwb3NpdGlvbiBpcyBzZWxlY3Rpb24gbGVuZ3RoXG4gICAgICAgIGlDYXJldFBvcyA9IG9TZWwudGV4dC5sZW5ndGg7XG4gICAgfVxuICAgIGVsc2UgaWYob0ZpZWxkLnR5cGUgJiYgKG9GaWVsZC50eXBlID09PSAnZW1haWwnIHx8IG9GaWVsZC50eXBlID09PSAnbnVtYmVyJykpe1xuICAgICAgICBpQ2FyZXRQb3MgPSBudWxsO1xuICAgIH1cbiAgLy8gRmlyZWZveCBzdXBwb3J0XG4gICAgZWxzZSBpZiAob0ZpZWxkLnNlbGVjdGlvblN0YXJ0IHx8IG9GaWVsZC5zZWxlY3Rpb25TdGFydCA9PSAnMCcpe1xuICAgICAgICBpQ2FyZXRQb3MgPSBvRmllbGQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpQ2FyZXRQb3MgPSBudWxsO1xuICAgIH1cblx0Ly8gUmV0dXJuIHJlc3VsdHNcblx0cmV0dXJuIChpQ2FyZXRQb3MpO1xufVxuXG5mdW5jdGlvbiBlbWl0RXZlbnRzKGV2ZW50cyl7XG5cdC8vIGlmKGxvY2FsRXZlbnRzLmxlbmd0aCkge1xuXHRlbWl0KCdjb2Jyb3dzaW5nL2V2ZW50JywgeyBlbnRpdHk6IGVudGl0eSwgZXZlbnRzOiBldmVudHMgfSk7XG5cdFx0Ly8gbG9jYWxFdmVudHMgPSBbXTtcblx0Ly8gfVxufVxuXG4vLyBmdW5jdGlvbiBhZGRFdmVudHMoZXZlbnRzKSB7XG4vLyBcdGxvY2FsRXZlbnRzLnB1c2goZXZlbnRzKTtcbi8vIFx0ZW1pdEV2ZW50cygpO1xuLy8gfVxuXG4vLyBmdW5jdGlvbiB1cGRhdGVTdGF0ZSgpe1xuLy8gXHRsb2NhbEV2ZW50cy5wdXNoKHsgc2hhcmVkOiB0cnVlLCBlbnRpdHk6IGVudGl0eSB9KTtcbi8vIH1cblxuZnVuY3Rpb24gZXZlbnRzSGFuZGxlcihldnQpe1xuXHR2YXIgZSA9IGV2dCB8fCB3aW5kb3cuZXZlbnQsXG5cdFx0ZXR5cGUgPSBlLnR5cGUsXG5cdFx0dGFyZyA9IGUudGFyZ2V0LFxuXHRcdG5vZGVOYW1lID0gdGFyZy5ub2RlTmFtZSxcblx0XHRkYiA9IGRvY3VtZW50LmJvZHksXG5cdFx0cGFyYW1zID0ge30sXG5cdFx0bm9kZUluZGV4ID0gbnVsbCxcblx0XHRub2RlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhcmcubm9kZU5hbWUpLFxuXHRcdHNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsXG5cdFx0c2Nyb2xsTGVmdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCxcblx0XHRpID0gMDtcblxuXHQvLyBpZiB0aGUgdGFyZ2V0IGlzIHRleHQgbm9kZSwgZ2V0IHBhcmVudCBub2RlXG5cdGlmKHRhcmcubm9kZVR5cGUgPT09IDMpIHRhcmcgPSB0YXJnLnBhcmVudE5vZGU7XG5cblx0Ly8gcmV0dXJuIGlmIHRoZSB0YXJnZXQgbm9kZSBpcyB0aGUgZGVzY2VuZGFudCBvZiB3aWRnZXQgZWxlbWVudFxuXHRpZihlbnRpdHkgPT09ICd1c2VyJyAmJiBpc0Rlc2NlbmRhbnQod2lkZ2V0LCB0YXJnKSkgcmV0dXJuO1xuXG5cdGZvcihpPTA7IGkgPCByZW1vdGVFdmVudHMubGVuZ3RoOyBpKyspe1xuXHRcdGlmKHJlbW90ZUV2ZW50c1tpXS5ldmVudCA9PSBldHlwZSl7XG5cdFx0XHRyZW1vdGVFdmVudHMuc3BsaWNlKGksIDEpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fVxuXG5cdC8vIGdldCB0aGUgaW5kZXggb2YgdGFyZ2V0IG5vZGVcblx0Zm9yKGk9MDsgaTxub2Rlcy5sZW5ndGg7IGkrKyl7XG5cdFx0aWYobm9kZXNbaV0gPT0gdGFyZykgbm9kZUluZGV4ID0gaTtcblx0fVxuXG5cdC8vIGV2ZW50IHR5cGVcblx0cGFyYW1zLmV2ZW50ID0gZXR5cGU7XG5cdC8vIGVudGl0eVxuXHRwYXJhbXMuZW50aXR5ID0gZW50aXR5O1xuXHQvLyB0YXJnZXQgbm9kZVxuXHRwYXJhbXMudG4gPSBub2RlTmFtZTtcblx0Ly8gaW5kZXggb2YgdGhlIHRhcmdldCBub2RlXG5cdHBhcmFtcy50bmkgPSBub2RlSW5kZXg7XG5cdC8vIGxheW91dCB3aWR0aCBvZiB0aGUgZG9jdW1lbnQuYm9keVxuXHRwYXJhbXMudyA9IGRiLm9mZnNldFdpZHRoO1xuXHQvLyBsYXlvdXQgaGVpZ2h0IG9mIHRoZSBkb2N1bWVudC5ib2R5XG5cdHBhcmFtcy5oID0gZGIub2Zmc2V0SGVpZ2h0O1xuXHRwYXJhbXMuc3ggPSBzY3JvbGxMZWZ0O1xuXHRwYXJhbXMuc3kgPSBzY3JvbGxUb3A7XG5cblx0aWYoZXR5cGUgPT09ICdtb3VzZW1vdmUnIHx8IGV0eXBlID09PSAnbW91c2VvdmVyJyB8fCBldHlwZSA9PT0gJ21vdXNlb3V0Jykge1xuXHRcdHZhciB4ID0gZS5wYWdlWCB8fCBlLmNsaWVudFggKyBzY3JvbGxUb3A7XG5cdFx0dmFyIHkgPSBlLnBhZ2VZIHx8IGUuY2xpZW50WSArIHNjcm9sbExlZnQ7XG5cblx0XHQvLyBjdXJzb3IgaG9yaXNvbnRhbCBwb3N0aW9uXG5cdFx0cGFyYW1zLnggPSB4O1xuXHRcdC8vIGN1cnNvciB2ZXJ0aWNhbCBwb3NpdGlvblxuXHRcdHBhcmFtcy55ID0geTtcblxuXHRcdC8vIGZvcihpPTA7IGkgPCBsb2NhbEV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdC8vIFx0aWYobG9jYWxFdmVudHNbaV0uaW5kZXhPZihldHlwZSkgIT0gLTEpIHtcblx0XHQvLyBcdFx0bG9jYWxFdmVudHMuc3BsaWNlKGksIDEpO1xuXHRcdC8vIFx0XHRicmVhaztcblx0XHQvLyBcdH1cblx0XHQvLyB9XG5cdH0gZWxzZSBpZihldHlwZSA9PT0gJ3Njcm9sbCcpIHtcblx0XHQvLyBmb3IoaT0wOyBpIDwgbG9jYWxFdmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyBcdGlmKGxvY2FsRXZlbnRzW2ldLmluZGV4T2YoJ3Njcm9sbCcpICE9IC0xKSB7XG5cdFx0Ly8gXHRcdGxvY2FsRXZlbnRzLnNwbGljZShpLCAxKTtcblx0XHQvLyBcdFx0YnJlYWs7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gfVxuXHRcdFxuXHRcdC8vIHZhciBzdCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuXHRcdC8vIHZhciBzbCA9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdDtcblxuXHR9IGVsc2UgaWYoZXR5cGUgPT0gJ2tleXVwJyB8fCBldHlwZSA9PSAna2V5ZG93bicgfHwgZXR5cGUgPT0gJ2tleXByZXNzJykge1xuXHRcdHZhciBjb2RlID0gZS5jaGFyQ29kZSB8fCBlLmtleUNvZGUgfHwgZS53aGljaDtcblx0XHR2YXIgYyA9IGdldENhcmV0UG9zaXRpb24odGFyZyk7XG5cblx0XHRpZihub2RlTmFtZSA9PT0gJ0lOUFVUJyAmJiB0YXJnLnR5cGUgPT09ICdwYXNzd29yZCcpIHJldHVybjtcblxuXHRcdGlmKGV0eXBlID09ICdrZXl1cCcpIHtcblx0XHRcdGlmKChjID09PSBudWxsKSB8fCAoY29kZSA9PSA4NiAmJiAoZS5tZXRhS2V5IHx8IGUuY3RybEtleSkpKSB7XG5cdFx0XHRcdHZhciB0dmFsdWUgPSB0YXJnLnZhbHVlO1xuXHRcdFx0XHRpZih0dmFsdWUpIHtcblx0XHRcdFx0XHR0dmFsdWUgPSB0dmFsdWUucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG5cdFx0XHRcdFx0Ly8gdGhlIHZhbHVlIGF0dHJpYnV0ZSBvZiB0aGUgdGFyZ2V0IG5vZGUsIGlmIGV4aXN0c1xuXHRcdFx0XHRcdHBhcmFtcy52YWx1ZSA9IHR2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZihldHlwZSA9PSAna2V5ZG93bicpIHtcblx0XHRcdGlmKGMgIT09IG51bGwgJiYgKGNvZGUgPT0gOCB8fCBjb2RlID09IDQ2IHx8IGNvZGUgPT0gMTkwKSkge1xuXHRcdFx0XHRpZighdGFyZy52YWx1ZSkgcmV0dXJuO1xuXHRcdFx0XHQvLyBjYXJldCBwb3NpdGlvblxuXHRcdFx0XHRwYXJhbXMucG9zID0gYztcblx0XHRcdFx0Ly8gY2hhciBjb2RlXG5cdFx0XHRcdHBhcmFtcy5jb2RlID0gY29kZTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYoZXR5cGUgPT09ICdrZXlwcmVzcycpIHtcblx0XHRcdGlmKGMgIT09IG51bGwgJiYgY29kZSAhPSA4ICYmIGNvZGUgIT0gNDYpIHtcblx0XHRcdFx0Ly8gY2FyZXQgcG9zaXRpb25cblx0XHRcdFx0cGFyYW1zLnBvcyA9IGM7XG5cdFx0XHRcdC8vIGNoYXIgY29kZVxuXHRcdFx0XHRwYXJhbXMuY29kZSA9IGNvZGU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYoZXR5cGUgPT09ICdjaGFuZ2UnKSB7XG5cdFx0aWYobm9kZU5hbWUgPT09ICdJTlBVVCcgJiYgdGFyZy50eXBlID09PSAncGFzc3dvcmQnKSByZXR1cm47XG5cdFx0cGFyYW1zLnZhbHVlID0gdGFyZy52YWx1ZTtcblxuXHR9IGVsc2UgaWYoZXR5cGUgPT0gJ21vdXNldXAnIHx8IGV0eXBlID09ICdzZWxlY3QnKXtcblx0XHR2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpIHx8IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLnRleHQsXG5cdFx0XHRzbyA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQsXG5cdFx0XHRlbyA9IHNlbGVjdGlvbi5mb2N1c09mZnNldCxcblx0XHRcdGFuY2hvclBhcmVudE5vZGVJbmRleCA9IDAsXG5cdFx0XHRhbmNob3JQYXJlbnROb2RlTmFtZSA9ICcnLFxuXHRcdFx0YW5jaG9yTm9kZUluZGV4ID0gMCxcblx0XHRcdGFuY2hvclBhcmVudCA9ICcnLFxuXHRcdFx0Zm9jdXNQYXJlbnROb2RlSW5kZXggPSAwLFxuXHRcdFx0Zm9jdXNQYXJlbnROb2RlTmFtZSA9ICcnLFxuXHRcdFx0Zm9jdXNOb2RlSW5kZXggPSAwLFxuXHRcdFx0Zm9jdXNQYXJlbnQgPSAnJyxcblx0XHRcdHJldmVyc2UgPSBmYWxzZTtcblxuXHRcdGlmKHNlbGVjdGlvbi5hbmNob3JOb2RlICE9PSBudWxsKSB7XG5cdFx0XHRhbmNob3JQYXJlbnQgPSBzZWxlY3Rpb24uYW5jaG9yTm9kZS5wYXJlbnROb2RlO1xuXG5cdFx0XHRmb3IoaT0wOyBpPGFuY2hvclBhcmVudC5jaGlsZE5vZGVzLmxlbmd0aDtpKyspIHtcblx0XHRcdFx0aWYoYW5jaG9yUGFyZW50LmNoaWxkTm9kZXNbaV0gPT0gc2VsZWN0aW9uLmFuY2hvck5vZGUpIGFuY2hvck5vZGVJbmRleCA9IGk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGFuY2hvclBhcmVudE5vZGVOYW1lID0gYW5jaG9yUGFyZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRub2RlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGFuY2hvclBhcmVudE5vZGVOYW1lKTtcblx0XHRcdGZvcihpPTA7aTxub2Rlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdGlmKG5vZGVzW2ldID09PSBhbmNob3JQYXJlbnQpIGFuY2hvclBhcmVudE5vZGVJbmRleCA9IGk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGZvY3VzUGFyZW50ID0gc2VsZWN0aW9uLmZvY3VzTm9kZS5wYXJlbnROb2RlO1xuXHRcdFx0Zm9yKGk9MDsgaTxmb2N1c1BhcmVudC5jaGlsZE5vZGVzLmxlbmd0aDtpKyspIHtcblx0XHRcdFx0aWYoZm9jdXNQYXJlbnQuY2hpbGROb2Rlc1tpXSA9PSBzZWxlY3Rpb24uZm9jdXNOb2RlKSBmb2N1c05vZGVJbmRleCA9IGk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGZvY3VzUGFyZW50Tm9kZU5hbWUgPSBmb2N1c1BhcmVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0bm9kZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShmb2N1c1BhcmVudE5vZGVOYW1lKTtcblx0XHRcdGZvcihpPTA7aTxub2Rlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdGlmKG5vZGVzW2ldID09PSBmb2N1c1BhcmVudCkgZm9jdXNQYXJlbnROb2RlSW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdFx0XG5cblx0XHRcdGlmKGFuY2hvclBhcmVudE5vZGVOYW1lID09PSBmb2N1c1BhcmVudE5vZGVOYW1lICYmXG5cdFx0XHRcdGFuY2hvclBhcmVudE5vZGVJbmRleCA9PT0gZm9jdXNQYXJlbnROb2RlSW5kZXggJiZcblx0XHRcdFx0XHRhbmNob3JOb2RlSW5kZXggPT09IGZvY3VzTm9kZUluZGV4ICYmXG5cdFx0XHRcdFx0XHRzbyA+IGVvKVxuXHRcdFx0XHRcdFx0XHRyZXZlcnNlID0gdHJ1ZTtcblxuXHRcdFx0Ly8gbmFtZSBvZiB0aGUgdGFyZ2V0IG5vZGUgd2hlcmUgc2VsZWN0aW9uIHN0YXJ0ZWRcblx0XHRcdHBhcmFtcy5zbiA9IGFuY2hvclBhcmVudE5vZGVOYW1lO1xuXHRcdFx0cGFyYW1zLnNuaSA9IGFuY2hvclBhcmVudE5vZGVJbmRleDtcblx0XHRcdHBhcmFtcy5zY2hpID0gYW5jaG9yTm9kZUluZGV4O1xuXHRcdFx0Ly8gbmFtZSBvZiB0aGUgdGFyZ2V0IG5vZGUgd2hlcmUgc2VsZWN0aW9uIGVuZGVkXG5cdFx0XHRwYXJhbXMuZW4gPSBmb2N1c1BhcmVudE5vZGVOYW1lO1xuXHRcdFx0cGFyYW1zLmVuaSA9IGZvY3VzUGFyZW50Tm9kZUluZGV4O1xuXHRcdFx0cGFyYW1zLmVjaGkgPSBmb2N1c05vZGVJbmRleDtcblx0XHRcdHBhcmFtcy5zbyA9IHJldmVyc2UgPyBlbyA6IHNvO1xuXHRcdFx0cGFyYW1zLmVvID0gcmV2ZXJzZSA/IHNvIDogZW87XG5cdFx0fVxuXHR9IGVsc2UgaWYoZXR5cGUgPT0gJ2NsaWNrJykge1xuXHRcdHBhcmFtcy5zY3ggPSBlLnNjcmVlblg7XG5cdFx0cGFyYW1zLnNjeSA9IGUuc2NyZWVuWTtcblx0fVxuXG5cdC8vIGRlYnVnLmxvZygnZXZlbnRzSGFuZGxlcjogJywgcGFyYW1zKTtcblx0Ly8gbG9jYWxFdmVudHMucHVzaChwYXJhbXMpO1xuXHQvLyBlbWl0RXZlbnRzKCk7XG5cdC8vIGFkZEV2ZW50cyhwYXJhbXMpO1xuXHRhZGRFdmVudHNFdmVyeShwYXJhbXMpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVFdmVudHMocmVzdWx0KXtcblx0dmFyIG1haW5FbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdHRhcmdldCxcblx0XHRldnQgPSB7fTtcblxuXHRpZihyZXN1bHQuZXZlbnRzKSB7XG5cblx0XHQvLyBjaGVjayBmb3Igc2Nyb2xsVG9wL0xlZnQuIFxuXHRcdC8vIElFIGFuZCBGaXJlZm94IGFsd2F5cyByZXR1cm4gMCBmcm9tIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wL0xlZnQsIFxuXHRcdC8vIHdoaWxlIG90aGVyIGJyb3dzZXJzIHJldHVybiAwIGZyb20gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG5cdFx0Ly8gbWFpbkVsZW1lbnQgPSAoJ0FjdGl2ZVhPYmplY3QnIGluIHdpbmRvdyB8fCB0eXBlb2YgSW5zdGFsbFRyaWdnZXIgIT09ICd1bmRlZmluZWQnKSA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IGRvY3VtZW50LmJvZHk7XG5cblx0XHQvLyBmb3IodmFyIGk9MDsgaTxyZXN1bHQuZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHQvLyBldnQgPSByZXN1bHQuZXZlbnRzW2ldO1xuXHRcdFx0ZXZ0ID0gcmVzdWx0LmV2ZW50cztcblxuXHRcdFx0Ly8gaWYoZXZ0LnNoYXJlZCAhPT0gdW5kZWZpbmVkKSBkZWJ1Zy5sb2coJ3NoYXJlZCBldmVudHMnLCBldmVudFRpbWVzdGFtcCwgZXZ0LCByZXN1bHQuaW5pdCk7XG5cdFx0XHRpZihldnQudGltZXN0YW1wIDwgZXZlbnRUaW1lc3RhbXApIHJldHVybjtcblx0XHRcdGlmKGV2dC5lbnRpdHkgPT09IGVudGl0eSkgcmV0dXJuO1xuXHRcdFx0XHRcdFxuXHRcdFx0Ly8gaWYoZXZ0LnNoYXJlZCAhPT0gdW5kZWZpbmVkKXtcblx0XHRcdC8vIFx0aWYoZXZ0LnNoYXJlZCl7XG5cdFx0XHQvLyBcdFx0Y2hlY2tFdmVyeSgpO1xuXHRcdFx0Ly8gXHRcdHNoYXJlQnJvd3NlcigpO1xuXHRcdFx0Ly8gXHR9IGVsc2Uge1xuXHRcdFx0Ly8gXHRcdGlmKCFyZXN1bHQuaGlzdG9yeUV2ZW50cykgdW5zaGFyZUJyb3dzZXIoKTtcblx0XHRcdC8vIFx0fVxuXHRcdFx0Ly8gfVxuXHRcdFx0aWYoZXZ0LnVybCkge1xuXHRcdFx0XHQvLyBpZighcmVzdWx0Lmhpc3RvcnlFdmVudHMpIHtcblx0XHRcdFx0XHR2YXIgdXJsID0gZXZ0LnVybDtcblx0XHRcdFx0XHR2YXIgZG9jVXJsID0gZG9jdW1lbnQuVVJMO1xuXHRcdFx0XHRcdGlmKGRvY1VybC5pbmRleE9mKCdjaGF0U2Vzc2lvbklkJykgIT09IC0xKSB7XG5cdFx0XHRcdFx0XHRkb2NVcmwgPSBkb2NVcmwuc3Vic3RyKDAsIGRvY1VybC5pbmRleE9mKCdjaGF0U2Vzc2lvbklkJyktMSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHVybCAhPSBkb2NVcmwpIGNoYW5nZVVSTCh1cmwpO1xuXHRcdFx0XHQvLyB9XG5cdFx0XHR9XG5cdFx0XHRpZihldnQudyl7XG5cdFx0XHRcdGlmKGV2dC5lbnRpdHkgPT09ICd1c2VyJykge1xuXHRcdFx0XHRcdHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcblx0XHRcdFx0XHR2YXIgaW5uZXJXID0gYm9keS5vZmZzZXRXaWR0aDtcblx0XHRcdFx0XHRpZihpbm5lclcgIT09IGV2dC53KSB7XG5cdFx0XHRcdFx0XHRkb2N1bWVudC5ib2R5LnN0eWxlLndpZHRoID0gZXZ0LncgKyAncHgnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoZXZ0LmV2ZW50ID09PSAnbW91c2Vtb3ZlJykge1xuXHRcdFx0XHRpZihjdXJzb3IpIHtcblx0XHRcdFx0XHRjdXJzb3JYID0gZXZ0LnggKyAncHgnO1xuXHRcdFx0XHRcdGN1cnNvclkgPSBldnQueSArICdweCc7XG5cdFx0XHRcdFx0Ly8gY3Vyc29yLnN0eWxlLmxlZnQgPSBldnQueCArICdweCc7XG5cdFx0XHRcdFx0Ly8gY3Vyc29yLnN0eWxlLnRvcCA9IGV2dC55ICsgJ3B4Jztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKGV2dC5ldmVudCA9PT0gJ3Njcm9sbCcpIHtcblx0XHRcdFx0aWYoZXZ0LnRuICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRpZihldnQudG4gPT09ICcjZG9jdW1lbnQnKSB0YXJnZXQgPSBtYWluRWxlbWVudDtcblx0XHRcdFx0XHRlbHNlIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGV2dC50bilbZXZ0LnRuaV07XG5cdFx0XHRcdFx0aWYodGFyZ2V0KXtcblx0XHRcdFx0XHRcdHRhcmdldC5zY3JvbGxUb3AgPSBldnQuc3k7XG5cdFx0XHRcdFx0XHR0YXJnZXQuc2Nyb2xsTGVmdCA9IGV2dC5zeDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjb25zb2xlLmxvZygnc2Nyb2xsIGV2ZW50OiAnLCB0YXJnZXQsIGV2dC5zeSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZihldnQuZXZlbnQgPT09ICdtb3VzZXVwJyB8fCBldnQuZXZlbnQgPT09ICdzZWxlY3QnKXtcblx0XHRcdFx0aWYoZXZ0LnNuKSB7XG5cdFx0XHRcdFx0dmFyIHN0YXJ0Tm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGV2dC5zbilbZXZ0LnNuaV07XG5cdFx0XHRcdFx0dmFyIGVuZE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShldnQuZW4pW2V2dC5lbmldO1xuXHRcdFx0XHRcdGlmKGRvY3VtZW50LmNyZWF0ZVJhbmdlICYmIHN0YXJ0Tm9kZSAhPT0gdW5kZWZpbmVkICYmIGVuZE5vZGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0dmFyIHJuZyA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG5cdFx0XHRcdFx0XHRybmcuc2V0U3RhcnQoc3RhcnROb2RlLmNoaWxkTm9kZXNbZXZ0LnNjaGldLCBldnQuc28pO1xuXHRcdFx0XHRcdFx0cm5nLnNldEVuZChlbmROb2RlLmNoaWxkTm9kZXNbZXZ0LmVjaGldLCBldnQuZW8pO1xuXHRcdFx0XHRcdFx0dmFyIHNlbCA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcblx0XHRcdFx0XHRcdHNlbC5yZW1vdmVBbGxSYW5nZXMoKTtcblx0XHRcdFx0XHRcdHNlbC5hZGRSYW5nZShybmcpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKGV2dC5ldmVudCA9PT0gJ2tleXVwJyB8fCBldnQuZXZlbnQgPT09ICdrZXlkb3duJyB8fCBldnQuZXZlbnQgPT09ICdrZXlwcmVzcycpIHtcblx0XHRcdFx0aWYoZXZ0LnRuICE9PSB1bmRlZmluZWQgJiYgZXZ0LnRuaSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0dGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZXZ0LnRuKVtldnQudG5pXTtcblx0XHRcdFx0XHRpZih0YXJnZXQpe1xuXHRcdFx0XHRcdFx0dmFyIG91dHB1dDtcblx0XHRcdFx0XHRcdHZhciBhID0gdGFyZ2V0LnZhbHVlO1xuXHRcdFx0XHRcdFx0aWYoZXZ0LmNvZGUgPT0gOCkge1xuXHRcdFx0XHRcdFx0XHRpZihldnQucG9zID09IGEubGVuZ3RoLTEpIG91dHB1dCA9IGEuc3Vic3RyKDAsIGV2dC5wb3MtMSk7XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYoZXZ0LnBvcyA9PT0gMCkgcmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRlbHNlIG91dHB1dCA9IGEuc3Vic3RyKDAsIGV2dC5wb3MtMSkgKyBhLnN1YnN0cihldnQucG9zKTtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LnZhbHVlID0gb3V0cHV0O1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKGV2dC5jb2RlID09IDQ2KSB7XG5cdFx0XHRcdFx0XHRcdG91dHB1dCA9IGEuc3Vic3RyKDAsIGV2dC5wb3MpICsgYS5zdWJzdHIoZXZ0LnBvcysxKTtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LnZhbHVlID0gb3V0cHV0O1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKGV2dC5jb2RlID09IDE5MCkge1xuXHRcdFx0XHRcdFx0XHRvdXRwdXQgPSBhLnN1YnN0cigwLCBldnQucG9zKSArICcuJyArIGEuc3Vic3RyKGV2dC5wb3MpO1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQudmFsdWUgPSBvdXRwdXQ7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoZXZ0LnZhbHVlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdFx0dmFyIHR2YWx1ZSA9IGV2dC52YWx1ZTtcblx0XHRcdFx0XHRcdFx0dHZhbHVlID0gdHZhbHVlLnJlcGxhY2UoLzxicj4vZywgJ1xcbicpO1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQudmFsdWUgPSB0dmFsdWU7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR2YXIgYyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZXZ0LmNvZGUpO1xuXHRcdFx0XHRcdFx0XHRpZihhKSBvdXRwdXQgPSBhLnN1YnN0cigwLCBldnQucG9zKSArIGMgKyBhLnN1YnN0cihldnQucG9zKTtcblx0XHRcdFx0XHRcdFx0ZWxzZSBvdXRwdXQgPSBjO1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQudmFsdWUgPSBvdXRwdXQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYoZXZ0LmV2ZW50ID09PSAnY2hhbmdlJykge1xuXHRcdFx0XHR0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShldnQudG4pW2V2dC50bmldO1xuXHRcdFx0XHR0YXJnZXQudmFsdWUgPSBldnQudmFsdWU7XG5cdFx0XHR9IGVsc2UgaWYoZXZ0LmV2ZW50ID09PSAnY2xpY2snKXtcblx0XHRcdFx0Ly8gdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZXZ0LnRuLnRvTG93ZXJDYXNlKCkpO1xuXHRcdFx0XHR0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShldnQudG4pW2V2dC50bmldO1xuXHRcdFx0XHRpZih0YXJnZXQpIHRhcmdldC5jbGljaygpO1xuXHRcdFx0XHQvLyBlbGVtZW50c1tldnQudG5pXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAneWVsbG93Jztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGV2dC50bilbZXZ0LnRuaV07XG5cdFx0XHRcdGlmKHRhcmdldCkge1xuXHRcdFx0XHRcdHZhciBldnRPcHRzID0gbW91c2VFdmVudChldnQuZXZlbnQsIGV2dC54LCBldnQueSwgZXZ0LngsIGV2dC55KTtcblx0XHRcdFx0XHRkaXNwYXRjaEV2ZW50KHRhcmdldCwgZXZ0T3B0cyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYoZXZ0LmV2ZW50ID09PSAnY2xpY2snIHx8IGV2dC5ldmVudCA9PT0gJ3Njcm9sbCcpIHJlbW90ZUV2ZW50cy5wdXNoKGV2dCk7XG5cdFx0Ly8gfVxuXHR9XG5cblx0aWYocmVzdWx0LnRpbWVzdGFtcCkgZXZlbnRUaW1lc3RhbXAgPSByZXN1bHQudGltZXN0YW1wO1xuXHQvLyBpZihzaGFyZWQpIGVtaXRFdmVudHMoKTtcbn1cblxuZnVuY3Rpb24gbW91c2VFdmVudCh0eXBlLCBzeCwgc3ksIGN4LCBjeSkge1xuXHR2YXIgZXZ0O1xuXHR2YXIgZSA9IHtcblx0XHRidWJibGVzOiB0cnVlLFxuXHRcdGNhbmNlbGFibGU6ICh0eXBlICE9IFwibW91c2Vtb3ZlXCIpLFxuXHRcdHZpZXc6IHdpbmRvdyxcblx0XHRkZXRhaWw6IDAsXG5cdFx0c2NyZWVuWDogc3gsXG5cdFx0c2NyZWVuWTogc3ksXG5cdFx0Y2xpZW50WDogY3gsXG5cdFx0Y2xpZW50WTogY3ksXG5cdFx0Y3RybEtleTogZmFsc2UsXG5cdFx0YWx0S2V5OiBmYWxzZSxcblx0XHRzaGlmdEtleTogZmFsc2UsXG5cdFx0bWV0YUtleTogZmFsc2UsXG5cdFx0YnV0dG9uOiAwLFxuXHRcdHJlbGF0ZWRUYXJnZXQ6IHVuZGVmaW5lZFxuXHR9O1xuXHRpZiAodHlwZW9mKCBkb2N1bWVudC5jcmVhdGVFdmVudCApID09IFwiZnVuY3Rpb25cIikge1xuXHRcdGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIik7XG5cdFx0ZXZ0LmluaXRNb3VzZUV2ZW50KFxuXHRcdFx0dHlwZSxcblx0XHRcdGUuYnViYmxlcyxcblx0XHRcdGUuY2FuY2VsYWJsZSxcblx0XHRcdGUudmlldyxcblx0XHRcdGUuZGV0YWlsLFxuXHRcdFx0ZS5zY3JlZW5YLFxuXHRcdFx0ZS5zY3JlZW5ZLFxuXHRcdFx0ZS5jbGllbnRYLFxuXHRcdFx0ZS5jbGllbnRZLFxuXHRcdFx0ZS5jdHJsS2V5LFxuXHRcdFx0ZS5hbHRLZXksXG5cdFx0XHRlLnNoaWZ0S2V5LFxuXHRcdFx0ZS5tZXRhS2V5LFxuXHRcdFx0ZS5idXR0b24sXG5cdFx0XHRkb2N1bWVudC5ib2R5LnBhcmVudE5vZGVcblx0XHQpO1xuXHR9IGVsc2UgaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KSB7XG5cdFx0ZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcblx0XHRmb3IgKHZhciBwcm9wIGluIGUpIHtcblx0XHRcdGV2dFtwcm9wXSA9IGVbcHJvcF07XG5cdFx0fVxuXHRcdGV2dC5idXR0b24gPSB7IDA6MSwgMTo0LCAyOjIgfVtldnQuYnV0dG9uXSB8fCBldnQuYnV0dG9uO1xuXHR9XG5cdHJldHVybiBldnQ7XG59XG5mdW5jdGlvbiBkaXNwYXRjaEV2ZW50IChlbCwgZXZ0KSB7XG5cdGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG5cdFx0ZWwuZGlzcGF0Y2hFdmVudChldnQpO1xuXHR9IGVsc2UgaWYgKGVsLmZpcmVFdmVudCkge1xuXHRcdGVsLmZpcmVFdmVudCgnb24nICsgdHlwZSwgZXZ0KTtcblx0fVxuXHRyZXR1cm4gZXZ0O1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VVUkwodXJsKSB7XG4gICAgdmFyIGRvY1VybCA9IGRvY3VtZW50LlVSTDtcbiAgICBpZiAoZG9jVXJsICE9PSB1cmwpIHtcblx0XHRkb2N1bWVudC5sb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXNEZXNjZW5kYW50KHBhcmVudCwgY2hpbGQpIHtcbiAgICAgdmFyIG5vZGUgPSBjaGlsZC5wYXJlbnROb2RlO1xuICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XG4gICAgICAgICBpZiAobm9kZSA9PSBwYXJlbnQpIHJldHVybiB0cnVlO1xuICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICAgfVxuICAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50KG9iaiwgZXZUeXBlLCBmbikge1xuICBpZiAob2JqLmFkZEV2ZW50TGlzdGVuZXIpIG9iai5hZGRFdmVudExpc3RlbmVyKGV2VHlwZSwgZm4sIGZhbHNlKTtcbiAgZWxzZSBpZiAob2JqLmF0dGFjaEV2ZW50KSBvYmouYXR0YWNoRXZlbnQoXCJvblwiK2V2VHlwZSwgZm4pO1xufVxuZnVuY3Rpb24gcmVtb3ZlRXZlbnQob2JqLCBldlR5cGUsIGZuKSB7XG4gIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZUeXBlLCBmbiwgZmFsc2UpO1xuICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIG9iai5kZXRhY2hFdmVudChcIm9uXCIrZXZUeXBlLCBmbik7XG59IiwidmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbnZhciBzdG9yYWdlID0gcmVxdWlyZSgnLi9zdG9yYWdlJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xudmFyIGRlYnVnID0gcmVxdWlyZSgnLi9kZWJ1ZycpO1xuLy8gdmFyIHdlYnNvY2tldHMgPSByZXF1aXJlKCcuL3dlYnNvY2tldHMnKTtcbi8vIHZhciB1cmwgPSByZXF1aXJlKCd1cmwnKS5wYXJzZShkb2N1bWVudC5VUkwsIHRydWUpO1xudmFyIHVybCA9IGdsb2JhbC5sb2NhdGlvbjtcbnZhciBfID0gcmVxdWlyZSgnLi9sb2Rhc2gnKTtcbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG52YXIgd2Vic29ja2V0VHJ5ID0gMTtcbnZhciBwb2xsVHVybnMgPSAxO1xudmFyIG1haW5BZGRyZXNzID0gXCJtYWluLnJpbmdvdGVsLm5ldC9jaGF0Ym90L1dlYkNoYXQvXCI7XG4vLyB2YXIgcHVibGljVXJsID0gXCJodHRwczovL21haW4ucmluZ290ZWwubmV0L3B1YmxpYy9cIjtcbnZhciB3ZWJzb2NrZXRVcmwgPSBcIlwiO1xudmFyIG1vZHVsZUluaXQgPSBmYWxzZTtcbnZhciBzZXNzaW9uVGltZW91dCA9IG51bGw7XG52YXIgY2hhdFRpbWVvdXQgPSBudWxsO1xuXG4vKipcbiAqIENvcmUgbW9kdWxlIGltcGxlbWVudHMgbWFpbiBpbnRlcm5hbCBmdW5jdGlvbmFsaXR5XG4gKiBcbiAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9ucyBJbnN0YW50aWF0aW9uIG9wdGlvbnMgdGhhdCBvdmVycmlkZXMgbW9kdWxlIGRlZmF1bHRzXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgUmV0dXJuIHB1YmxpYyBBUElcbiAqL1xuXG5pbmhlcml0cyhXY2hhdEFQSSwgRXZlbnRFbWl0dGVyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBXY2hhdEFQSTtcblxuZnVuY3Rpb24gV2NoYXRBUEkob3B0aW9ucyl7XG5cblx0Ly8gZXh0ZW5kIGRlZmF1bHQgb3B0aW9uc1xuXHQvLyB3aXRoIHByb3ZpZGVkIG9iamVjdFxuXHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHR0aGlzLm9wdGlvbnMuc2VydmVyVXJsID0gdGhpcy5vcHRpb25zLnNlcnZlciArICcvaXBjYy8kJCQnO1xuXHR0aGlzLnNlc3Npb24gPSB7fTtcblxuXHRpZighdGhpcy5vcHRpb25zLnBhZ2VpZCkgcmV0dXJuIGNvbnNvbGUuZXJyb3IoJ0Nhbm5vdCBpbml0aWF0ZSBtb2R1bGU6IHBhZ2VpZCBpcyB1bmRlZmluZWQnKTtcblxuXHR3ZWJzb2NrZXRVcmwgPSBtYWluQWRkcmVzcyt0aGlzLm9wdGlvbnMucGFnZWlkO1xuXG5cdHRoaXMuY3JlYXRlV2Vic29ja2V0KCk7XG5cblx0dGhpcy5vbignc2Vzc2lvbi9jcmVhdGUnLCB0aGlzLm9uU2Vzc2lvbkNyZWF0ZS5iaW5kKHRoaXMpKTtcblx0Ly8gdGhpcy5vbignY2hhdC9jbG9zZScsIGZ1bmN0aW9uKGRhdGEpIHtcblx0Ly8gXHRzdG9yYWdlLnNhdmVTdGF0ZSgnY2hhdCcsIGZhbHNlLCAnc2Vzc2lvbicpO1xuXHQvLyB9KTtcblx0dGhpcy5vbignRXJyb3InLCB0aGlzLm9uRXJyb3IpO1xuXG5cdHJldHVybiB0aGlzO1xuXG59XG5cbldjaGF0QVBJLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24oZXJyKXtcblx0ZGVidWcubG9nKCdFcnJvcjogJywgZXJyKTtcbn1cblxuV2NoYXRBUEkucHJvdG90eXBlLm9uU2Vzc2lvbkNyZWF0ZSA9IGZ1bmN0aW9uKGRhdGEpe1xuXHR0aGlzLnNlc3Npb24gPSBfLm1lcmdlKHRoaXMuc2Vzc2lvbiwgZGF0YSk7XG5cdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdzaWQnLCBkYXRhLnNpZCk7XG5cdC8vIHRoaXMuc2V0U2Vzc2lvblRpbWVvdXQoKTtcbn1cblxuV2NoYXRBUEkucHJvdG90eXBlLnNldFNlc3Npb25UaW1lb3V0ID0gZnVuY3Rpb24oKXtcblx0dmFyIHRpbWVvdXQgPSB0aGlzLnNlc3Npb24uc2Vzc2lvblRpbWVvdXQ7XG5cdGNsZWFyVGltZW91dChzZXNzaW9uVGltZW91dCk7XG5cdGlmKHRpbWVvdXQpXG5cdFx0c2Vzc2lvblRpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMub25TZXNzaW9uVGltZW91dC5iaW5kKHRoaXMpLCB0aW1lb3V0KjEwMDApO1xufVxuXG5XY2hhdEFQSS5wcm90b3R5cGUub25TZXNzaW9uVGltZW91dCA9IGZ1bmN0aW9uKCl7XG5cdHRoaXMuZW1pdCgnc2Vzc2lvbi90aW1lb3V0Jyk7XG59O1xuXG5XY2hhdEFQSS5wcm90b3R5cGUuc2VuZERhdGEgPSBmdW5jdGlvbihkYXRhKXtcblx0aWYodGhpcy53ZWJzb2NrZXQpIHRoaXMud2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xufTtcblxuLyoqXG4gKiBXZWJzb2NrZXQgbWVzc2FnZXMgaGFuZGxlclxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUub25XZWJzb2NrZXRNZXNzYWdlID0gZnVuY3Rpb24oZSl7XG5cdC8vIHRoaXMuZW1pdCgnd2Vic29ja2V0L21lc3NhZ2UnLCAoZS5kYXRhID8gSlNPTi5wYXJzZShlLmRhdGEpIDoge30pKTtcblx0dmFyIGRhdGEgPSBKU09OLnBhcnNlKGUuZGF0YSksXG5cdCAgICBtZXRob2QgPSBkYXRhLm1ldGhvZDtcblxuXHQvLyBkZWJ1Zy5sb2coJ29uV2Vic29ja2V0TWVzc2FnZTogJywgZGF0YSk7XG5cdFxuXHRpZihkYXRhLm1ldGhvZCkge1xuXHRcdGlmKGRhdGEubWV0aG9kID09PSAnc2Vzc2lvbicpIHtcblx0XHRcdHRoaXMuZW1pdCgnc2Vzc2lvbi9jcmVhdGUnLCBkYXRhLnBhcmFtcyk7XG5cblx0XHR9IGVsc2UgaWYoZGF0YS5tZXRob2QgPT09ICdtZXNzYWdlcycpIHtcblx0XHRcdGlmKGRhdGEucGFyYW1zLmxpc3QpIHtcblx0XHRcdFx0ZGF0YS5wYXJhbXMubGlzdC5tYXAoZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0XHRcdHRoaXMuZW1pdCgnbWVzc2FnZS9uZXcnLCBpdGVtKTtcblx0XHRcdFx0XHRyZXR1cm4gaXRlbTtcblx0XHRcdFx0fS5iaW5kKHRoaXMpKTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZihkYXRhLm1ldGhvZCA9PT0gJ21lc3NhZ2UnKSB7XG5cdFx0XHRpZihkYXRhLnBhcmFtcy50eXBpbmcpIHtcblx0XHRcdFx0dGhpcy5lbWl0KCdtZXNzYWdlL3R5cGluZycpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5lbWl0KCdtZXNzYWdlL25ldycsIGRhdGEucGFyYW1zKTtcblx0XHRcdFx0dGhpcy5zZXRTZXNzaW9uVGltZW91dCgpO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIGlmKGRhdGEubWV0aG9kID09PSAnb3BlblNoYXJlJykgeyAvLyBBZ2VudCAtLS0+IFVzZXJcblx0XHRcdGlmKHRoaXMuc2Vzc2lvbi5zaGFyZWRJZCA9PT0gZGF0YS5wYXJhbXMuaWQpIHJldHVybjtcblx0XHRcdGlmKGRhdGEucGFyYW1zLnVybCAmJiAodXJsLmhyZWYgIT09IGRhdGEucGFyYW1zLnVybCkpIHJldHVybiB3aW5kb3cubG9jYXRpb24gPSBkYXRhLnBhcmFtcy51cmw7XG5cdFx0XHRpZihkYXRhLnBhcmFtcy5pZCkge1xuXHRcdFx0XHR0aGlzLnNlc3Npb24uc2hhcmVkSWQgPSBkYXRhLnBhcmFtcy5pZDtcblx0XHRcdFx0dGhpcy5lbWl0KCdzZXNzaW9uL2pvaW5lZCcsIHsgdXJsOiB1cmwuaHJlZiB9KTtcblx0XHRcdFx0dGhpcy5zaGFyZU9wZW5lZChkYXRhLnBhcmFtcy5pZCwgdXJsLmhyZWYpOyAvLyBVc2VyIC0tLT4gQWdlbnRcblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZihkYXRhLm1ldGhvZCA9PT0gJ3NoYXJlT3BlbmVkJykgeyAvLyBVc2VyIC0tLT4gQWdlbnRcblx0XHRcdGlmKGRhdGEucGFyYW1zLmlkKSB7XG5cdFx0XHRcdHRoaXMuc2Vzc2lvbi5zaGFyZWRJZCA9IGRhdGEucGFyYW1zLmlkO1xuXHRcdFx0XHR0aGlzLmVtaXQoJ3Nlc3Npb24vam9pbmVkJywgeyB1cmw6IHVybC5ocmVmIH0pO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIGlmKGRhdGEubWV0aG9kID09PSAnc2hhcmVDbG9zZWQnKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMub3BlblNoYXJlSW50ZXZhbCk7XG5cdFx0XHR0aGlzLnNlc3Npb24uc2hhcmVkSWQgPSBcIlwiO1xuXHRcdFx0dGhpcy5lbWl0KCdzZXNzaW9uL2Rpc2pvaW4nKTtcblxuXHRcdH0gZWxzZSBpZihkYXRhLm1ldGhvZCA9PT0gJ2V2ZW50cycpIHtcblx0XHRcdHRoaXMuZW1pdCgnY29icm93c2luZy91cGRhdGUnLCBkYXRhLnBhcmFtcyk7XG5cblx0XHR9XG5cdH1cbn07XG5cbi8qKlxuICogTW9kdWxlIGluaXRpYXRpb25cbiAqIEVtaXRzIG1vZHVsZS9zdGFydCBldmVudCBpZiBtb2R1bGUgc3RhcnRlZFxuICovXG4vLyBXY2hhdEFQSS5wcm90b3R5cGUuaW5pdE1vZHVsZSA9IGZ1bmN0aW9uKCl7XG5cblx0Ly8gXy5wb2xsKGZ1bmN0aW9uKCl7XG5cdC8vIFx0cmV0dXJuICh3ZWJzb2NrZXRJbml0ID09PSB0cnVlKTtcblx0Ly8gfSwgZnVuY3Rpb24oKSB7XG5cdC8vIFx0ZGVidWcubG9nKCdJTklUJyk7XG5cdC8vIFx0dGhpcy5pbml0KCk7XG5cdC8vIH0uYmluZCh0aGlzKSwgZnVuY3Rpb24oKXtcblx0Ly8gXHRpZihwb2xsVHVybnMgPCAyKSB7XG5cdC8vIFx0XHRwb2xsVHVybnMrKztcblx0Ly8gXHR9IGVsc2Uge1xuXHQvLyBcdFx0cmV0dXJuIHRoaXMuZW1pdCgnRXJyb3InLCAnTW9kdWxlIHdhc25cXCd0IGluaXRpYXRlZCBkdWUgdG8gbmV0d29yayBlcnJvcicpO1xuXHQvLyBcdH1cblx0Ly8gfS5iaW5kKHRoaXMpLCA2MDAwMCk7XG4vLyB9O1xuXG5XY2hhdEFQSS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG5cdG1vZHVsZUluaXQgPSB0cnVlO1xuXG5cdHZhciBlbnRpdHkgPSBzdG9yYWdlLmdldFN0YXRlKCdlbnRpdHknLCAnc2Vzc2lvbicpLFxuXHRcdHNpZCA9IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpO1xuXHRcdHN0ckluZGV4ID0gdXJsLmhyZWYuaW5kZXhPZignY2hhdFNlc3Npb25JZCcpO1xuXG5cdGRlYnVnLmxvZygnaW5pdE1vZHVsZTogJywgdGhpcy5zZXNzaW9uLCBlbnRpdHksIHNpZCk7XG5cblx0Ly8gQSBjaGF0U2Vzc2lvbklkIHBhcmFtZXRlciBpbiB0aGUgdXJsIHF1ZXJ5IFxuXHQvLyBpbmRpY2F0ZXMgdGhhdCB0aGUgd2ViIHBhZ2Ugd2FzIG9wZW5lZCBieSBhZ2VudC5cblx0Ly8gSW4gdGhhdCBjYXNlIGFnZW50IHNob3VsZCBqb2luIHRoZSBzZXNzaW9uLlxuXHRpZihzdHJJbmRleCAhPT0gLTEpIHtcblx0XHRzaWQgPSB0aGlzLmdldFNpZEZyb21VcmwodXJsLmhyZWYpO1xuXHRcdGVudGl0eSA9ICdhZ2VudCc7XG5cdFx0dmFyIGNsZWFuVXJsID0gdXJsLmhyZWYuc3Vic3RyKDAsIHN0ckluZGV4KTtcblx0XHRjbGVhblVybCA9IGNsZWFuVXJsW2NsZWFuVXJsLmxlbmd0aC0xXSA9PT0gJz8nID8gY2xlYW5Vcmwuc3Vic3RyKDAsIGNsZWFuVXJsLmxlbmd0aC0xKSA6IGNsZWFuVXJsO1xuXG5cdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ3NpZCcsIHNpZCk7XG5cdFx0dGhpcy5qb2luU2Vzc2lvbihjbGVhblVybCk7XG5cblx0fSBlbHNlIGlmKGVudGl0eSA9PT0gJ2FnZW50JykgeyAvLyBJbiBjYXNlIHRoZSBjb2Jyb3dzaW5nIHNlc3Npb24gaXMgYWN0aXZlXG5cdFx0c2lkID0gc3RvcmFnZS5nZXRTdGF0ZSgnc2lkJyk7XG5cdFx0dGhpcy5qb2luU2Vzc2lvbih1cmwuaHJlZik7XG5cblx0fSBlbHNlIHtcblx0XHRlbnRpdHkgPSAndXNlcic7XG5cdFx0dGhpcy5jcmVhdGVTZXNzaW9uKHsgc2lkOiBzaWQsIHVybDogdXJsLmhyZWYgfSk7XG5cdH1cblxuXHR0aGlzLnNlc3Npb24uc2lkID0gc2lkO1xuXHR0aGlzLnNlc3Npb24uZW50aXR5ID0gZW50aXR5O1xuXHRzdG9yYWdlLnNhdmVTdGF0ZSgnZW50aXR5JywgZW50aXR5LCAnc2Vzc2lvbicpO1xuXG59O1xuXG4vKipcbiAqIENyZWF0ZSBzZXNzaW9uXG4gKiBFbWl0cyBzZXNzaW9uL2NyZWF0ZSBldmVudFxuICogaWYgaW5pdGlhdGlvbiBpcyBzdWNjZXNzZnVsXG4gKlxuICogQHBhcmFtIFx0e1N0cmluZ30gXHR1cmwgXHRDdXJyZW50IGZ1bGwgVVJMXG4gKiBAcmV0dXJuIFx0e1N0cmluZ31cdHNpZCBcdE5ldyBzZXNzaW9uIGlkXG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5jcmVhdGVTZXNzaW9uID0gZnVuY3Rpb24ocGFyYW1zKXtcblx0dmFyIGRhdGEgPSB7XG5cdFx0bWV0aG9kOiAnY3JlYXRlU2Vzc2lvbicsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHR1cmw6IChwYXJhbXMudXJsIHx8IHVybC5ocmVmKVxuXHRcdH1cblx0fTtcblxuXHRpZihwYXJhbXMuc2lkKSBkYXRhLnBhcmFtcy5zaWQgPSBwYXJhbXMuc2lkO1xuXG5cdGlmKHRoaXMud2Vic29ja2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VuZERhdGEoZGF0YSk7XG5cdH1cblxuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwgZGF0YSwgZnVuY3Rpb24gKGVyciwgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCB7IG1ldGhvZDogJ2NyZWF0ZVNlc3Npb24nLCBwYXJhbXM6IHBhcmFtcyB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmVtaXQoJ3Nlc3Npb24vY3JlYXRlJywgYm9keS5yZXN1bHQpO1xuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLmpvaW5TZXNzaW9uID0gZnVuY3Rpb24odXJsKXtcblx0dGhpcy5vcGVuU2hhcmVJbnRldmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG5cdFx0dGhpcy5vcGVuU2hhcmUodXJsKTtcblx0fS5iaW5kKHRoaXMpLCAzMDAwKTtcblxuXHRnbG9iYWwub25jbG9zZSA9IGZ1bmN0aW9uKCkge1xuXHRcdHRoaXMuc2hhcmVDbG9zZWQoKTtcblx0fS5iaW5kKHRoaXMpO1xufTtcblxuLyoqIFxuICogU2VuZC9vYnRhaW4gZXZlbnRzIHRvL2Zyb20gdGhlIHNlcnZlci4gXG4gKiBFdmVudHMgY291bGQgYmUgb2J0YWluZWQgZnJvbSB0aGUgc2VydmVyIGJ5IHNwZWNpZnlpbmcgYSB0aW1lc3RhbXBcbiAqIGFzIGEgc3RhcnRpbmcgcG9pbnQgZnJvbSB3aGljaCBhbiBldmVudHMgd291bGQgYmUgb2J0YWluZWRcbioqL1xuV2NoYXRBUEkucHJvdG90eXBlLnVwZGF0ZUV2ZW50cyA9IGZ1bmN0aW9uKGV2ZW50cywgY2Ipe1xuXHQvLyB2YXIgc2Vzc2lvbklkID0gc3RvcmFnZS5nZXRTdGF0ZSgnc2lkJyksIGRhdGE7XG5cdC8vIGlmKCFzZXNzaW9uSWQpIHJldHVybiBjYigpO1xuXHRcblx0aWYoIXRoaXMuc2Vzc2lvbi5zaGFyZWRJZCkgcmV0dXJuO1xuXG5cdGRhdGEgPSB7XG5cdFx0bWV0aG9kOiAnZXZlbnRzJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5zZXNzaW9uLnNpZCxcblx0XHRcdGlkOiB0aGlzLnNlc3Npb24uc2hhcmVkSWQsXG5cdFx0XHR0aW1lc3RhbXA6IHN0b3JhZ2UuZ2V0U3RhdGUoJ2V2ZW50VGltZXN0YW1wJywgJ2NhY2hlJyksXG5cdFx0XHRldmVudHM6IGV2ZW50c1xuXHRcdH1cblx0fTtcblxuXHRpZih0aGlzLndlYnNvY2tldCkge1xuXHRcdHJldHVybiB0aGlzLnNlbmREYXRhKGRhdGEpO1xuXHR9XG5cblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIGRhdGEsIGZ1bmN0aW9uIChlcnIsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgZGF0YSk7XG5cdFx0XHRyZXR1cm4gY2IoZXJyKTsgLy8gVE9ETzogaGFuZGxlIGVycm9yXG5cdFx0fVxuXG5cdFx0aWYoYm9keS5yZXN1bHQudGltZXN0YW1wID4gc3RvcmFnZS5nZXRTdGF0ZSgnZXZlbnRUaW1lc3RhbXAnLCAnY2FjaGUnKSkge1xuXHRcdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ2V2ZW50VGltZXN0YW1wJywgYm9keS5yZXN1bHQudGltZXN0YW1wLCAnY2FjaGUnKTtcblx0XHRcdGlmKGNiKSBjYihudWxsLCBib2R5LnJlc3VsdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKGNiKSBjYihudWxsLCB7IGV2ZW50czogW10gfSk7XG5cdFx0fVxuXHRcdFx0XG5cblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogR2V0IGF2YWlsYWJsZSBkaWFsb2cgbGFuZ3VhZ2VzXG4gKiBJZiBsYW5ndWFnZXMgYXJlIG5vdCBhdmFpbGFibGUsIFxuICogdGhlbiBlaXRoZXIgdGhlcmUgYXJlIG5vIGF2YWlsYWJsZSBhZ2VudHMgb3JcbiAqIGxhbmd1YWdlcyB3ZXJlbid0IHNldCBpbiBBZG1pbiBTdHVkaW9cbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmdldExhbmd1YWdlcyA9IGZ1bmN0aW9uKGNiKXtcblx0ZGVidWcubG9nKCd0aGlzLnNlc3Npb246ICcsIHRoaXMuc2Vzc2lvbik7XG5cdGNiKG51bGwsIHRoaXMuc2Vzc2lvbi5sYW5ncyk7XHRcblxuXHQvLyB2YXIgc2Vzc2lvbklkID0gc3RvcmFnZS5nZXRTdGF0ZSgnc2lkJyk7XG5cdC8vIGlmKCFzZXNzaW9uSWQpIHJldHVybiBjYih0cnVlKTtcblxuXHQvLyByZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHQvLyBcdG1ldGhvZDogJ2dldExhbmd1YWdlcycsXG5cdC8vIFx0cGFyYW1zOiB7XG5cdC8vIFx0XHRzaWQ6IHNlc3Npb25JZFxuXHQvLyBcdH1cblx0Ly8gfSwgZnVuY3Rpb24gKGVyciwgYm9keSl7XG5cdC8vIFx0aWYoZXJyKSB7XG5cdC8vIFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCB7IG1ldGhvZDogJ2dldExhbmd1YWdlcycgfSk7XG5cdC8vIFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0Ly8gXHR9XG5cblx0Ly8gXHRjYihudWxsLCBib2R5KTtcblx0Ly8gfS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogUmVxdWVzdCBjaGF0IHNlc3Npb25cbiAqIFxuICogQHBhcmFtICB7T2JqZWN0fSBwYXJhbXMgLSB1c2VyIHBhcmFtZXRlcnMgKG5hbWUsIHBob25lLCBzdWJqZWN0LCBsYW5ndWFnZSwgZXRjLilcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmNoYXRSZXF1ZXN0ID0gZnVuY3Rpb24ocGFyYW1zLCBjYil7XG5cdHBhcmFtcy5zaWQgPSB0aGlzLnNlc3Npb24uc2lkO1xuXG5cdGRlYnVnLmxvZygnY2hhdFJlcXVlc3QgcGFyYW1zOiAnLCBwYXJhbXMpO1xuXG5cdHZhciBkYXRhID0ge1xuXHRcdG1ldGhvZDogJ2NoYXRSZXF1ZXN0Jyxcblx0XHRwYXJhbXM6IHBhcmFtc1xuXHR9O1xuXG5cdHRoaXMuc2V0U2Vzc2lvblRpbWVvdXQoKTtcblxuXHRpZih0aGlzLndlYnNvY2tldCkge1xuXHRcdHJldHVybiB0aGlzLnNlbmREYXRhKGRhdGEpO1xuXHR9XG5cblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIGRhdGEsIGZ1bmN0aW9uIChlcnIsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgeyBtZXRob2Q6ICdjaGF0UmVxdWVzdCcsIHBhcmFtczogcGFyYW1zIH0pO1xuXHRcdFx0aWYoY2IpIGNiKGVycik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0cGFyYW1zLnVybCA9IHVybC5ocmVmO1xuXHRcdHRoaXMuZW1pdCgnY2hhdC9zdGFydCcsIF8ubWVyZ2UocGFyYW1zLCBib2R5LnJlc3VsdCkpO1xuXHRcdGlmKGNiKSBjYihudWxsLCBib2R5KTtcblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogR2V0IGRpYWxvZyBtZXNzYWdlc1xuICogXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IHRpbWVzdGFtcCBHZXQgbWVzc2FnZXMgc2luY2UgcHJvdmlkZWQgdGltZXN0YW1wXG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5nZXRNZXNzYWdlcyA9IGZ1bmN0aW9uKGNiKXtcblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIHtcblx0XHRtZXRob2Q6ICdnZXRNZXNzYWdlcycsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHRoaXMuc2Vzc2lvbi5zaWQsXG5cdFx0XHR0aW1lc3RhbXA6IHN0b3JhZ2UuZ2V0U3RhdGUoJ21zZ1RpbWVzdGFtcCcpXG5cdFx0fVxuXHR9LCBmdW5jdGlvbiAoZXJyLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAnZ2V0TWVzc2FnZXMnIH0pO1xuXHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0fVxuXG5cdFx0Ly8gRG8gbm90IHNob3cgb2xkIG1lc3NhZ2VzXG5cdFx0aWYoYm9keS5yZXN1bHQudGltZXN0YW1wID4gc3RvcmFnZS5nZXRTdGF0ZSgnbXNnVGltZXN0YW1wJykpIHtcblx0XHRcdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdtc2dUaW1lc3RhbXAnLCBib2R5LnJlc3VsdC50aW1lc3RhbXApO1xuXHRcdFx0aWYoYm9keS5yZXN1bHQubWVzc2FnZXMpIHtcblx0XHRcdFx0dGhpcy5lbWl0KCdtZXNzYWdlL25ldycsIGJvZHkucmVzdWx0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZihib2R5LnJlc3VsdC50eXBpbmcpIHtcblx0XHRcdHRoaXMuZW1pdCgnbWVzc2FnZS90eXBpbmcnLCBib2R5LnJlc3VsdCk7XG5cdFx0fVxuXHRcdGlmKGNiKSBjYihudWxsLCBib2R5LnJlc3VsdCk7XG5cblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogQ2xvc2UgY3VycmVudCBjaGF0IHNlc3Npb25cbiAqIFxuICogQHBhcmFtICB7TnVtYmVyfSByYXRpbmcgU2VydmljZSByYXRpbmdcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmNsb3NlQ2hhdCA9IGZ1bmN0aW9uKHJhdGluZyl7XG5cdHZhciBkYXRhID0ge1xuXHRcdG1ldGhvZDogJ2Nsb3NlQ2hhdCcsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHRoaXMuc2Vzc2lvbi5zaWRcblx0XHR9XG5cdH07XG5cdGlmKHJhdGluZykgZGF0YS5wYXJhbXMucmF0aW5nID0gcmF0aW5nO1xuXG5cdGlmKHRoaXMud2Vic29ja2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VuZERhdGEoZGF0YSk7XG5cdH1cblxuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwgZGF0YSwgZnVuY3Rpb24gKGVyciwgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCBkYXRhKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ2NoYXQnLCBmYWxzZSk7XG5cdFx0dGhpcy5lbWl0KCdjaGF0L2Nsb3NlJywgeyByYXRpbmc6IHJhdGluZywgdXJsOiB1cmwuaHJlZiB9KTtcblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogU2VuZCBtZXNzYWdlIHRvIHRoZSBhZ2VudFxuICogXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHRleHQgLSBtZXNzYWdlIGNvbnRlbnQgaW4gY2FzZSBvZiByZWd1bGFyIG1lc3NhZ2UgXG4gKiBvciBkYXRhVVJMIGluIGNhc2Ugb2YgZmlsZSB0cmFuc2ZlclxuICogQHBhcmFtICB7U3RyaW5nfSBmaWxlIC0gKE9wdGlvbmFsKSBmaWxlIG5hbWVcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24ocGFyYW1zLCBjYil7XG5cdHZhciBkYXRhID0ge1xuXHRcdG1ldGhvZDogJ21lc3NhZ2UnLFxuXHRcdHBhcmFtczoge1xuXHRcdFx0c2lkOiB0aGlzLnNlc3Npb24uc2lkLFxuXHRcdFx0Y29udGVudDogcGFyYW1zLm1lc3NhZ2Vcblx0XHR9XG5cdH07XG5cblx0Ly8gcmVzZXQgc2Vzc2lvbiB0aW1lb3V0XG5cdHRoaXMuc2V0U2Vzc2lvblRpbWVvdXQoKTtcblxuXHRpZih0aGlzLndlYnNvY2tldCkge1xuXHRcdGlmKHBhcmFtcy5maWxlKSB7XG5cdFx0Ly8gXHQvLyB2YXIgY29udGVudCA9IHB1YmxpY1VybCtEYXRlLm5vdygpK1wiX1wiK3RoaXMub3B0aW9ucy5wYWdlaWQrXCJfXCIrcGFyYW1zLm1lc3NhZ2U7XG5cdFx0XHRkYXRhLnBhcmFtcy5jb250ZW50ID0gcGFyYW1zLmZpbGU7XG5cdFx0XHRkYXRhLnBhcmFtcy5maWxlID0gcGFyYW1zLm1lc3NhZ2U7XG5cblx0XHQvLyBcdHJlcXVlc3QucHV0KGNvbnRlbnQsIHBhcmFtcy5maWxlLCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuXHRcdC8vIFx0XHRpZihlcnIpIHJldHVybiBjb25zb2xlLmVycm9yKCdzZW5kTWVzc2FnZSBlcnJvcjogJywgZXJyKTtcblx0XHQvLyBcdFx0dGhpcy5zZW5kRGF0YShkYXRhKTtcblx0XHQvLyBcdH0pO1xuXG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnNlbmREYXRhKGRhdGEpO1xuXHR9XG5cblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIGRhdGEsIGZ1bmN0aW9uKGVyciwgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCB7IG1ldGhvZDogJ3NlbmRNZXNzYWdlJywgcGFyYW1zOiBkYXRhIH0pO1xuXHRcdFx0aWYoY2IpIGNiKGVycik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmKGNiKSBjYigpO1xuXHR9KTtcbn07XG5cbi8qKlxuICogU2VuZCBkaWFsb2cgZWl0aGVyIHRvIHRoZSBzcGVjaWZpZWQgZW1haWwgYWRkcmVzcyAoaWYgcGFyYW1ldGVyIFwidG9cIiBoYXMgcGFzc2VkKVxuICogb3IgdG8gY2FsbCBjZW50ZXIgYWRtaW5pc3RyYXRvciAoaWYgcGFyYW1ldGVyIFwiZW1haWxcIiBoYXMgcGFzc2VkKVxuICpcbiAqIEVpdGhlclxuICogQHBhcmFtICB7U3RyaW5nfSB0b1x0XHRcdERlc3RpbmF0aW9uIGVtYWlsIGFkZHJlc3NcbiAqXG4gKiBPclxuICogQHBhcmFtICB7U3RyaW5nfSBlbWFpbFx0XHRTZW5kZXIgZW1haWwgYWRkcmVzc1xuICogQHBhcmFtICB7U3RyaW5nfSB1bmFtZVx0XHRTZW5kZXIgbmFtZVxuICogQHBhcmFtICB7U3RyaW5nfSBmaWxlbmFtZVx0QXR0YWNobWVudCBmaWxlbmFtZVxuICogQHBhcmFtICB7U3RyaW5nfSBmaWxlZGF0YVx0QXR0YWNobWVudCBmaWxlIFVSTFxuICpcbiAqIEJvdGhcbiAqIEBwYXJhbSAge1N0cmluZ30gdGV4dFx0XHRFbWFpbCBib2R5XG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5zZW5kRW1haWwgPSBmdW5jdGlvbihwYXJhbXMsIGNiKXtcblx0cGFyYW1zLnNpZCA9IHRoaXMuc2Vzc2lvbi5zaWQ7XG5cblx0dmFyIGRhdGEgPSB7XG5cdFx0bWV0aG9kOiAnc2VuZE1haWwnLFxuXHRcdHBhcmFtczogcGFyYW1zXG5cdH07XG5cblx0aWYodGhpcy53ZWJzb2NrZXQpIHtcblx0XHRyZXR1cm4gdGhpcy5zZW5kRGF0YShkYXRhKTtcblx0fVxuXG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCBkYXRhLCBmdW5jdGlvbiAoZXJyLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAnc2VuZEVtYWlsJywgcGFyYW1zOiBwYXJhbXMgfSk7XG5cdFx0XHRpZihjYikgY2IoZXJyKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmVtaXQoJ2NoYXQvc2VuZCcsIHBhcmFtcyk7XG5cdFx0aWYoY2IpIGNiKG51bGwsIGJvZHkpO1xuXHR9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBTZW5kIGNhbGxiYWNrIHJlcXVlc3RcbiAqIFxuICogQHBhcmFtICB7U3RyaW5nfSB0YXNrIC0gaWQgb2YgdGhlIGNhbGxiYWNrIHRhc2sgdGhhdCBjb25maWd1cmVkIGluIHRoZSBBZG1pbiBTdHVkaW9cbiAqIEBwYXJhbSAge1N0cmluZ30gcGhvbmUgLSBVc2VyJ3MgcGhvbmUgbnVtYmVyXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IHRpbWUgLSBUaW1lc3RhbXAgb2YgdGhlIGNhbGwgdG8gYmUgaW5pdGlhdGVkXG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5yZXF1ZXN0Q2FsbGJhY2sgPSBmdW5jdGlvbihwYXJhbXMsIGNiKXtcblx0cGFyYW1zLnNpZCA9IHRoaXMuc2Vzc2lvbi5zaWQ7XG5cblx0dmFyIGRhdGEgPSB7XG5cdFx0bWV0aG9kOiAncmVxdWVzdENhbGxiYWNrJyxcblx0XHRwYXJhbXM6IHBhcmFtc1xuXHR9O1xuXG5cdGlmKHRoaXMud2Vic29ja2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VuZERhdGEoZGF0YSk7XG5cdH1cblxuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwgZGF0YSwgZnVuY3Rpb24oZXJyLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAncmVxdWVzdENhbGxiYWNrJywgcGFyYW1zOiBwYXJhbXMgfSk7XG5cdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHR9XG5cdFx0aWYoY2IpIGNiKG51bGwsIGJvZHkucmVzdWx0KTtcblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogRGlzam9pbiBjdXJyZW50IGFjdGl2ZSBzZXNzaW9uXG4gKiBFbWl0cyBzZXNzaW9uL2Rpc2pvaW4gZXZlbnRcbiAqIGlmIHJlcXVlc3QgaXMgZnVsZmlsbGVkXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNpZCBJRCBvZiBhY3RpdmUgc2Vzc2lvblxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuZGlzam9pblNlc3Npb24gPSBmdW5jdGlvbihzaWQpe1xuXG5cdHZhciBkYXRhID0ge1xuXHRcdG1ldGhvZDogJ2Rpc2pvaW5TZXNzaW9uJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogc2lkXG5cdFx0fVxuXHR9O1xuXG5cdGlmKHRoaXMud2Vic29ja2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VuZERhdGEoZGF0YSk7XG5cdH1cblxuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwgZGF0YSwgZnVuY3Rpb24gKGVyciwgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCB7IG1ldGhvZDogJ2Rpc2pvaW5TZXNzaW9uJywgcGFyYW1zOiB7IHNpZDogc2lkIH0gfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhpcy5lbWl0KCdzZXNzaW9uL2Rpc2pvaW4nLCB7IHVybDogdXJsLmhyZWYgfSk7XG5cdH0uYmluZCh0aGlzKSk7XG59O1xuXG5XY2hhdEFQSS5wcm90b3R5cGUuc2hhcmVPcGVuZWQgPSBmdW5jdGlvbigpe1xuXHR2YXIgZGF0YSA9IHtcblx0XHRtZXRob2Q6ICdzaGFyZU9wZW5lZCcsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRpZDogdGhpcy5zZXNzaW9uLnNoYXJlZElkLFxuXHRcdFx0dXJsOiB1cmwuaHJlZlxuXHRcdH1cblx0fTtcblxuXHRpZih0aGlzLndlYnNvY2tldCkge1xuXHRcdHJldHVybiB0aGlzLnNlbmREYXRhKGRhdGEpO1xuXHR9XG59O1xuXG5XY2hhdEFQSS5wcm90b3R5cGUuc2hhcmVDbG9zZWQgPSBmdW5jdGlvbigpe1xuXHR2YXIgZGF0YSA9IHtcblx0XHRtZXRob2Q6ICdzaGFyZUNsb3NlZCcsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRpZDogdGhpcy5zZXNzaW9uLnNoYXJlZElkLFxuXHRcdFx0dXJsOiB1cmwuaHJlZlxuXHRcdH1cblx0fTtcblxuXHRpZih0aGlzLndlYnNvY2tldCkge1xuXHRcdHJldHVybiB0aGlzLnNlbmREYXRhKGRhdGEpO1xuXHR9XG59O1xuXG4vKipcbiAqIEluZm9ybXMgdGhlIHNlcnZlciB0aGF0IHRoZSBjb2Jyb3dzaW5nIGZlYXR1cmUgaXMgdHVybmVkIG9uIG9yIG9mZlxuICogQHBhcmFtICB7Qm9vbGVhbn0gc3RhdGUgUmVwcmVzZW50cyB0aGUgc3RhdGUgb2YgY29icm93c2luZyBmZWF0dXJlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHVybCAgIFVybCB3aGVyZSB0aGUgZmVhdHVyZSdzIHN0YXRlIGlzIGNoYW5nZWRcbiAqIEByZXR1cm4gbm9uZVxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUub3BlblNoYXJlID0gZnVuY3Rpb24odXJsKXtcblx0dmFyIGRhdGEgPSB7XG5cdFx0bWV0aG9kOiAnb3BlblNoYXJlJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5zZXNzaW9uLnNpZCxcblx0XHRcdHVybDogdXJsXG5cdFx0fVxuXHR9O1xuXG5cdGlmKHRoaXMud2Vic29ja2V0KSB7XG5cdFx0cmV0dXJuIHRoaXMuc2VuZERhdGEoZGF0YSk7XG5cdH1cblxuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwgZGF0YSwgZnVuY3Rpb24oZXJyLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAnb3BlblNoYXJlJywgcGFyYW1zOiB7IHN0YXRlOiBzdGF0ZSB9IH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbldjaGF0QVBJLnByb3RvdHlwZS5zZXRDaGF0VGltZW91dCA9IGZ1bmN0aW9uKHRpbWVvdXQpe1xuXHRyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbiAoKXtcblx0XHR0aGlzLmVtaXQoJ2NoYXQvdGltZW91dCcpO1xuXHR9LmJpbmQodGhpcyksIHRpbWVvdXQqMTAwMCk7XG59O1xuXG5XY2hhdEFQSS5wcm90b3R5cGUudXNlcklzVHlwaW5nID0gZnVuY3Rpb24oKXtcblx0dmFyIGRhdGEgPSB7XG5cdFx0bWV0aG9kOiAndHlwaW5nJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5zZXNzaW9uLnNpZFxuXHRcdH1cblx0fTtcblxuXHRpZih0aGlzLndlYnNvY2tldCkge1xuXHRcdHJldHVybiB0aGlzLnNlbmREYXRhKGRhdGEpO1xuXHR9XG5cblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIGRhdGEsIGZ1bmN0aW9uIChlcnIpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgeyBtZXRob2Q6ICdzZXRDaGF0VGltZW91dCcgfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLnVwZGF0ZVVybCA9IGZ1bmN0aW9uKHVybCl7XG5cdHZhciBkYXRhID0ge1xuXHRcdG1ldGhvZDogJ3VwZGF0ZVVybCcsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHRoaXMuc2Vzc2lvbi5zaWQsXG5cdFx0XHR1cmw6IHVybFxuXHRcdH1cblx0fTtcblxuXHRpZih0aGlzLndlYnNvY2tldCkge1xuXHRcdHJldHVybiB0aGlzLnNlbmREYXRhKGRhdGEpO1xuXHR9XG5cblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIGRhdGEsIGZ1bmN0aW9uKGVyciwgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCB7IG1ldGhvZDogJ3VwZGF0ZVVybCcsIHBhcmFtczogeyB1cmw6IHVybCB9IH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbldjaGF0QVBJLnByb3RvdHlwZS5saW5rRm9sbG93ZWQgPSBmdW5jdGlvbih1cmwpe1xuXHR2YXIgZGF0YSA9IHtcblx0XHRtZXRob2Q6ICdsaW5rRm9sbG93ZWQnLFxuXHRcdHBhcmFtczoge1xuXHRcdFx0c2lkOiB0aGlzLnNlc3Npb24uc2lkLFxuXHRcdFx0dXJsOiB1cmxcblx0XHR9XG5cdH07XG5cblx0aWYodGhpcy53ZWJzb2NrZXQpIHtcblx0XHRyZXR1cm4gdGhpcy5zZW5kRGF0YShkYXRhKTtcblx0fVxuXG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCBkYXRhLCBmdW5jdGlvbiAoZXJyLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAnbGlua0ZvbGxvd2VkJywgcGFyYW1zOiB7IHVybDogdXJsIH0gfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLmRldGVjdExhbmd1YWdlID0gZnVuY3Rpb24oZnJhc2VzKXtcblx0dmFyIHN0b3JhZ2VMYW5nID0gc3RvcmFnZS5nZXRTdGF0ZSgnbGFuZycsICdzZXNzaW9uJyksXG5cdFx0YXZhaWxhYmxlTGFuZ3MgPSBbXSwgbGFuZywgcGF0aDtcblxuXHQvLyBsaXN0IGF2YWlsYWJsZSBsYW5ndWFnZXMgYnkgdHJhbnNsYXRpb25zIGtleXNcblx0Zm9yKHZhciBrZXkgaW4gZnJhc2VzKSB7XG5cdFx0YXZhaWxhYmxlTGFuZ3MucHVzaChrZXkpO1xuXHR9XG5cblx0aWYoc3RvcmFnZUxhbmcpIHtcblx0XHRsYW5nID0gc3RvcmFnZUxhbmc7XG5cdH0gZWxzZSBpZih0aGlzLm9wdGlvbnMubGFuZykge1xuXHRcdGxhbmcgPSB0aGlzLm9wdGlvbnMubGFuZztcblx0fSBlbHNlIGlmKHRoaXMub3B0aW9ucy5sYW5nRnJvbVVybCkge1xuXG5cdFx0dXJsLnBhdGhuYW1lXG5cdFx0LnNwbGl0KCcvJylcblx0XHQubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdGl0ZW0gPSBoYW5kbGVBbGlhc2VzKGl0ZW0pO1xuXHRcdFx0aWYoYXZhaWxhYmxlTGFuZ3MuaW5kZXhPZihpdGVtKSAhPT0gLTEpIHtcblx0XHRcdFx0bGFuZyA9IGl0ZW07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBpdGVtO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYoIWxhbmcpIGxhbmcgPSAobmF2aWdhdG9yLmxhbmd1YWdlIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UpLnNwbGl0KCctJylbMF07XG5cdGlmKGF2YWlsYWJsZUxhbmdzLmluZGV4T2YobGFuZykgPT09IC0xKSBsYW5nID0gJ2VuJztcblxuXHRkZWJ1Zy5sb2coJ2RldGVjdGVkIGxhbmc6ICcsIGF2YWlsYWJsZUxhbmdzLCBzdG9yYWdlTGFuZywgdGhpcy5vcHRpb25zLmxhbmcsIHRoaXMub3B0aW9ucy5sYW5nRnJvbVVybCwgbGFuZyk7XG5cdHRoaXMuc2Vzc2lvbi5sYW5nID0gbGFuZztcblx0cmV0dXJuIGxhbmc7XG59O1xuXG5XY2hhdEFQSS5wcm90b3R5cGUuZ2V0U2lkRnJvbVVybCA9IGZ1bmN0aW9uKHVybCkge1xuXHR2YXIgc3Vic3RyID0gdXJsLnN1YnN0cmluZyh1cmwuaW5kZXhPZignY2hhdFNlc3Npb25JZD0nKSk7XG5cdHN1YnN0ciA9IHN1YnN0ci5zdWJzdHJpbmcoc3Vic3RyLmluZGV4T2YoJz0nKSsxKTtcblx0cmV0dXJuIHN1YnN0cjtcbn07XG5cbldjaGF0QVBJLnByb3RvdHlwZS5jcmVhdGVXZWJzb2NrZXQgPSBmdW5jdGlvbihob3N0KXtcbiAgICAvLyB2YXIgcHJvdG9jb2wgPSAoZ2xvYmFsLmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JykgPyAnd3NzOicgOiAnd3M6JztcbiAgICB2YXIgcHJvdG9jb2wgPSAnd3NzOic7XG4gICAgdmFyIHdlYnNvY2tldCA9IG5ldyBXZWJTb2NrZXQocHJvdG9jb2wgKyAnLy8nK3dlYnNvY2tldFVybCwnanNvbi5hcGkuc21pbGUtc29mdC5jb20nKTsgLy9Jbml0IFdlYnNvY2tldCBoYW5kc2hha2VcblxuICAgIHdlYnNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbihlKXtcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBvcGVuZWQ6ICcsIGUpO1xuICAgICAgICB3ZWJzb2NrZXRUcnkgPSAxO1xuICAgICAgICBpZighbW9kdWxlSW5pdCkge1xuICAgICAgICBcdHRoaXMuaW5pdCgpO1xuICAgICAgICB9XG4gICAgfS5iaW5kKHRoaXMpO1xuICAgIHdlYnNvY2tldC5vbm1lc3NhZ2UgPSB0aGlzLm9uV2Vic29ja2V0TWVzc2FnZS5iaW5kKHRoaXMpO1xuICAgIHdlYnNvY2tldC5vbmNsb3NlID0gdGhpcy5vbldlYnNvY2tldENsb3NlLmJpbmQodGhpcyk7XG4gICAgd2Vic29ja2V0Lm9uZXJyb3IgPSB0aGlzLm9uRXJyb3I7XG5cbiAgICBnbG9iYWwub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgd2Vic29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7fTsgLy8gZGlzYWJsZSBvbmNsb3NlIGhhbmRsZXIgZmlyc3RcbiAgICAgICAgd2Vic29ja2V0LmNsb3NlKClcbiAgICB9O1xuXG4gICAgdGhpcy53ZWJzb2NrZXQgPSB3ZWJzb2NrZXQ7XG5cbn1cblxuV2NoYXRBUEkucHJvdG90eXBlLm9uV2Vic29ja2V0Q2xvc2UgPSBmdW5jdGlvbihlKSB7XG4gICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjbG9zZWQnLCBlKTtcbiAgICB2YXIgdGltZSA9IGdlbmVyYXRlSW50ZXJ2YWwod2Vic29ja2V0VHJ5KTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHdlYnNvY2tldFRyeSsrO1xuICAgICAgICB0aGlzLmNyZWF0ZVdlYnNvY2tldCgpO1xuICAgIH0uYmluZCh0aGlzKSwgdGltZSk7XG59XG5cbi8vUmVjb25uZWN0aW9uIEV4cG9uZW50aWFsIEJhY2tvZmYgQWxnb3JpdGhtIHRha2VuIGZyb20gaHR0cDovL2Jsb2cuam9obnJ5ZGluZy5jb20vcG9zdC83ODU0NDk2OTM0OS9ob3ctdG8tcmVjb25uZWN0LXdlYi1zb2NrZXRzLWluLWEtcmVhbHRpbWUtd2ViLWFwcFxuZnVuY3Rpb24gZ2VuZXJhdGVJbnRlcnZhbCAoaykge1xuICAgIHZhciBtYXhJbnRlcnZhbCA9IChNYXRoLnBvdygyLCBrKSAtIDEpICogMTAwMDtcbiAgXG4gICAgaWYgKG1heEludGVydmFsID4gMzAqMTAwMCkge1xuICAgICAgICBtYXhJbnRlcnZhbCA9IDMwKjEwMDA7IC8vIElmIHRoZSBnZW5lcmF0ZWQgaW50ZXJ2YWwgaXMgbW9yZSB0aGFuIDMwIHNlY29uZHMsIHRydW5jYXRlIGl0IGRvd24gdG8gMzAgc2Vjb25kcy5cbiAgICB9XG4gIFxuICAgIC8vIGdlbmVyYXRlIHRoZSBpbnRlcnZhbCB0byBhIHJhbmRvbSBudW1iZXIgYmV0d2VlbiAwIGFuZCB0aGUgbWF4SW50ZXJ2YWwgZGV0ZXJtaW5lZCBmcm9tIGFib3ZlXG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiBtYXhJbnRlcnZhbDtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWxpYXNlcyhhbGlhcykge1xuXHR2YXIgbGFuZyA9IGFsaWFzO1xuXHRpZihhbGlhcyA9PT0gJ3VhJykgbGFuZyA9ICd1ayc7XG5cdGVsc2UgaWYoYWxpYXMgPT09ICd1cycgfHwgYWxpYXMgPT09ICdnYicpIGxhbmcgPSAnZW4nO1xuXHRyZXR1cm4gbGFuZztcbn0iLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBsb2c6IGZ1bmN0aW9uKCl7IGxvZyhhcmd1bWVudHMsICdsb2cnKTsgfSxcbiAgICBpbmZvOiBmdW5jdGlvbigpeyBsb2coYXJndW1lbnRzLCAnaW5mbycpOyB9LFxuICAgIHdhcm46IGZ1bmN0aW9uKCl7IGxvZyhhcmd1bWVudHMsICd3YXJuJyk7IH0sXG4gICAgZXJyb3I6IGZ1bmN0aW9uKCl7IGxvZyhhcmd1bWVudHMsICdlcnJvcicpOyB9XG59O1xuXG5mdW5jdGlvbiBsb2coYXJncywgbWV0aG9kKXtcbiAgICBpZihnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3N3Yy5kZWJ1ZycpKSB7XG4gICAgICAgIFtdLmZvckVhY2guY2FsbChhcmdzLCBmdW5jdGlvbihhcmcpe1xuICAgICAgICAgICAgZ2xvYmFsLmNvbnNvbGVbbWV0aG9kXSA/IGdsb2JhbC5jb25zb2xlW21ldGhvZF0oYXJnKSA6IGdsb2JhbC5jb25zb2xlLmxvZyhhcmcpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn0iLCIvKlxuICogSnNTSVAgdjIuMC4xXG4gKiB0aGUgSmF2YXNjcmlwdCBTSVAgbGlicmFyeVxuICogQ29weXJpZ2h0OiAyMDEyLTIwMTYgSm9zw6kgTHVpcyBNaWxsw6FuIDxqbWlsbGFuQGFsaWF4Lm5ldD4gKGh0dHBzOi8vZ2l0aHViLmNvbS9qbWlsbGFuKVxuICogSG9tZXBhZ2U6IGh0dHA6Ly9qc3NpcC5uZXRcbiAqIExpY2Vuc2U6IE1JVFxuICovXG5cbiFmdW5jdGlvbihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz1lKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGUpO2Vsc2V7dmFyIHQ7dD1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOnRoaXMsdC5Kc1NJUD1lKCl9fShmdW5jdGlvbigpe3ZhciBlO3JldHVybiBmdW5jdGlvbiB0KGUsbixyKXtmdW5jdGlvbiBzKGksbyl7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFvJiZ1KXJldHVybiB1KGksITApO2lmKGwpcmV0dXJuIGwoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgYz1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwoYy5leHBvcnRzLGZ1bmN0aW9uKHQpe3ZhciBuPWVbaV1bMV1bdF07cmV0dXJuIHMobj9uOnQpfSxjLGMuZXhwb3J0cyx0LGUsbixyKX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgbD1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHIubGVuZ3RoO2krKylzKHJbaV0pO3JldHVybiBzfSh7MTpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUoXCIuLi9wYWNrYWdlLmpzb25cIikscz17VVNFUl9BR0VOVDpyLnRpdGxlK1wiIFwiK3IudmVyc2lvbixTSVA6XCJzaXBcIixTSVBTOlwic2lwc1wiLGNhdXNlczp7Q09OTkVDVElPTl9FUlJPUjpcIkNvbm5lY3Rpb24gRXJyb3JcIixSRVFVRVNUX1RJTUVPVVQ6XCJSZXF1ZXN0IFRpbWVvdXRcIixTSVBfRkFJTFVSRV9DT0RFOlwiU0lQIEZhaWx1cmUgQ29kZVwiLElOVEVSTkFMX0VSUk9SOlwiSW50ZXJuYWwgRXJyb3JcIixCVVNZOlwiQnVzeVwiLFJFSkVDVEVEOlwiUmVqZWN0ZWRcIixSRURJUkVDVEVEOlwiUmVkaXJlY3RlZFwiLFVOQVZBSUxBQkxFOlwiVW5hdmFpbGFibGVcIixOT1RfRk9VTkQ6XCJOb3QgRm91bmRcIixBRERSRVNTX0lOQ09NUExFVEU6XCJBZGRyZXNzIEluY29tcGxldGVcIixJTkNPTVBBVElCTEVfU0RQOlwiSW5jb21wYXRpYmxlIFNEUFwiLE1JU1NJTkdfU0RQOlwiTWlzc2luZyBTRFBcIixBVVRIRU5USUNBVElPTl9FUlJPUjpcIkF1dGhlbnRpY2F0aW9uIEVycm9yXCIsQllFOlwiVGVybWluYXRlZFwiLFdFQlJUQ19FUlJPUjpcIldlYlJUQyBFcnJvclwiLENBTkNFTEVEOlwiQ2FuY2VsZWRcIixOT19BTlNXRVI6XCJObyBBbnN3ZXJcIixFWFBJUkVTOlwiRXhwaXJlc1wiLE5PX0FDSzpcIk5vIEFDS1wiLERJQUxPR19FUlJPUjpcIkRpYWxvZyBFcnJvclwiLFVTRVJfREVOSUVEX01FRElBX0FDQ0VTUzpcIlVzZXIgRGVuaWVkIE1lZGlhIEFjY2Vzc1wiLEJBRF9NRURJQV9ERVNDUklQVElPTjpcIkJhZCBNZWRpYSBEZXNjcmlwdGlvblwiLFJUUF9USU1FT1VUOlwiUlRQIFRpbWVvdXRcIn0sU0lQX0VSUk9SX0NBVVNFUzp7UkVESVJFQ1RFRDpbMzAwLDMwMSwzMDIsMzA1LDM4MF0sQlVTWTpbNDg2LDYwMF0sUkVKRUNURUQ6WzQwMyw2MDNdLE5PVF9GT1VORDpbNDA0LDYwNF0sVU5BVkFJTEFCTEU6WzQ4MCw0MTAsNDA4LDQzMF0sQUREUkVTU19JTkNPTVBMRVRFOls0ODQsNDI0XSxJTkNPTVBBVElCTEVfU0RQOls0ODgsNjA2XSxBVVRIRU5USUNBVElPTl9FUlJPUjpbNDAxLDQwN119LEFDSzpcIkFDS1wiLEJZRTpcIkJZRVwiLENBTkNFTDpcIkNBTkNFTFwiLElORk86XCJJTkZPXCIsSU5WSVRFOlwiSU5WSVRFXCIsTUVTU0FHRTpcIk1FU1NBR0VcIixOT1RJRlk6XCJOT1RJRllcIixPUFRJT05TOlwiT1BUSU9OU1wiLFJFR0lTVEVSOlwiUkVHSVNURVJcIixSRUZFUjpcIlJFRkVSXCIsVVBEQVRFOlwiVVBEQVRFXCIsU1VCU0NSSUJFOlwiU1VCU0NSSUJFXCIsUkVBU09OX1BIUkFTRTp7MTAwOlwiVHJ5aW5nXCIsMTgwOlwiUmluZ2luZ1wiLDE4MTpcIkNhbGwgSXMgQmVpbmcgRm9yd2FyZGVkXCIsMTgyOlwiUXVldWVkXCIsMTgzOlwiU2Vzc2lvbiBQcm9ncmVzc1wiLDE5OTpcIkVhcmx5IERpYWxvZyBUZXJtaW5hdGVkXCIsMjAwOlwiT0tcIiwyMDI6XCJBY2NlcHRlZFwiLDIwNDpcIk5vIE5vdGlmaWNhdGlvblwiLDMwMDpcIk11bHRpcGxlIENob2ljZXNcIiwzMDE6XCJNb3ZlZCBQZXJtYW5lbnRseVwiLDMwMjpcIk1vdmVkIFRlbXBvcmFyaWx5XCIsMzA1OlwiVXNlIFByb3h5XCIsMzgwOlwiQWx0ZXJuYXRpdmUgU2VydmljZVwiLDQwMDpcIkJhZCBSZXF1ZXN0XCIsNDAxOlwiVW5hdXRob3JpemVkXCIsNDAyOlwiUGF5bWVudCBSZXF1aXJlZFwiLDQwMzpcIkZvcmJpZGRlblwiLDQwNDpcIk5vdCBGb3VuZFwiLDQwNTpcIk1ldGhvZCBOb3QgQWxsb3dlZFwiLDQwNjpcIk5vdCBBY2NlcHRhYmxlXCIsNDA3OlwiUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWRcIiw0MDg6XCJSZXF1ZXN0IFRpbWVvdXRcIiw0MTA6XCJHb25lXCIsNDEyOlwiQ29uZGl0aW9uYWwgUmVxdWVzdCBGYWlsZWRcIiw0MTM6XCJSZXF1ZXN0IEVudGl0eSBUb28gTGFyZ2VcIiw0MTQ6XCJSZXF1ZXN0LVVSSSBUb28gTG9uZ1wiLDQxNTpcIlVuc3VwcG9ydGVkIE1lZGlhIFR5cGVcIiw0MTY6XCJVbnN1cHBvcnRlZCBVUkkgU2NoZW1lXCIsNDE3OlwiVW5rbm93biBSZXNvdXJjZS1Qcmlvcml0eVwiLDQyMDpcIkJhZCBFeHRlbnNpb25cIiw0MjE6XCJFeHRlbnNpb24gUmVxdWlyZWRcIiw0MjI6XCJTZXNzaW9uIEludGVydmFsIFRvbyBTbWFsbFwiLDQyMzpcIkludGVydmFsIFRvbyBCcmllZlwiLDQyNDpcIkJhZCBMb2NhdGlvbiBJbmZvcm1hdGlvblwiLDQyODpcIlVzZSBJZGVudGl0eSBIZWFkZXJcIiw0Mjk6XCJQcm92aWRlIFJlZmVycmVyIElkZW50aXR5XCIsNDMwOlwiRmxvdyBGYWlsZWRcIiw0MzM6XCJBbm9ueW1pdHkgRGlzYWxsb3dlZFwiLDQzNjpcIkJhZCBJZGVudGl0eS1JbmZvXCIsNDM3OlwiVW5zdXBwb3J0ZWQgQ2VydGlmaWNhdGVcIiw0Mzg6XCJJbnZhbGlkIElkZW50aXR5IEhlYWRlclwiLDQzOTpcIkZpcnN0IEhvcCBMYWNrcyBPdXRib3VuZCBTdXBwb3J0XCIsNDQwOlwiTWF4LUJyZWFkdGggRXhjZWVkZWRcIiw0Njk6XCJCYWQgSW5mbyBQYWNrYWdlXCIsNDcwOlwiQ29uc2VudCBOZWVkZWRcIiw0Nzg6XCJVbnJlc29sdmFibGUgRGVzdGluYXRpb25cIiw0ODA6XCJUZW1wb3JhcmlseSBVbmF2YWlsYWJsZVwiLDQ4MTpcIkNhbGwvVHJhbnNhY3Rpb24gRG9lcyBOb3QgRXhpc3RcIiw0ODI6XCJMb29wIERldGVjdGVkXCIsNDgzOlwiVG9vIE1hbnkgSG9wc1wiLDQ4NDpcIkFkZHJlc3MgSW5jb21wbGV0ZVwiLDQ4NTpcIkFtYmlndW91c1wiLDQ4NjpcIkJ1c3kgSGVyZVwiLDQ4NzpcIlJlcXVlc3QgVGVybWluYXRlZFwiLDQ4ODpcIk5vdCBBY2NlcHRhYmxlIEhlcmVcIiw0ODk6XCJCYWQgRXZlbnRcIiw0OTE6XCJSZXF1ZXN0IFBlbmRpbmdcIiw0OTM6XCJVbmRlY2lwaGVyYWJsZVwiLDQ5NDpcIlNlY3VyaXR5IEFncmVlbWVudCBSZXF1aXJlZFwiLDUwMDpcIkpzU0lQIEludGVybmFsIEVycm9yXCIsNTAxOlwiTm90IEltcGxlbWVudGVkXCIsNTAyOlwiQmFkIEdhdGV3YXlcIiw1MDM6XCJTZXJ2aWNlIFVuYXZhaWxhYmxlXCIsNTA0OlwiU2VydmVyIFRpbWUtb3V0XCIsNTA1OlwiVmVyc2lvbiBOb3QgU3VwcG9ydGVkXCIsNTEzOlwiTWVzc2FnZSBUb28gTGFyZ2VcIiw1ODA6XCJQcmVjb25kaXRpb24gRmFpbHVyZVwiLDYwMDpcIkJ1c3kgRXZlcnl3aGVyZVwiLDYwMzpcIkRlY2xpbmVcIiw2MDQ6XCJEb2VzIE5vdCBFeGlzdCBBbnl3aGVyZVwiLDYwNjpcIk5vdCBBY2NlcHRhYmxlXCJ9LEFMTE9XRURfTUVUSE9EUzpcIklOVklURSxBQ0ssQ0FOQ0VMLEJZRSxVUERBVEUsTUVTU0FHRSxPUFRJT05TLFJFRkVSLElORk9cIixBQ0NFUFRFRF9CT0RZX1RZUEVTOlwiYXBwbGljYXRpb24vc2RwLCBhcHBsaWNhdGlvbi9kdG1mLXJlbGF5XCIsTUFYX0ZPUldBUkRTOjY5LFNFU1NJT05fRVhQSVJFUzo5MCxNSU5fU0VTU0lPTl9FWFBJUkVTOjYwfTt0LmV4cG9ydHM9c30se1wiLi4vcGFja2FnZS5qc29uXCI6NDd9XSwyOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbixyKXt2YXIgbztyZXR1cm4gdGhpcy51YWNfcGVuZGluZ19yZXBseT0hMSx0aGlzLnVhc19wZW5kaW5nX3JlcGx5PSExLHQuaGFzSGVhZGVyKFwiY29udGFjdFwiKT8ocj10IGluc3RhbmNlb2YgaS5JbmNvbWluZ1Jlc3BvbnNlP3Quc3RhdHVzX2NvZGU8MjAwP3MuU1RBVFVTX0VBUkxZOnMuU1RBVFVTX0NPTkZJUk1FRDpyfHxzLlNUQVRVU19DT05GSVJNRUQsbz10LnBhcnNlSGVhZGVyKFwiY29udGFjdFwiKSxcIlVBU1wiPT09bj8odGhpcy5pZD17Y2FsbF9pZDp0LmNhbGxfaWQsbG9jYWxfdGFnOnQudG9fdGFnLHJlbW90ZV90YWc6dC5mcm9tX3RhZyx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbGxfaWQrdGhpcy5sb2NhbF90YWcrdGhpcy5yZW1vdGVfdGFnfX0sdGhpcy5zdGF0ZT1yLHRoaXMucmVtb3RlX3NlcW51bT10LmNzZXEsdGhpcy5sb2NhbF91cmk9dC5wYXJzZUhlYWRlcihcInRvXCIpLnVyaSx0aGlzLnJlbW90ZV91cmk9dC5wYXJzZUhlYWRlcihcImZyb21cIikudXJpLHRoaXMucmVtb3RlX3RhcmdldD1vLnVyaSx0aGlzLnJvdXRlX3NldD10LmdldEhlYWRlcnMoXCJyZWNvcmQtcm91dGVcIikpOlwiVUFDXCI9PT1uJiYodGhpcy5pZD17Y2FsbF9pZDp0LmNhbGxfaWQsbG9jYWxfdGFnOnQuZnJvbV90YWcscmVtb3RlX3RhZzp0LnRvX3RhZyx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbGxfaWQrdGhpcy5sb2NhbF90YWcrdGhpcy5yZW1vdGVfdGFnfX0sdGhpcy5zdGF0ZT1yLHRoaXMubG9jYWxfc2VxbnVtPXQuY3NlcSx0aGlzLmxvY2FsX3VyaT10LnBhcnNlSGVhZGVyKFwiZnJvbVwiKS51cmksdGhpcy5yZW1vdGVfdXJpPXQucGFyc2VIZWFkZXIoXCJ0b1wiKS51cmksdGhpcy5yZW1vdGVfdGFyZ2V0PW8udXJpLHRoaXMucm91dGVfc2V0PXQuZ2V0SGVhZGVycyhcInJlY29yZC1yb3V0ZVwiKS5yZXZlcnNlKCkpLHRoaXMub3duZXI9ZSxlLnVhLmRpYWxvZ3NbdGhpcy5pZC50b1N0cmluZygpXT10aGlzLHZvaWQgbChcIm5ldyBcIituK1wiIGRpYWxvZyBjcmVhdGVkIHdpdGggc3RhdHVzIFwiKyh0aGlzLnN0YXRlPT09cy5TVEFUVVNfRUFSTFk/XCJFQVJMWVwiOlwiQ09ORklSTUVEXCIpKSk6e2Vycm9yOlwidW5hYmxlIHRvIGNyZWF0ZSBhIERpYWxvZyB3aXRob3V0IENvbnRhY3QgaGVhZGVyIGZpZWxkXCJ9fXQuZXhwb3J0cz1yO3ZhciBzPXtTVEFUVVNfRUFSTFk6MSxTVEFUVVNfQ09ORklSTUVEOjJ9O3IuQz1zO3ZhciBsPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkRpYWxvZ1wiKSxpPWUoXCIuL1NJUE1lc3NhZ2VcIiksbz1lKFwiLi9Db25zdGFudHNcIiksdT1lKFwiLi9UcmFuc2FjdGlvbnNcIiksYT1lKFwiLi9EaWFsb2cvUmVxdWVzdFNlbmRlclwiKTtyLnByb3RvdHlwZT17dXBkYXRlOmZ1bmN0aW9uKGUsdCl7dGhpcy5zdGF0ZT1zLlNUQVRVU19DT05GSVJNRUQsbChcImRpYWxvZyBcIit0aGlzLmlkLnRvU3RyaW5nKCkrXCIgIGNoYW5nZWQgdG8gQ09ORklSTUVEIHN0YXRlXCIpLFwiVUFDXCI9PT10JiYodGhpcy5yb3V0ZV9zZXQ9ZS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLnJldmVyc2UoKSl9LHRlcm1pbmF0ZTpmdW5jdGlvbigpe2woXCJkaWFsb2cgXCIrdGhpcy5pZC50b1N0cmluZygpK1wiIGRlbGV0ZWRcIiksZGVsZXRlIHRoaXMub3duZXIudWEuZGlhbG9nc1t0aGlzLmlkLnRvU3RyaW5nKCldfSxjcmVhdGVSZXF1ZXN0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixzO3JldHVybiB0PXQmJnQuc2xpY2UoKXx8W10sdGhpcy5sb2NhbF9zZXFudW18fCh0aGlzLmxvY2FsX3NlcW51bT1NYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKSkscj1lPT09by5DQU5DRUx8fGU9PT1vLkFDSz90aGlzLmxvY2FsX3NlcW51bTp0aGlzLmxvY2FsX3NlcW51bSs9MSxzPW5ldyBpLk91dGdvaW5nUmVxdWVzdChlLHRoaXMucmVtb3RlX3RhcmdldCx0aGlzLm93bmVyLnVhLHtjc2VxOnIsY2FsbF9pZDp0aGlzLmlkLmNhbGxfaWQsZnJvbV91cmk6dGhpcy5sb2NhbF91cmksZnJvbV90YWc6dGhpcy5pZC5sb2NhbF90YWcsdG9fdXJpOnRoaXMucmVtb3RlX3VyaSx0b190YWc6dGhpcy5pZC5yZW1vdGVfdGFnLHJvdXRlX3NldDp0aGlzLnJvdXRlX3NldH0sdCxuKSxzLmRpYWxvZz10aGlzLHN9LGNoZWNrSW5EaWFsb2dSZXF1ZXN0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5yZW1vdGVfc2VxbnVtKXtpZihlLmNzZXE8dGhpcy5yZW1vdGVfc2VxbnVtKXJldHVybiBlLm1ldGhvZCE9PW8uQUNLJiZlLnJlcGx5KDUwMCksITE7ZS5jc2VxPnRoaXMucmVtb3RlX3NlcW51bSYmKHRoaXMucmVtb3RlX3NlcW51bT1lLmNzZXEpfWVsc2UgdGhpcy5yZW1vdGVfc2VxbnVtPWUuY3NlcTtpZihlLm1ldGhvZD09PW8uSU5WSVRFfHxlLm1ldGhvZD09PW8uVVBEQVRFJiZlLmJvZHkpe2lmKHRoaXMudWFjX3BlbmRpbmdfcmVwbHk9PT0hMCllLnJlcGx5KDQ5MSk7ZWxzZXtpZih0aGlzLnVhc19wZW5kaW5nX3JlcGx5PT09ITApe3ZhciBuPSgxMCpNYXRoLnJhbmRvbSgpfDApKzE7cmV0dXJuIGUucmVwbHkoNTAwLG51bGwsW1wiUmV0cnktQWZ0ZXI6XCIrbl0pLCExfXRoaXMudWFzX3BlbmRpbmdfcmVwbHk9ITAsZS5zZXJ2ZXJfdHJhbnNhY3Rpb24ub24oXCJzdGF0ZUNoYW5nZWRcIixmdW5jdGlvbiByKCl7dGhpcy5zdGF0ZSE9PXUuQy5TVEFUVVNfQUNDRVBURUQmJnRoaXMuc3RhdGUhPT11LkMuU1RBVFVTX0NPTVBMRVRFRCYmdGhpcy5zdGF0ZSE9PXUuQy5TVEFUVVNfVEVSTUlOQVRFRHx8KGUuc2VydmVyX3RyYW5zYWN0aW9uLnJlbW92ZUxpc3RlbmVyKFwic3RhdGVDaGFuZ2VkXCIsciksdC51YXNfcGVuZGluZ19yZXBseT0hMSl9KX1lLmhhc0hlYWRlcihcImNvbnRhY3RcIikmJmUuc2VydmVyX3RyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT09dS5DLlNUQVRVU19BQ0NFUFRFRCYmKHQucmVtb3RlX3RhcmdldD1lLnBhcnNlSGVhZGVyKFwiY29udGFjdFwiKS51cmkpfSl9ZWxzZSBlLm1ldGhvZD09PW8uTk9USUZZJiZlLmhhc0hlYWRlcihcImNvbnRhY3RcIikmJmUuc2VydmVyX3RyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT09dS5DLlNUQVRVU19DT01QTEVURUQmJih0LnJlbW90ZV90YXJnZXQ9ZS5wYXJzZUhlYWRlcihcImNvbnRhY3RcIikudXJpKX0pO3JldHVybiEwfSxzZW5kUmVxdWVzdDpmdW5jdGlvbihlLHQsbil7bj1ufHx7fTt2YXIgcj1uLmV4dHJhSGVhZGVycyYmbi5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10scz1uLmJvZHl8fG51bGwsbD10aGlzLmNyZWF0ZVJlcXVlc3QodCxyLHMpLGk9bmV3IGEodGhpcyxlLGwpO3JldHVybiBpLnNlbmQoKSxsfSxyZWNlaXZlUmVxdWVzdDpmdW5jdGlvbihlKXt0aGlzLmNoZWNrSW5EaWFsb2dSZXF1ZXN0KGUpJiZ0aGlzLm93bmVyLnJlY2VpdmVSZXF1ZXN0KGUpfX19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vRGlhbG9nL1JlcXVlc3RTZW5kZXJcIjozLFwiLi9TSVBNZXNzYWdlXCI6MTgsXCIuL1RyYW5zYWN0aW9uc1wiOjIxLGRlYnVnOjMzfV0sMzpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4pe3RoaXMuZGlhbG9nPWUsdGhpcy5hcHBsaWNhbnQ9dCx0aGlzLnJlcXVlc3Q9bix0aGlzLnJlYXR0ZW1wdD0hMSx0aGlzLnJlYXR0ZW1wdFRpbWVyPW51bGx9dC5leHBvcnRzPXI7dmFyIHM9ZShcIi4uL0NvbnN0YW50c1wiKSxsPWUoXCIuLi9UcmFuc2FjdGlvbnNcIiksaT1lKFwiLi4vUlRDU2Vzc2lvblwiKSxvPWUoXCIuLi9SZXF1ZXN0U2VuZGVyXCIpO3IucHJvdG90eXBlPXtzZW5kOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PW5ldyBvKHRoaXMsdGhpcy5kaWFsb2cub3duZXIudWEpO3Quc2VuZCgpLCh0aGlzLnJlcXVlc3QubWV0aG9kPT09cy5JTlZJVEV8fHRoaXMucmVxdWVzdC5tZXRob2Q9PT1zLlVQREFURSYmdGhpcy5yZXF1ZXN0LmJvZHkpJiZ0LmNsaWVudFRyYW5zYWN0aW9uLnN0YXRlIT09bC5DLlNUQVRVU19URVJNSU5BVEVEJiYodGhpcy5kaWFsb2cudWFjX3BlbmRpbmdfcmVwbHk9ITAsdC5jbGllbnRUcmFuc2FjdGlvbi5vbihcInN0YXRlQ2hhbmdlZFwiLGZ1bmN0aW9uIG4oKXt0aGlzLnN0YXRlIT09bC5DLlNUQVRVU19BQ0NFUFRFRCYmdGhpcy5zdGF0ZSE9PWwuQy5TVEFUVVNfQ09NUExFVEVEJiZ0aGlzLnN0YXRlIT09bC5DLlNUQVRVU19URVJNSU5BVEVEfHwodC5jbGllbnRUcmFuc2FjdGlvbi5yZW1vdmVMaXN0ZW5lcihcInN0YXRlQ2hhbmdlZFwiLG4pLGUuZGlhbG9nLnVhY19wZW5kaW5nX3JlcGx5PSExKX0pKX0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe3RoaXMuYXBwbGljYW50Lm9uUmVxdWVzdFRpbWVvdXQoKX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3RoaXMuYXBwbGljYW50Lm9uVHJhbnNwb3J0RXJyb3IoKX0scmVjZWl2ZVJlc3BvbnNlOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7NDA4PT09ZS5zdGF0dXNfY29kZXx8NDgxPT09ZS5zdGF0dXNfY29kZT90aGlzLmFwcGxpY2FudC5vbkRpYWxvZ0Vycm9yKGUpOmUubWV0aG9kPT09cy5JTlZJVEUmJjQ5MT09PWUuc3RhdHVzX2NvZGU/dGhpcy5yZWF0dGVtcHQ/dGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKGUpOih0aGlzLnJlcXVlc3QuY3NlcS52YWx1ZT10aGlzLmRpYWxvZy5sb2NhbF9zZXFudW0rPTEsdGhpcy5yZWF0dGVtcHRUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5hcHBsaWNhbnQub3duZXIuc3RhdHVzIT09aS5DLlNUQVRVU19URVJNSU5BVEVEJiYodC5yZWF0dGVtcHQ9ITAsdC5yZXF1ZXN0X3NlbmRlci5zZW5kKCkpfSwxZTMpKTp0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UoZSl9fX0se1wiLi4vQ29uc3RhbnRzXCI6MSxcIi4uL1JUQ1Nlc3Npb25cIjoxMSxcIi4uL1JlcXVlc3RTZW5kZXJcIjoxNyxcIi4uL1RyYW5zYWN0aW9uc1wiOjIxfV0sNDpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7dGhpcy5jcmVkZW50aWFscz1lLHRoaXMuY25vbmNlPW51bGwsdGhpcy5uYz0wLHRoaXMubmNIZXg9XCIwMDAwMDAwMFwiLHRoaXMuYWxnb3JpdGhtPW51bGwsdGhpcy5yZWFsbT1udWxsLHRoaXMubm9uY2U9bnVsbCx0aGlzLm9wYXF1ZT1udWxsLHRoaXMuc3RhbGU9bnVsbCx0aGlzLnFvcD1udWxsLHRoaXMubWV0aG9kPW51bGwsdGhpcy51cmk9bnVsbCx0aGlzLmhhMT1udWxsLHRoaXMucmVzcG9uc2U9bnVsbH10LmV4cG9ydHM9cjt2YXIgcz1lKFwiZGVidWdcIikoXCJKc1NJUDpEaWdlc3RBdXRoZW50aWNhdGlvblwiKSxsPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOkRpZ2VzdEF1dGhlbnRpY2F0aW9uXCIpO2wubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO3ZhciBpPWUoXCIuL1V0aWxzXCIpO3IucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZVwicmVhbG1cIjpyZXR1cm4gdGhpcy5yZWFsbTtjYXNlXCJoYTFcIjpyZXR1cm4gdGhpcy5oYTE7ZGVmYXVsdDpyZXR1cm4gdm9pZCBsKCdnZXQoKSB8IGNhbm5vdCBnZXQgXCIlc1wiIHBhcmFtZXRlcicsZSl9fSxyLnByb3RvdHlwZS5hdXRoZW50aWNhdGU9ZnVuY3Rpb24oZSx0KXt2YXIgbixyO2lmKHRoaXMuYWxnb3JpdGhtPXQuYWxnb3JpdGhtLHRoaXMucmVhbG09dC5yZWFsbSx0aGlzLm5vbmNlPXQubm9uY2UsdGhpcy5vcGFxdWU9dC5vcGFxdWUsdGhpcy5zdGFsZT10LnN0YWxlLHRoaXMuYWxnb3JpdGhtKXtpZihcIk1ENVwiIT09dGhpcy5hbGdvcml0aG0pcmV0dXJuIGwoJ2F1dGhlbnRpY2F0ZSgpIHwgY2hhbGxlbmdlIHdpdGggRGlnZXN0IGFsZ29yaXRobSBkaWZmZXJlbnQgdGhhbiBcIk1ENVwiLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkJyksITF9ZWxzZSB0aGlzLmFsZ29yaXRobT1cIk1ENVwiO2lmKCF0aGlzLm5vbmNlKXJldHVybiBsKFwiYXV0aGVudGljYXRlKCkgfCBjaGFsbGVuZ2Ugd2l0aG91dCBEaWdlc3Qgbm9uY2UsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWRcIiksITE7aWYoIXRoaXMucmVhbG0pcmV0dXJuIGwoXCJhdXRoZW50aWNhdGUoKSB8IGNoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCByZWFsbSwgYXV0aGVudGljYXRpb24gYWJvcnRlZFwiKSwhMTtpZighdGhpcy5jcmVkZW50aWFscy5wYXNzd29yZCl7aWYoIXRoaXMuY3JlZGVudGlhbHMuaGExKXJldHVybiBsKFwiYXV0aGVudGljYXRlKCkgfCBubyBwbGFpbiBTSVAgcGFzc3dvcmQgbm9yIGhhMSBwcm92aWRlZCwgYXV0aGVudGljYXRpb24gYWJvcnRlZFwiKSwhMTtpZih0aGlzLmNyZWRlbnRpYWxzLnJlYWxtIT09dGhpcy5yZWFsbSlyZXR1cm4gbCgnYXV0aGVudGljYXRlKCkgfCBubyBwbGFpbiBTSVAgcGFzc3dvcmQsIGFuZCBzdG9yZWQgYHJlYWxtYCBkb2VzIG5vdCBtYXRjaCB0aGUgZ2l2ZW4gYHJlYWxtYCwgY2Fubm90IGF1dGhlbnRpY2F0ZSBbc3RvcmVkOlwiJXNcIiwgZ2l2ZW46XCIlc1wiXScsdGhpcy5jcmVkZW50aWFscy5yZWFsbSx0aGlzLnJlYWxtKSwhMX1pZih0LnFvcClpZih0LnFvcC5pbmRleE9mKFwiYXV0aFwiKT4tMSl0aGlzLnFvcD1cImF1dGhcIjtlbHNle2lmKCEodC5xb3AuaW5kZXhPZihcImF1dGgtaW50XCIpPi0xKSlyZXR1cm4gbCgnYXV0aGVudGljYXRlKCkgfCBjaGFsbGVuZ2Ugd2l0aG91dCBEaWdlc3QgcW9wIGRpZmZlcmVudCB0aGFuIFwiYXV0aFwiIG9yIFwiYXV0aC1pbnRcIiwgYXV0aGVudGljYXRpb24gYWJvcnRlZCcpLCExO3RoaXMucW9wPVwiYXV0aC1pbnRcIn1lbHNlIHRoaXMucW9wPW51bGw7cmV0dXJuIHRoaXMubWV0aG9kPWUubWV0aG9kLHRoaXMudXJpPWUucnVyaSx0aGlzLmNub25jZT1pLmNyZWF0ZVJhbmRvbVRva2VuKDEyKSx0aGlzLm5jKz0xLHI9TnVtYmVyKHRoaXMubmMpLnRvU3RyaW5nKDE2KSx0aGlzLm5jSGV4PVwiMDAwMDAwMDBcIi5zdWJzdHIoMCw4LXIubGVuZ3RoKStyLDQyOTQ5NjcyOTY9PT10aGlzLm5jJiYodGhpcy5uYz0xLHRoaXMubmNIZXg9XCIwMDAwMDAwMVwiKSx0aGlzLmNyZWRlbnRpYWxzLnBhc3N3b3JkP3RoaXMuaGExPWkuY2FsY3VsYXRlTUQ1KHRoaXMuY3JlZGVudGlhbHMudXNlcm5hbWUrXCI6XCIrdGhpcy5yZWFsbStcIjpcIit0aGlzLmNyZWRlbnRpYWxzLnBhc3N3b3JkKTp0aGlzLmhhMT10aGlzLmNyZWRlbnRpYWxzLmhhMSxcImF1dGhcIj09PXRoaXMucW9wPyhuPWkuY2FsY3VsYXRlTUQ1KHRoaXMubWV0aG9kK1wiOlwiK3RoaXMudXJpKSx0aGlzLnJlc3BvbnNlPWkuY2FsY3VsYXRlTUQ1KHRoaXMuaGExK1wiOlwiK3RoaXMubm9uY2UrXCI6XCIrdGhpcy5uY0hleCtcIjpcIit0aGlzLmNub25jZStcIjphdXRoOlwiK24pKTpcImF1dGgtaW50XCI9PT10aGlzLnFvcD8obj1pLmNhbGN1bGF0ZU1ENSh0aGlzLm1ldGhvZCtcIjpcIit0aGlzLnVyaStcIjpcIitpLmNhbGN1bGF0ZU1ENSh0aGlzLmJvZHk/dGhpcy5ib2R5OlwiXCIpKSx0aGlzLnJlc3BvbnNlPWkuY2FsY3VsYXRlTUQ1KHRoaXMuaGExK1wiOlwiK3RoaXMubm9uY2UrXCI6XCIrdGhpcy5uY0hleCtcIjpcIit0aGlzLmNub25jZStcIjphdXRoLWludDpcIituKSk6bnVsbD09PXRoaXMucW9wJiYobj1pLmNhbGN1bGF0ZU1ENSh0aGlzLm1ldGhvZCtcIjpcIit0aGlzLnVyaSksdGhpcy5yZXNwb25zZT1pLmNhbGN1bGF0ZU1ENSh0aGlzLmhhMStcIjpcIit0aGlzLm5vbmNlK1wiOlwiK24pKSxzKFwiYXV0aGVudGljYXRlKCkgfCByZXNwb25zZSBnZW5lcmF0ZWRcIiksITB9LHIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGU9W107aWYoIXRoaXMucmVzcG9uc2UpdGhyb3cgbmV3IEVycm9yKFwicmVzcG9uc2UgZmllbGQgZG9lcyBub3QgZXhpc3QsIGNhbm5vdCBnZW5lcmF0ZSBBdXRob3JpemF0aW9uIGhlYWRlclwiKTtyZXR1cm4gZS5wdXNoKFwiYWxnb3JpdGhtPVwiK3RoaXMuYWxnb3JpdGhtKSxlLnB1c2goJ3VzZXJuYW1lPVwiJyt0aGlzLmNyZWRlbnRpYWxzLnVzZXJuYW1lKydcIicpLGUucHVzaCgncmVhbG09XCInK3RoaXMucmVhbG0rJ1wiJyksZS5wdXNoKCdub25jZT1cIicrdGhpcy5ub25jZSsnXCInKSxlLnB1c2goJ3VyaT1cIicrdGhpcy51cmkrJ1wiJyksZS5wdXNoKCdyZXNwb25zZT1cIicrdGhpcy5yZXNwb25zZSsnXCInKSx0aGlzLm9wYXF1ZSYmZS5wdXNoKCdvcGFxdWU9XCInK3RoaXMub3BhcXVlKydcIicpLHRoaXMucW9wJiYoZS5wdXNoKFwicW9wPVwiK3RoaXMucW9wKSxlLnB1c2goJ2Nub25jZT1cIicrdGhpcy5jbm9uY2UrJ1wiJyksZS5wdXNoKFwibmM9XCIrdGhpcy5uY0hleCkpLFwiRGlnZXN0IFwiK2Uuam9pbihcIiwgXCIpfX0se1wiLi9VdGlsc1wiOjI1LGRlYnVnOjMzfV0sNTpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPXtDb25maWd1cmF0aW9uRXJyb3I6ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlLHQpe3RoaXMuY29kZT0xLHRoaXMubmFtZT1cIkNPTkZJR1VSQVRJT05fRVJST1JcIix0aGlzLnBhcmFtZXRlcj1lLHRoaXMudmFsdWU9dCx0aGlzLm1lc3NhZ2U9dGhpcy52YWx1ZT9cIkludmFsaWQgdmFsdWUgXCIrSlNPTi5zdHJpbmdpZnkodGhpcy52YWx1ZSkrJyBmb3IgcGFyYW1ldGVyIFwiJyt0aGlzLnBhcmFtZXRlcisnXCInOlwiTWlzc2luZyBwYXJhbWV0ZXI6IFwiK3RoaXMucGFyYW1ldGVyfTtyZXR1cm4gZS5wcm90b3R5cGU9bmV3IEVycm9yLGV9KCksSW52YWxpZFN0YXRlRXJyb3I6ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlKXt0aGlzLmNvZGU9Mix0aGlzLm5hbWU9XCJJTlZBTElEX1NUQVRFX0VSUk9SXCIsdGhpcy5zdGF0dXM9ZSx0aGlzLm1lc3NhZ2U9XCJJbnZhbGlkIHN0YXR1czogXCIrZX07cmV0dXJuIGUucHJvdG90eXBlPW5ldyBFcnJvcixlfSgpLE5vdFN1cHBvcnRlZEVycm9yOmZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5jb2RlPTMsdGhpcy5uYW1lPVwiTk9UX1NVUFBPUlRFRF9FUlJPUlwiLHRoaXMubWVzc2FnZT1lfTtyZXR1cm4gZS5wcm90b3R5cGU9bmV3IEVycm9yLGV9KCksTm90UmVhZHlFcnJvcjpmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3RoaXMuY29kZT00LHRoaXMubmFtZT1cIk5PVF9SRUFEWV9FUlJPUlwiLHRoaXMubWVzc2FnZT1lfTtyZXR1cm4gZS5wcm90b3R5cGU9bmV3IEVycm9yLGV9KCl9O3QuZXhwb3J0cz1yfSx7fV0sNjpbZnVuY3Rpb24oZSx0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuJ1wiJytlLnJlcGxhY2UoL1xcXFwvZyxcIlxcXFxcXFxcXCIpLnJlcGxhY2UoL1wiL2csJ1xcXFxcIicpLnJlcGxhY2UoL1xceDA4L2csXCJcXFxcYlwiKS5yZXBsYWNlKC9cXHQvZyxcIlxcXFx0XCIpLnJlcGxhY2UoL1xcbi9nLFwiXFxcXG5cIikucmVwbGFjZSgvXFxmL2csXCJcXFxcZlwiKS5yZXBsYWNlKC9cXHIvZyxcIlxcXFxyXCIpLnJlcGxhY2UoL1tcXHgwMC1cXHgwN1xceDBCXFx4MEUtXFx4MUZcXHg4MC1cXHVGRkZGXS9nLGVzY2FwZSkrJ1wiJ312YXIgbj17cGFyc2U6ZnVuY3Rpb24obixyKXtmdW5jdGlvbiBzKGUpe0NyPl9yfHwoX3I+Q3ImJihDcj1fcixTcj1bXSksU3IucHVzaChlKSl9ZnVuY3Rpb24gbCgpe3ZhciBlO3JldHVyblwiXFxyXFxuXCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIlxcclxcblwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCJcXFxcclxcXFxuXCInKSksZX1mdW5jdGlvbiBpKCl7dmFyIGU7cmV0dXJuL15bMC05XS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlswLTldXCIpKSxlfWZ1bmN0aW9uIG8oKXt2YXIgZTtyZXR1cm4vXlthLXpBLVpdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiW2EtekEtWl1cIikpLGV9ZnVuY3Rpb24gdSgpe3ZhciBlO3JldHVybi9eWzAtOWEtZkEtRl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbMC05YS1mQS1GXVwiKSksZX1mdW5jdGlvbiBhKCl7dmFyIGU7cmV0dXJuIGU9ZCgpLG51bGw9PT1lJiYoZT1wKCkpLGV9ZnVuY3Rpb24gYygpe3ZhciBlO3JldHVybi9eW1xcMC1cXHhGRl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbXFxcXDAtXFxcXHhGRl1cIikpLGV9ZnVuY3Rpb24gaCgpe3ZhciBlO3JldHVybi9eW1wiXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcygnW1wiXScpKSxlfWZ1bmN0aW9uIGQoKXt2YXIgZTtyZXR1cm4gMzI9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiIFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiBcIicpKSxlfWZ1bmN0aW9uIHAoKXt2YXIgZTtyZXR1cm4gOT09PW4uY2hhckNvZGVBdChfcik/KGU9XCJcdFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIlxcXFx0XCInKSksZX1mdW5jdGlvbiBmKCl7dmFyIGU7cmV0dXJuL15bYS16QS1aMC05XS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlthLXpBLVowLTldXCIpKSxlfWZ1bmN0aW9uIG0oKXt2YXIgZTtyZXR1cm4gNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiO1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsPT09ZSYmKDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIi9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbD09PWUmJig2Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCI/XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGw9PT1lJiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiOlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09ZSYmKDY0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIkBcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbD09PWUmJigzOD09PW4uY2hhckNvZGVBdChfcik/KGU9XCImXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT1lJiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiPVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09ZSYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIitcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PWUmJigzNj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIkXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpLG51bGw9PT1lJiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiLFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIixcIicpKSkpKSkpKSkpKSxlfWZ1bmN0aW9uIGcoKXt2YXIgZTtyZXR1cm4gZT1mKCksbnVsbD09PWUmJihlPVQoKSksZX1mdW5jdGlvbiBUKCl7dmFyIGU7cmV0dXJuIDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIi1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PWUmJig5NT09PW4uY2hhckNvZGVBdChfcik/KGU9XCJfXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpLG51bGw9PT1lJiYoNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiLlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsPT09ZSYmKDMzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiFcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIhXCInKSksbnVsbD09PWUmJigxMjY9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiflwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIn5cIicpKSxudWxsPT09ZSYmKDQyPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIipcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIqXCInKSksbnVsbD09PWUmJigzOT09PW4uY2hhckNvZGVBdChfcik/KGU9XCInXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiXFwnXCInKSksbnVsbD09PWUmJig0MD09PW4uY2hhckNvZGVBdChfcik/KGU9XCIoXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiKFwiJykpLG51bGw9PT1lJiYoNDE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiKVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIilcIicpKSkpKSkpKSkpLGV9ZnVuY3Rpb24gXygpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fciwzNz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIlXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJVwiJykpLG51bGwhPT1lPyh0PXUoKSxudWxsIT09dD8ocj11KCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuam9pbihcIlwiKX0obCxlKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIHYoKXt2YXIgZSx0LG4scixzLGk7Zm9yKHI9X3Iscz1fcixpPV9yLGU9W10sdD1hKCk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWEoKTtpZihudWxsIT09ZT8odD1sKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLGU9bnVsbCE9PWU/ZTpcIlwiLG51bGwhPT1lKXtpZihuPWEoKSxudWxsIT09bilmb3IodD1bXTtudWxsIT09bjspdC5wdXNoKG4pLG49YSgpO2Vsc2UgdD1udWxsO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCIgXCJ9KHIpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gQygpe3ZhciBlO3JldHVybiBlPXYoKSxlPW51bGwhPT1lP2U6XCJcIn1mdW5jdGlvbiBTKCl7dmFyIGUsdCxyLGwsaTtmb3IobD1fcixpPV9yLGU9W10sdD1kKCksbnVsbD09PXQmJih0PXAoKSk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWQoKSxudWxsPT09dCYmKHQ9cCgpKTtyZXR1cm4gbnVsbCE9PWU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIjpcIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBFKCl7dmFyIGUsdCxyLHMsbCxpLG87aWYobD1fcixpPV9yLHQ9QSgpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1BKCk7ZWxzZSBlPW51bGw7aWYobnVsbCE9PWUpe2Zvcih0PVtdLG89X3Iscj1bXSxzPXYoKTtudWxsIT09czspci5wdXNoKHMpLHM9digpO2ZvcihudWxsIT09cj8ocz1BKCksbnVsbCE9PXM/cj1bcixzXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT1yOyl7Zm9yKHQucHVzaChyKSxvPV9yLHI9W10scz12KCk7bnVsbCE9PXM7KXIucHVzaChzKSxzPXYoKTtudWxsIT09cj8ocz1BKCksbnVsbCE9PXM/cj1bcixzXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pfW51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3Vic3RyaW5nKF9yLGUpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEEoKXt2YXIgZTtyZXR1cm4vXlshLX5dLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiWyEtfl1cIikpLG51bGw9PT1lJiYoZT15KCkpLGV9ZnVuY3Rpb24geSgpe3ZhciBlO3JldHVybi9eW1xceDgwLVxcdUZGRkZdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiW1xcXFx4ODAtXFxcXHVGRkZGXVwiKSksZX1mdW5jdGlvbiBSKCl7dmFyIGU7cmV0dXJuL15bXFx4ODAtXFx4QkZdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiW1xcXFx4ODAtXFxcXHhCRl1cIikpLGV9ZnVuY3Rpb24gYigpe3ZhciBlO3JldHVybiBlPWkoKSxudWxsPT09ZSYmKC9eW2EtZl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbYS1mXVwiKSkpLGV9ZnVuY3Rpb24gSSgpe3ZhciBlLHQscjtpZihyPV9yLHQ9ZigpLG51bGw9PT10JiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09dCYmKDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbD09PXQmJigzMz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIhXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiIVwiJykpLG51bGw9PT10JiYoMzc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiVcIicpKSxudWxsPT09dCYmKDQyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIipcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIqXCInKSksbnVsbD09PXQmJig5NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJfXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09dCYmKDk2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cImBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJgXCInKSksbnVsbD09PXQmJigzOT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCInXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXFwnXCInKSksbnVsbD09PXQmJigxMjY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiflwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIn5cIicpKSkpKSkpKSkpKSksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWYoKSxudWxsPT09dCYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXQmJig0Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIuXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGw9PT10JiYoMzM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiIVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiFcIicpKSxudWxsPT09dCYmKDM3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiVcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIlXCInKSksbnVsbD09PXQmJig0Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIqXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKlwiJykpLG51bGw9PT10JiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiX1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXQmJig5Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJgXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiYFwiJykpLG51bGw9PT10JiYoMzk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJ1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIlxcJ1wiJykpLG51bGw9PT10JiYoMTI2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIn5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ+XCInKSkpKSkpKSkpKSkpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3Vic3RyaW5nKF9yLGUpfShyKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIHcoKXt2YXIgZSx0LHI7aWYocj1fcix0PWYoKSxudWxsPT09dCYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXQmJigzMz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIhXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiIVwiJykpLG51bGw9PT10JiYoMzc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiVcIicpKSxudWxsPT09dCYmKDQyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIipcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIqXCInKSksbnVsbD09PXQmJig5NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJfXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09dCYmKDk2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cImBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJgXCInKSksbnVsbD09PXQmJigzOT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCInXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXFwnXCInKSksbnVsbD09PXQmJigxMjY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiflwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIn5cIicpKSkpKSkpKSkpKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9ZigpLG51bGw9PT10JiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09dCYmKDMzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiFcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIhXCInKSksbnVsbD09PXQmJigzNz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIlXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJVwiJykpLG51bGw9PT10JiYoNDI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIipcIicpKSxudWxsPT09dCYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIl9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJfXCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT10JiYoOTY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiYFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcImBcIicpKSxudWxsPT09dCYmKDM5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIidcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJcXCdcIicpKSxudWxsPT09dCYmKDEyNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ+XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiflwiJykpKSkpKSkpKSkpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3Vic3RyaW5nKF9yLGUpfShyKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIE4oKXt2YXIgZTtyZXR1cm4gNDA9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiKFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIihcIicpKSxudWxsPT09ZSYmKDQxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIilcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIpXCInKSksbnVsbD09PWUmJig2MD09PW4uY2hhckNvZGVBdChfcik/KGU9XCI8XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiPFwiJykpLG51bGw9PT1lJiYoNjI9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiPlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj5cIicpKSxudWxsPT09ZSYmKDY0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIkBcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbD09PWUmJig0ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCIsXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpLG51bGw9PT1lJiYoNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiO1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsPT09ZSYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjpcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PWUmJig5Mj09PW4uY2hhckNvZGVBdChfcik/KGU9XCJcXFxcXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiXFxcXFxcXFxcIicpKSxudWxsPT09ZSYmKGU9aCgpLG51bGw9PT1lJiYoNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiL1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsPT09ZSYmKDkxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIltcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJbXCInKSksbnVsbD09PWUmJig5Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCJdXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiXVwiJykpLG51bGw9PT1lJiYoNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiP1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsPT09ZSYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PWUmJigxMjM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwie1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIntcIicpKSxudWxsPT09ZSYmKDEyNT09PW4uY2hhckNvZGVBdChfcik/KGU9XCJ9XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wifVwiJykpLG51bGw9PT1lJiYoZT1kKCksbnVsbD09PWUmJihlPXAoKSkpKSkpKSkpKSkpKSkpKSkpKSxlfWZ1bmN0aW9uIEQoKXt2YXIgZSx0LHI7aWYocj1fcix0PWYoKSxudWxsPT09dCYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXQmJig0Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIuXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGw9PT10JiYoMzM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiIVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiFcIicpKSxudWxsPT09dCYmKDM3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiVcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIlXCInKSksbnVsbD09PXQmJig0Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIqXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKlwiJykpLG51bGw9PT10JiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiX1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXQmJig5Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJgXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiYFwiJykpLG51bGw9PT10JiYoMzk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJ1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIlxcJ1wiJykpLG51bGw9PT10JiYoMTI2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIn5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ+XCInKSksbnVsbD09PXQmJig0MD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIoXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKFwiJykpLG51bGw9PT10JiYoNDE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIilcIicpKSxudWxsPT09dCYmKDYwPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjxcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI8XCInKSksbnVsbD09PXQmJig2Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI+XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPlwiJykpLG51bGw9PT10JiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09dCYmKDkyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIlxcXFxcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJcXFxcXFxcXFwiJykpLG51bGw9PT10JiYodD1oKCksbnVsbD09PXQmJig0Nz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIvXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGw9PT10JiYoOTE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiW1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIltcIicpKSxudWxsPT09dCYmKDkzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIl1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJdXCInKSksbnVsbD09PXQmJig2Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI/XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGw9PT10JiYoMTIzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIntcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ7XCInKSksbnVsbD09PXQmJigxMjU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwifVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIn1cIicpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1mKCksbnVsbD09PXQmJig0NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCItXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT10JiYoNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsPT09dCYmKDMzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiFcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIhXCInKSksbnVsbD09PXQmJigzNz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIlXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJVwiJykpLG51bGw9PT10JiYoNDI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIipcIicpKSxudWxsPT09dCYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIl9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJfXCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT10JiYoOTY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiYFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcImBcIicpKSxudWxsPT09dCYmKDM5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIidcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJcXCdcIicpKSxudWxsPT09dCYmKDEyNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ+XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiflwiJykpLG51bGw9PT10JiYoNDA9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIihcIicpKSxudWxsPT09dCYmKDQxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIilcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIpXCInKSksbnVsbD09PXQmJig2MD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI8XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPFwiJykpLG51bGw9PT10JiYoNjI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj5cIicpKSxudWxsPT09dCYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PXQmJig5Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJcXFxcXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXFxcXFxcXFxcIicpKSxudWxsPT09dCYmKHQ9aCgpLG51bGw9PT10JiYoNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiL1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsPT09dCYmKDkxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIltcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJbXCInKSksbnVsbD09PXQmJig5Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJdXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXVwiJykpLG51bGw9PT10JiYoNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiP1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsPT09dCYmKDEyMz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ7XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wie1wiJykpLG51bGw9PT10JiYoMTI1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIn1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ9XCInKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiBuLnN1YnN0cmluZyhfcixlKX0ocikpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBPKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9QygpLG51bGwhPT1lPyg0Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIqXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKlwiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCIqXCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24geCgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZT8oNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiL1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiL1wifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIFUoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWU/KDYxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIj1cIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBNKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9QygpLG51bGwhPT1lPyg0MD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIoXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKFwiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCIoXCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gUCgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZT8oNDE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIilcIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiKVwifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIHEoKXt2YXIgZSx0LHIsbDtyZXR1cm4gcj1fcixsPV9yLDYyPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj5cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI+XCInKSksbnVsbCE9PWU/KHQ9QygpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCI+XCJ9KHIpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gTCgpe3ZhciBlLHQscixsO3JldHVybiByPV9yLGw9X3IsZT1DKCksbnVsbCE9PWU/KDYwPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjxcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI8XCInKSksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIjxcIn0ocikpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBrKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9QygpLG51bGwhPT1lPyg0ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIsXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCIsXCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gSCgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZT8oNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiO1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiO1wifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEYoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIjpcIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBHKCl7dmFyIGUsdCxuLHI7cmV0dXJuIG49X3Iscj1fcixlPUMoKSxudWxsIT09ZT8odD1oKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4nXCInfShuKSksbnVsbD09PWUmJihfcj1uKSxlfWZ1bmN0aW9uIGooKXt2YXIgZSx0LG4scjtyZXR1cm4gbj1fcixyPV9yLGU9aCgpLG51bGwhPT1lPyh0PUMoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybidcIid9KG4pKSxudWxsPT09ZSYmKF9yPW4pLGV9ZnVuY3Rpb24gVygpe3ZhciBlLHQsbixyO2lmKHI9X3IsZT1NKCksbnVsbCE9PWUpe2Zvcih0PVtdLG49QigpLG51bGw9PT1uJiYobj1KKCksbnVsbD09PW4mJihuPVcoKSkpO251bGwhPT1uOyl0LnB1c2gobiksbj1CKCksbnVsbD09PW4mJihuPUooKSxudWxsPT09biYmKG49VygpKSk7bnVsbCE9PXQ/KG49UCgpLG51bGwhPT1uP2U9W2UsdCxuXTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpfWVsc2UgZT1udWxsLF9yPXI7cmV0dXJuIGV9ZnVuY3Rpb24gQigpe3ZhciBlO3JldHVybi9eWyEtJ10vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbIS0nXVwiKSksbnVsbD09PWUmJigvXlsqLVtdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiWyotW11cIikpLG51bGw9PT1lJiYoL15bXFxdLX5dLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiW1xcXFxdLX5dXCIpKSxudWxsPT09ZSYmKGU9eSgpLG51bGw9PT1lJiYoZT12KCkpKSkpLGV9ZnVuY3Rpb24geigpe3ZhciBlLHQscixzLGwsaTtpZihsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWUpaWYodD1oKCksbnVsbCE9PXQpe2ZvcihyPVtdLHM9WSgpLG51bGw9PT1zJiYocz1KKCkpO251bGwhPT1zOylyLnB1c2gocykscz1ZKCksbnVsbD09PXMmJihzPUooKSk7bnVsbCE9PXI/KHM9aCgpLG51bGwhPT1zP2U9W2UsdCxyLHNdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtlbHNlIGU9bnVsbCxfcj1pO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3Vic3RyaW5nKF9yLGUpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIFYoKXt2YXIgZSx0LHIscyxsLGk7aWYobD1fcixpPV9yLGU9QygpLG51bGwhPT1lKWlmKHQ9aCgpLG51bGwhPT10KXtmb3Iocj1bXSxzPVkoKSxudWxsPT09cyYmKHM9SigpKTtudWxsIT09czspci5wdXNoKHMpLHM9WSgpLG51bGw9PT1zJiYocz1KKCkpO251bGwhPT1yPyhzPWgoKSxudWxsIT09cz9lPVtlLHQscixzXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiBuLnN1YnN0cmluZyhfci0xLGUrMSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gWSgpe3ZhciBlO3JldHVybiBlPXYoKSxudWxsPT09ZSYmKDMzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiFcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIhXCInKSksbnVsbD09PWUmJigvXlsjLVtdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiWyMtW11cIikpLG51bGw9PT1lJiYoL15bXFxdLX5dLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiW1xcXFxdLX5dXCIpKSxudWxsPT09ZSYmKGU9eSgpKSkpKSxlfWZ1bmN0aW9uIEooKXt2YXIgZSx0LHI7cmV0dXJuIHI9X3IsOTI9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiXFxcXFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIlxcXFxcXFxcXCInKSksbnVsbCE9PWU/KC9eW1xcMC1cXHRdLy50ZXN0KG4uY2hhckF0KF9yKSk/KHQ9bi5jaGFyQXQoX3IpLF9yKyspOih0PW51bGwsMD09PXZyJiZzKFwiW1xcXFwwLVxcXFx0XVwiKSksbnVsbD09PXQmJigvXltcXHgwQi1cXGZdLy50ZXN0KG4uY2hhckF0KF9yKSk/KHQ9bi5jaGFyQXQoX3IpLF9yKyspOih0PW51bGwsMD09PXZyJiZzKFwiW1xcXFx4MEItXFxcXGZdXCIpKSxudWxsPT09dCYmKC9eW1xceDBFLX9dLy50ZXN0KG4uY2hhckF0KF9yKSk/KHQ9bi5jaGFyQXQoX3IpLF9yKyspOih0PW51bGwsMD09PXZyJiZzKFwiW1xcXFx4MEUtf11cIikpKSksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gSygpe3ZhciBlLHQscixsLGksbztyZXR1cm4gaT1fcixvPV9yLGU9WCgpLG51bGwhPT1lPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWVlKCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KGw9c2UoKSxudWxsIT09bD9lPVtlLHQscixsXTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt0cnl7eXIudXJpPW5ldyBFcih5ci5zY2hlbWUseXIudXNlcix5ci5ob3N0LHlyLnBvcnQpLGRlbGV0ZSB5ci5zY2hlbWUsZGVsZXRlIHlyLnVzZXIsZGVsZXRlIHlyLmhvc3QsZGVsZXRlIHlyLmhvc3RfdHlwZSxkZWxldGUgeXIucG9ydH1jYXRjaCh0KXt5cj0tMX19KGkpKSxudWxsPT09ZSYmKF9yPWkpLGV9ZnVuY3Rpb24gJCgpe3ZhciBlLHQsbCxpLG8sdSxhLGM7cmV0dXJuIGE9X3IsYz1fcixlPVgoKSxudWxsIT09ZT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8obD1lZSgpLGw9bnVsbCE9PWw/bDpcIlwiLG51bGwhPT1sPyhpPXNlKCksbnVsbCE9PWk/KG89Z2UoKSxudWxsIT09bz8odT1OZSgpLHU9bnVsbCE9PXU/dTpcIlwiLG51bGwhPT11P2U9W2UsdCxsLGksbyx1XTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt0cnl7eXIudXJpPW5ldyBFcih5ci5zY2hlbWUseXIudXNlcix5ci5ob3N0LHlyLnBvcnQseXIudXJpX3BhcmFtcyx5ci51cmlfaGVhZGVycyksZGVsZXRlIHlyLnNjaGVtZSxkZWxldGUgeXIudXNlcixkZWxldGUgeXIuaG9zdCxkZWxldGUgeXIuaG9zdF90eXBlLGRlbGV0ZSB5ci5wb3J0LGRlbGV0ZSB5ci51cmlfcGFyYW1zLFwiU0lQX1VSSVwiPT09ciYmKHlyPXlyLnVyaSl9Y2F0Y2godCl7eXI9LTF9fShhKSksbnVsbD09PWUmJihfcj1hKSxlfWZ1bmN0aW9uIFgoKXt2YXIgZTtyZXR1cm4gZT1RKCksbnVsbD09PWUmJihlPVooKSksZX1mdW5jdGlvbiBRKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixcInNpcHNcIj09PW4uc3Vic3RyKF9yLDQpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNCksX3IrPTQpOihlPW51bGwsMD09PXZyJiZzKCdcInNpcHNcIicpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5zY2hlbWU9dC50b0xvd2VyQ2FzZSgpfSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gWigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsXCJzaXBcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcInNpcFwiJykpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnNjaGVtZT10LnRvTG93ZXJDYXNlKCl9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBlZSgpe3ZhciBlLHQscixsLGksbztyZXR1cm4gbD1fcixpPV9yLGU9dGUoKSxudWxsIT09ZT8obz1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPXJlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPW8pKToodD1udWxsLF9yPW8pLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10Pyg2ND09PW4uY2hhckNvZGVBdChfcik/KHI9XCJAXCIsXG5fcisrKToocj1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLnVzZXI9ZGVjb2RlVVJJQ29tcG9uZW50KG4uc3Vic3RyaW5nKF9yLTEsZSkpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIHRlKCl7dmFyIGUsdDtpZih0PWcoKSxudWxsPT09dCYmKHQ9XygpLG51bGw9PT10JiYodD1uZSgpKSksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWcoKSxudWxsPT09dCYmKHQ9XygpLG51bGw9PT10JiYodD1uZSgpKSk7ZWxzZSBlPW51bGw7cmV0dXJuIGV9ZnVuY3Rpb24gbmUoKXt2YXIgZTtyZXR1cm4gMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09ZSYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PWUmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIrXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT1lJiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSxudWxsPT09ZSYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIixcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIsXCInKSksbnVsbD09PWUmJig1OT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI7XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGw9PT1lJiYoNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiP1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsPT09ZSYmKDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIi9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIvXCInKSkpKSkpKSkpLGV9ZnVuY3Rpb24gcmUoKXt2YXIgZSx0LHI7Zm9yKHI9X3IsZT1bXSx0PWcoKSxudWxsPT09dCYmKHQ9XygpLG51bGw9PT10JiYoMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09dCYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT10JiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSxudWxsPT09dCYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIixcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIsXCInKSkpKSkpKSk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWcoKSxudWxsPT09dCYmKHQ9XygpLG51bGw9PT10JiYoMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09dCYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT10JiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSxudWxsPT09dCYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIixcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIsXCInKSkpKSkpKSk7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci5wYXNzd29yZD1uLnN1YnN0cmluZyhfcixlKX0ocikpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBzZSgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsZT1sZSgpLG51bGwhPT1lPyhpPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9bWUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9aSkpOih0PW51bGwsX3I9aSksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gbGUoKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9aWUoKSxudWxsPT09ZSYmKGU9cGUoKSxudWxsPT09ZSYmKGU9YWUoKSkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4geXIuaG9zdD1uLnN1YnN0cmluZyhfcixlKS50b0xvd2VyQ2FzZSgpLHlyLmhvc3R9KHQpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gaWUoKXt2YXIgZSx0LHIsbCxpLG87Zm9yKGw9X3IsaT1fcixlPVtdLG89X3IsdD1vZSgpLG51bGwhPT10Pyg0Nj09PW4uY2hhckNvZGVBdChfcik/KHI9XCIuXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1vKSk6KHQ9bnVsbCxfcj1vKTtudWxsIT09dDspZS5wdXNoKHQpLG89X3IsdD1vZSgpLG51bGwhPT10Pyg0Nj09PW4uY2hhckNvZGVBdChfcik/KHI9XCIuXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1vKSk6KHQ9bnVsbCxfcj1vKTtyZXR1cm4gbnVsbCE9PWU/KHQ9dWUoKSxudWxsIT09dD8oNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHlyLmhvc3RfdHlwZT1cImRvbWFpblwiLG4uc3Vic3RyaW5nKF9yLGUpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIG9lKCl7dmFyIGUsdCxyLGw7aWYobD1fcixlPWYoKSxudWxsIT09ZSl7Zm9yKHQ9W10scj1mKCksbnVsbD09PXImJig0NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCItXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT1yJiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiX1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSkpO251bGwhPT1yOyl0LnB1c2gocikscj1mKCksbnVsbD09PXImJig0NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCItXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT1yJiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiX1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBlfWZ1bmN0aW9uIHVlKCl7dmFyIGUsdCxyLGw7aWYobD1fcixlPW8oKSxudWxsIT09ZSl7Zm9yKHQ9W10scj1mKCksbnVsbD09PXImJig0NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCItXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT1yJiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiX1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSkpO251bGwhPT1yOyl0LnB1c2gocikscj1mKCksbnVsbD09PXImJig0NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCItXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT1yJiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiX1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBlfWZ1bmN0aW9uIGFlKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLDkxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIltcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJbXCInKSksbnVsbCE9PWU/KHQ9Y2UoKSxudWxsIT09dD8oOTM9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiXVwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIl1cIicpKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHlyLmhvc3RfdHlwZT1cIklQdjZcIixuLnN1YnN0cmluZyhfcixlKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBjZSgpe3ZhciBlLHQscixsLGksbyx1LGEsYyxoLGQscCxmLG0sZyxUO3JldHVybiBtPV9yLGc9X3IsZT1oZSgpLG51bGwhPT1lPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIjpcIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWw/KGk9aGUoKSxudWxsIT09aT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiOlwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bz8odT1oZSgpLG51bGwhPT11Pyg1OD09PW4uY2hhckNvZGVBdChfcik/KGE9XCI6XCIsX3IrKyk6KGE9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1hPyhjPWhlKCksbnVsbCE9PWM/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaD1cIjpcIixfcisrKTooaD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWg/KGQ9aGUoKSxudWxsIT09ZD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhwPVwiOlwiLF9yKyspOihwPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cD8oZj1kZSgpLG51bGwhPT1mP2U9W2UsdCxyLGwsaSxvLHUsYSxjLGgsZCxwLGZdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiOjpcIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09ZT8odD1oZSgpLG51bGwhPT10Pyg1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaT1cIjpcIixfcisrKTooaT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWk/KG89aGUoKSxudWxsIT09bz8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh1PVwiOlwiLF9yKyspOih1PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dT8oYT1oZSgpLG51bGwhPT1hPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGM9XCI6XCIsX3IrKyk6KGM9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1jPyhoPWhlKCksbnVsbCE9PWg/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oZD1cIjpcIixfcisrKTooZD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWQ/KHA9ZGUoKSxudWxsIT09cD9lPVtlLHQscixsLGksbyx1LGEsYyxoLGQscF06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCI6OlwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1lPyh0PWhlKCksbnVsbCE9PXQ/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhpPVwiOlwiLF9yKyspOihpPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aT8obz1oZSgpLG51bGwhPT1vPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHU9XCI6XCIsX3IrKyk6KHU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT11PyhhPWhlKCksbnVsbCE9PWE/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oYz1cIjpcIixfcisrKTooYz1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWM/KGg9ZGUoKSxudWxsIT09aD9lPVtlLHQscixsLGksbyx1LGEsYyxoXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIjo6XCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWU/KHQ9aGUoKSxudWxsIT09dD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGk9XCI6XCIsX3IrKyk6KGk9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1pPyhvPWhlKCksbnVsbCE9PW8/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odT1cIjpcIixfcisrKToodT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXU/KGE9ZGUoKSxudWxsIT09YT9lPVtlLHQscixsLGksbyx1LGFdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiOjpcIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09ZT8odD1oZSgpLG51bGwhPT10Pyg1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaT1cIjpcIixfcisrKTooaT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWk/KG89ZGUoKSxudWxsIT09bz9lPVtlLHQscixsLGksb106KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCI6OlwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1lPyh0PWhlKCksbnVsbCE9PXQ/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9ZGUoKSxudWxsIT09bD9lPVtlLHQscixsXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIjo6XCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWU/KHQ9ZGUoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiOjpcIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09ZT8odD1oZSgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsZT1oZSgpLG51bGwhPT1lPyhcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8odD1cIjo6XCIsX3IrPTIpOih0PW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiOlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bD8oaT1oZSgpLG51bGwhPT1pPyg1OD09PW4uY2hhckNvZGVBdChfcik/KG89XCI6XCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1vPyh1PWhlKCksbnVsbCE9PXU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oYT1cIjpcIixfcisrKTooYT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWE/KGM9aGUoKSxudWxsIT09Yz8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhoPVwiOlwiLF9yKyspOihoPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aD8oZD1kZSgpLG51bGwhPT1kP2U9W2UsdCxyLGwsaSxvLHUsYSxjLGgsZF06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsZT1oZSgpLG51bGwhPT1lPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9VCkpOih0PW51bGwsX3I9VCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhyPVwiOjpcIixfcis9Mik6KHI9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGk9XCI6XCIsX3IrKyk6KGk9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1pPyhvPWhlKCksbnVsbCE9PW8/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odT1cIjpcIixfcisrKToodT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXU/KGE9aGUoKSxudWxsIT09YT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhjPVwiOlwiLF9yKyspOihjPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09Yz8oaD1kZSgpLG51bGwhPT1oP2U9W2UsdCxyLGwsaSxvLHUsYSxjLGhdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLGU9aGUoKSxudWxsIT09ZT8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPVQpKToodD1udWxsLF9yPVQpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9VCkpOihyPW51bGwsX3I9VCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhsPVwiOjpcIixfcis9Mik6KGw9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09bD8oaT1oZSgpLG51bGwhPT1pPyg1OD09PW4uY2hhckNvZGVBdChfcik/KG89XCI6XCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1vPyh1PWhlKCksbnVsbCE9PXU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oYT1cIjpcIixfcisrKTooYT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWE/KGM9ZGUoKSxudWxsIT09Yz9lPVtlLHQscixsLGksbyx1LGEsY106KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsZT1oZSgpLG51bGwhPT1lPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9VCkpOih0PW51bGwsX3I9VCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1UKSk6KHI9bnVsbCxfcj1UKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KGw9XCI6XCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1sPyhpPWhlKCksbnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPVQpKToobD1udWxsLF9yPVQpLGw9bnVsbCE9PWw/bDpcIlwiLG51bGwhPT1sPyhcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oaT1cIjo6XCIsX3IrPTIpOihpPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWk/KG89aGUoKSxudWxsIT09bz8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh1PVwiOlwiLF9yKyspOih1PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dT8oYT1kZSgpLG51bGwhPT1hP2U9W2UsdCxyLGwsaSxvLHUsYV06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsZT1oZSgpLG51bGwhPT1lPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9VCkpOih0PW51bGwsX3I9VCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1UKSk6KHI9bnVsbCxfcj1UKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KGw9XCI6XCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1sPyhpPWhlKCksbnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPVQpKToobD1udWxsLF9yPVQpLGw9bnVsbCE9PWw/bDpcIlwiLG51bGwhPT1sPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaT1cIjpcIixfcisrKTooaT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWk/KG89aGUoKSxudWxsIT09bz9pPVtpLG9dOihpPW51bGwsX3I9VCkpOihpPW51bGwsX3I9VCksaT1udWxsIT09aT9pOlwiXCIsbnVsbCE9PWk/KFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhvPVwiOjpcIixfcis9Mik6KG89bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09bz8odT1kZSgpLG51bGwhPT11P2U9W2UsdCxyLGwsaSxvLHVdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLGU9aGUoKSxudWxsIT09ZT8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPVQpKToodD1udWxsLF9yPVQpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9VCkpOihyPW51bGwsX3I9VCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiOlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bD8oaT1oZSgpLG51bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj1UKSk6KGw9bnVsbCxfcj1UKSxsPW51bGwhPT1sP2w6XCJcIixudWxsIT09bD8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KGk9XCI6XCIsX3IrKyk6KGk9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1pPyhvPWhlKCksbnVsbCE9PW8/aT1baSxvXTooaT1udWxsLF9yPVQpKTooaT1udWxsLF9yPVQpLGk9bnVsbCE9PWk/aTpcIlwiLG51bGwhPT1pPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIjpcIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PW8/KHU9aGUoKSxudWxsIT09dT9vPVtvLHVdOihvPW51bGwsX3I9VCkpOihvPW51bGwsX3I9VCksbz1udWxsIT09bz9vOlwiXCIsbnVsbCE9PW8/KFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyh1PVwiOjpcIixfcis9Mik6KHU9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09dT8oYT1oZSgpLG51bGwhPT1hP2U9W2UsdCxyLGwsaSxvLHUsYV06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsZT1oZSgpLG51bGwhPT1lPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9VCkpOih0PW51bGwsX3I9VCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1UKSk6KHI9bnVsbCxfcj1UKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KGw9XCI6XCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1sPyhpPWhlKCksbnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPVQpKToobD1udWxsLF9yPVQpLGw9bnVsbCE9PWw/bDpcIlwiLG51bGwhPT1sPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaT1cIjpcIixfcisrKTooaT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWk/KG89aGUoKSxudWxsIT09bz9pPVtpLG9dOihpPW51bGwsX3I9VCkpOihpPW51bGwsX3I9VCksaT1udWxsIT09aT9pOlwiXCIsbnVsbCE9PWk/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiOlwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bz8odT1oZSgpLG51bGwhPT11P289W28sdV06KG89bnVsbCxfcj1UKSk6KG89bnVsbCxfcj1UKSxvPW51bGwhPT1vP286XCJcIixudWxsIT09bz8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHU9XCI6XCIsX3IrKyk6KHU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT11PyhhPWhlKCksbnVsbCE9PWE/dT1bdSxhXToodT1udWxsLF9yPVQpKToodT1udWxsLF9yPVQpLHU9bnVsbCE9PXU/dTpcIlwiLG51bGwhPT11PyhcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oYT1cIjo6XCIsX3IrPTIpOihhPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWE/ZT1bZSx0LHIsbCxpLG8sdSxhXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKSkpKSkpKSkpKSkpKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiB5ci5ob3N0X3R5cGU9XCJJUHY2XCIsbi5zdWJzdHJpbmcoX3IsZSl9KG0pKSxudWxsPT09ZSYmKF9yPW0pLGV9ZnVuY3Rpb24gaGUoKXt2YXIgZSx0LG4scixzO3JldHVybiBzPV9yLGU9dSgpLG51bGwhPT1lPyh0PXUoKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8obj11KCksbj1udWxsIT09bj9uOlwiXCIsbnVsbCE9PW4/KHI9dSgpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yP2U9W2UsdCxuLHJdOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cyksZX1mdW5jdGlvbiBkZSgpe3ZhciBlLHQscixsO3JldHVybiBsPV9yLGU9aGUoKSxudWxsIT09ZT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGw9PT1lJiYoZT1wZSgpKSxlfWZ1bmN0aW9uIHBlKCl7dmFyIGUsdCxyLGwsaSxvLHUsYSxjO3JldHVybiBhPV9yLGM9X3IsZT1mZSgpLG51bGwhPT1lPyg0Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIuXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT10PyhyPWZlKCksbnVsbCE9PXI/KDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIi5cIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PWw/KGk9ZmUoKSxudWxsIT09aT8oNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiLlwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09bz8odT1mZSgpLG51bGwhPT11P2U9W2UsdCxyLGwsaSxvLHVdOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YyksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiB5ci5ob3N0X3R5cGU9XCJJUHY0XCIsbi5zdWJzdHJpbmcoX3IsZSl9KGEpKSxudWxsPT09ZSYmKF9yPWEpLGV9ZnVuY3Rpb24gZmUoKXt2YXIgZSx0LHIsbDtyZXR1cm4gbD1fcixcIjI1XCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIjI1XCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIjI1XCInKSksbnVsbCE9PWU/KC9eWzAtNV0vLnRlc3Qobi5jaGFyQXQoX3IpKT8odD1uLmNoYXJBdChfciksX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoXCJbMC01XVwiKSksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGw9PT1lJiYobD1fciw1MD09PW4uY2hhckNvZGVBdChfcik/KGU9XCIyXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiMlwiJykpLG51bGwhPT1lPygvXlswLTRdLy50ZXN0KG4uY2hhckF0KF9yKSk/KHQ9bi5jaGFyQXQoX3IpLF9yKyspOih0PW51bGwsMD09PXZyJiZzKFwiWzAtNF1cIikpLG51bGwhPT10PyhyPWkoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsPT09ZSYmKGw9X3IsNDk9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiMVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjFcIicpKSxudWxsIT09ZT8odD1pKCksbnVsbCE9PXQ/KHI9aSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGw9PT1lJiYobD1fciwvXlsxLTldLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiWzEtOV1cIikpLG51bGwhPT1lPyh0PWkoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbD09PWUmJihlPWkoKSkpKSksZX1mdW5jdGlvbiBtZSgpe3ZhciBlLHQsbixyLHMsbCxvO3JldHVybiBsPV9yLG89X3IsZT1pKCksZT1udWxsIT09ZT9lOlwiXCIsbnVsbCE9PWU/KHQ9aSgpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhuPWkoKSxuPW51bGwhPT1uP246XCJcIixudWxsIT09bj8ocj1pKCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KHM9aSgpLHM9bnVsbCE9PXM/czpcIlwiLG51bGwhPT1zP2U9W2UsdCxuLHIsc106KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD1wYXJzZUludCh0LmpvaW4oXCJcIikpLHlyLnBvcnQ9dCx0fShsLGUpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gZ2UoKXt2YXIgZSx0LHIsbDtmb3IoZT1bXSxsPV9yLDU5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjtcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbCE9PXQ/KHI9VGUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bCkpOih0PW51bGwsX3I9bCk7bnVsbCE9PXQ7KWUucHVzaCh0KSxsPV9yLDU5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjtcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbCE9PXQ/KHI9VGUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bCkpOih0PW51bGwsX3I9bCk7cmV0dXJuIGV9ZnVuY3Rpb24gVGUoKXt2YXIgZTtyZXR1cm4gZT1fZSgpLG51bGw9PT1lJiYoZT12ZSgpLG51bGw9PT1lJiYoZT1DZSgpLG51bGw9PT1lJiYoZT1TZSgpLG51bGw9PT1lJiYoZT1FZSgpLG51bGw9PT1lJiYoZT1BZSgpLG51bGw9PT1lJiYoZT15ZSgpKSkpKSkpLGV9ZnVuY3Rpb24gX2UoKXt2YXIgZSx0LHIsbDtyZXR1cm4gcj1fcixsPV9yLFwidHJhbnNwb3J0PVwiPT09bi5zdWJzdHIoX3IsMTApLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMTApLF9yKz0xMCk6KGU9bnVsbCwwPT09dnImJnMoJ1widHJhbnNwb3J0PVwiJykpLG51bGwhPT1lPyhcInVkcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8odD1uLnN1YnN0cihfciwzKSxfcis9Myk6KHQ9bnVsbCwwPT09dnImJnMoJ1widWRwXCInKSksbnVsbD09PXQmJihcInRjcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8odD1uLnN1YnN0cihfciwzKSxfcis9Myk6KHQ9bnVsbCwwPT09dnImJnMoJ1widGNwXCInKSksbnVsbD09PXQmJihcInNjdHBcIj09PW4uc3Vic3RyKF9yLDQpLnRvTG93ZXJDYXNlKCk/KHQ9bi5zdWJzdHIoX3IsNCksX3IrPTQpOih0PW51bGwsMD09PXZyJiZzKCdcInNjdHBcIicpKSxudWxsPT09dCYmKFwidGxzXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyh0PW4uc3Vic3RyKF9yLDMpLF9yKz0zKToodD1udWxsLDA9PT12ciYmcygnXCJ0bHNcIicpKSxudWxsPT09dCYmKHQ9SSgpKSkpKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudXJpX3BhcmFtc3x8KHlyLnVyaV9wYXJhbXM9e30pLHlyLnVyaV9wYXJhbXMudHJhbnNwb3J0PXQudG9Mb3dlckNhc2UoKX0ocixlWzFdKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIHZlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIHI9X3IsbD1fcixcInVzZXI9XCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJ1c2VyPVwiJykpLG51bGwhPT1lPyhcInBob25lXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyh0PW4uc3Vic3RyKF9yLDUpLF9yKz01KToodD1udWxsLDA9PT12ciYmcygnXCJwaG9uZVwiJykpLG51bGw9PT10JiYoXCJpcFwiPT09bi5zdWJzdHIoX3IsMikudG9Mb3dlckNhc2UoKT8odD1uLnN1YnN0cihfciwyKSxfcis9Mik6KHQ9bnVsbCwwPT09dnImJnMoJ1wiaXBcIicpKSxudWxsPT09dCYmKHQ9SSgpKSksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnVyaV9wYXJhbXN8fCh5ci51cmlfcGFyYW1zPXt9KSx5ci51cmlfcGFyYW1zLnVzZXI9dC50b0xvd2VyQ2FzZSgpfShyLGVbMV0pKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gQ2UoKXt2YXIgZSx0LHIsbDtyZXR1cm4gcj1fcixsPV9yLFwibWV0aG9kPVwiPT09bi5zdWJzdHIoX3IsNykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw3KSxfcis9Nyk6KGU9bnVsbCwwPT09dnImJnMoJ1wibWV0aG9kPVwiJykpLG51bGwhPT1lPyh0PWF0KCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnVyaV9wYXJhbXN8fCh5ci51cmlfcGFyYW1zPXt9KSx5ci51cmlfcGFyYW1zLm1ldGhvZD10fShyLGVbMV0pKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gU2UoKXt2YXIgZSx0LHIsbDtyZXR1cm4gcj1fcixsPV9yLFwidHRsPVwiPT09bi5zdWJzdHIoX3IsNCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw0KSxfcis9NCk6KGU9bnVsbCwwPT09dnImJnMoJ1widHRsPVwiJykpLG51bGwhPT1lPyh0PUpuKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnBhcmFtc3x8KHlyLnBhcmFtcz17fSkseXIucGFyYW1zLnR0bD10fShyLGVbMV0pKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gRWUoKXt2YXIgZSx0LHIsbDtyZXR1cm4gcj1fcixsPV9yLFwibWFkZHI9XCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJtYWRkcj1cIicpKSxudWxsIT09ZT8odD1sZSgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci51cmlfcGFyYW1zfHwoeXIudXJpX3BhcmFtcz17fSkseXIudXJpX3BhcmFtcy5tYWRkcj10fShyLGVbMV0pKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gQWUoKXt2YXIgZSx0LHIsbCxpLG87cmV0dXJuIGw9X3IsaT1fcixcImxyXCI9PT1uLnN1YnN0cihfciwyKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDIpLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCJsclwiJykpLG51bGwhPT1lPyhvPV9yLDYxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbCE9PXQ/KHI9SSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1vKSk6KHQ9bnVsbCxfcj1vKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLnVyaV9wYXJhbXN8fCh5ci51cmlfcGFyYW1zPXt9KSx5ci51cmlfcGFyYW1zLmxyPXZvaWQgMH0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiB5ZSgpe3ZhciBlLHQscixsLGksbztyZXR1cm4gbD1fcixpPV9yLGU9UmUoKSxudWxsIT09ZT8obz1fciw2MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGwhPT10PyhyPWJlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPW8pKToodD1udWxsLF9yPW8pLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0LG4pe3lyLnVyaV9wYXJhbXN8fCh5ci51cmlfcGFyYW1zPXt9KSxuPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBuP3ZvaWQgMDpuWzFdLHlyLnVyaV9wYXJhbXNbdC50b0xvd2VyQ2FzZSgpXT1ufShsLGVbMF0sZVsxXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBSZSgpe3ZhciBlLHQsbjtpZihuPV9yLHQ9SWUoKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9SWUoKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuam9pbihcIlwiKX0obixlKSksbnVsbD09PWUmJihfcj1uKSxlfWZ1bmN0aW9uIGJlKCl7dmFyIGUsdCxuO2lmKG49X3IsdD1JZSgpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1JZSgpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5qb2luKFwiXCIpfShuLGUpKSxudWxsPT09ZSYmKF9yPW4pLGV9ZnVuY3Rpb24gSWUoKXt2YXIgZTtyZXR1cm4gZT13ZSgpLG51bGw9PT1lJiYoZT1nKCksbnVsbD09PWUmJihlPV8oKSkpLGV9ZnVuY3Rpb24gd2UoKXt2YXIgZTtyZXR1cm4gOTE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiW1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIltcIicpKSxudWxsPT09ZSYmKDkzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIl1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJdXCInKSksbnVsbD09PWUmJig0Nz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIvXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGw9PT1lJiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiOlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09ZSYmKDM4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiZcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PWUmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIrXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT1lJiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSkpKSkpKSxlfWZ1bmN0aW9uIE5lKCl7dmFyIGUsdCxyLGwsaSxvLHU7aWYobz1fciw2Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCI/XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGwhPT1lKWlmKHQ9RGUoKSxudWxsIT09dCl7Zm9yKHI9W10sdT1fciwzOD09PW4uY2hhckNvZGVBdChfcik/KGw9XCImXCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGwhPT1sPyhpPURlKCksbnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPXUpKToobD1udWxsLF9yPXUpO251bGwhPT1sOylyLnB1c2gobCksdT1fciwzOD09PW4uY2hhckNvZGVBdChfcik/KGw9XCImXCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGwhPT1sPyhpPURlKCksbnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPXUpKToobD1udWxsLF9yPXUpO251bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPW8pfWVsc2UgZT1udWxsLF9yPW87ZWxzZSBlPW51bGwsX3I9bztyZXR1cm4gZX1mdW5jdGlvbiBEZSgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPU9lKCksbnVsbCE9PWU/KDYxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbCE9PXQ/KHI9eGUoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0LG4pe3Q9dC5qb2luKFwiXCIpLnRvTG93ZXJDYXNlKCksbj1uLmpvaW4oXCJcIikseXIudXJpX2hlYWRlcnN8fCh5ci51cmlfaGVhZGVycz17fSkseXIudXJpX2hlYWRlcnNbdF0/eXIudXJpX2hlYWRlcnNbdF0ucHVzaChuKTp5ci51cmlfaGVhZGVyc1t0XT1bbl19KGwsZVswXSxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIE9lKCl7dmFyIGUsdDtpZih0PVVlKCksbnVsbD09PXQmJih0PWcoKSxudWxsPT09dCYmKHQ9XygpKSksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PVVlKCksbnVsbD09PXQmJih0PWcoKSxudWxsPT09dCYmKHQ9XygpKSk7ZWxzZSBlPW51bGw7cmV0dXJuIGV9ZnVuY3Rpb24geGUoKXt2YXIgZSx0O2ZvcihlPVtdLHQ9VWUoKSxudWxsPT09dCYmKHQ9ZygpLG51bGw9PT10JiYodD1fKCkpKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9VWUoKSxudWxsPT09dCYmKHQ9ZygpLG51bGw9PT10JiYodD1fKCkpKTtyZXR1cm4gZX1mdW5jdGlvbiBVZSgpe3ZhciBlO3JldHVybiA5MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCJbXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiW1wiJykpLG51bGw9PT1lJiYoOTM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiXVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIl1cIicpKSxudWxsPT09ZSYmKDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIi9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbD09PWUmJig2Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCI/XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGw9PT1lJiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiOlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09ZSYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIitcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PWUmJigzNj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIkXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpKSkpKSkpLGV9ZnVuY3Rpb24gTWUoKXt2YXIgZTtyZXR1cm4gZT1jdCgpLG51bGw9PT1lJiYoZT1QZSgpKSxlfWZ1bmN0aW9uIFBlKCl7dmFyIGUsdCxuLHIscyxsO3JldHVybiBsPV9yLGU9YXQoKSxudWxsIT09ZT8odD1kKCksbnVsbCE9PXQ/KG49cWUoKSxudWxsIT09bj8ocj1kKCksbnVsbCE9PXI/KHM9WmUoKSxudWxsIT09cz9lPVtlLHQsbixyLHNdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBxZSgpe3ZhciBlO3JldHVybiBlPSQoKSxudWxsPT09ZSYmKGU9TGUoKSksZX1mdW5jdGlvbiBMZSgpe3ZhciBlLHQscixsO3JldHVybiBsPV9yLGU9SmUoKSxudWxsIT09ZT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1rZSgpLG51bGw9PT1yJiYocj1HZSgpKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIGtlKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixlPUhlKCksbnVsbD09PWUmJihlPUZlKCkpLG51bGwhPT1lPyhpPV9yLDYzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbCE9PXQ/KHI9UWUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9aSkpOih0PW51bGwsX3I9aSksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gSGUoKXt2YXIgZSx0LHIsbDtyZXR1cm4gbD1fcixcIi8vXCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIi8vXCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIi8vXCInKSksbnVsbCE9PWU/KHQ9S2UoKSxudWxsIT09dD8ocj1GZSgpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gRmUoKXt2YXIgZSx0LHI7cmV0dXJuIHI9X3IsNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiL1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsIT09ZT8odD1CZSgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIEdlKCl7dmFyIGUsdCxuLHI7aWYocj1fcixlPVdlKCksbnVsbCE9PWUpe2Zvcih0PVtdLG49amUoKTtudWxsIT09bjspdC5wdXNoKG4pLG49amUoKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cil9ZWxzZSBlPW51bGwsX3I9cjtyZXR1cm4gZX1mdW5jdGlvbiBqZSgpe3ZhciBlO3JldHVybiBlPW0oKSxudWxsPT09ZSYmKGU9ZygpLG51bGw9PT1lJiYoZT1fKCkpKSxlfWZ1bmN0aW9uIFdlKCl7dmFyIGU7cmV0dXJuIGU9ZygpLG51bGw9PT1lJiYoZT1fKCksbnVsbD09PWUmJig1OT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI7XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGw9PT1lJiYoNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiP1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsPT09ZSYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjpcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PWUmJig2ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCJAXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGw9PT1lJiYoMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09ZSYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PWUmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIrXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT1lJiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSxudWxsPT09ZSYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIixcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIsXCInKSkpKSkpKSkpKSkpLGV9ZnVuY3Rpb24gQmUoKXt2YXIgZSx0LHIsbCxpLG87aWYoaT1fcixlPXplKCksbnVsbCE9PWUpe2Zvcih0PVtdLG89X3IsNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiL1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsIT09cj8obD16ZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09cjspdC5wdXNoKHIpLG89X3IsNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiL1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsIT09cj8obD16ZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gZX1mdW5jdGlvbiB6ZSgpe3ZhciBlLHQscixsLGksbztmb3IoaT1fcixlPVtdLHQ9WWUoKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9WWUoKTtpZihudWxsIT09ZSl7Zm9yKHQ9W10sbz1fciw1OT09PW4uY2hhckNvZGVBdChfcik/KHI9XCI7XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGwhPT1yPyhsPVZlKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT1yOyl0LnB1c2gociksbz1fciw1OT09PW4uY2hhckNvZGVBdChfcik/KHI9XCI7XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGwhPT1yPyhsPVZlKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO3JldHVybiBlfWZ1bmN0aW9uIFZlKCl7dmFyIGUsdDtmb3IoZT1bXSx0PVllKCk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PVllKCk7cmV0dXJuIGV9ZnVuY3Rpb24gWWUoKXt2YXIgZTtyZXR1cm4gZT1nKCksbnVsbD09PWUmJihlPV8oKSxudWxsPT09ZSYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjpcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PWUmJig2ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCJAXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGw9PT1lJiYoMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09ZSYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PWUmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIrXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT1lJiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSxudWxsPT09ZSYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIixcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIsXCInKSkpKSkpKSkpKSxlfWZ1bmN0aW9uIEplKCl7dmFyIGUsdCxyLGwsdTtpZihsPV9yLHU9X3IsZT1vKCksbnVsbCE9PWUpe2Zvcih0PVtdLHI9bygpLG51bGw9PT1yJiYocj1pKCksbnVsbD09PXImJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHI9XCIrXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT1yJiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLVwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09ciYmKDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi5cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIuXCInKSkpKSkpO251bGwhPT1yOyl0LnB1c2gocikscj1vKCksbnVsbD09PXImJihyPWkoKSxudWxsPT09ciYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIitcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXImJig0NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCItXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT1yJiYoNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSkpKSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXUpfWVsc2UgZT1udWxsLF9yPXU7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci5zY2hlbWU9bi5zdWJzdHJpbmcoX3IsZSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gS2UoKXt2YXIgZTtyZXR1cm4gZT0kZSgpLG51bGw9PT1lJiYoZT1YZSgpKSxlfWZ1bmN0aW9uICRlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIHI9X3IsbD1fcixlPWVlKCksbnVsbCE9PWU/KDY0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIkBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGU9bnVsbCE9PWU/ZTpcIlwiLG51bGwhPT1lPyh0PXNlKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGU9bnVsbCE9PWU/ZTpcIlwifWZ1bmN0aW9uIFhlKCl7dmFyIGUsdDtpZih0PWcoKSxudWxsPT09dCYmKHQ9XygpLG51bGw9PT10JiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSxudWxsPT09dCYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIixcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIsXCInKSksbnVsbD09PXQmJig1OT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI7XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGw9PT10JiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09dCYmKDY0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIkBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbD09PXQmJigzOD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCImXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT10JiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSkpKSkpKSkpKSksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWcoKSxudWxsPT09dCYmKHQ9XygpLG51bGw9PT10JiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSxudWxsPT09dCYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIixcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIsXCInKSksbnVsbD09PXQmJig1OT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI7XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGw9PT10JiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09dCYmKDY0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIkBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbD09PXQmJigzOD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCImXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT10JiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSkpKSkpKSkpKSk7ZWxzZSBlPW51bGw7cmV0dXJuIGV9ZnVuY3Rpb24gUWUoKXt2YXIgZSx0O2ZvcihlPVtdLHQ9amUoKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9amUoKTtyZXR1cm4gZX1mdW5jdGlvbiBaZSgpe3ZhciBlLHQscixsLG8sdSxhLGM7aWYoYT1fcixjPV9yLFwic2lwXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJTSVBcIicpKSxudWxsIT09ZSlpZig0Nz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIvXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGwhPT10KXtpZihsPWkoKSxudWxsIT09bClmb3Iocj1bXTtudWxsIT09bDspci5wdXNoKGwpLGw9aSgpO2Vsc2Ugcj1udWxsO2lmKG51bGwhPT1yKWlmKDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIi5cIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PWwpe2lmKHU9aSgpLG51bGwhPT11KWZvcihvPVtdO251bGwhPT11OylvLnB1c2godSksdT1pKCk7ZWxzZSBvPW51bGw7bnVsbCE9PW8/ZT1bZSx0LHIsbCxvXTooZT1udWxsLF9yPWMpfWVsc2UgZT1udWxsLF9yPWM7ZWxzZSBlPW51bGwsX3I9Y31lbHNlIGU9bnVsbCxfcj1jO2Vsc2UgZT1udWxsLF9yPWM7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci5zaXBfdmVyc2lvbj1uLnN1YnN0cmluZyhfcixlKX0oYSkpLG51bGw9PT1lJiYoX3I9YSksZX1mdW5jdGlvbiBldCgpe3ZhciBlO3JldHVyblwiSU5WSVRFXCI9PT1uLnN1YnN0cihfciw2KT8oZT1cIklOVklURVwiLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJJTlZJVEVcIicpKSxlfWZ1bmN0aW9uIHR0KCl7dmFyIGU7cmV0dXJuXCJBQ0tcIj09PW4uc3Vic3RyKF9yLDMpPyhlPVwiQUNLXCIsX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcIkFDS1wiJykpLGV9ZnVuY3Rpb24gbnQoKXt2YXIgZTtyZXR1cm5cIk9QVElPTlNcIj09PW4uc3Vic3RyKF9yLDcpPyhlPVwiT1BUSU9OU1wiLF9yKz03KTooZT1udWxsLDA9PT12ciYmcygnXCJPUFRJT05TXCInKSksZX1mdW5jdGlvbiBydCgpe3ZhciBlO3JldHVyblwiQllFXCI9PT1uLnN1YnN0cihfciwzKT8oZT1cIkJZRVwiLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJCWUVcIicpKSxlfWZ1bmN0aW9uIHN0KCl7dmFyIGU7cmV0dXJuXCJDQU5DRUxcIj09PW4uc3Vic3RyKF9yLDYpPyhlPVwiQ0FOQ0VMXCIsX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcIkNBTkNFTFwiJykpLGV9ZnVuY3Rpb24gbHQoKXt2YXIgZTtyZXR1cm5cIlJFR0lTVEVSXCI9PT1uLnN1YnN0cihfciw4KT8oZT1cIlJFR0lTVEVSXCIsX3IrPTgpOihlPW51bGwsMD09PXZyJiZzKCdcIlJFR0lTVEVSXCInKSksZX1mdW5jdGlvbiBpdCgpe3ZhciBlO3JldHVyblwiU1VCU0NSSUJFXCI9PT1uLnN1YnN0cihfciw5KT8oZT1cIlNVQlNDUklCRVwiLF9yKz05KTooZT1udWxsLDA9PT12ciYmcygnXCJTVUJTQ1JJQkVcIicpKSxlfWZ1bmN0aW9uIG90KCl7dmFyIGU7cmV0dXJuXCJOT1RJRllcIj09PW4uc3Vic3RyKF9yLDYpPyhlPVwiTk9USUZZXCIsX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcIk5PVElGWVwiJykpLGV9ZnVuY3Rpb24gdXQoKXt2YXIgZTtyZXR1cm5cIlJFRkVSXCI9PT1uLnN1YnN0cihfciw1KT8oZT1cIlJFRkVSXCIsX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcIlJFRkVSXCInKSksZX1mdW5jdGlvbiBhdCgpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1ldCgpLG51bGw9PT1lJiYoZT10dCgpLG51bGw9PT1lJiYoZT1udCgpLG51bGw9PT1lJiYoZT1ydCgpLG51bGw9PT1lJiYoZT1zdCgpLG51bGw9PT1lJiYoZT1sdCgpLG51bGw9PT1lJiYoZT1pdCgpLG51bGw9PT1lJiYoZT1vdCgpLG51bGw9PT1lJiYoZT11dCgpLG51bGw9PT1lJiYoZT1JKCkpKSkpKSkpKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiB5ci5tZXRob2Q9bi5zdWJzdHJpbmcoX3IsZSkseXIubWV0aG9kfSh0KSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIGN0KCl7dmFyIGUsdCxuLHIscyxsO3JldHVybiBsPV9yLGU9WmUoKSxudWxsIT09ZT8odD1kKCksbnVsbCE9PXQ/KG49aHQoKSxudWxsIT09bj8ocj1kKCksbnVsbCE9PXI/KHM9cHQoKSxudWxsIT09cz9lPVtlLHQsbixyLHNdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBodCgpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1kdCgpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnN0YXR1c19jb2RlPXBhcnNlSW50KHQuam9pbihcIlwiKSl9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBkdCgpe3ZhciBlLHQsbixyO3JldHVybiByPV9yLGU9aSgpLG51bGwhPT1lPyh0PWkoKSxudWxsIT09dD8obj1pKCksbnVsbCE9PW4/ZT1bZSx0LG5dOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBwdCgpe3ZhciBlLHQscjtmb3Iocj1fcixlPVtdLHQ9bSgpLG51bGw9PT10JiYodD1nKCksbnVsbD09PXQmJih0PV8oKSxudWxsPT09dCYmKHQ9eSgpLG51bGw9PT10JiYodD1SKCksbnVsbD09PXQmJih0PWQoKSxudWxsPT09dCYmKHQ9cCgpKSkpKSkpO251bGwhPT10OyllLnB1c2godCksdD1tKCksbnVsbD09PXQmJih0PWcoKSxudWxsPT09dCYmKHQ9XygpLG51bGw9PT10JiYodD15KCksbnVsbD09PXQmJih0PVIoKSxudWxsPT09dCYmKHQ9ZCgpLG51bGw9PT10JiYodD1wKCkpKSkpKSk7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci5yZWFzb25fcGhyYXNlPW4uc3Vic3RyaW5nKF9yLGUpfShyKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIGZ0KCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1ZdCgpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49aygpLG51bGwhPT1uPyhyPVl0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPWsoKSxudWxsIT09bj8ocj1ZdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiBtdCgpe3ZhciBlLHQscixsLGksbztyZXR1cm4gbD1fcixpPV9yLGU9RCgpLG51bGwhPT1lPyhvPV9yLDY0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIkBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbCE9PXQ/KHI9RCgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1vKSk6KHQ9bnVsbCxfcj1vKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyPW4uc3Vic3RyaW5nKF9yLGUpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIGd0KCl7dmFyIGUsdCxuLHIscyxsLGk7aWYocz1fcixlPU8oKSxudWxsPT09ZSlpZihsPV9yLGU9VHQoKSxudWxsIT09ZSl7Zm9yKHQ9W10saT1fcixuPWsoKSxudWxsIT09bj8ocj1UdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09bjspdC5wdXNoKG4pLGk9X3Isbj1rKCksbnVsbCE9PW4/KHI9VHQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLFxuX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKG49eXIubXVsdGlfaGVhZGVyLmxlbmd0aCx0PTA7bj50O3QrKylpZihudWxsPT09eXIubXVsdGlfaGVhZGVyW3RdLnBhcnNlZCl7eXI9bnVsbDticmVha315cj1udWxsIT09eXI/eXIubXVsdGlfaGVhZGVyOi0xfShzKSksbnVsbD09PWUmJihfcj1zKSxlfWZ1bmN0aW9uIFR0KCl7dmFyIGUsdCxuLHIscyxsLGk7aWYocz1fcixsPV9yLGU9SygpLG51bGw9PT1lJiYoZT1fdCgpKSxudWxsIT09ZSl7Zm9yKHQ9W10saT1fcixuPUgoKSxudWxsIT09bj8ocj1DdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09bjspdC5wdXNoKG4pLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9Q3QoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt2YXIgdDt5ci5tdWx0aV9oZWFkZXJ8fCh5ci5tdWx0aV9oZWFkZXI9W10pO3RyeXt0PW5ldyBBcih5ci51cmkseXIuZGlzcGxheV9uYW1lLHlyLnBhcmFtcyksZGVsZXRlIHlyLnVyaSxkZWxldGUgeXIuZGlzcGxheV9uYW1lLGRlbGV0ZSB5ci5wYXJhbXN9Y2F0Y2gobil7dD1udWxsfXlyLm11bHRpX2hlYWRlci5wdXNoKHtwb3NzaXRpb246X3Isb2Zmc2V0OmUscGFyc2VkOnR9KX0ocykpLG51bGw9PT1lJiYoX3I9cyksZX1mdW5jdGlvbiBfdCgpe3ZhciBlLHQsbixyLHM7cmV0dXJuIHM9X3IsZT12dCgpLGU9bnVsbCE9PWU/ZTpcIlwiLG51bGwhPT1lPyh0PUwoKSxudWxsIT09dD8obj0kKCksbnVsbCE9PW4/KHI9cSgpLG51bGwhPT1yP2U9W2UsdCxuLHJdOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cyksZX1mdW5jdGlvbiB2dCgpe3ZhciBlLHQscixzLGwsaSxvO2lmKGw9X3IsaT1fcixlPUkoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbz1fcixyPXYoKSxudWxsIT09cj8ocz1JKCksbnVsbCE9PXM/cj1bcixzXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT1yOyl0LnB1c2gociksbz1fcixyPXYoKSxudWxsIT09cj8ocz1JKCksbnVsbCE9PXM/cj1bcixzXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO3JldHVybiBudWxsPT09ZSYmKGU9eigpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt0PW4uc3Vic3RyaW5nKF9yLGUpLnRyaW0oKSwnXCInPT09dFswXSYmKHQ9dC5zdWJzdHJpbmcoMSx0Lmxlbmd0aC0xKSkseXIuZGlzcGxheV9uYW1lPXR9KGwsZSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBDdCgpe3ZhciBlO3JldHVybiBlPVN0KCksbnVsbD09PWUmJihlPUV0KCksbnVsbD09PWUmJihlPVJ0KCkpKSxlfWZ1bmN0aW9uIFN0KCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwicVwiPT09bi5zdWJzdHIoX3IsMSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwxKSxfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJxXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPXl0KCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucGFyYW1zfHwoeXIucGFyYW1zPXt9KSx5ci5wYXJhbXMucT10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gRXQoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJleHBpcmVzXCI9PT1uLnN1YnN0cihfciw3KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDcpLF9yKz03KTooZT1udWxsLDA9PT12ciYmcygnXCJleHBpcmVzXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPUF0KCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucGFyYW1zfHwoeXIucGFyYW1zPXt9KSx5ci5wYXJhbXMuZXhwaXJlcz10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gQXQoKXt2YXIgZSx0LG47aWYobj1fcix0PWkoKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9aSgpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcGFyc2VJbnQodC5qb2luKFwiXCIpKX0obixlKSksbnVsbD09PWUmJihfcj1uKSxlfWZ1bmN0aW9uIHl0KCl7dmFyIGUsdCxyLGwsbyx1LGEsYztyZXR1cm4gdT1fcixhPV9yLDQ4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjBcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIwXCInKSksbnVsbCE9PWU/KGM9X3IsNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09dD8ocj1pKCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KGw9aSgpLGw9bnVsbCE9PWw/bDpcIlwiLG51bGwhPT1sPyhvPWkoKSxvPW51bGwhPT1vP286XCJcIixudWxsIT09bz90PVt0LHIsbCxvXToodD1udWxsLF9yPWMpKToodD1udWxsLF9yPWMpKToodD1udWxsLF9yPWMpKToodD1udWxsLF9yPWMpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1hKSk6KGU9bnVsbCxfcj1hKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlRmxvYXQobi5zdWJzdHJpbmcoX3IsZSkpfSh1KSksbnVsbD09PWUmJihfcj11KSxlfWZ1bmN0aW9uIFJ0KCl7dmFyIGUsdCxuLHIscyxsO3JldHVybiByPV9yLHM9X3IsZT1JKCksbnVsbCE9PWU/KGw9X3IsdD1VKCksbnVsbCE9PXQ/KG49YnQoKSxudWxsIT09bj90PVt0LG5dOih0PW51bGwsX3I9bCkpOih0PW51bGwsX3I9bCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQsbil7eXIucGFyYW1zfHwoeXIucGFyYW1zPXt9KSxuPVwidW5kZWZpbmVkXCI9PXR5cGVvZiBuP3ZvaWQgMDpuWzFdLHlyLnBhcmFtc1t0LnRvTG93ZXJDYXNlKCldPW59KHIsZVswXSxlWzFdKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIGJ0KCl7dmFyIGU7cmV0dXJuIGU9SSgpLG51bGw9PT1lJiYoZT1sZSgpLG51bGw9PT1lJiYoZT16KCkpKSxlfWZ1bmN0aW9uIEl0KCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT13dCgpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPU50KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPUgoKSxudWxsIT09bj8ocj1OdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiB3dCgpe3ZhciBlO3JldHVyblwicmVuZGVyXCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJyZW5kZXJcIicpKSxudWxsPT09ZSYmKFwic2Vzc2lvblwiPT09bi5zdWJzdHIoX3IsNykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw3KSxfcis9Nyk6KGU9bnVsbCwwPT09dnImJnMoJ1wic2Vzc2lvblwiJykpLG51bGw9PT1lJiYoXCJpY29uXCI9PT1uLnN1YnN0cihfciw0KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDQpLF9yKz00KTooZT1udWxsLDA9PT12ciYmcygnXCJpY29uXCInKSksbnVsbD09PWUmJihcImFsZXJ0XCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJhbGVydFwiJykpLG51bGw9PT1lJiYoZT1JKCkpKSkpLGV9ZnVuY3Rpb24gTnQoKXt2YXIgZTtyZXR1cm4gZT1EdCgpLG51bGw9PT1lJiYoZT1SdCgpKSxlfWZ1bmN0aW9uIER0KCl7dmFyIGUsdCxyLGw7cmV0dXJuIGw9X3IsXCJoYW5kbGluZ1wiPT09bi5zdWJzdHIoX3IsOCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw4KSxfcis9OCk6KGU9bnVsbCwwPT09dnImJnMoJ1wiaGFuZGxpbmdcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KFwib3B0aW9uYWxcIj09PW4uc3Vic3RyKF9yLDgpLnRvTG93ZXJDYXNlKCk/KHI9bi5zdWJzdHIoX3IsOCksX3IrPTgpOihyPW51bGwsMD09PXZyJiZzKCdcIm9wdGlvbmFsXCInKSksbnVsbD09PXImJihcInJlcXVpcmVkXCI9PT1uLnN1YnN0cihfciw4KS50b0xvd2VyQ2FzZSgpPyhyPW4uc3Vic3RyKF9yLDgpLF9yKz04KToocj1udWxsLDA9PT12ciYmcygnXCJyZXF1aXJlZFwiJykpLG51bGw9PT1yJiYocj1JKCkpKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIE90KCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1JKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9SSgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9SSgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiB4dCgpe3ZhciBlLHQsbjtpZihuPV9yLHQ9aSgpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1pKCk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyPXBhcnNlSW50KHQuam9pbihcIlwiKSl9KG4sZSkpLG51bGw9PT1lJiYoX3I9biksZX1mdW5jdGlvbiBVdCgpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1NdCgpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5cj1uLnN1YnN0cmluZyhfcixlKX0odCkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBNdCgpe3ZhciBlLHQsbixyLHMsbCxpLG87aWYoaT1fcixlPVB0KCksbnVsbCE9PWUpaWYodD14KCksbnVsbCE9PXQpaWYobj1GdCgpLG51bGwhPT1uKXtmb3Iocj1bXSxvPV9yLHM9SCgpLG51bGwhPT1zPyhsPUd0KCksbnVsbCE9PWw/cz1bcyxsXToocz1udWxsLF9yPW8pKToocz1udWxsLF9yPW8pO251bGwhPT1zOylyLnB1c2gocyksbz1fcixzPUgoKSxudWxsIT09cz8obD1HdCgpLG51bGwhPT1sP3M9W3MsbF06KHM9bnVsbCxfcj1vKSk6KHM9bnVsbCxfcj1vKTtudWxsIT09cj9lPVtlLHQsbixyXTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7ZWxzZSBlPW51bGwsX3I9aTtlbHNlIGU9bnVsbCxfcj1pO3JldHVybiBlfWZ1bmN0aW9uIFB0KCl7dmFyIGU7cmV0dXJuIGU9cXQoKSxudWxsPT09ZSYmKGU9THQoKSksZX1mdW5jdGlvbiBxdCgpe3ZhciBlO3JldHVyblwidGV4dFwiPT09bi5zdWJzdHIoX3IsNCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw0KSxfcis9NCk6KGU9bnVsbCwwPT09dnImJnMoJ1widGV4dFwiJykpLG51bGw9PT1lJiYoXCJpbWFnZVwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiaW1hZ2VcIicpKSxudWxsPT09ZSYmKFwiYXVkaW9cIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcImF1ZGlvXCInKSksbnVsbD09PWUmJihcInZpZGVvXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJ2aWRlb1wiJykpLG51bGw9PT1lJiYoXCJhcHBsaWNhdGlvblwiPT09bi5zdWJzdHIoX3IsMTEpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMTEpLF9yKz0xMSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiYXBwbGljYXRpb25cIicpKSxudWxsPT09ZSYmKGU9a3QoKSkpKSkpLGV9ZnVuY3Rpb24gTHQoKXt2YXIgZTtyZXR1cm5cIm1lc3NhZ2VcIj09PW4uc3Vic3RyKF9yLDcpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNyksX3IrPTcpOihlPW51bGwsMD09PXZyJiZzKCdcIm1lc3NhZ2VcIicpKSxudWxsPT09ZSYmKFwibXVsdGlwYXJ0XCI9PT1uLnN1YnN0cihfciw5KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDkpLF9yKz05KTooZT1udWxsLDA9PT12ciYmcygnXCJtdWx0aXBhcnRcIicpKSxudWxsPT09ZSYmKGU9a3QoKSkpLGV9ZnVuY3Rpb24ga3QoKXt2YXIgZTtyZXR1cm4gZT1JKCksbnVsbD09PWUmJihlPUh0KCkpLGV9ZnVuY3Rpb24gSHQoKXt2YXIgZSx0LHI7cmV0dXJuIHI9X3IsXCJ4LVwiPT09bi5zdWJzdHIoX3IsMikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwyKSxfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wieC1cIicpKSxudWxsIT09ZT8odD1JKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gRnQoKXt2YXIgZTtyZXR1cm4gZT1rdCgpLG51bGw9PT1lJiYoZT1JKCkpLGV9ZnVuY3Rpb24gR3QoKXt2YXIgZSx0LG4scjtyZXR1cm4gcj1fcixlPUkoKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KG49anQoKSxudWxsIT09bj9lPVtlLHQsbl06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIGp0KCl7dmFyIGU7cmV0dXJuIGU9SSgpLG51bGw9PT1lJiYoZT16KCkpLGV9ZnVuY3Rpb24gV3QoKXt2YXIgZSx0LG4scjtyZXR1cm4gcj1fcixlPUJ0KCksbnVsbCE9PWU/KHQ9digpLG51bGwhPT10PyhuPWF0KCksbnVsbCE9PW4/ZT1bZSx0LG5dOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBCdCgpe3ZhciBlLHQsbjtpZihuPV9yLHQ9aSgpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1pKCk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnZhbHVlPXBhcnNlSW50KHQuam9pbihcIlwiKSl9KG4sZSkpLG51bGw9PT1lJiYoX3I9biksZX1mdW5jdGlvbiB6dCgpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1BdCgpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyPXR9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBWdCgpe3ZhciBlLHQsbixyLHMsbCxpO2lmKHM9X3IsbD1fcixlPVl0KCksbnVsbCE9PWUpe2Zvcih0PVtdLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9UnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PW47KXQucHVzaChuKSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPVJ0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5ldmVudD10LmpvaW4oXCJcIikudG9Mb3dlckNhc2UoKX0ocyxlWzBdKSksbnVsbD09PWUmJihfcj1zKSxlfWZ1bmN0aW9uIFl0KCl7dmFyIGUsdCxyLGwsaSxvO2lmKGk9X3IsZT13KCksbnVsbCE9PWUpe2Zvcih0PVtdLG89X3IsNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09cj8obD13KCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT1yOyl0LnB1c2gociksbz1fciw0Nj09PW4uY2hhckNvZGVBdChfcik/KHI9XCIuXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT1yPyhsPXcoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7cmV0dXJuIGV9ZnVuY3Rpb24gSnQoKXt2YXIgZSx0LG4scixzLGwsaTtpZihzPV9yLGw9X3IsZT1LKCksbnVsbD09PWUmJihlPV90KCkpLG51bGwhPT1lKXtmb3IodD1bXSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPUt0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT1uOyl0LnB1c2gobiksaT1fcixuPUgoKSxudWxsIT09bj8ocj1LdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3ZhciB0PXlyLnRhZzt0cnl7eXI9bmV3IEFyKHlyLnVyaSx5ci5kaXNwbGF5X25hbWUseXIucGFyYW1zKSx0JiZ5ci5zZXRQYXJhbShcInRhZ1wiLHQpfWNhdGNoKG4pe3lyPS0xfX0ocykpLG51bGw9PT1lJiYoX3I9cyksZX1mdW5jdGlvbiBLdCgpe3ZhciBlO3JldHVybiBlPSR0KCksbnVsbD09PWUmJihlPVJ0KCkpLGV9ZnVuY3Rpb24gJHQoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJ0YWdcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcInRhZ1wiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1JKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudGFnPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBYdCgpe3ZhciBlLHQsbjtpZihuPV9yLHQ9aSgpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1pKCk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyPXBhcnNlSW50KHQuam9pbihcIlwiKSl9KG4sZSkpLG51bGw9PT1lJiYoX3I9biksZX1mdW5jdGlvbiBRdCgpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1BdCgpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyPXR9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBadCgpe3ZhciBlLHQsbixyLHMsbCxpLG8sdSxhO2ZvcihvPV9yLHU9X3IsZT1bXSx0PXZ0KCk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PXZ0KCk7aWYobnVsbCE9PWUpaWYodD1MKCksbnVsbCE9PXQpaWYobj0kKCksbnVsbCE9PW4paWYocj1xKCksbnVsbCE9PXIpe2ZvcihzPVtdLGE9X3IsbD1IKCksbnVsbCE9PWw/KGk9UnQoKSxudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9YSkpOihsPW51bGwsX3I9YSk7bnVsbCE9PWw7KXMucHVzaChsKSxhPV9yLGw9SCgpLG51bGwhPT1sPyhpPVJ0KCksbnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPWEpKToobD1udWxsLF9yPWEpO251bGwhPT1zP2U9W2UsdCxuLHIsc106KGU9bnVsbCxfcj11KX1lbHNlIGU9bnVsbCxfcj11O2Vsc2UgZT1udWxsLF9yPXU7ZWxzZSBlPW51bGwsX3I9dTtlbHNlIGU9bnVsbCxfcj11O3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dHJ5e3lyPW5ldyBBcih5ci51cmkseXIuZGlzcGxheV9uYW1lLHlyLnBhcmFtcyl9Y2F0Y2godCl7eXI9LTF9fShvKSksbnVsbD09PWUmJihfcj1vKSxlfWZ1bmN0aW9uIGVuKCl7dmFyIGU7cmV0dXJuIGU9dG4oKX1mdW5jdGlvbiB0bigpe3ZhciBlLHQscixsLGksbyx1LGE7aWYodT1fcixcImRpZ2VzdFwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wiRGlnZXN0XCInKSksbnVsbCE9PWUpaWYodD12KCksbnVsbCE9PXQpaWYocj1zbigpLG51bGwhPT1yKXtmb3IobD1bXSxhPV9yLGk9aygpLG51bGwhPT1pPyhvPXNuKCksbnVsbCE9PW8/aT1baSxvXTooaT1udWxsLF9yPWEpKTooaT1udWxsLF9yPWEpO251bGwhPT1pOylsLnB1c2goaSksYT1fcixpPWsoKSxudWxsIT09aT8obz1zbigpLG51bGwhPT1vP2k9W2ksb106KGk9bnVsbCxfcj1hKSk6KGk9bnVsbCxfcj1hKTtudWxsIT09bD9lPVtlLHQscixsXTooZT1udWxsLF9yPXUpfWVsc2UgZT1udWxsLF9yPXU7ZWxzZSBlPW51bGwsX3I9dTtlbHNlIGU9bnVsbCxfcj11O3JldHVybiBudWxsPT09ZSYmKGU9bm4oKSksZX1mdW5jdGlvbiBubigpe3ZhciBlLHQsbixyLHMsbCxpLG87aWYoaT1fcixlPUkoKSxudWxsIT09ZSlpZih0PXYoKSxudWxsIT09dClpZihuPXJuKCksbnVsbCE9PW4pe2ZvcihyPVtdLG89X3Iscz1rKCksbnVsbCE9PXM/KGw9cm4oKSxudWxsIT09bD9zPVtzLGxdOihzPW51bGwsX3I9bykpOihzPW51bGwsX3I9byk7bnVsbCE9PXM7KXIucHVzaChzKSxvPV9yLHM9aygpLG51bGwhPT1zPyhsPXJuKCksbnVsbCE9PWw/cz1bcyxsXToocz1udWxsLF9yPW8pKToocz1udWxsLF9yPW8pO251bGwhPT1yP2U9W2UsdCxuLHJdOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtlbHNlIGU9bnVsbCxfcj1pO2Vsc2UgZT1udWxsLF9yPWk7cmV0dXJuIGV9ZnVuY3Rpb24gcm4oKXt2YXIgZSx0LG4scjtyZXR1cm4gcj1fcixlPUkoKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KG49SSgpLG51bGw9PT1uJiYobj16KCkpLG51bGwhPT1uP2U9W2UsdCxuXTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gc24oKXt2YXIgZTtyZXR1cm4gZT1sbigpLG51bGw9PT1lJiYoZT11bigpLG51bGw9PT1lJiYoZT1jbigpLG51bGw9PT1lJiYoZT1kbigpLG51bGw9PT1lJiYoZT1wbigpLG51bGw9PT1lJiYoZT1mbigpLG51bGw9PT1lJiYoZT1tbigpLG51bGw9PT1lJiYoZT1ybigpKSkpKSkpKSxlfWZ1bmN0aW9uIGxuKCl7dmFyIGUsdCxyLGw7cmV0dXJuIGw9X3IsXCJyZWFsbVwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wicmVhbG1cIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9b24oKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIG9uKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPVYoKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5yZWFsbT10fSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gdW4oKXt2YXIgZSx0LHIsbCxpLG8sdSxhLGM7aWYoYT1fcixcImRvbWFpblwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wiZG9tYWluXCInKSksbnVsbCE9PWUpaWYodD1VKCksbnVsbCE9PXQpaWYocj1HKCksbnVsbCE9PXIpaWYobD1hbigpLG51bGwhPT1sKXtpZihpPVtdLGM9X3IsdT1kKCksbnVsbCE9PXUpZm9yKG89W107bnVsbCE9PXU7KW8ucHVzaCh1KSx1PWQoKTtlbHNlIG89bnVsbDtmb3IobnVsbCE9PW8/KHU9YW4oKSxudWxsIT09dT9vPVtvLHVdOihvPW51bGwsX3I9YykpOihvPW51bGwsX3I9Yyk7bnVsbCE9PW87KXtpZihpLnB1c2gobyksYz1fcix1PWQoKSxudWxsIT09dSlmb3Iobz1bXTtudWxsIT09dTspby5wdXNoKHUpLHU9ZCgpO2Vsc2Ugbz1udWxsO251bGwhPT1vPyh1PWFuKCksbnVsbCE9PXU/bz1bbyx1XToobz1udWxsLF9yPWMpKToobz1udWxsLF9yPWMpfW51bGwhPT1pPyhvPWooKSxudWxsIT09bz9lPVtlLHQscixsLGksb106KGU9bnVsbCxfcj1hKSk6KGU9bnVsbCxfcj1hKX1lbHNlIGU9bnVsbCxfcj1hO2Vsc2UgZT1udWxsLF9yPWE7ZWxzZSBlPW51bGwsX3I9YTtlbHNlIGU9bnVsbCxfcj1hO3JldHVybiBlfWZ1bmN0aW9uIGFuKCl7dmFyIGU7cmV0dXJuIGU9TGUoKSxudWxsPT09ZSYmKGU9RmUoKSksZX1mdW5jdGlvbiBjbigpe3ZhciBlLHQscixsO3JldHVybiBsPV9yLFwibm9uY2VcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcIm5vbmNlXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPWhuKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBobigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1WKCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIubm9uY2U9dH0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIGRuKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwib3BhcXVlXCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJvcGFxdWVcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9VigpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLm9wYXF1ZT10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gcG4oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLFwic3RhbGVcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcInN0YWxlXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhpPV9yLFwidHJ1ZVwiPT09bi5zdWJzdHIoX3IsNCkudG9Mb3dlckNhc2UoKT8ocj1uLnN1YnN0cihfciw0KSxfcis9NCk6KHI9bnVsbCwwPT09dnImJnMoJ1widHJ1ZVwiJykpLG51bGwhPT1yJiYocj1mdW5jdGlvbihlKXt5ci5zdGFsZT0hMH0oaSkpLG51bGw9PT1yJiYoX3I9aSksbnVsbD09PXImJihpPV9yLFwiZmFsc2VcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KHI9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihyPW51bGwsMD09PXZyJiZzKCdcImZhbHNlXCInKSksbnVsbCE9PXImJihyPWZ1bmN0aW9uKGUpe3lyLnN0YWxlPSExfShpKSksbnVsbD09PXImJihfcj1pKSksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBmbigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcImFsZ29yaXRobVwiPT09bi5zdWJzdHIoX3IsOSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw5KSxfcis9OSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiYWxnb3JpdGhtXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhcIm1kNVwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8ocj1uLnN1YnN0cihfciwzKSxfcis9Myk6KHI9bnVsbCwwPT09dnImJnMoJ1wiTUQ1XCInKSksbnVsbD09PXImJihcIm1kNS1zZXNzXCI9PT1uLnN1YnN0cihfciw4KS50b0xvd2VyQ2FzZSgpPyhyPW4uc3Vic3RyKF9yLDgpLF9yKz04KToocj1udWxsLDA9PT12ciYmcygnXCJNRDUtc2Vzc1wiJykpLG51bGw9PT1yJiYocj1JKCkpKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5hbGdvcml0aG09dC50b1VwcGVyQ2FzZSgpfShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gbW4oKXt2YXIgZSx0LHIsbCxpLG8sdSxhLGMsaDtpZihhPV9yLFwicW9wXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJxb3BcIicpKSxudWxsIT09ZSlpZih0PVUoKSxudWxsIT09dClpZihyPUcoKSxudWxsIT09cil7aWYoYz1fcixsPWduKCksbnVsbCE9PWwpe2ZvcihpPVtdLGg9X3IsNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiLFwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIixcIicpKSxudWxsIT09bz8odT1nbigpLG51bGwhPT11P289W28sdV06KG89bnVsbCxfcj1oKSk6KG89bnVsbCxfcj1oKTtudWxsIT09bzspaS5wdXNoKG8pLGg9X3IsNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiLFwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIixcIicpKSxudWxsIT09bz8odT1nbigpLG51bGwhPT11P289W28sdV06KG89bnVsbCxfcj1oKSk6KG89bnVsbCxfcj1oKTtudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9Yyl9ZWxzZSBsPW51bGwsX3I9YztudWxsIT09bD8oaT1qKCksbnVsbCE9PWk/ZT1bZSx0LHIsbCxpXTooZT1udWxsLF9yPWEpKTooZT1udWxsLF9yPWEpfWVsc2UgZT1udWxsLF9yPWE7ZWxzZSBlPW51bGwsX3I9YTtlbHNlIGU9bnVsbCxfcj1hO3JldHVybiBlfWZ1bmN0aW9uIGduKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixcImF1dGgtaW50XCI9PT1uLnN1YnN0cihfciw4KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDgpLF9yKz04KTooZT1udWxsLDA9PT12ciYmcygnXCJhdXRoLWludFwiJykpLG51bGw9PT1lJiYoXCJhdXRoXCI9PT1uLnN1YnN0cihfciw0KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDQpLF9yKz00KTooZT1udWxsLDA9PT12ciYmcygnXCJhdXRoXCInKSksbnVsbD09PWUmJihlPUkoKSkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnFvcHx8KHlyLnFvcD1bXSkseXIucW9wLnB1c2godC50b0xvd2VyQ2FzZSgpKX0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIFRuKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1JKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9SSgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9SSgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiBfbigpe3ZhciBlLHQsbixyLHMsbCxpO2lmKHM9X3IsbD1fcixlPXZuKCksbnVsbCE9PWUpe2Zvcih0PVtdLGk9X3Isbj1rKCksbnVsbCE9PW4/KHI9dm4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PW47KXQucHVzaChuKSxpPV9yLG49aygpLG51bGwhPT1uPyhyPXZuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dmFyIHQsbjtmb3Iobj15ci5tdWx0aV9oZWFkZXIubGVuZ3RoLHQ9MDtuPnQ7dCsrKWlmKG51bGw9PT15ci5tdWx0aV9oZWFkZXJbdF0ucGFyc2VkKXt5cj1udWxsO2JyZWFrfXlyPW51bGwhPT15cj95ci5tdWx0aV9oZWFkZXI6LTF9KHMpKSxudWxsPT09ZSYmKF9yPXMpLGV9ZnVuY3Rpb24gdm4oKXt2YXIgZSx0LG4scixzLGwsaTtpZihzPV9yLGw9X3IsZT1fdCgpLG51bGwhPT1lKXtmb3IodD1bXSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPVJ0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT1uOyl0LnB1c2gobiksaT1fcixuPUgoKSxudWxsIT09bj8ocj1SdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3ZhciB0O3lyLm11bHRpX2hlYWRlcnx8KHlyLm11bHRpX2hlYWRlcj1bXSk7dHJ5e3Q9bmV3IEFyKHlyLnVyaSx5ci5kaXNwbGF5X25hbWUseXIucGFyYW1zKSxkZWxldGUgeXIudXJpLGRlbGV0ZSB5ci5kaXNwbGF5X25hbWUsZGVsZXRlIHlyLnBhcmFtc31jYXRjaChuKXt0PW51bGx9eXIubXVsdGlfaGVhZGVyLnB1c2goe3Bvc3NpdGlvbjpfcixvZmZzZXQ6ZSxwYXJzZWQ6dH0pfShzKSksbnVsbD09PWUmJihfcj1zKSxlfWZ1bmN0aW9uIENuKCl7dmFyIGUsdCxyLGwsaSxvLHU7aWYoaT1fcixvPV9yLFwic2lwXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJTSVBcIicpKSxudWxsPT09ZSYmKGU9SSgpKSxudWxsIT09ZSl7Zm9yKHQ9W10sdT1fcixyPUgoKSxudWxsIT09cj8obD1TbigpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj11KSk6KHI9bnVsbCxfcj11KTtudWxsIT09cjspdC5wdXNoKHIpLHU9X3Iscj1IKCksbnVsbCE9PXI/KGw9U24oKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9dSkpOihyPW51bGwsX3I9dSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPW8pfWVsc2UgZT1udWxsLF9yPW87cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe2lmKHlyLnByb3RvY29sPXQudG9Mb3dlckNhc2UoKSx5ci5wYXJhbXN8fCh5ci5wYXJhbXM9e30pLHlyLnBhcmFtcy50ZXh0JiYnXCInPT09eXIucGFyYW1zLnRleHRbMF0pe3ZhciBuPXlyLnBhcmFtcy50ZXh0O3lyLnRleHQ9bi5zdWJzdHJpbmcoMSxuLmxlbmd0aC0xKSxkZWxldGUgeXIucGFyYW1zLnRleHR9fShpLGVbMF0pKSxudWxsPT09ZSYmKF9yPWkpLGV9ZnVuY3Rpb24gU24oKXt2YXIgZTtyZXR1cm4gZT1FbigpLG51bGw9PT1lJiYoZT1SdCgpKSxlfWZ1bmN0aW9uIEVuKCl7dmFyIGUsdCxyLGwsbyx1O2lmKG89X3IsdT1fcixcImNhdXNlXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJjYXVzZVwiJykpLG51bGwhPT1lKWlmKHQ9VSgpLG51bGwhPT10KXtpZihsPWkoKSxudWxsIT09bClmb3Iocj1bXTtudWxsIT09bDspci5wdXNoKGwpLGw9aSgpO2Vsc2Ugcj1udWxsO251bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPXUpfWVsc2UgZT1udWxsLF9yPXU7ZWxzZSBlPW51bGwsX3I9dTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuY2F1c2U9cGFyc2VJbnQodC5qb2luKFwiXCIpKX0obyxlWzJdKSksbnVsbD09PWUmJihfcj1vKSxlfWZ1bmN0aW9uIEFuKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1JKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9SSgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9SSgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiB5bigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9Um4oKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPWsoKSxudWxsIT09bj8ocj1SbigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9Um4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gUm4oKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPV90KCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9UnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPVJ0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIGJuKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1JbigpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPXduKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPUgoKSxudWxsIT09bj8ocj13bigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiBJbigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsXCJhY3RpdmVcIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcImFjdGl2ZVwiJykpLG51bGw9PT1lJiYoXCJwZW5kaW5nXCI9PT1uLnN1YnN0cihfciw3KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDcpLF9yKz03KTooZT1udWxsLDA9PT12ciYmcygnXCJwZW5kaW5nXCInKSksbnVsbD09PWUmJihcInRlcm1pbmF0ZWRcIj09PW4uc3Vic3RyKF9yLDEwKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDEwKSxfcis9MTApOihlPW51bGwsMD09PXZyJiZzKCdcInRlcm1pbmF0ZWRcIicpKSxudWxsPT09ZSYmKGU9SSgpKSkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci5zdGF0ZT1uLnN1YnN0cmluZyhfcixlKX0odCkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiB3bigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcInJlYXNvblwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wicmVhc29uXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPU5uKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJih5ci5yZWFzb249dCl9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksbnVsbD09PWUmJihsPV9yLGk9X3IsXCJleHBpcmVzXCI9PT1uLnN1YnN0cihfciw3KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDcpLF9yKz03KTooZT1udWxsLDA9PT12ciYmcygnXCJleHBpcmVzXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPUF0KCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJih5ci5leHBpcmVzPXQpfShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLG51bGw9PT1lJiYobD1fcixpPV9yLFwicmV0cnlfYWZ0ZXJcIj09PW4uc3Vic3RyKF9yLDExKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDExKSxfcis9MTEpOihlPW51bGwsMD09PXZyJiZzKCdcInJldHJ5X2FmdGVyXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPUF0KCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJih5ci5yZXRyeV9hZnRlcj10KX0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxudWxsPT09ZSYmKGU9UnQoKSkpKSxlfWZ1bmN0aW9uIE5uKCl7dmFyIGU7cmV0dXJuXCJkZWFjdGl2YXRlZFwiPT09bi5zdWJzdHIoX3IsMTEpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMTEpLF9yKz0xMSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiZGVhY3RpdmF0ZWRcIicpKSxudWxsPT09ZSYmKFwicHJvYmF0aW9uXCI9PT1uLnN1YnN0cihfciw5KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDkpLF9yKz05KTooZT1udWxsLDA9PT12ciYmcygnXCJwcm9iYXRpb25cIicpKSxudWxsPT09ZSYmKFwicmVqZWN0ZWRcIj09PW4uc3Vic3RyKF9yLDgpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOCksX3IrPTgpOihlPW51bGwsMD09PXZyJiZzKCdcInJlamVjdGVkXCInKSksbnVsbD09PWUmJihcInRpbWVvdXRcIj09PW4uc3Vic3RyKF9yLDcpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNyksX3IrPTcpOihlPW51bGwsMD09PXZyJiZzKCdcInRpbWVvdXRcIicpKSxudWxsPT09ZSYmKFwiZ2l2ZXVwXCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJnaXZldXBcIicpKSxudWxsPT09ZSYmKFwibm9yZXNvdXJjZVwiPT09bi5zdWJzdHIoX3IsMTApLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMTApLF9yKz0xMCk6KGU9bnVsbCwwPT09dnImJnMoJ1wibm9yZXNvdXJjZVwiJykpLG51bGw9PT1lJiYoXCJpbnZhcmlhbnRcIj09PW4uc3Vic3RyKF9yLDkpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOSksX3IrPTkpOihlPW51bGwsMD09PXZyJiZzKCdcImludmFyaWFudFwiJykpLG51bGw9PT1lJiYoZT1JKCkpKSkpKSkpLGV9ZnVuY3Rpb24gRG4oKXt2YXIgZTtyZXR1cm4gZT1FKCksZT1udWxsIT09ZT9lOlwiXCJ9ZnVuY3Rpb24gT24oKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPUkoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPWsoKSxudWxsIT09bj8ocj1JKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPWsoKSxudWxsIT09bj8ocj1JKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlPW51bGwhPT1lP2U6XCJcIn1mdW5jdGlvbiB4bigpe3ZhciBlLHQsbixyLHMsbCxpO2lmKHM9X3IsbD1fcixlPUsoKSxudWxsPT09ZSYmKGU9X3QoKSksbnVsbCE9PWUpe2Zvcih0PVtdLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9VW4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PW47KXQucHVzaChuKSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPVVuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dmFyIHQ9eXIudGFnO3RyeXt5cj1uZXcgQXIoeXIudXJpLHlyLmRpc3BsYXlfbmFtZSx5ci5wYXJhbXMpLHQmJnlyLnNldFBhcmFtKFwidGFnXCIsdCl9Y2F0Y2gobil7eXI9LTF9fShzKSksbnVsbD09PWUmJihfcj1zKSxlfWZ1bmN0aW9uIFVuKCl7dmFyIGU7cmV0dXJuIGU9JHQoKSxudWxsPT09ZSYmKGU9UnQoKSksZX1mdW5jdGlvbiBNbigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9UG4oKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPWsoKSxudWxsIT09bj8ocj1QbigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9UG4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gUG4oKXt2YXIgZSx0LG4scixzLGwsaSxvO2lmKGk9X3IsZT1qbigpLG51bGwhPT1lKWlmKHQ9digpLG51bGwhPT10KWlmKG49em4oKSxudWxsIT09bil7Zm9yKHI9W10sbz1fcixzPUgoKSxudWxsIT09cz8obD1xbigpLG51bGwhPT1sP3M9W3MsbF06KHM9bnVsbCxfcj1vKSk6KHM9bnVsbCxfcj1vKTtudWxsIT09czspci5wdXNoKHMpLG89X3Iscz1IKCksbnVsbCE9PXM/KGw9cW4oKSxudWxsIT09bD9zPVtzLGxdOihzPW51bGwsX3I9bykpOihzPW51bGwsX3I9byk7bnVsbCE9PXI/ZT1bZSx0LG4scl06KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO2Vsc2UgZT1udWxsLF9yPWk7ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gZX1mdW5jdGlvbiBxbigpe3ZhciBlO3JldHVybiBlPUxuKCksbnVsbD09PWUmJihlPWtuKCksbnVsbD09PWUmJihlPUhuKCksbnVsbD09PWUmJihlPUZuKCksbnVsbD09PWUmJihlPUduKCksbnVsbD09PWUmJihlPVJ0KCkpKSkpKSxlfWZ1bmN0aW9uIExuKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwidHRsXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJ0dGxcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9Sm4oKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci50dGw9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIGtuKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwibWFkZHJcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcIm1hZGRyXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPWxlKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIubWFkZHI9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEhuKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwicmVjZWl2ZWRcIj09PW4uc3Vic3RyKF9yLDgpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOCksX3IrPTgpOihlPW51bGwsMD09PXZyJiZzKCdcInJlY2VpdmVkXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPXBlKCksbnVsbD09PXImJihyPWNlKCkpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnJlY2VpdmVkPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBGbigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcImJyYW5jaFwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wiYnJhbmNoXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPUkoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5icmFuY2g9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEduKCl7dmFyIGUsdCxyLGwsbyx1LGE7aWYobz1fcix1PV9yLFwicnBvcnRcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcInJwb3J0XCInKSksbnVsbCE9PWUpe2lmKGE9X3IsdD1VKCksbnVsbCE9PXQpe2ZvcihyPVtdLGw9aSgpO251bGwhPT1sOylyLnB1c2gobCksbD1pKCk7bnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPWEpfWVsc2UgdD1udWxsLF9yPWE7dD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXUpfWVsc2UgZT1udWxsLF9yPXU7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgcmVzcG9uc2VfcG9ydCYmKHlyLnJwb3J0PXJlc3BvbnNlX3BvcnQuam9pbihcIlwiKSl9KG8pKSxudWxsPT09ZSYmKF9yPW8pLGV9ZnVuY3Rpb24gam4oKXt2YXIgZSx0LG4scixzLGw7cmV0dXJuIGw9X3IsZT1XbigpLG51bGwhPT1lPyh0PXgoKSxudWxsIT09dD8obj1JKCksbnVsbCE9PW4/KHI9eCgpLG51bGwhPT1yPyhzPUJuKCksbnVsbCE9PXM/ZT1bZSx0LG4scixzXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gV24oKXt2YXIgZSx0O3JldHVybiB0PV9yLFwic2lwXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJTSVBcIicpKSxudWxsPT09ZSYmKGU9SSgpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5wcm90b2NvbD10fSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gQm4oKXt2YXIgZSx0O3JldHVybiB0PV9yLFwidWRwXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJVRFBcIicpKSxudWxsPT09ZSYmKFwidGNwXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJUQ1BcIicpKSxudWxsPT09ZSYmKFwidGxzXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJUTFNcIicpKSxudWxsPT09ZSYmKFwic2N0cFwiPT09bi5zdWJzdHIoX3IsNCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw0KSxfcis9NCk6KGU9bnVsbCwwPT09dnImJnMoJ1wiU0NUUFwiJykpLG51bGw9PT1lJiYoZT1JKCkpKSkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnRyYW5zcG9ydD10fSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gem4oKXt2YXIgZSx0LG4scixzO3JldHVybiByPV9yLGU9Vm4oKSxudWxsIT09ZT8ocz1fcix0PUYoKSxudWxsIT09dD8obj1ZbigpLG51bGwhPT1uP3Q9W3Qsbl06KHQ9bnVsbCxfcj1zKSk6KHQ9bnVsbCxfcj1zKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBWbigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1wZSgpLG51bGw9PT1lJiYoZT1hZSgpLG51bGw9PT1lJiYoZT1pZSgpKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLmhvc3Q9bi5zdWJzdHJpbmcoX3IsZSl9KHQpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gWW4oKXt2YXIgZSx0LG4scixzLGwsbztyZXR1cm4gbD1fcixvPV9yLGU9aSgpLGU9bnVsbCE9PWU/ZTpcIlwiLG51bGwhPT1lPyh0PWkoKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8obj1pKCksbj1udWxsIT09bj9uOlwiXCIsbnVsbCE9PW4/KHI9aSgpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhzPWkoKSxzPW51bGwhPT1zP3M6XCJcIixudWxsIT09cz9lPVtlLHQsbixyLHNdOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9byksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucG9ydD1wYXJzZUludCh0LmpvaW4oXCJcIikpfShsLGUpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gSm4oKXt2YXIgZSx0LG4scixzO3JldHVybiByPV9yLHM9X3IsZT1pKCksbnVsbCE9PWU/KHQ9aSgpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhuPWkoKSxuPW51bGwhPT1uP246XCJcIixudWxsIT09bj9lPVtlLHQsbl06KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcGFyc2VJbnQodC5qb2luKFwiXCIpKX0ocixlKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIEtuKCl7dmFyIGU7cmV0dXJuIGU9dG4oKX1mdW5jdGlvbiAkbigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9WG4oKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPUgoKSxudWxsIT09bj8ocj1RbigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9UW4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gWG4oKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9QXQoKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5leHBpcmVzPXR9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBRbigpe3ZhciBlO3JldHVybiBlPVpuKCksbnVsbD09PWUmJihlPVJ0KCkpLGV9ZnVuY3Rpb24gWm4oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJyZWZyZXNoZXJcIj09PW4uc3Vic3RyKF9yLDkpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOSksX3IrPTkpOihlPW51bGwsMD09PXZyJiZzKCdcInJlZnJlc2hlclwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8oXCJ1YWNcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KHI9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihyPW51bGwsMD09PXZyJiZzKCdcInVhY1wiJykpLG51bGw9PT1yJiYoXCJ1YXNcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KHI9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihyPW51bGwsMD09PXZyJiZzKCdcInVhc1wiJykpKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5yZWZyZXNoZXI9dC50b0xvd2VyQ2FzZSgpfShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gZXIoKXt2YXIgZSx0LG4scjtyZXR1cm4gcj1fcixlPUkoKSxudWxsIT09ZT8odD1TKCksbnVsbCE9PXQ/KG49dHIoKSxudWxsIT09bj9lPVtlLHQsbl06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIHRyKCl7dmFyIGUsdDtmb3IoZT1bXSx0PUEoKSxudWxsPT09dCYmKHQ9UigpLG51bGw9PT10JiYodD12KCkpKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9QSgpLG51bGw9PT10JiYodD1SKCksbnVsbD09PXQmJih0PXYoKSkpO3JldHVybiBlfWZ1bmN0aW9uIG5yKCl7dmFyIGUsdDtmb3IoZT1bXSx0PWMoKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9YygpO3JldHVybiBlfWZ1bmN0aW9uIHJyKCl7dmFyIGUsdCxyO3JldHVybiByPV9yLFwidXVpZDpcIj09PW4uc3Vic3RyKF9yLDUpPyhlPVwidXVpZDpcIixfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1widXVpZDpcIicpKSxudWxsIT09ZT8odD1zcigpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIHNyKCl7dmFyIGUsdCxyLGwsaSxvLHUsYSxjLGgsZDtyZXR1cm4gaD1fcixkPV9yLGU9aXIoKSxudWxsIT09ZT8oNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsIT09dD8ocj1scigpLG51bGwhPT1yPyg0NT09PW4uY2hhckNvZGVBdChfcik/KGw9XCItXCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGwhPT1sPyhpPWxyKCksbnVsbCE9PWk/KDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIi1cIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbCE9PW8/KHU9bHIoKSxudWxsIT09dT8oNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhhPVwiLVwiLF9yKyspOihhPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsIT09YT8oYz1vcigpLG51bGwhPT1jP2U9W2UsdCxyLGwsaSxvLHUsYSxjXTooZT1udWxsLF9yPWQpKTooZT1udWxsLF9yPWQpKTooZT1udWxsLF9yPWQpKTooZT1udWxsLF9yPWQpKTooZT1udWxsLF9yPWQpKTooZT1udWxsLF9yPWQpKTooZT1udWxsLF9yPWQpKTooZT1udWxsLF9yPWQpKTooZT1udWxsLF9yPWQpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyPW4uc3Vic3RyaW5nKF9yKzUsZSl9KGgsZVswXSkpLG51bGw9PT1lJiYoX3I9aCksZX1mdW5jdGlvbiBscigpe3ZhciBlLHQsbixyLHM7cmV0dXJuIHM9X3IsZT11KCksbnVsbCE9PWU/KHQ9dSgpLG51bGwhPT10PyhuPXUoKSxudWxsIT09bj8ocj11KCksbnVsbCE9PXI/ZT1bZSx0LG4scl06KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSxlfWZ1bmN0aW9uIGlyKCl7dmFyIGUsdCxuO3JldHVybiBuPV9yLGU9bHIoKSxudWxsIT09ZT8odD1scigpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1uKSk6KGU9bnVsbCxfcj1uKSxlfWZ1bmN0aW9uIG9yKCl7dmFyIGUsdCxuLHI7cmV0dXJuIHI9X3IsZT1scigpLG51bGwhPT1lPyh0PWxyKCksbnVsbCE9PXQ/KG49bHIoKSxudWxsIT09bj9lPVtlLHQsbl06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIHVyKCl7dmFyIGUsdCxuLHIscyxsLGk7aWYocz1fcixsPV9yLGU9SygpLG51bGw9PT1lJiYoZT1fdCgpKSxudWxsIT09ZSl7Zm9yKHQ9W10saT1fcixuPUgoKSxudWxsIT09bj8ocj1SdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09bjspdC5wdXNoKG4pLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9UnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt0cnl7eXI9bmV3IEFyKHlyLnVyaSx5ci5kaXNwbGF5X25hbWUseXIucGFyYW1zKX1jYXRjaCh0KXt5cj0tMX19KHMpKSxudWxsPT09ZSYmKF9yPXMpLGV9ZnVuY3Rpb24gYXIoKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPWNyKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9aHIoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPWhyKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIGNyKCl7dmFyIGUsdCxyLGwsaSxvO3JldHVybiBsPV9yLGk9X3IsZT1EKCksbnVsbCE9PWU/KG89X3IsNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiQFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsIT09dD8ocj1EKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPW8pKToodD1udWxsLF9yPW8pLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIuY2FsbF9pZD1uLnN1YnN0cmluZyhfcixlKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBocigpe3ZhciBlO3JldHVybiBlPWRyKCksbnVsbD09PWUmJihlPXByKCksbnVsbD09PWUmJihlPWZyKCksbnVsbD09PWUmJihlPVJ0KCkpKSksZX1mdW5jdGlvbiBkcigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcInRvLXRhZ1wiPT09bi5zdWJzdHIoX3IsNik/KGU9XCJ0by10YWdcIixfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1widG8tdGFnXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPUkoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci50b190YWc9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIHByKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwiZnJvbS10YWdcIj09PW4uc3Vic3RyKF9yLDgpPyhlPVwiZnJvbS10YWdcIixfcis9OCk6KGU9bnVsbCwwPT09dnImJnMoJ1wiZnJvbS10YWdcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9SSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLmZyb21fdGFnPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBmcigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsXCJlYXJseS1vbmx5XCI9PT1uLnN1YnN0cihfciwxMCk/KGU9XCJlYXJseS1vbmx5XCIsX3IrPTEwKTooZT1udWxsLDA9PT12ciYmcygnXCJlYXJseS1vbmx5XCInKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLmVhcmx5X29ubHk9ITB9KHQpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gbXIoZSl7ZS5zb3J0KCk7Zm9yKHZhciB0PW51bGwsbj1bXSxyPTA7cjxlLmxlbmd0aDtyKyspZVtyXSE9PXQmJihuLnB1c2goZVtyXSksdD1lW3JdKTtyZXR1cm4gbn1mdW5jdGlvbiBncigpe2Zvcih2YXIgZT0xLHQ9MSxyPSExLHM9MDtzPE1hdGgubWF4KF9yLENyKTtzKyspe3ZhciBsPW4uY2hhckF0KHMpO1wiXFxuXCI9PT1sPyhyfHxlKyssdD0xLHI9ITEpOlwiXFxyXCI9PT1sfHxcIlxcdTIwMjhcIj09PWx8fFwiXFx1MjAyOVwiPT09bD8oZSsrLHQ9MSxyPSEwKToodCsrLHI9ITEpfXJldHVybntsaW5lOmUsY29sdW1uOnR9fXZhciBUcj17Q1JMRjpsLERJR0lUOmksQUxQSEE6byxIRVhESUc6dSxXU1A6YSxPQ1RFVDpjLERRVU9URTpoLFNQOmQsSFRBQjpwLGFscGhhbnVtOmYscmVzZXJ2ZWQ6bSx1bnJlc2VydmVkOmcsbWFyazpULGVzY2FwZWQ6XyxMV1M6dixTV1M6QyxIQ09MT046UyxURVhUX1VURjhfVFJJTTpFLFRFWFRfVVRGOGNoYXI6QSxVVEY4X05PTkFTQ0lJOnksVVRGOF9DT05UOlIsTEhFWDpiLHRva2VuOkksdG9rZW5fbm9kb3Q6dyxzZXBhcmF0b3JzOk4sd29yZDpELFNUQVI6TyxTTEFTSDp4LEVRVUFMOlUsTFBBUkVOOk0sUlBBUkVOOlAsUkFRVU9UOnEsTEFRVU9UOkwsQ09NTUE6ayxTRU1JOkgsQ09MT046RixMRFFVT1Q6RyxSRFFVT1Q6aixjb21tZW50OlcsY3RleHQ6QixxdW90ZWRfc3RyaW5nOnoscXVvdGVkX3N0cmluZ19jbGVhbjpWLHFkdGV4dDpZLHF1b3RlZF9wYWlyOkosU0lQX1VSSV9ub3BhcmFtczpLLFNJUF9VUkk6JCx1cmlfc2NoZW1lOlgsdXJpX3NjaGVtZV9zaXBzOlEsdXJpX3NjaGVtZV9zaXA6Wix1c2VyaW5mbzplZSx1c2VyOnRlLHVzZXJfdW5yZXNlcnZlZDpuZSxwYXNzd29yZDpyZSxob3N0cG9ydDpzZSxob3N0OmxlLGhvc3RuYW1lOmllLGRvbWFpbmxhYmVsOm9lLHRvcGxhYmVsOnVlLElQdjZyZWZlcmVuY2U6YWUsSVB2NmFkZHJlc3M6Y2UsaDE2OmhlLGxzMzI6ZGUsSVB2NGFkZHJlc3M6cGUsZGVjX29jdGV0OmZlLHBvcnQ6bWUsdXJpX3BhcmFtZXRlcnM6Z2UsdXJpX3BhcmFtZXRlcjpUZSx0cmFuc3BvcnRfcGFyYW06X2UsdXNlcl9wYXJhbTp2ZSxtZXRob2RfcGFyYW06Q2UsdHRsX3BhcmFtOlNlLG1hZGRyX3BhcmFtOkVlLGxyX3BhcmFtOkFlLG90aGVyX3BhcmFtOnllLHBuYW1lOlJlLHB2YWx1ZTpiZSxwYXJhbWNoYXI6SWUscGFyYW1fdW5yZXNlcnZlZDp3ZSxoZWFkZXJzOk5lLGhlYWRlcjpEZSxobmFtZTpPZSxodmFsdWU6eGUsaG52X3VucmVzZXJ2ZWQ6VWUsUmVxdWVzdF9SZXNwb25zZTpNZSxSZXF1ZXN0X0xpbmU6UGUsUmVxdWVzdF9VUkk6cWUsYWJzb2x1dGVVUkk6TGUsaGllcl9wYXJ0OmtlLG5ldF9wYXRoOkhlLGFic19wYXRoOkZlLG9wYXF1ZV9wYXJ0OkdlLHVyaWM6amUsdXJpY19ub19zbGFzaDpXZSxwYXRoX3NlZ21lbnRzOkJlLHNlZ21lbnQ6emUscGFyYW06VmUscGNoYXI6WWUsc2NoZW1lOkplLGF1dGhvcml0eTpLZSxzcnZyOiRlLHJlZ19uYW1lOlhlLHF1ZXJ5OlFlLFNJUF9WZXJzaW9uOlplLElOVklURW06ZXQsQUNLbTp0dCxPUFRJT05TbTpudCxCWUVtOnJ0LENBTkNFTG06c3QsUkVHSVNURVJtOmx0LFNVQlNDUklCRW06aXQsTk9USUZZbTpvdCxSRUZFUm06dXQsTWV0aG9kOmF0LFN0YXR1c19MaW5lOmN0LFN0YXR1c19Db2RlOmh0LGV4dGVuc2lvbl9jb2RlOmR0LFJlYXNvbl9QaHJhc2U6cHQsXG5BbGxvd19FdmVudHM6ZnQsQ2FsbF9JRDptdCxDb250YWN0Omd0LGNvbnRhY3RfcGFyYW06VHQsbmFtZV9hZGRyOl90LGRpc3BsYXlfbmFtZTp2dCxjb250YWN0X3BhcmFtczpDdCxjX3BfcTpTdCxjX3BfZXhwaXJlczpFdCxkZWx0YV9zZWNvbmRzOkF0LHF2YWx1ZTp5dCxnZW5lcmljX3BhcmFtOlJ0LGdlbl92YWx1ZTpidCxDb250ZW50X0Rpc3Bvc2l0aW9uOkl0LGRpc3BfdHlwZTp3dCxkaXNwX3BhcmFtOk50LGhhbmRsaW5nX3BhcmFtOkR0LENvbnRlbnRfRW5jb2Rpbmc6T3QsQ29udGVudF9MZW5ndGg6eHQsQ29udGVudF9UeXBlOlV0LG1lZGlhX3R5cGU6TXQsbV90eXBlOlB0LGRpc2NyZXRlX3R5cGU6cXQsY29tcG9zaXRlX3R5cGU6THQsZXh0ZW5zaW9uX3Rva2VuOmt0LHhfdG9rZW46SHQsbV9zdWJ0eXBlOkZ0LG1fcGFyYW1ldGVyOkd0LG1fdmFsdWU6anQsQ1NlcTpXdCxDU2VxX3ZhbHVlOkJ0LEV4cGlyZXM6enQsRXZlbnQ6VnQsZXZlbnRfdHlwZTpZdCxGcm9tOkp0LGZyb21fcGFyYW06S3QsdGFnX3BhcmFtOiR0LE1heF9Gb3J3YXJkczpYdCxNaW5fRXhwaXJlczpRdCxOYW1lX0FkZHJfSGVhZGVyOlp0LFByb3h5X0F1dGhlbnRpY2F0ZTplbixjaGFsbGVuZ2U6dG4sb3RoZXJfY2hhbGxlbmdlOm5uLGF1dGhfcGFyYW06cm4sZGlnZXN0X2NsbjpzbixyZWFsbTpsbixyZWFsbV92YWx1ZTpvbixkb21haW46dW4sVVJJOmFuLG5vbmNlOmNuLG5vbmNlX3ZhbHVlOmhuLG9wYXF1ZTpkbixzdGFsZTpwbixhbGdvcml0aG06Zm4scW9wX29wdGlvbnM6bW4scW9wX3ZhbHVlOmduLFByb3h5X1JlcXVpcmU6VG4sUmVjb3JkX1JvdXRlOl9uLHJlY19yb3V0ZTp2bixSZWFzb246Q24scmVhc29uX3BhcmFtOlNuLHJlYXNvbl9jYXVzZTpFbixSZXF1aXJlOkFuLFJvdXRlOnluLHJvdXRlX3BhcmFtOlJuLFN1YnNjcmlwdGlvbl9TdGF0ZTpibixzdWJzdGF0ZV92YWx1ZTpJbixzdWJleHBfcGFyYW1zOnduLGV2ZW50X3JlYXNvbl92YWx1ZTpObixTdWJqZWN0OkRuLFN1cHBvcnRlZDpPbixUbzp4bix0b19wYXJhbTpVbixWaWE6TW4sdmlhX3BhcmFtOlBuLHZpYV9wYXJhbXM6cW4sdmlhX3R0bDpMbix2aWFfbWFkZHI6a24sdmlhX3JlY2VpdmVkOkhuLHZpYV9icmFuY2g6Rm4scmVzcG9uc2VfcG9ydDpHbixzZW50X3Byb3RvY29sOmpuLHByb3RvY29sX25hbWU6V24sdHJhbnNwb3J0OkJuLHNlbnRfYnk6em4sdmlhX2hvc3Q6Vm4sdmlhX3BvcnQ6WW4sdHRsOkpuLFdXV19BdXRoZW50aWNhdGU6S24sU2Vzc2lvbl9FeHBpcmVzOiRuLHNfZV9leHBpcmVzOlhuLHNfZV9wYXJhbXM6UW4sc19lX3JlZnJlc2hlcjpabixleHRlbnNpb25faGVhZGVyOmVyLGhlYWRlcl92YWx1ZTp0cixtZXNzYWdlX2JvZHk6bnIsdXVpZF9VUkk6cnIsdXVpZDpzcixoZXg0OmxyLGhleDg6aXIsaGV4MTI6b3IsUmVmZXJfVG86dXIsUmVwbGFjZXM6YXIsY2FsbF9pZDpjcixyZXBsYWNlc19wYXJhbTpocix0b190YWc6ZHIsZnJvbV90YWc6cHIsZWFybHlfZmxhZzpmcn07aWYodm9pZCAwIT09cil7aWYodm9pZCAwPT09VHJbcl0pdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBydWxlIG5hbWU6IFwiK3QocikrXCIuXCIpfWVsc2Ugcj1cIkNSTEZcIjt2YXIgX3I9MCx2cj0wLENyPTAsU3I9W10sRXI9ZShcIi4vVVJJXCIpLEFyPWUoXCIuL05hbWVBZGRySGVhZGVyXCIpLHlyPXt9LFJyPVRyW3JdKCk7aWYobnVsbD09PVJyfHxfciE9PW4ubGVuZ3RoKXt2YXIgYnI9TWF0aC5tYXgoX3IsQ3IpLElyPWJyPG4ubGVuZ3RoP24uY2hhckF0KGJyKTpudWxsLHdyPWdyKCk7cmV0dXJuIG5ldyB0aGlzLlN5bnRheEVycm9yKG1yKFNyKSxJcixicix3ci5saW5lLHdyLmNvbHVtbiksLTF9cmV0dXJuIHlyfSx0b1NvdXJjZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2V9fTtyZXR1cm4gbi5TeW50YXhFcnJvcj1mdW5jdGlvbihlLG4scixzLGwpe2Z1bmN0aW9uIGkoZSxuKXt2YXIgcixzO3N3aXRjaChlLmxlbmd0aCl7Y2FzZSAwOnI9XCJlbmQgb2YgaW5wdXRcIjticmVhaztjYXNlIDE6cj1lWzBdO2JyZWFrO2RlZmF1bHQ6cj1lLnNsaWNlKDAsZS5sZW5ndGgtMSkuam9pbihcIiwgXCIpK1wiIG9yIFwiK2VbZS5sZW5ndGgtMV19cmV0dXJuIHM9bj90KG4pOlwiZW5kIG9mIGlucHV0XCIsXCJFeHBlY3RlZCBcIityK1wiIGJ1dCBcIitzK1wiIGZvdW5kLlwifXRoaXMubmFtZT1cIlN5bnRheEVycm9yXCIsdGhpcy5leHBlY3RlZD1lLHRoaXMuZm91bmQ9bix0aGlzLm1lc3NhZ2U9aShlLG4pLHRoaXMub2Zmc2V0PXIsdGhpcy5saW5lPXMsdGhpcy5jb2x1bW49bH0sbi5TeW50YXhFcnJvci5wcm90b3R5cGU9RXJyb3IucHJvdG90eXBlLG59KCl9LHtcIi4vTmFtZUFkZHJIZWFkZXJcIjo5LFwiLi9VUklcIjoyNH1dLDc6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj1lKFwiZGVidWdcIikoXCJKc1NJUFwiKSxzPWUoXCIuLi9wYWNrYWdlLmpzb25cIik7cihcInZlcnNpb24gJXNcIixzLnZlcnNpb24pO3ZhciBsPWUoXCJydGNuaW5qYVwiKSxpPWUoXCIuL0NvbnN0YW50c1wiKSxvPWUoXCIuL0V4Y2VwdGlvbnNcIiksdT1lKFwiLi9VdGlsc1wiKSxhPWUoXCIuL1VBXCIpLGM9ZShcIi4vVVJJXCIpLGg9ZShcIi4vTmFtZUFkZHJIZWFkZXJcIiksZD1lKFwiLi9HcmFtbWFyXCIpLHA9ZShcIi4vU29ja2V0XCIpLGY9ZShcIi4vV2ViU29ja2V0SW50ZXJmYWNlXCIpLG09dC5leHBvcnRzPXtDOmksRXhjZXB0aW9uczpvLFV0aWxzOnUsVUE6YSxVUkk6YyxOYW1lQWRkckhlYWRlcjpoLFNvY2tldDpwLFdlYlNvY2tldEludGVyZmFjZTpmLEdyYW1tYXI6ZCxkZWJ1ZzplKFwiZGVidWdcIikscnRjbmluamE6bH07T2JqZWN0LmRlZmluZVByb3BlcnRpZXMobSx7bmFtZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMudGl0bGV9fSx2ZXJzaW9uOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy52ZXJzaW9ufX19KX0se1wiLi4vcGFja2FnZS5qc29uXCI6NDcsXCIuL0NvbnN0YW50c1wiOjEsXCIuL0V4Y2VwdGlvbnNcIjo1LFwiLi9HcmFtbWFyXCI6NixcIi4vTmFtZUFkZHJIZWFkZXJcIjo5LFwiLi9Tb2NrZXRcIjoxOSxcIi4vVUFcIjoyMyxcIi4vVVJJXCI6MjQsXCIuL1V0aWxzXCI6MjUsXCIuL1dlYlNvY2tldEludGVyZmFjZVwiOjI2LGRlYnVnOjMzLHJ0Y25pbmphOjM4fV0sODpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7dGhpcy51YT1lLHRoaXMuZGF0YT17fSxsLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCJ1dGlsXCIpLGw9ZShcImV2ZW50c1wiKSxpPWUoXCIuL0NvbnN0YW50c1wiKSxvPWUoXCIuL1NJUE1lc3NhZ2VcIiksdT1lKFwiLi9VdGlsc1wiKSxhPWUoXCIuL1JlcXVlc3RTZW5kZXJcIiksYz1lKFwiLi9UcmFuc2FjdGlvbnNcIiksaD1lKFwiLi9FeGNlcHRpb25zXCIpO3MuaW5oZXJpdHMocixsLkV2ZW50RW1pdHRlciksci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlLHQsbil7dmFyIHIscyxsLHUsYyxoPWU7aWYodm9pZCAwPT09ZXx8dm9pZCAwPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGVub3VnaCBhcmd1bWVudHNcIik7aWYoZT10aGlzLnVhLm5vcm1hbGl6ZVRhcmdldChlKSwhZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0YXJnZXQ6IFwiK2gpO249bnx8e30sYz1uLmV4dHJhSGVhZGVycyYmbi5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10sdT1uLmV2ZW50SGFuZGxlcnN8fHt9LGw9bi5jb250ZW50VHlwZXx8XCJ0ZXh0L3BsYWluXCIsdGhpcy5jb250ZW50X3R5cGU9bDtmb3IocyBpbiB1KXRoaXMub24ocyx1W3NdKTt0aGlzLmNsb3NlZD0hMSx0aGlzLnVhLmFwcGxpY2FudHNbdGhpc109dGhpcyxjLnB1c2goXCJDb250ZW50LVR5cGU6IFwiK2wpLHRoaXMucmVxdWVzdD1uZXcgby5PdXRnb2luZ1JlcXVlc3QoaS5NRVNTQUdFLGUsdGhpcy51YSxudWxsLGMpLHQ/KHRoaXMucmVxdWVzdC5ib2R5PXQsdGhpcy5jb250ZW50PXQpOnRoaXMuY29udGVudD1udWxsLHI9bmV3IGEodGhpcyx0aGlzLnVhKSx0aGlzLm5ld01lc3NhZ2UoXCJsb2NhbFwiLHRoaXMucmVxdWVzdCksci5zZW5kKCl9LHIucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlKXt2YXIgdDtpZighdGhpcy5jbG9zZWQpc3dpdGNoKCEwKXtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmJyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6ZGVsZXRlIHRoaXMudWEuYXBwbGljYW50c1t0aGlzXSx0aGlzLmVtaXQoXCJzdWNjZWVkZWRcIix7b3JpZ2luYXRvcjpcInJlbW90ZVwiLHJlc3BvbnNlOmV9KTticmVhaztkZWZhdWx0OmRlbGV0ZSB0aGlzLnVhLmFwcGxpY2FudHNbdGhpc10sdD11LnNpcEVycm9yQ2F1c2UoZS5zdGF0dXNfY29kZSksdGhpcy5lbWl0KFwiZmFpbGVkXCIse29yaWdpbmF0b3I6XCJyZW1vdGVcIixyZXNwb25zZTplLGNhdXNlOnR9KX19LHIucHJvdG90eXBlLm9uUmVxdWVzdFRpbWVvdXQ9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8dGhpcy5lbWl0KFwiZmFpbGVkXCIse29yaWdpbmF0b3I6XCJzeXN0ZW1cIixjYXVzZTppLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVR9KX0sci5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMuY2xvc2VkfHx0aGlzLmVtaXQoXCJmYWlsZWRcIix7b3JpZ2luYXRvcjpcInN5c3RlbVwiLGNhdXNlOmkuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1J9KX0sci5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZD0hMCxkZWxldGUgdGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdfSxyLnByb3RvdHlwZS5pbml0X2luY29taW5nPWZ1bmN0aW9uKGUpe3ZhciB0O3RoaXMucmVxdWVzdD1lLHRoaXMuY29udGVudF90eXBlPWUuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLGUuYm9keT90aGlzLmNvbnRlbnQ9ZS5ib2R5OnRoaXMuY29udGVudD1udWxsLHRoaXMubmV3TWVzc2FnZShcInJlbW90ZVwiLGUpLHQ9dGhpcy51YS50cmFuc2FjdGlvbnMubmlzdFtlLnZpYV9icmFuY2hdLCF0fHx0LnN0YXRlIT09Yy5DLlNUQVRVU19UUllJTkcmJnQuc3RhdGUhPT1jLkMuU1RBVFVTX1BST0NFRURJTkd8fGUucmVwbHkoMjAwKX0sci5wcm90b3R5cGUuYWNjZXB0PWZ1bmN0aW9uKGUpe2U9ZXx8e307dmFyIHQ9ZS5leHRyYUhlYWRlcnMmJmUuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLG49ZS5ib2R5O2lmKFwiaW5jb21pbmdcIiE9PXRoaXMuZGlyZWN0aW9uKXRocm93IG5ldyBoLk5vdFN1cHBvcnRlZEVycm9yKCdcImFjY2VwdFwiIG5vdCBzdXBwb3J0ZWQgZm9yIG91dGdvaW5nIE1lc3NhZ2UnKTt0aGlzLnJlcXVlc3QucmVwbHkoMjAwLG51bGwsdCxuKX0sci5wcm90b3R5cGUucmVqZWN0PWZ1bmN0aW9uKGUpe2U9ZXx8e307dmFyIHQ9ZS5zdGF0dXNfY29kZXx8NDgwLG49ZS5yZWFzb25fcGhyYXNlLHI9ZS5leHRyYUhlYWRlcnMmJmUuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLHM9ZS5ib2R5O2lmKFwiaW5jb21pbmdcIiE9PXRoaXMuZGlyZWN0aW9uKXRocm93IG5ldyBoLk5vdFN1cHBvcnRlZEVycm9yKCdcInJlamVjdFwiIG5vdCBzdXBwb3J0ZWQgZm9yIG91dGdvaW5nIE1lc3NhZ2UnKTtpZigzMDA+dHx8dD49NzAwKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIit0KTt0aGlzLnJlcXVlc3QucmVwbHkodCxuLHIscyl9LHIucHJvdG90eXBlLm5ld01lc3NhZ2U9ZnVuY3Rpb24oZSx0KXtcInJlbW90ZVwiPT09ZT8odGhpcy5kaXJlY3Rpb249XCJpbmNvbWluZ1wiLHRoaXMubG9jYWxfaWRlbnRpdHk9dC50byx0aGlzLnJlbW90ZV9pZGVudGl0eT10LmZyb20pOlwibG9jYWxcIj09PWUmJih0aGlzLmRpcmVjdGlvbj1cIm91dGdvaW5nXCIsdGhpcy5sb2NhbF9pZGVudGl0eT10LmZyb20sdGhpcy5yZW1vdGVfaWRlbnRpdHk9dC50byksdGhpcy51YS5uZXdNZXNzYWdlKHtvcmlnaW5hdG9yOmUsbWVzc2FnZTp0aGlzLHJlcXVlc3Q6dH0pfX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9FeGNlcHRpb25zXCI6NSxcIi4vUmVxdWVzdFNlbmRlclwiOjE3LFwiLi9TSVBNZXNzYWdlXCI6MTgsXCIuL1RyYW5zYWN0aW9uc1wiOjIxLFwiLi9VdGlsc1wiOjI1LGV2ZW50czoyOCx1dGlsOjMyfV0sOTpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4pe3ZhciByO2lmKCEoZSYmZSBpbnN0YW5jZW9mIHMpKXRocm93IG5ldyBUeXBlRXJyb3IoJ21pc3Npbmcgb3IgaW52YWxpZCBcInVyaVwiIHBhcmFtZXRlcicpO3RoaXMudXJpPWUsdGhpcy5wYXJhbWV0ZXJzPXt9O2ZvcihyIGluIG4pdGhpcy5zZXRQYXJhbShyLG5bcl0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse2Rpc3BsYXlfbmFtZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR9LHNldDpmdW5jdGlvbihlKXt0PTA9PT1lP1wiMFwiOmV9fX0pfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCIuL1VSSVwiKSxsPWUoXCIuL0dyYW1tYXJcIik7ci5wcm90b3R5cGU9e3NldFBhcmFtOmZ1bmN0aW9uKGUsdCl7ZSYmKHRoaXMucGFyYW1ldGVyc1tlLnRvTG93ZXJDYXNlKCldPVwidW5kZWZpbmVkXCI9PXR5cGVvZiB0fHxudWxsPT09dD9udWxsOnQudG9TdHJpbmcoKSl9LGdldFBhcmFtOmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMucGFyYW1ldGVyc1tlLnRvTG93ZXJDYXNlKCldOnZvaWQgMH0saGFzUGFyYW06ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSkmJiEwfHwhMTp2b2lkIDB9LGRlbGV0ZVBhcmFtOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSx0aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoZSk/KHQ9dGhpcy5wYXJhbWV0ZXJzW2VdLGRlbGV0ZSB0aGlzLnBhcmFtZXRlcnNbZV0sdCk6dm9pZCAwfSxjbGVhclBhcmFtczpmdW5jdGlvbigpe3RoaXMucGFyYW1ldGVycz17fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcy51cmkuY2xvbmUoKSx0aGlzLmRpc3BsYXlfbmFtZSxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYW1ldGVycykpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZSx0O2U9dGhpcy5kaXNwbGF5X25hbWV8fDA9PT10aGlzLmRpc3BsYXlfbmFtZT8nXCInK3RoaXMuZGlzcGxheV9uYW1lKydcIiAnOlwiXCIsZSs9XCI8XCIrdGhpcy51cmkudG9TdHJpbmcoKStcIj5cIjtmb3IodCBpbiB0aGlzLnBhcmFtZXRlcnMpZSs9XCI7XCIrdCxudWxsIT09dGhpcy5wYXJhbWV0ZXJzW3RdJiYoZSs9XCI9XCIrdGhpcy5wYXJhbWV0ZXJzW3RdKTtyZXR1cm4gZX19LHIucGFyc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9bC5wYXJzZShlLFwiTmFtZV9BZGRyX0hlYWRlclwiKSwtMSE9PWU/ZTp2b2lkIDB9fSx7XCIuL0dyYW1tYXJcIjo2LFwiLi9VUklcIjoyNH1dLDEwOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQpe3ZhciBuPXQscj0wLHM9MDtpZihlLnN1YnN0cmluZyhuLG4rMikubWF0Y2goLyheXFxyXFxuKS8pKXJldHVybi0yO2Zvcig7MD09PXI7KXtpZihzPWUuaW5kZXhPZihcIlxcclxcblwiLG4pLC0xPT09cylyZXR1cm4gczshZS5zdWJzdHJpbmcocysyLHMrNCkubWF0Y2goLyheXFxyXFxuKS8pJiZlLmNoYXJBdChzKzIpLm1hdGNoKC8oXlxccyspLyk/bj1zKzI6cj1zfXJldHVybiByfWZ1bmN0aW9uIHMoZSx0LG4scil7dmFyIHMsbCxpLGEsYz10LmluZGV4T2YoXCI6XCIsbiksaD10LnN1YnN0cmluZyhuLGMpLnRyaW0oKSxkPXQuc3Vic3RyaW5nKGMrMSxyKS50cmltKCk7c3dpdGNoKGgudG9Mb3dlckNhc2UoKSl7Y2FzZVwidmlhXCI6Y2FzZVwidlwiOmUuYWRkSGVhZGVyKFwidmlhXCIsZCksMT09PWUuZ2V0SGVhZGVycyhcInZpYVwiKS5sZW5ndGg/KGE9ZS5wYXJzZUhlYWRlcihcIlZpYVwiKSxhJiYoZS52aWE9YSxlLnZpYV9icmFuY2g9YS5icmFuY2gpKTphPTA7YnJlYWs7Y2FzZVwiZnJvbVwiOmNhc2VcImZcIjplLnNldEhlYWRlcihcImZyb21cIixkKSxhPWUucGFyc2VIZWFkZXIoXCJmcm9tXCIpLGEmJihlLmZyb209YSxlLmZyb21fdGFnPWEuZ2V0UGFyYW0oXCJ0YWdcIikpO2JyZWFrO2Nhc2VcInRvXCI6Y2FzZVwidFwiOmUuc2V0SGVhZGVyKFwidG9cIixkKSxhPWUucGFyc2VIZWFkZXIoXCJ0b1wiKSxhJiYoZS50bz1hLGUudG9fdGFnPWEuZ2V0UGFyYW0oXCJ0YWdcIikpO2JyZWFrO2Nhc2VcInJlY29yZC1yb3V0ZVwiOmZvcihhPW8ucGFyc2UoZCxcIlJlY29yZF9Sb3V0ZVwiKSwtMT09PWEmJihhPXZvaWQgMCksaT1hLmxlbmd0aCxsPTA7aT5sO2wrKylzPWFbbF0sZS5hZGRIZWFkZXIoXCJyZWNvcmQtcm91dGVcIixkLnN1YnN0cmluZyhzLnBvc3NpdGlvbixzLm9mZnNldCkpLGUuaGVhZGVyc1tcIlJlY29yZC1Sb3V0ZVwiXVtlLmdldEhlYWRlcnMoXCJyZWNvcmQtcm91dGVcIikubGVuZ3RoLTFdLnBhcnNlZD1zLnBhcnNlZDticmVhaztjYXNlXCJjYWxsLWlkXCI6Y2FzZVwiaVwiOmUuc2V0SGVhZGVyKFwiY2FsbC1pZFwiLGQpLGE9ZS5wYXJzZUhlYWRlcihcImNhbGwtaWRcIiksYSYmKGUuY2FsbF9pZD1kKTticmVhaztjYXNlXCJjb250YWN0XCI6Y2FzZVwibVwiOmZvcihhPW8ucGFyc2UoZCxcIkNvbnRhY3RcIiksLTE9PT1hJiYoYT12b2lkIDApLGk9YS5sZW5ndGgsbD0wO2k+bDtsKyspcz1hW2xdLGUuYWRkSGVhZGVyKFwiY29udGFjdFwiLGQuc3Vic3RyaW5nKHMucG9zc2l0aW9uLHMub2Zmc2V0KSksZS5oZWFkZXJzLkNvbnRhY3RbZS5nZXRIZWFkZXJzKFwiY29udGFjdFwiKS5sZW5ndGgtMV0ucGFyc2VkPXMucGFyc2VkO2JyZWFrO2Nhc2VcImNvbnRlbnQtbGVuZ3RoXCI6Y2FzZVwibFwiOmUuc2V0SGVhZGVyKFwiY29udGVudC1sZW5ndGhcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiKTticmVhaztjYXNlXCJjb250ZW50LXR5cGVcIjpjYXNlXCJjXCI6ZS5zZXRIZWFkZXIoXCJjb250ZW50LXR5cGVcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJjb250ZW50LXR5cGVcIik7YnJlYWs7Y2FzZVwiY3NlcVwiOmUuc2V0SGVhZGVyKFwiY3NlcVwiLGQpLGE9ZS5wYXJzZUhlYWRlcihcImNzZXFcIiksYSYmKGUuY3NlcT1hLnZhbHVlKSxlIGluc3RhbmNlb2YgdS5JbmNvbWluZ1Jlc3BvbnNlJiYoZS5tZXRob2Q9YS5tZXRob2QpO2JyZWFrO2Nhc2VcIm1heC1mb3J3YXJkc1wiOmUuc2V0SGVhZGVyKFwibWF4LWZvcndhcmRzXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwibWF4LWZvcndhcmRzXCIpO2JyZWFrO2Nhc2VcInd3dy1hdXRoZW50aWNhdGVcIjplLnNldEhlYWRlcihcInd3dy1hdXRoZW50aWNhdGVcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJ3d3ctYXV0aGVudGljYXRlXCIpO2JyZWFrO2Nhc2VcInByb3h5LWF1dGhlbnRpY2F0ZVwiOmUuc2V0SGVhZGVyKFwicHJveHktYXV0aGVudGljYXRlXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwicHJveHktYXV0aGVudGljYXRlXCIpO2JyZWFrO2Nhc2VcInNlc3Npb24tZXhwaXJlc1wiOmNhc2VcInhcIjplLnNldEhlYWRlcihcInNlc3Npb24tZXhwaXJlc1wiLGQpLGE9ZS5wYXJzZUhlYWRlcihcInNlc3Npb24tZXhwaXJlc1wiKSxhJiYoZS5zZXNzaW9uX2V4cGlyZXM9YS5leHBpcmVzLGUuc2Vzc2lvbl9leHBpcmVzX3JlZnJlc2hlcj1hLnJlZnJlc2hlcik7YnJlYWs7Y2FzZVwicmVmZXItdG9cIjpjYXNlXCJyXCI6ZS5zZXRIZWFkZXIoXCJyZWZlci10b1wiLGQpLGE9ZS5wYXJzZUhlYWRlcihcInJlZmVyLXRvXCIpLGEmJihlLnJlZmVyX3RvPWEpO2JyZWFrO2Nhc2VcInJlcGxhY2VzXCI6ZS5zZXRIZWFkZXIoXCJyZXBsYWNlc1wiLGQpLGE9ZS5wYXJzZUhlYWRlcihcInJlcGxhY2VzXCIpLGEmJihlLnJlcGxhY2VzPWEpO2JyZWFrO2Nhc2VcImV2ZW50XCI6Y2FzZVwib1wiOmUuc2V0SGVhZGVyKFwiZXZlbnRcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJldmVudFwiKSxhJiYoZS5ldmVudD1hKTticmVhaztkZWZhdWx0OmUuc2V0SGVhZGVyKGgsZCksYT0wfXJldHVybiB2b2lkIDA9PT1hP3tlcnJvcjonZXJyb3IgcGFyc2luZyBoZWFkZXIgXCInK2grJ1wiJ306ITB9dmFyIGw9e307dC5leHBvcnRzPWw7dmFyIGk9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6UGFyc2VyXCIpO2kubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO3ZhciBvPWUoXCIuL0dyYW1tYXJcIiksdT1lKFwiLi9TSVBNZXNzYWdlXCIpO2wucGFyc2VNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dmFyIG4sbCxhLGMsaCxkPTAscD1lLmluZGV4T2YoXCJcXHJcXG5cIik7aWYoLTE9PT1wKXJldHVybiB2b2lkIGkoXCJwYXJzZU1lc3NhZ2UoKSB8IG5vIENSTEYgZm91bmQsIG5vdCBhIFNJUCBtZXNzYWdlXCIpO2lmKGw9ZS5zdWJzdHJpbmcoMCxwKSxoPW8ucGFyc2UobCxcIlJlcXVlc3RfUmVzcG9uc2VcIiksLTE9PT1oKXJldHVybiB2b2lkIGkoJ3BhcnNlTWVzc2FnZSgpIHwgZXJyb3IgcGFyc2luZyBmaXJzdCBsaW5lIG9mIFNJUCBtZXNzYWdlOiBcIicrbCsnXCInKTtmb3IoaC5zdGF0dXNfY29kZT8obj1uZXcgdS5JbmNvbWluZ1Jlc3BvbnNlLG4uc3RhdHVzX2NvZGU9aC5zdGF0dXNfY29kZSxuLnJlYXNvbl9waHJhc2U9aC5yZWFzb25fcGhyYXNlKToobj1uZXcgdS5JbmNvbWluZ1JlcXVlc3QodCksbi5tZXRob2Q9aC5tZXRob2Qsbi5ydXJpPWgudXJpKSxuLmRhdGE9ZSxkPXArMjs7KXtpZihwPXIoZSxkKSwtMj09PXApe2M9ZCsyO2JyZWFrfWlmKC0xPT09cClyZXR1cm4gdm9pZCBpKFwicGFyc2VNZXNzYWdlKCkgfCBtYWxmb3JtZWQgbWVzc2FnZVwiKTtpZihoPXMobixlLGQscCksaCE9PSEwKXJldHVybiB2b2lkIGkoXCJwYXJzZU1lc3NhZ2UoKSB8XCIsaC5lcnJvcik7ZD1wKzJ9cmV0dXJuIG4uaGFzSGVhZGVyKFwiY29udGVudC1sZW5ndGhcIik/KGE9bi5nZXRIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiKSxuLmJvZHk9ZS5zdWJzdHIoYyxhKSk6bi5ib2R5PWUuc3Vic3RyaW5nKGMpLG59fSx7XCIuL0dyYW1tYXJcIjo2LFwiLi9TSVBNZXNzYWdlXCI6MTgsZGVidWc6MzN9XSwxMTpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7RyhcIm5ld1wiKSx0aGlzLnVhPWUsdGhpcy5zdGF0dXM9ay5TVEFUVVNfTlVMTCx0aGlzLmRpYWxvZz1udWxsLHRoaXMuZWFybHlEaWFsb2dzPXt9LHRoaXMuY29ubmVjdGlvbj1udWxsLHRoaXMuaXNfY29uZmlybWVkPSExLHRoaXMubGF0ZV9zZHA9ITEsdGhpcy5ydGNPZmZlckNvbnN0cmFpbnRzPW51bGwsdGhpcy5ydGNBbnN3ZXJDb25zdHJhaW50cz1udWxsLHRoaXMubG9jYWxNZWRpYVN0cmVhbT1udWxsLHRoaXMubG9jYWxNZWRpYVN0cmVhbUxvY2FsbHlHZW5lcmF0ZWQ9ITEsdGhpcy5ydGNSZWFkeT0hMCx0aGlzLnRpbWVycz17YWNrVGltZXI6bnVsbCxleHBpcmVzVGltZXI6bnVsbCxpbnZpdGUyeHhUaW1lcjpudWxsLHVzZXJOb0Fuc3dlclRpbWVyOm51bGx9LHRoaXMuZGlyZWN0aW9uPW51bGwsdGhpcy5sb2NhbF9pZGVudGl0eT1udWxsLHRoaXMucmVtb3RlX2lkZW50aXR5PW51bGwsdGhpcy5zdGFydF90aW1lPW51bGwsdGhpcy5lbmRfdGltZT1udWxsLHRoaXMudG9uZXM9bnVsbCx0aGlzLmF1ZGlvTXV0ZWQ9ITEsdGhpcy52aWRlb011dGVkPSExLHRoaXMubG9jYWxIb2xkPSExLHRoaXMucmVtb3RlSG9sZD0hMSx0aGlzLnNlc3Npb25UaW1lcnM9e2VuYWJsZWQ6dGhpcy51YS5jb25maWd1cmF0aW9uLnNlc3Npb25fdGltZXJzLGRlZmF1bHRFeHBpcmVzOnouU0VTU0lPTl9FWFBJUkVTLGN1cnJlbnRFeHBpcmVzOm51bGwscnVubmluZzohMSxyZWZyZXNoZXI6ITEsdGltZXI6bnVsbH0sdGhpcy5yZWZlclN1YnNjcmliZXJzPXt9LHRoaXMuZGF0YT17fSxGLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbj10aGlzLHI9Sy5UMTt0aGlzLnRpbWVycy5pbnZpdGUyeHhUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uIHMoKXtuLnN0YXR1cz09PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmKGUucmVwbHkoMjAwLG51bGwsW1wiQ29udGFjdDogXCIrbi5jb250YWN0XSx0KSxyPEsuVDImJihyPTIqcixyPksuVDImJihyPUsuVDIpKSxuLnRpbWVycy5pbnZpdGUyeHhUaW1lcj1zZXRUaW1lb3V0KHMscikpfSxyKX1mdW5jdGlvbiBsKCl7dmFyIGU9dGhpczt0aGlzLnRpbWVycy5hY2tUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5zdGF0dXM9PT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJihHKFwibm8gQUNLIHJlY2VpdmVkLCB0ZXJtaW5hdGluZyB0aGUgc2Vzc2lvblwiKSxjbGVhclRpbWVvdXQoZS50aW1lcnMuaW52aXRlMnh4VGltZXIpLHYuY2FsbChlLHouQllFKSx4LmNhbGwoZSxcInJlbW90ZVwiLG51bGwsei5jYXVzZXMuTk9fQUNLKSl9LEsuVElNRVJfSCl9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPXRoaXM7dGhpcy5jb25uZWN0aW9uPW5ldyBXLlJUQ1BlZXJDb25uZWN0aW9uKGUsdCksdGhpcy5jb25uZWN0aW9uLm9uYWRkc3RyZWFtPWZ1bmN0aW9uKGUsdCl7bi5lbWl0KFwiYWRkc3RyZWFtXCIse3N0cmVhbTp0fSl9LHRoaXMuY29ubmVjdGlvbi5vbnJlbW92ZXN0cmVhbT1mdW5jdGlvbihlLHQpe24uZW1pdChcInJlbW92ZXN0cmVhbVwiLHtzdHJlYW06dH0pfSx0aGlzLmNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSx0KXtuLmVtaXQoXCJpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIix7c3RhdGU6dH0pLFwiZmFpbGVkXCI9PT10JiZuLnRlcm1pbmF0ZSh7Y2F1c2U6ei5jYXVzZXMuUlRQX1RJTUVPVVQsc3RhdHVzX2NvZGU6MjAwLHJlYXNvbl9waHJhc2U6ei5jYXVzZXMuUlRQX1RJTUVPVVR9KX19ZnVuY3Rpb24gbyhlLHQsbixyKXtmdW5jdGlvbiBzKHIpe2kub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24obixyKXtpZighcil7aWYoaS5vbmljZWNhbmRpZGF0ZT1udWxsLGwucnRjUmVhZHk9ITAsdCl7dmFyIHM9e29yaWdpbmF0b3I6XCJsb2NhbFwiLHR5cGU6ZSxzZHA6aS5sb2NhbERlc2NyaXB0aW9uLnNkcH07bC5lbWl0KFwic2RwXCIscyksdChzLnNkcCl9dD1udWxsfX0saS5zZXRMb2NhbERlc2NyaXB0aW9uKHIsZnVuY3Rpb24oKXtpZihcImNvbXBsZXRlXCI9PT1pLmljZUdhdGhlcmluZ1N0YXRlKXtpZihsLnJ0Y1JlYWR5PSEwLHQpe3ZhciBuPXtvcmlnaW5hdG9yOlwibG9jYWxcIix0eXBlOmUsc2RwOmkubG9jYWxEZXNjcmlwdGlvbi5zZHB9O2wuZW1pdChcInNkcFwiLG4pLHQobi5zZHApfXQ9bnVsbH19LGZ1bmN0aW9uKGUpe2wucnRjUmVhZHk9ITAsbiYmbihlKX0pfUcoXCJjcmVhdGVMb2NhbERlc2NyaXB0aW9uKClcIik7dmFyIGw9dGhpcyxpPXRoaXMuY29ubmVjdGlvbjtpZih0aGlzLnJ0Y1JlYWR5PSExLFwib2ZmZXJcIj09PWUpaS5jcmVhdGVPZmZlcihzLGZ1bmN0aW9uKGUpe2wucnRjUmVhZHk9ITAsbiYmbihlKX0scik7ZWxzZXtpZihcImFuc3dlclwiIT09ZSl0aHJvdyBuZXcgRXJyb3IoJ2NyZWF0ZUxvY2FsRGVzY3JpcHRpb24oKSB8IHR5cGUgbXVzdCBiZSBcIm9mZmVyXCIgb3IgXCJhbnN3ZXJcIiwgYnV0IFwiJytlKydcIiB3YXMgZ2l2ZW4nKTtpLmNyZWF0ZUFuc3dlcihzLGZ1bmN0aW9uKGUpe2wucnRjUmVhZHk9ITAsbiYmbihlKX0scil9fWZ1bmN0aW9uIHUoZSx0LG4pe3ZhciByLHMsbD1cIlVBU1wiPT09dD9lLnRvX3RhZzplLmZyb21fdGFnLGk9XCJVQVNcIj09PXQ/ZS5mcm9tX3RhZzplLnRvX3RhZyxvPWUuY2FsbF9pZCtsK2k7cmV0dXJuIHM9dGhpcy5lYXJseURpYWxvZ3Nbb10sbj9zPyEwOihzPW5ldyBYKHRoaXMsZSx0LFguQy5TVEFUVVNfRUFSTFkpLHMuZXJyb3I/KEcocy5lcnJvciksVS5jYWxsKHRoaXMsXCJyZW1vdGVcIixlLHouY2F1c2VzLklOVEVSTkFMX0VSUk9SKSwhMSk6KHRoaXMuZWFybHlEaWFsb2dzW29dPXMsITApKToodGhpcy5mcm9tX3RhZz1lLmZyb21fdGFnLHRoaXMudG9fdGFnPWUudG9fdGFnLHM/KHMudXBkYXRlKGUsdCksdGhpcy5kaWFsb2c9cyxkZWxldGUgdGhpcy5lYXJseURpYWxvZ3Nbb10sITApOihyPW5ldyBYKHRoaXMsZSx0KSxyLmVycm9yPyhHKHIuZXJyb3IpLFUuY2FsbCh0aGlzLFwicmVtb3RlXCIsZSx6LmNhdXNlcy5JTlRFUk5BTF9FUlJPUiksITEpOih0aGlzLmRpYWxvZz1yLCEwKSkpfWZ1bmN0aW9uIGEoZSl7ZnVuY3Rpb24gdCh0KXt0PXR8fHt9LGY9ITA7dmFyIG49dC5zdGF0dXNfY29kZXx8NDAzLHI9dC5yZWFzb25fcGhyYXNlfHxcIlwiLHM9dC5leHRyYUhlYWRlcnMmJnQuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdO2lmKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEKXJldHVybiExO2lmKDMwMD5ufHxuPj03MDApdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzX2NvZGU6IFwiK24pO2UucmVwbHkobixyLHMpfWZ1bmN0aW9uIG4oKXtyKGZ1bmN0aW9uKHQpe3ZhciBuPVtcIkNvbnRhY3Q6IFwiK2guY29udGFjdF07RS5jYWxsKGgsZSxuKSxoLmxhdGVfc2RwJiYodD1DLmNhbGwoaCx0KSksZS5yZXBseSgyMDAsbnVsbCxuLHQsZnVuY3Rpb24oKXtoLnN0YXR1cz1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0sscy5jYWxsKGgsZSx0KSxsLmNhbGwoaCl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBtLmNhbGxiYWNrJiZtLmNhbGxiYWNrKCl9LGZ1bmN0aW9uKCl7ZS5yZXBseSg1MDApfSl9ZnVuY3Rpb24gcihlLHQpe2gubGF0ZV9zZHA/by5jYWxsKGgsXCJvZmZlclwiLGUsdCxoLnJ0Y09mZmVyQ29uc3RyYWludHMpOihoLnJlbW90ZUhvbGQ9PT0hMCYmcD09PSExPyhoLnJlbW90ZUhvbGQ9ITEsUC5jYWxsKGgsXCJyZW1vdGVcIikpOmgucmVtb3RlSG9sZD09PSExJiZwPT09ITAmJihoLnJlbW90ZUhvbGQ9ITAsTS5jYWxsKGgsXCJyZW1vdGVcIikpLG8uY2FsbChoLFwiYW5zd2VyXCIsZSx0LGgucnRjQW5zd2VyQ29uc3RyYWludHMpKX1HKFwicmVjZWl2ZVJlaW52aXRlKClcIik7dmFyIGksdSxhLGMsaD10aGlzLGQ9ZS5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikscD0hMSxmPSExLG09e3JlcXVlc3Q6ZSxjYWxsYmFjazp2b2lkIDAscmVqZWN0OnQuYmluZCh0aGlzKX07aWYodGhpcy5lbWl0KFwicmVpbnZpdGVcIixtKSwhZilpZihlLmJvZHkpe2lmKHRoaXMubGF0ZV9zZHA9ITEsXCJhcHBsaWNhdGlvbi9zZHBcIiE9PWQpcmV0dXJuIEcoXCJpbnZhbGlkIENvbnRlbnQtVHlwZVwiKSx2b2lkIGUucmVwbHkoNDE1KTtmb3IoaT1lLnBhcnNlU0RQKCksdT0wO3U8aS5tZWRpYS5sZW5ndGg7dSsrKWlmKGM9aS5tZWRpYVt1XSwtMSE9PXJlLmluZGV4T2YoYy50eXBlKSl7aWYoYT1jLmRpcmVjdGlvbnx8aS5kaXJlY3Rpb258fFwic2VuZHJlY3ZcIixcInNlbmRvbmx5XCIhPT1hJiZcImluYWN0aXZlXCIhPT1hKXtwPSExO2JyZWFrfXA9ITB9dmFyIGc9e29yaWdpbmF0b3I6XCJyZW1vdGVcIix0eXBlOlwib2ZmZXJcIixzZHA6ZS5ib2R5fTt0aGlzLmVtaXQoXCJzZHBcIixnKSx0aGlzLmNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFcuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwib2ZmZXJcIixzZHA6Zy5zZHB9KSxuLGZ1bmN0aW9uKCl7ZS5yZXBseSg0ODgpfSl9ZWxzZSB0aGlzLmxhdGVfc2RwPSEwLG4oKX1mdW5jdGlvbiBjKGUpe2Z1bmN0aW9uIHQodCl7dD10fHx7fSxhPSEwO3ZhciBuPXQuc3RhdHVzX2NvZGV8fDQwMyxyPXQucmVhc29uX3BocmFzZXx8XCJcIixzPXQuZXh0cmFIZWFkZXJzJiZ0LmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXTtpZih0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRClyZXR1cm4hMTtpZigzMDA+bnx8bj49NzAwKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIituKTtlLnJlcGx5KG4scixzKX1HKFwicmVjZWl2ZVVwZGF0ZSgpXCIpO3ZhciBuLHIscyxsLGk9dGhpcyx1PWUuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLGE9ITEsYz0hMSxoPXtyZXF1ZXN0OmUsY2FsbGJhY2s6dm9pZCAwLHJlamVjdDp0LmJpbmQodGhpcyl9O2lmKHRoaXMuZW1pdChcInVwZGF0ZVwiLGgpLCFhKXtpZighZS5ib2R5KXt2YXIgZD1bXTtyZXR1cm4gRS5jYWxsKHRoaXMsZSxkKSx2b2lkIGUucmVwbHkoMjAwLG51bGwsZCl9aWYoXCJhcHBsaWNhdGlvbi9zZHBcIiE9PXUpcmV0dXJuIEcoXCJpbnZhbGlkIENvbnRlbnQtVHlwZVwiKSx2b2lkIGUucmVwbHkoNDE1KTtmb3Iobj1lLnBhcnNlU0RQKCkscj0wO3I8bi5tZWRpYS5sZW5ndGg7cisrKWlmKGw9bi5tZWRpYVtyXSwtMSE9PXJlLmluZGV4T2YobC50eXBlKSl7aWYocz1sLmRpcmVjdGlvbnx8bi5kaXJlY3Rpb258fFwic2VuZHJlY3ZcIixcInNlbmRvbmx5XCIhPT1zJiZcImluYWN0aXZlXCIhPT1zKXtjPSExO2JyZWFrfWM9ITB9dmFyIHA9e29yaWdpbmF0b3I6XCJyZW1vdGVcIix0eXBlOlwib2ZmZXJcIixzZHA6ZS5ib2R5fTt0aGlzLmVtaXQoXCJzZHBcIixwKSx0aGlzLmNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFcuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwib2ZmZXJcIixzZHA6cC5zZHB9KSxmdW5jdGlvbigpe2kucmVtb3RlSG9sZD09PSEwJiZjPT09ITE/KGkucmVtb3RlSG9sZD0hMSxQLmNhbGwoaSxcInJlbW90ZVwiKSk6aS5yZW1vdGVIb2xkPT09ITEmJmM9PT0hMCYmKGkucmVtb3RlSG9sZD0hMCxNLmNhbGwoaSxcInJlbW90ZVwiKSksby5jYWxsKGksXCJhbnN3ZXJcIixmdW5jdGlvbih0KXt2YXIgbj1bXCJDb250YWN0OiBcIitpLmNvbnRhY3RdO0UuY2FsbChpLGUsbiksZS5yZXBseSgyMDAsbnVsbCxuLHQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGguY2FsbGJhY2smJmguY2FsbGJhY2soKX0sZnVuY3Rpb24oKXtlLnJlcGx5KDUwMCl9KX0sZnVuY3Rpb24oKXtlLnJlcGx5KDQ4OCl9LHRoaXMucnRjQW5zd2VyQ29uc3RyYWludHMpfX1mdW5jdGlvbiBoKGUpe2Z1bmN0aW9uIHQodCxuKXt2YXIgbCxpO3JldHVybiBuPW58fHt9LHQ9XCJmdW5jdGlvblwiPT10eXBlb2YgdD90Om51bGwsdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJnRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEPyExOihsPW5ldyByKHRoaXMudWEpLGwub24oXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKGUpe3Mubm90aWZ5KGUucmVzcG9uc2Uuc3RhdHVzX2NvZGUsZS5yZXNwb25zZS5yZWFzb25fcGhyYXNlKX0pLGwub24oXCJhY2NlcHRlZFwiLGZ1bmN0aW9uKGUpe3Mubm90aWZ5KGUucmVzcG9uc2Uuc3RhdHVzX2NvZGUsZS5yZXNwb25zZS5yZWFzb25fcGhyYXNlKX0pLGwub24oXCJmYWlsZWRcIixmdW5jdGlvbihlKXtlLm1lc3NhZ2U/cy5ub3RpZnkoZS5tZXNzYWdlLnN0YXR1c19jb2RlLGUubWVzc2FnZS5yZWFzb25fcGhyYXNlKTpzLm5vdGlmeSg0ODcsZS5jYXVzZSl9KSxlLnJlZmVyX3RvLnVyaS5oYXNIZWFkZXIoXCJyZXBsYWNlc1wiKSYmKGk9ZGVjb2RlVVJJQ29tcG9uZW50KGUucmVmZXJfdG8udXJpLmdldEhlYWRlcihcInJlcGxhY2VzXCIpKSxuLmV4dHJhSGVhZGVycz1uLmV4dHJhSGVhZGVyc3x8W10sbi5leHRyYUhlYWRlcnMucHVzaChcIlJlcGxhY2VzOiBcIitpKSksdm9pZCBsLmNvbm5lY3QoZS5yZWZlcl90by51cmkudG9Bb3IoKSxuLHQpKX1mdW5jdGlvbiBuKCl7cy5ub3RpZnkoNjAzKX1HKFwicmVjZWl2ZVJlZmVyKClcIik7dmFyIHMsbD10aGlzO3JldHVybiB2b2lkIDA9PT10eXBlb2YgZS5yZWZlcl90bz8oRyhcIm5vIFJlZmVyLVRvIGhlYWRlciBmaWVsZCBwcmVzZW50IGluIFJFRkVSXCIpLHZvaWQgZS5yZXBseSg0MDApKTplLnJlZmVyX3RvLnVyaS5zY2hlbWUhPT16LlNJUD8oRyhcIlJlZmVyLVRvIGhlYWRlciBmaWVsZCBwb2ludHMgdG8gYSBub24tU0lQIFVSSSBzY2hlbWVcIiksdm9pZCBlLnJlcGx5KDQxNikpOihlLnJlcGx5KDIwMikscz1uZXcgdGUodGhpcyxlLmNzZXEpLHZvaWQgdGhpcy5lbWl0KFwicmVmZXJcIix7cmVxdWVzdDplLGFjY2VwdDpmdW5jdGlvbihlLG4pe3QuY2FsbChsLGUsbil9LHJlamVjdDpmdW5jdGlvbigpe24uY2FsbChsKX19KSl9ZnVuY3Rpb24gZChlKXtzd2l0Y2goRyhcInJlY2VpdmVOb3RpZnkoKVwiKSx2b2lkIDA9PT10eXBlb2YgZS5ldmVudCYmZS5yZXBseSg0MDApLGUuZXZlbnQuZXZlbnQpe2Nhc2VcInJlZmVyXCI6dmFyIHQ9ZS5ldmVudC5wYXJhbXMuaWQsbj10aGlzLnJlZmVyU3Vic2NyaWJlcnNbdF07aWYoIW4pcmV0dXJuIHZvaWQgZS5yZXBseSg0ODEsXCJTdWJzY3JpcHRpb24gZG9lcyBub3QgZXhpc3RcIik7bi5yZWNlaXZlTm90aWZ5KGUpLGUucmVwbHkoMjAwKTticmVhaztkZWZhdWx0OmUucmVwbHkoNDg5KX19ZnVuY3Rpb24gcChlKXtmdW5jdGlvbiB0KHQpe3ZhciBuO3JldHVybiB0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQ/ITE6KG49bmV3IHIodGhpcy51YSksbi5vbihcImNvbmZpcm1lZFwiLGZ1bmN0aW9uKCl7cy50ZXJtaW5hdGUoKX0pLHZvaWQgbi5pbml0X2luY29taW5nKGUsdCkpfWZ1bmN0aW9uIG4oKXtHKFwiUmVwbGFjZWQgSU5WSVRFIHJlamVjdGVkIGJ5IHRoZSB1c2VyXCIpLGUucmVwbHkoNDg2KX1HKFwicmVjZWl2ZVJlcGxhY2VzKClcIik7dmFyIHM9dGhpczt0aGlzLmVtaXQoXCJyZXBsYWNlc1wiLHtyZXF1ZXN0OmUsYWNjZXB0OmZ1bmN0aW9uKGUpe3QuY2FsbChzLGUpfSxyZWplY3Q6ZnVuY3Rpb24oKXtuLmNhbGwocyl9fSl9ZnVuY3Rpb24gZihlLHQsbil7ZnVuY3Rpb24gcihlKXt1LnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJih1LmxvY2FsTWVkaWFTdHJlYW09ZSxlJiZ1LmNvbm5lY3Rpb24uYWRkU3RyZWFtKGUpLHUuZW1pdChcInBlZXJjb25uZWN0aW9uXCIse3BlZXJjb25uZWN0aW9uOnUuY29ubmVjdGlvbn0pLHcuY2FsbCh1LHUucmVxdWVzdCksby5jYWxsKHUsXCJvZmZlclwiLGwsaSx0KSl9ZnVuY3Rpb24gcygpe3Uuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmVS5jYWxsKHUsXCJsb2NhbFwiLG51bGwsei5jYXVzZXMuVVNFUl9ERU5JRURfTUVESUFfQUNDRVNTKX1mdW5jdGlvbiBsKGUpe3UuaXNDYW5jZWxlZHx8dS5zdGF0dXM9PT1rLlNUQVRVU19URVJNSU5BVEVEfHwodS5yZXF1ZXN0LmJvZHk9ZSx1LnN0YXR1cz1rLlNUQVRVU19JTlZJVEVfU0VOVCx1LmVtaXQoXCJzZW5kaW5nXCIse3JlcXVlc3Q6dS5yZXF1ZXN0fSksYS5zZW5kKCkpfWZ1bmN0aW9uIGkoKXt1LnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJlUuY2FsbCh1LFwic3lzdGVtXCIsbnVsbCx6LmNhdXNlcy5XRUJSVENfRVJST1IpfXZhciB1PXRoaXMsYT1uZXcgUSh1LHRoaXMudWEpO3RoaXMucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUpe20uY2FsbCh1LGUpfSxuP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtyKG4pfSk6ZS5hdWRpb3x8ZS52aWRlbz8odGhpcy5sb2NhbE1lZGlhU3RyZWFtTG9jYWxseUdlbmVyYXRlZD0hMCxXLmdldFVzZXJNZWRpYShlLHIscykpOnIobnVsbCl9ZnVuY3Rpb24gbShlKXtHKFwicmVjZWl2ZUludml0ZVJlc3BvbnNlKClcIik7dmFyIHQsbixyLHM9dGhpcztpZih0aGlzLmRpYWxvZyYmZS5zdGF0dXNfY29kZT49MjAwJiZlLnN0YXR1c19jb2RlPD0yOTkpcmV0dXJuIHRoaXMuZGlhbG9nLmlkLmNhbGxfaWQ9PT1lLmNhbGxfaWQmJnRoaXMuZGlhbG9nLmlkLmxvY2FsX3RhZz09PWUuZnJvbV90YWcmJnRoaXMuZGlhbG9nLmlkLnJlbW90ZV90YWc9PT1lLnRvX3RhZz92b2lkIHYuY2FsbCh0aGlzLHouQUNLKToobj1uZXcgWCh0aGlzLGUsXCJVQUNcIiksdm9pZCAwIT09bi5lcnJvcj92b2lkIEcobi5lcnJvcik6KG4uc2VuZFJlcXVlc3Qoe293bmVyOntzdGF0dXM6ay5TVEFUVVNfVEVSTUlOQVRFRH0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe30sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe30sb25EaWFsb2dFcnJvcjpmdW5jdGlvbigpe30scmVjZWl2ZVJlc3BvbnNlOmZ1bmN0aW9uKCl7fX0sei5BQ0spLHZvaWQgbi5zZW5kUmVxdWVzdCh7b3duZXI6e3N0YXR1czprLlNUQVRVU19URVJNSU5BVEVEfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7fSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7fSxvbkRpYWxvZ0Vycm9yOmZ1bmN0aW9uKCl7fSxyZWNlaXZlUmVzcG9uc2U6ZnVuY3Rpb24oKXt9fSx6LkJZRSkpKTtpZih0aGlzLmlzQ2FuY2VsZWQpcmV0dXJuIHRoaXMuaXNDYW5jZWxlZD0hMSx2b2lkKGUuc3RhdHVzX2NvZGU+PTEwMCYmZS5zdGF0dXNfY29kZTwyMDA/dGhpcy5yZXF1ZXN0LmNhbmNlbCh0aGlzLmNhbmNlbFJlYXNvbik6ZS5zdGF0dXNfY29kZT49MjAwJiZlLnN0YXR1c19jb2RlPDI5OSYmXy5jYWxsKHRoaXMsZSkpO2lmKHRoaXMuc3RhdHVzPT09ay5TVEFUVVNfSU5WSVRFX1NFTlR8fHRoaXMuc3RhdHVzPT09ay5TVEFUVVNfMVhYX1JFQ0VJVkVEKXN3aXRjaCghMCl7Y2FzZS9eMTAwJC8udGVzdChlLnN0YXR1c19jb2RlKTp0aGlzLnN0YXR1cz1rLlNUQVRVU18xWFhfUkVDRUlWRUQ7YnJlYWs7Y2FzZS9eMVswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTppZighZS50b190YWcpe0coXCIxeHggcmVzcG9uc2UgcmVjZWl2ZWQgd2l0aG91dCB0byB0YWdcIik7YnJlYWt9aWYoZS5oYXNIZWFkZXIoXCJjb250YWN0XCIpJiYhdS5jYWxsKHRoaXMsZSxcIlVBQ1wiLCEwKSlicmVhaztpZih0aGlzLnN0YXR1cz1rLlNUQVRVU18xWFhfUkVDRUlWRUQsTi5jYWxsKHRoaXMsXCJyZW1vdGVcIixlKSwhZS5ib2R5KWJyZWFrO3I9e29yaWdpbmF0b3I6XCJyZW1vdGVcIix0eXBlOlwicHJhbnN3ZXJcIixzZHA6ZS5ib2R5fSx0aGlzLmVtaXQoXCJzZHBcIixyKSx0aGlzLmNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFcuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwicHJhbnN3ZXJcIixzZHA6ci5zZHB9KSxudWxsLG51bGwpO2JyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6aWYodGhpcy5zdGF0dXM9ay5TVEFUVVNfQ09ORklSTUVELCFlLmJvZHkpe18uY2FsbCh0aGlzLGUsNDAwLHouY2F1c2VzLk1JU1NJTkdfU0RQKSxVLmNhbGwodGhpcyxcInJlbW90ZVwiLGUsei5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKTticmVha31pZighdS5jYWxsKHRoaXMsZSxcIlVBQ1wiKSlicmVhaztyPXtvcmlnaW5hdG9yOlwicmVtb3RlXCIsdHlwZTpcImFuc3dlclwiLHNkcDplLmJvZHl9LHRoaXMuZW1pdChcInNkcFwiLHIpLHRoaXMuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgVy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6ci5zZHB9KSxmdW5jdGlvbigpe0EuY2FsbChzLGUpLEQuY2FsbChzLFwicmVtb3RlXCIsZSksdi5jYWxsKHMsei5BQ0spLE8uY2FsbChzLFwibG9jYWxcIixudWxsKX0sZnVuY3Rpb24oKXtfLmNhbGwocyxlLDQ4OCxcIk5vdCBBY2NlcHRhYmxlIEhlcmVcIiksVS5jYWxsKHMsXCJyZW1vdGVcIixlLHouY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTil9KTticmVhaztkZWZhdWx0OnQ9Si5zaXBFcnJvckNhdXNlKGUuc3RhdHVzX2NvZGUpLFUuY2FsbCh0aGlzLFwicmVtb3RlXCIsZSx0KX19ZnVuY3Rpb24gZyhlKXtmdW5jdGlvbiB0KGUpe2lmKHIuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmKHYuY2FsbChyLHouQUNLKSwhdSkpe2lmKEEuY2FsbChyLGUpLCFlLmJvZHkpcmV0dXJuIHZvaWQgbigpO2lmKFwiYXBwbGljYXRpb24vc2RwXCIhPT1lLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSlyZXR1cm4gdm9pZCBuKCk7dmFyIHQ9e29yaWdpbmF0b3I6XCJyZW1vdGVcIix0eXBlOlwiYW5zd2VyXCIsc2RwOmUuYm9keX07ci5lbWl0KFwic2RwXCIsdCksci5jb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBXLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcImFuc3dlclwiLHNkcDp0LnNkcH0pLGZ1bmN0aW9uKCl7bC5zdWNjZWVkZWQmJmwuc3VjY2VlZGVkKGUpfSxmdW5jdGlvbigpe24oKX0pfX1mdW5jdGlvbiBuKGUpe2wuZmFpbGVkJiZsLmZhaWxlZChlKX1HKFwic2VuZFJlaW52aXRlKClcIiksZT1lfHx7fTt2YXIgcj10aGlzLHM9ZS5leHRyYUhlYWRlcnN8fFtdLGw9ZS5ldmVudEhhbmRsZXJzfHx7fSxpPWUucnRjT2ZmZXJDb25zdHJhaW50c3x8dGhpcy5ydGNPZmZlckNvbnN0cmFpbnRzfHxudWxsLHU9ITE7cy5wdXNoKFwiQ29udGFjdDogXCIrdGhpcy5jb250YWN0KSxzLnB1c2goXCJDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcFwiKSx0aGlzLnNlc3Npb25UaW1lcnMucnVubmluZyYmcy5wdXNoKFwiU2Vzc2lvbi1FeHBpcmVzOiBcIit0aGlzLnNlc3Npb25UaW1lcnMuY3VycmVudEV4cGlyZXMrXCI7cmVmcmVzaGVyPVwiKyh0aGlzLnNlc3Npb25UaW1lcnMucmVmcmVzaGVyP1widWFjXCI6XCJ1YXNcIikpLG8uY2FsbCh0aGlzLFwib2ZmZXJcIixmdW5jdGlvbihlKXtlPUMuY2FsbChyLGUpO3ZhciBsPW5ldyBaKHIsei5JTlZJVEUpO2wuc2VuZCh7ZXh0cmFIZWFkZXJzOnMsYm9keTplLGV2ZW50SGFuZGxlcnM6e29uU3VjY2Vzc1Jlc3BvbnNlOmZ1bmN0aW9uKGUpe3QoZSksdT0hMH0sb25FcnJvclJlc3BvbnNlOmZ1bmN0aW9uKGUpe24oZSl9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXtyLm9uVHJhbnNwb3J0RXJyb3IoKX0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe3Iub25SZXF1ZXN0VGltZW91dCgpfSxvbkRpYWxvZ0Vycm9yOmZ1bmN0aW9uKCl7ci5vbkRpYWxvZ0Vycm9yKCl9fX0pfSxmdW5jdGlvbigpe24oKX0saSl9ZnVuY3Rpb24gVChlKXtmdW5jdGlvbiB0KGUpe2lmKHIuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmIWEpaWYoQS5jYWxsKHIsZSksdSl7aWYoIWUuYm9keSlyZXR1cm4gdm9pZCBuKCk7aWYoXCJhcHBsaWNhdGlvbi9zZHBcIiE9PWUuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKXJldHVybiB2b2lkIG4oKTt2YXIgdD17b3JpZ2luYXRvcjpcInJlbW90ZVwiLHR5cGU6XCJhbnN3ZXJcIixzZHA6ZS5ib2R5fTtyLmVtaXQoXCJzZHBcIix0KSxyLmNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFcuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwiYW5zd2VyXCIsc2RwOnQuc2RwfSksZnVuY3Rpb24oKXtsLnN1Y2NlZWRlZCYmbC5zdWNjZWVkZWQoZSl9LGZ1bmN0aW9uKCl7bigpfSl9ZWxzZSBsLnN1Y2NlZWRlZCYmbC5zdWNjZWVkZWQoZSl9ZnVuY3Rpb24gbihlKXtsLmZhaWxlZCYmbC5mYWlsZWQoZSl9RyhcInNlbmRVcGRhdGUoKVwiKSxlPWV8fHt9O3ZhciByPXRoaXMscz1lLmV4dHJhSGVhZGVyc3x8W10sbD1lLmV2ZW50SGFuZGxlcnN8fHt9LGk9ZS5ydGNPZmZlckNvbnN0cmFpbnRzfHx0aGlzLnJ0Y09mZmVyQ29uc3RyYWludHN8fG51bGwsdT1lLnNkcE9mZmVyfHwhMSxhPSExO2lmKHMucHVzaChcIkNvbnRhY3Q6IFwiK3RoaXMuY29udGFjdCksdGhpcy5zZXNzaW9uVGltZXJzLnJ1bm5pbmcmJnMucHVzaChcIlNlc3Npb24tRXhwaXJlczogXCIrdGhpcy5zZXNzaW9uVGltZXJzLmN1cnJlbnRFeHBpcmVzK1wiO3JlZnJlc2hlcj1cIisodGhpcy5zZXNzaW9uVGltZXJzLnJlZnJlc2hlcj9cInVhY1wiOlwidWFzXCIpKSx1KXMucHVzaChcIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vc2RwXCIpLG8uY2FsbCh0aGlzLFwib2ZmZXJcIixmdW5jdGlvbihlKXtlPUMuY2FsbChyLGUpO3ZhciBsPW5ldyBaKHIsei5VUERBVEUpO2wuc2VuZCh7ZXh0cmFIZWFkZXJzOnMsYm9keTplLGV2ZW50SGFuZGxlcnM6e29uU3VjY2Vzc1Jlc3BvbnNlOmZ1bmN0aW9uKGUpe3QoZSksYT0hMH0sb25FcnJvclJlc3BvbnNlOmZ1bmN0aW9uKGUpe24oZSl9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXtyLm9uVHJhbnNwb3J0RXJyb3IoKX0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe3Iub25SZXF1ZXN0VGltZW91dCgpfSxvbkRpYWxvZ0Vycm9yOmZ1bmN0aW9uKCl7ci5vbkRpYWxvZ0Vycm9yKCl9fX0pfSxmdW5jdGlvbigpe24oKX0saSk7ZWxzZXt2YXIgYz1uZXcgWihyLHouVVBEQVRFKTtjLnNlbmQoe2V4dHJhSGVhZGVyczpzLGV2ZW50SGFuZGxlcnM6e29uU3VjY2Vzc1Jlc3BvbnNlOmZ1bmN0aW9uKGUpe3QoZSl9LG9uRXJyb3JSZXNwb25zZTpmdW5jdGlvbihlKXtuKGUpfSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7ci5vblRyYW5zcG9ydEVycm9yKCl9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXtyLm9uUmVxdWVzdFRpbWVvdXQoKX0sb25EaWFsb2dFcnJvcjpmdW5jdGlvbigpe3Iub25EaWFsb2dFcnJvcigpfX19KX19ZnVuY3Rpb24gXyhlLHQsbil7RyhcImFjY2VwdEFuZFRlcm1pbmF0ZSgpXCIpO3ZhciByPVtdO3QmJihuPW58fHouUkVBU09OX1BIUkFTRVt0XXx8XCJcIixyLnB1c2goXCJSZWFzb246IFNJUCA7Y2F1c2U9XCIrdCsnOyB0ZXh0PVwiJytuKydcIicpKSwodGhpcy5kaWFsb2d8fHUuY2FsbCh0aGlzLGUsXCJVQUNcIikpJiYodi5jYWxsKHRoaXMsei5BQ0spLHYuY2FsbCh0aGlzLHouQllFLHtleHRyYUhlYWRlcnM6cn0pKSx0aGlzLnN0YXR1cz1rLlNUQVRVU19URVJNSU5BVEVEfWZ1bmN0aW9uIHYoZSx0KXtHKFwic2VuZFJlcXVlc3QoKVwiKTt2YXIgbj1uZXcgWih0aGlzLGUpO24uc2VuZCh0KX1mdW5jdGlvbiBDKGUpe3ZhciB0LG4scjtpZighdGhpcy5sb2NhbEhvbGQmJiF0aGlzLnJlbW90ZUhvbGQpcmV0dXJuIGU7aWYoZT1CLnBhcnNlKGUpLHRoaXMubG9jYWxIb2xkJiYhdGhpcy5yZW1vdGVIb2xkKWZvcihHKFwibWFuZ2xlT2ZmZXIoKSB8IG1lIG9uIGhvbGQsIG1hbmdsaW5nIG9mZmVyXCIpLG49ZS5tZWRpYS5sZW5ndGgsdD0wO24+dDt0Kyspcj1lLm1lZGlhW3RdLC0xIT09cmUuaW5kZXhPZihyLnR5cGUpJiYoci5kaXJlY3Rpb24/XCJzZW5kcmVjdlwiPT09ci5kaXJlY3Rpb24/ci5kaXJlY3Rpb249XCJzZW5kb25seVwiOlwicmVjdm9ubHlcIj09PXIuZGlyZWN0aW9uJiYoci5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTpyLmRpcmVjdGlvbj1cInNlbmRvbmx5XCIpO2Vsc2UgaWYodGhpcy5sb2NhbEhvbGQmJnRoaXMucmVtb3RlSG9sZClmb3IoRyhcIm1hbmdsZU9mZmVyKCkgfCBib3RoIG9uIGhvbGQsIG1hbmdsaW5nIG9mZmVyXCIpLG49ZS5tZWRpYS5sZW5ndGgsdD0wO24+dDt0Kyspcj1lLm1lZGlhW3RdLC0xIT09cmUuaW5kZXhPZihyLnR5cGUpJiYoci5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTtlbHNlIGlmKHRoaXMucmVtb3RlSG9sZClmb3IoRyhcIm1hbmdsZU9mZmVyKCkgfCByZW1vdGUgb24gaG9sZCwgbWFuZ2xpbmcgb2ZmZXJcIiksbj1lLm1lZGlhLmxlbmd0aCx0PTA7bj50O3QrKylyPWUubWVkaWFbdF0sLTEhPT1yZS5pbmRleE9mKHIudHlwZSkmJihyLmRpcmVjdGlvbj9cInNlbmRyZWN2XCI9PT1yLmRpcmVjdGlvbj9yLmRpcmVjdGlvbj1cInJlY3Zvbmx5XCI6XCJyZWN2b25seVwiPT09ci5kaXJlY3Rpb24mJihyLmRpcmVjdGlvbj1cImluYWN0aXZlXCIpOnIuZGlyZWN0aW9uPVwicmVjdm9ubHlcIik7cmV0dXJuIEIud3JpdGUoZSl9ZnVuY3Rpb24gUygpe3ZhciBlPSEwLHQ9ITA7KHRoaXMubG9jYWxIb2xkfHx0aGlzLnJlbW90ZUhvbGQpJiYoZT0hMSx0PSExKSx0aGlzLmF1ZGlvTXV0ZWQmJihlPSExKSx0aGlzLnZpZGVvTXV0ZWQmJih0PSExKSxSLmNhbGwodGhpcywhZSksYi5jYWxsKHRoaXMsIXQpfWZ1bmN0aW9uIEUoZSx0KXtpZih0aGlzLnNlc3Npb25UaW1lcnMuZW5hYmxlZCl7dmFyIG47ZS5zZXNzaW9uX2V4cGlyZXMmJmUuc2Vzc2lvbl9leHBpcmVzPj16Lk1JTl9TRVNTSU9OX0VYUElSRVM/KHRoaXMuc2Vzc2lvblRpbWVycy5jdXJyZW50RXhwaXJlcz1lLnNlc3Npb25fZXhwaXJlcyxuPWUuc2Vzc2lvbl9leHBpcmVzX3JlZnJlc2hlcnx8XCJ1YXNcIik6KHRoaXMuc2Vzc2lvblRpbWVycy5jdXJyZW50RXhwaXJlcz10aGlzLnNlc3Npb25UaW1lcnMuZGVmYXVsdEV4cGlyZXMsbj1cInVhc1wiKSx0LnB1c2goXCJTZXNzaW9uLUV4cGlyZXM6IFwiK3RoaXMuc2Vzc2lvblRpbWVycy5jdXJyZW50RXhwaXJlcytcIjtyZWZyZXNoZXI9XCIrbiksdGhpcy5zZXNzaW9uVGltZXJzLnJlZnJlc2hlcj1cInVhc1wiPT09bix5LmNhbGwodGhpcyl9fWZ1bmN0aW9uIEEoZSl7aWYodGhpcy5zZXNzaW9uVGltZXJzLmVuYWJsZWQpe3ZhciB0O2Uuc2Vzc2lvbl9leHBpcmVzJiZlLnNlc3Npb25fZXhwaXJlcz49ei5NSU5fU0VTU0lPTl9FWFBJUkVTPyh0aGlzLnNlc3Npb25UaW1lcnMuY3VycmVudEV4cGlyZXM9ZS5zZXNzaW9uX2V4cGlyZXMsdD1lLnNlc3Npb25fZXhwaXJlc19yZWZyZXNoZXJ8fFwidWFjXCIpOih0aGlzLnNlc3Npb25UaW1lcnMuY3VycmVudEV4cGlyZXM9dGhpcy5zZXNzaW9uVGltZXJzLmRlZmF1bHRFeHBpcmVzLHQ9XCJ1YWNcIiksdGhpcy5zZXNzaW9uVGltZXJzLnJlZnJlc2hlcj1cInVhY1wiPT09dCx5LmNhbGwodGhpcyl9fWZ1bmN0aW9uIHkoKXt2YXIgZT10aGlzLHQ9dGhpcy5zZXNzaW9uVGltZXJzLmN1cnJlbnRFeHBpcmVzO3RoaXMuc2Vzc2lvblRpbWVycy5ydW5uaW5nPSEwLGNsZWFyVGltZW91dCh0aGlzLnNlc3Npb25UaW1lcnMudGltZXIpLHRoaXMuc2Vzc2lvblRpbWVycy5yZWZyZXNoZXI/dGhpcy5zZXNzaW9uVGltZXJzLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJihHKFwicnVuU2Vzc2lvblRpbWVyKCkgfCBzZW5kaW5nIHNlc3Npb24gcmVmcmVzaCByZXF1ZXN0XCIpLFQuY2FsbChlLHtldmVudEhhbmRsZXJzOntzdWNjZWVkZWQ6ZnVuY3Rpb24odCl7QS5jYWxsKGUsdCl9fX0pKX0sNTAwKnQpOnRoaXMuc2Vzc2lvblRpbWVycy50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYoaihcInJ1blNlc3Npb25UaW1lcigpIHwgdGltZXIgZXhwaXJlZCwgdGVybWluYXRpbmcgdGhlIHNlc3Npb25cIiksZS50ZXJtaW5hdGUoe2NhdXNlOnouY2F1c2VzLlJFUVVFU1RfVElNRU9VVCxzdGF0dXNfY29kZTo0MDgscmVhc29uX3BocmFzZTpcIlNlc3Npb24gVGltZXIgRXhwaXJlZFwifSkpfSwxMTAwKnQpfWZ1bmN0aW9uIFIoZSl7dmFyIHQsbixyLHMsbCxpPXRoaXMuY29ubmVjdGlvbi5nZXRMb2NhbFN0cmVhbXMoKTtmb3Iocj1pLmxlbmd0aCx0PTA7cj50O3QrKylmb3IobD1pW3RdLmdldEF1ZGlvVHJhY2tzKCkscz1sLmxlbmd0aCxuPTA7cz5uO24rKylsW25dLmVuYWJsZWQ9IWV9ZnVuY3Rpb24gYihlKXt2YXIgdCxuLHIscyxsLGk9dGhpcy5jb25uZWN0aW9uLmdldExvY2FsU3RyZWFtcygpO2ZvcihyPWkubGVuZ3RoLHQ9MDtyPnQ7dCsrKWZvcihsPWlbdF0uZ2V0VmlkZW9UcmFja3MoKSxzPWwubGVuZ3RoLG49MDtzPm47bisrKWxbbl0uZW5hYmxlZD0hZX1mdW5jdGlvbiBJKGUsdCl7RyhcIm5ld1JUQ1Nlc3Npb25cIiksdGhpcy51YS5uZXdSVENTZXNzaW9uKHtvcmlnaW5hdG9yOmUsc2Vzc2lvbjp0aGlzLHJlcXVlc3Q6dH0pfWZ1bmN0aW9uIHcoZSl7RyhcInNlc3Npb24gY29ubmVjdGluZ1wiKSx0aGlzLmVtaXQoXCJjb25uZWN0aW5nXCIse3JlcXVlc3Q6ZX0pfWZ1bmN0aW9uIE4oZSx0KXtHKFwic2Vzc2lvbiBwcm9ncmVzc1wiKSx0aGlzLmVtaXQoXCJwcm9ncmVzc1wiLHtvcmlnaW5hdG9yOmUscmVzcG9uc2U6dHx8bnVsbH0pfWZ1bmN0aW9uIEQoZSx0KXtHKFwic2Vzc2lvbiBhY2NlcHRlZFwiKSx0aGlzLnN0YXJ0X3RpbWU9bmV3IERhdGUsdGhpcy5lbWl0KFwiYWNjZXB0ZWRcIix7b3JpZ2luYXRvcjplLHJlc3BvbnNlOnR8fG51bGx9KX1mdW5jdGlvbiBPKGUsdCl7RyhcInNlc3Npb24gY29uZmlybWVkXCIpLHRoaXMuaXNfY29uZmlybWVkPSEwLHRoaXMuZW1pdChcImNvbmZpcm1lZFwiLHtvcmlnaW5hdG9yOmUsYWNrOnR8fG51bGx9KX1mdW5jdGlvbiB4KGUsdCxuKXtHKFwic2Vzc2lvbiBlbmRlZFwiKSx0aGlzLmVuZF90aW1lPW5ldyBEYXRlLHRoaXMuY2xvc2UoKSx0aGlzLmVtaXQoXCJlbmRlZFwiLHtvcmlnaW5hdG9yOmUsbWVzc2FnZTp0fHxudWxsLGNhdXNlOm59KX1mdW5jdGlvbiBVKGUsdCxuKXtHKFwic2Vzc2lvbiBmYWlsZWRcIiksdGhpcy5jbG9zZSgpLHRoaXMuZW1pdChcImZhaWxlZFwiLHtvcmlnaW5hdG9yOmUsbWVzc2FnZTp0fHxudWxsLGNhdXNlOm59KX1mdW5jdGlvbiBNKGUpe0coXCJzZXNzaW9uIG9uaG9sZFwiKSxTLmNhbGwodGhpcyksdGhpcy5lbWl0KFwiaG9sZFwiLHtvcmlnaW5hdG9yOmV9KX1mdW5jdGlvbiBQKGUpe0coXCJzZXNzaW9uIG9udW5ob2xkXCIpLFMuY2FsbCh0aGlzKSx0aGlzLmVtaXQoXCJ1bmhvbGRcIix7b3JpZ2luYXRvcjplfSl9ZnVuY3Rpb24gcShlKXtHKFwic2Vzc2lvbiBvbm11dGVcIiksUy5jYWxsKHRoaXMpLHRoaXMuZW1pdChcIm11dGVkXCIse2F1ZGlvOmUuYXVkaW8sdmlkZW86ZS52aWRlb30pfWZ1bmN0aW9uIEwoZSl7RyhcInNlc3Npb24gb251bm11dGVcIiksUy5jYWxsKHRoaXMpLHRoaXMuZW1pdChcInVubXV0ZWRcIix7YXVkaW86ZS5hdWRpbyx2aWRlbzplLnZpZGVvfSl9dC5leHBvcnRzPXI7dmFyIGs9e1NUQVRVU19OVUxMOjAsU1RBVFVTX0lOVklURV9TRU5UOjEsU1RBVFVTXzFYWF9SRUNFSVZFRDoyLFNUQVRVU19JTlZJVEVfUkVDRUlWRUQ6MyxTVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSOjQsU1RBVFVTX0FOU1dFUkVEOjUsU1RBVFVTX1dBSVRJTkdfRk9SX0FDSzo2LFNUQVRVU19DQU5DRUxFRDo3LFNUQVRVU19URVJNSU5BVEVEOjgsU1RBVFVTX0NPTkZJUk1FRDo5fTtyLkM9azt2YXIgSD1lKFwidXRpbFwiKSxGPWUoXCJldmVudHNcIiksRz1lKFwiZGVidWdcIikoXCJKc1NJUDpSVENTZXNzaW9uXCIpLGo9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6UlRDU2Vzc2lvblwiKTtqLmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKTt2YXIgVz1lKFwicnRjbmluamFcIiksQj1lKFwic2RwLXRyYW5zZm9ybVwiKSx6PWUoXCIuL0NvbnN0YW50c1wiKSxWPWUoXCIuL0V4Y2VwdGlvbnNcIiksWT1lKFwiLi9UcmFuc2FjdGlvbnNcIiksSj1lKFwiLi9VdGlsc1wiKSxLPWUoXCIuL1RpbWVyc1wiKSwkPWUoXCIuL1NJUE1lc3NhZ2VcIiksWD1lKFwiLi9EaWFsb2dcIiksUT1lKFwiLi9SZXF1ZXN0U2VuZGVyXCIpLFo9ZShcIi4vUlRDU2Vzc2lvbi9SZXF1ZXN0XCIpLGVlPWUoXCIuL1JUQ1Nlc3Npb24vRFRNRlwiKSx0ZT1lKFwiLi9SVENTZXNzaW9uL1JlZmVyTm90aWZpZXJcIiksbmU9ZShcIi4vUlRDU2Vzc2lvbi9SZWZlclN1YnNjcmliZXJcIikscmU9W1wiYXVkaW9cIixcInZpZGVvXCJdO0guaW5oZXJpdHMocixGLkV2ZW50RW1pdHRlciksci5wcm90b3R5cGUuaXNJblByb2dyZXNzPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuc3RhdHVzKXtjYXNlIGsuU1RBVFVTX05VTEw6Y2FzZSBrLlNUQVRVU19JTlZJVEVfU0VOVDpjYXNlIGsuU1RBVFVTXzFYWF9SRUNFSVZFRDpjYXNlIGsuU1RBVFVTX0lOVklURV9SRUNFSVZFRDpjYXNlIGsuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUjpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0sci5wcm90b3R5cGUuaXNFc3RhYmxpc2hlZD1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLnN0YXR1cyl7Y2FzZSBrLlNUQVRVU19BTlNXRVJFRDpjYXNlIGsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSzpjYXNlIGsuU1RBVFVTX0NPTkZJUk1FRDpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0sci5wcm90b3R5cGUuaXNFbmRlZD1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLnN0YXR1cyl7Y2FzZSBrLlNUQVRVU19DQU5DRUxFRDpjYXNlIGsuU1RBVFVTX1RFUk1JTkFURUQ6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LHIucHJvdG90eXBlLmlzTXV0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm57YXVkaW86dGhpcy5hdWRpb011dGVkLHZpZGVvOnRoaXMudmlkZW9NdXRlZH19LHIucHJvdG90eXBlLmlzT25Ib2xkPWZ1bmN0aW9uKCl7cmV0dXJue2xvY2FsOnRoaXMubG9jYWxIb2xkLHJlbW90ZTp0aGlzLnJlbW90ZUhvbGR9fSxyLnByb3RvdHlwZS5pc1JlYWR5VG9SZU9mZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucnRjUmVhZHk/dGhpcy5kaWFsb2c/dGhpcy5kaWFsb2cudWFjX3BlbmRpbmdfcmVwbHk9PT0hMHx8dGhpcy5kaWFsb2cudWFzX3BlbmRpbmdfcmVwbHk9PT0hMD8oRyhcImlzUmVhZHlUb1JlT2ZmZXIoKSB8IHRoZXJlIGlzIGFub3RoZXIgSU5WSVRFL1VQREFURSB0cmFuc2FjdGlvbiBpbiBwcm9ncmVzc1wiKSwhMSk6ITA6KEcoXCJpc1JlYWR5VG9SZU9mZmVyKCkgfCBzZXNzaW9uIG5vdCBlc3RhYmxpc2hlZCB5ZXRcIiksITEpOihHKFwiaXNSZWFkeVRvUmVPZmZlcigpIHwgaW50ZXJuYWwgV2ViUlRDIHN0YXR1cyBub3QgcmVhZHlcIiksITEpfSxyLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsdCxuKXtHKFwiY29ubmVjdCgpXCIpLHQ9dHx8e307dmFyIHIscyxsPWUsbz10LmV2ZW50SGFuZGxlcnN8fHt9LHU9dC5leHRyYUhlYWRlcnMmJnQuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLGE9dC5tZWRpYUNvbnN0cmFpbnRzfHx7YXVkaW86ITAsdmlkZW86ITB9LGM9dC5tZWRpYVN0cmVhbXx8bnVsbCxoPXQucGNDb25maWd8fHtpY2VTZXJ2ZXJzOltdfSxkPXQucnRjQ29uc3RyYWludHN8fG51bGwscD10LnJ0Y09mZmVyQ29uc3RyYWludHN8fG51bGw7aWYodGhpcy5ydGNPZmZlckNvbnN0cmFpbnRzPXAsdGhpcy5ydGNBbnN3ZXJDb25zdHJhaW50cz10LnJ0Y0Fuc3dlckNvbnN0cmFpbnRzfHxudWxsLHRoaXMuc2Vzc2lvblRpbWVycy5lbmFibGVkJiZKLmlzRGVjaW1hbCh0LnNlc3Npb25UaW1lcnNFeHBpcmVzKSYmKHQuc2Vzc2lvblRpbWVyc0V4cGlyZXM+PXouTUlOX1NFU1NJT05fRVhQSVJFUz90aGlzLnNlc3Npb25UaW1lcnMuZGVmYXVsdEV4cGlyZXM9dC5zZXNzaW9uVGltZXJzRXhwaXJlczp0aGlzLnNlc3Npb25UaW1lcnMuZGVmYXVsdEV4cGlyZXM9ei5TRVNTSU9OX0VYUElSRVMpLHRoaXMuZGF0YT10LmRhdGF8fHRoaXMuZGF0YSx2b2lkIDA9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKTtpZighVy5oYXNXZWJSVEMoKSl0aHJvdyBuZXcgVi5Ob3RTdXBwb3J0ZWRFcnJvcihcIldlYlJUQyBub3Qgc3VwcG9ydGVkXCIpO2lmKGU9dGhpcy51YS5ub3JtYWxpemVUYXJnZXQoZSksIWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdGFyZ2V0OiBcIitsKTtpZih0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX05VTEwpdGhyb3cgbmV3IFYuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpO2ZvcihyIGluIG8pdGhpcy5vbihyLG9bcl0pO3RoaXMuZnJvbV90YWc9Si5uZXdUYWcoKSx0aGlzLmFub255bW91cz10LmFub255bW91c3x8ITEsdGhpcy5pc0NhbmNlbGVkPSExLHM9e2Zyb21fdGFnOnRoaXMuZnJvbV90YWd9LHRoaXMuY29udGFjdD10aGlzLnVhLmNvbnRhY3QudG9TdHJpbmcoe2Fub255bW91czp0aGlzLmFub255bW91cyxvdXRib3VuZDohMH0pLHRoaXMuYW5vbnltb3VzJiYocy5mcm9tX2Rpc3BsYXlfbmFtZT1cIkFub255bW91c1wiLHMuZnJvbV91cmk9XCJzaXA6YW5vbnltb3VzQGFub255bW91cy5pbnZhbGlkXCIsdS5wdXNoKFwiUC1QcmVmZXJyZWQtSWRlbnRpdHk6IFwiK3RoaXMudWEuY29uZmlndXJhdGlvbi51cmkudG9TdHJpbmcoKSksdS5wdXNoKFwiUHJpdmFjeTogaWRcIikpLHUucHVzaChcIkNvbnRhY3Q6IFwiK3RoaXMuY29udGFjdCksdS5wdXNoKFwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9zZHBcIiksdGhpcy5zZXNzaW9uVGltZXJzLmVuYWJsZWQmJnUucHVzaChcIlNlc3Npb24tRXhwaXJlczogXCIrdGhpcy5zZXNzaW9uVGltZXJzLmRlZmF1bHRFeHBpcmVzKSx0aGlzLnJlcXVlc3Q9bmV3ICQuT3V0Z29pbmdSZXF1ZXN0KHouSU5WSVRFLGUsdGhpcy51YSxzLHUpLHRoaXMuaWQ9dGhpcy5yZXF1ZXN0LmNhbGxfaWQrdGhpcy5mcm9tX3RhZyxpLmNhbGwodGhpcyxoLGQpLHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF09dGhpcyx0aGlzLmRpcmVjdGlvbj1cIm91dGdvaW5nXCIsdGhpcy5sb2NhbF9pZGVudGl0eT10aGlzLnJlcXVlc3QuZnJvbSx0aGlzLnJlbW90ZV9pZGVudGl0eT10aGlzLnJlcXVlc3QudG8sbj9uKHRoaXMpOkkuY2FsbCh0aGlzLFwibG9jYWxcIix0aGlzLnJlcXVlc3QpLGYuY2FsbCh0aGlzLGEscCxjKX0sci5wcm90b3R5cGUuaW5pdF9pbmNvbWluZz1mdW5jdGlvbihlLHQpe0coXCJpbml0X2luY29taW5nKClcIik7dmFyIG4scj10aGlzLHM9ZS5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIik7cmV0dXJuIGUuYm9keSYmXCJhcHBsaWNhdGlvbi9zZHBcIiE9PXM/dm9pZCBlLnJlcGx5KDQxNSk6KHRoaXMuc3RhdHVzPWsuU1RBVFVTX0lOVklURV9SRUNFSVZFRCx0aGlzLmZyb21fdGFnPWUuZnJvbV90YWcsdGhpcy5pZD1lLmNhbGxfaWQrdGhpcy5mcm9tX3RhZyx0aGlzLnJlcXVlc3Q9ZSx0aGlzLmNvbnRhY3Q9dGhpcy51YS5jb250YWN0LnRvU3RyaW5nKCksdGhpcy51YS5zZXNzaW9uc1t0aGlzLmlkXT10aGlzLGUuaGFzSGVhZGVyKFwiZXhwaXJlc1wiKSYmKG49MWUzKmUuZ2V0SGVhZGVyKFwiZXhwaXJlc1wiKSksZS50b190YWc9Si5uZXdUYWcoKSx1LmNhbGwodGhpcyxlLFwiVUFTXCIsITApPyhlLmJvZHk/dGhpcy5sYXRlX3NkcD0hMTp0aGlzLmxhdGVfc2RwPSEwLHRoaXMuc3RhdHVzPWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUix0aGlzLnRpbWVycy51c2VyTm9BbnN3ZXJUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5yZXBseSg0MDgpLFUuY2FsbChyLFwibG9jYWxcIixudWxsLHouY2F1c2VzLk5PX0FOU1dFUil9LHRoaXMudWEuY29uZmlndXJhdGlvbi5ub19hbnN3ZXJfdGltZW91dCksbiYmKHRoaXMudGltZXJzLmV4cGlyZXNUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5zdGF0dXM9PT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVImJihlLnJlcGx5KDQ4NyksVS5jYWxsKHIsXCJzeXN0ZW1cIixudWxsLHouY2F1c2VzLkVYUElSRVMpKTtcbn0sbikpLHRoaXMuZGlyZWN0aW9uPVwiaW5jb21pbmdcIix0aGlzLmxvY2FsX2lkZW50aXR5PWUudG8sdGhpcy5yZW1vdGVfaWRlbnRpdHk9ZS5mcm9tLHQ/dCh0aGlzKTpJLmNhbGwodGhpcyxcInJlbW90ZVwiLGUpLHZvaWQodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYoZS5yZXBseSgxODAsbnVsbCxbXCJDb250YWN0OiBcIityLmNvbnRhY3RdKSxOLmNhbGwocixcImxvY2FsXCIsbnVsbCkpKSk6dm9pZCBlLnJlcGx5KDUwMCxcIk1pc3NpbmcgQ29udGFjdCBoZWFkZXIgZmllbGRcIikpfSxyLnByb3RvdHlwZS5hbnN3ZXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtpZih2LnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQpaWYodi5sb2NhbE1lZGlhU3RyZWFtPWUsZSYmdi5jb25uZWN0aW9uLmFkZFN0cmVhbShlKSx2LnJlcXVlc3QuYm9keXx8di5lbWl0KFwicGVlcmNvbm5lY3Rpb25cIix7cGVlcmNvbm5lY3Rpb246di5jb25uZWN0aW9ufSksdi5sYXRlX3NkcClyKCk7ZWxzZXt2YXIgdD17b3JpZ2luYXRvcjpcInJlbW90ZVwiLHR5cGU6XCJvZmZlclwiLHNkcDpDLmJvZHl9O3YuZW1pdChcInNkcFwiLHQpLHYuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgVy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJvZmZlclwiLHNkcDp0LnNkcH0pLHIsZnVuY3Rpb24oKXtDLnJlcGx5KDQ4OCksVS5jYWxsKHYsXCJzeXN0ZW1cIixudWxsLHouY2F1c2VzLldFQlJUQ19FUlJPUil9KX19ZnVuY3Rpb24gbigpe3Yuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmKEMucmVwbHkoNDgwKSxVLmNhbGwodixcImxvY2FsXCIsbnVsbCx6LmNhdXNlcy5VU0VSX0RFTklFRF9NRURJQV9BQ0NFU1MpKX1mdW5jdGlvbiByKCl7dy5jYWxsKHYsQyksdi5sYXRlX3NkcD9vLmNhbGwodixcIm9mZmVyXCIsYSxjLHYucnRjT2ZmZXJDb25zdHJhaW50cyk6by5jYWxsKHYsXCJhbnN3ZXJcIixhLGMsSSl9ZnVuY3Rpb24gYShlKXtmdW5jdGlvbiB0KCl7di5zdGF0dXM9ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLLHMuY2FsbCh2LEMsZSksbC5jYWxsKHYpLEQuY2FsbCh2LFwibG9jYWxcIil9ZnVuY3Rpb24gbigpe1UuY2FsbCh2LFwic3lzdGVtXCIsbnVsbCx6LmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKX12LnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJihFLmNhbGwodixDLFMpLEMucmVwbHkoMjAwLG51bGwsUyxlLHQsbikpfWZ1bmN0aW9uIGMoKXt2LnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJihDLnJlcGx5KDUwMCksVS5jYWxsKHYsXCJzeXN0ZW1cIixudWxsLHouY2F1c2VzLldFQlJUQ19FUlJPUikpfUcoXCJhbnN3ZXIoKVwiKSxlPWV8fHt9O3ZhciBoLGQscCxmLG09ITEsZz0hMSxUPSExLF89ITEsdj10aGlzLEM9dGhpcy5yZXF1ZXN0LFM9ZS5leHRyYUhlYWRlcnMmJmUuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLEE9ZS5tZWRpYUNvbnN0cmFpbnRzfHx7fSx5PWUubWVkaWFTdHJlYW18fG51bGwsUj1lLnBjQ29uZmlnfHx7aWNlU2VydmVyczpbXX0sYj1lLnJ0Y0NvbnN0cmFpbnRzfHxudWxsLEk9ZS5ydGNBbnN3ZXJDb25zdHJhaW50c3x8bnVsbDtpZih0aGlzLnJ0Y0Fuc3dlckNvbnN0cmFpbnRzPUksdGhpcy5ydGNPZmZlckNvbnN0cmFpbnRzPWUucnRjT2ZmZXJDb25zdHJhaW50c3x8bnVsbCx0aGlzLnNlc3Npb25UaW1lcnMuZW5hYmxlZCYmSi5pc0RlY2ltYWwoZS5zZXNzaW9uVGltZXJzRXhwaXJlcykmJihlLnNlc3Npb25UaW1lcnNFeHBpcmVzPj16Lk1JTl9TRVNTSU9OX0VYUElSRVM/dGhpcy5zZXNzaW9uVGltZXJzLmRlZmF1bHRFeHBpcmVzPWUuc2Vzc2lvblRpbWVyc0V4cGlyZXM6dGhpcy5zZXNzaW9uVGltZXJzLmRlZmF1bHRFeHBpcmVzPXouU0VTU0lPTl9FWFBJUkVTKSx0aGlzLmRhdGE9ZS5kYXRhfHx0aGlzLmRhdGEsXCJpbmNvbWluZ1wiIT09dGhpcy5kaXJlY3Rpb24pdGhyb3cgbmV3IFYuTm90U3VwcG9ydGVkRXJyb3IoJ1wiYW5zd2VyXCIgbm90IHN1cHBvcnRlZCBmb3Igb3V0Z29pbmcgUlRDU2Vzc2lvbicpO2lmKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSKXRocm93IG5ldyBWLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTtpZih0aGlzLnN0YXR1cz1rLlNUQVRVU19BTlNXRVJFRCwhdS5jYWxsKHRoaXMsQyxcIlVBU1wiKSlyZXR1cm4gdm9pZCBDLnJlcGx5KDUwMCxcIkVycm9yIGNyZWF0aW5nIGRpYWxvZ1wiKTtmb3IoY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLnVzZXJOb0Fuc3dlclRpbWVyKSxTLnVuc2hpZnQoXCJDb250YWN0OiBcIit2LmNvbnRhY3QpLHA9Qy5wYXJzZVNEUCgpLEFycmF5LmlzQXJyYXkocC5tZWRpYSl8fChwLm1lZGlhPVtwLm1lZGlhXSksaD1wLm1lZGlhLmxlbmd0aDtoLS07KXt2YXIgTj1wLm1lZGlhW2hdO1wiYXVkaW9cIj09PU4udHlwZSYmKG09ITAsTi5kaXJlY3Rpb24mJlwic2VuZHJlY3ZcIiE9PU4uZGlyZWN0aW9ufHwoVD0hMCkpLFwidmlkZW9cIj09PU4udHlwZSYmKGc9ITAsTi5kaXJlY3Rpb24mJlwic2VuZHJlY3ZcIiE9PU4uZGlyZWN0aW9ufHwoXz0hMCkpfWlmKHkmJkEuYXVkaW89PT0hMSlmb3IoZj15LmdldEF1ZGlvVHJhY2tzKCksZD1mLmxlbmd0aCxoPTA7ZD5oO2grKyl5LnJlbW92ZVRyYWNrKGZbaF0pO2lmKHkmJkEudmlkZW89PT0hMSlmb3IoZj15LmdldFZpZGVvVHJhY2tzKCksZD1mLmxlbmd0aCxoPTA7ZD5oO2grKyl5LnJlbW92ZVRyYWNrKGZbaF0pO3l8fHZvaWQgMCE9PUEuYXVkaW98fChBLmF1ZGlvPVQpLHl8fHZvaWQgMCE9PUEudmlkZW98fChBLnZpZGVvPV8pLHl8fG18fChBLmF1ZGlvPSExKSx5fHxnfHwoQS52aWRlbz0hMSksaS5jYWxsKHRoaXMsUixiKSx5P3QoeSk6QS5hdWRpb3x8QS52aWRlbz8odi5sb2NhbE1lZGlhU3RyZWFtTG9jYWxseUdlbmVyYXRlZD0hMCxXLmdldFVzZXJNZWRpYShBLHQsbikpOnQobnVsbCl9LHIucHJvdG90eXBlLnRlcm1pbmF0ZT1mdW5jdGlvbihlKXtHKFwidGVybWluYXRlKClcIiksZT1lfHx7fTt2YXIgdCxuLHI9ZS5jYXVzZXx8ei5jYXVzZXMuQllFLHM9ZS5zdGF0dXNfY29kZSxsPWUucmVhc29uX3BocmFzZSxpPWUuZXh0cmFIZWFkZXJzJiZlLmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSxvPWUuYm9keSx1PXRoaXM7aWYodGhpcy5zdGF0dXM9PT1rLlNUQVRVU19URVJNSU5BVEVEKXRocm93IG5ldyBWLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTtzd2l0Y2godGhpcy5zdGF0dXMpe2Nhc2Ugay5TVEFUVVNfTlVMTDpjYXNlIGsuU1RBVFVTX0lOVklURV9TRU5UOmNhc2Ugay5TVEFUVVNfMVhYX1JFQ0VJVkVEOmlmKEcoXCJjYW5jZWxpbmcgc2Vzc3Npb25cIikscyYmKDIwMD5zfHxzPj03MDApKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIitzKTtzJiYobD1sfHx6LlJFQVNPTl9QSFJBU0Vbc118fFwiXCIsdD1cIlNJUCA7Y2F1c2U9XCIrcysnIDt0ZXh0PVwiJytsKydcIicpLHRoaXMuc3RhdHVzPT09ay5TVEFUVVNfTlVMTD8odGhpcy5pc0NhbmNlbGVkPSEwLHRoaXMuY2FuY2VsUmVhc29uPXQpOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfSU5WSVRFX1NFTlQ/KHRoaXMuaXNDYW5jZWxlZD0hMCx0aGlzLmNhbmNlbFJlYXNvbj10KTp0aGlzLnN0YXR1cz09PWsuU1RBVFVTXzFYWF9SRUNFSVZFRCYmdGhpcy5yZXF1ZXN0LmNhbmNlbCh0KSx0aGlzLnN0YXR1cz1rLlNUQVRVU19DQU5DRUxFRCxVLmNhbGwodGhpcyxcImxvY2FsXCIsbnVsbCx6LmNhdXNlcy5DQU5DRUxFRCk7YnJlYWs7Y2FzZSBrLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVI6Y2FzZSBrLlNUQVRVU19BTlNXRVJFRDppZihHKFwicmVqZWN0aW5nIHNlc3Npb25cIikscz1zfHw0ODAsMzAwPnN8fHM+PTcwMCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrcyk7dGhpcy5yZXF1ZXN0LnJlcGx5KHMsbCxpLG8pLFUuY2FsbCh0aGlzLFwibG9jYWxcIixudWxsLHouY2F1c2VzLlJFSkVDVEVEKTticmVhaztjYXNlIGsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSzpjYXNlIGsuU1RBVFVTX0NPTkZJUk1FRDppZihHKFwidGVybWluYXRpbmcgc2Vzc2lvblwiKSxsPWUucmVhc29uX3BocmFzZXx8ei5SRUFTT05fUEhSQVNFW3NdfHxcIlwiLHMmJigyMDA+c3x8cz49NzAwKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrcyk7cyYmaS5wdXNoKFwiUmVhc29uOiBTSVAgO2NhdXNlPVwiK3MrJzsgdGV4dD1cIicrbCsnXCInKSx0aGlzLnN0YXR1cz09PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmXCJpbmNvbWluZ1wiPT09dGhpcy5kaXJlY3Rpb24mJnRoaXMucmVxdWVzdC5zZXJ2ZXJfdHJhbnNhY3Rpb24uc3RhdGUhPT1ZLkMuU1RBVFVTX1RFUk1JTkFURUQ/KG49dGhpcy5kaWFsb2csdGhpcy5yZWNlaXZlUmVxdWVzdD1mdW5jdGlvbihlKXtlLm1ldGhvZD09PXouQUNLJiYodi5jYWxsKHRoaXMsei5CWUUse2V4dHJhSGVhZGVyczppLGJvZHk6b30pLG4udGVybWluYXRlKCkpfSx0aGlzLnJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24oKXt0aGlzLnN0YXRlPT09WS5DLlNUQVRVU19URVJNSU5BVEVEJiYodi5jYWxsKHUsei5CWUUse2V4dHJhSGVhZGVyczppLGJvZHk6b30pLG4udGVybWluYXRlKCkpfSkseC5jYWxsKHRoaXMsXCJsb2NhbFwiLG51bGwsciksdGhpcy5kaWFsb2c9bix0aGlzLnVhLmRpYWxvZ3Nbbi5pZC50b1N0cmluZygpXT1uKToodi5jYWxsKHRoaXMsei5CWUUse2V4dHJhSGVhZGVyczppLGJvZHk6b30pLHguY2FsbCh0aGlzLFwibG9jYWxcIixudWxsLHIpKX19LHIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7RyhcImNsb3NlKClcIik7dmFyIGU7aWYodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEKXtpZih0aGlzLmNvbm5lY3Rpb24pdHJ5e3RoaXMuY29ubmVjdGlvbi5jbG9zZSgpfWNhdGNoKHQpe2ooXCJjbG9zZSgpIHwgZXJyb3IgY2xvc2luZyB0aGUgUlRDUGVlckNvbm5lY3Rpb246ICVvXCIsdCl9dGhpcy5sb2NhbE1lZGlhU3RyZWFtJiZ0aGlzLmxvY2FsTWVkaWFTdHJlYW1Mb2NhbGx5R2VuZXJhdGVkJiYoRyhcImNsb3NlKCkgfCBjbG9zaW5nIGxvY2FsIE1lZGlhU3RyZWFtXCIpLFcuY2xvc2VNZWRpYVN0cmVhbSh0aGlzLmxvY2FsTWVkaWFTdHJlYW0pKTtmb3IoZSBpbiB0aGlzLnRpbWVycyljbGVhclRpbWVvdXQodGhpcy50aW1lcnNbZV0pO2NsZWFyVGltZW91dCh0aGlzLnNlc3Npb25UaW1lcnMudGltZXIpLHRoaXMuZGlhbG9nJiYodGhpcy5kaWFsb2cudGVybWluYXRlKCksZGVsZXRlIHRoaXMuZGlhbG9nKTtmb3IoZSBpbiB0aGlzLmVhcmx5RGlhbG9ncyl0aGlzLmVhcmx5RGlhbG9nc1tlXS50ZXJtaW5hdGUoKSxkZWxldGUgdGhpcy5lYXJseURpYWxvZ3NbZV07dGhpcy5zdGF0dXM9ay5TVEFUVVNfVEVSTUlOQVRFRCxkZWxldGUgdGhpcy51YS5zZXNzaW9uc1t0aGlzLmlkXX19LHIucHJvdG90eXBlLnNlbmREVE1GPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpe3ZhciBlLG87aWYoaS5zdGF0dXM9PT1rLlNUQVRVU19URVJNSU5BVEVEfHwhaS50b25lc3x8bD49aS50b25lcy5sZW5ndGgpcmV0dXJuIHZvaWQoaS50b25lcz1udWxsKTtpZihlPWkudG9uZXNbbF0sbCs9MSxcIixcIj09PWUpbz0yZTM7ZWxzZXt2YXIgdT1uZXcgZWUoaSk7dC5ldmVudEhhbmRsZXJzPXtmYWlsZWQ6ZnVuY3Rpb24oKXtpLnRvbmVzPW51bGx9fSx1LnNlbmQoZSx0KSxvPXIrc31zZXRUaW1lb3V0KG4sbyl9RyhcInNlbmREVE1GKCkgfCB0b25lczogJXNcIixlKTt2YXIgcixzLGw9MCxpPXRoaXM7aWYodD10fHx7fSxyPXQuZHVyYXRpb258fG51bGwscz10LmludGVyVG9uZUdhcHx8bnVsbCx2b2lkIDA9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKTtpZih0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRCYmdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0spdGhyb3cgbmV3IFYuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYoZT1lLnRvU3RyaW5nKCkpLCFlfHxcInN0cmluZ1wiIT10eXBlb2YgZXx8IWUubWF0Y2goL15bMC05QS1EIyosXSskL2kpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRvbmVzOiBcIitlKTtpZihyJiYhSi5pc0RlY2ltYWwocikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdG9uZSBkdXJhdGlvbjogXCIrcik7aWYocj9yPGVlLkMuTUlOX0RVUkFUSU9OPyhHKCdcImR1cmF0aW9uXCIgdmFsdWUgaXMgbG93ZXIgdGhhbiB0aGUgbWluaW11bSBhbGxvd2VkLCBzZXR0aW5nIGl0IHRvICcrZWUuQy5NSU5fRFVSQVRJT04rXCIgbWlsbGlzZWNvbmRzXCIpLHI9ZWUuQy5NSU5fRFVSQVRJT04pOnI+ZWUuQy5NQVhfRFVSQVRJT04/KEcoJ1wiZHVyYXRpb25cIiB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gdGhlIG1heGltdW0gYWxsb3dlZCwgc2V0dGluZyBpdCB0byAnK2VlLkMuTUFYX0RVUkFUSU9OK1wiIG1pbGxpc2Vjb25kc1wiKSxyPWVlLkMuTUFYX0RVUkFUSU9OKTpyPU1hdGguYWJzKHIpOnI9ZWUuQy5ERUZBVUxUX0RVUkFUSU9OLHQuZHVyYXRpb249cixzJiYhSi5pc0RlY2ltYWwocykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgaW50ZXJUb25lR2FwOiBcIitzKTtyZXR1cm4gcz9zPGVlLkMuTUlOX0lOVEVSX1RPTkVfR0FQPyhHKCdcImludGVyVG9uZUdhcFwiIHZhbHVlIGlzIGxvd2VyIHRoYW4gdGhlIG1pbmltdW0gYWxsb3dlZCwgc2V0dGluZyBpdCB0byAnK2VlLkMuTUlOX0lOVEVSX1RPTkVfR0FQK1wiIG1pbGxpc2Vjb25kc1wiKSxzPWVlLkMuTUlOX0lOVEVSX1RPTkVfR0FQKTpzPU1hdGguYWJzKHMpOnM9ZWUuQy5ERUZBVUxUX0lOVEVSX1RPTkVfR0FQLHRoaXMudG9uZXM/dm9pZCh0aGlzLnRvbmVzKz1lKToodGhpcy50b25lcz1lLHZvaWQgbigpKX0sci5wcm90b3R5cGUubXV0ZT1mdW5jdGlvbihlKXtHKFwibXV0ZSgpXCIpLGU9ZXx8e2F1ZGlvOiEwLHZpZGVvOiExfTt2YXIgdD0hMSxuPSExO3RoaXMuYXVkaW9NdXRlZD09PSExJiZlLmF1ZGlvJiYodD0hMCx0aGlzLmF1ZGlvTXV0ZWQ9ITAsUi5jYWxsKHRoaXMsITApKSx0aGlzLnZpZGVvTXV0ZWQ9PT0hMSYmZS52aWRlbyYmKG49ITAsdGhpcy52aWRlb011dGVkPSEwLGIuY2FsbCh0aGlzLCEwKSksdCE9PSEwJiZuIT09ITB8fHEuY2FsbCh0aGlzLHthdWRpbzp0LHZpZGVvOm59KX0sci5wcm90b3R5cGUudW5tdXRlPWZ1bmN0aW9uKGUpe0coXCJ1bm11dGUoKVwiKSxlPWV8fHthdWRpbzohMCx2aWRlbzohMH07dmFyIHQ9ITEsbj0hMTt0aGlzLmF1ZGlvTXV0ZWQ9PT0hMCYmZS5hdWRpbyYmKHQ9ITAsdGhpcy5hdWRpb011dGVkPSExLHRoaXMubG9jYWxIb2xkPT09ITEmJlIuY2FsbCh0aGlzLCExKSksdGhpcy52aWRlb011dGVkPT09ITAmJmUudmlkZW8mJihuPSEwLHRoaXMudmlkZW9NdXRlZD0hMSx0aGlzLmxvY2FsSG9sZD09PSExJiZiLmNhbGwodGhpcywhMSkpLHQhPT0hMCYmbiE9PSEwfHxMLmNhbGwodGhpcyx7YXVkaW86dCx2aWRlbzpufSl9LHIucHJvdG90eXBlLmhvbGQ9ZnVuY3Rpb24oZSx0KXtHKFwiaG9sZCgpXCIpLGU9ZXx8e307dmFyIG4scj10aGlzO3JldHVybiB0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQ/ITE6dGhpcy5sb2NhbEhvbGQ9PT0hMD8hMTp0aGlzLmlzUmVhZHlUb1JlT2ZmZXIoKT8odGhpcy5sb2NhbEhvbGQ9ITAsTS5jYWxsKHRoaXMsXCJsb2NhbFwiKSxuPXtzdWNjZWVkZWQ6ZnVuY3Rpb24oKXt0JiZ0KCl9LGZhaWxlZDpmdW5jdGlvbigpe3IudGVybWluYXRlKHtjYXVzZTp6LmNhdXNlcy5XRUJSVENfRVJST1Isc3RhdHVzX2NvZGU6NTAwLHJlYXNvbl9waHJhc2U6XCJIb2xkIEZhaWxlZFwifSl9fSxlLnVzZVVwZGF0ZT9ULmNhbGwodGhpcyx7c2RwT2ZmZXI6ITAsZXZlbnRIYW5kbGVyczpuLGV4dHJhSGVhZGVyczplLmV4dHJhSGVhZGVyc30pOmcuY2FsbCh0aGlzLHtldmVudEhhbmRsZXJzOm4sZXh0cmFIZWFkZXJzOmUuZXh0cmFIZWFkZXJzfSksITApOiExfSxyLnByb3RvdHlwZS51bmhvbGQ9ZnVuY3Rpb24oZSx0KXtHKFwidW5ob2xkKClcIiksZT1lfHx7fTt2YXIgbixyPXRoaXM7cmV0dXJuIHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZ0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRD8hMTp0aGlzLmxvY2FsSG9sZD09PSExPyExOnRoaXMuaXNSZWFkeVRvUmVPZmZlcigpPyh0aGlzLmxvY2FsSG9sZD0hMSxQLmNhbGwodGhpcyxcImxvY2FsXCIpLG49e3N1Y2NlZWRlZDpmdW5jdGlvbigpe3QmJnQoKX0sZmFpbGVkOmZ1bmN0aW9uKCl7ci50ZXJtaW5hdGUoe2NhdXNlOnouY2F1c2VzLldFQlJUQ19FUlJPUixzdGF0dXNfY29kZTo1MDAscmVhc29uX3BocmFzZTpcIlVuaG9sZCBGYWlsZWRcIn0pfX0sZS51c2VVcGRhdGU/VC5jYWxsKHRoaXMse3NkcE9mZmVyOiEwLGV2ZW50SGFuZGxlcnM6bixleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnN9KTpnLmNhbGwodGhpcyx7ZXZlbnRIYW5kbGVyczpuLGV4dHJhSGVhZGVyczplLmV4dHJhSGVhZGVyc30pLCEwKTohMX0sci5wcm90b3R5cGUucmVuZWdvdGlhdGU9ZnVuY3Rpb24oZSx0KXtHKFwicmVuZWdvdGlhdGUoKVwiKSxlPWV8fHt9O3ZhciBuLHI9dGhpcyxzPWUucnRjT2ZmZXJDb25zdHJhaW50c3x8bnVsbDtyZXR1cm4gdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJnRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEPyExOnRoaXMuaXNSZWFkeVRvUmVPZmZlcigpPyhuPXtzdWNjZWVkZWQ6ZnVuY3Rpb24oKXt0JiZ0KCl9LGZhaWxlZDpmdW5jdGlvbigpe3IudGVybWluYXRlKHtjYXVzZTp6LmNhdXNlcy5XRUJSVENfRVJST1Isc3RhdHVzX2NvZGU6NTAwLHJlYXNvbl9waHJhc2U6XCJNZWRpYSBSZW5lZ290aWF0aW9uIEZhaWxlZFwifSl9fSxTLmNhbGwodGhpcyksZS51c2VVcGRhdGU/VC5jYWxsKHRoaXMse3NkcE9mZmVyOiEwLGV2ZW50SGFuZGxlcnM6bixydGNPZmZlckNvbnN0cmFpbnRzOnMsZXh0cmFIZWFkZXJzOmUuZXh0cmFIZWFkZXJzfSk6Zy5jYWxsKHRoaXMse2V2ZW50SGFuZGxlcnM6bixydGNPZmZlckNvbnN0cmFpbnRzOnMsZXh0cmFIZWFkZXJzOmUuZXh0cmFIZWFkZXJzfSksITApOiExfSxyLnByb3RvdHlwZS5yZWZlcj1mdW5jdGlvbihlLHQpe0coXCJyZWZlcigpXCIpO3ZhciBuLHIscz10aGlzLGw9ZTtpZih0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQpcmV0dXJuITE7aWYoZT10aGlzLnVhLm5vcm1hbGl6ZVRhcmdldChlKSwhZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0YXJnZXQ6IFwiK2wpO3JldHVybiBuPW5ldyBuZSh0aGlzKSxuLnNlbmRSZWZlcihlLHQpLHI9bi5vdXRnb2luZ1JlcXVlc3QuY3NlcSx0aGlzLnJlZmVyU3Vic2NyaWJlcnNbcl09bixuLm9uKFwicmVxdWVzdEZhaWxlZFwiLGZ1bmN0aW9uKCl7ZGVsZXRlIHMucmVmZXJTdWJzY3JpYmVyc1tyXX0pLG4ub24oXCJhY2NlcHRlZFwiLGZ1bmN0aW9uKCl7ZGVsZXRlIHMucmVmZXJTdWJzY3JpYmVyc1tyXX0pLG4ub24oXCJmYWlsZWRcIixmdW5jdGlvbigpe2RlbGV0ZSBzLnJlZmVyU3Vic2NyaWJlcnNbcl19KSxufSxyLnByb3RvdHlwZS5yZWNlaXZlUmVxdWVzdD1mdW5jdGlvbihlKXtHKFwicmVjZWl2ZVJlcXVlc3QoKVwiKTt2YXIgdCxuPXRoaXM7aWYoZS5tZXRob2Q9PT16LkNBTkNFTCl0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUiYmdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19BTlNXRVJFRHx8KHRoaXMuc3RhdHVzPWsuU1RBVFVTX0NBTkNFTEVELHRoaXMucmVxdWVzdC5yZXBseSg0ODcpLFUuY2FsbCh0aGlzLFwicmVtb3RlXCIsZSx6LmNhdXNlcy5DQU5DRUxFRCkpO2Vsc2Ugc3dpdGNoKGUubWV0aG9kKXtjYXNlIHouQUNLOmlmKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLKXJldHVybjtpZih0aGlzLnN0YXR1cz1rLlNUQVRVU19DT05GSVJNRUQsY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmFja1RpbWVyKSxjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuaW52aXRlMnh4VGltZXIpLHRoaXMubGF0ZV9zZHApe2lmKCFlLmJvZHkpe3RoaXMudGVybWluYXRlKHtjYXVzZTp6LmNhdXNlcy5NSVNTSU5HX1NEUCxzdGF0dXNfY29kZTo0MDB9KTticmVha312YXIgcj17b3JpZ2luYXRvcjpcInJlbW90ZVwiLHR5cGU6XCJhbnN3ZXJcIixzZHA6ZS5ib2R5fTt0aGlzLmVtaXQoXCJzZHBcIixyKSx0aGlzLmNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFcuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwiYW5zd2VyXCIsc2RwOnIuc2RwfSksZnVuY3Rpb24oKXtuLmlzX2NvbmZpcm1lZHx8Ty5jYWxsKG4sXCJyZW1vdGVcIixlKX0sZnVuY3Rpb24oKXtuLnRlcm1pbmF0ZSh7Y2F1c2U6ei5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OLHN0YXR1c19jb2RlOjQ4OH0pfSl9ZWxzZSB0aGlzLmlzX2NvbmZpcm1lZHx8Ty5jYWxsKHRoaXMsXCJyZW1vdGVcIixlKTticmVhaztjYXNlIHouQllFOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfQ09ORklSTUVEPyhlLnJlcGx5KDIwMCkseC5jYWxsKHRoaXMsXCJyZW1vdGVcIixlLHouY2F1c2VzLkJZRSkpOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfSU5WSVRFX1JFQ0VJVkVEPyhlLnJlcGx5KDIwMCksdGhpcy5yZXF1ZXN0LnJlcGx5KDQ4NyxcIkJZRSBSZWNlaXZlZFwiKSx4LmNhbGwodGhpcyxcInJlbW90ZVwiLGUsei5jYXVzZXMuQllFKSk6ZS5yZXBseSg0MDMsXCJXcm9uZyBTdGF0dXNcIik7YnJlYWs7Y2FzZSB6LklOVklURTp0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0NPTkZJUk1FRD9lLmhhc0hlYWRlcihcInJlcGxhY2VzXCIpP3AuY2FsbCh0aGlzLGUpOmEuY2FsbCh0aGlzLGUpOmUucmVwbHkoNDAzLFwiV3JvbmcgU3RhdHVzXCIpO2JyZWFrO2Nhc2Ugei5JTkZPOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfQ09ORklSTUVEfHx0aGlzLnN0YXR1cz09PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDS3x8dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19JTlZJVEVfUkVDRUlWRUQ/KHQ9ZS5nZXRIZWFkZXIoXCJjb250ZW50LXR5cGVcIiksdCYmdC5tYXRjaCgvXmFwcGxpY2F0aW9uXFwvZHRtZi1yZWxheS9pKT9uZXcgZWUodGhpcykuaW5pdF9pbmNvbWluZyhlKTplLnJlcGx5KDQxNSkpOmUucmVwbHkoNDAzLFwiV3JvbmcgU3RhdHVzXCIpO2JyZWFrO2Nhc2Ugei5VUERBVEU6dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19DT05GSVJNRUQ/Yy5jYWxsKHRoaXMsZSk6ZS5yZXBseSg0MDMsXCJXcm9uZyBTdGF0dXNcIik7YnJlYWs7Y2FzZSB6LlJFRkVSOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfQ09ORklSTUVEP2guY2FsbCh0aGlzLGUpOmUucmVwbHkoNDAzLFwiV3JvbmcgU3RhdHVzXCIpO2JyZWFrO2Nhc2Ugei5OT1RJRlk6dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19DT05GSVJNRUQ/ZC5jYWxsKHRoaXMsZSk6ZS5yZXBseSg0MDMsXCJXcm9uZyBTdGF0dXNcIik7YnJlYWs7ZGVmYXVsdDplLnJlcGx5KDUwMSl9fSxyLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7aihcIm9uVHJhbnNwb3J0RXJyb3IoKVwiKSx0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJnRoaXMudGVybWluYXRlKHtzdGF0dXNfY29kZTo1MDAscmVhc29uX3BocmFzZTp6LmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SLGNhdXNlOnouY2F1c2VzLkNPTk5FQ1RJT05fRVJST1J9KX0sci5wcm90b3R5cGUub25SZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe0coXCJvblJlcXVlc3RUaW1lb3V0XCIpLHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmdGhpcy50ZXJtaW5hdGUoe3N0YXR1c19jb2RlOjQwOCxyZWFzb25fcGhyYXNlOnouY2F1c2VzLlJFUVVFU1RfVElNRU9VVCxjYXVzZTp6LmNhdXNlcy5SRVFVRVNUX1RJTUVPVVR9KX0sci5wcm90b3R5cGUub25EaWFsb2dFcnJvcj1mdW5jdGlvbigpe2ooXCJvbkRpYWxvZ0Vycm9yKClcIiksdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiZ0aGlzLnRlcm1pbmF0ZSh7c3RhdHVzX2NvZGU6NTAwLHJlYXNvbl9waHJhc2U6ei5jYXVzZXMuRElBTE9HX0VSUk9SLGNhdXNlOnouY2F1c2VzLkRJQUxPR19FUlJPUn0pfSxyLnByb3RvdHlwZS5uZXdEVE1GPWZ1bmN0aW9uKGUpe0coXCJuZXdEVE1GKClcIiksdGhpcy5lbWl0KFwibmV3RFRNRlwiLGUpfSxyLnByb3RvdHlwZS5yZXNldExvY2FsTWVkaWE9ZnVuY3Rpb24oKXtHKFwicmVzZXRMb2NhbE1lZGlhKClcIiksdGhpcy5sb2NhbEhvbGQ9ITEsdGhpcy5hdWRpb011dGVkPSExLHRoaXMudmlkZW9NdXRlZD0hMSxTLmNhbGwodGhpcyl9fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL0RpYWxvZ1wiOjIsXCIuL0V4Y2VwdGlvbnNcIjo1LFwiLi9SVENTZXNzaW9uL0RUTUZcIjoxMixcIi4vUlRDU2Vzc2lvbi9SZWZlck5vdGlmaWVyXCI6MTMsXCIuL1JUQ1Nlc3Npb24vUmVmZXJTdWJzY3JpYmVyXCI6MTQsXCIuL1JUQ1Nlc3Npb24vUmVxdWVzdFwiOjE1LFwiLi9SZXF1ZXN0U2VuZGVyXCI6MTcsXCIuL1NJUE1lc3NhZ2VcIjoxOCxcIi4vVGltZXJzXCI6MjAsXCIuL1RyYW5zYWN0aW9uc1wiOjIxLFwiLi9VdGlsc1wiOjI1LGRlYnVnOjMzLGV2ZW50czoyOCxydGNuaW5qYTozOCxcInNkcC10cmFuc2Zvcm1cIjo0NCx1dGlsOjMyfV0sMTI6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe3RoaXMub3duZXI9ZSx0aGlzLmRpcmVjdGlvbj1udWxsLHRoaXMudG9uZT1udWxsLHRoaXMuZHVyYXRpb249bnVsbH10LmV4cG9ydHM9cjt2YXIgcz17TUlOX0RVUkFUSU9OOjcwLE1BWF9EVVJBVElPTjo2ZTMsREVGQVVMVF9EVVJBVElPTjoxMDAsTUlOX0lOVEVSX1RPTkVfR0FQOjUwLERFRkFVTFRfSU5URVJfVE9ORV9HQVA6NTAwfTtyLkM9czt2YXIgbD1lKFwiZGVidWdcIikoXCJKc1NJUDpSVENTZXNzaW9uOkRUTUZcIiksaT1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpSVENTZXNzaW9uOkRUTUZcIik7aS5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7dmFyIG89ZShcIi4uL0NvbnN0YW50c1wiKSx1PWUoXCIuLi9FeGNlcHRpb25zXCIpLGE9ZShcIi4uL1JUQ1Nlc3Npb25cIik7ci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlLHQpe3ZhciBuLHI7aWYodm9pZCAwPT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGVub3VnaCBhcmd1bWVudHNcIik7aWYodGhpcy5kaXJlY3Rpb249XCJvdXRnb2luZ1wiLHRoaXMub3duZXIuc3RhdHVzIT09YS5DLlNUQVRVU19DT05GSVJNRUQmJnRoaXMub3duZXIuc3RhdHVzIT09YS5DLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0spdGhyb3cgbmV3IHUuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5vd25lci5zdGF0dXMpO2lmKHQ9dHx8e30sbj10LmV4dHJhSGVhZGVycz90LmV4dHJhSGVhZGVycy5zbGljZSgpOltdLHRoaXMuZXZlbnRIYW5kbGVycz10LmV2ZW50SGFuZGxlcnN8fHt9LFwic3RyaW5nXCI9PXR5cGVvZiBlKWU9ZS50b1VwcGVyQ2FzZSgpO2Vsc2V7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdG9uZTogXCIrZSk7ZT1lLnRvU3RyaW5nKCl9aWYoIWUubWF0Y2goL15bMC05QS1EIypdJC8pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRvbmU6IFwiK2UpO3RoaXMudG9uZT1lLHRoaXMuZHVyYXRpb249dC5kdXJhdGlvbixuLnB1c2goXCJDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2R0bWYtcmVsYXlcIikscj1cIlNpZ25hbD1cIit0aGlzLnRvbmUrXCJcXHJcXG5cIixyKz1cIkR1cmF0aW9uPVwiK3RoaXMuZHVyYXRpb24sdGhpcy5vd25lci5uZXdEVE1GKHtvcmlnaW5hdG9yOlwibG9jYWxcIixkdG1mOnRoaXMscmVxdWVzdDp0aGlzLnJlcXVlc3R9KSx0aGlzLm93bmVyLmRpYWxvZy5zZW5kUmVxdWVzdCh0aGlzLG8uSU5GTyx7ZXh0cmFIZWFkZXJzOm4sYm9keTpyfSl9LHIucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlKXtzd2l0Y2goITApe2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTpsKFwib25TdWNjZXNzUmVzcG9uc2VcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uU3VjY2Vzc1Jlc3BvbnNlJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25TdWNjZXNzUmVzcG9uc2UoZSk7YnJlYWs7ZGVmYXVsdDp0aGlzLmV2ZW50SGFuZGxlcnMub25FcnJvclJlc3BvbnNlJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25FcnJvclJlc3BvbnNlKGUpfX0sci5wcm90b3R5cGUub25SZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe2koXCJvblJlcXVlc3RUaW1lb3V0XCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vblJlcXVlc3RUaW1lb3V0JiZ0aGlzLmV2ZW50SGFuZGxlcnMub25SZXF1ZXN0VGltZW91dCgpfSxyLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7aShcIm9uVHJhbnNwb3J0RXJyb3JcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uVHJhbnNwb3J0RXJyb3ImJnRoaXMuZXZlbnRIYW5kbGVycy5vblRyYW5zcG9ydEVycm9yKCl9LHIucHJvdG90eXBlLm9uRGlhbG9nRXJyb3I9ZnVuY3Rpb24oKXtpKFwib25EaWFsb2dFcnJvclwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25EaWFsb2dFcnJvciYmdGhpcy5ldmVudEhhbmRsZXJzLm9uRGlhbG9nRXJyb3IoKX0sci5wcm90b3R5cGUuaW5pdF9pbmNvbWluZz1mdW5jdGlvbihlKXt2YXIgdCxuPS9eKFNpZ25hbFxccyo/PVxccyo/KShbMC05QS1EIypdezF9KShcXHMpPy4qLyxyPS9eKER1cmF0aW9uXFxzPz1cXHM/KShbMC05XXsxLDR9KShcXHMpPy4qLzt0aGlzLmRpcmVjdGlvbj1cImluY29taW5nXCIsdGhpcy5yZXF1ZXN0PWUsZS5yZXBseSgyMDApLGUuYm9keSYmKHQ9ZS5ib2R5LnNwbGl0KFwiXFxuXCIpLHQubGVuZ3RoPj0xJiZuLnRlc3QodFswXSkmJih0aGlzLnRvbmU9dFswXS5yZXBsYWNlKG4sXCIkMlwiKSksdC5sZW5ndGg+PTImJnIudGVzdCh0WzFdKSYmKHRoaXMuZHVyYXRpb249cGFyc2VJbnQodFsxXS5yZXBsYWNlKHIsXCIkMlwiKSwxMCkpKSx0aGlzLmR1cmF0aW9ufHwodGhpcy5kdXJhdGlvbj1zLkRFRkFVTFRfRFVSQVRJT04pLHRoaXMudG9uZT90aGlzLm93bmVyLm5ld0RUTUYoe29yaWdpbmF0b3I6XCJyZW1vdGVcIixkdG1mOnRoaXMscmVxdWVzdDplfSk6bChcImludmFsaWQgSU5GTyBEVE1GIHJlY2VpdmVkLCBkaXNjYXJkZWRcIil9fSx7XCIuLi9Db25zdGFudHNcIjoxLFwiLi4vRXhjZXB0aW9uc1wiOjUsXCIuLi9SVENTZXNzaW9uXCI6MTEsZGVidWc6MzN9XSwxMzpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4pe3RoaXMuc2Vzc2lvbj1lLHRoaXMuaWQ9dCx0aGlzLmV4cGlyZXM9bnx8cy5leHBpcmVzLHRoaXMuYWN0aXZlPSEwLHRoaXMubm90aWZ5KDEwMCl9dC5leHBvcnRzPXI7dmFyIHM9e2V2ZW50X3R5cGU6XCJyZWZlclwiLGJvZHlfdHlwZTpcIm1lc3NhZ2Uvc2lwZnJhZzt2ZXJzaW9uPTIuMFwiLGV4cGlyZXM6MzAwfSxsPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlJUQ1Nlc3Npb246UmVmZXJOb3RpZmllclwiKSxpPWUoXCIuLi9Db25zdGFudHNcIiksbz1lKFwiLi9SZXF1ZXN0XCIpO3IucHJvdG90eXBlLm5vdGlmeT1mdW5jdGlvbihlLHQpe2woXCJub3RpZnkoKVwiKTt2YXIgbixyPXRoaXM7aWYodGhpcy5hY3RpdmUhPT0hMSl7dD10fHxpLlJFQVNPTl9QSFJBU0VbZV18fFwiXCIsbj1lPj0yMDA/XCJ0ZXJtaW5hdGVkO3JlYXNvbj1ub3Jlc291cmNlXCI6XCJhY3RpdmU7ZXhwaXJlcz1cIit0aGlzLmV4cGlyZXM7dmFyIHU9bmV3IG8odGhpcy5zZXNzaW9uLGkuTk9USUZZKTt1LnNlbmQoe2V4dHJhSGVhZGVyczpbXCJFdmVudDogXCIrcy5ldmVudF90eXBlK1wiO2lkPVwiK3IuaWQsXCJTdWJzY3JpcHRpb24tU3RhdGU6IFwiK24sXCJDb250ZW50LVR5cGU6IFwiK3MuYm9keV90eXBlXSxib2R5OlwiU0lQLzIuMCBcIitlK1wiIFwiK3QsZXZlbnRIYW5kbGVyczp7b25FcnJvclJlc3BvbnNlOmZ1bmN0aW9uKCl7ci5hY3RpdmU9ITF9fX0pfX19LHtcIi4uL0NvbnN0YW50c1wiOjEsXCIuL1JlcXVlc3RcIjoxNSxkZWJ1ZzozM31dLDE0OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXt0aGlzLnNlc3Npb249ZSx0aGlzLnRpbWVyPW51bGwsdGhpcy5vdXRnb2luZ1JlcXVlc3Q9bnVsbCxvLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpfWZ1bmN0aW9uIHMoKXtjb25zb2xlLmxvZyhcInJlbW92ZVN1YnNjcmliZXIoKVwiKSxjbGVhclRpbWVvdXQodGhpcy50aW1lciksdGhpcy5zZXNzaW9uLnJlZmVyU3Vic2NyaWJlcj1udWxsfXQuZXhwb3J0cz1yO3ZhciBsPXtleHBpcmVzOjEyMH0saT1lKFwidXRpbFwiKSxvPWUoXCJldmVudHNcIiksdT1lKFwiZGVidWdcIikoXCJKc1NJUDpSVENTZXNzaW9uOlJlZmVyU3Vic2NyaWJlclwiKSxhPWUoXCIuLi9Db25zdGFudHNcIiksYz1lKFwiLi4vR3JhbW1hclwiKSxoPWUoXCIuL1JlcXVlc3RcIik7aS5pbmhlcml0cyhyLG8uRXZlbnRFbWl0dGVyKSxyLnByb3RvdHlwZS5zZW5kUmVmZXI9ZnVuY3Rpb24oZSx0KXt1KFwic2VuZFJlZmVyKClcIik7dmFyIG4scixpLG89bnVsbCxjPXRoaXM7dD10fHx7fSxuPXQuZXh0cmFIZWFkZXJzP3QuZXh0cmFIZWFkZXJzLnNsaWNlKCk6W10scj10LmV2ZW50SGFuZGxlcnN8fHt9O2Zvcih2YXIgZCBpbiByKXRoaXMub24oZCxyW2RdKTt0LnJlcGxhY2VzJiYobz10LnJlcGxhY2VzLnJlcXVlc3QuY2FsbF9pZCxvKz1cIjt0by10YWc9XCIrdC5yZXBsYWNlcy50b190YWcsbys9XCI7ZnJvbS10YWc9XCIrdC5yZXBsYWNlcy5mcm9tX3RhZyxvPWVuY29kZVVSSUNvbXBvbmVudChvKSksaT1cIlJlZmVyLVRvOiA8XCIrZSsobz9cIj9SZXBsYWNlcz1cIitvOlwiXCIpK1wiPlwiLG4ucHVzaChpKTt2YXIgcD1uZXcgaCh0aGlzLnNlc3Npb24sYS5SRUZFUik7dGhpcy50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy5jYWxsKGMpfSwxZTMqbC5leHBpcmVzKSxwLnNlbmQoe2V4dHJhSGVhZGVyczpuLGV2ZW50SGFuZGxlcnM6e29uU3VjY2Vzc1Jlc3BvbnNlOmZ1bmN0aW9uKGUpe2MuZW1pdChcInJlcXVlc3RTdWNjZWVkZWRcIix7cmVzcG9uc2U6ZX0pfSxvbkVycm9yUmVzcG9uc2U6ZnVuY3Rpb24oZSl7Yy5lbWl0KFwicmVxdWVzdEZhaWxlZFwiLHtyZXNwb25zZTplLGNhdXNlOmEuY2F1c2VzLlJFSkVDVEVEfSl9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXtzLmNhbGwoYyksYy5lbWl0KFwicmVxdWVzdEZhaWxlZFwiLHtyZXNwb25zZTpudWxsLGNhdXNlOmEuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1J9KX0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe3MuY2FsbChjKSxjLmVtaXQoXCJyZXF1ZXN0RmFpbGVkXCIse3Jlc3BvbnNlOm51bGwsY2F1c2U6YS5jYXVzZXMuUkVRVUVTVF9USU1FT1VUfSl9LG9uRGlhbG9nRXJyb3I6ZnVuY3Rpb24oKXtzLmNhbGwoYyksYy5lbWl0KFwicmVxdWVzdEZhaWxlZFwiLHtyZXNwb25zZTpudWxsLGNhdXNlOmEuY2F1c2VzLkRJQUxPR19FUlJPUn0pfX19KSx0aGlzLm91dGdvaW5nUmVxdWVzdD1wLm91dGdvaW5nUmVxdWVzdH0sci5wcm90b3R5cGUucmVjZWl2ZU5vdGlmeT1mdW5jdGlvbihlKXt1KFwicmVjZWl2ZU5vdGlmeSgpXCIpO3ZhciB0O2lmKGUuYm9keSl7aWYodD1jLnBhcnNlKGUuYm9keSxcIlN0YXR1c19MaW5lXCIpLC0xPT09dClyZXR1cm4gdm9pZCB1KCdyZWNlaXZlTm90aWZ5KCkgfCBlcnJvciBwYXJzaW5nIE5PVElGWSBib2R5OiBcIicrZS5ib2R5KydcIicpO3N3aXRjaCghMCl7Y2FzZS9eMTAwJC8udGVzdCh0LnN0YXR1c19jb2RlKTp0aGlzLmVtaXQoXCJ0cnlpbmdcIix7cmVxdWVzdDplLHN0YXR1c19saW5lOnR9KTticmVhaztjYXNlL14xWzAtOV17Mn0kLy50ZXN0KHQuc3RhdHVzX2NvZGUpOnRoaXMuZW1pdChcInByb2dyZXNzXCIse3JlcXVlc3Q6ZSxzdGF0dXNfbGluZTp0fSk7YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdCh0LnN0YXR1c19jb2RlKTpzLmNhbGwodGhpcyksdGhpcy5lbWl0KFwiYWNjZXB0ZWRcIix7cmVxdWVzdDplLHN0YXR1c19saW5lOnR9KTticmVhaztkZWZhdWx0OnMuY2FsbCh0aGlzKSx0aGlzLmVtaXQoXCJmYWlsZWRcIix7cmVxdWVzdDplLHN0YXR1c19saW5lOnR9KX19fX0se1wiLi4vQ29uc3RhbnRzXCI6MSxcIi4uL0dyYW1tYXJcIjo2LFwiLi9SZXF1ZXN0XCI6MTUsZGVidWc6MzMsZXZlbnRzOjI4LHV0aWw6MzJ9XSwxNTpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0KXtpZihzKFwibmV3IHwgJXNcIix0KSx0aGlzLnNlc3Npb249ZSx0aGlzLm1ldGhvZD10LHRoaXMub3V0Z29pbmdSZXF1ZXN0PW51bGwsdGhpcy5zZXNzaW9uLnN0YXR1cyE9PXUuQy5TVEFUVVNfMVhYX1JFQ0VJVkVEJiZ0aGlzLnNlc3Npb24uc3RhdHVzIT09dS5DLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVImJnRoaXMuc2Vzc2lvbi5zdGF0dXMhPT11LkMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zZXNzaW9uLnN0YXR1cyE9PXUuQy5TVEFUVVNfQ09ORklSTUVEJiZ0aGlzLnNlc3Npb24uc3RhdHVzIT09dS5DLlNUQVRVU19URVJNSU5BVEVEKXRocm93IG5ldyBvLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc2Vzc2lvbi5zdGF0dXMpO2lmKHRoaXMuc2Vzc2lvbi5zdGF0dXM9PT11LkMuU1RBVFVTX1RFUk1JTkFURUQmJnQhPT1pLkJZRSl0aHJvdyBuZXcgby5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnNlc3Npb24uc3RhdHVzKX10LmV4cG9ydHM9cjt2YXIgcz1lKFwiZGVidWdcIikoXCJKc1NJUDpSVENTZXNzaW9uOlJlcXVlc3RcIiksbD1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpSVENTZXNzaW9uOlJlcXVlc3RcIik7bC5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7dmFyIGk9ZShcIi4uL0NvbnN0YW50c1wiKSxvPWUoXCIuLi9FeGNlcHRpb25zXCIpLHU9ZShcIi4uL1JUQ1Nlc3Npb25cIik7ci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciB0PWUuZXh0cmFIZWFkZXJzJiZlLmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSxuPWUuYm9keXx8bnVsbDt0aGlzLmV2ZW50SGFuZGxlcnM9ZS5ldmVudEhhbmRsZXJzfHx7fSx0aGlzLm91dGdvaW5nUmVxdWVzdD10aGlzLnNlc3Npb24uZGlhbG9nLnNlbmRSZXF1ZXN0KHRoaXMsdGhpcy5tZXRob2Qse2V4dHJhSGVhZGVyczp0LGJvZHk6bn0pfSxyLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7c3dpdGNoKCEwKXtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOnMoXCJvblByb2dyZXNzUmVzcG9uc2VcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uUHJvZ3Jlc3NSZXNwb25zZSYmdGhpcy5ldmVudEhhbmRsZXJzLm9uUHJvZ3Jlc3NSZXNwb25zZShlKTticmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOnMoXCJvblN1Y2Nlc3NSZXNwb25zZVwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25TdWNjZXNzUmVzcG9uc2UmJnRoaXMuZXZlbnRIYW5kbGVycy5vblN1Y2Nlc3NSZXNwb25zZShlKTticmVhaztkZWZhdWx0OnMoXCJvbkVycm9yUmVzcG9uc2VcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uRXJyb3JSZXNwb25zZSYmdGhpcy5ldmVudEhhbmRsZXJzLm9uRXJyb3JSZXNwb25zZShlKX19LHIucHJvdG90eXBlLm9uUmVxdWVzdFRpbWVvdXQ9ZnVuY3Rpb24oKXtsKFwib25SZXF1ZXN0VGltZW91dFwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25SZXF1ZXN0VGltZW91dCYmdGhpcy5ldmVudEhhbmRsZXJzLm9uUmVxdWVzdFRpbWVvdXQoKX0sci5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe2woXCJvblRyYW5zcG9ydEVycm9yXCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vblRyYW5zcG9ydEVycm9yJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25UcmFuc3BvcnRFcnJvcigpfSxyLnByb3RvdHlwZS5vbkRpYWxvZ0Vycm9yPWZ1bmN0aW9uKCl7bChcIm9uRGlhbG9nRXJyb3JcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uRGlhbG9nRXJyb3ImJnRoaXMuZXZlbnRIYW5kbGVycy5vbkRpYWxvZ0Vycm9yKCl9fSx7XCIuLi9Db25zdGFudHNcIjoxLFwiLi4vRXhjZXB0aW9uc1wiOjUsXCIuLi9SVENTZXNzaW9uXCI6MTEsZGVidWc6MzN9XSwxNjpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0KXt2YXIgbj0xO3RoaXMudWE9ZSx0aGlzLnRyYW5zcG9ydD10LHRoaXMucmVnaXN0cmFyPWUuY29uZmlndXJhdGlvbi5yZWdpc3RyYXJfc2VydmVyLHRoaXMuZXhwaXJlcz1lLmNvbmZpZ3VyYXRpb24ucmVnaXN0ZXJfZXhwaXJlcyx0aGlzLmNhbGxfaWQ9bC5jcmVhdGVSYW5kb21Ub2tlbigyMiksdGhpcy5jc2VxPTAsdGhpcy50b191cmk9ZS5jb25maWd1cmF0aW9uLnVyaSx0aGlzLnJlZ2lzdHJhdGlvblRpbWVyPW51bGwsdGhpcy5yZWdpc3RlcmVkPSExLHRoaXMuY29udGFjdD10aGlzLnVhLmNvbnRhY3QudG9TdHJpbmcoKSx0aGlzLmNvbnRhY3QrPVwiOytzaXAuaWNlXCIsdGhpcy5leHRyYUhlYWRlcnM9W10sdGhpcy5leHRyYUNvbnRhY3RQYXJhbXM9XCJcIixuJiYodGhpcy5jb250YWN0Kz1cIjtyZWctaWQ9XCIrbix0aGlzLmNvbnRhY3QrPSc7K3NpcC5pbnN0YW5jZT1cIjx1cm46dXVpZDonK3RoaXMudWEuY29uZmlndXJhdGlvbi5pbnN0YW5jZV9pZCsnPlwiJyl9dC5leHBvcnRzPXI7dmFyIHM9ZShcImRlYnVnXCIpKFwiSnNTSVA6UmVnaXN0cmF0b3JcIiksbD1lKFwiLi9VdGlsc1wiKSxpPWUoXCIuL0NvbnN0YW50c1wiKSxvPWUoXCIuL1NJUE1lc3NhZ2VcIiksdT1lKFwiLi9SZXF1ZXN0U2VuZGVyXCIpO3IucHJvdG90eXBlPXtzZXRFeHRyYUhlYWRlcnM6ZnVuY3Rpb24oZSl7QXJyYXkuaXNBcnJheShlKXx8KGU9W10pLHRoaXMuZXh0cmFIZWFkZXJzPWUuc2xpY2UoKX0sc2V0RXh0cmFDb250YWN0UGFyYW1zOmZ1bmN0aW9uKGUpe2UgaW5zdGFuY2VvZiBPYmplY3R8fChlPXt9KSx0aGlzLmV4dHJhQ29udGFjdFBhcmFtcz1cIlwiO2Zvcih2YXIgdCBpbiBlKXt2YXIgbj1lW3RdO3RoaXMuZXh0cmFDb250YWN0UGFyYW1zKz1cIjtcIit0LG4mJih0aGlzLmV4dHJhQ29udGFjdFBhcmFtcys9XCI9XCIrbil9fSxyZWdpc3RlcjpmdW5jdGlvbigpe3ZhciBlLHQsbixyPXRoaXM7bj10aGlzLmV4dHJhSGVhZGVycy5zbGljZSgpLG4ucHVzaChcIkNvbnRhY3Q6IFwiK3RoaXMuY29udGFjdCtcIjtleHBpcmVzPVwiK3RoaXMuZXhwaXJlcyt0aGlzLmV4dHJhQ29udGFjdFBhcmFtcyksbi5wdXNoKFwiRXhwaXJlczogXCIrdGhpcy5leHBpcmVzKSx0aGlzLnJlcXVlc3Q9bmV3IG8uT3V0Z29pbmdSZXF1ZXN0KGkuUkVHSVNURVIsdGhpcy5yZWdpc3RyYXIsdGhpcy51YSx7dG9fdXJpOnRoaXMudG9fdXJpLGNhbGxfaWQ6dGhpcy5jYWxsX2lkLGNzZXE6dGhpcy5jc2VxKz0xfSxuKSxlPW5ldyB1KHRoaXMsdGhpcy51YSksdGhpcy5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7dmFyIG4sbyx1PWUuZ2V0SGVhZGVycyhcImNvbnRhY3RcIikubGVuZ3RoO2lmKGUuY3NlcT09PXRoaXMuY3NlcSlzd2l0Y2gobnVsbCE9PXRoaXMucmVnaXN0cmF0aW9uVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25UaW1lciksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1udWxsKSwhMCl7Y2FzZS9eMVswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTpicmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmlmKGUuaGFzSGVhZGVyKFwiZXhwaXJlc1wiKSYmKG89ZS5nZXRIZWFkZXIoXCJleHBpcmVzXCIpKSwhdSl7cyhcIm5vIENvbnRhY3QgaGVhZGVyIGluIHJlc3BvbnNlIHRvIFJFR0lTVEVSLCByZXNwb25zZSBpZ25vcmVkXCIpO2JyZWFrfWZvcig7dS0tOyl7aWYobj1lLnBhcnNlSGVhZGVyKFwiY29udGFjdFwiLHUpLG4udXJpLnVzZXI9PT10aGlzLnVhLmNvbnRhY3QudXJpLnVzZXIpe289bi5nZXRQYXJhbShcImV4cGlyZXNcIik7YnJlYWt9bj1udWxsfWlmKCFuKXtzKFwibm8gQ29udGFjdCBoZWFkZXIgcG9pbnRpbmcgdG8gdXMsIHJlc3BvbnNlIGlnbm9yZWRcIik7YnJlYWt9b3x8KG89dGhpcy5leHBpcmVzKSx0aGlzLnJlZ2lzdHJhdGlvblRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLnJlZ2lzdHJhdGlvblRpbWVyPW51bGwsci5yZWdpc3RlcigpfSwxZTMqby0zZTMpLG4uaGFzUGFyYW0oXCJ0ZW1wLWdydXVcIikmJih0aGlzLnVhLmNvbnRhY3QudGVtcF9ncnV1PW4uZ2V0UGFyYW0oXCJ0ZW1wLWdydXVcIikucmVwbGFjZSgvXCIvZyxcIlwiKSksbi5oYXNQYXJhbShcInB1Yi1ncnV1XCIpJiYodGhpcy51YS5jb250YWN0LnB1Yl9ncnV1PW4uZ2V0UGFyYW0oXCJwdWItZ3J1dVwiKS5yZXBsYWNlKC9cIi9nLFwiXCIpKSx0aGlzLnJlZ2lzdGVyZWR8fCh0aGlzLnJlZ2lzdGVyZWQ9ITAsdGhpcy51YS5yZWdpc3RlcmVkKHtyZXNwb25zZTplfSkpO2JyZWFrO2Nhc2UvXjQyMyQvLnRlc3QoZS5zdGF0dXNfY29kZSk6ZS5oYXNIZWFkZXIoXCJtaW4tZXhwaXJlc1wiKT8odGhpcy5leHBpcmVzPWUuZ2V0SGVhZGVyKFwibWluLWV4cGlyZXNcIiksdGhpcy5yZWdpc3RlcigpKToocyhcIjQyMyByZXNwb25zZSByZWNlaXZlZCBmb3IgUkVHSVNURVIgd2l0aG91dCBNaW4tRXhwaXJlc1wiKSx0aGlzLnJlZ2lzdHJhdGlvbkZhaWx1cmUoZSxpLmNhdXNlcy5TSVBfRkFJTFVSRV9DT0RFKSk7YnJlYWs7ZGVmYXVsdDp0PWwuc2lwRXJyb3JDYXVzZShlLnN0YXR1c19jb2RlKSx0aGlzLnJlZ2lzdHJhdGlvbkZhaWx1cmUoZSx0KX19LHRoaXMub25SZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe3RoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShudWxsLGkuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCl9LHRoaXMub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShudWxsLGkuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpfSxlLnNlbmQoKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihlKXt2YXIgdDtpZighdGhpcy5yZWdpc3RlcmVkKXJldHVybiB2b2lkIHMoXCJhbHJlYWR5IHVucmVnaXN0ZXJlZFwiKTtlPWV8fHt9LHRoaXMucmVnaXN0ZXJlZD0hMSxudWxsIT09dGhpcy5yZWdpc3RyYXRpb25UaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyKSx0aGlzLnJlZ2lzdHJhdGlvblRpbWVyPW51bGwpLHQ9dGhpcy5leHRyYUhlYWRlcnMuc2xpY2UoKSxlLmFsbD8odC5wdXNoKFwiQ29udGFjdDogKlwiK3RoaXMuZXh0cmFDb250YWN0UGFyYW1zKSx0LnB1c2goXCJFeHBpcmVzOiAwXCIpLHRoaXMucmVxdWVzdD1uZXcgby5PdXRnb2luZ1JlcXVlc3QoaS5SRUdJU1RFUix0aGlzLnJlZ2lzdHJhcix0aGlzLnVhLHt0b191cmk6dGhpcy50b191cmksY2FsbF9pZDp0aGlzLmNhbGxfaWQsY3NlcTp0aGlzLmNzZXErPTF9LHQpKToodC5wdXNoKFwiQ29udGFjdDogXCIrdGhpcy5jb250YWN0K1wiO2V4cGlyZXM9MFwiK3RoaXMuZXh0cmFDb250YWN0UGFyYW1zKSx0LnB1c2goXCJFeHBpcmVzOiAwXCIpLHRoaXMucmVxdWVzdD1uZXcgby5PdXRnb2luZ1JlcXVlc3QoaS5SRUdJU1RFUix0aGlzLnJlZ2lzdHJhcix0aGlzLnVhLHt0b191cmk6dGhpcy50b191cmksY2FsbF9pZDp0aGlzLmNhbGxfaWQsY3NlcTp0aGlzLmNzZXErPTF9LHQpKTt2YXIgbj1uZXcgdSh0aGlzLHRoaXMudWEpO3RoaXMucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUpe3ZhciB0O3N3aXRjaCghMCl7Y2FzZS9eMVswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTpicmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOnRoaXMudW5yZWdpc3RlcmVkKGUpO2JyZWFrO2RlZmF1bHQ6dD1sLnNpcEVycm9yQ2F1c2UoZS5zdGF0dXNfY29kZSksdGhpcy51bnJlZ2lzdGVyZWQoZSx0KX19LHRoaXMub25SZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe3RoaXMudW5yZWdpc3RlcmVkKG51bGwsaS5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKX0sdGhpcy5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7dGhpcy51bnJlZ2lzdGVyZWQobnVsbCxpLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKX0sbi5zZW5kKCl9LHJlZ2lzdHJhdGlvbkZhaWx1cmU6ZnVuY3Rpb24oZSx0KXt0aGlzLnVhLnJlZ2lzdHJhdGlvbkZhaWxlZCh7cmVzcG9uc2U6ZXx8bnVsbCxjYXVzZTp0fSksdGhpcy5yZWdpc3RlcmVkJiYodGhpcy5yZWdpc3RlcmVkPSExLHRoaXMudWEudW5yZWdpc3RlcmVkKHtyZXNwb25zZTplfHxudWxsLGNhdXNlOnR9KSl9LHVucmVnaXN0ZXJlZDpmdW5jdGlvbihlLHQpe3RoaXMucmVnaXN0ZXJlZD0hMSx0aGlzLnVhLnVucmVnaXN0ZXJlZCh7cmVzcG9uc2U6ZXx8bnVsbCxjYXVzZTp0fHxudWxsfSl9LG9uVHJhbnNwb3J0Q2xvc2VkOmZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMucmVnaXN0cmF0aW9uVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25UaW1lciksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1udWxsKSx0aGlzLnJlZ2lzdGVyZWQmJih0aGlzLnJlZ2lzdGVyZWQ9ITEsdGhpcy51YS51bnJlZ2lzdGVyZWQoe30pKX0sY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLnJlZ2lzdGVyZWQmJnRoaXMudW5yZWdpc3RlcigpfX19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vUmVxdWVzdFNlbmRlclwiOjE3LFwiLi9TSVBNZXNzYWdlXCI6MTgsXCIuL1V0aWxzXCI6MjUsZGVidWc6MzN9XSwxNzpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0KXt0aGlzLnVhPXQsdGhpcy5hcHBsaWNhbnQ9ZSx0aGlzLm1ldGhvZD1lLnJlcXVlc3QubWV0aG9kLHRoaXMucmVxdWVzdD1lLnJlcXVlc3QsdGhpcy5hdXRoPW51bGwsdGhpcy5jaGFsbGVuZ2VkPSExLHRoaXMuc3RhbGVkPSExLHQuc3RhdHVzIT09aS5DLlNUQVRVU19VU0VSX0NMT1NFRHx8dGhpcy5tZXRob2Q9PT1sLkJZRSYmdGhpcy5tZXRob2Q9PT1sLkFDS3x8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9dC5leHBvcnRzPXI7dmFyIHM9ZShcImRlYnVnXCIpKFwiSnNTSVA6UmVxdWVzdFNlbmRlclwiKSxsPWUoXCIuL0NvbnN0YW50c1wiKSxpPWUoXCIuL1VBXCIpLG89ZShcIi4vRGlnZXN0QXV0aGVudGljYXRpb25cIiksdT1lKFwiLi9UcmFuc2FjdGlvbnNcIik7ci5wcm90b3R5cGU9e3NlbmQ6ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5tZXRob2Qpe2Nhc2VcIklOVklURVwiOnRoaXMuY2xpZW50VHJhbnNhY3Rpb249bmV3IHUuSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24odGhpcyx0aGlzLnJlcXVlc3QsdGhpcy51YS50cmFuc3BvcnQpO2JyZWFrO2Nhc2VcIkFDS1wiOnRoaXMuY2xpZW50VHJhbnNhY3Rpb249bmV3IHUuQWNrQ2xpZW50VHJhbnNhY3Rpb24odGhpcyx0aGlzLnJlcXVlc3QsdGhpcy51YS50cmFuc3BvcnQpO2JyZWFrO2RlZmF1bHQ6dGhpcy5jbGllbnRUcmFuc2FjdGlvbj1uZXcgdS5Ob25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbih0aGlzLHRoaXMucmVxdWVzdCx0aGlzLnVhLnRyYW5zcG9ydCl9dGhpcy5jbGllbnRUcmFuc2FjdGlvbi5zZW5kKCl9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLmFwcGxpY2FudC5vblJlcXVlc3RUaW1lb3V0KCl9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmFwcGxpY2FudC5vblRyYW5zcG9ydEVycm9yKCl9LHJlY2VpdmVSZXNwb25zZTpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT1lLnN0YXR1c19jb2RlO2lmKDQwMSE9PWkmJjQwNyE9PWl8fG51bGw9PT10aGlzLnVhLmNvbmZpZ3VyYXRpb24ucGFzc3dvcmQmJm51bGw9PT10aGlzLnVhLmNvbmZpZ3VyYXRpb24uaGExKXRoaXMuYXBwbGljYW50LnJlY2VpdmVSZXNwb25zZShlKTtlbHNle2lmKDQwMT09PWUuc3RhdHVzX2NvZGU/KG49ZS5wYXJzZUhlYWRlcihcInd3dy1hdXRoZW50aWNhdGVcIikscj1cImF1dGhvcml6YXRpb25cIik6KG49ZS5wYXJzZUhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiKSxyPVwicHJveHktYXV0aG9yaXphdGlvblwiKSwhbilyZXR1cm4gcyhlLnN0YXR1c19jb2RlK1wiIHdpdGggd3Jvbmcgb3IgbWlzc2luZyBjaGFsbGVuZ2UsIGNhbm5vdCBhdXRoZW50aWNhdGVcIiksdm9pZCB0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UoZSk7aWYoIXRoaXMuY2hhbGxlbmdlZHx8IXRoaXMuc3RhbGVkJiZuLnN0YWxlPT09ITApe2lmKHRoaXMuYXV0aHx8KHRoaXMuYXV0aD1uZXcgbyh7dXNlcm5hbWU6dGhpcy51YS5jb25maWd1cmF0aW9uLmF1dGhvcml6YXRpb25fdXNlcixwYXNzd29yZDp0aGlzLnVhLmNvbmZpZ3VyYXRpb24ucGFzc3dvcmQscmVhbG06dGhpcy51YS5jb25maWd1cmF0aW9uLnJlYWxtLGhhMTp0aGlzLnVhLmNvbmZpZ3VyYXRpb24uaGExfSkpLCF0aGlzLmF1dGguYXV0aGVudGljYXRlKHRoaXMucmVxdWVzdCxuKSlyZXR1cm4gdm9pZCB0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UoZSk7dGhpcy5jaGFsbGVuZ2VkPSEwLHRoaXMudWEuc2V0KFwicmVhbG1cIix0aGlzLmF1dGguZ2V0KFwicmVhbG1cIikpLHRoaXMudWEuc2V0KFwiaGExXCIsdGhpcy5hdXRoLmdldChcImhhMVwiKSksbi5zdGFsZSYmKHRoaXMuc3RhbGVkPSEwKSx0PWUubWV0aG9kPT09bC5SRUdJU1RFUj90aGlzLmFwcGxpY2FudC5jc2VxKz0xOnRoaXMucmVxdWVzdC5kaWFsb2c/dGhpcy5yZXF1ZXN0LmRpYWxvZy5sb2NhbF9zZXFudW0rPTE6dGhpcy5yZXF1ZXN0LmNzZXErMSx0aGlzLnJlcXVlc3Q9dGhpcy5yZXF1ZXN0LmNsb25lKCksdGhpcy5yZXF1ZXN0LmNzZXE9dCx0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKFwiY3NlcVwiLHQrXCIgXCIrdGhpcy5tZXRob2QpLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIocix0aGlzLmF1dGgudG9TdHJpbmcoKSksdGhpcy5zZW5kKCl9ZWxzZSB0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UoZSl9fX19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vRGlnZXN0QXV0aGVudGljYXRpb25cIjo0LFwiLi9UcmFuc2FjdGlvbnNcIjoyMSxcIi4vVUFcIjoyMyxkZWJ1ZzozM31dLDE4OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbixyLHMsbCl7dmFyIGksbyx1LGQ7cmV0dXJuIHI9cnx8e30sZSYmdCYmbj8odGhpcy51YT1uLHRoaXMuaGVhZGVycz17fSx0aGlzLm1ldGhvZD1lLHRoaXMucnVyaT10LHRoaXMuYm9keT1sLHRoaXMuZXh0cmFIZWFkZXJzPXMmJnMuc2xpY2UoKXx8W10sci5yb3V0ZV9zZXQ/dGhpcy5zZXRIZWFkZXIoXCJyb3V0ZVwiLHIucm91dGVfc2V0KTpuLmNvbmZpZ3VyYXRpb24udXNlX3ByZWxvYWRlZF9yb3V0ZSYmdGhpcy5zZXRIZWFkZXIoXCJyb3V0ZVwiLFwiPFwiK24udHJhbnNwb3J0LnNpcF91cmkrXCI7bHI+XCIpLHRoaXMuc2V0SGVhZGVyKFwidmlhXCIsXCJcIiksdGhpcy5zZXRIZWFkZXIoXCJtYXgtZm9yd2FyZHNcIixhLk1BWF9GT1JXQVJEUyksaT1yLnRvX2Rpc3BsYXlfbmFtZXx8MD09PXIudG9fZGlzcGxheV9uYW1lPydcIicrci50b19kaXNwbGF5X25hbWUrJ1wiICc6XCJcIixpKz1cIjxcIisoci50b191cml8fHQpK1wiPlwiLGkrPXIudG9fdGFnP1wiO3RhZz1cIityLnRvX3RhZzpcIlwiLHRoaXMudG89bmV3IGgucGFyc2UoaSksdGhpcy5zZXRIZWFkZXIoXCJ0b1wiLGkpLG89ci5mcm9tX2Rpc3BsYXlfbmFtZXx8MD09PXIuZnJvbV9kaXNwbGF5X25hbWU/J1wiJytyLmZyb21fZGlzcGxheV9uYW1lKydcIiAnOm4uY29uZmlndXJhdGlvbi5kaXNwbGF5X25hbWU/J1wiJytuLmNvbmZpZ3VyYXRpb24uZGlzcGxheV9uYW1lKydcIiAnOlwiXCIsbys9XCI8XCIrKHIuZnJvbV91cml8fG4uY29uZmlndXJhdGlvbi51cmkpK1wiPjt0YWc9XCIsbys9ci5mcm9tX3RhZ3x8Yy5uZXdUYWcoKSx0aGlzLmZyb209bmV3IGgucGFyc2UobyksdGhpcy5zZXRIZWFkZXIoXCJmcm9tXCIsbyksdT1yLmNhbGxfaWR8fG4uY29uZmlndXJhdGlvbi5qc3NpcF9pZCtjLmNyZWF0ZVJhbmRvbVRva2VuKDE1KSx0aGlzLmNhbGxfaWQ9dSx0aGlzLnNldEhlYWRlcihcImNhbGwtaWRcIix1KSxkPXIuY3NlcXx8TWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSksdGhpcy5jc2VxPWQsdm9pZCB0aGlzLnNldEhlYWRlcihcImNzZXFcIixkK1wiIFwiK2UpKTpudWxsfWZ1bmN0aW9uIHMoKXt0aGlzLmRhdGE9bnVsbCx0aGlzLmhlYWRlcnM9bnVsbCx0aGlzLm1ldGhvZD1udWxsLHRoaXMudmlhPW51bGwsdGhpcy52aWFfYnJhbmNoPW51bGwsdGhpcy5jYWxsX2lkPW51bGwsdGhpcy5jc2VxPW51bGwsdGhpcy5mcm9tPW51bGwsdGhpcy5mcm9tX3RhZz1udWxsLHRoaXMudG89bnVsbCx0aGlzLnRvX3RhZz1udWxsLHRoaXMuYm9keT1udWxsLHRoaXMuc2RwPW51bGx9ZnVuY3Rpb24gbChlKXt0aGlzLnVhPWUsdGhpcy5oZWFkZXJzPXt9LHRoaXMucnVyaT1udWxsLHRoaXMudHJhbnNwb3J0PW51bGwsdGhpcy5zZXJ2ZXJfdHJhbnNhY3Rpb249bnVsbH1mdW5jdGlvbiBpKCl7dGhpcy5oZWFkZXJzPXt9LHRoaXMuc3RhdHVzX2NvZGU9bnVsbCx0aGlzLnJlYXNvbl9waHJhc2U9bnVsbH10LmV4cG9ydHM9e091dGdvaW5nUmVxdWVzdDpyLEluY29taW5nUmVxdWVzdDpsLEluY29taW5nUmVzcG9uc2U6aX07dmFyIG89ZShcImRlYnVnXCIpKFwiSnNTSVA6U0lQTWVzc2FnZVwiKSx1PWUoXCJzZHAtdHJhbnNmb3JtXCIpLGE9ZShcIi4vQ29uc3RhbnRzXCIpLGM9ZShcIi4vVXRpbHNcIiksaD1lKFwiLi9OYW1lQWRkckhlYWRlclwiKSxkPWUoXCIuL0dyYW1tYXJcIik7ci5wcm90b3R5cGU9e3NldEhlYWRlcjpmdW5jdGlvbihlLHQpe3ZhciBuLHI7Zm9yKG49bmV3IFJlZ0V4cChcIl5cXFxccypcIitlK1wiXFxcXHMqOlwiLFwiaVwiKSxyPTA7cjx0aGlzLmV4dHJhSGVhZGVycy5sZW5ndGg7cisrKW4udGVzdCh0aGlzLmV4dHJhSGVhZGVyc1tyXSkmJnRoaXMuZXh0cmFIZWFkZXJzLnNwbGljZShyLDEpO3RoaXMuaGVhZGVyc1tjLmhlYWRlcml6ZShlKV09QXJyYXkuaXNBcnJheSh0KT90Olt0XX0sZ2V0SGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmV4dHJhSGVhZGVycy5sZW5ndGgscz10aGlzLmhlYWRlcnNbYy5oZWFkZXJpemUoZSldO2lmKHMpe2lmKHNbMF0pcmV0dXJuIHNbMF19ZWxzZSBmb3IodD1uZXcgUmVnRXhwKFwiXlxcXFxzKlwiK2UrXCJcXFxccyo6XCIsXCJpXCIpLG49MDtyPm47bisrKWlmKHM9dGhpcy5leHRyYUhlYWRlcnNbbl0sdC50ZXN0KHMpKXJldHVybiBzLnN1YnN0cmluZyhzLmluZGV4T2YoXCI6XCIpKzEpLnRyaW0oKX0sZ2V0SGVhZGVyczpmdW5jdGlvbihlKXt2YXIgdCxuLHIscz10aGlzLmhlYWRlcnNbYy5oZWFkZXJpemUoZSldLGw9W107aWYocyl7Zm9yKG49cy5sZW5ndGgsdD0wO24+dDt0KyspbC5wdXNoKHNbdF0pO3JldHVybiBsfWZvcihuPXRoaXMuZXh0cmFIZWFkZXJzLmxlbmd0aCxyPW5ldyBSZWdFeHAoXCJeXFxcXHMqXCIrZStcIlxcXFxzKjpcIixcImlcIiksdD0wO24+dDt0Kyspcz10aGlzLmV4dHJhSGVhZGVyc1t0XSxyLnRlc3QocykmJmwucHVzaChzLnN1YnN0cmluZyhzLmluZGV4T2YoXCI6XCIpKzEpLnRyaW0oKSk7cmV0dXJuIGx9LGhhc0hlYWRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLHI9dGhpcy5leHRyYUhlYWRlcnMubGVuZ3RoO2lmKHRoaXMuaGVhZGVyc1tjLmhlYWRlcml6ZShlKV0pcmV0dXJuITA7Zm9yKHQ9bmV3IFJlZ0V4cChcIl5cXFxccypcIitlK1wiXFxcXHMqOlwiLFwiaVwiKSxuPTA7cj5uO24rKylpZih0LnRlc3QodGhpcy5leHRyYUhlYWRlcnNbbl0pKXJldHVybiEwO3JldHVybiExfSxwYXJzZVNEUDpmdW5jdGlvbihlKXtyZXR1cm4hZSYmdGhpcy5zZHA/dGhpcy5zZHA6KHRoaXMuc2RwPXUucGFyc2UodGhpcy5ib2R5fHxcIlwiKSx0aGlzLnNkcCl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI9XCJcIixzPVtdO3IrPXRoaXMubWV0aG9kK1wiIFwiK3RoaXMucnVyaStcIiBTSVAvMi4wXFxyXFxuXCI7Zm9yKGUgaW4gdGhpcy5oZWFkZXJzKWZvcih0PXRoaXMuaGVhZGVyc1tlXS5sZW5ndGgsbj0wO3Q+bjtuKyspcis9ZStcIjogXCIrdGhpcy5oZWFkZXJzW2VdW25dK1wiXFxyXFxuXCI7Zm9yKHQ9dGhpcy5leHRyYUhlYWRlcnMubGVuZ3RoLG49MDt0Pm47bisrKXIrPXRoaXMuZXh0cmFIZWFkZXJzW25dLnRyaW0oKStcIlxcclxcblwiO3N3aXRjaCh0aGlzLm1ldGhvZCl7Y2FzZSBhLlJFR0lTVEVSOnMucHVzaChcInBhdGhcIixcImdydXVcIik7YnJlYWs7Y2FzZSBhLklOVklURTp0aGlzLnVhLmNvbmZpZ3VyYXRpb24uc2Vzc2lvbl90aW1lcnMmJnMucHVzaChcInRpbWVyXCIpLCh0aGlzLnVhLmNvbnRhY3QucHViX2dydXV8fHRoaXMudWEuY29udGFjdC50ZW1wX2dydXUpJiZzLnB1c2goXCJncnV1XCIpLHMucHVzaChcImljZVwiLFwicmVwbGFjZXNcIik7YnJlYWs7Y2FzZSBhLlVQREFURTp0aGlzLnVhLmNvbmZpZ3VyYXRpb24uc2Vzc2lvbl90aW1lcnMmJnMucHVzaChcInRpbWVyXCIpLHMucHVzaChcImljZVwiKX1yZXR1cm4gcy5wdXNoKFwib3V0Ym91bmRcIikscis9XCJBbGxvdzogXCIrYS5BTExPV0VEX01FVEhPRFMrXCJcXHJcXG5cIixyKz1cIlN1cHBvcnRlZDogXCIrcytcIlxcclxcblwiLHIrPVwiVXNlci1BZ2VudDogXCIrYS5VU0VSX0FHRU5UK1wiXFxyXFxuXCIsdGhpcy5ib2R5Pyh0PWMuc3RyX3V0ZjhfbGVuZ3RoKHRoaXMuYm9keSkscis9XCJDb250ZW50LUxlbmd0aDogXCIrdCtcIlxcclxcblxcclxcblwiLHIrPXRoaXMuYm9keSk6cis9XCJDb250ZW50LUxlbmd0aDogMFxcclxcblxcclxcblwiLHJ9LGNsb25lOmZ1bmN0aW9uKCl7dmFyIGU9bmV3IHIodGhpcy5tZXRob2QsdGhpcy5ydXJpLHRoaXMudWEpO3JldHVybiBPYmplY3Qua2V5cyh0aGlzLmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24odCl7ZS5oZWFkZXJzW3RdPXRoaXMuaGVhZGVyc1t0XS5zbGljZSgpfSx0aGlzKSxlLmJvZHk9dGhpcy5ib2R5LGUuZXh0cmFIZWFkZXJzPXRoaXMuZXh0cmFIZWFkZXJzJiZ0aGlzLmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSxlLnRvPXRoaXMudG8sZS5mcm9tPXRoaXMuZnJvbSxlLmNhbGxfaWQ9dGhpcy5jYWxsX2lkLGUuY3NlcT10aGlzLmNzZXEsZX19LHMucHJvdG90eXBlPXthZGRIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj17cmF3OnR9O2U9Yy5oZWFkZXJpemUoZSksdGhpcy5oZWFkZXJzW2VdP3RoaXMuaGVhZGVyc1tlXS5wdXNoKG4pOnRoaXMuaGVhZGVyc1tlXT1bbl19LGdldEhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmhlYWRlcnNbYy5oZWFkZXJpemUoZSldO2lmKHQpcmV0dXJuIHRbMF0/dFswXS5yYXc6dm9pZCAwfSxnZXRIZWFkZXJzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmhlYWRlcnNbYy5oZWFkZXJpemUoZSldLHM9W107aWYoIXIpcmV0dXJuW107Zm9yKG49ci5sZW5ndGgsdD0wO24+dDt0Kyspcy5wdXNoKHJbdF0ucmF3KTtyZXR1cm4gc30saGFzSGVhZGVyOmZ1bmN0aW9uKGUpe3JldHVybiEhdGhpcy5oZWFkZXJzW2MuaGVhZGVyaXplKGUpXX0scGFyc2VIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyLHM7cmV0dXJuIGU9Yy5oZWFkZXJpemUoZSksdD10fHwwLHRoaXMuaGVhZGVyc1tlXT90Pj10aGlzLmhlYWRlcnNbZV0ubGVuZ3RoP3ZvaWQgbygnbm90IHNvIG1hbnkgXCInK2UrJ1wiIGhlYWRlcnMgcHJlc2VudCcpOihuPXRoaXMuaGVhZGVyc1tlXVt0XSxyPW4ucmF3LG4ucGFyc2VkP24ucGFyc2VkOihzPWQucGFyc2UocixlLnJlcGxhY2UoLy0vZyxcIl9cIikpLC0xPT09cz8odGhpcy5oZWFkZXJzW2VdLnNwbGljZSh0LDEpLHZvaWQgbygnZXJyb3IgcGFyc2luZyBcIicrZSsnXCIgaGVhZGVyIGZpZWxkIHdpdGggdmFsdWUgXCInK3IrJ1wiJykpOihuLnBhcnNlZD1zLHMpKSk6dm9pZCBvKCdoZWFkZXIgXCInK2UrJ1wiIG5vdCBwcmVzZW50Jyl9LHM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wYXJzZUhlYWRlcihlLHQpfSxzZXRIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj17cmF3OnR9O3RoaXMuaGVhZGVyc1tjLmhlYWRlcml6ZShlKV09W25dfSxwYXJzZVNEUDpmdW5jdGlvbihlKXtyZXR1cm4hZSYmdGhpcy5zZHA/dGhpcy5zZHA6KHRoaXMuc2RwPXUucGFyc2UodGhpcy5ib2R5fHxcIlwiKSx0aGlzLnNkcCl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF0YX19LGwucHJvdG90eXBlPW5ldyBzLGwucHJvdG90eXBlLnJlcGx5PWZ1bmN0aW9uKGUsdCxuLHIscyxsKXt2YXIgaSxvLHUsaCxkLHA9W10sZj10aGlzLmdldEhlYWRlcihcIlRvXCIpLG09MCxnPTA7aWYoZT1lfHxudWxsLHQ9dHx8bnVsbCwhZXx8MTAwPmV8fGU+Njk5KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIitlKTtpZih0JiZcInN0cmluZ1wiIT10eXBlb2YgdCYmISh0IGluc3RhbmNlb2YgU3RyaW5nKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCByZWFzb25fcGhyYXNlOiBcIit0KTtpZih0PXR8fGEuUkVBU09OX1BIUkFTRVtlXXx8XCJcIixuPW4mJm4uc2xpY2UoKXx8W10sZD1cIlNJUC8yLjAgXCIrZStcIiBcIit0K1wiXFxyXFxuXCIsdGhpcy5tZXRob2Q9PT1hLklOVklURSYmZT4xMDAmJjIwMD49ZSlmb3IoaT10aGlzLmdldEhlYWRlcnMoXCJyZWNvcmQtcm91dGVcIiksdT1pLmxlbmd0aCxtO3U+bTttKyspZCs9XCJSZWNvcmQtUm91dGU6IFwiK2lbbV0rXCJcXHJcXG5cIjtmb3Iobz10aGlzLmdldEhlYWRlcnMoXCJ2aWFcIiksdT1vLmxlbmd0aCxnO3U+ZztnKyspZCs9XCJWaWE6IFwiK29bZ10rXCJcXHJcXG5cIjtmb3IoIXRoaXMudG9fdGFnJiZlPjEwMD9mKz1cIjt0YWc9XCIrYy5uZXdUYWcoKTp0aGlzLnRvX3RhZyYmIXRoaXMucyhcInRvXCIpLmhhc1BhcmFtKFwidGFnXCIpJiYoZis9XCI7dGFnPVwiK3RoaXMudG9fdGFnKSxcbmQrPVwiVG86IFwiK2YrXCJcXHJcXG5cIixkKz1cIkZyb206IFwiK3RoaXMuZ2V0SGVhZGVyKFwiRnJvbVwiKStcIlxcclxcblwiLGQrPVwiQ2FsbC1JRDogXCIrdGhpcy5jYWxsX2lkK1wiXFxyXFxuXCIsZCs9XCJDU2VxOiBcIit0aGlzLmNzZXErXCIgXCIrdGhpcy5tZXRob2QrXCJcXHJcXG5cIix1PW4ubGVuZ3RoLGg9MDt1Pmg7aCsrKWQrPW5baF0udHJpbSgpK1wiXFxyXFxuXCI7c3dpdGNoKHRoaXMubWV0aG9kKXtjYXNlIGEuSU5WSVRFOnRoaXMudWEuY29uZmlndXJhdGlvbi5zZXNzaW9uX3RpbWVycyYmcC5wdXNoKFwidGltZXJcIiksKHRoaXMudWEuY29udGFjdC5wdWJfZ3J1dXx8dGhpcy51YS5jb250YWN0LnRlbXBfZ3J1dSkmJnAucHVzaChcImdydXVcIikscC5wdXNoKFwiaWNlXCIsXCJyZXBsYWNlc1wiKTticmVhaztjYXNlIGEuVVBEQVRFOnRoaXMudWEuY29uZmlndXJhdGlvbi5zZXNzaW9uX3RpbWVycyYmcC5wdXNoKFwidGltZXJcIiksciYmcC5wdXNoKFwiaWNlXCIpLHAucHVzaChcInJlcGxhY2VzXCIpfXAucHVzaChcIm91dGJvdW5kXCIpLHRoaXMubWV0aG9kPT09YS5PUFRJT05TPyhkKz1cIkFsbG93OiBcIithLkFMTE9XRURfTUVUSE9EUytcIlxcclxcblwiLGQrPVwiQWNjZXB0OiBcIithLkFDQ0VQVEVEX0JPRFlfVFlQRVMrXCJcXHJcXG5cIik6NDA1PT09ZT9kKz1cIkFsbG93OiBcIithLkFMTE9XRURfTUVUSE9EUytcIlxcclxcblwiOjQxNT09PWUmJihkKz1cIkFjY2VwdDogXCIrYS5BQ0NFUFRFRF9CT0RZX1RZUEVTK1wiXFxyXFxuXCIpLGQrPVwiU3VwcG9ydGVkOiBcIitwK1wiXFxyXFxuXCIscj8odT1jLnN0cl91dGY4X2xlbmd0aChyKSxkKz1cIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vc2RwXFxyXFxuXCIsZCs9XCJDb250ZW50LUxlbmd0aDogXCIrdStcIlxcclxcblxcclxcblwiLGQrPXIpOmQrPVwiQ29udGVudC1MZW5ndGg6IDBcXHJcXG5cXHJcXG5cIix0aGlzLnNlcnZlcl90cmFuc2FjdGlvbi5yZWNlaXZlUmVzcG9uc2UoZSxkLHMsbCl9LGwucHJvdG90eXBlLnJlcGx5X3NsPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixzPTAsbD10aGlzLmdldEhlYWRlcnMoXCJ2aWFcIiksaT1sLmxlbmd0aDtpZihlPWV8fG51bGwsdD10fHxudWxsLCFlfHwxMDA+ZXx8ZT42OTkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzX2NvZGU6IFwiK2UpO2lmKHQmJlwic3RyaW5nXCIhPXR5cGVvZiB0JiYhKHQgaW5zdGFuY2VvZiBTdHJpbmcpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHJlYXNvbl9waHJhc2U6IFwiK3QpO2Zvcih0PXR8fGEuUkVBU09OX1BIUkFTRVtlXXx8XCJcIixyPVwiU0lQLzIuMCBcIitlK1wiIFwiK3QrXCJcXHJcXG5cIixzO2k+cztzKyspcis9XCJWaWE6IFwiK2xbc10rXCJcXHJcXG5cIjtuPXRoaXMuZ2V0SGVhZGVyKFwiVG9cIiksIXRoaXMudG9fdGFnJiZlPjEwMD9uKz1cIjt0YWc9XCIrYy5uZXdUYWcoKTp0aGlzLnRvX3RhZyYmIXRoaXMucyhcInRvXCIpLmhhc1BhcmFtKFwidGFnXCIpJiYobis9XCI7dGFnPVwiK3RoaXMudG9fdGFnKSxyKz1cIlRvOiBcIituK1wiXFxyXFxuXCIscis9XCJGcm9tOiBcIit0aGlzLmdldEhlYWRlcihcIkZyb21cIikrXCJcXHJcXG5cIixyKz1cIkNhbGwtSUQ6IFwiK3RoaXMuY2FsbF9pZCtcIlxcclxcblwiLHIrPVwiQ1NlcTogXCIrdGhpcy5jc2VxK1wiIFwiK3RoaXMubWV0aG9kK1wiXFxyXFxuXCIscis9XCJDb250ZW50LUxlbmd0aDogMFxcclxcblxcclxcblwiLHRoaXMudHJhbnNwb3J0LnNlbmQocil9LGkucHJvdG90eXBlPW5ldyBzfSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL0dyYW1tYXJcIjo2LFwiLi9OYW1lQWRkckhlYWRlclwiOjksXCIuL1V0aWxzXCI6MjUsZGVidWc6MzMsXCJzZHAtdHJhbnNmb3JtXCI6NDR9XSwxOTpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoKXt9dC5leHBvcnRzPXI7dmFyIHM9ZShcIi4vVXRpbHNcIiksbD1lKFwiLi9HcmFtbWFyXCIpLGk9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6U29ja2V0XCIpO3IuaXNTb2NrZXQ9ZnVuY3Rpb24oZSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGUpcmV0dXJuIGkoXCJ1bmRlZmluZWQgSnNTSVAuU29ja2V0IGluc3RhbmNlXCIpLCExO3RyeXtpZighcy5pc1N0cmluZyhlLnVybCkpdGhyb3cgaShcIm1pc3Npbmcgb3IgaW52YWxpZCBKc1NJUC5Tb2NrZXQgdXJsIHByb3BlcnR5XCIpLG5ldyBFcnJvcjtpZighcy5pc1N0cmluZyhlLnZpYV90cmFuc3BvcnQpKXRocm93IGkoXCJtaXNzaW5nIG9yIGludmFsaWQgSnNTSVAuU29ja2V0IHZpYV90cmFuc3BvcnQgcHJvcGVydHlcIiksbmV3IEVycm9yO2lmKC0xPT09bC5wYXJzZShlLnNpcF91cmksXCJTSVBfVVJJXCIpKXRocm93IGkoXCJtaXNzaW5nIG9yIGludmFsaWQgSnNTSVAuU29ja2V0IHNpcF91cmkgcHJvcGVydHlcIiksbmV3IEVycm9yfWNhdGNoKHQpe3JldHVybiExfXRyeXtbXCJjb25uZWN0XCIsXCJkaXNjb25uZWN0XCIsXCJzZW5kXCJdLmZvckVhY2goZnVuY3Rpb24odCl7aWYoIXMuaXNGdW5jdGlvbihlW3RdKSl0aHJvdyBpKFwibWlzc2luZyBvciBpbnZhbGlkIEpzU0lQLlNvY2tldCBtZXRob2Q6IFwiK3QpLG5ldyBFcnJvcn0pfWNhdGNoKHQpe3JldHVybiExfXJldHVybiEwfX0se1wiLi9HcmFtbWFyXCI6NixcIi4vVXRpbHNcIjoyNSxkZWJ1ZzozM31dLDIwOltmdW5jdGlvbihlLHQsbil7dmFyIHI9NTAwLHM9NGUzLGw9NWUzLGk9e1QxOnIsVDI6cyxUNDpsLFRJTUVSX0I6NjQqcixUSU1FUl9EOjAqcixUSU1FUl9GOjY0KnIsVElNRVJfSDo2NCpyLFRJTUVSX0k6MCpyLFRJTUVSX0o6MCpyLFRJTUVSX0s6MCpsLFRJTUVSX0w6NjQqcixUSU1FUl9NOjY0KnIsUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUw6NmU0fTt0LmV4cG9ydHM9aX0se31dLDIxOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbil7dmFyIHI7dGhpcy50eXBlPWEuTk9OX0lOVklURV9DTElFTlQsdGhpcy50cmFuc3BvcnQ9bix0aGlzLmlkPVwiejloRzRiS1wiK01hdGguZmxvb3IoMWU3Kk1hdGgucmFuZG9tKCkpLHRoaXMucmVxdWVzdF9zZW5kZXI9ZSx0aGlzLnJlcXVlc3Q9dCxyPVwiU0lQLzIuMC9cIituLnZpYV90cmFuc3BvcnQscis9XCIgXCIrZS51YS5jb25maWd1cmF0aW9uLnZpYV9ob3N0K1wiO2JyYW5jaD1cIit0aGlzLmlkLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoXCJ2aWFcIixyKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLm5ld1RyYW5zYWN0aW9uKHRoaXMpLGguRXZlbnRFbWl0dGVyLmNhbGwodGhpcyl9ZnVuY3Rpb24gcyhlLHQsbil7dmFyIHIscz10aGlzO3RoaXMudHlwZT1hLklOVklURV9DTElFTlQsdGhpcy50cmFuc3BvcnQ9bix0aGlzLmlkPVwiejloRzRiS1wiK01hdGguZmxvb3IoMWU3Kk1hdGgucmFuZG9tKCkpLHRoaXMucmVxdWVzdF9zZW5kZXI9ZSx0aGlzLnJlcXVlc3Q9dCxyPVwiU0lQLzIuMC9cIituLnZpYV90cmFuc3BvcnQscis9XCIgXCIrZS51YS5jb25maWd1cmF0aW9uLnZpYV9ob3N0K1wiO2JyYW5jaD1cIit0aGlzLmlkLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoXCJ2aWFcIixyKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLm5ld1RyYW5zYWN0aW9uKHRoaXMpLHRoaXMucmVxdWVzdC5jYW5jZWw9ZnVuY3Rpb24oZSl7cy5jYW5jZWxfcmVxdWVzdChzLGUpfSxoLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpfWZ1bmN0aW9uIGwoZSx0LG4pe3ZhciByO3RoaXMudHJhbnNwb3J0PW4sdGhpcy5pZD1cIno5aEc0YktcIitNYXRoLmZsb29yKDFlNypNYXRoLnJhbmRvbSgpKSx0aGlzLnJlcXVlc3Rfc2VuZGVyPWUsdGhpcy5yZXF1ZXN0PXQscj1cIlNJUC8yLjAvXCIrbi52aWFfdHJhbnNwb3J0LHIrPVwiIFwiK2UudWEuY29uZmlndXJhdGlvbi52aWFfaG9zdCtcIjticmFuY2g9XCIrdGhpcy5pZCx0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKFwidmlhXCIsciksaC5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKX1mdW5jdGlvbiBpKGUsdCl7dGhpcy50eXBlPWEuTk9OX0lOVklURV9TRVJWRVIsdGhpcy5pZD1lLnZpYV9icmFuY2gsdGhpcy5yZXF1ZXN0PWUsdGhpcy50cmFuc3BvcnQ9ZS50cmFuc3BvcnQsdGhpcy51YT10LHRoaXMubGFzdF9yZXNwb25zZT1cIlwiLGUuc2VydmVyX3RyYW5zYWN0aW9uPXRoaXMsdGhpcy5zdGF0ZT1hLlNUQVRVU19UUllJTkcsdC5uZXdUcmFuc2FjdGlvbih0aGlzKSxoLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpfWZ1bmN0aW9uIG8oZSx0KXt0aGlzLnR5cGU9YS5JTlZJVEVfU0VSVkVSLHRoaXMuaWQ9ZS52aWFfYnJhbmNoLHRoaXMucmVxdWVzdD1lLHRoaXMudHJhbnNwb3J0PWUudHJhbnNwb3J0LHRoaXMudWE9dCx0aGlzLmxhc3RfcmVzcG9uc2U9XCJcIixlLnNlcnZlcl90cmFuc2FjdGlvbj10aGlzLHRoaXMuc3RhdGU9YS5TVEFUVVNfUFJPQ0VFRElORyx0Lm5ld1RyYW5zYWN0aW9uKHRoaXMpLHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lcj1udWxsLGUucmVwbHkoMTAwKSxoLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpfWZ1bmN0aW9uIHUoZSx0KXt2YXIgbjtzd2l0Y2godC5tZXRob2Qpe2Nhc2UgVC5JTlZJVEU6aWYobj1lLnRyYW5zYWN0aW9ucy5pc3RbdC52aWFfYnJhbmNoXSl7c3dpdGNoKG4uc3RhdGUpe2Nhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzpuLnRyYW5zcG9ydC5zZW5kKG4ubGFzdF9yZXNwb25zZSk7YnJlYWs7Y2FzZSBhLlNUQVRVU19BQ0NFUFRFRDp9cmV0dXJuITB9YnJlYWs7Y2FzZSBULkFDSzppZihuPWUudHJhbnNhY3Rpb25zLmlzdFt0LnZpYV9icmFuY2hdLCFuKXJldHVybiExO2lmKG4uc3RhdGU9PT1hLlNUQVRVU19BQ0NFUFRFRClyZXR1cm4hMTtpZihuLnN0YXRlPT09YS5TVEFUVVNfQ09NUExFVEVEKXJldHVybiBuLnN0YXRlPWEuU1RBVFVTX0NPTkZJUk1FRCxuLkk9c2V0VGltZW91dChmdW5jdGlvbigpe24udGltZXJfSSgpfSxfLlRJTUVSX0kpLCEwO2JyZWFrO2Nhc2UgVC5DQU5DRUw6cmV0dXJuIG49ZS50cmFuc2FjdGlvbnMuaXN0W3QudmlhX2JyYW5jaF0sbj8odC5yZXBseV9zbCgyMDApLG4uc3RhdGUhPT1hLlNUQVRVU19QUk9DRUVESU5HKToodC5yZXBseV9zbCg0ODEpLCEwKTtkZWZhdWx0OmlmKG49ZS50cmFuc2FjdGlvbnMubmlzdFt0LnZpYV9icmFuY2hdKXtzd2l0Y2gobi5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19UUllJTkc6YnJlYWs7Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOmNhc2UgYS5TVEFUVVNfQ09NUExFVEVEOm4udHJhbnNwb3J0LnNlbmQobi5sYXN0X3Jlc3BvbnNlKX1yZXR1cm4hMH19fXQuZXhwb3J0cz17QzpudWxsLE5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uOnIsSW52aXRlQ2xpZW50VHJhbnNhY3Rpb246cyxBY2tDbGllbnRUcmFuc2FjdGlvbjpsLE5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uOmksSW52aXRlU2VydmVyVHJhbnNhY3Rpb246byxjaGVja1RyYW5zYWN0aW9uOnV9O3ZhciBhPXtTVEFUVVNfVFJZSU5HOjEsU1RBVFVTX1BST0NFRURJTkc6MixTVEFUVVNfQ0FMTElORzozLFNUQVRVU19BQ0NFUFRFRDo0LFNUQVRVU19DT01QTEVURUQ6NSxTVEFUVVNfVEVSTUlOQVRFRDo2LFNUQVRVU19DT05GSVJNRUQ6NyxOT05fSU5WSVRFX0NMSUVOVDpcIm5pY3RcIixOT05fSU5WSVRFX1NFUlZFUjpcIm5pc3RcIixJTlZJVEVfQ0xJRU5UOlwiaWN0XCIsSU5WSVRFX1NFUlZFUjpcImlzdFwifTt0LmV4cG9ydHMuQz1hO3ZhciBjPWUoXCJ1dGlsXCIpLGg9ZShcImV2ZW50c1wiKSxkPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uXCIpLHA9ZShcImRlYnVnXCIpKFwiSnNTSVA6SW52aXRlQ2xpZW50VHJhbnNhY3Rpb25cIiksZj1lKFwiZGVidWdcIikoXCJKc1NJUDpBY2tDbGllbnRUcmFuc2FjdGlvblwiKSxtPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOk5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uXCIpLGc9ZShcImRlYnVnXCIpKFwiSnNTSVA6SW52aXRlU2VydmVyVHJhbnNhY3Rpb25cIiksVD1lKFwiLi9Db25zdGFudHNcIiksXz1lKFwiLi9UaW1lcnNcIik7Yy5pbmhlcml0cyhyLGguRXZlbnRFbWl0dGVyKSxyLnByb3RvdHlwZS5zdGF0ZUNoYW5nZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1lLHRoaXMuZW1pdChcInN0YXRlQ2hhbmdlZFwiKX0sci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVFJZSU5HKSx0aGlzLkY9c2V0VGltZW91dChmdW5jdGlvbigpe2UudGltZXJfRigpfSxfLlRJTUVSX0YpLHRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9LHIucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXtkKFwidHJhbnNwb3J0IGVycm9yIG9jY3VycmVkLCBkZWxldGluZyB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSxjbGVhclRpbWVvdXQodGhpcy5GKSxjbGVhclRpbWVvdXQodGhpcy5LKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKX0sci5wcm90b3R5cGUudGltZXJfRj1mdW5jdGlvbigpe2QoXCJUaW1lciBGIGV4cGlyZWQgZm9yIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpLHRoaXMucmVxdWVzdF9zZW5kZXIub25SZXF1ZXN0VGltZW91dCgpfSxyLnByb3RvdHlwZS50aW1lcl9LPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyl9LHIucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5zdGF0dXNfY29kZTtpZigyMDA+bilzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19UUllJTkc6Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1BST0NFRURJTkcpLHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKGUpfWVsc2Ugc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfVFJZSU5HOmNhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19DT01QTEVURUQpLGNsZWFyVGltZW91dCh0aGlzLkYpLDQwOD09PW4/dGhpcy5yZXF1ZXN0X3NlbmRlci5vblJlcXVlc3RUaW1lb3V0KCk6dGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UoZSksdGhpcy5LPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnRpbWVyX0soKX0sXy5USU1FUl9LKTticmVhaztjYXNlIGEuU1RBVFVTX0NPTVBMRVRFRDp9fSxjLmluaGVyaXRzKHMsaC5FdmVudEVtaXR0ZXIpLHMucHJvdG90eXBlLnN0YXRlQ2hhbmdlZD1mdW5jdGlvbihlKXt0aGlzLnN0YXRlPWUsdGhpcy5lbWl0KFwic3RhdGVDaGFuZ2VkXCIpfSxzLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19DQUxMSU5HKSx0aGlzLkI9c2V0VGltZW91dChmdW5jdGlvbigpe2UudGltZXJfQigpfSxfLlRJTUVSX0IpLHRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9LHMucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy5CKSxjbGVhclRpbWVvdXQodGhpcy5EKSxjbGVhclRpbWVvdXQodGhpcy5NKSx0aGlzLnN0YXRlIT09YS5TVEFUVVNfQUNDRVBURUQmJihwKFwidHJhbnNwb3J0IGVycm9yIG9jY3VycmVkLCBkZWxldGluZyB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKSksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyl9LHMucHJvdG90eXBlLnRpbWVyX009ZnVuY3Rpb24oKXtwKFwiVGltZXIgTSBleHBpcmVkIGZvciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnN0YXRlPT09YS5TVEFUVVNfQUNDRVBURUQmJihjbGVhclRpbWVvdXQodGhpcy5CKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSl9LHMucHJvdG90eXBlLnRpbWVyX0I9ZnVuY3Rpb24oKXtwKFwiVGltZXIgQiBleHBpcmVkIGZvciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnN0YXRlPT09YS5TVEFUVVNfQ0FMTElORyYmKHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpLHRoaXMucmVxdWVzdF9zZW5kZXIub25SZXF1ZXN0VGltZW91dCgpKX0scy5wcm90b3R5cGUudGltZXJfRD1mdW5jdGlvbigpe3AoXCJUaW1lciBEIGV4cGlyZWQgZm9yIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLGNsZWFyVGltZW91dCh0aGlzLkIpLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpfSxzLnByb3RvdHlwZS5zZW5kQUNLPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5hY2s9XCJBQ0sgXCIrdGhpcy5yZXF1ZXN0LnJ1cmkrXCIgU0lQLzIuMFxcclxcblwiLHRoaXMuYWNrKz1cIlZpYTogXCIrdGhpcy5yZXF1ZXN0LmhlYWRlcnMuVmlhLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLnJlcXVlc3QuaGVhZGVycy5Sb3V0ZSYmKHRoaXMuYWNrKz1cIlJvdXRlOiBcIit0aGlzLnJlcXVlc3QuaGVhZGVycy5Sb3V0ZS50b1N0cmluZygpK1wiXFxyXFxuXCIpLHRoaXMuYWNrKz1cIlRvOiBcIitlLmdldEhlYWRlcihcInRvXCIpK1wiXFxyXFxuXCIsdGhpcy5hY2srPVwiRnJvbTogXCIrdGhpcy5yZXF1ZXN0LmhlYWRlcnMuRnJvbS50b1N0cmluZygpK1wiXFxyXFxuXCIsdGhpcy5hY2srPVwiQ2FsbC1JRDogXCIrdGhpcy5yZXF1ZXN0LmhlYWRlcnNbXCJDYWxsLUlEXCJdLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLmFjays9XCJDU2VxOiBcIit0aGlzLnJlcXVlc3QuaGVhZGVycy5DU2VxLnRvU3RyaW5nKCkuc3BsaXQoXCIgXCIpWzBdLHRoaXMuYWNrKz1cIiBBQ0tcXHJcXG5cIix0aGlzLmFjays9XCJDb250ZW50LUxlbmd0aDogMFxcclxcblxcclxcblwiLHRoaXMuRD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC50aW1lcl9EKCl9LF8uVElNRVJfRCksdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLmFjayl9LHMucHJvdG90eXBlLmNhbmNlbF9yZXF1ZXN0PWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5yZXF1ZXN0O3RoaXMuY2FuY2VsPVQuQ0FOQ0VMK1wiIFwiK24ucnVyaStcIiBTSVAvMi4wXFxyXFxuXCIsdGhpcy5jYW5jZWwrPVwiVmlhOiBcIituLmhlYWRlcnMuVmlhLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLnJlcXVlc3QuaGVhZGVycy5Sb3V0ZSYmKHRoaXMuY2FuY2VsKz1cIlJvdXRlOiBcIituLmhlYWRlcnMuUm91dGUudG9TdHJpbmcoKStcIlxcclxcblwiKSx0aGlzLmNhbmNlbCs9XCJUbzogXCIrbi5oZWFkZXJzLlRvLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLmNhbmNlbCs9XCJGcm9tOiBcIituLmhlYWRlcnMuRnJvbS50b1N0cmluZygpK1wiXFxyXFxuXCIsdGhpcy5jYW5jZWwrPVwiQ2FsbC1JRDogXCIrbi5oZWFkZXJzW1wiQ2FsbC1JRFwiXS50b1N0cmluZygpK1wiXFxyXFxuXCIsdGhpcy5jYW5jZWwrPVwiQ1NlcTogXCIrbi5oZWFkZXJzLkNTZXEudG9TdHJpbmcoKS5zcGxpdChcIiBcIilbMF0rXCIgQ0FOQ0VMXFxyXFxuXCIsdCYmKHRoaXMuY2FuY2VsKz1cIlJlYXNvbjogXCIrdCtcIlxcclxcblwiKSx0aGlzLmNhbmNlbCs9XCJDb250ZW50LUxlbmd0aDogMFxcclxcblxcclxcblwiLHRoaXMuc3RhdGU9PT1hLlNUQVRVU19QUk9DRUVESU5HJiZ0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMuY2FuY2VsKX0scy5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnN0YXR1c19jb2RlO2lmKG4+PTEwMCYmMTk5Pj1uKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX0NBTExJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfUFJPQ0VFRElORyksdGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UoZSk7YnJlYWs7Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKGUpfWVsc2UgaWYobj49MjAwJiYyOTk+PW4pc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfQ0FMTElORzpjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfQUNDRVBURUQpLHRoaXMuTT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC50aW1lcl9NKCl9LF8uVElNRVJfTSksdGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UoZSk7YnJlYWs7Y2FzZSBhLlNUQVRVU19BQ0NFUFRFRDp0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShlKX1lbHNlIGlmKG4+PTMwMCYmNjk5Pj1uKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX0NBTExJTkc6Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX0NPTVBMRVRFRCksdGhpcy5zZW5kQUNLKGUpLHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKGUpO2JyZWFrO2Nhc2UgYS5TVEFUVVNfQ09NUExFVEVEOnRoaXMuc2VuZEFDSyhlKX19LGMuaW5oZXJpdHMobCxoLkV2ZW50RW1pdHRlciksbC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5yZXF1ZXN0KXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9LGwucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXtmKFwidHJhbnNwb3J0IGVycm9yIG9jY3VycmVkIGZvciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uVHJhbnNwb3J0RXJyb3IoKX0sYy5pbmhlcml0cyhpLGguRXZlbnRFbWl0dGVyKSxpLnByb3RvdHlwZS5zdGF0ZUNoYW5nZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1lLHRoaXMuZW1pdChcInN0YXRlQ2hhbmdlZFwiKX0saS5wcm90b3R5cGUudGltZXJfSj1mdW5jdGlvbigpe20oXCJUaW1lciBKIGV4cGlyZWQgZm9yIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpfSxpLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7dGhpcy50cmFuc3BvcnRFcnJvcnx8KHRoaXMudHJhbnNwb3J0RXJyb3I9ITAsbShcInRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksY2xlYXJUaW1lb3V0KHRoaXMuSiksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcykpfSxpLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSx0LG4scil7dmFyIHM9dGhpcztpZigxMDA9PT1lKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1RSWUlORzp0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19QUk9DRUVESU5HKSx0aGlzLnRyYW5zcG9ydC5zZW5kKHQpfHx0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKTticmVhaztjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5sYXN0X3Jlc3BvbnNlPXQsdGhpcy50cmFuc3BvcnQuc2VuZCh0KT9uJiZuKCk6KHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHImJnIoKSl9ZWxzZSBpZihlPj0yMDAmJjY5OT49ZSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19UUllJTkc6Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX0NPTVBMRVRFRCksdGhpcy5sYXN0X3Jlc3BvbnNlPXQsdGhpcy5KPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLnRpbWVyX0ooKX0sXy5USU1FUl9KKSx0aGlzLnRyYW5zcG9ydC5zZW5kKHQpP24mJm4oKToodGhpcy5vblRyYW5zcG9ydEVycm9yKCksciYmcigpKTticmVhaztjYXNlIGEuU1RBVFVTX0NPTVBMRVRFRDp9fSxjLmluaGVyaXRzKG8saC5FdmVudEVtaXR0ZXIpLG8ucHJvdG90eXBlLnN0YXRlQ2hhbmdlZD1mdW5jdGlvbihlKXt0aGlzLnN0YXRlPWUsdGhpcy5lbWl0KFwic3RhdGVDaGFuZ2VkXCIpfSxvLnByb3RvdHlwZS50aW1lcl9IPWZ1bmN0aW9uKCl7ZyhcIlRpbWVyIEggZXhwaXJlZCBmb3IgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5zdGF0ZT09PWEuU1RBVFVTX0NPTVBMRVRFRCYmZyhcIkFDSyBub3QgcmVjZWl2ZWQsIGRpYWxvZyB3aWxsIGJlIHRlcm1pbmF0ZWRcIiksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyl9LG8ucHJvdG90eXBlLnRpbWVyX0k9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKX0sby5wcm90b3R5cGUudGltZXJfTD1mdW5jdGlvbigpe2coXCJUaW1lciBMIGV4cGlyZWQgZm9yIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGU9PT1hLlNUQVRVU19BQ0NFUFRFRCYmKHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpKX0sby5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0RXJyb3J8fCh0aGlzLnRyYW5zcG9ydEVycm9yPSEwLGcoXCJ0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQsIGRlbGV0aW5nIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLG51bGwhPT10aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXImJihjbGVhckludGVydmFsKHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciksdGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyPW51bGwpLGNsZWFyVGltZW91dCh0aGlzLkwpLGNsZWFyVGltZW91dCh0aGlzLkgpLGNsZWFyVGltZW91dCh0aGlzLkkpLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpKX0sby5wcm90b3R5cGUucmVzZW5kX3Byb3Zpc2lvbmFsPWZ1bmN0aW9uKCl7dGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLmxhc3RfcmVzcG9uc2UpfHx0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKX0sby5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBzPXRoaXM7aWYoZT49MTAwJiYxOTk+PWUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnRyYW5zcG9ydC5zZW5kKHQpfHx0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKSx0aGlzLmxhc3RfcmVzcG9uc2U9dH1pZihlPjEwMCYmMTk5Pj1lJiZ0aGlzLnN0YXRlPT09YS5TVEFUVVNfUFJPQ0VFRElORyludWxsPT09dGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyJiYodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7cy5yZXNlbmRfcHJvdmlzaW9uYWwoKX0sXy5QUk9WSVNJT05BTF9SRVNQT05TRV9JTlRFUlZBTCkpO2Vsc2UgaWYoZT49MjAwJiYyOTk+PWUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19BQ0NFUFRFRCksdGhpcy5sYXN0X3Jlc3BvbnNlPXQsdGhpcy5MPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLnRpbWVyX0woKX0sXy5USU1FUl9MKSxudWxsIT09dGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXIpLHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lcj1udWxsKTtjYXNlIGEuU1RBVFVTX0FDQ0VQVEVEOnRoaXMudHJhbnNwb3J0LnNlbmQodCk/biYmbigpOih0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKSxyJiZyKCkpfWVsc2UgaWYoZT49MzAwJiY2OTk+PWUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzpudWxsIT09dGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXIpLHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lcj1udWxsKSx0aGlzLnRyYW5zcG9ydC5zZW5kKHQpPyh0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19DT01QTEVURUQpLHRoaXMuSD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy50aW1lcl9IKCl9LF8uVElNRVJfSCksbiYmbigpKToodGhpcy5vblRyYW5zcG9ydEVycm9yKCksciYmcigpKX19fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL1RpbWVyc1wiOjIwLGRlYnVnOjMzLGV2ZW50czoyOCx1dGlsOjMyfV0sMjI6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7aWYoYyhcIm5ldygpXCIpLHRoaXMuc3RhdHVzPWQuU1RBVFVTX0RJU0NPTk5FQ1RFRCx0aGlzLnNvY2tldD1udWxsLHRoaXMuc29ja2V0cz1bXSx0aGlzLnJlY292ZXJ5X29wdGlvbnM9dHx8ZC5yZWNvdmVyeV9vcHRpb25zLHRoaXMucmVjb3Zlcl9hdHRlbXB0cz0wLHRoaXMucmVjb3ZlcnlfdGltZXI9bnVsbCx0aGlzLmNsb3NlX3JlcXVlc3RlZD0hMSxcInVuZGVmaW5lZFwiPT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhcmd1bWVudC4gdW5kZWZpbmVkICdzb2NrZXRzJyBhcmd1bWVudFwiKTtlIGluc3RhbmNlb2YgQXJyYXl8fChlPVtlXSksZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKCFhLmlzU29ja2V0KGUuc29ja2V0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhcmd1bWVudC4gaW52YWxpZCAnSnNTSVAuU29ja2V0JyBpbnN0YW5jZVwiKTtpZihlLndlaWdodCYmIU51bWJlcihlLndlaWdodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXJndW1lbnQuICd3ZWlnaHQnIGF0dHJpYnV0ZSBpcyBub3QgYSBudW1iZXJcIik7dGhpcy5zb2NrZXRzLnB1c2goe3NvY2tldDplLnNvY2tldCx3ZWlnaHQ6ZS53ZWlnaHR8fDAsc3RhdHVzOmQuU09DS0VUX1NUQVRVU19SRUFEWX0pfSx0aGlzKSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHt2aWFfdHJhbnNwb3J0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb2NrZXQudmlhX3RyYW5zcG9ydH19LHVybDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc29ja2V0LnVybH19LHNpcF91cmk6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvY2tldC5zaXBfdXJpfX19KSx1LmNhbGwodGhpcyl9ZnVuY3Rpb24gcygpe3RoaXMucmVjb3Zlcl9hdHRlbXB0cz0wLHRoaXMuc3RhdHVzPWQuU1RBVFVTX0NPTk5FQ1RFRCxudWxsIT09dGhpcy5yZWNvdmVyeV90aW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnJlY292ZXJ5X3RpbWVyKSx0aGlzLnJlY292ZXJ5X3RpbWVyPW51bGwpLHRoaXMub25jb25uZWN0KHtzb2NrZXQ6dGhpc30pfWZ1bmN0aW9uIGwoZSx0LG4pe3RoaXMuc3RhdHVzPWQuU1RBVFVTX0RJU0NPTk5FQ1RFRCx0aGlzLm9uZGlzY29ubmVjdCh7c29ja2V0OnRoaXMuc29ja2V0LGVycm9yOmUsY29kZTp0LHJlYXNvbjpufSksdGhpcy5jbG9zZV9yZXF1ZXN0ZWR8fChlJiYodGhpcy5zb2NrZXQuc3RhdHVzPWQuU09DS0VUX1NUQVRVU19FUlJPUiksby5jYWxsKHRoaXMsZSkpfWZ1bmN0aW9uIGkoZSl7aWYoXCJcXHJcXG5cIj09PWUpcmV0dXJuIHZvaWQgYyhcInJlY2VpdmVkIG1lc3NhZ2Ugd2l0aCBDUkxGIEtlZXAgQWxpdmUgcmVzcG9uc2VcIik7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpe3RyeXtlPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheShlKSl9Y2F0Y2godCl7cmV0dXJuIHZvaWQgYyhcInJlY2VpdmVkIGJpbmFyeSBtZXNzYWdlIGZhaWxlZCB0byBiZSBjb252ZXJ0ZWQgaW50byBzdHJpbmcsIG1lc3NhZ2UgZGlzY2FyZGVkXCIpfWMoXCJyZWNlaXZlZCBiaW5hcnkgbWVzc2FnZTpcXG5cXG5cIitlK1wiXFxuXCIpfWVsc2UgYyhcInJlY2VpdmVkIHRleHQgbWVzc2FnZTpcXG5cXG5cIitlK1wiXFxuXCIpO3RoaXMub25kYXRhKHt0cmFuc3BvcnQ6dGhpcyxtZXNzYWdlOmV9KX1mdW5jdGlvbiBvKCl7dmFyIGUsdD10aGlzO3RoaXMucmVjb3Zlcl9hdHRlbXB0cys9MSxlPU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSpNYXRoLnBvdygyLHRoaXMucmVjb3Zlcl9hdHRlbXB0cykrMSksZTx0aGlzLnJlY292ZXJ5X29wdGlvbnMubWluX2ludGVydmFsP2U9dGhpcy5yZWNvdmVyeV9vcHRpb25zLm1pbl9pbnRlcnZhbDplPnRoaXMucmVjb3Zlcnlfb3B0aW9ucy5tYXhfaW50ZXJ2YWwmJihlPXRoaXMucmVjb3Zlcnlfb3B0aW9ucy5tYXhfaW50ZXJ2YWwpLGMoXCJyZWNvbm5lY3Rpb24gYXR0ZW1wdDogXCIrdGhpcy5yZWNvdmVyX2F0dGVtcHRzK1wiLiBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdCBpbiBcIitlK1wiIHNlY29uZHNcIiksdGhpcy5yZWNvdmVyeV90aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5jbG9zZV9yZXF1ZXN0ZWR8fHQuaXNDb25uZWN0ZWQoKXx8dC5pc0Nvbm5lY3RpbmcoKXx8KHUuY2FsbCh0KSx0LmNvbm5lY3QoKSl9LDFlMyplKX1mdW5jdGlvbiB1KCl7dmFyIGU9W107aWYodGhpcy5zb2NrZXRzLmZvckVhY2goZnVuY3Rpb24odCl7dC5zdGF0dXMhPT1kLlNPQ0tFVF9TVEFUVVNfRVJST1ImJigwPT09ZS5sZW5ndGg/ZS5wdXNoKHQpOnQud2VpZ2h0PmVbMF0ud2VpZ2h0P2U9W3RdOnQud2VpZ2h0PT09ZVswXS53ZWlnaHQmJmUucHVzaCh0KSl9KSwwPT09ZS5sZW5ndGgpcmV0dXJuIHRoaXMuc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3RhdHVzPWQuU09DS0VUX1NUQVRVU19SRUFEWX0pLHZvaWQgdS5jYWxsKHRoaXMpO3ZhciB0PU1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSplLmxlbmd0aCk7dGhpcy5zb2NrZXQ9ZVt0XS5zb2NrZXR9dC5leHBvcnRzPXI7dmFyIGE9ZShcIi4vU29ja2V0XCIpLGM9ZShcImRlYnVnXCIpKFwiSnNTSVA6VHJhbnNwb3J0XCIpLGg9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6VHJhbnNwb3J0XCIpLGQ9e1NUQVRVU19DT05ORUNURUQ6MCxTVEFUVVNfQ09OTkVDVElORzoxLFNUQVRVU19ESVNDT05ORUNURUQ6MixTT0NLRVRfU1RBVFVTX1JFQURZOjAsU09DS0VUX1NUQVRVU19FUlJPUjoxLHJlY292ZXJ5X29wdGlvbnM6e21pbl9pbnRlcnZhbDoyLG1heF9pbnRlcnZhbDozMH19O3IucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYyhcImNvbm5lY3QoKVwiKSx0aGlzLmlzQ29ubmVjdGVkKCk/dm9pZCBjKFwiVHJhbnNwb3J0IGlzIGFscmVhZHkgY29ubmVjdGVkXCIpOnRoaXMuaXNDb25uZWN0aW5nKCk/dm9pZCBjKFwiVHJhbnNwb3J0IGlzIGNvbm5lY3RpbmdcIik6KHRoaXMuY2xvc2VfcmVxdWVzdGVkPSExLHRoaXMuc3RhdHVzPWQuU1RBVFVTX0NPTk5FQ1RJTkcsdGhpcy5vbmNvbm5lY3Rpbmcoe3NvY2tldDp0aGlzLnNvY2tldCxhdHRlbXB0czp0aGlzLnJlY292ZXJfYXR0ZW1wdHN9KSx2b2lkKHRoaXMuY2xvc2VfcmVxdWVzdGVkfHwodGhpcy5zb2NrZXQub25jb25uZWN0PXMuYmluZCh0aGlzKSx0aGlzLnNvY2tldC5vbmRpc2Nvbm5lY3Q9bC5iaW5kKHRoaXMpLHRoaXMuc29ja2V0Lm9uZGF0YT1pLmJpbmQodGhpcyksdGhpcy5zb2NrZXQuY29ubmVjdCgpKSkpfSxyLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7YyhcImNsb3NlKClcIiksdGhpcy5jbG9zZV9yZXF1ZXN0ZWQ9ITAsdGhpcy5yZWNvdmVyX2F0dGVtcHRzPTAsdGhpcy5zdGF0dXM9ZC5TVEFUVVNfRElTQ09OTkVDVEVELG51bGwhPT10aGlzLnJlY292ZXJ5X3RpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVjb3ZlcnlfdGltZXIpLHRoaXMucmVjb3ZlcnlfdGltZXI9bnVsbCksdGhpcy5zb2NrZXQub25jb25uZWN0PWZ1bmN0aW9uKCl7fSx0aGlzLnNvY2tldC5vbmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXt9LHRoaXMuc29ja2V0Lm9uZGF0YT1mdW5jdGlvbigpe30sdGhpcy5zb2NrZXQuZGlzY29ubmVjdCgpLHRoaXMub25kaXNjb25uZWN0KCl9LHIucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSl7aWYoYyhcInNlbmQoKVwiKSwhdGhpcy5pc0Nvbm5lY3RlZCgpKXJldHVybiBoKFwidW5hYmxlIHRvIHNlbmQgbWVzc2FnZSwgdHJhbnNwb3J0IGlzIG5vdCBjb25uZWN0ZWRcIiksITE7dmFyIHQ9ZS50b1N0cmluZygpO3JldHVybiBjKFwic2VuZGluZyBtZXNzYWdlOlxcblxcblwiK3QrXCJcXG5cIiksdGhpcy5zb2NrZXQuc2VuZCh0KX0sci5wcm90b3R5cGUuaXNDb25uZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0dXM9PT1kLlNUQVRVU19DT05ORUNURUR9LHIucHJvdG90eXBlLmlzQ29ubmVjdGluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXR1cz09PWQuU1RBVFVTX0NPTk5FQ1RJTkd9fSx7XCIuL1NvY2tldFwiOjE5LGRlYnVnOjMzfV0sMjM6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe2lmKHRoaXMuY2FjaGU9e2NyZWRlbnRpYWxzOnt9fSx0aGlzLmNvbmZpZ3VyYXRpb249e30sdGhpcy5keW5Db25maWd1cmF0aW9uPXt9LHRoaXMuZGlhbG9ncz17fSx0aGlzLmFwcGxpY2FudHM9e30sdGhpcy5zZXNzaW9ucz17fSx0aGlzLnRyYW5zcG9ydD1udWxsLHRoaXMuY29udGFjdD1udWxsLHRoaXMuc3RhdHVzPXUuU1RBVFVTX0lOSVQsdGhpcy5lcnJvcj1udWxsLHRoaXMudHJhbnNhY3Rpb25zPXtuaXN0Ont9LG5pY3Q6e30saXN0Ont9LGljdDp7fX0sdGhpcy5kYXRhPXt9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3RyYW5zYWN0aW9uc0NvdW50OntnZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0PVtcIm5pc3RcIixcIm5pY3RcIixcImlzdFwiLFwiaWN0XCJdLG49MDtmb3IoZSBpbiB0KW4rPU9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zW3RbZV1dKS5sZW5ndGg7cmV0dXJuIG59fSxuaWN0VHJhbnNhY3Rpb25zQ291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9ucy5uaWN0KS5sZW5ndGh9fSxuaXN0VHJhbnNhY3Rpb25zQ291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9ucy5uaXN0KS5sZW5ndGh9fSxpY3RUcmFuc2FjdGlvbnNDb3VudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zLmljdCkubGVuZ3RofX0saXN0VHJhbnNhY3Rpb25zQ291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9ucy5pc3QpLmxlbmd0aH19fSksdm9pZCAwPT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGVub3VnaCBhcmd1bWVudHNcIik7dHJ5e3RoaXMubG9hZENvbmZpZyhlKX1jYXRjaCh0KXt0aHJvdyB0aGlzLnN0YXR1cz11LlNUQVRVU19OT1RfUkVBRFksdGhpcy5lcnJvcj11LkNPTkZJR1VSQVRJT05fRVJST1IsdH10aGlzLl9yZWdpc3RyYXRvcj1uZXcgbSh0aGlzKSxjLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpLHAuY2FsbGVkfHxwKCl9ZnVuY3Rpb24gcyhlKXt0aGlzLmVtaXQoXCJjb25uZWN0aW5nXCIsZSl9ZnVuY3Rpb24gbChlKXt0aGlzLnN0YXR1cyE9PXUuU1RBVFVTX1VTRVJfQ0xPU0VEJiYodGhpcy5zdGF0dXM9dS5TVEFUVVNfUkVBRFksdGhpcy5lcnJvcj1udWxsLHRoaXMuZW1pdChcImNvbm5lY3RlZFwiLGUpLHRoaXMuZHluQ29uZmlndXJhdGlvbi5yZWdpc3RlciYmdGhpcy5fcmVnaXN0cmF0b3IucmVnaXN0ZXIoKSl9ZnVuY3Rpb24gaShlKXt2YXIgdCxuLHIscz1bXCJuaWN0XCIsXCJpY3RcIixcIm5pc3RcIixcImlzdFwiXTtmb3Iocj1zLmxlbmd0aCx0PTA7cj50O3QrKylmb3IobiBpbiB0aGlzLnRyYW5zYWN0aW9uc1tzW3RdXSl0aGlzLnRyYW5zYWN0aW9uc1tzW3RdXVtuXS5vblRyYW5zcG9ydEVycm9yKCk7dGhpcy5lbWl0KFwiZGlzY29ubmVjdGVkXCIsZSksdGhpcy5fcmVnaXN0cmF0b3Iub25UcmFuc3BvcnRDbG9zZWQoKSx0aGlzLnN0YXR1cyE9PXUuU1RBVFVTX1VTRVJfQ0xPU0VEJiYodGhpcy5zdGF0dXM9dS5TVEFUVVNfTk9UX1JFQURZLHRoaXMuZXJyb3I9dS5ORVRXT1JLX0VSUk9SKX1mdW5jdGlvbiBvKGUpe3ZhciB0LG49ZS50cmFuc3BvcnQscz1lLm1lc3NhZ2U7aWYocz1iLnBhcnNlTWVzc2FnZShzLHRoaXMpLHMmJiEodGhpcy5zdGF0dXM9PT1yLkMuU1RBVFVTX1VTRVJfQ0xPU0VEJiZzIGluc3RhbmNlb2YgSS5JbmNvbWluZ1JlcXVlc3QpJiZ3KHMsdGhpcyxuKSlpZihzIGluc3RhbmNlb2YgSS5JbmNvbWluZ1JlcXVlc3Qpcy50cmFuc3BvcnQ9bix0aGlzLnJlY2VpdmVSZXF1ZXN0KHMpO2Vsc2UgaWYocyBpbnN0YW5jZW9mIEkuSW5jb21pbmdSZXNwb25zZSlzd2l0Y2gocy5tZXRob2Qpe2Nhc2UgZi5JTlZJVEU6dD10aGlzLnRyYW5zYWN0aW9ucy5pY3Rbcy52aWFfYnJhbmNoXSx0JiZ0LnJlY2VpdmVSZXNwb25zZShzKTticmVhaztjYXNlIGYuQUNLOmJyZWFrO2RlZmF1bHQ6dD10aGlzLnRyYW5zYWN0aW9ucy5uaWN0W3MudmlhX2JyYW5jaF0sdCYmdC5yZWNlaXZlUmVzcG9uc2Uocyl9fXQuZXhwb3J0cz1yO3ZhciB1PXtTVEFUVVNfSU5JVDowLFNUQVRVU19SRUFEWToxLFNUQVRVU19VU0VSX0NMT1NFRDoyLFNUQVRVU19OT1RfUkVBRFk6MyxDT05GSUdVUkFUSU9OX0VSUk9SOjEsTkVUV09SS19FUlJPUjoyfTtyLkM9dTt2YXIgYT1lKFwidXRpbFwiKSxjPWUoXCJldmVudHNcIiksaD1lKFwiZGVidWdcIikoXCJKc1NJUDpVQVwiKSxkPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOlVBXCIpO2QubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO3ZhciBwPWUoXCJydGNuaW5qYVwiKSxmPWUoXCIuL0NvbnN0YW50c1wiKSxtPWUoXCIuL1JlZ2lzdHJhdG9yXCIpLGc9ZShcIi4vUlRDU2Vzc2lvblwiKSxUPWUoXCIuL01lc3NhZ2VcIiksXz1lKFwiLi9UcmFuc2FjdGlvbnNcIiksdj1lKFwiLi9UcmFuc3BvcnRcIiksQz1lKFwiLi9XZWJTb2NrZXRJbnRlcmZhY2VcIiksUz1lKFwiLi9Tb2NrZXRcIiksRT1lKFwiLi9VdGlsc1wiKSxBPWUoXCIuL0V4Y2VwdGlvbnNcIikseT1lKFwiLi9VUklcIiksUj1lKFwiLi9HcmFtbWFyXCIpLGI9ZShcIi4vUGFyc2VyXCIpLEk9ZShcIi4vU0lQTWVzc2FnZVwiKSx3PWUoXCIuL3Nhbml0eUNoZWNrXCIpO2EuaW5oZXJpdHMocixjLkV2ZW50RW1pdHRlciksci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7aChcInJlc3RhcnRpbmcgVUFcIiksdC5zdGF0dXM9dS5TVEFUVVNfUkVBRFksdC50cmFuc3BvcnQuY29ubmVjdCgpfWgoXCJzdGFydCgpXCIpO3ZhciB0PXRoaXM7dGhpcy5zdGF0dXM9PT11LlNUQVRVU19JTklUP3RoaXMudHJhbnNwb3J0LmNvbm5lY3QoKTp0aGlzLnN0YXR1cz09PXUuU1RBVFVTX1VTRVJfQ0xPU0VEP3RoaXMuaXNDb25uZWN0ZWQoKT90aGlzLm9uY2UoXCJkaXNjb25uZWN0ZWRcIixlKTplKCk6aCh0aGlzLnN0YXR1cz09PXUuU1RBVFVTX1JFQURZP1wiVUEgaXMgaW4gUkVBRFkgc3RhdHVzLCBub3QgcmVzdGFydGVkXCI6XCJFUlJPUjogY29ubmVjdGlvbiBpcyBkb3duLCBBdXRvLVJlY292ZXJ5IHN5c3RlbSBpcyB0cnlpbmcgdG8gcmVjb25uZWN0XCIpLHRoaXMuZHluQ29uZmlndXJhdGlvbi5yZWdpc3Rlcj10aGlzLmNvbmZpZ3VyYXRpb24ucmVnaXN0ZXJ9LHIucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKCl7aChcInJlZ2lzdGVyKClcIiksdGhpcy5keW5Db25maWd1cmF0aW9uLnJlZ2lzdGVyPSEwLHRoaXMuX3JlZ2lzdHJhdG9yLnJlZ2lzdGVyKCl9LHIucHJvdG90eXBlLnVucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7aChcInVucmVnaXN0ZXIoKVwiKSx0aGlzLmR5bkNvbmZpZ3VyYXRpb24ucmVnaXN0ZXI9ITEsdGhpcy5fcmVnaXN0cmF0b3IudW5yZWdpc3RlcihlKX0sci5wcm90b3R5cGUucmVnaXN0cmF0b3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVnaXN0cmF0b3J9LHIucHJvdG90eXBlLmlzUmVnaXN0ZXJlZD1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fcmVnaXN0cmF0b3IucmVnaXN0ZXJlZH0sci5wcm90b3R5cGUuaXNDb25uZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc3BvcnQuaXNDb25uZWN0ZWQoKX0sci5wcm90b3R5cGUuY2FsbD1mdW5jdGlvbihlLHQpe2goXCJjYWxsKClcIik7dmFyIG47cmV0dXJuIG49bmV3IGcodGhpcyksbi5jb25uZWN0KGUsdCksbn0sci5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe2goXCJzZW5kTWVzc2FnZSgpXCIpO3ZhciByO3JldHVybiByPW5ldyBUKHRoaXMpLHIuc2VuZChlLHQsbikscn0sci5wcm90b3R5cGUudGVybWluYXRlU2Vzc2lvbnM9ZnVuY3Rpb24oZSl7aChcInRlcm1pbmF0ZVNlc3Npb25zKClcIik7Zm9yKHZhciB0IGluIHRoaXMuc2Vzc2lvbnMpdGhpcy5zZXNzaW9uc1t0XS5pc0VuZGVkKCl8fHRoaXMuc2Vzc2lvbnNbdF0udGVybWluYXRlKGUpfSxyLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7aChcInN0b3AoKVwiKTt2YXIgZSx0LG4scj10aGlzO2lmKHRoaXMuZHluQ29uZmlndXJhdGlvbj17fSx0aGlzLnN0YXR1cz09PXUuU1RBVFVTX1VTRVJfQ0xPU0VEKXJldHVybiB2b2lkIGgoXCJVQSBhbHJlYWR5IGNsb3NlZFwiKTt0aGlzLl9yZWdpc3RyYXRvci5jbG9zZSgpLG49T2JqZWN0LmtleXModGhpcy5zZXNzaW9ucykubGVuZ3RoO2ZvcihlIGluIHRoaXMuc2Vzc2lvbnMpe2goXCJjbG9zaW5nIHNlc3Npb24gXCIrZSk7dHJ5e3RoaXMuc2Vzc2lvbnNbZV0udGVybWluYXRlKCl9Y2F0Y2gocyl7fX1mb3IodCBpbiB0aGlzLmFwcGxpY2FudHMpdHJ5e3RoaXMuYXBwbGljYW50c1t0XS5jbG9zZSgpfWNhdGNoKHMpe310aGlzLnN0YXR1cz11LlNUQVRVU19VU0VSX0NMT1NFRCwwPT09dGhpcy5uaXN0VHJhbnNhY3Rpb25zQ291bnQmJjA9PT10aGlzLm5pY3RUcmFuc2FjdGlvbnNDb3VudCYmMD09PXRoaXMuaWN0VHJhbnNhY3Rpb25zQ291bnQmJjA9PT10aGlzLmlzdFRyYW5zYWN0aW9uc0NvdW50JiYwPT09bj9yLnRyYW5zcG9ydC5kaXNjb25uZWN0KCk6c2V0VGltZW91dChmdW5jdGlvbigpe3IudHJhbnNwb3J0LmRpc2Nvbm5lY3QoKX0sMmUzKX0sci5wcm90b3R5cGUubm9ybWFsaXplVGFyZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBFLm5vcm1hbGl6ZVRhcmdldChlLHRoaXMuY29uZmlndXJhdGlvbi5ob3N0cG9ydF9wYXJhbXMpfSxyLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2VcInJlYWxtXCI6cmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5yZWFsbTtjYXNlXCJoYTFcIjpyZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLmhhMTtkZWZhdWx0OnJldHVybiB2b2lkIGQoJ2dldCgpIHwgY2Fubm90IGdldCBcIiVzXCIgcGFyYW1ldGVyIGluIHJ1bnRpbWUnLGUpfXJldHVybiEwfSxyLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXtzd2l0Y2goZSl7Y2FzZVwicGFzc3dvcmRcIjp0aGlzLmNvbmZpZ3VyYXRpb24ucGFzc3dvcmQ9U3RyaW5nKHQpO2JyZWFrO2Nhc2VcInJlYWxtXCI6dGhpcy5jb25maWd1cmF0aW9uLnJlYWxtPVN0cmluZyh0KTticmVhaztjYXNlXCJoYTFcIjp0aGlzLmNvbmZpZ3VyYXRpb24uaGExPVN0cmluZyh0KSx0aGlzLmNvbmZpZ3VyYXRpb24ucGFzc3dvcmQ9bnVsbDticmVhaztjYXNlXCJkaXNwbGF5X25hbWVcIjppZigtMT09PVIucGFyc2UoJ1wiJyt0KydcIicsXCJkaXNwbGF5X25hbWVcIikpcmV0dXJuIGQoJ3NldCgpIHwgd3JvbmcgXCJkaXNwbGF5X25hbWVcIicpLCExO3RoaXMuY29uZmlndXJhdGlvbi5kaXNwbGF5X25hbWU9dDticmVhaztkZWZhdWx0OnJldHVybiBkKCdzZXQoKSB8IGNhbm5vdCBzZXQgXCIlc1wiIHBhcmFtZXRlciBpbiBydW50aW1lJyxlKSwhMX1yZXR1cm4hMH0sci5wcm90b3R5cGUubmV3VHJhbnNhY3Rpb249ZnVuY3Rpb24oZSl7dGhpcy50cmFuc2FjdGlvbnNbZS50eXBlXVtlLmlkXT1lLHRoaXMuZW1pdChcIm5ld1RyYW5zYWN0aW9uXCIse3RyYW5zYWN0aW9uOmV9KX0sci5wcm90b3R5cGUuZGVzdHJveVRyYW5zYWN0aW9uPWZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLnRyYW5zYWN0aW9uc1tlLnR5cGVdW2UuaWRdLHRoaXMuZW1pdChcInRyYW5zYWN0aW9uRGVzdHJveWVkXCIse3RyYW5zYWN0aW9uOmV9KX0sci5wcm90b3R5cGUubmV3TWVzc2FnZT1mdW5jdGlvbihlKXt0aGlzLmVtaXQoXCJuZXdNZXNzYWdlXCIsZSl9LHIucHJvdG90eXBlLm5ld1JUQ1Nlc3Npb249ZnVuY3Rpb24oZSl7dGhpcy5lbWl0KFwibmV3UlRDU2Vzc2lvblwiLGUpfSxyLnByb3RvdHlwZS5yZWdpc3RlcmVkPWZ1bmN0aW9uKGUpe3RoaXMuZW1pdChcInJlZ2lzdGVyZWRcIixlKX0sci5wcm90b3R5cGUudW5yZWdpc3RlcmVkPWZ1bmN0aW9uKGUpe3RoaXMuZW1pdChcInVucmVnaXN0ZXJlZFwiLGUpfSxyLnByb3RvdHlwZS5yZWdpc3RyYXRpb25GYWlsZWQ9ZnVuY3Rpb24oZSl7dGhpcy5lbWl0KFwicmVnaXN0cmF0aW9uRmFpbGVkXCIsZSl9LHIucHJvdG90eXBlLnJlY2VpdmVSZXF1ZXN0PWZ1bmN0aW9uKGUpe3ZhciB0LG4scixzLGw9ZS5tZXRob2Q7aWYoZS5ydXJpLnVzZXIhPT10aGlzLmNvbmZpZ3VyYXRpb24udXJpLnVzZXImJmUucnVyaS51c2VyIT09dGhpcy5jb250YWN0LnVyaS51c2VyKXJldHVybiBoKFwiUmVxdWVzdC1VUkkgZG9lcyBub3QgcG9pbnQgdG8gdXNcIiksdm9pZChlLm1ldGhvZCE9PWYuQUNLJiZlLnJlcGx5X3NsKDQwNCkpO2lmKGUucnVyaS5zY2hlbWU9PT1mLlNJUFMpcmV0dXJuIHZvaWQgZS5yZXBseV9zbCg0MTYpO2lmKCFfLmNoZWNrVHJhbnNhY3Rpb24odGhpcyxlKSl7aWYobD09PWYuSU5WSVRFP25ldyBfLkludml0ZVNlcnZlclRyYW5zYWN0aW9uKGUsdGhpcyk6bCE9PWYuQUNLJiZsIT09Zi5DQU5DRUwmJm5ldyBfLk5vbkludml0ZVNlcnZlclRyYW5zYWN0aW9uKGUsdGhpcyksbD09PWYuT1BUSU9OUyllLnJlcGx5KDIwMCk7ZWxzZSBpZihsPT09Zi5NRVNTQUdFKXtpZigwPT09dGhpcy5saXN0ZW5lcnMoXCJuZXdNZXNzYWdlXCIpLmxlbmd0aClyZXR1cm4gdm9pZCBlLnJlcGx5KDQwNSk7cj1uZXcgVCh0aGlzKSxyLmluaXRfaW5jb21pbmcoZSl9ZWxzZSBpZihsPT09Zi5JTlZJVEUmJiFlLnRvX3RhZyYmMD09PXRoaXMubGlzdGVuZXJzKFwibmV3UlRDU2Vzc2lvblwiKS5sZW5ndGgpcmV0dXJuIHZvaWQgZS5yZXBseSg0MDUpO2lmKGUudG9fdGFnKXQ9dGhpcy5maW5kRGlhbG9nKGUuY2FsbF9pZCxlLmZyb21fdGFnLGUudG9fdGFnKSx0P3QucmVjZWl2ZVJlcXVlc3QoZSk6bD09PWYuTk9USUZZPyhuPXRoaXMuZmluZFNlc3Npb24oZSksbj9uLnJlY2VpdmVSZXF1ZXN0KGUpOihoKFwicmVjZWl2ZWQgTk9USUZZIHJlcXVlc3QgZm9yIGEgbm9uIGV4aXN0ZW50IHN1YnNjcmlwdGlvblwiKSxlLnJlcGx5KDQ4MSxcIlN1YnNjcmlwdGlvbiBkb2VzIG5vdCBleGlzdFwiKSkpOmwhPT1mLkFDSyYmZS5yZXBseSg0ODEpO2Vsc2Ugc3dpdGNoKGwpe2Nhc2UgZi5JTlZJVEU6cC5oYXNXZWJSVEMoKT9lLmhhc0hlYWRlcihcInJlcGxhY2VzXCIpPyhzPWUucmVwbGFjZXMsdD10aGlzLmZpbmREaWFsb2cocy5jYWxsX2lkLHMuZnJvbV90YWcscy50b190YWcpLHQ/KG49dC5vd25lcixuLmlzRW5kZWQoKT9lLnJlcGx5KDYwMyk6bi5yZWNlaXZlUmVxdWVzdChlKSk6ZS5yZXBseSg0ODEpKToobj1uZXcgZyh0aGlzKSxuLmluaXRfaW5jb21pbmcoZSkpOihoKFwiSU5WSVRFIHJlY2VpdmVkIGJ1dCBXZWJSVEMgaXMgbm90IHN1cHBvcnRlZFwiKSxlLnJlcGx5KDQ4OCkpO2JyZWFrO2Nhc2UgZi5CWUU6ZS5yZXBseSg0ODEpO2JyZWFrO2Nhc2UgZi5DQU5DRUw6bj10aGlzLmZpbmRTZXNzaW9uKGUpLG4/bi5yZWNlaXZlUmVxdWVzdChlKTpoKFwicmVjZWl2ZWQgQ0FOQ0VMIHJlcXVlc3QgZm9yIGEgbm9uIGV4aXN0ZW50IHNlc3Npb25cIik7YnJlYWs7Y2FzZSBmLkFDSzpicmVhaztkZWZhdWx0OmUucmVwbHkoNDA1KX19fSxyLnByb3RvdHlwZS5maW5kU2Vzc2lvbj1mdW5jdGlvbihlKXt2YXIgdD1lLmNhbGxfaWQrZS5mcm9tX3RhZyxuPXRoaXMuc2Vzc2lvbnNbdF0scj1lLmNhbGxfaWQrZS50b190YWcscz10aGlzLnNlc3Npb25zW3JdO3JldHVybiBuP246cz9zOm51bGx9LHIucHJvdG90eXBlLmZpbmREaWFsb2c9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUrdCtuLHM9dGhpcy5kaWFsb2dzW3JdO3JldHVybiBzP3M6KHI9ZStuK3Qscz10aGlzLmRpYWxvZ3Nbcl0scz9zOm51bGwpfSxyLnByb3RvdHlwZS5sb2FkQ29uZmlnPWZ1bmN0aW9uKGUpe3ZhciB0LG4sdSxhLGMscD17dmlhX2hvc3Q6RS5jcmVhdGVSYW5kb21Ub2tlbigxMikrXCIuaW52YWxpZFwiLGNvbnRhY3RfdXJpOm51bGwscGFzc3dvcmQ6bnVsbCxyZWFsbTpudWxsLGhhMTpudWxsLHJlZ2lzdGVyX2V4cGlyZXM6NjAwLHJlZ2lzdGVyOiEwLHJlZ2lzdHJhcl9zZXJ2ZXI6bnVsbCx1c2VfcHJlbG9hZGVkX3JvdXRlOiExLG5vX2Fuc3dlcl90aW1lb3V0OjYwLHNlc3Npb25fdGltZXJzOiEwfTtmb3IodCBpbiByLmNvbmZpZ3VyYXRpb25fY2hlY2subWFuZGF0b3J5KXtpZighZS5oYXNPd25Qcm9wZXJ0eSh0KSl0aHJvdyBuZXcgQS5Db25maWd1cmF0aW9uRXJyb3IodCk7aWYobj1lW3RdLHU9ci5jb25maWd1cmF0aW9uX2NoZWNrLm1hbmRhdG9yeVt0XS5jYWxsKHRoaXMsbiksdm9pZCAwPT09dSl0aHJvdyBuZXcgQS5Db25maWd1cmF0aW9uRXJyb3IodCxuKTtwW3RdPXV9Zm9yKHQgaW4gci5jb25maWd1cmF0aW9uX2NoZWNrLm9wdGlvbmFsKWlmKGUuaGFzT3duUHJvcGVydHkodCkpe2lmKG49ZVt0XSxFLmlzRW1wdHkobikpY29udGludWU7aWYodT1yLmNvbmZpZ3VyYXRpb25fY2hlY2sub3B0aW9uYWxbdF0uY2FsbCh0aGlzLG4sZSksdm9pZCAwPT09dSl0aHJvdyBuZXcgQS5Db25maWd1cmF0aW9uRXJyb3IodCxuKTtwW3RdPXV9MD09PXAuZGlzcGxheV9uYW1lJiYocC5kaXNwbGF5X25hbWU9XCIwXCIpLHAuaW5zdGFuY2VfaWR8fChwLmluc3RhbmNlX2lkPUUubmV3VVVJRCgpKSxwLmpzc2lwX2lkPUUuY3JlYXRlUmFuZG9tVG9rZW4oNSksYT1wLnVyaS5jbG9uZSgpLGEudXNlcj1udWxsLHAuaG9zdHBvcnRfcGFyYW1zPWEudG9TdHJpbmcoKS5yZXBsYWNlKC9ec2lwOi9pLFwiXCIpO3ZhciBmPVtdO2lmKHAud3Nfc2VydmVycyYmQXJyYXkuaXNBcnJheShwLndzX3NlcnZlcnMpJiYoZj1mLmNvbmNhdChwLndzX3NlcnZlcnMpKSxwLnNvY2tldHMmJkFycmF5LmlzQXJyYXkocC5zb2NrZXRzKSYmKGY9Zi5jb25jYXQocC5zb2NrZXRzKSksMD09PWYubGVuZ3RoKXRocm93IG5ldyBBLkNvbmZpZ3VyYXRpb25FcnJvcihcInNvY2tldHNcIik7dHJ5e3RoaXMudHJhbnNwb3J0PW5ldyB2KGYse21heF9pbnRlcnZhbDpwLmNvbm5lY3Rpb25fcmVjb3ZlcnlfbWF4X2ludGVydmFsLG1pbl9pbnRlcnZhbDpwLmNvbm5lY3Rpb25fcmVjb3ZlcnlfbWluX2ludGVydmFsfSksdGhpcy50cmFuc3BvcnQub25jb25uZWN0aW5nPXMuYmluZCh0aGlzKSx0aGlzLnRyYW5zcG9ydC5vbmNvbm5lY3Q9bC5iaW5kKHRoaXMpLHRoaXMudHJhbnNwb3J0Lm9uZGlzY29ubmVjdD1pLmJpbmQodGhpcyksdGhpcy50cmFuc3BvcnQub25kYXRhPW8uYmluZCh0aGlzKSxkZWxldGUgcC5jb25uZWN0aW9uX3JlY292ZXJ5X21heF9pbnRlcnZhbCxkZWxldGUgcC5jb25uZWN0aW9uX3JlY292ZXJ5X21pbl9pbnRlcnZhbCxkZWxldGUgcC53c19zZXJ2ZXJzLGRlbGV0ZSBwLnNvY2tldHN9Y2F0Y2gobSl7dGhyb3cgZChtKSxuZXcgQS5Db25maWd1cmF0aW9uRXJyb3IoXCJzb2NrZXRzXCIsZil9cC5hdXRob3JpemF0aW9uX3VzZXJ8fChwLmF1dGhvcml6YXRpb25fdXNlcj1wLnVyaS51c2VyKSxwLnJlZ2lzdHJhcl9zZXJ2ZXJ8fChjPXAudXJpLmNsb25lKCksYy51c2VyPW51bGwsYy5jbGVhclBhcmFtcygpLGMuY2xlYXJIZWFkZXJzKCkscC5yZWdpc3RyYXJfc2VydmVyPWMpLHAubm9fYW5zd2VyX3RpbWVvdXQ9MWUzKnAubm9fYW5zd2VyX3RpbWVvdXQscC5jb250YWN0X3VyaT9wLnZpYV9ob3N0PXAuY29udGFjdF91cmkuaG9zdDpwLmNvbnRhY3RfdXJpPW5ldyB5KFwic2lwXCIsRS5jcmVhdGVSYW5kb21Ub2tlbig4KSxwLnZpYV9ob3N0LG51bGwse3RyYW5zcG9ydDpcIndzXCJ9KSx0aGlzLmNvbnRhY3Q9e3B1Yl9ncnV1Om51bGwsdGVtcF9ncnV1Om51bGwsdXJpOnAuY29udGFjdF91cmksdG9TdHJpbmc6ZnVuY3Rpb24oZSl7ZT1lfHx7fTt2YXIgdD1lLmFub255bW91c3x8bnVsbCxuPWUub3V0Ym91bmR8fG51bGwscj1cIjxcIjtyZXR1cm4gcis9dD90aGlzLnRlbXBfZ3J1dXx8XCJzaXA6YW5vbnltb3VzQGFub255bW91cy5pbnZhbGlkO3RyYW5zcG9ydD13c1wiOnRoaXMucHViX2dydXV8fHRoaXMudXJpLnRvU3RyaW5nKCksIW58fCh0P3RoaXMudGVtcF9ncnV1OnRoaXMucHViX2dydXUpfHwocis9XCI7b2JcIikscis9XCI+XCJ9fTtmb3IodCBpbiBwKXIuY29uZmlndXJhdGlvbl9za2VsZXRvblt0XS52YWx1ZT1wW3RdO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMuY29uZmlndXJhdGlvbixyLmNvbmZpZ3VyYXRpb25fc2tlbGV0b24pO2Zvcih0IGluIHApci5jb25maWd1cmF0aW9uX3NrZWxldG9uW3RdLnZhbHVlPVwiXCI7aChcImNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyBhZnRlciB2YWxpZGF0aW9uOlwiKTtmb3IodCBpbiBwKXN3aXRjaCh0KXtjYXNlXCJ1cmlcIjpjYXNlXCJyZWdpc3RyYXJfc2VydmVyXCI6aChcIi0gXCIrdCtcIjogXCIrcFt0XSk7YnJlYWs7Y2FzZVwicGFzc3dvcmRcIjpjYXNlXCJoYTFcIjpoKFwiLSBcIit0K1wiOiBOT1QgU0hPV05cIik7YnJlYWs7ZGVmYXVsdDpoKFwiLSBcIit0K1wiOiBcIitKU09OLnN0cmluZ2lmeShwW3RdKSl9fSxyLmNvbmZpZ3VyYXRpb25fc2tlbGV0b249ZnVuY3Rpb24oKXt2YXIgZSx0LG4scj17fSxzPVtcImpzc2lwX2lkXCIsXCJob3N0cG9ydF9wYXJhbXNcIixcInVyaVwiLFwiYXV0aG9yaXphdGlvbl91c2VyXCIsXCJjb250YWN0X3VyaVwiLFwiZGlzcGxheV9uYW1lXCIsXCJpbnN0YW5jZV9pZFwiLFwibm9fYW5zd2VyX3RpbWVvdXRcIixcInNlc3Npb25fdGltZXJzXCIsXCJwYXNzd29yZFwiLFwicmVhbG1cIixcImhhMVwiLFwicmVnaXN0ZXJfZXhwaXJlc1wiLFwicmVnaXN0cmFyX3NlcnZlclwiLFwic29ja2V0c1wiLFwidXNlX3ByZWxvYWRlZF9yb3V0ZVwiLFwid3Nfc2VydmVyc1wiLFwidmlhX2NvcmVfdmFsdWVcIixcInZpYV9ob3N0XCJdLGw9W1wicGFzc3dvcmRcIixcInJlYWxtXCIsXCJoYTFcIixcImRpc3BsYXlfbmFtZVwiXTtmb3IoZSBpbiBzKXQ9c1tlXSxuPS0xIT09bC5pbmRleE9mKHQpLHJbdF09e3ZhbHVlOlwiXCIsd3JpdGFibGU6bixjb25maWd1cmFibGU6ITF9O3JldHVybiByLnJlZ2lzdGVyPXt2YWx1ZTpcIlwiLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0scn0oKSxyLmNvbmZpZ3VyYXRpb25fY2hlY2s9e21hbmRhdG9yeTp7dXJpOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybi9ec2lwOi9pLnRlc3QoZSl8fChlPWYuU0lQK1wiOlwiK2UpLHQ9eS5wYXJzZShlKSx0JiZ0LnVzZXI/dDp2b2lkIDB9fSxvcHRpb25hbDp7YXV0aG9yaXphdGlvbl91c2VyOmZ1bmN0aW9uKGUpe3JldHVybi0xPT09Ui5wYXJzZSgnXCInK2UrJ1wiJyxcInF1b3RlZF9zdHJpbmdcIik/dm9pZCAwOmV9LGNvbm5lY3Rpb25fcmVjb3ZlcnlfbWF4X2ludGVydmFsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBFLmlzRGVjaW1hbChlKSYmKHQ9TnVtYmVyKGUpLHQ+MCk/dDp2b2lkIDB9LGNvbm5lY3Rpb25fcmVjb3ZlcnlfbWluX2ludGVydmFsOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBFLmlzRGVjaW1hbChlKSYmKHQ9TnVtYmVyKGUpLHQ+MCk/dDp2b2lkIDB9LGNvbnRhY3RfdXJpOmZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXt2YXIgdD1SLnBhcnNlKGUsXCJTSVBfVVJJXCIpO2lmKC0xIT09dClyZXR1cm4gdH19LGRpc3BsYXlfbmFtZTpmdW5jdGlvbihlKXtyZXR1cm4tMT09PVIucGFyc2UoJ1wiJytlKydcIicsXCJkaXNwbGF5X25hbWVcIik/dm9pZCAwOmV9LGluc3RhbmNlX2lkOmZ1bmN0aW9uKGUpe3JldHVybi9edXVpZDovaS50ZXN0KGUpJiYoZT1lLnN1YnN0cig1KSksLTE9PT1SLnBhcnNlKGUsXCJ1dWlkXCIpP3ZvaWQgMDplfSxub19hbnN3ZXJfdGltZW91dDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gRS5pc0RlY2ltYWwoZSkmJih0PU51bWJlcihlKSx0PjApP3Q6dm9pZCAwfSxzZXNzaW9uX3RpbWVyczpmdW5jdGlvbihlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGU/ZTp2b2lkIDB9LHBhc3N3b3JkOmZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcoZSl9LHJlYWxtOmZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcoZSl9LGhhMTpmdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nKGUpfSxyZWdpc3RlcjpmdW5jdGlvbihlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGU/ZTp2b2lkIDB9LHJlZ2lzdGVyX2V4cGlyZXM6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIEUuaXNEZWNpbWFsKGUpJiYodD1OdW1iZXIoZSksdD4wKT90OnZvaWQgMH0scmVnaXN0cmFyX3NlcnZlcjpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4vXnNpcDovaS50ZXN0KGUpfHwoZT1mLlNJUCtcIjpcIitlKSx0PXkucGFyc2UoZSksdD90LnVzZXI/dm9pZCAwOnQ6dm9pZCAwfSxzb2NrZXRzOmZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoUy5pc1NvY2tldChlKSllPVt7c29ja2V0OmV9XTtlbHNle2lmKCFBcnJheS5pc0FycmF5KGUpfHwhZS5sZW5ndGgpcmV0dXJuO2ZvcihuPWUubGVuZ3RoLHQ9MDtuPnQ7dCsrKVMuaXNTb2NrZXQoZVt0XSkmJihlW3RdPXtzb2NrZXQ6ZVt0XX0pfXJldHVybiBlfSx1c2VfcHJlbG9hZGVkX3JvdXRlOmZ1bmN0aW9uKGUpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZT9lOnZvaWQgMH0sd3Nfc2VydmVyczpmdW5jdGlvbihlKXt2YXIgdCxuLHI9W107aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpZT1be3dzX3VyaTplfV07ZWxzZXtpZighQXJyYXkuaXNBcnJheShlKXx8IWUubGVuZ3RoKXJldHVybjtmb3Iobj1lLmxlbmd0aCx0PTA7bj50O3QrKylcInN0cmluZ1wiPT10eXBlb2YgZVt0XSYmKGVbdF09e3dzX3VyaTplW3RdfSl9Zm9yKG49ZS5sZW5ndGgsdD0wO24+dDt0KyspdHJ5e3IucHVzaCh7c29ja2V0Om5ldyBDKGVbdF0ud3NfdXJpKSx3ZWlnaHQ6ZVt0XS53ZWlnaHR8fDB9KX1jYXRjaChzKXtyZXR1cm4gdm9pZCBkKHMpfXJldHVybiByfX19fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL0V4Y2VwdGlvbnNcIjo1LFwiLi9HcmFtbWFyXCI6NixcIi4vTWVzc2FnZVwiOjgsXCIuL1BhcnNlclwiOjEwLFwiLi9SVENTZXNzaW9uXCI6MTEsXCIuL1JlZ2lzdHJhdG9yXCI6MTYsXCIuL1NJUE1lc3NhZ2VcIjoxOCxcIi4vU29ja2V0XCI6MTksXCIuL1RyYW5zYWN0aW9uc1wiOjIxLFwiLi9UcmFuc3BvcnRcIjoyMixcIi4vVVJJXCI6MjQsXCIuL1V0aWxzXCI6MjUsXCIuL1dlYlNvY2tldEludGVyZmFjZVwiOjI2LFwiLi9zYW5pdHlDaGVja1wiOjI3LGRlYnVnOjMzLGV2ZW50czoyOCxydGNuaW5qYTozOCx1dGlsOjMyfV0sMjQ6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCxuLHIsbCxpKXt2YXIgbyx1O2lmKCFuKXRocm93IG5ldyBUeXBlRXJyb3IoJ21pc3Npbmcgb3IgaW52YWxpZCBcImhvc3RcIiBwYXJhbWV0ZXInKTtlPWV8fHMuU0lQLHRoaXMucGFyYW1ldGVycz17fSx0aGlzLmhlYWRlcnM9e307Zm9yKG8gaW4gbCl0aGlzLnNldFBhcmFtKG8sbFtvXSk7Zm9yKHUgaW4gaSl0aGlzLnNldEhlYWRlcih1LGlbdV0pO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3NjaGVtZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9LHNldDpmdW5jdGlvbih0KXtlPXQudG9Mb3dlckNhc2UoKX19LHVzZXI6e2dldDpmdW5jdGlvbigpe3JldHVybiB0fSxzZXQ6ZnVuY3Rpb24oZSl7dD1lfX0saG9zdDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG59LHNldDpmdW5jdGlvbihlKXtuPWUudG9Mb3dlckNhc2UoKX19LHBvcnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiByfSxzZXQ6ZnVuY3Rpb24oZSl7cj0wPT09ZT9lOnBhcnNlSW50KGUsMTApfHxudWxsfX19KX10LmV4cG9ydHM9cjt2YXIgcz1lKFwiLi9Db25zdGFudHNcIiksbD1lKFwiLi9VdGlsc1wiKSxpPWUoXCIuL0dyYW1tYXJcIik7ci5wcm90b3R5cGU9e3NldFBhcmFtOmZ1bmN0aW9uKGUsdCl7ZSYmKHRoaXMucGFyYW1ldGVyc1tlLnRvTG93ZXJDYXNlKCldPVwidW5kZWZpbmVkXCI9PXR5cGVvZiB0fHxudWxsPT09dD9udWxsOnQudG9TdHJpbmcoKSl9LGdldFBhcmFtOmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMucGFyYW1ldGVyc1tlLnRvTG93ZXJDYXNlKCldOnZvaWQgMH0saGFzUGFyYW06ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGUudG9Mb3dlckNhc2UoKSkmJiEwfHwhMTp2b2lkIDB9LGRlbGV0ZVBhcmFtOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlPWUudG9Mb3dlckNhc2UoKSx0aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoZSk/KHQ9dGhpcy5wYXJhbWV0ZXJzW2VdLGRlbGV0ZSB0aGlzLnBhcmFtZXRlcnNbZV0sdCk6dm9pZCAwfSxjbGVhclBhcmFtczpmdW5jdGlvbigpe3RoaXMucGFyYW1ldGVycz17fX0sc2V0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dGhpcy5oZWFkZXJzW2wuaGVhZGVyaXplKGUpXT1BcnJheS5pc0FycmF5KHQpP3Q6W3RdfSxnZXRIZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5oZWFkZXJzW2wuaGVhZGVyaXplKGUpXTp2b2lkIDA7XG59LGhhc0hlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLmhlYWRlcnMuaGFzT3duUHJvcGVydHkobC5oZWFkZXJpemUoZSkpJiYhMHx8ITE6dm9pZCAwfSxkZWxldGVIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGU9bC5oZWFkZXJpemUoZSksdGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KGUpPyh0PXRoaXMuaGVhZGVyc1tlXSxkZWxldGUgdGhpcy5oZWFkZXJzW2VdLHQpOnZvaWQgMH0sY2xlYXJIZWFkZXJzOmZ1bmN0aW9uKCl7dGhpcy5oZWFkZXJzPXt9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLnNjaGVtZSx0aGlzLnVzZXIsdGhpcy5ob3N0LHRoaXMucG9ydCxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMucGFyYW1ldGVycykpLEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5oZWFkZXJzKSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBlLHQsbixyLHM9W107cj10aGlzLnNjaGVtZStcIjpcIix0aGlzLnVzZXImJihyKz1sLmVzY2FwZVVzZXIodGhpcy51c2VyKStcIkBcIikscis9dGhpcy5ob3N0LCh0aGlzLnBvcnR8fDA9PT10aGlzLnBvcnQpJiYocis9XCI6XCIrdGhpcy5wb3J0KTtmb3IodCBpbiB0aGlzLnBhcmFtZXRlcnMpcis9XCI7XCIrdCxudWxsIT09dGhpcy5wYXJhbWV0ZXJzW3RdJiYocis9XCI9XCIrdGhpcy5wYXJhbWV0ZXJzW3RdKTtmb3IoZSBpbiB0aGlzLmhlYWRlcnMpZm9yKG49MDtuPHRoaXMuaGVhZGVyc1tlXS5sZW5ndGg7bisrKXMucHVzaChlK1wiPVwiK3RoaXMuaGVhZGVyc1tlXVtuXSk7cmV0dXJuIHMubGVuZ3RoPjAmJihyKz1cIj9cIitzLmpvaW4oXCImXCIpKSxyfSx0b0FvcjpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdD10aGlzLnNjaGVtZStcIjpcIix0aGlzLnVzZXImJih0Kz1sLmVzY2FwZVVzZXIodGhpcy51c2VyKStcIkBcIiksdCs9dGhpcy5ob3N0LGUmJih0aGlzLnBvcnR8fDA9PT10aGlzLnBvcnQpJiYodCs9XCI6XCIrdGhpcy5wb3J0KSx0fX0sci5wYXJzZT1mdW5jdGlvbihlKXtyZXR1cm4gZT1pLnBhcnNlKGUsXCJTSVBfVVJJXCIpLC0xIT09ZT9lOnZvaWQgMH19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vR3JhbW1hclwiOjYsXCIuL1V0aWxzXCI6MjV9XSwyNTpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPXt9O3QuZXhwb3J0cz1yO3ZhciBzPWUoXCIuL0NvbnN0YW50c1wiKSxsPWUoXCIuL1VSSVwiKSxpPWUoXCIuL0dyYW1tYXJcIik7ci5zdHJfdXRmOF9sZW5ndGg9ZnVuY3Rpb24oZSl7cmV0dXJuIHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChlKSkubGVuZ3RofSxyLmlzRnVuY3Rpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWU/XCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpOiExfSxyLmlzU3RyaW5nPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lP1wiW29iamVjdCBTdHJpbmddXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk6ITF9LHIuaXNEZWNpbWFsPWZ1bmN0aW9uKGUpe3JldHVybiFpc05hTihlKSYmcGFyc2VGbG9hdChlKT09PXBhcnNlSW50KGUsMTApfSxyLmlzRW1wdHk9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lfHxcIlwiPT09ZXx8dm9pZCAwPT09ZXx8QXJyYXkuaXNBcnJheShlKSYmMD09PWUubGVuZ3RofHxcIm51bWJlclwiPT10eXBlb2YgZSYmaXNOYU4oZSk/ITA6dm9pZCAwfSxyLmhhc01ldGhvZHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MTt0PWFyZ3VtZW50c1tuKytdOylpZih0aGlzLmlzRnVuY3Rpb24oZVt0XSkpcmV0dXJuITE7cmV0dXJuITB9LHIuY3JlYXRlUmFuZG9tVG9rZW49ZnVuY3Rpb24oZSx0KXt2YXIgbixyLHM9XCJcIjtmb3IodD10fHwzMixuPTA7ZT5uO24rKylyPU1hdGgucmFuZG9tKCkqdHwwLHMrPXIudG9TdHJpbmcodCk7cmV0dXJuIHN9LHIubmV3VGFnPWZ1bmN0aW9uKCl7cmV0dXJuIHIuY3JlYXRlUmFuZG9tVG9rZW4oMTApfSxyLm5ld1VVSUQ9ZnVuY3Rpb24oKXt2YXIgZT1cInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZyxmdW5jdGlvbihlKXt2YXIgdD0xNipNYXRoLnJhbmRvbSgpfDAsbj1cInhcIj09PWU/dDozJnR8ODtyZXR1cm4gbi50b1N0cmluZygxNil9KTtyZXR1cm4gZX0sci5ob3N0VHlwZT1mdW5jdGlvbihlKXtyZXR1cm4gZT8oZT1pLnBhcnNlKGUsXCJob3N0XCIpLC0xIT09ZT9lLmhvc3RfdHlwZTp2b2lkIDApOnZvaWQgMH0sci5ub3JtYWxpemVUYXJnZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLG8sdTtpZihlKXtpZihlIGluc3RhbmNlb2YgbClyZXR1cm4gZTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7c3dpdGNoKGk9ZS5zcGxpdChcIkBcIiksaS5sZW5ndGgpe2Nhc2UgMTppZighdClyZXR1cm47bz1lLHU9dDticmVhaztjYXNlIDI6bz1pWzBdLHU9aVsxXTticmVhaztkZWZhdWx0Om89aS5zbGljZSgwLGkubGVuZ3RoLTEpLmpvaW4oXCJAXCIpLHU9aVtpLmxlbmd0aC0xXX1yZXR1cm4gbz1vLnJlcGxhY2UoL14oc2lwcz98dGVsKTovaSxcIlwiKSwvXltcXC1cXC5cXChcXCldKlxcKz9bMC05XFwtXFwuXFwoXFwpXSskLy50ZXN0KG8pJiYobz1vLnJlcGxhY2UoL1tcXC1cXC5cXChcXCldL2csXCJcIikpLGU9cy5TSVArXCI6XCIrci5lc2NhcGVVc2VyKG8pK1wiQFwiK3UsKG49bC5wYXJzZShlKSk/bjp2b2lkIDB9fWVsc2U7fSxyLmVzY2FwZVVzZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChkZWNvZGVVUklDb21wb25lbnQoZSkpLnJlcGxhY2UoLyUzQS9naSxcIjpcIikucmVwbGFjZSgvJTJCL2dpLFwiK1wiKS5yZXBsYWNlKC8lM0YvZ2ksXCI/XCIpLnJlcGxhY2UoLyUyRi9naSxcIi9cIil9LHIuaGVhZGVyaXplPWZ1bmN0aW9uKGUpe3ZhciB0LG49e1wiQ2FsbC1JZFwiOlwiQ2FsbC1JRFwiLENzZXE6XCJDU2VxXCIsXCJXd3ctQXV0aGVudGljYXRlXCI6XCJXV1ctQXV0aGVudGljYXRlXCJ9LHI9ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZyxcIi1cIikuc3BsaXQoXCItXCIpLHM9XCJcIixsPXIubGVuZ3RoO2Zvcih0PTA7bD50O3QrKykwIT09dCYmKHMrPVwiLVwiKSxzKz1yW3RdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3JbdF0uc3Vic3RyaW5nKDEpO3JldHVybiBuW3NdJiYocz1uW3NdKSxzfSxyLnNpcEVycm9yQ2F1c2U9ZnVuY3Rpb24oZSl7dmFyIHQ7Zm9yKHQgaW4gcy5TSVBfRVJST1JfQ0FVU0VTKWlmKC0xIT09cy5TSVBfRVJST1JfQ0FVU0VTW3RdLmluZGV4T2YoZSkpcmV0dXJuIHMuY2F1c2VzW3RdO3JldHVybiBzLmNhdXNlcy5TSVBfRkFJTFVSRV9DT0RFfSxyLmdldFJhbmRvbVRlc3ROZXRJUD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtyZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKih0LWUrMSkrZSl9cmV0dXJuXCIxOTIuMC4yLlwiK2UoMSwyNTQpfSxyLmNhbGN1bGF0ZU1ENT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7cmV0dXJuIGU8PHR8ZT4+PjMyLXR9ZnVuY3Rpb24gbihlLHQpe3ZhciBuLHIscyxsLGk7cmV0dXJuIHM9MjE0NzQ4MzY0OCZlLGw9MjE0NzQ4MzY0OCZ0LG49MTA3Mzc0MTgyNCZlLHI9MTA3Mzc0MTgyNCZ0LGk9KDEwNzM3NDE4MjMmZSkrKDEwNzM3NDE4MjMmdCksbiZyPzIxNDc0ODM2NDheaV5zXmw6bnxyPzEwNzM3NDE4MjQmaT8zMjIxMjI1NDcyXmlec15sOjEwNzM3NDE4MjReaV5zXmw6aV5zXmx9ZnVuY3Rpb24gcihlLHQsbil7cmV0dXJuIGUmdHx+ZSZufWZ1bmN0aW9uIHMoZSx0LG4pe3JldHVybiBlJm58dCZ+bn1mdW5jdGlvbiBsKGUsdCxuKXtyZXR1cm4gZV50Xm59ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIHReKGV8fm4pfWZ1bmN0aW9uIG8oZSxzLGwsaSxvLHUsYSl7cmV0dXJuIGU9bihlLG4obihyKHMsbCxpKSxvKSxhKSksbih0KGUsdSkscyl9ZnVuY3Rpb24gdShlLHIsbCxpLG8sdSxhKXtyZXR1cm4gZT1uKGUsbihuKHMocixsLGkpLG8pLGEpKSxuKHQoZSx1KSxyKX1mdW5jdGlvbiBhKGUscixzLGksbyx1LGEpe3JldHVybiBlPW4oZSxuKG4obChyLHMsaSksbyksYSkpLG4odChlLHUpLHIpfWZ1bmN0aW9uIGMoZSxyLHMsbCxvLHUsYSl7cmV0dXJuIGU9bihlLG4obihpKHIscyxsKSxvKSxhKSksbih0KGUsdSkscil9ZnVuY3Rpb24gaChlKXtmb3IodmFyIHQsbj1lLmxlbmd0aCxyPW4rOCxzPShyLXIlNjQpLzY0LGw9MTYqKHMrMSksaT1uZXcgQXJyYXkobC0xKSxvPTAsdT0wO24+dTspdD0odS11JTQpLzQsbz11JTQqOCxpW3RdPWlbdF18ZS5jaGFyQ29kZUF0KHUpPDxvLHUrKztyZXR1cm4gdD0odS11JTQpLzQsbz11JTQqOCxpW3RdPWlbdF18MTI4PDxvLGlbbC0yXT1uPDwzLGlbbC0xXT1uPj4+MjksaX1mdW5jdGlvbiBkKGUpe3ZhciB0LG4scj1cIlwiLHM9XCJcIjtmb3Iobj0wOzM+PW47bisrKXQ9ZT4+PjgqbiYyNTUscz1cIjBcIit0LnRvU3RyaW5nKDE2KSxyKz1zLnN1YnN0cihzLmxlbmd0aC0yLDIpO3JldHVybiByfWZ1bmN0aW9uIHAoZSl7ZT1lLnJlcGxhY2UoL1xcclxcbi9nLFwiXFxuXCIpO2Zvcih2YXIgdD1cIlwiLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIHI9ZS5jaGFyQ29kZUF0KG4pOzEyOD5yP3QrPVN0cmluZy5mcm9tQ2hhckNvZGUocik6cj4xMjcmJjIwNDg+cj8odCs9U3RyaW5nLmZyb21DaGFyQ29kZShyPj42fDE5MiksdCs9U3RyaW5nLmZyb21DaGFyQ29kZSg2MyZyfDEyOCkpOih0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHI+PjEyfDIyNCksdCs9U3RyaW5nLmZyb21DaGFyQ29kZShyPj42JjYzfDEyOCksdCs9U3RyaW5nLmZyb21DaGFyQ29kZSg2MyZyfDEyOCkpfXJldHVybiB0fXZhciBmLG0sZyxULF8sdixDLFMsRSxBPVtdLHk9NyxSPTEyLGI9MTcsST0yMix3PTUsTj05LEQ9MTQsTz0yMCx4PTQsVT0xMSxNPTE2LFA9MjMscT02LEw9MTAsaz0xNSxIPTIxO2ZvcihlPXAoZSksQT1oKGUpLHY9MTczMjU4NDE5MyxDPTQwMjMyMzM0MTcsUz0yNTYyMzgzMTAyLEU9MjcxNzMzODc4LGY9MDtmPEEubGVuZ3RoO2YrPTE2KW09dixnPUMsVD1TLF89RSx2PW8odixDLFMsRSxBW2YrMF0seSwzNjE0MDkwMzYwKSxFPW8oRSx2LEMsUyxBW2YrMV0sUiwzOTA1NDAyNzEwKSxTPW8oUyxFLHYsQyxBW2YrMl0sYiw2MDYxMDU4MTkpLEM9byhDLFMsRSx2LEFbZiszXSxJLDMyNTA0NDE5NjYpLHY9byh2LEMsUyxFLEFbZis0XSx5LDQxMTg1NDgzOTkpLEU9byhFLHYsQyxTLEFbZis1XSxSLDEyMDAwODA0MjYpLFM9byhTLEUsdixDLEFbZis2XSxiLDI4MjE3MzU5NTUpLEM9byhDLFMsRSx2LEFbZis3XSxJLDQyNDkyNjEzMTMpLHY9byh2LEMsUyxFLEFbZis4XSx5LDE3NzAwMzU0MTYpLEU9byhFLHYsQyxTLEFbZis5XSxSLDIzMzY1NTI4NzkpLFM9byhTLEUsdixDLEFbZisxMF0sYiw0Mjk0OTI1MjMzKSxDPW8oQyxTLEUsdixBW2YrMTFdLEksMjMwNDU2MzEzNCksdj1vKHYsQyxTLEUsQVtmKzEyXSx5LDE4MDQ2MDM2ODIpLEU9byhFLHYsQyxTLEFbZisxM10sUiw0MjU0NjI2MTk1KSxTPW8oUyxFLHYsQyxBW2YrMTRdLGIsMjc5Mjk2NTAwNiksQz1vKEMsUyxFLHYsQVtmKzE1XSxJLDEyMzY1MzUzMjkpLHY9dSh2LEMsUyxFLEFbZisxXSx3LDQxMjkxNzA3ODYpLEU9dShFLHYsQyxTLEFbZis2XSxOLDMyMjU0NjU2NjQpLFM9dShTLEUsdixDLEFbZisxMV0sRCw2NDM3MTc3MTMpLEM9dShDLFMsRSx2LEFbZiswXSxPLDM5MjEwNjk5OTQpLHY9dSh2LEMsUyxFLEFbZis1XSx3LDM1OTM0MDg2MDUpLEU9dShFLHYsQyxTLEFbZisxMF0sTiwzODAxNjA4MyksUz11KFMsRSx2LEMsQVtmKzE1XSxELDM2MzQ0ODg5NjEpLEM9dShDLFMsRSx2LEFbZis0XSxPLDM4ODk0Mjk0NDgpLHY9dSh2LEMsUyxFLEFbZis5XSx3LDU2ODQ0NjQzOCksRT11KEUsdixDLFMsQVtmKzE0XSxOLDMyNzUxNjM2MDYpLFM9dShTLEUsdixDLEFbZiszXSxELDQxMDc2MDMzMzUpLEM9dShDLFMsRSx2LEFbZis4XSxPLDExNjM1MzE1MDEpLHY9dSh2LEMsUyxFLEFbZisxM10sdywyODUwMjg1ODI5KSxFPXUoRSx2LEMsUyxBW2YrMl0sTiw0MjQzNTYzNTEyKSxTPXUoUyxFLHYsQyxBW2YrN10sRCwxNzM1MzI4NDczKSxDPXUoQyxTLEUsdixBW2YrMTJdLE8sMjM2ODM1OTU2Miksdj1hKHYsQyxTLEUsQVtmKzVdLHgsNDI5NDU4ODczOCksRT1hKEUsdixDLFMsQVtmKzhdLFUsMjI3MjM5MjgzMyksUz1hKFMsRSx2LEMsQVtmKzExXSxNLDE4MzkwMzA1NjIpLEM9YShDLFMsRSx2LEFbZisxNF0sUCw0MjU5NjU3NzQwKSx2PWEodixDLFMsRSxBW2YrMV0seCwyNzYzOTc1MjM2KSxFPWEoRSx2LEMsUyxBW2YrNF0sVSwxMjcyODkzMzUzKSxTPWEoUyxFLHYsQyxBW2YrN10sTSw0MTM5NDY5NjY0KSxDPWEoQyxTLEUsdixBW2YrMTBdLFAsMzIwMDIzNjY1Niksdj1hKHYsQyxTLEUsQVtmKzEzXSx4LDY4MTI3OTE3NCksRT1hKEUsdixDLFMsQVtmKzBdLFUsMzkzNjQzMDA3NCksUz1hKFMsRSx2LEMsQVtmKzNdLE0sMzU3MjQ0NTMxNyksQz1hKEMsUyxFLHYsQVtmKzZdLFAsNzYwMjkxODkpLHY9YSh2LEMsUyxFLEFbZis5XSx4LDM2NTQ2MDI4MDkpLEU9YShFLHYsQyxTLEFbZisxMl0sVSwzODczMTUxNDYxKSxTPWEoUyxFLHYsQyxBW2YrMTVdLE0sNTMwNzQyNTIwKSxDPWEoQyxTLEUsdixBW2YrMl0sUCwzMjk5NjI4NjQ1KSx2PWModixDLFMsRSxBW2YrMF0scSw0MDk2MzM2NDUyKSxFPWMoRSx2LEMsUyxBW2YrN10sTCwxMTI2ODkxNDE1KSxTPWMoUyxFLHYsQyxBW2YrMTRdLGssMjg3ODYxMjM5MSksQz1jKEMsUyxFLHYsQVtmKzVdLEgsNDIzNzUzMzI0MSksdj1jKHYsQyxTLEUsQVtmKzEyXSxxLDE3MDA0ODU1NzEpLEU9YyhFLHYsQyxTLEFbZiszXSxMLDIzOTk5ODA2OTApLFM9YyhTLEUsdixDLEFbZisxMF0sayw0MjkzOTE1NzczKSxDPWMoQyxTLEUsdixBW2YrMV0sSCwyMjQwMDQ0NDk3KSx2PWModixDLFMsRSxBW2YrOF0scSwxODczMzEzMzU5KSxFPWMoRSx2LEMsUyxBW2YrMTVdLEwsNDI2NDM1NTU1MiksUz1jKFMsRSx2LEMsQVtmKzZdLGssMjczNDc2ODkxNiksQz1jKEMsUyxFLHYsQVtmKzEzXSxILDEzMDkxNTE2NDkpLHY9Yyh2LEMsUyxFLEFbZis0XSxxLDQxNDk0NDQyMjYpLEU9YyhFLHYsQyxTLEFbZisxMV0sTCwzMTc0NzU2OTE3KSxTPWMoUyxFLHYsQyxBW2YrMl0sayw3MTg3ODcyNTkpLEM9YyhDLFMsRSx2LEFbZis5XSxILDM5NTE0ODE3NDUpLHY9bih2LG0pLEM9bihDLGcpLFM9bihTLFQpLEU9bihFLF8pO3ZhciBGPWQodikrZChDKStkKFMpK2QoRSk7cmV0dXJuIEYudG9Mb3dlckNhc2UoKX19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vR3JhbW1hclwiOjYsXCIuL1VSSVwiOjI0fV0sMjY6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe2EoXCJuZXcoKVwiKTt2YXIgdD1udWxsLG49bnVsbDt0aGlzLndzPW51bGwsT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7dmlhX3RyYW5zcG9ydDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG59LHNldDpmdW5jdGlvbihlKXtuPWUudG9VcHBlckNhc2UoKX19LHNpcF91cmk6e2dldDpmdW5jdGlvbigpe3JldHVybiB0fX0sdXJsOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZX19fSk7dmFyIHI9dS5wYXJzZShlLFwiYWJzb2x1dGVVUklcIik7aWYoLTE9PT1yKXRocm93IGMoXCJpbnZhbGlkIFdlYlNvY2tldCBVUkk6IFwiK2UpLG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50OiBcIitlKTtpZihcIndzc1wiIT09ci5zY2hlbWUmJlwid3NcIiE9PXIuc2NoZW1lKXRocm93IGMoXCJpbnZhbGlkIFdlYlNvY2tldCBVUkkgc2NoZW1lOiBcIityLnNjaGVtZSksbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXJndW1lbnQ6IFwiK2UpO3Q9XCJzaXA6XCIrci5ob3N0KyhyLnBvcnQ/XCI6XCIrci5wb3J0OlwiXCIpK1wiO3RyYW5zcG9ydD13c1wiLHRoaXMudmlhX3RyYW5zcG9ydD1yLnNjaGVtZX1mdW5jdGlvbiBzKCl7YShcIldlYlNvY2tldCBcIit0aGlzLnVybCtcIiBjb25uZWN0ZWRcIiksdGhpcy5vbmNvbm5lY3QoKX1mdW5jdGlvbiBsKGUpe2EoXCJXZWJTb2NrZXQgXCIrdGhpcy51cmwrXCIgY2xvc2VkXCIpLGUud2FzQ2xlYW49PT0hMSYmYShcIldlYlNvY2tldCBhYnJ1cHQgZGlzY29ubmVjdGlvblwiKSx0aGlzLm9uZGlzY29ubmVjdChlLndhc0NsZWFuLGUuY29kZSxlLnJlYXNvbil9ZnVuY3Rpb24gaShlKXthKFwicmVjZWl2ZWQgV2ViU29ja2V0IG1lc3NhZ2VcIiksdGhpcy5vbmRhdGEoZS5kYXRhKX1mdW5jdGlvbiBvKGUpe2MoXCJXZWJTb2NrZXQgXCIrdGhpcy51cmwrXCIgZXJyb3I6IFwiK2UpfXQuZXhwb3J0cz1yO3ZhciB1PWUoXCIuL0dyYW1tYXJcIiksYT1lKFwiZGVidWdcIikoXCJKc1NJUDpXZWJTb2NrZXRJbnRlcmZhY2VcIiksYz1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpXZWJTb2NrZXRJbnRlcmZhY2VcIik7ci5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbigpe2lmKGEoXCJjb25uZWN0KClcIiksdGhpcy5pc0Nvbm5lY3RlZCgpKXJldHVybiB2b2lkIGEoXCJXZWJTb2NrZXQgXCIrdGhpcy51cmwrXCIgaXMgYWxyZWFkeSBjb25uZWN0ZWRcIik7aWYodGhpcy5pc0Nvbm5lY3RpbmcoKSlyZXR1cm4gdm9pZCBhKFwiV2ViU29ja2V0IFwiK3RoaXMudXJsK1wiIGlzIGNvbm5lY3RpbmdcIik7dGhpcy53cyYmdGhpcy53cy5jbG9zZSgpLGEoXCJjb25uZWN0aW5nIHRvIFdlYlNvY2tldCBcIit0aGlzLnVybCk7dHJ5e3RoaXMud3M9bmV3IFdlYlNvY2tldCh0aGlzLnVybCxcInNpcFwiKSx0aGlzLndzLmJpbmFyeVR5cGU9XCJhcnJheWJ1ZmZlclwiLHRoaXMud3Mub25vcGVuPXMuYmluZCh0aGlzKSx0aGlzLndzLm9uY2xvc2U9bC5iaW5kKHRoaXMpLHRoaXMud3Mub25tZXNzYWdlPWkuYmluZCh0aGlzKSx0aGlzLndzLm9uZXJyb3I9by5iaW5kKHRoaXMpfWNhdGNoKGUpe28uY2FsbCh0aGlzLGUpfX0sci5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe2EoXCJkaXNjb25uZWN0KClcIiksdGhpcy53cyYmKHRoaXMud3MuY2xvc2UoKSx0aGlzLndzPW51bGwpfSxyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUpe3JldHVybiBhKFwic2VuZCgpXCIpLHRoaXMuaXNDb25uZWN0ZWQoKT8odGhpcy53cy5zZW5kKGUpLCEwKTooYyhcInVuYWJsZSB0byBzZW5kIG1lc3NhZ2UsIFdlYlNvY2tldCBpcyBub3Qgb3BlblwiKSwhMSl9LHIucHJvdG90eXBlLmlzQ29ubmVjdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3MmJnRoaXMud3MucmVhZHlTdGF0ZT09PXRoaXMud3MuT1BFTn0sci5wcm90b3R5cGUuaXNDb25uZWN0aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud3MmJnRoaXMud3MucmVhZHlTdGF0ZT09PXRoaXMud3MuQ09OTkVDVElOR319LHtcIi4vR3JhbW1hclwiOjYsZGVidWc6MzN9XSwyNzpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4pe3ZhciByLHM7Zm9yKGQ9ZSxwPXQsZj1uLHI9Uy5sZW5ndGg7ci0tOylpZihzPVNbcl0oZCkscz09PSExKXJldHVybiExO2lmKGQgaW5zdGFuY2VvZiBULkluY29taW5nUmVxdWVzdCl7Zm9yKHI9di5sZW5ndGg7ci0tOylpZihzPXZbcl0oZCkscz09PSExKXJldHVybiExfWVsc2UgaWYoZCBpbnN0YW5jZW9mIFQuSW5jb21pbmdSZXNwb25zZSlmb3Iocj1DLmxlbmd0aDtyLS07KWlmKHM9Q1tyXShkKSxzPT09ITEpcmV0dXJuITE7cmV0dXJuITB9ZnVuY3Rpb24gcygpe3JldHVyblwic2lwXCIhPT1kLnMoXCJ0b1wiKS51cmkuc2NoZW1lPyhoKDQxNiksITEpOnZvaWQgMH1mdW5jdGlvbiBsKCl7cmV0dXJuIGQudG9fdGFnfHxkLmNhbGxfaWQuc3Vic3RyKDAsNSkhPT1wLmNvbmZpZ3VyYXRpb24uanNzaXBfaWQ/dm9pZCAwOihoKDQ4MiksITEpfWZ1bmN0aW9uIGkoKXt2YXIgZT1fLnN0cl91dGY4X2xlbmd0aChkLmJvZHkpLHQ9ZC5nZXRIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiKTtyZXR1cm4gdD5lPyhoKDQwMCksITEpOnZvaWQgMH1mdW5jdGlvbiBvKCl7dmFyIGUsdCxuPWQuZnJvbV90YWcscj1kLmNhbGxfaWQscz1kLmNzZXE7aWYoIWQudG9fdGFnKWlmKGQubWV0aG9kPT09Zy5JTlZJVEUpe2lmKHAudHJhbnNhY3Rpb25zLmlzdFtkLnZpYV9icmFuY2hdKXJldHVybiExO2Zvcih0IGluIHAudHJhbnNhY3Rpb25zLmlzdClpZihlPXAudHJhbnNhY3Rpb25zLmlzdFt0XSxlLnJlcXVlc3QuZnJvbV90YWc9PT1uJiZlLnJlcXVlc3QuY2FsbF9pZD09PXImJmUucmVxdWVzdC5jc2VxPT09cylyZXR1cm4gaCg0ODIpLCExfWVsc2V7aWYocC50cmFuc2FjdGlvbnMubmlzdFtkLnZpYV9icmFuY2hdKXJldHVybiExO2Zvcih0IGluIHAudHJhbnNhY3Rpb25zLm5pc3QpaWYoZT1wLnRyYW5zYWN0aW9ucy5uaXN0W3RdLGUucmVxdWVzdC5mcm9tX3RhZz09PW4mJmUucmVxdWVzdC5jYWxsX2lkPT09ciYmZS5yZXF1ZXN0LmNzZXE9PT1zKXJldHVybiBoKDQ4MiksITF9fWZ1bmN0aW9uIHUoKXtyZXR1cm4gZC5nZXRIZWFkZXJzKFwidmlhXCIpLmxlbmd0aD4xPyhtKFwibW9yZSB0aGFuIG9uZSBWaWEgaGVhZGVyIGZpZWxkIHByZXNlbnQgaW4gdGhlIHJlc3BvbnNlLCBkcm9wcGluZyB0aGUgcmVzcG9uc2VcIiksITEpOnZvaWQgMH1mdW5jdGlvbiBhKCl7dmFyIGU9Xy5zdHJfdXRmOF9sZW5ndGgoZC5ib2R5KSx0PWQuZ2V0SGVhZGVyKFwiY29udGVudC1sZW5ndGhcIik7cmV0dXJuIHQ+ZT8obShcIm1lc3NhZ2UgYm9keSBsZW5ndGggaXMgbG93ZXIgdGhhbiB0aGUgdmFsdWUgaW4gQ29udGVudC1MZW5ndGggaGVhZGVyIGZpZWxkLCBkcm9wcGluZyB0aGUgcmVzcG9uc2VcIiksITEpOnZvaWQgMH1mdW5jdGlvbiBjKCl7Zm9yKHZhciBlPVtcImZyb21cIixcInRvXCIsXCJjYWxsX2lkXCIsXCJjc2VxXCIsXCJ2aWFcIl0sdD1lLmxlbmd0aDt0LS07KWlmKCFkLmhhc0hlYWRlcihlW3RdKSlyZXR1cm4gbShcIm1pc3NpbmcgbWFuZGF0b3J5IGhlYWRlciBmaWVsZCA6IFwiK2VbdF0rXCIsIGRyb3BwaW5nIHRoZSByZXNwb25zZVwiKSwhMX1mdW5jdGlvbiBoKGUpe3ZhciB0LG49XCJTSVAvMi4wIFwiK2UrXCIgXCIrZy5SRUFTT05fUEhSQVNFW2VdK1wiXFxyXFxuXCIscj1kLmdldEhlYWRlcnMoXCJ2aWFcIikscz1yLmxlbmd0aCxsPTA7Zm9yKGw7cz5sO2wrKyluKz1cIlZpYTogXCIrcltsXStcIlxcclxcblwiO3Q9ZC5nZXRIZWFkZXIoXCJUb1wiKSxkLnRvX3RhZ3x8KHQrPVwiO3RhZz1cIitfLm5ld1RhZygpKSxuKz1cIlRvOiBcIit0K1wiXFxyXFxuXCIsbis9XCJGcm9tOiBcIitkLmdldEhlYWRlcihcIkZyb21cIikrXCJcXHJcXG5cIixuKz1cIkNhbGwtSUQ6IFwiK2QuY2FsbF9pZCtcIlxcclxcblwiLG4rPVwiQ1NlcTogXCIrZC5jc2VxK1wiIFwiK2QubWV0aG9kK1wiXFxyXFxuXCIsbis9XCJcXHJcXG5cIixmLnNlbmQobil9dC5leHBvcnRzPXI7dmFyIGQscCxmLG09ZShcImRlYnVnXCIpKFwiSnNTSVA6c2FuaXR5Q2hlY2tcIiksZz1lKFwiLi9Db25zdGFudHNcIiksVD1lKFwiLi9TSVBNZXNzYWdlXCIpLF89ZShcIi4vVXRpbHNcIiksdj1bXSxDPVtdLFM9W107di5wdXNoKHMpLHYucHVzaChsKSx2LnB1c2goaSksdi5wdXNoKG8pLEMucHVzaCh1KSxDLnB1c2goYSksUy5wdXNoKGMpfSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL1NJUE1lc3NhZ2VcIjoxOCxcIi4vVXRpbHNcIjoyNSxkZWJ1ZzozM31dLDI4OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe3RoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LHRoaXMuX21heExpc3RlbmVycz10aGlzLl9tYXhMaXN0ZW5lcnN8fHZvaWQgMH1mdW5jdGlvbiBzKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9ZnVuY3Rpb24gbChlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZX1mdW5jdGlvbiBpKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZX1mdW5jdGlvbiBvKGUpe3JldHVybiB2b2lkIDA9PT1lfXQuZXhwb3J0cz1yLHIuRXZlbnRFbWl0dGVyPXIsci5wcm90b3R5cGUuX2V2ZW50cz12b2lkIDAsci5wcm90b3R5cGUuX21heExpc3RlbmVycz12b2lkIDAsci5kZWZhdWx0TWF4TGlzdGVuZXJzPTEwLHIucHJvdG90eXBlLnNldE1heExpc3RlbmVycz1mdW5jdGlvbihlKXtpZighbChlKXx8MD5lfHxpc05hTihlKSl0aHJvdyBUeXBlRXJyb3IoXCJuIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXJcIik7cmV0dXJuIHRoaXMuX21heExpc3RlbmVycz1lLHRoaXN9LHIucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGwsdSxhO2lmKHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksXCJlcnJvclwiPT09ZSYmKCF0aGlzLl9ldmVudHMuZXJyb3J8fGkodGhpcy5fZXZlbnRzLmVycm9yKSYmIXRoaXMuX2V2ZW50cy5lcnJvci5sZW5ndGgpKXtpZih0PWFyZ3VtZW50c1sxXSx0IGluc3RhbmNlb2YgRXJyb3IpdGhyb3cgdDt0aHJvdyBUeXBlRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuJyl9aWYobj10aGlzLl9ldmVudHNbZV0sbyhuKSlyZXR1cm4hMTtpZihzKG4pKXN3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDE6bi5jYWxsKHRoaXMpO2JyZWFrO2Nhc2UgMjpuLmNhbGwodGhpcyxhcmd1bWVudHNbMV0pO2JyZWFrO2Nhc2UgMzpuLmNhbGwodGhpcyxhcmd1bWVudHNbMV0sYXJndW1lbnRzWzJdKTticmVhaztkZWZhdWx0Omw9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLG4uYXBwbHkodGhpcyxsKX1lbHNlIGlmKGkobikpZm9yKGw9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGE9bi5zbGljZSgpLHI9YS5sZW5ndGgsdT0wO3I+dTt1KyspYVt1XS5hcHBseSh0aGlzLGwpO3JldHVybiEwfSxyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3ZhciBuO2lmKCFzKHQpKXRocm93IFR5cGVFcnJvcihcImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gdGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSx0aGlzLl9ldmVudHMubmV3TGlzdGVuZXImJnRoaXMuZW1pdChcIm5ld0xpc3RlbmVyXCIsZSxzKHQubGlzdGVuZXIpP3QubGlzdGVuZXI6dCksdGhpcy5fZXZlbnRzW2VdP2kodGhpcy5fZXZlbnRzW2VdKT90aGlzLl9ldmVudHNbZV0ucHVzaCh0KTp0aGlzLl9ldmVudHNbZV09W3RoaXMuX2V2ZW50c1tlXSx0XTp0aGlzLl9ldmVudHNbZV09dCxpKHRoaXMuX2V2ZW50c1tlXSkmJiF0aGlzLl9ldmVudHNbZV0ud2FybmVkJiYobj1vKHRoaXMuX21heExpc3RlbmVycyk/ci5kZWZhdWx0TWF4TGlzdGVuZXJzOnRoaXMuX21heExpc3RlbmVycyxuJiZuPjAmJnRoaXMuX2V2ZW50c1tlXS5sZW5ndGg+biYmKHRoaXMuX2V2ZW50c1tlXS53YXJuZWQ9ITAsY29uc29sZS5lcnJvcihcIihub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5IGxlYWsgZGV0ZWN0ZWQuICVkIGxpc3RlbmVycyBhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuXCIsdGhpcy5fZXZlbnRzW2VdLmxlbmd0aCksXCJmdW5jdGlvblwiPT10eXBlb2YgY29uc29sZS50cmFjZSYmY29uc29sZS50cmFjZSgpKSksdGhpc30sci5wcm90b3R5cGUub249ci5wcm90b3R5cGUuYWRkTGlzdGVuZXIsci5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oKXt0aGlzLnJlbW92ZUxpc3RlbmVyKGUsbikscnx8KHI9ITAsdC5hcHBseSh0aGlzLGFyZ3VtZW50cykpfWlmKCFzKHQpKXRocm93IFR5cGVFcnJvcihcImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTt2YXIgcj0hMTtyZXR1cm4gbi5saXN0ZW5lcj10LHRoaXMub24oZSxuKSx0aGlzfSxyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3ZhciBuLHIsbCxvO2lmKCFzKHQpKXRocm93IFR5cGVFcnJvcihcImxpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvblwiKTtpZighdGhpcy5fZXZlbnRzfHwhdGhpcy5fZXZlbnRzW2VdKXJldHVybiB0aGlzO2lmKG49dGhpcy5fZXZlbnRzW2VdLGw9bi5sZW5ndGgscj0tMSxuPT09dHx8cyhuLmxpc3RlbmVyKSYmbi5saXN0ZW5lcj09PXQpZGVsZXRlIHRoaXMuX2V2ZW50c1tlXSx0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsZSx0KTtlbHNlIGlmKGkobikpe2ZvcihvPWw7by0tID4wOylpZihuW29dPT09dHx8bltvXS5saXN0ZW5lciYmbltvXS5saXN0ZW5lcj09PXQpe3I9bzticmVha31pZigwPnIpcmV0dXJuIHRoaXM7MT09PW4ubGVuZ3RoPyhuLmxlbmd0aD0wLGRlbGV0ZSB0aGlzLl9ldmVudHNbZV0pOm4uc3BsaWNlKHIsMSksdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLGUsdCl9cmV0dXJuIHRoaXN9LHIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdCxuO2lmKCF0aGlzLl9ldmVudHMpcmV0dXJuIHRoaXM7aWYoIXRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5fZXZlbnRzPXt9OnRoaXMuX2V2ZW50c1tlXSYmZGVsZXRlIHRoaXMuX2V2ZW50c1tlXSx0aGlzO2lmKDA9PT1hcmd1bWVudHMubGVuZ3RoKXtmb3IodCBpbiB0aGlzLl9ldmVudHMpXCJyZW1vdmVMaXN0ZW5lclwiIT09dCYmdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnModCk7cmV0dXJuIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFwicmVtb3ZlTGlzdGVuZXJcIiksdGhpcy5fZXZlbnRzPXt9LHRoaXN9aWYobj10aGlzLl9ldmVudHNbZV0scyhuKSl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsbik7ZWxzZSBpZihuKWZvcig7bi5sZW5ndGg7KXRoaXMucmVtb3ZlTGlzdGVuZXIoZSxuW24ubGVuZ3RoLTFdKTtyZXR1cm4gZGVsZXRlIHRoaXMuX2V2ZW50c1tlXSx0aGlzfSxyLnByb3RvdHlwZS5saXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbZV0/cyh0aGlzLl9ldmVudHNbZV0pP1t0aGlzLl9ldmVudHNbZV1dOnRoaXMuX2V2ZW50c1tlXS5zbGljZSgpOltdfSxyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2V2ZW50cyl7dmFyIHQ9dGhpcy5fZXZlbnRzW2VdO2lmKHModCkpcmV0dXJuIDE7aWYodClyZXR1cm4gdC5sZW5ndGh9cmV0dXJuIDB9LHIubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiBlLmxpc3RlbmVyQ291bnQodCl9fSx7fV0sMjk6W2Z1bmN0aW9uKGUsdCxuKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuY3JlYXRlP3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Uuc3VwZXJfPXQsZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmUsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSl9OnQuZXhwb3J0cz1mdW5jdGlvbihlLHQpe2Uuc3VwZXJfPXQ7dmFyIG49ZnVuY3Rpb24oKXt9O24ucHJvdG90eXBlPXQucHJvdG90eXBlLGUucHJvdG90eXBlPW5ldyBuLGUucHJvdG90eXBlLmNvbnN0cnVjdG9yPWV9fSx7fV0sMzA6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7YyYmbyYmKGM9ITEsby5sZW5ndGg/YT1vLmNvbmNhdChhKTpoPS0xLGEubGVuZ3RoJiZzKCkpfWZ1bmN0aW9uIHMoKXtpZighYyl7dmFyIGU9c2V0VGltZW91dChyKTtjPSEwO2Zvcih2YXIgdD1hLmxlbmd0aDt0Oyl7Zm9yKG89YSxhPVtdOysraDx0OylvJiZvW2hdLnJ1bigpO2g9LTEsdD1hLmxlbmd0aH1vPW51bGwsYz0hMSxjbGVhclRpbWVvdXQoZSl9fWZ1bmN0aW9uIGwoZSx0KXt0aGlzLmZ1bj1lLHRoaXMuYXJyYXk9dH1mdW5jdGlvbiBpKCl7fXZhciBvLHU9dC5leHBvcnRzPXt9LGE9W10sYz0hMSxoPS0xO3UubmV4dFRpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTthLnB1c2gobmV3IGwoZSx0KSksMSE9PWEubGVuZ3RofHxjfHxzZXRUaW1lb3V0KHMsMCl9LGwucHJvdG90eXBlLnJ1bj1mdW5jdGlvbigpe3RoaXMuZnVuLmFwcGx5KG51bGwsdGhpcy5hcnJheSl9LHUudGl0bGU9XCJicm93c2VyXCIsdS5icm93c2VyPSEwLHUuZW52PXt9LHUuYXJndj1bXSx1LnZlcnNpb249XCJcIix1LnZlcnNpb25zPXt9LHUub249aSx1LmFkZExpc3RlbmVyPWksdS5vbmNlPWksdS5vZmY9aSx1LnJlbW92ZUxpc3RlbmVyPWksdS5yZW1vdmVBbGxMaXN0ZW5lcnM9aSx1LmVtaXQ9aSx1LmJpbmRpbmc9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWRcIil9LHUuY3dkPWZ1bmN0aW9uKCl7cmV0dXJuXCIvXCJ9LHUuY2hkaXI9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkXCIpfSx1LnVtYXNrPWZ1bmN0aW9uKCl7cmV0dXJuIDB9fSx7fV0sMzE6W2Z1bmN0aW9uKGUsdCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNvcHkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZmlsbCYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5yZWFkVUludDh9fSx7fV0sMzI6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBzKGUsdCl7dmFyIHI9e3NlZW46W10sc3R5bGl6ZTppfTtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD49MyYmKHIuZGVwdGg9YXJndW1lbnRzWzJdKSxhcmd1bWVudHMubGVuZ3RoPj00JiYoci5jb2xvcnM9YXJndW1lbnRzWzNdKSxtKHQpP3Iuc2hvd0hpZGRlbj10OnQmJm4uX2V4dGVuZChyLHQpLFMoci5zaG93SGlkZGVuKSYmKHIuc2hvd0hpZGRlbj0hMSksUyhyLmRlcHRoKSYmKHIuZGVwdGg9MiksUyhyLmNvbG9ycykmJihyLmNvbG9ycz0hMSksUyhyLmN1c3RvbUluc3BlY3QpJiYoci5jdXN0b21JbnNwZWN0PSEwKSxyLmNvbG9ycyYmKHIuc3R5bGl6ZT1sKSx1KHIsZSxyLmRlcHRoKX1mdW5jdGlvbiBsKGUsdCl7dmFyIG49cy5zdHlsZXNbdF07cmV0dXJuIG4/XCJcdTAwMWJbXCIrcy5jb2xvcnNbbl1bMF0rXCJtXCIrZStcIlx1MDAxYltcIitzLmNvbG9yc1tuXVsxXStcIm1cIjplfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gZX1mdW5jdGlvbiBvKGUpe3ZhciB0PXt9O3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSxuKXt0W2VdPSEwfSksdH1mdW5jdGlvbiB1KGUsdCxyKXtpZihlLmN1c3RvbUluc3BlY3QmJnQmJmIodC5pbnNwZWN0KSYmdC5pbnNwZWN0IT09bi5pbnNwZWN0JiYoIXQuY29uc3RydWN0b3J8fHQuY29uc3RydWN0b3IucHJvdG90eXBlIT09dCkpe3ZhciBzPXQuaW5zcGVjdChyLGUpO3JldHVybiB2KHMpfHwocz11KGUscyxyKSksc312YXIgbD1hKGUsdCk7aWYobClyZXR1cm4gbDt2YXIgaT1PYmplY3Qua2V5cyh0KSxtPW8oaSk7aWYoZS5zaG93SGlkZGVuJiYoaT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0KSksUih0KSYmKGkuaW5kZXhPZihcIm1lc3NhZ2VcIik+PTB8fGkuaW5kZXhPZihcImRlc2NyaXB0aW9uXCIpPj0wKSlyZXR1cm4gYyh0KTtpZigwPT09aS5sZW5ndGgpe2lmKGIodCkpe3ZhciBnPXQubmFtZT9cIjogXCIrdC5uYW1lOlwiXCI7cmV0dXJuIGUuc3R5bGl6ZShcIltGdW5jdGlvblwiK2crXCJdXCIsXCJzcGVjaWFsXCIpfWlmKEUodCkpcmV0dXJuIGUuc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCksXCJyZWdleHBcIik7aWYoeSh0KSlyZXR1cm4gZS5zdHlsaXplKERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCksXCJkYXRlXCIpO2lmKFIodCkpcmV0dXJuIGModCl9dmFyIFQ9XCJcIixfPSExLEM9W1wie1wiLFwifVwiXTtpZihmKHQpJiYoXz0hMCxDPVtcIltcIixcIl1cIl0pLGIodCkpe3ZhciBTPXQubmFtZT9cIjogXCIrdC5uYW1lOlwiXCI7VD1cIiBbRnVuY3Rpb25cIitTK1wiXVwifWlmKEUodCkmJihUPVwiIFwiK1JlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSkseSh0KSYmKFQ9XCIgXCIrRGF0ZS5wcm90b3R5cGUudG9VVENTdHJpbmcuY2FsbCh0KSksUih0KSYmKFQ9XCIgXCIrYyh0KSksMD09PWkubGVuZ3RoJiYoIV98fDA9PXQubGVuZ3RoKSlyZXR1cm4gQ1swXStUK0NbMV07aWYoMD5yKXJldHVybiBFKHQpP2Uuc3R5bGl6ZShSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCksXCJyZWdleHBcIik6ZS5zdHlsaXplKFwiW09iamVjdF1cIixcInNwZWNpYWxcIik7ZS5zZWVuLnB1c2godCk7dmFyIEE7cmV0dXJuIEE9Xz9oKGUsdCxyLG0saSk6aS5tYXAoZnVuY3Rpb24obil7cmV0dXJuIGQoZSx0LHIsbSxuLF8pfSksZS5zZWVuLnBvcCgpLHAoQSxULEMpfWZ1bmN0aW9uIGEoZSx0KXtpZihTKHQpKXJldHVybiBlLnN0eWxpemUoXCJ1bmRlZmluZWRcIixcInVuZGVmaW5lZFwiKTtpZih2KHQpKXt2YXIgbj1cIidcIitKU09OLnN0cmluZ2lmeSh0KS5yZXBsYWNlKC9eXCJ8XCIkL2csXCJcIikucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikucmVwbGFjZSgvXFxcXFwiL2csJ1wiJykrXCInXCI7cmV0dXJuIGUuc3R5bGl6ZShuLFwic3RyaW5nXCIpfXJldHVybiBfKHQpP2Uuc3R5bGl6ZShcIlwiK3QsXCJudW1iZXJcIik6bSh0KT9lLnN0eWxpemUoXCJcIit0LFwiYm9vbGVhblwiKTpnKHQpP2Uuc3R5bGl6ZShcIm51bGxcIixcIm51bGxcIik6dm9pZCAwfWZ1bmN0aW9uIGMoZSl7cmV0dXJuXCJbXCIrRXJyb3IucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkrXCJdXCJ9ZnVuY3Rpb24gaChlLHQsbixyLHMpe2Zvcih2YXIgbD1bXSxpPTAsbz10Lmxlbmd0aDtvPmk7KytpKU8odCxTdHJpbmcoaSkpP2wucHVzaChkKGUsdCxuLHIsU3RyaW5nKGkpLCEwKSk6bC5wdXNoKFwiXCIpO3JldHVybiBzLmZvckVhY2goZnVuY3Rpb24ocyl7cy5tYXRjaCgvXlxcZCskLyl8fGwucHVzaChkKGUsdCxuLHIscywhMCkpfSksbH1mdW5jdGlvbiBkKGUsdCxuLHIscyxsKXt2YXIgaSxvLGE7aWYoYT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscyl8fHt2YWx1ZTp0W3NdfSxhLmdldD9vPWEuc2V0P2Uuc3R5bGl6ZShcIltHZXR0ZXIvU2V0dGVyXVwiLFwic3BlY2lhbFwiKTplLnN0eWxpemUoXCJbR2V0dGVyXVwiLFwic3BlY2lhbFwiKTphLnNldCYmKG89ZS5zdHlsaXplKFwiW1NldHRlcl1cIixcInNwZWNpYWxcIikpLE8ocixzKXx8KGk9XCJbXCIrcytcIl1cIiksb3x8KGUuc2Vlbi5pbmRleE9mKGEudmFsdWUpPDA/KG89ZyhuKT91KGUsYS52YWx1ZSxudWxsKTp1KGUsYS52YWx1ZSxuLTEpLG8uaW5kZXhPZihcIlxcblwiKT4tMSYmKG89bD9vLnNwbGl0KFwiXFxuXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm5cIiAgXCIrZX0pLmpvaW4oXCJcXG5cIikuc3Vic3RyKDIpOlwiXFxuXCIrby5zcGxpdChcIlxcblwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuXCIgICBcIitlfSkuam9pbihcIlxcblwiKSkpOm89ZS5zdHlsaXplKFwiW0NpcmN1bGFyXVwiLFwic3BlY2lhbFwiKSksUyhpKSl7aWYobCYmcy5tYXRjaCgvXlxcZCskLykpcmV0dXJuIG87aT1KU09OLnN0cmluZ2lmeShcIlwiK3MpLGkubWF0Y2goL15cIihbYS16QS1aX11bYS16QS1aXzAtOV0qKVwiJC8pPyhpPWkuc3Vic3RyKDEsaS5sZW5ndGgtMiksaT1lLnN0eWxpemUoaSxcIm5hbWVcIikpOihpPWkucmVwbGFjZSgvJy9nLFwiXFxcXCdcIikucmVwbGFjZSgvXFxcXFwiL2csJ1wiJykucmVwbGFjZSgvKF5cInxcIiQpL2csXCInXCIpLGk9ZS5zdHlsaXplKGksXCJzdHJpbmdcIikpfXJldHVybiBpK1wiOiBcIitvfWZ1bmN0aW9uIHAoZSx0LG4pe3ZhciByPTAscz1lLnJlZHVjZShmdW5jdGlvbihlLHQpe3JldHVybiByKyssdC5pbmRleE9mKFwiXFxuXCIpPj0wJiZyKyssZSt0LnJlcGxhY2UoL1xcdTAwMWJcXFtcXGRcXGQ/bS9nLFwiXCIpLmxlbmd0aCsxfSwwKTtyZXR1cm4gcz42MD9uWzBdKyhcIlwiPT09dD9cIlwiOnQrXCJcXG4gXCIpK1wiIFwiK2Uuam9pbihcIixcXG4gIFwiKStcIiBcIituWzFdOm5bMF0rdCtcIiBcIitlLmpvaW4oXCIsIFwiKStcIiBcIituWzFdfWZ1bmN0aW9uIGYoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSl9ZnVuY3Rpb24gbShlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGV9ZnVuY3Rpb24gZyhlKXtyZXR1cm4gbnVsbD09PWV9ZnVuY3Rpb24gVChlKXtyZXR1cm4gbnVsbD09ZX1mdW5jdGlvbiBfKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIHYoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9ZnVuY3Rpb24gQyhlKXtyZXR1cm5cInN5bWJvbFwiPT10eXBlb2YgZX1mdW5jdGlvbiBTKGUpe3JldHVybiB2b2lkIDA9PT1lfWZ1bmN0aW9uIEUoZSl7cmV0dXJuIEEoZSkmJlwiW29iamVjdCBSZWdFeHBdXCI9PT13KGUpfWZ1bmN0aW9uIEEoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lfWZ1bmN0aW9uIHkoZSl7cmV0dXJuIEEoZSkmJlwiW29iamVjdCBEYXRlXVwiPT09dyhlKX1mdW5jdGlvbiBSKGUpe3JldHVybiBBKGUpJiYoXCJbb2JqZWN0IEVycm9yXVwiPT09dyhlKXx8ZSBpbnN0YW5jZW9mIEVycm9yKX1mdW5jdGlvbiBiKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGV9ZnVuY3Rpb24gSShlKXtyZXR1cm4gbnVsbD09PWV8fFwiYm9vbGVhblwiPT10eXBlb2YgZXx8XCJudW1iZXJcIj09dHlwZW9mIGV8fFwic3RyaW5nXCI9PXR5cGVvZiBlfHxcInN5bWJvbFwiPT10eXBlb2YgZXx8XCJ1bmRlZmluZWRcIj09dHlwZW9mIGV9ZnVuY3Rpb24gdyhlKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIE4oZSl7cmV0dXJuIDEwPmU/XCIwXCIrZS50b1N0cmluZygxMCk6ZS50b1N0cmluZygxMCl9ZnVuY3Rpb24gRCgpe3ZhciBlPW5ldyBEYXRlLHQ9W04oZS5nZXRIb3VycygpKSxOKGUuZ2V0TWludXRlcygpKSxOKGUuZ2V0U2Vjb25kcygpKV0uam9pbihcIjpcIik7cmV0dXJuW2UuZ2V0RGF0ZSgpLFBbZS5nZXRNb250aCgpXSx0XS5qb2luKFwiIFwiKX1mdW5jdGlvbiBPKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfXZhciB4PS8lW3NkaiVdL2c7bi5mb3JtYXQ9ZnVuY3Rpb24oZSl7aWYoIXYoZSkpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0LnB1c2gocyhhcmd1bWVudHNbbl0pKTtyZXR1cm4gdC5qb2luKFwiIFwiKX1mb3IodmFyIG49MSxyPWFyZ3VtZW50cyxsPXIubGVuZ3RoLGk9U3RyaW5nKGUpLnJlcGxhY2UoeCxmdW5jdGlvbihlKXtpZihcIiUlXCI9PT1lKXJldHVyblwiJVwiO2lmKG4+PWwpcmV0dXJuIGU7c3dpdGNoKGUpe2Nhc2VcIiVzXCI6cmV0dXJuIFN0cmluZyhyW24rK10pO2Nhc2VcIiVkXCI6cmV0dXJuIE51bWJlcihyW24rK10pO2Nhc2VcIiVqXCI6dHJ5e3JldHVybiBKU09OLnN0cmluZ2lmeShyW24rK10pfWNhdGNoKHQpe3JldHVyblwiW0NpcmN1bGFyXVwifWRlZmF1bHQ6cmV0dXJuIGV9fSksbz1yW25dO2w+bjtvPXJbKytuXSlpKz1nKG8pfHwhQShvKT9cIiBcIitvOlwiIFwiK3Mobyk7cmV0dXJuIGl9LG4uZGVwcmVjYXRlPWZ1bmN0aW9uKGUscyl7ZnVuY3Rpb24gbCgpe2lmKCFpKXtpZih0LnRocm93RGVwcmVjYXRpb24pdGhyb3cgbmV3IEVycm9yKHMpO3QudHJhY2VEZXByZWNhdGlvbj9jb25zb2xlLnRyYWNlKHMpOmNvbnNvbGUuZXJyb3IocyksaT0hMH1yZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9aWYoUyhyLnByb2Nlc3MpKXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuLmRlcHJlY2F0ZShlLHMpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07aWYodC5ub0RlcHJlY2F0aW9uPT09ITApcmV0dXJuIGU7dmFyIGk9ITE7cmV0dXJuIGx9O3ZhciBVLE09e307bi5kZWJ1Z2xvZz1mdW5jdGlvbihlKXtpZihTKFUpJiYoVT10LmVudi5OT0RFX0RFQlVHfHxcIlwiKSxlPWUudG9VcHBlckNhc2UoKSwhTVtlXSlpZihuZXcgUmVnRXhwKFwiXFxcXGJcIitlK1wiXFxcXGJcIixcImlcIikudGVzdChVKSl7dmFyIHI9dC5waWQ7TVtlXT1mdW5jdGlvbigpe3ZhciB0PW4uZm9ybWF0LmFwcGx5KG4sYXJndW1lbnRzKTtjb25zb2xlLmVycm9yKFwiJXMgJWQ6ICVzXCIsZSxyLHQpfX1lbHNlIE1bZV09ZnVuY3Rpb24oKXt9O3JldHVybiBNW2VdfSxuLmluc3BlY3Q9cyxzLmNvbG9ycz17Ym9sZDpbMSwyMl0saXRhbGljOlszLDIzXSx1bmRlcmxpbmU6WzQsMjRdLGludmVyc2U6WzcsMjddLHdoaXRlOlszNywzOV0sZ3JleTpbOTAsMzldLGJsYWNrOlszMCwzOV0sYmx1ZTpbMzQsMzldLGN5YW46WzM2LDM5XSxncmVlbjpbMzIsMzldLG1hZ2VudGE6WzM1LDM5XSxyZWQ6WzMxLDM5XSx5ZWxsb3c6WzMzLDM5XX0scy5zdHlsZXM9e3NwZWNpYWw6XCJjeWFuXCIsbnVtYmVyOlwieWVsbG93XCIsXCJib29sZWFuXCI6XCJ5ZWxsb3dcIix1bmRlZmluZWQ6XCJncmV5XCIsXCJudWxsXCI6XCJib2xkXCIsc3RyaW5nOlwiZ3JlZW5cIixkYXRlOlwibWFnZW50YVwiLHJlZ2V4cDpcInJlZFwifSxuLmlzQXJyYXk9ZixuLmlzQm9vbGVhbj1tLG4uaXNOdWxsPWcsbi5pc051bGxPclVuZGVmaW5lZD1ULG4uaXNOdW1iZXI9XyxuLmlzU3RyaW5nPXYsbi5pc1N5bWJvbD1DLG4uaXNVbmRlZmluZWQ9UyxuLmlzUmVnRXhwPUUsbi5pc09iamVjdD1BLG4uaXNEYXRlPXksbi5pc0Vycm9yPVIsbi5pc0Z1bmN0aW9uPWIsbi5pc1ByaW1pdGl2ZT1JLG4uaXNCdWZmZXI9ZShcIi4vc3VwcG9ydC9pc0J1ZmZlclwiKTt2YXIgUD1bXCJKYW5cIixcIkZlYlwiLFwiTWFyXCIsXCJBcHJcIixcIk1heVwiLFwiSnVuXCIsXCJKdWxcIixcIkF1Z1wiLFwiU2VwXCIsXCJPY3RcIixcIk5vdlwiLFwiRGVjXCJdO24ubG9nPWZ1bmN0aW9uKCl7Y29uc29sZS5sb2coXCIlcyAtICVzXCIsRCgpLG4uZm9ybWF0LmFwcGx5KG4sYXJndW1lbnRzKSl9LG4uaW5oZXJpdHM9ZShcImluaGVyaXRzXCIpLG4uX2V4dGVuZD1mdW5jdGlvbihlLHQpe2lmKCF0fHwhQSh0KSlyZXR1cm4gZTtmb3IodmFyIG49T2JqZWN0LmtleXModCkscj1uLmxlbmd0aDtyLS07KWVbbltyXV09dFtuW3JdXTtyZXR1cm4gZX19KS5jYWxsKHRoaXMsZShcIl9wcm9jZXNzXCIpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7XCIuL3N1cHBvcnQvaXNCdWZmZXJcIjozMSxfcHJvY2VzczozMCxpbmhlcml0czoyOX1dLDMzOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe3JldHVyblwiV2Via2l0QXBwZWFyYW5jZVwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlfHx3aW5kb3cuY29uc29sZSYmKGNvbnNvbGUuZmlyZWJ1Z3x8Y29uc29sZS5leGNlcHRpb24mJmNvbnNvbGUudGFibGUpfHxuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkubWF0Y2goL2ZpcmVmb3hcXC8oXFxkKykvKSYmcGFyc2VJbnQoUmVnRXhwLiQxLDEwKT49MzF9ZnVuY3Rpb24gcygpe3ZhciBlPWFyZ3VtZW50cyx0PXRoaXMudXNlQ29sb3JzO2lmKGVbMF09KHQ/XCIlY1wiOlwiXCIpK3RoaXMubmFtZXNwYWNlKyh0P1wiICVjXCI6XCIgXCIpK2VbMF0rKHQ/XCIlYyBcIjpcIiBcIikrXCIrXCIrbi5odW1hbml6ZSh0aGlzLmRpZmYpLCF0KXJldHVybiBlO3ZhciByPVwiY29sb3I6IFwiK3RoaXMuY29sb3I7ZT1bZVswXSxyLFwiY29sb3I6IGluaGVyaXRcIl0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGUsMSkpO3ZhciBzPTAsbD0wO3JldHVybiBlWzBdLnJlcGxhY2UoLyVbYS16JV0vZyxmdW5jdGlvbihlKXtcIiUlXCIhPT1lJiYocysrLFwiJWNcIj09PWUmJihsPXMpKX0pLGUuc3BsaWNlKGwsMCxyKSxlfWZ1bmN0aW9uIGwoKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgY29uc29sZSYmY29uc29sZS5sb2cmJkZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseS5jYWxsKGNvbnNvbGUubG9nLGNvbnNvbGUsYXJndW1lbnRzKX1mdW5jdGlvbiBpKGUpe3RyeXtudWxsPT1lP24uc3RvcmFnZS5yZW1vdmVJdGVtKFwiZGVidWdcIik6bi5zdG9yYWdlLmRlYnVnPWV9Y2F0Y2godCl7fX1mdW5jdGlvbiBvKCl7dmFyIGU7dHJ5e2U9bi5zdG9yYWdlLmRlYnVnfWNhdGNoKHQpe31yZXR1cm4gZX1mdW5jdGlvbiB1KCl7dHJ5e3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlfWNhdGNoKGUpe319bj10LmV4cG9ydHM9ZShcIi4vZGVidWdcIiksbi5sb2c9bCxuLmZvcm1hdEFyZ3M9cyxuLnNhdmU9aSxuLmxvYWQ9byxuLnVzZUNvbG9ycz1yLG4uc3RvcmFnZT1cInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgY2hyb21lLnN0b3JhZ2U/Y2hyb21lLnN0b3JhZ2UubG9jYWw6dSgpLG4uY29sb3JzPVtcImxpZ2h0c2VhZ3JlZW5cIixcImZvcmVzdGdyZWVuXCIsXCJnb2xkZW5yb2RcIixcImRvZGdlcmJsdWVcIixcImRhcmtvcmNoaWRcIixcImNyaW1zb25cIl0sbi5mb3JtYXR0ZXJzLmo9ZnVuY3Rpb24oZSl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpfSxuLmVuYWJsZShvKCkpfSx7XCIuL2RlYnVnXCI6MzR9XSwzNDpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoKXtyZXR1cm4gbi5jb2xvcnNbYysrJW4uY29sb3JzLmxlbmd0aF19ZnVuY3Rpb24gcyhlKXtmdW5jdGlvbiB0KCl7fWZ1bmN0aW9uIHMoKXt2YXIgZT1zLHQ9K25ldyBEYXRlLGw9dC0oYXx8dCk7ZS5kaWZmPWwsZS5wcmV2PWEsZS5jdXJyPXQsYT10LG51bGw9PWUudXNlQ29sb3JzJiYoZS51c2VDb2xvcnM9bi51c2VDb2xvcnMoKSksbnVsbD09ZS5jb2xvciYmZS51c2VDb2xvcnMmJihlLmNvbG9yPXIoKSk7dmFyIGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtpWzBdPW4uY29lcmNlKGlbMF0pLFwic3RyaW5nXCIhPXR5cGVvZiBpWzBdJiYoaT1bXCIlb1wiXS5jb25jYXQoaSkpO3ZhciBvPTA7aVswXT1pWzBdLnJlcGxhY2UoLyUoW2EteiVdKS9nLGZ1bmN0aW9uKHQscil7aWYoXCIlJVwiPT09dClyZXR1cm4gdDtvKys7dmFyIHM9bi5mb3JtYXR0ZXJzW3JdO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHMpe3ZhciBsPWlbb107dD1zLmNhbGwoZSxsKSxpLnNwbGljZShvLDEpLG8tLX1yZXR1cm4gdH0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4uZm9ybWF0QXJncyYmKGk9bi5mb3JtYXRBcmdzLmFwcGx5KGUsaSkpO3ZhciB1PXMubG9nfHxuLmxvZ3x8Y29uc29sZS5sb2cuYmluZChjb25zb2xlKTt1LmFwcGx5KGUsaSl9dC5lbmFibGVkPSExLHMuZW5hYmxlZD0hMDt2YXIgbD1uLmVuYWJsZWQoZSk/czp0O3JldHVybiBsLm5hbWVzcGFjZT1lLGx9ZnVuY3Rpb24gbChlKXtuLnNhdmUoZSk7Zm9yKHZhciB0PShlfHxcIlwiKS5zcGxpdCgvW1xccyxdKy8pLHI9dC5sZW5ndGgscz0wO3I+cztzKyspdFtzXSYmKGU9dFtzXS5yZXBsYWNlKC9cXCovZyxcIi4qP1wiKSxcIi1cIj09PWVbMF0/bi5za2lwcy5wdXNoKG5ldyBSZWdFeHAoXCJeXCIrZS5zdWJzdHIoMSkrXCIkXCIpKTpuLm5hbWVzLnB1c2gobmV3IFJlZ0V4cChcIl5cIitlK1wiJFwiKSkpfWZ1bmN0aW9uIGkoKXtuLmVuYWJsZShcIlwiKX1mdW5jdGlvbiBvKGUpe3ZhciB0LHI7Zm9yKHQ9MCxyPW4uc2tpcHMubGVuZ3RoO3I+dDt0KyspaWYobi5za2lwc1t0XS50ZXN0KGUpKXJldHVybiExO2Zvcih0PTAscj1uLm5hbWVzLmxlbmd0aDtyPnQ7dCsrKWlmKG4ubmFtZXNbdF0udGVzdChlKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiB1KGUpe3JldHVybiBlIGluc3RhbmNlb2YgRXJyb3I/ZS5zdGFja3x8ZS5tZXNzYWdlOmV9bj10LmV4cG9ydHM9cyxuLmNvZXJjZT11LG4uZGlzYWJsZT1pLG4uZW5hYmxlPWwsbi5lbmFibGVkPW8sbi5odW1hbml6ZT1lKFwibXNcIiksbi5uYW1lcz1bXSxuLnNraXBzPVtdLG4uZm9ybWF0dGVycz17fTt2YXIgYSxjPTB9LHttczozNX1dLDM1OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXtpZihlPVwiXCIrZSwhKGUubGVuZ3RoPjFlNCkpe3ZhciB0PS9eKCg/OlxcZCspP1xcLj9cXGQrKSAqKG1pbGxpc2Vjb25kcz98bXNlY3M/fG1zfHNlY29uZHM/fHNlY3M/fHN8bWludXRlcz98bWlucz98bXxob3Vycz98aHJzP3xofGRheXM/fGR8eWVhcnM/fHlycz98eSk/JC9pLmV4ZWMoZSk7aWYodCl7dmFyIG49cGFyc2VGbG9hdCh0WzFdKSxyPSh0WzJdfHxcIm1zXCIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKHIpe2Nhc2VcInllYXJzXCI6Y2FzZVwieWVhclwiOmNhc2VcInlyc1wiOmNhc2VcInlyXCI6Y2FzZVwieVwiOnJldHVybiBuKmg7Y2FzZVwiZGF5c1wiOmNhc2VcImRheVwiOmNhc2VcImRcIjpyZXR1cm4gbipjO2Nhc2VcImhvdXJzXCI6Y2FzZVwiaG91clwiOmNhc2VcImhyc1wiOmNhc2VcImhyXCI6Y2FzZVwiaFwiOnJldHVybiBuKmE7Y2FzZVwibWludXRlc1wiOmNhc2VcIm1pbnV0ZVwiOmNhc2VcIm1pbnNcIjpjYXNlXCJtaW5cIjpjYXNlXCJtXCI6cmV0dXJuIG4qdTtjYXNlXCJzZWNvbmRzXCI6Y2FzZVwic2Vjb25kXCI6Y2FzZVwic2Vjc1wiOmNhc2VcInNlY1wiOmNhc2VcInNcIjpyZXR1cm4gbipvO2Nhc2VcIm1pbGxpc2Vjb25kc1wiOmNhc2VcIm1pbGxpc2Vjb25kXCI6Y2FzZVwibXNlY3NcIjpjYXNlXCJtc2VjXCI6Y2FzZVwibXNcIjpyZXR1cm4gbn19fX1mdW5jdGlvbiBzKGUpe3JldHVybiBlPj1jP01hdGgucm91bmQoZS9jKStcImRcIjplPj1hP01hdGgucm91bmQoZS9hKStcImhcIjplPj11P01hdGgucm91bmQoZS91KStcIm1cIjplPj1vP01hdGgucm91bmQoZS9vKStcInNcIjplK1wibXNcIn1mdW5jdGlvbiBsKGUpe3JldHVybiBpKGUsYyxcImRheVwiKXx8aShlLGEsXCJob3VyXCIpfHxpKGUsdSxcIm1pbnV0ZVwiKXx8aShlLG8sXCJzZWNvbmRcIil8fGUrXCIgbXNcIn1mdW5jdGlvbiBpKGUsdCxuKXtyZXR1cm4gdD5lP3ZvaWQgMDoxLjUqdD5lP01hdGguZmxvb3IoZS90KStcIiBcIituOk1hdGguY2VpbChlL3QpK1wiIFwiK24rXCJzXCJ9dmFyIG89MWUzLHU9NjAqbyxhPTYwKnUsYz0yNCphLGg9MzY1LjI1KmM7dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8e30sXCJzdHJpbmdcIj09dHlwZW9mIGU/cihlKTp0W1wibG9uZ1wiXT9sKGUpOnMoZSl9fSx7fV0sMzY6W2Z1bmN0aW9uKGUsdCxuKXsoZnVuY3Rpb24obil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlKXtmdW5jdGlvbiB0KGUpe3JldHVybiBmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcInJ0Y25pbmphOiBXZWJSVEMgbm90IHN1cHBvcnRlZCwgbWlzc2luZyBcIitlK1wiIFticm93c2VyOiBcIitpLm5hbWUrXCIgXCIraS52ZXJzaW9uK1wiXVwiKX19aWYodiYmaS5jaHJvbWUmJl8+PTMyfHxpLmFuZHJvaWQmJmkuY2hyb21lJiZfPj0zOXx8diYmaS5vcGVyYSYmXz49Mjd8fGkuYW5kcm9pZCYmaS5vcGVyYSYmXz49MjR8fGkuYW5kcm9pZCYmaS53ZWJraXQmJiFpLmNocm9tZSYmXz49Mzd8fGwud2Via2l0R2V0VXNlck1lZGlhJiZzLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKUM9ITAsYT1sLndlYmtpdEdldFVzZXJNZWRpYS5iaW5kKGwpLGM9cy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbixoPXMuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLGQ9cy5SVENJY2VDYW5kaWRhdGUscD1zLk1lZGlhU3RyZWFtVHJhY2sscCYmcC5nZXRTb3VyY2VzP2Y9cC5nZXRTb3VyY2VzLmJpbmQocCk6bC5nZXRNZWRpYURldmljZXMmJihmPWwuZ2V0TWVkaWFEZXZpY2VzLmJpbmQobCkpLG09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zcmM9VVJMLmNyZWF0ZU9iamVjdFVSTCh0KSxlfSxnPSEwLFQ9ITE7ZWxzZSBpZih2JiZpLmZpcmVmb3gmJl8+PTIyfHxpLmFuZHJvaWQmJmkuZmlyZWZveCYmXz49MzN8fGwubW96R2V0VXNlck1lZGlhJiZzLm1velJUQ1BlZXJDb25uZWN0aW9uKUM9ITAsYT1sLm1vekdldFVzZXJNZWRpYS5iaW5kKGwpLGM9cy5tb3pSVENQZWVyQ29ubmVjdGlvbixoPXMubW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uLGQ9cy5tb3pSVENJY2VDYW5kaWRhdGUscD1zLk1lZGlhU3RyZWFtVHJhY2ssbT1mdW5jdGlvbihlLHQpe3JldHVybiBlLnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKHQpLGV9LGc9ITEsVD0hMTtlbHNlIGlmKGUucGx1Z2luJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnBsdWdpbi5pc1JlcXVpcmVkJiZlLnBsdWdpbi5pc1JlcXVpcmVkKCkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucGx1Z2luLmlzSW5zdGFsbGVkJiZlLnBsdWdpbi5pc0luc3RhbGxlZCgpKXt2YXIgbj1lLnBsdWdpbltcImludGVyZmFjZVwiXTtDPSEwLGE9bi5nZXRVc2VyTWVkaWEsYz1uLlJUQ1BlZXJDb25uZWN0aW9uLGg9bi5SVENTZXNzaW9uRGVzY3JpcHRpb24sZD1uLlJUQ0ljZUNhbmRpZGF0ZSxwPW4uTWVkaWFTdHJlYW1UcmFjayxwJiZwLmdldFNvdXJjZXM/Zj1wLmdldFNvdXJjZXMuYmluZChwKTpsLmdldE1lZGlhRGV2aWNlcyYmKGY9bC5nZXRNZWRpYURldmljZXMuYmluZChsKSksbT1uLmF0dGFjaE1lZGlhU3RyZWFtLGc9bi5jYW5SZW5lZ290aWF0ZSxUPSEwfWVsc2UgbC5nZXRVc2VyTWVkaWEmJnMuUlRDUGVlckNvbm5lY3Rpb24mJihDPSEwLGE9bC5nZXRVc2VyTWVkaWEuYmluZChsKSxjPXMuUlRDUGVlckNvbm5lY3Rpb24saD1zLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbixkPXMuUlRDSWNlQ2FuZGlkYXRlLHA9cy5NZWRpYVN0cmVhbVRyYWNrLHAmJnAuZ2V0U291cmNlcz9mPXAuZ2V0U291cmNlcy5iaW5kKHApOmwuZ2V0TWVkaWFEZXZpY2VzJiYoZj1sLmdldE1lZGlhRGV2aWNlcy5iaW5kKGwpKSxtPXMuYXR0YWNoTWVkaWFTdHJlYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3JjPVVSTC5jcmVhdGVPYmplY3RVUkwodCksZX0sZz0hMCxUPSExKTtyZXR1cm4gci5oYXNXZWJSVEM9ZnVuY3Rpb24oKXtyZXR1cm4gQ30sYT9yLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlLHQsbil7byhcImdldFVzZXJNZWRpYSgpIHwgY29uc3RyYWludHM6ICVvXCIsZSk7dHJ5e2EoZSxmdW5jdGlvbihlKXtvKFwiZ2V0VXNlck1lZGlhKCkgfCBzdWNjZXNzXCIpLHQmJnQoZSl9LGZ1bmN0aW9uKGUpe28oXCJnZXRVc2VyTWVkaWEoKSB8IGVycm9yOlwiLGUpLG4mJm4oZSl9KX1jYXRjaChyKXt1KFwiZ2V0VXNlck1lZGlhKCkgfCBlcnJvcjpcIixyKSxuJiZuKHIpfX06ci5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSxuLHIpe3UoXCJnZXRVc2VyTWVkaWEoKSB8IFdlYlJUQyBub3Qgc3VwcG9ydGVkXCIpLHI/cihuZXcgRXJyb3IoXCJydGNuaW5qYTogV2ViUlRDIG5vdCBzdXBwb3J0ZWQsIG1pc3NpbmcgZ2V0VXNlck1lZGlhIFticm93c2VyOiBcIitpLm5hbWUrXCIgXCIraS52ZXJzaW9uK1wiXVwiKSk6dChcImdldFVzZXJNZWRpYVwiKX0sci5SVENQZWVyQ29ubmVjdGlvbj1jfHx0KFwiUlRDUGVlckNvbm5lY3Rpb25cIiksci5SVENTZXNzaW9uRGVzY3JpcHRpb249aHx8dChcIlJUQ1Nlc3Npb25EZXNjcmlwdGlvblwiKSxyLlJUQ0ljZUNhbmRpZGF0ZT1kfHx0KFwiUlRDSWNlQ2FuZGlkYXRlXCIpLHIuTWVkaWFTdHJlYW1UcmFjaz1wfHx0KFwiTWVkaWFTdHJlYW1UcmFja1wiKSxyLmdldE1lZGlhRGV2aWNlcz1mLHIuYXR0YWNoTWVkaWFTdHJlYW09bXx8dChcImF0dGFjaE1lZGlhU3RyZWFtXCIpLHIuY2FuUmVuZWdvdGlhdGU9ZyxyLmNsb3NlTWVkaWFTdHJlYW09ZnVuY3Rpb24oZSl7aWYoZSl0cnl7byhcImNsb3NlTWVkaWFTdHJlYW0oKSB8IGNhbGxpbmcgc3RvcCgpIG9uIGFsbCB0aGUgTWVkaWFTdHJlYW1UcmFja1wiKTt2YXIgdCxuLHI7aWYoZS5nZXRUcmFja3MpZm9yKHQ9ZS5nZXRUcmFja3MoKSxuPTAscj10Lmxlbmd0aDtyPm47bis9MSl0W25dLnN0b3AoKTtlbHNle2Zvcih0PWUuZ2V0QXVkaW9UcmFja3MoKSxuPTAscj10Lmxlbmd0aDtyPm47bis9MSl0W25dLnN0b3AoKTtmb3IodD1lLmdldFZpZGVvVHJhY2tzKCksbj0wLHI9dC5sZW5ndGg7cj5uO24rPTEpdFtuXS5zdG9wKCl9fWNhdGNoKHMpe1wiZnVuY3Rpb25cIiE9dHlwZW9mIGUuc3RvcCYmXCJvYmplY3RcIiE9dHlwZW9mIGUuc3RvcHx8KG8oXCJjbG9zZU1lZGlhU3RyZWFtKCkgfCBjYWxsaW5nIHN0b3AoKSBvbiB0aGUgTWVkaWFTdHJlYW1cIiksZS5zdG9wKCkpfX0sci5maXhQZWVyQ29ubmVjdGlvbkNvbmZpZz1mdW5jdGlvbihlKXt2YXIgdCxuLHIscyxsO2ZvcihBcnJheS5pc0FycmF5KGUuaWNlU2VydmVycyl8fChlLmljZVNlcnZlcnM9W10pLHQ9MCxuPWUuaWNlU2VydmVycy5sZW5ndGg7bj50O3QrPTEpcj1lLmljZVNlcnZlcnNbdF0scz1yLmhhc093blByb3BlcnR5KFwidXJsc1wiKSxsPXIuaGFzT3duUHJvcGVydHkoXCJ1cmxcIiksXCJvYmplY3RcIj09dHlwZW9mIHImJihzJiYhbD9yLnVybD1BcnJheS5pc0FycmF5KHIudXJscyk/ci51cmxzWzBdOnIudXJsczohcyYmbCYmKHIudXJscz1BcnJheS5pc0FycmF5KHIudXJsKT9yLnVybC5zbGljZSgpOnIudXJsKSxsJiZBcnJheS5pc0FycmF5KHIudXJsKSYmKHIudXJsPXIudXJsWzBdKSl9LHIuZml4UlRDT2ZmZXJPcHRpb25zPWZ1bmN0aW9uKGUpe2U9ZXx8e30sVD8oZS5oYXNPd25Qcm9wZXJ0eShcIm9mZmVyVG9SZWNlaXZlQXVkaW9cIikmJihlLm1hbmRhdG9yeT1lLm1hbmRhdG9yeXx8e30sZS5tYW5kYXRvcnkuT2ZmZXJUb1JlY2VpdmVBdWRpbz0hIWUub2ZmZXJUb1JlY2VpdmVBdWRpbyksZS5oYXNPd25Qcm9wZXJ0eShcIm9mZmVyVG9SZWNlaXZlVmlkZW9cIikmJihlLm1hbmRhdG9yeT1lLm1hbmRhdG9yeXx8e30sZS5tYW5kYXRvcnkuT2ZmZXJUb1JlY2VpdmVWaWRlbz0hIWUub2ZmZXJUb1JlY2VpdmVWaWRlbykpOihlLm1hbmRhdG9yeSYmZS5tYW5kYXRvcnkuaGFzT3duUHJvcGVydHkoXCJPZmZlclRvUmVjZWl2ZUF1ZGlvXCIpJiYoZS5vZmZlclRvUmVjZWl2ZUF1ZGlvPWUubWFuZGF0b3J5Lk9mZmVyVG9SZWNlaXZlQXVkaW8/MTowKSxlLm1hbmRhdG9yeSYmZS5tYW5kYXRvcnkuaGFzT3duUHJvcGVydHkoXCJPZmZlclRvUmVjZWl2ZVZpZGVvXCIpJiYoZS5vZmZlclRvUmVjZWl2ZVZpZGVvPWUubWFuZGF0b3J5Lk9mZmVyVG9SZWNlaXZlVmlkZW8/MTowKSxkZWxldGUgZS5tYW5kYXRvcnkpfSxyfXQuZXhwb3J0cz1yO3ZhciBzLGwsaT1lKFwiYm93c2VyXCIpLG89ZShcImRlYnVnXCIpKFwicnRjbmluamE6QWRhcHRlclwiKSx1PWUoXCJkZWJ1Z1wiKShcInJ0Y25pbmphOkVSUk9SOkFkYXB0ZXJcIiksYT1udWxsLGM9bnVsbCxoPW51bGwsZD1udWxsLHA9bnVsbCxmPW51bGwsbT1udWxsLGc9ITEsVD0hMSxfPU51bWJlcihpLnZlcnNpb24pfHwwLHY9IShpLm1vYmlsZXx8aS50YWJsZXQmJiEoaS5tc2llJiZfPj0xMCkpLEM9ITE7dS5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSkscz1uLndpbmRvd3x8bixsPXMubmF2aWdhdG9yfHx7fX0pLmNhbGwodGhpcyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se2Jvd3Nlcjo0MCxkZWJ1ZzozM31dLDM3OltmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlLHQpe2goXCJuZXcgfCBbcGNDb25maWc6JW8sIHBjQ29uc3RyYWludHM6JW9dXCIsZSx0KSxzLmNhbGwodGhpcyxlKSx0aGlzLnBjQ29uc3RyYWludHM9dCx0aGlzLm91ckxvY2FsRGVzY3JpcHRpb249bnVsbCx0aGlzLm91clNpZ25hbGluZ1N0YXRlPW51bGwsdGhpcy5vdXJJY2VDb25uZWN0aW9uU3RhdGU9bnVsbCx0aGlzLm91ckljZUdhdGhlcmluZ1N0YXRlPW51bGwsdGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXQ9bnVsbCx0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXk9bnVsbCx0aGlzLmlnbm9yZUljZUdhdGhlcmluZz0hMSx0aGlzLmNsb3NlZD0hMSxvLmNhbGwodGhpcyksYS5jYWxsKHRoaXMpfWZ1bmN0aW9uIHMoZSl7dGhpcy5wY0NvbmZpZz1jKCEwLGUpLHAuZml4UGVlckNvbm5lY3Rpb25Db25maWcodGhpcy5wY0NvbmZpZyksdGhpcy5vcHRpb25zPXtpY2VUcmFuc3BvcnRzUmVsYXk6XCJyZWxheVwiPT09dGhpcy5wY0NvbmZpZy5pY2VUcmFuc3BvcnRzLGljZVRyYW5zcG9ydHNOb25lOlwibm9uZVwiPT09dGhpcy5wY0NvbmZpZy5pY2VUcmFuc3BvcnRzLGdhdGhlcmluZ1RpbWVvdXQ6dGhpcy5wY0NvbmZpZy5nYXRoZXJpbmdUaW1lb3V0LGdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5OnRoaXMucGNDb25maWcuZ2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXl9LGRlbGV0ZSB0aGlzLnBjQ29uZmlnLmdhdGhlcmluZ1RpbWVvdXQsZGVsZXRlIHRoaXMucGNDb25maWcuZ2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXksaChcInNldENvbmZpZ3VyYXRpb25BbmRPcHRpb25zIHwgcHJvY2Vzc2VkIHBjQ29uZmlnOiAlb1wiLHRoaXMucGNDb25maWcpfWZ1bmN0aW9uIGwoKXtyZXR1cm4gdGhpcy5jbG9zZWR8fHRoaXMucGMmJlwiY2xvc2VkXCI9PT10aGlzLnBjLmljZUNvbm5lY3Rpb25TdGF0ZX1mdW5jdGlvbiBpKCl7dmFyIGU9dGhpcyx0PXRoaXMucGM7dC5vbm5lZ290aWF0aW9ubmVlZGVkPWZ1bmN0aW9uKHQpe2wuY2FsbChlKXx8KGgoXCJvbm5lZ290aWF0aW9ubmVlZGVkKClcIiksZS5vbm5lZ290aWF0aW9ubmVlZGVkJiZlLm9ubmVnb3RpYXRpb25uZWVkZWQodCkpfSx0Lm9uaWNlY2FuZGlkYXRlPWZ1bmN0aW9uKHQpe3ZhciBuLHIscztpZighbC5jYWxsKGUpJiYhZS5pZ25vcmVJY2VHYXRoZXJpbmcmJiFlLm9wdGlvbnMuaWNlVHJhbnNwb3J0c05vbmUpaWYobj10LmNhbmRpZGF0ZSl7aWYocj1mLlJFR0VYUF9SRUxBWV9DQU5ESURBVEUudGVzdChuLmNhbmRpZGF0ZSksZS5vcHRpb25zLmljZVRyYW5zcG9ydHNSZWxheSYmIXIpcmV0dXJuO3ImJiFlLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkmJlwibnVtYmVyXCI9PXR5cGVvZiBlLm9wdGlvbnMuZ2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkmJihoKFwib25pY2VjYW5kaWRhdGUoKSB8IGZpcnN0IHJlbGF5IGNhbmRpZGF0ZSBmb3VuZCwgZW5kaW5nIGdhdGhlcmluZyBpbiAlZCBtc1wiLGUub3B0aW9ucy5nYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSksXG5lLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXk9c2V0VGltZW91dChmdW5jdGlvbigpe2wuY2FsbChlKXx8KGgoXCJmb3JjZWQgZW5kIG9mIGNhbmRpZGF0ZXMgYWZ0ZXIgdGltZW91dFwiKSxkZWxldGUgZS50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5LGNsZWFyVGltZW91dChlLnRpbWVyR2F0aGVyaW5nVGltZW91dCksZGVsZXRlIGUudGltZXJHYXRoZXJpbmdUaW1lb3V0LGUuaWdub3JlSWNlR2F0aGVyaW5nPSEwLGUub25pY2VjYW5kaWRhdGUmJmUub25pY2VjYW5kaWRhdGUoe2NhbmRpZGF0ZTpudWxsfSxudWxsKSl9LGUub3B0aW9ucy5nYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSkpLHM9bmV3IHAuUlRDSWNlQ2FuZGlkYXRlKHtzZHBNaWQ6bi5zZHBNaWQsc2RwTUxpbmVJbmRleDpuLnNkcE1MaW5lSW5kZXgsY2FuZGlkYXRlOm4uY2FuZGlkYXRlfSksbnVsbD09PW0ubm9ybWFsaXplQ2FuZGlkYXRlJiYoZi5SRUdFWFBfTk9STUFMSVpFRF9DQU5ESURBVEUudGVzdChuLmNhbmRpZGF0ZSk/bS5ub3JtYWxpemVDYW5kaWRhdGU9ITE6KGgoJ29uaWNlY2FuZGlkYXRlKCkgfCBub3JtYWxpemluZyBJQ0UgY2FuZGlkYXRlcyBzeW50YXggKHJlbW92ZSBcImE9XCIgYW5kIFwiXFxcXHJcXFxcblwiKScpLG0ubm9ybWFsaXplQ2FuZGlkYXRlPSEwKSksbS5ub3JtYWxpemVDYW5kaWRhdGUmJihzLmNhbmRpZGF0ZT1uLmNhbmRpZGF0ZS5yZXBsYWNlKGYuUkVHRVhQX0ZJWF9DQU5ESURBVEUsXCJcIikpLGgoXCJvbmljZWNhbmRpZGF0ZSgpIHwgbSVkKCVzKSAlc1wiLHMuc2RwTUxpbmVJbmRleCxzLnNkcE1pZHx8XCJubyBtaWRcIixzLmNhbmRpZGF0ZSksZS5vbmljZWNhbmRpZGF0ZSYmZS5vbmljZWNhbmRpZGF0ZSh0LHMpfWVsc2UgaChcIm9uaWNlY2FuZGlkYXRlKCkgfCBlbmQgb2YgY2FuZGlkYXRlc1wiKSxjbGVhclRpbWVvdXQoZS50aW1lckdhdGhlcmluZ1RpbWVvdXQpLGRlbGV0ZSBlLnRpbWVyR2F0aGVyaW5nVGltZW91dCxjbGVhclRpbWVvdXQoZS50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5KSxkZWxldGUgZS50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5LGUub25pY2VjYW5kaWRhdGUmJmUub25pY2VjYW5kaWRhdGUodCxudWxsKX0sdC5vbmFkZHN0cmVhbT1mdW5jdGlvbih0KXtsLmNhbGwoZSl8fChoKFwib25hZGRzdHJlYW0oKSB8IHN0cmVhbTogJW9cIix0LnN0cmVhbSksZS5vbmFkZHN0cmVhbSYmZS5vbmFkZHN0cmVhbSh0LHQuc3RyZWFtKSl9LHQub25yZW1vdmVzdHJlYW09ZnVuY3Rpb24odCl7bC5jYWxsKGUpfHwoaChcIm9ucmVtb3Zlc3RyZWFtKCkgfCBzdHJlYW06ICVvXCIsdC5zdHJlYW0pLGUub25yZW1vdmVzdHJlYW0mJmUub25yZW1vdmVzdHJlYW0odCx0LnN0cmVhbSkpfSx0Lm9uZGF0YWNoYW5uZWw9ZnVuY3Rpb24odCl7bC5jYWxsKGUpfHwoaChcIm9uZGF0YWNoYW5uZWwoKSB8IGRhdGFjaGFubmVsOiAlb1wiLHQuY2hhbm5lbCksZS5vbmRhdGFjaGFubmVsJiZlLm9uZGF0YWNoYW5uZWwodCx0LmNoYW5uZWwpKX0sdC5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlPWZ1bmN0aW9uKG4pe3Quc2lnbmFsaW5nU3RhdGUhPT1lLm91clNpZ25hbGluZ1N0YXRlJiYoaChcIm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UoKSB8IHNpZ25hbGluZ1N0YXRlOiAlc1wiLHQuc2lnbmFsaW5nU3RhdGUpLGUub3VyU2lnbmFsaW5nU3RhdGU9dC5zaWduYWxpbmdTdGF0ZSxlLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2UmJmUub25zaWduYWxpbmdzdGF0ZWNoYW5nZShuLHQuc2lnbmFsaW5nU3RhdGUpKX0sdC5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1mdW5jdGlvbihuKXt0LmljZUNvbm5lY3Rpb25TdGF0ZSE9PWUub3VySWNlQ29ubmVjdGlvblN0YXRlJiYoaChcIm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKCkgfCBpY2VDb25uZWN0aW9uU3RhdGU6ICVzXCIsdC5pY2VDb25uZWN0aW9uU3RhdGUpLGUub3VySWNlQ29ubmVjdGlvblN0YXRlPXQuaWNlQ29ubmVjdGlvblN0YXRlLGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UmJmUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2Uobix0LmljZUNvbm5lY3Rpb25TdGF0ZSkpfSx0Lm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2U9ZnVuY3Rpb24obil7bC5jYWxsKGUpfHx0LmljZUdhdGhlcmluZ1N0YXRlIT09ZS5vdXJJY2VHYXRoZXJpbmdTdGF0ZSYmKGgoXCJvbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKCkgfCBpY2VHYXRoZXJpbmdTdGF0ZTogJXNcIix0LmljZUdhdGhlcmluZ1N0YXRlKSxlLm91ckljZUdhdGhlcmluZ1N0YXRlPXQuaWNlR2F0aGVyaW5nU3RhdGUsZS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlJiZlLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2Uobix0LmljZUdhdGhlcmluZ1N0YXRlKSl9LHQub25pZGVudGl0eXJlc3VsdD1mdW5jdGlvbih0KXtsLmNhbGwoZSl8fChoKFwib25pZGVudGl0eXJlc3VsdCgpXCIpLGUub25pZGVudGl0eXJlc3VsdCYmZS5vbmlkZW50aXR5cmVzdWx0KHQpKX0sdC5vbnBlZXJpZGVudGl0eT1mdW5jdGlvbih0KXtsLmNhbGwoZSl8fChoKFwib25wZWVyaWRlbnRpdHkoKVwiKSxlLm9ucGVlcmlkZW50aXR5JiZlLm9ucGVlcmlkZW50aXR5KHQpKX0sdC5vbmlkcGFzc2VydGlvbmVycm9yPWZ1bmN0aW9uKHQpe2wuY2FsbChlKXx8KGgoXCJvbmlkcGFzc2VydGlvbmVycm9yKClcIiksZS5vbmlkcGFzc2VydGlvbmVycm9yJiZlLm9uaWRwYXNzZXJ0aW9uZXJyb3IodCkpfSx0Lm9uaWRwdmFsaWRhdGlvbmVycm9yPWZ1bmN0aW9uKHQpe2wuY2FsbChlKXx8KGgoXCJvbmlkcHZhbGlkYXRpb25lcnJvcigpXCIpLGUub25pZHB2YWxpZGF0aW9uZXJyb3ImJmUub25pZHB2YWxpZGF0aW9uZXJyb3IodCkpfX1mdW5jdGlvbiBvKCl7dGhpcy5wY0NvbnN0cmFpbnRzP3RoaXMucGM9bmV3IHAuUlRDUGVlckNvbm5lY3Rpb24odGhpcy5wY0NvbmZpZyx0aGlzLnBjQ29uc3RyYWludHMpOnRoaXMucGM9bmV3IHAuUlRDUGVlckNvbm5lY3Rpb24odGhpcy5wY0NvbmZpZyksaS5jYWxsKHRoaXMpfWZ1bmN0aW9uIHUoKXt2YXIgZT10aGlzLnBjLHQ9dGhpcy5vcHRpb25zLG49bnVsbDtyZXR1cm4gZS5sb2NhbERlc2NyaXB0aW9uPyh0LmljZVRyYW5zcG9ydHNSZWxheT9uPWUubG9jYWxEZXNjcmlwdGlvbi5zZHAucmVwbGFjZShmLlJFR0VYUF9TRFBfTk9OX1JFTEFZX0NBTkRJREFURVMsXCJcIik6dC5pY2VUcmFuc3BvcnRzTm9uZSYmKG49ZS5sb2NhbERlc2NyaXB0aW9uLnNkcC5yZXBsYWNlKGYuUkVHRVhQX1NEUF9DQU5ESURBVEVTLFwiXCIpKSx0aGlzLm91ckxvY2FsRGVzY3JpcHRpb249bmV3IHAuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOmUubG9jYWxEZXNjcmlwdGlvbi50eXBlLHNkcDpufHxlLmxvY2FsRGVzY3JpcHRpb24uc2RwfSksdGhpcy5vdXJMb2NhbERlc2NyaXB0aW9uKToodGhpcy5vdXJMb2NhbERlc2NyaXB0aW9uPW51bGwsbnVsbCl9ZnVuY3Rpb24gYSgpe3ZhciBlPXRoaXM7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7cGVlckNvbm5lY3Rpb246e2dldDpmdW5jdGlvbigpe3JldHVybiBlLnBjfX0sc2lnbmFsaW5nU3RhdGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBlLnBjLnNpZ25hbGluZ1N0YXRlfX0saWNlQ29ubmVjdGlvblN0YXRlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5wYy5pY2VDb25uZWN0aW9uU3RhdGV9fSxpY2VHYXRoZXJpbmdTdGF0ZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUucGMuaWNlR2F0aGVyaW5nU3RhdGV9fSxsb2NhbERlc2NyaXB0aW9uOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdS5jYWxsKGUpfX0scmVtb3RlRGVzY3JpcHRpb246e2dldDpmdW5jdGlvbigpe3JldHVybiBlLnBjLnJlbW90ZURlc2NyaXB0aW9ufX0scGVlcklkZW50aXR5OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5wYy5wZWVySWRlbnRpdHl9fX0pfXQuZXhwb3J0cz1yO3ZhciBjPWUoXCJtZXJnZVwiKSxoPWUoXCJkZWJ1Z1wiKShcInJ0Y25pbmphOlJUQ1BlZXJDb25uZWN0aW9uXCIpLGQ9ZShcImRlYnVnXCIpKFwicnRjbmluamE6RVJST1I6UlRDUGVlckNvbm5lY3Rpb25cIikscD1lKFwiLi9BZGFwdGVyXCIpLGY9e1JFR0VYUF9OT1JNQUxJWkVEX0NBTkRJREFURTpuZXcgUmVnRXhwKC9eY2FuZGlkYXRlOi9pKSxSRUdFWFBfRklYX0NBTkRJREFURTpuZXcgUmVnRXhwKC8oXmE9fFxccnxcXG4pL2dpKSxSRUdFWFBfUkVMQVlfQ0FORElEQVRFOm5ldyBSZWdFeHAoLyByZWxheSAvaSksUkVHRVhQX1NEUF9DQU5ESURBVEVTOm5ldyBSZWdFeHAoL15hPWNhbmRpZGF0ZTouKlxcclxcbi9naW0pLFJFR0VYUF9TRFBfTk9OX1JFTEFZX0NBTkRJREFURVM6bmV3IFJlZ0V4cCgvXmE9Y2FuZGlkYXRlOiguKD8hcmVsYXkgKSkqXFxyXFxuL2dpbSl9LG09e25vcm1hbGl6ZUNhbmRpZGF0ZTpudWxsfTtkLmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKSxyLnByb3RvdHlwZS5jcmVhdGVPZmZlcj1mdW5jdGlvbihlLHQsbil7aChcImNyZWF0ZU9mZmVyKClcIik7dmFyIHI9dGhpcztwLmZpeFJUQ09mZmVyT3B0aW9ucyhuKSx0aGlzLnBjLmNyZWF0ZU9mZmVyKGZ1bmN0aW9uKHQpe2wuY2FsbChyKXx8KGgoXCJjcmVhdGVPZmZlcigpIHwgc3VjY2Vzc1wiKSxlJiZlKHQpKX0sZnVuY3Rpb24oZSl7bC5jYWxsKHIpfHwoZChcImNyZWF0ZU9mZmVyKCkgfCBlcnJvcjpcIixlKSx0JiZ0KGUpKX0sbil9LHIucHJvdG90eXBlLmNyZWF0ZUFuc3dlcj1mdW5jdGlvbihlLHQsbil7aChcImNyZWF0ZUFuc3dlcigpXCIpO3ZhciByPXRoaXM7dGhpcy5wYy5jcmVhdGVBbnN3ZXIoZnVuY3Rpb24odCl7bC5jYWxsKHIpfHwoaChcImNyZWF0ZUFuc3dlcigpIHwgc3VjY2Vzc1wiKSxlJiZlKHQpKX0sZnVuY3Rpb24oZSl7bC5jYWxsKHIpfHwoZChcImNyZWF0ZUFuc3dlcigpIHwgZXJyb3I6XCIsZSksdCYmdChlKSl9LG4pfSxyLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7XCJudW1iZXJcIj09dHlwZW9mIHMub3B0aW9ucy5nYXRoZXJpbmdUaW1lb3V0JiZcImNvbXBsZXRlXCIhPT1zLnBjLmljZUdhdGhlcmluZ1N0YXRlJiYoaChcInNldExvY2FsRGVzY3JpcHRpb24oKSB8IGVuZGluZyBnYXRoZXJpbmcgaW4gJWQgbXMgKGdhdGhlcmluZ1RpbWVvdXQgb3B0aW9uKVwiLHMub3B0aW9ucy5nYXRoZXJpbmdUaW1lb3V0KSxzLnRpbWVyR2F0aGVyaW5nVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bC5jYWxsKHMpfHwoaChcImZvcmNlZCBlbmQgb2YgY2FuZGlkYXRlcyBhZnRlciBnYXRoZXJpbmdUaW1lb3V0IHRpbWVvdXRcIiksZGVsZXRlIHMudGltZXJHYXRoZXJpbmdUaW1lb3V0LGNsZWFyVGltZW91dChzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkpLGRlbGV0ZSBzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkscy5pZ25vcmVJY2VHYXRoZXJpbmc9ITAscy5vbmljZWNhbmRpZGF0ZSYmcy5vbmljZWNhbmRpZGF0ZSh7Y2FuZGlkYXRlOm51bGx9LG51bGwpKX0scy5vcHRpb25zLmdhdGhlcmluZ1RpbWVvdXQpKX1oKFwic2V0TG9jYWxEZXNjcmlwdGlvbigpXCIpO3ZhciBzPXRoaXM7dGhpcy5wYy5zZXRMb2NhbERlc2NyaXB0aW9uKGUsZnVuY3Rpb24oKXtsLmNhbGwocyl8fChoKFwic2V0TG9jYWxEZXNjcmlwdGlvbigpIHwgc3VjY2Vzc1wiKSxjbGVhclRpbWVvdXQocy50aW1lckdhdGhlcmluZ1RpbWVvdXQpLGRlbGV0ZSBzLnRpbWVyR2F0aGVyaW5nVGltZW91dCxjbGVhclRpbWVvdXQocy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5KSxkZWxldGUgcy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5LHIoKSx0JiZ0KCkpfSxmdW5jdGlvbihlKXtsLmNhbGwocyl8fChkKFwic2V0TG9jYWxEZXNjcmlwdGlvbigpIHwgZXJyb3I6XCIsZSksbiYmbihlKSl9KSx0aGlzLmlnbm9yZUljZUdhdGhlcmluZz0hMX0sci5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oZSx0LG4pe2goXCJzZXRSZW1vdGVEZXNjcmlwdGlvbigpXCIpO3ZhciByPXRoaXM7dGhpcy5wYy5zZXRSZW1vdGVEZXNjcmlwdGlvbihlLGZ1bmN0aW9uKCl7bC5jYWxsKHIpfHwoaChcInNldFJlbW90ZURlc2NyaXB0aW9uKCkgfCBzdWNjZXNzXCIpLHQmJnQoKSl9LGZ1bmN0aW9uKGUpe2wuY2FsbChyKXx8KGQoXCJzZXRSZW1vdGVEZXNjcmlwdGlvbigpIHwgZXJyb3I6XCIsZSksbiYmbihlKSl9KX0sci5wcm90b3R5cGUudXBkYXRlSWNlPWZ1bmN0aW9uKGUpe2goXCJ1cGRhdGVJY2UoKSB8IHBjQ29uZmlnOiAlb1wiLGUpLHMuY2FsbCh0aGlzLGUpLHRoaXMucGMudXBkYXRlSWNlKHRoaXMucGNDb25maWcpLHRoaXMuaWdub3JlSWNlR2F0aGVyaW5nPSExfSxyLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU9ZnVuY3Rpb24oZSx0LG4pe2goXCJhZGRJY2VDYW5kaWRhdGUoKSB8IGNhbmRpZGF0ZTogJW9cIixlKTt2YXIgcj10aGlzO3RoaXMucGMuYWRkSWNlQ2FuZGlkYXRlKGUsZnVuY3Rpb24oKXtsLmNhbGwocil8fChoKFwiYWRkSWNlQ2FuZGlkYXRlKCkgfCBzdWNjZXNzXCIpLHQmJnQoKSl9LGZ1bmN0aW9uKGUpe2wuY2FsbChyKXx8KGQoXCJhZGRJY2VDYW5kaWRhdGUoKSB8IGVycm9yOlwiLGUpLG4mJm4oZSkpfSl9LHIucHJvdG90eXBlLmdldENvbmZpZ3VyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gaChcImdldENvbmZpZ3VyYXRpb24oKVwiKSx0aGlzLnBjLmdldENvbmZpZ3VyYXRpb24oKX0sci5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIGgoXCJnZXRMb2NhbFN0cmVhbXMoKVwiKSx0aGlzLnBjLmdldExvY2FsU3RyZWFtcygpfSxyLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIGgoXCJnZXRSZW1vdGVTdHJlYW1zKClcIiksdGhpcy5wYy5nZXRSZW1vdGVTdHJlYW1zKCl9LHIucHJvdG90eXBlLmdldFN0cmVhbUJ5SWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGgoXCJnZXRTdHJlYW1CeUlkKCkgfCBzdHJlYW1JZDogJXNcIixlKSx0aGlzLnBjLmdldFN0cmVhbUJ5SWQoZSl9LHIucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXtoKFwiYWRkU3RyZWFtKCkgfCBzdHJlYW06ICVzXCIsZSksdGhpcy5wYy5hZGRTdHJlYW0oZSl9LHIucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXtoKFwicmVtb3ZlU3RyZWFtKCkgfCBzdHJlYW06ICVvXCIsZSksdGhpcy5wYy5yZW1vdmVTdHJlYW0oZSl9LHIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7aChcImNsb3NlKClcIiksdGhpcy5jbG9zZWQ9ITAsY2xlYXJUaW1lb3V0KHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0KSxkZWxldGUgdGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXQsY2xlYXJUaW1lb3V0KHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSksZGVsZXRlIHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSx0aGlzLnBjLmNsb3NlKCl9LHIucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsPWZ1bmN0aW9uKCl7cmV0dXJuIGgoXCJjcmVhdGVEYXRhQ2hhbm5lbCgpXCIpLHRoaXMucGMuY3JlYXRlRGF0YUNoYW5uZWwuYXBwbHkodGhpcy5wYyxhcmd1bWVudHMpfSxyLnByb3RvdHlwZS5jcmVhdGVEVE1GU2VuZGVyPWZ1bmN0aW9uKGUpe3JldHVybiBoKFwiY3JlYXRlRFRNRlNlbmRlcigpXCIpLHRoaXMucGMuY3JlYXRlRFRNRlNlbmRlcihlKX0sci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtyZXR1cm4gaChcImdldFN0YXRzKClcIiksdGhpcy5wYy5nZXRTdGF0cy5hcHBseSh0aGlzLnBjLGFyZ3VtZW50cyl9LHIucHJvdG90eXBlLnNldElkZW50aXR5UHJvdmlkZXI9ZnVuY3Rpb24oKXtyZXR1cm4gaChcInNldElkZW50aXR5UHJvdmlkZXIoKVwiKSx0aGlzLnBjLnNldElkZW50aXR5UHJvdmlkZXIuYXBwbHkodGhpcy5wYyxhcmd1bWVudHMpfSxyLnByb3RvdHlwZS5nZXRJZGVudGl0eUFzc2VydGlvbj1mdW5jdGlvbigpe3JldHVybiBoKFwiZ2V0SWRlbnRpdHlBc3NlcnRpb24oKVwiKSx0aGlzLnBjLmdldElkZW50aXR5QXNzZXJ0aW9uKCl9LHIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKGUpe2goXCJyZXNldCgpIHwgcGNDb25maWc6ICVvXCIsZSk7dmFyIHQ9dGhpcy5wYzt0Lm9ubmVnb3RpYXRpb25uZWVkZWQ9bnVsbCx0Lm9uaWNlY2FuZGlkYXRlPW51bGwsdC5vbmFkZHN0cmVhbT1udWxsLHQub25yZW1vdmVzdHJlYW09bnVsbCx0Lm9uZGF0YWNoYW5uZWw9bnVsbCx0Lm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2U9bnVsbCx0Lm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPW51bGwsdC5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlPW51bGwsdC5vbmlkZW50aXR5cmVzdWx0PW51bGwsdC5vbnBlZXJpZGVudGl0eT1udWxsLHQub25pZHBhc3NlcnRpb25lcnJvcj1udWxsLHQub25pZHB2YWxpZGF0aW9uZXJyb3I9bnVsbCxjbGVhclRpbWVvdXQodGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXQpLGRlbGV0ZSB0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dCxjbGVhclRpbWVvdXQodGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5KSxkZWxldGUgdGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5LGgoXCJyZXNldCgpIHwgY2xvc2luZyBjdXJyZW50IHBlZXJDb25uZWN0aW9uXCIpLHQuY2xvc2UoKSxzLmNhbGwodGhpcyxlKSxvLmNhbGwodGhpcyl9fSx7XCIuL0FkYXB0ZXJcIjozNixkZWJ1ZzozMyxtZXJnZTo0MX1dLDM4OltmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gcihlKXt2YXIgdD11KGV8fHt9KTtyZXR1cm4gYz0hMCxyLlJUQ1BlZXJDb25uZWN0aW9uPWEsci5nZXRVc2VyTWVkaWE9dC5nZXRVc2VyTWVkaWEsci5SVENTZXNzaW9uRGVzY3JpcHRpb249dC5SVENTZXNzaW9uRGVzY3JpcHRpb24sci5SVENJY2VDYW5kaWRhdGU9dC5SVENJY2VDYW5kaWRhdGUsci5NZWRpYVN0cmVhbVRyYWNrPXQuTWVkaWFTdHJlYW1UcmFjayxyLmdldE1lZGlhRGV2aWNlcz10LmdldE1lZGlhRGV2aWNlcyxyLmF0dGFjaE1lZGlhU3RyZWFtPXQuYXR0YWNoTWVkaWFTdHJlYW0sci5jbG9zZU1lZGlhU3RyZWFtPXQuY2xvc2VNZWRpYVN0cmVhbSxyLmNhblJlbmVnb3RpYXRlPXQuY2FuUmVuZWdvdGlhdGUsdC5oYXNXZWJSVEMoKT8obChcIldlYlJUQyBzdXBwb3J0ZWRcIiksITApOihpKFwiV2ViUlRDIG5vdCBzdXBwb3J0ZWRcIiksITEpfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCJib3dzZXJcIiksbD1lKFwiZGVidWdcIikoXCJydGNuaW5qYVwiKSxpPWUoXCJkZWJ1Z1wiKShcInJ0Y25pbmphOkVSUk9SXCIpLG89ZShcIi4vdmVyc2lvblwiKSx1PWUoXCIuL0FkYXB0ZXJcIiksYT1lKFwiLi9SVENQZWVyQ29ubmVjdGlvblwiKSxjPSExO2kubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpLGwoXCJ2ZXJzaW9uICVzXCIsbyksbChcImRldGVjdGVkIGJyb3dzZXI6ICVzICVzIFttb2JpbGU6JXMsIHRhYmxldDolcywgYW5kcm9pZDolcywgaW9zOiVzXVwiLHMubmFtZSxzLnZlcnNpb24sISFzLm1vYmlsZSwhIXMudGFibGV0LCEhcy5hbmRyb2lkLCEhcy5pb3MpLHIuaGFzV2ViUlRDPWZ1bmN0aW9uKCl7cmV0dXJuIGN8fHIoKSx1Lmhhc1dlYlJUQygpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcInZlcnNpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG99fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJjYWxsZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGN9fSksci5kZWJ1Zz1lKFwiZGVidWdcIiksci5icm93c2VyPXN9LHtcIi4vQWRhcHRlclwiOjM2LFwiLi9SVENQZWVyQ29ubmVjdGlvblwiOjM3LFwiLi92ZXJzaW9uXCI6MzksYm93c2VyOjQwLGRlYnVnOjMzfV0sMzk6W2Z1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt0LmV4cG9ydHM9ZShcIi4uL3BhY2thZ2UuanNvblwiKS52ZXJzaW9ufSx7XCIuLi9wYWNrYWdlLmpzb25cIjo0Mn1dLDQwOltmdW5jdGlvbih0LG4scil7IWZ1bmN0aW9uKHQscil7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG4mJm4uZXhwb3J0cz9uLmV4cG9ydHM9cigpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUuYW1kP2Uocik6dGhpc1t0XT1yKCl9KFwiYm93c2VyXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2Z1bmN0aW9uIG4odCl7dmFyIG49ZS5tYXRjaCh0KTtyZXR1cm4gbiYmbi5sZW5ndGg+MSYmblsxXXx8XCJcIn1mdW5jdGlvbiByKHQpe3ZhciBuPWUubWF0Y2godCk7cmV0dXJuIG4mJm4ubGVuZ3RoPjEmJm5bMl18fFwiXCJ9dmFyIHMsbD1uKC8oaXBvZHxpcGhvbmV8aXBhZCkvaSkudG9Mb3dlckNhc2UoKSxpPS9saWtlIGFuZHJvaWQvaS50ZXN0KGUpLG89IWkmJi9hbmRyb2lkL2kudGVzdChlKSx1PS9uZXh1c1xccypbMC02XVxccyovaS50ZXN0KGUpLGE9IXUmJi9uZXh1c1xccypbMC05XSsvaS50ZXN0KGUpLGM9L0NyT1MvLnRlc3QoZSksaD0vc2lsay9pLnRlc3QoZSksZD0vc2FpbGZpc2gvaS50ZXN0KGUpLHA9L3RpemVuL2kudGVzdChlKSxmPS8od2VifGhwdylvcy9pLnRlc3QoZSksbT0vd2luZG93cyBwaG9uZS9pLnRlc3QoZSksZz0hbSYmL3dpbmRvd3MvaS50ZXN0KGUpLFQ9IWwmJiFoJiYvbWFjaW50b3NoL2kudGVzdChlKSxfPSFvJiYhZCYmIXAmJiFmJiYvbGludXgvaS50ZXN0KGUpLHY9bigvZWRnZVxcLyhcXGQrKFxcLlxcZCspPykvaSksQz1uKC92ZXJzaW9uXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSxTPS90YWJsZXQvaS50ZXN0KGUpLEU9IVMmJi9bXi1dbW9iaS9pLnRlc3QoZSksQT0veGJveC9pLnRlc3QoZSk7L29wZXJhfG9wcnxvcGlvcy9pLnRlc3QoZSk/cz17bmFtZTpcIk9wZXJhXCIsb3BlcmE6dCx2ZXJzaW9uOkN8fG4oLyg/Om9wZXJhfG9wcnxvcGlvcylbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSl9Oi9jb2FzdC9pLnRlc3QoZSk/cz17bmFtZTpcIk9wZXJhIENvYXN0XCIsY29hc3Q6dCx2ZXJzaW9uOkN8fG4oLyg/OmNvYXN0KVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKX06L3lhYnJvd3Nlci9pLnRlc3QoZSk/cz17bmFtZTpcIllhbmRleCBCcm93c2VyXCIseWFuZGV4YnJvd3Nlcjp0LHZlcnNpb246Q3x8bigvKD86eWFicm93c2VyKVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKX06L3VjYnJvd3Nlci9pLnRlc3QoZSk/cz17bmFtZTpcIlVDIEJyb3dzZXJcIix1Y2Jyb3dzZXI6dCx2ZXJzaW9uOm4oLyg/OnVjYnJvd3NlcilbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKX06L214aW9zL2kudGVzdChlKT9zPXtuYW1lOlwiTWF4dGhvblwiLG1heHRob246dCx2ZXJzaW9uOm4oLyg/Om14aW9zKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpfTovZXBpcGhhbnkvaS50ZXN0KGUpP3M9e25hbWU6XCJFcGlwaGFueVwiLGVwaXBoYW55OnQsdmVyc2lvbjpuKC8oPzplcGlwaGFueSlbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKX06L3B1ZmZpbi9pLnRlc3QoZSk/cz17bmFtZTpcIlB1ZmZpblwiLHB1ZmZpbjp0LHZlcnNpb246bigvKD86cHVmZmluKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKT8pL2kpfTovc2xlaXBuaXIvaS50ZXN0KGUpP3M9e25hbWU6XCJTbGVpcG5pclwiLHNsZWlwbmlyOnQsdmVyc2lvbjpuKC8oPzpzbGVpcG5pcilbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKX06L2stbWVsZW9uL2kudGVzdChlKT9zPXtuYW1lOlwiSy1NZWxlb25cIixrTWVsZW9uOnQsdmVyc2lvbjpuKC8oPzprLW1lbGVvbilbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKX06bT8ocz17bmFtZTpcIldpbmRvd3MgUGhvbmVcIix3aW5kb3dzcGhvbmU6dH0sdj8ocy5tc2VkZ2U9dCxzLnZlcnNpb249dik6KHMubXNpZT10LHMudmVyc2lvbj1uKC9pZW1vYmlsZVxcLyhcXGQrKFxcLlxcZCspPykvaSkpKTovbXNpZXx0cmlkZW50L2kudGVzdChlKT9zPXtuYW1lOlwiSW50ZXJuZXQgRXhwbG9yZXJcIixtc2llOnQsdmVyc2lvbjpuKC8oPzptc2llIHxydjopKFxcZCsoXFwuXFxkKyk/KS9pKX06Yz9zPXtuYW1lOlwiQ2hyb21lXCIsY2hyb21lb3M6dCxjaHJvbWVCb29rOnQsY2hyb21lOnQsdmVyc2lvbjpuKC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTovY2hyb21lLis/IGVkZ2UvaS50ZXN0KGUpP3M9e25hbWU6XCJNaWNyb3NvZnQgRWRnZVwiLG1zZWRnZTp0LHZlcnNpb246dn06L3ZpdmFsZGkvaS50ZXN0KGUpP3M9e25hbWU6XCJWaXZhbGRpXCIsdml2YWxkaTp0LHZlcnNpb246bigvdml2YWxkaVxcLyhcXGQrKFxcLlxcZCspPykvaSl8fEN9OmQ/cz17bmFtZTpcIlNhaWxmaXNoXCIsc2FpbGZpc2g6dCx2ZXJzaW9uOm4oL3NhaWxmaXNoXFxzP2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTovc2VhbW9ua2V5XFwvL2kudGVzdChlKT9zPXtuYW1lOlwiU2VhTW9ua2V5XCIsc2VhbW9ua2V5OnQsdmVyc2lvbjpuKC9zZWFtb25rZXlcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTovZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MvaS50ZXN0KGUpPyhzPXtuYW1lOlwiRmlyZWZveFwiLGZpcmVmb3g6dCx2ZXJzaW9uOm4oLyg/OmZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zKVsgXFwvXShcXGQrKFxcLlxcZCspPykvaSl9LC9cXCgobW9iaWxlfHRhYmxldCk7W15cXCldKnJ2OltcXGRcXC5dK1xcKS9pLnRlc3QoZSkmJihzLmZpcmVmb3hvcz10KSk6aD9zPXtuYW1lOlwiQW1hem9uIFNpbGtcIixzaWxrOnQsdmVyc2lvbjpuKC9zaWxrXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06L3BoYW50b20vaS50ZXN0KGUpP3M9e25hbWU6XCJQaGFudG9tSlNcIixwaGFudG9tOnQsdmVyc2lvbjpuKC9waGFudG9tanNcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTovc2xpbWVyanMvaS50ZXN0KGUpP3M9e25hbWU6XCJTbGltZXJKU1wiLHNsaW1lcjp0LHZlcnNpb246bigvc2xpbWVyanNcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTovYmxhY2tiZXJyeXxcXGJiYlxcZCsvaS50ZXN0KGUpfHwvcmltXFxzdGFibGV0L2kudGVzdChlKT9zPXtuYW1lOlwiQmxhY2tCZXJyeVwiLGJsYWNrYmVycnk6dCx2ZXJzaW9uOkN8fG4oL2JsYWNrYmVycnlbXFxkXStcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTpmPyhzPXtuYW1lOlwiV2ViT1NcIix3ZWJvczp0LHZlcnNpb246Q3x8bigvdyg/OmViKT9vc2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfSwvdG91Y2hwYWRcXC8vaS50ZXN0KGUpJiYocy50b3VjaHBhZD10KSk6L2JhZGEvaS50ZXN0KGUpP3M9e25hbWU6XCJCYWRhXCIsYmFkYTp0LHZlcnNpb246bigvZG9sZmluXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06cD9zPXtuYW1lOlwiVGl6ZW5cIix0aXplbjp0LHZlcnNpb246bigvKD86dGl6ZW5cXHM/KT9icm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKXx8Q306L3F1cHppbGxhL2kudGVzdChlKT9zPXtuYW1lOlwiUXVwWmlsbGFcIixxdXB6aWxsYTp0LHZlcnNpb246bigvKD86cXVwemlsbGEpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSl8fEN9Oi9jaHJvbWl1bS9pLnRlc3QoZSk/cz17bmFtZTpcIkNocm9taXVtXCIsY2hyb21pdW06dCx2ZXJzaW9uOm4oLyg/OmNocm9taXVtKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKT8pL2kpfHxDfTovY2hyb21lfGNyaW9zfGNybW8vaS50ZXN0KGUpP3M9e25hbWU6XCJDaHJvbWVcIixjaHJvbWU6dCx2ZXJzaW9uOm4oLyg/OmNocm9tZXxjcmlvc3xjcm1vKVxcLyhcXGQrKFxcLlxcZCspPykvaSl9Om8/cz17bmFtZTpcIkFuZHJvaWRcIix2ZXJzaW9uOkN9Oi9zYWZhcml8YXBwbGV3ZWJraXQvaS50ZXN0KGUpPyhzPXtuYW1lOlwiU2FmYXJpXCIsc2FmYXJpOnR9LEMmJihzLnZlcnNpb249QykpOmw/KHM9e25hbWU6XCJpcGhvbmVcIj09bD9cImlQaG9uZVwiOlwiaXBhZFwiPT1sP1wiaVBhZFwiOlwiaVBvZFwifSxDJiYocy52ZXJzaW9uPUMpKTpzPS9nb29nbGVib3QvaS50ZXN0KGUpP3tuYW1lOlwiR29vZ2xlYm90XCIsZ29vZ2xlYm90OnQsdmVyc2lvbjpuKC9nb29nbGVib3RcXC8oXFxkKyhcXC5cXGQrKSkvaSl8fEN9OntuYW1lOm4oL14oLiopXFwvKC4qKSAvKSx2ZXJzaW9uOnIoL14oLiopXFwvKC4qKSAvKX0sIXMubXNlZGdlJiYvKGFwcGxlKT93ZWJraXQvaS50ZXN0KGUpPygvKGFwcGxlKT93ZWJraXRcXC81MzdcXC4zNi9pLnRlc3QoZSk/KHMubmFtZT1zLm5hbWV8fFwiQmxpbmtcIixzLmJsaW5rPXQpOihzLm5hbWU9cy5uYW1lfHxcIldlYmtpdFwiLHMud2Via2l0PXQpLCFzLnZlcnNpb24mJkMmJihzLnZlcnNpb249QykpOiFzLm9wZXJhJiYvZ2Vja29cXC8vaS50ZXN0KGUpJiYocy5uYW1lPXMubmFtZXx8XCJHZWNrb1wiLHMuZ2Vja289dCxzLnZlcnNpb249cy52ZXJzaW9ufHxuKC9nZWNrb1xcLyhcXGQrKFxcLlxcZCspPykvaSkpLHMubXNlZGdlfHwhbyYmIXMuc2lsaz9sPyhzW2xdPXQscy5pb3M9dCk6VD9zLm1hYz10OkE/cy54Ym94PXQ6Zz9zLndpbmRvd3M9dDpfJiYocy5saW51eD10KTpzLmFuZHJvaWQ9dDt2YXIgeT1cIlwiO3Mud2luZG93c3Bob25lP3k9bigvd2luZG93cyBwaG9uZSAoPzpvcyk/XFxzPyhcXGQrKFxcLlxcZCspKikvaSk6bD8oeT1uKC9vcyAoXFxkKyhbX1xcc11cXGQrKSopIGxpa2UgbWFjIG9zIHgvaSkseT15LnJlcGxhY2UoL1tfXFxzXS9nLFwiLlwiKSk6bz95PW4oL2FuZHJvaWRbIFxcLy1dKFxcZCsoXFwuXFxkKykqKS9pKTpzLndlYm9zP3k9bigvKD86d2VifGhwdylvc1xcLyhcXGQrKFxcLlxcZCspKikvaSk6cy5ibGFja2JlcnJ5P3k9bigvcmltXFxzdGFibGV0XFxzb3NcXHMoXFxkKyhcXC5cXGQrKSopL2kpOnMuYmFkYT95PW4oL2JhZGFcXC8oXFxkKyhcXC5cXGQrKSopL2kpOnMudGl6ZW4mJih5PW4oL3RpemVuW1xcL1xcc10oXFxkKyhcXC5cXGQrKSopL2kpKSx5JiYocy5vc3ZlcnNpb249eSk7dmFyIFI9eS5zcGxpdChcIi5cIilbMF07cmV0dXJuIFN8fGF8fFwiaXBhZFwiPT1sfHxvJiYoMz09Unx8Uj49NCYmIUUpfHxzLnNpbGs/cy50YWJsZXQ9dDooRXx8XCJpcGhvbmVcIj09bHx8XCJpcG9kXCI9PWx8fG98fHV8fHMuYmxhY2tiZXJyeXx8cy53ZWJvc3x8cy5iYWRhKSYmKHMubW9iaWxlPXQpLHMubXNlZGdlfHxzLm1zaWUmJnMudmVyc2lvbj49MTB8fHMueWFuZGV4YnJvd3NlciYmcy52ZXJzaW9uPj0xNXx8cy52aXZhbGRpJiZzLnZlcnNpb24+PTF8fHMuY2hyb21lJiZzLnZlcnNpb24+PTIwfHxzLmZpcmVmb3gmJnMudmVyc2lvbj49MjB8fHMuc2FmYXJpJiZzLnZlcnNpb24+PTZ8fHMub3BlcmEmJnMudmVyc2lvbj49MTB8fHMuaW9zJiZzLm9zdmVyc2lvbiYmcy5vc3ZlcnNpb24uc3BsaXQoXCIuXCIpWzBdPj02fHxzLmJsYWNrYmVycnkmJnMudmVyc2lvbj49MTAuMT9zLmE9dDpzLm1zaWUmJnMudmVyc2lvbjwxMHx8cy5jaHJvbWUmJnMudmVyc2lvbjwyMHx8cy5maXJlZm94JiZzLnZlcnNpb248MjB8fHMuc2FmYXJpJiZzLnZlcnNpb248Nnx8cy5vcGVyYSYmcy52ZXJzaW9uPDEwfHxzLmlvcyYmcy5vc3ZlcnNpb24mJnMub3N2ZXJzaW9uLnNwbGl0KFwiLlwiKVswXTw2P3MuYz10OnMueD10LHN9dmFyIHQ9ITAsbj1lKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3I/bmF2aWdhdG9yLnVzZXJBZ2VudDpcIlwiKTtyZXR1cm4gbi50ZXN0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7Kyt0KXt2YXIgcj1lW3RdO2lmKFwic3RyaW5nXCI9PXR5cGVvZiByJiZyIGluIG4pcmV0dXJuITB9cmV0dXJuITF9LG4uX2RldGVjdD1lLG59KX0se31dLDQxOltmdW5jdGlvbihlLHQsbil7IWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIG4oZSx0KXtpZihcIm9iamVjdFwiIT09cyhlKSlyZXR1cm4gdDtmb3IodmFyIHIgaW4gdClcIm9iamVjdFwiPT09cyhlW3JdKSYmXCJvYmplY3RcIj09PXModFtyXSk/ZVtyXT1uKGVbcl0sdFtyXSk6ZVtyXT10W3JdO3JldHVybiBlfWZ1bmN0aW9uIHIoZSx0LHIpe3ZhciBpPXJbMF0sbz1yLmxlbmd0aDsoZXx8XCJvYmplY3RcIiE9PXMoaSkpJiYoaT17fSk7Zm9yKHZhciB1PTA7bz51OysrdSl7dmFyIGE9clt1XSxjPXMoYSk7aWYoXCJvYmplY3RcIj09PWMpZm9yKHZhciBoIGluIGEpe3ZhciBkPWU/bC5jbG9uZShhW2hdKTphW2hdO3Q/aVtoXT1uKGlbaF0sZCk6aVtoXT1kfX1yZXR1cm4gaX1mdW5jdGlvbiBzKGUpe3JldHVybnt9LnRvU3RyaW5nLmNhbGwoZSkuc2xpY2UoOCwtMSkudG9Mb3dlckNhc2UoKX12YXIgbD1mdW5jdGlvbihlKXtyZXR1cm4gcihlPT09ITAsITEsYXJndW1lbnRzKX0saT1cIm1lcmdlXCI7bC5yZWN1cnNpdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZT09PSEwLCEwLGFyZ3VtZW50cyl9LGwuY2xvbmU9ZnVuY3Rpb24oZSl7dmFyIHQsbixyPWUsaT1zKGUpO2lmKFwiYXJyYXlcIj09PWkpZm9yKHI9W10sbj1lLmxlbmd0aCx0PTA7bj50OysrdClyW3RdPWwuY2xvbmUoZVt0XSk7ZWxzZSBpZihcIm9iamVjdFwiPT09aSl7cj17fTtmb3IodCBpbiBlKXJbdF09bC5jbG9uZShlW3RdKX1yZXR1cm4gcn0sZT90LmV4cG9ydHM9bDp3aW5kb3dbaV09bH0oXCJvYmplY3RcIj09dHlwZW9mIHQmJnQmJlwib2JqZWN0XCI9PXR5cGVvZiB0LmV4cG9ydHMmJnQuZXhwb3J0cyl9LHt9XSw0MjpbZnVuY3Rpb24oZSx0LG4pe3QuZXhwb3J0cz17bmFtZTpcInJ0Y25pbmphXCIsdmVyc2lvbjpcIjAuNi43XCIsZGVzY3JpcHRpb246XCJXZWJSVEMgQVBJIHdyYXBwZXIgdG8gZGVhbCB3aXRoIGRpZmZlcmVudCBicm93c2Vyc1wiLGF1dGhvcjp7bmFtZTpcIknDsWFraSBCYXogQ2FzdGlsbG9cIixlbWFpbDpcImluYWtpLmJhekBlZmFjZTJmYWNlLmNvbVwiLHVybDpcImh0dHA6Ly9lZmFjZTJmYWNlLmNvbVwifSxjb250cmlidXRvcnM6W3tuYW1lOlwiSmVzw7pzIFDDqXJlelwiLGVtYWlsOlwiamVzdXMucGVyZXpAZWZhY2UyZmFjZS5jb21cIn1dLGxpY2Vuc2U6XCJNSVRcIixtYWluOlwibGliL3J0Y25pbmphLmpzXCIsaG9tZXBhZ2U6XCJodHRwczovL2dpdGh1Yi5jb20vZWZhY2UyZmFjZS9ydGNuaW5qYS5qc1wiLHJlcG9zaXRvcnk6e3R5cGU6XCJnaXRcIix1cmw6XCJnaXQraHR0cHM6Ly9naXRodWIuY29tL2VmYWNlMmZhY2UvcnRjbmluamEuanMuZ2l0XCJ9LGtleXdvcmRzOltcIndlYnJ0Y1wiXSxlbmdpbmVzOntub2RlOlwiPj0wLjEwLjMyXCJ9LGRlcGVuZGVuY2llczp7Ym93c2VyOlwiXjEuMi4wXCIsZGVidWc6XCJeMi4yLjBcIixtZXJnZTpcIl4xLjIuMFwifSxkZXZEZXBlbmRlbmNpZXM6e2Jyb3dzZXJpZnk6XCJeMTMuMC4xXCIsZ3VscDpcImdpdCtodHRwczovL2dpdGh1Yi5jb20vZ3VscGpzL2d1bHAuZ2l0IzQuMFwiLFwiZ3VscC1leHBlY3QtZmlsZVwiOlwiMC4wLjdcIixcImd1bHAtZmlsZWxvZ1wiOlwiXjAuNC4xXCIsXCJndWxwLWhlYWRlclwiOlwiXjEuOC4yXCIsXCJndWxwLWpzY3NcIjpcIl4zLjAuMlwiLFwiZ3VscC1qc2NzLXN0eWxpc2hcIjpcIl4xLjQuMFwiLFwiZ3VscC1qc2hpbnRcIjpcIl4yLjAuMVwiLFwiZ3VscC1yZW5hbWVcIjpcIl4xLjIuMlwiLFwiZ3VscC11Z2xpZnlcIjpcIl4xLjUuM1wiLFwianNoaW50LXN0eWxpc2hcIjpcIl4yLjIuMFwiLFwidmlueWwtc291cmNlLXN0cmVhbVwiOlwiXjEuMS4wXCJ9LHJlYWRtZTonIyBydGNuaW5qYS5qcyA8aW1nIHNyYz1cImh0dHA6Ly93d3cucHVibnViLmNvbS9ibG9nL3dwLWNvbnRlbnQvdXBsb2Fkcy8yMDE0LzAxL2dvb2dsZS13ZWJydGMtbG9nby5wbmdcIiBoZWlnaHQ9XCIzMFwiIHdpZHRoPVwiMzBcIj5cXG5cXG5XZWJSVEMgQVBJIHdyYXBwZXIgdG8gZGVhbCB3aXRoIGRpZmZlcmVudCBicm93c2VycyB0cmFuc3BhcmVudGx5LCBbZXZlbnR1YWxseV0oaHR0cDovL2lzd2VicnRjcmVhZHl5ZXQuY29tLykgdGhpcyBsaWJyYXJ5IHNob3VsZG5cXCd0IGJlIG5lZWRlZC4gV2Ugb25seSBoYXZlIHRvIHdhaXQgdW50aWwgVzNDIGdyb3VwIGluIGNoYXJnZSBbZmluaXNoZXMgdGhlIHNwZWNpZmljYXRpb25dKGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvd2cvcnRjd2ViLykgYW5kIHRoZSBkaWZmZXJlbnQgYnJvd3NlcnMgaW1wbGVtZW50IGl0IGNvcnJlY3RseSA6c3dlYXRfc21pbGU6LlxcblxcbjxpbWcgc3JjPVwiaHR0cDovL2ltYWdlczQuZmFucG9wLmNvbS9pbWFnZS9waG90b3MvMjE4MDAwMDAvYnJvd3Nlci1maWdodC1nb29nbGUtY2hyb21lLTIxODY1NDU0LTYwMC01MzEuanBnXCIgaGVpZ2h0PVwiMjUwXCIgd2lkdGg9XCIyNTBcIj5cXG5cXG5TdXBwb3J0ZWQgZW52aXJvbm1lbnRzOlxcbiogW0dvb2dsZSBDaHJvbWVdKGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vY2hyb21lL2Jyb3dzZXIvZGVza3RvcC9pbmRleC5odG1sKSAoZGVza3RvcCAmIG1vYmlsZSlcXG4qIFtHb29nbGUgQ2FuYXJ5XShodHRwczovL3d3dy5nb29nbGUuY29tL2Nocm9tZS9icm93c2VyL2NhbmFyeS5odG1sKSAoZGVza3RvcCAmIG1vYmlsZSlcXG4qIFtNb3ppbGxhIEZpcmVmb3hdKGh0dHBzOi8vd3d3Lm1vemlsbGEub3JnL2VuLUdCL2ZpcmVmb3gvbmV3KSAoZGVza3RvcCAmIG1vYmlsZSlcXG4qIFtGaXJlZm94IE5pZ3RobHldKGh0dHBzOi8vbmlnaHRseS5tb3ppbGxhLm9yZy8pIChkZXNrdG9wICYgbW9iaWxlKVxcbiogW09wZXJhXShodHRwOi8vd3d3Lm9wZXJhLmNvbS8pXFxuKiBbVml2YWxkaV0oaHR0cHM6Ly92aXZhbGRpLmNvbS8pXFxuKiBbQ3Jvc3NXYWxrXShodHRwczovL2Nyb3Nzd2Fsay1wcm9qZWN0Lm9yZy8pXFxuKiBbQ29yZG92YV0oaHR0cDovL2NvcmRvdmEuYXBhY2hlLm9yZy8pOiBpT1Mgc3VwcG9ydCwgeW91IG9ubHkgaGF2ZSB0byB1c2Ugb3VyIHBsdWdpbiBbZm9sbG93aW5nIHRoZXNlIHN0ZXBzXShodHRwczovL2dpdGh1Yi5jb20vZWZhY2UyZmFjZS9jb3Jkb3ZhLXBsdWdpbi1pb3NydGMjdXNhZ2UpLlxcbiogW05XLmpzXShodHRwczovL2dpdGh1Yi5jb20vbndqcy9udy5qcy8pXFxuKiBbRWxlY3Ryb25dKGh0dHBzOi8vZ2l0aHViLmNvbS9hdG9tL2VsZWN0cm9uKVxcblxcblxcbiMjIEluc3RhbGxhdGlvblxcblxcbiMjIyAqKm5wbSoqOlxcblxcbmBgYGJhc2hcXG4kIG5wbSBpbnN0YWxsIHJ0Y25pbmphXFxuYGBgXFxuXFxuYW5kIHRoZW46XFxuXFxuYGBgamF2YXNjcmlwdFxcbnZhciBydGNuaW5qYSA9IHJlcXVpcmUoXFwncnRjbmluamFcXCcpO1xcbmBgYFxcblxcbiMjIyAqKmJvd2VyKio6XFxuXFxuYGBgYmFzaFxcbiQgYm93ZXIgaW5zdGFsbCBydGNuaW5qYVxcbmBgYFxcblxcblxcbiMjIEJyb3dzZXJpZmllZCBsaWJyYXJ5XFxuXFxuVGFrZSBhIGJyb3dzZXJpZmllZCB2ZXJzaW9uIG9mIHRoZSBsaWJyYXJ5IGZyb20gdGhlIGBkaXN0L2AgZm9sZGVyOlxcblxcbiogYGRpc3QvcnRjbmluamEuanNgOiBUaGUgdW5jb21wcmVzc2VkIHZlcnNpb24uXFxuKiBgZGlzdC9ydGNuaW5qYS5taW4uanNgOiBUaGUgY29tcHJlc3NlZCBwcm9kdWN0aW9uLXJlYWR5IHZlcnNpb24uXFxuXFxuVGhleSBleHBvc2UgdGhlIGdsb2JhbCBgd2luZG93LnJ0Y25pbmphYCBtb2R1bGUuXFxuXFxuXFxuIyMgVXNhZ2VcXG5cXG5JbiB0aGUgW2V4YW1wbGVzXSguL2V4YW1wbGVzLykgZm9sZGVyIHdlIHByb3ZpZGUgYSBjb21wbGV0ZSBvbmUuXFxuXFxuYGBgamF2YXNjcmlwdFxcbi8vIE11c3QgZmlyc3QgY2FsbCBpdC5cXG5ydGNuaW5qYSgpO1xcblxcbi8vIFRoZW4gY2hlY2suXFxuaWYgKHJ0Y25pbmphLmhhc1dlYlJUQygpKSB7XFxuICAgIC8vIERvIHNvbWV0aGluZy5cXG59XFxuZWxzZSB7XFxuICAgIC8vIERvIHNvbWV0aGluZy5cXG59XFxuYGBgXFxuXFxuXFxuIyMgRG9jdW1lbnRhdGlvblxcblxcbllvdSBjYW4gcmVhZCB0aGUgZnVsbCBbQVBJIGRvY3VtZW50YXRpb25dKGRvY3MvaW5kZXgubWQpIGluIHRoZSBkb2NzIGZvbGRlci5cXG5cXG5cXG4jIyBJc3N1ZXNcXG5cXG5odHRwczovL2dpdGh1Yi5jb20vZWZhY2UyZmFjZS9ydGNuaW5qYS5qcy9pc3N1ZXNcXG5cXG5cXG4jIyBEZXZlbG9wZXIgZ3VpZGVcXG5cXG4qIENyZWF0ZSBhIGJyYW5jaCB3aXRoIGEgbmFtZSBpbmNsdWRpbmcgeW91ciB1c2VyIGFuZCBhIG1lYW5pbmdmdWwgd29yZCBhYm91dCB0aGUgZml4L2ZlYXR1cmUgeW91XFwncmUgZ29pbmcgdG8gaW1wbGVtZW50LCBpZTogXCJqZXN1c3BydWJpby9maXhzdHVmZlwiXFxuKiBVc2UgW0dpdEh1YiBwdWxsIHJlcXVlc3RzXShodHRwczovL2hlbHAuZ2l0aHViLmNvbS9hcnRpY2xlcy91c2luZy1wdWxsLXJlcXVlc3RzKS5cXG4qIENvbnZlbnRpb25zOlxcbiAqIFdlIHVzZSBbSlNIaW50XShodHRwOi8vanNoaW50LmNvbS8pIGFuZCBbQ3JvY2tmb3JkXFwncyBTdHlsZWd1aWRlXShodHRwOi8vamF2YXNjcmlwdC5jcm9ja2ZvcmQuY29tL2NvZGUuaHRtbCkuXFxuICogUGxlYXNlIHJ1biBgZ3J1bnQgbGludGAgdG8gYmUgc3VyZSB5b3VyIGNvZGUgZml0cyB3aXRoIHRoZW0uXFxuXFxuXFxuIyMjIERlYnVnZ2luZ1xcblxcblRoZSBsaWJyYXJ5IGluY2x1ZGVzIHRoZSBOb2RlIFtkZWJ1Z10oaHR0cHM6Ly9naXRodWIuY29tL3Zpc2lvbm1lZGlhL2RlYnVnKSBtb2R1bGUuIEluIG9yZGVyIHRvIGVuYWJsZSBkZWJ1Z2dpbmc6XFxuXFxuSW4gTm9kZSBzZXQgdGhlIGBERUJVRz1ydGNuaW5qYSpgIGVudmlyb25tZW50IHZhcmlhYmxlIGJlZm9yZSBydW5uaW5nIHRoZSBhcHBsaWNhdGlvbiwgb3Igc2V0IGl0IGF0IHRoZSB0b3Agb2YgdGhlIHNjcmlwdDpcXG5cXG5gYGBqYXZhc2NyaXB0XFxucHJvY2Vzcy5lbnYuREVCVUcgPSBcXCdydGNuaW5qYSpcXCc7XFxuYGBgXFxuXFxuSW4gdGhlIGJyb3dzZXIgcnVuIGBydGNuaW5qYS5kZWJ1Zy5lbmFibGUoXFwncnRjbmluamEqXFwnKTtgIGFuZCByZWxvYWQgdGhlIHBhZ2UuIE5vdGUgdGhhdCB0aGUgZGVidWdnaW5nIHNldHRpbmdzIGFyZSBzdG9yZWQgaW50byB0aGUgYnJvd3NlciBMb2NhbFN0b3JhZ2UuIFRvIGRpc2FibGUgaXQgcnVuIGBydGNuaW5qYS5kZWJ1Zy5kaXNhYmxlKFxcJ3J0Y25pbmphKlxcJyk7YC5cXG5cXG5cXG4jIyBDb3B5cmlnaHQgJiBMaWNlbnNlXFxuXFxuKiBlRmFjZTJGYWNlIEluYy5cXG4qIFtNSVRdKC4vTElDRU5TRSlcXG4nLHJlYWRtZUZpbGVuYW1lOlwiUkVBRE1FLm1kXCIsZ2l0SGVhZDpcImQzNmIwMmQwNTAzY2ExNTI3NzE2OTI5MzVhNDA5NjEzMGYyOGRjNWRcIixidWdzOnt1cmw6XCJodHRwczovL2dpdGh1Yi5jb20vZWZhY2UyZmFjZS9ydGNuaW5qYS5qcy9pc3N1ZXNcIn0sX2lkOlwicnRjbmluamFAMC42LjdcIixzY3JpcHRzOnt9LF9zaGFzdW06XCJmN2M4ODU1ZjJjMGU0MWFlMDhjNjM4Mzc1YmFkMWRjOTc3MzY5ZWMyXCIsX2Zyb206XCJydGNuaW5qYUA+PTAuNi43IDwwLjcuMFwifX0se31dLDQzOltmdW5jdGlvbihlLHQsbil7dmFyIHI9dC5leHBvcnRzPXt2Olt7bmFtZTpcInZlcnNpb25cIixyZWc6L14oXFxkKikkL31dLG86W3tuYW1lOlwib3JpZ2luXCIscmVnOi9eKFxcUyopIChcXGQqKSAoXFxkKikgKFxcUyopIElQKFxcZCkgKFxcUyopLyxuYW1lczpbXCJ1c2VybmFtZVwiLFwic2Vzc2lvbklkXCIsXCJzZXNzaW9uVmVyc2lvblwiLFwibmV0VHlwZVwiLFwiaXBWZXJcIixcImFkZHJlc3NcIl0sZm9ybWF0OlwiJXMgJXMgJWQgJXMgSVAlZCAlc1wifV0sczpbe25hbWU6XCJuYW1lXCJ9XSxpOlt7bmFtZTpcImRlc2NyaXB0aW9uXCJ9XSx1Olt7bmFtZTpcInVyaVwifV0sZTpbe25hbWU6XCJlbWFpbFwifV0scDpbe25hbWU6XCJwaG9uZVwifV0sejpbe25hbWU6XCJ0aW1lem9uZXNcIn1dLHI6W3tuYW1lOlwicmVwZWF0c1wifV0sdDpbe25hbWU6XCJ0aW1pbmdcIixyZWc6L14oXFxkKikgKFxcZCopLyxuYW1lczpbXCJzdGFydFwiLFwic3RvcFwiXSxmb3JtYXQ6XCIlZCAlZFwifV0sYzpbe25hbWU6XCJjb25uZWN0aW9uXCIscmVnOi9eSU4gSVAoXFxkKSAoXFxTKikvLG5hbWVzOltcInZlcnNpb25cIixcImlwXCJdLGZvcm1hdDpcIklOIElQJWQgJXNcIn1dLGI6W3twdXNoOlwiYmFuZHdpZHRoXCIscmVnOi9eKFRJQVN8QVN8Q1R8UlJ8UlMpOihcXGQqKS8sbmFtZXM6W1widHlwZVwiLFwibGltaXRcIl0sZm9ybWF0OlwiJXM6JXNcIn1dLG06W3tyZWc6L14oXFx3KikgKFxcZCopIChbXFx3XFwvXSopKD86ICguKikpPy8sbmFtZXM6W1widHlwZVwiLFwicG9ydFwiLFwicHJvdG9jb2xcIixcInBheWxvYWRzXCJdLGZvcm1hdDpcIiVzICVkICVzICVzXCJ9XSxhOlt7cHVzaDpcInJ0cFwiLHJlZzovXnJ0cG1hcDooXFxkKikgKFtcXHdcXC1cXC5dKikoPzpcXHMqXFwvKFxcZCopKD86XFxzKlxcLyhcXFMqKSk/KT8vLG5hbWVzOltcInBheWxvYWRcIixcImNvZGVjXCIsXCJyYXRlXCIsXCJlbmNvZGluZ1wiXSxmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZW5jb2Rpbmc/XCJydHBtYXA6JWQgJXMvJXMvJXNcIjplLnJhdGU/XCJydHBtYXA6JWQgJXMvJXNcIjpcInJ0cG1hcDolZCAlc1wifX0se3B1c2g6XCJmbXRwXCIscmVnOi9eZm10cDooXFxkKikgKFtcXFN8IF0qKS8sbmFtZXM6W1wicGF5bG9hZFwiLFwiY29uZmlnXCJdLGZvcm1hdDpcImZtdHA6JWQgJXNcIn0se25hbWU6XCJjb250cm9sXCIscmVnOi9eY29udHJvbDooLiopLyxmb3JtYXQ6XCJjb250cm9sOiVzXCJ9LHtuYW1lOlwicnRjcFwiLHJlZzovXnJ0Y3A6KFxcZCopKD86IChcXFMqKSBJUChcXGQpIChcXFMqKSk/LyxuYW1lczpbXCJwb3J0XCIsXCJuZXRUeXBlXCIsXCJpcFZlclwiLFwiYWRkcmVzc1wiXSxmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUuYWRkcmVzcz9cInJ0Y3A6JWQgJXMgSVAlZCAlc1wiOlwicnRjcDolZFwifX0se3B1c2g6XCJydGNwRmJUcnJJbnRcIixyZWc6L15ydGNwLWZiOihcXCp8XFxkKikgdHJyLWludCAoXFxkKikvLG5hbWVzOltcInBheWxvYWRcIixcInZhbHVlXCJdLGZvcm1hdDpcInJ0Y3AtZmI6JWQgdHJyLWludCAlZFwifSx7cHVzaDpcInJ0Y3BGYlwiLHJlZzovXnJ0Y3AtZmI6KFxcKnxcXGQqKSAoW1xcdy1fXSopKD86IChbXFx3LV9dKikpPy8sbmFtZXM6W1wicGF5bG9hZFwiLFwidHlwZVwiLFwic3VidHlwZVwiXSxmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUuc3VidHlwZT9cInJ0Y3AtZmI6JXMgJXMgJXNcIjpcInJ0Y3AtZmI6JXMgJXNcIn19LHtwdXNoOlwiZXh0XCIscmVnOi9eZXh0bWFwOihbXFx3X1xcL10qKSAoXFxTKikoPzogKFxcUyopKT8vLG5hbWVzOltcInZhbHVlXCIsXCJ1cmlcIixcImNvbmZpZ1wiXSxmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUuY29uZmlnP1wiZXh0bWFwOiVzICVzICVzXCI6XCJleHRtYXA6JXMgJXNcIn19LHtwdXNoOlwiY3J5cHRvXCIscmVnOi9eY3J5cHRvOihcXGQqKSAoW1xcd19dKikgKFxcUyopKD86IChcXFMqKSk/LyxuYW1lczpbXCJpZFwiLFwic3VpdGVcIixcImNvbmZpZ1wiLFwic2Vzc2lvbkNvbmZpZ1wiXSxmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUuc2Vzc2lvbkNvbmZpZz9cImNyeXB0bzolZCAlcyAlcyAlc1wiOlwiY3J5cHRvOiVkICVzICVzXCJ9fSx7bmFtZTpcInNldHVwXCIscmVnOi9ec2V0dXA6KFxcdyopLyxmb3JtYXQ6XCJzZXR1cDolc1wifSx7bmFtZTpcIm1pZFwiLHJlZzovXm1pZDooW15cXHNdKikvLGZvcm1hdDpcIm1pZDolc1wifSx7bmFtZTpcIm1zaWRcIixyZWc6L15tc2lkOiguKikvLGZvcm1hdDpcIm1zaWQ6JXNcIn0se25hbWU6XCJwdGltZVwiLHJlZzovXnB0aW1lOihcXGQqKS8sZm9ybWF0OlwicHRpbWU6JWRcIn0se25hbWU6XCJtYXhwdGltZVwiLHJlZzovXm1heHB0aW1lOihcXGQqKS8sZm9ybWF0OlwibWF4cHRpbWU6JWRcIn0se25hbWU6XCJkaXJlY3Rpb25cIixyZWc6L14oc2VuZHJlY3Z8cmVjdm9ubHl8c2VuZG9ubHl8aW5hY3RpdmUpL30se25hbWU6XCJpY2VsaXRlXCIscmVnOi9eKGljZS1saXRlKS99LHtuYW1lOlwiaWNlVWZyYWdcIixyZWc6L15pY2UtdWZyYWc6KFxcUyopLyxmb3JtYXQ6XCJpY2UtdWZyYWc6JXNcIn0se25hbWU6XCJpY2VQd2RcIixyZWc6L15pY2UtcHdkOihcXFMqKS8sZm9ybWF0OlwiaWNlLXB3ZDolc1wifSx7bmFtZTpcImZpbmdlcnByaW50XCIscmVnOi9eZmluZ2VycHJpbnQ6KFxcUyopIChcXFMqKS8sbmFtZXM6W1widHlwZVwiLFwiaGFzaFwiXSxmb3JtYXQ6XCJmaW5nZXJwcmludDolcyAlc1wifSx7cHVzaDpcImNhbmRpZGF0ZXNcIixyZWc6L15jYW5kaWRhdGU6KFxcUyopIChcXGQqKSAoXFxTKikgKFxcZCopIChcXFMqKSAoXFxkKikgdHlwIChcXFMqKSg/OiByYWRkciAoXFxTKikgcnBvcnQgKFxcZCopKT8oPzogdGNwdHlwZSAoXFxTKikpPyg/OiBnZW5lcmF0aW9uIChcXGQqKSk/LyxuYW1lczpbXCJmb3VuZGF0aW9uXCIsXCJjb21wb25lbnRcIixcInRyYW5zcG9ydFwiLFwicHJpb3JpdHlcIixcImlwXCIsXCJwb3J0XCIsXCJ0eXBlXCIsXCJyYWRkclwiLFwicnBvcnRcIixcInRjcHR5cGVcIixcImdlbmVyYXRpb25cIl0sZm9ybWF0OmZ1bmN0aW9uKGUpe3ZhciB0PVwiY2FuZGlkYXRlOiVzICVkICVzICVkICVzICVkIHR5cCAlc1wiO3JldHVybiB0Kz1udWxsIT1lLnJhZGRyP1wiIHJhZGRyICVzIHJwb3J0ICVkXCI6XCIldiV2XCIsdCs9bnVsbCE9ZS50Y3B0eXBlP1wiIHRjcHR5cGUgJXNcIjpcIiV2XCIsbnVsbCE9ZS5nZW5lcmF0aW9uJiYodCs9XCIgZ2VuZXJhdGlvbiAlZFwiKSx0fX0se25hbWU6XCJlbmRPZkNhbmRpZGF0ZXNcIixyZWc6L14oZW5kLW9mLWNhbmRpZGF0ZXMpL30se25hbWU6XCJyZW1vdGVDYW5kaWRhdGVzXCIscmVnOi9ecmVtb3RlLWNhbmRpZGF0ZXM6KC4qKS8sZm9ybWF0OlwicmVtb3RlLWNhbmRpZGF0ZXM6JXNcIn0se25hbWU6XCJpY2VPcHRpb25zXCIscmVnOi9eaWNlLW9wdGlvbnM6KFxcUyopLyxmb3JtYXQ6XCJpY2Utb3B0aW9uczolc1wifSx7cHVzaDpcInNzcmNzXCIscmVnOi9ec3NyYzooXFxkKikgKFtcXHdfXSopOiguKikvLG5hbWVzOltcImlkXCIsXCJhdHRyaWJ1dGVcIixcInZhbHVlXCJdLGZvcm1hdDpcInNzcmM6JWQgJXM6JXNcIn0se3B1c2g6XCJzc3JjR3JvdXBzXCIscmVnOi9ec3NyYy1ncm91cDooXFx3KikgKC4qKS8sbmFtZXM6W1wic2VtYW50aWNzXCIsXCJzc3Jjc1wiXSxmb3JtYXQ6XCJzc3JjLWdyb3VwOiVzICVzXCJ9LHtuYW1lOlwibXNpZFNlbWFudGljXCIscmVnOi9ebXNpZC1zZW1hbnRpYzpcXHM/KFxcdyopIChcXFMqKS8sbmFtZXM6W1wic2VtYW50aWNcIixcInRva2VuXCJdLGZvcm1hdDpcIm1zaWQtc2VtYW50aWM6ICVzICVzXCJ9LHtwdXNoOlwiZ3JvdXBzXCIscmVnOi9eZ3JvdXA6KFxcdyopICguKikvLG5hbWVzOltcInR5cGVcIixcIm1pZHNcIl0sZm9ybWF0OlwiZ3JvdXA6JXMgJXNcIn0se25hbWU6XCJydGNwTXV4XCIscmVnOi9eKHJ0Y3AtbXV4KS99LHtuYW1lOlwicnRjcFJzaXplXCIscmVnOi9eKHJ0Y3AtcnNpemUpL30se25hbWU6XCJzY3RwbWFwXCIscmVnOi9ec2N0cG1hcDooW1xcd19cXC9dKikgKFxcUyopKD86IChcXFMqKSk/LyxuYW1lczpbXCJzY3RwbWFwTnVtYmVyXCIsXCJhcHBcIixcIm1heE1lc3NhZ2VTaXplXCJdLGZvcm1hdDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5tYXhNZXNzYWdlU2l6ZT9cInNjdHBtYXA6JXMgJXMgJXNcIjpcInNjdHBtYXA6JXMgJXNcIn19LHtwdXNoOlwiaW52YWxpZFwiLG5hbWVzOltcInZhbHVlXCJdfV19O09iamVjdC5rZXlzKHIpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9cltlXTt0LmZvckVhY2goZnVuY3Rpb24oZSl7ZS5yZWd8fChlLnJlZz0vKC4qKS8pLGUuZm9ybWF0fHwoZS5mb3JtYXQ9XCIlc1wiKX0pfSl9LHt9XSw0NDpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUoXCIuL3BhcnNlclwiKSxzPWUoXCIuL3dyaXRlclwiKTtuLndyaXRlPXMsbi5wYXJzZT1yLnBhcnNlLG4ucGFyc2VGbXRwQ29uZmlnPXIucGFyc2VGbXRwQ29uZmlnLG4ucGFyc2VQYXlsb2Fkcz1yLnBhcnNlUGF5bG9hZHMsbi5wYXJzZVJlbW90ZUNhbmRpZGF0ZXM9ci5wYXJzZVJlbW90ZUNhbmRpZGF0ZXN9LHtcIi4vcGFyc2VyXCI6NDUsXCIuL3dyaXRlclwiOjQ2fV0sNDU6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj1mdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nKE51bWJlcihlKSk9PT1lP051bWJlcihlKTplfSxzPWZ1bmN0aW9uKGUsdCxuLHMpe2lmKHMmJiFuKXRbc109cihlWzFdKTtlbHNlIGZvcih2YXIgbD0wO2w8bi5sZW5ndGg7bCs9MSludWxsIT1lW2wrMV0mJih0W25bbF1dPXIoZVtsKzFdKSl9LGw9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUubmFtZSYmZS5uYW1lcztlLnB1c2gmJiF0W2UucHVzaF0/dFtlLnB1c2hdPVtdOnImJiF0W2UubmFtZV0mJih0W2UubmFtZV09e30pO3ZhciBsPWUucHVzaD97fTpyP3RbZS5uYW1lXTp0O3Mobi5tYXRjaChlLnJlZyksbCxlLm5hbWVzLGUubmFtZSksZS5wdXNoJiZ0W2UucHVzaF0ucHVzaChsKX0saT1lKFwiLi9ncmFtbWFyXCIpLG89UmVnRXhwLnByb3RvdHlwZS50ZXN0LmJpbmQoL14oW2Etel0pPSguKikvKTtuLnBhcnNlPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49W10scj10O3JldHVybiBlLnNwbGl0KC8oXFxyXFxufFxccnxcXG4pLykuZmlsdGVyKG8pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ZVswXSxzPWUuc2xpY2UoMik7XCJtXCI9PT10JiYobi5wdXNoKHtydHA6W10sZm10cDpbXX0pLHI9bltuLmxlbmd0aC0xXSk7Zm9yKHZhciBvPTA7bzwoaVt0XXx8W10pLmxlbmd0aDtvKz0xKXt2YXIgdT1pW3RdW29dO2lmKHUucmVnLnRlc3QocykpcmV0dXJuIGwodSxyLHMpfX0pLHQubWVkaWE9bix0fTt2YXIgdT1mdW5jdGlvbihlLHQpe3ZhciBuPXQuc3BsaXQoLz0oLispLywyKTtyZXR1cm4gMj09PW4ubGVuZ3RoJiYoZVtuWzBdXT1yKG5bMV0pKSxlfTtuLnBhcnNlRm10cENvbmZpZz1mdW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdCgvXFw7XFxzPy8pLnJlZHVjZSh1LHt9KX0sbi5wYXJzZVBheWxvYWRzPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KFwiIFwiKS5tYXAoTnVtYmVyKX0sbi5wYXJzZVJlbW90ZUNhbmRpZGF0ZXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49ZS5zcGxpdChcIiBcIikubWFwKHIpLHM9MDtzPG4ubGVuZ3RoO3MrPTMpdC5wdXNoKHtjb21wb25lbnQ6bltzXSxpcDpuW3MrMV0scG9ydDpuW3MrMl19KTtyZXR1cm4gdH19LHtcIi4vZ3JhbW1hclwiOjQzfV0sNDY6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj1lKFwiLi9ncmFtbWFyXCIpLHM9LyVbc2R2JV0vZyxsPWZ1bmN0aW9uKGUpe3ZhciB0PTEsbj1hcmd1bWVudHMscj1uLmxlbmd0aDtyZXR1cm4gZS5yZXBsYWNlKHMsZnVuY3Rpb24oZSl7aWYodD49cilyZXR1cm4gZTt2YXIgcz1uW3RdO3N3aXRjaCh0Kz0xLGUpe2Nhc2VcIiUlXCI6cmV0dXJuXCIlXCI7Y2FzZVwiJXNcIjpyZXR1cm4gU3RyaW5nKHMpO2Nhc2VcIiVkXCI6cmV0dXJuIE51bWJlcihzKTtjYXNlXCIldlwiOnJldHVyblwiXCJ9fSl9LGk9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuZm9ybWF0IGluc3RhbmNlb2YgRnVuY3Rpb24/dC5mb3JtYXQodC5wdXNoP246blt0Lm5hbWVdKTp0LmZvcm1hdCxzPVtlK1wiPVwiK3JdO2lmKHQubmFtZXMpZm9yKHZhciBpPTA7aTx0Lm5hbWVzLmxlbmd0aDtpKz0xKXt2YXIgbz10Lm5hbWVzW2ldO3QubmFtZT9zLnB1c2goblt0Lm5hbWVdW29dKTpzLnB1c2goblt0Lm5hbWVzW2ldXSl9ZWxzZSBzLnB1c2goblt0Lm5hbWVdKTtyZXR1cm4gbC5hcHBseShudWxsLHMpfSxvPVtcInZcIixcIm9cIixcInNcIixcImlcIixcInVcIixcImVcIixcInBcIixcImNcIixcImJcIixcInRcIixcInJcIixcInpcIixcImFcIl0sdT1bXCJpXCIsXCJjXCIsXCJiXCIsXCJhXCJdO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3Q9dHx8e30sbnVsbD09ZS52ZXJzaW9uJiYoZS52ZXJzaW9uPTApLG51bGw9PWUubmFtZSYmKGUubmFtZT1cIiBcIiksZS5tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uKGUpe251bGw9PWUucGF5bG9hZHMmJihlLnBheWxvYWRzPVwiXCIpfSk7dmFyIG49dC5vdXRlck9yZGVyfHxvLHM9dC5pbm5lck9yZGVyfHx1LGw9W107cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbih0KXtyW3RdLmZvckVhY2goZnVuY3Rpb24obil7bi5uYW1lIGluIGUmJm51bGwhPWVbbi5uYW1lXT9sLnB1c2goaSh0LG4sZSkpOm4ucHVzaCBpbiBlJiZudWxsIT1lW24ucHVzaF0mJmVbbi5wdXNoXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2wucHVzaChpKHQsbixlKSl9KX0pfSksZS5tZWRpYS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2wucHVzaChpKFwibVwiLHIubVswXSxlKSkscy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JbdF0uZm9yRWFjaChmdW5jdGlvbihuKXtuLm5hbWUgaW4gZSYmbnVsbCE9ZVtuLm5hbWVdP2wucHVzaChpKHQsbixlKSk6bi5wdXNoIGluIGUmJm51bGwhPWVbbi5wdXNoXSYmZVtuLnB1c2hdLmZvckVhY2goZnVuY3Rpb24oZSl7bC5wdXNoKGkodCxuLGUpKX0pfSl9KX0pLGwuam9pbihcIlxcclxcblwiKStcIlxcclxcblwifX0se1wiLi9ncmFtbWFyXCI6NDN9XSw0NzpbZnVuY3Rpb24oZSx0LG4pe3QuZXhwb3J0cz17bmFtZTpcImpzc2lwXCIsdGl0bGU6XCJKc1NJUFwiLGRlc2NyaXB0aW9uOlwidGhlIEphdmFzY3JpcHQgU0lQIGxpYnJhcnlcIix2ZXJzaW9uOlwiMi4wLjFcIixob21lcGFnZTpcImh0dHA6Ly9qc3NpcC5uZXRcIixhdXRob3I6XCJKb3PDqSBMdWlzIE1pbGzDoW4gPGptaWxsYW5AYWxpYXgubmV0PiAoaHR0cHM6Ly9naXRodWIuY29tL2ptaWxsYW4pXCIsY29udHJpYnV0b3JzOltcIknDsWFraSBCYXogQ2FzdGlsbG8gPGliY0BhbGlheC5uZXQ+IChodHRwczovL2dpdGh1Yi5jb20vaWJjKVwiLFwiU2HDumwgSWJhcnJhIENvcnJldGfDqSA8c2FnaHVsQGdtYWlsLmNvbT4gKGh0dHBzOi8vZ2l0aHViLmNvbS9zYWdodWwpXCJdLG1haW46XCJsaWIvSnNTSVAuanNcIixrZXl3b3JkczpbXCJzaXBcIixcIndlYnNvY2tldFwiLFwid2VicnRjXCIsXCJub2RlXCIsXCJicm93c2VyXCIsXCJsaWJyYXJ5XCJdLGxpY2Vuc2U6XCJNSVRcIixyZXBvc2l0b3J5Ont0eXBlOlwiZ2l0XCIsdXJsOlwiaHR0cHM6Ly9naXRodWIuY29tL3ZlcnNhdGljYS9Kc1NJUC5naXRcIn0sYnVnczp7dXJsOlwiaHR0cHM6Ly9naXRodWIuY29tL3ZlcnNhdGljYS9Kc1NJUC9pc3N1ZXNcIn0sZGVwZW5kZW5jaWVzOntkZWJ1ZzpcIl4yLjIuMFwiLHJ0Y25pbmphOlwiXjAuNi43XCIsXCJzZHAtdHJhbnNmb3JtXCI6XCJeMS42LjJcIn0sZGV2RGVwZW5kZW5jaWVzOnticm93c2VyaWZ5OlwiXjEzLjAuMVwiLGd1bHA6XCJnaXQraHR0cHM6Ly9naXRodWIuY29tL2d1bHBqcy9ndWxwLmdpdCM0LjBcIixcImd1bHAtZXhwZWN0LWZpbGVcIjpcIjAuMC43XCIsXCJndWxwLWhlYWRlclwiOlwiXjEuOC4yXCIsXCJndWxwLWpzaGludFwiOlwiXjIuMC4xXCIsXCJndWxwLW5vZGV1bml0LXJ1bm5lclwiOlwiXjAuMi4yXCIsXCJndWxwLXJlbmFtZVwiOlwiXjEuMi4yXCIsXCJndWxwLXVnbGlmeVwiOlwiXjEuNS4zXCIsXCJndWxwLXV0aWxcIjpcIl4zLjAuN1wiLGpzaGludDpcIl4yLjkuMlwiLFwianNoaW50LXN0eWxpc2hcIjpcIl4yLjIuMFwiLHBlZ2pzOlwiMC43LjBcIixcInZpbnlsLWJ1ZmZlclwiOlwiXjEuMC4wXCIsXCJ2aW55bC1zb3VyY2Utc3RyZWFtXCI6XCJeMS4xLjBcIn0sc2NyaXB0czp7dGVzdDpcImd1bHAgdGVzdFwifX19LHt9XX0se30sWzddKSg3KX0pOyIsInZhciBfdGVtcGxhdGUgPSByZXF1aXJlKCdsb2Rhc2gvc3RyaW5nL3RlbXBsYXRlJyk7XG52YXIgX2ZvckVhY2ggPSByZXF1aXJlKCdsb2Rhc2gvY29sbGVjdGlvbi9mb3JFYWNoJyk7XG52YXIgX2Fzc2lnbiA9IHJlcXVpcmUoJ2xvZGFzaC9vYmplY3QvYXNzaWduJyk7XG52YXIgX21lcmdlID0gcmVxdWlyZSgnbG9kYXNoL29iamVjdC9tZXJnZScpO1xudmFyIF9pc0VxdWFsID0gcmVxdWlyZSgnbG9kYXNoL2xhbmcvaXNFcXVhbCcpO1xudmFyIF90cmltID0gcmVxdWlyZSgnbG9kYXNoL3N0cmluZy90cmltJyk7XG52YXIgX3Rocm90dGxlID0gcmVxdWlyZSgnbG9kYXNoL2Z1bmN0aW9uL3Rocm90dGxlJyk7XG52YXIgX2RlYm91bmNlID0gcmVxdWlyZSgnbG9kYXNoL2Z1bmN0aW9uL2RlYm91bmNlJyk7XG5cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuXHR2YXIgdGltZW91dDtcblx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcblx0XHR2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcblx0XHRcdHRpbWVvdXQgPSBudWxsO1xuXHRcdFx0aWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdFx0fTtcblx0XHR2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcblx0XHRjbGVhclRpbWVvdXQodGltZW91dCk7XG5cdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHRcdGlmIChjYWxsTm93KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHR9O1xufVxuXG5mdW5jdGlvbiBmaW5kUGFyZW50KGVsZW0sIHNlbGVjdG9yKSB7XG5cbiAgICB2YXIgZmlyc3RDaGFyID0gc2VsZWN0b3IuY2hhckF0KDApO1xuXG4gICAgLy8gR2V0IGNsb3Nlc3QgbWF0Y2hcbiAgICBmb3IgKCA7IGVsZW0gJiYgZWxlbSAhPT0gZG9jdW1lbnQ7IGVsZW0gPSBlbGVtLnBhcmVudE5vZGUgKSB7XG4gICAgICAgIGlmICggZmlyc3RDaGFyID09PSAnLicgKSB7XG4gICAgICAgICAgICBpZiAoIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCBzZWxlY3Rvci5zdWJzdHIoMSkgKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICggZmlyc3RDaGFyID09PSAnIycgKSB7XG4gICAgICAgICAgICBpZiAoIGVsZW0uaWQgPT09IHNlbGVjdG9yLnN1YnN0cigxKSApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICggZmlyc3RDaGFyID09PSAnWycgKSB7XG4gICAgICAgICAgICBpZiAoZWxlbS5oYXNBdHRyaWJ1dGUoIHNlbGVjdG9yLnN1YnN0cigxLCBzZWxlY3Rvci5sZW5ndGggLSAyKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKGVsZW0ubm9kZU5hbWUgPT09IHNlbGVjdG9yLnRvVXBwZXJDYXNlKCkpe1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuXG59XG5cbmZ1bmN0aW9uIHBvbGwoZm4sIGNhbGxiYWNrLCBlcnJiYWNrLCB0aW1lb3V0LCBpbnRlcnZhbCkge1xuICAgIHZhciBlbmRUaW1lID0gTnVtYmVyKG5ldyBEYXRlKCkpICsgKHRpbWVvdXQgfHwgMjAwMCk7XG4gICAgaW50ZXJ2YWwgPSBpbnRlcnZhbCB8fCAzMDA7XG5cbiAgICAoZnVuY3Rpb24gcCgpIHtcbiAgICAgICAgLy8gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsIHdlJ3JlIGRvbmUhIFxuICAgICAgICBpZihmbigpKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBjb25kaXRpb24gaXNuJ3QgbWV0IGJ1dCB0aGUgdGltZW91dCBoYXNuJ3QgZWxhcHNlZCwgZ28gYWdhaW5cbiAgICAgICAgZWxzZSBpZiAoTnVtYmVyKG5ldyBEYXRlKCkpIDwgZW5kVGltZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChwLCBpbnRlcnZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGlkbid0IG1hdGNoIGFuZCB0b28gbXVjaCB0aW1lLCByZWplY3QhXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXJyYmFjayhuZXcgRXJyb3IoJ3RpbWVkIG91dCBmb3IgJyArIGZuICsgJzogJyArIGFyZ3VtZW50cykpO1xuICAgICAgICB9XG4gICAgfSkoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdHRlbXBsYXRlOiBfdGVtcGxhdGUsXG5cdGZvckVhY2g6IF9mb3JFYWNoLFxuXHRhc3NpZ246IF9hc3NpZ24sXG5cdG1lcmdlOiBfbWVyZ2UsXG5cdGlzRXF1YWw6IF9pc0VxdWFsLFxuXHR0cmltOiBfdHJpbSxcblx0dGhyb3R0bGU6IF90aHJvdHRsZSxcblx0ZGVib3VuY2U6IGRlYm91bmNlLFxuICAgIHBvbGw6IHBvbGwsXG5cdGZpbmRQYXJlbnQ6IGZpbmRQYXJlbnRcbn07IiwidmFyIHdpZGdldCA9IHJlcXVpcmUoJy4vd2lkZ2V0LmpzJyk7XG52YXIgYXBpID0gcmVxdWlyZSgnLi9jb3JlLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gd2lkZ2V0Lm1vZHVsZTtcbiIsInZhciBkZWJ1ZyA9IHJlcXVpcmUoJy4vZGVidWcnKTtcbnZhciBjYWNoZSA9IHt9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0cG9zdDogcG9zdCxcblx0Z2V0OiBnZXQsXG5cdHB1dDogcHV0XG59O1xuXG5mdW5jdGlvbiBwb3N0KHVybCwgZGF0YSwgY2Ipe1xuXG5cdC8vIGRlYnVnLmxvZygncG9zdCByZXF1ZXN0OiAnLCB1cmwsIGRhdGEpO1xuXG5cdHZhciBkYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cblx0WG1sSHR0cFJlcXVlc3QoJ1BPU1QnLCB1cmwsIGRhdGEsIGZ1bmN0aW9uKGVyciwgcmVzKSB7XG5cdFx0ZGVidWcubG9nKCdwb3N0IHJlc3Bvc2U6ICcsIGVyciwgcmVzKTtcblxuXHRcdGlmKGVycikgcmV0dXJuIGNiKGVycik7XG5cblx0XHRjYihudWxsLCByZXMpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gZ2V0KHNlbGVjdG9yLCB1cmwsIGNiKXtcblxuXHRpZihzZWxlY3RvciAmJiBjYWNoZVtzZWxlY3Rvcl0pIHtcblx0XHRyZXR1cm4gY2IobnVsbCwgY2FjaGVbc2VsZWN0b3JdKTtcblx0fVxuXG5cdFhtbEh0dHBSZXF1ZXN0KCdHRVQnLCB1cmwsIG51bGwsIGZ1bmN0aW9uKGVyciwgcmVzKSB7XG5cdFx0aWYoZXJyKSByZXR1cm4gY2IoZXJyKTtcblxuXHRcdGlmKHNlbGVjdG9yKSBjYWNoZVtzZWxlY3Rvcl0gPSByZXM7XG5cdFx0Y2IobnVsbCwgcmVzKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHB1dCh1cmwsIGRhdGEsIGNiKXtcblxuXHQvLyBkZWJ1Zy5sb2coJ3Bvc3QgcmVxdWVzdDogJywgdXJsLCBkYXRhKTtcblxuXHQvLyB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuXG5cdFhtbEh0dHBSZXF1ZXN0KCdQVVQnLCB1cmwsIGRhdGEsIGZ1bmN0aW9uKGVyciwgcmVzKSB7XG5cdFx0ZGVidWcubG9nKCdwdXQgcmVzcG9zZTogJywgZXJyLCByZXMpO1xuXG5cdFx0aWYoZXJyKSByZXR1cm4gY2IoZXJyKTtcblxuXHRcdGNiKG51bGwsIHJlcyk7XG5cdH0pO1xufVxuXG4vKipcbiAqIFNlbmQgcmVxdWVzdCB0byB0aGUgc2VydmVyIHZpYSBYTUxIdHRwUmVxdWVzdFxuICovXG5mdW5jdGlvbiBYbWxIdHRwUmVxdWVzdChtZXRob2QsIHVybCwgZGF0YSwgY2FsbGJhY2spe1xuXHR2YXIgeGhyLCByZXNwb25zZSwgcmVxdWVzdFRpbWVyO1xuXG5cdHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHR4aHIub3BlbihtZXRob2QsIHVybCwgdHJ1ZSk7XG5cblx0cmVxdWVzdFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdHhoci5hYm9ydCgpO1xuXHR9LCA2MDAwMCk7XG5cdFxuXHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKHhoci5yZWFkeVN0YXRlPT00KXtcblx0XHRcdGNsZWFyVGltZW91dChyZXF1ZXN0VGltZXIpO1xuXHRcdFx0aWYoeGhyLnJlc3BvbnNlKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gbWV0aG9kID09PSAnUE9TVCcgPyBKU09OLnBhcnNlKHhoci5yZXNwb25zZSkgOiB4aHIucmVzcG9uc2U7XG5cdFx0XHRcdGlmKHJlc3BvbnNlLmVycm9yKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNhbGxiYWNrKHJlc3BvbnNlLmVycm9yKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0aWYobWV0aG9kID09PSAnUE9TVCcpIHtcblx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnKTtcblx0fVxuXG5cdGlmKGRhdGEpIHtcblx0XHR4aHIuc2VuZChkYXRhKTtcblx0fSBlbHNlIHtcblx0XHR4aHIuc2VuZCgpO1xuXHR9XG59XG4iLCJ2YXIgc3RvcmFnZSA9IGdsb2JhbC5sb2NhbFN0b3JhZ2U7XG52YXIgc2Vzc2lvbiA9IGdsb2JhbC5zZXNzaW9uU3RvcmFnZTtcbnZhciBwcmVmaXggPSAnc3djJztcbnZhciBkZWxpbWl0ZXIgPSAnLic7XG5cbi8vIEN1cnJlbnQgY2FjaGUgb2JqZWN0XG52YXIgY2FjaGUgPSB7XG5cdHNpZDogbnVsbCxcblx0ZXZlbnRUaW1lc3RhbXA6IDAsXG5cdG1zZ1RpbWVzdGFtcDogMCxcblx0ZW50aXR5OiBudWxsLFxuXHRjaGF0OiBudWxsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0Z2V0OiBnZXRJdGVtLFxuXHRzZXQ6IHNldEl0ZW0sXG5cdHJlbW92ZTogcmVtb3ZlSXRlbSxcblx0Z2V0U3RhdGU6IGdldFN0YXRlLFxuXHRzYXZlU3RhdGU6IHNhdmVTdGF0ZSxcblx0cmVtb3ZlU3RhdGU6IHJlbW92ZVN0YXRlXG59O1xuXG5mdW5jdGlvbiBnZXRJdGVtKGtleSwgbG9jYXRpb24pIHtcblx0aWYobG9jYXRpb24gPT09ICdzZXNzaW9uJykge1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHNlc3Npb24uZ2V0SXRlbShwcmVmaXgrZGVsaW1pdGVyK2tleSkpO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBKU09OLnBhcnNlKHN0b3JhZ2UuZ2V0SXRlbShwcmVmaXgrZGVsaW1pdGVyK2tleSkpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSwgbG9jYXRpb24pIHtcblx0aWYobG9jYXRpb24gPT09ICdzZXNzaW9uJykge1xuXHRcdHNlc3Npb24uc2V0SXRlbShwcmVmaXgrZGVsaW1pdGVyK2tleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcblx0fSBlbHNlIHtcblx0XHRzdG9yYWdlLnNldEl0ZW0ocHJlZml4K2RlbGltaXRlcitrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG5cdH1cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVJdGVtKGtleSwgbG9jYXRpb24pIHtcblx0aWYobG9jYXRpb24gPT09ICdzZXNzaW9uJykge1xuXHRcdHNlc3Npb24ucmVtb3ZlSXRlbShwcmVmaXgrZGVsaW1pdGVyK2tleSk7XG5cdH0gZWxzZSB7XG5cdFx0c3RvcmFnZS5yZW1vdmVJdGVtKHByZWZpeCtkZWxpbWl0ZXIra2V5KTtcblx0fVxufVxuXG4vKipcbiAqIEdldCBzYXZlZCBwcm9wZXJ0eSBmcm9tIGxvY2FsU3RvcmFnZSBvciBmcm9tIHNlc3Npb24gY2FjaGVcbiAqIEBwYXJhbSAge1N0cmluZ30ga2V5ICAgICAgLSBpdGVtIGtleSBpbiBzdG9yYWdlIG1lbW9yeVxuICogQHBhcmFtICB7W3R5cGVdfSBsb2NhdGlvbiAtIGZyb20gd2hlcmUgdG8gcmV0cmlldmUgaXRlbS4gXG4gKiBDb3VsZCBiZSBlaXRoZXIgXCJzdG9yYWdlXCIgLSBmcm9tIGxvY2FsU3RvcmFnZSwgb3IgXCJjYWNoZVwiIC0gZnJvbSBzZXNzaW9uIGNhY2hlXG4gKiBAcmV0dXJuIHtTdHJpbmd8T2JqZWN0fEZ1bmN0aW9ufSAgICAgICAgICAtIGl0ZW0gdmFsdWVcbiAqL1xuZnVuY3Rpb24gZ2V0U3RhdGUoa2V5LCBsb2NhdGlvbil7XG5cdGlmKCFsb2NhdGlvbikge1xuXHRcdHJldHVybiAoY2FjaGVba2V5XSAhPT0gdW5kZWZpbmVkICYmIGNhY2hlW2tleV0gIT09IG51bGwpID8gY2FjaGVba2V5XSA6IGdldEl0ZW0oa2V5KTtcblx0fSBlbHNlIGlmKGxvY2F0aW9uID09PSAnY2FjaGUnKSB7XG5cdFx0cmV0dXJuIGNhY2hlW2tleV07XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIGdldEl0ZW0oa2V5LCBsb2NhdGlvbik7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2F2ZVN0YXRlKGtleSwgdmFsdWUsIGxvY2F0aW9uKXtcblx0Y2FjaGVba2V5XSA9IHZhbHVlO1xuXHRpZihsb2NhdGlvbiAhPT0gJ2NhY2hlJykge1xuXHRcdHNldEl0ZW0oa2V5LCB2YWx1ZSwgbG9jYXRpb24pO1xuXHR9XG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3RhdGUoa2V5LCBsb2NhdGlvbikge1xuXHRkZWxldGUgY2FjaGVba2V5XTtcblx0cmVtb3ZlSXRlbShrZXkpO1xufVxuIiwidmFyIF8gPSB7fTtcbnZhciBlc2NhcGVNYXAgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiN4Mjc7J1xufTtcbnZhciBlc2NhcGVSZWdleHAgPSBuZXcgUmVnRXhwKCdbJyArIE9iamVjdC5rZXlzKGVzY2FwZU1hcCkuam9pbignJykgKyAnXScsICdnJyk7XG5fLmVzY2FwZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIGlmICghc3RyaW5nKSByZXR1cm4gJyc7XG4gICAgcmV0dXJuIFN0cmluZyhzdHJpbmcpLnJlcGxhY2UoZXNjYXBlUmVnZXhwLCBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgICByZXR1cm4gZXNjYXBlTWFwW21hdGNoXTtcbiAgICB9KTtcbn07XG5leHBvcnRzWydlbWFpbCddPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJycsIF9fZSA9IF8uZXNjYXBlLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcbmZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxud2l0aCAob2JqKSB7XG5cbiB2YXIgcHJlZml4ID0gZGVmYXVsdHMucHJlZml4OyA7XG5fX3AgKz0gJ1xcbjwhRE9DVFlQRSBodG1sIFBVQkxJQyBcIi0vL1czQy8vRFREIFhIVE1MIDEuMCBUcmFuc2l0aW9uYWwvL0VOXCIgXCJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS10cmFuc2l0aW9uYWwuZHRkXCI+XFxuPGh0bWwgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCI+XFxuICAgIDxoZWFkPlxcbiAgICAgICAgPG1ldGEgaHR0cC1lcXVpdj1cIkNvbnRlbnQtVHlwZVwiIGNvbnRlbnQ9XCJ0ZXh0L2h0bWw7IGNoYXJzZXQ9d2luZG93cy0xMjUxXCIgLz5cXG4gICAgICAgIDwhLS1baWYgIW1zb10+PCEtLT5cXG4gICAgICAgICAgICA8bWV0YSBodHRwLWVxdWl2PVwiWC1VQS1Db21wYXRpYmxlXCIgY29udGVudD1cIklFPWVkZ2VcIiAvPlxcbiAgICAgICAgPCEtLTwhW2VuZGlmXS0tPlxcbiAgICAgICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cXG4gICAgICAgIDx0aXRsZT48L3RpdGxlPlxcbiAgICAgICAgPCEtLVtpZiAoZ3RlIG1zbyA5KXwoSUUpXT5cXG4gICAgICAgIDxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5cXG4gICAgICAgICAgICB0YWJsZSB7Ym9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTt9XFxuICAgICAgICA8L3N0eWxlPlxcbiAgICAgICAgPCFbZW5kaWZdLS0+XFxuICAgICAgICA8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+XFxuICAgICAgICAgICAgLyogQmFzaWNzICovXFxuICAgICAgICAgICAgYm9keSB7XFxuICAgICAgICAgICAgTWFyZ2luOiAwO1xcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEwMCU7XFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHRhYmxlIHtcXG4gICAgICAgICAgICAgICAgYm9yZGVyLXNwYWNpbmc6IDA7XFxuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xcbiAgICAgICAgICAgICAgICBjb2xvcjogIzMzMzMzMztcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgdGQge1xcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBpbWcge1xcbiAgICAgICAgICAgICAgICBib3JkZXI6IDA7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC53cmFwcGVyIHtcXG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XFxuICAgICAgICAgICAgICAgIHRhYmxlLWxheW91dDogZml4ZWQ7XFxuICAgICAgICAgICAgICAgIC13ZWJraXQtdGV4dC1zaXplLWFkanVzdDogMTAwJTtcXG4gICAgICAgICAgICAgICAgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7XFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNGMUYxRjE7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC53ZWJraXQge1xcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDUwMHB4O1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAub3V0ZXIge1xcbiAgICAgICAgICAgIE1hcmdpbjogMCBhdXRvO1xcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XFxuICAgICAgICAgICAgICAgIHdpZHRoOiA5NSU7XFxuICAgICAgICAgICAgICAgIG1heC13aWR0aDogNTAwcHg7XFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHAge1xcbiAgICAgICAgICAgICAgICBNYXJnaW46IDA7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIGEge1xcbiAgICAgICAgICAgICAgICBjb2xvcjogI2VlNmE1NjtcXG4gICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC5oMSB7XFxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjFweDtcXG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgICAgICAgICAgICAgIE1hcmdpbi1ib3R0b206IDE4cHg7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC5oMiB7XFxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDtcXG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICAgICAgICAgICAgICAgIE1hcmdpbi1ib3R0b206IDEycHg7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICBcXG4gICAgICAgICAgICAvKiBPbmUgY29sdW1uIGxheW91dCAqL1xcbiAgICAgICAgICAgIC5vbmUtY29sdW1uIC5jb250ZW50cyB7XFxuICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XFxuICAgICAgICAgICAgICAgIGNvbG9yOiM1MDUwNTA7XFxuICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OkFyaWFsO1xcbiAgICAgICAgICAgICAgICBmb250LXNpemU6MTRweDtcXG4gICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6MTUwJTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgLm9uZS1jb2x1bW4gcCB7XFxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcXG4gICAgICAgICAgICAgICAgTWFyZ2luLWJvdHRvbTogMTBweDtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgLicgK1xuX19lKCBwcmVmaXggKSArXG4nLW1lc3NhZ2Uge1xcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcXG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTBweDtcXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI0ZGRkZGRjtcXG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkICNDQ0NDQ0M7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC4nICtcbl9fZSggcHJlZml4ICkgK1xuJy1tZXNzYWdlIGltZyB7XFxuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDUwMHB4O1xcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGF1dG87XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC4nICtcbl9fZSggcHJlZml4ICkgK1xuJy1tZXNzYWdlIHNwYW4ge1xcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcXG4gICAgICAgICAgICAgICAgY29sb3I6ICM5OTk5OTk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC4nICtcbl9fZSggcHJlZml4ICkgK1xuJy1hZ2VudC1tc2cgLicgK1xuX19lKCBwcmVmaXggKSArXG4nLW1lc3NhZ2UtZnJvbSB7XFxuICAgICAgICAgICAgICAgIGNvbG9yOiAjNTU1NTU1O1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAuJyArXG5fX2UoIHByZWZpeCApICtcbictdXNlci1tc2cgLicgK1xuX19lKCBwcmVmaXggKSArXG4nLW1lc3NhZ2UtZnJvbSB7XFxuICAgICAgICAgICAgICAgIGNvbG9yOiAjRjc1QjVEO1xcbiAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAuJyArXG5fX2UoIHByZWZpeCApICtcbictbWVzc2FnZSAuJyArXG5fX2UoIHByZWZpeCApICtcbictbWVzc2FnZS10aW1lIHtcXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgICAgICAgICAgICAgICBmbG9hdDogcmlnaHQ7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIC5jb3B5cmlnaHQge1xcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XFxuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcXG4gICAgICAgICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xcbiAgICAgICAgICAgICAgICBjb2xvcjogI0NDQ0NDQztcXG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgPC9zdHlsZT5cXG4gICAgPC9oZWFkPlxcbiAgICA8Ym9keT5cXG4gICAgICAgIDxjZW50ZXIgY2xhc3M9XCJ3cmFwcGVyXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cIndlYmtpdFwiPlxcbiAgICAgICAgICAgICAgICA8IS0tW2lmIChndGUgbXNvIDkpfChJRSldPlxcbiAgICAgICAgICAgICAgICA8dGFibGUgd2lkdGg9XCI1MDBcIiBhbGlnbj1cImNlbnRlclwiIGNlbGxwYWRkaW5nPVwiMFwiIGNlbGxzcGFjaW5nPVwiMFwiIGJvcmRlcj1cIjBcIj5cXG4gICAgICAgICAgICAgICAgPHRyPlxcbiAgICAgICAgICAgICAgICA8dGQ+XFxuICAgICAgICAgICAgICAgIDwhW2VuZGlmXS0tPlxcbiAgICAgICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJvdXRlclwiIGFsaWduPVwiY2VudGVyXCIgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgYm9yZGVyPVwiMFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPHRyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cIm9uZS1jb2x1bW5cIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRhYmxlIHdpZHRoPVwiMTAwJVwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImlubmVyIGNvbnRlbnRzXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgK1xuKChfX3QgPSAoIGNvbnRlbnQgKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cXG4gICAgICAgICAgICAgICAgICAgIDwvdHI+XFxuICAgICAgICAgICAgICAgIDwvdGFibGU+XFxuICAgICAgICAgICAgICAgIDwhLS1baWYgKGd0ZSBtc28gOSl8KElFKV0+XFxuICAgICAgICAgICAgICAgIDwvdGQ+XFxuICAgICAgICAgICAgICAgIDwvdHI+XFxuICAgICAgICAgICAgICAgIDwvdGFibGU+XFxuICAgICAgICAgICAgICAgIDwhW2VuZGlmXS0tPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9jZW50ZXI+XFxuICAgIDwvYm9keT5cXG48L2h0bWw+JztcblxufVxucmV0dXJuIF9fcFxufVxudmFyIF8gPSB7fTtcbnZhciBlc2NhcGVNYXAgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiN4Mjc7J1xufTtcbnZhciBlc2NhcGVSZWdleHAgPSBuZXcgUmVnRXhwKCdbJyArIE9iamVjdC5rZXlzKGVzY2FwZU1hcCkuam9pbignJykgKyAnXScsICdnJyk7XG5fLmVzY2FwZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIGlmICghc3RyaW5nKSByZXR1cm4gJyc7XG4gICAgcmV0dXJuIFN0cmluZyhzdHJpbmcpLnJlcGxhY2UoZXNjYXBlUmVnZXhwLCBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgICByZXR1cm4gZXNjYXBlTWFwW21hdGNoXTtcbiAgICB9KTtcbn07XG5leHBvcnRzWydmb3JtcyddPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJycsIF9fZSA9IF8uZXNjYXBlLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcbmZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxud2l0aCAob2JqKSB7XG5fX3AgKz0gJzxkaXYgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1tZXNzYWdlICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLScgK1xuX19lKCBtZXNzYWdlLmVudGl0eSApICtcbictbXNnXCI+XFxuXFx0PHNwYW4gY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1tZXNzYWdlLWZyb21cIj4nICtcbl9fZSggbWVzc2FnZS5mcm9tICkgK1xuJzwvc3Bhbj5cXG5cXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictbWVzc2FnZS1jb250ZW50XCIgJztcbiBpZihtZXNzYWdlLmVudGl0eSA9PT0gXCJ1c2VyXCIpIHsgO1xuX19wICs9ICcgc3R5bGU9XCJib3JkZXItY29sb3I6XFwnJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmJhY2tncm91bmRDb2xvciApICtcbidcIiAnO1xuIH0gO1xuX19wICs9ICc+XFxuXFx0XFx0PGZvcm0gaWQ9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy0nICtcbl9fZSggZm9ybS5uYW1lICkgK1xuJ1wiIG5hbWU9XCInICtcbl9fZSggZm9ybS5uYW1lICkgK1xuJ1wiICc7XG4gaWYoZm9ybS5hdXRvY29tcGxldGUpeyA7XG5fX3AgKz0gJ2F1dG9jb21wbGV0ZT1cIm9uXCInO1xuIH0gO1xuX19wICs9ICcgZGF0YS12YWxpZGF0ZS1mb3JtPVwidHJ1ZVwiPlxcblxcdFxcdFxcdCc7XG4gaWYoZm9ybS5kZXNjcmlwdGlvbikgeyA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdFxcdDxwIHN0eWxlPVwibWFyZ2luOiAxMHB4IDBcIj4nICtcbigoX190ID0gKCBmcmFzZXMuRk9STVMuREVTQ1JJUFRJT05TW2Zvcm0uZGVzY3JpcHRpb25dIHx8IGZvcm0uZGVzY3JpcHRpb24gKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nPC9wPlxcblxcdFxcdFxcdCc7XG4gfSA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdCc7XG4gXy5mb3JFYWNoKGZvcm0uZmllbGRzLCBmdW5jdGlvbihpdGVtKXsgO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHQnO1xuIGlmKGl0ZW0udHlwZSA9PT0gJ3NlbGVjdCcpIHsgO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHRcXHQ8c2VsZWN0IG5hbWU9XCInICtcbl9fZSggaXRlbS5uYW1lICkgK1xuJ1wiPlxcblxcdFxcdFxcdFxcdFxcdFxcdCc7XG4gXy5mb3JFYWNoKGl0ZW0ub3B0aW9ucywgZnVuY3Rpb24ob3B0aW9uKSB7IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0PG9wdGlvbiB2YWx1ZT1cIicgK1xuX19lKCBvcHRpb24udmFsdWUgKSArXG4nXCIgJztcbiBpZihvcHRpb24uc2VsZWN0ZWQpIHsgO1xuX19wICs9ICcgc2VsZWN0ZWQgJztcbiB9IDtcbl9fcCArPSAnID5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQnICtcbl9fZSggZnJhc2VzLkZPUk1TLlBMQUNFSE9MREVSU1tvcHRpb24udGV4dF0gfHwgb3B0aW9uLnRleHQgKSArXG4nXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0PC9vcHRpb24+XFxuXFx0XFx0XFx0XFx0XFx0XFx0JztcbiB9KTsgO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHRcXHQ8L3NlbGVjdD5cXG5cXHRcXHRcXHRcXHQnO1xuIH0gZWxzZSBpZihpdGVtLnR5cGUgPT09ICd0ZXh0YXJlYScpIHsgO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHRcXHQ8dGV4dGFyZWEgXFxuXFx0XFx0XFx0XFx0XFx0XFx0bmFtZT1cIicgK1xuX19lKCBpdGVtLm5hbWUgKSArXG4nXCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRwbGFjZWhvbGRlcj1cIicgK1xuKChfX3QgPSAoIGZyYXNlcy5GT1JNUy5QTEFDRUhPTERFUlNbaXRlbS5wbGFjZWhvbGRlcl0gfHwgZnJhc2VzLkZPUk1TLlBMQUNFSE9MREVSU1tpdGVtLm5hbWVdICkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJyAnO1xuIGlmKGl0ZW0ucmVxdWlyZWQpeyA7XG5fX3AgKz0gJyonO1xuIH0gO1xuX19wICs9ICdcIlxcblxcdFxcdFxcdFxcdFxcdD48L3RleHRhcmVhPlxcblxcdFxcdFxcdFxcdCc7XG4gfSBlbHNlIHsgO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHRcXHQ8aW5wdXQgXFxuXFx0XFx0XFx0XFx0XFx0XFx0dHlwZT1cIicgK1xuKChfX3QgPSAoIGl0ZW0udHlwZSB8fCAndGV4dCcgKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nXCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRwbGFjZWhvbGRlcj1cIicgK1xuKChfX3QgPSAoIGZyYXNlcy5GT1JNUy5QTEFDRUhPTERFUlNbaXRlbS5wbGFjZWhvbGRlcl0gfHwgZnJhc2VzLkZPUk1TLlBMQUNFSE9MREVSU1tpdGVtLm5hbWVdICkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJyAnO1xuIGlmKGl0ZW0ucmVxdWlyZWQpeyA7XG5fX3AgKz0gJyonO1xuIH0gO1xuX19wICs9ICdcIlxcblxcdFxcdFxcdFxcdFxcdFxcdG5hbWU9XCInICtcbl9fZSggaXRlbS5uYW1lICkgK1xuJ1wiICc7XG4gaWYoaXRlbS52YWx1ZSl7IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0XFx0XFx0XFx0dmFsdWU9XCInICtcbl9fZSggY3JlZGVudGlhbHNbaXRlbS52YWx1ZV0gKSArXG4nXCIgJztcbiB9IDtcbl9fcCArPSAnICc7XG4gaWYoaXRlbS5yZXF1aXJlZCl7IDtcbl9fcCArPSAncmVxdWlyZWQnO1xuIH0gO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHRcXHQvPlxcblxcdFxcdFxcdFxcdCc7XG4gfSA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdCc7XG4gfSk7IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0PGJ1dHRvbiBcXG5cXHRcXHRcXHRcXHR0eXBlPVwic3VibWl0XCJcXG5cXHRcXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbiAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24tcHJpbWFyeSAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1ibG9ja1wiXFxuXFx0XFx0XFx0XFx0c3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yICkgK1xuJzsgY29sb3I6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7IGJvcmRlcjogMXB4IHNvbGlkICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5iYWNrZ3JvdW5kQ29sb3IgKSArXG4nO1wiPicgK1xuX19lKCBmcmFzZXMuRk9STVMuc2VuZCApICtcbic8L2J1dHRvbj5cXG5cXHRcXHRcXHQ8YnV0dG9uXFxuXFx0XFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24gJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmxvY2tcIlxcblxcdFxcdFxcdFxcdGRhdGEtJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictaGFuZGxlcj1cInJlamVjdEZvcm1cIj4nICtcbl9fZSggZnJhc2VzLkZPUk1TLmNhbmNlbCApICtcbic8L2J1dHRvbj5cXG5cXHRcXHQ8L2Zvcm0+XFxuXFx0PC9kaXY+XFxuXFx0PHNwYW4gY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1tZXNzYWdlLXRpbWVcIj4gJyArXG5fX2UoIG1lc3NhZ2UudGltZSApICtcbic8L3NwYW4+XFxuPC9kaXY+JztcblxufVxucmV0dXJuIF9fcFxufVxudmFyIF8gPSB7fTtcbnZhciBlc2NhcGVNYXAgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiN4Mjc7J1xufTtcbnZhciBlc2NhcGVSZWdleHAgPSBuZXcgUmVnRXhwKCdbJyArIE9iamVjdC5rZXlzKGVzY2FwZU1hcCkuam9pbignJykgKyAnXScsICdnJyk7XG5fLmVzY2FwZSA9IGZ1bmN0aW9uKHN0cmluZykge1xuICAgIGlmICghc3RyaW5nKSByZXR1cm4gJyc7XG4gICAgcmV0dXJuIFN0cmluZyhzdHJpbmcpLnJlcGxhY2UoZXNjYXBlUmVnZXhwLCBmdW5jdGlvbihtYXRjaCkge1xuICAgICAgICByZXR1cm4gZXNjYXBlTWFwW21hdGNoXTtcbiAgICB9KTtcbn07XG5leHBvcnRzWydtZXNzYWdlJ109IGZ1bmN0aW9uKG9iaikge1xub2JqIHx8IChvYmogPSB7fSk7XG52YXIgX190LCBfX3AgPSAnJywgX19lID0gXy5lc2NhcGUsIF9faiA9IEFycmF5LnByb3RvdHlwZS5qb2luO1xuZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XG53aXRoIChvYmopIHtcbl9fcCArPSAnPGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLW1lc3NhZ2UgJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictJyArXG5fX2UoIG1lc3NhZ2UuZW50aXR5ICkgK1xuJy1tc2dcIj5cXG5cXHQ8c3BhbiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLW1lc3NhZ2UtZnJvbVwiPicgK1xuX19lKCBtZXNzYWdlLmZyb20gKSArXG4nPC9zcGFuPlxcblxcdDxkaXYgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1tZXNzYWdlLWNvbnRlbnRcIlxcblxcdFxcdCc7XG4gaWYobWVzc2FnZS5lbnRpdHkgIT09IFwidXNlclwiKSB7IDtcbl9fcCArPSAnIFxcblxcdFxcdFxcdHN0eWxlPVwiYm9yZGVyLWNvbG9yOicgK1xuKChfX3QgPSAoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmJhY2tncm91bmRDb2xvciApKSA9PSBudWxsID8gJycgOiBfX3QpICtcbidcIiBcXG5cXHRcXHQnO1xuIH0gO1xuX19wICs9ICc+XFxuXFx0XFx0PHA+JyArXG4oKF9fdCA9ICggbWVzc2FnZS5jb250ZW50ICkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJzwvcD5cXG5cXHQ8L2Rpdj5cXG5cXHQ8c3BhbiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLW1lc3NhZ2UtdGltZVwiPiAnICtcbl9fZSggbWVzc2FnZS50aW1lICkgK1xuJzwvc3Bhbj5cXG48L2Rpdj4nO1xuXG59XG5yZXR1cm4gX19wXG59XG52YXIgXyA9IHt9O1xudmFyIGVzY2FwZU1hcCA9IHtcbiAgICAnJic6ICcmYW1wOycsXG4gICAgJzwnOiAnJmx0OycsXG4gICAgJz4nOiAnJmd0OycsXG4gICAgJ1wiJzogJyZxdW90OycsXG4gICAgXCInXCI6ICcmI3gyNzsnXG59O1xudmFyIGVzY2FwZVJlZ2V4cCA9IG5ldyBSZWdFeHAoJ1snICsgT2JqZWN0LmtleXMoZXNjYXBlTWFwKS5qb2luKCcnKSArICddJywgJ2cnKTtcbl8uZXNjYXBlID0gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgaWYgKCFzdHJpbmcpIHJldHVybiAnJztcbiAgICByZXR1cm4gU3RyaW5nKHN0cmluZykucmVwbGFjZShlc2NhcGVSZWdleHAsIGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBlc2NhcGVNYXBbbWF0Y2hdO1xuICAgIH0pO1xufTtcbmV4cG9ydHNbJ3dpZGdldCddPSBmdW5jdGlvbihvYmopIHtcbm9iaiB8fCAob2JqID0ge30pO1xudmFyIF9fdCwgX19wID0gJycsIF9fZSA9IF8uZXNjYXBlLCBfX2ogPSBBcnJheS5wcm90b3R5cGUuam9pbjtcbmZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxud2l0aCAob2JqKSB7XG5cbiB2YXIgZnJhc2VzID0gdHJhbnNsYXRpb25zOyA7XG5fX3AgKz0gJ1xcbic7XG4gdmFyIHBhbmVscyA9IGZyYXNlcy5QQU5FTFM7IDtcbl9fcCArPSAnXFxuJztcbiB2YXIgY2hhbm5lbHMgPSBkZWZhdWx0cy5jaGFubmVsczsgO1xuX19wICs9ICdcXG4nO1xuIHZhciBwb3NpdGlvbkNsYXNzID0gZGVmYXVsdHMucG9zaXRpb24gPT09ICdyaWdodCcgPyAncG9zaXRpb24tcmlnaHQnIDogJ3Bvc2l0aW9uLWxlZnQnIDtcbl9fcCArPSAnXFxuPGRpdiBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLWNvbnRcIiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLWNvbnQgJyArXG5fX2UoIHBvc2l0aW9uQ2xhc3MgKSArXG4nXCI+XFxuXFxuXFx0PCEtLSAqKioqKiBQYW5lcyBjb250YWluZXIgKioqKiogLS0+XFxuXFx0PGRpdiBcXG5cXHRcXHRpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLXBhbmVzXCIgXFxuXFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy13Zy1wYW5lc1wiIFxcblxcdFxcdHN0eWxlPVwiJztcbiBpZihkZWZhdWx0cy5zdHlsZXMud2lkdGgpIHsgO1xuX19wICs9ICd3aWR0aDogJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy53aWR0aCApICtcbic7JztcbiB9IDtcbl9fcCArPSAnXCI+XFxuXFxuXFx0XFx0PCEtLSAqKioqKiBUb3AgYmFyICoqKioqIC0tPlxcblxcdFxcdDxkaXYgXFxuXFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10b3AtYmFyXCIgXFxuXFx0XFx0XFx0c3R5bGU9XCJiYWNrZ3JvdW5kOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yICkgK1xuJzsgY29sb3I6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7XCI+XFxuXFxuXFx0XFx0XFx0PCEtLSBNYWluIHRpdGxlIC0tPlxcblxcdFxcdFxcdDxoNCBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLXRpdGxlICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXVwcGVyY2FzZVwiPlxcblxcdFxcdFxcdFxcdCcgK1xuX19lKCBkZWZhdWx0cy50aXRsZSB8fCBmcmFzZXMuVE9QX0JBUi50aXRsZSApICtcbidcXG5cXHRcXHRcXHQ8L2g0PlxcblxcblxcdFxcdFxcdDxkaXYgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy13Zy1zdGF0ZS1jb250XCI+XFxuXFx0XFx0XFx0XFx0PHNwYW4gY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy13Zy1zdGF0ZS1pY29uXCI+IDwvc3Bhbj5cXG5cXHRcXHRcXHRcXHQ8c3BhbiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLXN0YXRlXCI+PC9zcGFuPlxcblxcdFxcdFxcdDwvZGl2PlxcblxcblxcdFxcdFxcdDwhLS0gQWN0aW9uIGJ1dHRvbnMgKG1pbmltaXplLCBjbG9zZSkgLS0+XFxuXFx0XFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLW1pbmltaXplXCI+XFxuXFxuXFx0XFx0XFx0XFx0PCEtLTxhIFxcblxcdFxcdFxcdFxcdFxcdGhyZWY9XCIjXCIgXFxuXFx0XFx0XFx0XFx0XFx0ZGF0YS0nICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1oYW5kbGVyPVwiY2xvc2VXaWRnZXRcIj5cXG5cXHRcXHRcXHRcXHRcXHRcXG5cXHRcXHRcXHRcXHRcXHQ8c3BhbiBzdHlsZT1cImZvbnQtd2VpZ2h0OiBib2xkXCI+Xzwvc3Bhbj5cXG5cXHRcXHRcXHRcXHRcXG5cXHRcXHRcXHRcXHQ8L2E+LS0+XFxuXFx0XFx0XFx0XFx0XFxuXFx0XFx0XFx0XFx0PGEgXFxuXFx0XFx0XFx0XFx0XFx0aHJlZj1cIiNcIiBcXG5cXHRcXHRcXHRcXHRcXHRzdHlsZT1cImNvbG9yOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuY29sb3IgKSArXG4nXCJcXG5cXHRcXHRcXHRcXHRcXHRkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhhbmRsZXI9XCJjbG9zZVdpZGdldFwiXFxuXFx0XFx0XFx0XFx0XFx0PHNwYW4gY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1pY29uLXJlbW92ZVwiPjwvc3Bhbj5cXG5cXG5cXHRcXHRcXHRcXHQ8L2E+XFxuXFxuXFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0PC9kaXY+XFxuXFx0XFx0PCEtLSAqKioqKiBUb3AgYmFyIGVuZHMgKioqKiogLS0+XFxuXFxuXFx0XFx0PCEtLSAqKioqKiBDb25uZWN0aW9uIHR5cGVzIHBhbmUgKioqKiogLS0+XFxuXFx0XFx0PGRpdiBcXG5cXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLXBhbmVcIiBcXG5cXHRcXHRcXHRkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXBhbmU9XCJjaG9vc2VDb25uZWN0aW9uXCI+XFxuXFx0XFx0XFx0XFxuXFx0XFx0XFx0PCEtLSBQYW5lbFxcJ3MgaW1hZ2UgY29udGFpbmVyIC0tPlxcblxcdFxcdFxcdDxkaXYgXFxuXFx0XFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1wYW5lLWhlYWRlciAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1kYXJrXCIgXFxuXFx0XFx0XFx0XFx0JztcbiBpZihkZWZhdWx0cy5zdHlsZXMuaW50cm8uYmFja2dyb3VuZEltYWdlKSB7IDtcbl9fcCArPSAnIFxcblxcdFxcdFxcdFxcdFxcdHN0eWxlPVwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCcgK1xuX19lKCBkZWZhdWx0cy5jbGllbnRQYXRoICkgK1xuJycgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMuaW50cm8uYmFja2dyb3VuZEltYWdlICkgK1xuJylcIiBcXG5cXHRcXHRcXHRcXHQnO1xuIH0gO1xuX19wICs9ICc+XFxuXFxuXFx0XFx0XFx0XFx0PCEtLSBUaGUgdGV4dCBkaXNwbGF5ZWQgb24gaW1hZ2UgLS0+XFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJhY2tkcm9wLWNvbnQgJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictd2hpdGVcIj5cXG5cXHRcXHRcXHRcXHRcXHQ8YnI+XFxuXFx0XFx0XFx0XFx0XFx0PHA+JyArXG5fX2UoIHBhbmVscy5DT05ORUNUSU9OX1RZUEVTLmNob29zZV9jb25uX3R5cGUgKSArXG4nPC9wPlxcblxcdFxcdFxcdFxcdDwvZGl2PlxcblxcblxcdFxcdFxcdDwvZGl2PlxcblxcdFxcdFxcdDxkaXYgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1wYW5lLWJvZHlcIj5cXG5cXG5cXHRcXHRcXHRcXHQ8Zm9ybSBcXG5cXHRcXHRcXHRcXHRcXHRpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWluaXQtZm9ybVwiIFxcblxcdFxcdFxcdFxcdFxcdG5hbWU9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJ0luaXRGb3JtXCI+XFxuXFxuXFx0XFx0XFx0XFx0XFx0JztcbiBpZihjaGFubmVscy53ZWJydGMpIHsgO1xuX19wICs9ICcgXFxuXFx0XFx0XFx0XFx0XFx0XFx0PCEtLSBEaXNwbGF5IGNhbGwgYnV0dG9uIGlmIFdlYlJUQyBpcyBlbmFibGVkIGFuZCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgLS0+XFxuXFx0XFx0XFx0XFx0XFx0XFx0JztcbiBpZihkZWZhdWx0cy53ZWJydGNFbmFibGVkKSB7IDtcbl9fcCArPSAnIFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdDxidXR0b24gXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0dHlwZT1cImJ1dHRvblwiIFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbi1wcmltYXJ5ICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJsb2NrXCIgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0c3R5bGU9XCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRiYWNrZ3JvdW5kOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yICkgK1xuJzsgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0Y29sb3I6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7IFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGJvcmRlcjogMXB4IHNvbGlkICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7XCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhhbmRsZXI9XCJpbml0Q2FsbFwiPlxcblxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdCcgK1xuX19lKCBwYW5lbHMuQ09OTkVDVElPTl9UWVBFUy5jYWxsX2FnZW50X2J0biApICtcbidcXG5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQ8L2J1dHRvbj5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQ8IS0tIElmIFdlYlJUQyBpcyBub3Qgc3VwcG9ydGVkIGFuZCBmYWxsYmFjayBpcyBzZXQgLS0+XFxuXFx0XFx0XFx0XFx0XFx0XFx0JztcbiB9IGVsc2UgaWYoY2hhbm5lbHMud2VicnRjLmZhbGxiYWNrICYmIGNoYW5uZWxzLndlYnJ0Yy5mYWxsYmFjay5zaXBDYWxsKSB7IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0PGJ1dHRvbiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHR0eXBlPVwiYnV0dG9uXCIgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24gJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uLXByaW1hcnkgJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmxvY2tcIiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRzdHlsZT1cIlxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGJhY2tncm91bmQ6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5iYWNrZ3JvdW5kQ29sb3IgKSArXG4nOyBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRjb2xvcjogJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmNvbG9yICkgK1xuJzsgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0Ym9yZGVyOiAxcHggc29saWQgJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmNvbG9yICkgK1xuJztcIlxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGRhdGEtJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictaGFuZGxlcj1cImluaXRGYWxsYmFja0NhbGxcIj5cXG5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQnICtcbl9fZSggcGFuZWxzLkNPTk5FQ1RJT05fVFlQRVMuY2FsbF9hZ2VudF9idG4gKSArXG4nXFxuXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0PC9idXR0b24+XFxuXFx0XFx0XFx0XFx0XFx0XFx0JztcbiB9IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0XFx0XFx0JztcbiB9IDtcbl9fcCArPSAnXFxuXFxuXFx0XFx0XFx0XFx0XFx0PCEtLSBEaXNwbGF5IGNhbGxiYWNrIGJ1dHRvbiBpZiBjYWxsYmFjayB0YXNrIGlzIGNvbmZpZ3VyZWQgaW4gdGhlIHNldHRpbmdzIC0tPlxcblxcdFxcdFxcdFxcdFxcdCc7XG4gaWYoY2hhbm5lbHMuY2FsbGJhY2sgJiYgY2hhbm5lbHMuY2FsbGJhY2sudGFzaykgeyA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdFxcdFxcdFxcdDxidXR0b24gXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0dHlwZT1cImJ1dHRvblwiIFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbi1wcmltYXJ5ICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJsb2NrXCIgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0c3R5bGU9XCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRiYWNrZ3JvdW5kOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yICkgK1xuJzsgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0Y29sb3I6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7IFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGJvcmRlcjogMXB4IHNvbGlkICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7XCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhhbmRsZXI9XCJpbml0Q2FsbGJhY2tcIj5cXG5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQnICtcbl9fZSggcGFuZWxzLkNPTk5FQ1RJT05fVFlQRVMuY2FsbGJhY2tfYnRuICkgK1xuJ1xcblxcblxcdFxcdFxcdFxcdFxcdFxcdDwvYnV0dG9uPlxcblxcdFxcdFxcdFxcdFxcdCc7XG4gfSA7XG5fX3AgKz0gJ1xcblxcblxcdFxcdFxcdFxcdFxcdDwhLS0gSW5pdCBjaGF0IGJ1dHRvbiAtLT5cXG5cXHRcXHRcXHRcXHRcXHQnO1xuIGlmKGRlZmF1bHRzLmNoYXQpIHsgO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHRcXHQ8YnV0dG9uXFxuXFx0XFx0XFx0XFx0XFx0XFx0dHlwZT1cImJ1dHRvblwiIFxcblxcdFxcdFxcdFxcdFxcdFxcdGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbi1wcmltYXJ5ICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJsb2NrXCIgXFxuXFx0XFx0XFx0XFx0XFx0XFx0c3R5bGU9XCJiYWNrZ3JvdW5kOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yICkgK1xuJzsgY29sb3I6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7IGJvcmRlcjogMXB4IHNvbGlkICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7XCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhhbmRsZXI9XCJpbml0Q2hhdFwiPlxcblxcdFxcdFxcdFxcdFxcdFxcdCcgK1xuX19lKCBwYW5lbHMuQ09OTkVDVElPTl9UWVBFUy5jaGF0X2FnZW50X2J0biApICtcbidcXG5cXHRcXHRcXHRcXHRcXHQ8L2J1dHRvbj5cXG5cXHRcXHRcXHRcXHRcXHQnO1xuIH0gO1xuX19wICs9ICdcXG5cXG5cXHRcXHRcXHRcXHRcXHQ8IS0tIENsb3NlIHdpZGdldCBidXR0b24gLS0+XFxuXFx0XFx0XFx0XFx0XFx0PGEgaHJlZj1cIiNcIiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbiAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1ibG9ja1wiIGRhdGEtJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictaGFuZGxlcj1cImNsb3NlV2lkZ2V0XCI+JyArXG5fX2UoIHBhbmVscy5DT05ORUNUSU9OX1RZUEVTLmNhbmNlbCApICtcbic8L2E+XFxuXFx0XFx0XFx0XFx0PC9mb3JtPlxcblxcdFxcdFxcdDwvZGl2PlxcblxcdFxcdDwvZGl2PlxcblxcdFxcdDwhLS0gKioqKiogQ29ubmVjdGlvbiB0eXBlcyBwYW5lIGVuZHMgKioqKiogLS0+XFxuXFxuXFx0XFx0PCEtLSAqKioqKiBJbnRybyBwYW5lLiBEaXNwbGF5ZWQgaWYgY29uZmlndXJlZCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0LiAqKioqKiAtLT5cXG5cXHRcXHQnO1xuIGlmKGRlZmF1bHRzLmludHJvLmxlbmd0aCkgeyA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdDxkaXYgXFxuXFx0XFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy13Zy1wYW5lXCIgXFxuXFx0XFx0XFx0XFx0ZGF0YS0nICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1wYW5lPVwiY3JlZGVudGlhbHNcIj5cXG5cXG5cXHRcXHRcXHRcXHQ8IS0tIFBhbmVsXFwncyBpbWFnZSBjb250YWluZXIgLS0+XFxuXFx0XFx0XFx0XFx0PGRpdiBcXG5cXHRcXHRcXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXBhbmUtaGVhZGVyICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWRhcmtcIiBcXG5cXHRcXHRcXHRcXHRcXHQnO1xuIGlmKGRlZmF1bHRzLnN0eWxlcy5pbnRyby5iYWNrZ3JvdW5kSW1hZ2UpIHsgO1xuX19wICs9ICcgXFxuXFx0XFx0XFx0XFx0XFx0XFx0c3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyArXG5fX2UoIGRlZmF1bHRzLmNsaWVudFBhdGggKSArXG4nJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5pbnRyby5iYWNrZ3JvdW5kSW1hZ2UgKSArXG4nKVwiIFxcblxcdFxcdFxcdFxcdFxcdCc7XG4gfSA7XG5fX3AgKz0gJz5cXG5cXG5cXHRcXHRcXHRcXHRcXHQ8IS0tIFRoZSB0ZXh0IGRpc3BsYXllZCBvbiBpbWFnZSAtLT5cXG5cXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmFja2Ryb3AtY29udCAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy13aGl0ZVwiPlxcblxcdFxcdFxcdFxcdFxcdFxcdDxicj5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8cD4nICtcbl9fZSggcGFuZWxzLklOVFJPLmludHJvX21lc3NhZ2UgKSArXG4nPC9wPlxcblxcdFxcdFxcdFxcdFxcdDwvZGl2PlxcblxcblxcdFxcdFxcdFxcdDwvZGl2PlxcblxcblxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1wYW5lLWJvZHlcIj5cXG5cXHRcXHRcXHRcXHRcXHQ8Zm9ybSBcXG5cXHRcXHRcXHRcXHRcXHRcXHRpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWludHJvLWZvcm1cIiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRuYW1lPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbidJbnRyb0Zvcm1cIiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRkYXRhLXZhbGlkYXRlLWZvcm09XCJ0cnVlXCI+XFxuXFxuXFx0XFx0XFx0XFx0XFx0XFx0PCEtLSBJdGVyYXRpbmcgb3ZlciBpbnRybyBhcnJheSwgd2hpY2ggaXMgYSBsaXN0IG9mIGZpZWxkcyBhbmQgdGhlaXIgcHJvcGVydGllcyAtLT5cXG5cXHRcXHRcXHRcXHRcXHRcXHQnO1xuIF8uZm9yRWFjaChkZWZhdWx0cy5pbnRybywgZnVuY3Rpb24oaXRlbSl7IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0JztcbiBpZihpdGVtLm5hbWUgPT09ICdsYW5nJykgeyA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdDxzZWxlY3QgbmFtZT1cImxhbmdcIj5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQnO1xuIF8uZm9yRWFjaChsYW5ndWFnZXMsIGZ1bmN0aW9uKGxhbmcpIHsgO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQ8b3B0aW9uIFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdHZhbHVlPVwiJyArXG5fX2UoIGxhbmcgKSArXG4nXCIgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0JztcbiBpZihsYW5nID09PSBjdXJyTGFuZykgeyA7XG5fX3AgKz0gJyBzZWxlY3RlZCAnO1xuIH0gO1xuX19wICs9ICcgPlxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdCcgK1xuX19lKCB0cmFuc2xhdGlvbnNbbGFuZ10ubGFuZyApICtcbidcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQ8L29wdGlvbj5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQnO1xuIH0pOyA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdDwvc2VsZWN0PlxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdCc7XG4gfSBlbHNlIGlmKGl0ZW0ubmFtZSA9PT0gJ21lc3NhZ2UnKSB7IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0PHRleHRhcmVhXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0bmFtZT1cIm1lc3NhZ2VcIlxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdHBsYWNlaG9sZGVyPVwiJyArXG4oKF9fdCA9ICggaXRlbS5wbGFjZWhvbGRlciB8fCBwYW5lbHMuSU5UUk8uUExBQ0VIT0xERVJTW2l0ZW0ubmFtZV0gKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nICc7XG4gaWYoaXRlbS5yZXF1aXJlZCl7IDtcbl9fcCArPSAnICogJztcbiB9IDtcbl9fcCArPSAnXCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQ+PC90ZXh0YXJlYT5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQnO1xuIH0gZWxzZSB7IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0PGlucHV0IFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdHR5cGU9XCInICtcbigoX190ID0gKCBpdGVtLnR5cGUgfHwgJ3RleHQnICkpID09IG51bGwgPyAnJyA6IF9fdCkgK1xuJ1wiIFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdHBsYWNlaG9sZGVyPVwiJyArXG4oKF9fdCA9ICggaXRlbS5wbGFjZWhvbGRlciB8fCBwYW5lbHMuSU5UUk8uUExBQ0VIT0xERVJTW2l0ZW0ubmFtZV0gKSkgPT0gbnVsbCA/ICcnIDogX190KSArXG4nICc7XG4gaWYoaXRlbS5yZXF1aXJlZCl7IDtcbl9fcCArPSAnICogJztcbiB9IDtcbl9fcCArPSAnXCIgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0bmFtZT1cIicgK1xuX19lKCBpdGVtLm5hbWUgKSArXG4nXCIgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0JztcbiBpZihpdGVtLnNhdmUpeyA7XG5fX3AgKz0gJyB2YWx1ZT1cIicgK1xuX19lKCBjcmVkZW50aWFsc1tpdGVtLm5hbWVdICkgK1xuJ1wiICc7XG4gfSA7XG5fX3AgKz0gJyBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQnO1xuIGlmKGl0ZW0ucmVxdWlyZWQpeyA7XG5fX3AgKz0gJyByZXF1aXJlZCAnO1xuIH0gO1xuX19wICs9ICc+XFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0JztcbiB9IDtcbl9fcCArPSAnXFxuXFxuXFx0XFx0XFx0XFx0XFx0XFx0JztcbiB9KTsgO1xuX19wICs9ICdcXG5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8IS0tIEluaXQgY2hhdCB3aXRoIGludHJvIHByb3BlcnRpZXMgLS0+XFxuXFx0XFx0XFx0XFx0XFx0XFx0PGJ1dHRvbiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHR0eXBlPVwic3VibWl0XCIgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24gJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uLXByaW1hcnkgJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmxvY2tcIiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRzdHlsZT1cIlxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGJhY2tncm91bmQ6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5iYWNrZ3JvdW5kQ29sb3IgKSArXG4nOyBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRjb2xvcjogJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmNvbG9yICkgK1xuJzsgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0Ym9yZGVyOiAxcHggc29saWQgJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmNvbG9yICkgK1xuJztcIj5cXG5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQnICtcbl9fZSggcGFuZWxzLklOVFJPLnN0YXJ0X2RpYWxvZ19idXR0b24gKSArXG4nXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFxuXFx0XFx0XFx0XFx0XFx0XFx0PC9idXR0b24+XFxuXFxuXFx0XFx0XFx0XFx0XFx0XFx0PCEtLSBDbG9zZSB3aWRnZXQgYnV0dG9uIC0tPlxcblxcdFxcdFxcdFxcdFxcdFxcdDxhIGhyZWY9XCIjXCIgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24gJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmxvY2tcIiBkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhhbmRsZXI9XCJjbG9zZVdpZGdldFwiPicgK1xuX19lKCBwYW5lbHMuSU5UUk8uY2FuY2VsICkgK1xuJzwvYT5cXG5cXHRcXHRcXHRcXHRcXHQ8L2Zvcm0+XFxuXFx0XFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0JztcbiB9IDtcbl9fcCArPSAnXFxuXFx0XFx0PCEtLSAqKioqKiBJbnRybyBwYW5lIGVuZHMgKioqKiogLS0+XFxuXFxuXFx0XFx0PCEtLSAqKioqKiBNZXNzYWdlcyBwYW5lICoqKioqIC0tPlxcblxcdFxcdDxkaXYgIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictd2ctcGFuZVwiIGRhdGEtJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictcGFuZT1cIm1lc3NhZ2VzXCI+XFxuXFx0XFx0XFx0XFxuXFx0XFx0XFx0PCEtLSBNZXNzYWdlcyBjb250YWluZXIgLS0+XFxuXFx0XFx0XFx0PHVsIFxcblxcdFxcdFxcdFxcdGlkPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictbWVzc2FnZXMtY29udFwiIFxcblxcdFxcdFxcdFxcdGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictbWVzc2FnZXMtY29udFwiIFxcblxcdFxcdFxcdFxcdHN0eWxlPVwiXFxuXFx0XFx0XFx0XFx0XFx0JztcbiBpZihkZWZhdWx0cy5zdHlsZXMuaGVpZ2h0KSB7IDtcbl9fcCArPSAnXFxuXFx0XFx0XFx0XFx0XFx0XFx0aGVpZ2h0OiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLmhlaWdodCApICtcbic7XFxuXFx0XFx0XFx0XFx0XFx0JztcbiB9IDtcbl9fcCArPSAnXCI+XFxuXFx0XFx0XFx0XFx0XFx0XFxuXFx0XFx0XFx0PC91bD5cXG5cXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictd3JpdGUtY29udFwiPlxcblxcdFxcdFxcdFxcdFxcblxcdFxcdFxcdFxcdDwhLS0gRW5kIGRpYWxvZyBidXR0b24gLS0+XFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWVuZC1kaWFsb2ctYnRuXCI+XFxuXFx0XFx0XFx0XFx0XFx0PGEgaHJlZj1cIiNcIiBkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhhbmRsZXI9XCJmaW5pc2hcIj4nICtcbl9fZSggcGFuZWxzLk1FU1NBR0VTLmVuZF9kaWFsb2cgKSArXG4nPC9hPlxcblxcdFxcdFxcdFxcdDwvZGl2PlxcblxcblxcdFxcdFxcdFxcdDwhLS0gXCJBZ2VudCBpcyB0eXBpbmdcIiBpbmRpY2F0b3IgLS0+XFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWxvYWRlclwiPlxcblxcdFxcdFxcdFxcdFxcdDxzcGFuPjwvc3Bhbj5cXG5cXHRcXHRcXHRcXHRcXHQ8c3Bhbj48L3NwYW4+XFxuXFx0XFx0XFx0XFx0XFx0PHNwYW4+PC9zcGFuPlxcblxcdFxcdFxcdFxcdDwvZGl2PlxcblxcblxcdFxcdFxcdFxcdDwhLS0gXCJBdHRhY2ggZmlsZVwiIGJ1dHRvbiAtLT5cXG5cXHRcXHRcXHRcXHQ8bGFiZWwgXFxuXFx0XFx0XFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1zZW5kZmlsZS1jb250XCIgXFxuXFx0XFx0XFx0XFx0XFx0Zm9yPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictZmlsZS1zZWxlY3RcIj5cXG5cXG5cXHRcXHRcXHRcXHRcXHQ8aW5wdXQgXFxuXFx0XFx0XFx0XFx0XFx0XFx0dHlwZT1cImZpbGVcIiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWZpbGUtc2VsZWN0XCI+XFxuXFx0XFx0XFx0XFx0XFx0XFxuXFx0XFx0XFx0XFx0XFx0PHNwYW4gXFxuXFx0XFx0XFx0XFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1pY29uLXVwbG9hZFwiIFxcblxcdFxcdFxcdFxcdFxcdFxcdHN0eWxlPVwiY29sb3I6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5iYWNrZ3JvdW5kQ29sb3IgKSArXG4nXCI+XFxuXFx0XFx0XFx0XFx0XFx0PHNwYW4+XFxuXFxuXFx0XFx0XFx0XFx0PC9sYWJlbD5cXG5cXG5cXHRcXHRcXHRcXHQ8ZGl2IGlkPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictbWVzc2FnZS10ZXh0LWNsb25lXCIgIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictbXNnLXRleHRhcmVhLWNsb25lXCIgPjwvZGl2PlxcblxcblxcdFxcdFxcdFxcdDwhLS0gRmllbGQgZm9yIHR5cGluZyB0aGUgdXNlciBtZXNzYWdlIC0tPlxcblxcdFxcdFxcdFxcdDx0ZXh0YXJlYSBcXG5cXHRcXHRcXHRcXHRcXHRpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLW1lc3NhZ2UtdGV4dFwiIFxcblxcdFxcdFxcdFxcdFxcdGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictbXNnLXRleHRhcmVhXCIgXFxuXFx0XFx0XFx0XFx0XFx0cGxhY2Vob2xkZXI9XCInICtcbl9fZSggcGFuZWxzLk1FU1NBR0VTLlBMQUNFSE9MREVSUy5tZXNzYWdlICkgK1xuJ1wiIFxcblxcdFxcdFxcdFxcdFxcdG1heGxlbmd0aD1cIjEwMDBcIj48L3RleHRhcmVhPlxcblxcdFxcdFxcdFxcdFxcblxcdFxcdFxcdFxcdDwhLS0gXCJTZW5kIGEgbWVzc2FnZVwiIGJ1dHRvbiAtLT5cXG5cXHRcXHRcXHRcXHQ8YSBcXG5cXHRcXHRcXHRcXHRcXHRocmVmPVwiI1wiIFxcblxcdFxcdFxcdFxcdFxcdGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictc2VuZG1zZy1idG4gJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uXCIgXFxuXFx0XFx0XFx0XFx0XFx0ZGF0YS0nICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1oYW5kbGVyPVwic2VuZE1lc3NhZ2VcIj5cXG5cXG5cXHRcXHRcXHRcXHRcXHQ8c3BhbiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWljb24tcGFwZXItcGxhbmVcIiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRzdHlsZT1cImNvbG9yOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yICkgK1xuJ1wiPlxcblxcdFxcdFxcdFxcdFxcdDwvc3Bhbj5cXG5cXHRcXHRcXHRcXHQ8L2E+XFxuXFxuXFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0PC9kaXY+XFxuXFx0XFx0PCEtLSAqKioqKiBNZXNzYWdlcyBwYW5lIGVuZHMgKioqKiogLS0+XFxuXFxuXFx0XFx0PCEtLSAqKioqKiBPZmZsaW5lIHBhbmUgKioqKiogLS0+XFxuXFx0XFx0PGRpdiBcXG5cXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLXBhbmVcIiBcXG5cXHRcXHRcXHRkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXBhbmU9XCJzZW5kZW1haWxcIj5cXG5cXG5cXHRcXHRcXHQ8IS0tIFBhbmVsXFwncyBpbWFnZSBjb250YWluZXIgLS0+XFxuXFx0XFx0XFx0PGRpdiBcXG5cXHRcXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXBhbmUtaGVhZGVyICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWRhcmtcIiBcXG5cXHRcXHRcXHRcXHQnO1xuIGlmKGRlZmF1bHRzLnN0eWxlcy5zZW5kbWFpbC5iYWNrZ3JvdW5kSW1hZ2UpIHsgO1xuX19wICs9ICcgXFxuXFx0XFx0XFx0XFx0XFx0c3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyArXG5fX2UoIGRlZmF1bHRzLmNsaWVudFBhdGggKSArXG4nJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5zZW5kbWFpbC5iYWNrZ3JvdW5kSW1hZ2UgKSArXG4nKVwiIFxcblxcdFxcdFxcdFxcdCc7XG4gfSA7XG5fX3AgKz0gJz5cXG5cXG5cXHRcXHRcXHRcXHQ8IS0tIFRoZSB0ZXh0IGRpc3BsYXllZCBvbiBpbWFnZSAtLT5cXG5cXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmFja2Ryb3AtY29udCAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1kYXJrXCI+XFxuXFx0XFx0XFx0XFx0XFx0PHA+JyArXG5fX2UoIHBhbmVscy5PRkZMSU5FLm9mZmxpbmVfbWVzc2FnZSApICtcbic8L3A+XFxuXFx0XFx0XFx0XFx0PC9kaXY+XFxuXFxuXFx0XFx0XFx0PC9kaXY+XFxuXFxuXFx0XFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXBhbmUtYm9keVwiPlxcblxcdFxcdFxcdFxcdDxoNCBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXVwcGVyY2FzZVwiPicgK1xuX19lKCBwYW5lbHMuT0ZGTElORS5zZW5kX21lc3NhZ2VfaGVhZGVyICkgK1xuJzwvaDQ+XFxuXFx0XFx0XFx0XFx0PGZvcm0gaWQ9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1zZW5kbWFpbC1mb3JtXCIgZGF0YS12YWxpZGF0ZS1mb3JtPVwidHJ1ZVwiPlxcblxcdFxcdFxcdFxcdFxcdDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJ1bmFtZVwiIHBsYWNlaG9sZGVyPVwiJyArXG5fX2UoIHBhbmVscy5PRkZMSU5FLlBMQUNFSE9MREVSUy51bmFtZSApICtcbidcIj5cXG5cXHRcXHRcXHRcXHRcXHQ8aW5wdXQgdHlwZT1cImVtYWlsXCIgbmFtZT1cImVtYWlsXCIgcGxhY2Vob2xkZXI9XCInICtcbl9fZSggcGFuZWxzLk9GRkxJTkUuUExBQ0VIT0xERVJTLmVtYWlsICkgK1xuJyAqXCIgcmVxdWlyZWQ+XFxuXFx0XFx0XFx0XFx0XFx0PHRleHRhcmVhIG5hbWU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCInICtcbl9fZSggcGFuZWxzLk9GRkxJTkUuUExBQ0VIT0xERVJTLm1lc3NhZ2UgKSArXG4nXCIgbWF4bGVuZ3RoPVwiMTUwMFwiPjwvdGV4dGFyZWE+XFxuXFxuXFx0XFx0XFx0XFx0XFx0PGlucHV0IHR5cGU9XCJmaWxlXCIgbmFtZT1cImZpbGVcIiBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWNvbnRhY3RmaWxlXCIgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1pbnB1dGZpbGVcIiAvPlxcblxcdFxcdFxcdFxcdFxcdDxsYWJlbCBmb3I9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1jb250YWN0ZmlsZVwiPicgK1xuX19lKCBwYW5lbHMuT0ZGTElORS5jaG9vc2VfZmlsZSApICtcbic8L2xhYmVsPlxcblxcblxcdFxcdFxcdFxcdFxcdDwhLS0gXCJTZW5kIG9mZmxpbmUgbWVzc2FnZVwiIGJ1dHRvbiAtLT5cXG5cXHRcXHRcXHRcXHRcXHQ8YnV0dG9uIFxcblxcdFxcdFxcdFxcdFxcdFxcdHR5cGU9XCJzdWJtaXRcIiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbiAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24tcHJpbWFyeSAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1ibG9ja1wiIFxcblxcdFxcdFxcdFxcdFxcdFxcdHN0eWxlPVwiXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0YmFja2dyb3VuZDogJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmJhY2tncm91bmRDb2xvciApICtcbic7IFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdGNvbG9yOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuY29sb3IgKSArXG4nOyBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRib3JkZXI6IDFweCBzb2xpZCAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuY29sb3IgKSArXG4nO1wiPlxcblxcblxcdFxcdFxcdFxcdFxcdFxcdCcgK1xuX19lKCBwYW5lbHMuT0ZGTElORS5zZW5kX21lc3NhZ2VfYnV0dG9uICkgK1xuJ1xcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcblxcdFxcdFxcdFxcdFxcdDwvYnV0dG9uPlxcblxcblxcdFxcdFxcdFxcdFxcdDwhLS0gQ2xvc2Ugd2lkZ2V0IGJ1dHRvbiAtLT5cXG5cXHRcXHRcXHRcXHRcXHQ8YSBocmVmPVwiI1wiIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJsb2NrXCIgZGF0YS0nICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1oYW5kbGVyPVwiY2xvc2VXaWRnZXRcIj4nICtcbl9fZSggcGFuZWxzLk9GRkxJTkUuY2xvc2UgKSArXG4nPC9hPlxcblxcdFxcdFxcdFxcdDwvZm9ybT5cXG5cXHRcXHRcXHQ8L2Rpdj5cXG5cXHRcXHQ8L2Rpdj5cXG5cXHRcXHQ8IS0tICoqKioqIE9mZmxpbmUgcGFuZSBlbmRzICoqKioqIC0tPlxcblxcblxcdFxcdDwhLS0gKioqKiogQ2xvc2UgY2hhdCBwYW5lICoqKioqIC0tPlxcblxcdFxcdDxkaXYgXFxuXFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy13Zy1wYW5lXCIgXFxuXFx0XFx0XFx0ZGF0YS0nICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1wYW5lPVwiY2xvc2VjaGF0XCI+XFxuXFxuXFx0XFx0XFx0PCEtLSBQYW5lbFxcJ3MgaW1hZ2UgY29udGFpbmVyIC0tPlxcblxcdFxcdFxcdDxkaXYgXFxuXFx0XFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1wYW5lLWhlYWRlciAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy13aGl0ZVwiIFxcblxcdFxcdFxcdFxcdCc7XG4gaWYoZGVmYXVsdHMuc3R5bGVzLmNsb3NlQ2hhdC5iYWNrZ3JvdW5kSW1hZ2UpIHsgO1xuX19wICs9ICcgXFxuXFx0XFx0XFx0XFx0XFx0c3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJyArXG5fX2UoIGRlZmF1bHRzLmNsaWVudFBhdGggKSArXG4nJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5jbG9zZUNoYXQuYmFja2dyb3VuZEltYWdlICkgK1xuJylcIiBcXG5cXHRcXHRcXHRcXHQnO1xuIH0gO1xuX19wICs9ICc+XFxuXFxuXFx0XFx0XFx0XFx0PCEtLSBUaGUgdGV4dCBkaXNwbGF5ZWQgb24gaW1hZ2UgLS0+XFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJhY2tkcm9wLWNvbnQgJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictd2hpdGVcIj5cXG5cXHRcXHRcXHRcXHRcXHQ8YnI+XFxuXFx0XFx0XFx0XFx0XFx0PHA+JyArXG5fX2UoIHBhbmVscy5DTE9TRV9DSEFULmNsb3NlX2NoYXRfaGVhZGVyICkgK1xuJzwvcD5cXG5cXHRcXHRcXHRcXHQ8L2Rpdj5cXG5cXG5cXHRcXHRcXHQ8L2Rpdj5cXG5cXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictcGFuZS1ib2R5XCI+XFxuXFx0XFx0XFx0XFx0PGZvcm0gaWQ9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1jbG9zZWNoYXQtZm9ybVwiIGRhdGEtdmFsaWRhdGUtZm9ybT1cInRydWVcIj5cXG5cXHRcXHRcXHRcXHRcXHQ8bGFiZWwgZm9yPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictc2VuZC1kaWFsb2dcIj5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInNlbmREaWFsb2dcIiBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXNlbmQtZGlhbG9nXCIgLz5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8c3Bhbj4nICtcbl9fZSggcGFuZWxzLkNMT1NFX0NIQVQuc2VuZF9kaWFsb2dfbGFiZWwgKSArXG4nPC9zcGFuPlxcblxcdFxcdFxcdFxcdFxcdDwvbGFiZWw+XFxuXFx0XFx0XFx0XFx0XFx0PGlucHV0IHR5cGU9XCJlbWFpbFwiIG5hbWU9XCJlbWFpbFwiIHBsYWNlaG9sZGVyPVwiJyArXG5fX2UoIHBhbmVscy5DTE9TRV9DSEFULlBMQUNFSE9MREVSUy5lbWFpbCApICtcbidcIj5cXG5cXHRcXHRcXHRcXHRcXHQ8c2VsZWN0IG5hbWU9XCJyYXRpbmdcIj5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8b3B0aW9uIHZhbHVlPVwiXCI+LS0tICcgK1xuX19lKCBwYW5lbHMuQ0xPU0VfQ0hBVC5yYXRlX2FnZW50ICkgK1xuJyAtLS08L29wdGlvbj5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8b3B0aW9uIHZhbHVlPVwiNVwiPicgK1xuX19lKCBmcmFzZXMuQUdFTlRfUkFURVMuZXhjZWxsZW50ICkgK1xuJzwvb3B0aW9uPlxcblxcdFxcdFxcdFxcdFxcdFxcdDxvcHRpb24gdmFsdWU9XCI0XCI+JyArXG5fX2UoIGZyYXNlcy5BR0VOVF9SQVRFUy5nb29kICkgK1xuJzwvb3B0aW9uPlxcblxcdFxcdFxcdFxcdFxcdFxcdDxvcHRpb24gdmFsdWU9XCIzXCI+JyArXG5fX2UoIGZyYXNlcy5BR0VOVF9SQVRFUy5mYWlyICkgK1xuJzwvb3B0aW9uPlxcblxcdFxcdFxcdFxcdFxcdFxcdDxvcHRpb24gdmFsdWU9XCIyXCI+JyArXG5fX2UoIGZyYXNlcy5BR0VOVF9SQVRFUy5iYWQgKSArXG4nPC9vcHRpb24+XFxuXFx0XFx0XFx0XFx0XFx0PC9zZWxlY3Q+XFxuXFx0XFx0XFx0XFx0XFx0PHRleHRhcmVhIHBsYWNlaG9sZGVyPVwiJyArXG5fX2UoIHBhbmVscy5DTE9TRV9DSEFULlBMQUNFSE9MREVSUy5jb21tZW50ICkgK1xuJ1wiIG5hbWU9XCJ0ZXh0XCIgbWF4bGVuZ3RoPVwiMTUwMFwiPjwvdGV4dGFyZWE+XFxuXFxuXFx0XFx0XFx0XFx0XFx0PCEtLSBFbmQgY2hhdCBhbmQgY2xvc2Ugd2lkZ2V0IGJ1dHRvbiAtLT5cXG5cXHRcXHRcXHRcXHRcXHQ8YnV0dG9uIFxcblxcdFxcdFxcdFxcdFxcdFxcdHR5cGU9XCJzdWJtaXRcIiBcXG5cXHRcXHRcXHRcXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbiAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24tcHJpbWFyeSAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1ibG9ja1wiIFxcblxcdFxcdFxcdFxcdFxcdFxcdHN0eWxlPVwiXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0YmFja2dyb3VuZDogJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmJhY2tncm91bmRDb2xvciApICtcbic7IFxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdGNvbG9yOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuY29sb3IgKSArXG4nOyBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRib3JkZXI6IDFweCBzb2xpZCAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuY29sb3IgKSArXG4nO1wiPlxcblxcblxcdFxcdFxcdFxcdFxcdFxcdCcgK1xuX19lKCBwYW5lbHMuQ0xPU0VfQ0hBVC5maW5pc2hfZGlhbG9nX2J1dHRvbiApICtcbidcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXG5cXHRcXHRcXHRcXHRcXHQ8L2J1dHRvbj5cXG5cXG5cXHRcXHRcXHRcXHRcXHQ8IS0tIFwiQmFjayB0byB0aGUgY2hhdFwiIGJ1dHRvbiAtLT5cXG5cXHRcXHRcXHRcXHRcXHQ8YSBocmVmPVwiI21lc3NhZ2VzXCIgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24gJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmxvY2tcIj4nICtcbl9fZSggcGFuZWxzLkNMT1NFX0NIQVQuYmFjayApICtcbic8L2E+XFxuXFx0XFx0XFx0XFx0PC9mb3JtPlxcblxcdFxcdFxcdDwvZGl2PlxcblxcdFxcdDwvZGl2PlxcblxcdFxcdDwhLS0gKioqKiogQ2xvc2UgY2hhdCBwYW5lIGVuZHMgKioqKiogLS0+XFxuXFxuXFx0XFx0PCEtLSAqKioqKiBBdWRpbyBjYWxsIHBhbmUgKioqKiogLS0+XFxuXFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLXBhbmVcIiBkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXBhbmU9XCJjYWxsQWdlbnRcIj5cXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictcGFuZS1ib2R5XCI+XFxuXFx0XFx0XFx0XFx0PGRpdiBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWNhbGwtc3Bpbm5lclwiIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictc3Bpbm5lci1wYW5lXCI+XFxuXFx0XFx0XFx0XFx0XFx0PGgzIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictdGV4dC1jZW50ZXJcIj4nICtcbl9fZSggcGFuZWxzLkFVRElPX0NBTEwuY29uZmlybV9hY2Nlc3MgKSArXG4nPC9oMz5cXG5cXHRcXHRcXHRcXHRcXHQ8aDMgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10ZXh0LWNlbnRlciAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1sb2FkZXIgJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictc2hvd25cIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTtcIj5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8c3Bhbj48L3NwYW4+XFxuXFx0XFx0XFx0XFx0XFx0XFx0PHNwYW4+PC9zcGFuPlxcblxcdFxcdFxcdFxcdFxcdFxcdDxzcGFuPjwvc3Bhbj5cXG5cXHRcXHRcXHRcXHRcXHQ8L2gzPlxcblxcdFxcdFxcdFxcdDwvZGl2PlxcblxcdFxcdFxcdFxcdDxkaXYgaWQ9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1jYWxsLWluZm9cIiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhpZGRlblwiPlxcblxcdFxcdFxcdFxcdFxcdDxoMyBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXRleHQtY2VudGVyXCIgaWQ9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1jYWxsLXN0YXRlXCI+JyArXG5fX2UoIHBhbmVscy5BVURJT19DQUxMLmNhbGxpbmdfYWdlbnQgKSArXG4nPC9oMz5cXG5cXHRcXHRcXHRcXHRcXHQ8aDMgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10ZXh0LWNlbnRlclwiIGlkPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictY2FsbC10aW1lclwiPjAwOjAwPC9oMz5cXG5cXHRcXHRcXHRcXHQ8L2Rpdj5cXG5cXHRcXHRcXHRcXHQ8Zm9ybSBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWNhbGwtY29udHJvbFwiPlxcblxcdFxcdFxcdFxcdFxcdDxocj5cXG5cXHRcXHRcXHRcXHRcXHQ8YnV0dG9uXFxuXFx0XFx0XFx0XFx0XFx0XFx0aWQ9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10cnlhZ2Fpbi1idG5cIlxcblxcdFxcdFxcdFxcdFxcdFxcdHR5cGU9XCJidXR0b25cIlxcblxcdFxcdFxcdFxcdFxcdFxcdGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbi1wcmltYXJ5ICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJsb2NrICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhpZGRlblwiXFxuXFx0XFx0XFx0XFx0XFx0XFx0c3R5bGU9XCJiYWNrZ3JvdW5kOiAnICtcbl9fZSggZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yICkgK1xuJzsgY29sb3I6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7IGJvcmRlcjogMXB4IHNvbGlkICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5jb2xvciApICtcbic7XCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhhbmRsZXI9XCJpbml0Q2FsbFwiPlxcblxcdFxcdFxcdFxcdFxcdFxcdCcgK1xuX19lKCBwYW5lbHMuQVVESU9fQ0FMTC50cnlfYWdhaW4gKSArXG4nXFxuXFx0XFx0XFx0XFx0XFx0PC9idXR0b24+XFx0XFxuXFx0XFx0XFx0XFx0XFx0PGJ1dHRvbiBcXG5cXHRcXHRcXHRcXHRcXHRcXHR0eXBlPVwiYnV0dG9uXCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbiAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24td2FybiAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1ibG9ja1wiXFxuXFx0XFx0XFx0XFx0XFx0XFx0ZGF0YS0nICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1oYW5kbGVyPVwiZW5kQ2FsbFwiPlxcblxcblxcdFxcdFxcdFxcdFxcdFxcdCcgK1xuX19lKCBwYW5lbHMuQVVESU9fQ0FMTC5lbmRfY2FsbCApICtcbidcXG5cXG5cXHRcXHRcXHRcXHRcXHQ8L2J1dHRvbj5cXG5cXHRcXHRcXHRcXHQ8L2Zvcm0+XFxuXFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0PC9kaXY+XFxuXFx0XFx0PCEtLSAqKioqKiBBdWRpbyBjYWxsIHBhbmUgZW5kcyAqKioqKiAtLT5cXG5cXG5cXHRcXHQ8IS0tICoqKioqIEF1ZGlvIGNhbGwgZmFsbGJhY2sgcGFuZSAqKioqKiAtLT5cXG5cXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictd2ctcGFuZVwiIGRhdGEtJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictcGFuZT1cImNhbGxBZ2VudEZhbGxiYWNrXCI+XFxuXFx0XFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXBhbmUtYm9keVwiPlxcblxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10ZXh0LWNlbnRlclwiPlxcblxcdFxcdFxcdFxcdFxcdDxoMz4nICtcbl9fZSggcGFuZWxzLkFVRElPX0NBTExfRkFMTEJBQ0suRE9XTkxPQURfTVNHICkgK1xuJzwvaDM+XFxuXFx0XFx0XFx0XFx0XFx0PGJyPlxcblxcdFxcdFxcdFxcdFxcdCc7XG4gaWYoZGVmYXVsdHMud2VicnRjICYmIGRlZmF1bHRzLndlYnJ0Yy5mYWxsYmFjaykgeyA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdFxcdFxcdFxcdDxhIGhyZWY9XCInICtcbl9fZSggZGVmYXVsdHMud2VicnRjLmZhbGxiYWNrLnNpcENhbGwgKSArXG4nXCI+Y2FsbC5qbmxwPC9hPlxcblxcdFxcdFxcdFxcdFxcdCc7XG4gfSA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdFxcdDwvZGl2PlxcblxcdFxcdFxcdFxcdDxmb3JtPlxcblxcdFxcdFxcdFxcdFxcdDxocj5cXG5cXHRcXHRcXHRcXHRcXHQ8YSBocmVmPVwiI2Nob29zZUNvbm5lY3Rpb25cIiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbiAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1ibG9ja1wiPicgK1xuX19lKCBwYW5lbHMuQ0FMTEJBQ0suYmFjayApICtcbic8L2E+XFxuXFx0XFx0XFx0XFx0PC9mb3JtPlxcblxcdFxcdFxcdDwvZGl2PlxcblxcdFxcdDwvZGl2PlxcblxcdFxcdDwhLS0gKioqKiogQXVkaW8gY2FsbCBmYWxsYmFjayBwYW5lIGVuZHMgKioqKiogLS0+XFxuXFxuXFx0XFx0PCEtLSAqKioqKiBDYWxsYmFjayBwYW5lICoqKioqIC0tPlxcblxcdFxcdDxkaXYgXFxuXFx0XFx0XFx0Y2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy13Zy1wYW5lXCIgXFxuXFx0XFx0XFx0ZGF0YS0nICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1wYW5lPVwiY2FsbGJhY2tcIj5cXG5cXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictcGFuZS1ib2R5XCI+XFxuXFx0XFx0XFx0XFx0PGRpdiBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWNhbGxiYWNrLXNwaW5uZXJcIiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhpZGRlbiAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1zcGlubmVyLXBhbmVcIj5cXG5cXHRcXHRcXHRcXHRcXHQ8aDMgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10ZXh0LWNlbnRlclwiPicgK1xuX19lKCBwYW5lbHMuQ0FMTEJBQ0suc2VuZGluZ19yZXF1ZXN0ICkgK1xuJzwvaDM+XFxuXFx0XFx0XFx0XFx0XFx0PGgzIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictdGV4dC1jZW50ZXIgJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictbG9hZGVyICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXNob3duXCIgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7XCI+XFxuXFx0XFx0XFx0XFx0XFx0XFx0PHNwYW4+PC9zcGFuPlxcblxcdFxcdFxcdFxcdFxcdFxcdDxzcGFuPjwvc3Bhbj5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8c3Bhbj48L3NwYW4+XFxuXFx0XFx0XFx0XFx0XFx0PC9oMz5cXG5cXHRcXHRcXHRcXHQ8L2Rpdj5cXG5cXHRcXHRcXHRcXHQ8Zm9ybSBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWNhbGxiYWNrLXNldHRpbmdzXCI+XFxuXFx0XFx0XFx0XFx0XFx0PHAgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10ZXh0LWNlbnRlclwiPicgK1xuX19lKCBwYW5lbHMuQ0FMTEJBQ0sudGl0bGUgKSArXG4nPC9wPlxcblxcdFxcdFxcdFxcdFxcdDxocj5cXG5cXHRcXHRcXHRcXHRcXHQ8bGFiZWw+JyArXG5fX2UoIHBhbmVscy5DQUxMQkFDSy5MQUJFTFMucGhvbmUgKSArXG4nPC9sYWJlbD5cXG5cXHRcXHRcXHRcXHRcXHQ8aW5wdXQgdHlwZT1cInRlbFwiIG5hbWU9XCJwaG9uZVwiIHBsYWNlaG9sZGVyPVwiJyArXG5fX2UoIHBhbmVscy5DQUxMQkFDSy5QTEFDRUhPTERFUlMucGhvbmUgKSArXG4nXCIgcmVxdWlyZWQ+XFxuXFx0XFx0XFx0XFx0XFx0PGxhYmVsPicgK1xuX19lKCBwYW5lbHMuQ0FMTEJBQ0suTEFCRUxTLnRpbWUgKSArXG4nPC9sYWJlbD5cXG5cXHRcXHRcXHRcXHRcXHQ8c2VsZWN0IG5hbWU9XCJ0aW1lXCI+XFxuXFx0XFx0XFx0XFx0XFx0XFx0JztcbiBfLmZvckVhY2gocGFuZWxzLkNBTExCQUNLLlRJTUVfUE9JTlRTLCBmdW5jdGlvbihwb2ludCkgeyA7XG5fX3AgKz0gJ1xcblxcdFxcdFxcdFxcdFxcdFxcdFxcdDxvcHRpb24gdmFsdWU9XCInICtcbl9fZSggcG9pbnQubWludXRlcyApICtcbidcIj4nICtcbl9fZSggcG9pbnQubGFiZWwgKSArXG4nPC9vcHRpb24+XFxuXFx0XFx0XFx0XFx0XFx0XFx0JztcbiB9KTsgO1xuX19wICs9ICdcXG5cXHRcXHRcXHRcXHRcXHQ8L3NlbGVjdD5cXG5cXHRcXHRcXHRcXHRcXHQ8aHI+XFxuXFxuXFx0XFx0XFx0XFx0XFx0PGJ1dHRvblxcblxcdFxcdFxcdFxcdFxcdFxcdHR5cGU9XCJzdWJtaXRcIlxcblxcdFxcdFxcdFxcdFxcdFxcdGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ1dHRvbi1wcmltYXJ5ICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJsb2NrXCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRzdHlsZT1cIlxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdGJhY2tncm91bmQ6ICcgK1xuX19lKCBkZWZhdWx0cy5zdHlsZXMucHJpbWFyeS5iYWNrZ3JvdW5kQ29sb3IgKSArXG4nOyBcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRjb2xvcjogJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmNvbG9yICkgK1xuJzsgXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0Ym9yZGVyOiAxcHggc29saWQgJyArXG5fX2UoIGRlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmNvbG9yICkgK1xuJztcIlxcblxcdFxcdFxcdFxcdFxcdFxcdGRhdGEtJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictaGFuZGxlcj1cInNldENhbGxiYWNrXCI+XFxuXFxuXFx0XFx0XFx0XFx0XFx0XFx0JyArXG5fX2UoIHBhbmVscy5DQUxMQkFDSy5jb25maXJtX2NhbGxiYWNrICkgK1xuJ1xcblxcblxcdFxcdFxcdFxcdFxcdDwvYnV0dG9uPlxcblxcblxcdFxcdFxcdFxcdFxcdDxhIGhyZWY9XCIjY2hvb3NlQ29ubmVjdGlvblwiIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnV0dG9uICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJsb2NrXCI+JyArXG5fX2UoIHBhbmVscy5DQUxMQkFDSy5iYWNrICkgK1xuJzwvYT5cXG5cXHRcXHRcXHRcXHQ8L2Zvcm0+XFxuXFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0PC9kaXY+XFxuXFx0XFx0PCEtLSAqKioqKiBDYWxsYmFjayBwYW5lIGVuZHMgKioqKiogLS0+XFxuXFxuXFx0XFx0PCEtLSAqKioqKiBDYWxsYmFjayBzZW50IHBhbmUgKioqKiogLS0+XFxuXFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXdnLXBhbmVcIiBkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXBhbmU9XCJjYWxsYmFja1NlbnRcIj5cXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictcGFuZS1ib2R5XCI+XFxuXFx0XFx0XFx0XFx0PGRpdiBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWNhbGxiYWNrLXNlbnRcIj5cXG5cXHRcXHRcXHRcXHRcXHQ8aDMgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10ZXh0LWNlbnRlciAnICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1pY29uLWNoZWNrICcgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLXRleHQtc3VjY2Vzc1wiPjwvaDM+XFxuXFx0XFx0XFx0XFx0XFx0PHAgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy10ZXh0LWNlbnRlclwiPicgK1xuX19lKCBwYW5lbHMuQ0FMTEJBQ0sucmVxdWVzdF9zZW50ICkgK1xuJzwvcD5cXG5cXHRcXHRcXHRcXHRcXHQ8Zm9ybT5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8aHI+XFxuXFx0XFx0XFx0XFx0XFx0XFx0PGEgaHJlZj1cIiNjaG9vc2VDb25uZWN0aW9uXCIgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24gJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmxvY2tcIj4nICtcbl9fZSggcGFuZWxzLkNBTExCQUNLLmJhY2sgKSArXG4nPC9hPlxcblxcdFxcdFxcdFxcdFxcdFxcdDxhIGhyZWY9XCIjXCIgY2xhc3M9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idXR0b24gJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYmxvY2tcIiBkYXRhLScgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWhhbmRsZXI9XCJjbG9zZVdpZGdldFwiPicgK1xuX19lKCBwYW5lbHMuQ0FMTEJBQ0suY2xvc2UgKSArXG4nPC9hPlxcblxcdFxcdFxcdFxcdFxcdDwvZm9ybT5cXG5cXHRcXHRcXHRcXHQ8L2Rpdj5cXG5cXHRcXHRcXHQ8L2Rpdj5cXG5cXHRcXHQ8L2Rpdj5cXG5cXHRcXHQ8IS0tICoqKioqIENhbGxiYWNrIHNlbnQgcGFuZSBlbmRzICoqKioqIC0tPlxcblxcblxcdDwvZGl2PlxcblxcdDwhLS0gKioqKiogUGFuZXMgY29udGFpbmVyIGVuZHMgKioqKiogLS0+XFxuXFxuXFx0PCEtLSAqKioqKiBGbG9hdGluZyBidXR0b24gY29udGFpbmVyICoqKioqIC0tPlxcblxcdDxkaXYgaWQ9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy1idG4tY29udFwiIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnRuLWNvbnRcIj5cXG5cXHRcXHQ8ZGl2IGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictd2ctYnRuXCI+XFxuXFx0XFx0XFx0PGRpdiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWxhc3Rtc2ctY29udFwiPlxcblxcdFxcdFxcdFxcdDxzcGFuIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictdW5ub3RpZnktYnRuXCIgaWQ9XCInICtcbl9fZSggZGVmYXVsdHMucHJlZml4ICkgK1xuJy11bm5vdGlmeS1idG5cIj4nICtcbl9fZSggZnJhc2VzLkZMT0FUSU5HX0JVVFRPTi5jbG9zZSApICtcbic8L3NwYW4+XFxuXFx0XFx0XFx0XFx0PGRpdiBpZD1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWxhc3Rtc2dcIiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWxhc3Rtc2dcIj5cXG5cXHRcXHRcXHRcXHQ8L2Rpdj5cXHRcXG5cXHRcXHRcXHQ8L2Rpdj5cXG5cXHRcXHRcXHQ8YSBocmVmPVwiI1wiIGNsYXNzPVwiJyArXG5fX2UoIGRlZmF1bHRzLnByZWZpeCApICtcbictYnRuLWxpbmtcIj5cXG5cXHRcXHRcXHRcXHQ8c3BhbiBjbGFzcz1cIicgK1xuX19lKCBkZWZhdWx0cy5wcmVmaXggKSArXG4nLWJ0bi1pY29uXCI+PC9zcGFuPlxcblxcdFxcdFxcdDwvYT5cXG5cXHRcXHQ8L2Rpdj5cXG5cXHQ8L2Rpdj5cXG5cXHQ8IS0tICoqKioqIEZsb2F0aW5nIGJ1dHRvbiBjb250YWluZXIgZW5kcyAqKioqKiAtLT5cXG5cXG48L2Rpdj4nO1xuXG59XG5yZXR1cm4gX19wXG59IiwidmFyIGRlYnVnID0gcmVxdWlyZSgnLi9kZWJ1ZycpO1xudmFyIGV2ZW50cyA9IHt9LFxuLy8gSnNTSVAgPSByZXF1aXJlKCdqc3NpcCcpLFxuSnNTSVAgPSByZXF1aXJlKCcuL2pzc2lwLm1pbi5qcycpLFxuLy8gSnNTSVAgPSBnbG9iYWwuSnNTSVAsXG5vcHRpb25zLFxuc2lwQ2xpZW50LFxuc2lwU2Vzc2lvbixcbnNpcENhbGxFdmVudHM7XG5cbmZ1bmN0aW9uIGlzV2VicnRjU3VwcG9ydGVkKCl7XG5cdHZhciBSVEMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHwgd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uIHx8IHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbixcblx0XHR1c2VyTWVpZGEgPSBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEsXG5cdFx0aWNlID0gd2luZG93Lm1velJUQ0ljZUNhbmRpZGF0ZSB8fCB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlO1xuXG5cdHJldHVybiAhIVJUQyAmJiAhIXVzZXJNZWlkYSAmJiAhIWljZTtcbn1cblxuZnVuY3Rpb24gaW5pdEpzU0lQRXZlbnRzKCl7XG5cdHNpcENsaWVudC5vbignY29ubmVjdGVkJywgZnVuY3Rpb24oZSl7IGRlYnVnLmxvZygnc2lwIGNvbm5lY3RlZCBldmVudDogJywgZSk7IH0pO1xuXHRzaXBDbGllbnQub24oJ2Rpc2Nvbm5lY3RlZCcsIGZ1bmN0aW9uKGUpeyBkZWJ1Zy5sb2coJ3NpcCBkaXNjb25uZWN0ZWQgZXZlbnQ6ICcsIGUpOyB9KTtcblx0c2lwQ2xpZW50Lm9uKCduZXdNZXNzYWdlJywgZnVuY3Rpb24oZSl7IGRlYnVnLmxvZygnc2lwIG5ld01lc3NhZ2UgZXZlbnQ6ICcsIGUpOyB9KTtcblx0c2lwQ2xpZW50Lm9uKCduZXdSVENTZXNzaW9uJywgZnVuY3Rpb24oZSl7XG5cdFx0ZGVidWcubG9nKCdzaXAgbmV3UlRDU2Vzc2lvbiBldmVudDogJywgZSk7XG5cdFx0ZXZlbnRzLmVtaXQoJ3dlYnJ0Yy9uZXdSVENTZXNzaW9uJywgZSk7XG5cdFx0Ly8gaWYoZS5zZXNzaW9uLmRpcmVjdGlvbiA9PT0gJ291dGdvaW5nJylcblx0XHQvLyBcdGV2ZW50cy5lbWl0KCd3ZWJydGMvb3V0Z29pbmdDYWxsJywgZSk7XG5cdFx0Ly8gZWxzZVxuXHRcdC8vIFx0ZXZlbnRzLmVtaXQoJ3dlYnJ0Yy9pbmNvbWluZ0NhbGwnLCBlKTtcblx0XHRcblx0XHRcdHNpcFNlc3Npb24gPSBlLnNlc3Npb247XG5cdH0pO1xuXHRzaXBDbGllbnQub24oJ3JlZ2lzdGVyZWQnLCBmdW5jdGlvbihlKXsgZGVidWcubG9nKCdzaXAgcmVnaXN0ZXJlZCBldmVudDogJywgZSk7IH0pO1xuXHRzaXBDbGllbnQub24oJ3VucmVnaXN0ZXJlZCcsIGZ1bmN0aW9uKGUpeyBkZWJ1Zy5sb2coJ3NpcCB1bnJlZ2lzdGVyZWQgZXZlbnQ6ICcsIGUpOyB9KTtcblx0c2lwQ2xpZW50Lm9uKCdyZWdpc3RyYXRpb25GYWlsZWQnLCBmdW5jdGlvbihlKXsgZGVidWcubG9nKCdzaXAgcmVnaXN0cmF0aW9uRmFpbGVkIGV2ZW50OiAnLCBlKTsgfSk7XG5cblx0c2lwQ2FsbEV2ZW50cyA9IHtcblx0XHRwcm9ncmVzczogZnVuY3Rpb24oZSl7XG5cdFx0XHRkZWJ1Zy5sb2coJ2NhbGwgcHJvZ3Jlc3MgZXZlbnQ6ICcsIGUpO1xuXHRcdFx0ZXZlbnRzLmVtaXQoJ3dlYnJ0Yy9wcm9ncmVzcycsIGUpO1xuXHRcdH0sXG5cdFx0ZmFpbGVkOiBmdW5jdGlvbihlKXtcblx0XHRcdGRlYnVnLmxvZygnY2FsbCBmYWlsZWQgZXZlbnQ6JywgZSk7XG5cdFx0XHRldmVudHMuZW1pdCgnd2VicnRjL2ZhaWxlZCcsIGUpO1xuXHRcdH0sXG5cdFx0ZW5kZWQ6IGZ1bmN0aW9uKGUpe1xuXHRcdFx0ZGVidWcubG9nKCdjYWxsIGVuZGVkIGV2ZW50OiAnLCBlKTtcblx0XHRcdGV2ZW50cy5lbWl0KCd3ZWJydGMvZW5kZWQnLCBlKTtcblx0XHR9LFxuXHRcdGNvbmZpcm1lZDogZnVuY3Rpb24oZSl7XG5cdFx0XHRkZWJ1Zy5sb2coJ2NhbGwgY29uZmlybWVkIGV2ZW50OiAnLCBlKTtcblx0XHRcdGV2ZW50cy5lbWl0KCd3ZWJydGMvY29uZmlybWVkJywgZSk7XG5cdFx0fSxcblx0XHRhZGRzdHJlYW06IGZ1bmN0aW9uKGUpe1xuXHRcdFx0ZGVidWcubG9nKCdjYWxsIGFkZHN0cmVhbSBldmVudDogJywgZSk7XG5cdFx0XHRldmVudHMuZW1pdCgnd2VicnRjL2FkZHN0cmVhbScsIGUpO1xuXHRcdFx0dmFyIHN0cmVhbSA9IGUuc3RyZWFtO1xuXHRcdFx0b3B0aW9ucy5hdWRpb1JlbW90ZSA9IEpzU0lQLnJ0Y25pbmphLmF0dGFjaE1lZGlhU3RyZWFtKG9wdGlvbnMuYXVkaW9SZW1vdGUsIHN0cmVhbSk7XG5cdFx0fVxuXHRcdC8vIHNkcDogZnVuY3Rpb24oZSl7XG5cdFx0Ly8gXHRkZWJ1Zy5sb2coJ3NkcDogJywgZSk7XG5cdFx0Ly8gfVxuXHR9O1xufVxuXG5mdW5jdGlvbiBpc0VzdGFibGlzaGVkKCl7XG5cdHJldHVybiBzaXBTZXNzaW9uLmlzRXN0YWJsaXNoZWQoKTtcbn1cblxuZnVuY3Rpb24gaXNJblByb2dyZXNzKCl7XG5cdHJldHVybiBzaXBTZXNzaW9uLmlzSW5Qcm9ncmVzcygpO1xufVxuXG5mdW5jdGlvbiBpc0VuZGVkKCl7XG5cdHJldHVybiBzaXBTZXNzaW9uLmlzRW5kZWQoKTtcbn1cblxuZnVuY3Rpb24gdW5yZWdpc3Rlcigpe1xuXHRzaXBDbGllbnQuc3RvcCgpO1xufVxuXG5mdW5jdGlvbiBhdWRpb2NhbGwobnVtYmVyKXtcblx0c2lwU2Vzc2lvbiA9IHNpcENsaWVudC5jYWxsKG51bWJlciwge1xuXHRcdGV2ZW50SGFuZGxlcnM6IHNpcENhbGxFdmVudHMsXG5cdFx0bWVkaWFDb25zdHJhaW50czogeyBhdWRpbzogdHJ1ZSwgdmlkZW86IGZhbHNlIH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIHRlcm1pbmF0ZSgpe1xuXHRzaXBTZXNzaW9uLnRlcm1pbmF0ZSh7XG5cdFx0c3RhdHVzX2NvZGU6IDIwMFxuXHR9KTtcblx0Ly8gc2lwQ2xpZW50LnRlcm1pbmF0ZVNlc3Npb25zKCk7XG59XG5cbmZ1bmN0aW9uIGFuc3dlcigpe1xuXHRkZWJ1Zy5sb2coJ2Fuc3dlcjogJyxzaXBDbGllbnQpO1xuXHRzaXBTZXNzaW9uLmFuc3dlcigpO1xufVxuXG5mdW5jdGlvbiBob2xkKCl7XG5cdGRlYnVnLmxvZygnaG9sZDogJywgc2lwU2Vzc2lvbi5pc09uSG9sZCgpKTtcblx0aWYoc2lwU2Vzc2lvbiAmJiBzaXBTZXNzaW9uLmlzT25Ib2xkKCkubG9jYWwpIHtcblx0XHRzaXBTZXNzaW9uLnVuaG9sZCgpO1xuXHR9IGVsc2Uge1xuXHRcdHNpcFNlc3Npb24uaG9sZCgpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlbW90ZUF1ZGlvKCl7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5cdGVsLnNldEF0dHJpYnV0ZSgnYXV0b3BsYXknLCAnYXV0b3BsYXknKTtcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG5cdHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gaW5pdChvcHRzKXtcblx0ZGVidWcubG9nKCdJbml0aWF0aW5nIFdlYlJUQyBtb2R1bGU6Jywgb3B0cyk7XG5cdG9wdGlvbnMgPSBvcHRzO1xuXHRpZihvcHRpb25zLnNpcC5yZWdpc3RlciA9PT0gdW5kZWZpbmVkKSBvcHRpb25zLnNpcC5yZWdpc3RlciA9IGZhbHNlO1xuXHR2YXIgc29ja2V0ID0gbmV3IEpzU0lQLldlYlNvY2tldEludGVyZmFjZShvcHRpb25zLnNpcC53c19zZXJ2ZXJzKTtcblx0b3B0aW9ucy5zaXAuc29ja2V0cyA9IFtzb2NrZXRdO1xuXG5cdC8vICEhZ2V0IHJpZCBvZiB0aGlzISFcblx0ZXZlbnRzLmVtaXQgPSBvcHRzLmVtaXQ7XG5cdGV2ZW50cy5vbiA9IG9wdHMub247XG5cdC8vICEhZ2V0IHJpZCBvZiB0aGlzISFcblxuXHRvcHRpb25zLmF1ZGlvUmVtb3RlID0gY3JlYXRlUmVtb3RlQXVkaW8oKTtcblx0c2lwQ2xpZW50ID0gbmV3IEpzU0lQLlVBKG9wdGlvbnMuc2lwKTtcblx0aW5pdEpzU0lQRXZlbnRzKCk7XG5cdHNpcENsaWVudC5zdGFydCgpO1xuXHQvLyByZXR1cm4gc2lwQ2xpZW50O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0bGliOiBKc1NJUCxcblx0aW5pdDogaW5pdCxcblx0dW5yZWdpc3RlcjogdW5yZWdpc3Rlcixcblx0YXVkaW9jYWxsOiBhdWRpb2NhbGwsXG5cdHRlcm1pbmF0ZTogdGVybWluYXRlLFxuXHRhbnN3ZXI6IGFuc3dlcixcblx0aG9sZDogaG9sZCxcblx0aXNJblByb2dyZXNzOiBpc0luUHJvZ3Jlc3MsXG5cdGlzRXN0YWJsaXNoZWQ6IGlzRXN0YWJsaXNoZWQsXG5cdGlzRW5kZWQ6IGlzRW5kZWQsXG5cdGlzU3VwcG9ydGVkOiBpc1dlYnJ0Y1N1cHBvcnRlZFxufTsiLCJ2YXIgZG9taWZ5ID0gcmVxdWlyZSgnZG9taWZ5Jyk7XG52YXIgY29yZSA9IHJlcXVpcmUoJy4vY29yZScpO1xudmFyIHN0b3JhZ2UgPSByZXF1aXJlKCcuL3N0b3JhZ2UnKTtcbnZhciByZXF1ZXN0ID0gcmVxdWlyZSgnLi9yZXF1ZXN0Jyk7XG52YXIgZGVidWcgPSByZXF1aXJlKCcuL2RlYnVnJyk7XG52YXIgXyA9IHJlcXVpcmUoJy4vbG9kYXNoJyk7XG52YXIgZnJhc2VzID0gbnVsbDtcbnZhciBjb2Jyb3dzaW5nID0gcmVxdWlyZSgnLi9jb2Jyb3dzaW5nJyk7XG52YXIgdGVtcGxhdGVzID0gcmVxdWlyZSgnLi90ZW1wbGF0ZXMnKTtcbnZhciBXZWJSVEMgPSByZXF1aXJlKCcuL3dlYnJ0YycpO1xudmFyIGF1ZGlvID0gcmVxdWlyZSgnLi9hdWRpby1jb250cm9sJyk7XG4vLyB2YXIgc2VydmVyVXJsID0ge307XG52YXIgZm9ybXM7XG52YXIgYXBpO1xuXG4vLyBXaWRnZXQgaW5pdGlhdGlvbiBvcHRpb25zXG52YXIgZGVmYXVsdHMgPSB7XG5cdC8vIHByZWZpeCBmb3IgQ1NTIGNsYXNzZXMgYW5kIGlkcy4gXG5cdC8vIENoYW5nZSBpdCBvbmx5IGlmIHRoZSBkZWZhdWx0IHByZWZpeCBcblx0Ly8gbWF0Y2hlcyB3aXRoIGV4aXN0ZWQgY2xhc3NlcyBvciBpZHMgb24gdGhlIHdlYnNpdGVcblx0cHJlZml4OiAnc3djJyxcblx0Ly8gSW5pdCBtb2R1bGUgb24gcGFnZSBsb2FkXG5cdGF1dG9TdGFydDogdHJ1ZSxcblx0Ly8gd2hldGhlciBvciBub3QgdG8gYXNrIHVzZXIgXG5cdC8vIHRvIGludHJvZHVjZSBoaW0gc2VsZiBiZWZvcmUgdGhlIGNoYXQgc2Vzc2lvblxuXHRpbnRybzogZmFsc2UsXG5cdC8vIHdoZXRoZXIgb3Igbm90IHRvIGFkZCB3aWRnZXQgdG8gdGhlIHdlYnBhZ2Vcblx0d2lkZ2V0OiB0cnVlLFxuXHQvLyBlbmFibGUgY2hhdCBmZWF0dXJlXG5cdGNoYXQ6IHRydWUsXG5cdC8vIGNoYW5uZWxzIHNldHRpbmdzXG5cdGNoYW5uZWxzOiB7XG5cdFx0d2VicnRjOiB7fSxcblx0XHRjYWxsYmFjazoge31cblx0fSxcblx0Ly8gZW5hYmxlIGNvYnJvd3NpbmcgZmVhdHVyZVxuXHRjb2Jyb3dzaW5nOiBmYWxzZSxcblx0Ly8gRE9NIGVsZW1lbnRbc10gc2VsZWN0b3IgdGhhdCBvcGVucyBhIHdpZGdldFxuXHRidXR0b25TZWxlY3RvcjogXCJcIixcblx0cmVDcmVhdGVTZXNzaW9uOiB0cnVlLFxuXHR0aXRsZTogJycsXG5cdGxhbmc6ICcnLFxuXHRsYW5nRnJvbVVybDogdHJ1ZSxcblx0cG9zaXRpb246ICdyaWdodCcsXG5cdGhpZGVPZmZsaW5lQnV0dG9uOiBmYWxzZSxcblx0b2ZmZXI6IGZhbHNlLFxuXHRzdHlsZXM6IHtcblx0XHRwcmltYXJ5OiB7XG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICcjNzRiOWZmJyxcblx0XHRcdGNvbG9yOiAnI0ZGRkZGRidcblx0XHR9LFxuXHRcdGludHJvOiB7XG5cdFx0XHQvLyBiYWNrZ3JvdW5kSW1hZ2U6IFwiaW1hZ2VzL2Jnci0wMi5qcGdcIlxuXHRcdH0sXG5cdFx0c2VuZG1haWw6IHtcblx0XHRcdC8vIGJhY2tncm91bmRJbWFnZTogXCJpbWFnZXMvYmdyLTAxLmpwZ1wiXG5cdFx0fSxcblx0XHRjbG9zZUNoYXQ6IHtcblx0XHRcdC8vIGJhY2tncm91bmRJbWFnZTogXCJpbWFnZXMvYmdyLTAyLmpwZ1wiXG5cdFx0fVxuXHR9LFxuXHRidXR0b25TdHlsZXM6IHtcblx0XHRvbmxpbmU6IHtcblx0XHRcdGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMTc1LDIyOSwyNTUsMC44KScsXG5cdFx0XHRjb2xvcjogJydcblx0XHR9LFxuXHRcdG9mZmxpbmU6IHtcblx0XHRcdGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjQxLDI0MSwyNDEsMC44KScsXG5cdFx0XHRjb2xvcjogJydcblx0XHR9LFxuXHRcdHRpbWVvdXQ6IHtcblx0XHRcdGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjQxLDI0MSwyNDEsMC44KScsXG5cdFx0XHRjb2xvcjogJydcblx0XHR9LFxuXHRcdG5vdGlmaWVkOiB7XG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDI1MywyNTAsMTI5LDAuOCknLFxuXHRcdFx0Y29sb3I6ICcnXG5cdFx0fSxcblx0XHRjb2xvcjogJ3JnYig3MCw3MCw3MCknXG5cdH0sXG5cdHdpZGdldFdpbmRvd09wdGlvbnM6ICdsZWZ0PTEwLHRvcD0xMCx3aWR0aD0zNTAsaGVpZ2h0PTU1MCxyZXNpemFibGUnLFxuXHQvLyBhYnNvbHV0ZSBwYXRoIHRvIHRoZSB3Y2hhdCBmb2xkZXJcblx0cGF0aDogJy9pcGNjL3dlYmNoYXQvJyxcblx0Ly8gYWJzb2x1dGUgcGF0aCB0byB0aGUgY2xpZW50cyBmaWxlcy4gSWYgbm90IHNldCwgZmlsZXMgcmVxdWVzdGVkIGZyb20gZGVmYXVsdHMuc2VydmVyICsgZGVmYXVsdHMucGF0aC5cblx0Y2xpZW50UGF0aDogJ2h0dHBzOi8vY2RuLnNtaWxlLXNvZnQuY29tL3djaGF0L3YxLycsXG5cdC8vIGFic29sdXRlIHBhdGggdG8gdGhlIGNzcyBmbGllXG5cdHN0eWxlc1BhdGg6ICcnLFxuXHQvLyBhYnNvbHV0ZSBwYXRoIHRvIHRoZSB0cmFuc2xhdGlvbnMuanNvbiBmbGllXG5cdHRyYW5zbGF0aW9uc1BhdGg6ICcnLFxuXHQvLyBkaXNwbGF5ZWQgaW4gdGhlIGVtYWlsIHRlbXBsYXRlXG5cdGhvc3Q6IHdpbmRvdy5sb2NhdGlvbi5ob3N0LFxuXHR3ZWJydGNFbmFibGVkOiBmYWxzZSxcbn07XG5cbnZhciBnbG9iYWxTZXR0aW5ncyA9IFwiV2NoYXRTZXR0aW5nc1wiO1xuXG4vLyBDdXJyZW50IHdpZGdldCBzdGF0ZVxudmFyIHdpZGdldFN0YXRlID0ge1xuXHRpbml0aWF0ZWQ6IGZhbHNlLFxuXHRhY3RpdmU6IGZhbHNlLFxuXHRzdGF0ZTogJycsIC8vIFwib25saW5lXCIgfCBcIm9mZmxpbmVcIiB8IFwidGltZW91dFwiLFxuXHRzaGFyZTogZmFsc2UsXG5cdHNvdW5kczogdHJ1ZVxufTtcblxudmFyIGRpYWxvZyA9IFtdO1xudmFyIG1lc3NhZ2VzID0gW107XG5cbi8vIGF2YWlsYWJsZSBkaWFsb2cgbGFuZ3VhZ2VzXG52YXIgbGFuZ3MgPSBbXTtcbi8vIHZhciBjdXJyTGFuZyA9ICcnO1xudmFyIHNlc3Npb25UaW1lb3V0O1xudmFyIGNoYXRUaW1lb3V0O1xudmFyIG1vdXNlRm9jdXNlZCA9IGZhbHNlO1xuLy8gV2lkZ2V0IGRvbSBlbGVtZW50XG52YXIgd2lkZ2V0O1xuXG4vLyBXaWRnZXQgaW4gYSBzZXBhcmF0ZSB3aW5kb3dcbnZhciB3aWRnZXRXaW5kb3c7XG4vLyBXaWRnZXQgcGFuZXMgZWxlbWVudHNcbnZhciBhZ2VudElzVHlwaW5nVGltZW91dDtcbnZhciB1c2VySXNUeXBpbmdUaW1lb3V0O1xudmFyIHRpbWVyVXBkYXRlSW50ZXJ2YWw7XG52YXIgcG9sbFR1cm5zID0gMTtcbnZhciBjb2Jyb3dzaW5nUGVybWlzc2lvbkdpdmVuID0gZmFsc2U7XG5cbnZhciBwdWJsaWNBcGkgPSB7XG5cblx0aW5pdE1vZHVsZTogaW5pdE1vZHVsZSxcblx0aW5pdFdpZGdldFN0YXRlOiBpbml0V2lkZ2V0U3RhdGUsXG5cdG9wZW5XaWRnZXQ6IG9wZW5XaWRnZXQsXG5cdGluaXRDaGF0OiBpbml0Q2hhdCxcblx0aW5pdENhbGw6IGluaXRDYWxsLFxuXHRnZXRXaWRnZXRFbGVtZW50OiBnZXRXaWRnZXRFbGVtZW50LFxuXHRpc1dlYnJ0Y1N1cHBvcnRlZDogV2ViUlRDLmlzU3VwcG9ydGVkLFxuXHRnZXRXaWRnZXRTdGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHdpZGdldFN0YXRlO1xuXHR9LFxuXHRnZXRFbnRpdHk6IGZ1bmN0aW9uKCl7IHJldHVybiBzdG9yYWdlLmdldFN0YXRlKCdlbnRpdHknLCAnc2Vzc2lvbicpOyB9LFxuXHRvbjogZnVuY3Rpb24oZXZ0LCBsaXN0ZW5lcikge1xuXHRcdGFwaS5vbihldnQsIGxpc3RlbmVyKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0ZW1pdDogZnVuY3Rpb24gKGV2dCwgbGlzdGVuZXIpe1xuXHRcdGFwaS5lbWl0KGV2dCwgbGlzdGVuZXIpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHQvKipcblx0ICogU2V0IGRlZmF1bHQgdXNlciBjcmVkZW50aWFscy5cblx0ICogSWYgXCJpbnRyb1wiIGlzIGZhbHNlLCB0aGFuIGRpYWxvZyB3aWxsIHN0YXJ0IHdpdGggdGhlc2UgY3JlZGVudGlhbHMuXG5cdCAqIE5PVEU6IE11c3QgYmUgY2FsbGVkIGJlZm9yZSBpbml0TW9kdWxlIG1ldGhvZFxuXHQgKiBcblx0ICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFVzZXIgY3JlZGVudGlhbHMsIGkuZS4gXCJ1bmFtZVwiLCBcImxhbmdcIiwgXCJwaG9uZVwiLCBcInN1YmplY3RcIlxuXHQgKi9cblx0c2V0RGVmYXVsdENyZWRlbnRpYWxzOiBmdW5jdGlvbihwYXJhbXMpIHtcblx0XHRkZWZhdWx0cy5jcmVkZW50aWFscyA9IHBhcmFtcztcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdG1vZHVsZTogV2lkZ2V0LFxuXHRhcGk6IHB1YmxpY0FwaVxufTtcblxuLy8gSW5pdGlhdGUgdGhlIG1vZHVsZSB3aXRoIHRoZSBnbG9iYWwgc2V0dGluZ3NcbmlmKGdsb2JhbFtnbG9iYWxTZXR0aW5nc10gJiYgZ2xvYmFsW2dsb2JhbFNldHRpbmdzXS5hdXRvU3RhcnQgIT09IGZhbHNlICYmIGRlZmF1bHRzLmF1dG9TdGFydCkge1xuXHRpZihkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJpbnRlcmFjdGl2ZVwiKSB7XG5cdCAgICBXaWRnZXQoZ2xvYmFsW2dsb2JhbFNldHRpbmdzXSk7XG5cdH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHsgV2lkZ2V0KGdsb2JhbFtnbG9iYWxTZXR0aW5nc10pOyB9LCBmYWxzZSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gV2lkZ2V0KG9wdGlvbnMpe1xuXG5cdGlmKHdpZGdldFN0YXRlLmluaXRpYXRlZCkgcmV0dXJuIHB1YmxpY0FwaTtcblxuXHRfLm1lcmdlKGRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblx0Ly8gXy5hc3NpZ24oZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG5cdGRlYnVnLmxvZygnV2lkZ2V0OiAnLCBvcHRpb25zKTtcblxuXHRkZWZhdWx0cy5jbGllbnRQYXRoID0gb3B0aW9ucy5jbGllbnRQYXRoID8gb3B0aW9ucy5jbGllbnRQYXRoIDogKGRlZmF1bHRzLmNsaWVudFBhdGggfHwgKGRlZmF1bHRzLnNlcnZlciArIGRlZmF1bHRzLnBhdGgpKTtcblxuXHRhZGRXaWRnZXRTdHlsZXMoKTtcblx0aWYoZGVmYXVsdHMuYnV0dG9uU2VsZWN0b3IpIFxuXHRcdHNldEhhbmRsZXJzKGRlZmF1bHRzLmJ1dHRvblNlbGVjdG9yKTtcblx0XG5cdC8vIHNlcnZlclVybCA9IHJlcXVpcmUoJ3VybCcpLnBhcnNlKGRlZmF1bHRzLnNlcnZlciwgdHJ1ZSk7XG5cblx0Ly8gRW5hYmxpbmcgYXVkaW8gbW9kdWxlXG5cdGF1ZGlvLmluaXQoZGVmYXVsdHMuY2xpZW50UGF0aCsnc291bmRzLycpO1xuXG5cdGFwaSA9IG5ldyBjb3JlKGRlZmF1bHRzKVxuXHQub24oJ3Nlc3Npb24vY3JlYXRlJywgb25TZXNzaW9uU3VjY2Vzcylcblx0Lm9uKCdzZXNzaW9uL3RpbWVvdXQnLCBvblNlc3Npb25UaW1lb3V0KVxuXHQub24oJ3Nlc3Npb24vam9pbicsIG9uU2Vzc2lvbkpvaW5SZXF1ZXN0KVxuXHQub24oJ3Nlc3Npb24vam9pbmVkJywgb25TZXNzaW9uSm9pbilcblx0Lm9uKCdzZXNzaW9uL2Rpc2pvaW4nLCBvblNlc3Npb25EaXNqb2luKVxuXHQub24oJ3Nlc3Npb24vaW5pdCcsIG9uU2Vzc2lvbkluaXQpO1xuXHQvLyAub24oJ2NoYXQvbGFuZ3VhZ2VzJywgZnVuY3Rpb24oKSB7XG5cdC8vIFx0Y2hhbmdlV2dTdGF0ZSh7IHN0YXRlOiBnZXRXaWRnZXRTdGF0ZSgpIH0pO1xuXHQvLyB9KTtcdFxuXG5cdGlmKGRlZmF1bHRzLndpZGdldCkge1xuXHRcdGFwaVxuXHRcdC8vIC5vbignY2hhdC9zdGFydCcsIHN0YXJ0Q2hhdClcblx0XHQub24oJ2NoYXQvY2xvc2UnLCBvbkNoYXRDbG9zZSlcblx0XHQub24oJ2NoYXQvdGltZW91dCcsIG9uQ2hhdFRpbWVvdXQpXG5cdFx0Lm9uKCdtZXNzYWdlL25ldycsIGNsZWFyVW5kZWxpdmVyZWQpXG5cdFx0Lm9uKCdtZXNzYWdlL25ldycsIG5ld01lc3NhZ2UpXG5cdFx0Lm9uKCdtZXNzYWdlL3R5cGluZycsIG9uQWdlbnRUeXBpbmcpXG5cdFx0Lm9uKCdjYWxsYmFjay9jcmVhdGUnLCBvbkNhbGxiYWNrUmVxdWVzdGVkKVxuXHRcdC5vbignZm9ybS9zdWJtaXQnLCBvbkZvcm1TdWJtaXQpXG5cdFx0Lm9uKCdmb3JtL3JlamVjdCcsIGNsb3NlRm9ybSlcblx0XHQub24oJ3dpZGdldC9sb2FkJywgaW5pdFdpZGdldCk7XG5cdFx0Ly8gLm9uKCd3aWRnZXQvaW5pdCcsIG9uV2lkZ2V0SW5pdCk7XG5cdFx0Ly8gLm9uKCd3aWRnZXQvc3RhdGVjaGFuZ2UnLCBjaGFuZ2VXZ1N0YXRlKTtcblx0fVxuXG5cdGlmKFdlYlJUQy5pc1N1cHBvcnRlZCgpICYmIGRlZmF1bHRzLmNoYW5uZWxzLndlYnJ0YyAmJiBkZWZhdWx0cy5jaGFubmVscy53ZWJydGMuc2lwICYmIGRlZmF1bHRzLmNoYW5uZWxzLndlYnJ0Yy5zaXAud3Nfc2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0aWYod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6Jyl7XG5cdFx0Ly8gaWYod2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyAmJiBzZXJ2ZXJVcmwucHJvdG9jb2wgPT09ICdodHRwczonKXtcblx0XHRcdC8vIHNldCBmbGFnIHRvIGluZGljYXRlIHRoYXQgd2VicnRjIGZlYXR1cmUgaXMgc3VwcG9ydGVkIGFuZCBlbmFibGVkXG5cdFx0XHRkZWZhdWx0cy53ZWJydGNFbmFibGVkID0gdHJ1ZTtcblxuXHRcdFx0Ly8gc2V0IHdlYnJ0YyBldmVudCBoYW5kbGVyc1xuXHRcdFx0YXBpLm9uKCd3ZWJydGMvbmV3UlRDU2Vzc2lvbicsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGluaXRDYWxsU3RhdGUoJ25ld1JUQ1Nlc3Npb24nKTtcblx0XHRcdH0pO1xuXHRcdFx0YXBpLm9uKCd3ZWJydGMvcHJvZ3Jlc3MnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0aWYoZS5yZXNwb25zZS5zdGF0dXNfY29kZSA9PT0gMTgwKSB7XG5cdFx0XHRcdFx0aW5pdENhbGxTdGF0ZSgncmluZ2luZycpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGluaXRDYWxsU3RhdGUoJ2NvbmZpcm1lZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGFwaS5vbignd2VicnRjL2FkZHN0cmVhbScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGluaXRDYWxsU3RhdGUoJ2Nvbm5lY3RlZCcpO1xuXHRcdFx0fSk7XG5cdFx0XHRhcGkub24oJ3dlYnJ0Yy9lbmRlZCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGluaXRDYWxsU3RhdGUoJ2VuZGVkJyk7XG5cdFx0XHR9KTtcblx0XHRcdGFwaS5vbignd2VicnRjL2ZhaWxlZCcsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0XHRpZihlLmNhdXNlID09PSAnQ2FuY2VsZWQnKXtcblx0XHRcdFx0XHRpbml0Q2FsbFN0YXRlKCdjYW5jZWxlZCcpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGluaXRDYWxsU3RhdGUoJ2ZhaWxlZCcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gcmluZ1RvbmUgYXVkaW8gZWxlbWVudCBwbGF5cyByaW5nVG9uZSBzb3VuZCB3aGVuIGNhbGxpbmcgdG8gYWdlbnRcblx0XHRcdC8vIHJpbmdUb25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcblx0XHRcdC8vIHJpbmdUb25lLnNyYyA9IGRlZmF1bHRzLmNsaWVudFBhdGgrJ3NvdW5kcy9yaW5nb3V0Lndhdic7XG5cdFx0XHQvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJpbmdUb25lKTtcblxuXHRcdFx0Ly8gaW5pdGlhdGUgd2VicnRjIG1vZHVsZSB3aXRoIHBhcmFtZXRlcnNcblx0XHRcdGluaXRXZWJydGNNb2R1bGUoe1xuXHRcdFx0XHRzaXA6IGRlZmF1bHRzLmNoYW5uZWxzLndlYnJ0Yy5zaXAsXG5cdFx0XHRcdGVtaXQ6IHB1YmxpY0FwaS5lbWl0LFxuXHRcdFx0XHRvbjogcHVibGljQXBpLm9uXG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gd2VicnRjIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlciwgYnV0IHRoZSBjdXJyZW50IHdlYiBwYWdlXG5cdFx0XHQvLyBpcyBsb2NhdGVkIG9uIGluc2VjdXJlIG9yaWdpbnMsIHRoZXJlZm9yZSB0aGUgd2VicnRjIGlzIG5vdCBzdXBwb3J0ZWRcblx0XHRcdGRlYnVnLndhcm4oJ1dlYlJUQyBmZWF0dXJlIGlzIGRpc2FibGVkJyk7XG5cdFx0XHRkZWJ1Zy53YXJuKCdnZXRVc2VyTWVkaWEoKSBubyBsb25nZXIgd29ya3Mgb24gaW5zZWN1cmUgb3JpZ2lucy4gVG8gdXNlIHRoaXMgZmVhdHVyZSwgeW91IHNob3VsZCBjb25zaWRlciBzd2l0Y2hpbmcgeW91ciBhcHBsaWNhdGlvbiB0byBhIHNlY3VyZSBvcmlnaW4sIHN1Y2ggYXMgSFRUUFMuIFNlZSBodHRwczovL2dvby5nbC9yU3RUR3ogZm9yIG1vcmUgZGV0YWlscy4nKTtcblx0XHR9XG5cdH1cblx0XG5cdC8vIHNldFNlc3Npb25UaW1lb3V0SGFuZGxlcigpO1xuXG5cdC8vIGxvYWQgdHJhbnNsYXRpb25zXG5cdHJlcXVlc3QuZ2V0KCdmcmFzZXMnLCAoZGVmYXVsdHMudHJhbnNsYXRpb25zUGF0aCB8fCBkZWZhdWx0cy5jbGllbnRQYXRoKSsndHJhbnNsYXRpb25zLmpzb24nLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpe1xuXHRcdGlmKGVycikgcmV0dXJuIGFwaS5lbWl0KCdFcnJvcicsIGVycik7XG5cdFx0ZnJhc2VzID0gSlNPTi5wYXJzZShyZXN1bHQpO1xuXHRcdGZyYXNlcyA9IGZyYXNlc1thcGkuZGV0ZWN0TGFuZ3VhZ2UoZnJhc2VzKV1cblx0fSk7XG5cdFxuXHQvLyBsb2FkIGZvcm1zXG5cdHJlcXVlc3QuZ2V0KCdmb3Jtc19qc29uJywgZGVmYXVsdHMuY2xpZW50UGF0aCsnZm9ybXMuanNvbicsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCl7XG5cdFx0aWYoZXJyKSByZXR1cm4gYXBpLmVtaXQoJ0Vycm9yJywgZXJyKTtcblx0XHRmb3JtcyA9IEpTT04ucGFyc2UocmVzdWx0KS5mb3Jtcztcblx0fSk7XG5cblx0cmV0dXJuIHB1YmxpY0FwaTtcbn1cblxuZnVuY3Rpb24gaW5pdE1vZHVsZSgpe1xuXHRhcGkuaW5pdCgpO1xuXHRyZXR1cm4gcHVibGljQXBpO1xufVxuXG5mdW5jdGlvbiBpbml0V2VicnRjTW9kdWxlKG9wdHMpe1xuXHRkZWJ1Zy5sb2coJ2luaXRXZWJydGNNb2R1bGU6ICcsIG9wdHMpO1xuXHRXZWJSVEMuaW5pdChvcHRzKTtcbn1cblxuLy8gU2Vzc2lvbiBpcyBlaXRoZXIgY3JlYXRlZCBvciBjb250aW51ZXNcbmZ1bmN0aW9uIG9uU2Vzc2lvblN1Y2Nlc3MoKXtcdFxuXHQvLyBXYWl0IHdoaWxlIHRyYW5zbGF0aW9ucyBhcmUgbG9hZGVkXG5cdF8ucG9sbChmdW5jdGlvbigpe1xuXHRcdGRlYnVnLmxvZygncG9sbDogJywgZnJhc2VzKTtcblx0XHRyZXR1cm4gKGZyYXNlcyAhPT0gbnVsbCk7XG5cblx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0aW5pdFNlc3Npb24oKVxuXHRcdC8vIGlmIHdpbmRvdyBpcyBub3QgYSBvcGVuZWQgd2luZG93XG5cdFx0aWYoIWRlZmF1bHRzLmV4dGVybmFsKSB7XG5cdFx0XHRhcGkudXBkYXRlVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblx0XHR9XG5cblx0fSwgZnVuY3Rpb24oKXtcblx0XHRcblx0XHRpZihwb2xsVHVybnMgPCAyKSB7XG5cdFx0XHRwb2xsVHVybnMrKztcblx0XHRcdFdpZGdldChkZWZhdWx0cyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBhcGkuZW1pdCgnRXJyb3InLCAnTW9kdWxlIHdhc25cXCd0IGluaXRpYXRlZCBkdWUgdG8gbmV0d29yayBlcnJvcnMnKTtcblx0XHR9XG5cblx0fSwgNjAwMDApO1xuXG59XG5cbmZ1bmN0aW9uIGluaXRTZXNzaW9uKCkge1xuXHRcblx0aWYoIWRlZmF1bHRzLmNoYXQgJiYgIWRlZmF1bHRzLndlYnJ0Y0VuYWJsZWQgJiYgIWRlZmF1bHRzLmNoYW5uZWxzLmNhbGxiYWNrLnRhc2spIHJldHVybiBmYWxzZTtcblxuXHRkZWJ1Zy5sb2coJ3Nlc3Npb24gaW5pdGlhdGVkJywgYXBpLnNlc3Npb24pO1xuXHRcblx0Z2V0TGFuZ3VhZ2VzKCk7XG5cblx0Ly8gSWYgcGFnZSBsb2FkZWQgYW5kIFwid2lkZ2V0XCIgcHJvcGVydHkgaXMgc2V0IC0gbG9hZCB3aWRnZXRcblx0aWYoZGVmYXVsdHMud2lkZ2V0ICYmICF3aWRnZXRTdGF0ZS5pbml0aWF0ZWQgJiYgaXNCcm93c2VyU3VwcG9ydGVkKCkpIHtcblx0XHRsb2FkV2lkZ2V0KCk7XG5cdH1cblxuXHQvLyBJZiB0aW1lb3V0IHdhcyBvY2N1cmVkLCBpbml0IGNoYXQgYWZ0ZXIgYSBzZXNzaW9uIGlzIGNyZWF0ZWRcblx0aWYoaGFzV2dTdGF0ZSgndGltZW91dCcpKSB7XG5cdFx0cmVtb3ZlV2dTdGF0ZSgndGltZW91dCcpO1xuXHR9XG5cblx0YXBpLmVtaXQoJ3Nlc3Npb24vaW5pdCcsIHtzZXNzaW9uOiBhcGkuc2Vzc2lvbiwgb3B0aW9uczogZGVmYXVsdHMsIHVybDogZ2xvYmFsLmxvY2F0aW9uLmhyZWYgfSk7XG59XG5cbmZ1bmN0aW9uIG9uU2Vzc2lvbkluaXQocGFyYW1zKXtcblx0c3RvcmFnZS5zYXZlU3RhdGUoJ2luaXQnLCB0cnVlLCAnc2Vzc2lvbicpO1xuXHRcblx0aWYod2lkZ2V0V2luZG93ICYmICF3aWRnZXRXaW5kb3cuY2xvc2VkKSB3aWRnZXRXaW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShkZWZhdWx0cy5wcmVmaXgrJy5pbml0JywgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHJlcXVlc3RCcm93c2VyQWNjZXNzKCkge1xuXHRuZXdNZXNzYWdlKHtcblx0XHRmcm9tOiBzdG9yYWdlLmdldFN0YXRlKCdhbmFtZScsICdzZXNzaW9uJyksXG5cdFx0dGltZTogRGF0ZS5ub3coKSxcblx0XHRjb250ZW50OiBcIntyZXF1ZXN0X2Jyb3dzZXJfYWNjZXNzfVwiXG5cdH0pO1xufVxuXG5mdW5jdGlvbiBvblNlc3Npb25Kb2luUmVxdWVzdChwYXJhbXMpe1xuXHRkZWJ1Zy5sb2coJ29uU2Vzc2lvbkpvaW5SZXF1ZXN0Jywgc3RvcmFnZS5nZXRTdGF0ZSgnc2hhcmVkJywgJ3Nlc3Npb24nKSk7XG5cdGlmKCFzdG9yYWdlLmdldFN0YXRlKCdzaGFyZWQnLCAnc2Vzc2lvbicpKSB7XG5cdFx0cmVxdWVzdEJyb3dzZXJBY2Nlc3MoKTtcblx0fSBlbHNlIHtcblx0XHRqb2luU2Vzc2lvbihwYXJhbXMpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGpvaW5TZXNzaW9uKHBhcmFtcykge1xuXHRhcGkuc2hhcmVPcGVuZWQoKTsgLy8gc2VuZCBjb25maXJtYXRpb24gdG8gYWdlbnRcblx0b25TZXNzaW9uSm9pbihwYXJhbXMpO1xufVxuXG4vLyBzZW5kIHNoYXJlZCBldmVudCB0byB0aGUgdXNlcidzIGJyb3dzZXJcbmZ1bmN0aW9uIG9uU2Vzc2lvbkpvaW4ocGFyYW1zKXtcblx0aW5pdENvYnJvd3NpbmdNb2R1bGUoeyB1cmw6IHBhcmFtcy51cmwsIGVudGl0eTogYXBpLnNlc3Npb24uZW50aXR5IH0pO1xufVxuXG5mdW5jdGlvbiBvblNlc3Npb25EaXNqb2luKCkge1xuXHRjb2Jyb3dzaW5nLnVuc2hhcmUoKTtcbn1cblxuZnVuY3Rpb24gaW5pdENvYnJvd3NpbmdNb2R1bGUocGFyYW1zKXtcblx0Ly8gaW5pdCBjb2Jyb3dzaW5nIG1vZHVsZSBvbmx5IG9uIG1haW4gd2luZG93XG5cdGlmKGRlZmF1bHRzLmV4dGVybmFsIHx8IGNvYnJvd3NpbmcuaXNJbml0aWF0ZWQoKSkgcmV0dXJuO1xuXG5cdGFwaS5vbignY29icm93c2luZy9pbml0JywgZnVuY3Rpb24oKXtcblx0XHRjb2Jyb3dzaW5nLnNoYXJlKCk7XG5cdFx0Ly8gY29icm93c2luZy5lbWl0RXZlbnRzKCk7XG5cdH0pO1xuXG5cdGFwaS5vbignY29icm93c2luZy91cGRhdGUnLCBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdGNvYnJvd3NpbmcudXBkYXRlRXZlbnRzKHBhcmFtcyk7XG5cdH0pO1xuXG5cdGFwaS5vbignY29icm93c2luZy9ldmVudCcsIGZ1bmN0aW9uKHBhcmFtcyl7XG5cdFx0YXBpLnVwZGF0ZUV2ZW50cyhwYXJhbXMuZXZlbnRzKVxuXHR9KTtcblxuXHRhcGkub24oJ2NvYnJvd3Npbmcvc2hhcmVkJywgZnVuY3Rpb24oKXtcblx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnc2hhcmVkJywgdHJ1ZSwgJ3Nlc3Npb24nKTtcblx0fSk7XG5cblx0YXBpLm9uKCdjb2Jyb3dzaW5nL3Vuc2hhcmVkJywgZnVuY3Rpb24ocGFyYW1zKXtcblx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnc2hhcmVkJywgZmFsc2UsICdzZXNzaW9uJyk7XG5cdH0pO1xuXHRcblx0Y29icm93c2luZy5pbml0KHtcblx0XHR3aWRnZXQ6IHBhcmFtcy53aWRnZXQsXG5cdFx0ZW50aXR5OiBwYXJhbXMuZW50aXR5LFxuXHRcdGVtaXQ6IHB1YmxpY0FwaS5lbWl0LFxuXHRcdHBhdGg6IGRlZmF1bHRzLmNsaWVudFBhdGhcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGdldFdpZGdldEVsZW1lbnQoKXtcblx0cmV0dXJuIHdpZGdldDtcbn1cblxuZnVuY3Rpb24gZ2V0TGFuZ3VhZ2VzKCl7XG5cdGFwaS5nZXRMYW5ndWFnZXMoZnVuY3Rpb24gKGVyciwgbGFuZ3Mpe1xuXHRcdGRlYnVnLmxvZygnZ2V0TGFuZ3VhZ2VzOiAnLCBlcnIsIGxhbmdzKTtcblx0XHRpZihlcnIpIHJldHVybjtcblx0XHRpZihsYW5ncykgb25OZXdMYW5ndWFnZXMobGFuZ3MpO1xuXHRcdC8vIGdldExhbmd1YWdlc1RpbWVvdXQgPSBzZXRUaW1lb3V0KGdldExhbmd1YWdlcywgZGVmYXVsdHMuY2hlY2tTdGF0dXNUaW1lb3V0KjEwMDApO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gb25OZXdMYW5ndWFnZXMobGFuZ3VhZ2VzKXtcblx0Ly8gZGVidWcubG9nKCdsYW5ndWFnZXM6ICcsIGxhbmd1YWdlcyk7XG5cdHZhciBzdGF0ZSA9IGxhbmd1YWdlcy5sZW5ndGggPyAnb25saW5lJyA6ICdvZmZsaW5lJztcblxuXHRsYW5ncyA9IGxhbmd1YWdlcztcblxuXHQvLyBpZihoYXNXZ1N0YXRlKHN0YXRlKSkgcmV0dXJuO1xuXHQvLyBpZih3aWRnZXRTdGF0ZS5zdGF0ZSA9PT0gc3RhdGUpIHJldHVybjtcblxuXHRjaGFuZ2VXZ1N0YXRlKHsgc3RhdGU6IHN0YXRlIH0pO1xuXHRhcGkuZW1pdCgnY2hhdC9sYW5ndWFnZXMnLCBsYW5ndWFnZXMpO1xufVxuXG5mdW5jdGlvbiBpbml0V2lkZ2V0KCl7XG5cdHZhciBvcHRpb25zID0gJycsIHNlbGVjdGVkO1xuXG5cdC8vIGRlYnVnLmxvZygnSW5pdCB3aWRnZXQhJyk7XG5cdHdpZGdldFN0YXRlLmluaXRpYXRlZCA9IHRydWU7XG5cblx0c2V0U3R5bGVzKCk7XG5cdHNldExpc3RlbmVycyh3aWRnZXQpO1xuXHRjaGFuZ2VXZ1N0YXRlKHsgc3RhdGU6IGdldFdpZGdldFN0YXRlKCkgfSk7XG5cblx0aWYoZGVmYXVsdHMuaGlkZU9mZmxpbmVCdXR0b24pIHtcblx0XHRhZGRXZ1N0YXRlKCduby1idXR0b24nKTtcblx0fVxuXG5cdGlmKGRlZmF1bHRzLm9mZmVyKSB7XG5cdFx0c2V0T2ZmZXIoKTtcblx0fVxuXG5cdC8vIGlmIGNoYXQgc3RhcnRlZFxuXHRpZihzdG9yYWdlLmdldFN0YXRlKCdjaGF0JywgJ3Nlc3Npb24nKSA9PT0gdHJ1ZSkge1xuXHRcdHJlcXVlc3RDaGF0KHN0b3JhZ2UuZ2V0U3RhdGUoJ2NyZWRlbnRpYWxzJywgJ3Nlc3Npb24nKSB8fCB7fSk7XG5cdFx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnb3BlbmVkJywgJ3Nlc3Npb24nKSkgc2hvd1dpZGdldCgpO1xuXHRcdC8vIGluaXRDaGF0KCk7XG5cdH1cblxuXHQvLyBpZiB3ZWJydGMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyIGFuZCB3c19zZXJ2ZXJzIHBhcmFtZXRlciBpcyBzZXQgLSBjaGFuZ2UgYnV0dG9uIGljb25cblx0aWYoZGVmYXVsdHMud2VicnRjRW5hYmxlZCkge1xuXHRcdGFkZFdnU3RhdGUoJ3dlYnJ0Yy1lbmFibGVkJyk7XG5cdH1cblxuXHRpZih3aWRnZXQgJiYgZGVmYXVsdHMuaW50cm8ubGVuZ3RoKSB7XG5cdFx0Ly8gQWRkIGxhbmd1YWdlcyB0byB0aGUgdGVtcGxhdGVcblx0XHRsYW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGxhbmcpIHtcblx0XHRcdGlmKGZyYXNlcyAmJiBmcmFzZXMubGFuZykge1xuXHRcdFx0XHRzZWxlY3RlZCA9IGxhbmcgPT09IGFwaS5zZXNzaW9uLmxhbmcgPyAnc2VsZWN0ZWQnIDogJyc7XG5cdFx0XHRcdG9wdGlvbnMgKz0gJzxvcHRpb24gdmFsdWU9XCInK2xhbmcrJ1wiICcrc2VsZWN0ZWQrJyA+JytmcmFzZXMubGFuZysnPC9vcHRpb24+Jztcblx0XHRcdH1cblx0XHR9KTtcblx0XHRnbG9iYWxbZGVmYXVsdHMucHJlZml4KydJbnRyb0Zvcm0nXS5sYW5nLmlubmVySFRNTCA9IG9wdGlvbnM7XG5cdH1cblxuXHQvLyBXaWRnZXQgaXMgaW5pdGlhdGVkXG5cdGFwaS5lbWl0KCd3aWRnZXQvaW5pdCcpO1xufVxuXG5mdW5jdGlvbiBsb2FkV2lkZ2V0KGNiKXtcblx0XG5cdGNvbXBpbGVkID0gY29tcGlsZVRlbXBsYXRlKCd3aWRnZXQnLCB7XG5cdFx0ZGVmYXVsdHM6IGRlZmF1bHRzLFxuXHRcdGxhbmd1YWdlczogbGFuZ3MsXG5cdFx0dHJhbnNsYXRpb25zOiBmcmFzZXMsXG5cdFx0Y3JlZGVudGlhbHM6IHN0b3JhZ2UuZ2V0U3RhdGUoJ2NyZWRlbnRpYWxzJywgJ3Nlc3Npb24nKSB8fCB7fSxcblx0XHRfOiBfXG5cdH0pO1xuXG5cdC8vIFdpZGdldCB2YXJpYWJsZSBhc3NpZ25tZW50XG5cdHdpZGdldCA9IGRvbWlmeShjb21waWxlZCk7XG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQod2lkZ2V0KTtcblx0YXBpLmVtaXQoJ3dpZGdldC9sb2FkJywgd2lkZ2V0KTtcblxufVxuXG5mdW5jdGlvbiBzZXRPZmZlcigpIHtcblx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRzaG93T2ZmZXIoe1xuXHRcdFx0ZnJvbTogZGVmYXVsdHMub2ZmZXIuZnJvbSB8fCBmcmFzZXMuVE9QX0JBUi50aXRsZSxcblx0XHRcdHRpbWU6IERhdGUubm93KCksXG5cdFx0XHRjb250ZW50OiBkZWZhdWx0cy5vZmZlci50ZXh0IHx8IGZyYXNlcy5kZWZhdWx0X29mZmVyXG5cdFx0fSk7XG5cdH0sIGRlZmF1bHRzLm9mZmVyLmluU2Vjb25kcyA/IGRlZmF1bHRzLm9mZmVyLmluU2Vjb25kcyoxMDAwIDogMzAwMDApO1xufVxuXG5mdW5jdGlvbiBzaG93T2ZmZXIobWVzc2FnZSkge1xuXHQvLyBSZXR1cm4gaWYgdXNlciBhbHJlYWR5IGludGVyYWN0IHdpdGggdGhlIHdpZGdldFxuXHRpZih3aWRnZXRTdGF0ZS5zdGF0ZSAhPT0gJ29ubGluZScgfHwgaXNJbnRlcmFjdGVkKCkpIHJldHVybjtcblx0bmV3TWVzc2FnZShtZXNzYWdlKTtcblx0Ly8gbmV3TWVzc2FnZSh7IG1lc3NhZ2VzOiBbbWVzc2FnZV0gfSk7XG59XG5cbmZ1bmN0aW9uIHNldEludGVyYWN0ZWQoKXtcblx0aWYoIXN0b3JhZ2UuZ2V0U3RhdGUoJ2ludGVyYWN0ZWQnLCAnc2Vzc2lvbicpKSB7XG5cdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ2ludGVyYWN0ZWQnLCB0cnVlLCAnc2Vzc2lvbicpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGlzSW50ZXJhY3RlZCgpe1xuXHRyZXR1cm4gc3RvcmFnZS5nZXRTdGF0ZSgnaW50ZXJhY3RlZCcsICdzZXNzaW9uJyk7XG59XG5cbmZ1bmN0aW9uIGluaXRDaGF0KCl7XG5cdHNob3dXaWRnZXQoKTtcblxuXHQvLyAvLyBpZiBjaGF0IGFscmVhZHkgc3RhcnRlZCBhbmQgd2lkZ2V0IHdhcyBtaW5pbWl6ZWQgLSBqdXN0IHNob3cgdGhlIHdpZGdldFxuXHRpZihzdG9yYWdlLmdldFN0YXRlKCdjaGF0JywgJ2NhY2hlJykpIHJldHVybjtcblxuXHRpZighbGFuZ3MubGVuZ3RoKSB7XG5cdFx0c3dpdGNoUGFuZSgnc2VuZGVtYWlsJyk7XG5cdH0gZWxzZSBpZihkZWZhdWx0cy5pbnRyby5sZW5ndGgpIHtcblx0XHRpZihzdG9yYWdlLmdldFN0YXRlKCdjaGF0JywgJ3Nlc3Npb24nKSkge1xuXHRcdFx0cmVxdWVzdENoYXQoc3RvcmFnZS5nZXRTdGF0ZSgnY3JlZGVudGlhbHMnLCAnc2Vzc2lvbicpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3dpdGNoUGFuZSgnY3JlZGVudGlhbHMnKTtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0cmVxdWVzdENoYXQoeyBsYW5nOiBhcGkuc2Vzc2lvbi5sYW5nIH0pO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlcXVlc3RDaGF0KGNyZWRlbnRpYWxzKXtcblx0dmFyIGNoYXRTdGFydGVkID0gc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcsICdzZXNzaW9uJyk7XG5cdHZhciBtZXNzYWdlID0gY3JlZGVudGlhbHMubWVzc2FnZTtcblxuXHRpZighY3JlZGVudGlhbHMudW5hbWUpIGNyZWRlbnRpYWxzLnVuYW1lID0gYXBpLnNlc3Npb24uc2lkO1xuXG5cdC8vIFNhdmUgdXNlciBsYW5ndWFnZSBiYXNlZCBvbiBwcmVmZXJhYmxlIGRpYWxvZyBsYW5ndWFnZVxuXHQvLyBpZihjcmVkZW50aWFscy5sYW5nICYmIGNyZWRlbnRpYWxzLmxhbmcgIT09IGN1cnJMYW5nICkge1xuXHQvLyBcdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdsYW5nJywgY3JlZGVudGlhbHMubGFuZywgJ3Nlc3Npb24nKTtcblx0Ly8gfVxuXHRpZighY3JlZGVudGlhbHMubGFuZykge1xuXHRcdGNyZWRlbnRpYWxzLmxhbmcgPSBhcGkuc2Vzc2lvbi5sYW5nO1xuXHR9XG5cdFxuXHQvLyBTYXZlIGNyZWRlbnRpYWxzIGZvciBjdXJyZW50IHNlc3Npb25cblx0Ly8gSXQgd2lsbCBiZSByZW1vdmVkIG9uIHNlc3Npb24gdGltZW91dFxuXHRzdG9yYWdlLnNhdmVTdGF0ZSgnY3JlZGVudGlhbHMnLCBjcmVkZW50aWFscywgJ3Nlc3Npb24nKTtcblxuXHRhcGkuY2hhdFJlcXVlc3QoY3JlZGVudGlhbHMpO1xuXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0Y29uc29sZS5sb2coJ3JlcXVlc3RDaGF0OiAnLCBjcmVkZW50aWFscy5tZXNzYWdlLCBjaGF0U3RhcnRlZCk7XG5cblx0XHRpZihtZXNzYWdlICYmICFjaGF0U3RhcnRlZCkge1xuXHRcdFx0c2VuZE1lc3NhZ2Uoe1xuXHRcdFx0XHRtZXNzYWdlOiBjcmVkZW50aWFscy5tZXNzYWdlXG5cdFx0XHR9KTtcblx0XHR9XG5cdH0sIDUwMCk7XG5cblx0c3RhcnRDaGF0KGFwaS5zZXNzaW9uKTtcblx0Y2xlYXJXZ01lc3NhZ2VzKCk7XG5cdHN3aXRjaFBhbmUoJ21lc3NhZ2VzJyk7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0Q2hhdChwYXJhbXMpe1xuXHR2YXIgdGltZW91dCA9IHBhcmFtcy5hbnN3ZXJUaW1lb3V0O1xuXG5cdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdjaGF0JywgdHJ1ZSwgJ3Nlc3Npb24nKTtcblx0XG5cdGlmKHRpbWVvdXQpIHtcblx0XHRjaGF0VGltZW91dCA9IHNldFRpbWVvdXQob25DaGF0VGltZW91dCwgdGltZW91dCoxMDAwKTtcblx0fVxuXG5cdGFkZFdnU3RhdGUoJ2NoYXQnKTtcbn1cblxuZnVuY3Rpb24gc2VuZE1lc3NhZ2UocGFyYW1zKXtcblx0YXBpLnNlbmRNZXNzYWdlKHBhcmFtcyk7XG5cblx0bmV3TWVzc2FnZSh7XG5cdFx0ZnJvbTogc3RvcmFnZS5nZXRTdGF0ZSgnY3JlZGVudGlhbHMnLCAnc2Vzc2lvbicpLnVuYW1lLFxuXHRcdHRpbWU6IERhdGUubm93KCksXG5cdFx0Y29udGVudDogcGFyYW1zLm1lc3NhZ2Vcblx0XHQvLyBoaWRkZW46IHRydWVcblx0XHQvLyBjbGFzc05hbWU6IGRlZmF1bHRzLnByZWZpeCsnLW1zZy11bmRlbGl2ZXJlZCdcblx0fSk7XG5cblx0Ly8gaWYoY2hhdFRpbWVvdXQpIGNsZWFyVGltZW91dChjaGF0VGltZW91dCk7XG59XG5cbmZ1bmN0aW9uIG5ld01lc3NhZ2UobWVzc2FnZSl7XG5cdGRlYnVnLmxvZygnbmV3IG1lc3NhZ2VzIGFycml2ZWQhJywgbWVzc2FnZSk7XG5cblx0dmFyIHN0cixcblx0XHRlbHMgPSBbXSxcblx0XHR0ZXh0LFxuXHRcdGNvbXBpbGVkLFxuXHRcdHBsYXlTb3VuZCA9IGZhbHNlLFxuXHRcdC8vIGRlZmF1bHRVbmFtZSA9IGZhbHNlLFxuXHRcdGNyZWRlbnRpYWxzID0gc3RvcmFnZS5nZXRTdGF0ZSgnY3JlZGVudGlhbHMnLCAnc2Vzc2lvbicpIHx8IHt9LFxuXHRcdGFuYW1lID0gc3RvcmFnZS5nZXRTdGF0ZSgnYW5hbWUnLCAnc2Vzc2lvbicpLFxuXHRcdHVuYW1lID0gY3JlZGVudGlhbHMudW5hbWUgPyBjcmVkZW50aWFscy51bmFtZSA6ICcnXG5cdFx0bWVzc2FnZXNDb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZXMtY29udCcpO1xuXG5cdC8vIGlmKHVuYW1lID09PSBzdG9yYWdlLmdldFN0YXRlKCdzaWQnKS5zcGxpdCgnXycpWzBdKSB7XG5cdC8vIFx0ZGVmYXVsdFVuYW1lID0gdHJ1ZTtcblx0Ly8gfVxuXG5cdC8vIHJlc3VsdC5tZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKG1lc3NhZ2UsIGluZGV4KSB7XG5cdFx0XG5cdFx0bWVzc2FnZS5lbnRpdHkgPSBtZXNzYWdlLmZyb20gPT09IHVuYW1lID8gJ3VzZXInIDogJ2FnZW50Jztcblx0XHQvLyBtZXNzYWdlLmZyb20gPSAobWVzc2FnZS5lbnRpdHkgPT09ICd1c2VyJyAmJiBkZWZhdWx0VW5hbWUpID8gZnJhc2VzLmRlZmF1bHRfdXNlcl9uYW1lIDogbWVzc2FnZS5mcm9tO1xuXHRcdG1lc3NhZ2UuZnJvbSA9IG1lc3NhZ2UuZW50aXR5ID09PSAndXNlcicgPyAnJyA6IG1lc3NhZ2UuZnJvbTtcblx0XHRtZXNzYWdlLnRpbWUgPSBtZXNzYWdlLnRpbWUgPyBwYXJzZVRpbWUobWVzc2FnZS50aW1lKSA6IHBhcnNlVGltZShEYXRlLm5vdygpKTtcblxuXHRcdHRleHQgPSBwYXJzZU1lc3NhZ2UobWVzc2FnZS5jb250ZW50LCBtZXNzYWdlLmZpbGUsIG1lc3NhZ2UuZW50aXR5KTtcblxuXHRcdGlmKHRleHQudHlwZSA9PT0gJ2Zvcm0nKSB7XG5cblx0XHRcdGNvbXBpbGVkID0gY29tcGlsZVRlbXBsYXRlKCdmb3JtcycsIHtcblx0XHRcdFx0ZGVmYXVsdHM6IGRlZmF1bHRzLFxuXHRcdFx0XHRtZXNzYWdlOiBtZXNzYWdlLFxuXHRcdFx0XHRmb3JtOiB0ZXh0LmNvbnRlbnQsXG5cdFx0XHRcdGNyZWRlbnRpYWxzOiBjcmVkZW50aWFscyxcblx0XHRcdFx0ZnJhc2VzOiBmcmFzZXMsXG5cdFx0XHRcdF86IF9cblx0XHRcdH0pO1xuXG5cdFx0XHRpZihnbG9iYWxbdGV4dC5jb250ZW50Lm5hbWVdKSBjbG9zZUZvcm0oeyBmb3JtTmFtZTogdGV4dC5jb250ZW50Lm5hbWUgfSk7XG5cdFx0XHRtZXNzYWdlc0NvbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnPGxpPicrY29tcGlsZWQrJzwvbGk+Jyk7XG5cdFx0XHRtZXNzYWdlc0NvbnQuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250LnNjcm9sbEhlaWdodDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYoIW1lc3NhZ2UuY29udGVudCkgcmV0dXJuO1xuXHRcdFx0bWVzc2FnZS5jb250ZW50ID0gdGV4dC5jb250ZW50O1xuXHRcdFx0Y29tcGlsZWQgPSBjb21waWxlVGVtcGxhdGUoJ21lc3NhZ2UnLCB7IGRlZmF1bHRzOiBkZWZhdWx0cywgbWVzc2FnZTogbWVzc2FnZSB9KTtcblx0XHRcdG1lc3NhZ2VzQ29udC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsICc8bGkgJysobWVzc2FnZS5jbGFzc05hbWUgPyAnY2xhc3M9XCInK21lc3NhZ2UuY2xhc3NOYW1lKydcIicgOiAnJyApKyc+Jytjb21waWxlZCsnPC9saT4nKTtcblxuXHRcdFx0b25MYXN0TWVzc2FnZShjb21waWxlZCk7XG5cblx0XHRcdC8vIE5lZWQgZm9yIHNlbmRpbmcgZGlhbG9nIHRvIGVtYWlsXG5cdFx0XHRpZighbWVzc2FnZS5oaWRkZW4pIHtcblx0XHRcdFx0ZGlhbG9nLnB1c2goY29tcGlsZWQpO1xuXHRcdFx0XHRtZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNhdmUgYWdlbnQgbmFtZVxuXHRcdGlmKG1lc3NhZ2UuZW50aXR5ID09PSAnYWdlbnQnKSB7XG5cdFx0XHRpZihhbmFtZSAhPT0gbWVzc2FnZS5mcm9tKSBzdG9yYWdlLnNhdmVTdGF0ZSgnYW5hbWUnLCBtZXNzYWdlLmZyb20sICdzZXNzaW9uJyk7XG5cdFx0XHRpZihtZXNzYWdlLmZyb20pIGNsZWFyVGltZW91dChjaGF0VGltZW91dCk7XG5cdFx0fVxuXG5cdFx0aWYobWVzc2FnZS5lbnRpdHkgIT09ICd1c2VyJykgcGxheVNvdW5kID0gdHJ1ZTtcblxuXHQvLyB9KTtcblxuXHRtZXNzYWdlc0NvbnQuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250LnNjcm9sbEhlaWdodDtcblx0Ly8gaWYocGxheVNvdW5kKSBwbGF5TmV3TXNnVG9uZSgpO1xufVxuXG5mdW5jdGlvbiBjbGVhclVuZGVsaXZlcmVkKCl7XG5cdHZhciB1bmRlbGl2ZXJlZCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrZGVmYXVsdHMucHJlZml4KyctbXNnLXVuZGVsaXZlcmVkJykpO1xuXHRpZih1bmRlbGl2ZXJlZCAmJiB1bmRlbGl2ZXJlZC5sZW5ndGgpIHtcblx0XHR1bmRlbGl2ZXJlZC5mb3JFYWNoKGZ1bmN0aW9uKG1zZyl7XG5cdFx0XHRtc2cuY2xhc3NMaXN0LmFkZChkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHR9KTtcblx0fVxufVxuXG5mdW5jdGlvbiBwbGF5TmV3TXNnVG9uZSgpIHtcblx0YXVkaW8ucGxheSgnbmV3X21lc3NhZ2UnKTtcbn1cblxuLyoqXG4gKiBWaXN1YWwgbm90aWZpY2F0aW9uIGFib3V0IGEgbmV3IG1lc3NhZ2UgZm9tciBhZ2VudC5cbiAqIEl0IGlzIGFsc28gdXNlZCBmb3Igb2ZmZXIgbm90aWZpY2F0aW9uXG4gKiBcbiAqIEBwYXJhbSAge1N0cmluZ30gbWVzc2FnZSAtIE5ldyBtZXNzYWdlIGNvbnRlbnQgXG4gKi9cbmZ1bmN0aW9uIG9uTGFzdE1lc3NhZ2UobWVzc2FnZSl7XG5cdHZhciBsYXN0TXNnO1xuXHRpZighd2lkZ2V0U3RhdGUuYWN0aXZlKSB7XG5cdFx0bGFzdE1zZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLWxhc3Rtc2cnKTtcblxuXHRcdC8vIFByZWZpeGVkRXZlbnQobGFzdE1zZywgJ2FuaW1hdGlvbmVuZCcsIFtcIndlYmtpdFwiLCBcIm1velwiLCBcIk1TXCIsIFwib1wiLCBcIlwiXSwgZnVuY3Rpb24oZSkge1xuXHRcdC8vIFx0YnRuLmNoaWxkcmVuWzBdLnN0eWxlLmhlaWdodCA9IGUudGFyZ2V0LnNjcm9sbEhlaWdodCArICdweCc7XG5cdFx0Ly8gfSk7XG5cblx0XHRsYXN0TXNnLmlubmVySFRNTCA9IG1lc3NhZ2U7XG5cdFx0Ly8gY2hhbmdlV2dTdGF0ZSh7IHN0YXRlOiAnbm90aWZpZWQnIH0pO1xuXHRcdGFkZFdnU3RhdGUoJ25vdGlmaWVkJyk7XG5cdFx0c2V0QnV0dG9uU3R5bGUoJ25vdGlmaWVkJyk7XG5cblx0fVxufVxuXG5mdW5jdGlvbiBjb21waWxlRW1haWwoY29udGVudCwgY2IpIHtcblx0dmFyIGNvbXBpbGVkID0gY29tcGlsZVRlbXBsYXRlKCdlbWFpbCcsIHtcblx0XHRkZWZhdWx0czogZGVmYXVsdHMsXG5cdFx0Y29udGVudDogY29udGVudCxcblx0XHRmcmFzZXM6IGZyYXNlcyxcblx0XHRfOiBfXG5cdH0pO1xuXG5cdGlmKGNiKSByZXR1cm4gY2IobnVsbCwgY29tcGlsZWQpO1xufVxuXG5mdW5jdGlvbiBzZW5kRGlhbG9nKHBhcmFtcyl7XG5cdHZhciBkaWFsb2dTdHIgPSBwYXJhbXMudGV4dC5qb2luKCcnKTtcblx0Y29tcGlsZUVtYWlsKGRpYWxvZ1N0ciwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcblx0XHRpZihlcnIpIHJldHVybjtcblx0XHRwYXJhbXMudGV4dCA9IHJlc3VsdDtcblx0XHRhcGkuc2VuZEVtYWlsKHBhcmFtcyk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBzZW5kQ29tcGxhaW4ocGFyYW1zKXtcblx0dmFyIGJvZHkgPSBbXTtcblx0Ly8gVE9ETzogZXhwbGFpbi4uLlxuXHR2YXIgY29tcGxhaW4gPSBjb21waWxlVGVtcGxhdGUoJ21lc3NhZ2UnLCB7XG5cdFx0ZGVmYXVsdHM6IGRlZmF1bHRzLFxuXHRcdG1lc3NhZ2U6IHtcblx0XHRcdGZyb206IGZyYXNlcy5FTUFJTF9TVUJKRUNUUy5jb21wbGFpbisnICcrcGFyYW1zLmVtYWlsLFxuXHRcdFx0Y29udGVudDogcGFyYW1zLnRleHQsXG5cdFx0XHRlbnRpdHk6ICcnLFxuXHRcdFx0dGltZTogJydcblx0XHR9XG5cdH0pO1xuXG5cdGJvZHkgPSBib2R5LmNvbmNhdChcblx0XHRjb21wbGFpbixcblx0XHQnPGJyPjxwIGNsYXNzPVwiaDFcIj4nK2ZyYXNlcy5FTUFJTF9TVUJKRUNUUy5kaWFsb2crJyAnK2RlZmF1bHRzLmhvc3QrJzwvcD48YnI+Jyxcblx0XHRkaWFsb2dcblx0KS5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3Vycikge1xuXHRcdHJldHVybiBwcmV2LmNvbmNhdChjdXJyKTtcblx0fSk7XG5cblx0Y29tcGlsZUVtYWlsKGJvZHksIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG5cdFx0aWYoZXJyKSByZXR1cm47XG5cdFx0cGFyYW1zLnRleHQgPSByZXN1bHQ7XG5cdFx0YXBpLnNlbmRFbWFpbChwYXJhbXMpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gc2VuZFJlcXVlc3QocGFyYW1zLCBjYikge1xuXHQvLyBUT0RPOiBleHBsYWluLi4uXG5cdHZhciBtc2cgPSBjb21waWxlVGVtcGxhdGUoJ21lc3NhZ2UnLCB7XG5cdFx0ZGVmYXVsdHM6IGRlZmF1bHRzLFxuXHRcdG1lc3NhZ2U6IHtcblx0XHRcdGZyb206IGZyYXNlcy5FTUFJTF9TVUJKRUNUUy5yZXF1ZXN0KycgJytwYXJhbXMudW5hbWUrJyAoJytwYXJhbXMuZW1haWwrJyknLFxuXHRcdFx0Y29udGVudDogcGFyYW1zLnRleHQsXG5cdFx0XHRlbnRpdHk6ICcnLFxuXHRcdFx0dGltZTogJydcblx0XHR9XG5cdH0pO1xuXG5cdGNvbXBpbGVFbWFpbChtc2csIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG5cdFx0aWYoZXJyKSByZXR1cm47XG5cdFx0cGFyYW1zLnRleHQgPSByZXN1bHQ7XG5cdFx0YXBpLnNlbmRFbWFpbChwYXJhbXMpO1xuXHRcdGlmKGNiKSBjYigpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gc3VibWl0U2VuZE1haWxGb3JtKGZvcm0sIGRhdGEpIHtcblx0dmFyIHBhcmFtcyA9IHt9LFxuXHRcdGZpbGU7XG5cblx0aWYoIWRhdGEuZW1haWwpIHtcblx0XHRhbGVydChmcmFzZXMuRVJST1JTLmVtYWlsKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRkYXRhLnN1YmplY3QgPSBmcmFzZXMuRU1BSUxfU1VCSkVDVFMucmVxdWVzdCsnICcrZGF0YS5lbWFpbDtcblxuXHRpZihkYXRhLmZpbGUpIHtcblx0XHRmaWxlID0gZ2V0RmlsZUNvbnRlbnQoZm9ybS5maWxlLCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuXHRcdFx0aWYoIWVycikge1xuXHRcdFx0XHRkYXRhLmZpbGVuYW1lID0gcmVzdWx0LmZpbGVuYW1lO1xuXHRcdFx0XHRkYXRhLmZpbGVkYXRhID0gcmVzdWx0LmZpbGVkYXRhO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVidWcud2FybignRmlsZSB3YXNuXFwndCBzZW50Jyk7XG5cdFx0XHR9XG5cdFx0XHRkZWxldGUgZGF0YS5maWxlO1xuXHRcdFx0c2VuZFJlcXVlc3QoZGF0YSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvcm0ucmVzZXQoKTtcblx0XHRcdFx0Y2xvc2VXaWRnZXQoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHNlbmRSZXF1ZXN0KGRhdGEsIGZ1bmN0aW9uKCkge1xuXHRcdFx0Zm9ybS5yZXNldCgpO1xuXHRcdFx0Y2xvc2VXaWRnZXQoKTtcblx0XHR9KTtcblx0fVxufVxuXG5mdW5jdGlvbiBzdWJtaXRDbG9zZUNoYXRGb3JtKGZvcm0sIGRhdGEpe1xuXHR2YXIgcmF0aW5nID0gKGRhdGEgJiYgZGF0YS5yYXRpbmcpID8gcGFyc2VJbnQoZGF0YS5yYXRpbmcsIDEwKSA6IG51bGw7XG5cdGlmKGRhdGEgJiYgZGF0YS5zZW5kRGlhbG9nKSB7XG5cdFx0aWYoIWRhdGEuZW1haWwpIHtcblx0XHRcdGFsZXJ0KGZyYXNlcy5FUlJPUlMuZW1haWwpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHQvLyBkZWJ1Zy5sb2coJ3NlbmQgZGlhbG9nJyk7XG5cdFx0c2VuZERpYWxvZyh7XG5cdFx0XHR0bzogZGF0YS5lbWFpbCxcblx0XHRcdHN1YmplY3Q6IGZyYXNlcy5FTUFJTF9TVUJKRUNUUy5kaWFsb2crJyAnK2RlZmF1bHRzLmhvc3QsXG5cdFx0XHR0ZXh0OiBkaWFsb2cgLy8gZ2xvYmFsIHZhcmlhYmxlXG5cdFx0fSk7XG5cdH1cblx0aWYoZGF0YSAmJiBkYXRhLnRleHQpIHtcblx0XHRpZighZGF0YS5lbWFpbCkge1xuXHRcdFx0YWxlcnQoZnJhc2VzLkVSUk9SUy5lbWFpbCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGRlYnVnLmxvZygnc2VuZCBjb21wbGFpbiEnKTtcblx0XHRcdHNlbmRDb21wbGFpbih7XG5cdFx0XHRcdGVtYWlsOiBkYXRhLmVtYWlsLFxuXHRcdFx0XHRzdWJqZWN0OiBmcmFzZXMuRU1BSUxfU1VCSkVDVFMuY29tcGxhaW4rJyAnK2RhdGEuZW1haWwsXG5cdFx0XHRcdHRleHQ6IGRhdGEudGV4dFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdC8vIGlmKGNoYXRUaW1lb3V0KSBjbGVhclRpbWVvdXQoY2hhdFRpbWVvdXQpO1xuXHRpZihmb3JtKSBmb3JtLnJlc2V0KCk7XG5cdFxuXHRjbG9zZUNoYXQocmF0aW5nKTtcblx0Y2xvc2VXaWRnZXQoKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VDaGF0KHJhdGluZykge1xuXHRzdG9yYWdlLnNhdmVTdGF0ZSgnY2hhdCcsIGZhbHNlLCAnc2Vzc2lvbicpO1xuXHRhcGkuY2xvc2VDaGF0KHJhdGluZyk7XG5cdHJlbW92ZVdnU3RhdGUoJ2NoYXQnKTtcblxuXHRpZihzdG9yYWdlLmdldFN0YXRlKCdzaGFyZWQnLCAnc2Vzc2lvbicpKSB7XG5cdFx0YXBpLnNoYXJlQ2xvc2VkKGdsb2JhbC5sb2NhdGlvbi5ocmVmKTtcblx0XHRjb2Jyb3dzaW5nLnVuc2hhcmUoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBvbkNoYXRDbG9zZSgpe1xuXHRpZihzdG9yYWdlLmdldFN0YXRlKCdzaGFyZWQnLCAnc2Vzc2lvbicpKSBjb2Jyb3dzaW5nLnVuc2hhcmUoKTtcbn1cblxuZnVuY3Rpb24gb25DaGF0VGltZW91dCgpe1xuXHRkZWJ1Zy5sb2coJ2NoYXQgdGltZW91dCEnKTtcblx0Ly8gc3dpdGNoUGFuZSgnY2xvc2VjaGF0Jyk7XG5cdC8vIHN0b3JhZ2Uuc2F2ZVN0YXRlKCdjaGF0JywgZmFsc2UsICdzZXNzaW9uJyk7XG5cblx0bmV3TWVzc2FnZSh7XG5cdFx0ZnJvbTogXCJcIixcblx0XHR0aW1lOiBEYXRlLm5vdygpLFxuXHRcdGNvbnRlbnQ6IFwie3F1ZXVlX292ZXJsb2FkfVwiXG5cdH0pO1xuXG5cdHZhciBmb3JtID0gZ2xvYmFsWydxdWV1ZV9vdmVybG9hZCddO1xuXHRpZihmb3JtKSBmb3JtLnRleHQudmFsdWUgPSBtZXNzYWdlcy5yZWR1Y2UoZnVuY3Rpb24oc3RyLCBpdGVtKXsgaWYoaXRlbS5lbnRpdHkgPT09ICd1c2VyJykge3N0ciArPSAoaXRlbS5jb250ZW50K1wiXFxuXCIpfSByZXR1cm4gc3RyOyB9LCBcIlwiKTtcbn1cblxuZnVuY3Rpb24gb25BZ2VudFR5cGluZygpe1xuXHQvLyBkZWJ1Zy5sb2coJ0FnZW50IGlzIHR5cGluZyEnKTtcblx0aWYoIWFnZW50SXNUeXBpbmdUaW1lb3V0KSB7XG5cdFx0YWRkV2dTdGF0ZSgnYWdlbnQtdHlwaW5nJyk7XG5cdH1cblx0Y2xlYXJUaW1lb3V0KGFnZW50SXNUeXBpbmdUaW1lb3V0KTtcblx0YWdlbnRJc1R5cGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGFnZW50SXNUeXBpbmdUaW1lb3V0ID0gbnVsbDtcblx0XHRyZW1vdmVXZ1N0YXRlKCdhZ2VudC10eXBpbmcnKTtcblx0XHQvLyBkZWJ1Zy5sb2coJ2FnZW50IGlzIG5vdCB0eXBpbmcgYW55bW9yZSEnKTtcblx0fSwgNTAwMCk7XG59XG5cbmZ1bmN0aW9uIG9uU2Vzc2lvblRpbWVvdXQoKXtcblx0Ly8gaWYoYXBpLmxpc3RlbmVyQ291bnQoJ3Nlc3Npb24vdGltZW91dCcpID49IDEpIHJldHVybjtcblx0Ly8gYXBpLm9uY2UoJ3Nlc3Npb24vdGltZW91dCcsIGZ1bmN0aW9uICgpe1xuXHRcdGRlYnVnLmxvZygnU2Vzc2lvbiB0aW1lb3V0OicpO1xuXG5cdFx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcsICdzZXNzaW9uJykgPT09IHRydWUpIHtcblx0XHRcdGNsb3NlQ2hhdCgpO1xuXHRcdH1cblxuXHRcdHN3aXRjaFBhbmUoJ2Nsb3NlY2hhdCcpO1xuXG5cdFx0Ly8gaWYod2lkZ2V0KSB7XG5cdFx0XHQvLyBhZGRXZ1N0YXRlKCd0aW1lb3V0Jyk7XG5cdFx0XHQvLyBjbG9zZVdpZGdldCgpO1xuXHRcdC8vIH1cblxuXHRcdC8vIGNoYW5nZVdnU3RhdGUoeyBzdGF0ZTogJ3RpbWVvdXQnIH0pO1xuXHRcdC8vIHdpZGdldFN0YXRlLnN0YXRlID0gJ3RpbWVvdXQnO1xuXHRcdC8vIGFkZFdnU3RhdGUoJ3RpbWVvdXQnKTtcblx0XHQvLyBzZXRCdXR0b25TdHlsZSgndGltZW91dCcpO1xuXHRcdC8vIHN0b3JhZ2UucmVtb3ZlU3RhdGUoJ3NpZCcpO1xuXG5cdFx0Ly8gaWYocGFyYW1zICYmIHBhcmFtcy5tZXRob2QgPT09ICd1cGRhdGVFdmVudHMnKSB7XG5cdFx0Ly8gaWYoZ2V0TGFuZ3VhZ2VzSW50ZXJ2YWwpIGNsZWFySW50ZXJ2YWwoZ2V0TGFuZ3VhZ2VzSW50ZXJ2YWwpO1xuXHRcdC8vIGlmKG1lc3NhZ2VzVGltZW91dCkgY2xlYXJUaW1lb3V0KG1lc3NhZ2VzVGltZW91dCk7XG5cblx0XHQvLyBpZihkZWZhdWx0cy5yZUNyZWF0ZVNlc3Npb24pIHtcblx0XHQvLyBcdGluaXRNb2R1bGUoKTtcblx0XHQvLyB9XG5cdFx0Ly8gfVxuXHQvLyB9KTtcbn1cblxuZnVuY3Rpb24gaW5pdENhbGwoKXtcblx0c3dpdGNoUGFuZSgnY2FsbEFnZW50Jyk7XG5cdFdlYlJUQy5hdWRpb2NhbGwoZGVmYXVsdHMuY2hhbm5lbHMud2VicnRjLmhvdGxpbmUpO1xuXHQvLyBXZWJSVEMuYXVkaW9jYWxsKCdzaXA6JytjaGFubmVscy53ZWJydGMuaG90bGluZSsnQCcrc2VydmVyVXJsLmhvc3QpO1xufVxuXG5mdW5jdGlvbiBpbml0RmFsbGJhY2tDYWxsKCl7XG5cdHN3aXRjaFBhbmUoJ2NhbGxBZ2VudEZhbGxiYWNrJyk7XG59XG5cbmZ1bmN0aW9uIGluaXRDYWxsYmFjaygpe1xuXHRzd2l0Y2hQYW5lKCdjYWxsYmFjaycpO1xufVxuXG5mdW5jdGlvbiBzZXRDYWxsYmFjaygpe1xuXHR2YXIgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLWNhbGxiYWNrLXNldHRpbmdzJyksXG5cdFx0Zm9ybURhdGEgPSBnZXRGb3JtRGF0YShmb3JtKSxcblx0XHRjYlNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1jYWxsYmFjay1zcGlubmVyJyksXG5cdFx0Y2JTZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbGJhY2stc2VudCcpO1xuXHRcblx0Zm9ybURhdGEucGhvbmUgPSBmb3JtRGF0YS5waG9uZSA/IGZvcm1hdFBob25lTnVtYmVyKGZvcm1EYXRhLnBob25lKSA6IG51bGw7XG5cblx0aWYoIWZvcm1EYXRhLnBob25lIHx8IGZvcm1EYXRhLnBob25lLmxlbmd0aCA8IDEwKSB7XG5cdFx0cmV0dXJuIGFsZXJ0KGZyYXNlcy5FUlJPUlMudGVsKTtcblx0fVxuXG5cdGZvcm1EYXRhLnRpbWUgPSBwYXJzZUZsb2F0KGZvcm1EYXRhLnRpbWUpO1xuXHRcblx0aWYoZm9ybURhdGEudGltZSA8PSAwKSByZXR1cm47XG5cblx0Zm9ybURhdGEudGltZSA9IERhdGUubm93KCkgKyAoZm9ybURhdGEudGltZSAqIDYwICogMTAwMCk7XG5cdGZvcm1EYXRhLnRhc2sgPSBkZWZhdWx0cy5jaGFubmVscy5jYWxsYmFjay50YXNrO1xuXHRkZWJ1Zy5sb2coJ3NldENhbGxiYWNrIGRhdGE6ICcsIGZvcm1EYXRhKTtcblxuXHRmb3JtLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdGNiU3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXG5cdGFwaS5yZXF1ZXN0Q2FsbGJhY2soZm9ybURhdGEpO1xuXHRzd2l0Y2hQYW5lKCdjYWxsYmFja1NlbnQnKTtcblxuXHRmb3JtLnJlc2V0KCk7XG59XG5cbmZ1bmN0aW9uIG9uQ2FsbGJhY2tSZXF1ZXN0ZWQoKSB7XG5cdHZhciBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbGJhY2stc2V0dGluZ3MnKSxcblx0XHRjYlNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1jYWxsYmFjay1zcGlubmVyJyk7XG5cblx0Y2JTcGlubmVyLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdGZvcm0uY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblxuXHRpZihlcnIpIHJldHVybjtcblx0XG5cdHN3aXRjaFBhbmUoJ2NhbGxiYWNrU2VudCcpO1xufVxuXG5mdW5jdGlvbiBpbml0Q2FsbFN0YXRlKHN0YXRlKXtcblx0ZGVidWcubG9nKCdpbml0Q2FsbFN0YXRlOiAnLCBzdGF0ZSk7XG5cblx0dmFyIHNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1jYWxsLXNwaW5uZXInKSxcblx0XHRpbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbC1pbmZvJyksXG5cdFx0dGV4dFN0YXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbC1zdGF0ZScpLFxuXHRcdHRpbWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbC10aW1lcicpLFxuXHRcdHRyeUFnYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctdHJ5YWdhaW4tYnRuJyk7XG5cblx0aWYoc3RhdGUgPT09ICduZXdSVENTZXNzaW9uJykge1xuXHRcdGluaXRDYWxsU3RhdGUoJ29uY2FsbCcpO1xuXG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ2NvbmZpcm1lZCcpIHtcblx0XHR0ZXh0U3RhdGUuaW5uZXJUZXh0ID0gZnJhc2VzLlBBTkVMUy5BVURJT19DQUxMLmNhbGxpbmdfYWdlbnQ7XG5cdFx0aW5mby5jbGFzc0xpc3QucmVtb3ZlKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRcdHNwaW5uZXIuY2xhc3NMaXN0LmFkZChkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHR0cnlBZ2Fpbi5jbGFzc0xpc3QuYWRkKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ3JpbmdpbmcnKSB7XG5cdFx0c2V0VGltZXIodGltZXIsICdpbml0JywgMCk7XG5cdFx0dGltZXIuY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHQvLyBhdWRpby5wbGF5KCdyaW5nb3V0X2xvb3AnLCB0cnVlKTtcblxuXHR9IGVsc2UgaWYoc3RhdGUgPT09ICdjb25uZWN0ZWQnKSB7XG5cdFx0dGV4dFN0YXRlLmlubmVyVGV4dCA9IGZyYXNlcy5QQU5FTFMuQVVESU9fQ0FMTC5jb25uZWN0ZWRfd2l0aF9hZ2VudDtcblx0XHRzZXRUaW1lcih0aW1lciwgJ3N0YXJ0JywgMCk7XG5cdFx0YXVkaW8uc3RvcCgpO1xuXG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ2VuZGVkJykge1xuXHRcdHRleHRTdGF0ZS5pbm5lclRleHQgPSBmcmFzZXMuUEFORUxTLkFVRElPX0NBTEwuY2FsbF9lbmRlZDtcblx0XHRzZXRUaW1lcih0aW1lciwgJ3N0b3AnKTtcblx0XHRpbml0Q2FsbFN0YXRlKCdvbmNhbGxlbmQnKTtcblx0XHRcblx0fSBlbHNlIGlmKHN0YXRlID09PSAnZmFpbGVkJyB8fCBzdGF0ZSA9PT0gJ2NhbmNlbGVkJykge1xuXHRcdGlmKHN0YXRlID09PSAnZmFpbGVkJykge1xuXHRcdFx0dGV4dFN0YXRlLmlubmVyVGV4dCA9IGZyYXNlcy5QQU5FTFMuQVVESU9fQ0FMTC5jYWxsX2ZhaWxlZDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGV4dFN0YXRlLmlubmVyVGV4dCA9IGZyYXNlcy5QQU5FTFMuQVVESU9fQ0FMTC5jYWxsX2NhbmNlbGVkO1xuXHRcdH1cblx0XHRpbmZvLmNsYXNzTGlzdC5yZW1vdmUoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdFx0c3Bpbm5lci5jbGFzc0xpc3QuYWRkKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRcdHRpbWVyLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdFx0dHJ5QWdhaW4uY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHRpbml0Q2FsbFN0YXRlKCdvbmNhbGxlbmQnKTtcblx0XHRhdWRpby5wbGF5KCdidXN5Jyk7XG5cblx0fSBlbHNlIGlmKHN0YXRlID09PSAnb25jYWxsJykge1xuXHRcdHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gJ1lvdXIgY29ubmVjdGlvbiBpcyBpbiBwcm9ncmVzcy4gRG8geW91IHJlYWx5IHdhbnQgdG8gY2xvc2UgaXQ/Jztcblx0XHR9O1xuXHRcdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdjYWxsJywgdHJ1ZSwgJ2NhY2hlJyk7XG5cdFx0YWRkV2dTdGF0ZSgnd2VicnRjLWNhbGwnKTtcblxuXHR9IGVsc2UgaWYoc3RhdGUgPT09ICdvbmNhbGxlbmQnKSB7XG5cdFx0d2luZG93Lm9uYmVmb3JldW5sb2FkID0gbnVsbDtcblx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnY2FsbCcsIGZhbHNlLCAnY2FjaGUnKTtcblx0XHRyZW1vdmVXZ1N0YXRlKCd3ZWJydGMtY2FsbCcpO1xuXHRcdC8vIHN0b3BSaW5nVG9uZSgpO1xuXG5cdH0gZWxzZSBpZignaW5pdCcpIHtcblx0XHRpbmZvLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdFx0c3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRcdHRyeUFnYWluLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0VGltZXIodGltZXIsIHN0YXRlLCBzZWNvbmRzKXtcblx0dmFyIHRpbWUgPSBzZWNvbmRzO1xuXHRpZihzdGF0ZSA9PT0gJ3N0YXJ0Jykge1xuXHRcdHRpbWVyVXBkYXRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuXHRcdFx0dGltZSA9IHRpbWUrMTtcblx0XHRcdHRpbWVyLnRleHRDb250ZW50ID0gY29udmVydFRpbWUodGltZSk7XG5cdFx0fSwgMTAwMCk7XG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ3N0b3AnKSB7XG5cdFx0Y2xlYXJJbnRlcnZhbCh0aW1lclVwZGF0ZUludGVydmFsKTtcblx0fSBlbHNlIGlmKHN0YXRlID09PSAnaW5pdCcpIHtcblx0XHR0aW1lci50ZXh0Q29udGVudCA9IGNvbnZlcnRUaW1lKDApO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGVuZENhbGwoKXtcblx0aWYoV2ViUlRDLmlzRXN0YWJsaXNoZWQoKSB8fCBXZWJSVEMuaXNJblByb2dyZXNzKCkpIHtcblx0XHRXZWJSVEMudGVybWluYXRlKCk7XG5cdH0gZWxzZSB7XG5cdFx0Y2xvc2VXaWRnZXQoKTtcblx0XHRpbml0Q2FsbFN0YXRlKCdpbml0Jyk7XG5cdH1cbn1cblxuLy8gZnVuY3Rpb24gcGxheVJpbmdUb25lKCl7XG4vLyBcdGlmKHJpbmdUb25lSW50ZXJ2YWwpIHJldHVybjtcbi8vIFx0cmluZ1RvbmVJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4vLyBcdFx0cmluZ1RvbmUucGxheSgpO1xuLy8gXHR9LCAzMDAwKTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gc3RvcFJpbmdUb25lKCl7XG4vLyBcdGNsZWFySW50ZXJ2YWwocmluZ1RvbmVJbnRlcnZhbCk7XG4vLyB9XG5cbi8qKlxuICogT3BlbiB3ZWIgY2hhdCB3aWRnZXQgaW4gYSBuZXcgd2luZG93XG4gKi9cbmZ1bmN0aW9uIG9wZW5XaWRnZXQoKXtcblx0dmFyIG9wdHMgPSB7fTtcblx0XG5cdGlmKCF3aWRnZXRXaW5kb3cgfHwgd2lkZ2V0V2luZG93LmNsb3NlZCkge1xuXG5cdFx0Xy5tZXJnZShvcHRzLCBkZWZhdWx0cyk7XG5cblx0XHRvcHRzLndpZGdldCA9IHRydWU7XG5cdFx0Ly8gc2V0IGV4dGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgbW9kdWxlIGxvYWRzIG5vdCBpbiB0aGUgbWFpbiB3aW5kb3dcblx0XHRvcHRzLmV4dGVybmFsID0gdHJ1ZTtcblxuXHRcdHdpZGdldFdpbmRvdyA9IHdpbmRvdy5vcGVuKCcnLCAnd2NoYXQnLCBkZWZhdWx0cy53aWRnZXRXaW5kb3dPcHRpb25zKTtcblx0XHR3aWRnZXRXaW5kb3cgPSBjb25zdHJ1Y3RXaW5kb3cod2lkZ2V0V2luZG93KTtcblx0XHQvLyB3aWRnZXRXaW5kb3dbZ2xvYmFsU2V0dGluZ3NdID0gb3B0cztcblxuXHRcdC8vIHdpZGdldFdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd3Y2hhdF9vcHRpb25zJywgSlNPTi5zdHJpbmdpZnkob3B0cykpO1xuXG5cdFx0Ly8gV2FpdCB3aGlsZSB0aGUgc2NyaXB0IGlzIGxvYWRlZCwgXG5cdFx0Ly8gdGhlbiBpbml0IG1vZHVsZSBpbiB0aGUgY2hpbGQgd2luZG93XG5cdFx0Xy5wb2xsKGZ1bmN0aW9uKCl7XG5cdFx0XHRyZXR1cm4gd2lkZ2V0V2luZG93LldjaGF0ICE9PSB1bmRlZmluZWQ7XG5cdFx0fSwgZnVuY3Rpb24oKXtcblx0XHRcdHdpZGdldFdpbmRvdy5Nb2R1bGUgPSB3aWRnZXRXaW5kb3cuV2NoYXQob3B0cyk7XG5cdFx0XHR3aWRnZXRXaW5kb3cuTW9kdWxlLm9uKCd3aWRnZXQvaW5pdCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHdpZGdldFdpbmRvdy5Nb2R1bGUuaW5pdFdpZGdldFN0YXRlKCk7XG5cdFx0XHR9KTtcblx0XHRcdFxuXHRcdFx0LyogXG5cdFx0XHQqIFByb3h5IGFsbCBldmVudHMgdGhhdCBpcyBlbWl0dGVkIGluIHRoZSBjaGlsZCB3aW5kb3dcblx0XHRcdCogdG8gdGhlIG1haW4gd2luZG93LCBidXQgd2l0aCB0aGUgJ3dpbmRvdy8nIHByZWZpeCBiZWZvcmUgdGhlIGV2ZW50IG5hbWUuXG5cdFx0XHQqIFNvLCBmb3IgZXhhbXBsZSwgJ2NoYXQvc3RhcnQnIGV2ZW50IGluIHRoZSBjaGlsZCB3aW5kb3csXG5cdFx0XHQqIHdvdWxkIGJlICd3aW5kb3cvY2hhdC9zdGFydCcgaW4gdGhlIG1haW4gd2luZG93IFxuXHRcdFx0Ki9cblx0XHRcdF8uZm9yRWFjaChhcGkuX2V2ZW50cywgZnVuY3Rpb24odmFsdWUsIGtleSwgY29sbCl7XG5cdFx0XHRcdHdpZGdldFdpbmRvdy5Nb2R1bGUub24oa2V5LCBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdFx0XHRcdHBhcmFtcy51cmwgPSBnbG9iYWwubG9jYXRpb24uaHJlZjtcblx0XHRcdFx0XHRhcGkuZW1pdCgnd2luZG93Lycra2V5LCBwYXJhbXMpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvLyB3aWRnZXRXaW5kb3cuTW9kdWxlLmluaXRNb2R1bGUoKTtcblxuXHRcdH0sIGZ1bmN0aW9uKCl7XG5cdFx0XHRjb25zb2xlLndhcm4oJ1djaGF0IG1vZHVsZSB3YXMgbm90IGluaXRpYXRlZCBkdWUgdG8gbmV0d29yayBjb25uZWN0aW9uIGlzc3Vlcy4nKTtcblx0XHR9LCAxMjAwMDApO1xuXHRcdFxuXHRcdHdpZGdldFdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQvL2Nsb3NlIGNoYXQgaWYgdXNlciBjbG9zZSB0aGUgd2lkZ2V0IHdpbmRvd1xuXHRcdFx0Ly93aXRob3V0IGVuZGluZyBhIGRpYWxvZ1xuXHRcdFx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcsICdzZXNzaW9uJykpIGNsb3NlQ2hhdCgpO1xuXHRcdH07XG5cdH1cblx0aWYod2lkZ2V0V2luZG93LmZvY3VzKSB3aWRnZXRXaW5kb3cuZm9jdXMoKTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0V2luZG93KHdpbmRvd09iamVjdCl7XG5cdHZhciBsb2FkZXIsXG5cdHNjcmlwdCxcblx0bGluayxcblx0Y2hhcnNldCxcblx0dmlld3BvcnQsXG5cdHRpdGxlLFxuXHRsb2FkZXJFbGVtZW50cyA9IHdpbmRvd09iamVjdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcblx0bG9hZGVyU3R5bGVzID0gY3JlYXRlU3R5bGVzaGVldCh3aW5kb3dPYmplY3QsICdzd2MtbG9hZGVyLXN0eWxlcycpLFxuXHRoZWFkID0gd2luZG93T2JqZWN0LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0sXG5cdGJvZHkgPSB3aW5kb3dPYmplY3QuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcblxuXHRsb2FkZXJFbGVtZW50cy5jbGFzc05hbWUgPSBcInN3Yy13aWRnZXQtbG9hZGVyXCI7XG5cdGxvYWRlckVsZW1lbnRzLmlubmVySFRNTCA9IFwiPHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48c3Bhbj48L3NwYW4+XCI7XG5cblx0dmlld3BvcnQgPSB3aW5kb3dPYmplY3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpO1xuXHR2aWV3cG9ydC5uYW1lID0gJ3ZpZXdwb3J0Jztcblx0dmlld3BvcnQuY29udGVudCA9ICd3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgbWF4aW11bS1zY2FsZT0xLCB1c2VyLXNjYWxhYmxlPTAnO1xuXG5cdGNoYXJzZXQgPSB3aW5kb3dPYmplY3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpO1xuXHRjaGFyc2V0LnNldEF0dHJpYnV0ZSgnY2hhcnNldCcsICd1dGYtOCcpO1xuXG5cdHRpdGxlID0gd2luZG93T2JqZWN0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RpdGxlJyk7XG5cdHRpdGxlLnRleHRDb250ZW50ID0gZnJhc2VzLlRPUF9CQVIudGl0bGU7XG5cblx0Ly8gbG9hZGVyID0gd2luZG93T2JqZWN0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHQvLyBsb2FkZXIuc3JjID0gZGVmYXVsdHMuY2xpZW50UGF0aCsnbG9hZGVyLmpzJztcblxuXHRzY3JpcHQgPSB3aW5kb3dPYmplY3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdHNjcmlwdC5zcmMgPSBkZWZhdWx0cy5jbGllbnRQYXRoKyd3Y2hhdC5taW4uanMnO1xuXHRzY3JpcHQuY2hhcnNldCA9ICdVVEYtOCc7XG5cblx0aGVhZC5hcHBlbmRDaGlsZCh2aWV3cG9ydCk7XG5cdGhlYWQuYXBwZW5kQ2hpbGQoY2hhcnNldCk7XG5cdGhlYWQuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXHRoZWFkLmFwcGVuZENoaWxkKGxvYWRlclN0eWxlcyk7XG5cdGhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcblxuXHRib2R5LmlkID0gJ3N3Yy13Zy13aW5kb3cnO1xuXHRib2R5LmFwcGVuZENoaWxkKGxvYWRlckVsZW1lbnRzKTtcblx0Ly8gYm9keS5hcHBlbmRDaGlsZChsb2FkZXIpO1xuXG5cdGFkZExvYWRlclJ1bGVzKGhlYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3N0eWxlJylbMF0pO1xuXG5cdHJldHVybiB3aW5kb3dPYmplY3Q7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlc2hlZXQod2luZG93T2JqZWN0LCBpZCl7XG5cdC8vIENyZWF0ZSB0aGUgPHN0eWxlPiB0YWdcblx0XHR2YXIgc3R5bGUgPSB3aW5kb3dPYmplY3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXHRcdHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuXHRcdGlmKGlkKSBzdHlsZS5pZCA9IGlkO1xuXG5cdFx0Ly8gV2ViS2l0IGhhY2sgOihcblx0XHRzdHlsZS5hcHBlbmRDaGlsZCh3aW5kb3dPYmplY3QuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIikpO1xuXG5cdFx0cmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiBhZGRMb2FkZXJSdWxlcyhzdHlsZSl7XG5cdHZhciB0aGVSdWxlcyA9IFtcblx0XHRcImJvZHkgeyBtYXJnaW46MDsgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsgfVwiLFxuXHRcdFwiQGtleWZyYW1lcyBwcmVsb2FkaW5nIHtcIixcblx0XHRcdFwiMCB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgfVwiLFxuXHRcdFx0XCI1MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IH1cIixcblx0XHRcdFwiMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgfVwiLFxuXHRcdFwifVwiLFxuXHRcdFwiQC13ZWJraXQta2V5ZnJhbWVzIHByZWxvYWRpbmcge1wiLFxuXHRcdFx0XCIwIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyB9XCIsXG5cdFx0XHRcIjUwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgfVwiLFxuXHRcdFx0XCIxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyB9XCIsXG5cdFx0XCJ9XCIsXG5cdFx0XCJALW1vei1rZXlmcmFtZXMgcHJlbG9hZGluZyB7XCIsXG5cdFx0XHRcIjAgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IH1cIixcblx0XHRcdFwiNTAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyB9XCIsXG5cdFx0XHRcIjEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IH1cIixcblx0XHRcIn1cIixcblx0XHRcIkAtbXMta2V5ZnJhbWVzIHByZWxvYWRpbmcge1wiLFxuXHRcdFx0XCIwIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyB9XCIsXG5cdFx0XHRcIjUwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgfVwiLFxuXHRcdFx0XCIxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyB9XCIsXG5cdFx0XCJ9XCIsXG5cdFx0XCJALW8ta2V5ZnJhbWVzIHByZWxvYWRpbmcge1wiLFxuXHRcdFx0XCIwIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyB9XCIsXG5cdFx0XHRcIjUwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgfVwiLFxuXHRcdFx0XCIxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyB9XCIsXG5cdFx0XCJ9XCIsXG5cdFx0XCIuc3djLXdpZGdldC1sb2FkZXIge1wiLFxuXHRcdFx0XCJwb3NpdGlvbjogYWJzb2x1dGU7XCIsXG5cdFx0XHRcIndpZHRoOiAxMDAlO1wiLFxuXHRcdFx0XCJ0b3A6IDUwJTtcIixcblx0XHRcdFwibWFyZ2luLXRvcDogLTE4cHg7XCIsXG5cdFx0XHRcInRleHQtYWxpZ246IGNlbnRlcjtcIixcblx0XHRcIn1cIixcblx0XHRcIi5zd2Mtd2lkZ2V0LWxvYWRlciBzcGFuIHtcIixcblx0XHRcdFwiZGlzcGxheTogaW5saW5lLWJsb2NrO1wiLFxuXHRcdFx0XCJ3aWR0aDogMThweDtcIixcblx0XHRcdFwiaGVpZ2h0OiAxOHB4O1wiLFxuXHRcdFx0XCJib3JkZXItcmFkaXVzOiA1MCU7XCIsXG5cdFx0XHRcImJhY2tncm91bmQtY29sb3I6ICNmZmY7XCIsXG5cdFx0XHRcIm1hcmdpbjogM3B4O1wiLFxuXHRcdFwifVwiLFxuXHRcdFwiLnN3Yy13aWRnZXQtbG9hZGVyIHNwYW46bnRoLWxhc3QtY2hpbGQoMSkgeyAtd2Via2l0LWFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjFzIGxpbmVhciBpbmZpbml0ZTsgLW1vei1hbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC4xcyBsaW5lYXIgaW5maW5pdGU7IC1tcy1hbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC4xcyBsaW5lYXIgaW5maW5pdGU7IC1vLWFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjFzIGxpbmVhciBpbmZpbml0ZTsgYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuMXMgbGluZWFyIGluZmluaXRlOyB9XCIsXG5cdFx0XCIuc3djLXdpZGdldC1sb2FkZXIgc3BhbjpudGgtbGFzdC1jaGlsZCgyKSB7IC13ZWJraXQtYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuM3MgbGluZWFyIGluZmluaXRlOyAtbW96LWFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjNzIGxpbmVhciBpbmZpbml0ZTsgLW1zLWFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjNzIGxpbmVhciBpbmZpbml0ZTsgLW8tYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuM3MgbGluZWFyIGluZmluaXRlOyBhbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC4zcyBsaW5lYXIgaW5maW5pdGU7IH1cIixcblx0XHRcIi5zd2Mtd2lkZ2V0LWxvYWRlciBzcGFuOm50aC1sYXN0LWNoaWxkKDMpIHsgLXdlYmtpdC1hbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC41cyBsaW5lYXIgaW5maW5pdGU7IC1tb3otYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuNXMgbGluZWFyIGluZmluaXRlOyAtbXMtYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuNXMgbGluZWFyIGluZmluaXRlOyAtby1hbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC41cyBsaW5lYXIgaW5maW5pdGU7IGFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjVzIGxpbmVhciBpbmZpbml0ZTsgfVwiLFxuXHRdLmpvaW4oXCIgXCIpO1xuXG5cdHN0eWxlLmlubmVySFRNTCA9IHRoZVJ1bGVzO1xufVxuXG4vKipcbiAqIFNldCBXaWRnZXQgZXZlbnQgbGlzdGVuZXJzXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHdpZGdldCAtIFdpZGdldCBIVE1MIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gc2V0TGlzdGVuZXJzKHdpZGdldCl7XG5cdC8vIHZhciBzZW5kTXNnQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4Kyctc2VuZC1tZXNzYWdlJyksXG5cdHZhciBmaWxlU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctZmlsZS1zZWxlY3QnKTtcblx0dmFyIHRleHRGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2UtdGV4dCcpO1xuXHR2YXIgaW5wdXRzID0gW10uc2xpY2UuY2FsbCh3aWRnZXQucXVlcnlTZWxlY3RvckFsbCgnLicrZGVmYXVsdHMucHJlZml4KyctaW5wdXRmaWxlJykpO1xuXHR2YXIgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctYnRuLWNvbnQnKTtcblx0dmFyIHBhbmVzID0gW10uc2xpY2UuY2FsbCh3aWRnZXQucXVlcnlTZWxlY3RvckFsbCgnLicrZGVmYXVsdHMucHJlZml4Kyctd2ctcGFuZScpKTtcblx0dmFyIG1lc3NhZ2VzQ29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2VzLWNvbnQnKTtcblxuXHRpbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCl7XG5cdFx0dmFyIGxhYmVsID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nLFxuXHRcdFx0bGFiZWxWYWwgPSBsYWJlbC50ZXh0Q29udGVudDtcblxuXHRcdGFkZEV2ZW50KGlucHV0LCAnY2hhbmdlJywgZnVuY3Rpb24oZSl7XG5cdFx0XHR2YXIgZmlsZU5hbWUgPSBlLnRhcmdldC52YWx1ZS5zcGxpdCggJ1xcXFwnICkucG9wKCk7XG5cdFx0XHRpZihmaWxlTmFtZSlcblx0XHRcdFx0bGFiZWwudGV4dENvbnRlbnQgPSBmaWxlTmFtZTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0bGFiZWwudGV4dENvbnRlbnQgPSBsYWJlbFZhbDtcblx0XHR9KTtcblx0fSk7XG5cblx0YWRkRXZlbnQoYnRuLCAnY2xpY2snLCBidG5DbGlja0hhbmRsZXIpO1xuXHRhZGRFdmVudCh3aWRnZXQsICdjbGljaycsIHdnQ2xpY2tIYW5kbGVyKTtcblx0YWRkRXZlbnQod2lkZ2V0LCAnc3VibWl0Jywgd2dTdWJtaXRIYW5kbGVyKTtcblx0Ly8gYWRkRXZlbnQoc2VuZE1zZ0J0biwgJ2NsaWNrJywgd2dTZW5kTWVzc2FnZSk7XG5cdGFkZEV2ZW50KGZpbGVTZWxlY3QsICdjaGFuZ2UnLCB3Z1NlbmRGaWxlKTtcblx0YWRkRXZlbnQodGV4dEZpZWxkLCAna2V5cHJlc3MnLCB3Z1R5cGluZ0hhbmRsZXIpO1xuXHRhZGRFdmVudCh0ZXh0RmllbGQsICdmb2N1cycsIHdnVGV4dGFyZWFGb2N1c0hhbmRsZXIpO1xuXHRhZGRFdmVudCh0ZXh0RmllbGQsICdibHVyJywgd2dUZXh0YXJlYUJsdXJIYW5kbGVyKTtcblxuXHRhZGRFdmVudChnbG9iYWwsICdET01Nb3VzZVNjcm9sbCcsIHdnR2xvYmFsU2Nyb2xsSGFuZGxlcik7XG5cdGFkZEV2ZW50KGdsb2JhbCwgJ3doZWVsJywgd2dHbG9iYWxTY3JvbGxIYW5kbGVyKTtcblx0Ly8gd2luZG93Lm9udG91Y2htb3ZlICA9IHdnR2xvYmFsU2Nyb2xsSGFuZGxlcjsgLy8gbW9iaWxlXG5cblx0YWRkRXZlbnQod2lkZ2V0LCAnbW91c2VlbnRlcicsIG9uTW91c2VFbnRlcik7XG5cdGFkZEV2ZW50KHdpZGdldCwgJ21vdXNlbGVhdmUnLCBvbk1vdXNlTGVhdmUpO1xuXG5cdC8vIGlmKGRlZmF1bHRzLmJ1dHRvbkVsZW1lbnQpIFxuXHQvLyBcdGRlZmF1bHRzLmJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwdWJsaWNBcGkub3BlbldpZGdldCwgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBzZXRIYW5kbGVycyhzZWxlY3Rvcikge1xuXHR2YXIgZm4gPSBkZWZhdWx0cy53aWRnZXQgPyBpbml0V2lkZ2V0U3RhdGUgOiBvcGVuV2lkZ2V0O1xuXHR2YXIgZWxzID0gW10uc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG5cdGVscy5tYXAoZnVuY3Rpb24oZWwpIHsgYWRkRXZlbnQoZWwsICdjbGljaycsIGZuKTsgcmV0dXJuIGVsOyB9KTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBXaWRnZXQgZXZlbnQgaGFuZGxlcnMgKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5mdW5jdGlvbiBvbk1vdXNlRW50ZXIoKSB7XG5cdG1vdXNlRm9jdXNlZCA9IHRydWU7XG59XG5cbmZ1bmN0aW9uIG9uTW91c2VMZWF2ZSgpIHtcblx0bW91c2VGb2N1c2VkID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHdnQ2xpY2tIYW5kbGVyKGUpe1xuXHR2YXIgdGFyZyA9IGUudGFyZ2V0LFxuXHRcdGhhbmRsZXIsXG5cdFx0cGFuZSxcblx0XHRocmVmLFxuXHRcdGRhdGFIcmVmO1xuXG5cdGlmKHRhcmcucGFyZW50Tm9kZS50YWdOYW1lID09PSAnQScgfHwgdGFyZy5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdCVVRUT04nKVxuXHRcdHRhcmcgPSB0YXJnLnBhcmVudE5vZGU7XG5cdFxuXHRoYW5kbGVyID0gdGFyZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtJytkZWZhdWx0cy5wcmVmaXgrJy1oYW5kbGVyJyk7XG5cdGRhdGFIcmVmID0gdGFyZy5nZXRBdHRyaWJ1dGUoJ2RhdGEtJytkZWZhdWx0cy5wcmVmaXgrJy1saW5rJyk7XG5cblx0aWYoaGFuZGxlciA9PT0gJ2Nsb3NlV2lkZ2V0Jykge1xuXHRcdGNsb3NlV2lkZ2V0KCk7XG5cdH0gZWxzZSBpZihoYW5kbGVyID09PSAnZmluaXNoJykge1xuXHRcdGlmKHN0b3JhZ2UuZ2V0U3RhdGUoJ2NoYXQnLCAnc2Vzc2lvbicpKSBzd2l0Y2hQYW5lKCdjbG9zZWNoYXQnKTtcblx0XHRlbHNlIGNsb3NlV2lkZ2V0KCk7XG5cdH0gZWxzZSBpZihoYW5kbGVyID09PSAnc2VuZE1lc3NhZ2UnKSB7XG5cdFx0d2dTZW5kTWVzc2FnZSgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ29wZW5XaW5kb3cnKSB7XG5cdFx0b3BlbldpZGdldCgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ3JlamVjdEZvcm0nKSB7XG5cdFx0YXBpLmVtaXQoJ2Zvcm0vcmVqZWN0JywgeyBmb3JtTmFtZTogXy5maW5kUGFyZW50KHRhcmcsICdmb3JtJykubmFtZSB9KTtcblx0fSBlbHNlIGlmKGhhbmRsZXIgPT09ICdpbml0Q2FsbCcpIHtcblx0XHRpbml0Q2FsbCgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ2luaXRGYWxsYmFja0NhbGwnKSB7XG5cdFx0aW5pdEZhbGxiYWNrQ2FsbCgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ2luaXRDYWxsYmFjaycpIHtcblx0XHRpbml0Q2FsbGJhY2soKTtcblx0fSBlbHNlIGlmKGhhbmRsZXIgPT09ICdzZXRDYWxsYmFjaycpIHtcblx0XHRzZXRDYWxsYmFjaygpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ2luaXRDaGF0Jykge1xuXHRcdGluaXRDaGF0KCk7XG5cdH0gZWxzZSBpZihoYW5kbGVyID09PSAnZW5kQ2FsbCcpIHtcblx0XHRlbmRDYWxsKCk7XG5cdH1cblxuXHRpZih0YXJnLnRhZ05hbWUgPT09ICdBJykge1xuXHRcdGhyZWYgPSB0YXJnLmhyZWY7XG5cblx0XHRpZihkYXRhSHJlZikge1xuXHRcdFx0YXBpLmxpbmtGb2xsb3dlZChkYXRhSHJlZik7XG5cdFx0fSBlbHNlIGlmKGhyZWYuaW5kZXhPZignIycpICE9PSAtMSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0cGFuZSA9IGhyZWYuc3Vic3RyaW5nKHRhcmcuaHJlZi5pbmRleE9mKCcjJykrMSk7XG5cdFx0XHRpZihwYW5lKSBzd2l0Y2hQYW5lKHBhbmUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBidG5DbGlja0hhbmRsZXIoZSl7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0dmFyIHRhcmcgPSBlLnRhcmdldCxcblx0XHRjdXJyVGFyZyA9IGUuY3VycmVudFRhcmdldDtcblxuXHQvLyByZW1vdmUgbm90aWZpY2F0aW9uIG9mIGEgbmV3IG1lc3NhZ2Vcblx0aWYodGFyZy5pZCA9PT0gZGVmYXVsdHMucHJlZml4KyctdW5ub3RpZnktYnRuJykge1xuXHRcdHJlbW92ZVdnU3RhdGUoJ25vdGlmaWVkJyk7XG5cdFx0Ly8gcmVzZXQgYnV0dG9uIGhlaWdodFxuXHRcdC8vIHJlc2V0U3R5bGVzKGJ0bi5jaGlsZHJlblswXSk7XG5cdFx0c2V0QnV0dG9uU3R5bGUod2lkZ2V0U3RhdGUuc3RhdGUpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmKGN1cnJUYXJnLmlkID09PSBkZWZhdWx0cy5wcmVmaXgrJy1idG4tY29udCcpIHtcblx0XHRpbml0V2lkZ2V0U3RhdGUoKTtcblx0fVxufVxuXG5mdW5jdGlvbiB3Z0dsb2JhbFNjcm9sbEhhbmRsZXIoZSkge1xuXHR2YXIgdGFyZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2VzLWNvbnQnKTtcblx0dmFyIGRpciA9IGdldFNjcm9sbERpcmVjdGlvbihlKTtcblx0aWYobW91c2VGb2N1c2VkKSB7XG5cdFx0aWYodGFyZy5zY3JvbGxUb3AgPT09IDAgJiYgZGlyID09PSAndXAnKSB7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH0gZWxzZSBpZiAodGFyZy5zY3JvbGxUb3AgPj0gKHRhcmcuc2Nyb2xsSGVpZ2h0LXRhcmcuY2xpZW50SGVpZ2h0KSAmJiBkaXIgPT09ICdkb3duJykge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsRGlyZWN0aW9uKGV2ZW50KSB7XG5cdHZhciBkZWx0YTtcblxuICAgIGlmKGV2ZW50LndoZWVsRGVsdGEpIHtcbiAgICAgICAgZGVsdGEgPSBldmVudC53aGVlbERlbHRhO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRlbHRhID0gLTEgKiBldmVudC5kZWx0YVk7XG4gICAgfVxuXG4gICAgaWYoZGVsdGEgPCAwKSB7XG4gICAgICAgIHJldHVybiBcImRvd25cIjtcbiAgICB9IGVsc2UgaWYoZGVsdGEgPiAwKSB7XG4gICAgICAgIHJldHVybiBcInVwXCI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbml0V2lkZ2V0U3RhdGUoKXtcblx0dmFyIGNoYXRJblByb2dyZXNzID0gc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcsICdzZXNzaW9uJyk7XG5cdHZhciB3YXNPcGVuZWQgPSBzdG9yYWdlLmdldFN0YXRlKCdvcGVuZWQnLCAnc2Vzc2lvbicpO1xuXHR2YXIgY2FsbEluUHJvZ3Jlc3MgPSBzdG9yYWdlLmdldFN0YXRlKCdjYWxsJywgJ2NhY2hlJyk7XG5cdC8vIElmIGVsZW1lbnQgaXMgaW50ZXJhY3RlZCwgdGhlbiBubyBub3RpZmljYXRpb25zIG9mIGEgbmV3IG1lc3NhZ2UgXG5cdC8vIHdpbGwgb2NjdXIgZHVyaW5nIGN1cnJlbnQgYnJvd3NlciBzZXNzaW9uXG5cdHNldEludGVyYWN0ZWQoKTtcblx0Ly8gSWYgdGltZW91dCBpcyBvY2N1cmVkLCBpbml0IHNlc3Npb24gZmlyc3Rcblx0aWYoaGFzV2dTdGF0ZSgndGltZW91dCcpKSB7XG5cdFx0aW5pdE1vZHVsZSgpO1xuXHR9IGVsc2UgaWYoY2hhdEluUHJvZ3Jlc3Mpe1xuXHRcdHNob3dXaWRnZXQoKTtcblx0fSBlbHNlIGlmKCFsYW5ncy5sZW5ndGgpe1xuXHRcdHN3aXRjaFBhbmUoJ3NlbmRlbWFpbCcpO1xuXHRcdHNob3dXaWRnZXQoKTtcblx0fSBlbHNlIGlmKGRlZmF1bHRzLndlYnJ0Y0VuYWJsZWQpe1xuXHRcdC8vIGlmIGNhbGwgaXMgaW4gcHJvZ3Jlc3MgLSBqdXN0IHNob3cgdGhlIHdpZGdldFxuXHRcdGlmKGNhbGxJblByb2dyZXNzKSB7XG5cdFx0XHRzaG93V2lkZ2V0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKCFkZWZhdWx0cy5jaGF0ICYmICFkZWZhdWx0cy5jaGFubmVscy5jYWxsYmFjay50YXNrKSB7XG5cdFx0XHRcdGluaXRDYWxsKCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzd2l0Y2hQYW5lKCdjaG9vc2VDb25uZWN0aW9uJyk7XG5cdFx0XHR9XG5cdFx0XHRzaG93V2lkZ2V0KCk7XG5cdFx0fVxuXHR9IGVsc2UgaWYoZGVmYXVsdHMuY2hhbm5lbHMuY2FsbGJhY2sudGFzaykge1xuXHRcdGlmKCFkZWZhdWx0cy5jaGF0ICYmICFkZWZhdWx0cy53ZWJydGNFbmFibGVkKSB7XG5cdFx0XHRzd2l0Y2hQYW5lKCdjYWxsYmFjaycpO1xuXHRcdFx0c2hvd1dpZGdldCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzd2l0Y2hQYW5lKCdjaG9vc2VDb25uZWN0aW9uJyk7XG5cdFx0XHRzaG93V2lkZ2V0KCk7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGluaXRDaGF0KCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gd2dTZW5kTWVzc2FnZSgpe1xuXHR2YXIgbXNnLFxuXHRcdHRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZS10ZXh0Jyk7XG5cblx0bXNnID0gXy50cmltKHRleHRhcmVhLnZhbHVlKTtcblx0aWYobXNnKSB7XG5cblx0XHRpZighc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcsICdzZXNzaW9uJykpIHtcblx0XHRcdGluaXRDaGF0KCk7XG5cdFx0fVxuXG5cdFx0c2VuZE1lc3NhZ2UoeyBtZXNzYWdlOiBtc2cgfSk7XG5cdFx0dGV4dGFyZWEudmFsdWUgPSAnJztcblx0XHRyZW1vdmVXZ1N0YXRlKCd0eXBlLWV4dGVuZCcpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHdnVHlwaW5nSGFuZGxlcihlKXtcblx0dmFyIHRhcmcgPSBlLnRhcmdldDtcblx0dmFyIGNsb25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzd2MtbWVzc2FnZS10ZXh0LWNsb25lXCIpO1xuXG5cdGlmKGUua2V5Q29kZSA9PT0gMTAgfHwgZS5rZXlDb2RlID09PSAxMykge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR3Z1NlbmRNZXNzYWdlKCk7XG5cdH0gZWxzZSB7XG5cdFx0aWYoIXVzZXJJc1R5cGluZ1RpbWVvdXQpIHtcblx0XHRcdHVzZXJJc1R5cGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR1c2VySXNUeXBpbmdUaW1lb3V0ID0gbnVsbDtcblx0XHRcdFx0YXBpLnVzZXJJc1R5cGluZygpO1xuXHRcdFx0fSwgMTAwMCk7XG5cdFx0fVxuXHR9XG5cblx0Y2xvbmUuaW5uZXJUZXh0ID0gdGFyZy52YWx1ZTtcblx0dGFyZy5zdHlsZS5oZWlnaHQgPSBjbG9uZS5jbGllbnRIZWlnaHQrJ3B4JztcblxuXHQvLyBpZih0YXJnLnZhbHVlLmxlbmd0aCA+PSA4MCAmJiAhaGFzV2dTdGF0ZSgndHlwZS1leHRlbmQnKSlcblx0Ly8gXHRhZGRXZ1N0YXRlKCd0eXBlLWV4dGVuZCcpO1xuXHQvLyBpZih0YXJnLnZhbHVlLmxlbmd0aCA8IDgwICYmIGhhc1dnU3RhdGUoJ3R5cGUtZXh0ZW5kJykpXG5cdC8vIFx0cmVtb3ZlV2dTdGF0ZSgndHlwZS1leHRlbmQnKTtcbn1cblxuZnVuY3Rpb24gd2dUZXh0YXJlYUZvY3VzSGFuZGxlcihlKSB7XG5cdHZhciB0YXJnZXQgPSBlLnRhcmdldDtcblx0dGFyZ2V0LnN0eWxlLmJvcmRlckNvbG9yID0gZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yO1xufVxuXG5mdW5jdGlvbiB3Z1RleHRhcmVhQmx1ckhhbmRsZXIoZSkge1xuXHR2YXIgdGFyZ2V0ID0gZS50YXJnZXQ7XG5cdHRhcmdldC5zdHlsZS5ib3JkZXJDb2xvciA9IFwiI2ZmZlwiO1xufVxuXG5mdW5jdGlvbiB3Z1N1Ym1pdEhhbmRsZXIoZSl7XG5cdHZhciB0YXJnID0gZS50YXJnZXQ7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0aWYodGFyZy50YWdOYW1lID09PSAnRk9STScpXG5cdFx0YXBpLmVtaXQoJ2Zvcm0vc3VibWl0JywgeyBmb3JtRWxlbWVudDogdGFyZywgZm9ybURhdGE6IGdldEZvcm1EYXRhKHRhcmcpIH0pO1xufVxuXG5mdW5jdGlvbiB3Z1NlbmRGaWxlKGUpe1xuXHR2YXIgdGFyZyA9IGUudGFyZ2V0O1xuXHR2YXIgZmlsZSA9IGdldEZpbGVDb250ZW50KHRhcmcsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG5cdFx0ZGVidWcubG9nKCd3Z1NlbmRGaWxlOiAnLCByZXN1bHQpO1xuXHRcdGlmKGVycikge1xuXHRcdFx0YWxlcnQoJ0ZpbGUgd2FzIG5vdCBzZW50Jyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNlbmRNZXNzYWdlKHsgbWVzc2FnZTogcmVzdWx0LmZpbGVuYW1lLCBmaWxlOiByZXN1bHQuZmlsZWRhdGEgfSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBXaWRnZXQgZWxlbWVudHMgbWFuaXB1bGF0aW9uICpcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZnVuY3Rpb24gc3dpdGNoUGFuZShwYW5lKXtcblx0Ly8gdmFyIHBhbmVJZCA9IGRlZmF1bHRzLnByZWZpeCsnLScrcGFuZSsnLXBhbmUnO1xuXHR2YXIgYXR0ciA9ICdkYXRhLScrZGVmYXVsdHMucHJlZml4KyctcGFuZSc7XG5cdHZhciBwYW5lcyA9IFtdLnNsaWNlLmNhbGwod2lkZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoJy4nK2RlZmF1bHRzLnByZWZpeCsnLXdnLXBhbmUnKSk7XG5cdC8vIGRlYnVnLmxvZygnc3dpdGNoUGFuZSBwYW5lczonLCBwYW5lcywgJ3BhbmU6ICcsIHBhbmUpO1xuXHRwYW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuXHRcdGlmKGl0ZW0uZ2V0QXR0cmlidXRlKGF0dHIpID09PSBwYW5lKSB7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdH1cblx0fSk7XG5cblx0Ly8gaWYoIXdpZGdldFN0YXRlLmFjdGl2ZSkgc2hvd1dpZGdldCgpO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VXZ1N0YXRlKHBhcmFtcyl7XG5cdGlmKCF3aWRnZXQgfHwgd2lkZ2V0U3RhdGUuc3RhdGUgPT09IHBhcmFtcy5zdGF0ZSkgcmV0dXJuO1xuXHRpZihwYXJhbXMuc3RhdGUgPT09ICdvZmZsaW5lJykge1xuXHRcdGNsb3NlQ2hhdCgpO1xuXHRcdHJlbW92ZVdnU3RhdGUoJ29ubGluZScpO1xuXHRcdHN3aXRjaFBhbmUoJ3NlbmRlbWFpbCcpO1xuXHR9IGVsc2UgaWYocGFyYW1zLnN0YXRlID09PSAnb25saW5lJykge1xuXHRcdHJlbW92ZVdnU3RhdGUoJ29mZmxpbmUnKTtcblx0XHRcblx0fVxuXG5cdHZhciBzdGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nK2RlZmF1bHRzLnByZWZpeCsnLXdnLXN0YXRlJyk7XG5cdGlmKHN0YXRlKSBzdGF0ZS50ZXh0Q29udGVudCA9IGZyYXNlcy5UT1BfQkFSLlNUQVRVU1twYXJhbXMuc3RhdGVdO1xuXG5cdHdpZGdldFN0YXRlLnN0YXRlID0gcGFyYW1zLnN0YXRlO1xuXHRhZGRXZ1N0YXRlKHBhcmFtcy5zdGF0ZSk7XG5cdHNldEJ1dHRvblN0eWxlKHBhcmFtcy5zdGF0ZSk7XG5cdGFwaS5lbWl0KCd3aWRnZXQvc3RhdGVjaGFuZ2UnLCB7IHN0YXRlOiBwYXJhbXMuc3RhdGUgfSk7XG5cdFxufVxuXG5mdW5jdGlvbiBnZXRXaWRnZXRTdGF0ZSgpIHtcblx0cmV0dXJuIHdpZGdldFN0YXRlLnN0YXRlID8gd2lkZ2V0U3RhdGUuc3RhdGUgOiAoKGxhbmdzICYmbGFuZ3MubGVuZ3RoKSA/ICdvbmxpbmUnIDogJ29mZmxpbmUnKTtcbn1cblxuZnVuY3Rpb24gc2V0U3R5bGVzKCkge1xuXHR2YXIgd2dCdG4gPSB3aWRnZXQucXVlcnlTZWxlY3RvcignLicrZGVmYXVsdHMucHJlZml4Kyctd2ctYnRuJyk7XG5cblx0Y29uc29sZS5sb2coJ3NldFN0eWxlczogJywgd2dCdG4sIGRlZmF1bHRzLmJ1dHRvblN0eWxlcyk7XG5cblx0d2dCdG4uc3R5bGUuYm9yZGVyUmFkaXVzID0gZGVmYXVsdHMuYnV0dG9uU3R5bGVzLmJvcmRlclJhZGl1cztcblx0d2dCdG4uc3R5bGUuYm94U2hhZG93ID0gZGVmYXVsdHMuYnV0dG9uU3R5bGVzLmJveFNoYWRvdztcbn1cblxuLy8gVE9ETzogVGhpcyBpcyBub3QgYSBnb29kIHNvbHV0aW9uIG9yIG1heWJlIG5vdCBhIGdvb2QgaW1wbGVtZW50YXRpb25cbmZ1bmN0aW9uIHNldEJ1dHRvblN0eWxlKHN0YXRlKSB7XG5cdC8vIGRlYnVnLmxvZygnc2V0QnV0dG9uU3R5bGU6ICcsIHN0YXRlKTtcblx0aWYoIXdpZGdldCB8fCBkZWZhdWx0cy5idXR0b25TdHlsZXNbc3RhdGVdID09PSB1bmRlZmluZWQpIHJldHVybjtcblx0dmFyIHdnQnRuID0gd2lkZ2V0LnF1ZXJ5U2VsZWN0b3IoJy4nK2RlZmF1bHRzLnByZWZpeCsnLXdnLWJ0bicpLFxuXHRcdGJ0bkljb24gPSB3aWRnZXQucXVlcnlTZWxlY3RvcignLicrZGVmYXVsdHMucHJlZml4KyctYnRuLWljb24nKTtcblxuXHR3Z0J0bi5zdHlsZS5iYWNrZ3JvdW5kID0gZGVmYXVsdHMuYnV0dG9uU3R5bGVzW3N0YXRlXS5iYWNrZ3JvdW5kQ29sb3I7XG5cdGJ0bkljb24uc3R5bGUuY29sb3IgPSBkZWZhdWx0cy5idXR0b25TdHlsZXNbc3RhdGVdLmNvbG9yIHx8IGRlZmF1bHRzLmJ1dHRvblN0eWxlcy5jb2xvcjtcbn1cblxuZnVuY3Rpb24gYWRkV2dTdGF0ZShzdGF0ZSl7XG5cdGlmKHdpZGdldCkgd2lkZ2V0LmNsYXNzTGlzdC5hZGQoc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBoYXNXZ1N0YXRlKHN0YXRlKXtcblx0aWYod2lkZ2V0KSByZXR1cm4gd2lkZ2V0LmNsYXNzTGlzdC5jb250YWlucyhzdGF0ZSk7XG5cdGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVXZ1N0YXRlKHN0YXRlKXtcblx0aWYod2lkZ2V0KSB3aWRnZXQuY2xhc3NMaXN0LnJlbW92ZShzdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIHNob3dXaWRnZXQoKXtcblx0dmFyIG1lc3NhZ2VzQ29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2VzLWNvbnQnKTtcblxuXHR3aWRnZXRTdGF0ZS5hY3RpdmUgPSB0cnVlO1xuXHRzdG9yYWdlLnNhdmVTdGF0ZSgnb3BlbmVkJywgdHJ1ZSwgJ3Nlc3Npb24nKTtcblx0YWRkV2dTdGF0ZSgnYWN0aXZlJyk7XG5cdHJlbW92ZVdnU3RhdGUoJ25vdGlmaWVkJyk7XG5cblx0Ly8gcmVzZXQgYnV0dG9uIGhlaWdodFxuXHQvLyByZXNldFN0eWxlcyhidG4uY2hpbGRyZW5bMF0pO1xuXHRzZXRCdXR0b25TdHlsZSh3aWRnZXRTdGF0ZS5zdGF0ZSk7XG5cblx0bWVzc2FnZXNDb250LnNjcm9sbFRvcCA9IG1lc3NhZ2VzQ29udC5zY3JvbGxIZWlnaHQ7XG59XG5cbmZ1bmN0aW9uIGNsb3NlV2lkZ2V0KCl7XG5cdGlmKHdpbmRvdy5vcGVuZXIpIHtcblx0XHR3aW5kb3cuY2xvc2UoKTtcblx0fSBlbHNlIHtcblx0XHR3aWRnZXRTdGF0ZS5hY3RpdmUgPSBmYWxzZTtcblx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnb3BlbmVkJywgZmFsc2UsICdzZXNzaW9uJyk7XG5cdFx0cmVtb3ZlV2dTdGF0ZSgnYWN0aXZlJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gb25Gb3JtU3VibWl0KHBhcmFtcyl7XG5cdHZhciBmb3JtID0gcGFyYW1zLmZvcm1FbGVtZW50O1xuXHR2YXIgZm9ybURhdGEgPSBwYXJhbXMuZm9ybURhdGE7XG5cdGRlYnVnLmxvZygnb25Gb3JtU3VibWl0OiAnLCBmb3JtLCBmb3JtRGF0YSk7XG5cdGlmKGZvcm0uZ2V0QXR0cmlidXRlKCdkYXRhLXZhbGlkYXRlLWZvcm0nKSkge1xuXHRcdHZhciB2YWxpZCA9IHZhbGlkYXRlRm9ybShmb3JtKTtcblx0XHRpZighdmFsaWQpIHJldHVybjtcblx0XHQvLyBkZWJ1Zy5sb2coJ29uRm9ybVN1Ym1pdCB2YWxpZDogJywgdmFsaWQpO1xuXHR9XG5cdGlmKGZvcm0uaWQgPT09IGRlZmF1bHRzLnByZWZpeCsnLWNsb3NlY2hhdC1mb3JtJykge1xuXHRcdHN1Ym1pdENsb3NlQ2hhdEZvcm0oZm9ybSwgZm9ybURhdGEpO1xuXHR9IGVsc2UgaWYoZm9ybS5pZCA9PT0gZGVmYXVsdHMucHJlZml4Kyctc2VuZG1haWwtZm9ybScpIHtcblx0XHRzdWJtaXRTZW5kTWFpbEZvcm0oZm9ybSwgZm9ybURhdGEpO1xuXHR9IGVsc2UgaWYoZm9ybS5pZCA9PT0gZGVmYXVsdHMucHJlZml4KyctaW50cm8tZm9ybScpIHtcblx0XHRyZXF1ZXN0Q2hhdChmb3JtRGF0YSk7XG5cdH0gZWxzZSBpZihmb3JtLmlkID09PSBkZWZhdWx0cy5wcmVmaXgrJy1jYWxsLWJ0bi1mb3JtJyl7XG5cdFx0aW5pdENhbGwoKTtcblx0fSBlbHNlIGlmKGZvcm0uaWQgPT09IGRlZmF1bHRzLnByZWZpeCsnLWNoYXQtYnRuLWZvcm0nKXtcblx0XHRpbml0Q2hhdCgpO1xuXHR9IGVsc2UgaWYoZm9ybS5pZCA9PT0gZGVmYXVsdHMucHJlZml4KyctcXVldWVfb3ZlcmxvYWQnKXtcblx0XHRzZW5kUmVxdWVzdChmb3JtRGF0YSk7XG5cdFx0Y2xvc2VGb3JtKHsgZm9ybU5hbWU6IGZvcm0ubmFtZSB9LCB0cnVlKTtcblx0fSBlbHNlIGlmKGZvcm0uaWQgPT09IGRlZmF1bHRzLnByZWZpeCsnLXJlcXVlc3RfYnJvd3Nlcl9hY2Nlc3MnKXtcblx0XHRqb2luU2Vzc2lvbih7IHVybDogZ2xvYmFsLmxvY2F0aW9uLmhyZWYgfSk7XG5cdFx0Y2xvc2VGb3JtKHsgZm9ybU5hbWU6IGZvcm0ubmFtZSB9LCB0cnVlKTtcblx0XHRjbG9zZVdpZGdldCgpO1xuXHR9IGVsc2Uge1xuXHRcdGNsb3NlRm9ybSh7IGZvcm1OYW1lOiBmb3JtLm5hbWUgfSwgdHJ1ZSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xvc2VGb3JtKHBhcmFtcywgc3VibWl0dGVkKXtcblx0dmFyIGZvcm0gPSBnbG9iYWxbcGFyYW1zLmZvcm1OYW1lXTtcblx0aWYoIWZvcm0pIHJldHVybiBmYWxzZTtcblx0aWYoc3VibWl0dGVkKSB7XG5cdFx0Zm9ybS5vdXRlckhUTUwgPSAnPHAgY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLXRleHQtY2VudGVyXCI+Jytcblx0XHRcdFx0XHRcdFx0JzxpIGNsYXNzPVwiJytkZWZhdWx0cy5wcmVmaXgrJy10ZXh0LXN1Y2Nlc3MgJytkZWZhdWx0cy5wcmVmaXgrJy1pY29uLWNoZWNrXCI+PC9pPicrXG5cdFx0XHRcdFx0XHRcdCc8c3Bhbj4gJytmcmFzZXMuRk9STVMuc3VibWl0dGVkKyc8L3NwYW4+Jytcblx0XHRcdFx0XHRcdCc8L3A+Jztcblx0fSBlbHNlIHtcblx0XHRmb3JtLm91dGVySFRNTCA9ICc8cCBjbGFzcz1cIicrZGVmYXVsdHMucHJlZml4KyctdGV4dC1jZW50ZXJcIj4nK1xuXHRcdFx0XHRcdFx0XHQnPGkgY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLXRleHQtZGFuZ2VyICcrZGVmYXVsdHMucHJlZml4KyctaWNvbi1yZW1vdmVcIj48L2k+Jytcblx0XHRcdFx0XHRcdFx0JzxzcGFuPiAnK2ZyYXNlcy5GT1JNUy5jYW5jZWxlZCsnPC9zcGFuPicrXG5cdFx0XHRcdFx0XHQnPC9wPic7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0RmlsZUNvbnRlbnQoZWxlbWVudCwgY2Ipe1xuXHR2YXIgZmlsZXMgPSBlbGVtZW50LmZpbGVzLFxuXHRcdGZpbGUsXG5cdFx0ZGF0YSxcblx0XHRyZWFkZXI7XG5cblx0aWYoIWZpbGVzLmxlbmd0aCkgcmV0dXJuO1xuXHRpZighZ2xvYmFsLkZpbGVSZWFkZXIpIHtcblx0XHRpZihjYikgY2IoJ09CU09MRVRFX0JST1dTRVInKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRmaWxlID0gZmlsZXNbMF07XG5cblx0cmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0ZGF0YSA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG5cdFx0ZGF0YSA9IGRhdGEuc3Vic3RyaW5nKGRhdGEuaW5kZXhPZignLCcpKzEpO1xuXHRcdGlmKGNiKSBjYihudWxsLCB7IGZpbGVkYXRhOiBkYXRhLCBmaWxlbmFtZTogZmlsZS5uYW1lIH0pO1xuXHR9O1xuXHRyZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0YXBpLmVtaXQoJ0Vycm9yJywgZXZlbnQudGFyZ2V0LmVycm9yKTtcblx0XHRpZihjYikgY2IoZXZlbnQudGFyZ2V0LmVycm9yKTtcblx0fTtcblx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG59XG5cbmZ1bmN0aW9uIGNvbXBpbGVUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSl7XG5cdHZhciBjb21waWxlZCA9IHRlbXBsYXRlc1t0ZW1wbGF0ZV07XG5cdHJldHVybiBjb21waWxlZChkYXRhKTtcbn1cblxuZnVuY3Rpb24gY2xlYXJXZ01lc3NhZ2VzKCkge1xuXHR2YXIgY29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2VzLWNvbnQnKTtcblx0dmFyIGNsb25lID0gY29udC5jbG9uZU5vZGUoKTtcblx0Y29udC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZSwgY29udCk7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogSGVscGVyIGZ1bmN0aW9ucyAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmZ1bmN0aW9uIGJyb3dzZXJJc09ic29sZXRlKCkge1xuXHRkZWJ1Zy53YXJuKCdZb3VyIGJyb3dzZXIgaXMgb2Jzb2xldGUhJyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZSh0cykge1xuXHR2YXIgZGF0ZSA9IG5ldyBEYXRlKHRzKSxcblx0XHRob3VycyA9IGRhdGUuZ2V0SG91cnMoKSxcblx0XHRtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCksXG5cdFx0dGltZSA9IChob3VycyA8IDEwID8gJzAnK2hvdXJzIDogaG91cnMpICsgJzonICsgKG1pbnV0ZXMgPCAxMCA/ICcwJyttaW51dGVzIDogbWludXRlcyk7XG5cblx0cmV0dXJuIHRpbWU7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTWVzc2FnZSh0ZXh0LCBmaWxlLCBlbnRpdHkpe1xuXHR2YXIgZmlsZW5hbWUsIGZvcm07XG5cdGlmKGZpbGUpIHtcblx0XHRmaWxlbmFtZSA9IHRleHQuc3Vic3RyaW5nKHRleHQuaW5kZXhPZignXycpKzEpO1xuXHRcdGlmKGlzSW1hZ2UoZmlsZSkpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHR5cGU6ICdpbWFnZScsXG5cdFx0XHRcdGNvbnRlbnQ6ICc8YSBocmVmPVwiJythcGkub3B0aW9ucy5zZXJ2ZXIrJy9pcGNjLycrdGV4dCsnXCIgZG93bmxvYWQ9XCInK2ZpbGVuYW1lKydcIj4nICtcblx0XHRcdFx0XHRcdCc8aW1nIHNyYz1cIicrYXBpLm9wdGlvbnMuc2VydmVyKycvaXBjYy8nK3RleHQrJ1wiIGFsdD1cImZpbGUgcHJldmlld1wiIC8+JyArXG5cdFx0XHRcdFx0JzwvYT4nXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiAnZmlsZScsXG5cdFx0XHRcdGNvbnRlbnQ6ICc8YSBocmVmPVwiJythcGkub3B0aW9ucy5zZXJ2ZXIrJy9pcGNjLycrdGV4dCsnXCIgZG93bmxvYWQ9XCInK2ZpbGVuYW1lKydcIj4nK2ZpbGVuYW1lKyc8L2E+J1xuXHRcdFx0fTtcblx0XHR9XG5cdH0gZWxzZSBpZihlbnRpdHkgPT09ICdhZ2VudCcgJiYgaXNMaW5rKHRleHQpICYmIGlzSW1hZ2UodGV4dCkpIHtcblx0XHRmaWxlbmFtZSA9IHRleHQuc3Vic3RyaW5nKHRleHQuaW5kZXhPZignXycpKzEpXG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6ICdpbWFnZScsXG5cdFx0XHRjb250ZW50OiAnPGEgaHJlZj1cIicrdGV4dCsnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArXG5cdFx0XHRcdFx0JzxpbWcgc3JjPVwiJyt0ZXh0KydcIiBhbHQ9XCInK2ZpbGVuYW1lKydcIiAvPicgK1xuXHRcdFx0XHQnPC9hPidcblx0XHR9O1xuXHR9IGVsc2UgaWYoZW50aXR5ID09PSAnYWdlbnQnICYmIG5ldyBSZWdFeHAoJ157Lit9JCcpLnRlc3QodGV4dCkpIHtcblx0XHRmb3Jtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdGlmKGl0ZW0ubmFtZSA9PT0gdGV4dC5zdWJzdHJpbmcoMSwgdGV4dC5sZW5ndGgtMSkpIHtcblx0XHRcdFx0Zm9ybSA9IGl0ZW07XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogZm9ybSA/ICdmb3JtJyA6ICd0ZXh0Jyxcblx0XHRcdGNvbnRlbnQ6IGZvcm0gPyBmb3JtIDogdGV4dFxuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6ICd0ZXh0Jyxcblx0XHRcdGNvbnRlbnQ6IHRleHQucmVwbGFjZSgvXFxuL2csICcgPGJyPiAnKS5zcGxpdChcIiBcIikubWFwKGNvbnZlcnRMaW5rcykuam9pbihcIiBcIikucmVwbGFjZSgnIDxicj4gJywgJzxicj4nKVxuXHRcdH07XG5cdH1cbn1cblxuZnVuY3Rpb24gY29udmVydExpbmtzKHRleHQpe1xuXHR2YXIgbGVmdG92ZXJzID0gMDtcblx0dmFyIGhyZWYgPSB0ZXh0O1xuXHRpZihpc0xpbmsodGV4dCkpe1xuXG5cdFx0d2hpbGUoIShocmVmLmNoYXJBdChocmVmLmxlbmd0aC0xKS5tYXRjaCgvW2EtejAtOVxcL10vaSkpKXtcblx0XHRcdGhyZWYgPSBocmVmLnNsaWNlKDAsLTEpO1xuXHRcdFx0bGVmdG92ZXJzICs9IDE7XG5cdFx0fVxuXHRcdHJldHVybiAnPGEgaHJlZj1cIicraHJlZisnXCIgdGFyZ2V0PVwiX2JsYW5rXCIgZGF0YS0nK2RlZmF1bHRzLnByZWZpeCsnLWxpbms9XCInK2hyZWYrJ1wiPicraHJlZisnPC9hPicgKyB0ZXh0LnN1YnN0cih0ZXh0Lmxlbmd0aCAtIGxlZnRvdmVycyk7XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHRleHQ7XG5cdH1cbn1cblxuZnVuY3Rpb24gaXNMaW5rKHRleHQpe1xuXHR2YXIgcGF0dGVybiA9IG5ldyBSZWdFeHAoJ15odHRwOlxcL1xcL3xeaHR0cHM6XFwvXFwvJyk7XG5cdHJldHVybiBwYXR0ZXJuLnRlc3QodGV4dCk7XG59XG5cbmZ1bmN0aW9uIGlzSW1hZ2UoZmlsZW5hbWUpe1xuXHR2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCdwbmd8UE5HfGpwZ3xKUEd8SlBFR3xqcGVnfGdpZnxHSUYnKTtcblx0dmFyIGV4dCA9IGZpbGVuYW1lLnN1YnN0cmluZyhmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpKzEpO1xuXHRyZXR1cm4gcmVnZXgudGVzdChleHQpO1xufVxuXG5mdW5jdGlvbiBnZXRGb3JtRGF0YShmb3JtKXtcblx0dmFyIGZvcm1EYXRhID0ge307XG5cdFtdLnNsaWNlLmNhbGwoZm9ybS5lbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbihlbCkge1xuXHRcdGlmKGVsLnR5cGUgPT09ICdjaGVja2JveCcpIGZvcm1EYXRhW2VsLm5hbWVdID0gZWwuY2hlY2tlZDtcblx0XHRlbHNlIHtcblx0XHRcdGlmKGVsLnZhbHVlKSBmb3JtRGF0YVtlbC5uYW1lXSA9IGVsLnZhbHVlO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBmb3JtRGF0YTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pe1xuXHR2YXIgdmFsaWQgPSB0cnVlO1xuXHRbXS5zbGljZS5jYWxsKGZvcm0uZWxlbWVudHMpLmV2ZXJ5KGZ1bmN0aW9uKGVsKSB7XG5cdFx0Ly8gZGVidWcubG9nKCd2YWxpZGF0ZUZvcm0gZWw6JywgZWwsIGVsLmhhc0F0dHJpYnV0ZSgncmVxdWlyZWQnKSwgZWwudmFsdWUsIGVsLnR5cGUpO1xuXHRcdGlmKGVsLmhhc0F0dHJpYnV0ZSgncmVxdWlyZWQnKSAmJiAoZWwudmFsdWUgPT09IFwiXCIgfHwgZWwudmFsdWUgPT09IG51bGwpKSB7XG5cdFx0XHRhbGVydChmcmFzZXMuRVJST1JTW2VsLnR5cGVdIHx8IGZyYXNlcy5FUlJPUlMucmVxdWlyZWQpO1xuXHRcdFx0dmFsaWQgPSBmYWxzZTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHR9KTtcblx0Ly8gZGVidWcubG9nKCd2YWxpZGF0ZUZvcm0gdmFsaWQ6ICcsIHZhbGlkKTtcblx0cmV0dXJuIHZhbGlkO1xufVxuXG4vLyBmdW5jdGlvbiByZXNldFN0eWxlcyhlbGVtZW50KXtcbi8vIFx0ZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG4vLyB9XG5cbmZ1bmN0aW9uIGFkZFdpZGdldFN0eWxlcygpe1xuXHRcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG5cdFx0bGluay5yZWwgPSAnc3R5bGVzaGVldCc7XG5cdFx0bGluay5ocmVmID0gZGVmYXVsdHMuc3R5bGVzUGF0aCB8fCBkZWZhdWx0cy5jbGllbnRQYXRoKydtYWluLmNzcyc7XG5cblx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChsaW5rKTtcbn1cblxuZnVuY3Rpb24gUHJlZml4ZWRFdmVudChlbGVtZW50LCB0eXBlLCBwZngsIGNhbGxiYWNrKSB7XG5cdGZvciAodmFyIHAgPSAwOyBwIDwgcGZ4Lmxlbmd0aDsgcCsrKSB7XG5cdFx0aWYgKCFwZnhbcF0pIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHBmeFtwXSt0eXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUaW1lKHNlY29uZHMpe1xuXHR2YXIgbWludXRlcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwKSxcblx0XHRzZWNzUmVtYWluID0gc2Vjb25kcyAlIDYwLFxuXHRcdHN0ciA9IChtaW51dGVzID4gOSA/IG1pbnV0ZXMgOiAnMCcgKyBtaW51dGVzKSArICc6JyArIChzZWNzUmVtYWluID4gOSA/IHNlY3NSZW1haW4gOiAnMCcgKyBzZWNzUmVtYWluKTtcblx0cmV0dXJuIHN0cjtcbn1cblxuZnVuY3Rpb24gZm9ybWF0UGhvbmVOdW1iZXIocGhvbmUpIHtcblx0cmV0dXJuIHBob25lLnJlcGxhY2UoL1xcRCsvZywgXCJcIik7XG59XG5cbmZ1bmN0aW9uIGlzQnJvd3NlclN1cHBvcnRlZCgpIHtcblx0cmV0dXJuIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0ICE9PSB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50KG9iaiwgZXZUeXBlLCBmbikge1xuICBpZiAob2JqLmFkZEV2ZW50TGlzdGVuZXIpIG9iai5hZGRFdmVudExpc3RlbmVyKGV2VHlwZSwgZm4sIGZhbHNlKTtcbiAgZWxzZSBpZiAob2JqLmF0dGFjaEV2ZW50KSBvYmouYXR0YWNoRXZlbnQoXCJvblwiK2V2VHlwZSwgZm4pO1xufVxuZnVuY3Rpb24gcmVtb3ZlRXZlbnQob2JqLCBldlR5cGUsIGZuKSB7XG4gIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZUeXBlLCBmbiwgZmFsc2UpO1xuICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIG9iai5kZXRhY2hFdmVudChcIm9uXCIrZXZUeXBlLCBmbik7XG59XG4iXX0=
