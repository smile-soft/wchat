(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Wchat = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

;(function (exports) {
	'use strict';

  var Arr = (typeof Uint8Array !== 'undefined')
    ? Uint8Array
    : Array

	var PLUS   = '+'.charCodeAt(0)
	var SLASH  = '/'.charCodeAt(0)
	var NUMBER = '0'.charCodeAt(0)
	var LOWER  = 'a'.charCodeAt(0)
	var UPPER  = 'A'.charCodeAt(0)
	var PLUS_URL_SAFE = '-'.charCodeAt(0)
	var SLASH_URL_SAFE = '_'.charCodeAt(0)

	function decode (elt) {
		var code = elt.charCodeAt(0)
		if (code === PLUS ||
		    code === PLUS_URL_SAFE)
			return 62 // '+'
		if (code === SLASH ||
		    code === SLASH_URL_SAFE)
			return 63 // '/'
		if (code < NUMBER)
			return -1 //no match
		if (code < NUMBER + 10)
			return code - NUMBER + 26 + 26
		if (code < UPPER + 26)
			return code - UPPER
		if (code < LOWER + 26)
			return code - LOWER + 26
	}

	function b64ToByteArray (b64) {
		var i, j, l, tmp, placeHolders, arr

		if (b64.length % 4 > 0) {
			throw new Error('Invalid string. Length must be a multiple of 4')
		}

		// the number of equal signs (place holders)
		// if there are two placeholders, than the two characters before it
		// represent one byte
		// if there is only one, then the three characters before it represent 2 bytes
		// this is just a cheap hack to not do indexOf twice
		var len = b64.length
		placeHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0

		// base64 is 4/3 + up to two characters of the original data
		arr = new Arr(b64.length * 3 / 4 - placeHolders)

		// if there are placeholders, only get up to the last complete 4 chars
		l = placeHolders > 0 ? b64.length - 4 : b64.length

		var L = 0

		function push (v) {
			arr[L++] = v
		}

		for (i = 0, j = 0; i < l; i += 4, j += 3) {
			tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))
			push((tmp & 0xFF0000) >> 16)
			push((tmp & 0xFF00) >> 8)
			push(tmp & 0xFF)
		}

		if (placeHolders === 2) {
			tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)
			push(tmp & 0xFF)
		} else if (placeHolders === 1) {
			tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)
			push((tmp >> 8) & 0xFF)
			push(tmp & 0xFF)
		}

		return arr
	}

	function uint8ToBase64 (uint8) {
		var i,
			extraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes
			output = "",
			temp, length

		function encode (num) {
			return lookup.charAt(num)
		}

		function tripletToBase64 (num) {
			return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)
		}

		// go through the array every three bytes, we'll deal with trailing stuff later
		for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {
			temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
			output += tripletToBase64(temp)
		}

		// pad the end with zeros, but make sure to not forget the extra bytes
		switch (extraBytes) {
			case 1:
				temp = uint8[uint8.length - 1]
				output += encode(temp >> 2)
				output += encode((temp << 4) & 0x3F)
				output += '=='
				break
			case 2:
				temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])
				output += encode(temp >> 10)
				output += encode((temp >> 4) & 0x3F)
				output += encode((temp << 2) & 0x3F)
				output += '='
				break
		}

		return output
	}

	exports.toByteArray = b64ToByteArray
	exports.fromByteArray = uint8ToBase64
}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))

},{}],2:[function(require,module,exports){

},{}],3:[function(require,module,exports){
(function (global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('isarray')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50
Buffer.poolSize = 8192 // not used by this implementation

var rootParent = {}

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Safari 5-7 lacks support for changing the `Object.prototype.constructor` property
 *     on objects.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

function typedArraySupport () {
  function Bar () {}
  try {
    var arr = new Uint8Array(1)
    arr.foo = function () { return 42 }
    arr.constructor = Bar
    return arr.foo() === 42 && // typed array instances can be augmented
        arr.constructor === Bar && // constructor can be set
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

/**
 * Class: Buffer
 * =============
 *
 * The Buffer constructor returns instances of `Uint8Array` that are augmented
 * with function properties for all the node `Buffer` API functions. We use
 * `Uint8Array` so that square bracket notation works as expected -- it returns
 * a single octet.
 *
 * By augmenting the instances, we can avoid modifying the `Uint8Array`
 * prototype.
 */
function Buffer (arg) {
  if (!(this instanceof Buffer)) {
    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.
    if (arguments.length > 1) return new Buffer(arg, arguments[1])
    return new Buffer(arg)
  }

  this.length = 0
  this.parent = undefined

  // Common case.
  if (typeof arg === 'number') {
    return fromNumber(this, arg)
  }

  // Slightly less common case.
  if (typeof arg === 'string') {
    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')
  }

  // Unusual.
  return fromObject(this, arg)
}

function fromNumber (that, length) {
  that = allocate(that, length < 0 ? 0 : checked(length) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < length; i++) {
      that[i] = 0
    }
  }
  return that
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'

  // Assumption: byteLength() return value is always < kMaxLength.
  var length = byteLength(string, encoding) | 0
  that = allocate(that, length)

  that.write(string, encoding)
  return that
}

function fromObject (that, object) {
  if (Buffer.isBuffer(object)) return fromBuffer(that, object)

  if (isArray(object)) return fromArray(that, object)

  if (object == null) {
    throw new TypeError('must start with number, buffer, array or string')
  }

  if (typeof ArrayBuffer !== 'undefined') {
    if (object.buffer instanceof ArrayBuffer) {
      return fromTypedArray(that, object)
    }
    if (object instanceof ArrayBuffer) {
      return fromArrayBuffer(that, object)
    }
  }

  if (object.length) return fromArrayLike(that, object)

  return fromJsonObject(that, object)
}

function fromBuffer (that, buffer) {
  var length = checked(buffer.length) | 0
  that = allocate(that, length)
  buffer.copy(that, 0, 0, length)
  return that
}

function fromArray (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

// Duplicate of fromArray() to keep fromArray() monomorphic.
function fromTypedArray (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  // Truncating the elements is probably not what people expect from typed
  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior
  // of the old Buffer constructor.
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array) {
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    array.byteLength
    that = Buffer._augment(new Uint8Array(array))
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromTypedArray(that, new Uint8Array(array))
  }
  return that
}

function fromArrayLike (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.
// Returns a zero-length buffer for inputs that don't conform to the spec.
function fromJsonObject (that, object) {
  var array
  var length = 0

  if (object.type === 'Buffer' && isArray(object.data)) {
    array = object.data
    length = checked(array.length) | 0
  }
  that = allocate(that, length)

  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
}

function allocate (that, length) {
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = Buffer._augment(new Uint8Array(length))
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that.length = length
    that._isBuffer = true
  }

  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1
  if (fromPool) that.parent = rootParent

  return that
}

function checked (length) {
  // Note: cannot use `length < kMaxLength` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (subject, encoding) {
  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)

  var buf = new Buffer(subject, encoding)
  delete buf.parent
  return buf
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  var i = 0
  var len = Math.min(x, y)
  while (i < len) {
    if (a[i] !== b[i]) break

    ++i
  }

  if (i !== len) {
    x = a[i]
    y = b[i]
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'binary':
    case 'base64':
    case 'raw':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')

  if (list.length === 0) {
    return new Buffer(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; i++) {
      length += list[i].length
    }
  }

  var buf = new Buffer(length)
  var pos = 0
  for (i = 0; i < list.length; i++) {
    var item = list[i]
    item.copy(buf, pos)
    pos += item.length
  }
  return buf
}

function byteLength (string, encoding) {
  if (typeof string !== 'string') string = '' + string

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'binary':
      // Deprecated
      case 'raw':
      case 'raws':
        return len
      case 'utf8':
      case 'utf-8':
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

// pre-set for values that may exist in the future
Buffer.prototype.length = undefined
Buffer.prototype.parent = undefined

function slowToString (encoding, start, end) {
  var loweredCase = false

  start = start | 0
  end = end === undefined || end === Infinity ? this.length : end | 0

  if (!encoding) encoding = 'utf8'
  if (start < 0) start = 0
  if (end > this.length) end = this.length
  if (end <= start) return ''

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'binary':
        return binarySlice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return 0
  return Buffer.compare(this, b)
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset) {
  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff
  else if (byteOffset < -0x80000000) byteOffset = -0x80000000
  byteOffset >>= 0

  if (this.length === 0) return -1
  if (byteOffset >= this.length) return -1

  // Negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)

  if (typeof val === 'string') {
    if (val.length === 0) return -1 // special case: looking for empty string always fails
    return String.prototype.indexOf.call(this, val, byteOffset)
  }
  if (Buffer.isBuffer(val)) {
    return arrayIndexOf(this, val, byteOffset)
  }
  if (typeof val === 'number') {
    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {
      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)
    }
    return arrayIndexOf(this, [ val ], byteOffset)
  }

  function arrayIndexOf (arr, val, byteOffset) {
    var foundIndex = -1
    for (var i = 0; byteOffset + i < arr.length; i++) {
      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex
      } else {
        foundIndex = -1
      }
    }
    return -1
  }

  throw new TypeError('val must be string, number or Buffer')
}

// `get` is deprecated
Buffer.prototype.get = function get (offset) {
  console.log('.get() is deprecated. Access using array indexes instead.')
  return this.readUInt8(offset)
}

// `set` is deprecated
Buffer.prototype.set = function set (v, offset) {
  console.log('.set() is deprecated. Access using array indexes instead.')
  return this.writeUInt8(v, offset)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new Error('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; i++) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) throw new Error('Invalid hex string')
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function binaryWrite (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    var swap = encoding
    encoding = offset
    offset = length | 0
    length = swap
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'binary':
        return binaryWrite(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function binarySlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; i++) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = Buffer._augment(this.subarray(start, end))
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; i++) {
      newBuf[i] = this[i + start]
    }
  }

  if (newBuf.length) newBuf.parent = this.parent || this

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
  if (offset < 0) throw new RangeError('index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; i--) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; i++) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    target._set(this.subarray(start, start + len), targetStart)
  }

  return len
}

// fill(value, start=0, end=buffer.length)
Buffer.prototype.fill = function fill (value, start, end) {
  if (!value) value = 0
  if (!start) start = 0
  if (!end) end = this.length

  if (end < start) throw new RangeError('end < start')

  // Fill 0 bytes; we're done
  if (end === start) return
  if (this.length === 0) return

  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')
  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')

  var i
  if (typeof value === 'number') {
    for (i = start; i < end; i++) {
      this[i] = value
    }
  } else {
    var bytes = utf8ToBytes(value.toString())
    var len = bytes.length
    for (i = start; i < end; i++) {
      this[i] = bytes[i % len]
    }
  }

  return this
}

/**
 * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.
 * Added in Node 0.12. Only available in browsers that support ArrayBuffer.
 */
Buffer.prototype.toArrayBuffer = function toArrayBuffer () {
  if (typeof Uint8Array !== 'undefined') {
    if (Buffer.TYPED_ARRAY_SUPPORT) {
      return (new Buffer(this)).buffer
    } else {
      var buf = new Uint8Array(this.length)
      for (var i = 0, len = buf.length; i < len; i += 1) {
        buf[i] = this[i]
      }
      return buf.buffer
    }
  } else {
    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')
  }
}

// HELPER FUNCTIONS
// ================

var BP = Buffer.prototype

/**
 * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods
 */
Buffer._augment = function _augment (arr) {
  arr.constructor = Buffer
  arr._isBuffer = true

  // save reference to original Uint8Array set method before overwriting
  arr._set = arr.set

  // deprecated
  arr.get = BP.get
  arr.set = BP.set

  arr.write = BP.write
  arr.toString = BP.toString
  arr.toLocaleString = BP.toString
  arr.toJSON = BP.toJSON
  arr.equals = BP.equals
  arr.compare = BP.compare
  arr.indexOf = BP.indexOf
  arr.copy = BP.copy
  arr.slice = BP.slice
  arr.readUIntLE = BP.readUIntLE
  arr.readUIntBE = BP.readUIntBE
  arr.readUInt8 = BP.readUInt8
  arr.readUInt16LE = BP.readUInt16LE
  arr.readUInt16BE = BP.readUInt16BE
  arr.readUInt32LE = BP.readUInt32LE
  arr.readUInt32BE = BP.readUInt32BE
  arr.readIntLE = BP.readIntLE
  arr.readIntBE = BP.readIntBE
  arr.readInt8 = BP.readInt8
  arr.readInt16LE = BP.readInt16LE
  arr.readInt16BE = BP.readInt16BE
  arr.readInt32LE = BP.readInt32LE
  arr.readInt32BE = BP.readInt32BE
  arr.readFloatLE = BP.readFloatLE
  arr.readFloatBE = BP.readFloatBE
  arr.readDoubleLE = BP.readDoubleLE
  arr.readDoubleBE = BP.readDoubleBE
  arr.writeUInt8 = BP.writeUInt8
  arr.writeUIntLE = BP.writeUIntLE
  arr.writeUIntBE = BP.writeUIntBE
  arr.writeUInt16LE = BP.writeUInt16LE
  arr.writeUInt16BE = BP.writeUInt16BE
  arr.writeUInt32LE = BP.writeUInt32LE
  arr.writeUInt32BE = BP.writeUInt32BE
  arr.writeIntLE = BP.writeIntLE
  arr.writeIntBE = BP.writeIntBE
  arr.writeInt8 = BP.writeInt8
  arr.writeInt16LE = BP.writeInt16LE
  arr.writeInt16BE = BP.writeInt16BE
  arr.writeInt32LE = BP.writeInt32LE
  arr.writeInt32BE = BP.writeInt32BE
  arr.writeFloatLE = BP.writeFloatLE
  arr.writeFloatBE = BP.writeFloatBE
  arr.writeDoubleLE = BP.writeDoubleLE
  arr.writeDoubleBE = BP.writeDoubleBE
  arr.fill = BP.fill
  arr.inspect = BP.inspect
  arr.toArrayBuffer = BP.toArrayBuffer

  return arr
}

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; i++) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; i++) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":1,"ieee754":8,"isarray":11}],4:[function(require,module,exports){
module.exports = {
  "100": "Continue",
  "101": "Switching Protocols",
  "102": "Processing",
  "200": "OK",
  "201": "Created",
  "202": "Accepted",
  "203": "Non-Authoritative Information",
  "204": "No Content",
  "205": "Reset Content",
  "206": "Partial Content",
  "207": "Multi-Status",
  "300": "Multiple Choices",
  "301": "Moved Permanently",
  "302": "Moved Temporarily",
  "303": "See Other",
  "304": "Not Modified",
  "305": "Use Proxy",
  "307": "Temporary Redirect",
  "308": "Permanent Redirect",
  "400": "Bad Request",
  "401": "Unauthorized",
  "402": "Payment Required",
  "403": "Forbidden",
  "404": "Not Found",
  "405": "Method Not Allowed",
  "406": "Not Acceptable",
  "407": "Proxy Authentication Required",
  "408": "Request Time-out",
  "409": "Conflict",
  "410": "Gone",
  "411": "Length Required",
  "412": "Precondition Failed",
  "413": "Request Entity Too Large",
  "414": "Request-URI Too Large",
  "415": "Unsupported Media Type",
  "416": "Requested Range Not Satisfiable",
  "417": "Expectation Failed",
  "418": "I'm a teapot",
  "422": "Unprocessable Entity",
  "423": "Locked",
  "424": "Failed Dependency",
  "425": "Unordered Collection",
  "426": "Upgrade Required",
  "428": "Precondition Required",
  "429": "Too Many Requests",
  "431": "Request Header Fields Too Large",
  "500": "Internal Server Error",
  "501": "Not Implemented",
  "502": "Bad Gateway",
  "503": "Service Unavailable",
  "504": "Gateway Time-out",
  "505": "HTTP Version Not Supported",
  "506": "Variant Also Negotiates",
  "507": "Insufficient Storage",
  "509": "Bandwidth Limit Exceeded",
  "510": "Not Extended",
  "511": "Network Authentication Required"
}

},{}],5:[function(require,module,exports){
(function (Buffer){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.

function isArray(arg) {
  if (Array.isArray) {
    return Array.isArray(arg);
  }
  return objectToString(arg) === '[object Array]';
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = Buffer.isBuffer;

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

}).call(this,{"isBuffer":require("../../is-buffer/index.js")})

},{"../../is-buffer/index.js":10}],6:[function(require,module,exports){

/**
 * Expose `parse`.
 */

module.exports = parse;

/**
 * Tests for browser support.
 */

var innerHTMLBug = false;
var bugTestDiv;
if (typeof document !== 'undefined') {
  bugTestDiv = document.createElement('div');
  // Setup
  bugTestDiv.innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';
  // Make sure that link elements get serialized correctly by innerHTML
  // This requires a wrapper element in IE
  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;
  bugTestDiv = undefined;
}

/**
 * Wrap map from jquery.
 */

var map = {
  legend: [1, '<fieldset>', '</fieldset>'],
  tr: [2, '<table><tbody>', '</tbody></table>'],
  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],
  // for script/link/style tags to work in IE6-8, you have to wrap
  // in a div with a non-whitespace character in front, ha!
  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']
};

map.td =
map.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];

map.option =
map.optgroup = [1, '<select multiple="multiple">', '</select>'];

map.thead =
map.tbody =
map.colgroup =
map.caption =
map.tfoot = [1, '<table>', '</table>'];

map.polyline =
map.ellipse =
map.polygon =
map.circle =
map.text =
map.line =
map.path =
map.rect =
map.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">','</svg>'];

/**
 * Parse `html` and return a DOM Node instance, which could be a TextNode,
 * HTML DOM Node of some kind (<div> for example), or a DocumentFragment
 * instance, depending on the contents of the `html` string.
 *
 * @param {String} html - HTML string to "domify"
 * @param {Document} doc - The `document` instance to create the Node for
 * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance
 * @api private
 */

function parse(html, doc) {
  if ('string' != typeof html) throw new TypeError('String expected');

  // default to the global `document` object
  if (!doc) doc = document;

  // tag name
  var m = /<([\w:]+)/.exec(html);
  if (!m) return doc.createTextNode(html);

  html = html.replace(/^\s+|\s+$/g, ''); // Remove leading/trailing whitespace

  var tag = m[1];

  // body support
  if (tag == 'body') {
    var el = doc.createElement('html');
    el.innerHTML = html;
    return el.removeChild(el.lastChild);
  }

  // wrap map
  var wrap = map[tag] || map._default;
  var depth = wrap[0];
  var prefix = wrap[1];
  var suffix = wrap[2];
  var el = doc.createElement('div');
  el.innerHTML = prefix + html + suffix;
  while (depth--) el = el.lastChild;

  // one element
  if (el.firstChild == el.lastChild) {
    return el.removeChild(el.firstChild);
  }

  // several elements
  var fragment = doc.createDocumentFragment();
  while (el.firstChild) {
    fragment.appendChild(el.removeChild(el.firstChild));
  }

  return fragment;
}

},{}],7:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      }
      throw TypeError('Uncaught, unspecified "error" event.');
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}

},{}],8:[function(require,module,exports){
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}

},{}],9:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],10:[function(require,module,exports){
/**
 * Determine if an object is Buffer
 *
 * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * License:  MIT
 *
 * `npm install is-buffer`
 */

module.exports = function (obj) {
  return !!(obj != null &&
    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)
      (obj.constructor &&
      typeof obj.constructor.isBuffer === 'function' &&
      obj.constructor.isBuffer(obj))
    ))
}

},{}],11:[function(require,module,exports){
module.exports = Array.isArray || function (arr) {
  return Object.prototype.toString.call(arr) == '[object Array]';
};

},{}],12:[function(require,module,exports){
var arrayEach = require('../internal/arrayEach'),
    baseEach = require('../internal/baseEach'),
    createForEach = require('../internal/createForEach');

/**
 * Iterates over elements of `collection` invoking `iteratee` for each element.
 * The `iteratee` is bound to `thisArg` and invoked with three arguments:
 * (value, index|key, collection). Iteratee functions may exit iteration early
 * by explicitly returning `false`.
 *
 * **Note:** As with other "Collections" methods, objects with a "length" property
 * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
 * may be used for object iteration.
 *
 * @static
 * @memberOf _
 * @alias each
 * @category Collection
 * @param {Array|Object|string} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @param {*} [thisArg] The `this` binding of `iteratee`.
 * @returns {Array|Object|string} Returns `collection`.
 * @example
 *
 * _([1, 2]).forEach(function(n) {
 *   console.log(n);
 * }).value();
 * // => logs each value from left to right and returns the array
 *
 * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {
 *   console.log(n, key);
 * });
 * // => logs each value-key pair and returns the object (iteration order is not guaranteed)
 */
var forEach = createForEach(arrayEach, baseEach);

module.exports = forEach;

},{"../internal/arrayEach":18,"../internal/baseEach":24,"../internal/createForEach":41}],13:[function(require,module,exports){
var getNative = require('../internal/getNative');

/* Native method references for those with the same name as other `lodash` methods. */
var nativeNow = getNative(Date, 'now');

/**
 * Gets the number of milliseconds that have elapsed since the Unix epoch
 * (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @category Date
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => logs the number of milliseconds it took for the deferred function to be invoked
 */
var now = nativeNow || function() {
  return new Date().getTime();
};

module.exports = now;

},{"../internal/getNative":48}],14:[function(require,module,exports){
var isObject = require('../lang/isObject'),
    now = require('../date/now');

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Native method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed invocations. Provide an options object to indicate that `func`
 * should be invoked on the leading and/or trailing edge of the `wait` timeout.
 * Subsequent calls to the debounced function return the result of the last
 * `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
 * on the trailing edge of the timeout only if the the debounced function is
 * invoked more than once during the `wait` timeout.
 *
 * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options] The options object.
 * @param {boolean} [options.leading=false] Specify invoking on the leading
 *  edge of the timeout.
 * @param {number} [options.maxWait] The maximum time `func` is allowed to be
 *  delayed before it's invoked.
 * @param {boolean} [options.trailing=true] Specify invoking on the trailing
 *  edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // avoid costly calculations while the window size is in flux
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // invoke `sendMail` when the click event is fired, debouncing subsequent calls
 * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // ensure `batchLog` is invoked once after 1 second of debounced calls
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', _.debounce(batchLog, 250, {
 *   'maxWait': 1000
 * }));
 *
 * // cancel a debounced call
 * var todoChanges = _.debounce(batchLog, 1000);
 * Object.observe(models.todo, todoChanges);
 *
 * Object.observe(models, function(changes) {
 *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {
 *     todoChanges.cancel();
 *   }
 * }, ['delete']);
 *
 * // ...at some point `models.todo` is changed
 * models.todo.completed = true;
 *
 * // ...before 1 second has passed `models.todo` is deleted
 * // which cancels the debounced `todoChanges` call
 * delete models.todo;
 */
function debounce(func, wait, options) {
  var args,
      maxTimeoutId,
      result,
      stamp,
      thisArg,
      timeoutId,
      trailingCall,
      lastCalled = 0,
      maxWait = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = wait < 0 ? 0 : (+wait || 0);
  if (options === true) {
    var leading = true;
    trailing = false;
  } else if (isObject(options)) {
    leading = !!options.leading;
    maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function cancel() {
    if (timeoutId) {
      clearTimeout(timeoutId);
    }
    if (maxTimeoutId) {
      clearTimeout(maxTimeoutId);
    }
    lastCalled = 0;
    maxTimeoutId = timeoutId = trailingCall = undefined;
  }

  function complete(isCalled, id) {
    if (id) {
      clearTimeout(id);
    }
    maxTimeoutId = timeoutId = trailingCall = undefined;
    if (isCalled) {
      lastCalled = now();
      result = func.apply(thisArg, args);
      if (!timeoutId && !maxTimeoutId) {
        args = thisArg = undefined;
      }
    }
  }

  function delayed() {
    var remaining = wait - (now() - stamp);
    if (remaining <= 0 || remaining > wait) {
      complete(trailingCall, maxTimeoutId);
    } else {
      timeoutId = setTimeout(delayed, remaining);
    }
  }

  function maxDelayed() {
    complete(trailing, timeoutId);
  }

  function debounced() {
    args = arguments;
    stamp = now();
    thisArg = this;
    trailingCall = trailing && (timeoutId || !leading);

    if (maxWait === false) {
      var leadingCall = leading && !timeoutId;
    } else {
      if (!maxTimeoutId && !leading) {
        lastCalled = stamp;
      }
      var remaining = maxWait - (stamp - lastCalled),
          isCalled = remaining <= 0 || remaining > maxWait;

      if (isCalled) {
        if (maxTimeoutId) {
          maxTimeoutId = clearTimeout(maxTimeoutId);
        }
        lastCalled = stamp;
        result = func.apply(thisArg, args);
      }
      else if (!maxTimeoutId) {
        maxTimeoutId = setTimeout(maxDelayed, remaining);
      }
    }
    if (isCalled && timeoutId) {
      timeoutId = clearTimeout(timeoutId);
    }
    else if (!timeoutId && wait !== maxWait) {
      timeoutId = setTimeout(delayed, wait);
    }
    if (leadingCall) {
      isCalled = true;
      result = func.apply(thisArg, args);
    }
    if (isCalled && !timeoutId && !maxTimeoutId) {
      args = thisArg = undefined;
    }
    return result;
  }
  debounced.cancel = cancel;
  return debounced;
}

module.exports = debounce;

},{"../date/now":13,"../lang/isObject":68}],15:[function(require,module,exports){
/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Native method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Creates a function that invokes `func` with the `this` binding of the
 * created function and arguments from `start` and beyond provided as an array.
 *
 * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/Web/JavaScript/Reference/Functions/rest_parameters).
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @returns {Function} Returns the new function.
 * @example
 *
 * var say = _.restParam(function(what, names) {
 *   return what + ' ' + _.initial(names).join(', ') +
 *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);
 * });
 *
 * say('hello', 'fred', 'barney', 'pebbles');
 * // => 'hello fred, barney, & pebbles'
 */
function restParam(func, start) {
  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);
  return function() {
    var args = arguments,
        index = -1,
        length = nativeMax(args.length - start, 0),
        rest = Array(length);

    while (++index < length) {
      rest[index] = args[start + index];
    }
    switch (start) {
      case 0: return func.call(this, rest);
      case 1: return func.call(this, args[0], rest);
      case 2: return func.call(this, args[0], args[1], rest);
    }
    var otherArgs = Array(start + 1);
    index = -1;
    while (++index < start) {
      otherArgs[index] = args[index];
    }
    otherArgs[start] = rest;
    return func.apply(this, otherArgs);
  };
}

module.exports = restParam;

},{}],16:[function(require,module,exports){
var debounce = require('./debounce'),
    isObject = require('../lang/isObject');

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a throttled function that only invokes `func` at most once per
 * every `wait` milliseconds. The throttled function comes with a `cancel`
 * method to cancel delayed invocations. Provide an options object to indicate
 * that `func` should be invoked on the leading and/or trailing edge of the
 * `wait` timeout. Subsequent calls to the throttled function return the
 * result of the last `func` call.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
 * on the trailing edge of the timeout only if the the throttled function is
 * invoked more than once during the `wait` timeout.
 *
 * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
 * for details over the differences between `_.throttle` and `_.debounce`.
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to throttle.
 * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
 * @param {Object} [options] The options object.
 * @param {boolean} [options.leading=true] Specify invoking on the leading
 *  edge of the timeout.
 * @param {boolean} [options.trailing=true] Specify invoking on the trailing
 *  edge of the timeout.
 * @returns {Function} Returns the new throttled function.
 * @example
 *
 * // avoid excessively updating the position while scrolling
 * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
 *
 * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes
 * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
 *   'trailing': false
 * }));
 *
 * // cancel a trailing throttled call
 * jQuery(window).on('popstate', throttled.cancel);
 */
function throttle(func, wait, options) {
  var leading = true,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  if (options === false) {
    leading = false;
  } else if (isObject(options)) {
    leading = 'leading' in options ? !!options.leading : leading;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }
  return debounce(func, wait, { 'leading': leading, 'maxWait': +wait, 'trailing': trailing });
}

module.exports = throttle;

},{"../lang/isObject":68,"./debounce":14}],17:[function(require,module,exports){
/**
 * Copies the values of `source` to `array`.
 *
 * @private
 * @param {Array} source The array to copy values from.
 * @param {Array} [array=[]] The array to copy values to.
 * @returns {Array} Returns `array`.
 */
function arrayCopy(source, array) {
  var index = -1,
      length = source.length;

  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}

module.exports = arrayCopy;

},{}],18:[function(require,module,exports){
/**
 * A specialized version of `_.forEach` for arrays without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns `array`.
 */
function arrayEach(array, iteratee) {
  var index = -1,
      length = array.length;

  while (++index < length) {
    if (iteratee(array[index], index, array) === false) {
      break;
    }
  }
  return array;
}

module.exports = arrayEach;

},{}],19:[function(require,module,exports){
/**
 * A specialized version of `_.some` for arrays without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {boolean} Returns `true` if any element passes the predicate check,
 *  else `false`.
 */
function arraySome(array, predicate) {
  var index = -1,
      length = array.length;

  while (++index < length) {
    if (predicate(array[index], index, array)) {
      return true;
    }
  }
  return false;
}

module.exports = arraySome;

},{}],20:[function(require,module,exports){
/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used by `_.template` to customize its `_.assign` use.
 *
 * **Note:** This function is like `assignDefaults` except that it ignores
 * inherited property values when checking if a property is `undefined`.
 *
 * @private
 * @param {*} objectValue The destination object property value.
 * @param {*} sourceValue The source object property value.
 * @param {string} key The key associated with the object and source values.
 * @param {Object} object The destination object.
 * @returns {*} Returns the value to assign to the destination object.
 */
function assignOwnDefaults(objectValue, sourceValue, key, object) {
  return (objectValue === undefined || !hasOwnProperty.call(object, key))
    ? sourceValue
    : objectValue;
}

module.exports = assignOwnDefaults;

},{}],21:[function(require,module,exports){
var keys = require('../object/keys');

/**
 * A specialized version of `_.assign` for customizing assigned values without
 * support for argument juggling, multiple sources, and `this` binding `customizer`
 * functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {Function} customizer The function to customize assigned values.
 * @returns {Object} Returns `object`.
 */
function assignWith(object, source, customizer) {
  var index = -1,
      props = keys(source),
      length = props.length;

  while (++index < length) {
    var key = props[index],
        value = object[key],
        result = customizer(value, source[key], key, object, source);

    if ((result === result ? (result !== value) : (value === value)) ||
        (value === undefined && !(key in object))) {
      object[key] = result;
    }
  }
  return object;
}

module.exports = assignWith;

},{"../object/keys":73}],22:[function(require,module,exports){
var baseCopy = require('./baseCopy'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.assign` without support for argument juggling,
 * multiple sources, and `customizer` functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @returns {Object} Returns `object`.
 */
function baseAssign(object, source) {
  return source == null
    ? object
    : baseCopy(source, keys(source), object);
}

module.exports = baseAssign;

},{"../object/keys":73,"./baseCopy":23}],23:[function(require,module,exports){
/**
 * Copies properties of `source` to `object`.
 *
 * @private
 * @param {Object} source The object to copy properties from.
 * @param {Array} props The property names to copy.
 * @param {Object} [object={}] The object to copy properties to.
 * @returns {Object} Returns `object`.
 */
function baseCopy(source, props, object) {
  object || (object = {});

  var index = -1,
      length = props.length;

  while (++index < length) {
    var key = props[index];
    object[key] = source[key];
  }
  return object;
}

module.exports = baseCopy;

},{}],24:[function(require,module,exports){
var baseForOwn = require('./baseForOwn'),
    createBaseEach = require('./createBaseEach');

/**
 * The base implementation of `_.forEach` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array|Object|string} collection The collection to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array|Object|string} Returns `collection`.
 */
var baseEach = createBaseEach(baseForOwn);

module.exports = baseEach;

},{"./baseForOwn":27,"./createBaseEach":39}],25:[function(require,module,exports){
var createBaseFor = require('./createBaseFor');

/**
 * The base implementation of `baseForIn` and `baseForOwn` which iterates
 * over `object` properties returned by `keysFunc` invoking `iteratee` for
 * each property. Iteratee functions may exit iteration early by explicitly
 * returning `false`.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @returns {Object} Returns `object`.
 */
var baseFor = createBaseFor();

module.exports = baseFor;

},{"./createBaseFor":40}],26:[function(require,module,exports){
var baseFor = require('./baseFor'),
    keysIn = require('../object/keysIn');

/**
 * The base implementation of `_.forIn` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns `object`.
 */
function baseForIn(object, iteratee) {
  return baseFor(object, iteratee, keysIn);
}

module.exports = baseForIn;

},{"../object/keysIn":74,"./baseFor":25}],27:[function(require,module,exports){
var baseFor = require('./baseFor'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.forOwn` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns `object`.
 */
function baseForOwn(object, iteratee) {
  return baseFor(object, iteratee, keys);
}

module.exports = baseForOwn;

},{"../object/keys":73,"./baseFor":25}],28:[function(require,module,exports){
var baseIsEqualDeep = require('./baseIsEqualDeep'),
    isObject = require('../lang/isObject'),
    isObjectLike = require('./isObjectLike');

/**
 * The base implementation of `_.isEqual` without support for `this` binding
 * `customizer` functions.
 *
 * @private
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {Function} [customizer] The function to customize comparing values.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 */
function baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {
  if (value === other) {
    return true;
  }
  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {
    return value !== value && other !== other;
  }
  return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);
}

module.exports = baseIsEqual;

},{"../lang/isObject":68,"./baseIsEqualDeep":29,"./isObjectLike":53}],29:[function(require,module,exports){
var equalArrays = require('./equalArrays'),
    equalByTag = require('./equalByTag'),
    equalObjects = require('./equalObjects'),
    isArray = require('../lang/isArray'),
    isTypedArray = require('../lang/isTypedArray');

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    objectTag = '[object Object]';

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * A specialized version of `baseIsEqual` for arrays and objects which performs
 * deep comparisons and tracks traversed objects enabling objects with circular
 * references to be compared.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing objects.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA=[]] Tracks traversed `value` objects.
 * @param {Array} [stackB=[]] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var objIsArr = isArray(object),
      othIsArr = isArray(other),
      objTag = arrayTag,
      othTag = arrayTag;

  if (!objIsArr) {
    objTag = objToString.call(object);
    if (objTag == argsTag) {
      objTag = objectTag;
    } else if (objTag != objectTag) {
      objIsArr = isTypedArray(object);
    }
  }
  if (!othIsArr) {
    othTag = objToString.call(other);
    if (othTag == argsTag) {
      othTag = objectTag;
    } else if (othTag != objectTag) {
      othIsArr = isTypedArray(other);
    }
  }
  var objIsObj = objTag == objectTag,
      othIsObj = othTag == objectTag,
      isSameTag = objTag == othTag;

  if (isSameTag && !(objIsArr || objIsObj)) {
    return equalByTag(object, other, objTag);
  }
  if (!isLoose) {
    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

    if (objIsWrapped || othIsWrapped) {
      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);
    }
  }
  if (!isSameTag) {
    return false;
  }
  // Assume cyclic values are equal.
  // For more information on detecting circular references see https://es5.github.io/#JO.
  stackA || (stackA = []);
  stackB || (stackB = []);

  var length = stackA.length;
  while (length--) {
    if (stackA[length] == object) {
      return stackB[length] == other;
    }
  }
  // Add `object` and `other` to the stack of traversed objects.
  stackA.push(object);
  stackB.push(other);

  var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);

  stackA.pop();
  stackB.pop();

  return result;
}

module.exports = baseIsEqualDeep;

},{"../lang/isArray":63,"../lang/isTypedArray":70,"./equalArrays":42,"./equalByTag":43,"./equalObjects":44}],30:[function(require,module,exports){
var arrayEach = require('./arrayEach'),
    baseMergeDeep = require('./baseMergeDeep'),
    isArray = require('../lang/isArray'),
    isArrayLike = require('./isArrayLike'),
    isObject = require('../lang/isObject'),
    isObjectLike = require('./isObjectLike'),
    isTypedArray = require('../lang/isTypedArray'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.merge` without support for argument juggling,
 * multiple sources, and `this` binding `customizer` functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {Function} [customizer] The function to customize merged values.
 * @param {Array} [stackA=[]] Tracks traversed source objects.
 * @param {Array} [stackB=[]] Associates values with source counterparts.
 * @returns {Object} Returns `object`.
 */
function baseMerge(object, source, customizer, stackA, stackB) {
  if (!isObject(object)) {
    return object;
  }
  var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),
      props = isSrcArr ? undefined : keys(source);

  arrayEach(props || source, function(srcValue, key) {
    if (props) {
      key = srcValue;
      srcValue = source[key];
    }
    if (isObjectLike(srcValue)) {
      stackA || (stackA = []);
      stackB || (stackB = []);
      baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);
    }
    else {
      var value = object[key],
          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
          isCommon = result === undefined;

      if (isCommon) {
        result = srcValue;
      }
      if ((result !== undefined || (isSrcArr && !(key in object))) &&
          (isCommon || (result === result ? (result !== value) : (value === value)))) {
        object[key] = result;
      }
    }
  });
  return object;
}

module.exports = baseMerge;

},{"../lang/isArray":63,"../lang/isObject":68,"../lang/isTypedArray":70,"../object/keys":73,"./arrayEach":18,"./baseMergeDeep":31,"./isArrayLike":49,"./isObjectLike":53}],31:[function(require,module,exports){
var arrayCopy = require('./arrayCopy'),
    isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isArrayLike = require('./isArrayLike'),
    isPlainObject = require('../lang/isPlainObject'),
    isTypedArray = require('../lang/isTypedArray'),
    toPlainObject = require('../lang/toPlainObject');

/**
 * A specialized version of `baseMerge` for arrays and objects which performs
 * deep merges and tracks traversed objects enabling objects with circular
 * references to be merged.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {string} key The key of the value to merge.
 * @param {Function} mergeFunc The function to merge values.
 * @param {Function} [customizer] The function to customize merged values.
 * @param {Array} [stackA=[]] Tracks traversed source objects.
 * @param {Array} [stackB=[]] Associates values with source counterparts.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {
  var length = stackA.length,
      srcValue = source[key];

  while (length--) {
    if (stackA[length] == srcValue) {
      object[key] = stackB[length];
      return;
    }
  }
  var value = object[key],
      result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
      isCommon = result === undefined;

  if (isCommon) {
    result = srcValue;
    if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {
      result = isArray(value)
        ? value
        : (isArrayLike(value) ? arrayCopy(value) : []);
    }
    else if (isPlainObject(srcValue) || isArguments(srcValue)) {
      result = isArguments(value)
        ? toPlainObject(value)
        : (isPlainObject(value) ? value : {});
    }
    else {
      isCommon = false;
    }
  }
  // Add the source value to the stack of traversed objects and associate
  // it with its merged value.
  stackA.push(srcValue);
  stackB.push(result);

  if (isCommon) {
    // Recursively merge objects and arrays (susceptible to call stack limits).
    object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);
  } else if (result === result ? (result !== value) : (value === value)) {
    object[key] = result;
  }
}

module.exports = baseMergeDeep;

},{"../lang/isArguments":62,"../lang/isArray":63,"../lang/isPlainObject":69,"../lang/isTypedArray":70,"../lang/toPlainObject":71,"./arrayCopy":17,"./isArrayLike":49}],32:[function(require,module,exports){
/**
 * The base implementation of `_.property` without support for deep paths.
 *
 * @private
 * @param {string} key The key of the property to get.
 * @returns {Function} Returns the new function.
 */
function baseProperty(key) {
  return function(object) {
    return object == null ? undefined : object[key];
  };
}

module.exports = baseProperty;

},{}],33:[function(require,module,exports){
/**
 * Converts `value` to a string if it's not one. An empty string is returned
 * for `null` or `undefined` values.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {string} Returns the string.
 */
function baseToString(value) {
  return value == null ? '' : (value + '');
}

module.exports = baseToString;

},{}],34:[function(require,module,exports){
/**
 * The base implementation of `_.values` and `_.valuesIn` which creates an
 * array of `object` property values corresponding to the property names
 * of `props`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array} props The property names to get values for.
 * @returns {Object} Returns the array of property values.
 */
function baseValues(object, props) {
  var index = -1,
      length = props.length,
      result = Array(length);

  while (++index < length) {
    result[index] = object[props[index]];
  }
  return result;
}

module.exports = baseValues;

},{}],35:[function(require,module,exports){
var identity = require('../utility/identity');

/**
 * A specialized version of `baseCallback` which only supports `this` binding
 * and specifying the number of arguments to provide to `func`.
 *
 * @private
 * @param {Function} func The function to bind.
 * @param {*} thisArg The `this` binding of `func`.
 * @param {number} [argCount] The number of arguments to provide to `func`.
 * @returns {Function} Returns the callback.
 */
function bindCallback(func, thisArg, argCount) {
  if (typeof func != 'function') {
    return identity;
  }
  if (thisArg === undefined) {
    return func;
  }
  switch (argCount) {
    case 1: return function(value) {
      return func.call(thisArg, value);
    };
    case 3: return function(value, index, collection) {
      return func.call(thisArg, value, index, collection);
    };
    case 4: return function(accumulator, value, index, collection) {
      return func.call(thisArg, accumulator, value, index, collection);
    };
    case 5: return function(value, other, key, object, source) {
      return func.call(thisArg, value, other, key, object, source);
    };
  }
  return function() {
    return func.apply(thisArg, arguments);
  };
}

module.exports = bindCallback;

},{"../utility/identity":81}],36:[function(require,module,exports){
/**
 * Used by `_.trim` and `_.trimLeft` to get the index of the first character
 * of `string` that is not found in `chars`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @param {string} chars The characters to find.
 * @returns {number} Returns the index of the first character not found in `chars`.
 */
function charsLeftIndex(string, chars) {
  var index = -1,
      length = string.length;

  while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}
  return index;
}

module.exports = charsLeftIndex;

},{}],37:[function(require,module,exports){
/**
 * Used by `_.trim` and `_.trimRight` to get the index of the last character
 * of `string` that is not found in `chars`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @param {string} chars The characters to find.
 * @returns {number} Returns the index of the last character not found in `chars`.
 */
function charsRightIndex(string, chars) {
  var index = string.length;

  while (index-- && chars.indexOf(string.charAt(index)) > -1) {}
  return index;
}

module.exports = charsRightIndex;

},{}],38:[function(require,module,exports){
var bindCallback = require('./bindCallback'),
    isIterateeCall = require('./isIterateeCall'),
    restParam = require('../function/restParam');

/**
 * Creates a `_.assign`, `_.defaults`, or `_.merge` function.
 *
 * @private
 * @param {Function} assigner The function to assign values.
 * @returns {Function} Returns the new assigner function.
 */
function createAssigner(assigner) {
  return restParam(function(object, sources) {
    var index = -1,
        length = object == null ? 0 : sources.length,
        customizer = length > 2 ? sources[length - 2] : undefined,
        guard = length > 2 ? sources[2] : undefined,
        thisArg = length > 1 ? sources[length - 1] : undefined;

    if (typeof customizer == 'function') {
      customizer = bindCallback(customizer, thisArg, 5);
      length -= 2;
    } else {
      customizer = typeof thisArg == 'function' ? thisArg : undefined;
      length -= (customizer ? 1 : 0);
    }
    if (guard && isIterateeCall(sources[0], sources[1], guard)) {
      customizer = length < 3 ? undefined : customizer;
      length = 1;
    }
    while (++index < length) {
      var source = sources[index];
      if (source) {
        assigner(object, source, customizer);
      }
    }
    return object;
  });
}

module.exports = createAssigner;

},{"../function/restParam":15,"./bindCallback":35,"./isIterateeCall":51}],39:[function(require,module,exports){
var getLength = require('./getLength'),
    isLength = require('./isLength'),
    toObject = require('./toObject');

/**
 * Creates a `baseEach` or `baseEachRight` function.
 *
 * @private
 * @param {Function} eachFunc The function to iterate over a collection.
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseEach(eachFunc, fromRight) {
  return function(collection, iteratee) {
    var length = collection ? getLength(collection) : 0;
    if (!isLength(length)) {
      return eachFunc(collection, iteratee);
    }
    var index = fromRight ? length : -1,
        iterable = toObject(collection);

    while ((fromRight ? index-- : ++index < length)) {
      if (iteratee(iterable[index], index, iterable) === false) {
        break;
      }
    }
    return collection;
  };
}

module.exports = createBaseEach;

},{"./getLength":47,"./isLength":52,"./toObject":59}],40:[function(require,module,exports){
var toObject = require('./toObject');

/**
 * Creates a base function for `_.forIn` or `_.forInRight`.
 *
 * @private
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseFor(fromRight) {
  return function(object, iteratee, keysFunc) {
    var iterable = toObject(object),
        props = keysFunc(object),
        length = props.length,
        index = fromRight ? length : -1;

    while ((fromRight ? index-- : ++index < length)) {
      var key = props[index];
      if (iteratee(iterable[key], key, iterable) === false) {
        break;
      }
    }
    return object;
  };
}

module.exports = createBaseFor;

},{"./toObject":59}],41:[function(require,module,exports){
var bindCallback = require('./bindCallback'),
    isArray = require('../lang/isArray');

/**
 * Creates a function for `_.forEach` or `_.forEachRight`.
 *
 * @private
 * @param {Function} arrayFunc The function to iterate over an array.
 * @param {Function} eachFunc The function to iterate over a collection.
 * @returns {Function} Returns the new each function.
 */
function createForEach(arrayFunc, eachFunc) {
  return function(collection, iteratee, thisArg) {
    return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
      ? arrayFunc(collection, iteratee)
      : eachFunc(collection, bindCallback(iteratee, thisArg, 3));
  };
}

module.exports = createForEach;

},{"../lang/isArray":63,"./bindCallback":35}],42:[function(require,module,exports){
var arraySome = require('./arraySome');

/**
 * A specialized version of `baseIsEqualDeep` for arrays with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Array} array The array to compare.
 * @param {Array} other The other array to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing arrays.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
 */
function equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var index = -1,
      arrLength = array.length,
      othLength = other.length;

  if (arrLength != othLength && !(isLoose && othLength > arrLength)) {
    return false;
  }
  // Ignore non-index properties.
  while (++index < arrLength) {
    var arrValue = array[index],
        othValue = other[index],
        result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;

    if (result !== undefined) {
      if (result) {
        continue;
      }
      return false;
    }
    // Recursively compare arrays (susceptible to call stack limits).
    if (isLoose) {
      if (!arraySome(other, function(othValue) {
            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);
          })) {
        return false;
      }
    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {
      return false;
    }
  }
  return true;
}

module.exports = equalArrays;

},{"./arraySome":19}],43:[function(require,module,exports){
/** `Object#toString` result references. */
var boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    numberTag = '[object Number]',
    regexpTag = '[object RegExp]',
    stringTag = '[object String]';

/**
 * A specialized version of `baseIsEqualDeep` for comparing objects of
 * the same `toStringTag`.
 *
 * **Note:** This function only supports comparing values with tags of
 * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {string} tag The `toStringTag` of the objects to compare.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalByTag(object, other, tag) {
  switch (tag) {
    case boolTag:
    case dateTag:
      // Coerce dates and booleans to numbers, dates to milliseconds and booleans
      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.
      return +object == +other;

    case errorTag:
      return object.name == other.name && object.message == other.message;

    case numberTag:
      // Treat `NaN` vs. `NaN` as equal.
      return (object != +object)
        ? other != +other
        : object == +other;

    case regexpTag:
    case stringTag:
      // Coerce regexes to strings and treat strings primitives and string
      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.
      return object == (other + '');
  }
  return false;
}

module.exports = equalByTag;

},{}],44:[function(require,module,exports){
var keys = require('../object/keys');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A specialized version of `baseIsEqualDeep` for objects with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing values.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var objProps = keys(object),
      objLength = objProps.length,
      othProps = keys(other),
      othLength = othProps.length;

  if (objLength != othLength && !isLoose) {
    return false;
  }
  var index = objLength;
  while (index--) {
    var key = objProps[index];
    if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {
      return false;
    }
  }
  var skipCtor = isLoose;
  while (++index < objLength) {
    key = objProps[index];
    var objValue = object[key],
        othValue = other[key],
        result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;

    // Recursively compare objects (susceptible to call stack limits).
    if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {
      return false;
    }
    skipCtor || (skipCtor = key == 'constructor');
  }
  if (!skipCtor) {
    var objCtor = object.constructor,
        othCtor = other.constructor;

    // Non `Object` object instances with different constructors are not equal.
    if (objCtor != othCtor &&
        ('constructor' in object && 'constructor' in other) &&
        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
          typeof othCtor == 'function' && othCtor instanceof othCtor)) {
      return false;
    }
  }
  return true;
}

module.exports = equalObjects;

},{"../object/keys":73}],45:[function(require,module,exports){
/** Used to map characters to HTML entities. */
var htmlEscapes = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;',
  '`': '&#96;'
};

/**
 * Used by `_.escape` to convert characters to HTML entities.
 *
 * @private
 * @param {string} chr The matched character to escape.
 * @returns {string} Returns the escaped character.
 */
function escapeHtmlChar(chr) {
  return htmlEscapes[chr];
}

module.exports = escapeHtmlChar;

},{}],46:[function(require,module,exports){
/** Used to escape characters for inclusion in compiled string literals. */
var stringEscapes = {
  '\\': '\\',
  "'": "'",
  '\n': 'n',
  '\r': 'r',
  '\u2028': 'u2028',
  '\u2029': 'u2029'
};

/**
 * Used by `_.template` to escape characters for inclusion in compiled string literals.
 *
 * @private
 * @param {string} chr The matched character to escape.
 * @returns {string} Returns the escaped character.
 */
function escapeStringChar(chr) {
  return '\\' + stringEscapes[chr];
}

module.exports = escapeStringChar;

},{}],47:[function(require,module,exports){
var baseProperty = require('./baseProperty');

/**
 * Gets the "length" property value of `object`.
 *
 * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)
 * that affects Safari on at least iOS 8.1-8.3 ARM64.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {*} Returns the "length" value.
 */
var getLength = baseProperty('length');

module.exports = getLength;

},{"./baseProperty":32}],48:[function(require,module,exports){
var isNative = require('../lang/isNative');

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = object == null ? undefined : object[key];
  return isNative(value) ? value : undefined;
}

module.exports = getNative;

},{"../lang/isNative":67}],49:[function(require,module,exports){
var getLength = require('./getLength'),
    isLength = require('./isLength');

/**
 * Checks if `value` is array-like.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 */
function isArrayLike(value) {
  return value != null && isLength(getLength(value));
}

module.exports = isArrayLike;

},{"./getLength":47,"./isLength":52}],50:[function(require,module,exports){
/** Used to detect unsigned integer values. */
var reIsUint = /^\d+$/;

/**
 * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
 * of an array-like value.
 */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */
function isIndex(value, length) {
  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;
  length = length == null ? MAX_SAFE_INTEGER : length;
  return value > -1 && value % 1 == 0 && value < length;
}

module.exports = isIndex;

},{}],51:[function(require,module,exports){
var isArrayLike = require('./isArrayLike'),
    isIndex = require('./isIndex'),
    isObject = require('../lang/isObject');

/**
 * Checks if the provided arguments are from an iteratee call.
 *
 * @private
 * @param {*} value The potential iteratee value argument.
 * @param {*} index The potential iteratee index or key argument.
 * @param {*} object The potential iteratee object argument.
 * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.
 */
function isIterateeCall(value, index, object) {
  if (!isObject(object)) {
    return false;
  }
  var type = typeof index;
  if (type == 'number'
      ? (isArrayLike(object) && isIndex(index, object.length))
      : (type == 'string' && index in object)) {
    var other = object[index];
    return value === value ? (value === other) : (other !== other);
  }
  return false;
}

module.exports = isIterateeCall;

},{"../lang/isObject":68,"./isArrayLike":49,"./isIndex":50}],52:[function(require,module,exports){
/**
 * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
 * of an array-like value.
 */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 */
function isLength(value) {
  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}

module.exports = isLength;

},{}],53:[function(require,module,exports){
/**
 * Checks if `value` is object-like.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

module.exports = isObjectLike;

},{}],54:[function(require,module,exports){
/**
 * Used by `trimmedLeftIndex` and `trimmedRightIndex` to determine if a
 * character code is whitespace.
 *
 * @private
 * @param {number} charCode The character code to inspect.
 * @returns {boolean} Returns `true` if `charCode` is whitespace, else `false`.
 */
function isSpace(charCode) {
  return ((charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160) || charCode == 5760 || charCode == 6158 ||
    (charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279)));
}

module.exports = isSpace;

},{}],55:[function(require,module,exports){
/** Used to match template delimiters. */
var reEscape = /<%-([\s\S]+?)%>/g;

module.exports = reEscape;

},{}],56:[function(require,module,exports){
/** Used to match template delimiters. */
var reEvaluate = /<%([\s\S]+?)%>/g;

module.exports = reEvaluate;

},{}],57:[function(require,module,exports){
/** Used to match template delimiters. */
var reInterpolate = /<%=([\s\S]+?)%>/g;

module.exports = reInterpolate;

},{}],58:[function(require,module,exports){
var isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isIndex = require('./isIndex'),
    isLength = require('./isLength'),
    keysIn = require('../object/keysIn');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A fallback implementation of `Object.keys` which creates an array of the
 * own enumerable property names of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function shimKeys(object) {
  var props = keysIn(object),
      propsLength = props.length,
      length = propsLength && object.length;

  var allowIndexes = !!length && isLength(length) &&
    (isArray(object) || isArguments(object));

  var index = -1,
      result = [];

  while (++index < propsLength) {
    var key = props[index];
    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {
      result.push(key);
    }
  }
  return result;
}

module.exports = shimKeys;

},{"../lang/isArguments":62,"../lang/isArray":63,"../object/keysIn":74,"./isIndex":50,"./isLength":52}],59:[function(require,module,exports){
var isObject = require('../lang/isObject');

/**
 * Converts `value` to an object if it's not one.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {Object} Returns the object.
 */
function toObject(value) {
  return isObject(value) ? value : Object(value);
}

module.exports = toObject;

},{"../lang/isObject":68}],60:[function(require,module,exports){
var isSpace = require('./isSpace');

/**
 * Used by `_.trim` and `_.trimLeft` to get the index of the first non-whitespace
 * character of `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the first non-whitespace character.
 */
function trimmedLeftIndex(string) {
  var index = -1,
      length = string.length;

  while (++index < length && isSpace(string.charCodeAt(index))) {}
  return index;
}

module.exports = trimmedLeftIndex;

},{"./isSpace":54}],61:[function(require,module,exports){
var isSpace = require('./isSpace');

/**
 * Used by `_.trim` and `_.trimRight` to get the index of the last non-whitespace
 * character of `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the last non-whitespace character.
 */
function trimmedRightIndex(string) {
  var index = string.length;

  while (index-- && isSpace(string.charCodeAt(index))) {}
  return index;
}

module.exports = trimmedRightIndex;

},{"./isSpace":54}],62:[function(require,module,exports){
var isArrayLike = require('../internal/isArrayLike'),
    isObjectLike = require('../internal/isObjectLike');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Native method references. */
var propertyIsEnumerable = objectProto.propertyIsEnumerable;

/**
 * Checks if `value` is classified as an `arguments` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
function isArguments(value) {
  return isObjectLike(value) && isArrayLike(value) &&
    hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
}

module.exports = isArguments;

},{"../internal/isArrayLike":49,"../internal/isObjectLike":53}],63:[function(require,module,exports){
var getNative = require('../internal/getNative'),
    isLength = require('../internal/isLength'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var arrayTag = '[object Array]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/* Native method references for those with the same name as other `lodash` methods. */
var nativeIsArray = getNative(Array, 'isArray');

/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(function() { return arguments; }());
 * // => false
 */
var isArray = nativeIsArray || function(value) {
  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;
};

module.exports = isArray;

},{"../internal/getNative":48,"../internal/isLength":52,"../internal/isObjectLike":53}],64:[function(require,module,exports){
var baseIsEqual = require('../internal/baseIsEqual'),
    bindCallback = require('../internal/bindCallback');

/**
 * Performs a deep comparison between two values to determine if they are
 * equivalent. If `customizer` is provided it's invoked to compare values.
 * If `customizer` returns `undefined` comparisons are handled by the method
 * instead. The `customizer` is bound to `thisArg` and invoked with up to
 * three arguments: (value, other [, index|key]).
 *
 * **Note:** This method supports comparing arrays, booleans, `Date` objects,
 * numbers, `Object` objects, regexes, and strings. Objects are compared by
 * their own, not inherited, enumerable properties. Functions and DOM nodes
 * are **not** supported. Provide a customizer function to extend support
 * for comparing other values.
 *
 * @static
 * @memberOf _
 * @alias eq
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {Function} [customizer] The function to customize value comparisons.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'user': 'fred' };
 * var other = { 'user': 'fred' };
 *
 * object == other;
 * // => false
 *
 * _.isEqual(object, other);
 * // => true
 *
 * // using a customizer callback
 * var array = ['hello', 'goodbye'];
 * var other = ['hi', 'goodbye'];
 *
 * _.isEqual(array, other, function(value, other) {
 *   if (_.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/)) {
 *     return true;
 *   }
 * });
 * // => true
 */
function isEqual(value, other, customizer, thisArg) {
  customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
  var result = customizer ? customizer(value, other) : undefined;
  return  result === undefined ? baseIsEqual(value, other, customizer) : !!result;
}

module.exports = isEqual;

},{"../internal/baseIsEqual":28,"../internal/bindCallback":35}],65:[function(require,module,exports){
var isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var errorTag = '[object Error]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,
 * `SyntaxError`, `TypeError`, or `URIError` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an error object, else `false`.
 * @example
 *
 * _.isError(new Error);
 * // => true
 *
 * _.isError(Error);
 * // => false
 */
function isError(value) {
  return isObjectLike(value) && typeof value.message == 'string' && objToString.call(value) == errorTag;
}

module.exports = isError;

},{"../internal/isObjectLike":53}],66:[function(require,module,exports){
var isObject = require('./isObject');

/** `Object#toString` result references. */
var funcTag = '[object Function]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in older versions of Chrome and Safari which return 'function' for regexes
  // and Safari 8 which returns 'object' for typed array constructors.
  return isObject(value) && objToString.call(value) == funcTag;
}

module.exports = isFunction;

},{"./isObject":68}],67:[function(require,module,exports){
var isFunction = require('./isFunction'),
    isObjectLike = require('../internal/isObjectLike');

/** Used to detect host constructors (Safari > 5). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var fnToString = Function.prototype.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/**
 * Checks if `value` is a native function.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function, else `false`.
 * @example
 *
 * _.isNative(Array.prototype.push);
 * // => true
 *
 * _.isNative(_);
 * // => false
 */
function isNative(value) {
  if (value == null) {
    return false;
  }
  if (isFunction(value)) {
    return reIsNative.test(fnToString.call(value));
  }
  return isObjectLike(value) && reIsHostCtor.test(value);
}

module.exports = isNative;

},{"../internal/isObjectLike":53,"./isFunction":66}],68:[function(require,module,exports){
/**
 * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
 * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(1);
 * // => false
 */
function isObject(value) {
  // Avoid a V8 JIT bug in Chrome 19-20.
  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

module.exports = isObject;

},{}],69:[function(require,module,exports){
var baseForIn = require('../internal/baseForIn'),
    isArguments = require('./isArguments'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var objectTag = '[object Object]';

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * **Note:** This method assumes objects created by the `Object` constructor
 * have no inherited enumerable properties.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  var Ctor;

  // Exit early for non `Object` objects.
  if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||
      (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {
    return false;
  }
  // IE < 9 iterates inherited properties before own properties. If the first
  // iterated property is an object's own property then there are no inherited
  // enumerable properties.
  var result;
  // In most environments an object's own properties are iterated before
  // its inherited properties. If the last iterated property is an object's
  // own property then there are no inherited enumerable properties.
  baseForIn(value, function(subValue, key) {
    result = key;
  });
  return result === undefined || hasOwnProperty.call(value, result);
}

module.exports = isPlainObject;

},{"../internal/baseForIn":26,"../internal/isObjectLike":53,"./isArguments":62}],70:[function(require,module,exports){
var isLength = require('../internal/isLength'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    funcTag = '[object Function]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    objectTag = '[object Object]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    weakMapTag = '[object WeakMap]';

var arrayBufferTag = '[object ArrayBuffer]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';

/** Used to identify `toStringTag` values of typed arrays. */
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
typedArrayTags[dateTag] = typedArrayTags[errorTag] =
typedArrayTags[funcTag] = typedArrayTags[mapTag] =
typedArrayTags[numberTag] = typedArrayTags[objectTag] =
typedArrayTags[regexpTag] = typedArrayTags[setTag] =
typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is classified as a typed array.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isTypedArray(new Uint8Array);
 * // => true
 *
 * _.isTypedArray([]);
 * // => false
 */
function isTypedArray(value) {
  return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];
}

module.exports = isTypedArray;

},{"../internal/isLength":52,"../internal/isObjectLike":53}],71:[function(require,module,exports){
var baseCopy = require('../internal/baseCopy'),
    keysIn = require('../object/keysIn');

/**
 * Converts `value` to a plain object flattening inherited enumerable
 * properties of `value` to own properties of the plain object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {Object} Returns the converted plain object.
 * @example
 *
 * function Foo() {
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.assign({ 'a': 1 }, new Foo);
 * // => { 'a': 1, 'b': 2 }
 *
 * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
 * // => { 'a': 1, 'b': 2, 'c': 3 }
 */
function toPlainObject(value) {
  return baseCopy(value, keysIn(value));
}

module.exports = toPlainObject;

},{"../internal/baseCopy":23,"../object/keysIn":74}],72:[function(require,module,exports){
var assignWith = require('../internal/assignWith'),
    baseAssign = require('../internal/baseAssign'),
    createAssigner = require('../internal/createAssigner');

/**
 * Assigns own enumerable properties of source object(s) to the destination
 * object. Subsequent sources overwrite property assignments of previous sources.
 * If `customizer` is provided it's invoked to produce the assigned values.
 * The `customizer` is bound to `thisArg` and invoked with five arguments:
 * (objectValue, sourceValue, key, object, source).
 *
 * **Note:** This method mutates `object` and is based on
 * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).
 *
 * @static
 * @memberOf _
 * @alias extend
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @param {Function} [customizer] The function to customize assigned values.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {Object} Returns `object`.
 * @example
 *
 * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });
 * // => { 'user': 'fred', 'age': 40 }
 *
 * // using a customizer callback
 * var defaults = _.partialRight(_.assign, function(value, other) {
 *   return _.isUndefined(value) ? other : value;
 * });
 *
 * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
 * // => { 'user': 'barney', 'age': 36 }
 */
var assign = createAssigner(function(object, source, customizer) {
  return customizer
    ? assignWith(object, source, customizer)
    : baseAssign(object, source);
});

module.exports = assign;

},{"../internal/assignWith":21,"../internal/baseAssign":22,"../internal/createAssigner":38}],73:[function(require,module,exports){
var getNative = require('../internal/getNative'),
    isArrayLike = require('../internal/isArrayLike'),
    isObject = require('../lang/isObject'),
    shimKeys = require('../internal/shimKeys');

/* Native method references for those with the same name as other `lodash` methods. */
var nativeKeys = getNative(Object, 'keys');

/**
 * Creates an array of the own enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects. See the
 * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)
 * for more details.
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keys(new Foo);
 * // => ['a', 'b'] (iteration order is not guaranteed)
 *
 * _.keys('hi');
 * // => ['0', '1']
 */
var keys = !nativeKeys ? shimKeys : function(object) {
  var Ctor = object == null ? undefined : object.constructor;
  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||
      (typeof object != 'function' && isArrayLike(object))) {
    return shimKeys(object);
  }
  return isObject(object) ? nativeKeys(object) : [];
};

module.exports = keys;

},{"../internal/getNative":48,"../internal/isArrayLike":49,"../internal/shimKeys":58,"../lang/isObject":68}],74:[function(require,module,exports){
var isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isIndex = require('../internal/isIndex'),
    isLength = require('../internal/isLength'),
    isObject = require('../lang/isObject');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Creates an array of the own and inherited enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects.
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keysIn(new Foo);
 * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
 */
function keysIn(object) {
  if (object == null) {
    return [];
  }
  if (!isObject(object)) {
    object = Object(object);
  }
  var length = object.length;
  length = (length && isLength(length) &&
    (isArray(object) || isArguments(object)) && length) || 0;

  var Ctor = object.constructor,
      index = -1,
      isProto = typeof Ctor == 'function' && Ctor.prototype === object,
      result = Array(length),
      skipIndexes = length > 0;

  while (++index < length) {
    result[index] = (index + '');
  }
  for (var key in object) {
    if (!(skipIndexes && isIndex(key, length)) &&
        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
      result.push(key);
    }
  }
  return result;
}

module.exports = keysIn;

},{"../internal/isIndex":50,"../internal/isLength":52,"../lang/isArguments":62,"../lang/isArray":63,"../lang/isObject":68}],75:[function(require,module,exports){
var baseMerge = require('../internal/baseMerge'),
    createAssigner = require('../internal/createAssigner');

/**
 * Recursively merges own enumerable properties of the source object(s), that
 * don't resolve to `undefined` into the destination object. Subsequent sources
 * overwrite property assignments of previous sources. If `customizer` is
 * provided it's invoked to produce the merged values of the destination and
 * source properties. If `customizer` returns `undefined` merging is handled
 * by the method instead. The `customizer` is bound to `thisArg` and invoked
 * with five arguments: (objectValue, sourceValue, key, object, source).
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @param {Function} [customizer] The function to customize assigned values.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {Object} Returns `object`.
 * @example
 *
 * var users = {
 *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]
 * };
 *
 * var ages = {
 *   'data': [{ 'age': 36 }, { 'age': 40 }]
 * };
 *
 * _.merge(users, ages);
 * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }
 *
 * // using a customizer callback
 * var object = {
 *   'fruits': ['apple'],
 *   'vegetables': ['beet']
 * };
 *
 * var other = {
 *   'fruits': ['banana'],
 *   'vegetables': ['carrot']
 * };
 *
 * _.merge(object, other, function(a, b) {
 *   if (_.isArray(a)) {
 *     return a.concat(b);
 *   }
 * });
 * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }
 */
var merge = createAssigner(baseMerge);

module.exports = merge;

},{"../internal/baseMerge":30,"../internal/createAssigner":38}],76:[function(require,module,exports){
var baseToString = require('../internal/baseToString'),
    escapeHtmlChar = require('../internal/escapeHtmlChar');

/** Used to match HTML entities and HTML characters. */
var reUnescapedHtml = /[&<>"'`]/g,
    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

/**
 * Converts the characters "&", "<", ">", '"', "'", and "\`", in `string` to
 * their corresponding HTML entities.
 *
 * **Note:** No other characters are escaped. To escape additional characters
 * use a third-party library like [_he_](https://mths.be/he).
 *
 * Though the ">" character is escaped for symmetry, characters like
 * ">" and "/" don't need escaping in HTML and have no special meaning
 * unless they're part of a tag or unquoted attribute value.
 * See [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
 * (under "semi-related fun fact") for more details.
 *
 * Backticks are escaped because in Internet Explorer < 9, they can break out
 * of attribute values or HTML comments. See [#59](https://html5sec.org/#59),
 * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
 * [#133](https://html5sec.org/#133) of the [HTML5 Security Cheatsheet](https://html5sec.org/)
 * for more details.
 *
 * When working with HTML you should always [quote attribute values](http://wonko.com/post/html-escaping)
 * to reduce XSS vectors.
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The string to escape.
 * @returns {string} Returns the escaped string.
 * @example
 *
 * _.escape('fred, barney, & pebbles');
 * // => 'fred, barney, &amp; pebbles'
 */
function escape(string) {
  // Reset `lastIndex` because in IE < 9 `String#replace` does not.
  string = baseToString(string);
  return (string && reHasUnescapedHtml.test(string))
    ? string.replace(reUnescapedHtml, escapeHtmlChar)
    : string;
}

module.exports = escape;

},{"../internal/baseToString":33,"../internal/escapeHtmlChar":45}],77:[function(require,module,exports){
var assignOwnDefaults = require('../internal/assignOwnDefaults'),
    assignWith = require('../internal/assignWith'),
    attempt = require('../utility/attempt'),
    baseAssign = require('../internal/baseAssign'),
    baseToString = require('../internal/baseToString'),
    baseValues = require('../internal/baseValues'),
    escapeStringChar = require('../internal/escapeStringChar'),
    isError = require('../lang/isError'),
    isIterateeCall = require('../internal/isIterateeCall'),
    keys = require('../object/keys'),
    reInterpolate = require('../internal/reInterpolate'),
    templateSettings = require('./templateSettings');

/** Used to match empty string literals in compiled template source. */
var reEmptyStringLeading = /\b__p \+= '';/g,
    reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

/** Used to match [ES template delimiters](http://ecma-international.org/ecma-262/6.0/#sec-template-literal-lexical-components). */
var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

/** Used to ensure capturing order of template delimiters. */
var reNoMatch = /($^)/;

/** Used to match unescaped characters in compiled string literals. */
var reUnescapedString = /['\n\r\u2028\u2029\\]/g;

/**
 * Creates a compiled template function that can interpolate data properties
 * in "interpolate" delimiters, HTML-escape interpolated data properties in
 * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
 * properties may be accessed as free variables in the template. If a setting
 * object is provided it takes precedence over `_.templateSettings` values.
 *
 * **Note:** In the development build `_.template` utilizes
 * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)
 * for easier debugging.
 *
 * For more information on precompiling templates see
 * [lodash's custom builds documentation](https://lodash.com/custom-builds).
 *
 * For more information on Chrome extension sandboxes see
 * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The template string.
 * @param {Object} [options] The options object.
 * @param {RegExp} [options.escape] The HTML "escape" delimiter.
 * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
 * @param {Object} [options.imports] An object to import into the template as free variables.
 * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
 * @param {string} [options.sourceURL] The sourceURL of the template's compiled source.
 * @param {string} [options.variable] The data object variable name.
 * @param- {Object} [otherOptions] Enables the legacy `options` param signature.
 * @returns {Function} Returns the compiled template function.
 * @example
 *
 * // using the "interpolate" delimiter to create a compiled template
 * var compiled = _.template('hello <%= user %>!');
 * compiled({ 'user': 'fred' });
 * // => 'hello fred!'
 *
 * // using the HTML "escape" delimiter to escape data property values
 * var compiled = _.template('<b><%- value %></b>');
 * compiled({ 'value': '<script>' });
 * // => '<b>&lt;script&gt;</b>'
 *
 * // using the "evaluate" delimiter to execute JavaScript and generate HTML
 * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
 * compiled({ 'users': ['fred', 'barney'] });
 * // => '<li>fred</li><li>barney</li>'
 *
 * // using the internal `print` function in "evaluate" delimiters
 * var compiled = _.template('<% print("hello " + user); %>!');
 * compiled({ 'user': 'barney' });
 * // => 'hello barney!'
 *
 * // using the ES delimiter as an alternative to the default "interpolate" delimiter
 * var compiled = _.template('hello ${ user }!');
 * compiled({ 'user': 'pebbles' });
 * // => 'hello pebbles!'
 *
 * // using custom template delimiters
 * _.templateSettings.interpolate = /{{([\s\S]+?)}}/g;
 * var compiled = _.template('hello {{ user }}!');
 * compiled({ 'user': 'mustache' });
 * // => 'hello mustache!'
 *
 * // using backslashes to treat delimiters as plain text
 * var compiled = _.template('<%= "\\<%- value %\\>" %>');
 * compiled({ 'value': 'ignored' });
 * // => '<%- value %>'
 *
 * // using the `imports` option to import `jQuery` as `jq`
 * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';
 * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });
 * compiled({ 'users': ['fred', 'barney'] });
 * // => '<li>fred</li><li>barney</li>'
 *
 * // using the `sourceURL` option to specify a custom sourceURL for the template
 * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });
 * compiled(data);
 * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
 *
 * // using the `variable` option to ensure a with-statement isn't used in the compiled template
 * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });
 * compiled.source;
 * // => function(data) {
 * //   var __t, __p = '';
 * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';
 * //   return __p;
 * // }
 *
 * // using the `source` property to inline compiled templates for meaningful
 * // line numbers in error messages and a stack trace
 * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
 *   var JST = {\
 *     "main": ' + _.template(mainText).source + '\
 *   };\
 * ');
 */
function template(string, options, otherOptions) {
  // Based on John Resig's `tmpl` implementation (http://ejohn.org/blog/javascript-micro-templating/)
  // and Laura Doktorova's doT.js (https://github.com/olado/doT).
  var settings = templateSettings.imports._.templateSettings || templateSettings;

  if (otherOptions && isIterateeCall(string, options, otherOptions)) {
    options = otherOptions = undefined;
  }
  string = baseToString(string);
  options = assignWith(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);

  var imports = assignWith(baseAssign({}, options.imports), settings.imports, assignOwnDefaults),
      importsKeys = keys(imports),
      importsValues = baseValues(imports, importsKeys);

  var isEscaping,
      isEvaluating,
      index = 0,
      interpolate = options.interpolate || reNoMatch,
      source = "__p += '";

  // Compile the regexp to match each delimiter.
  var reDelimiters = RegExp(
    (options.escape || reNoMatch).source + '|' +
    interpolate.source + '|' +
    (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
    (options.evaluate || reNoMatch).source + '|$'
  , 'g');

  // Use a sourceURL for easier debugging.
  var sourceURL = 'sourceURL' in options ? '//# sourceURL=' + options.sourceURL + '\n' : '';

  string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
    interpolateValue || (interpolateValue = esTemplateValue);

    // Escape characters that can't be included in string literals.
    source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);

    // Replace delimiters with snippets.
    if (escapeValue) {
      isEscaping = true;
      source += "' +\n__e(" + escapeValue + ") +\n'";
    }
    if (evaluateValue) {
      isEvaluating = true;
      source += "';\n" + evaluateValue + ";\n__p += '";
    }
    if (interpolateValue) {
      source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
    }
    index = offset + match.length;

    // The JS engine embedded in Adobe products requires returning the `match`
    // string in order to produce the correct `offset` value.
    return match;
  });

  source += "';\n";

  // If `variable` is not specified wrap a with-statement around the generated
  // code to add the data object to the top of the scope chain.
  var variable = options.variable;
  if (!variable) {
    source = 'with (obj) {\n' + source + '\n}\n';
  }
  // Cleanup code by stripping empty strings.
  source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
    .replace(reEmptyStringMiddle, '$1')
    .replace(reEmptyStringTrailing, '$1;');

  // Frame code as the function body.
  source = 'function(' + (variable || 'obj') + ') {\n' +
    (variable
      ? ''
      : 'obj || (obj = {});\n'
    ) +
    "var __t, __p = ''" +
    (isEscaping
       ? ', __e = _.escape'
       : ''
    ) +
    (isEvaluating
      ? ', __j = Array.prototype.join;\n' +
        "function print() { __p += __j.call(arguments, '') }\n"
      : ';\n'
    ) +
    source +
    'return __p\n}';

  var result = attempt(function() {
    return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined, importsValues);
  });

  // Provide the compiled function's source by its `toString` method or
  // the `source` property as a convenience for inlining compiled templates.
  result.source = source;
  if (isError(result)) {
    throw result;
  }
  return result;
}

module.exports = template;

},{"../internal/assignOwnDefaults":20,"../internal/assignWith":21,"../internal/baseAssign":22,"../internal/baseToString":33,"../internal/baseValues":34,"../internal/escapeStringChar":46,"../internal/isIterateeCall":51,"../internal/reInterpolate":57,"../lang/isError":65,"../object/keys":73,"../utility/attempt":80,"./templateSettings":78}],78:[function(require,module,exports){
var escape = require('./escape'),
    reEscape = require('../internal/reEscape'),
    reEvaluate = require('../internal/reEvaluate'),
    reInterpolate = require('../internal/reInterpolate');

/**
 * By default, the template delimiters used by lodash are like those in
 * embedded Ruby (ERB). Change the following template settings to use
 * alternative delimiters.
 *
 * @static
 * @memberOf _
 * @type Object
 */
var templateSettings = {

  /**
   * Used to detect `data` property values to be HTML-escaped.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'escape': reEscape,

  /**
   * Used to detect code to be evaluated.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'evaluate': reEvaluate,

  /**
   * Used to detect `data` property values to inject.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'interpolate': reInterpolate,

  /**
   * Used to reference the data object in the template text.
   *
   * @memberOf _.templateSettings
   * @type string
   */
  'variable': '',

  /**
   * Used to import variables into the compiled template.
   *
   * @memberOf _.templateSettings
   * @type Object
   */
  'imports': {

    /**
     * A reference to the `lodash` function.
     *
     * @memberOf _.templateSettings.imports
     * @type Function
     */
    '_': { 'escape': escape }
  }
};

module.exports = templateSettings;

},{"../internal/reEscape":55,"../internal/reEvaluate":56,"../internal/reInterpolate":57,"./escape":76}],79:[function(require,module,exports){
var baseToString = require('../internal/baseToString'),
    charsLeftIndex = require('../internal/charsLeftIndex'),
    charsRightIndex = require('../internal/charsRightIndex'),
    isIterateeCall = require('../internal/isIterateeCall'),
    trimmedLeftIndex = require('../internal/trimmedLeftIndex'),
    trimmedRightIndex = require('../internal/trimmedRightIndex');

/**
 * Removes leading and trailing whitespace or specified characters from `string`.
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The string to trim.
 * @param {string} [chars=whitespace] The characters to trim.
 * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
 * @returns {string} Returns the trimmed string.
 * @example
 *
 * _.trim('  abc  ');
 * // => 'abc'
 *
 * _.trim('-_-abc-_-', '_-');
 * // => 'abc'
 *
 * _.map(['  foo  ', '  bar  '], _.trim);
 * // => ['foo', 'bar']
 */
function trim(string, chars, guard) {
  var value = string;
  string = baseToString(string);
  if (!string) {
    return string;
  }
  if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
    return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);
  }
  chars = (chars + '');
  return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);
}

module.exports = trim;

},{"../internal/baseToString":33,"../internal/charsLeftIndex":36,"../internal/charsRightIndex":37,"../internal/isIterateeCall":51,"../internal/trimmedLeftIndex":60,"../internal/trimmedRightIndex":61}],80:[function(require,module,exports){
var isError = require('../lang/isError'),
    restParam = require('../function/restParam');

/**
 * Attempts to invoke `func`, returning either the result or the caught error
 * object. Any additional arguments are provided to `func` when it's invoked.
 *
 * @static
 * @memberOf _
 * @category Utility
 * @param {Function} func The function to attempt.
 * @returns {*} Returns the `func` result or error object.
 * @example
 *
 * // avoid throwing errors for invalid selectors
 * var elements = _.attempt(function(selector) {
 *   return document.querySelectorAll(selector);
 * }, '>_>');
 *
 * if (_.isError(elements)) {
 *   elements = [];
 * }
 */
var attempt = restParam(function(func, args) {
  try {
    return func.apply(undefined, args);
  } catch(e) {
    return isError(e) ? e : new Error(e);
  }
});

module.exports = attempt;

},{"../function/restParam":15,"../lang/isError":65}],81:[function(require,module,exports){
/**
 * This method returns the first argument provided to it.
 *
 * @static
 * @memberOf _
 * @category Utility
 * @param {*} value Any value.
 * @returns {*} Returns `value`.
 * @example
 *
 * var object = { 'user': 'fred' };
 *
 * _.identity(object) === object;
 * // => true
 */
function identity(value) {
  return value;
}

module.exports = identity;

},{}],82:[function(require,module,exports){
(function (process){
'use strict';

if (!process.version ||
    process.version.indexOf('v0.') === 0 ||
    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {
  module.exports = nextTick;
} else {
  module.exports = process.nextTick;
}

function nextTick(fn) {
  var args = new Array(arguments.length - 1);
  var i = 0;
  while (i < args.length) {
    args[i++] = arguments[i];
  }
  process.nextTick(function afterTick() {
    fn.apply(null, args);
  });
}

}).call(this,require('_process'))

},{"_process":83}],83:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],84:[function(require,module,exports){
(function (global){
/*! https://mths.be/punycode v1.3.2 by @mathias */
;(function(root) {

	/** Detect free variables */
	var freeExports = typeof exports == 'object' && exports &&
		!exports.nodeType && exports;
	var freeModule = typeof module == 'object' && module &&
		!module.nodeType && module;
	var freeGlobal = typeof global == 'object' && global;
	if (
		freeGlobal.global === freeGlobal ||
		freeGlobal.window === freeGlobal ||
		freeGlobal.self === freeGlobal
	) {
		root = freeGlobal;
	}

	/**
	 * The `punycode` object.
	 * @name punycode
	 * @type Object
	 */
	var punycode,

	/** Highest positive signed 32-bit float value */
	maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1

	/** Bootstring parameters */
	base = 36,
	tMin = 1,
	tMax = 26,
	skew = 38,
	damp = 700,
	initialBias = 72,
	initialN = 128, // 0x80
	delimiter = '-', // '\x2D'

	/** Regular expressions */
	regexPunycode = /^xn--/,
	regexNonASCII = /[^\x20-\x7E]/, // unprintable ASCII chars + non-ASCII chars
	regexSeparators = /[\x2E\u3002\uFF0E\uFF61]/g, // RFC 3490 separators

	/** Error messages */
	errors = {
		'overflow': 'Overflow: input needs wider integers to process',
		'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
		'invalid-input': 'Invalid input'
	},

	/** Convenience shortcuts */
	baseMinusTMin = base - tMin,
	floor = Math.floor,
	stringFromCharCode = String.fromCharCode,

	/** Temporary variable */
	key;

	/*--------------------------------------------------------------------------*/

	/**
	 * A generic error utility function.
	 * @private
	 * @param {String} type The error type.
	 * @returns {Error} Throws a `RangeError` with the applicable error message.
	 */
	function error(type) {
		throw RangeError(errors[type]);
	}

	/**
	 * A generic `Array#map` utility function.
	 * @private
	 * @param {Array} array The array to iterate over.
	 * @param {Function} callback The function that gets called for every array
	 * item.
	 * @returns {Array} A new array of values returned by the callback function.
	 */
	function map(array, fn) {
		var length = array.length;
		var result = [];
		while (length--) {
			result[length] = fn(array[length]);
		}
		return result;
	}

	/**
	 * A simple `Array#map`-like wrapper to work with domain name strings or email
	 * addresses.
	 * @private
	 * @param {String} domain The domain name or email address.
	 * @param {Function} callback The function that gets called for every
	 * character.
	 * @returns {Array} A new string of characters returned by the callback
	 * function.
	 */
	function mapDomain(string, fn) {
		var parts = string.split('@');
		var result = '';
		if (parts.length > 1) {
			// In email addresses, only the domain name should be punycoded. Leave
			// the local part (i.e. everything up to `@`) intact.
			result = parts[0] + '@';
			string = parts[1];
		}
		// Avoid `split(regex)` for IE8 compatibility. See #17.
		string = string.replace(regexSeparators, '\x2E');
		var labels = string.split('.');
		var encoded = map(labels, fn).join('.');
		return result + encoded;
	}

	/**
	 * Creates an array containing the numeric code points of each Unicode
	 * character in the string. While JavaScript uses UCS-2 internally,
	 * this function will convert a pair of surrogate halves (each of which
	 * UCS-2 exposes as separate characters) into a single code point,
	 * matching UTF-16.
	 * @see `punycode.ucs2.encode`
	 * @see <https://mathiasbynens.be/notes/javascript-encoding>
	 * @memberOf punycode.ucs2
	 * @name decode
	 * @param {String} string The Unicode input string (UCS-2).
	 * @returns {Array} The new array of code points.
	 */
	function ucs2decode(string) {
		var output = [],
		    counter = 0,
		    length = string.length,
		    value,
		    extra;
		while (counter < length) {
			value = string.charCodeAt(counter++);
			if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
				// high surrogate, and there is a next character
				extra = string.charCodeAt(counter++);
				if ((extra & 0xFC00) == 0xDC00) { // low surrogate
					output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
				} else {
					// unmatched surrogate; only append this code unit, in case the next
					// code unit is the high surrogate of a surrogate pair
					output.push(value);
					counter--;
				}
			} else {
				output.push(value);
			}
		}
		return output;
	}

	/**
	 * Creates a string based on an array of numeric code points.
	 * @see `punycode.ucs2.decode`
	 * @memberOf punycode.ucs2
	 * @name encode
	 * @param {Array} codePoints The array of numeric code points.
	 * @returns {String} The new Unicode string (UCS-2).
	 */
	function ucs2encode(array) {
		return map(array, function(value) {
			var output = '';
			if (value > 0xFFFF) {
				value -= 0x10000;
				output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);
				value = 0xDC00 | value & 0x3FF;
			}
			output += stringFromCharCode(value);
			return output;
		}).join('');
	}

	/**
	 * Converts a basic code point into a digit/integer.
	 * @see `digitToBasic()`
	 * @private
	 * @param {Number} codePoint The basic numeric code point value.
	 * @returns {Number} The numeric value of a basic code point (for use in
	 * representing integers) in the range `0` to `base - 1`, or `base` if
	 * the code point does not represent a value.
	 */
	function basicToDigit(codePoint) {
		if (codePoint - 48 < 10) {
			return codePoint - 22;
		}
		if (codePoint - 65 < 26) {
			return codePoint - 65;
		}
		if (codePoint - 97 < 26) {
			return codePoint - 97;
		}
		return base;
	}

	/**
	 * Converts a digit/integer into a basic code point.
	 * @see `basicToDigit()`
	 * @private
	 * @param {Number} digit The numeric value of a basic code point.
	 * @returns {Number} The basic code point whose value (when used for
	 * representing integers) is `digit`, which needs to be in the range
	 * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is
	 * used; else, the lowercase form is used. The behavior is undefined
	 * if `flag` is non-zero and `digit` has no uppercase form.
	 */
	function digitToBasic(digit, flag) {
		//  0..25 map to ASCII a..z or A..Z
		// 26..35 map to ASCII 0..9
		return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
	}

	/**
	 * Bias adaptation function as per section 3.4 of RFC 3492.
	 * http://tools.ietf.org/html/rfc3492#section-3.4
	 * @private
	 */
	function adapt(delta, numPoints, firstTime) {
		var k = 0;
		delta = firstTime ? floor(delta / damp) : delta >> 1;
		delta += floor(delta / numPoints);
		for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {
			delta = floor(delta / baseMinusTMin);
		}
		return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
	}

	/**
	 * Converts a Punycode string of ASCII-only symbols to a string of Unicode
	 * symbols.
	 * @memberOf punycode
	 * @param {String} input The Punycode string of ASCII-only symbols.
	 * @returns {String} The resulting string of Unicode symbols.
	 */
	function decode(input) {
		// Don't use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    /** Cached calculation results */
		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic < 0) {
			basic = 0;
		}

		for (j = 0; j < basic; ++j) {
			// if it's not a basic code point
			if (input.charCodeAt(j) >= 0x80) {
				error('not-basic');
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index >= inputLength) {
					error('invalid-input');
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit >= base || digit > floor((maxInt - i) / w)) {
					error('overflow');
				}

				i += digit * w;
				t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);

				if (digit < t) {
					break;
				}

				baseMinusT = base - t;
				if (w > floor(maxInt / baseMinusT)) {
					error('overflow');
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we'll fix that now:
			if (floor(i / out) > maxInt - n) {
				error('overflow');
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}

	/**
	 * Converts a string of Unicode symbols (e.g. a domain name label) to a
	 * Punycode string of ASCII-only symbols.
	 * @memberOf punycode
	 * @param {String} input The string of Unicode symbols.
	 * @returns {String} The resulting Punycode string of ASCII-only symbols.
	 */
	function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		    /** `inputLength` will hold the number of code points in `input`. */
		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j < inputLength; ++j) {
			currentValue = input[j];
			if (currentValue < 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount < inputLength) {

			// All non-basic code points < n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j < inputLength; ++j) {
				currentValue = input[j];
				if (currentValue >= n && currentValue < m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
				error('overflow');
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j < inputLength; ++j) {
				currentValue = input[j];

				if (currentValue < n && ++delta > maxInt) {
					error('overflow');
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);
						if (q < t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join('');
	}

	/**
	 * Converts a Punycode string representing a domain name or an email address
	 * to Unicode. Only the Punycoded parts of the input will be converted, i.e.
	 * it doesn't matter if you call it on a string that has already been
	 * converted to Unicode.
	 * @memberOf punycode
	 * @param {String} input The Punycoded domain name or email address to
	 * convert to Unicode.
	 * @returns {String} The Unicode representation of the given Punycode
	 * string.
	 */
	function toUnicode(input) {
		return mapDomain(input, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}

	/**
	 * Converts a Unicode string representing a domain name or an email address to
	 * Punycode. Only the non-ASCII parts of the domain name will be converted,
	 * i.e. it doesn't matter if you call it with a domain that's already in
	 * ASCII.
	 * @memberOf punycode
	 * @param {String} input The domain name or email address to convert, as a
	 * Unicode string.
	 * @returns {String} The Punycode representation of the given domain name or
	 * email address.
	 */
	function toASCII(input) {
		return mapDomain(input, function(string) {
			return regexNonASCII.test(string)
				? 'xn--' + encode(string)
				: string;
		});
	}

	/*--------------------------------------------------------------------------*/

	/** Define the public API */
	punycode = {
		/**
		 * A string representing the current Punycode.js version number.
		 * @memberOf punycode
		 * @type String
		 */
		'version': '1.3.2',
		/**
		 * An object of methods to convert from JavaScript's internal character
		 * representation (UCS-2) to Unicode code points, and back.
		 * @see <https://mathiasbynens.be/notes/javascript-encoding>
		 * @memberOf punycode
		 * @type Object
		 */
		'ucs2': {
			'decode': ucs2decode,
			'encode': ucs2encode
		},
		'decode': decode,
		'encode': encode,
		'toASCII': toASCII,
		'toUnicode': toUnicode
	};

	/** Expose `punycode` */
	// Some AMD build optimizers, like r.js, check for specific condition patterns
	// like the following:
	if (
		typeof define == 'function' &&
		typeof define.amd == 'object' &&
		define.amd
	) {
		define('punycode', function() {
			return punycode;
		});
	} else if (freeExports && freeModule) {
		if (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+
			freeModule.exports = punycode;
		} else { // in Narwhal or RingoJS v0.7.0-
			for (key in punycode) {
				punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);
			}
		}
	} else { // in Rhino or a web browser
		root.punycode = punycode;
	}

}(this));

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],85:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

'use strict';

// If obj.hasOwnProperty has been overridden, then calling
// obj.hasOwnProperty(prop) will break.
// See: https://github.com/joyent/node/issues/1707
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

module.exports = function(qs, sep, eq, options) {
  sep = sep || '&';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options && typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys <= 0 means that we should not limit keys count
  if (maxKeys > 0 && len > maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i < len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx >= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    k = decodeURIComponent(kstr);
    v = decodeURIComponent(vstr);

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

},{}],86:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

'use strict';

var stringifyPrimitive = function(v) {
  switch (typeof v) {
    case 'string':
      return v;

    case 'boolean':
      return v ? 'true' : 'false';

    case 'number':
      return isFinite(v) ? v : '';

    default:
      return '';
  }
};

module.exports = function(obj, sep, eq, name) {
  sep = sep || '&';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return map(objectKeys(obj), function(k) {
      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
      if (isArray(obj[k])) {
        return map(obj[k], function(v) {
          return ks + encodeURIComponent(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return encodeURIComponent(stringifyPrimitive(name)) + eq +
         encodeURIComponent(stringifyPrimitive(obj));
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

function map (xs, f) {
  if (xs.map) return xs.map(f);
  var res = [];
  for (var i = 0; i < xs.length; i++) {
    res.push(f(xs[i], i));
  }
  return res;
}

var objectKeys = Object.keys || function (obj) {
  var res = [];
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
  }
  return res;
};

},{}],87:[function(require,module,exports){
'use strict';

exports.decode = exports.parse = require('./decode');
exports.encode = exports.stringify = require('./encode');

},{"./decode":85,"./encode":86}],88:[function(require,module,exports){
module.exports = require("./lib/_stream_duplex.js")

},{"./lib/_stream_duplex.js":89}],89:[function(require,module,exports){
// a duplex stream is just a stream that is both readable and writable.
// Since JS doesn't have multiple prototypal inheritance, this class
// prototypally inherits from Readable, and then parasitically from
// Writable.

'use strict';

/*<replacement>*/
var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) keys.push(key);
  return keys;
}
/*</replacement>*/


module.exports = Duplex;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/



/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

var Readable = require('./_stream_readable');
var Writable = require('./_stream_writable');

util.inherits(Duplex, Readable);

var keys = objectKeys(Writable.prototype);
for (var v = 0; v < keys.length; v++) {
  var method = keys[v];
  if (!Duplex.prototype[method])
    Duplex.prototype[method] = Writable.prototype[method];
}

function Duplex(options) {
  if (!(this instanceof Duplex))
    return new Duplex(options);

  Readable.call(this, options);
  Writable.call(this, options);

  if (options && options.readable === false)
    this.readable = false;

  if (options && options.writable === false)
    this.writable = false;

  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false)
    this.allowHalfOpen = false;

  this.once('end', onend);
}

// the no-half-open enforcer
function onend() {
  // if we allow half-open state, or if the writable side ended,
  // then we're ok.
  if (this.allowHalfOpen || this._writableState.ended)
    return;

  // no more data can be written.
  // But allow more writes to happen in this tick.
  processNextTick(onEndNT, this);
}

function onEndNT(self) {
  self.end();
}

function forEach (xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

},{"./_stream_readable":91,"./_stream_writable":93,"core-util-is":5,"inherits":9,"process-nextick-args":82}],90:[function(require,module,exports){
// a passthrough stream.
// basically just the most minimal sort of Transform stream.
// Every written chunk gets output as-is.

'use strict';

module.exports = PassThrough;

var Transform = require('./_stream_transform');

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

util.inherits(PassThrough, Transform);

function PassThrough(options) {
  if (!(this instanceof PassThrough))
    return new PassThrough(options);

  Transform.call(this, options);
}

PassThrough.prototype._transform = function(chunk, encoding, cb) {
  cb(null, chunk);
};

},{"./_stream_transform":92,"core-util-is":5,"inherits":9}],91:[function(require,module,exports){
(function (process){
'use strict';

module.exports = Readable;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/


/*<replacement>*/
var isArray = require('isarray');
/*</replacement>*/


/*<replacement>*/
var Buffer = require('buffer').Buffer;
/*</replacement>*/

Readable.ReadableState = ReadableState;

var EE = require('events');

/*<replacement>*/
var EElistenerCount = function(emitter, type) {
  return emitter.listeners(type).length;
};
/*</replacement>*/



/*<replacement>*/
var Stream;
(function (){try{
  Stream = require('st' + 'ream');
}catch(_){}finally{
  if (!Stream)
    Stream = require('events').EventEmitter;
}}())
/*</replacement>*/

var Buffer = require('buffer').Buffer;

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/



/*<replacement>*/
var debugUtil = require('util');
var debug;
if (debugUtil && debugUtil.debuglog) {
  debug = debugUtil.debuglog('stream');
} else {
  debug = function () {};
}
/*</replacement>*/

var StringDecoder;

util.inherits(Readable, Stream);

function ReadableState(options, stream) {
  var Duplex = require('./_stream_duplex');

  options = options || {};

  // object stream flag. Used to make read(n) ignore n and to
  // make all the buffer merging and length checks go away
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex)
    this.objectMode = this.objectMode || !!options.readableObjectMode;

  // the point at which it stops calling _read() to fill the buffer
  // Note: 0 is a valid value, means "don't call _read preemptively ever"
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = ~~this.highWaterMark;

  this.buffer = [];
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // whenever we return null, then we set a flag to say
  // that we're awaiting a 'readable' event emission.
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // when piping, we only care about 'readable' events that happen
  // after read()ing all the bytes and not getting any pushback.
  this.ranOut = false;

  // the number of writers that are awaiting a drain event in .pipe()s
  this.awaitDrain = 0;

  // if true, a maybeReadMore has been scheduled
  this.readingMore = false;

  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    if (!StringDecoder)
      StringDecoder = require('string_decoder/').StringDecoder;
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}

function Readable(options) {
  var Duplex = require('./_stream_duplex');

  if (!(this instanceof Readable))
    return new Readable(options);

  this._readableState = new ReadableState(options, this);

  // legacy
  this.readable = true;

  if (options && typeof options.read === 'function')
    this._read = options.read;

  Stream.call(this);
}

// Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.
Readable.prototype.push = function(chunk, encoding) {
  var state = this._readableState;

  if (!state.objectMode && typeof chunk === 'string') {
    encoding = encoding || state.defaultEncoding;
    if (encoding !== state.encoding) {
      chunk = new Buffer(chunk, encoding);
      encoding = '';
    }
  }

  return readableAddChunk(this, state, chunk, encoding, false);
};

// Unshift should *always* be something directly out of read()
Readable.prototype.unshift = function(chunk) {
  var state = this._readableState;
  return readableAddChunk(this, state, chunk, '', true);
};

Readable.prototype.isPaused = function() {
  return this._readableState.flowing === false;
};

function readableAddChunk(stream, state, chunk, encoding, addToFront) {
  var er = chunkInvalid(state, chunk);
  if (er) {
    stream.emit('error', er);
  } else if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else if (state.objectMode || chunk && chunk.length > 0) {
    if (state.ended && !addToFront) {
      var e = new Error('stream.push() after EOF');
      stream.emit('error', e);
    } else if (state.endEmitted && addToFront) {
      var e = new Error('stream.unshift() after end event');
      stream.emit('error', e);
    } else {
      if (state.decoder && !addToFront && !encoding)
        chunk = state.decoder.write(chunk);

      if (!addToFront)
        state.reading = false;

      // if we want the data now, just emit it.
      if (state.flowing && state.length === 0 && !state.sync) {
        stream.emit('data', chunk);
        stream.read(0);
      } else {
        // update the buffer info.
        state.length += state.objectMode ? 1 : chunk.length;
        if (addToFront)
          state.buffer.unshift(chunk);
        else
          state.buffer.push(chunk);

        if (state.needReadable)
          emitReadable(stream);
      }

      maybeReadMore(stream, state);
    }
  } else if (!addToFront) {
    state.reading = false;
  }

  return needMoreData(state);
}


// if it's past the high water mark, we can push in some more.
// Also, if we have no data yet, we can stand some
// more bytes.  This is to work around cases where hwm=0,
// such as the repl.  Also, if the push() triggered a
// readable event, and the user called read(largeNumber) such that
// needReadable was set, then we ought to push more, so that another
// 'readable' event will be triggered.
function needMoreData(state) {
  return !state.ended &&
         (state.needReadable ||
          state.length < state.highWaterMark ||
          state.length === 0);
}

// backwards compatibility.
Readable.prototype.setEncoding = function(enc) {
  if (!StringDecoder)
    StringDecoder = require('string_decoder/').StringDecoder;
  this._readableState.decoder = new StringDecoder(enc);
  this._readableState.encoding = enc;
  return this;
};

// Don't raise the hwm > 8MB
var MAX_HWM = 0x800000;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    // Get the next highest power of 2
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}

function howMuchToRead(n, state) {
  if (state.length === 0 && state.ended)
    return 0;

  if (state.objectMode)
    return n === 0 ? 0 : 1;

  if (n === null || isNaN(n)) {
    // only flow one buffer at a time
    if (state.flowing && state.buffer.length)
      return state.buffer[0].length;
    else
      return state.length;
  }

  if (n <= 0)
    return 0;

  // If we're asking for more than the target buffer level,
  // then raise the water mark.  Bump up to the next highest
  // power of 2, to prevent increasing it excessively in tiny
  // amounts.
  if (n > state.highWaterMark)
    state.highWaterMark = computeNewHighWaterMark(n);

  // don't have that much.  return null, unless we've ended.
  if (n > state.length) {
    if (!state.ended) {
      state.needReadable = true;
      return 0;
    } else {
      return state.length;
    }
  }

  return n;
}

// you can override either this method, or the async _read(n) below.
Readable.prototype.read = function(n) {
  debug('read', n);
  var state = this._readableState;
  var nOrig = n;

  if (typeof n !== 'number' || n > 0)
    state.emittedReadable = false;

  // if we're doing read(0) to trigger a readable event, but we
  // already have a bunch of data in the buffer, then just trigger
  // the 'readable' event and move on.
  if (n === 0 &&
      state.needReadable &&
      (state.length >= state.highWaterMark || state.ended)) {
    debug('read: emitReadable', state.length, state.ended);
    if (state.length === 0 && state.ended)
      endReadable(this);
    else
      emitReadable(this);
    return null;
  }

  n = howMuchToRead(n, state);

  // if we've ended, and we're now clear, then finish it up.
  if (n === 0 && state.ended) {
    if (state.length === 0)
      endReadable(this);
    return null;
  }

  // All the actual chunk generation logic needs to be
  // *below* the call to _read.  The reason is that in certain
  // synthetic stream cases, such as passthrough streams, _read
  // may be a completely synchronous operation which may change
  // the state of the read buffer, providing enough data when
  // before there was *not* enough.
  //
  // So, the steps are:
  // 1. Figure out what the state of things will be after we do
  // a read from the buffer.
  //
  // 2. If that resulting state will trigger a _read, then call _read.
  // Note that this may be asynchronous, or synchronous.  Yes, it is
  // deeply ugly to write APIs this way, but that still doesn't mean
  // that the Readable class should behave improperly, as streams are
  // designed to be sync/async agnostic.
  // Take note if the _read call is sync or async (ie, if the read call
  // has returned yet), so that we know whether or not it's safe to emit
  // 'readable' etc.
  //
  // 3. Actually pull the requested chunks out of the buffer and return.

  // if we need a readable event, then we need to do some reading.
  var doRead = state.needReadable;
  debug('need readable', doRead);

  // if we currently have less than the highWaterMark, then also read some
  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug('length less than watermark', doRead);
  }

  // however, if we've ended, then there's no point, and if we're already
  // reading, then it's unnecessary.
  if (state.ended || state.reading) {
    doRead = false;
    debug('reading or ended', doRead);
  }

  if (doRead) {
    debug('do read');
    state.reading = true;
    state.sync = true;
    // if the length is currently zero, then we *need* a readable event.
    if (state.length === 0)
      state.needReadable = true;
    // call internal read method
    this._read(state.highWaterMark);
    state.sync = false;
  }

  // If _read pushed data synchronously, then `reading` will be false,
  // and we need to re-evaluate how much data we can return to the user.
  if (doRead && !state.reading)
    n = howMuchToRead(nOrig, state);

  var ret;
  if (n > 0)
    ret = fromList(n, state);
  else
    ret = null;

  if (ret === null) {
    state.needReadable = true;
    n = 0;
  }

  state.length -= n;

  // If we have nothing in the buffer, then we want to know
  // as soon as we *do* get something into the buffer.
  if (state.length === 0 && !state.ended)
    state.needReadable = true;

  // If we tried to read() past the EOF, then emit end on the next tick.
  if (nOrig !== n && state.ended && state.length === 0)
    endReadable(this);

  if (ret !== null)
    this.emit('data', ret);

  return ret;
};

function chunkInvalid(state, chunk) {
  var er = null;
  if (!(Buffer.isBuffer(chunk)) &&
      typeof chunk !== 'string' &&
      chunk !== null &&
      chunk !== undefined &&
      !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  return er;
}


function onEofChunk(stream, state) {
  if (state.ended) return;
  if (state.decoder) {
    var chunk = state.decoder.end();
    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }
  state.ended = true;

  // emit 'readable' now to make sure it gets picked up.
  emitReadable(stream);
}

// Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.
function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;
  if (!state.emittedReadable) {
    debug('emitReadable', state.flowing);
    state.emittedReadable = true;
    if (state.sync)
      processNextTick(emitReadable_, stream);
    else
      emitReadable_(stream);
  }
}

function emitReadable_(stream) {
  debug('emit readable');
  stream.emit('readable');
  flow(stream);
}


// at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.
function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    processNextTick(maybeReadMore_, stream, state);
  }
}

function maybeReadMore_(stream, state) {
  var len = state.length;
  while (!state.reading && !state.flowing && !state.ended &&
         state.length < state.highWaterMark) {
    debug('maybeReadMore read 0');
    stream.read(0);
    if (len === state.length)
      // didn't get any data, stop spinning.
      break;
    else
      len = state.length;
  }
  state.readingMore = false;
}

// abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.
Readable.prototype._read = function(n) {
  this.emit('error', new Error('not implemented'));
};

Readable.prototype.pipe = function(dest, pipeOpts) {
  var src = this;
  var state = this._readableState;

  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;
    case 1:
      state.pipes = [state.pipes, dest];
      break;
    default:
      state.pipes.push(dest);
      break;
  }
  state.pipesCount += 1;
  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);

  var doEnd = (!pipeOpts || pipeOpts.end !== false) &&
              dest !== process.stdout &&
              dest !== process.stderr;

  var endFn = doEnd ? onend : cleanup;
  if (state.endEmitted)
    processNextTick(endFn);
  else
    src.once('end', endFn);

  dest.on('unpipe', onunpipe);
  function onunpipe(readable) {
    debug('onunpipe');
    if (readable === src) {
      cleanup();
    }
  }

  function onend() {
    debug('onend');
    dest.end();
  }

  // when the dest drains, it reduces the awaitDrain counter
  // on the source.  This would be more elegant with a .once()
  // handler in flow(), but adding and removing repeatedly is
  // too slow.
  var ondrain = pipeOnDrain(src);
  dest.on('drain', ondrain);

  var cleanedUp = false;
  function cleanup() {
    debug('cleanup');
    // cleanup event handlers once the pipe is broken
    dest.removeListener('close', onclose);
    dest.removeListener('finish', onfinish);
    dest.removeListener('drain', ondrain);
    dest.removeListener('error', onerror);
    dest.removeListener('unpipe', onunpipe);
    src.removeListener('end', onend);
    src.removeListener('end', cleanup);
    src.removeListener('data', ondata);

    cleanedUp = true;

    // if the reader is waiting for a drain event from this
    // specific writer, then it would cause it to never start
    // flowing again.
    // So, if this is awaiting a drain, then we just call it now.
    // If we don't know, then assume that we are waiting for one.
    if (state.awaitDrain &&
        (!dest._writableState || dest._writableState.needDrain))
      ondrain();
  }

  src.on('data', ondata);
  function ondata(chunk) {
    debug('ondata');
    var ret = dest.write(chunk);
    if (false === ret) {
      // If the user unpiped during `dest.write()`, it is possible
      // to get stuck in a permanently paused state if that write
      // also returned false.
      if (state.pipesCount === 1 &&
          state.pipes[0] === dest &&
          src.listenerCount('data') === 1 &&
          !cleanedUp) {
        debug('false write response, pause', src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
      }
      src.pause();
    }
  }

  // if the dest has an error, then stop piping into it.
  // however, don't suppress the throwing behavior for this.
  function onerror(er) {
    debug('onerror', er);
    unpipe();
    dest.removeListener('error', onerror);
    if (EElistenerCount(dest, 'error') === 0)
      dest.emit('error', er);
  }
  // This is a brutally ugly hack to make sure that our error handler
  // is attached before any userland ones.  NEVER DO THIS.
  if (!dest._events || !dest._events.error)
    dest.on('error', onerror);
  else if (isArray(dest._events.error))
    dest._events.error.unshift(onerror);
  else
    dest._events.error = [onerror, dest._events.error];


  // Both close and finish should trigger unpipe, but only once.
  function onclose() {
    dest.removeListener('finish', onfinish);
    unpipe();
  }
  dest.once('close', onclose);
  function onfinish() {
    debug('onfinish');
    dest.removeListener('close', onclose);
    unpipe();
  }
  dest.once('finish', onfinish);

  function unpipe() {
    debug('unpipe');
    src.unpipe(dest);
  }

  // tell the dest that it's being piped to
  dest.emit('pipe', src);

  // start the flow if it hasn't been started already.
  if (!state.flowing) {
    debug('pipe resume');
    src.resume();
  }

  return dest;
};

function pipeOnDrain(src) {
  return function() {
    var state = src._readableState;
    debug('pipeOnDrain', state.awaitDrain);
    if (state.awaitDrain)
      state.awaitDrain--;
    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {
      state.flowing = true;
      flow(src);
    }
  };
}


Readable.prototype.unpipe = function(dest) {
  var state = this._readableState;

  // if we're not piping anywhere, then do nothing.
  if (state.pipesCount === 0)
    return this;

  // just one destination.  most common case.
  if (state.pipesCount === 1) {
    // passed in one, but it's not the right one.
    if (dest && dest !== state.pipes)
      return this;

    if (!dest)
      dest = state.pipes;

    // got a match.
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest)
      dest.emit('unpipe', this);
    return this;
  }

  // slow case. multiple pipe destinations.

  if (!dest) {
    // remove all.
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;

    for (var i = 0; i < len; i++)
      dests[i].emit('unpipe', this);
    return this;
  }

  // try to find the right one.
  var i = indexOf(state.pipes, dest);
  if (i === -1)
    return this;

  state.pipes.splice(i, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1)
    state.pipes = state.pipes[0];

  dest.emit('unpipe', this);

  return this;
};

// set up data events if they are asked for
// Ensure readable listeners eventually get something
Readable.prototype.on = function(ev, fn) {
  var res = Stream.prototype.on.call(this, ev, fn);

  // If listening to data, and it has not explicitly been paused,
  // then call resume to start the flow of data on the next tick.
  if (ev === 'data' && false !== this._readableState.flowing) {
    this.resume();
  }

  if (ev === 'readable' && this.readable) {
    var state = this._readableState;
    if (!state.readableListening) {
      state.readableListening = true;
      state.emittedReadable = false;
      state.needReadable = true;
      if (!state.reading) {
        processNextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this, state);
      }
    }
  }

  return res;
};
Readable.prototype.addListener = Readable.prototype.on;

function nReadingNextTick(self) {
  debug('readable nexttick read 0');
  self.read(0);
}

// pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.
Readable.prototype.resume = function() {
  var state = this._readableState;
  if (!state.flowing) {
    debug('resume');
    state.flowing = true;
    resume(this, state);
  }
  return this;
};

function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    processNextTick(resume_, stream, state);
  }
}

function resume_(stream, state) {
  if (!state.reading) {
    debug('resume read 0');
    stream.read(0);
  }

  state.resumeScheduled = false;
  stream.emit('resume');
  flow(stream);
  if (state.flowing && !state.reading)
    stream.read(0);
}

Readable.prototype.pause = function() {
  debug('call pause flowing=%j', this._readableState.flowing);
  if (false !== this._readableState.flowing) {
    debug('pause');
    this._readableState.flowing = false;
    this.emit('pause');
  }
  return this;
};

function flow(stream) {
  var state = stream._readableState;
  debug('flow', state.flowing);
  if (state.flowing) {
    do {
      var chunk = stream.read();
    } while (null !== chunk && state.flowing);
  }
}

// wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.
Readable.prototype.wrap = function(stream) {
  var state = this._readableState;
  var paused = false;

  var self = this;
  stream.on('end', function() {
    debug('wrapped end');
    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length)
        self.push(chunk);
    }

    self.push(null);
  });

  stream.on('data', function(chunk) {
    debug('wrapped data');
    if (state.decoder)
      chunk = state.decoder.write(chunk);

    // don't skip over falsy values in objectMode
    if (state.objectMode && (chunk === null || chunk === undefined))
      return;
    else if (!state.objectMode && (!chunk || !chunk.length))
      return;

    var ret = self.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });

  // proxy all the other methods.
  // important when wrapping filters and duplexes.
  for (var i in stream) {
    if (this[i] === undefined && typeof stream[i] === 'function') {
      this[i] = function(method) { return function() {
        return stream[method].apply(stream, arguments);
      }; }(i);
    }
  }

  // proxy certain important events.
  var events = ['error', 'close', 'destroy', 'pause', 'resume'];
  forEach(events, function(ev) {
    stream.on(ev, self.emit.bind(self, ev));
  });

  // when we try to consume some more bytes, simply unpause the
  // underlying stream.
  self._read = function(n) {
    debug('wrapped _read', n);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };

  return self;
};


// exposed for testing purposes only.
Readable._fromList = fromList;

// Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
function fromList(n, state) {
  var list = state.buffer;
  var length = state.length;
  var stringMode = !!state.decoder;
  var objectMode = !!state.objectMode;
  var ret;

  // nothing in the list, definitely empty.
  if (list.length === 0)
    return null;

  if (length === 0)
    ret = null;
  else if (objectMode)
    ret = list.shift();
  else if (!n || n >= length) {
    // read it all, truncate the array.
    if (stringMode)
      ret = list.join('');
    else if (list.length === 1)
      ret = list[0];
    else
      ret = Buffer.concat(list, length);
    list.length = 0;
  } else {
    // read just some of it.
    if (n < list[0].length) {
      // just take a part of the first list item.
      // slice is the same for buffers and strings.
      var buf = list[0];
      ret = buf.slice(0, n);
      list[0] = buf.slice(n);
    } else if (n === list[0].length) {
      // first list is a perfect match
      ret = list.shift();
    } else {
      // complex case.
      // we have enough to cover it, but it spans past the first buffer.
      if (stringMode)
        ret = '';
      else
        ret = new Buffer(n);

      var c = 0;
      for (var i = 0, l = list.length; i < l && c < n; i++) {
        var buf = list[0];
        var cpy = Math.min(n - c, buf.length);

        if (stringMode)
          ret += buf.slice(0, cpy);
        else
          buf.copy(ret, c, 0, cpy);

        if (cpy < buf.length)
          list[0] = buf.slice(cpy);
        else
          list.shift();

        c += cpy;
      }
    }
  }

  return ret;
}

function endReadable(stream) {
  var state = stream._readableState;

  // If we get here before consuming all the bytes, then that is a
  // bug in node.  Should never happen.
  if (state.length > 0)
    throw new Error('endReadable called on non-empty stream');

  if (!state.endEmitted) {
    state.ended = true;
    processNextTick(endReadableNT, state, stream);
  }
}

function endReadableNT(state, stream) {
  // Check that we didn't get one last unshift.
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit('end');
  }
}

function forEach (xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

function indexOf (xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x) return i;
  }
  return -1;
}

}).call(this,require('_process'))

},{"./_stream_duplex":89,"_process":83,"buffer":3,"core-util-is":5,"events":7,"inherits":9,"isarray":11,"process-nextick-args":82,"string_decoder/":103,"util":2}],92:[function(require,module,exports){
// a transform stream is a readable/writable stream where you do
// something with the data.  Sometimes it's called a "filter",
// but that's not a great name for it, since that implies a thing where
// some bits pass through, and others are simply ignored.  (That would
// be a valid example of a transform, of course.)
//
// While the output is causally related to the input, it's not a
// necessarily symmetric or synchronous transformation.  For example,
// a zlib stream might take multiple plain-text writes(), and then
// emit a single compressed chunk some time in the future.
//
// Here's how this works:
//
// The Transform stream has all the aspects of the readable and writable
// stream classes.  When you write(chunk), that calls _write(chunk,cb)
// internally, and returns false if there's a lot of pending writes
// buffered up.  When you call read(), that calls _read(n) until
// there's enough pending readable data buffered up.
//
// In a transform stream, the written data is placed in a buffer.  When
// _read(n) is called, it transforms the queued up data, calling the
// buffered _write cb's as it consumes chunks.  If consuming a single
// written chunk would result in multiple output chunks, then the first
// outputted bit calls the readcb, and subsequent chunks just go into
// the read buffer, and will cause it to emit 'readable' if necessary.
//
// This way, back-pressure is actually determined by the reading side,
// since _read has to be called to start processing a new chunk.  However,
// a pathological inflate type of transform can cause excessive buffering
// here.  For example, imagine a stream where every byte of input is
// interpreted as an integer from 0-255, and then results in that many
// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in
// 1kb of data being output.  In this case, you could write a very small
// amount of input, and end up with a very large amount of output.  In
// such a pathological inflating mechanism, there'd be no way to tell
// the system to stop doing the transform.  A single 4MB write could
// cause the system to run out of memory.
//
// However, even in such a pathological case, only a single written chunk
// would be consumed, and then the rest would wait (un-transformed) until
// the results of the previous transformed chunk were consumed.

'use strict';

module.exports = Transform;

var Duplex = require('./_stream_duplex');

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

util.inherits(Transform, Duplex);


function TransformState(stream) {
  this.afterTransform = function(er, data) {
    return afterTransform(stream, er, data);
  };

  this.needTransform = false;
  this.transforming = false;
  this.writecb = null;
  this.writechunk = null;
}

function afterTransform(stream, er, data) {
  var ts = stream._transformState;
  ts.transforming = false;

  var cb = ts.writecb;

  if (!cb)
    return stream.emit('error', new Error('no writecb in Transform class'));

  ts.writechunk = null;
  ts.writecb = null;

  if (data !== null && data !== undefined)
    stream.push(data);

  if (cb)
    cb(er);

  var rs = stream._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    stream._read(rs.highWaterMark);
  }
}


function Transform(options) {
  if (!(this instanceof Transform))
    return new Transform(options);

  Duplex.call(this, options);

  this._transformState = new TransformState(this);

  // when the writable side finishes, then flush out anything remaining.
  var stream = this;

  // start out asking for a readable event once data is transformed.
  this._readableState.needReadable = true;

  // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.
  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === 'function')
      this._transform = options.transform;

    if (typeof options.flush === 'function')
      this._flush = options.flush;
  }

  this.once('prefinish', function() {
    if (typeof this._flush === 'function')
      this._flush(function(er) {
        done(stream, er);
      });
    else
      done(stream);
  });
}

Transform.prototype.push = function(chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
};

// This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.
Transform.prototype._transform = function(chunk, encoding, cb) {
  throw new Error('not implemented');
};

Transform.prototype._write = function(chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform ||
        rs.needReadable ||
        rs.length < rs.highWaterMark)
      this._read(rs.highWaterMark);
  }
};

// Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.
Transform.prototype._read = function(n) {
  var ts = this._transformState;

  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we've asked for it.
    ts.needTransform = true;
  }
};


function done(stream, er) {
  if (er)
    return stream.emit('error', er);

  // if there's nothing in the write buffer, then that means
  // that nothing more will ever be provided
  var ws = stream._writableState;
  var ts = stream._transformState;

  if (ws.length)
    throw new Error('calling transform done when ws.length != 0');

  if (ts.transforming)
    throw new Error('calling transform done when still transforming');

  return stream.push(null);
}

},{"./_stream_duplex":89,"core-util-is":5,"inherits":9}],93:[function(require,module,exports){
// A bit simpler than readable streams.
// Implement an async ._write(chunk, encoding, cb), and it'll handle all
// the drain event emission and buffering.

'use strict';

module.exports = Writable;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/


/*<replacement>*/
var Buffer = require('buffer').Buffer;
/*</replacement>*/

Writable.WritableState = WritableState;


/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/


/*<replacement>*/
var internalUtil = {
  deprecate: require('util-deprecate')
};
/*</replacement>*/



/*<replacement>*/
var Stream;
(function (){try{
  Stream = require('st' + 'ream');
}catch(_){}finally{
  if (!Stream)
    Stream = require('events').EventEmitter;
}}())
/*</replacement>*/

var Buffer = require('buffer').Buffer;

util.inherits(Writable, Stream);

function nop() {}

function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}

function WritableState(options, stream) {
  var Duplex = require('./_stream_duplex');

  options = options || {};

  // object stream flag to indicate whether or not this stream
  // contains buffers or objects.
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex)
    this.objectMode = this.objectMode || !!options.writableObjectMode;

  // the point at which write() starts returning false
  // Note: 0 is a valid value, means that we always return false if
  // the entire buffer is not flushed immediately on write()
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = ~~this.highWaterMark;

  this.needDrain = false;
  // at the start of calling end()
  this.ending = false;
  // when end() has been called, and returned
  this.ended = false;
  // when 'finish' is emitted
  this.finished = false;

  // should we decode strings into buffers before passing to _write?
  // this is here so that some node-core streams can optimize string
  // handling at a lower level.
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // not an actual buffer we keep track of, but a measurement
  // of how much we're waiting to get pushed to some underlying
  // socket or file.
  this.length = 0;

  // a flag to see when we're in the middle of a write.
  this.writing = false;

  // when true all writes will be buffered until .uncork() call
  this.corked = 0;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // a flag to know if we're processing previously buffered items, which
  // may call the _write() callback in the same tick, so that we don't
  // end up in an overlapped onwrite situation.
  this.bufferProcessing = false;

  // the callback that's passed to _write(chunk,cb)
  this.onwrite = function(er) {
    onwrite(stream, er);
  };

  // the callback that the user supplies to write(chunk,encoding,cb)
  this.writecb = null;

  // the amount that is being written when _write is called.
  this.writelen = 0;

  this.bufferedRequest = null;
  this.lastBufferedRequest = null;

  // number of pending user-supplied write callbacks
  // this must be 0 before 'finish' can be emitted
  this.pendingcb = 0;

  // emit prefinish if the only thing we're waiting for is _write cbs
  // This is relevant for synchronous Transform streams
  this.prefinished = false;

  // True if the error was already emitted and should not be thrown again
  this.errorEmitted = false;
}

WritableState.prototype.getBuffer = function writableStateGetBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};

(function (){try {
Object.defineProperty(WritableState.prototype, 'buffer', {
  get: internalUtil.deprecate(function() {
    return this.getBuffer();
  }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' +
     'instead.')
});
}catch(_){}}());


function Writable(options) {
  var Duplex = require('./_stream_duplex');

  // Writable ctor is applied to Duplexes, though they're not
  // instanceof Writable, they're instanceof Readable.
  if (!(this instanceof Writable) && !(this instanceof Duplex))
    return new Writable(options);

  this._writableState = new WritableState(options, this);

  // legacy.
  this.writable = true;

  if (options) {
    if (typeof options.write === 'function')
      this._write = options.write;

    if (typeof options.writev === 'function')
      this._writev = options.writev;
  }

  Stream.call(this);
}

// Otherwise people can pipe Writable streams, which is just wrong.
Writable.prototype.pipe = function() {
  this.emit('error', new Error('Cannot pipe. Not readable.'));
};


function writeAfterEnd(stream, cb) {
  var er = new Error('write after end');
  // TODO: defer error events consistently everywhere, not just the cb
  stream.emit('error', er);
  processNextTick(cb, er);
}

// If we get something that is not a buffer, string, null, or undefined,
// and we're not in objectMode, then that's an error.
// Otherwise stream chunks are all considered to be of length=1, and the
// watermarks determine how many objects to keep in the buffer, rather than
// how many bytes or characters.
function validChunk(stream, state, chunk, cb) {
  var valid = true;

  if (!(Buffer.isBuffer(chunk)) &&
      typeof chunk !== 'string' &&
      chunk !== null &&
      chunk !== undefined &&
      !state.objectMode) {
    var er = new TypeError('Invalid non-string/buffer chunk');
    stream.emit('error', er);
    processNextTick(cb, er);
    valid = false;
  }
  return valid;
}

Writable.prototype.write = function(chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;

  if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (Buffer.isBuffer(chunk))
    encoding = 'buffer';
  else if (!encoding)
    encoding = state.defaultEncoding;

  if (typeof cb !== 'function')
    cb = nop;

  if (state.ended)
    writeAfterEnd(this, cb);
  else if (validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, chunk, encoding, cb);
  }

  return ret;
};

Writable.prototype.cork = function() {
  var state = this._writableState;

  state.corked++;
};

Writable.prototype.uncork = function() {
  var state = this._writableState;

  if (state.corked) {
    state.corked--;

    if (!state.writing &&
        !state.corked &&
        !state.finished &&
        !state.bufferProcessing &&
        state.bufferedRequest)
      clearBuffer(this, state);
  }
};

Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  // node::ParseEncoding() requires lower case.
  if (typeof encoding === 'string')
    encoding = encoding.toLowerCase();
  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64',
'ucs2', 'ucs-2','utf16le', 'utf-16le', 'raw']
.indexOf((encoding + '').toLowerCase()) > -1))
    throw new TypeError('Unknown encoding: ' + encoding);
  this._writableState.defaultEncoding = encoding;
};

function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode &&
      state.decodeStrings !== false &&
      typeof chunk === 'string') {
    chunk = new Buffer(chunk, encoding);
  }
  return chunk;
}

// if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.
function writeOrBuffer(stream, state, chunk, encoding, cb) {
  chunk = decodeChunk(state, chunk, encoding);

  if (Buffer.isBuffer(chunk))
    encoding = 'buffer';
  var len = state.objectMode ? 1 : chunk.length;

  state.length += len;

  var ret = state.length < state.highWaterMark;
  // we must ensure that previous needDrain will not be reset to false.
  if (!ret)
    state.needDrain = true;

  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);
    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }

  return ret;
}

function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev)
    stream._writev(chunk, state.onwrite);
  else
    stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}

function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;
  if (sync)
    processNextTick(cb, er);
  else
    cb(er);

  stream._writableState.errorEmitted = true;
  stream.emit('error', er);
}

function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}

function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;

  onwriteStateUpdate(state);

  if (er)
    onwriteError(stream, state, sync, er, cb);
  else {
    // Check if we're actually ready to finish, but don't emit yet
    var finished = needFinish(state);

    if (!finished &&
        !state.corked &&
        !state.bufferProcessing &&
        state.bufferedRequest) {
      clearBuffer(stream, state);
    }

    if (sync) {
      processNextTick(afterWrite, stream, state, finished, cb);
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}

function afterWrite(stream, state, finished, cb) {
  if (!finished)
    onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
}

// Must force callback to be called on nextTick, so that we don't
// emit 'drain' before the write() consumer gets the 'false' return
// value, and has a chance to attach a 'drain' listener.
function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit('drain');
  }
}


// if there's something in the buffer waiting, then process it
function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;

  if (stream._writev && entry && entry.next) {
    // Fast case, write everything using _writev()
    var buffer = [];
    var cbs = [];
    while (entry) {
      cbs.push(entry.callback);
      buffer.push(entry);
      entry = entry.next;
    }

    // count the one we are adding, as well.
    // TODO(isaacs) clean this up
    state.pendingcb++;
    state.lastBufferedRequest = null;
    doWrite(stream, state, true, state.length, buffer, '', function(err) {
      for (var i = 0; i < cbs.length; i++) {
        state.pendingcb--;
        cbs[i](err);
      }
    });

    // Clear buffer
  } else {
    // Slow case, write chunks one-by-one
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;

      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next;
      // if we didn't call the onwrite immediately, then
      // it means that we need to wait until it does.
      // also, that means that the chunk and cb are currently
      // being processed, so move the buffer counter past them.
      if (state.writing) {
        break;
      }
    }

    if (entry === null)
      state.lastBufferedRequest = null;
  }
  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}

Writable.prototype._write = function(chunk, encoding, cb) {
  cb(new Error('not implemented'));
};

Writable.prototype._writev = null;

Writable.prototype.end = function(chunk, encoding, cb) {
  var state = this._writableState;

  if (typeof chunk === 'function') {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (chunk !== null && chunk !== undefined)
    this.write(chunk, encoding);

  // .end() fully uncorks
  if (state.corked) {
    state.corked = 1;
    this.uncork();
  }

  // ignore unnecessary end() calls.
  if (!state.ending && !state.finished)
    endWritable(this, state, cb);
};


function needFinish(state) {
  return (state.ending &&
          state.length === 0 &&
          state.bufferedRequest === null &&
          !state.finished &&
          !state.writing);
}

function prefinish(stream, state) {
  if (!state.prefinished) {
    state.prefinished = true;
    stream.emit('prefinish');
  }
}

function finishMaybe(stream, state) {
  var need = needFinish(state);
  if (need) {
    if (state.pendingcb === 0) {
      prefinish(stream, state);
      state.finished = true;
      stream.emit('finish');
    } else {
      prefinish(stream, state);
    }
  }
  return need;
}

function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);
  if (cb) {
    if (state.finished)
      processNextTick(cb);
    else
      stream.once('finish', cb);
  }
  state.ended = true;
}

},{"./_stream_duplex":89,"buffer":3,"core-util-is":5,"events":7,"inherits":9,"process-nextick-args":82,"util-deprecate":106}],94:[function(require,module,exports){
module.exports = require("./lib/_stream_passthrough.js")

},{"./lib/_stream_passthrough.js":90}],95:[function(require,module,exports){
var Stream = (function (){
  try {
    return require('st' + 'ream'); // hack to fix a circular dependency issue when used with browserify
  } catch(_){}
}());
exports = module.exports = require('./lib/_stream_readable.js');
exports.Stream = Stream || exports;
exports.Readable = exports;
exports.Writable = require('./lib/_stream_writable.js');
exports.Duplex = require('./lib/_stream_duplex.js');
exports.Transform = require('./lib/_stream_transform.js');
exports.PassThrough = require('./lib/_stream_passthrough.js');

},{"./lib/_stream_duplex.js":89,"./lib/_stream_passthrough.js":90,"./lib/_stream_readable.js":91,"./lib/_stream_transform.js":92,"./lib/_stream_writable.js":93}],96:[function(require,module,exports){
module.exports = require("./lib/_stream_transform.js")

},{"./lib/_stream_transform.js":92}],97:[function(require,module,exports){
module.exports = require("./lib/_stream_writable.js")

},{"./lib/_stream_writable.js":93}],98:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

module.exports = Stream;

var EE = require('events').EventEmitter;
var inherits = require('inherits');

inherits(Stream, EE);
Stream.Readable = require('readable-stream/readable.js');
Stream.Writable = require('readable-stream/writable.js');
Stream.Duplex = require('readable-stream/duplex.js');
Stream.Transform = require('readable-stream/transform.js');
Stream.PassThrough = require('readable-stream/passthrough.js');

// Backwards-compat with node 0.4.x
Stream.Stream = Stream;



// old-style streams.  Note that the pipe method (the only relevant
// part of this class) is overridden in the Readable class.

function Stream() {
  EE.call(this);
}

Stream.prototype.pipe = function(dest, options) {
  var source = this;

  function ondata(chunk) {
    if (dest.writable) {
      if (false === dest.write(chunk) && source.pause) {
        source.pause();
      }
    }
  }

  source.on('data', ondata);

  function ondrain() {
    if (source.readable && source.resume) {
      source.resume();
    }
  }

  dest.on('drain', ondrain);

  // If the 'end' option is not supplied, dest.end() will be called when
  // source gets the 'end' or 'close' events.  Only dest.end() once.
  if (!dest._isStdio && (!options || options.end !== false)) {
    source.on('end', onend);
    source.on('close', onclose);
  }

  var didOnEnd = false;
  function onend() {
    if (didOnEnd) return;
    didOnEnd = true;

    dest.end();
  }


  function onclose() {
    if (didOnEnd) return;
    didOnEnd = true;

    if (typeof dest.destroy === 'function') dest.destroy();
  }

  // don't leave dangling pipes when there are errors.
  function onerror(er) {
    cleanup();
    if (EE.listenerCount(this, 'error') === 0) {
      throw er; // Unhandled stream error in pipe.
    }
  }

  source.on('error', onerror);
  dest.on('error', onerror);

  // remove all the event listeners that were added.
  function cleanup() {
    source.removeListener('data', ondata);
    dest.removeListener('drain', ondrain);

    source.removeListener('end', onend);
    source.removeListener('close', onclose);

    source.removeListener('error', onerror);
    dest.removeListener('error', onerror);

    source.removeListener('end', cleanup);
    source.removeListener('close', cleanup);

    dest.removeListener('close', cleanup);
  }

  source.on('end', cleanup);
  source.on('close', cleanup);

  dest.on('close', cleanup);

  dest.emit('pipe', source);

  // Allow for unix-like usage: A.pipe(B).pipe(C)
  return dest;
};

},{"events":7,"inherits":9,"readable-stream/duplex.js":88,"readable-stream/passthrough.js":94,"readable-stream/readable.js":95,"readable-stream/transform.js":96,"readable-stream/writable.js":97}],99:[function(require,module,exports){
var ClientRequest = require('./lib/request')
var extend = require('xtend')
var statusCodes = require('builtin-status-codes')
var url = require('url')

var http = exports

http.request = function (opts, cb) {
	if (typeof opts === 'string')
		opts = url.parse(opts)
	else
		opts = extend(opts)

	var protocol = opts.protocol || ''
	var host = opts.hostname || opts.host
	var port = opts.port
	var path = opts.path || '/'

	// Necessary for IPv6 addresses
	if (host && host.indexOf(':') !== -1)
		host = '[' + host + ']'

	// This may be a relative url. The browser should always be able to interpret it correctly.
	opts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path
	opts.method = (opts.method || 'GET').toUpperCase()
	opts.headers = opts.headers || {}

	// Also valid opts.auth, opts.mode

	var req = new ClientRequest(opts)
	if (cb)
		req.on('response', cb)
	return req
}

http.get = function get (opts, cb) {
	var req = http.request(opts, cb)
	req.end()
	return req
}

http.Agent = function () {}
http.Agent.defaultMaxSockets = 4

http.STATUS_CODES = statusCodes

http.METHODS = [
	'CHECKOUT',
	'CONNECT',
	'COPY',
	'DELETE',
	'GET',
	'HEAD',
	'LOCK',
	'M-SEARCH',
	'MERGE',
	'MKACTIVITY',
	'MKCOL',
	'MOVE',
	'NOTIFY',
	'OPTIONS',
	'PATCH',
	'POST',
	'PROPFIND',
	'PROPPATCH',
	'PURGE',
	'PUT',
	'REPORT',
	'SEARCH',
	'SUBSCRIBE',
	'TRACE',
	'UNLOCK',
	'UNSUBSCRIBE'
]
},{"./lib/request":101,"builtin-status-codes":4,"url":104,"xtend":107}],100:[function(require,module,exports){
(function (global){
exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableByteStream)

exports.blobConstructor = false
try {
	new Blob([new ArrayBuffer(1)])
	exports.blobConstructor = true
} catch (e) {}

var xhr = new global.XMLHttpRequest()
// If location.host is empty, e.g. if this page/worker was loaded
// from a Blob, then use example.com to avoid an error
xhr.open('GET', global.location.host ? '/' : 'https://example.com')

function checkTypeSupport (type) {
	try {
		xhr.responseType = type
		return xhr.responseType === type
	} catch (e) {}
	return false
}

// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.
// Safari 7.1 appears to have fixed this bug.
var haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'
var haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)

exports.arraybuffer = haveArrayBuffer && checkTypeSupport('arraybuffer')
// These next two tests unavoidably show warnings in Chrome. Since fetch will always
// be used if it's available, just return false for these to avoid the warnings.
exports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')
exports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&
	checkTypeSupport('moz-chunked-arraybuffer')
exports.overrideMimeType = isFunction(xhr.overrideMimeType)
exports.vbArray = isFunction(global.VBArray)

function isFunction (value) {
  return typeof value === 'function'
}

xhr = null // Help gc

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],101:[function(require,module,exports){
(function (process,global,Buffer){
// var Base64 = require('Base64')
var capability = require('./capability')
var inherits = require('inherits')
var response = require('./response')
var stream = require('stream')

var IncomingMessage = response.IncomingMessage
var rStates = response.readyStates

function decideMode (preferBinary) {
	if (capability.fetch) {
		return 'fetch'
	} else if (capability.mozchunkedarraybuffer) {
		return 'moz-chunked-arraybuffer'
	} else if (capability.msstream) {
		return 'ms-stream'
	} else if (capability.arraybuffer && preferBinary) {
		return 'arraybuffer'
	} else if (capability.vbArray && preferBinary) {
		return 'text:vbarray'
	} else {
		return 'text'
	}
}

var ClientRequest = module.exports = function (opts) {
	var self = this
	stream.Writable.call(self)

	self._opts = opts
	self._body = []
	self._headers = {}
	if (opts.auth)
		self.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))
	Object.keys(opts.headers).forEach(function (name) {
		self.setHeader(name, opts.headers[name])
	})

	var preferBinary
	if (opts.mode === 'prefer-streaming') {
		// If streaming is a high priority but binary compatibility and
		// the accuracy of the 'content-type' header aren't
		preferBinary = false
	} else if (opts.mode === 'allow-wrong-content-type') {
		// If streaming is more important than preserving the 'content-type' header
		preferBinary = !capability.overrideMimeType
	} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {
		// Use binary if text streaming may corrupt data or the content-type header, or for speed
		preferBinary = true
	} else {
		throw new Error('Invalid value for opts.mode')
	}
	self._mode = decideMode(preferBinary)

	self.on('finish', function () {
		self._onFinish()
	})
}

inherits(ClientRequest, stream.Writable)

ClientRequest.prototype.setHeader = function (name, value) {
	var self = this
	var lowerName = name.toLowerCase()
	// This check is not necessary, but it prevents warnings from browsers about setting unsafe
	// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but
	// http-browserify did it, so I will too.
	if (unsafeHeaders.indexOf(lowerName) !== -1)
		return

	self._headers[lowerName] = {
		name: name,
		value: value
	}
}

ClientRequest.prototype.getHeader = function (name) {
	var self = this
	return self._headers[name.toLowerCase()].value
}

ClientRequest.prototype.removeHeader = function (name) {
	var self = this
	delete self._headers[name.toLowerCase()]
}

ClientRequest.prototype._onFinish = function () {
	var self = this

	if (self._destroyed)
		return
	var opts = self._opts

	var headersObj = self._headers
	var body
	if (opts.method === 'POST' || opts.method === 'PUT' || opts.method === 'PATCH') {
		if (capability.blobConstructor) {
			body = new global.Blob(self._body.map(function (buffer) {
				return buffer.toArrayBuffer()
			}), {
				type: (headersObj['content-type'] || {}).value || ''
			})
		} else {
			// get utf8 string
			body = Buffer.concat(self._body).toString()
		}
	}

	if (self._mode === 'fetch') {
		var headers = Object.keys(headersObj).map(function (name) {
			return [headersObj[name].name, headersObj[name].value]
		})

		global.fetch(self._opts.url, {
			method: self._opts.method,
			headers: headers,
			body: body,
			mode: 'cors',
			credentials: opts.withCredentials ? 'include' : 'same-origin'
		}).then(function (response) {
			self._fetchResponse = response
			self._connect()
		}, function (reason) {
			self.emit('error', reason)
		})
	} else {
		var xhr = self._xhr = new global.XMLHttpRequest()
		try {
			xhr.open(self._opts.method, self._opts.url, true)
		} catch (err) {
			process.nextTick(function () {
				self.emit('error', err)
			})
			return
		}

		// Can't set responseType on really old browsers
		if ('responseType' in xhr)
			xhr.responseType = self._mode.split(':')[0]

		if ('withCredentials' in xhr)
			xhr.withCredentials = !!opts.withCredentials

		if (self._mode === 'text' && 'overrideMimeType' in xhr)
			xhr.overrideMimeType('text/plain; charset=x-user-defined')

		Object.keys(headersObj).forEach(function (name) {
			xhr.setRequestHeader(headersObj[name].name, headersObj[name].value)
		})

		self._response = null
		xhr.onreadystatechange = function () {
			switch (xhr.readyState) {
				case rStates.LOADING:
				case rStates.DONE:
					self._onXHRProgress()
					break
			}
		}
		// Necessary for streaming in Firefox, since xhr.response is ONLY defined
		// in onprogress, not in onreadystatechange with xhr.readyState = 3
		if (self._mode === 'moz-chunked-arraybuffer') {
			xhr.onprogress = function () {
				self._onXHRProgress()
			}
		}

		xhr.onerror = function () {
			if (self._destroyed)
				return
			self.emit('error', new Error('XHR error'))
		}

		try {
			xhr.send(body)
		} catch (err) {
			process.nextTick(function () {
				self.emit('error', err)
			})
			return
		}
	}
}

/**
 * Checks if xhr.status is readable. Even though the spec says it should
 * be available in readyState 3, accessing it throws an exception in IE8
 */
function statusValid (xhr) {
	try {
		return (xhr.status !== null)
	} catch (e) {
		return false
	}
}

ClientRequest.prototype._onXHRProgress = function () {
	var self = this

	if (!statusValid(self._xhr) || self._destroyed)
		return

	if (!self._response)
		self._connect()

	self._response._onXHRProgress()
}

ClientRequest.prototype._connect = function () {
	var self = this

	if (self._destroyed)
		return

	self._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode)
	self.emit('response', self._response)
}

ClientRequest.prototype._write = function (chunk, encoding, cb) {
	var self = this

	self._body.push(chunk)
	cb()
}

ClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {
	var self = this
	self._destroyed = true
	if (self._response)
		self._response._destroyed = true
	if (self._xhr)
		self._xhr.abort()
	// Currently, there isn't a way to truly abort a fetch.
	// If you like bikeshedding, see https://github.com/whatwg/fetch/issues/27
}

ClientRequest.prototype.end = function (data, encoding, cb) {
	var self = this
	if (typeof data === 'function') {
		cb = data
		data = undefined
	}

	stream.Writable.prototype.end.call(self, data, encoding, cb)
}

ClientRequest.prototype.flushHeaders = function () {}
ClientRequest.prototype.setTimeout = function () {}
ClientRequest.prototype.setNoDelay = function () {}
ClientRequest.prototype.setSocketKeepAlive = function () {}

// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method
var unsafeHeaders = [
	'accept-charset',
	'accept-encoding',
	'access-control-request-headers',
	'access-control-request-method',
	'connection',
	'content-length',
	'cookie',
	'cookie2',
	'date',
	'dnt',
	'expect',
	'host',
	'keep-alive',
	'origin',
	'referer',
	'te',
	'trailer',
	'transfer-encoding',
	'upgrade',
	'user-agent',
	'via'
]

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"./capability":100,"./response":102,"_process":83,"buffer":3,"inherits":9,"stream":98}],102:[function(require,module,exports){
(function (process,global,Buffer){
var capability = require('./capability')
var inherits = require('inherits')
var stream = require('stream')

var rStates = exports.readyStates = {
	UNSENT: 0,
	OPENED: 1,
	HEADERS_RECEIVED: 2,
	LOADING: 3,
	DONE: 4
}

var IncomingMessage = exports.IncomingMessage = function (xhr, response, mode) {
	var self = this
	stream.Readable.call(self)

	self._mode = mode
	self.headers = {}
	self.rawHeaders = []
	self.trailers = {}
	self.rawTrailers = []

	// Fake the 'close' event, but only once 'end' fires
	self.on('end', function () {
		// The nextTick is necessary to prevent the 'request' module from causing an infinite loop
		process.nextTick(function () {
			self.emit('close')
		})
	})

	if (mode === 'fetch') {
		self._fetchResponse = response

		self.statusCode = response.status
		self.statusMessage = response.statusText
		// backwards compatible version of for (<item> of <iterable>):
		// for (var <item>,_i,_it = <iterable>[Symbol.iterator](); <item> = (_i = _it.next()).value,!_i.done;)
		for (var header, _i, _it = response.headers[Symbol.iterator](); header = (_i = _it.next()).value, !_i.done;) {
			self.headers[header[0].toLowerCase()] = header[1]
			self.rawHeaders.push(header[0], header[1])
		}

		// TODO: this doesn't respect backpressure. Once WritableStream is available, this can be fixed
		var reader = response.body.getReader()
		function read () {
			reader.read().then(function (result) {
				if (self._destroyed)
					return
				if (result.done) {
					self.push(null)
					return
				}
				self.push(new Buffer(result.value))
				read()
			})
		}
		read()

	} else {
		self._xhr = xhr
		self._pos = 0

		self.statusCode = xhr.status
		self.statusMessage = xhr.statusText
		var headers = xhr.getAllResponseHeaders().split(/\r?\n/)
		headers.forEach(function (header) {
			var matches = header.match(/^([^:]+):\s*(.*)/)
			if (matches) {
				var key = matches[1].toLowerCase()
				if (self.headers[key] !== undefined)
					self.headers[key] += ', ' + matches[2]
				else
					self.headers[key] = matches[2]
				self.rawHeaders.push(matches[1], matches[2])
			}
		})

		self._charset = 'x-user-defined'
		if (!capability.overrideMimeType) {
			var mimeType = self.rawHeaders['mime-type']
			if (mimeType) {
				var charsetMatch = mimeType.match(/;\s*charset=([^;])(;|$)/)
				if (charsetMatch) {
					self._charset = charsetMatch[1].toLowerCase()
				}
			}
			if (!self._charset)
				self._charset = 'utf-8' // best guess
		}
	}
}

inherits(IncomingMessage, stream.Readable)

IncomingMessage.prototype._read = function () {}

IncomingMessage.prototype._onXHRProgress = function () {
	var self = this

	var xhr = self._xhr

	var response = null
	switch (self._mode) {
		case 'text:vbarray': // For IE9
			if (xhr.readyState !== rStates.DONE)
				break
			try {
				// This fails in IE8
				response = new global.VBArray(xhr.responseBody).toArray()
			} catch (e) {}
			if (response !== null) {
				self.push(new Buffer(response))
				break
			}
			// Falls through in IE8	
		case 'text':
			try { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4
				response = xhr.responseText
			} catch (e) {
				self._mode = 'text:vbarray'
				break
			}
			if (response.length > self._pos) {
				var newData = response.substr(self._pos)
				if (self._charset === 'x-user-defined') {
					var buffer = new Buffer(newData.length)
					for (var i = 0; i < newData.length; i++)
						buffer[i] = newData.charCodeAt(i) & 0xff

					self.push(buffer)
				} else {
					self.push(newData, self._charset)
				}
				self._pos = response.length
			}
			break
		case 'arraybuffer':
			if (xhr.readyState !== rStates.DONE)
				break
			response = xhr.response
			self.push(new Buffer(new Uint8Array(response)))
			break
		case 'moz-chunked-arraybuffer': // take whole
			response = xhr.response
			if (xhr.readyState !== rStates.LOADING || !response)
				break
			self.push(new Buffer(new Uint8Array(response)))
			break
		case 'ms-stream':
			response = xhr.response
			if (xhr.readyState !== rStates.LOADING)
				break
			var reader = new global.MSStreamReader()
			reader.onprogress = function () {
				if (reader.result.byteLength > self._pos) {
					self.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))
					self._pos = reader.result.byteLength
				}
			}
			reader.onload = function () {
				self.push(null)
			}
			// reader.onerror = ??? // TODO: this
			reader.readAsArrayBuffer(response)
			break
	}

	// The ms-stream case handles end separately in reader.onload()
	if (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {
		self.push(null)
	}
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"./capability":100,"_process":83,"buffer":3,"inherits":9,"stream":98}],103:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var Buffer = require('buffer').Buffer;

var isBufferEncoding = Buffer.isEncoding
  || function(encoding) {
       switch (encoding && encoding.toLowerCase()) {
         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;
         default: return false;
       }
     }


function assertEncoding(encoding) {
  if (encoding && !isBufferEncoding(encoding)) {
    throw new Error('Unknown encoding: ' + encoding);
  }
}

// StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters. CESU-8 is handled as part of the UTF-8 encoding.
//
// @TODO Handling all encodings inside a single object makes it very difficult
// to reason about this code, so it should be split up in the future.
// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code
// points as used by CESU-8.
var StringDecoder = exports.StringDecoder = function(encoding) {
  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');
  assertEncoding(encoding);
  switch (this.encoding) {
    case 'utf8':
      // CESU-8 represents each of Surrogate Pair by 3-bytes
      this.surrogateSize = 3;
      break;
    case 'ucs2':
    case 'utf16le':
      // UTF-16 represents each of Surrogate Pair by 2-bytes
      this.surrogateSize = 2;
      this.detectIncompleteChar = utf16DetectIncompleteChar;
      break;
    case 'base64':
      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.
      this.surrogateSize = 3;
      this.detectIncompleteChar = base64DetectIncompleteChar;
      break;
    default:
      this.write = passThroughWrite;
      return;
  }

  // Enough space to store all bytes of a single character. UTF-8 needs 4
  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).
  this.charBuffer = new Buffer(6);
  // Number of bytes received for the current incomplete multi-byte character.
  this.charReceived = 0;
  // Number of bytes expected for the current incomplete multi-byte character.
  this.charLength = 0;
};


// write decodes the given buffer and returns it as JS string that is
// guaranteed to not contain any partial multi-byte characters. Any partial
// character found at the end of the buffer is buffered up, and will be
// returned when calling write again with the remaining bytes.
//
// Note: Converting a Buffer containing an orphan surrogate to a String
// currently works, but converting a String to a Buffer (via `new Buffer`, or
// Buffer#write) will replace incomplete surrogates with the unicode
// replacement character. See https://codereview.chromium.org/121173009/ .
StringDecoder.prototype.write = function(buffer) {
  var charStr = '';
  // if our last write ended with an incomplete multibyte character
  while (this.charLength) {
    // determine how many remaining bytes this buffer has to offer for this char
    var available = (buffer.length >= this.charLength - this.charReceived) ?
        this.charLength - this.charReceived :
        buffer.length;

    // add the new bytes to the char buffer
    buffer.copy(this.charBuffer, this.charReceived, 0, available);
    this.charReceived += available;

    if (this.charReceived < this.charLength) {
      // still not enough chars in this buffer? wait for more ...
      return '';
    }

    // remove bytes belonging to the current character from the buffer
    buffer = buffer.slice(available, buffer.length);

    // get the character that was split
    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);

    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character
    var charCode = charStr.charCodeAt(charStr.length - 1);
    if (charCode >= 0xD800 && charCode <= 0xDBFF) {
      this.charLength += this.surrogateSize;
      charStr = '';
      continue;
    }
    this.charReceived = this.charLength = 0;

    // if there are no more bytes in this buffer, just emit our char
    if (buffer.length === 0) {
      return charStr;
    }
    break;
  }

  // determine and set charLength / charReceived
  this.detectIncompleteChar(buffer);

  var end = buffer.length;
  if (this.charLength) {
    // buffer the incomplete character bytes we got
    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);
    end -= this.charReceived;
  }

  charStr += buffer.toString(this.encoding, 0, end);

  var end = charStr.length - 1;
  var charCode = charStr.charCodeAt(end);
  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character
  if (charCode >= 0xD800 && charCode <= 0xDBFF) {
    var size = this.surrogateSize;
    this.charLength += size;
    this.charReceived += size;
    this.charBuffer.copy(this.charBuffer, size, 0, size);
    buffer.copy(this.charBuffer, 0, 0, size);
    return charStr.substring(0, end);
  }

  // or just emit the charStr
  return charStr;
};

// detectIncompleteChar determines if there is an incomplete UTF-8 character at
// the end of the given buffer. If so, it sets this.charLength to the byte
// length that character, and sets this.charReceived to the number of bytes
// that are available for this character.
StringDecoder.prototype.detectIncompleteChar = function(buffer) {
  // determine how many bytes we have to check at the end of this buffer
  var i = (buffer.length >= 3) ? 3 : buffer.length;

  // Figure out if one of the last i bytes of our buffer announces an
  // incomplete char.
  for (; i > 0; i--) {
    var c = buffer[buffer.length - i];

    // See http://en.wikipedia.org/wiki/UTF-8#Description

    // 110XXXXX
    if (i == 1 && c >> 5 == 0x06) {
      this.charLength = 2;
      break;
    }

    // 1110XXXX
    if (i <= 2 && c >> 4 == 0x0E) {
      this.charLength = 3;
      break;
    }

    // 11110XXX
    if (i <= 3 && c >> 3 == 0x1E) {
      this.charLength = 4;
      break;
    }
  }
  this.charReceived = i;
};

StringDecoder.prototype.end = function(buffer) {
  var res = '';
  if (buffer && buffer.length)
    res = this.write(buffer);

  if (this.charReceived) {
    var cr = this.charReceived;
    var buf = this.charBuffer;
    var enc = this.encoding;
    res += buf.slice(0, cr).toString(enc);
  }

  return res;
};

function passThroughWrite(buffer) {
  return buffer.toString(this.encoding);
}

function utf16DetectIncompleteChar(buffer) {
  this.charReceived = buffer.length % 2;
  this.charLength = this.charReceived ? 2 : 0;
}

function base64DetectIncompleteChar(buffer) {
  this.charReceived = buffer.length % 3;
  this.charLength = this.charReceived ? 3 : 0;
}

},{"buffer":3}],104:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

'use strict';

var punycode = require('punycode');
var util = require('./util');

exports.parse = urlParse;
exports.resolve = urlResolve;
exports.resolveObject = urlResolveObject;
exports.format = urlFormat;

exports.Url = Url;

function Url() {
  this.protocol = null;
  this.slashes = null;
  this.auth = null;
  this.host = null;
  this.port = null;
  this.hostname = null;
  this.hash = null;
  this.search = null;
  this.query = null;
  this.pathname = null;
  this.path = null;
  this.href = null;
}

// Reference: RFC 3986, RFC 1808, RFC 2396

// define these here so at least they only have to be
// compiled once on the first module load.
var protocolPattern = /^([a-z0-9.+-]+:)/i,
    portPattern = /:[0-9]*$/,

    // Special case for a simple path URL
    simplePathPattern = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,

    // RFC 2396: characters reserved for delimiting URLs.
    // We actually just auto-escape these.
    delims = ['<', '>', '"', '`', ' ', '\r', '\n', '\t'],

    // RFC 2396: characters not allowed for various reasons.
    unwise = ['{', '}', '|', '\\', '^', '`'].concat(delims),

    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.
    autoEscape = ['\''].concat(unwise),
    // Characters that are never ever allowed in a hostname.
    // Note that any invalid chars are also handled, but these
    // are the ones that are *expected* to be seen, so we fast-path
    // them.
    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),
    hostEndingChars = ['/', '?', '#'],
    hostnameMaxLen = 255,
    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,
    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
    // protocols that can allow "unsafe" and "unwise" chars.
    unsafeProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that never have a hostname.
    hostlessProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that always contain a // bit.
    slashedProtocol = {
      'http': true,
      'https': true,
      'ftp': true,
      'gopher': true,
      'file': true,
      'http:': true,
      'https:': true,
      'ftp:': true,
      'gopher:': true,
      'file:': true
    },
    querystring = require('querystring');

function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url && util.isObject(url) && url instanceof Url) return url;

  var u = new Url;
  u.parse(url, parseQueryString, slashesDenoteHost);
  return u;
}

Url.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {
  if (!util.isString(url)) {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
  }

  // Copy chrome, IE, opera backslash-handling behavior.
  // Back slashes before the query string get converted to forward slashes
  // See: https://code.google.com/p/chromium/issues/detail?id=25916
  var queryIndex = url.indexOf('?'),
      splitter =
          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',
      uSplit = url.split(splitter),
      slashRegex = /\\/g;
  uSplit[0] = uSplit[0].replace(slashRegex, '/');
  url = uSplit.join(splitter);

  var rest = url;

  // trim before proceeding.
  // This is to support parse stuff like "  http://foo.com  \n"
  rest = rest.trim();

  if (!slashesDenoteHost && url.split('#').length === 1) {
    // Try fast path regexp
    var simplePath = simplePathPattern.exec(rest);
    if (simplePath) {
      this.path = rest;
      this.href = rest;
      this.pathname = simplePath[1];
      if (simplePath[2]) {
        this.search = simplePath[2];
        if (parseQueryString) {
          this.query = querystring.parse(this.search.substr(1));
        } else {
          this.query = this.search.substr(1);
        }
      } else if (parseQueryString) {
        this.search = '';
        this.query = {};
      }
      return this;
    }
  }

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    this.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  // figure out if it's got a host
  // user@server is *always* interpreted as a hostname, and url
  // resolution will treat //foo/bar as host=foo,path=bar because that's
  // how the browser resolves relative URLs.
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var slashes = rest.substr(0, 2) === '//';
    if (slashes && !(proto && hostlessProtocol[proto])) {
      rest = rest.substr(2);
      this.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] &&
      (slashes || (proto && !slashedProtocol[proto]))) {

    // there's a hostname.
    // the first instance of /, ?, ;, or # ends the host.
    //
    // If there is an @ in the hostname, then non-host chars *are* allowed
    // to the left of the last @ sign, unless some host-ending character
    // comes *before* the @-sign.
    // URLs are obnoxious.
    //
    // ex:
    // http://a@b@c/ => user:a@b host:c
    // http://a@b?@c => user:a host:c path:/?@c

    // v0.12 TODO(isaacs): This is not quite how Chrome does things.
    // Review our test case against browsers more comprehensively.

    // find the first instance of any hostEndingChars
    var hostEnd = -1;
    for (var i = 0; i < hostEndingChars.length; i++) {
      var hec = rest.indexOf(hostEndingChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }

    // at this point, either we have an explicit point where the
    // auth portion cannot go past, or the last @ char is the decider.
    var auth, atSign;
    if (hostEnd === -1) {
      // atSign can be anywhere.
      atSign = rest.lastIndexOf('@');
    } else {
      // atSign must be in auth portion.
      // http://a@b/c@d => host:b auth:a path:/c@d
      atSign = rest.lastIndexOf('@', hostEnd);
    }

    // Now we have a portion which is definitely the auth.
    // Pull that off.
    if (atSign !== -1) {
      auth = rest.slice(0, atSign);
      rest = rest.slice(atSign + 1);
      this.auth = decodeURIComponent(auth);
    }

    // the host is the remaining to the left of the first non-host char
    hostEnd = -1;
    for (var i = 0; i < nonHostChars.length; i++) {
      var hec = rest.indexOf(nonHostChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }
    // if we still have not hit it, then the entire thing is a host.
    if (hostEnd === -1)
      hostEnd = rest.length;

    this.host = rest.slice(0, hostEnd);
    rest = rest.slice(hostEnd);

    // pull out port.
    this.parseHost();

    // we've indicated that there is a hostname,
    // so even if it's empty, it has to be present.
    this.hostname = this.hostname || '';

    // if hostname begins with [ and ends with ]
    // assume that it's an IPv6 address.
    var ipv6Hostname = this.hostname[0] === '[' &&
        this.hostname[this.hostname.length - 1] === ']';

    // validate a little.
    if (!ipv6Hostname) {
      var hostparts = this.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i < l; i++) {
        var part = hostparts[i];
        if (!part) continue;
        if (!part.match(hostnamePartPattern)) {
          var newpart = '';
          for (var j = 0, k = part.length; j < k; j++) {
            if (part.charCodeAt(j) > 127) {
              // we replace non-ASCII char with a temporary placeholder
              // we need this to make sure size of hostname is not
              // broken by replacing non-ASCII by nothing
              newpart += 'x';
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) {
              validParts.push(bit[1]);
              notHost.unshift(bit[2]);
            }
            if (notHost.length) {
              rest = '/' + notHost.join('.') + rest;
            }
            this.hostname = validParts.join('.');
            break;
          }
        }
      }
    }

    if (this.hostname.length > hostnameMaxLen) {
      this.hostname = '';
    } else {
      // hostnames are always lower case.
      this.hostname = this.hostname.toLowerCase();
    }

    if (!ipv6Hostname) {
      // IDNA Support: Returns a punycoded representation of "domain".
      // It only converts parts of the domain name that
      // have non-ASCII characters, i.e. it doesn't matter if
      // you call it with a domain that already is ASCII-only.
      this.hostname = punycode.toASCII(this.hostname);
    }

    var p = this.port ? ':' + this.port : '';
    var h = this.hostname || '';
    this.host = h + p;
    this.href += this.host;

    // strip [ and ] from the hostname
    // the host field still retains them, though
    if (ipv6Hostname) {
      this.hostname = this.hostname.substr(1, this.hostname.length - 2);
      if (rest[0] !== '/') {
        rest = '/' + rest;
      }
    }
  }

  // now rest is set to the post-host stuff.
  // chop off any delim chars.
  if (!unsafeProtocol[lowerProto]) {

    // First, make 100% sure that any "autoEscape" chars get
    // escaped, even if encodeURIComponent doesn't think they
    // need to be.
    for (var i = 0, l = autoEscape.length; i < l; i++) {
      var ae = autoEscape[i];
      if (rest.indexOf(ae) === -1)
        continue;
      var esc = encodeURIComponent(ae);
      if (esc === ae) {
        esc = escape(ae);
      }
      rest = rest.split(ae).join(esc);
    }
  }


  // chop off from the tail first.
  var hash = rest.indexOf('#');
  if (hash !== -1) {
    // got a fragment string.
    this.hash = rest.substr(hash);
    rest = rest.slice(0, hash);
  }
  var qm = rest.indexOf('?');
  if (qm !== -1) {
    this.search = rest.substr(qm);
    this.query = rest.substr(qm + 1);
    if (parseQueryString) {
      this.query = querystring.parse(this.query);
    }
    rest = rest.slice(0, qm);
  } else if (parseQueryString) {
    // no query string, but parseQueryString still requested
    this.search = '';
    this.query = {};
  }
  if (rest) this.pathname = rest;
  if (slashedProtocol[lowerProto] &&
      this.hostname && !this.pathname) {
    this.pathname = '/';
  }

  //to support http.request
  if (this.pathname || this.search) {
    var p = this.pathname || '';
    var s = this.search || '';
    this.path = p + s;
  }

  // finally, reconstruct the href based on what has been validated.
  this.href = this.format();
  return this;
};

// format a parsed object into a url string
function urlFormat(obj) {
  // ensure it's an object, and not a string url.
  // If it's an obj, this is a no-op.
  // this way, you can call url_format() on strings
  // to clean up potentially wonky urls.
  if (util.isString(obj)) obj = urlParse(obj);
  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);
  return obj.format();
}

Url.prototype.format = function() {
  var auth = this.auth || '';
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, ':');
    auth += '@';
  }

  var protocol = this.protocol || '',
      pathname = this.pathname || '',
      hash = this.hash || '',
      host = false,
      query = '';

  if (this.host) {
    host = auth + this.host;
  } else if (this.hostname) {
    host = auth + (this.hostname.indexOf(':') === -1 ?
        this.hostname :
        '[' + this.hostname + ']');
    if (this.port) {
      host += ':' + this.port;
    }
  }

  if (this.query &&
      util.isObject(this.query) &&
      Object.keys(this.query).length) {
    query = querystring.stringify(this.query);
  }

  var search = this.search || (query && ('?' + query)) || '';

  if (protocol && protocol.substr(-1) !== ':') protocol += ':';

  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
  // unless they had them to begin with.
  if (this.slashes ||
      (!protocol || slashedProtocol[protocol]) && host !== false) {
    host = '//' + (host || '');
    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;
  } else if (!host) {
    host = '';
  }

  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;
  if (search && search.charAt(0) !== '?') search = '?' + search;

  pathname = pathname.replace(/[?#]/g, function(match) {
    return encodeURIComponent(match);
  });
  search = search.replace('#', '%23');

  return protocol + host + pathname + search + hash;
};

function urlResolve(source, relative) {
  return urlParse(source, false, true).resolve(relative);
}

Url.prototype.resolve = function(relative) {
  return this.resolveObject(urlParse(relative, false, true)).format();
};

function urlResolveObject(source, relative) {
  if (!source) return relative;
  return urlParse(source, false, true).resolveObject(relative);
}

Url.prototype.resolveObject = function(relative) {
  if (util.isString(relative)) {
    var rel = new Url();
    rel.parse(relative, false, true);
    relative = rel;
  }

  var result = new Url();
  var tkeys = Object.keys(this);
  for (var tk = 0; tk < tkeys.length; tk++) {
    var tkey = tkeys[tk];
    result[tkey] = this[tkey];
  }

  // hash is always overridden, no matter what.
  // even href="" will remove it.
  result.hash = relative.hash;

  // if the relative url is empty, then there's nothing left to do here.
  if (relative.href === '') {
    result.href = result.format();
    return result;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes && !relative.protocol) {
    // take everything except the protocol from relative
    var rkeys = Object.keys(relative);
    for (var rk = 0; rk < rkeys.length; rk++) {
      var rkey = rkeys[rk];
      if (rkey !== 'protocol')
        result[rkey] = relative[rkey];
    }

    //urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[result.protocol] &&
        result.hostname && !result.pathname) {
      result.path = result.pathname = '/';
    }

    result.href = result.format();
    return result;
  }

  if (relative.protocol && relative.protocol !== result.protocol) {
    // if it's a known url protocol, then changing
    // the protocol does weird things
    // first, if it's not file:, then we MUST have a host,
    // and if there was a path
    // to begin with, then we MUST have a path.
    // if it is file:, then the host is dropped,
    // because that's known to be hostless.
    // anything else is assumed to be absolute.
    if (!slashedProtocol[relative.protocol]) {
      var keys = Object.keys(relative);
      for (var v = 0; v < keys.length; v++) {
        var k = keys[v];
        result[k] = relative[k];
      }
      result.href = result.format();
      return result;
    }

    result.protocol = relative.protocol;
    if (!relative.host && !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || '').split('/');
      while (relPath.length && !(relative.host = relPath.shift()));
      if (!relative.host) relative.host = '';
      if (!relative.hostname) relative.hostname = '';
      if (relPath[0] !== '') relPath.unshift('');
      if (relPath.length < 2) relPath.unshift('');
      result.pathname = relPath.join('/');
    } else {
      result.pathname = relative.pathname;
    }
    result.search = relative.search;
    result.query = relative.query;
    result.host = relative.host || '';
    result.auth = relative.auth;
    result.hostname = relative.hostname || relative.host;
    result.port = relative.port;
    // to support http.request
    if (result.pathname || result.search) {
      var p = result.pathname || '';
      var s = result.search || '';
      result.path = p + s;
    }
    result.slashes = result.slashes || relative.slashes;
    result.href = result.format();
    return result;
  }

  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),
      isRelAbs = (
          relative.host ||
          relative.pathname && relative.pathname.charAt(0) === '/'
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (result.host && relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = result.pathname && result.pathname.split('/') || [],
      relPath = relative.pathname && relative.pathname.split('/') || [],
      psychotic = result.protocol && !slashedProtocol[result.protocol];

  // if the url is a non-slashed url, then relative
  // links like ../.. should be able
  // to crawl up to the hostname, as well.  This is strange.
  // result.protocol has already been set by now.
  // Later on, put the first path part into the host field.
  if (psychotic) {
    result.hostname = '';
    result.port = null;
    if (result.host) {
      if (srcPath[0] === '') srcPath[0] = result.host;
      else srcPath.unshift(result.host);
    }
    result.host = '';
    if (relative.protocol) {
      relative.hostname = null;
      relative.port = null;
      if (relative.host) {
        if (relPath[0] === '') relPath[0] = relative.host;
        else relPath.unshift(relative.host);
      }
      relative.host = null;
    }
    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');
  }

  if (isRelAbs) {
    // it's absolute.
    result.host = (relative.host || relative.host === '') ?
                  relative.host : result.host;
    result.hostname = (relative.hostname || relative.hostname === '') ?
                      relative.hostname : result.hostname;
    result.search = relative.search;
    result.query = relative.query;
    srcPath = relPath;
    // fall through to the dot-handling below.
  } else if (relPath.length) {
    // it's relative
    // throw away the existing file, and take the new path instead.
    if (!srcPath) srcPath = [];
    srcPath.pop();
    srcPath = srcPath.concat(relPath);
    result.search = relative.search;
    result.query = relative.query;
  } else if (!util.isNullOrUndefined(relative.search)) {
    // just pull out the search.
    // like href='?foo'.
    // Put this after the other two cases because it simplifies the booleans
    if (psychotic) {
      result.hostname = result.host = srcPath.shift();
      //occationaly the auth can get stuck only in host
      //this especially happens in cases like
      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
      var authInHost = result.host && result.host.indexOf('@') > 0 ?
                       result.host.split('@') : false;
      if (authInHost) {
        result.auth = authInHost.shift();
        result.host = result.hostname = authInHost.shift();
      }
    }
    result.search = relative.search;
    result.query = relative.query;
    //to support http.request
    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
      result.path = (result.pathname ? result.pathname : '') +
                    (result.search ? result.search : '');
    }
    result.href = result.format();
    return result;
  }

  if (!srcPath.length) {
    // no path at all.  easy.
    // we've already handled the other stuff above.
    result.pathname = null;
    //to support http.request
    if (result.search) {
      result.path = '/' + result.search;
    } else {
      result.path = null;
    }
    result.href = result.format();
    return result;
  }

  // if a url ENDs in . or .., then it must get a trailing slash.
  // however, if it ends in anything else non-slashy,
  // then it must NOT get a trailing slash.
  var last = srcPath.slice(-1)[0];
  var hasTrailingSlash = (
      (result.host || relative.host || srcPath.length > 1) &&
      (last === '.' || last === '..') || last === '');

  // strip single dots, resolve double dots to parent dir
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = srcPath.length; i >= 0; i--) {
    last = srcPath[i];
    if (last === '.') {
      srcPath.splice(i, 1);
    } else if (last === '..') {
      srcPath.splice(i, 1);
      up++;
    } else if (up) {
      srcPath.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (!mustEndAbs && !removeAllDots) {
    for (; up--; up) {
      srcPath.unshift('..');
    }
  }

  if (mustEndAbs && srcPath[0] !== '' &&
      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {
    srcPath.unshift('');
  }

  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {
    srcPath.push('');
  }

  var isAbsolute = srcPath[0] === '' ||
      (srcPath[0] && srcPath[0].charAt(0) === '/');

  // put the host back
  if (psychotic) {
    result.hostname = result.host = isAbsolute ? '' :
                                    srcPath.length ? srcPath.shift() : '';
    //occationaly the auth can get stuck only in host
    //this especially happens in cases like
    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
    var authInHost = result.host && result.host.indexOf('@') > 0 ?
                     result.host.split('@') : false;
    if (authInHost) {
      result.auth = authInHost.shift();
      result.host = result.hostname = authInHost.shift();
    }
  }

  mustEndAbs = mustEndAbs || (result.host && srcPath.length);

  if (mustEndAbs && !isAbsolute) {
    srcPath.unshift('');
  }

  if (!srcPath.length) {
    result.pathname = null;
    result.path = null;
  } else {
    result.pathname = srcPath.join('/');
  }

  //to support request.http
  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
    result.path = (result.pathname ? result.pathname : '') +
                  (result.search ? result.search : '');
  }
  result.auth = relative.auth || result.auth;
  result.slashes = result.slashes || relative.slashes;
  result.href = result.format();
  return result;
};

Url.prototype.parseHost = function() {
  var host = this.host;
  var port = portPattern.exec(host);
  if (port) {
    port = port[0];
    if (port !== ':') {
      this.port = port.substr(1);
    }
    host = host.substr(0, host.length - port.length);
  }
  if (host) this.hostname = host;
};

},{"./util":105,"punycode":84,"querystring":87}],105:[function(require,module,exports){
'use strict';

module.exports = {
  isString: function(arg) {
    return typeof(arg) === 'string';
  },
  isObject: function(arg) {
    return typeof(arg) === 'object' && arg !== null;
  },
  isNull: function(arg) {
    return arg === null;
  },
  isNullOrUndefined: function(arg) {
    return arg == null;
  }
};

},{}],106:[function(require,module,exports){
(function (global){

/**
 * Module exports.
 */

module.exports = deprecate;

/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */

function deprecate (fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}

/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */

function config (name) {
  // accessing global.localStorage can trigger a DOMException in sandboxed iframes
  try {
    if (!global.localStorage) return false;
  } catch (_) {
    return false;
  }
  var val = global.localStorage[name];
  if (null == val) return false;
  return String(val).toLowerCase() === 'true';
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],107:[function(require,module,exports){
module.exports = extend

var hasOwnProperty = Object.prototype.hasOwnProperty;

function extend() {
    var target = {}

    for (var i = 0; i < arguments.length; i++) {
        var source = arguments[i]

        for (var key in source) {
            if (hasOwnProperty.call(source, key)) {
                target[key] = source[key]
            }
        }
    }

    return target
}

},{}],108:[function(require,module,exports){
var _ = require('./lodash');
var debug = require('./debug');
var remoteEvents = [];
var localEvents = [];
var initiated = false;
var shared = false;
var cursor = null;
var widget;
var entity = '';
var emit;
var path = '';
var eventTimestamp = 0;
var updateInterval = null;
var updateIntervalValue = 5000;
var updateStateInterval = null;
var checkEvery = _.debounce(unshareBrowser, 30000);
var cursorX = 0, cursorY = 0;
var requestAF;

function init(options){
	if(initiated) return debug.info('Cobrowsing already initiated');

	addEvent(document, 'keyup', eventsHandler);
	addEvent(document, 'keydown', eventsHandler);
	addEvent(document, 'keypress', eventsHandler);
	addEvent(document, 'mouseup', eventsHandler);
	addEvent(document, 'click', eventsHandler);
	addEvent(document, 'change', eventsHandler);

	widget = (typeof options.widget === 'string') ? document.querySelector(options.widget) : options.widget;
	entity = options.entity;
	emit = options.emit;
	path = options.path;

	initiated = true;
	updateInterval = setInterval(emitEvents, updateIntervalValue);

	debug.log('cobrowsing module initiated with parameters: ', options);
	emit('cobrowsing/init');
}

function shareBrowser(){
    if(shared) return debug.info('Browser already shared');
    addEvent(document, 'scroll', eventsHandler);
    addEvent(document, 'select', eventsHandler);
    addEvent(document, 'mousemove', eventsHandler);

    // addEvent(document, 'mouseover', eventsHandler);
    // addEvent(document, 'mouseout', eventsHandler);
    
    createRemoteCursor();
    shared = true;
    updateStateInterval = setInterval(updateState, updateIntervalValue);
    clearInterval(updateInterval);

    debug.log('browser shared');
    emit('cobrowsing/shared', { entity: entity });
}

function unshareBrowser(){
	if(!shared) return debug.info('Browser already unshared');

    removeEvent(document, 'scroll', eventsHandler);
    removeEvent(document, 'select', eventsHandler);
    removeEvent(document, 'mousemove', eventsHandler);

    // removeEvent(document, 'mouseover', eventsHandler);
    // removeEvent(document, 'mouseout', eventsHandler);
    
    removeRemoteCursor();
    shared = false;
    updateInterval = setInterval(emitEvents, updateIntervalValue);
    clearInterval(updateStateInterval);

	emit('cobrowsing/unshared', { entity: entity });
    debug.log('browser unshared');
}

function unshareAll(){
	// removeEvent(document, 'keyup', eventsHandler);
	// removeEvent(document, 'keydown', eventsHandler);
	// removeEvent(document, 'keypress', eventsHandler);
	// removeEvent(document, 'mouseup', eventsHandler);
	// removeEvent(document, 'click', eventsHandler);
	// removeEvent(document, 'change', eventsHandler);
	clearInterval(updateInterval);
}

function createRemoteCursor(){
	var body = document.body;
	if(!cursor) {
		cursor= document.createElement('img');
		cursor.className = 'wc-rmt-ptr';
		cursor.setAttribute('src', path+'images/pointer.png');
		cursor.style.position = 'absolute';
		if(body.firstChild) {
			body.insertBefore(cursor, body.firstChild);
		} else {
			body.appendChild(cursor);
	
		}
		redrawCursor();
	}
}

function redrawCursor(){
	cursor.style.left = cursorX;
	cursor.style.top = cursorY;
	requestAF = window.requestAnimationFrame(redrawCursor);
}

function removeRemoteCursor(){
	if(!cursor) return;
	cancelAnimationFrame(requestAF);
	cursor.parentNode.removeChild(cursor);
	cursor = null;
}

//from http://stackoverflow.com/questions/2897155/get-cursor-position-in-characters-within-a-text-input-field
function getCaretPosition (oField) {
  // Initialize
	var iCaretPos = 0;

  // IE Support
    if (document.selection) {

    // Set focus on the element
        oField.focus ();

    // To get cursor position, get empty selection range
        var oSel = document.selection.createRange ();

    // Move selection start to 0 position
        oSel.moveStart ('character', -oField.value.length);

    // The caret position is selection length
        iCaretPos = oSel.text.length;
    }
    else if(oField.type && (oField.type === 'email' || oField.type === 'number')){
        iCaretPos = null;
    }
  // Firefox support
    else if (oField.selectionStart || oField.selectionStart == '0'){
        iCaretPos = oField.selectionStart;
    }
    else {
        iCaretPos = null;
    }
	// Return results
	return (iCaretPos);
}

function emitEvents(){
	// if(!shared && !localEvents.length) return;
	emit('cobrowsing/event', { entity: entity, events: localEvents });
	localEvents = [];
}

function updateState(){
	localEvents.push({ shared: true, entity: entity });
}

function eventsHandler(evt){
	var e = evt || window.event,
		etype = e.type,
		targ = e.target,
		nodeName = targ.nodeName,
		db = document.body,
		params = {},
		nodeIndex = null,
		nodes = document.getElementsByTagName(targ.nodeName),
		scrollTop = document.documentElement.scrollTop || document.body.scrollTop,
		scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft,
		i = 0;

	// if the target is text node, get parent node
	if(targ.nodeType === 3) targ = targ.parentNode;

	// return if the target node is the descendant of widget element
	if(entity === 'user' && isDescendant(widget, targ)) return;

	for(i=0; i < remoteEvents.length; i++){
		if(remoteEvents[i].event == etype){
			remoteEvents.splice(i, 1);
			return;
		}
	}

	// get the index of target node
	for(i=0; i<nodes.length; i++){
		if(nodes[i] == targ) nodeIndex = i;
	}

	// event type
	params.event = etype;
	// entity
	params.entity = entity;
	// target node
	params.tn = nodeName;
	// index of the target node
	params.tni = nodeIndex;
	// layout width of the document.body
	params.w = db.offsetWidth;
	// layout height of the document.body
	params.h = db.offsetHeight;
	params.sx = scrollLeft;
	params.sy = scrollTop;

	if(etype === 'mousemove' || etype === 'mouseover' || etype === 'mouseout') {
		var x = e.pageX || e.clientX + scrollTop;
		var y = e.pageY || e.clientY + scrollLeft;

		// cursor horisontal postion
		params.x = x;
		// cursor vertical position
		params.y = y;

		// for(i=0; i < localEvents.length; i++) {
		// 	if(localEvents[i].indexOf(etype) != -1) {
		// 		localEvents.splice(i, 1);
		// 		break;
		// 	}
		// }
	} else if(etype === 'scroll') {
		// for(i=0; i < localEvents.length; i++) {
		// 	if(localEvents[i].indexOf('scroll') != -1) {
		// 		localEvents.splice(i, 1);
		// 		break;
		// 	}
		// }
		
		// var st = window.pageYOffset || document.documentElement.scrollTop;
		// var sl = window.pageXOffset || document.documentElement.scrollLeft;

	} else if(etype == 'keyup' || etype == 'keydown' || etype == 'keypress') {
		var code = e.charCode || e.keyCode || e.which;
		var c = getCaretPosition(targ);

		if(nodeName === 'INPUT' && targ.type === 'password') return;

		if(etype == 'keyup') {
			if((c === null) || (code == 86 && (e.metaKey || e.ctrlKey))) {
				var tvalue = targ.value;
				if(tvalue) {
					tvalue = tvalue.replace(/\n/g, '<br>');
					// the value attribute of the target node, if exists
					params.value = tvalue;
				}
			} else {
				return;
			}
		} else if(etype == 'keydown') {
			if(c !== null && (code == 8 || code == 46 || code == 190)) {
				if(!targ.value) return;
				// caret position
				params.pos = c;
				// char code
				params.code = code;
			} else {
				return;
			}
		} else if(etype === 'keypress') {
			if(c !== null && code != 8 && code != 46) {
				// caret position
				params.pos = c;
				// char code
				params.code = code;
			} else {
				return;
			}
		}
	} else if(etype === 'change') {
		if(nodeName === 'INPUT' && targ.type === 'password') return;
		params.value = targ.value;

	} else if(etype == 'mouseup' || etype == 'select'){
		var selection = window.getSelection() || document.selection.createRange().text,
			so = selection.anchorOffset,
			eo = selection.focusOffset,
			anchorParentNodeIndex = 0,
			anchorParentNodeName = '',
			anchorNodeIndex = 0,
			anchorParent = '',
			focusParentNodeIndex = 0,
			focusParentNodeName = '',
			focusNodeIndex = 0,
			focusParent = '',
			reverse = false;

		if(selection.anchorNode !== null) {
			anchorParent = selection.anchorNode.parentNode;

			for(i=0; i<anchorParent.childNodes.length;i++) {
				if(anchorParent.childNodes[i] == selection.anchorNode) anchorNodeIndex = i;
			}
			
			anchorParentNodeName = anchorParent.nodeName.toLowerCase();
			nodes = document.getElementsByTagName(anchorParentNodeName);
			for(i=0;i<nodes.length;i++) {
				if(nodes[i] === anchorParent) anchorParentNodeIndex = i;
			}
			
			focusParent = selection.focusNode.parentNode;
			for(i=0; i<focusParent.childNodes.length;i++) {
				if(focusParent.childNodes[i] == selection.focusNode) focusNodeIndex = i;
			}
			
			focusParentNodeName = focusParent.nodeName.toLowerCase();
			nodes = document.getElementsByTagName(focusParentNodeName);
			for(i=0;i<nodes.length;i++) {
				if(nodes[i] === focusParent) focusParentNodeIndex = i;
			}
			

			if(anchorParentNodeName === focusParentNodeName &&
				anchorParentNodeIndex === focusParentNodeIndex &&
					anchorNodeIndex === focusNodeIndex &&
						so > eo)
							reverse = true;

			// name of the target node where selection started
			params.sn = anchorParentNodeName;
			params.sni = anchorParentNodeIndex;
			params.schi = anchorNodeIndex;
			// name of the target node where selection ended
			params.en = focusParentNodeName;
			params.eni = focusParentNodeIndex;
			params.echi = focusNodeIndex;
			params.so = reverse ? eo : so;
			params.eo = reverse ? so : eo;
		}
	} else if(etype == 'click') {
		params.scx = e.screenX;
		params.scy = e.screenY;
	}

	// debug.log('eventsHandler: ', params);
	localEvents.push(params);
}

function updateEvents(result){
	var mainElement = document.documentElement,
		target,
		evt = {};

	if(result.events && result.events.length) {

		// check for scrollTop/Left. 
		// IE and Firefox always return 0 from document.body.scrollTop/Left, 
		// while other browsers return 0 from document.documentElement
		mainElement = ('ActiveXObject' in window || typeof InstallTrigger !== 'undefined') ? document.documentElement : document.body;

		for(var i=0; i<result.events.length; i++) {
			evt = result.events[i];

			// if(evt.shared !== undefined) debug.log('shared events', eventTimestamp, evt, result.init);
			if(evt.timestamp < eventTimestamp) continue;
			if(evt.entity === entity) continue;
					
			if(evt.shared !== undefined){
				if(evt.shared){
					checkEvery();
					shareBrowser();
				} else {
					if(!result.historyEvents) unshareBrowser();
				}
			}
			if(evt.url) {
				if(!result.historyEvents) {
					var url = evt.url;
					var docUrl = document.URL;
					if(docUrl.indexOf('chatSessionId') !== -1) {
						docUrl = docUrl.substr(0, docUrl.indexOf('chatSessionId')-1);
					}
					if(url != docUrl) changeURL(url);
				}
			}
			if(evt.w){
				if(evt.entity === 'user') {
					var body = document.body;
					var innerW = body.offsetWidth;
					if(innerW !== evt.w) {
						document.body.style.width = evt.w + 'px';
					}
				}
			}
			if(evt.event === 'mousemove') {
				if(cursor) {
					cursorX = evt.x + 'px';
					cursorY = evt.y + 'px';
					// cursor.style.left = evt.x + 'px';
					// cursor.style.top = evt.y + 'px';
				}
			} else if(evt.event === 'scroll') {
				if(evt.tn !== undefined) {
					if(evt.tn === '#document') target = mainElement;
					else target = document.getElementsByTagName(evt.tn)[evt.tni];
					if(target){
						target.scrollTop = evt.sy;
						target.scrollLeft = evt.sx;
					}
				}
			} else if(evt.event === 'mouseup' || evt.event === 'select'){
				if(evt.sn) {
					var startNode = document.getElementsByTagName(evt.sn)[evt.sni];
					var endNode = document.getElementsByTagName(evt.en)[evt.eni];
					if(document.createRange && startNode !== undefined && endNode !== undefined) {
						var rng = document.createRange();
						rng.setStart(startNode.childNodes[evt.schi], evt.so);
						rng.setEnd(endNode.childNodes[evt.echi], evt.eo);
						var sel = window.getSelection();
						sel.removeAllRanges();
						sel.addRange(rng);
					}
				}
			} else if(evt.event === 'keyup' || evt.event === 'keydown' || evt.event === 'keypress') {
				if(evt.tn !== undefined && evt.tni !== undefined) {
					target = document.getElementsByTagName(evt.tn)[evt.tni];
					if(target){
						var output;
						var a = target.value;
						if(evt.code == 8) {
							if(evt.pos == a.length-1) output = a.substr(0, evt.pos-1);
							else if(evt.pos === 0) return;
							else output = a.substr(0, evt.pos-1) + a.substr(evt.pos);
							target.value = output;
						} else if(evt.code == 46) {
							output = a.substr(0, evt.pos) + a.substr(evt.pos+1);
							target.value = output;
						} else if(evt.code == 190) {
							output = a.substr(0, evt.pos) + '.' + a.substr(evt.pos);
							target.value = output;
						} else if(evt.value !== undefined) {
							var tvalue = evt.value;
							tvalue = tvalue.replace(/<br>/g, '\n');
							target.value = tvalue;
						} else {
							var c = String.fromCharCode(evt.code);
							if(a) output = a.substr(0, evt.pos) + c + a.substr(evt.pos);
							else output = c;
							target.value = output;
						}
					}
				}
			} else if(evt.event === 'change') {
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				target.value = evt.value;
			} else if(evt.event === 'click'){
				// var elements = document.getElementsByTagName(evt.tn.toLowerCase());
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				if(target) target.click();
				// elements[evt.tni].style.backgroundColor = 'yellow';
			} else {
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				if(target) {
					var evtOpts = mouseEvent(evt.event, evt.x, evt.y, evt.x, evt.y);
					dispatchEvent(target, evtOpts);
				}
			}

			if(evt.event === 'click' || evt.event === 'scroll') remoteEvents.push(evt);
		}
	}

	if(result.timestamp) eventTimestamp = result.timestamp;
	if(shared) emitEvents();
}

function mouseEvent(type, sx, sy, cx, cy) {
	var evt;
	var e = {
		bubbles: true,
		cancelable: (type != "mousemove"),
		view: window,
		detail: 0,
		screenX: sx,
		screenY: sy,
		clientX: cx,
		clientY: cy,
		ctrlKey: false,
		altKey: false,
		shiftKey: false,
		metaKey: false,
		button: 0,
		relatedTarget: undefined
	};
	if (typeof( document.createEvent ) == "function") {
		evt = document.createEvent("MouseEvents");
		evt.initMouseEvent(
			type,
			e.bubbles,
			e.cancelable,
			e.view,
			e.detail,
			e.screenX,
			e.screenY,
			e.clientX,
			e.clientY,
			e.ctrlKey,
			e.altKey,
			e.shiftKey,
			e.metaKey,
			e.button,
			document.body.parentNode
		);
	} else if (document.createEventObject) {
		evt = document.createEventObject();
		for (var prop in e) {
			evt[prop] = e[prop];
		}
		evt.button = { 0:1, 1:4, 2:2 }[evt.button] || evt.button;
	}
	return evt;
}
function dispatchEvent (el, evt) {
	if (el.dispatchEvent) {
		el.dispatchEvent(evt);
	} else if (el.fireEvent) {
		el.fireEvent('on' + type, evt);
	}
	return evt;
}

function changeURL(url) {
    var docUrl = document.URL;
    if (docUrl !== url) {
		document.location.href = url;
    }
}

function isDescendant(parent, child) {
     var node = child.parentNode;
     while (node != null) {
         if (node == parent) return true;
         node = node.parentNode;
     }
     return false;
}

function addEvent(obj, evType, fn) {
  if (obj.addEventListener) obj.addEventListener(evType, fn, false);
  else if (obj.attachEvent) obj.attachEvent("on"+evType, fn);
}
function removeEvent(obj, evType, fn) {
  if (obj.removeEventListener) obj.removeEventListener(evType, fn, false);
  else if (obj.detachEvent) obj.detachEvent("on"+evType, fn);
}

module.exports = {
	init: init,
	share: shareBrowser,
	unshare: unshareBrowser,
	unshareAll: unshareAll,
	emitEvents: emitEvents,
	updateEvents: updateEvents
};
},{"./debug":110,"./lodash":112}],109:[function(require,module,exports){

var EventEmitter = require('events').EventEmitter;
var storage = require('./storage');
var request = require('./request');
var debug = require('./debug');
// var url = require('url').parse(document.URL, true);
var url = window.location;
var _ = require('./lodash');
var inherits = require('inherits');

/**
 * Core module implements main internal functionality
 * 
 * @param  {Object} options Instantiation options that overrides module defaults
 * @return {Object}         Return public API
 */

var defaults = {
	// IPCC server IP address/domain name and port number.
	// ex.: "http://192.168.1.100:8880"
	server: ''
};

inherits(WchatAPI, EventEmitter);

module.exports = WchatAPI;

function WchatAPI(options){

	// extend default options
	// with provided object
	this.options = _.assign(defaults, options || {});

	this.options.serverUrl = this.options.server + '/ipcc/$$$';

	// // Current session state object
	// this.session = {
	// 	sid: null,
	// 	eventTimestamp: 0,
	// 	msgTimestamp: 0,
	// 	entity: undefined,
	// 	chat: null
	// };

	// this.on('session/create', function (result){
	// 	this.session.sid = result.sid;
	// });

	this.on('Error', function (err, params){
		if(err.code === 404) {
			this.sessionTimeout(params);
		}
		debug.error(err, params);
	});

	return this;

}

/**
 * Module initiation
 * Emits module/start event if module started
 */
WchatAPI.prototype.initModule = function(){
	var entity = storage.getState('entity', 'session'),
		sid = storage.getState('sid');

	debug.log('initModule: ', entity, sid);

	// A chatSessionId parameter in the url query 
	// indicates that the web page was opened by agent.
	// In that case agent should join the session.
	if(url.href.indexOf('chatSessionId') !== -1) {
		sid = this.getSidFromUrl(url.href);
		storage.saveState('entity', 'agent', 'session');
		storage.saveState('sid', sid);
		this.joinSession(sid);
	} else if(entity === 'agent' && sid) { // In case the cobrowsing session is active
		this.joinSession(sid, url.href);
	} else {

		// In case a session is already initiated 
		// and storage containes sid parameter
		if(sid) {
			this.updateEvents([{ entity: entity, url: url.href }], function (err, result){
				if(err) {
					return;
				}
				storage.saveState('sid', sid);
				this.emit('session/continue', { entity: entity, url: url.href });
			}.bind(this));
		} else {
			storage.saveState('entity', 'user', 'session');
			// Create new session
			this.createSession(url.href);
		}
	}
};

/**
 * Create session
 * Emits session/create event
 * if initiation is successful
 *
 * @param 	{String} 	url 	Current full URL
 * @return 	{String}	sid 	New session id
 */
WchatAPI.prototype.createSession = function(pageUrl){
	request.post(this.options.serverUrl, {
		method: 'createSession',
		params: {
			url: (pageUrl || url.href)
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'createSession', params: { pageUrl: pageUrl } });
			return;
		}

		body.result.url = url.href;
		storage.saveState('sid', body.result.sid);
		this.emit('session/create', body.result);
	}.bind(this));
};

WchatAPI.prototype.joinSession = function(sid, url){
	this.emit('session/join', { sid: sid, url: url });
};

/** 
 * Send/obtain events to/from the server. 
 * Events could be obtained from the server by specifying a timestamp
 * as a starting point from which an events would be obtained
**/
WchatAPI.prototype.updateEvents = function(events, cb){
	var sessionId = storage.getState('sid'), params;
	if(!sessionId) return;
	
	params = {
		method: 'updateEvents',
		params: {
			sid: sessionId,
			timestamp: storage.getState('eventTimestamp', 'cache'),
			events: events
		}
	};
	request.post(this.options.serverUrl, params, function (err, res, body){
		if(err) {
			this.emit('Error', err, params);
			return cb(err); // TODO: handle error
		}

		if(body.result.timestamp > storage.getState('eventTimestamp', 'cache')) {
			storage.saveState('eventTimestamp', body.result.timestamp, 'cache');
			if(cb) cb(null, body.result);
		} else {
			if(cb) cb(null, { events: [] });
		}
			

	}.bind(this));
};

/**
 * Get available dialog languages
 * If languages are not available, 
 * then either there are no available agents or
 * languages weren't set in Admin Studio
 */
WchatAPI.prototype.getLanguages = function(cb){
	request.post(this.options.serverUrl, {
		method: 'getLanguages',
		params: {
			sid: storage.getState('sid')
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'getLanguages' });
			return cb(err);
		}

		cb(null, body);
	}.bind(this));
};

/**
 * Request chat session
 * 
 * @param  {Object} params - user parameters (name, phone, subject, language, etc.)
 */
WchatAPI.prototype.chatRequest = function(params, cb){
	params.sid = storage.getState('sid');
	request.post(this.options.serverUrl, {
		method: 'chatRequest',
		params: params
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'chatRequest', params: params });
			if(cb) cb(err);
			return;
		}

		params.url = url.href;
		this.emit('chat/start', _.merge(params, body.result));
		if(cb) cb(null, body);
	}.bind(this));
};

/**
 * Get dialog messages
 * 
 * @param  {Number} timestamp Get messages since provided timestamp
 */
WchatAPI.prototype.getMessages = function(cb){
	request.post(this.options.serverUrl, {
		method: 'getMessages',
		params: {
			sid: storage.getState('sid'),
			timestamp: storage.getState('msgTimestamp')
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'getMessages' });
			return cb(err);
		}

		if(body.result.messages) {
			this.emit('message/new', body.result);
		} else if(body.result.typing) {
			this.emit('message/typing', body.result);
		}
		storage.saveState('msgTimestamp', body.result.timestamp);
		if(cb) cb(null, body.result);
	}.bind(this));
};

/**
 * Send message to the agent
 * 
 * @param  {String} text - message content in case of regular message 
 * or dataURL in case of file transfer
 * @param  {String} file - (Optional) file name
 */
WchatAPI.prototype.sendMessage = function(text, file){
	var params = {
		sid: storage.getState('sid'),
		text: text
	};
	if(file) params.file = file;
	request.post(this.options.serverUrl, {
		method: 'setMessage',
		params: params
	}, function(err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'sendMessage', params: params });
			return cb(err);
		}
	});
};

/**
 * Close current chat session
 * 
 * @param  {Number} rating Service rating
 */
WchatAPI.prototype.closeChat = function(rating){
	var reqParams = {
		method: 'closeChat',
		params: {
			sid: storage.getState('sid')
		}
	};
	if(rating) reqParams.params.rating = rating;
	request.post(this.options.serverUrl, reqParams, function (err, res, body){
		if(err) {
			this.emit('Error', err, reqParams);
			return;
		}
		storage.saveState('chat', false);
		this.emit('chat/close', { rating: rating, url: url.href });
	}.bind(this));
};

/**
 * Send dialog either to the specified email address (if parameter "to" has passed)
 * or to call center administrator (if parameter "email" has passed)
 *
 * Either
 * @param  {String} to			Destination email address
 *
 * Or
 * @param  {String} email		Sender email address
 * @param  {String} uname		Sender name
 * @param  {String} filename	Attachment filename
 * @param  {String} filedata	Attachment file URL
 *
 * Both
 * @param  {String} text		Email body
 */
WchatAPI.prototype.sendEmail = function(params, cb){
	params.sid = storage.getState('sid');
	request.post(this.options.serverUrl, {
		method: 'sendMail',
		params: params
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'sendEmail', params: params });
			if(cb) cb(err);
			return;
		}

		this.emit('chat/send', params);
		if(cb) cb(null, body);
	}.bind(this));
};

/**
 * Send callback request
 * 
 * @param  {String} task - id of the callback task that configured in the Admin Studio
 * @param  {String} phone - User's phone number
 * @param  {Number} time - Timestamp of the call to be initiated
 */
WchatAPI.prototype.requestCallback = function(params, cb){
	params.sid = storage.getState('sid');
	request.post(this.options.serverUrl, {
		method: 'requestCallback',
		params: params
	}, function(err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'requestCallback', params: params });
			return cb(err);
		}
		if(cb) cb(null, body.result);
	}.bind(this));
};

/**
 * Disjoin current active session
 * Emits session/disjoin event
 * if request is fulfilled
 *
 * @param {String} sid ID of active session
 */
WchatAPI.prototype.disjoinSession = function(sid){
	request.post(this.options.serverUrl, {
		method: 'disjoinSession',
		params: {
			sid: sid
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'disjoinSession', params: { sid: sid } });
			return;
		}

		this.emit('session/disjoin', { url: url.href });
	}.bind(this));
};

/**
 * Informs the server that the cobrowsing feature is turned on or off
 * @param  {Boolean} state Represents the state of cobrowsing feature
 * @param  {String} url   Url where the feature's state is changed
 * @return none
 */
WchatAPI.prototype.switchShareState = function(state, url){
	var method = state ? 'shareOpened' : 'shareClosed';
	request.post(this.options.serverUrl, {
		method: method,
		params: {
			sid: storage.getState('sid'),
			url: url
		}
	}, function(err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'switchShareState', params: { state: state } });
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.setChatTimeout = function(timeout){
	return setTimeout(function (){
		this.emit('chat/timeout');
	}.bind(this), timeout*1000);
};

WchatAPI.prototype.userIsTyping = function(){
	// debug.log('user is typing!');
	request.post(this.options.serverUrl, {
		method: 'typing',
		params: {
			sid: storage.getState('sid')
		}
	}, function (err){
		if(err) {
			this.emit('Error', err, { method: 'setChatTimeout' });
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.updateUrl = function(url){
	request.post(this.options.serverUrl, {
		method: 'updateUrl',
		params: {
			sid: storage.getState('sid'),
			url: url
		}
	}, function(err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'updateUrl', params: { url: url } });
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.linkFollowed = function(url){
	request.post(this.options.serverUrl, {
		method: 'linkFollowed',
		params: {
			sid: storage.getState('sid'),
			url: url
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err, { method: 'linkFollowed', params: { url: url } });
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.sessionTimeout = function(params) {
	// debug.log('sessionTimeout params: ', params);
	params.url = url.href;
	this.emit('session/timeout', params);
};

WchatAPI.prototype.getSidFromUrl = function(url) {
	var substr = url.substring(url.indexOf('chatSessionId='));
	substr = substr.substring(substr.indexOf('=')+1);
	return substr;
};

},{"./debug":110,"./lodash":112,"./request":114,"./storage":115,"events":7,"inherits":9}],110:[function(require,module,exports){
(function (global){
module.exports = {
    log: function(){ log(arguments, 'log'); },
    info: function(){ log(arguments, 'info'); },
    warn: function(){ log(arguments, 'warn'); },
    error: function(){ log(arguments, 'error'); }
};

function log(args, method){
    if(global.localStorage.getItem('swc.debug')) {
        [].forEach.call(args, function(arg){
            global.console[method] ? global.console[method](arg) : global.console.log(arg);
        });
        return;
    }
}
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],111:[function(require,module,exports){
(function (global){
/*
 * JsSIP v2.0.1
 * the Javascript SIP library
 * Copyright: 2012-2016 José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)
 * Homepage: http://jssip.net
 * License: MIT
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.JsSIP=e()}}(function(){var e;return function t(e,n,r){function s(i,o){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!o&&u)return u(i,!0);if(l)return l(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return s(n?n:t)},c,c.exports,t,e,n,r)}return n[i].exports}for(var l="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e,t,n){var r=e("../package.json"),s={USER_AGENT:r.title+" "+r.version,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60};t.exports=s},{"../package.json":47}],2:[function(e,t,n){function r(e,t,n,r){var o;return this.uac_pending_reply=!1,this.uas_pending_reply=!1,t.hasHeader("contact")?(r=t instanceof i.IncomingResponse?t.status_code<200?s.STATUS_EARLY:s.STATUS_CONFIRMED:r||s.STATUS_CONFIRMED,o=t.parseHeader("contact"),"UAS"===n?(this.id={call_id:t.call_id,local_tag:t.to_tag,remote_tag:t.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=r,this.remote_seqnum=t.cseq,this.local_uri=t.parseHeader("to").uri,this.remote_uri=t.parseHeader("from").uri,this.remote_target=o.uri,this.route_set=t.getHeaders("record-route")):"UAC"===n&&(this.id={call_id:t.call_id,local_tag:t.from_tag,remote_tag:t.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=r,this.local_seqnum=t.cseq,this.local_uri=t.parseHeader("from").uri,this.remote_uri=t.parseHeader("to").uri,this.remote_target=o.uri,this.route_set=t.getHeaders("record-route").reverse()),this.owner=e,e.ua.dialogs[this.id.toString()]=this,void l("new "+n+" dialog created with status "+(this.state===s.STATUS_EARLY?"EARLY":"CONFIRMED"))):{error:"unable to create a Dialog without Contact header field"}}t.exports=r;var s={STATUS_EARLY:1,STATUS_CONFIRMED:2};r.C=s;var l=e("debug")("JsSIP:Dialog"),i=e("./SIPMessage"),o=e("./Constants"),u=e("./Transactions"),a=e("./Dialog/RequestSender");r.prototype={update:function(e,t){this.state=s.STATUS_CONFIRMED,l("dialog "+this.id.toString()+"  changed to CONFIRMED state"),"UAC"===t&&(this.route_set=e.getHeaders("record-route").reverse())},terminate:function(){l("dialog "+this.id.toString()+" deleted"),delete this.owner.ua.dialogs[this.id.toString()]},createRequest:function(e,t,n){var r,s;return t=t&&t.slice()||[],this.local_seqnum||(this.local_seqnum=Math.floor(1e4*Math.random())),r=e===o.CANCEL||e===o.ACK?this.local_seqnum:this.local_seqnum+=1,s=new i.OutgoingRequest(e,this.remote_target,this.owner.ua,{cseq:r,call_id:this.id.call_id,from_uri:this.local_uri,from_tag:this.id.local_tag,to_uri:this.remote_uri,to_tag:this.id.remote_tag,route_set:this.route_set},t,n),s.dialog=this,s},checkInDialogRequest:function(e){var t=this;if(this.remote_seqnum){if(e.cseq<this.remote_seqnum)return e.method!==o.ACK&&e.reply(500),!1;e.cseq>this.remote_seqnum&&(this.remote_seqnum=e.cseq)}else this.remote_seqnum=e.cseq;if(e.method===o.INVITE||e.method===o.UPDATE&&e.body){if(this.uac_pending_reply===!0)e.reply(491);else{if(this.uas_pending_reply===!0){var n=(10*Math.random()|0)+1;return e.reply(500,null,["Retry-After:"+n]),!1}this.uas_pending_reply=!0,e.server_transaction.on("stateChanged",function r(){this.state!==u.C.STATUS_ACCEPTED&&this.state!==u.C.STATUS_COMPLETED&&this.state!==u.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",r),t.uas_pending_reply=!1)})}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){this.state===u.C.STATUS_ACCEPTED&&(t.remote_target=e.parseHeader("contact").uri)})}else e.method===o.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){this.state===u.C.STATUS_COMPLETED&&(t.remote_target=e.parseHeader("contact").uri)});return!0},sendRequest:function(e,t,n){n=n||{};var r=n.extraHeaders&&n.extraHeaders.slice()||[],s=n.body||null,l=this.createRequest(t,r,s),i=new a(this,e,l);return i.send(),l},receiveRequest:function(e){this.checkInDialogRequest(e)&&this.owner.receiveRequest(e)}}},{"./Constants":1,"./Dialog/RequestSender":3,"./SIPMessage":18,"./Transactions":21,debug:33}],3:[function(e,t,n){function r(e,t,n){this.dialog=e,this.applicant=t,this.request=n,this.reattempt=!1,this.reattemptTimer=null}t.exports=r;var s=e("../Constants"),l=e("../Transactions"),i=e("../RTCSession"),o=e("../RequestSender");r.prototype={send:function(){var e=this,t=new o(this,this.dialog.owner.ua);t.send(),(this.request.method===s.INVITE||this.request.method===s.UPDATE&&this.request.body)&&t.clientTransaction.state!==l.C.STATUS_TERMINATED&&(this.dialog.uac_pending_reply=!0,t.clientTransaction.on("stateChanged",function n(){this.state!==l.C.STATUS_ACCEPTED&&this.state!==l.C.STATUS_COMPLETED&&this.state!==l.C.STATUS_TERMINATED||(t.clientTransaction.removeListener("stateChanged",n),e.dialog.uac_pending_reply=!1)}))},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(e){var t=this;408===e.status_code||481===e.status_code?this.applicant.onDialogError(e):e.method===s.INVITE&&491===e.status_code?this.reattempt?this.applicant.receiveResponse(e):(this.request.cseq.value=this.dialog.local_seqnum+=1,this.reattemptTimer=setTimeout(function(){t.applicant.owner.status!==i.C.STATUS_TERMINATED&&(t.reattempt=!0,t.request_sender.send())},1e3)):this.applicant.receiveResponse(e)}}},{"../Constants":1,"../RTCSession":11,"../RequestSender":17,"../Transactions":21}],4:[function(e,t,n){function r(e){this.credentials=e,this.cnonce=null,this.nc=0,this.ncHex="00000000",this.algorithm=null,this.realm=null,this.nonce=null,this.opaque=null,this.stale=null,this.qop=null,this.method=null,this.uri=null,this.ha1=null,this.response=null}t.exports=r;var s=e("debug")("JsSIP:DigestAuthentication"),l=e("debug")("JsSIP:ERROR:DigestAuthentication");l.log=console.warn.bind(console);var i=e("./Utils");r.prototype.get=function(e){switch(e){case"realm":return this.realm;case"ha1":return this.ha1;default:return void l('get() | cannot get "%s" parameter',e)}},r.prototype.authenticate=function(e,t){var n,r;if(this.algorithm=t.algorithm,this.realm=t.realm,this.nonce=t.nonce,this.opaque=t.opaque,this.stale=t.stale,this.algorithm){if("MD5"!==this.algorithm)return l('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this.algorithm="MD5";if(!this.nonce)return l("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this.realm)return l("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this.credentials.password){if(!this.credentials.ha1)return l("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this.credentials.realm!==this.realm)return l('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this.credentials.realm,this.realm),!1}if(t.qop)if(t.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(t.qop.indexOf("auth-int")>-1))return l('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this.qop="auth-int"}else this.qop=null;return this.method=e.method,this.uri=e.ruri,this.cnonce=i.createRandomToken(12),this.nc+=1,r=Number(this.nc).toString(16),this.ncHex="00000000".substr(0,8-r.length)+r,4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.credentials.password?this.ha1=i.calculateMD5(this.credentials.username+":"+this.realm+":"+this.credentials.password):this.ha1=this.credentials.ha1,"auth"===this.qop?(n=i.calculateMD5(this.method+":"+this.uri),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+n)):"auth-int"===this.qop?(n=i.calculateMD5(this.method+":"+this.uri+":"+i.calculateMD5(this.body?this.body:"")),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+n)):null===this.qop&&(n=i.calculateMD5(this.method+":"+this.uri),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+n)),s("authenticate() | response generated"),!0},r.prototype.toString=function(){var e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.credentials.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")}},{"./Utils":25,debug:33}],5:[function(e,t,n){var r={ConfigurationError:function(){var e=function(e,t){this.code=1,this.name="CONFIGURATION_ERROR",this.parameter=e,this.value=t,this.message=this.value?"Invalid value "+JSON.stringify(this.value)+' for parameter "'+this.parameter+'"':"Missing parameter: "+this.parameter};return e.prototype=new Error,e}(),InvalidStateError:function(){var e=function(e){this.code=2,this.name="INVALID_STATE_ERROR",this.status=e,this.message="Invalid status: "+e};return e.prototype=new Error,e}(),NotSupportedError:function(){var e=function(e){this.code=3,this.name="NOT_SUPPORTED_ERROR",this.message=e};return e.prototype=new Error,e}(),NotReadyError:function(){var e=function(e){this.code=4,this.name="NOT_READY_ERROR",this.message=e};return e.prototype=new Error,e}()};t.exports=r},{}],6:[function(e,t,n){t.exports=function(){function t(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,r){function s(e){Cr>_r||(_r>Cr&&(Cr=_r,Sr=[]),Sr.push(e))}function l(){var e;return"\r\n"===n.substr(_r,2)?(e="\r\n",_r+=2):(e=null,0===vr&&s('"\\r\\n"')),e}function i(){var e;return/^[0-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[0-9]")),e}function o(){var e;return/^[a-zA-Z]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-zA-Z]")),e}function u(){var e;return/^[0-9a-fA-F]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[0-9a-fA-F]")),e}function a(){var e;return e=d(),null===e&&(e=p()),e}function c(){var e;return/^[\0-\xFF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\0-\\xFF]")),e}function h(){var e;return/^["]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s('["]')),e}function d(){var e;return 32===n.charCodeAt(_r)?(e=" ",_r++):(e=null,0===vr&&s('" "')),e}function p(){var e;return 9===n.charCodeAt(_r)?(e="	",_r++):(e=null,0===vr&&s('"\\t"')),e}function f(){var e;return/^[a-zA-Z0-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-zA-Z0-9]")),e}function m(){var e;return 59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","'))))))))))),e}function g(){var e;return e=f(),null===e&&(e=T()),e}function T(){var e;return 45===n.charCodeAt(_r)?(e="-",_r++):(e=null,0===vr&&s('"-"')),null===e&&(95===n.charCodeAt(_r)?(e="_",_r++):(e=null,0===vr&&s('"_"')),null===e&&(46===n.charCodeAt(_r)?(e=".",_r++):(e=null,0===vr&&s('"."')),null===e&&(33===n.charCodeAt(_r)?(e="!",_r++):(e=null,0===vr&&s('"!"')),null===e&&(126===n.charCodeAt(_r)?(e="~",_r++):(e=null,0===vr&&s('"~"')),null===e&&(42===n.charCodeAt(_r)?(e="*",_r++):(e=null,0===vr&&s('"*"')),null===e&&(39===n.charCodeAt(_r)?(e="'",_r++):(e=null,0===vr&&s('"\'"')),null===e&&(40===n.charCodeAt(_r)?(e="(",_r++):(e=null,0===vr&&s('"("')),null===e&&(41===n.charCodeAt(_r)?(e=")",_r++):(e=null,0===vr&&s('")"')))))))))),e}function _(){var e,t,r,l,i;return l=_r,i=_r,37===n.charCodeAt(_r)?(e="%",_r++):(e=null,0===vr&&s('"%"')),null!==e?(t=u(),null!==t?(r=u(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){return t.join("")}(l,e)),null===e&&(_r=l),e}function v(){var e,t,n,r,s,i;for(r=_r,s=_r,i=_r,e=[],t=a();null!==t;)e.push(t),t=a();if(null!==e?(t=l(),null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),e=null!==e?e:"",null!==e){if(n=a(),null!==n)for(t=[];null!==n;)t.push(n),n=a();else t=null;null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return null!==e&&(e=function(e){return" "}(r)),null===e&&(_r=r),e}function C(){var e;return e=v(),e=null!==e?e:""}function S(){var e,t,r,l,i;for(l=_r,i=_r,e=[],t=d(),null===t&&(t=p());null!==t;)e.push(t),t=d(),null===t&&(t=p());return null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return":"}(l)),null===e&&(_r=l),e}function E(){var e,t,r,s,l,i,o;if(l=_r,i=_r,t=A(),null!==t)for(e=[];null!==t;)e.push(t),t=A();else e=null;if(null!==e){for(t=[],o=_r,r=[],s=v();null!==s;)r.push(s),s=v();for(null!==r?(s=A(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==r;){for(t.push(r),o=_r,r=[],s=v();null!==s;)r.push(s),s=v();null!==r?(s=A(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o)}null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r,e)}(l)),null===e&&(_r=l),e}function A(){var e;return/^[!-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[!-~]")),null===e&&(e=y()),e}function y(){var e;return/^[\x80-\uFFFF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\x80-\\uFFFF]")),e}function R(){var e;return/^[\x80-\xBF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\x80-\\xBF]")),e}function b(){var e;return e=i(),null===e&&(/^[a-f]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-f]"))),e}function I(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"'))))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function w(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"'))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function N(){var e;return 40===n.charCodeAt(_r)?(e="(",_r++):(e=null,0===vr&&s('"("')),null===e&&(41===n.charCodeAt(_r)?(e=")",_r++):(e=null,0===vr&&s('")"')),null===e&&(60===n.charCodeAt(_r)?(e="<",_r++):(e=null,0===vr&&s('"<"')),null===e&&(62===n.charCodeAt(_r)?(e=">",_r++):(e=null,0===vr&&s('">"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(92===n.charCodeAt(_r)?(e="\\",_r++):(e=null,0===vr&&s('"\\\\"')),null===e&&(e=h(),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(123===n.charCodeAt(_r)?(e="{",_r++):(e=null,0===vr&&s('"{"')),null===e&&(125===n.charCodeAt(_r)?(e="}",_r++):(e=null,0===vr&&s('"}"')),null===e&&(e=d(),null===e&&(e=p())))))))))))))))))),e}function D(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')),null===t&&(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null===t&&(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null===t&&(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null===t&&(62===n.charCodeAt(_r)?(t=">",_r++):(t=null,0===vr&&s('">"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(92===n.charCodeAt(_r)?(t="\\",_r++):(t=null,0===vr&&s('"\\\\"')),null===t&&(t=h(),null===t&&(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null===t&&(91===n.charCodeAt(_r)?(t="[",_r++):(t=null,0===vr&&s('"["')),null===t&&(93===n.charCodeAt(_r)?(t="]",_r++):(t=null,0===vr&&s('"]"')),null===t&&(63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null===t&&(123===n.charCodeAt(_r)?(t="{",_r++):(t=null,0===vr&&s('"{"')),null===t&&(125===n.charCodeAt(_r)?(t="}",_r++):(t=null,0===vr&&s('"}"'))))))))))))))))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')),null===t&&(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null===t&&(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null===t&&(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null===t&&(62===n.charCodeAt(_r)?(t=">",_r++):(t=null,0===vr&&s('">"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(92===n.charCodeAt(_r)?(t="\\",_r++):(t=null,0===vr&&s('"\\\\"')),null===t&&(t=h(),null===t&&(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null===t&&(91===n.charCodeAt(_r)?(t="[",_r++):(t=null,0===vr&&s('"["')),null===t&&(93===n.charCodeAt(_r)?(t="]",_r++):(t=null,0===vr&&s('"]"')),null===t&&(63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null===t&&(123===n.charCodeAt(_r)?(t="{",_r++):(t=null,0===vr&&s('"{"')),null===t&&(125===n.charCodeAt(_r)?(t="}",_r++):(t=null,0===vr&&s('"}"')))))))))))))))))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function O(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"*"}(l)),null===e&&(_r=l),e}function x(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"/"}(l)),null===e&&(_r=l),e}function U(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"="}(l)),null===e&&(_r=l),e}function M(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"("}(l)),null===e&&(_r=l),e}function P(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return")"}(l)),null===e&&(_r=l),e}function q(){var e,t,r,l;return r=_r,l=_r,62===n.charCodeAt(_r)?(e=">",_r++):(e=null,0===vr&&s('">"')),null!==e?(t=C(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e){return">"}(r)),null===e&&(_r=r),e}function L(){var e,t,r,l;return r=_r,l=_r,e=C(),null!==e?(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e){return"<"}(r)),null===e&&(_r=r),e}function k(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return","}(l)),null===e&&(_r=l),e}function H(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return";"}(l)),null===e&&(_r=l),e}function F(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return":"}(l)),null===e&&(_r=l),e}function G(){var e,t,n,r;return n=_r,r=_r,e=C(),null!==e?(t=h(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),null!==e&&(e=function(e){return'"'}(n)),null===e&&(_r=n),e}function j(){var e,t,n,r;return n=_r,r=_r,e=h(),null!==e?(t=C(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),null!==e&&(e=function(e){return'"'}(n)),null===e&&(_r=n),e}function W(){var e,t,n,r;if(r=_r,e=M(),null!==e){for(t=[],n=B(),null===n&&(n=J(),null===n&&(n=W()));null!==n;)t.push(n),n=B(),null===n&&(n=J(),null===n&&(n=W()));null!==t?(n=P(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)}else e=null,_r=r;return e}function B(){var e;return/^[!-']/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[!-']")),null===e&&(/^[*-[]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[*-[]")),null===e&&(/^[\]-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\]-~]")),null===e&&(e=y(),null===e&&(e=v())))),e}function z(){var e,t,r,s,l,i;if(l=_r,i=_r,e=C(),null!==e)if(t=h(),null!==t){for(r=[],s=Y(),null===s&&(s=J());null!==s;)r.push(s),s=Y(),null===s&&(s=J());null!==r?(s=h(),null!==s?e=[e,t,r,s]:(e=null,_r=i)):(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r,e)}(l)),null===e&&(_r=l),e}function V(){var e,t,r,s,l,i;if(l=_r,i=_r,e=C(),null!==e)if(t=h(),null!==t){for(r=[],s=Y(),null===s&&(s=J());null!==s;)r.push(s),s=Y(),null===s&&(s=J());null!==r?(s=h(),null!==s?e=[e,t,r,s]:(e=null,_r=i)):(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r-1,e+1)}(l)),null===e&&(_r=l),e}function Y(){var e;return e=v(),null===e&&(33===n.charCodeAt(_r)?(e="!",_r++):(e=null,0===vr&&s('"!"')),null===e&&(/^[#-[]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[#-[]")),null===e&&(/^[\]-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\]-~]")),null===e&&(e=y())))),e}function J(){var e,t,r;return r=_r,92===n.charCodeAt(_r)?(e="\\",_r++):(e=null,0===vr&&s('"\\\\"')),null!==e?(/^[\0-\t]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\0-\\t]")),null===t&&(/^[\x0B-\f]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\x0B-\\f]")),null===t&&(/^[\x0E-]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\x0E-]")))),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function K(){var e,t,r,l,i,o;return i=_r,o=_r,e=X(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=ee(),r=null!==r?r:"",null!==r?(l=se(),null!==l?e=[e,t,r,l]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e){try{yr.uri=new Er(yr.scheme,yr.user,yr.host,yr.port),delete yr.scheme,delete yr.user,delete yr.host,delete yr.host_type,delete yr.port}catch(t){yr=-1}}(i)),null===e&&(_r=i),e}function $(){var e,t,l,i,o,u,a,c;return a=_r,c=_r,e=X(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(l=ee(),l=null!==l?l:"",null!==l?(i=se(),null!==i?(o=ge(),null!==o?(u=Ne(),u=null!==u?u:"",null!==u?e=[e,t,l,i,o,u]:(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c),null!==e&&(e=function(e){try{yr.uri=new Er(yr.scheme,yr.user,yr.host,yr.port,yr.uri_params,yr.uri_headers),delete yr.scheme,delete yr.user,delete yr.host,delete yr.host_type,delete yr.port,delete yr.uri_params,"SIP_URI"===r&&(yr=yr.uri)}catch(t){yr=-1}}(a)),null===e&&(_r=a),e}function X(){var e;return e=Q(),null===e&&(e=Z()),e}function Q(){var e,t;return t=_r,"sips"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"sips"')),null!==e&&(e=function(e,t){yr.scheme=t.toLowerCase()}(t,e)),null===e&&(_r=t),e}function Z(){var e,t;return t=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"sip"')),null!==e&&(e=function(e,t){yr.scheme=t.toLowerCase()}(t,e)),null===e&&(_r=t),e}function ee(){var e,t,r,l,i,o;return l=_r,i=_r,e=te(),null!==e?(o=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=re(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?(64===n.charCodeAt(_r)?(r="@",
_r++):(r=null,0===vr&&s('"@"')),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.user=decodeURIComponent(n.substring(_r-1,e))}(l)),null===e&&(_r=l),e}function te(){var e,t;if(t=g(),null===t&&(t=_(),null===t&&(t=ne())),null!==t)for(e=[];null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(t=ne()));else e=null;return e}function ne(){var e;return 38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"'))))))))),e}function re(){var e,t,r;for(r=_r,e=[],t=g(),null===t&&(t=_(),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","'))))))));null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","'))))))));return null!==e&&(e=function(e){yr.password=n.substring(_r,e)}(r)),null===e&&(_r=r),e}function se(){var e,t,r,l,i;return l=_r,e=le(),null!==e?(i=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=me(),null!==r?t=[t,r]:(t=null,_r=i)):(t=null,_r=i),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e}function le(){var e,t;return t=_r,e=ie(),null===e&&(e=pe(),null===e&&(e=ae())),null!==e&&(e=function(e){return yr.host=n.substring(_r,e).toLowerCase(),yr.host}(t)),null===e&&(_r=t),e}function ie(){var e,t,r,l,i,o;for(l=_r,i=_r,e=[],o=_r,t=oe(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o);null!==t;)e.push(t),o=_r,t=oe(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o);return null!==e?(t=ue(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),r=null!==r?r:"",null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return yr.host_type="domain",n.substring(_r,e)}(l)),null===e&&(_r=l),e}function oe(){var e,t,r,l;if(l=_r,e=f(),null!==e){for(t=[],r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==r;)t.push(r),r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return e}function ue(){var e,t,r,l;if(l=_r,e=o(),null!==e){for(t=[],r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==r;)t.push(r),r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return e}function ae(){var e,t,r,l,i;return l=_r,i=_r,91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null!==e?(t=ce(),null!==t?(93===n.charCodeAt(_r)?(r="]",_r++):(r=null,0===vr&&s('"]"')),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return yr.host_type="IPv6",n.substring(_r,e)}(l)),null===e&&(_r=l),e}function ce(){var e,t,r,l,i,o,u,a,c,h,d,p,f,m,g,T;return m=_r,g=_r,e=he(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?(58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=he(),null!==c?(58===n.charCodeAt(_r)?(h=":",_r++):(h=null,0===vr&&s('":"')),null!==h?(d=he(),null!==d?(58===n.charCodeAt(_r)?(p=":",_r++):(p=null,0===vr&&s('":"')),null!==p?(f=de(),null!==f?e=[e,t,r,l,i,o,u,a,c,h,d,p,f]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=he(),null!==h?(58===n.charCodeAt(_r)?(d=":",_r++):(d=null,0===vr&&s('":"')),null!==d?(p=de(),null!==p?e=[e,t,r,l,i,o,u,a,c,h,d,p]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=de(),null!==h?e=[e,t,r,l,i,o,u,a,c,h]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=de(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=de(),null!==o?e=[e,t,r,l,i,o]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=de(),null!==l?e=[e,t,r,l]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=de(),null!==t?e=[e,t]:(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?e=[e,t]:(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?("::"===n.substr(_r,2)?(t="::",_r+=2):(t=null,0===vr&&s('"::"')),null!==t?(r=he(),null!==r?(58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=he(),null!==c?(58===n.charCodeAt(_r)?(h=":",_r++):(h=null,0===vr&&s('":"')),null!==h?(d=de(),null!==d?e=[e,t,r,l,i,o,u,a,c,h,d]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?("::"===n.substr(_r,2)?(r="::",_r+=2):(r=null,0===vr&&s('"::"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=de(),null!==h?e=[e,t,r,l,i,o,u,a,c,h]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?("::"===n.substr(_r,2)?(l="::",_r+=2):(l=null,0===vr&&s('"::"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=de(),null!==c?e=[e,t,r,l,i,o,u,a,c]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?("::"===n.substr(_r,2)?(i="::",_r+=2):(i=null,0===vr&&s('"::"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=de(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?("::"===n.substr(_r,2)?(o="::",_r+=2):(o=null,0===vr&&s('"::"')),null!==o?(u=de(),null!==u?e=[e,t,r,l,i,o,u]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?(T=_r,58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?o=[o,u]:(o=null,_r=T)):(o=null,_r=T),o=null!==o?o:"",null!==o?("::"===n.substr(_r,2)?(u="::",_r+=2):(u=null,0===vr&&s('"::"')),null!==u?(a=he(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?(T=_r,58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?o=[o,u]:(o=null,_r=T)):(o=null,_r=T),o=null!==o?o:"",null!==o?(T=_r,58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?u=[u,a]:(u=null,_r=T)):(u=null,_r=T),u=null!==u?u:"",null!==u?("::"===n.substr(_r,2)?(a="::",_r+=2):(a=null,0===vr&&s('"::"')),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g))))))))))))))),null!==e&&(e=function(e){return yr.host_type="IPv6",n.substring(_r,e)}(m)),null===e&&(_r=m),e}function he(){var e,t,n,r,s;return s=_r,e=u(),null!==e?(t=u(),t=null!==t?t:"",null!==t?(n=u(),n=null!==n?n:"",null!==n?(r=u(),r=null!==r?r:"",null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function de(){var e,t,r,l;return l=_r,e=he(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(e=pe()),e}function pe(){var e,t,r,l,i,o,u,a,c;return a=_r,c=_r,e=fe(),null!==e?(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null!==t?(r=fe(),null!==r?(46===n.charCodeAt(_r)?(l=".",_r++):(l=null,0===vr&&s('"."')),null!==l?(i=fe(),null!==i?(46===n.charCodeAt(_r)?(o=".",_r++):(o=null,0===vr&&s('"."')),null!==o?(u=fe(),null!==u?e=[e,t,r,l,i,o,u]:(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c),null!==e&&(e=function(e){return yr.host_type="IPv4",n.substring(_r,e)}(a)),null===e&&(_r=a),e}function fe(){var e,t,r,l;return l=_r,"25"===n.substr(_r,2)?(e="25",_r+=2):(e=null,0===vr&&s('"25"')),null!==e?(/^[0-5]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[0-5]")),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,50===n.charCodeAt(_r)?(e="2",_r++):(e=null,0===vr&&s('"2"')),null!==e?(/^[0-4]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[0-4]")),null!==t?(r=i(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,49===n.charCodeAt(_r)?(e="1",_r++):(e=null,0===vr&&s('"1"')),null!==e?(t=i(),null!==t?(r=i(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,/^[1-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[1-9]")),null!==e?(t=i(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null===e&&(e=i())))),e}function me(){var e,t,n,r,s,l,o;return l=_r,o=_r,e=i(),e=null!==e?e:"",null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?(r=i(),r=null!==r?r:"",null!==r?(s=i(),s=null!==s?s:"",null!==s?e=[e,t,n,r,s]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e,t){return t=parseInt(t.join("")),yr.port=t,t}(l,e)),null===e&&(_r=l),e}function ge(){var e,t,r,l;for(e=[],l=_r,59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=Te(),null!==r?t=[t,r]:(t=null,_r=l)):(t=null,_r=l);null!==t;)e.push(t),l=_r,59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=Te(),null!==r?t=[t,r]:(t=null,_r=l)):(t=null,_r=l);return e}function Te(){var e;return e=_e(),null===e&&(e=ve(),null===e&&(e=Ce(),null===e&&(e=Se(),null===e&&(e=Ee(),null===e&&(e=Ae(),null===e&&(e=ye())))))),e}function _e(){var e,t,r,l;return r=_r,l=_r,"transport="===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"transport="')),null!==e?("udp"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"udp"')),null===t&&("tcp"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"tcp"')),null===t&&("sctp"===n.substr(_r,4).toLowerCase()?(t=n.substr(_r,4),_r+=4):(t=null,0===vr&&s('"sctp"')),null===t&&("tls"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"tls"')),null===t&&(t=I())))),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.transport=t.toLowerCase()}(r,e[1])),null===e&&(_r=r),e}function ve(){var e,t,r,l;return r=_r,l=_r,"user="===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"user="')),null!==e?("phone"===n.substr(_r,5).toLowerCase()?(t=n.substr(_r,5),_r+=5):(t=null,0===vr&&s('"phone"')),null===t&&("ip"===n.substr(_r,2).toLowerCase()?(t=n.substr(_r,2),_r+=2):(t=null,0===vr&&s('"ip"')),null===t&&(t=I())),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.user=t.toLowerCase()}(r,e[1])),null===e&&(_r=r),e}function Ce(){var e,t,r,l;return r=_r,l=_r,"method="===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"method="')),null!==e?(t=at(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.method=t}(r,e[1])),null===e&&(_r=r),e}function Se(){var e,t,r,l;return r=_r,l=_r,"ttl="===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"ttl="')),null!==e?(t=Jn(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.ttl=t}(r,e[1])),null===e&&(_r=r),e}function Ee(){var e,t,r,l;return r=_r,l=_r,"maddr="===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"maddr="')),null!==e?(t=le(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.maddr=t}(r,e[1])),null===e&&(_r=r),e}function Ae(){var e,t,r,l,i,o;return l=_r,i=_r,"lr"===n.substr(_r,2).toLowerCase()?(e=n.substr(_r,2),_r+=2):(e=null,0===vr&&s('"lr"')),null!==e?(o=_r,61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=I(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.uri_params||(yr.uri_params={}),yr.uri_params.lr=void 0}(l)),null===e&&(_r=l),e}function ye(){var e,t,r,l,i,o;return l=_r,i=_r,e=Re(),null!==e?(o=_r,61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=be(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t,n){yr.uri_params||(yr.uri_params={}),n="undefined"==typeof n?void 0:n[1],yr.uri_params[t.toLowerCase()]=n}(l,e[0],e[1])),null===e&&(_r=l),e}function Re(){var e,t,n;if(n=_r,t=Ie(),null!==t)for(e=[];null!==t;)e.push(t),t=Ie();else e=null;return null!==e&&(e=function(e,t){return t.join("")}(n,e)),null===e&&(_r=n),e}function be(){var e,t,n;if(n=_r,t=Ie(),null!==t)for(e=[];null!==t;)e.push(t),t=Ie();else e=null;return null!==e&&(e=function(e,t){return t.join("")}(n,e)),null===e&&(_r=n),e}function Ie(){var e;return e=we(),null===e&&(e=g(),null===e&&(e=_())),e}function we(){var e;return 91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')))))))),e}function Ne(){var e,t,r,l,i,o,u;if(o=_r,63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null!==e)if(t=De(),null!==t){for(r=[],u=_r,38===n.charCodeAt(_r)?(l="&",_r++):(l=null,0===vr&&s('"&"')),null!==l?(i=De(),null!==i?l=[l,i]:(l=null,_r=u)):(l=null,_r=u);null!==l;)r.push(l),u=_r,38===n.charCodeAt(_r)?(l="&",_r++):(l=null,0===vr&&s('"&"')),null!==l?(i=De(),null!==i?l=[l,i]:(l=null,_r=u)):(l=null,_r=u);null!==r?e=[e,t,r]:(e=null,_r=o)}else e=null,_r=o;else e=null,_r=o;return e}function De(){var e,t,r,l,i;return l=_r,i=_r,e=Oe(),null!==e?(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=xe(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t,n){t=t.join("").toLowerCase(),n=n.join(""),yr.uri_headers||(yr.uri_headers={}),yr.uri_headers[t]?yr.uri_headers[t].push(n):yr.uri_headers[t]=[n]}(l,e[0],e[2])),null===e&&(_r=l),e}function Oe(){var e,t;if(t=Ue(),null===t&&(t=g(),null===t&&(t=_())),null!==t)for(e=[];null!==t;)e.push(t),t=Ue(),null===t&&(t=g(),null===t&&(t=_()));else e=null;return e}function xe(){var e,t;for(e=[],t=Ue(),null===t&&(t=g(),null===t&&(t=_()));null!==t;)e.push(t),t=Ue(),null===t&&(t=g(),null===t&&(t=_()));return e}function Ue(){var e;return 91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')))))))),e}function Me(){var e;return e=ct(),null===e&&(e=Pe()),e}function Pe(){var e,t,n,r,s,l;return l=_r,e=at(),null!==e?(t=d(),null!==t?(n=qe(),null!==n?(r=d(),null!==r?(s=Ze(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function qe(){var e;return e=$(),null===e&&(e=Le()),e}function Le(){var e,t,r,l;return l=_r,e=Je(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=ke(),null===r&&(r=Ge()),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function ke(){var e,t,r,l,i;return l=_r,e=He(),null===e&&(e=Fe()),null!==e?(i=_r,63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null!==t?(r=Qe(),null!==r?t=[t,r]:(t=null,_r=i)):(t=null,_r=i),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e}function He(){var e,t,r,l;return l=_r,"//"===n.substr(_r,2)?(e="//",_r+=2):(e=null,0===vr&&s('"//"')),null!==e?(t=Ke(),null!==t?(r=Fe(),r=null!==r?r:"",null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Fe(){var e,t,r;return r=_r,47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null!==e?(t=Be(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Ge(){var e,t,n,r;if(r=_r,e=We(),null!==e){for(t=[],n=je();null!==n;)t.push(n),n=je();null!==t?e=[e,t]:(e=null,_r=r)}else e=null,_r=r;return e}function je(){var e;return e=m(),null===e&&(e=g(),null===e&&(e=_())),e}function We(){var e;return e=g(),null===e&&(e=_(),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')))))))))))),e}function Be(){var e,t,r,l,i,o;if(i=_r,e=ze(),null!==e){for(t=[],o=_r,47===n.charCodeAt(_r)?(r="/",_r++):(r=null,0===vr&&s('"/"')),null!==r?(l=ze(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,47===n.charCodeAt(_r)?(r="/",_r++):(r=null,0===vr&&s('"/"')),null!==r?(l=ze(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function ze(){var e,t,r,l,i,o;for(i=_r,e=[],t=Ye();null!==t;)e.push(t),t=Ye();if(null!==e){for(t=[],o=_r,59===n.charCodeAt(_r)?(r=";",_r++):(r=null,0===vr&&s('";"')),null!==r?(l=Ve(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,59===n.charCodeAt(_r)?(r=";",_r++):(r=null,0===vr&&s('";"')),null!==r?(l=Ve(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function Ve(){var e,t;for(e=[],t=Ye();null!==t;)e.push(t),t=Ye();return e}function Ye(){var e;return e=g(),null===e&&(e=_(),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')))))))))),e}function Je(){var e,t,r,l,u;if(l=_r,u=_r,e=o(),null!==e){for(t=[],r=o(),null===r&&(r=i(),null===r&&(43===n.charCodeAt(_r)?(r="+",_r++):(r=null,0===vr&&s('"+"')),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."'))))));null!==r;)t.push(r),r=o(),null===r&&(r=i(),null===r&&(43===n.charCodeAt(_r)?(r="+",_r++):(r=null,0===vr&&s('"+"')),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."'))))));null!==t?e=[e,t]:(e=null,_r=u)}else e=null,_r=u;return null!==e&&(e=function(e){yr.scheme=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function Ke(){var e;return e=$e(),null===e&&(e=Xe()),e}function $e(){var e,t,r,l;return r=_r,l=_r,e=ee(),null!==e?(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e=null!==e?e:"",null!==e?(t=se(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e=null!==e?e:""}function Xe(){var e,t;if(t=g(),null===t&&(t=_(),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null===t&&(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"'))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null===t&&(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')))))))))));else e=null;return e}function Qe(){var e,t;for(e=[],t=je();null!==t;)e.push(t),t=je();return e}function Ze(){var e,t,r,l,o,u,a,c;if(a=_r,c=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null!==e)if(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null!==t){if(l=i(),null!==l)for(r=[];null!==l;)r.push(l),l=i();else r=null;if(null!==r)if(46===n.charCodeAt(_r)?(l=".",_r++):(l=null,0===vr&&s('"."')),null!==l){if(u=i(),null!==u)for(o=[];null!==u;)o.push(u),u=i();else o=null;null!==o?e=[e,t,r,l,o]:(e=null,_r=c)}else e=null,_r=c;else e=null,_r=c}else e=null,_r=c;else e=null,_r=c;return null!==e&&(e=function(e){yr.sip_version=n.substring(_r,e)}(a)),null===e&&(_r=a),e}function et(){var e;return"INVITE"===n.substr(_r,6)?(e="INVITE",_r+=6):(e=null,0===vr&&s('"INVITE"')),e}function tt(){var e;return"ACK"===n.substr(_r,3)?(e="ACK",_r+=3):(e=null,0===vr&&s('"ACK"')),e}function nt(){var e;return"OPTIONS"===n.substr(_r,7)?(e="OPTIONS",_r+=7):(e=null,0===vr&&s('"OPTIONS"')),e}function rt(){var e;return"BYE"===n.substr(_r,3)?(e="BYE",_r+=3):(e=null,0===vr&&s('"BYE"')),e}function st(){var e;return"CANCEL"===n.substr(_r,6)?(e="CANCEL",_r+=6):(e=null,0===vr&&s('"CANCEL"')),e}function lt(){var e;return"REGISTER"===n.substr(_r,8)?(e="REGISTER",_r+=8):(e=null,0===vr&&s('"REGISTER"')),e}function it(){var e;return"SUBSCRIBE"===n.substr(_r,9)?(e="SUBSCRIBE",_r+=9):(e=null,0===vr&&s('"SUBSCRIBE"')),e}function ot(){var e;return"NOTIFY"===n.substr(_r,6)?(e="NOTIFY",_r+=6):(e=null,0===vr&&s('"NOTIFY"')),e}function ut(){var e;return"REFER"===n.substr(_r,5)?(e="REFER",_r+=5):(e=null,0===vr&&s('"REFER"')),e}function at(){var e,t;return t=_r,e=et(),null===e&&(e=tt(),null===e&&(e=nt(),null===e&&(e=rt(),null===e&&(e=st(),null===e&&(e=lt(),null===e&&(e=it(),null===e&&(e=ot(),null===e&&(e=ut(),null===e&&(e=I()))))))))),null!==e&&(e=function(e){return yr.method=n.substring(_r,e),yr.method}(t)),null===e&&(_r=t),e}function ct(){var e,t,n,r,s,l;return l=_r,e=Ze(),null!==e?(t=d(),null!==t?(n=ht(),null!==n?(r=d(),null!==r?(s=pt(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function ht(){var e,t;return t=_r,e=dt(),null!==e&&(e=function(e,t){yr.status_code=parseInt(t.join(""))}(t,e)),null===e&&(_r=t),e}function dt(){var e,t,n,r;return r=_r,e=i(),null!==e?(t=i(),null!==t?(n=i(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function pt(){var e,t,r;for(r=_r,e=[],t=m(),null===t&&(t=g(),null===t&&(t=_(),null===t&&(t=y(),null===t&&(t=R(),null===t&&(t=d(),null===t&&(t=p()))))));null!==t;)e.push(t),t=m(),null===t&&(t=g(),null===t&&(t=_(),null===t&&(t=y(),null===t&&(t=R(),null===t&&(t=d(),null===t&&(t=p()))))));return null!==e&&(e=function(e){yr.reason_phrase=n.substring(_r,e)}(r)),null===e&&(_r=r),e}function ft(){var e,t,n,r,s,l;if(s=_r,e=Yt(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Yt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Yt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function mt(){var e,t,r,l,i,o;return l=_r,i=_r,e=D(),null!==e?(o=_r,64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?(r=D(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function gt(){var e,t,n,r,s,l,i;if(s=_r,e=O(),null===e)if(l=_r,e=Tt(),null!==e){for(t=[],i=_r,n=k(),null!==n?(r=Tt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=k(),null!==n?(r=Tt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,
_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t,n;for(n=yr.multi_header.length,t=0;n>t;t++)if(null===yr.multi_header[t].parsed){yr=null;break}yr=null!==yr?yr.multi_header:-1}(s)),null===e&&(_r=s),e}function Tt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Ct(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Ct(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t;yr.multi_header||(yr.multi_header=[]);try{t=new Ar(yr.uri,yr.display_name,yr.params),delete yr.uri,delete yr.display_name,delete yr.params}catch(n){t=null}yr.multi_header.push({possition:_r,offset:e,parsed:t})}(s)),null===e&&(_r=s),e}function _t(){var e,t,n,r,s;return s=_r,e=vt(),e=null!==e?e:"",null!==e?(t=L(),null!==t?(n=$(),null!==n?(r=q(),null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function vt(){var e,t,r,s,l,i,o;if(l=_r,i=_r,e=I(),null!==e){for(t=[],o=_r,r=v(),null!==r?(s=I(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,r=v(),null!==r?(s=I(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return null===e&&(e=z()),null!==e&&(e=function(e,t){t=n.substring(_r,e).trim(),'"'===t[0]&&(t=t.substring(1,t.length-1)),yr.display_name=t}(l,e)),null===e&&(_r=l),e}function Ct(){var e;return e=St(),null===e&&(e=Et(),null===e&&(e=Rt())),e}function St(){var e,t,r,l,i;return l=_r,i=_r,"q"===n.substr(_r,1).toLowerCase()?(e=n.substr(_r,1),_r++):(e=null,0===vr&&s('"q"')),null!==e?(t=U(),null!==t?(r=yt(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.q=t}(l,e[2])),null===e&&(_r=l),e}function Et(){var e,t,r,l,i;return l=_r,i=_r,"expires"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"expires"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.expires=t}(l,e[2])),null===e&&(_r=l),e}function At(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){return parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function yt(){var e,t,r,l,o,u,a,c;return u=_r,a=_r,48===n.charCodeAt(_r)?(e="0",_r++):(e=null,0===vr&&s('"0"')),null!==e?(c=_r,46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null!==t?(r=i(),r=null!==r?r:"",null!==r?(l=i(),l=null!==l?l:"",null!==l?(o=i(),o=null!==o?o:"",null!==o?t=[t,r,l,o]:(t=null,_r=c)):(t=null,_r=c)):(t=null,_r=c)):(t=null,_r=c),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=a)):(e=null,_r=a),null!==e&&(e=function(e){return parseFloat(n.substring(_r,e))}(u)),null===e&&(_r=u),e}function Rt(){var e,t,n,r,s,l;return r=_r,s=_r,e=I(),null!==e?(l=_r,t=U(),null!==t?(n=bt(),null!==n?t=[t,n]:(t=null,_r=l)):(t=null,_r=l),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=s)):(e=null,_r=s),null!==e&&(e=function(e,t,n){yr.params||(yr.params={}),n="undefined"==typeof n?void 0:n[1],yr.params[t.toLowerCase()]=n}(r,e[0],e[1])),null===e&&(_r=r),e}function bt(){var e;return e=I(),null===e&&(e=le(),null===e&&(e=z())),e}function It(){var e,t,n,r,s,l;if(s=_r,e=wt(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Nt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Nt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function wt(){var e;return"render"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"render"')),null===e&&("session"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"session"')),null===e&&("icon"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"icon"')),null===e&&("alert"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"alert"')),null===e&&(e=I())))),e}function Nt(){var e;return e=Dt(),null===e&&(e=Rt()),e}function Dt(){var e,t,r,l;return l=_r,"handling"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"handling"')),null!==e?(t=U(),null!==t?("optional"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"optional"')),null===r&&("required"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"required"')),null===r&&(r=I())),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Ot(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function xt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function Ut(){var e,t;return t=_r,e=Mt(),null!==e&&(e=function(e){yr=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function Mt(){var e,t,n,r,s,l,i,o;if(i=_r,e=Pt(),null!==e)if(t=x(),null!==t)if(n=Ft(),null!==n){for(r=[],o=_r,s=H(),null!==s?(l=Gt(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=H(),null!==s?(l=Gt(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function Pt(){var e;return e=qt(),null===e&&(e=Lt()),e}function qt(){var e;return"text"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"text"')),null===e&&("image"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"image"')),null===e&&("audio"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"audio"')),null===e&&("video"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"video"')),null===e&&("application"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"application"')),null===e&&(e=kt()))))),e}function Lt(){var e;return"message"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"message"')),null===e&&("multipart"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"multipart"')),null===e&&(e=kt())),e}function kt(){var e;return e=I(),null===e&&(e=Ht()),e}function Ht(){var e,t,r;return r=_r,"x-"===n.substr(_r,2).toLowerCase()?(e=n.substr(_r,2),_r+=2):(e=null,0===vr&&s('"x-"')),null!==e?(t=I(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Ft(){var e;return e=kt(),null===e&&(e=I()),e}function Gt(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=U(),null!==t?(n=jt(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function jt(){var e;return e=I(),null===e&&(e=z()),e}function Wt(){var e,t,n,r;return r=_r,e=Bt(),null!==e?(t=v(),null!==t?(n=at(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function Bt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr.value=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function zt(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr=t}(t,e)),null===e&&(_r=t),e}function Vt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=Yt(),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e,t){yr.event=t.join("").toLowerCase()}(s,e[0])),null===e&&(_r=s),e}function Yt(){var e,t,r,l,i,o;if(i=_r,e=w(),null!==e){for(t=[],o=_r,46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?(l=w(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?(l=w(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function Jt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Kt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Kt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t=yr.tag;try{yr=new Ar(yr.uri,yr.display_name,yr.params),t&&yr.setParam("tag",t)}catch(n){yr=-1}}(s)),null===e&&(_r=s),e}function Kt(){var e;return e=$t(),null===e&&(e=Rt()),e}function $t(){var e,t,r,l,i;return l=_r,i=_r,"tag"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.tag=t}(l,e[2])),null===e&&(_r=l),e}function Xt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function Qt(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr=t}(t,e)),null===e&&(_r=t),e}function Zt(){var e,t,n,r,s,l,i,o,u,a;for(o=_r,u=_r,e=[],t=vt();null!==t;)e.push(t),t=vt();if(null!==e)if(t=L(),null!==t)if(n=$(),null!==n)if(r=q(),null!==r){for(s=[],a=_r,l=H(),null!==l?(i=Rt(),null!==i?l=[l,i]:(l=null,_r=a)):(l=null,_r=a);null!==l;)s.push(l),a=_r,l=H(),null!==l?(i=Rt(),null!==i?l=[l,i]:(l=null,_r=a)):(l=null,_r=a);null!==s?e=[e,t,n,r,s]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;return null!==e&&(e=function(e){try{yr=new Ar(yr.uri,yr.display_name,yr.params)}catch(t){yr=-1}}(o)),null===e&&(_r=o),e}function en(){var e;return e=tn()}function tn(){var e,t,r,l,i,o,u,a;if(u=_r,"digest"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"Digest"')),null!==e)if(t=v(),null!==t)if(r=sn(),null!==r){for(l=[],a=_r,i=k(),null!==i?(o=sn(),null!==o?i=[i,o]:(i=null,_r=a)):(i=null,_r=a);null!==i;)l.push(i),a=_r,i=k(),null!==i?(o=sn(),null!==o?i=[i,o]:(i=null,_r=a)):(i=null,_r=a);null!==l?e=[e,t,r,l]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;return null===e&&(e=nn()),e}function nn(){var e,t,n,r,s,l,i,o;if(i=_r,e=I(),null!==e)if(t=v(),null!==t)if(n=rn(),null!==n){for(r=[],o=_r,s=k(),null!==s?(l=rn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=k(),null!==s?(l=rn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function rn(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=U(),null!==t?(n=I(),null===n&&(n=z()),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function sn(){var e;return e=ln(),null===e&&(e=un(),null===e&&(e=cn(),null===e&&(e=dn(),null===e&&(e=pn(),null===e&&(e=fn(),null===e&&(e=mn(),null===e&&(e=rn()))))))),e}function ln(){var e,t,r,l;return l=_r,"realm"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"realm"')),null!==e?(t=U(),null!==t?(r=on(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function on(){var e,t;return t=_r,e=V(),null!==e&&(e=function(e,t){yr.realm=t}(t,e)),null===e&&(_r=t),e}function un(){var e,t,r,l,i,o,u,a,c;if(a=_r,"domain"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"domain"')),null!==e)if(t=U(),null!==t)if(r=G(),null!==r)if(l=an(),null!==l){if(i=[],c=_r,u=d(),null!==u)for(o=[];null!==u;)o.push(u),u=d();else o=null;for(null!==o?(u=an(),null!==u?o=[o,u]:(o=null,_r=c)):(o=null,_r=c);null!==o;){if(i.push(o),c=_r,u=d(),null!==u)for(o=[];null!==u;)o.push(u),u=d();else o=null;null!==o?(u=an(),null!==u?o=[o,u]:(o=null,_r=c)):(o=null,_r=c)}null!==i?(o=j(),null!==o?e=[e,t,r,l,i,o]:(e=null,_r=a)):(e=null,_r=a)}else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;return e}function an(){var e;return e=Le(),null===e&&(e=Fe()),e}function cn(){var e,t,r,l;return l=_r,"nonce"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"nonce"')),null!==e?(t=U(),null!==t?(r=hn(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function hn(){var e,t;return t=_r,e=V(),null!==e&&(e=function(e,t){yr.nonce=t}(t,e)),null===e&&(_r=t),e}function dn(){var e,t,r,l,i;return l=_r,i=_r,"opaque"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"opaque"')),null!==e?(t=U(),null!==t?(r=V(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.opaque=t}(l,e[2])),null===e&&(_r=l),e}function pn(){var e,t,r,l,i;return l=_r,"stale"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"stale"')),null!==e?(t=U(),null!==t?(i=_r,"true"===n.substr(_r,4).toLowerCase()?(r=n.substr(_r,4),_r+=4):(r=null,0===vr&&s('"true"')),null!==r&&(r=function(e){yr.stale=!0}(i)),null===r&&(_r=i),null===r&&(i=_r,"false"===n.substr(_r,5).toLowerCase()?(r=n.substr(_r,5),_r+=5):(r=null,0===vr&&s('"false"')),null!==r&&(r=function(e){yr.stale=!1}(i)),null===r&&(_r=i)),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function fn(){var e,t,r,l,i;return l=_r,i=_r,"algorithm"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"algorithm"')),null!==e?(t=U(),null!==t?("md5"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"MD5"')),null===r&&("md5-sess"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"MD5-sess"')),null===r&&(r=I())),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.algorithm=t.toUpperCase()}(l,e[2])),null===e&&(_r=l),e}function mn(){var e,t,r,l,i,o,u,a,c,h;if(a=_r,"qop"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"qop"')),null!==e)if(t=U(),null!==t)if(r=G(),null!==r){if(c=_r,l=gn(),null!==l){for(i=[],h=_r,44===n.charCodeAt(_r)?(o=",",_r++):(o=null,0===vr&&s('","')),null!==o?(u=gn(),null!==u?o=[o,u]:(o=null,_r=h)):(o=null,_r=h);null!==o;)i.push(o),h=_r,44===n.charCodeAt(_r)?(o=",",_r++):(o=null,0===vr&&s('","')),null!==o?(u=gn(),null!==u?o=[o,u]:(o=null,_r=h)):(o=null,_r=h);null!==i?l=[l,i]:(l=null,_r=c)}else l=null,_r=c;null!==l?(i=j(),null!==i?e=[e,t,r,l,i]:(e=null,_r=a)):(e=null,_r=a)}else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;return e}function gn(){var e,t;return t=_r,"auth-int"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"auth-int"')),null===e&&("auth"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"auth"')),null===e&&(e=I())),null!==e&&(e=function(e,t){yr.qop||(yr.qop=[]),yr.qop.push(t.toLowerCase())}(t,e)),null===e&&(_r=t),e}function Tn(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function _n(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=vn(),null!==e){for(t=[],i=_r,n=k(),null!==n?(r=vn(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=k(),null!==n?(r=vn(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t,n;for(n=yr.multi_header.length,t=0;n>t;t++)if(null===yr.multi_header[t].parsed){yr=null;break}yr=null!==yr?yr.multi_header:-1}(s)),null===e&&(_r=s),e}function vn(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=_t(),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t;yr.multi_header||(yr.multi_header=[]);try{t=new Ar(yr.uri,yr.display_name,yr.params),delete yr.uri,delete yr.display_name,delete yr.params}catch(n){t=null}yr.multi_header.push({possition:_r,offset:e,parsed:t})}(s)),null===e&&(_r=s),e}function Cn(){var e,t,r,l,i,o,u;if(i=_r,o=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null===e&&(e=I()),null!==e){for(t=[],u=_r,r=H(),null!==r?(l=Sn(),null!==l?r=[r,l]:(r=null,_r=u)):(r=null,_r=u);null!==r;)t.push(r),u=_r,r=H(),null!==r?(l=Sn(),null!==l?r=[r,l]:(r=null,_r=u)):(r=null,_r=u);null!==t?e=[e,t]:(e=null,_r=o)}else e=null,_r=o;return null!==e&&(e=function(e,t){if(yr.protocol=t.toLowerCase(),yr.params||(yr.params={}),yr.params.text&&'"'===yr.params.text[0]){var n=yr.params.text;yr.text=n.substring(1,n.length-1),delete yr.params.text}}(i,e[0])),null===e&&(_r=i),e}function Sn(){var e;return e=En(),null===e&&(e=Rt()),e}function En(){var e,t,r,l,o,u;if(o=_r,u=_r,"cause"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"cause"')),null!==e)if(t=U(),null!==t){if(l=i(),null!==l)for(r=[];null!==l;)r.push(l),l=i();else r=null;null!==r?e=[e,t,r]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;return null!==e&&(e=function(e,t){yr.cause=parseInt(t.join(""))}(o,e[2])),null===e&&(_r=o),e}function An(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function yn(){var e,t,n,r,s,l;if(s=_r,e=Rn(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Rn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Rn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Rn(){var e,t,n,r,s,l;if(s=_r,e=_t(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function bn(){var e,t,n,r,s,l;if(s=_r,e=In(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=wn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=wn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function In(){var e,t;return t=_r,"active"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"active"')),null===e&&("pending"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"pending"')),null===e&&("terminated"===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"terminated"')),null===e&&(e=I()))),null!==e&&(e=function(e){yr.state=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function wn(){var e,t,r,l,i;return l=_r,i=_r,"reason"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"reason"')),null!==e?(t=U(),null!==t?(r=Nn(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.reason=t)}(l,e[2])),null===e&&(_r=l),null===e&&(l=_r,i=_r,"expires"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"expires"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.expires=t)}(l,e[2])),null===e&&(_r=l),null===e&&(l=_r,i=_r,"retry_after"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"retry_after"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.retry_after=t)}(l,e[2])),null===e&&(_r=l),null===e&&(e=Rt()))),e}function Nn(){var e;return"deactivated"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"deactivated"')),null===e&&("probation"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"probation"')),null===e&&("rejected"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"rejected"')),null===e&&("timeout"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"timeout"')),null===e&&("giveup"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"giveup"')),null===e&&("noresource"===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"noresource"')),null===e&&("invariant"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"invariant"')),null===e&&(e=I()))))))),e}function Dn(){var e;return e=E(),e=null!==e?e:""}function On(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e=null!==e?e:""}function xn(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Un(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Un(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t=yr.tag;try{yr=new Ar(yr.uri,yr.display_name,yr.params),t&&yr.setParam("tag",t)}catch(n){yr=-1}}(s)),null===e&&(_r=s),e}function Un(){var e;return e=$t(),null===e&&(e=Rt()),e}function Mn(){var e,t,n,r,s,l;if(s=_r,e=Pn(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Pn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Pn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Pn(){var e,t,n,r,s,l,i,o;if(i=_r,e=jn(),null!==e)if(t=v(),null!==t)if(n=zn(),null!==n){for(r=[],o=_r,s=H(),null!==s?(l=qn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=H(),null!==s?(l=qn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function qn(){var e;return e=Ln(),null===e&&(e=kn(),null===e&&(e=Hn(),null===e&&(e=Fn(),null===e&&(e=Gn(),null===e&&(e=Rt()))))),e}function Ln(){var e,t,r,l,i;return l=_r,i=_r,"ttl"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"ttl"')),null!==e?(t=U(),null!==t?(r=Jn(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.ttl=t}(l,e[2])),null===e&&(_r=l),e}function kn(){var e,t,r,l,i;return l=_r,i=_r,"maddr"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"maddr"')),null!==e?(t=U(),null!==t?(r=le(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.maddr=t}(l,e[2])),null===e&&(_r=l),e}function Hn(){var e,t,r,l,i;return l=_r,i=_r,"received"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"received"')),null!==e?(t=U(),null!==t?(r=pe(),null===r&&(r=ce()),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.received=t}(l,e[2])),null===e&&(_r=l),e}function Fn(){var e,t,r,l,i;return l=_r,i=_r,"branch"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"branch"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.branch=t}(l,e[2])),null===e&&(_r=l),e}function Gn(){var e,t,r,l,o,u,a;if(o=_r,u=_r,"rport"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"rport"')),null!==e){if(a=_r,t=U(),null!==t){for(r=[],l=i();null!==l;)r.push(l),l=i();null!==r?t=[t,r]:(t=null,_r=a)}else t=null,_r=a;t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=u)}else e=null,_r=u;return null!==e&&(e=function(e){"undefined"!=typeof response_port&&(yr.rport=response_port.join(""))}(o)),null===e&&(_r=o),e}function jn(){var e,t,n,r,s,l;return l=_r,e=Wn(),null!==e?(t=x(),null!==t?(n=I(),null!==n?(r=x(),null!==r?(s=Bn(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Wn(){var e,t;return t=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null===e&&(e=I()),null!==e&&(e=function(e,t){yr.protocol=t}(t,e)),null===e&&(_r=t),e}function Bn(){var e,t;return t=_r,"udp"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"UDP"')),null===e&&("tcp"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"TCP"')),null===e&&("tls"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"TLS"')),null===e&&("sctp"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"SCTP"')),null===e&&(e=I())))),null!==e&&(e=function(e,t){yr.transport=t}(t,e)),null===e&&(_r=t),e}function zn(){var e,t,n,r,s;return r=_r,e=Vn(),null!==e?(s=_r,t=F(),null!==t?(n=Yn(),null!==n?t=[t,n]:(t=null,_r=s)):(t=null,_r=s),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Vn(){var e,t;return t=_r,e=pe(),null===e&&(e=ae(),null===e&&(e=ie())),null!==e&&(e=function(e){yr.host=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function Yn(){var e,t,n,r,s,l,o;return l=_r,o=_r,e=i(),e=null!==e?e:"",null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?(r=i(),r=null!==r?r:"",null!==r?(s=i(),s=null!==s?s:"",null!==s?e=[e,t,n,r,s]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e,t){yr.port=parseInt(t.join(""))}(l,e)),null===e&&(_r=l),e}function Jn(){var e,t,n,r,s;return r=_r,s=_r,e=i(),null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?e=[e,t,n]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),null!==e&&(e=function(e,t){return parseInt(t.join(""))}(r,e)),null===e&&(_r=r),e}function Kn(){var e;return e=tn()}function $n(){var e,t,n,r,s,l;if(s=_r,e=Xn(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Qn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Qn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Xn(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr.expires=t}(t,e)),null===e&&(_r=t),e}function Qn(){var e;return e=Zn(),null===e&&(e=Rt()),e}function Zn(){var e,t,r,l,i;return l=_r,i=_r,"refresher"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"refresher"')),null!==e?(t=U(),null!==t?("uac"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"uac"')),null===r&&("uas"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"uas"'))),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.refresher=t.toLowerCase()}(l,e[2])),null===e&&(_r=l),e}function er(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=S(),null!==t?(n=tr(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function tr(){var e,t;for(e=[],t=A(),null===t&&(t=R(),null===t&&(t=v()));null!==t;)e.push(t),t=A(),null===t&&(t=R(),null===t&&(t=v()));return e}function nr(){var e,t;for(e=[],t=c();null!==t;)e.push(t),t=c();return e}function rr(){var e,t,r;return r=_r,"uuid:"===n.substr(_r,5)?(e="uuid:",_r+=5):(e=null,0===vr&&s('"uuid:"')),null!==e?(t=sr(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function sr(){var e,t,r,l,i,o,u,a,c,h,d;return h=_r,d=_r,e=ir(),null!==e?(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null!==t?(r=lr(),null!==r?(45===n.charCodeAt(_r)?(l="-",_r++):(l=null,0===vr&&s('"-"')),null!==l?(i=lr(),null!==i?(45===n.charCodeAt(_r)?(o="-",_r++):(o=null,0===vr&&s('"-"')),null!==o?(u=lr(),null!==u?(45===n.charCodeAt(_r)?(a="-",_r++):(a=null,0===vr&&s('"-"')),null!==a?(c=or(),null!==c?e=[e,t,r,l,i,o,u,a,c]:(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d),null!==e&&(e=function(e,t){yr=n.substring(_r+5,e)}(h,e[0])),null===e&&(_r=h),e}function lr(){var e,t,n,r,s;return s=_r,e=u(),null!==e?(t=u(),null!==t?(n=u(),null!==n?(r=u(),null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function ir(){var e,t,n;return n=_r,e=lr(),null!==e?(t=lr(),null!==t?e=[e,t]:(e=null,_r=n)):(e=null,_r=n),e}function or(){var e,t,n,r;return r=_r,e=lr(),null!==e?(t=lr(),null!==t?(n=lr(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function ur(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){try{yr=new Ar(yr.uri,yr.display_name,yr.params)}catch(t){yr=-1}}(s)),null===e&&(_r=s),e}function ar(){var e,t,n,r,s,l;if(s=_r,e=cr(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=hr(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=hr(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function cr(){var e,t,r,l,i,o;return l=_r,i=_r,e=D(),null!==e?(o=_r,64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?(r=D(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.call_id=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function hr(){var e;return e=dr(),null===e&&(e=pr(),null===e&&(e=fr(),null===e&&(e=Rt()))),e}function dr(){var e,t,r,l,i;return l=_r,i=_r,"to-tag"===n.substr(_r,6)?(e="to-tag",_r+=6):(e=null,0===vr&&s('"to-tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.to_tag=t}(l,e[2])),null===e&&(_r=l),e}function pr(){var e,t,r,l,i;return l=_r,i=_r,"from-tag"===n.substr(_r,8)?(e="from-tag",_r+=8):(e=null,0===vr&&s('"from-tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.from_tag=t}(l,e[2])),null===e&&(_r=l),e}function fr(){var e,t;return t=_r,"early-only"===n.substr(_r,10)?(e="early-only",_r+=10):(e=null,0===vr&&s('"early-only"')),null!==e&&(e=function(e){yr.early_only=!0}(t)),null===e&&(_r=t),e}function mr(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}function gr(){for(var e=1,t=1,r=!1,s=0;s<Math.max(_r,Cr);s++){var l=n.charAt(s);"\n"===l?(r||e++,t=1,r=!1):"\r"===l||"\u2028"===l||"\u2029"===l?(e++,t=1,r=!0):(t++,r=!1)}return{line:e,column:t}}var Tr={CRLF:l,DIGIT:i,ALPHA:o,HEXDIG:u,WSP:a,OCTET:c,DQUOTE:h,SP:d,HTAB:p,alphanum:f,reserved:m,unreserved:g,mark:T,escaped:_,LWS:v,SWS:C,HCOLON:S,TEXT_UTF8_TRIM:E,TEXT_UTF8char:A,UTF8_NONASCII:y,UTF8_CONT:R,LHEX:b,token:I,token_nodot:w,separators:N,word:D,STAR:O,SLASH:x,EQUAL:U,LPAREN:M,RPAREN:P,RAQUOT:q,LAQUOT:L,COMMA:k,SEMI:H,COLON:F,LDQUOT:G,RDQUOT:j,comment:W,ctext:B,quoted_string:z,quoted_string_clean:V,qdtext:Y,quoted_pair:J,SIP_URI_noparams:K,SIP_URI:$,uri_scheme:X,uri_scheme_sips:Q,uri_scheme_sip:Z,userinfo:ee,user:te,user_unreserved:ne,password:re,hostport:se,host:le,hostname:ie,domainlabel:oe,toplabel:ue,IPv6reference:ae,IPv6address:ce,h16:he,ls32:de,IPv4address:pe,dec_octet:fe,port:me,uri_parameters:ge,uri_parameter:Te,transport_param:_e,user_param:ve,method_param:Ce,ttl_param:Se,maddr_param:Ee,lr_param:Ae,other_param:ye,pname:Re,pvalue:be,paramchar:Ie,param_unreserved:we,headers:Ne,header:De,hname:Oe,hvalue:xe,hnv_unreserved:Ue,Request_Response:Me,Request_Line:Pe,Request_URI:qe,absoluteURI:Le,hier_part:ke,net_path:He,abs_path:Fe,opaque_part:Ge,uric:je,uric_no_slash:We,path_segments:Be,segment:ze,param:Ve,pchar:Ye,scheme:Je,authority:Ke,srvr:$e,reg_name:Xe,query:Qe,SIP_Version:Ze,INVITEm:et,ACKm:tt,OPTIONSm:nt,BYEm:rt,CANCELm:st,REGISTERm:lt,SUBSCRIBEm:it,NOTIFYm:ot,REFERm:ut,Method:at,Status_Line:ct,Status_Code:ht,extension_code:dt,Reason_Phrase:pt,
Allow_Events:ft,Call_ID:mt,Contact:gt,contact_param:Tt,name_addr:_t,display_name:vt,contact_params:Ct,c_p_q:St,c_p_expires:Et,delta_seconds:At,qvalue:yt,generic_param:Rt,gen_value:bt,Content_Disposition:It,disp_type:wt,disp_param:Nt,handling_param:Dt,Content_Encoding:Ot,Content_Length:xt,Content_Type:Ut,media_type:Mt,m_type:Pt,discrete_type:qt,composite_type:Lt,extension_token:kt,x_token:Ht,m_subtype:Ft,m_parameter:Gt,m_value:jt,CSeq:Wt,CSeq_value:Bt,Expires:zt,Event:Vt,event_type:Yt,From:Jt,from_param:Kt,tag_param:$t,Max_Forwards:Xt,Min_Expires:Qt,Name_Addr_Header:Zt,Proxy_Authenticate:en,challenge:tn,other_challenge:nn,auth_param:rn,digest_cln:sn,realm:ln,realm_value:on,domain:un,URI:an,nonce:cn,nonce_value:hn,opaque:dn,stale:pn,algorithm:fn,qop_options:mn,qop_value:gn,Proxy_Require:Tn,Record_Route:_n,rec_route:vn,Reason:Cn,reason_param:Sn,reason_cause:En,Require:An,Route:yn,route_param:Rn,Subscription_State:bn,substate_value:In,subexp_params:wn,event_reason_value:Nn,Subject:Dn,Supported:On,To:xn,to_param:Un,Via:Mn,via_param:Pn,via_params:qn,via_ttl:Ln,via_maddr:kn,via_received:Hn,via_branch:Fn,response_port:Gn,sent_protocol:jn,protocol_name:Wn,transport:Bn,sent_by:zn,via_host:Vn,via_port:Yn,ttl:Jn,WWW_Authenticate:Kn,Session_Expires:$n,s_e_expires:Xn,s_e_params:Qn,s_e_refresher:Zn,extension_header:er,header_value:tr,message_body:nr,uuid_URI:rr,uuid:sr,hex4:lr,hex8:ir,hex12:or,Refer_To:ur,Replaces:ar,call_id:cr,replaces_param:hr,to_tag:dr,from_tag:pr,early_flag:fr};if(void 0!==r){if(void 0===Tr[r])throw new Error("Invalid rule name: "+t(r)+".")}else r="CRLF";var _r=0,vr=0,Cr=0,Sr=[],Er=e("./URI"),Ar=e("./NameAddrHeader"),yr={},Rr=Tr[r]();if(null===Rr||_r!==n.length){var br=Math.max(_r,Cr),Ir=br<n.length?n.charAt(br):null,wr=gr();return new this.SyntaxError(mr(Sr),Ir,br,wr.line,wr.column),-1}return yr},toSource:function(){return this._source}};return n.SyntaxError=function(e,n,r,s,l){function i(e,n){var r,s;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return s=n?t(n):"end of input","Expected "+r+" but "+s+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=i(e,n),this.offset=r,this.line=s,this.column=l},n.SyntaxError.prototype=Error.prototype,n}()},{"./NameAddrHeader":9,"./URI":24}],7:[function(e,t,n){var r=e("debug")("JsSIP"),s=e("../package.json");r("version %s",s.version);var l=e("rtcninja"),i=e("./Constants"),o=e("./Exceptions"),u=e("./Utils"),a=e("./UA"),c=e("./URI"),h=e("./NameAddrHeader"),d=e("./Grammar"),p=e("./Socket"),f=e("./WebSocketInterface"),m=t.exports={C:i,Exceptions:o,Utils:u,UA:a,URI:c,NameAddrHeader:h,Socket:p,WebSocketInterface:f,Grammar:d,debug:e("debug"),rtcninja:l};Object.defineProperties(m,{name:{get:function(){return s.title}},version:{get:function(){return s.version}}})},{"../package.json":47,"./Constants":1,"./Exceptions":5,"./Grammar":6,"./NameAddrHeader":9,"./Socket":19,"./UA":23,"./URI":24,"./Utils":25,"./WebSocketInterface":26,debug:33,rtcninja:38}],8:[function(e,t,n){function r(e){this.ua=e,this.data={},l.EventEmitter.call(this)}t.exports=r;var s=e("util"),l=e("events"),i=e("./Constants"),o=e("./SIPMessage"),u=e("./Utils"),a=e("./RequestSender"),c=e("./Transactions"),h=e("./Exceptions");s.inherits(r,l.EventEmitter),r.prototype.send=function(e,t,n){var r,s,l,u,c,h=e;if(void 0===e||void 0===t)throw new TypeError("Not enough arguments");if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+h);n=n||{},c=n.extraHeaders&&n.extraHeaders.slice()||[],u=n.eventHandlers||{},l=n.contentType||"text/plain",this.content_type=l;for(s in u)this.on(s,u[s]);this.closed=!1,this.ua.applicants[this]=this,c.push("Content-Type: "+l),this.request=new o.OutgoingRequest(i.MESSAGE,e,this.ua,null,c),t?(this.request.body=t,this.content=t):this.content=null,r=new a(this,this.ua),this.newMessage("local",this.request),r.send()},r.prototype.receiveResponse=function(e){var t;if(!this.closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):delete this.ua.applicants[this],this.emit("succeeded",{originator:"remote",response:e});break;default:delete this.ua.applicants[this],t=u.sipErrorCause(e.status_code),this.emit("failed",{originator:"remote",response:e,cause:t})}},r.prototype.onRequestTimeout=function(){this.closed||this.emit("failed",{originator:"system",cause:i.causes.REQUEST_TIMEOUT})},r.prototype.onTransportError=function(){this.closed||this.emit("failed",{originator:"system",cause:i.causes.CONNECTION_ERROR})},r.prototype.close=function(){this.closed=!0,delete this.ua.applicants[this]},r.prototype.init_incoming=function(e){var t;this.request=e,this.content_type=e.getHeader("Content-Type"),e.body?this.content=e.body:this.content=null,this.newMessage("remote",e),t=this.ua.transactions.nist[e.via_branch],!t||t.state!==c.C.STATUS_TRYING&&t.state!==c.C.STATUS_PROCEEDING||e.reply(200)},r.prototype.accept=function(e){e=e||{};var t=e.extraHeaders&&e.extraHeaders.slice()||[],n=e.body;if("incoming"!==this.direction)throw new h.NotSupportedError('"accept" not supported for outgoing Message');this.request.reply(200,null,t,n)},r.prototype.reject=function(e){e=e||{};var t=e.status_code||480,n=e.reason_phrase,r=e.extraHeaders&&e.extraHeaders.slice()||[],s=e.body;if("incoming"!==this.direction)throw new h.NotSupportedError('"reject" not supported for outgoing Message');if(300>t||t>=700)throw new TypeError("Invalid status_code: "+t);this.request.reply(t,n,r,s)},r.prototype.newMessage=function(e,t){"remote"===e?(this.direction="incoming",this.local_identity=t.to,this.remote_identity=t.from):"local"===e&&(this.direction="outgoing",this.local_identity=t.from,this.remote_identity=t.to),this.ua.newMessage({originator:e,message:this,request:t})}},{"./Constants":1,"./Exceptions":5,"./RequestSender":17,"./SIPMessage":18,"./Transactions":21,"./Utils":25,events:28,util:32}],9:[function(e,t,n){function r(e,t,n){var r;if(!(e&&e instanceof s))throw new TypeError('missing or invalid "uri" parameter');this.uri=e,this.parameters={};for(r in n)this.setParam(r,n[r]);Object.defineProperties(this,{display_name:{get:function(){return t},set:function(e){t=0===e?"0":e}}})}t.exports=r;var s=e("./URI"),l=e("./Grammar");r.prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]="undefined"==typeof t||null===t?null:t.toString())},getParam:function(e){return e?this.parameters[e.toLowerCase()]:void 0},hasParam:function(e){return e?this.parameters.hasOwnProperty(e.toLowerCase())&&!0||!1:void 0},deleteParam:function(e){var t;return e=e.toLowerCase(),this.parameters.hasOwnProperty(e)?(t=this.parameters[e],delete this.parameters[e],t):void 0},clearParams:function(){this.parameters={}},clone:function(){return new r(this.uri.clone(),this.display_name,JSON.parse(JSON.stringify(this.parameters)))},toString:function(){var e,t;e=this.display_name||0===this.display_name?'"'+this.display_name+'" ':"",e+="<"+this.uri.toString()+">";for(t in this.parameters)e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]);return e}},r.parse=function(e){return e=l.parse(e,"Name_Addr_Header"),-1!==e?e:void 0}},{"./Grammar":6,"./URI":24}],10:[function(e,t,n){function r(e,t){var n=t,r=0,s=0;if(e.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(s=e.indexOf("\r\n",n),-1===s)return s;!e.substring(s+2,s+4).match(/(^\r\n)/)&&e.charAt(s+2).match(/(^\s+)/)?n=s+2:r=s}return r}function s(e,t,n,r){var s,l,i,a,c=t.indexOf(":",n),h=t.substring(n,c).trim(),d=t.substring(c+1,r).trim();switch(h.toLowerCase()){case"via":case"v":e.addHeader("via",d),1===e.getHeaders("via").length?(a=e.parseHeader("Via"),a&&(e.via=a,e.via_branch=a.branch)):a=0;break;case"from":case"f":e.setHeader("from",d),a=e.parseHeader("from"),a&&(e.from=a,e.from_tag=a.getParam("tag"));break;case"to":case"t":e.setHeader("to",d),a=e.parseHeader("to"),a&&(e.to=a,e.to_tag=a.getParam("tag"));break;case"record-route":for(a=o.parse(d,"Record_Route"),-1===a&&(a=void 0),i=a.length,l=0;i>l;l++)s=a[l],e.addHeader("record-route",d.substring(s.possition,s.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=s.parsed;break;case"call-id":case"i":e.setHeader("call-id",d),a=e.parseHeader("call-id"),a&&(e.call_id=d);break;case"contact":case"m":for(a=o.parse(d,"Contact"),-1===a&&(a=void 0),i=a.length,l=0;i>l;l++)s=a[l],e.addHeader("contact",d.substring(s.possition,s.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=s.parsed;break;case"content-length":case"l":e.setHeader("content-length",d),a=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",d),a=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",d),a=e.parseHeader("cseq"),a&&(e.cseq=a.value),e instanceof u.IncomingResponse&&(e.method=a.method);break;case"max-forwards":e.setHeader("max-forwards",d),a=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",d),a=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",d),a=e.parseHeader("proxy-authenticate");break;case"session-expires":case"x":e.setHeader("session-expires",d),a=e.parseHeader("session-expires"),a&&(e.session_expires=a.expires,e.session_expires_refresher=a.refresher);break;case"refer-to":case"r":e.setHeader("refer-to",d),a=e.parseHeader("refer-to"),a&&(e.refer_to=a);break;case"replaces":e.setHeader("replaces",d),a=e.parseHeader("replaces"),a&&(e.replaces=a);break;case"event":case"o":e.setHeader("event",d),a=e.parseHeader("event"),a&&(e.event=a);break;default:e.setHeader(h,d),a=0}return void 0===a?{error:'error parsing header "'+h+'"'}:!0}var l={};t.exports=l;var i=e("debug")("JsSIP:ERROR:Parser");i.log=console.warn.bind(console);var o=e("./Grammar"),u=e("./SIPMessage");l.parseMessage=function(e,t){var n,l,a,c,h,d=0,p=e.indexOf("\r\n");if(-1===p)return void i("parseMessage() | no CRLF found, not a SIP message");if(l=e.substring(0,p),h=o.parse(l,"Request_Response"),-1===h)return void i('parseMessage() | error parsing first line of SIP message: "'+l+'"');for(h.status_code?(n=new u.IncomingResponse,n.status_code=h.status_code,n.reason_phrase=h.reason_phrase):(n=new u.IncomingRequest(t),n.method=h.method,n.ruri=h.uri),n.data=e,d=p+2;;){if(p=r(e,d),-2===p){c=d+2;break}if(-1===p)return void i("parseMessage() | malformed message");if(h=s(n,e,d,p),h!==!0)return void i("parseMessage() |",h.error);d=p+2}return n.hasHeader("content-length")?(a=n.getHeader("content-length"),n.body=e.substr(c,a)):n.body=e.substring(c),n}},{"./Grammar":6,"./SIPMessage":18,debug:33}],11:[function(e,t,n){function r(e){G("new"),this.ua=e,this.status=k.STATUS_NULL,this.dialog=null,this.earlyDialogs={},this.connection=null,this.is_confirmed=!1,this.late_sdp=!1,this.rtcOfferConstraints=null,this.rtcAnswerConstraints=null,this.localMediaStream=null,this.localMediaStreamLocallyGenerated=!1,this.rtcReady=!0,this.timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},this.direction=null,this.local_identity=null,this.remote_identity=null,this.start_time=null,this.end_time=null,this.tones=null,this.audioMuted=!1,this.videoMuted=!1,this.localHold=!1,this.remoteHold=!1,this.sessionTimers={enabled:this.ua.configuration.session_timers,defaultExpires:z.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},this.referSubscribers={},this.data={},F.EventEmitter.call(this)}function s(e,t){var n=this,r=K.T1;this.timers.invite2xxTimer=setTimeout(function s(){n.status===k.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,["Contact: "+n.contact],t),r<K.T2&&(r=2*r,r>K.T2&&(r=K.T2)),n.timers.invite2xxTimer=setTimeout(s,r))},r)}function l(){var e=this;this.timers.ackTimer=setTimeout(function(){e.status===k.STATUS_WAITING_FOR_ACK&&(G("no ACK received, terminating the session"),clearTimeout(e.timers.invite2xxTimer),v.call(e,z.BYE),x.call(e,"remote",null,z.causes.NO_ACK))},K.TIMER_H)}function i(e,t){var n=this;this.connection=new W.RTCPeerConnection(e,t),this.connection.onaddstream=function(e,t){n.emit("addstream",{stream:t})},this.connection.onremovestream=function(e,t){n.emit("removestream",{stream:t})},this.connection.oniceconnectionstatechange=function(e,t){n.emit("iceconnectionstatechange",{state:t}),"failed"===t&&n.terminate({cause:z.causes.RTP_TIMEOUT,status_code:200,reason_phrase:z.causes.RTP_TIMEOUT})}}function o(e,t,n,r){function s(r){i.onicecandidate=function(n,r){if(!r){if(i.onicecandidate=null,l.rtcReady=!0,t){var s={originator:"local",type:e,sdp:i.localDescription.sdp};l.emit("sdp",s),t(s.sdp)}t=null}},i.setLocalDescription(r,function(){if("complete"===i.iceGatheringState){if(l.rtcReady=!0,t){var n={originator:"local",type:e,sdp:i.localDescription.sdp};l.emit("sdp",n),t(n.sdp)}t=null}},function(e){l.rtcReady=!0,n&&n(e)})}G("createLocalDescription()");var l=this,i=this.connection;if(this.rtcReady=!1,"offer"===e)i.createOffer(s,function(e){l.rtcReady=!0,n&&n(e)},r);else{if("answer"!==e)throw new Error('createLocalDescription() | type must be "offer" or "answer", but "'+e+'" was given');i.createAnswer(s,function(e){l.rtcReady=!0,n&&n(e)},r)}}function u(e,t,n){var r,s,l="UAS"===t?e.to_tag:e.from_tag,i="UAS"===t?e.from_tag:e.to_tag,o=e.call_id+l+i;return s=this.earlyDialogs[o],n?s?!0:(s=new X(this,e,t,X.C.STATUS_EARLY),s.error?(G(s.error),U.call(this,"remote",e,z.causes.INTERNAL_ERROR),!1):(this.earlyDialogs[o]=s,!0)):(this.from_tag=e.from_tag,this.to_tag=e.to_tag,s?(s.update(e,t),this.dialog=s,delete this.earlyDialogs[o],!0):(r=new X(this,e,t),r.error?(G(r.error),U.call(this,"remote",e,z.causes.INTERNAL_ERROR),!1):(this.dialog=r,!0)))}function a(e){function t(t){t=t||{},f=!0;var n=t.status_code||403,r=t.reason_phrase||"",s=t.extraHeaders&&t.extraHeaders.slice()||[];if(this.status!==k.STATUS_CONFIRMED)return!1;if(300>n||n>=700)throw new TypeError("Invalid status_code: "+n);e.reply(n,r,s)}function n(){r(function(t){var n=["Contact: "+h.contact];E.call(h,e,n),h.late_sdp&&(t=C.call(h,t)),e.reply(200,null,n,t,function(){h.status=k.STATUS_WAITING_FOR_ACK,s.call(h,e,t),l.call(h)}),"function"==typeof m.callback&&m.callback()},function(){e.reply(500)})}function r(e,t){h.late_sdp?o.call(h,"offer",e,t,h.rtcOfferConstraints):(h.remoteHold===!0&&p===!1?(h.remoteHold=!1,P.call(h,"remote")):h.remoteHold===!1&&p===!0&&(h.remoteHold=!0,M.call(h,"remote")),o.call(h,"answer",e,t,h.rtcAnswerConstraints))}G("receiveReinvite()");var i,u,a,c,h=this,d=e.getHeader("Content-Type"),p=!1,f=!1,m={request:e,callback:void 0,reject:t.bind(this)};if(this.emit("reinvite",m),!f)if(e.body){if(this.late_sdp=!1,"application/sdp"!==d)return G("invalid Content-Type"),void e.reply(415);for(i=e.parseSDP(),u=0;u<i.media.length;u++)if(c=i.media[u],-1!==re.indexOf(c.type)){if(a=c.direction||i.direction||"sendrecv","sendonly"!==a&&"inactive"!==a){p=!1;break}p=!0}var g={originator:"remote",type:"offer",sdp:e.body};this.emit("sdp",g),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:g.sdp}),n,function(){e.reply(488)})}else this.late_sdp=!0,n()}function c(e){function t(t){t=t||{},a=!0;var n=t.status_code||403,r=t.reason_phrase||"",s=t.extraHeaders&&t.extraHeaders.slice()||[];if(this.status!==k.STATUS_CONFIRMED)return!1;if(300>n||n>=700)throw new TypeError("Invalid status_code: "+n);e.reply(n,r,s)}G("receiveUpdate()");var n,r,s,l,i=this,u=e.getHeader("Content-Type"),a=!1,c=!1,h={request:e,callback:void 0,reject:t.bind(this)};if(this.emit("update",h),!a){if(!e.body){var d=[];return E.call(this,e,d),void e.reply(200,null,d)}if("application/sdp"!==u)return G("invalid Content-Type"),void e.reply(415);for(n=e.parseSDP(),r=0;r<n.media.length;r++)if(l=n.media[r],-1!==re.indexOf(l.type)){if(s=l.direction||n.direction||"sendrecv","sendonly"!==s&&"inactive"!==s){c=!1;break}c=!0}var p={originator:"remote",type:"offer",sdp:e.body};this.emit("sdp",p),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:p.sdp}),function(){i.remoteHold===!0&&c===!1?(i.remoteHold=!1,P.call(i,"remote")):i.remoteHold===!1&&c===!0&&(i.remoteHold=!0,M.call(i,"remote")),o.call(i,"answer",function(t){var n=["Contact: "+i.contact];E.call(i,e,n),e.reply(200,null,n,t),"function"==typeof h.callback&&h.callback()},function(){e.reply(500)})},function(){e.reply(488)},this.rtcAnswerConstraints)}}function h(e){function t(t,n){var l,i;return n=n||{},t="function"==typeof t?t:null,this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:(l=new r(this.ua),l.on("progress",function(e){s.notify(e.response.status_code,e.response.reason_phrase)}),l.on("accepted",function(e){s.notify(e.response.status_code,e.response.reason_phrase)}),l.on("failed",function(e){e.message?s.notify(e.message.status_code,e.message.reason_phrase):s.notify(487,e.cause)}),e.refer_to.uri.hasHeader("replaces")&&(i=decodeURIComponent(e.refer_to.uri.getHeader("replaces")),n.extraHeaders=n.extraHeaders||[],n.extraHeaders.push("Replaces: "+i)),void l.connect(e.refer_to.uri.toAor(),n,t))}function n(){s.notify(603)}G("receiveRefer()");var s,l=this;return void 0===typeof e.refer_to?(G("no Refer-To header field present in REFER"),void e.reply(400)):e.refer_to.uri.scheme!==z.SIP?(G("Refer-To header field points to a non-SIP URI scheme"),void e.reply(416)):(e.reply(202),s=new te(this,e.cseq),void this.emit("refer",{request:e,accept:function(e,n){t.call(l,e,n)},reject:function(){n.call(l)}}))}function d(e){switch(G("receiveNotify()"),void 0===typeof e.event&&e.reply(400),e.event.event){case"refer":var t=e.event.params.id,n=this.referSubscribers[t];if(!n)return void e.reply(481,"Subscription does not exist");n.receiveNotify(e),e.reply(200);break;default:e.reply(489)}}function p(e){function t(t){var n;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:(n=new r(this.ua),n.on("confirmed",function(){s.terminate()}),void n.init_incoming(e,t))}function n(){G("Replaced INVITE rejected by the user"),e.reply(486)}G("receiveReplaces()");var s=this;this.emit("replaces",{request:e,accept:function(e){t.call(s,e)},reject:function(){n.call(s)}})}function f(e,t,n){function r(e){u.status!==k.STATUS_TERMINATED&&(u.localMediaStream=e,e&&u.connection.addStream(e),u.emit("peerconnection",{peerconnection:u.connection}),w.call(u,u.request),o.call(u,"offer",l,i,t))}function s(){u.status!==k.STATUS_TERMINATED&&U.call(u,"local",null,z.causes.USER_DENIED_MEDIA_ACCESS)}function l(e){u.isCanceled||u.status===k.STATUS_TERMINATED||(u.request.body=e,u.status=k.STATUS_INVITE_SENT,u.emit("sending",{request:u.request}),a.send())}function i(){u.status!==k.STATUS_TERMINATED&&U.call(u,"system",null,z.causes.WEBRTC_ERROR)}var u=this,a=new Q(u,this.ua);this.receiveResponse=function(e){m.call(u,e)},n?setTimeout(function(){r(n)}):e.audio||e.video?(this.localMediaStreamLocallyGenerated=!0,W.getUserMedia(e,r,s)):r(null)}function m(e){G("receiveInviteResponse()");var t,n,r,s=this;if(this.dialog&&e.status_code>=200&&e.status_code<=299)return this.dialog.id.call_id===e.call_id&&this.dialog.id.local_tag===e.from_tag&&this.dialog.id.remote_tag===e.to_tag?void v.call(this,z.ACK):(n=new X(this,e,"UAC"),void 0!==n.error?void G(n.error):(n.sendRequest({owner:{status:k.STATUS_TERMINATED},onRequestTimeout:function(){},onTransportError:function(){},onDialogError:function(){},receiveResponse:function(){}},z.ACK),void n.sendRequest({owner:{status:k.STATUS_TERMINATED},onRequestTimeout:function(){},onTransportError:function(){},onDialogError:function(){},receiveResponse:function(){}},z.BYE)));if(this.isCanceled)return this.isCanceled=!1,void(e.status_code>=100&&e.status_code<200?this.request.cancel(this.cancelReason):e.status_code>=200&&e.status_code<299&&_.call(this,e));if(this.status===k.STATUS_INVITE_SENT||this.status===k.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this.status=k.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){G("1xx response received without to tag");break}if(e.hasHeader("contact")&&!u.call(this,e,"UAC",!0))break;if(this.status=k.STATUS_1XX_RECEIVED,N.call(this,"remote",e),!e.body)break;r={originator:"remote",type:"pranswer",sdp:e.body},this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"pranswer",sdp:r.sdp}),null,null);break;case/^2[0-9]{2}$/.test(e.status_code):if(this.status=k.STATUS_CONFIRMED,!e.body){_.call(this,e,400,z.causes.MISSING_SDP),U.call(this,"remote",e,z.causes.BAD_MEDIA_DESCRIPTION);break}if(!u.call(this,e,"UAC"))break;r={originator:"remote",type:"answer",sdp:e.body},this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:r.sdp}),function(){A.call(s,e),D.call(s,"remote",e),v.call(s,z.ACK),O.call(s,"local",null)},function(){_.call(s,e,488,"Not Acceptable Here"),U.call(s,"remote",e,z.causes.BAD_MEDIA_DESCRIPTION)});break;default:t=J.sipErrorCause(e.status_code),U.call(this,"remote",e,t)}}function g(e){function t(e){if(r.status!==k.STATUS_TERMINATED&&(v.call(r,z.ACK),!u)){if(A.call(r,e),!e.body)return void n();if("application/sdp"!==e.getHeader("Content-Type"))return void n();var t={originator:"remote",type:"answer",sdp:e.body};r.emit("sdp",t),r.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:t.sdp}),function(){l.succeeded&&l.succeeded(e)},function(){n()})}}function n(e){l.failed&&l.failed(e)}G("sendReinvite()"),e=e||{};var r=this,s=e.extraHeaders||[],l=e.eventHandlers||{},i=e.rtcOfferConstraints||this.rtcOfferConstraints||null,u=!1;s.push("Contact: "+this.contact),s.push("Content-Type: application/sdp"),this.sessionTimers.running&&s.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+(this.sessionTimers.refresher?"uac":"uas")),o.call(this,"offer",function(e){e=C.call(r,e);var l=new Z(r,z.INVITE);l.send({extraHeaders:s,body:e,eventHandlers:{onSuccessResponse:function(e){t(e),u=!0},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})},function(){n()},i)}function T(e){function t(e){if(r.status!==k.STATUS_TERMINATED&&!a)if(A.call(r,e),u){if(!e.body)return void n();if("application/sdp"!==e.getHeader("Content-Type"))return void n();var t={originator:"remote",type:"answer",sdp:e.body};r.emit("sdp",t),r.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:t.sdp}),function(){l.succeeded&&l.succeeded(e)},function(){n()})}else l.succeeded&&l.succeeded(e)}function n(e){l.failed&&l.failed(e)}G("sendUpdate()"),e=e||{};var r=this,s=e.extraHeaders||[],l=e.eventHandlers||{},i=e.rtcOfferConstraints||this.rtcOfferConstraints||null,u=e.sdpOffer||!1,a=!1;if(s.push("Contact: "+this.contact),this.sessionTimers.running&&s.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+(this.sessionTimers.refresher?"uac":"uas")),u)s.push("Content-Type: application/sdp"),o.call(this,"offer",function(e){e=C.call(r,e);var l=new Z(r,z.UPDATE);l.send({extraHeaders:s,body:e,eventHandlers:{onSuccessResponse:function(e){t(e),a=!0},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})},function(){n()},i);else{var c=new Z(r,z.UPDATE);c.send({extraHeaders:s,eventHandlers:{onSuccessResponse:function(e){t(e)},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})}}function _(e,t,n){G("acceptAndTerminate()");var r=[];t&&(n=n||z.REASON_PHRASE[t]||"",r.push("Reason: SIP ;cause="+t+'; text="'+n+'"')),(this.dialog||u.call(this,e,"UAC"))&&(v.call(this,z.ACK),v.call(this,z.BYE,{extraHeaders:r})),this.status=k.STATUS_TERMINATED}function v(e,t){G("sendRequest()");var n=new Z(this,e);n.send(t)}function C(e){var t,n,r;if(!this.localHold&&!this.remoteHold)return e;if(e=B.parse(e),this.localHold&&!this.remoteHold)for(G("mangleOffer() | me on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction?"sendrecv"===r.direction?r.direction="sendonly":"recvonly"===r.direction&&(r.direction="inactive"):r.direction="sendonly");else if(this.localHold&&this.remoteHold)for(G("mangleOffer() | both on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction="inactive");else if(this.remoteHold)for(G("mangleOffer() | remote on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction?"sendrecv"===r.direction?r.direction="recvonly":"recvonly"===r.direction&&(r.direction="inactive"):r.direction="recvonly");return B.write(e)}function S(){var e=!0,t=!0;(this.localHold||this.remoteHold)&&(e=!1,t=!1),this.audioMuted&&(e=!1),this.videoMuted&&(t=!1),R.call(this,!e),b.call(this,!t)}function E(e,t){if(this.sessionTimers.enabled){var n;e.session_expires&&e.session_expires>=z.MIN_SESSION_EXPIRES?(this.sessionTimers.currentExpires=e.session_expires,n=e.session_expires_refresher||"uas"):(this.sessionTimers.currentExpires=this.sessionTimers.defaultExpires,n="uas"),t.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+n),this.sessionTimers.refresher="uas"===n,y.call(this)}}function A(e){if(this.sessionTimers.enabled){var t;e.session_expires&&e.session_expires>=z.MIN_SESSION_EXPIRES?(this.sessionTimers.currentExpires=e.session_expires,t=e.session_expires_refresher||"uac"):(this.sessionTimers.currentExpires=this.sessionTimers.defaultExpires,t="uac"),this.sessionTimers.refresher="uac"===t,y.call(this)}}function y(){var e=this,t=this.sessionTimers.currentExpires;this.sessionTimers.running=!0,clearTimeout(this.sessionTimers.timer),this.sessionTimers.refresher?this.sessionTimers.timer=setTimeout(function(){e.status!==k.STATUS_TERMINATED&&(G("runSessionTimer() | sending session refresh request"),T.call(e,{eventHandlers:{succeeded:function(t){A.call(e,t)}}}))},500*t):this.sessionTimers.timer=setTimeout(function(){e.status!==k.STATUS_TERMINATED&&(j("runSessionTimer() | timer expired, terminating the session"),e.terminate({cause:z.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},1100*t)}function R(e){var t,n,r,s,l,i=this.connection.getLocalStreams();for(r=i.length,t=0;r>t;t++)for(l=i[t].getAudioTracks(),s=l.length,n=0;s>n;n++)l[n].enabled=!e}function b(e){var t,n,r,s,l,i=this.connection.getLocalStreams();for(r=i.length,t=0;r>t;t++)for(l=i[t].getVideoTracks(),s=l.length,n=0;s>n;n++)l[n].enabled=!e}function I(e,t){G("newRTCSession"),this.ua.newRTCSession({originator:e,session:this,request:t})}function w(e){G("session connecting"),this.emit("connecting",{request:e})}function N(e,t){G("session progress"),this.emit("progress",{originator:e,response:t||null})}function D(e,t){G("session accepted"),this.start_time=new Date,this.emit("accepted",{originator:e,response:t||null})}function O(e,t){G("session confirmed"),this.is_confirmed=!0,this.emit("confirmed",{originator:e,ack:t||null})}function x(e,t,n){G("session ended"),this.end_time=new Date,this.close(),this.emit("ended",{originator:e,message:t||null,cause:n})}function U(e,t,n){G("session failed"),this.close(),this.emit("failed",{originator:e,message:t||null,cause:n})}function M(e){G("session onhold"),S.call(this),this.emit("hold",{originator:e})}function P(e){G("session onunhold"),S.call(this),this.emit("unhold",{originator:e})}function q(e){G("session onmute"),S.call(this),this.emit("muted",{audio:e.audio,video:e.video})}function L(e){G("session onunmute"),S.call(this),this.emit("unmuted",{audio:e.audio,video:e.video})}t.exports=r;var k={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9};r.C=k;var H=e("util"),F=e("events"),G=e("debug")("JsSIP:RTCSession"),j=e("debug")("JsSIP:ERROR:RTCSession");j.log=console.warn.bind(console);var W=e("rtcninja"),B=e("sdp-transform"),z=e("./Constants"),V=e("./Exceptions"),Y=e("./Transactions"),J=e("./Utils"),K=e("./Timers"),$=e("./SIPMessage"),X=e("./Dialog"),Q=e("./RequestSender"),Z=e("./RTCSession/Request"),ee=e("./RTCSession/DTMF"),te=e("./RTCSession/ReferNotifier"),ne=e("./RTCSession/ReferSubscriber"),re=["audio","video"];H.inherits(r,F.EventEmitter),r.prototype.isInProgress=function(){switch(this.status){case k.STATUS_NULL:case k.STATUS_INVITE_SENT:case k.STATUS_1XX_RECEIVED:case k.STATUS_INVITE_RECEIVED:case k.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}},r.prototype.isEstablished=function(){switch(this.status){case k.STATUS_ANSWERED:case k.STATUS_WAITING_FOR_ACK:case k.STATUS_CONFIRMED:return!0;default:return!1}},r.prototype.isEnded=function(){switch(this.status){case k.STATUS_CANCELED:case k.STATUS_TERMINATED:return!0;default:return!1}},r.prototype.isMuted=function(){return{audio:this.audioMuted,video:this.videoMuted}},r.prototype.isOnHold=function(){return{local:this.localHold,remote:this.remoteHold}},r.prototype.isReadyToReOffer=function(){return this.rtcReady?this.dialog?this.dialog.uac_pending_reply===!0||this.dialog.uas_pending_reply===!0?(G("isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):!0:(G("isReadyToReOffer() | session not established yet"),!1):(G("isReadyToReOffer() | internal WebRTC status not ready"),!1)},r.prototype.connect=function(e,t,n){G("connect()"),t=t||{};var r,s,l=e,o=t.eventHandlers||{},u=t.extraHeaders&&t.extraHeaders.slice()||[],a=t.mediaConstraints||{audio:!0,video:!0},c=t.mediaStream||null,h=t.pcConfig||{iceServers:[]},d=t.rtcConstraints||null,p=t.rtcOfferConstraints||null;if(this.rtcOfferConstraints=p,this.rtcAnswerConstraints=t.rtcAnswerConstraints||null,this.sessionTimers.enabled&&J.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=z.MIN_SESSION_EXPIRES?this.sessionTimers.defaultExpires=t.sessionTimersExpires:this.sessionTimers.defaultExpires=z.SESSION_EXPIRES),this.data=t.data||this.data,void 0===e)throw new TypeError("Not enough arguments");if(!W.hasWebRTC())throw new V.NotSupportedError("WebRTC not supported");if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+l);if(this.status!==k.STATUS_NULL)throw new V.InvalidStateError(this.status);for(r in o)this.on(r,o[r]);this.from_tag=J.newTag(),this.anonymous=t.anonymous||!1,this.isCanceled=!1,s={from_tag:this.from_tag},this.contact=this.ua.contact.toString({anonymous:this.anonymous,outbound:!0}),this.anonymous&&(s.from_display_name="Anonymous",s.from_uri="sip:anonymous@anonymous.invalid",u.push("P-Preferred-Identity: "+this.ua.configuration.uri.toString()),u.push("Privacy: id")),u.push("Contact: "+this.contact),u.push("Content-Type: application/sdp"),this.sessionTimers.enabled&&u.push("Session-Expires: "+this.sessionTimers.defaultExpires),this.request=new $.OutgoingRequest(z.INVITE,e,this.ua,s,u),this.id=this.request.call_id+this.from_tag,i.call(this,h,d),this.ua.sessions[this.id]=this,this.direction="outgoing",this.local_identity=this.request.from,this.remote_identity=this.request.to,n?n(this):I.call(this,"local",this.request),f.call(this,a,p,c)},r.prototype.init_incoming=function(e,t){G("init_incoming()");var n,r=this,s=e.getHeader("Content-Type");return e.body&&"application/sdp"!==s?void e.reply(415):(this.status=k.STATUS_INVITE_RECEIVED,this.from_tag=e.from_tag,this.id=e.call_id+this.from_tag,this.request=e,this.contact=this.ua.contact.toString(),this.ua.sessions[this.id]=this,e.hasHeader("expires")&&(n=1e3*e.getHeader("expires")),e.to_tag=J.newTag(),u.call(this,e,"UAS",!0)?(e.body?this.late_sdp=!1:this.late_sdp=!0,this.status=k.STATUS_WAITING_FOR_ANSWER,this.timers.userNoAnswerTimer=setTimeout(function(){e.reply(408),U.call(r,"local",null,z.causes.NO_ANSWER)},this.ua.configuration.no_answer_timeout),n&&(this.timers.expiresTimer=setTimeout(function(){r.status===k.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),U.call(r,"system",null,z.causes.EXPIRES));
},n)),this.direction="incoming",this.local_identity=e.to,this.remote_identity=e.from,t?t(this):I.call(this,"remote",e),void(this.status!==k.STATUS_TERMINATED&&(e.reply(180,null,["Contact: "+r.contact]),N.call(r,"local",null)))):void e.reply(500,"Missing Contact header field"))},r.prototype.answer=function(e){function t(e){if(v.status!==k.STATUS_TERMINATED)if(v.localMediaStream=e,e&&v.connection.addStream(e),v.request.body||v.emit("peerconnection",{peerconnection:v.connection}),v.late_sdp)r();else{var t={originator:"remote",type:"offer",sdp:C.body};v.emit("sdp",t),v.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:t.sdp}),r,function(){C.reply(488),U.call(v,"system",null,z.causes.WEBRTC_ERROR)})}}function n(){v.status!==k.STATUS_TERMINATED&&(C.reply(480),U.call(v,"local",null,z.causes.USER_DENIED_MEDIA_ACCESS))}function r(){w.call(v,C),v.late_sdp?o.call(v,"offer",a,c,v.rtcOfferConstraints):o.call(v,"answer",a,c,I)}function a(e){function t(){v.status=k.STATUS_WAITING_FOR_ACK,s.call(v,C,e),l.call(v),D.call(v,"local")}function n(){U.call(v,"system",null,z.causes.CONNECTION_ERROR)}v.status!==k.STATUS_TERMINATED&&(E.call(v,C,S),C.reply(200,null,S,e,t,n))}function c(){v.status!==k.STATUS_TERMINATED&&(C.reply(500),U.call(v,"system",null,z.causes.WEBRTC_ERROR))}G("answer()"),e=e||{};var h,d,p,f,m=!1,g=!1,T=!1,_=!1,v=this,C=this.request,S=e.extraHeaders&&e.extraHeaders.slice()||[],A=e.mediaConstraints||{},y=e.mediaStream||null,R=e.pcConfig||{iceServers:[]},b=e.rtcConstraints||null,I=e.rtcAnswerConstraints||null;if(this.rtcAnswerConstraints=I,this.rtcOfferConstraints=e.rtcOfferConstraints||null,this.sessionTimers.enabled&&J.isDecimal(e.sessionTimersExpires)&&(e.sessionTimersExpires>=z.MIN_SESSION_EXPIRES?this.sessionTimers.defaultExpires=e.sessionTimersExpires:this.sessionTimers.defaultExpires=z.SESSION_EXPIRES),this.data=e.data||this.data,"incoming"!==this.direction)throw new V.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this.status!==k.STATUS_WAITING_FOR_ANSWER)throw new V.InvalidStateError(this.status);if(this.status=k.STATUS_ANSWERED,!u.call(this,C,"UAS"))return void C.reply(500,"Error creating dialog");for(clearTimeout(this.timers.userNoAnswerTimer),S.unshift("Contact: "+v.contact),p=C.parseSDP(),Array.isArray(p.media)||(p.media=[p.media]),h=p.media.length;h--;){var N=p.media[h];"audio"===N.type&&(m=!0,N.direction&&"sendrecv"!==N.direction||(T=!0)),"video"===N.type&&(g=!0,N.direction&&"sendrecv"!==N.direction||(_=!0))}if(y&&A.audio===!1)for(f=y.getAudioTracks(),d=f.length,h=0;d>h;h++)y.removeTrack(f[h]);if(y&&A.video===!1)for(f=y.getVideoTracks(),d=f.length,h=0;d>h;h++)y.removeTrack(f[h]);y||void 0!==A.audio||(A.audio=T),y||void 0!==A.video||(A.video=_),y||m||(A.audio=!1),y||g||(A.video=!1),i.call(this,R,b),y?t(y):A.audio||A.video?(v.localMediaStreamLocallyGenerated=!0,W.getUserMedia(A,t,n)):t(null)},r.prototype.terminate=function(e){G("terminate()"),e=e||{};var t,n,r=e.cause||z.causes.BYE,s=e.status_code,l=e.reason_phrase,i=e.extraHeaders&&e.extraHeaders.slice()||[],o=e.body,u=this;if(this.status===k.STATUS_TERMINATED)throw new V.InvalidStateError(this.status);switch(this.status){case k.STATUS_NULL:case k.STATUS_INVITE_SENT:case k.STATUS_1XX_RECEIVED:if(G("canceling sesssion"),s&&(200>s||s>=700))throw new TypeError("Invalid status_code: "+s);s&&(l=l||z.REASON_PHRASE[s]||"",t="SIP ;cause="+s+' ;text="'+l+'"'),this.status===k.STATUS_NULL?(this.isCanceled=!0,this.cancelReason=t):this.status===k.STATUS_INVITE_SENT?(this.isCanceled=!0,this.cancelReason=t):this.status===k.STATUS_1XX_RECEIVED&&this.request.cancel(t),this.status=k.STATUS_CANCELED,U.call(this,"local",null,z.causes.CANCELED);break;case k.STATUS_WAITING_FOR_ANSWER:case k.STATUS_ANSWERED:if(G("rejecting session"),s=s||480,300>s||s>=700)throw new TypeError("Invalid status_code: "+s);this.request.reply(s,l,i,o),U.call(this,"local",null,z.causes.REJECTED);break;case k.STATUS_WAITING_FOR_ACK:case k.STATUS_CONFIRMED:if(G("terminating session"),l=e.reason_phrase||z.REASON_PHRASE[s]||"",s&&(200>s||s>=700))throw new TypeError("Invalid status_code: "+s);s&&i.push("Reason: SIP ;cause="+s+'; text="'+l+'"'),this.status===k.STATUS_WAITING_FOR_ACK&&"incoming"===this.direction&&this.request.server_transaction.state!==Y.C.STATUS_TERMINATED?(n=this.dialog,this.receiveRequest=function(e){e.method===z.ACK&&(v.call(this,z.BYE,{extraHeaders:i,body:o}),n.terminate())},this.request.server_transaction.on("stateChanged",function(){this.state===Y.C.STATUS_TERMINATED&&(v.call(u,z.BYE,{extraHeaders:i,body:o}),n.terminate())}),x.call(this,"local",null,r),this.dialog=n,this.ua.dialogs[n.id.toString()]=n):(v.call(this,z.BYE,{extraHeaders:i,body:o}),x.call(this,"local",null,r))}},r.prototype.close=function(){G("close()");var e;if(this.status!==k.STATUS_TERMINATED){if(this.connection)try{this.connection.close()}catch(t){j("close() | error closing the RTCPeerConnection: %o",t)}this.localMediaStream&&this.localMediaStreamLocallyGenerated&&(G("close() | closing local MediaStream"),W.closeMediaStream(this.localMediaStream));for(e in this.timers)clearTimeout(this.timers[e]);clearTimeout(this.sessionTimers.timer),this.dialog&&(this.dialog.terminate(),delete this.dialog);for(e in this.earlyDialogs)this.earlyDialogs[e].terminate(),delete this.earlyDialogs[e];this.status=k.STATUS_TERMINATED,delete this.ua.sessions[this.id]}},r.prototype.sendDTMF=function(e,t){function n(){var e,o;if(i.status===k.STATUS_TERMINATED||!i.tones||l>=i.tones.length)return void(i.tones=null);if(e=i.tones[l],l+=1,","===e)o=2e3;else{var u=new ee(i);t.eventHandlers={failed:function(){i.tones=null}},u.send(e,t),o=r+s}setTimeout(n,o)}G("sendDTMF() | tones: %s",e);var r,s,l=0,i=this;if(t=t||{},r=t.duration||null,s=t.interToneGap||null,void 0===e)throw new TypeError("Not enough arguments");if(this.status!==k.STATUS_CONFIRMED&&this.status!==k.STATUS_WAITING_FOR_ACK)throw new V.InvalidStateError(this.status);if("number"==typeof e&&(e=e.toString()),!e||"string"!=typeof e||!e.match(/^[0-9A-D#*,]+$/i))throw new TypeError("Invalid tones: "+e);if(r&&!J.isDecimal(r))throw new TypeError("Invalid tone duration: "+r);if(r?r<ee.C.MIN_DURATION?(G('"duration" value is lower than the minimum allowed, setting it to '+ee.C.MIN_DURATION+" milliseconds"),r=ee.C.MIN_DURATION):r>ee.C.MAX_DURATION?(G('"duration" value is greater than the maximum allowed, setting it to '+ee.C.MAX_DURATION+" milliseconds"),r=ee.C.MAX_DURATION):r=Math.abs(r):r=ee.C.DEFAULT_DURATION,t.duration=r,s&&!J.isDecimal(s))throw new TypeError("Invalid interToneGap: "+s);return s?s<ee.C.MIN_INTER_TONE_GAP?(G('"interToneGap" value is lower than the minimum allowed, setting it to '+ee.C.MIN_INTER_TONE_GAP+" milliseconds"),s=ee.C.MIN_INTER_TONE_GAP):s=Math.abs(s):s=ee.C.DEFAULT_INTER_TONE_GAP,this.tones?void(this.tones+=e):(this.tones=e,void n())},r.prototype.mute=function(e){G("mute()"),e=e||{audio:!0,video:!1};var t=!1,n=!1;this.audioMuted===!1&&e.audio&&(t=!0,this.audioMuted=!0,R.call(this,!0)),this.videoMuted===!1&&e.video&&(n=!0,this.videoMuted=!0,b.call(this,!0)),t!==!0&&n!==!0||q.call(this,{audio:t,video:n})},r.prototype.unmute=function(e){G("unmute()"),e=e||{audio:!0,video:!0};var t=!1,n=!1;this.audioMuted===!0&&e.audio&&(t=!0,this.audioMuted=!1,this.localHold===!1&&R.call(this,!1)),this.videoMuted===!0&&e.video&&(n=!0,this.videoMuted=!1,this.localHold===!1&&b.call(this,!1)),t!==!0&&n!==!0||L.call(this,{audio:t,video:n})},r.prototype.hold=function(e,t){G("hold()"),e=e||{};var n,r=this;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.localHold===!0?!1:this.isReadyToReOffer()?(this.localHold=!0,M.call(this,"local"),n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}},e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.unhold=function(e,t){G("unhold()"),e=e||{};var n,r=this;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.localHold===!1?!1:this.isReadyToReOffer()?(this.localHold=!1,P.call(this,"local"),n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}},e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.renegotiate=function(e,t){G("renegotiate()"),e=e||{};var n,r=this,s=e.rtcOfferConstraints||null;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.isReadyToReOffer()?(n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}},S.call(this),e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,rtcOfferConstraints:s,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,rtcOfferConstraints:s,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.refer=function(e,t){G("refer()");var n,r,s=this,l=e;if(this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED)return!1;if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+l);return n=new ne(this),n.sendRefer(e,t),r=n.outgoingRequest.cseq,this.referSubscribers[r]=n,n.on("requestFailed",function(){delete s.referSubscribers[r]}),n.on("accepted",function(){delete s.referSubscribers[r]}),n.on("failed",function(){delete s.referSubscribers[r]}),n},r.prototype.receiveRequest=function(e){G("receiveRequest()");var t,n=this;if(e.method===z.CANCEL)this.status!==k.STATUS_WAITING_FOR_ANSWER&&this.status!==k.STATUS_ANSWERED||(this.status=k.STATUS_CANCELED,this.request.reply(487),U.call(this,"remote",e,z.causes.CANCELED));else switch(e.method){case z.ACK:if(this.status!==k.STATUS_WAITING_FOR_ACK)return;if(this.status=k.STATUS_CONFIRMED,clearTimeout(this.timers.ackTimer),clearTimeout(this.timers.invite2xxTimer),this.late_sdp){if(!e.body){this.terminate({cause:z.causes.MISSING_SDP,status_code:400});break}var r={originator:"remote",type:"answer",sdp:e.body};this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:r.sdp}),function(){n.is_confirmed||O.call(n,"remote",e)},function(){n.terminate({cause:z.causes.BAD_MEDIA_DESCRIPTION,status_code:488})})}else this.is_confirmed||O.call(this,"remote",e);break;case z.BYE:this.status===k.STATUS_CONFIRMED?(e.reply(200),x.call(this,"remote",e,z.causes.BYE)):this.status===k.STATUS_INVITE_RECEIVED?(e.reply(200),this.request.reply(487,"BYE Received"),x.call(this,"remote",e,z.causes.BYE)):e.reply(403,"Wrong Status");break;case z.INVITE:this.status===k.STATUS_CONFIRMED?e.hasHeader("replaces")?p.call(this,e):a.call(this,e):e.reply(403,"Wrong Status");break;case z.INFO:this.status===k.STATUS_CONFIRMED||this.status===k.STATUS_WAITING_FOR_ACK||this.status===k.STATUS_INVITE_RECEIVED?(t=e.getHeader("content-type"),t&&t.match(/^application\/dtmf-relay/i)?new ee(this).init_incoming(e):e.reply(415)):e.reply(403,"Wrong Status");break;case z.UPDATE:this.status===k.STATUS_CONFIRMED?c.call(this,e):e.reply(403,"Wrong Status");break;case z.REFER:this.status===k.STATUS_CONFIRMED?h.call(this,e):e.reply(403,"Wrong Status");break;case z.NOTIFY:this.status===k.STATUS_CONFIRMED?d.call(this,e):e.reply(403,"Wrong Status");break;default:e.reply(501)}},r.prototype.onTransportError=function(){j("onTransportError()"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:z.causes.CONNECTION_ERROR,cause:z.causes.CONNECTION_ERROR})},r.prototype.onRequestTimeout=function(){G("onRequestTimeout"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:z.causes.REQUEST_TIMEOUT,cause:z.causes.REQUEST_TIMEOUT})},r.prototype.onDialogError=function(){j("onDialogError()"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:z.causes.DIALOG_ERROR,cause:z.causes.DIALOG_ERROR})},r.prototype.newDTMF=function(e){G("newDTMF()"),this.emit("newDTMF",e)},r.prototype.resetLocalMedia=function(){G("resetLocalMedia()"),this.localHold=!1,this.audioMuted=!1,this.videoMuted=!1,S.call(this)}},{"./Constants":1,"./Dialog":2,"./Exceptions":5,"./RTCSession/DTMF":12,"./RTCSession/ReferNotifier":13,"./RTCSession/ReferSubscriber":14,"./RTCSession/Request":15,"./RequestSender":17,"./SIPMessage":18,"./Timers":20,"./Transactions":21,"./Utils":25,debug:33,events:28,rtcninja:38,"sdp-transform":44,util:32}],12:[function(e,t,n){function r(e){this.owner=e,this.direction=null,this.tone=null,this.duration=null}t.exports=r;var s={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};r.C=s;var l=e("debug")("JsSIP:RTCSession:DTMF"),i=e("debug")("JsSIP:ERROR:RTCSession:DTMF");i.log=console.warn.bind(console);var o=e("../Constants"),u=e("../Exceptions"),a=e("../RTCSession");r.prototype.send=function(e,t){var n,r;if(void 0===e)throw new TypeError("Not enough arguments");if(this.direction="outgoing",this.owner.status!==a.C.STATUS_CONFIRMED&&this.owner.status!==a.C.STATUS_WAITING_FOR_ACK)throw new u.InvalidStateError(this.owner.status);if(t=t||{},n=t.extraHeaders?t.extraHeaders.slice():[],this.eventHandlers=t.eventHandlers||{},"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError("Invalid tone: "+e);e=e.toString()}if(!e.match(/^[0-9A-D#*]$/))throw new TypeError("Invalid tone: "+e);this.tone=e,this.duration=t.duration,n.push("Content-Type: application/dtmf-relay"),r="Signal="+this.tone+"\r\n",r+="Duration="+this.duration,this.owner.newDTMF({originator:"local",dtmf:this,request:this.request}),this.owner.dialog.sendRequest(this,o.INFO,{extraHeaders:n,body:r})},r.prototype.receiveResponse=function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):l("onSuccessResponse"),this.eventHandlers.onSuccessResponse&&this.eventHandlers.onSuccessResponse(e);break;default:this.eventHandlers.onErrorResponse&&this.eventHandlers.onErrorResponse(e)}},r.prototype.onRequestTimeout=function(){i("onRequestTimeout"),this.eventHandlers.onRequestTimeout&&this.eventHandlers.onRequestTimeout()},r.prototype.onTransportError=function(){i("onTransportError"),this.eventHandlers.onTransportError&&this.eventHandlers.onTransportError()},r.prototype.onDialogError=function(){i("onDialogError"),this.eventHandlers.onDialogError&&this.eventHandlers.onDialogError()},r.prototype.init_incoming=function(e){var t,n=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,r=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;this.direction="incoming",this.request=e,e.reply(200),e.body&&(t=e.body.split("\n"),t.length>=1&&n.test(t[0])&&(this.tone=t[0].replace(n,"$2")),t.length>=2&&r.test(t[1])&&(this.duration=parseInt(t[1].replace(r,"$2"),10))),this.duration||(this.duration=s.DEFAULT_DURATION),this.tone?this.owner.newDTMF({originator:"remote",dtmf:this,request:e}):l("invalid INFO DTMF received, discarded")}},{"../Constants":1,"../Exceptions":5,"../RTCSession":11,debug:33}],13:[function(e,t,n){function r(e,t,n){this.session=e,this.id=t,this.expires=n||s.expires,this.active=!0,this.notify(100)}t.exports=r;var s={event_type:"refer",body_type:"message/sipfrag;version=2.0",expires:300},l=e("debug")("JsSIP:RTCSession:ReferNotifier"),i=e("../Constants"),o=e("./Request");r.prototype.notify=function(e,t){l("notify()");var n,r=this;if(this.active!==!1){t=t||i.REASON_PHRASE[e]||"",n=e>=200?"terminated;reason=noresource":"active;expires="+this.expires;var u=new o(this.session,i.NOTIFY);u.send({extraHeaders:["Event: "+s.event_type+";id="+r.id,"Subscription-State: "+n,"Content-Type: "+s.body_type],body:"SIP/2.0 "+e+" "+t,eventHandlers:{onErrorResponse:function(){r.active=!1}}})}}},{"../Constants":1,"./Request":15,debug:33}],14:[function(e,t,n){function r(e){this.session=e,this.timer=null,this.outgoingRequest=null,o.EventEmitter.call(this)}function s(){console.log("removeSubscriber()"),clearTimeout(this.timer),this.session.referSubscriber=null}t.exports=r;var l={expires:120},i=e("util"),o=e("events"),u=e("debug")("JsSIP:RTCSession:ReferSubscriber"),a=e("../Constants"),c=e("../Grammar"),h=e("./Request");i.inherits(r,o.EventEmitter),r.prototype.sendRefer=function(e,t){u("sendRefer()");var n,r,i,o=null,c=this;t=t||{},n=t.extraHeaders?t.extraHeaders.slice():[],r=t.eventHandlers||{};for(var d in r)this.on(d,r[d]);t.replaces&&(o=t.replaces.request.call_id,o+=";to-tag="+t.replaces.to_tag,o+=";from-tag="+t.replaces.from_tag,o=encodeURIComponent(o)),i="Refer-To: <"+e+(o?"?Replaces="+o:"")+">",n.push(i);var p=new h(this.session,a.REFER);this.timer=setTimeout(function(){s.call(c)},1e3*l.expires),p.send({extraHeaders:n,eventHandlers:{onSuccessResponse:function(e){c.emit("requestSucceeded",{response:e})},onErrorResponse:function(e){c.emit("requestFailed",{response:e,cause:a.causes.REJECTED})},onTransportError:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.CONNECTION_ERROR})},onRequestTimeout:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.REQUEST_TIMEOUT})},onDialogError:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.DIALOG_ERROR})}}}),this.outgoingRequest=p.outgoingRequest},r.prototype.receiveNotify=function(e){u("receiveNotify()");var t;if(e.body){if(t=c.parse(e.body,"Status_Line"),-1===t)return void u('receiveNotify() | error parsing NOTIFY body: "'+e.body+'"');switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):s.call(this),this.emit("accepted",{request:e,status_line:t});break;default:s.call(this),this.emit("failed",{request:e,status_line:t})}}}},{"../Constants":1,"../Grammar":6,"./Request":15,debug:33,events:28,util:32}],15:[function(e,t,n){function r(e,t){if(s("new | %s",t),this.session=e,this.method=t,this.outgoingRequest=null,this.session.status!==u.C.STATUS_1XX_RECEIVED&&this.session.status!==u.C.STATUS_WAITING_FOR_ANSWER&&this.session.status!==u.C.STATUS_WAITING_FOR_ACK&&this.session.status!==u.C.STATUS_CONFIRMED&&this.session.status!==u.C.STATUS_TERMINATED)throw new o.InvalidStateError(this.session.status);if(this.session.status===u.C.STATUS_TERMINATED&&t!==i.BYE)throw new o.InvalidStateError(this.session.status)}t.exports=r;var s=e("debug")("JsSIP:RTCSession:Request"),l=e("debug")("JsSIP:ERROR:RTCSession:Request");l.log=console.warn.bind(console);var i=e("../Constants"),o=e("../Exceptions"),u=e("../RTCSession");r.prototype.send=function(e){e=e||{};var t=e.extraHeaders&&e.extraHeaders.slice()||[],n=e.body||null;this.eventHandlers=e.eventHandlers||{},this.outgoingRequest=this.session.dialog.sendRequest(this,this.method,{extraHeaders:t,body:n})},r.prototype.receiveResponse=function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):s("onProgressResponse"),this.eventHandlers.onProgressResponse&&this.eventHandlers.onProgressResponse(e);break;case/^2[0-9]{2}$/.test(e.status_code):s("onSuccessResponse"),this.eventHandlers.onSuccessResponse&&this.eventHandlers.onSuccessResponse(e);break;default:s("onErrorResponse"),this.eventHandlers.onErrorResponse&&this.eventHandlers.onErrorResponse(e)}},r.prototype.onRequestTimeout=function(){l("onRequestTimeout"),this.eventHandlers.onRequestTimeout&&this.eventHandlers.onRequestTimeout()},r.prototype.onTransportError=function(){l("onTransportError"),this.eventHandlers.onTransportError&&this.eventHandlers.onTransportError()},r.prototype.onDialogError=function(){l("onDialogError"),this.eventHandlers.onDialogError&&this.eventHandlers.onDialogError()}},{"../Constants":1,"../Exceptions":5,"../RTCSession":11,debug:33}],16:[function(e,t,n){function r(e,t){var n=1;this.ua=e,this.transport=t,this.registrar=e.configuration.registrar_server,this.expires=e.configuration.register_expires,this.call_id=l.createRandomToken(22),this.cseq=0,this.to_uri=e.configuration.uri,this.registrationTimer=null,this.registered=!1,this.contact=this.ua.contact.toString(),this.contact+=";+sip.ice",this.extraHeaders=[],this.extraContactParams="",n&&(this.contact+=";reg-id="+n,this.contact+=';+sip.instance="<urn:uuid:'+this.ua.configuration.instance_id+'>"')}t.exports=r;var s=e("debug")("JsSIP:Registrator"),l=e("./Utils"),i=e("./Constants"),o=e("./SIPMessage"),u=e("./RequestSender");r.prototype={setExtraHeaders:function(e){Array.isArray(e)||(e=[]),this.extraHeaders=e.slice()},setExtraContactParams:function(e){e instanceof Object||(e={}),this.extraContactParams="";for(var t in e){var n=e[t];this.extraContactParams+=";"+t,n&&(this.extraContactParams+="="+n)}},register:function(){var e,t,n,r=this;n=this.extraHeaders.slice(),n.push("Contact: "+this.contact+";expires="+this.expires+this.extraContactParams),n.push("Expires: "+this.expires),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},n),e=new u(this,this.ua),this.receiveResponse=function(e){var n,o,u=e.getHeaders("contact").length;if(e.cseq===this.cseq)switch(null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):if(e.hasHeader("expires")&&(o=e.getHeader("expires")),!u){s("no Contact header in response to REGISTER, response ignored");break}for(;u--;){if(n=e.parseHeader("contact",u),n.uri.user===this.ua.contact.uri.user){o=n.getParam("expires");break}n=null}if(!n){s("no Contact header pointing to us, response ignored");break}o||(o=this.expires),this.registrationTimer=setTimeout(function(){r.registrationTimer=null,r.register()},1e3*o-3e3),n.hasParam("temp-gruu")&&(this.ua.contact.temp_gruu=n.getParam("temp-gruu").replace(/"/g,"")),n.hasParam("pub-gruu")&&(this.ua.contact.pub_gruu=n.getParam("pub-gruu").replace(/"/g,"")),this.registered||(this.registered=!0,this.ua.registered({response:e}));break;case/^423$/.test(e.status_code):e.hasHeader("min-expires")?(this.expires=e.getHeader("min-expires"),this.register()):(s("423 response received for REGISTER without Min-Expires"),this.registrationFailure(e,i.causes.SIP_FAILURE_CODE));break;default:t=l.sipErrorCause(e.status_code),this.registrationFailure(e,t)}},this.onRequestTimeout=function(){this.registrationFailure(null,i.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.registrationFailure(null,i.causes.CONNECTION_ERROR)},e.send()},unregister:function(e){var t;if(!this.registered)return void s("already unregistered");e=e||{},this.registered=!1,null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),t=this.extraHeaders.slice(),e.all?(t.push("Contact: *"+this.extraContactParams),t.push("Expires: 0"),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},t)):(t.push("Contact: "+this.contact+";expires=0"+this.extraContactParams),t.push("Expires: 0"),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},t));var n=new u(this,this.ua);this.receiveResponse=function(e){var t;switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this.unregistered(e);break;default:t=l.sipErrorCause(e.status_code),this.unregistered(e,t)}},this.onRequestTimeout=function(){this.unregistered(null,i.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.unregistered(null,i.causes.CONNECTION_ERROR)},n.send()},registrationFailure:function(e,t){this.ua.registrationFailed({response:e||null,cause:t}),this.registered&&(this.registered=!1,this.ua.unregistered({response:e||null,cause:t}))},unregistered:function(e,t){this.registered=!1,this.ua.unregistered({response:e||null,cause:t||null})},onTransportClosed:function(){null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),this.registered&&(this.registered=!1,this.ua.unregistered({}))},close:function(){this.registered&&this.unregister()}}},{"./Constants":1,"./RequestSender":17,"./SIPMessage":18,"./Utils":25,debug:33}],17:[function(e,t,n){function r(e,t){this.ua=t,this.applicant=e,this.method=e.request.method,this.request=e.request,this.auth=null,this.challenged=!1,this.staled=!1,t.status!==i.C.STATUS_USER_CLOSED||this.method===l.BYE&&this.method===l.ACK||this.onTransportError()}t.exports=r;var s=e("debug")("JsSIP:RequestSender"),l=e("./Constants"),i=e("./UA"),o=e("./DigestAuthentication"),u=e("./Transactions");r.prototype={send:function(){switch(this.method){case"INVITE":this.clientTransaction=new u.InviteClientTransaction(this,this.request,this.ua.transport);break;case"ACK":this.clientTransaction=new u.AckClientTransaction(this,this.request,this.ua.transport);break;default:this.clientTransaction=new u.NonInviteClientTransaction(this,this.request,this.ua.transport)}this.clientTransaction.send()},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(e){var t,n,r,i=e.status_code;if(401!==i&&407!==i||null===this.ua.configuration.password&&null===this.ua.configuration.ha1)this.applicant.receiveResponse(e);else{if(401===e.status_code?(n=e.parseHeader("www-authenticate"),r="authorization"):(n=e.parseHeader("proxy-authenticate"),r="proxy-authorization"),!n)return s(e.status_code+" with wrong or missing challenge, cannot authenticate"),void this.applicant.receiveResponse(e);if(!this.challenged||!this.staled&&n.stale===!0){if(this.auth||(this.auth=new o({username:this.ua.configuration.authorization_user,password:this.ua.configuration.password,realm:this.ua.configuration.realm,ha1:this.ua.configuration.ha1})),!this.auth.authenticate(this.request,n))return void this.applicant.receiveResponse(e);this.challenged=!0,this.ua.set("realm",this.auth.get("realm")),this.ua.set("ha1",this.auth.get("ha1")),n.stale&&(this.staled=!0),t=e.method===l.REGISTER?this.applicant.cseq+=1:this.request.dialog?this.request.dialog.local_seqnum+=1:this.request.cseq+1,this.request=this.request.clone(),this.request.cseq=t,this.request.setHeader("cseq",t+" "+this.method),this.request.setHeader(r,this.auth.toString()),this.send()}else this.applicant.receiveResponse(e)}}}},{"./Constants":1,"./DigestAuthentication":4,"./Transactions":21,"./UA":23,debug:33}],18:[function(e,t,n){function r(e,t,n,r,s,l){var i,o,u,d;return r=r||{},e&&t&&n?(this.ua=n,this.headers={},this.method=e,this.ruri=t,this.body=l,this.extraHeaders=s&&s.slice()||[],r.route_set?this.setHeader("route",r.route_set):n.configuration.use_preloaded_route&&this.setHeader("route","<"+n.transport.sip_uri+";lr>"),this.setHeader("via",""),this.setHeader("max-forwards",a.MAX_FORWARDS),i=r.to_display_name||0===r.to_display_name?'"'+r.to_display_name+'" ':"",i+="<"+(r.to_uri||t)+">",i+=r.to_tag?";tag="+r.to_tag:"",this.to=new h.parse(i),this.setHeader("to",i),o=r.from_display_name||0===r.from_display_name?'"'+r.from_display_name+'" ':n.configuration.display_name?'"'+n.configuration.display_name+'" ':"",o+="<"+(r.from_uri||n.configuration.uri)+">;tag=",o+=r.from_tag||c.newTag(),this.from=new h.parse(o),this.setHeader("from",o),u=r.call_id||n.configuration.jssip_id+c.createRandomToken(15),this.call_id=u,this.setHeader("call-id",u),d=r.cseq||Math.floor(1e4*Math.random()),this.cseq=d,void this.setHeader("cseq",d+" "+e)):null}function s(){this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}function l(e){this.ua=e,this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null}function i(){this.headers={},this.status_code=null,this.reason_phrase=null}t.exports={OutgoingRequest:r,IncomingRequest:l,IncomingResponse:i};var o=e("debug")("JsSIP:SIPMessage"),u=e("sdp-transform"),a=e("./Constants"),c=e("./Utils"),h=e("./NameAddrHeader"),d=e("./Grammar");r.prototype={setHeader:function(e,t){var n,r;for(n=new RegExp("^\\s*"+e+"\\s*:","i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[c.headerize(e)]=Array.isArray(t)?t:[t]},getHeader:function(e){var t,n,r=this.extraHeaders.length,s=this.headers[c.headerize(e)];if(s){if(s[0])return s[0]}else for(t=new RegExp("^\\s*"+e+"\\s*:","i"),n=0;r>n;n++)if(s=this.extraHeaders[n],t.test(s))return s.substring(s.indexOf(":")+1).trim()},getHeaders:function(e){var t,n,r,s=this.headers[c.headerize(e)],l=[];if(s){for(n=s.length,t=0;n>t;t++)l.push(s[t]);return l}for(n=this.extraHeaders.length,r=new RegExp("^\\s*"+e+"\\s*:","i"),t=0;n>t;t++)s=this.extraHeaders[t],r.test(s)&&l.push(s.substring(s.indexOf(":")+1).trim());return l},hasHeader:function(e){var t,n,r=this.extraHeaders.length;if(this.headers[c.headerize(e)])return!0;for(t=new RegExp("^\\s*"+e+"\\s*:","i"),n=0;r>n;n++)if(t.test(this.extraHeaders[n]))return!0;return!1},parseSDP:function(e){return!e&&this.sdp?this.sdp:(this.sdp=u.parse(this.body||""),this.sdp)},toString:function(){var e,t,n,r="",s=[];r+=this.method+" "+this.ruri+" SIP/2.0\r\n";for(e in this.headers)for(t=this.headers[e].length,n=0;t>n;n++)r+=e+": "+this.headers[e][n]+"\r\n";for(t=this.extraHeaders.length,n=0;t>n;n++)r+=this.extraHeaders[n].trim()+"\r\n";switch(this.method){case a.REGISTER:s.push("path","gruu");break;case a.INVITE:this.ua.configuration.session_timers&&s.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&s.push("gruu"),s.push("ice","replaces");break;case a.UPDATE:this.ua.configuration.session_timers&&s.push("timer"),s.push("ice")}return s.push("outbound"),r+="Allow: "+a.ALLOWED_METHODS+"\r\n",r+="Supported: "+s+"\r\n",r+="User-Agent: "+a.USER_AGENT+"\r\n",this.body?(t=c.str_utf8_length(this.body),r+="Content-Length: "+t+"\r\n\r\n",r+=this.body):r+="Content-Length: 0\r\n\r\n",r},clone:function(){var e=new r(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach(function(t){e.headers[t]=this.headers[t].slice()},this),e.body=this.body,e.extraHeaders=this.extraHeaders&&this.extraHeaders.slice()||[],e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e}},s.prototype={addHeader:function(e,t){var n={raw:t};e=c.headerize(e),this.headers[e]?this.headers[e].push(n):this.headers[e]=[n]},getHeader:function(e){var t=this.headers[c.headerize(e)];if(t)return t[0]?t[0].raw:void 0},getHeaders:function(e){var t,n,r=this.headers[c.headerize(e)],s=[];if(!r)return[];for(n=r.length,t=0;n>t;t++)s.push(r[t].raw);return s},hasHeader:function(e){return!!this.headers[c.headerize(e)]},parseHeader:function(e,t){var n,r,s;return e=c.headerize(e),t=t||0,this.headers[e]?t>=this.headers[e].length?void o('not so many "'+e+'" headers present'):(n=this.headers[e][t],r=n.raw,n.parsed?n.parsed:(s=d.parse(r,e.replace(/-/g,"_")),-1===s?(this.headers[e].splice(t,1),void o('error parsing "'+e+'" header field with value "'+r+'"')):(n.parsed=s,s))):void o('header "'+e+'" not present')},s:function(e,t){return this.parseHeader(e,t)},setHeader:function(e,t){var n={raw:t};this.headers[c.headerize(e)]=[n]},parseSDP:function(e){return!e&&this.sdp?this.sdp:(this.sdp=u.parse(this.body||""),this.sdp)},toString:function(){return this.data}},l.prototype=new s,l.prototype.reply=function(e,t,n,r,s,l){var i,o,u,h,d,p=[],f=this.getHeader("To"),m=0,g=0;if(e=e||null,t=t||null,!e||100>e||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);if(t=t||a.REASON_PHRASE[e]||"",n=n&&n.slice()||[],d="SIP/2.0 "+e+" "+t+"\r\n",this.method===a.INVITE&&e>100&&200>=e)for(i=this.getHeaders("record-route"),u=i.length,m;u>m;m++)d+="Record-Route: "+i[m]+"\r\n";for(o=this.getHeaders("via"),u=o.length,g;u>g;g++)d+="Via: "+o[g]+"\r\n";for(!this.to_tag&&e>100?f+=";tag="+c.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(f+=";tag="+this.to_tag),
d+="To: "+f+"\r\n",d+="From: "+this.getHeader("From")+"\r\n",d+="Call-ID: "+this.call_id+"\r\n",d+="CSeq: "+this.cseq+" "+this.method+"\r\n",u=n.length,h=0;u>h;h++)d+=n[h].trim()+"\r\n";switch(this.method){case a.INVITE:this.ua.configuration.session_timers&&p.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&p.push("gruu"),p.push("ice","replaces");break;case a.UPDATE:this.ua.configuration.session_timers&&p.push("timer"),r&&p.push("ice"),p.push("replaces")}p.push("outbound"),this.method===a.OPTIONS?(d+="Allow: "+a.ALLOWED_METHODS+"\r\n",d+="Accept: "+a.ACCEPTED_BODY_TYPES+"\r\n"):405===e?d+="Allow: "+a.ALLOWED_METHODS+"\r\n":415===e&&(d+="Accept: "+a.ACCEPTED_BODY_TYPES+"\r\n"),d+="Supported: "+p+"\r\n",r?(u=c.str_utf8_length(r),d+="Content-Type: application/sdp\r\n",d+="Content-Length: "+u+"\r\n\r\n",d+=r):d+="Content-Length: 0\r\n\r\n",this.server_transaction.receiveResponse(e,d,s,l)},l.prototype.reply_sl=function(e,t){var n,r,s=0,l=this.getHeaders("via"),i=l.length;if(e=e||null,t=t||null,!e||100>e||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);for(t=t||a.REASON_PHRASE[e]||"",r="SIP/2.0 "+e+" "+t+"\r\n",s;i>s;s++)r+="Via: "+l[s]+"\r\n";n=this.getHeader("To"),!this.to_tag&&e>100?n+=";tag="+c.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(n+=";tag="+this.to_tag),r+="To: "+n+"\r\n",r+="From: "+this.getHeader("From")+"\r\n",r+="Call-ID: "+this.call_id+"\r\n",r+="CSeq: "+this.cseq+" "+this.method+"\r\n",r+="Content-Length: 0\r\n\r\n",this.transport.send(r)},i.prototype=new s},{"./Constants":1,"./Grammar":6,"./NameAddrHeader":9,"./Utils":25,debug:33,"sdp-transform":44}],19:[function(e,t,n){function r(){}t.exports=r;var s=e("./Utils"),l=e("./Grammar"),i=e("debug")("JsSIP:ERROR:Socket");r.isSocket=function(e){if("undefined"==typeof e)return i("undefined JsSIP.Socket instance"),!1;try{if(!s.isString(e.url))throw i("missing or invalid JsSIP.Socket url property"),new Error;if(!s.isString(e.via_transport))throw i("missing or invalid JsSIP.Socket via_transport property"),new Error;if(-1===l.parse(e.sip_uri,"SIP_URI"))throw i("missing or invalid JsSIP.Socket sip_uri property"),new Error}catch(t){return!1}try{["connect","disconnect","send"].forEach(function(t){if(!s.isFunction(e[t]))throw i("missing or invalid JsSIP.Socket method: "+t),new Error})}catch(t){return!1}return!0}},{"./Grammar":6,"./Utils":25,debug:33}],20:[function(e,t,n){var r=500,s=4e3,l=5e3,i={T1:r,T2:s,T4:l,TIMER_B:64*r,TIMER_D:0*r,TIMER_F:64*r,TIMER_H:64*r,TIMER_I:0*r,TIMER_J:0*r,TIMER_K:0*l,TIMER_L:64*r,TIMER_M:64*r,PROVISIONAL_RESPONSE_INTERVAL:6e4};t.exports=i},{}],21:[function(e,t,n){function r(e,t,n){var r;this.type=a.NON_INVITE_CLIENT,this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),this.request_sender.ua.newTransaction(this),h.EventEmitter.call(this)}function s(e,t,n){var r,s=this;this.type=a.INVITE_CLIENT,this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),this.request_sender.ua.newTransaction(this),this.request.cancel=function(e){s.cancel_request(s,e)},h.EventEmitter.call(this)}function l(e,t,n){var r;this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),h.EventEmitter.call(this)}function i(e,t){this.type=a.NON_INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.state=a.STATUS_TRYING,t.newTransaction(this),h.EventEmitter.call(this)}function o(e,t){this.type=a.INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.state=a.STATUS_PROCEEDING,t.newTransaction(this),this.resendProvisionalTimer=null,e.reply(100),h.EventEmitter.call(this)}function u(e,t){var n;switch(t.method){case T.INVITE:if(n=e.transactions.ist[t.via_branch]){switch(n.state){case a.STATUS_PROCEEDING:n.transport.send(n.last_response);break;case a.STATUS_ACCEPTED:}return!0}break;case T.ACK:if(n=e.transactions.ist[t.via_branch],!n)return!1;if(n.state===a.STATUS_ACCEPTED)return!1;if(n.state===a.STATUS_COMPLETED)return n.state=a.STATUS_CONFIRMED,n.I=setTimeout(function(){n.timer_I()},_.TIMER_I),!0;break;case T.CANCEL:return n=e.transactions.ist[t.via_branch],n?(t.reply_sl(200),n.state!==a.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(n=e.transactions.nist[t.via_branch]){switch(n.state){case a.STATUS_TRYING:break;case a.STATUS_PROCEEDING:case a.STATUS_COMPLETED:n.transport.send(n.last_response)}return!0}}}t.exports={C:null,NonInviteClientTransaction:r,InviteClientTransaction:s,AckClientTransaction:l,NonInviteServerTransaction:i,InviteServerTransaction:o,checkTransaction:u};var a={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"};t.exports.C=a;var c=e("util"),h=e("events"),d=e("debug")("JsSIP:NonInviteClientTransaction"),p=e("debug")("JsSIP:InviteClientTransaction"),f=e("debug")("JsSIP:AckClientTransaction"),m=e("debug")("JsSIP:NonInviteServerTransaction"),g=e("debug")("JsSIP:InviteServerTransaction"),T=e("./Constants"),_=e("./Timers");c.inherits(r,h.EventEmitter),r.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},r.prototype.send=function(){var e=this;this.stateChanged(a.STATUS_TRYING),this.F=setTimeout(function(){e.timer_F()},_.TIMER_F),this.transport.send(this.request)||this.onTransportError()},r.prototype.onTransportError=function(){d("transport error occurred, deleting transaction "+this.id),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onTransportError()},r.prototype.timer_F=function(){d("Timer F expired for transaction "+this.id),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout()},r.prototype.timer_K=function(){this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},r.prototype.receiveResponse=function(e){var t=this,n=e.status_code;if(200>n)switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_PROCEEDING),this.request_sender.receiveResponse(e)}else switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.request_sender.onRequestTimeout():this.request_sender.receiveResponse(e),this.K=setTimeout(function(){t.timer_K()},_.TIMER_K);break;case a.STATUS_COMPLETED:}},c.inherits(s,h.EventEmitter),s.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},s.prototype.send=function(){var e=this;this.stateChanged(a.STATUS_CALLING),this.B=setTimeout(function(){e.timer_B()},_.TIMER_B),this.transport.send(this.request)||this.onTransportError()},s.prototype.onTransportError=function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==a.STATUS_ACCEPTED&&(p("transport error occurred, deleting transaction "+this.id),this.request_sender.onTransportError()),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},s.prototype.timer_M=function(){p("Timer M expired for transaction "+this.id),this.state===a.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this))},s.prototype.timer_B=function(){p("Timer B expired for transaction "+this.id),this.state===a.STATUS_CALLING&&(this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout())},s.prototype.timer_D=function(){p("Timer D expired for transaction "+this.id),clearTimeout(this.B),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},s.prototype.sendACK=function(e){var t=this;this.ack="ACK "+this.request.ruri+" SIP/2.0\r\n",this.ack+="Via: "+this.request.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.ack+="Route: "+this.request.headers.Route.toString()+"\r\n"),this.ack+="To: "+e.getHeader("to")+"\r\n",this.ack+="From: "+this.request.headers.From.toString()+"\r\n",this.ack+="Call-ID: "+this.request.headers["Call-ID"].toString()+"\r\n",this.ack+="CSeq: "+this.request.headers.CSeq.toString().split(" ")[0],this.ack+=" ACK\r\n",this.ack+="Content-Length: 0\r\n\r\n",this.D=setTimeout(function(){t.timer_D()},_.TIMER_D),this.transport.send(this.ack)},s.prototype.cancel_request=function(e,t){var n=e.request;this.cancel=T.CANCEL+" "+n.ruri+" SIP/2.0\r\n",this.cancel+="Via: "+n.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.cancel+="Route: "+n.headers.Route.toString()+"\r\n"),this.cancel+="To: "+n.headers.To.toString()+"\r\n",this.cancel+="From: "+n.headers.From.toString()+"\r\n",this.cancel+="Call-ID: "+n.headers["Call-ID"].toString()+"\r\n",this.cancel+="CSeq: "+n.headers.CSeq.toString().split(" ")[0]+" CANCEL\r\n",t&&(this.cancel+="Reason: "+t+"\r\n"),this.cancel+="Content-Length: 0\r\n\r\n",this.state===a.STATUS_PROCEEDING&&this.transport.send(this.cancel)},s.prototype.receiveResponse=function(e){var t=this,n=e.status_code;if(n>=100&&199>=n)switch(this.state){case a.STATUS_CALLING:this.stateChanged(a.STATUS_PROCEEDING),this.request_sender.receiveResponse(e);break;case a.STATUS_PROCEEDING:this.request_sender.receiveResponse(e)}else if(n>=200&&299>=n)switch(this.state){case a.STATUS_CALLING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_ACCEPTED),this.M=setTimeout(function(){t.timer_M()},_.TIMER_M),this.request_sender.receiveResponse(e);break;case a.STATUS_ACCEPTED:this.request_sender.receiveResponse(e)}else if(n>=300&&699>=n)switch(this.state){case a.STATUS_CALLING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),this.sendACK(e),this.request_sender.receiveResponse(e);break;case a.STATUS_COMPLETED:this.sendACK(e)}},c.inherits(l,h.EventEmitter),l.prototype.send=function(){this.transport.send(this.request)||this.onTransportError()},l.prototype.onTransportError=function(){f("transport error occurred for transaction "+this.id),this.request_sender.onTransportError()},c.inherits(i,h.EventEmitter),i.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},i.prototype.timer_J=function(){m("Timer J expired for transaction "+this.id),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this)},i.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,m("transport error occurred, deleting transaction "+this.id),clearTimeout(this.J),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},i.prototype.receiveResponse=function(e,t,n,r){var s=this;if(100===e)switch(this.state){case a.STATUS_TRYING:this.stateChanged(a.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case a.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=200&&699>=e)switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout(function(){s.timer_J()},_.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r());break;case a.STATUS_COMPLETED:}},c.inherits(o,h.EventEmitter),o.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},o.prototype.timer_H=function(){g("Timer H expired for transaction "+this.id),this.state===a.STATUS_COMPLETED&&g("ACK not received, dialog will be terminated"),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this)},o.prototype.timer_I=function(){this.stateChanged(a.STATUS_TERMINATED)},o.prototype.timer_L=function(){g("Timer L expired for transaction "+this.id),this.state===a.STATUS_ACCEPTED&&(this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},o.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,g("transport error occurred, deleting transaction "+this.id),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},o.prototype.resend_provisional=function(){this.transport.send(this.last_response)||this.onTransportError()},o.prototype.receiveResponse=function(e,t,n,r){var s=this;if(e>=100&&199>=e)switch(this.state){case a.STATUS_PROCEEDING:this.transport.send(t)||this.onTransportError(),this.last_response=t}if(e>100&&199>=e&&this.state===a.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval(function(){s.resend_provisional()},_.PROVISIONAL_RESPONSE_INTERVAL));else if(e>=200&&299>=e)switch(this.state){case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout(function(){s.timer_L()},_.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case a.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=300&&699>=e)switch(this.state){case a.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(a.STATUS_COMPLETED),this.H=setTimeout(function(){s.timer_H()},_.TIMER_H),n&&n()):(this.onTransportError(),r&&r())}}},{"./Constants":1,"./Timers":20,debug:33,events:28,util:32}],22:[function(e,t,n){function r(e,t){if(c("new()"),this.status=d.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=t||d.recovery_options,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1,"undefined"==typeof e)throw new TypeError("Invalid argument. undefined 'sockets' argument");e instanceof Array||(e=[e]),e.forEach(function(e){if(!a.isSocket(e.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(e.weight&&!Number(e.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:e.socket,weight:e.weight||0,status:d.SOCKET_STATUS_READY})},this),Object.defineProperties(this,{via_transport:{get:function(){return this.socket.via_transport}},url:{get:function(){return this.socket.url}},sip_uri:{get:function(){return this.socket.sip_uri}}}),u.call(this)}function s(){this.recover_attempts=0,this.status=d.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}function l(e,t,n){this.status=d.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:t,reason:n}),this.close_requested||(e&&(this.socket.status=d.SOCKET_STATUS_ERROR),o.call(this,e))}function i(e){if("\r\n"===e)return void c("received message with CRLF Keep Alive response");if("string"!=typeof e){try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(t){return void c("received binary message failed to be converted into string, message discarded")}c("received binary message:\n\n"+e+"\n")}else c("received text message:\n\n"+e+"\n");this.ondata({transport:this,message:e})}function o(){var e,t=this;this.recover_attempts+=1,e=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1),e<this.recovery_options.min_interval?e=this.recovery_options.min_interval:e>this.recovery_options.max_interval&&(e=this.recovery_options.max_interval),c("reconnection attempt: "+this.recover_attempts+". next connection attempt in "+e+" seconds"),this.recovery_timer=setTimeout(function(){t.close_requested||t.isConnected()||t.isConnecting()||(u.call(t),t.connect())},1e3*e)}function u(){var e=[];if(this.sockets.forEach(function(t){t.status!==d.SOCKET_STATUS_ERROR&&(0===e.length?e.push(t):t.weight>e[0].weight?e=[t]:t.weight===e[0].weight&&e.push(t))}),0===e.length)return this.sockets.forEach(function(e){e.status=d.SOCKET_STATUS_READY}),void u.call(this);var t=Math.floor(Math.random()*e.length);this.socket=e[t].socket}t.exports=r;var a=e("./Socket"),c=e("debug")("JsSIP:Transport"),h=e("debug")("JsSIP:ERROR:Transport"),d={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:2,max_interval:30}};r.prototype.connect=function(){return c("connect()"),this.isConnected()?void c("Transport is already connected"):this.isConnecting()?void c("Transport is connecting"):(this.close_requested=!1,this.status=d.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),void(this.close_requested||(this.socket.onconnect=s.bind(this),this.socket.ondisconnect=l.bind(this),this.socket.ondata=i.bind(this),this.socket.connect())))},r.prototype.disconnect=function(){c("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=d.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect()},r.prototype.send=function(e){if(c("send()"),!this.isConnected())return h("unable to send message, transport is not connected"),!1;var t=e.toString();return c("sending message:\n\n"+t+"\n"),this.socket.send(t)},r.prototype.isConnected=function(){return this.status===d.STATUS_CONNECTED},r.prototype.isConnecting=function(){return this.status===d.STATUS_CONNECTING}},{"./Socket":19,debug:33}],23:[function(e,t,n){function r(e){if(this.cache={credentials:{}},this.configuration={},this.dynConfiguration={},this.dialogs={},this.applicants={},this.sessions={},this.transport=null,this.contact=null,this.status=u.STATUS_INIT,this.error=null,this.transactions={nist:{},nict:{},ist:{},ict:{}},this.data={},Object.defineProperties(this,{transactionsCount:{get:function(){var e,t=["nist","nict","ist","ict"],n=0;for(e in t)n+=Object.keys(this.transactions[t[e]]).length;return n}},nictTransactionsCount:{get:function(){return Object.keys(this.transactions.nict).length}},nistTransactionsCount:{get:function(){return Object.keys(this.transactions.nist).length}},ictTransactionsCount:{get:function(){return Object.keys(this.transactions.ict).length}},istTransactionsCount:{get:function(){return Object.keys(this.transactions.ist).length}}}),void 0===e)throw new TypeError("Not enough arguments");try{this.loadConfig(e)}catch(t){throw this.status=u.STATUS_NOT_READY,this.error=u.CONFIGURATION_ERROR,t}this._registrator=new m(this),c.EventEmitter.call(this),p.called||p()}function s(e){this.emit("connecting",e)}function l(e){this.status!==u.STATUS_USER_CLOSED&&(this.status=u.STATUS_READY,this.error=null,this.emit("connected",e),this.dynConfiguration.register&&this._registrator.register())}function i(e){var t,n,r,s=["nict","ict","nist","ist"];for(r=s.length,t=0;r>t;t++)for(n in this.transactions[s[t]])this.transactions[s[t]][n].onTransportError();this.emit("disconnected",e),this._registrator.onTransportClosed(),this.status!==u.STATUS_USER_CLOSED&&(this.status=u.STATUS_NOT_READY,this.error=u.NETWORK_ERROR)}function o(e){var t,n=e.transport,s=e.message;if(s=b.parseMessage(s,this),s&&!(this.status===r.C.STATUS_USER_CLOSED&&s instanceof I.IncomingRequest)&&w(s,this,n))if(s instanceof I.IncomingRequest)s.transport=n,this.receiveRequest(s);else if(s instanceof I.IncomingResponse)switch(s.method){case f.INVITE:t=this.transactions.ict[s.via_branch],t&&t.receiveResponse(s);break;case f.ACK:break;default:t=this.transactions.nict[s.via_branch],t&&t.receiveResponse(s)}}t.exports=r;var u={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};r.C=u;var a=e("util"),c=e("events"),h=e("debug")("JsSIP:UA"),d=e("debug")("JsSIP:ERROR:UA");d.log=console.warn.bind(console);var p=e("rtcninja"),f=e("./Constants"),m=e("./Registrator"),g=e("./RTCSession"),T=e("./Message"),_=e("./Transactions"),v=e("./Transport"),C=e("./WebSocketInterface"),S=e("./Socket"),E=e("./Utils"),A=e("./Exceptions"),y=e("./URI"),R=e("./Grammar"),b=e("./Parser"),I=e("./SIPMessage"),w=e("./sanityCheck");a.inherits(r,c.EventEmitter),r.prototype.start=function(){function e(){h("restarting UA"),t.status=u.STATUS_READY,t.transport.connect()}h("start()");var t=this;this.status===u.STATUS_INIT?this.transport.connect():this.status===u.STATUS_USER_CLOSED?this.isConnected()?this.once("disconnected",e):e():h(this.status===u.STATUS_READY?"UA is in READY status, not restarted":"ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this.dynConfiguration.register=this.configuration.register},r.prototype.register=function(){h("register()"),this.dynConfiguration.register=!0,this._registrator.register()},r.prototype.unregister=function(e){h("unregister()"),this.dynConfiguration.register=!1,this._registrator.unregister(e)},r.prototype.registrator=function(){return this._registrator},r.prototype.isRegistered=function(){return!!this._registrator.registered},r.prototype.isConnected=function(){return this.transport.isConnected()},r.prototype.call=function(e,t){h("call()");var n;return n=new g(this),n.connect(e,t),n},r.prototype.sendMessage=function(e,t,n){h("sendMessage()");var r;return r=new T(this),r.send(e,t,n),r},r.prototype.terminateSessions=function(e){h("terminateSessions()");for(var t in this.sessions)this.sessions[t].isEnded()||this.sessions[t].terminate(e)},r.prototype.stop=function(){h("stop()");var e,t,n,r=this;if(this.dynConfiguration={},this.status===u.STATUS_USER_CLOSED)return void h("UA already closed");this._registrator.close(),n=Object.keys(this.sessions).length;for(e in this.sessions){h("closing session "+e);try{this.sessions[e].terminate()}catch(s){}}for(t in this.applicants)try{this.applicants[t].close()}catch(s){}this.status=u.STATUS_USER_CLOSED,0===this.nistTransactionsCount&&0===this.nictTransactionsCount&&0===this.ictTransactionsCount&&0===this.istTransactionsCount&&0===n?r.transport.disconnect():setTimeout(function(){r.transport.disconnect()},2e3)},r.prototype.normalizeTarget=function(e){return E.normalizeTarget(e,this.configuration.hostport_params)},r.prototype.get=function(e){switch(e){case"realm":return this.configuration.realm;case"ha1":return this.configuration.ha1;default:return void d('get() | cannot get "%s" parameter in runtime',e)}return!0},r.prototype.set=function(e,t){switch(e){case"password":this.configuration.password=String(t);break;case"realm":this.configuration.realm=String(t);break;case"ha1":this.configuration.ha1=String(t),this.configuration.password=null;break;case"display_name":if(-1===R.parse('"'+t+'"',"display_name"))return d('set() | wrong "display_name"'),!1;this.configuration.display_name=t;break;default:return d('set() | cannot set "%s" parameter in runtime',e),!1}return!0},r.prototype.newTransaction=function(e){this.transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})},r.prototype.destroyTransaction=function(e){delete this.transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})},r.prototype.newMessage=function(e){this.emit("newMessage",e)},r.prototype.newRTCSession=function(e){this.emit("newRTCSession",e)},r.prototype.registered=function(e){this.emit("registered",e)},r.prototype.unregistered=function(e){this.emit("unregistered",e)},r.prototype.registrationFailed=function(e){this.emit("registrationFailed",e)},r.prototype.receiveRequest=function(e){var t,n,r,s,l=e.method;if(e.ruri.user!==this.configuration.uri.user&&e.ruri.user!==this.contact.uri.user)return h("Request-URI does not point to us"),void(e.method!==f.ACK&&e.reply_sl(404));if(e.ruri.scheme===f.SIPS)return void e.reply_sl(416);if(!_.checkTransaction(this,e)){if(l===f.INVITE?new _.InviteServerTransaction(e,this):l!==f.ACK&&l!==f.CANCEL&&new _.NonInviteServerTransaction(e,this),l===f.OPTIONS)e.reply(200);else if(l===f.MESSAGE){if(0===this.listeners("newMessage").length)return void e.reply(405);r=new T(this),r.init_incoming(e)}else if(l===f.INVITE&&!e.to_tag&&0===this.listeners("newRTCSession").length)return void e.reply(405);if(e.to_tag)t=this.findDialog(e.call_id,e.from_tag,e.to_tag),t?t.receiveRequest(e):l===f.NOTIFY?(n=this.findSession(e),n?n.receiveRequest(e):(h("received NOTIFY request for a non existent subscription"),e.reply(481,"Subscription does not exist"))):l!==f.ACK&&e.reply(481);else switch(l){case f.INVITE:p.hasWebRTC()?e.hasHeader("replaces")?(s=e.replaces,t=this.findDialog(s.call_id,s.from_tag,s.to_tag),t?(n=t.owner,n.isEnded()?e.reply(603):n.receiveRequest(e)):e.reply(481)):(n=new g(this),n.init_incoming(e)):(h("INVITE received but WebRTC is not supported"),e.reply(488));break;case f.BYE:e.reply(481);break;case f.CANCEL:n=this.findSession(e),n?n.receiveRequest(e):h("received CANCEL request for a non existent session");break;case f.ACK:break;default:e.reply(405)}}},r.prototype.findSession=function(e){var t=e.call_id+e.from_tag,n=this.sessions[t],r=e.call_id+e.to_tag,s=this.sessions[r];return n?n:s?s:null},r.prototype.findDialog=function(e,t,n){var r=e+t+n,s=this.dialogs[r];return s?s:(r=e+n+t,s=this.dialogs[r],s?s:null)},r.prototype.loadConfig=function(e){var t,n,u,a,c,p={via_host:E.createRandomToken(12)+".invalid",contact_uri:null,password:null,realm:null,ha1:null,register_expires:600,register:!0,registrar_server:null,use_preloaded_route:!1,no_answer_timeout:60,session_timers:!0};for(t in r.configuration_check.mandatory){if(!e.hasOwnProperty(t))throw new A.ConfigurationError(t);if(n=e[t],u=r.configuration_check.mandatory[t].call(this,n),void 0===u)throw new A.ConfigurationError(t,n);p[t]=u}for(t in r.configuration_check.optional)if(e.hasOwnProperty(t)){if(n=e[t],E.isEmpty(n))continue;if(u=r.configuration_check.optional[t].call(this,n,e),void 0===u)throw new A.ConfigurationError(t,n);p[t]=u}0===p.display_name&&(p.display_name="0"),p.instance_id||(p.instance_id=E.newUUID()),p.jssip_id=E.createRandomToken(5),a=p.uri.clone(),a.user=null,p.hostport_params=a.toString().replace(/^sip:/i,"");var f=[];if(p.ws_servers&&Array.isArray(p.ws_servers)&&(f=f.concat(p.ws_servers)),p.sockets&&Array.isArray(p.sockets)&&(f=f.concat(p.sockets)),0===f.length)throw new A.ConfigurationError("sockets");try{this.transport=new v(f,{max_interval:p.connection_recovery_max_interval,min_interval:p.connection_recovery_min_interval}),this.transport.onconnecting=s.bind(this),this.transport.onconnect=l.bind(this),this.transport.ondisconnect=i.bind(this),this.transport.ondata=o.bind(this),delete p.connection_recovery_max_interval,delete p.connection_recovery_min_interval,delete p.ws_servers,delete p.sockets}catch(m){throw d(m),new A.ConfigurationError("sockets",f)}p.authorization_user||(p.authorization_user=p.uri.user),p.registrar_server||(c=p.uri.clone(),c.user=null,c.clearParams(),c.clearHeaders(),p.registrar_server=c),p.no_answer_timeout=1e3*p.no_answer_timeout,p.contact_uri?p.via_host=p.contact_uri.host:p.contact_uri=new y("sip",E.createRandomToken(8),p.via_host,null,{transport:"ws"}),this.contact={pub_gruu:null,temp_gruu:null,uri:p.contact_uri,toString:function(e){e=e||{};var t=e.anonymous||null,n=e.outbound||null,r="<";return r+=t?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!n||(t?this.temp_gruu:this.pub_gruu)||(r+=";ob"),r+=">"}};for(t in p)r.configuration_skeleton[t].value=p[t];Object.defineProperties(this.configuration,r.configuration_skeleton);for(t in p)r.configuration_skeleton[t].value="";h("configuration parameters after validation:");for(t in p)switch(t){case"uri":case"registrar_server":h("- "+t+": "+p[t]);break;case"password":case"ha1":h("- "+t+": NOT SHOWN");break;default:h("- "+t+": "+JSON.stringify(p[t]))}},r.configuration_skeleton=function(){var e,t,n,r={},s=["jssip_id","hostport_params","uri","authorization_user","contact_uri","display_name","instance_id","no_answer_timeout","session_timers","password","realm","ha1","register_expires","registrar_server","sockets","use_preloaded_route","ws_servers","via_core_value","via_host"],l=["password","realm","ha1","display_name"];for(e in s)t=s[e],n=-1!==l.indexOf(t),r[t]={value:"",writable:n,configurable:!1};return r.register={value:"",writable:!0,configurable:!1},r}(),r.configuration_check={mandatory:{uri:function(e){var t;return/^sip:/i.test(e)||(e=f.SIP+":"+e),t=y.parse(e),t&&t.user?t:void 0}},optional:{authorization_user:function(e){return-1===R.parse('"'+e+'"',"quoted_string")?void 0:e},connection_recovery_max_interval:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},connection_recovery_min_interval:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},contact_uri:function(e){if("string"==typeof e){var t=R.parse(e,"SIP_URI");if(-1!==t)return t}},display_name:function(e){return-1===R.parse('"'+e+'"',"display_name")?void 0:e},instance_id:function(e){return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===R.parse(e,"uuid")?void 0:e},no_answer_timeout:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},session_timers:function(e){return"boolean"==typeof e?e:void 0},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){return"boolean"==typeof e?e:void 0},register_expires:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},registrar_server:function(e){var t;return/^sip:/i.test(e)||(e=f.SIP+":"+e),t=y.parse(e),t?t.user?void 0:t:void 0},sockets:function(e){var t,n;if(S.isSocket(e))e=[{socket:e}];else{if(!Array.isArray(e)||!e.length)return;for(n=e.length,t=0;n>t;t++)S.isSocket(e[t])&&(e[t]={socket:e[t]})}return e},use_preloaded_route:function(e){return"boolean"==typeof e?e:void 0},ws_servers:function(e){var t,n,r=[];if("string"==typeof e)e=[{ws_uri:e}];else{if(!Array.isArray(e)||!e.length)return;for(n=e.length,t=0;n>t;t++)"string"==typeof e[t]&&(e[t]={ws_uri:e[t]})}for(n=e.length,t=0;n>t;t++)try{r.push({socket:new C(e[t].ws_uri),weight:e[t].weight||0})}catch(s){return void d(s)}return r}}}},{"./Constants":1,"./Exceptions":5,"./Grammar":6,"./Message":8,"./Parser":10,"./RTCSession":11,"./Registrator":16,"./SIPMessage":18,"./Socket":19,"./Transactions":21,"./Transport":22,"./URI":24,"./Utils":25,"./WebSocketInterface":26,"./sanityCheck":27,debug:33,events:28,rtcninja:38,util:32}],24:[function(e,t,n){function r(e,t,n,r,l,i){var o,u;if(!n)throw new TypeError('missing or invalid "host" parameter');e=e||s.SIP,this.parameters={},this.headers={};for(o in l)this.setParam(o,l[o]);for(u in i)this.setHeader(u,i[u]);Object.defineProperties(this,{scheme:{get:function(){return e},set:function(t){e=t.toLowerCase()}},user:{get:function(){return t},set:function(e){t=e}},host:{get:function(){return n},set:function(e){n=e.toLowerCase()}},port:{get:function(){return r},set:function(e){r=0===e?e:parseInt(e,10)||null}}})}t.exports=r;var s=e("./Constants"),l=e("./Utils"),i=e("./Grammar");r.prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]="undefined"==typeof t||null===t?null:t.toString())},getParam:function(e){return e?this.parameters[e.toLowerCase()]:void 0},hasParam:function(e){return e?this.parameters.hasOwnProperty(e.toLowerCase())&&!0||!1:void 0},deleteParam:function(e){var t;return e=e.toLowerCase(),this.parameters.hasOwnProperty(e)?(t=this.parameters[e],delete this.parameters[e],t):void 0},clearParams:function(){this.parameters={}},setHeader:function(e,t){this.headers[l.headerize(e)]=Array.isArray(t)?t:[t]},getHeader:function(e){return e?this.headers[l.headerize(e)]:void 0;
},hasHeader:function(e){return e?this.headers.hasOwnProperty(l.headerize(e))&&!0||!1:void 0},deleteHeader:function(e){var t;return e=l.headerize(e),this.headers.hasOwnProperty(e)?(t=this.headers[e],delete this.headers[e],t):void 0},clearHeaders:function(){this.headers={}},clone:function(){return new r(this.scheme,this.user,this.host,this.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))},toString:function(){var e,t,n,r,s=[];r=this.scheme+":",this.user&&(r+=l.escapeUser(this.user)+"@"),r+=this.host,(this.port||0===this.port)&&(r+=":"+this.port);for(t in this.parameters)r+=";"+t,null!==this.parameters[t]&&(r+="="+this.parameters[t]);for(e in this.headers)for(n=0;n<this.headers[e].length;n++)s.push(e+"="+this.headers[e][n]);return s.length>0&&(r+="?"+s.join("&")),r},toAor:function(e){var t;return t=this.scheme+":",this.user&&(t+=l.escapeUser(this.user)+"@"),t+=this.host,e&&(this.port||0===this.port)&&(t+=":"+this.port),t}},r.parse=function(e){return e=i.parse(e,"SIP_URI"),-1!==e?e:void 0}},{"./Constants":1,"./Grammar":6,"./Utils":25}],25:[function(e,t,n){var r={};t.exports=r;var s=e("./Constants"),l=e("./URI"),i=e("./Grammar");r.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length},r.isFunction=function(e){return void 0!==e?"[object Function]"===Object.prototype.toString.call(e):!1},r.isString=function(e){return void 0!==e?"[object String]"===Object.prototype.toString.call(e):!1},r.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},r.isEmpty=function(e){return null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e)?!0:void 0},r.hasMethods=function(e){for(var t,n=1;t=arguments[n++];)if(this.isFunction(e[t]))return!1;return!0},r.createRandomToken=function(e,t){var n,r,s="";for(t=t||32,n=0;e>n;n++)r=Math.random()*t|0,s+=r.toString(t);return s},r.newTag=function(){return r.createRandomToken(10)},r.newUUID=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});return e},r.hostType=function(e){return e?(e=i.parse(e,"host"),-1!==e?e.host_type:void 0):void 0},r.normalizeTarget=function(e,t){var n,i,o,u;if(e){if(e instanceof l)return e;if("string"==typeof e){switch(i=e.split("@"),i.length){case 1:if(!t)return;o=e,u=t;break;case 2:o=i[0],u=i[1];break;default:o=i.slice(0,i.length-1).join("@"),u=i[i.length-1]}return o=o.replace(/^(sips?|tel):/i,""),/^[\-\.\(\)]*\+?[0-9\-\.\(\)]+$/.test(o)&&(o=o.replace(/[\-\.\(\)]/g,"")),e=s.SIP+":"+r.escapeUser(o)+"@"+u,(n=l.parse(e))?n:void 0}}else;},r.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},r.headerize=function(e){var t,n={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),s="",l=r.length;for(t=0;l>t;t++)0!==t&&(s+="-"),s+=r[t].charAt(0).toUpperCase()+r[t].substring(1);return n[s]&&(s=n[s]),s},r.sipErrorCause=function(e){var t;for(t in s.SIP_ERROR_CAUSES)if(-1!==s.SIP_ERROR_CAUSES[t].indexOf(e))return s.causes[t];return s.causes.SIP_FAILURE_CODE},r.getRandomTestNetIP=function(){function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}return"192.0.2."+e(1,254)},r.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,s,l,i;return s=2147483648&e,l=2147483648&t,n=1073741824&e,r=1073741824&t,i=(1073741823&e)+(1073741823&t),n&r?2147483648^i^s^l:n|r?1073741824&i?3221225472^i^s^l:1073741824^i^s^l:i^s^l}function r(e,t,n){return e&t|~e&n}function s(e,t,n){return e&n|t&~n}function l(e,t,n){return e^t^n}function i(e,t,n){return t^(e|~n)}function o(e,s,l,i,o,u,a){return e=n(e,n(n(r(s,l,i),o),a)),n(t(e,u),s)}function u(e,r,l,i,o,u,a){return e=n(e,n(n(s(r,l,i),o),a)),n(t(e,u),r)}function a(e,r,s,i,o,u,a){return e=n(e,n(n(l(r,s,i),o),a)),n(t(e,u),r)}function c(e,r,s,l,o,u,a){return e=n(e,n(n(i(r,s,l),o),a)),n(t(e,u),r)}function h(e){for(var t,n=e.length,r=n+8,s=(r-r%64)/64,l=16*(s+1),i=new Array(l-1),o=0,u=0;n>u;)t=(u-u%4)/4,o=u%4*8,i[t]=i[t]|e.charCodeAt(u)<<o,u++;return t=(u-u%4)/4,o=u%4*8,i[t]=i[t]|128<<o,i[l-2]=n<<3,i[l-1]=n>>>29,i}function d(e){var t,n,r="",s="";for(n=0;3>=n;n++)t=e>>>8*n&255,s="0"+t.toString(16),r+=s.substr(s.length-2,2);return r}function p(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var f,m,g,T,_,v,C,S,E,A=[],y=7,R=12,b=17,I=22,w=5,N=9,D=14,O=20,x=4,U=11,M=16,P=23,q=6,L=10,k=15,H=21;for(e=p(e),A=h(e),v=1732584193,C=4023233417,S=2562383102,E=271733878,f=0;f<A.length;f+=16)m=v,g=C,T=S,_=E,v=o(v,C,S,E,A[f+0],y,3614090360),E=o(E,v,C,S,A[f+1],R,3905402710),S=o(S,E,v,C,A[f+2],b,606105819),C=o(C,S,E,v,A[f+3],I,3250441966),v=o(v,C,S,E,A[f+4],y,4118548399),E=o(E,v,C,S,A[f+5],R,1200080426),S=o(S,E,v,C,A[f+6],b,2821735955),C=o(C,S,E,v,A[f+7],I,4249261313),v=o(v,C,S,E,A[f+8],y,1770035416),E=o(E,v,C,S,A[f+9],R,2336552879),S=o(S,E,v,C,A[f+10],b,4294925233),C=o(C,S,E,v,A[f+11],I,2304563134),v=o(v,C,S,E,A[f+12],y,1804603682),E=o(E,v,C,S,A[f+13],R,4254626195),S=o(S,E,v,C,A[f+14],b,2792965006),C=o(C,S,E,v,A[f+15],I,1236535329),v=u(v,C,S,E,A[f+1],w,4129170786),E=u(E,v,C,S,A[f+6],N,3225465664),S=u(S,E,v,C,A[f+11],D,643717713),C=u(C,S,E,v,A[f+0],O,3921069994),v=u(v,C,S,E,A[f+5],w,3593408605),E=u(E,v,C,S,A[f+10],N,38016083),S=u(S,E,v,C,A[f+15],D,3634488961),C=u(C,S,E,v,A[f+4],O,3889429448),v=u(v,C,S,E,A[f+9],w,568446438),E=u(E,v,C,S,A[f+14],N,3275163606),S=u(S,E,v,C,A[f+3],D,4107603335),C=u(C,S,E,v,A[f+8],O,1163531501),v=u(v,C,S,E,A[f+13],w,2850285829),E=u(E,v,C,S,A[f+2],N,4243563512),S=u(S,E,v,C,A[f+7],D,1735328473),C=u(C,S,E,v,A[f+12],O,2368359562),v=a(v,C,S,E,A[f+5],x,4294588738),E=a(E,v,C,S,A[f+8],U,2272392833),S=a(S,E,v,C,A[f+11],M,1839030562),C=a(C,S,E,v,A[f+14],P,4259657740),v=a(v,C,S,E,A[f+1],x,2763975236),E=a(E,v,C,S,A[f+4],U,1272893353),S=a(S,E,v,C,A[f+7],M,4139469664),C=a(C,S,E,v,A[f+10],P,3200236656),v=a(v,C,S,E,A[f+13],x,681279174),E=a(E,v,C,S,A[f+0],U,3936430074),S=a(S,E,v,C,A[f+3],M,3572445317),C=a(C,S,E,v,A[f+6],P,76029189),v=a(v,C,S,E,A[f+9],x,3654602809),E=a(E,v,C,S,A[f+12],U,3873151461),S=a(S,E,v,C,A[f+15],M,530742520),C=a(C,S,E,v,A[f+2],P,3299628645),v=c(v,C,S,E,A[f+0],q,4096336452),E=c(E,v,C,S,A[f+7],L,1126891415),S=c(S,E,v,C,A[f+14],k,2878612391),C=c(C,S,E,v,A[f+5],H,4237533241),v=c(v,C,S,E,A[f+12],q,1700485571),E=c(E,v,C,S,A[f+3],L,2399980690),S=c(S,E,v,C,A[f+10],k,4293915773),C=c(C,S,E,v,A[f+1],H,2240044497),v=c(v,C,S,E,A[f+8],q,1873313359),E=c(E,v,C,S,A[f+15],L,4264355552),S=c(S,E,v,C,A[f+6],k,2734768916),C=c(C,S,E,v,A[f+13],H,1309151649),v=c(v,C,S,E,A[f+4],q,4149444226),E=c(E,v,C,S,A[f+11],L,3174756917),S=c(S,E,v,C,A[f+2],k,718787259),C=c(C,S,E,v,A[f+9],H,3951481745),v=n(v,m),C=n(C,g),S=n(S,T),E=n(E,_);var F=d(v)+d(C)+d(S)+d(E);return F.toLowerCase()}},{"./Constants":1,"./Grammar":6,"./URI":24}],26:[function(e,t,n){function r(e){a("new()");var t=null,n=null;this.ws=null,Object.defineProperties(this,{via_transport:{get:function(){return n},set:function(e){n=e.toUpperCase()}},sip_uri:{get:function(){return t}},url:{get:function(){return e}}});var r=u.parse(e,"absoluteURI");if(-1===r)throw c("invalid WebSocket URI: "+e),new TypeError("Invalid argument: "+e);if("wss"!==r.scheme&&"ws"!==r.scheme)throw c("invalid WebSocket URI scheme: "+r.scheme),new TypeError("Invalid argument: "+e);t="sip:"+r.host+(r.port?":"+r.port:"")+";transport=ws",this.via_transport=r.scheme}function s(){a("WebSocket "+this.url+" connected"),this.onconnect()}function l(e){a("WebSocket "+this.url+" closed"),e.wasClean===!1&&a("WebSocket abrupt disconnection"),this.ondisconnect(e.wasClean,e.code,e.reason)}function i(e){a("received WebSocket message"),this.ondata(e.data)}function o(e){c("WebSocket "+this.url+" error: "+e)}t.exports=r;var u=e("./Grammar"),a=e("debug")("JsSIP:WebSocketInterface"),c=e("debug")("JsSIP:ERROR:WebSocketInterface");r.prototype.connect=function(){if(a("connect()"),this.isConnected())return void a("WebSocket "+this.url+" is already connected");if(this.isConnecting())return void a("WebSocket "+this.url+" is connecting");this.ws&&this.ws.close(),a("connecting to WebSocket "+this.url);try{this.ws=new WebSocket(this.url,"sip"),this.ws.binaryType="arraybuffer",this.ws.onopen=s.bind(this),this.ws.onclose=l.bind(this),this.ws.onmessage=i.bind(this),this.ws.onerror=o.bind(this)}catch(e){o.call(this,e)}},r.prototype.disconnect=function(){a("disconnect()"),this.ws&&(this.ws.close(),this.ws=null)},r.prototype.send=function(e){return a("send()"),this.isConnected()?(this.ws.send(e),!0):(c("unable to send message, WebSocket is not open"),!1)},r.prototype.isConnected=function(){return this.ws&&this.ws.readyState===this.ws.OPEN},r.prototype.isConnecting=function(){return this.ws&&this.ws.readyState===this.ws.CONNECTING}},{"./Grammar":6,debug:33}],27:[function(e,t,n){function r(e,t,n){var r,s;for(d=e,p=t,f=n,r=S.length;r--;)if(s=S[r](d),s===!1)return!1;if(d instanceof T.IncomingRequest){for(r=v.length;r--;)if(s=v[r](d),s===!1)return!1}else if(d instanceof T.IncomingResponse)for(r=C.length;r--;)if(s=C[r](d),s===!1)return!1;return!0}function s(){return"sip"!==d.s("to").uri.scheme?(h(416),!1):void 0}function l(){return d.to_tag||d.call_id.substr(0,5)!==p.configuration.jssip_id?void 0:(h(482),!1)}function i(){var e=_.str_utf8_length(d.body),t=d.getHeader("content-length");return t>e?(h(400),!1):void 0}function o(){var e,t,n=d.from_tag,r=d.call_id,s=d.cseq;if(!d.to_tag)if(d.method===g.INVITE){if(p.transactions.ist[d.via_branch])return!1;for(t in p.transactions.ist)if(e=p.transactions.ist[t],e.request.from_tag===n&&e.request.call_id===r&&e.request.cseq===s)return h(482),!1}else{if(p.transactions.nist[d.via_branch])return!1;for(t in p.transactions.nist)if(e=p.transactions.nist[t],e.request.from_tag===n&&e.request.call_id===r&&e.request.cseq===s)return h(482),!1}}function u(){return d.getHeaders("via").length>1?(m("more than one Via header field present in the response, dropping the response"),!1):void 0}function a(){var e=_.str_utf8_length(d.body),t=d.getHeader("content-length");return t>e?(m("message body length is lower than the value in Content-Length header field, dropping the response"),!1):void 0}function c(){for(var e=["from","to","call_id","cseq","via"],t=e.length;t--;)if(!d.hasHeader(e[t]))return m("missing mandatory header field : "+e[t]+", dropping the response"),!1}function h(e){var t,n="SIP/2.0 "+e+" "+g.REASON_PHRASE[e]+"\r\n",r=d.getHeaders("via"),s=r.length,l=0;for(l;s>l;l++)n+="Via: "+r[l]+"\r\n";t=d.getHeader("To"),d.to_tag||(t+=";tag="+_.newTag()),n+="To: "+t+"\r\n",n+="From: "+d.getHeader("From")+"\r\n",n+="Call-ID: "+d.call_id+"\r\n",n+="CSeq: "+d.cseq+" "+d.method+"\r\n",n+="\r\n",f.send(n)}t.exports=r;var d,p,f,m=e("debug")("JsSIP:sanityCheck"),g=e("./Constants"),T=e("./SIPMessage"),_=e("./Utils"),v=[],C=[],S=[];v.push(s),v.push(l),v.push(i),v.push(o),C.push(u),C.push(a),S.push(c)},{"./Constants":1,"./SIPMessage":18,"./Utils":25,debug:33}],28:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function l(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!l(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,l,u,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),n.apply(this,l)}else if(i(n))for(l=Array.prototype.slice.call(arguments,1),a=n.slice(),r=a.length,u=0;r>u;u++)a[u].apply(this,l);return!0},r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(n=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,l,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],l=n.length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(o=l;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],s(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],29:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],30:[function(e,t,n){function r(){c&&o&&(c=!1,o.length?a=o.concat(a):h=-1,a.length&&s())}function s(){if(!c){var e=setTimeout(r);c=!0;for(var t=a.length;t;){for(o=a,a=[];++h<t;)o&&o[h].run();h=-1,t=a.length}o=null,c=!1,clearTimeout(e)}}function l(e,t){this.fun=e,this.array=t}function i(){}var o,u=t.exports={},a=[],c=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new l(e,t)),1!==a.length||c||setTimeout(s,0)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],31:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],32:[function(e,t,n){(function(t,r){function s(e,t){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),u(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function i(e,t){return e}function o(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&b(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var s=t.inspect(r,e);return v(s)||(s=u(e,s,r)),s}var l=a(e,t);if(l)return l;var i=Object.keys(t),m=o(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),R(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return c(t);if(0===i.length){if(b(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(y(t))return e.stylize(Date.prototype.toString.call(t),"date");if(R(t))return c(t)}var T="",_=!1,C=["{","}"];if(f(t)&&(_=!0,C=["[","]"]),b(t)){var S=t.name?": "+t.name:"";T=" [Function"+S+"]"}if(E(t)&&(T=" "+RegExp.prototype.toString.call(t)),y(t)&&(T=" "+Date.prototype.toUTCString.call(t)),R(t)&&(T=" "+c(t)),0===i.length&&(!_||0==t.length))return C[0]+T+C[1];if(0>r)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var A;return A=_?h(e,t,r,m,i):i.map(function(n){return d(e,t,r,m,n,_)}),e.seen.pop(),p(A,T,C)}function a(e,t){if(S(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return _(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,s){for(var l=[],i=0,o=t.length;o>i;++i)O(t,String(i))?l.push(d(e,t,n,r,String(i),!0)):l.push("");return s.forEach(function(s){s.match(/^\d+$/)||l.push(d(e,t,n,r,s,!0))}),l}function d(e,t,n,r,s,l){var i,o,a;if(a=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},a.get?o=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(o=e.stylize("[Setter]","special")),O(r,s)||(i="["+s+"]"),o||(e.seen.indexOf(a.value)<0?(o=g(n)?u(e,a.value,null):u(e,a.value,n-1),o.indexOf("\n")>-1&&(o=l?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=e.stylize("[Circular]","special")),S(i)){if(l&&s.match(/^\d+$/))return o;i=JSON.stringify(""+s),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+o}function p(e,t,n){var r=0,s=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return s>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function f(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function T(e){return null==e}function _(e){return"number"==typeof e}function v(e){return"string"==typeof e}function C(e){return"symbol"==typeof e}function S(e){return void 0===e}function E(e){return A(e)&&"[object RegExp]"===w(e)}function A(e){return"object"==typeof e&&null!==e}function y(e){return A(e)&&"[object Date]"===w(e)}function R(e){return A(e)&&("[object Error]"===w(e)||e instanceof Error)}function b(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function w(e){return Object.prototype.toString.call(e)}function N(e){return 10>e?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var x=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,l=r.length,i=String(e).replace(x,function(e){if("%%"===e)return"%";if(n>=l)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),o=r[n];l>n;o=r[++n])i+=g(o)||!A(o)?" "+o:" "+s(o);return i},n.deprecate=function(e,s){function l(){if(!i){if(t.throwDeprecation)throw new Error(s);t.traceDeprecation?console.trace(s):console.error(s),i=!0}return e.apply(this,arguments)}if(S(r.process))return function(){return n.deprecate(e,s).apply(this,arguments)};if(t.noDeprecation===!0)return e;var i=!1;return l};var U,M={};n.debuglog=function(e){if(S(U)&&(U=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(U)){var r=t.pid;M[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else M[e]=function(){};return M[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=f,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=T,n.isNumber=_,n.isString=v,n.isSymbol=C,n.isUndefined=S,n.isRegExp=E,n.isObject=A,n.isDate=y,n.isError=R,n.isFunction=b,n.isPrimitive=I,n.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",D(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!A(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":31,_process:30,inherits:29}],33:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function s(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var s=0,l=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(s++,"%c"===e&&(l=s))}),e.splice(l,0,r),e}function l(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function o(){var e;try{e=n.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=l,n.formatArgs=s,n.save=i,n.load=o,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(o())},{"./debug":34}],34:[function(e,t,n){function r(){return n.colors[c++%n.colors.length]}function s(e){function t(){}function s(){var e=s,t=+new Date,l=t-(a||t);e.diff=l,e.prev=a,e.curr=t,a=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var i=Array.prototype.slice.call(arguments);i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var o=0;i[0]=i[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;o++;var s=n.formatters[r];if("function"==typeof s){var l=i[o];t=s.call(e,l),i.splice(o,1),o--}return t}),"function"==typeof n.formatArgs&&(i=n.formatArgs.apply(e,i));var u=s.log||n.log||console.log.bind(console);u.apply(e,i)}t.enabled=!1,s.enabled=!0;var l=n.enabled(e)?s:t;return l.namespace=e,l}function l(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,s=0;r>s;s++)t[s]&&(e=t[s].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function i(){n.enable("")}function o(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=s,n.coerce=u,n.disable=i,n.enable=l,n.enabled=o,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var a,c=0},{ms:35}],35:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function s(e){return e>=c?Math.round(e/c)+"d":e>=a?Math.round(e/a)+"h":e>=u?Math.round(e/u)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}function l(e){return i(e,c,"day")||i(e,a,"hour")||i(e,u,"minute")||i(e,o,"second")||e+" ms"}function i(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var o=1e3,u=60*o,a=60*u,c=24*a,h=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?l(e):s(e)}},{}],36:[function(e,t,n){(function(n){"use strict";function r(e){function t(e){return function(){throw new Error("rtcninja: WebRTC not supported, missing "+e+" [browser: "+i.name+" "+i.version+"]")}}if(v&&i.chrome&&_>=32||i.android&&i.chrome&&_>=39||v&&i.opera&&_>=27||i.android&&i.opera&&_>=24||i.android&&i.webkit&&!i.chrome&&_>=37||l.webkitGetUserMedia&&s.webkitRTCPeerConnection)C=!0,a=l.webkitGetUserMedia.bind(l),c=s.webkitRTCPeerConnection,h=s.RTCSessionDescription,d=s.RTCIceCandidate,p=s.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=function(e,t){return e.src=URL.createObjectURL(t),e},g=!0,T=!1;else if(v&&i.firefox&&_>=22||i.android&&i.firefox&&_>=33||l.mozGetUserMedia&&s.mozRTCPeerConnection)C=!0,a=l.mozGetUserMedia.bind(l),c=s.mozRTCPeerConnection,h=s.mozRTCSessionDescription,d=s.mozRTCIceCandidate,p=s.MediaStreamTrack,m=function(e,t){return e.src=URL.createObjectURL(t),e},g=!1,T=!1;else if(e.plugin&&"function"==typeof e.plugin.isRequired&&e.plugin.isRequired()&&"function"==typeof e.plugin.isInstalled&&e.plugin.isInstalled()){var n=e.plugin["interface"];C=!0,a=n.getUserMedia,c=n.RTCPeerConnection,h=n.RTCSessionDescription,d=n.RTCIceCandidate,p=n.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=n.attachMediaStream,g=n.canRenegotiate,T=!0}else l.getUserMedia&&s.RTCPeerConnection&&(C=!0,a=l.getUserMedia.bind(l),c=s.RTCPeerConnection,h=s.RTCSessionDescription,d=s.RTCIceCandidate,p=s.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=s.attachMediaStream||function(e,t){return e.src=URL.createObjectURL(t),e},g=!0,T=!1);return r.hasWebRTC=function(){return C},a?r.getUserMedia=function(e,t,n){o("getUserMedia() | constraints: %o",e);try{a(e,function(e){o("getUserMedia() | success"),t&&t(e)},function(e){o("getUserMedia() | error:",e),n&&n(e)})}catch(r){u("getUserMedia() | error:",r),n&&n(r)}}:r.getUserMedia=function(e,n,r){u("getUserMedia() | WebRTC not supported"),r?r(new Error("rtcninja: WebRTC not supported, missing getUserMedia [browser: "+i.name+" "+i.version+"]")):t("getUserMedia")},r.RTCPeerConnection=c||t("RTCPeerConnection"),r.RTCSessionDescription=h||t("RTCSessionDescription"),r.RTCIceCandidate=d||t("RTCIceCandidate"),r.MediaStreamTrack=p||t("MediaStreamTrack"),r.getMediaDevices=f,r.attachMediaStream=m||t("attachMediaStream"),r.canRenegotiate=g,r.closeMediaStream=function(e){if(e)try{o("closeMediaStream() | calling stop() on all the MediaStreamTrack");var t,n,r;if(e.getTracks)for(t=e.getTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop();else{for(t=e.getAudioTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop();for(t=e.getVideoTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop()}}catch(s){"function"!=typeof e.stop&&"object"!=typeof e.stop||(o("closeMediaStream() | calling stop() on the MediaStream"),e.stop())}},r.fixPeerConnectionConfig=function(e){var t,n,r,s,l;for(Array.isArray(e.iceServers)||(e.iceServers=[]),t=0,n=e.iceServers.length;n>t;t+=1)r=e.iceServers[t],s=r.hasOwnProperty("urls"),l=r.hasOwnProperty("url"),"object"==typeof r&&(s&&!l?r.url=Array.isArray(r.urls)?r.urls[0]:r.urls:!s&&l&&(r.urls=Array.isArray(r.url)?r.url.slice():r.url),l&&Array.isArray(r.url)&&(r.url=r.url[0]))},r.fixRTCOfferOptions=function(e){e=e||{},T?(e.hasOwnProperty("offerToReceiveAudio")&&(e.mandatory=e.mandatory||{},e.mandatory.OfferToReceiveAudio=!!e.offerToReceiveAudio),e.hasOwnProperty("offerToReceiveVideo")&&(e.mandatory=e.mandatory||{},e.mandatory.OfferToReceiveVideo=!!e.offerToReceiveVideo)):(e.mandatory&&e.mandatory.hasOwnProperty("OfferToReceiveAudio")&&(e.offerToReceiveAudio=e.mandatory.OfferToReceiveAudio?1:0),e.mandatory&&e.mandatory.hasOwnProperty("OfferToReceiveVideo")&&(e.offerToReceiveVideo=e.mandatory.OfferToReceiveVideo?1:0),delete e.mandatory)},r}t.exports=r;var s,l,i=e("bowser"),o=e("debug")("rtcninja:Adapter"),u=e("debug")("rtcninja:ERROR:Adapter"),a=null,c=null,h=null,d=null,p=null,f=null,m=null,g=!1,T=!1,_=Number(i.version)||0,v=!(i.mobile||i.tablet&&!(i.msie&&_>=10)),C=!1;u.log=console.warn.bind(console),s=n.window||n,l=s.navigator||{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bowser:40,debug:33}],37:[function(e,t,n){"use strict";function r(e,t){h("new | [pcConfig:%o, pcConstraints:%o]",e,t),s.call(this,e),this.pcConstraints=t,this.ourLocalDescription=null,this.ourSignalingState=null,this.ourIceConnectionState=null,this.ourIceGatheringState=null,this.timerGatheringTimeout=null,this.timerGatheringTimeoutAfterRelay=null,this.ignoreIceGathering=!1,this.closed=!1,o.call(this),a.call(this)}function s(e){this.pcConfig=c(!0,e),p.fixPeerConnectionConfig(this.pcConfig),this.options={iceTransportsRelay:"relay"===this.pcConfig.iceTransports,iceTransportsNone:"none"===this.pcConfig.iceTransports,gatheringTimeout:this.pcConfig.gatheringTimeout,gatheringTimeoutAfterRelay:this.pcConfig.gatheringTimeoutAfterRelay},delete this.pcConfig.gatheringTimeout,delete this.pcConfig.gatheringTimeoutAfterRelay,h("setConfigurationAndOptions | processed pcConfig: %o",this.pcConfig)}function l(){return this.closed||this.pc&&"closed"===this.pc.iceConnectionState}function i(){var e=this,t=this.pc;t.onnegotiationneeded=function(t){l.call(e)||(h("onnegotiationneeded()"),e.onnegotiationneeded&&e.onnegotiationneeded(t))},t.onicecandidate=function(t){var n,r,s;if(!l.call(e)&&!e.ignoreIceGathering&&!e.options.iceTransportsNone)if(n=t.candidate){if(r=f.REGEXP_RELAY_CANDIDATE.test(n.candidate),e.options.iceTransportsRelay&&!r)return;r&&!e.timerGatheringTimeoutAfterRelay&&"number"==typeof e.options.gatheringTimeoutAfterRelay&&(h("onicecandidate() | first relay candidate found, ending gathering in %d ms",e.options.gatheringTimeoutAfterRelay),
e.timerGatheringTimeoutAfterRelay=setTimeout(function(){l.call(e)||(h("forced end of candidates after timeout"),delete e.timerGatheringTimeoutAfterRelay,clearTimeout(e.timerGatheringTimeout),delete e.timerGatheringTimeout,e.ignoreIceGathering=!0,e.onicecandidate&&e.onicecandidate({candidate:null},null))},e.options.gatheringTimeoutAfterRelay)),s=new p.RTCIceCandidate({sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,candidate:n.candidate}),null===m.normalizeCandidate&&(f.REGEXP_NORMALIZED_CANDIDATE.test(n.candidate)?m.normalizeCandidate=!1:(h('onicecandidate() | normalizing ICE candidates syntax (remove "a=" and "\\r\\n")'),m.normalizeCandidate=!0)),m.normalizeCandidate&&(s.candidate=n.candidate.replace(f.REGEXP_FIX_CANDIDATE,"")),h("onicecandidate() | m%d(%s) %s",s.sdpMLineIndex,s.sdpMid||"no mid",s.candidate),e.onicecandidate&&e.onicecandidate(t,s)}else h("onicecandidate() | end of candidates"),clearTimeout(e.timerGatheringTimeout),delete e.timerGatheringTimeout,clearTimeout(e.timerGatheringTimeoutAfterRelay),delete e.timerGatheringTimeoutAfterRelay,e.onicecandidate&&e.onicecandidate(t,null)},t.onaddstream=function(t){l.call(e)||(h("onaddstream() | stream: %o",t.stream),e.onaddstream&&e.onaddstream(t,t.stream))},t.onremovestream=function(t){l.call(e)||(h("onremovestream() | stream: %o",t.stream),e.onremovestream&&e.onremovestream(t,t.stream))},t.ondatachannel=function(t){l.call(e)||(h("ondatachannel() | datachannel: %o",t.channel),e.ondatachannel&&e.ondatachannel(t,t.channel))},t.onsignalingstatechange=function(n){t.signalingState!==e.ourSignalingState&&(h("onsignalingstatechange() | signalingState: %s",t.signalingState),e.ourSignalingState=t.signalingState,e.onsignalingstatechange&&e.onsignalingstatechange(n,t.signalingState))},t.oniceconnectionstatechange=function(n){t.iceConnectionState!==e.ourIceConnectionState&&(h("oniceconnectionstatechange() | iceConnectionState: %s",t.iceConnectionState),e.ourIceConnectionState=t.iceConnectionState,e.oniceconnectionstatechange&&e.oniceconnectionstatechange(n,t.iceConnectionState))},t.onicegatheringstatechange=function(n){l.call(e)||t.iceGatheringState!==e.ourIceGatheringState&&(h("onicegatheringstatechange() | iceGatheringState: %s",t.iceGatheringState),e.ourIceGatheringState=t.iceGatheringState,e.onicegatheringstatechange&&e.onicegatheringstatechange(n,t.iceGatheringState))},t.onidentityresult=function(t){l.call(e)||(h("onidentityresult()"),e.onidentityresult&&e.onidentityresult(t))},t.onpeeridentity=function(t){l.call(e)||(h("onpeeridentity()"),e.onpeeridentity&&e.onpeeridentity(t))},t.onidpassertionerror=function(t){l.call(e)||(h("onidpassertionerror()"),e.onidpassertionerror&&e.onidpassertionerror(t))},t.onidpvalidationerror=function(t){l.call(e)||(h("onidpvalidationerror()"),e.onidpvalidationerror&&e.onidpvalidationerror(t))}}function o(){this.pcConstraints?this.pc=new p.RTCPeerConnection(this.pcConfig,this.pcConstraints):this.pc=new p.RTCPeerConnection(this.pcConfig),i.call(this)}function u(){var e=this.pc,t=this.options,n=null;return e.localDescription?(t.iceTransportsRelay?n=e.localDescription.sdp.replace(f.REGEXP_SDP_NON_RELAY_CANDIDATES,""):t.iceTransportsNone&&(n=e.localDescription.sdp.replace(f.REGEXP_SDP_CANDIDATES,"")),this.ourLocalDescription=new p.RTCSessionDescription({type:e.localDescription.type,sdp:n||e.localDescription.sdp}),this.ourLocalDescription):(this.ourLocalDescription=null,null)}function a(){var e=this;Object.defineProperties(this,{peerConnection:{get:function(){return e.pc}},signalingState:{get:function(){return e.pc.signalingState}},iceConnectionState:{get:function(){return e.pc.iceConnectionState}},iceGatheringState:{get:function(){return e.pc.iceGatheringState}},localDescription:{get:function(){return u.call(e)}},remoteDescription:{get:function(){return e.pc.remoteDescription}},peerIdentity:{get:function(){return e.pc.peerIdentity}}})}t.exports=r;var c=e("merge"),h=e("debug")("rtcninja:RTCPeerConnection"),d=e("debug")("rtcninja:ERROR:RTCPeerConnection"),p=e("./Adapter"),f={REGEXP_NORMALIZED_CANDIDATE:new RegExp(/^candidate:/i),REGEXP_FIX_CANDIDATE:new RegExp(/(^a=|\r|\n)/gi),REGEXP_RELAY_CANDIDATE:new RegExp(/ relay /i),REGEXP_SDP_CANDIDATES:new RegExp(/^a=candidate:.*\r\n/gim),REGEXP_SDP_NON_RELAY_CANDIDATES:new RegExp(/^a=candidate:(.(?!relay ))*\r\n/gim)},m={normalizeCandidate:null};d.log=console.warn.bind(console),r.prototype.createOffer=function(e,t,n){h("createOffer()");var r=this;p.fixRTCOfferOptions(n),this.pc.createOffer(function(t){l.call(r)||(h("createOffer() | success"),e&&e(t))},function(e){l.call(r)||(d("createOffer() | error:",e),t&&t(e))},n)},r.prototype.createAnswer=function(e,t,n){h("createAnswer()");var r=this;this.pc.createAnswer(function(t){l.call(r)||(h("createAnswer() | success"),e&&e(t))},function(e){l.call(r)||(d("createAnswer() | error:",e),t&&t(e))},n)},r.prototype.setLocalDescription=function(e,t,n){function r(){"number"==typeof s.options.gatheringTimeout&&"complete"!==s.pc.iceGatheringState&&(h("setLocalDescription() | ending gathering in %d ms (gatheringTimeout option)",s.options.gatheringTimeout),s.timerGatheringTimeout=setTimeout(function(){l.call(s)||(h("forced end of candidates after gatheringTimeout timeout"),delete s.timerGatheringTimeout,clearTimeout(s.timerGatheringTimeoutAfterRelay),delete s.timerGatheringTimeoutAfterRelay,s.ignoreIceGathering=!0,s.onicecandidate&&s.onicecandidate({candidate:null},null))},s.options.gatheringTimeout))}h("setLocalDescription()");var s=this;this.pc.setLocalDescription(e,function(){l.call(s)||(h("setLocalDescription() | success"),clearTimeout(s.timerGatheringTimeout),delete s.timerGatheringTimeout,clearTimeout(s.timerGatheringTimeoutAfterRelay),delete s.timerGatheringTimeoutAfterRelay,r(),t&&t())},function(e){l.call(s)||(d("setLocalDescription() | error:",e),n&&n(e))}),this.ignoreIceGathering=!1},r.prototype.setRemoteDescription=function(e,t,n){h("setRemoteDescription()");var r=this;this.pc.setRemoteDescription(e,function(){l.call(r)||(h("setRemoteDescription() | success"),t&&t())},function(e){l.call(r)||(d("setRemoteDescription() | error:",e),n&&n(e))})},r.prototype.updateIce=function(e){h("updateIce() | pcConfig: %o",e),s.call(this,e),this.pc.updateIce(this.pcConfig),this.ignoreIceGathering=!1},r.prototype.addIceCandidate=function(e,t,n){h("addIceCandidate() | candidate: %o",e);var r=this;this.pc.addIceCandidate(e,function(){l.call(r)||(h("addIceCandidate() | success"),t&&t())},function(e){l.call(r)||(d("addIceCandidate() | error:",e),n&&n(e))})},r.prototype.getConfiguration=function(){return h("getConfiguration()"),this.pc.getConfiguration()},r.prototype.getLocalStreams=function(){return h("getLocalStreams()"),this.pc.getLocalStreams()},r.prototype.getRemoteStreams=function(){return h("getRemoteStreams()"),this.pc.getRemoteStreams()},r.prototype.getStreamById=function(e){return h("getStreamById() | streamId: %s",e),this.pc.getStreamById(e)},r.prototype.addStream=function(e){h("addStream() | stream: %s",e),this.pc.addStream(e)},r.prototype.removeStream=function(e){h("removeStream() | stream: %o",e),this.pc.removeStream(e)},r.prototype.close=function(){h("close()"),this.closed=!0,clearTimeout(this.timerGatheringTimeout),delete this.timerGatheringTimeout,clearTimeout(this.timerGatheringTimeoutAfterRelay),delete this.timerGatheringTimeoutAfterRelay,this.pc.close()},r.prototype.createDataChannel=function(){return h("createDataChannel()"),this.pc.createDataChannel.apply(this.pc,arguments)},r.prototype.createDTMFSender=function(e){return h("createDTMFSender()"),this.pc.createDTMFSender(e)},r.prototype.getStats=function(){return h("getStats()"),this.pc.getStats.apply(this.pc,arguments)},r.prototype.setIdentityProvider=function(){return h("setIdentityProvider()"),this.pc.setIdentityProvider.apply(this.pc,arguments)},r.prototype.getIdentityAssertion=function(){return h("getIdentityAssertion()"),this.pc.getIdentityAssertion()},r.prototype.reset=function(e){h("reset() | pcConfig: %o",e);var t=this.pc;t.onnegotiationneeded=null,t.onicecandidate=null,t.onaddstream=null,t.onremovestream=null,t.ondatachannel=null,t.onsignalingstatechange=null,t.oniceconnectionstatechange=null,t.onicegatheringstatechange=null,t.onidentityresult=null,t.onpeeridentity=null,t.onidpassertionerror=null,t.onidpvalidationerror=null,clearTimeout(this.timerGatheringTimeout),delete this.timerGatheringTimeout,clearTimeout(this.timerGatheringTimeoutAfterRelay),delete this.timerGatheringTimeoutAfterRelay,h("reset() | closing current peerConnection"),t.close(),s.call(this,e),o.call(this)}},{"./Adapter":36,debug:33,merge:41}],38:[function(e,t,n){"use strict";function r(e){var t=u(e||{});return c=!0,r.RTCPeerConnection=a,r.getUserMedia=t.getUserMedia,r.RTCSessionDescription=t.RTCSessionDescription,r.RTCIceCandidate=t.RTCIceCandidate,r.MediaStreamTrack=t.MediaStreamTrack,r.getMediaDevices=t.getMediaDevices,r.attachMediaStream=t.attachMediaStream,r.closeMediaStream=t.closeMediaStream,r.canRenegotiate=t.canRenegotiate,t.hasWebRTC()?(l("WebRTC supported"),!0):(i("WebRTC not supported"),!1)}t.exports=r;var s=e("bowser"),l=e("debug")("rtcninja"),i=e("debug")("rtcninja:ERROR"),o=e("./version"),u=e("./Adapter"),a=e("./RTCPeerConnection"),c=!1;i.log=console.warn.bind(console),l("version %s",o),l("detected browser: %s %s [mobile:%s, tablet:%s, android:%s, ios:%s]",s.name,s.version,!!s.mobile,!!s.tablet,!!s.android,!!s.ios),r.hasWebRTC=function(){return c||r(),u.hasWebRTC()},Object.defineProperty(r,"version",{get:function(){return o}}),Object.defineProperty(r,"called",{get:function(){return c}}),r.debug=e("debug"),r.browser=s},{"./Adapter":36,"./RTCPeerConnection":37,"./version":39,bowser:40,debug:33}],39:[function(e,t,n){"use strict";t.exports=e("../package.json").version},{"../package.json":42}],40:[function(t,n,r){!function(t,r){"undefined"!=typeof n&&n.exports?n.exports=r():"function"==typeof e&&e.amd?e(r):this[t]=r()}("bowser",function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function r(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var s,l=n(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),o=!i&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),a=!u&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),h=/silk/i.test(e),d=/sailfish/i.test(e),p=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),g=!m&&/windows/i.test(e),T=!l&&!h&&/macintosh/i.test(e),_=!o&&!d&&!p&&!f&&/linux/i.test(e),v=n(/edge\/(\d+(\.\d+)?)/i),C=n(/version\/(\d+(\.\d+)?)/i),S=/tablet/i.test(e),E=!S&&/[^-]mobi/i.test(e),A=/xbox/i.test(e);/opera|opr|opios/i.test(e)?s={name:"Opera",opera:t,version:C||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?s={name:"Opera Coast",coast:t,version:C||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?s={name:"Yandex Browser",yandexbrowser:t,version:C||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?s={name:"UC Browser",ucbrowser:t,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?s={name:"Maxthon",maxthon:t,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?s={name:"Epiphany",epiphany:t,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?s={name:"Puffin",puffin:t,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?s={name:"Sleipnir",sleipnir:t,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?s={name:"K-Meleon",kMeleon:t,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(s={name:"Windows Phone",windowsphone:t},v?(s.msedge=t,s.version=v):(s.msie=t,s.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?s={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?s={name:"Chrome",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?s={name:"Microsoft Edge",msedge:t,version:v}:/vivaldi/i.test(e)?s={name:"Vivaldi",vivaldi:t,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||C}:d?s={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?s={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(s={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(s.firefoxos=t)):h?s={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?s={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?s={name:"SlimerJS",slimer:t,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?s={name:"BlackBerry",blackberry:t,version:C||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(s={name:"WebOS",webos:t,version:C||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(s.touchpad=t)):/bada/i.test(e)?s={name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:p?s={name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||C}:/qupzilla/i.test(e)?s={name:"QupZilla",qupzilla:t,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||C}:/chromium/i.test(e)?s={name:"Chromium",chromium:t,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||C}:/chrome|crios|crmo/i.test(e)?s={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?s={name:"Android",version:C}:/safari|applewebkit/i.test(e)?(s={name:"Safari",safari:t},C&&(s.version=C)):l?(s={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},C&&(s.version=C)):s=/googlebot/i.test(e)?{name:"Googlebot",googlebot:t,version:n(/googlebot\/(\d+(\.\d+))/i)||C}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!s.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(s.name=s.name||"Blink",s.blink=t):(s.name=s.name||"Webkit",s.webkit=t),!s.version&&C&&(s.version=C)):!s.opera&&/gecko\//i.test(e)&&(s.name=s.name||"Gecko",s.gecko=t,s.version=s.version||n(/gecko\/(\d+(\.\d+)?)/i)),s.msedge||!o&&!s.silk?l?(s[l]=t,s.ios=t):T?s.mac=t:A?s.xbox=t:g?s.windows=t:_&&(s.linux=t):s.android=t;var y="";s.windowsphone?y=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(y=n(/os (\d+([_\s]\d+)*) like mac os x/i),y=y.replace(/[_\s]/g,".")):o?y=n(/android[ \/-](\d+(\.\d+)*)/i):s.webos?y=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):s.blackberry?y=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):s.bada?y=n(/bada\/(\d+(\.\d+)*)/i):s.tizen&&(y=n(/tizen[\/\s](\d+(\.\d+)*)/i)),y&&(s.osversion=y);var R=y.split(".")[0];return S||a||"ipad"==l||o&&(3==R||R>=4&&!E)||s.silk?s.tablet=t:(E||"iphone"==l||"ipod"==l||o||u||s.blackberry||s.webos||s.bada)&&(s.mobile=t),s.msedge||s.msie&&s.version>=10||s.yandexbrowser&&s.version>=15||s.vivaldi&&s.version>=1||s.chrome&&s.version>=20||s.firefox&&s.version>=20||s.safari&&s.version>=6||s.opera&&s.version>=10||s.ios&&s.osversion&&s.osversion.split(".")[0]>=6||s.blackberry&&s.version>=10.1?s.a=t:s.msie&&s.version<10||s.chrome&&s.version<20||s.firefox&&s.version<20||s.safari&&s.version<6||s.opera&&s.version<10||s.ios&&s.osversion&&s.osversion.split(".")[0]<6?s.c=t:s.x=t,s}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n._detect=e,n})},{}],41:[function(e,t,n){!function(e){function n(e,t){if("object"!==s(e))return t;for(var r in t)"object"===s(e[r])&&"object"===s(t[r])?e[r]=n(e[r],t[r]):e[r]=t[r];return e}function r(e,t,r){var i=r[0],o=r.length;(e||"object"!==s(i))&&(i={});for(var u=0;o>u;++u){var a=r[u],c=s(a);if("object"===c)for(var h in a){var d=e?l.clone(a[h]):a[h];t?i[h]=n(i[h],d):i[h]=d}}return i}function s(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var l=function(e){return r(e===!0,!1,arguments)},i="merge";l.recursive=function(e){return r(e===!0,!0,arguments)},l.clone=function(e){var t,n,r=e,i=s(e);if("array"===i)for(r=[],n=e.length,t=0;n>t;++t)r[t]=l.clone(e[t]);else if("object"===i){r={};for(t in e)r[t]=l.clone(e[t])}return r},e?t.exports=l:window[i]=l}("object"==typeof t&&t&&"object"==typeof t.exports&&t.exports)},{}],42:[function(e,t,n){t.exports={name:"rtcninja",version:"0.6.7",description:"WebRTC API wrapper to deal with different browsers",author:{name:"Iñaki Baz Castillo",email:"inaki.baz@eface2face.com",url:"http://eface2face.com"},contributors:[{name:"Jesús Pérez",email:"jesus.perez@eface2face.com"}],license:"MIT",main:"lib/rtcninja.js",homepage:"https://github.com/eface2face/rtcninja.js",repository:{type:"git",url:"git+https://github.com/eface2face/rtcninja.js.git"},keywords:["webrtc"],engines:{node:">=0.10.32"},dependencies:{bowser:"^1.2.0",debug:"^2.2.0",merge:"^1.2.0"},devDependencies:{browserify:"^13.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-expect-file":"0.0.7","gulp-filelog":"^0.4.1","gulp-header":"^1.8.2","gulp-jscs":"^3.0.2","gulp-jscs-stylish":"^1.4.0","gulp-jshint":"^2.0.1","gulp-rename":"^1.2.2","gulp-uglify":"^1.5.3","jshint-stylish":"^2.2.0","vinyl-source-stream":"^1.1.0"},readme:'# rtcninja.js <img src="http://www.pubnub.com/blog/wp-content/uploads/2014/01/google-webrtc-logo.png" height="30" width="30">\n\nWebRTC API wrapper to deal with different browsers transparently, [eventually](http://iswebrtcreadyyet.com/) this library shouldn\'t be needed. We only have to wait until W3C group in charge [finishes the specification](https://tools.ietf.org/wg/rtcweb/) and the different browsers implement it correctly :sweat_smile:.\n\n<img src="http://images4.fanpop.com/image/photos/21800000/browser-fight-google-chrome-21865454-600-531.jpg" height="250" width="250">\n\nSupported environments:\n* [Google Chrome](https://www.google.com/chrome/browser/desktop/index.html) (desktop & mobile)\n* [Google Canary](https://www.google.com/chrome/browser/canary.html) (desktop & mobile)\n* [Mozilla Firefox](https://www.mozilla.org/en-GB/firefox/new) (desktop & mobile)\n* [Firefox Nigthly](https://nightly.mozilla.org/) (desktop & mobile)\n* [Opera](http://www.opera.com/)\n* [Vivaldi](https://vivaldi.com/)\n* [CrossWalk](https://crosswalk-project.org/)\n* [Cordova](http://cordova.apache.org/): iOS support, you only have to use our plugin [following these steps](https://github.com/eface2face/cordova-plugin-iosrtc#usage).\n* [NW.js](https://github.com/nwjs/nw.js/)\n* [Electron](https://github.com/atom/electron)\n\n\n## Installation\n\n### **npm**:\n\n```bash\n$ npm install rtcninja\n```\n\nand then:\n\n```javascript\nvar rtcninja = require(\'rtcninja\');\n```\n\n### **bower**:\n\n```bash\n$ bower install rtcninja\n```\n\n\n## Browserified library\n\nTake a browserified version of the library from the `dist/` folder:\n\n* `dist/rtcninja.js`: The uncompressed version.\n* `dist/rtcninja.min.js`: The compressed production-ready version.\n\nThey expose the global `window.rtcninja` module.\n\n\n## Usage\n\nIn the [examples](./examples/) folder we provide a complete one.\n\n```javascript\n// Must first call it.\nrtcninja();\n\n// Then check.\nif (rtcninja.hasWebRTC()) {\n    // Do something.\n}\nelse {\n    // Do something.\n}\n```\n\n\n## Documentation\n\nYou can read the full [API documentation](docs/index.md) in the docs folder.\n\n\n## Issues\n\nhttps://github.com/eface2face/rtcninja.js/issues\n\n\n## Developer guide\n\n* Create a branch with a name including your user and a meaningful word about the fix/feature you\'re going to implement, ie: "jesusprubio/fixstuff"\n* Use [GitHub pull requests](https://help.github.com/articles/using-pull-requests).\n* Conventions:\n * We use [JSHint](http://jshint.com/) and [Crockford\'s Styleguide](http://javascript.crockford.com/code.html).\n * Please run `grunt lint` to be sure your code fits with them.\n\n\n### Debugging\n\nThe library includes the Node [debug](https://github.com/visionmedia/debug) module. In order to enable debugging:\n\nIn Node set the `DEBUG=rtcninja*` environment variable before running the application, or set it at the top of the script:\n\n```javascript\nprocess.env.DEBUG = \'rtcninja*\';\n```\n\nIn the browser run `rtcninja.debug.enable(\'rtcninja*\');` and reload the page. Note that the debugging settings are stored into the browser LocalStorage. To disable it run `rtcninja.debug.disable(\'rtcninja*\');`.\n\n\n## Copyright & License\n\n* eFace2Face Inc.\n* [MIT](./LICENSE)\n',readmeFilename:"README.md",gitHead:"d36b02d0503ca152771692935a4096130f28dc5d",bugs:{url:"https://github.com/eface2face/rtcninja.js/issues"},_id:"rtcninja@0.6.7",scripts:{},_shasum:"f7c8855f2c0e41ae08c638375bad1dc977369ec2",_from:"rtcninja@>=0.6.7 <0.7.0"}},{}],43:[function(e,t,n){var r=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{push:"invalid",names:["value"]}]};Object.keys(r).forEach(function(e){var t=r[e];t.forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],44:[function(e,t,n){var r=e("./parser"),s=e("./writer");n.write=s,n.parse=r.parse,n.parseFmtpConfig=r.parseFmtpConfig,n.parsePayloads=r.parsePayloads,n.parseRemoteCandidates=r.parseRemoteCandidates},{"./parser":45,"./writer":46}],45:[function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},s=function(e,t,n,s){if(s&&!n)t[s]=r(e[1]);else for(var l=0;l<n.length;l+=1)null!=e[l+1]&&(t[n[l]]=r(e[l+1]))},l=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var l=e.push?{}:r?t[e.name]:t;s(n.match(e.reg),l,e.names,e.name),e.push&&t[e.push].push(l)},i=e("./grammar"),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);n.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach(function(e){var t=e[0],s=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var o=0;o<(i[t]||[]).length;o+=1){var u=i[t][o];if(u.reg.test(s))return l(u,r,s)}}),t.media=n,t};var u=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length&&(e[n[0]]=r(n[1])),e};n.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(u,{})},n.parsePayloads=function(e){return e.split(" ").map(Number)},n.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),s=0;s<n.length;s+=3)t.push({component:n[s],ip:n[s+1],port:n[s+2]});return t}},{"./grammar":43}],46:[function(e,t,n){var r=e("./grammar"),s=/%[sdv%]/g,l=function(e){var t=1,n=arguments,r=n.length;return e.replace(s,function(e){if(t>=r)return e;var s=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},i=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,s=[e+"="+r];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?s.push(n[t.name][o]):s.push(n[t.names[i]])}else s.push(n[t.name]);return l.apply(null,s)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],u=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||o,s=t.innerOrder||u,l=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?l.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){l.push(i(t,n,e))})})}),e.media.forEach(function(e){l.push(i("m",r.m[0],e)),s.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?l.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){l.push(i(t,n,e))})})})}),l.join("\r\n")+"\r\n"}},{"./grammar":43}],47:[function(e,t,n){t.exports={name:"jssip",title:"JsSIP",description:"the Javascript SIP library",version:"2.0.1",homepage:"http://jssip.net",author:"José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (https://github.com/ibc)","Saúl Ibarra Corretgé <saghul@gmail.com> (https://github.com/saghul)"],main:"lib/JsSIP.js",keywords:["sip","websocket","webrtc","node","browser","library"],license:"MIT",repository:{type:"git",url:"https://github.com/versatica/JsSIP.git"},bugs:{url:"https://github.com/versatica/JsSIP/issues"},dependencies:{debug:"^2.2.0",rtcninja:"^0.6.7","sdp-transform":"^1.6.2"},devDependencies:{browserify:"^13.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-expect-file":"0.0.7","gulp-header":"^1.8.2","gulp-jshint":"^2.0.1","gulp-nodeunit-runner":"^0.2.2","gulp-rename":"^1.2.2","gulp-uglify":"^1.5.3","gulp-util":"^3.0.7",jshint:"^2.9.2","jshint-stylish":"^2.2.0",pegjs:"0.7.0","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"},scripts:{test:"gulp test"}}},{}]},{},[7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],112:[function(require,module,exports){
var _template = require('lodash/string/template');
var _forEach = require('lodash/collection/forEach');
var _assign = require('lodash/object/assign');
var _merge = require('lodash/object/merge');
var _isEqual = require('lodash/lang/isEqual');
var _trim = require('lodash/string/trim');
var _throttle = require('lodash/function/throttle');
var _debounce = require('lodash/function/debounce');

function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
}

function findParent(elem, selector) {

    var firstChar = selector.charAt(0);

    // Get closest match
    for ( ; elem && elem !== document; elem = elem.parentNode ) {
        if ( firstChar === '.' ) {
            if ( elem.classList.contains( selector.substr(1) ) ) {
                return elem;
            }
        } else if ( firstChar === '#' ) {
            if ( elem.id === selector.substr(1) ) {
                return elem;
            }
        } else if ( firstChar === '[' ) {
            if (elem.hasAttribute( selector.substr(1, selector.length - 2))) {
                return elem;
            }
        } else {
            if(elem.nodeName === selector.toUpperCase()){
                return elem;
            }
        }
    }

    return false;

}

function poll(fn, callback, errback, timeout, interval) {
    var endTime = Number(new Date()) + (timeout || 2000);
    interval = interval || 300;

    (function p() {
        // If the condition is met, we're done! 
        if(fn()) {
            callback();
        }
        // If the condition isn't met but the timeout hasn't elapsed, go again
        else if (Number(new Date()) < endTime) {
            setTimeout(p, interval);
        }
        // Didn't match and too much time, reject!
        else {
            errback(new Error('timed out for ' + fn + ': ' + arguments));
        }
    })();
}

module.exports = {
	template: _template,
	forEach: _forEach,
	assign: _assign,
	merge: _merge,
	isEqual: _isEqual,
	trim: _trim,
	throttle: _throttle,
	debounce: debounce,
    poll: poll,
	findParent: findParent
};
},{"lodash/collection/forEach":12,"lodash/function/debounce":14,"lodash/function/throttle":16,"lodash/lang/isEqual":64,"lodash/object/assign":72,"lodash/object/merge":75,"lodash/string/template":77,"lodash/string/trim":79}],113:[function(require,module,exports){
var widget = require('./widget.js');
var api = require('./core.js');

module.exports = widget.module;

},{"./core.js":109,"./widget.js":117}],114:[function(require,module,exports){
var url = require('url');
var http = require('http');
var debug = require('./debug');
var cache = {};

module.exports = {
	post: post,
	get: get
};

function post(postUrl, data, cb){

	// debug.log('post request: ', postUrl, data);

	var urlObj = url.parse(postUrl),
		
	json = JSON.stringify(data),

	req, body = '', keepAliveAgent,

	options = {
		method: 'POST',
		protocol: urlObj.protocol || window.location.protocol,
		hostname: urlObj.hostname,
		port: urlObj.port,
		path: urlObj.path,
		'Content-type': 'application/json; charset=UTF-8',
		'Content-length': json.length
	};

	keepAliveAgent = new http.Agent({ keepAlive: true });
	options.agent = keepAliveAgent;

	req = http.request(options, function (res){
		res.setEncoding('utf8');
		res.on('data', function (chunk) {
			body += chunk;
		});
		res.on('end', function() {
			// debug.log(body);
			if(body === '{}') {
				// body = JSON.parse({result: 'OK'});
				body = "{result: 'OK'}";
			}
			
			body = JSON.parse(body);

			if(body.error) {
				cb(body.error);
			} else {
				cb(null, res, body);
			}
		});
	});

	req.on('error', function (err){
		cb(err);
	});

	req.write(json);
	req.end();
}

function get(selector, postUrl, cb){

	var body = '';

	if(selector && cache[selector]) {
		return cb(null, cache[selector]);
	}

	http.get(postUrl, function (res) {
		res.setEncoding('utf8');
		res.on('data', function (chunk) {
			body += chunk;
		});
		res.on('end', function() {
			if(selector) cache[selector] = body;
			cb(null, body);
		});
	}).on('error', function(err) {
		cb(err);
	});
}

},{"./debug":110,"http":99,"url":104}],115:[function(require,module,exports){
(function (global){
var storage = global.localStorage;
var session = global.sessionStorage;
var prefix = 'swc';
var delimiter = '.';

// Current cache object
var cache = {
	sid: null,
	eventTimestamp: 0,
	msgTimestamp: 0,
	entity: undefined,
	chat: null
};

module.exports = {
	get: getItem,
	set: setItem,
	remove: removeItem,
	getState: getState,
	saveState: saveState,
	removeState: removeState
};

function getItem(key, location) {
	if(location === 'session') {
		return JSON.parse(session.getItem(prefix+delimiter+key));
	} else {
		return JSON.parse(storage.getItem(prefix+delimiter+key));
	}
}

function setItem(key, value, location) {
	if(location === 'session') {
		session.setItem(prefix+delimiter+key, JSON.stringify(value));
	} else {
		storage.setItem(prefix+delimiter+key, JSON.stringify(value));
	}
	return value;
}

function removeItem(key, location) {
	if(location === 'session') {
		session.removeItem(prefix+delimiter+key);
	} else {
		storage.removeItem(prefix+delimiter+key);
	}
}

/**
 * Get saved property from localStorage or from session cache
 * @param  {String} key      - item key in storage memory
 * @param  {[type]} location - from where to retrieve item. 
 * Could be either "storage" - from localStorage, or "cache" - from session cache
 * @return {String|Object|Function}          - item value
 */
function getState(key, location){
	if(!location) {
		return (cache[key] !== undefined && cache[key] !== null) ? cache[key] : getItem(key);
	} else if(location === 'cache') {
		return cache[key];
	} else {
		return getItem(key, location);
	}
}

function saveState(key, value, location){
	cache[key] = value;
	if(location !== 'cache') {
		setItem(key, value, location);
	}
	return value;
}

function removeState(key, location) {
	delete cache[key];
	removeItem(key);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],116:[function(require,module,exports){
var debug = require('./debug');
var events = {},
JsSIP = require('./jssip.min.js'),
// JsSIP = global.JsSIP,
options,
sipClient,
sipSession,
sipCallEvents;

function isWebrtcSupported(){
	var RTC = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection,
		userMeida = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia,
		ice = window.mozRTCIceCandidate || window.RTCIceCandidate;

	return !!RTC && !!userMeida && !!ice;
}

function initJsSIPEvents(){
	sipClient.on('connected', function(e){ debug.log('sip connected event: ', e); });
	sipClient.on('disconnected', function(e){ debug.log('sip disconnected event: ', e); });
	sipClient.on('newMessage', function(e){ debug.log('sip newMessage event: ', e); });
	sipClient.on('newRTCSession', function(e){
		debug.log('sip newRTCSession event: ', e);
		events.emit('webrtc/newRTCSession', e);
		// if(e.session.direction === 'outgoing')
		// 	events.emit('webrtc/outgoingCall', e);
		// else
		// 	events.emit('webrtc/incomingCall', e);
		
			sipSession = e.session;
	});
	sipClient.on('registered', function(e){ debug.log('sip registered event: ', e); });
	sipClient.on('unregistered', function(e){ debug.log('sip unregistered event: ', e); });
	sipClient.on('registrationFailed', function(e){ debug.log('sip registrationFailed event: ', e); });

	sipCallEvents = {
		progress: function(e){
			debug.log('call progress event: ', e);
			events.emit('webrtc/progress', e);
		},
		failed: function(e){
			debug.log('call failed event:', e);
			events.emit('webrtc/failed', e);
		},
		ended: function(e){
			debug.log('call ended event: ', e);
			events.emit('webrtc/ended', e);
		},
		confirmed: function(e){
			debug.log('call confirmed event: ', e);
			events.emit('webrtc/confirmed', e);
		},
		addstream: function(e){
			debug.log('call addstream event: ', e);
			events.emit('webrtc/addstream', e);
			var stream = e.stream;
			options.audioRemote = JsSIP.rtcninja.attachMediaStream(options.audioRemote, stream);
		}
		// sdp: function(e){
		// 	debug.log('sdp: ', e);
		// }
	};
}

function isEstablished(){
	return sipSession.isEstablished();
}

function isInProgress(){
	return sipSession.isInProgress();
}

function isEnded(){
	return sipSession.isEnded();
}

function unregister(){
	sipClient.stop();
}

function audiocall(number){
	sipSession = sipClient.call(number, {
		eventHandlers: sipCallEvents,
		mediaConstraints: { audio: true, video: false }
	});
}

function terminate(){
	sipSession.terminate({
		status_code: 200
	});
	// sipClient.terminateSessions();
}

function answer(){
	debug.log('answer: ',sipClient);
	sipSession.answer();
}

function hold(){
	debug.log('hold: ', sipSession.isOnHold());
	if(sipSession && sipSession.isOnHold().local) {
		sipSession.unhold();
	} else {
		sipSession.hold();
	}
}

function createRemoteAudio(){
	var el = document.createElement('audio');
	el.setAttribute('autoplay', 'autoplay');
	document.body.appendChild(el);
	return el;
}

function init(opts){
	debug.log('Initiating WebRTC module:', opts);
	options = opts;

	// !!get rid of this!!
	events.emit = opts.emit;
	events.on = opts.on;
	// !!get rid of this!!

	options.audioRemote = createRemoteAudio();
	sipClient = new JsSIP.UA(options.sip);
	initJsSIPEvents();
	sipClient.start();
	// return sipClient;
}

module.exports = {
	lib: JsSIP,
	init: init,
	unregister: unregister,
	audiocall: audiocall,
	terminate: terminate,
	answer: answer,
	hold: hold,
	isInProgress: isInProgress,
	isEstablished: isEstablished,
	isEnded: isEnded,
	isSupported: isWebrtcSupported
};
},{"./debug":110,"./jssip.min.js":111}],117:[function(require,module,exports){
(function (global){
var domify = require('domify');
var core = require('./core');
var storage = require('./storage');
var request = require('./request');
var debug = require('./debug');
var _ = require('./lodash');
var frases = null;
var cobrowsing = require('./cobrowsing');
var WebRTC = require('./webrtc');
var serverUrl = {};
var forms;
var api;

// Widget initiation options
var defaults = {
	// prefix for CSS classes and ids. 
	// Change it only if the default prefix 
	// matches with existed classes or ids on the website
	prefix: 'swc',
	// whether or not to ask user 
	// to introduce him self before the chat session
	intro: false,
	// whether or not to add widget to the webpage
	widget: true,
	// DOM element that opens a widget
	buttonElement: null,
	title: '',
	lang: 'en',
	langFromUrl: false,
	position: 'right',
	hideOfflineButton: false,
	offer: false,
	styles: {
		primary: {
			backgroundColor: '#555555',
			color: '#FFFFFF'
		},
		intro: {
			backgroundImage: "images/bgr-02.jpg"
		},
		sendmail: {
			backgroundImage: "images/bgr-01.jpg"
		},
		closeChat: {
			backgroundImage: "images/bgr-02.jpg"
		}
	},
	buttonStyles: {
		online: {
			backgroundColor: 'rgba(175,229,255,0.8)',
			color: ''
		},
		offline: {
			backgroundColor: 'rgba(241,241,241,0.8)',
			color: ''
		},
		timeout: {
			backgroundColor: 'rgba(241,241,241,0.8)',
			color: ''
		},
		notified: {
			backgroundColor: 'rgba(253,250,129,0.8)',
			color: ''
		},
		color: '#777'
	},
	widgetWindowOptions: 'left=10,top=10,width=350,height=550,resizable',
	// absolute path to the wchat folder
	path: '/ipcc/webchat/',
	// absolute path to the clients files. If not set, files requested from defaults.server + defaults.path.
	clientPath: '',
	// absolute path to the css flie
	stylesPath: '',
	// in seconds
	checkStatusTimeout: 30,
	// in seconds
	getMessagesTimeout: 1,
	// displayed in the email template
	host: window.location.host,
	// webrtc options
	webrtc: {
		sip: {},
		hotline: ''
	},
	webrtcEnabled: false,
	callback: {
		task: ''
	}
},

// Current widget state
widgetState = {
	initiated: false,
	active: false,
	state: '', // "online" | "offline" | "timeout",
	share: false
},
dialog = [],

// available dialog languages
langs = [],
currLang = '',
messagesTimeout,
noMessagesTimeout,
chatTimeout,
// Container for messages
messagesCont,
// Widget dom element
widget,

// Widget in a separate window
widgetWindow,
// Widget panes elements
panes,
agentIsTypingTimeout,
userIsTypingTimeout,
timerUpdateInterval,
pollTurns = 1;
// ringTone = null,
// ringToneInterval = null;

function Widget(options){

	_.merge(defaults, options || {});
	// _.assign(defaults, options || {});

	debug.log('Widget: ', options);

	defaults.clientPath = defaults.clientPath || (defaults.server + defaults.path);

	addWidgetStyles();
	serverUrl = require('url').parse(defaults.server, true);

	api = new core(options)
	.on('session/create', onSessionSuccess)
	.on('session/continue', onSessionSuccess)
	.on('session/join', onSessionJoin)
	.on('session/init', onSessionInit);
	// .on('chat/languages', onNewLanguages);
	
	if(defaults.widget) {
		api.on('chat/start', startChat)
		.on('chat/close', onChatClose)
		.on('chat/timeout', onChatTimeout)
		.on('message/new', clearUndelivered)
		.on('message/new', newMessage)
		.on('message/typing', onAgentTyping)

		.on('form/submit', onFormSubmit)
		.on('form/reject', closeForm)
		.on('widget/load', onWidgetLoad);
		// .on('widget/init', onWidgetInit);
		// .on('widget/statechange', changeWgState);
	}

	if(defaults.webrtc.sip.ws_servers !== undefined && WebRTC.isSupported()) {
		if(window.location.protocol === 'https:' && serverUrl.protocol === 'https:'){
			// set flag to indicate that webrtc feature is supported and enabled
			defaults.webrtcEnabled = true;

			// set webrtc event handlers
			api.on('webrtc/newRTCSession', function(){
				initCallState('newRTCSession');
			});
			api.on('webrtc/progress', function(e){
				if(e.response.status_code === 180) {
					initCallState('ringing');
				} else {
					initCallState('confirmed');
				}
			});
			api.on('webrtc/addstream', function(){
				initCallState('connected');
			});
			api.on('webrtc/ended', function(){
				initCallState('ended');
			});
			api.on('webrtc/failed', function(e){
				if(e.cause === 'Canceled'){
					initCallState('canceled');
				} else {
					initCallState('failed');
				}
			});

			// ringTone audio element plays ringTone sound when calling to agent
			// ringTone = document.createElement('audio');
			// ringTone.src = defaults.clientPath+'sounds/ringout.wav';
			// document.body.appendChild(ringTone);

			// initiate webrtc module with parameters
			initWebrtcModule({
				sip: defaults.webrtc.sip,
				emit: publicApi.emit,
				on: publicApi.on
			});
		} else {
			// webrtc is supported by the browser, but the current web page
			// is located on insecure origins, therefore the webrtc is not supported
			debug.warn('WebRTC feature is disabled');
			debug.warn('getUserMedia() no longer works on insecure origins. To use this feature, you should consider switching your application to a secure origin, such as HTTPS. See https://goo.gl/rStTGz for more details.');
		}
	}
		
	setSessionTimeoutHandler();

	// load translations
	request.get('frases', defaults.clientPath+'translations.json', function (err, result){
		if(err) return api.emit('Error', err);
		frases = JSON.parse(result);
	});
	
	// load forms
	request.get('forms_json', defaults.clientPath+'forms.json', function (err, result){
		if(err) return api.emit('Error', err);
		forms = JSON.parse(result).forms;
	});

	request.get('forms_tmp', defaults.clientPath+'partials/forms.html', function (err, template){
		if(err) return api.emit('Error', err);
	});

	return publicApi;
}

var publicApi = {

	initModule: initModule,
	initWidgetState: initWidgetState,
	openWidget: openWidget,
	initChat: initChat,
	getWidgetElement: getWidgetElement,
	isWebrtcSupported: WebRTC.isSupported,
	getEntity: function(){ return storage.getState('entity', 'session'); },
	on: function(evt, listener) {
		api.on(evt, listener);
		return this;
	},
	emit: function (evt, listener){
		api.emit(evt, listener);
		return this;
	},
	/**
	 * Set default user credentials.
	 * If "intro" is false, than dialog will start with these credentials.
	 * NOTE: Must be called before initModule method
	 * 
	 * @param {Object} params - User credentials, i.e. "uname", "lang", "phone", "subject"
	 */
	setDefaultCredentials: function(params) {
		defaults.credentials = params;
		return this;
	}
};

function initModule(){
	api.initModule();
	return publicApi;
}

function initWebrtcModule(opts){
	debug.log('initWebrtcModule: ', opts);
	WebRTC.init(opts);
}

// Session is either created or continues
function onSessionSuccess(){

	// Wait while translations are loaded
	_.poll(function(){

		return (frases !== null);

	}, function(){
		
		// set current user language
		currLang = currLang || detectLanguage();
		setSessionTimeoutHandler();

		// If page loaded and "widget" property is set - load widget
		if(defaults.widget && !widgetState.initiated && isBrowserSupported()) {
			loadWidget();
		}

		// If timeout was occured, init chat after a session is created
		if(hasWgState('timeout')) {
			removeWgState('timeout');
			getLanguages();
		}

		// if window is not a opened window
		if(!defaults.external) {
			api.updateUrl(window.location.href);

			initCobrowsingModule({
				url: window.location.href,
				entity: storage.getState('entity', 'session'),
				widget: '#'+defaults.prefix+'-wg-cont'
			});
		}

		api.emit('session/init', {options: defaults, url: global.location.href });

	}, function(){
		
		if(pollTurns < 2) {
			pollTurns++;
			Widget(defaults).initModule();
		} else {
			return api.emit('Error', 'Module wasn\'t initiated due to network errors');
		}

	}, 60000);		

}

function onSessionInit(){
	storage.saveState('init', true, 'session');
	if(widgetWindow && !widgetWindow.closed) widgetWindow.sessionStorage.setItem(defaults.prefix+'.init', true);
}

// send shared event to the user's browser
function onSessionJoin(params){
	// debug.log('onSessionJoin: ', params);
	initCobrowsingModule({ url: params.url, entity: storage.getState('entity', 'session') });
}

function loadWidget(cb){
	// debug.log('load widget!');
	var compiled;
	request.get('widget_tmp', defaults.clientPath+'widget.html', function (err, body){
		if(err) return;
		compiled = compileTemplate(body, {
			defaults: defaults,
			languages: langs,
			translations: frases,
			currLang: currLang || defaults.lang,
			credentials: storage.getState('credentials', 'session') || {},
			_: _
		});

		// Widget variable assignment
		widget = domify(compiled);
		// document.body.insertBefore(widget, document.body.firstChild);
		document.body.appendChild(widget);
		api.emit('widget/load', widget);

	});
}

function onWidgetLoad(widget){
	debug.log('widget loaded!');
	
	if(defaults.buttonElement) 
		defaults.buttonElement.addEventListener('click', publicApi.openWidget, false);

	api.once('chat/languages', initWidget);
	getLanguages();
	// initWidget();
}

function initCobrowsingModule(params){
	// init cobrowsing module only on main window
	if(defaults.external) return;

	api.on('cobrowsing/init', function(){
		if(storage.getState('shared', 'session') || params.entity === 'agent') cobrowsing.share();
		// cobrowsing.emitEvents();
	});
	api.on('cobrowsing/event', function(params){
		api.updateEvents(params.events, function(err, result){
			if(err) return;
			cobrowsing.updateEvents(result);
		});
	});

	api.on('cobrowsing/shared', function(){
		if(!storage.getState('shared', 'session') && params.entity === 'user') {
			storage.saveState('shared', true, 'session');
			api.switchShareState(true, params.url);
		}
		api.updateEvents([{ entity: params.entity, url: params.url, shared: true }], function(err, result){
			// if(err) return;
			result.historyEvents = true;
			// debug.log('cobrowsing update: ', result);
			cobrowsing.updateEvents(result);
		});
	});

	api.on('cobrowsing/unshared', function(params){
		storage.saveState('shared', false, 'session');
		api.updateEvents([{ entity: params.entity, url: params.url, shared: false }], function(err, resul){
			// if(err) return;
			if(params.entity === 'user') api.switchShareState(false, window.location.href);
			else cobrowsing.unshareAll();
		});
	});
	
	cobrowsing.init({
		widget: params.widget,
		entity: params.entity,
		emit: publicApi.emit,
		path: defaults.clientPath
	});
}

function getWidgetElement(){
	return widget;
}

function getLanguages(){
	api.getLanguages(function (err, body){
		if(err) return;
		if(body) onNewLanguages(body.result);
		setTimeout(getLanguages, defaults.checkStatusTimeout*1000);
	});
}

function onNewLanguages(languages){
	// debug.log('languages: ', languages);
	var state = languages.length ? 'online' : 'offline',
	options = '', selected;

	// if(hasWgState(state)) return;
	if(widgetState.state === state) return;
	
	langs = languages;

	if(widget && defaults.intro.length) {
		// Add languages to the template
		langs.forEach(function(lang) {
			if(frases[lang] && frases[lang].lang) {
				selected = lang === currLang ? 'selected' : '';
				options += '<option value="'+lang+'" '+selected+' >'+frases[lang].lang+'</option>';
			}
		});
		global[defaults.prefix+'IntroForm'].lang.innerHTML = options;
	}

	changeWgState({ state: state });
	api.emit('chat/languages', languages);
}

function initWidget(){
	// debug.log('Init widget!');
	widgetState.initiated = true;

	setListeners(widget);
	changeWgState({ state: widgetState.state });

	if(defaults.hideOfflineButton) {
		addWgState('no-button');
	}

	if(defaults.offer) {
		setOffer();
	}

	// if chat started
	if(storage.getState('chat') === true) {
		requestChat(storage.getState('credentials', 'session') || {});
		showWidget();
		// initChat();
	}

	// if webrtc supported by the browser and ws_servers parameter is set - change button icon
	if(defaults.webrtcEnabled) {
		addWgState('webrtc-enabled');
	}

	// Widget is initiated
	api.emit('widget/init');
}

function setOffer() {
	setTimeout(function() {
		showOffer({
			from: defaults.offer.from || frases[currLang].TOP_BAR.title,
			time: Date.now(),
			text: defaults.offer.text || frases[currLang].default_offer
		});
	}, defaults.offer.inSeconds ? defaults.offer.inSeconds*1000 : 30000);
}

function showOffer(message) {
	// Return if user already interact with the widget
	if(widgetState.state !== 'online' || isInteracted()) return;
	newMessage({ messages: [message] });
}

function setInteracted(){
	if(!storage.getState('interacted', 'session')) {
		storage.saveState('interacted', true, 'session');
	}
}

function isInteracted(){
	return storage.getState('interacted', 'session');
}

function initChat(){
	showWidget();

	// // if chat already started and widget was minimized - just show the widget
	if(storage.getState('chat', 'cache')) return;

	if(!langs.length) {
		switchPane('sendemail');
	} else if(defaults.intro.length) {
		if(storage.getState('chat')) {
			requestChat(storage.getState('credentials', 'session'));
		} else {
			switchPane('credentials');
		}
	} else {
		requestChat({ lang: currLang });
	}
}

function requestChat(credentials){
	if(!credentials.uname) credentials.uname = storage.getState('sid').split('_')[0];
	
	// Save user language based on preferable dialog language
	if(credentials.lang && credentials.lang !== currLang ) {
		storage.saveState('lang', credentials.lang);
	}
	if(!credentials.lang) {
		credentials.lang = currLang;
	}
	
	// Save credentials for current session
	// It will be removed on session timeout
	storage.saveState('credentials', credentials, 'session');

	api.chatRequest(credentials);
	switchPane('messages');
}

function startChat(params){
	storage.saveState('chat', true);
	if(params.timeout) {
		// debug.log('chat timeout: ', params.timeout);
		chatTimeout = api.setChatTimeout(params.timeout);
	}
	getMessages();
	addWgState('chat');
}

function getMessages(){
	// debug.log('get messages!');
	
	if(storage.getState('chat'))
		noMessagesTimeout = setTimeout(getMessages, 60*1000);
	
	api.getMessages(function(result) {
		if(storage.getState('chat')) {
			messagesTimeout = setTimeout(getMessages, defaults.getMessagesTimeout*1000);
			clearTimeout(noMessagesTimeout);
		}
	});
}

function sendMessage(message){
	api.sendMessage(message);
	newMessage({ messages: [{
		from: storage.getState('credentials', 'session').uname,
		time: Date.now(),
		text: message,
		hidden: true,
		className: defaults.prefix+'-msg-undelivered'
	}] });
	if(chatTimeout) clearTimeout(chatTimeout);
}

function newMessage(result){
	// debug.log('new messages arrived!', result);

	var str,
		els = [],
		text,
		compiled,
		defaultUname = false,
		credentials = storage.getState('credentials', 'session') || {},
		aname = storage.getState('aname', 'session'),
		uname = credentials.uname ? credentials.uname : '';

	if(uname === storage.getState('sid').split('_')[0]) {
		defaultUname = true;
	}

	result.messages.forEach(function(message, index) {
		
		message.entity = message.from === uname ? 'user' : 'agent';
		message.from = (message.entity === 'user' && defaultUname) ? frases[currLang].default_user_name : message.from;
		message.time = message.time ? parseTime(message.time) : parseTime(Date.now());

		text = parseMessage(message.text, message.file, message.entity);

		if(text.type === 'form') {
			request.get('forms_tmp', defaults.clientPath+'partials/forms.html', function (err, template){
				if(err) return cb(err);

				compiled = compileTemplate(template, {
					defaults: defaults,
					message: message,
					form: text.content,
					credentials: credentials,
					frases: frases[(currLang || defaults.lang)],
					_: _
				});
				if(global[text.content.name]) closeForm({ formName: text.content.name });
				messagesCont.insertAdjacentHTML('beforeend', '<li>'+compiled+'</li>');
				messagesCont.scrollTop = messagesCont.scrollHeight;
			});
		} else {
			message.text = text.content;
			compiled = compileTemplate(messageTemplate(), message);
			messagesCont.insertAdjacentHTML('beforeend', '<li '+(message.className ? 'class="'+message.className+'"' : '' )+'>'+compiled+'</li>');

			if(index === result.messages.length-1) {
				onLastMessage(compiled);
			}

			// Need for sending dialog to email
			if(!message.hidden) dialog.push(compiled);
		}

		// Save agent name
		if(message.entity === 'agent' && aname !== message.from) {
			storage.saveState('aname', message.from, 'session');
		}

	});

	messagesCont.scrollTop = messagesCont.scrollHeight;
}

function clearUndelivered(){
	var undelivered = [].slice.call(document.querySelectorAll('.'+defaults.prefix+'-msg-undelivered'));
	if(undelivered && undelivered.length) {
		undelivered.forEach(function(msg){
			msg.classList.add(defaults.prefix+'-hidden');
		});
	}
}

/**
 * Visual notification about a new message fomr agent.
 * It is also used for offer notification
 * 
 * @param  {String} message - New message content 
 */
function onLastMessage(message){
	var lastMsg;
	if(!widgetState.active) {
		lastMsg = document.getElementById(defaults.prefix+'-lastmsg');

		PrefixedEvent(lastMsg, 'animationend', ["webkit", "moz", "MS", "o", ""], function(e) {
			btn.children[0].style.height = e.target.scrollHeight + 'px';
		});

		lastMsg.innerHTML = message;
		// changeWgState({ state: 'notified' });
		addWgState('notified');
		setButtonStyle('notified');
	}
}

function compileEmail(content, cb) {
	var compiled;
	request.get('email_tmp', defaults.clientPath+'partials/email.html', function (err, body){
		if(err) return cb(err);

		compiled = compileTemplate(body, {
			defaults: defaults,
			content: content,
			frases: frases[(currLang || defaults.lang)],
			_: _
		});

		if(cb) return cb(null, compiled);
	});
}

function sendDialog(params){
	var dialogStr = params.text.join('');
	compileEmail(dialogStr, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
	});
}

function sendComplain(params){
	var body = [];
	// TODO: explain...
	var complain = compileTemplate(messageTemplate(), {
		from: frases[currLang].EMAIL_SUBJECTS.complain+' '+params.email,
		text: params.text,
		entity: '',
		time: ''
	});

	body = body.concat(
		complain,
		'<br><p class="h1">'+frases[currLang].EMAIL_SUBJECTS.dialog+' '+defaults.host+'</p><br>',
		dialog
	).reduce(function(prev, curr) {
		return prev.concat(curr);
	});

	compileEmail(body, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
	});
}

function sendRequest(params, cb) {
	// TODO: explain...
	var msg = compileTemplate(messageTemplate(), {
		from: frases[currLang].EMAIL_SUBJECTS.request+' '+params.uname+' ('+params.email+')',
		text: params.text,
		entity: '',
		time: ''
	});

	compileEmail(msg, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
		if(cb) cb();
	});
}

function submitSendMailForm(form, data) {
	var params = {},
		file;

	if(!data.email) {
		alert(frases[currLang].ERRORS.email);
		return;
	}

	data.subject = frases[currLang].EMAIL_SUBJECTS.request+' '+data.email;

	if(data.file) {
		file = getFileContent(form.file, function(err, result) {
			if(!err) {
				data.filename = result.filename;
				data.filedata = result.filedata;
			} else {
				debug.warn('File wasn\'t sent');
			}
			delete data.file;
			sendRequest(data, function() {
				form.reset();
				closeWidget();
			});
		});
	} else {
		sendRequest(data, function() {
			form.reset();
			closeWidget();
		});
	}
}

function submitCloseChatForm(form, data){
	var rating = (data && data.rating) ? parseInt(data.rating, 10) : null;
	if(data && data.sendDialog) {
		if(!data.email) {
			alert(frases[currLang].ERRORS.email);
			return;
		}
		// debug.log('send dialog');
		sendDialog({
			to: data.email,
			subject: frases[currLang].EMAIL_SUBJECTS.dialog+' '+defaults.host,
			text: dialog // global variable
		});
	}
	if(data && data.text) {
		if(!data.email) {
			alert(frases[currLang].ERRORS.email);
			return;
		} else {
			// debug.log('send complain!');
			sendComplain({
				email: data.email,
				subject: frases[currLang].EMAIL_SUBJECTS.complain+' '+data.email,
				text: data.text
			});
		}
	}
	if(chatTimeout) clearTimeout(chatTimeout);
	if(form) form.reset();
	
	closeChat(rating);
	closeWidget();
}

function closeChat(rating) {
	storage.saveState('chat', false);
	api.closeChat(rating);
	removeWgState('chat');
}

function onChatClose(){
	if(storage.getState('shared', 'session')) cobrowsing.unshare();
}

function onChatTimeout(){
	// debug.log('chat timeout!');
	switchPane('closechat');
	closeChat();
}

function onAgentTyping(opts){
	// debug.log('Agent is typing!');
	if(!agentIsTypingTimeout) {
		addWgState('agent-typing');
	}
	clearTimeout(agentIsTypingTimeout);
	agentIsTypingTimeout = setTimeout(function() {
		agentIsTypingTimeout = null;
		removeWgState('agent-typing');
		// debug.log('agent is not typing anymore!');
	}, 5000);
}

function setSessionTimeoutHandler(){
	if(api.listenerCount('session/timeout') >= 1) return;
	api.once('session/timeout', function (params){
		// debug.log('Session timeout!', params);

		if(storage.getState('chat') === true) {
			closeChat();
		}
		if(widget) {
			// addWgState('timeout');
			closeWidget();
		}
		changeWgState({ state: 'timeout' });
		// widgetState.state = 'timeout';
		// addWgState('timeout');
		setButtonStyle('timeout');
		storage.removeState('sid');

		if(params && params.method === 'updateEvents') {
			initModule();
		}
	});
}

function initCall(){
	switchPane('callAgent');
	WebRTC.audiocall(defaults.webrtc.hotline);
	// WebRTC.audiocall('sip:'+defaults.webrtc.hotline+'@'+serverUrl.host);
}

function initCallback(){
	switchPane('callback');
}

function setCallback(){
	var form = document.getElementById(defaults.prefix+'-callback-settings'),
		formData = getFormData(form),
		cbSpinner = document.getElementById(defaults.prefix+'-callback-spinner'),
		cbSent = document.getElementById(defaults.prefix+'-callback-sent');
	
	formData.phone = formData.phone ? formatPhoneNumber(formData.phone) : null;

	if(!formData.phone || formData.phone.length < 10) {
		return alert(frases[currLang].ERRORS.tel);
	}

	formData.time = parseFloat(formData.time);
	
	if(formData.time <= 0) return;

	formData.time = Date.now() + (formData.time * 60 * 1000);
	formData.task = defaults.callback.task;
	debug.log('setCallback data: ', formData);

	form.classList.add(defaults.prefix+'-hidden');
	cbSpinner.classList.remove(defaults.prefix+'-hidden');

	api.requestCallback(formData, function(err, result) {
		debug.log('setCallback result: ', err, result);

		cbSpinner.classList.add(defaults.prefix+'-hidden');
		form.classList.remove(defaults.prefix+'-hidden');

		if(err) return;
		
		switchPane('callbackSent');
	});

	form.reset();
}

function initCallState(state){
	debug.log('initCallState: ', state);

	var spinner = document.getElementById(defaults.prefix+'-call-spinner'),
		info = document.getElementById(defaults.prefix+'-call-info'),
		textState = document.getElementById(defaults.prefix+'-call-state'),
		timer = document.getElementById(defaults.prefix+'-call-timer'),
		tryAgain = document.getElementById(defaults.prefix+'-tryagain-btn');

	if(state === 'newRTCSession') {
		initCallState('oncall');

	} else if(state === 'confirmed') {
		textState.innerText = frases[currLang].AUDIO_CALL.calling_agent;
		info.classList.remove(defaults.prefix+'-hidden');
		spinner.classList.add(defaults.prefix+'-hidden');
		tryAgain.classList.add(defaults.prefix+'-hidden');

	} else if(state === 'ringing') {
		setTimer(timer, 'init', 0);
		timer.classList.remove(defaults.prefix+'-hidden');
		// playRingTone();

	} else if(state === 'connected') {
		textState.innerText = frases[currLang].AUDIO_CALL.connected_with_agent;
		setTimer(timer, 'start', 0);
		// stopRingTone();

	} else if(state === 'ended') {
		textState.innerText = frases[currLang].AUDIO_CALL.call_ended;
		setTimer(timer, 'stop');
		initCallState('oncallend');
		
	} else if(state === 'failed' || state === 'canceled') {
		if(state === 'failed') {
			textState.innerText = frases[currLang].AUDIO_CALL.call_failed;
		} else {
			textState.innerText = frases[currLang].AUDIO_CALL.call_canceled;
		}
		info.classList.remove(defaults.prefix+'-hidden');
		spinner.classList.add(defaults.prefix+'-hidden');
		timer.classList.add(defaults.prefix+'-hidden');
		tryAgain.classList.remove(defaults.prefix+'-hidden');
		initCallState('oncallend');

	} else if(state === 'oncall') {
		window.onbeforeunload = function(){
			return 'Your connection is in progress. Do you realy want to close it?';
		};
		storage.saveState('call', true, 'cache');
		addWgState('webrtc-call');

	} else if(state === 'oncallend') {
		window.onbeforeunload = null;
		storage.saveState('call', false, 'cache');
		removeWgState('webrtc-call');
		// stopRingTone();

	} else if('init') {
		info.classList.add(defaults.prefix+'-hidden');
		spinner.classList.remove(defaults.prefix+'-hidden');
		tryAgain.classList.add(defaults.prefix+'-hidden');
	}
}

function setTimer(timer, state, seconds){
	var time = seconds;
	if(state === 'start') {
		timerUpdateInterval = setInterval(function(){
			time = time+1;
			timer.textContent = convertTime(time);
		}, 1000);
	} else if(state === 'stop') {
		clearInterval(timerUpdateInterval);
	} else if(state === 'init') {
		timer.textContent = convertTime(0);
	}
}

function endCall(){
	if(WebRTC.isEstablished() || WebRTC.isInProgress()) {
		WebRTC.terminate();
	} else {
		closeWidget();
		initCallState('init');
	}
}

// function playRingTone(){
// 	if(ringToneInterval) return;
// 	ringToneInterval = setInterval(function(){
// 		ringTone.play();
// 	}, 3000);
// }

// function stopRingTone(){
// 	clearInterval(ringToneInterval);
// }

/**
 * Open web chat widget in a new window
 */
function openWidget(){
	debug.log('open widget: ', storage.getState('sid'));
	var url = defaults.clientPath+'window.html',
		opts = {},
		optsEncoded = '';
	
	if(!widgetWindow || widgetWindow.closed) {

		_.merge(opts, defaults);

		opts.widget = true;
		// set external flag to indicate that the module loads not in the main window
		opts.external = true;

		widgetWindow = window.open('', 'wchat', defaults.widgetWindowOptions);
		widgetWindow = constructWindow(widgetWindow);
		widgetWindow.sessionStorage.setItem('wchat_options', JSON.stringify(opts));

		// Wait while the script is loaded, 
		// then init module in the child window
		_.poll(function(){
			return widgetWindow.Wchat !== undefined;
		}, function(){
			widgetWindow.Module = widgetWindow.Wchat(opts);
			widgetWindow.Module.on('widget/init', function(){
				widgetWindow.Module.initWidgetState();
			});
			
			/* 
			* Proxy all events that is emitted in the child window
			* to the main window, but with the 'window/' prefix before the event name.
			* So, for example, 'chat/start' event in the child window,
			* would be 'window/chat/start' in the main window 
			*/
			_.forEach(api._events, function(value, key, coll){
				widgetWindow.Module.on(key, function(params){
					params.url = global.location.href;
					api.emit('window/'+key, params);
				});
			});

			widgetWindow.Module.initModule();

		}, function(){
			console.warn('Wchat module was not initiated due to network connection issues.');
		}, 120000);
		
		widgetWindow.onbeforeunload = function(){
			//close chat if user close the widget window
			//without ending a dialog
			if(storage.getState('chat', 'storage')) closeChat();
		};
	}
	if(widgetWindow.focus) widgetWindow.focus();
}

function constructWindow(windowObject){
	var loader,
	script,
	link,
	charset,
	viewport,
	title,
	currLang = currLang || detectLanguage(),
	loaderElements = windowObject.document.createElement('div'),
	loaderStyles = createStylesheet(windowObject, 'swc-loader-styles'),
	head = windowObject.document.getElementsByTagName('head')[0],
	body = windowObject.document.getElementsByTagName('body')[0];

	loaderElements.className = "swc-widget-loader";
	loaderElements.innerHTML = "<span></span><span></span><span></span>";

	viewport = windowObject.document.createElement('meta');
	viewport.name = 'viewport';
	viewport.content = 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0';

	charset = windowObject.document.createElement('meta');
	charset.setAttribute('charset', 'utf-8');

	title = windowObject.document.createElement('title');
	title.textContent = frases[currLang].TOP_BAR.title;

	// loader = windowObject.document.createElement('script');
	// loader.src = defaults.clientPath+'loader.js';

	script = windowObject.document.createElement('script');
	script.src = defaults.clientPath+'wchat.min.js';
	script.charset = 'UTF-8';

	head.appendChild(viewport);
	head.appendChild(charset);
	head.appendChild(title);
	head.appendChild(loaderStyles);
	head.appendChild(script);

	body.id = 'swc-wg-window';
	body.appendChild(loaderElements);
	// body.appendChild(loader);

	addLoaderRules(head.getElementsByTagName('style')[0]);

	return windowObject;
}

function createStylesheet(windowObject, id){
	// Create the <style> tag
		var style = windowObject.document.createElement("style");
		style.type = 'text/css';
		if(id) style.id = id;

		// WebKit hack :(
		style.appendChild(windowObject.document.createTextNode(""));

		return style;
}

function addLoaderRules(style){
	var theRules = [
		"body { margin:0; background-color: #eee; }",
		"@keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		"@-webkit-keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		"@-moz-keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		"@-ms-keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		"@-o-keyframes preloading {",
			"0 { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
			"50% { transform: translate(0,15px); -webkit-transform: translate(0,15px); -moz-transform: translate(0,15px); -ms-transform: translate(0,15px); -o-transform: translate(0,15px); }",
			"100% { transform: translate(0,0); -webkit-transform: translate(0,0); -moz-transform: translate(0,0); -ms-transform: translate(0,0); -o-transform: translate(0,0); }",
		"}",
		".swc-widget-loader {",
			"position: absolute;",
			"width: 100%;",
			"top: 50%;",
			"margin-top: -18px;",
			"text-align: center;",
		"}",
		".swc-widget-loader span {",
			"display: inline-block;",
			"width: 18px;",
			"height: 18px;",
			"border-radius: 50%;",
			"background-color: #fff;",
			"margin: 3px;",
		"}",
		".swc-widget-loader span:nth-last-child(1) { -webkit-animation: preloading .8s .1s linear infinite; -moz-animation: preloading .8s .1s linear infinite; -ms-animation: preloading .8s .1s linear infinite; -o-animation: preloading .8s .1s linear infinite; animation: preloading .8s .1s linear infinite; }",
		".swc-widget-loader span:nth-last-child(2) { -webkit-animation: preloading .8s .3s linear infinite; -moz-animation: preloading .8s .3s linear infinite; -ms-animation: preloading .8s .3s linear infinite; -o-animation: preloading .8s .3s linear infinite; animation: preloading .8s .3s linear infinite; }",
		".swc-widget-loader span:nth-last-child(3) { -webkit-animation: preloading .8s .5s linear infinite; -moz-animation: preloading .8s .5s linear infinite; -ms-animation: preloading .8s .5s linear infinite; -o-animation: preloading .8s .5s linear infinite; animation: preloading .8s .5s linear infinite; }",
	].join(" ");

	style.innerHTML = theRules;
}

/**
 * Set Widget event listeners
 * @param {DOMElement} widget - Widget HTML element
 */
function setListeners(widget){
	// var sendMsgBtn = document.getElementById(defaults.prefix+'-send-message'),
	var fileSelect = document.getElementById(defaults.prefix+'-file-select'),
		textField = document.getElementById(defaults.prefix+'-message-text'),
		inputs = [].slice.call(widget.querySelectorAll('.'+defaults.prefix+'-inputfile'));

	btn = document.getElementById(defaults.prefix+'-btn-cont');
	panes = [].slice.call(widget.querySelectorAll('.'+defaults.prefix+'-wg-pane'));
	messagesCont = document.getElementById(defaults.prefix+'-messages-cont');

	inputs.forEach(function(input){
		var label = input.nextElementSibling,
			labelVal = label.textContent;

		addEvent(input, 'change', function(e){
			var fileName = e.target.value.split( '\\' ).pop();
			if(fileName)
				label.textContent = fileName;
			else
				label.textContent = labelVal;
		});
	});

	addEvent(btn, 'click', btnClickHandler);
	addEvent(widget, 'click', wgClickHandler);
	addEvent(widget, 'submit', wgSubmitHandler);
	// addEvent(sendMsgBtn, 'click', wgSendMessage);
	addEvent(fileSelect, 'change', wgSendFile);
	addEvent(textField, 'keypress', wgTypingHandler);
}

/********************************
 * Widget event handlers *
 ********************************/

function wgClickHandler(e){
	var targ = e.target,
		handler,
		pane,
		href,
		dataHref;

	if(targ.parentNode.tagName === 'A' || targ.parentNode.tagName === 'BUTTON')
		targ = targ.parentNode;
	
	handler = targ.getAttribute('data-'+defaults.prefix+'-handler');
	dataHref = targ.getAttribute('data-'+defaults.prefix+'-link');

	if(handler === 'closeWidget') {
		closeWidget();
	} else if(handler === 'finish') {
		if(storage.getState('chat')) switchPane('closechat');
		else closeWidget();
	} else if(handler === 'sendMessage') {
		wgSendMessage();
	} else if(handler === 'openWindow') {
		openWidget();
	} else if(handler === 'rejectForm') {
		api.emit('form/reject', { formName: _.findParent(targ, 'form').name });
	} else if(handler === 'initCall') {
		initCall();
	} else if(handler === 'initCallback') {
		initCallback();
	} else if(handler === 'setCallback') {
		setCallback();
	} else if(handler === 'initChat') {
		initChat();
	} else if(handler === 'endCall') {
		endCall();
	}

	if(targ.tagName === 'A') {
		href = targ.href;

		if(dataHref) {
			api.linkFollowed(dataHref);
		} else if(href.indexOf('#') !== -1) {
			e.preventDefault();
			pane = href.substring(targ.href.indexOf('#')+1);
			if(pane) switchPane(pane);
		}
	}
}

function btnClickHandler(e){
	e.preventDefault();
	var targ = e.target,
		currTarg = e.currentTarget;

	// remove notification of a new message
	if(targ.id === defaults.prefix+'-unnotify-btn') {
		removeWgState('notified');
		// reset button height
		resetStyles(btn.children[0]);
		setButtonStyle(widgetState.state);
		return;
	}

	if(currTarg.id === defaults.prefix+'-btn-cont') {
		initWidgetState();
	}
}

function initWidgetState(){
	// If element is interacted, then no notifications of a new message 
	// will occur during current browser session
	setInteracted();
	// If timeout is occured, init session first
	if(hasWgState('timeout')) {
		initModule();
	} else if(storage.getState('chat', 'cache')){
		showWidget();
	} else if(!langs.length){
		switchPane('sendemail');
	} else if(defaults.webrtcEnabled){
		// if call is in progress - just show the widget
		if(storage.getState('call', 'cache')) {
			showWidget();
		} else {
			switchPane('chooseConnection');
		}
	} else if(defaults.callback.task) {
		switchPane('chooseConnection');
	} else {
		initChat();
	}
}

function wgSendMessage(){
	var msg,
		textarea = document.getElementById(defaults.prefix+'-message-text');

	msg = _.trim(textarea.value);
	if(msg) {
		sendMessage(msg);
		textarea.value = '';
		removeWgState('type-extend');
	}
	if(!storage.getState('chat')) {
		initChat();
	}
}

function wgTypingHandler(e){
	var targ = e.target;
	if(e.keyCode === 10 || e.keyCode === 13) {
		e.preventDefault();
		wgSendMessage();
	} else {
		if(!userIsTypingTimeout) {
			userIsTypingTimeout = setTimeout(function() {
				userIsTypingTimeout = null;
				api.userIsTyping();
			}, 1000);
		}
	}

	if(targ.value.length >= 80 && !hasWgState('type-extend'))
		addWgState('type-extend');
	if(targ.value.length < 80 && hasWgState('type-extend'))
		removeWgState('type-extend');
}

function wgSubmitHandler(e){
	var targ = e.target;
	e.preventDefault();
	if(targ.tagName === 'FORM')
		api.emit('form/submit', { formElement: targ, formData: getFormData(targ) });
}

function wgSendFile(e){
	var targ = e.target;
	var file = getFileContent(targ, function(err, result) {
		debug.log('wgSendFile: ', result);
		if(err) {
			alert('File was not sent');
		} else {
			api.sendMessage(result.filedata, result.filename);
		}
	});
}

/********************************
 * Widget elements manipulation *
 ********************************/

function switchPane(pane){
	// var paneId = defaults.prefix+'-'+pane+'-pane';
	var attr = 'data-'+defaults.prefix+'-pane';
	// debug.log('switchPane panes:', panes, 'pane: ', pane);
	panes.forEach(function(item){
		if(item.getAttribute(attr) === pane) {
			item.classList.add('active');
		} else {
			item.classList.remove('active');
		}
	});

	if(!widgetState.active) showWidget();
}

function changeWgState(params){
	if(!widget || widgetState.state === params.state) return;
	if(params.state === 'offline') {
		removeWgState('online');
	} else if(params.state === 'online') {
		removeWgState('offline');
		
	}

	widgetState.state = params.state;
	addWgState(params.state);
	// api.emit('widget/statechange', { state: params.state });
	setButtonStyle(params.state);
}

// TODO: This is not a good solution or maybe not a good implementation
function setButtonStyle(state) {
	// debug.log('setButtonStyle: ', state);
	if(!widget || defaults.buttonStyles[state] === undefined) return;
	var wgBtn = widget.querySelector('.'+defaults.prefix+'-wg-btn'),
		btnIcon = widget.querySelector('.'+defaults.prefix+'-btn-icon');

	wgBtn.style.backgroundColor = defaults.buttonStyles[state].backgroundColor;
	btnIcon.style.color = defaults.buttonStyles[state].color || defaults.buttonStyles.color;
}

function addWgState(state){
	if(widget) widget.classList.add(state);
}

function hasWgState(state){
	if(widget) return widget.classList.contains(state);
	else return false;
}

function removeWgState(state){
	if(widget) widget.classList.remove(state);
}

function showWidget(){
	widgetState.active = true;
	addWgState('active');
	removeWgState('notified');

	// reset button height
	resetStyles(btn.children[0]);
	setButtonStyle(widgetState.state);

	messagesCont.scrollTop = messagesCont.scrollHeight;
}

function closeWidget(){
	if(window.opener) {
		window.close();
	} else {
		widgetState.active = false;
		removeWgState('active');
	}
}

function onFormSubmit(params){
	var form = params.formElement;
	var formData = params.formData;
	// debug.log('onFormSubmit: ', form, formData);
	if(form.getAttribute('data-validate-form')) {
		var valid = validateForm(form);
		if(!valid) return;
		// debug.log('onFormSubmit valid: ', valid);
	}
	if(form.id === defaults.prefix+'-closechat-form') {
		submitCloseChatForm(form, formData);
	} else if(form.id === defaults.prefix+'-sendmail-form') {
		submitSendMailForm(form, formData);
	} else if(form.id === defaults.prefix+'-intro-form') {
		requestChat(formData);
	} else if(form.id === defaults.prefix+'-call-btn-form'){
		initCall();
	} else if(form.id === defaults.prefix+'-chat-btn-form'){
		initChat();
	} else {
		closeForm({ formName: form.name }, true);
	}
}

function closeForm(params, submit){
	var form = global[params.formName];
	if(!form) return false;
	if(submit) {
		form.outerHTML = '<p class="'+defaults.prefix+'-text-center">'+
							'<i class="'+defaults.prefix+'-text-success '+defaults.prefix+'-icon-check"></i>'+
							'<span> '+frases[currLang].FORMS.submitted+'</span>'+
						'</p>';
	} else {
		form.outerHTML = '<p class="'+defaults.prefix+'-text-center">'+
							'<i class="'+defaults.prefix+'-text-danger '+defaults.prefix+'-icon-remove"></i>'+
							'<span> '+frases[currLang].FORMS.canceled+'</span>'+
						'</p>';
	}
}

function getFileContent(element, cb){
	var files = element.files,
		file,
		data,
		reader;

	if(!files.length) return;
	if(!global.FileReader) {
		if(cb) cb('OBSOLETE_BROWSER');
		return;
	}

	file = files[0];

	reader = new FileReader();
	reader.onload = function(event) {
		data = event.target.result;
		data = data.substring(data.indexOf(',')+1);
		if(cb) cb(null, { filedata: data, filename: file.name });
	};
	reader.onerror = function(event) {
		api.emit('Error', event.target.error);
		if(cb) cb(event.target.error);
	};
	reader.readAsDataURL(file);
}

function messageTemplate(){
	var str = '<div class="'+defaults.prefix+'-message '+defaults.prefix+'-<%=entity %>-msg">' +
					'<span class="'+defaults.prefix+'-message-from"><%=from %></span>' +
					'<span class="'+defaults.prefix+'-message-time"> <%= time %></span>' +
					'<br>' +
					'<p class="'+defaults.prefix+'-message-content" <% if(entity === "user") { %> style="border-color:'+defaults.styles.primary.backgroundColor+'" <% } %>><%=text %></p>' +
				'</div>';
				// '</li>';
	return str;
}

// function agentIsTypingTemplate(){
// 	var str = '<div id="'+defaults.prefix+'-agent-typing" class="'+defaults.prefix+'-agent-typing">' +
// 					'<span><%=aname %></span>' +
// 					'<span> <%= text %></span>' +
// 				'</div>';
// 	return str;
// }

function compileTemplate(template, data){
	var compiled = _.template(template);
	return compiled(data);
}

/********************************
 * Helper functions *
 ********************************/

function detectLanguage(){
	var storageLang = storage.getState('lang'),
		availableLangs = [],
		lang,
		path;

	if(storageLang) {
		lang = storageLang;
	} else {

		// list available languages by translations keys
		for(var key in frases) {
			availableLangs.push(key);
		}

		if(defaults.langFromUrl) {
			global.location.pathname
			.split('/')
			.forEach(function(item) {
				if(availableLangs.indexOf(item) !== -1) {
					lang = item;
				}
			});
		}

		if(!lang) {
			lang = defaults.lang || (navigator.language || navigator.userLanguage).split('-')[0];
			if(availableLangs.indexOf(lang) === -1) lang = 'en';
		}
	}

	// debug.log('detected lang: ', lang);

	return lang;
}

function browserIsObsolete() {
	debug.warn('Your browser is obsolete!');
}

function parseTime(ts) {
	var date = new Date(ts),
		hours = date.getHours(),
		minutes = date.getMinutes(),
		time = (hours < 10 ? '0'+hours : hours) + ':' + (minutes < 10 ? '0'+minutes : minutes);

	return time;
}

function parseMessage(text, file, entity){
	var filename, form;
	if(file) {
		filename = text.substring(text.indexOf('_')+1);
		if(isImage(file)) {
			return {
				type: 'image',
				content: '<a href="'+api.options.server+'/ipcc/'+text+'" download="'+filename+'">' +
						'<img src="'+api.options.server+'/ipcc/'+text+'" alt="file preview" />' +
					'</a>'
			};
		} else {
			return {
				type: 'file',
				content: '<a href="'+api.options.server+'/ipcc/'+text+'" download="'+filename+'">'+filename+'</a>'
			};
		}
	} else if(entity === 'agent' && new RegExp('^{.+}$').test(text)) {
		forms.forEach(function(item) {
			if(item.name === text.substring(1, text.length-1)) {
				form = item;
			}
		});

		return {
			type: form ? 'form' : 'text',
			content: form ? form : text
		};
	} else {
		return {
			type: 'text',
			content: text.split(" ").map(convertLinks).join(" ")
		};
	}
}

function convertLinks(text){
	var leftovers = 0;
	var href = text;
	if(isLink(text)){

		while(!(href.charAt(href.length-1).match(/[a-z0-9\/]/i))){
			href = href.slice(0,-1);
			leftovers += 1;
		}
		return '<a href="'+href+'" target="_blank" data-'+defaults.prefix+'-link="'+href+'">'+href+'</a>' + text.substr(text.length - leftovers);
	} else {
		return text;
	}
}

function isLink(text){
	var pattern = new RegExp('^http:\/\/|^https:\/\/');
	return pattern.test(text);
}

function isImage(filename){
	var regex = new RegExp('png|PNG|jpg|JPG|JPEG|jpeg|gif|GIF');
	var ext = filename.substring(filename.lastIndexOf('.')+1);
	return regex.test(ext);
}

function getFormData(form){
	var formData = {};
	[].slice.call(form.elements).forEach(function(el) {
		if(el.type === 'checkbox') formData[el.name] = el.checked;
		else {
			if(el.value) formData[el.name] = el.value;
		}
	});
	return formData;
}

function validateForm(form){
	var valid = true;
	[].slice.call(form.elements).every(function(el) {
		// debug.log('validateForm el:', el, el.hasAttribute('required'), el.value, el.type);
		if(el.hasAttribute('required') && (el.value === "" || el.value === null)) {
			alert(frases[currLang].ERRORS[el.type] || frases[currLang].ERRORS.required);
			valid = false;
			return false;
		} else {
			return true;
		}
	});
	// debug.log('validateForm valid: ', valid);
	return valid;
}

function resetStyles(element){
	element.removeAttribute('style');
}

function addWidgetStyles(){
	
	var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.href = defaults.stylesPath || defaults.clientPath+'main.css';

	document.head.appendChild(link);
}

function PrefixedEvent(element, type, pfx, callback) {
	for (var p = 0; p < pfx.length; p++) {
		if (!pfx[p]) type = type.toLowerCase();
		element.addEventListener(pfx[p]+type, callback, false);
	}
}

function convertTime(seconds){
	var minutes = Math.floor(seconds / 60),
		secsRemain = seconds % 60,
		str = (minutes > 9 ? minutes : '0' + minutes) + ':' + (secsRemain > 9 ? secsRemain : '0' + secsRemain);
	return str;
}

function formatPhoneNumber(phone) {
	return phone.replace(/\D+/g, "");
}

function isBrowserSupported() {
	return document.body.classList !== undefined;
}

function addEvent(obj, evType, fn) {
  if (obj.addEventListener) obj.addEventListener(evType, fn, false);
  else if (obj.attachEvent) obj.attachEvent("on"+evType, fn);
}
function removeEvent(obj, evType, fn) {
  if (obj.removeEventListener) obj.removeEventListener(evType, fn, false);
  else if (obj.detachEvent) obj.detachEvent("on"+evType, fn);
}

module.exports = {
	module: Widget,
	api: publicApi
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./cobrowsing":108,"./core":109,"./debug":110,"./lodash":112,"./request":114,"./storage":115,"./webrtc":116,"domify":6,"url":104}]},{},[113])(113)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYi9iNjQuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlci1yZXNvbHZlL2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2J1ZmZlci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9idWlsdGluLXN0YXR1cy1jb2Rlcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtdXRpbC1pcy9saWIvdXRpbC5qcyIsIm5vZGVfbW9kdWxlcy9kb21pZnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvaXMtYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2NvbGxlY3Rpb24vZm9yRWFjaC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvZGF0ZS9ub3cuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2Z1bmN0aW9uL2RlYm91bmNlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9mdW5jdGlvbi9yZXN0UGFyYW0uanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2Z1bmN0aW9uL3Rocm90dGxlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9hcnJheUNvcHkuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2FycmF5RWFjaC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYXJyYXlTb21lLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9hc3NpZ25Pd25EZWZhdWx0cy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYXNzaWduV2l0aC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZUFzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZUNvcHkuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VFYWNoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlRm9yLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlRm9ySW4uanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VGb3JPd24uanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VJc0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlSXNFcXVhbERlZXAuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VNZXJnZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZU1lcmdlRGVlcC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlVG9TdHJpbmcuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VWYWx1ZXMuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2JpbmRDYWxsYmFjay5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvY2hhcnNMZWZ0SW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NoYXJzUmlnaHRJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvY3JlYXRlQXNzaWduZXIuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NyZWF0ZUJhc2VFYWNoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9jcmVhdGVCYXNlRm9yLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9jcmVhdGVGb3JFYWNoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9lcXVhbEFycmF5cy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvZXF1YWxCeVRhZy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvZXF1YWxPYmplY3RzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9lc2NhcGVIdG1sQ2hhci5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvZXNjYXBlU3RyaW5nQ2hhci5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvZ2V0TGVuZ3RoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9nZXROYXRpdmUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2lzQXJyYXlMaWtlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9pc0luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9pc0l0ZXJhdGVlQ2FsbC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvaXNMZW5ndGguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2lzT2JqZWN0TGlrZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvaXNTcGFjZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvcmVFc2NhcGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL3JlRXZhbHVhdGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL3JlSW50ZXJwb2xhdGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL3NoaW1LZXlzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC90b09iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvdHJpbW1lZExlZnRJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvdHJpbW1lZFJpZ2h0SW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNBcmd1bWVudHMuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNBcnJheS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL2lzRXJyb3IuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc05hdGl2ZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc09iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc1BsYWluT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL2lzVHlwZWRBcnJheS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy90b1BsYWluT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9vYmplY3QvYXNzaWduLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9vYmplY3Qva2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvb2JqZWN0L2tleXNJbi5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvb2JqZWN0L21lcmdlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9zdHJpbmcvZXNjYXBlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9zdHJpbmcvdGVtcGxhdGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL3N0cmluZy90ZW1wbGF0ZVNldHRpbmdzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9zdHJpbmcvdHJpbS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvdXRpbGl0eS9hdHRlbXB0LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC91dGlsaXR5L2lkZW50aXR5LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MtbmV4dGljay1hcmdzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9wdW55Y29kZS9wdW55Y29kZS5qcyIsIm5vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZGVjb2RlLmpzIiwibm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nLWVzMy9lbmNvZGUuanMiLCJub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9kdXBsZXguanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWh0dHAvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWh0dHAvbGliL2NhcGFiaWxpdHkuanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWh0dHAvbGliL3JlcXVlc3QuanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWh0dHAvbGliL3Jlc3BvbnNlLmpzIiwibm9kZV9tb2R1bGVzL3N0cmluZ19kZWNvZGVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3VybC91cmwuanMiLCJub2RlX21vZHVsZXMvdXJsL3V0aWwuanMiLCJub2RlX21vZHVsZXMvdXRpbC1kZXByZWNhdGUvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy94dGVuZC9pbW11dGFibGUuanMiLCJzb3VyY2Uvc2NyaXB0cy9jb2Jyb3dzaW5nLmpzIiwic291cmNlL3NjcmlwdHMvY29yZS5qcyIsInNvdXJjZS9zY3JpcHRzL2RlYnVnLmpzIiwic291cmNlL3NjcmlwdHMvanNzaXAubWluLmpzIiwic291cmNlL3NjcmlwdHMvbG9kYXNoLmpzIiwic291cmNlL3NjcmlwdHMvbWFpbi5qcyIsInNvdXJjZS9zY3JpcHRzL3JlcXVlc3QuanMiLCJzb3VyY2Uvc2NyaXB0cy9zdG9yYWdlLmpzIiwic291cmNlL3NjcmlwdHMvd2VicnRjLmpzIiwic291cmNlL3NjcmlwdHMvd2lkZ2V0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1SEE7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3hnREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMzREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDM0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2xoQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM3OEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9nQkE7QUFDQTs7QUNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBOztBQ0RBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDekVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNuUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzVLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzV0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM2lCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDNWJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIGxvb2t1cCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcblxuOyhmdW5jdGlvbiAoZXhwb3J0cykge1xuXHQndXNlIHN0cmljdCc7XG5cbiAgdmFyIEFyciA9ICh0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgPyBVaW50OEFycmF5XG4gICAgOiBBcnJheVxuXG5cdHZhciBQTFVTICAgPSAnKycuY2hhckNvZGVBdCgwKVxuXHR2YXIgU0xBU0ggID0gJy8nLmNoYXJDb2RlQXQoMClcblx0dmFyIE5VTUJFUiA9ICcwJy5jaGFyQ29kZUF0KDApXG5cdHZhciBMT1dFUiAgPSAnYScuY2hhckNvZGVBdCgwKVxuXHR2YXIgVVBQRVIgID0gJ0EnLmNoYXJDb2RlQXQoMClcblx0dmFyIFBMVVNfVVJMX1NBRkUgPSAnLScuY2hhckNvZGVBdCgwKVxuXHR2YXIgU0xBU0hfVVJMX1NBRkUgPSAnXycuY2hhckNvZGVBdCgwKVxuXG5cdGZ1bmN0aW9uIGRlY29kZSAoZWx0KSB7XG5cdFx0dmFyIGNvZGUgPSBlbHQuY2hhckNvZGVBdCgwKVxuXHRcdGlmIChjb2RlID09PSBQTFVTIHx8XG5cdFx0ICAgIGNvZGUgPT09IFBMVVNfVVJMX1NBRkUpXG5cdFx0XHRyZXR1cm4gNjIgLy8gJysnXG5cdFx0aWYgKGNvZGUgPT09IFNMQVNIIHx8XG5cdFx0ICAgIGNvZGUgPT09IFNMQVNIX1VSTF9TQUZFKVxuXHRcdFx0cmV0dXJuIDYzIC8vICcvJ1xuXHRcdGlmIChjb2RlIDwgTlVNQkVSKVxuXHRcdFx0cmV0dXJuIC0xIC8vbm8gbWF0Y2hcblx0XHRpZiAoY29kZSA8IE5VTUJFUiArIDEwKVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBOVU1CRVIgKyAyNiArIDI2XG5cdFx0aWYgKGNvZGUgPCBVUFBFUiArIDI2KVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBVUFBFUlxuXHRcdGlmIChjb2RlIDwgTE9XRVIgKyAyNilcblx0XHRcdHJldHVybiBjb2RlIC0gTE9XRVIgKyAyNlxuXHR9XG5cblx0ZnVuY3Rpb24gYjY0VG9CeXRlQXJyYXkgKGI2NCkge1xuXHRcdHZhciBpLCBqLCBsLCB0bXAsIHBsYWNlSG9sZGVycywgYXJyXG5cblx0XHRpZiAoYjY0Lmxlbmd0aCAlIDQgPiAwKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQnKVxuXHRcdH1cblxuXHRcdC8vIHRoZSBudW1iZXIgb2YgZXF1YWwgc2lnbnMgKHBsYWNlIGhvbGRlcnMpXG5cdFx0Ly8gaWYgdGhlcmUgYXJlIHR3byBwbGFjZWhvbGRlcnMsIHRoYW4gdGhlIHR3byBjaGFyYWN0ZXJzIGJlZm9yZSBpdFxuXHRcdC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuXHRcdC8vIGlmIHRoZXJlIGlzIG9ubHkgb25lLCB0aGVuIHRoZSB0aHJlZSBjaGFyYWN0ZXJzIGJlZm9yZSBpdCByZXByZXNlbnQgMiBieXRlc1xuXHRcdC8vIHRoaXMgaXMganVzdCBhIGNoZWFwIGhhY2sgdG8gbm90IGRvIGluZGV4T2YgdHdpY2Vcblx0XHR2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXHRcdHBsYWNlSG9sZGVycyA9ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAyKSA/IDIgOiAnPScgPT09IGI2NC5jaGFyQXQobGVuIC0gMSkgPyAxIDogMFxuXG5cdFx0Ly8gYmFzZTY0IGlzIDQvMyArIHVwIHRvIHR3byBjaGFyYWN0ZXJzIG9mIHRoZSBvcmlnaW5hbCBkYXRhXG5cdFx0YXJyID0gbmV3IEFycihiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpXG5cblx0XHQvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG5cdFx0bCA9IHBsYWNlSG9sZGVycyA+IDAgPyBiNjQubGVuZ3RoIC0gNCA6IGI2NC5sZW5ndGhcblxuXHRcdHZhciBMID0gMFxuXG5cdFx0ZnVuY3Rpb24gcHVzaCAodikge1xuXHRcdFx0YXJyW0wrK10gPSB2XG5cdFx0fVxuXG5cdFx0Zm9yIChpID0gMCwgaiA9IDA7IGkgPCBsOyBpICs9IDQsIGogKz0gMykge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAxOCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA8PCAxMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA8PCA2KSB8IGRlY29kZShiNjQuY2hhckF0KGkgKyAzKSlcblx0XHRcdHB1c2goKHRtcCAmIDB4RkYwMDAwKSA+PiAxNilcblx0XHRcdHB1c2goKHRtcCAmIDB4RkYwMCkgPj4gOClcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9XG5cblx0XHRpZiAocGxhY2VIb2xkZXJzID09PSAyKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPj4gNClcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9IGVsc2UgaWYgKHBsYWNlSG9sZGVycyA9PT0gMSkge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAxMCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA8PCA0KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpID4+IDIpXG5cdFx0XHRwdXNoKCh0bXAgPj4gOCkgJiAweEZGKVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH1cblxuXHRcdHJldHVybiBhcnJcblx0fVxuXG5cdGZ1bmN0aW9uIHVpbnQ4VG9CYXNlNjQgKHVpbnQ4KSB7XG5cdFx0dmFyIGksXG5cdFx0XHRleHRyYUJ5dGVzID0gdWludDgubGVuZ3RoICUgMywgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcblx0XHRcdG91dHB1dCA9IFwiXCIsXG5cdFx0XHR0ZW1wLCBsZW5ndGhcblxuXHRcdGZ1bmN0aW9uIGVuY29kZSAobnVtKSB7XG5cdFx0XHRyZXR1cm4gbG9va3VwLmNoYXJBdChudW0pXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0IChudW0pIHtcblx0XHRcdHJldHVybiBlbmNvZGUobnVtID4+IDE4ICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDEyICYgMHgzRikgKyBlbmNvZGUobnVtID4+IDYgJiAweDNGKSArIGVuY29kZShudW0gJiAweDNGKVxuXHRcdH1cblxuXHRcdC8vIGdvIHRocm91Z2ggdGhlIGFycmF5IGV2ZXJ5IHRocmVlIGJ5dGVzLCB3ZSdsbCBkZWFsIHdpdGggdHJhaWxpbmcgc3R1ZmYgbGF0ZXJcblx0XHRmb3IgKGkgPSAwLCBsZW5ndGggPSB1aW50OC5sZW5ndGggLSBleHRyYUJ5dGVzOyBpIDwgbGVuZ3RoOyBpICs9IDMpIHtcblx0XHRcdHRlbXAgPSAodWludDhbaV0gPDwgMTYpICsgKHVpbnQ4W2kgKyAxXSA8PCA4KSArICh1aW50OFtpICsgMl0pXG5cdFx0XHRvdXRwdXQgKz0gdHJpcGxldFRvQmFzZTY0KHRlbXApXG5cdFx0fVxuXG5cdFx0Ly8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuXHRcdHN3aXRjaCAoZXh0cmFCeXRlcykge1xuXHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHR0ZW1wID0gdWludDhbdWludDgubGVuZ3RoIC0gMV1cblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDIpXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPDwgNCkgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gJz09J1xuXHRcdFx0XHRicmVha1xuXHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHR0ZW1wID0gKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDJdIDw8IDgpICsgKHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMTApXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPj4gNCkgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDIpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9ICc9J1xuXHRcdFx0XHRicmVha1xuXHRcdH1cblxuXHRcdHJldHVybiBvdXRwdXRcblx0fVxuXG5cdGV4cG9ydHMudG9CeXRlQXJyYXkgPSBiNjRUb0J5dGVBcnJheVxuXHRleHBvcnRzLmZyb21CeXRlQXJyYXkgPSB1aW50OFRvQmFzZTY0XG59KHR5cGVvZiBleHBvcnRzID09PSAndW5kZWZpbmVkJyA/ICh0aGlzLmJhc2U2NGpzID0ge30pIDogZXhwb3J0cykpXG4iLCIiLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxudmFyIHJvb3RQYXJlbnQgPSB7fVxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIFNhZmFyaSA1LTcgbGFja3Mgc3VwcG9ydCBmb3IgY2hhbmdpbmcgdGhlIGBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yYCBwcm9wZXJ0eVxuICogICAgIG9uIG9iamVjdHMuXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuICBmdW5jdGlvbiBCYXIgKCkge31cbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfVxuICAgIGFyci5jb25zdHJ1Y3RvciA9IEJhclxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIGFyci5jb25zdHJ1Y3RvciA9PT0gQmFyICYmIC8vIGNvbnN0cnVjdG9yIGNhbiBiZSBzZXRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuLyoqXG4gKiBDbGFzczogQnVmZmVyXG4gKiA9PT09PT09PT09PT09XG4gKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBhcmUgYXVnbWVudGVkXG4gKiB3aXRoIGZ1bmN0aW9uIHByb3BlcnRpZXMgZm9yIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBBUEkgZnVuY3Rpb25zLiBXZSB1c2VcbiAqIGBVaW50OEFycmF5YCBzbyB0aGF0IHNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0IHJldHVybnNcbiAqIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIEJ5IGF1Z21lbnRpbmcgdGhlIGluc3RhbmNlcywgd2UgY2FuIGF2b2lkIG1vZGlmeWluZyB0aGUgYFVpbnQ4QXJyYXlgXG4gKiBwcm90b3R5cGUuXG4gKi9cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgLy8gQXZvaWQgZ29pbmcgdGhyb3VnaCBhbiBBcmd1bWVudHNBZGFwdG9yVHJhbXBvbGluZSBpbiB0aGUgY29tbW9uIGNhc2UuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGFyZ3VtZW50c1sxXSlcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcpXG4gIH1cblxuICB0aGlzLmxlbmd0aCA9IDBcbiAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWRcblxuICAvLyBDb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIGZyb21OdW1iZXIodGhpcywgYXJnKVxuICB9XG5cbiAgLy8gU2xpZ2h0bHkgbGVzcyBjb21tb24gY2FzZS5cbiAgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodGhpcywgYXJnLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGFyZ3VtZW50c1sxXSA6ICd1dGY4JylcbiAgfVxuXG4gIC8vIFVudXN1YWwuXG4gIHJldHVybiBmcm9tT2JqZWN0KHRoaXMsIGFyZylcbn1cblxuZnVuY3Rpb24gZnJvbU51bWJlciAodGhhdCwgbGVuZ3RoKSB7XG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGggPCAwID8gMCA6IGNoZWNrZWQobGVuZ3RoKSB8IDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGF0W2ldID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykgZW5jb2RpbmcgPSAndXRmOCdcblxuICAvLyBBc3N1bXB0aW9uOiBieXRlTGVuZ3RoKCkgcmV0dXJuIHZhbHVlIGlzIGFsd2F5cyA8IGtNYXhMZW5ndGguXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuXG4gIHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqZWN0KSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqZWN0KSkgcmV0dXJuIGZyb21CdWZmZXIodGhhdCwgb2JqZWN0KVxuXG4gIGlmIChpc0FycmF5KG9iamVjdCkpIHJldHVybiBmcm9tQXJyYXkodGhhdCwgb2JqZWN0KVxuXG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ211c3Qgc3RhcnQgd2l0aCBudW1iZXIsIGJ1ZmZlciwgYXJyYXkgb3Igc3RyaW5nJylcbiAgfVxuXG4gIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKG9iamVjdC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgcmV0dXJuIGZyb21UeXBlZEFycmF5KHRoYXQsIG9iamVjdClcbiAgICB9XG4gICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIG9iamVjdClcbiAgICB9XG4gIH1cblxuICBpZiAob2JqZWN0Lmxlbmd0aCkgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqZWN0KVxuXG4gIHJldHVybiBmcm9tSnNvbk9iamVjdCh0aGF0LCBvYmplY3QpXG59XG5cbmZ1bmN0aW9uIGZyb21CdWZmZXIgKHRoYXQsIGJ1ZmZlcikge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChidWZmZXIubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgYnVmZmVyLmNvcHkodGhhdCwgMCwgMCwgbGVuZ3RoKVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXkgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vLyBEdXBsaWNhdGUgb2YgZnJvbUFycmF5KCkgdG8ga2VlcCBmcm9tQXJyYXkoKSBtb25vbW9ycGhpYy5cbmZ1bmN0aW9uIGZyb21UeXBlZEFycmF5ICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICAvLyBUcnVuY2F0aW5nIHRoZSBlbGVtZW50cyBpcyBwcm9iYWJseSBub3Qgd2hhdCBwZW9wbGUgZXhwZWN0IGZyb20gdHlwZWRcbiAgLy8gYXJyYXlzIHdpdGggQllURVNfUEVSX0VMRU1FTlQgPiAxIGJ1dCBpdCdzIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3JcbiAgLy8gb2YgdGhlIG9sZCBCdWZmZXIgY29uc3RydWN0b3IuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5KSB7XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIGFycmF5LmJ5dGVMZW5ndGhcbiAgICB0aGF0ID0gQnVmZmVyLl9hdWdtZW50KG5ldyBVaW50OEFycmF5KGFycmF5KSlcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdCA9IGZyb21UeXBlZEFycmF5KHRoYXQsIG5ldyBVaW50OEFycmF5KGFycmF5KSlcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLy8gRGVzZXJpYWxpemUgeyB0eXBlOiAnQnVmZmVyJywgZGF0YTogWzEsMiwzLC4uLl0gfSBpbnRvIGEgQnVmZmVyIG9iamVjdC5cbi8vIFJldHVybnMgYSB6ZXJvLWxlbmd0aCBidWZmZXIgZm9yIGlucHV0cyB0aGF0IGRvbid0IGNvbmZvcm0gdG8gdGhlIHNwZWMuXG5mdW5jdGlvbiBmcm9tSnNvbk9iamVjdCAodGhhdCwgb2JqZWN0KSB7XG4gIHZhciBhcnJheVxuICB2YXIgbGVuZ3RoID0gMFxuXG4gIGlmIChvYmplY3QudHlwZSA9PT0gJ0J1ZmZlcicgJiYgaXNBcnJheShvYmplY3QuZGF0YSkpIHtcbiAgICBhcnJheSA9IG9iamVjdC5kYXRhXG4gICAgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB9XG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG4gIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG59XG5cbmZ1bmN0aW9uIGFsbG9jYXRlICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShsZW5ndGgpKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICAgIHRoYXQuX2lzQnVmZmVyID0gdHJ1ZVxuICB9XG5cbiAgdmFyIGZyb21Qb29sID0gbGVuZ3RoICE9PSAwICYmIGxlbmd0aCA8PSBCdWZmZXIucG9vbFNpemUgPj4+IDFcbiAgaWYgKGZyb21Qb29sKSB0aGF0LnBhcmVudCA9IHJvb3RQYXJlbnRcblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKHN1YmplY3QsIGVuY29kaW5nKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbG93QnVmZmVyKSkgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuICBkZWxldGUgYnVmLnBhcmVudFxuICByZXR1cm4gYnVmXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICB2YXIgaSA9IDBcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrXG5cbiAgICArK2lcbiAgfVxuXG4gIGlmIChpICE9PSBsZW4pIHtcbiAgICB4ID0gYVtpXVxuICAgIHkgPSBiW2ldXG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3Jhdyc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2xpc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzLicpXG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXVxuICAgIGl0ZW0uY29weShidWYsIHBvcylcbiAgICBwb3MgKz0gaXRlbS5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSBzdHJpbmcgPSAnJyArIHN0cmluZ1xuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgLy8gRGVwcmVjYXRlZFxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgIGNhc2UgJ3Jhd3MnOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuLy8gcHJlLXNldCBmb3IgdmFsdWVzIHRoYXQgbWF5IGV4aXN0IGluIHRoZSBmdXR1cmVcbkJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG5CdWZmZXIucHJvdG90eXBlLnBhcmVudCA9IHVuZGVmaW5lZFxuXG5mdW5jdGlvbiBzbG93VG9TdHJpbmcgKGVuY29kaW5nLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG5cbiAgc3RhcnQgPSBzdGFydCB8IDBcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID09PSBJbmZpbml0eSA/IHRoaXMubGVuZ3RoIDogZW5kIHwgMFxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG4gIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmIChlbmQgPD0gc3RhcnQpIHJldHVybiAnJ1xuXG4gIHdoaWxlICh0cnVlKSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGhleFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2FzY2lpJzpcbiAgICAgICAgcmV0dXJuIGFzY2lpU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGJpbmFyeVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9IChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcgKCkge1xuICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXG4gIGlmIChsZW5ndGggPT09IDApIHJldHVybiAnJ1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCAwLCBsZW5ndGgpXG4gIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYikgPT09IDBcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbnNwZWN0ID0gZnVuY3Rpb24gaW5zcGVjdCAoKSB7XG4gIHZhciBzdHIgPSAnJ1xuICB2YXIgbWF4ID0gZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFU1xuICBpZiAodGhpcy5sZW5ndGggPiAwKSB7XG4gICAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5tYXRjaCgvLnsyfS9nKS5qb2luKCcgJylcbiAgICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIH1cbiAgcmV0dXJuICc8QnVmZmVyICcgKyBzdHIgKyAnPidcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIGlmICh0aGlzID09PSBiKSByZXR1cm4gMFxuICByZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcywgYilcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gaW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0KSB7XG4gIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgYnl0ZU9mZnNldCA+Pj0gMFxuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xXG4gIGlmIChieXRlT2Zmc2V0ID49IHRoaXMubGVuZ3RoKSByZXR1cm4gLTFcblxuICAvLyBOZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IE1hdGgubWF4KHRoaXMubGVuZ3RoICsgYnl0ZU9mZnNldCwgMClcblxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC0xIC8vIHNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nIGFsd2F5cyBmYWlsc1xuICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gIH1cbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQpXG4gIH1cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKHRoaXMsIFsgdmFsIF0sIGJ5dGVPZmZzZXQpXG4gIH1cblxuICBmdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0KSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAodmFyIGkgPSAwOyBieXRlT2Zmc2V0ICsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFycltieXRlT2Zmc2V0ICsgaV0gPT09IHZhbFtmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleF0pIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWwubGVuZ3RoKSByZXR1cm4gYnl0ZU9mZnNldCArIGZvdW5kSW5kZXhcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvdW5kSW5kZXggPSAtMVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gLTFcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbi8vIGBnZXRgIGlzIGRlcHJlY2F0ZWRcbkJ1ZmZlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gZ2V0IChvZmZzZXQpIHtcbiAgY29uc29sZS5sb2coJy5nZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpXG4gIHJldHVybiB0aGlzLnJlYWRVSW50OChvZmZzZXQpXG59XG5cbi8vIGBzZXRgIGlzIGRlcHJlY2F0ZWRcbkJ1ZmZlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gc2V0ICh2LCBvZmZzZXQpIHtcbiAgY29uc29sZS5sb2coJy5zZXQoKSBpcyBkZXByZWNhdGVkLiBBY2Nlc3MgdXNpbmcgYXJyYXkgaW5kZXhlcyBpbnN0ZWFkLicpXG4gIHJldHVybiB0aGlzLndyaXRlVUludDgodiwgb2Zmc2V0KVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIC8vIG11c3QgYmUgYW4gZXZlbiBudW1iZXIgb2YgZGlnaXRzXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChzdHJMZW4gJSAyICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKHBhcnNlZCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSBwYXJzZWRcbiAgfVxuICByZXR1cm4gaVxufVxuXG5mdW5jdGlvbiB1dGY4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcih1dGY4VG9CeXRlcyhzdHJpbmcsIGJ1Zi5sZW5ndGggLSBvZmZzZXQpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc2NpaVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIGJpbmFyeVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGFzY2lpV3JpdGUoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiYXNlNjRXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGJhc2U2NFRvQnl0ZXMoc3RyaW5nKSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gdWNzMldyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nKVxuICBpZiAob2Zmc2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICBlbmNvZGluZyA9ICd1dGY4J1xuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBlbmNvZGluZylcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb2Zmc2V0ID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcbiAgICBvZmZzZXQgPSAwXG4gIC8vIEJ1ZmZlciN3cml0ZShzdHJpbmcsIG9mZnNldFssIGxlbmd0aF1bLCBlbmNvZGluZ10pXG4gIH0gZWxzZSBpZiAoaXNGaW5pdGUob2Zmc2V0KSkge1xuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoIHwgMFxuICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXG4gICAgfSBlbHNlIHtcbiAgICAgIGVuY29kaW5nID0gbGVuZ3RoXG4gICAgICBsZW5ndGggPSB1bmRlZmluZWRcbiAgICB9XG4gIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcbiAgfSBlbHNlIHtcbiAgICB2YXIgc3dhcCA9IGVuY29kaW5nXG4gICAgZW5jb2RpbmcgPSBvZmZzZXRcbiAgICBvZmZzZXQgPSBsZW5ndGggfCAwXG4gICAgbGVuZ3RoID0gc3dhcFxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICAvLyBXYXJuaW5nOiBtYXhMZW5ndGggbm90IHRha2VuIGludG8gYWNjb3VudCBpbiBiYXNlNjRXcml0ZVxuICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHVjczJXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04gKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGU6ICdCdWZmZXInLFxuICAgIGRhdGE6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2FyciB8fCB0aGlzLCAwKVxuICB9XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKHN0YXJ0ID09PSAwICYmIGVuZCA9PT0gYnVmLmxlbmd0aCkge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYpXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1Zi5zbGljZShzdGFydCwgZW5kKSlcbiAgfVxufVxuXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG4gIHZhciByZXMgPSBbXVxuXG4gIHZhciBpID0gc3RhcnRcbiAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXG4gICAgdmFyIGNvZGVQb2ludCA9IG51bGxcbiAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4REYpID8gM1xuICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICA6IDFcblxuICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA8PSBlbmQpIHtcbiAgICAgIHZhciBzZWNvbmRCeXRlLCB0aGlyZEJ5dGUsIGZvdXJ0aEJ5dGUsIHRlbXBDb2RlUG9pbnRcblxuICAgICAgc3dpdGNoIChieXRlc1BlclNlcXVlbmNlKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xuICAgICAgICAgICAgY29kZVBvaW50ID0gZmlyc3RCeXRlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4MUYpIDw8IDB4NiB8IChzZWNvbmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3Rikge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweEMgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4NiB8ICh0aGlyZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxuICAgICAgICAgIHRoaXJkQnl0ZSA9IGJ1ZltpICsgMl1cbiAgICAgICAgICBmb3VydGhCeXRlID0gYnVmW2kgKyAzXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAoZm91cnRoQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHhGRkZGICYmIHRlbXBDb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcbiAgICAgIC8vIHdlIGRpZCBub3QgZ2VuZXJhdGUgYSB2YWxpZCBjb2RlUG9pbnQgc28gaW5zZXJ0IGFcbiAgICAgIC8vIHJlcGxhY2VtZW50IGNoYXIgKFUrRkZGRCkgYW5kIGFkdmFuY2Ugb25seSAxIGJ5dGVcbiAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxuICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDFcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA+IDB4RkZGRikge1xuICAgICAgLy8gZW5jb2RlIHRvIHV0ZjE2IChzdXJyb2dhdGUgcGFpciBkYW5jZSlcbiAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXG4gICAgICByZXMucHVzaChjb2RlUG9pbnQgPj4+IDEwICYgMHgzRkYgfCAweEQ4MDApXG4gICAgICBjb2RlUG9pbnQgPSAweERDMDAgfCBjb2RlUG9pbnQgJiAweDNGRlxuICAgIH1cblxuICAgIHJlcy5wdXNoKGNvZGVQb2ludClcbiAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcbiAgfVxuXG4gIHJldHVybiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkocmVzKVxufVxuXG4vLyBCYXNlZCBvbiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMjc0NzI3Mi82ODA3NDIsIHRoZSBicm93c2VyIHdpdGhcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cbi8vIFdlIGdvIDEgbWFnbml0dWRlIGxlc3MsIGZvciBzYWZldHlcbnZhciBNQVhfQVJHVU1FTlRTX0xFTkdUSCA9IDB4MTAwMFxuXG5mdW5jdGlvbiBkZWNvZGVDb2RlUG9pbnRzQXJyYXkgKGNvZGVQb2ludHMpIHtcbiAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXG4gIGlmIChsZW4gPD0gTUFYX0FSR1VNRU5UU19MRU5HVEgpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIGNvZGVQb2ludHMpIC8vIGF2b2lkIGV4dHJhIHNsaWNlKClcbiAgfVxuXG4gIC8vIERlY29kZSBpbiBjaHVua3MgdG8gYXZvaWQgXCJjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIi5cbiAgdmFyIHJlcyA9ICcnXG4gIHZhciBpID0gMFxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFxuICAgICAgU3RyaW5nLFxuICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxuICAgIClcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldICYgMHg3RilcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGJpbmFyeVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gcmV0XG59XG5cbmZ1bmN0aW9uIGhleFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IGJ1Zi5sZW5ndGhcblxuICBpZiAoIXN0YXJ0IHx8IHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cblxuICB2YXIgb3V0ID0gJydcbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICBvdXQgKz0gdG9IZXgoYnVmW2ldKVxuICB9XG4gIHJldHVybiBvdXRcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGJ5dGVzID0gYnVmLnNsaWNlKHN0YXJ0LCBlbmQpXG4gIHZhciByZXMgPSAnJ1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZlxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICBuZXdCdWYgPSBCdWZmZXIuX2F1Z21lbnQodGhpcy5zdWJhcnJheShzdGFydCwgZW5kKSlcbiAgfSBlbHNlIHtcbiAgICB2YXIgc2xpY2VMZW4gPSBlbmQgLSBzdGFydFxuICAgIG5ld0J1ZiA9IG5ldyBCdWZmZXIoc2xpY2VMZW4sIHVuZGVmaW5lZClcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNsaWNlTGVuOyBpKyspIHtcbiAgICAgIG5ld0J1ZltpXSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfVxuXG4gIGlmIChuZXdCdWYubGVuZ3RoKSBuZXdCdWYucGFyZW50ID0gdGhpcy5wYXJlbnQgfHwgdGhpc1xuXG4gIHJldHVybiBuZXdCdWZcbn1cblxuLypcbiAqIE5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYnVmZmVyIGlzbid0IHRyeWluZyB0byB3cml0ZSBvdXQgb2YgYm91bmRzLlxuICovXG5mdW5jdGlvbiBjaGVja09mZnNldCAob2Zmc2V0LCBleHQsIGxlbmd0aCkge1xuICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gbGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCcpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRMRSA9IGZ1bmN0aW9uIHJlYWRVSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG4gIH1cblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXG4gIHZhciBtdWwgPSAxXG4gIHdoaWxlIChieXRlTGVuZ3RoID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICgodGhpc1tvZmZzZXRdKSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcbiAgICAgICh0aGlzW29mZnNldCArIDNdICogMHgxMDAwMDAwKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludEJFID0gZnVuY3Rpb24gcmVhZEludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoXG4gIHZhciBtdWwgPSAxXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cbiAgd2hpbGUgKGkgPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1pXSAqIG11bFxuICB9XG4gIG11bCAqPSAweDgwXG5cbiAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIDFdIHwgKHRoaXNbb2Zmc2V0XSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDI0KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0TEUgPSBmdW5jdGlvbiByZWFkRmxvYXRMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEZsb2F0QkUgPSBmdW5jdGlvbiByZWFkRmxvYXRCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgdHJ1ZSwgNTIsIDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUJFID0gZnVuY3Rpb24gcmVhZERvdWJsZUJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgNTIsIDgpXG59XG5cbmZ1bmN0aW9uIGNoZWNrSW50IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYnVmZmVyIG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCd2YWx1ZSBpcyBvdXQgb2YgYm91bmRzJylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGJ1Zi5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludExFID0gZnVuY3Rpb24gd3JpdGVVSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgdGhpc1tvZmZzZXRdID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludEJFID0gZnVuY3Rpb24gd3JpdGVVSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSwgMClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4ZmYsIDApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MTYgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmICsgdmFsdWUgKyAxXG4gIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyBpKyspIHtcbiAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxuICAgICAgKGxpdHRsZUVuZGlhbiA/IGkgOiAxIC0gaSkgKiA4XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuZnVuY3Rpb24gb2JqZWN0V3JpdGVVSW50MzIgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDQpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlID4+PiAobGl0dGxlRW5kaWFuID8gaSA6IDMgLSBpKSAqIDgpICYgMHhmZlxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGggLSAxKVxuXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXG4gIH1cblxuICB2YXIgaSA9IDBcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gdmFsdWUgPCAwID8gMSA6IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweDdmLCAtMHg4MClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyQkUgPSBmdW5jdGlvbiB3cml0ZUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuZnVuY3Rpb24gY2hlY2tJRUVFNzU0IChidWYsIHZhbHVlLCBvZmZzZXQsIGV4dCwgbWF4LCBtaW4pIHtcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdpbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDIzLCA0KVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdEJFID0gZnVuY3Rpb24gd3JpdGVGbG9hdEJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVGbG9hdCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbmZ1bmN0aW9uIHdyaXRlRG91YmxlIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXG4gIH1cbiAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgNTIsIDgpXG4gIHJldHVybiBvZmZzZXQgKyA4XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlLCBub0Fzc2VydClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUJFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcbn1cblxuLy8gY29weSh0YXJnZXRCdWZmZXIsIHRhcmdldFN0YXJ0PTAsIHNvdXJjZVN0YXJ0PTAsIHNvdXJjZUVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gY29weSAodGFyZ2V0LCB0YXJnZXRTdGFydCwgc3RhcnQsIGVuZCkge1xuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAodGFyZ2V0U3RhcnQgPj0gdGFyZ2V0Lmxlbmd0aCkgdGFyZ2V0U3RhcnQgPSB0YXJnZXQubGVuZ3RoXG4gIGlmICghdGFyZ2V0U3RhcnQpIHRhcmdldFN0YXJ0ID0gMFxuICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcbiAgaWYgKGVuZCA9PT0gc3RhcnQpIHJldHVybiAwXG4gIGlmICh0YXJnZXQubGVuZ3RoID09PSAwIHx8IHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIEZhdGFsIGVycm9yIGNvbmRpdGlvbnNcbiAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcbiAgfVxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlU3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIC8vIEFyZSB3ZSBvb2I/XG4gIGlmIChlbmQgPiB0aGlzLmxlbmd0aCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCA8IGVuZCAtIHN0YXJ0KSB7XG4gICAgZW5kID0gdGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0ICsgc3RhcnRcbiAgfVxuXG4gIHZhciBsZW4gPSBlbmQgLSBzdGFydFxuICB2YXIgaVxuXG4gIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAoaSA9IGxlbiAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIGlmIChsZW4gPCAxMDAwIHx8ICFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIGFzY2VuZGluZyBjb3B5IGZyb20gc3RhcnRcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRhcmdldC5fc2V0KHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSwgdGFyZ2V0U3RhcnQpXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIGZpbGwodmFsdWUsIHN0YXJ0PTAsIGVuZD1idWZmZXIubGVuZ3RoKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsdWUsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCF2YWx1ZSkgdmFsdWUgPSAwXG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCkgZW5kID0gdGhpcy5sZW5ndGhcblxuICBpZiAoZW5kIDwgc3RhcnQpIHRocm93IG5ldyBSYW5nZUVycm9yKCdlbmQgPCBzdGFydCcpXG5cbiAgLy8gRmlsbCAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm5cbiAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm5cblxuICBpZiAoc3RhcnQgPCAwIHx8IHN0YXJ0ID49IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChlbmQgPCAwIHx8IGVuZCA+IHRoaXMubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIG91dCBvZiBib3VuZHMnKVxuXG4gIHZhciBpXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgdGhpc1tpXSA9IHZhbHVlXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IHV0ZjhUb0J5dGVzKHZhbHVlLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBgQXJyYXlCdWZmZXJgIHdpdGggdGhlICpjb3BpZWQqIG1lbW9yeSBvZiB0aGUgYnVmZmVyIGluc3RhbmNlLlxuICogQWRkZWQgaW4gTm9kZSAwLjEyLiBPbmx5IGF2YWlsYWJsZSBpbiBicm93c2VycyB0aGF0IHN1cHBvcnQgQXJyYXlCdWZmZXIuXG4gKi9cbkJ1ZmZlci5wcm90b3R5cGUudG9BcnJheUJ1ZmZlciA9IGZ1bmN0aW9uIHRvQXJyYXlCdWZmZXIgKCkge1xuICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgICByZXR1cm4gKG5ldyBCdWZmZXIodGhpcykpLmJ1ZmZlclxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5sZW5ndGgpXG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSArPSAxKSB7XG4gICAgICAgIGJ1ZltpXSA9IHRoaXNbaV1cbiAgICAgIH1cbiAgICAgIHJldHVybiBidWYuYnVmZmVyXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0J1ZmZlci50b0FycmF5QnVmZmVyIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyJylcbiAgfVxufVxuXG4vLyBIRUxQRVIgRlVOQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09XG5cbnZhciBCUCA9IEJ1ZmZlci5wcm90b3R5cGVcblxuLyoqXG4gKiBBdWdtZW50IGEgVWludDhBcnJheSAqaW5zdGFuY2UqIChub3QgdGhlIFVpbnQ4QXJyYXkgY2xhc3MhKSB3aXRoIEJ1ZmZlciBtZXRob2RzXG4gKi9cbkJ1ZmZlci5fYXVnbWVudCA9IGZ1bmN0aW9uIF9hdWdtZW50IChhcnIpIHtcbiAgYXJyLmNvbnN0cnVjdG9yID0gQnVmZmVyXG4gIGFyci5faXNCdWZmZXIgPSB0cnVlXG5cbiAgLy8gc2F2ZSByZWZlcmVuY2UgdG8gb3JpZ2luYWwgVWludDhBcnJheSBzZXQgbWV0aG9kIGJlZm9yZSBvdmVyd3JpdGluZ1xuICBhcnIuX3NldCA9IGFyci5zZXRcblxuICAvLyBkZXByZWNhdGVkXG4gIGFyci5nZXQgPSBCUC5nZXRcbiAgYXJyLnNldCA9IEJQLnNldFxuXG4gIGFyci53cml0ZSA9IEJQLndyaXRlXG4gIGFyci50b1N0cmluZyA9IEJQLnRvU3RyaW5nXG4gIGFyci50b0xvY2FsZVN0cmluZyA9IEJQLnRvU3RyaW5nXG4gIGFyci50b0pTT04gPSBCUC50b0pTT05cbiAgYXJyLmVxdWFscyA9IEJQLmVxdWFsc1xuICBhcnIuY29tcGFyZSA9IEJQLmNvbXBhcmVcbiAgYXJyLmluZGV4T2YgPSBCUC5pbmRleE9mXG4gIGFyci5jb3B5ID0gQlAuY29weVxuICBhcnIuc2xpY2UgPSBCUC5zbGljZVxuICBhcnIucmVhZFVJbnRMRSA9IEJQLnJlYWRVSW50TEVcbiAgYXJyLnJlYWRVSW50QkUgPSBCUC5yZWFkVUludEJFXG4gIGFyci5yZWFkVUludDggPSBCUC5yZWFkVUludDhcbiAgYXJyLnJlYWRVSW50MTZMRSA9IEJQLnJlYWRVSW50MTZMRVxuICBhcnIucmVhZFVJbnQxNkJFID0gQlAucmVhZFVJbnQxNkJFXG4gIGFyci5yZWFkVUludDMyTEUgPSBCUC5yZWFkVUludDMyTEVcbiAgYXJyLnJlYWRVSW50MzJCRSA9IEJQLnJlYWRVSW50MzJCRVxuICBhcnIucmVhZEludExFID0gQlAucmVhZEludExFXG4gIGFyci5yZWFkSW50QkUgPSBCUC5yZWFkSW50QkVcbiAgYXJyLnJlYWRJbnQ4ID0gQlAucmVhZEludDhcbiAgYXJyLnJlYWRJbnQxNkxFID0gQlAucmVhZEludDE2TEVcbiAgYXJyLnJlYWRJbnQxNkJFID0gQlAucmVhZEludDE2QkVcbiAgYXJyLnJlYWRJbnQzMkxFID0gQlAucmVhZEludDMyTEVcbiAgYXJyLnJlYWRJbnQzMkJFID0gQlAucmVhZEludDMyQkVcbiAgYXJyLnJlYWRGbG9hdExFID0gQlAucmVhZEZsb2F0TEVcbiAgYXJyLnJlYWRGbG9hdEJFID0gQlAucmVhZEZsb2F0QkVcbiAgYXJyLnJlYWREb3VibGVMRSA9IEJQLnJlYWREb3VibGVMRVxuICBhcnIucmVhZERvdWJsZUJFID0gQlAucmVhZERvdWJsZUJFXG4gIGFyci53cml0ZVVJbnQ4ID0gQlAud3JpdGVVSW50OFxuICBhcnIud3JpdGVVSW50TEUgPSBCUC53cml0ZVVJbnRMRVxuICBhcnIud3JpdGVVSW50QkUgPSBCUC53cml0ZVVJbnRCRVxuICBhcnIud3JpdGVVSW50MTZMRSA9IEJQLndyaXRlVUludDE2TEVcbiAgYXJyLndyaXRlVUludDE2QkUgPSBCUC53cml0ZVVJbnQxNkJFXG4gIGFyci53cml0ZVVJbnQzMkxFID0gQlAud3JpdGVVSW50MzJMRVxuICBhcnIud3JpdGVVSW50MzJCRSA9IEJQLndyaXRlVUludDMyQkVcbiAgYXJyLndyaXRlSW50TEUgPSBCUC53cml0ZUludExFXG4gIGFyci53cml0ZUludEJFID0gQlAud3JpdGVJbnRCRVxuICBhcnIud3JpdGVJbnQ4ID0gQlAud3JpdGVJbnQ4XG4gIGFyci53cml0ZUludDE2TEUgPSBCUC53cml0ZUludDE2TEVcbiAgYXJyLndyaXRlSW50MTZCRSA9IEJQLndyaXRlSW50MTZCRVxuICBhcnIud3JpdGVJbnQzMkxFID0gQlAud3JpdGVJbnQzMkxFXG4gIGFyci53cml0ZUludDMyQkUgPSBCUC53cml0ZUludDMyQkVcbiAgYXJyLndyaXRlRmxvYXRMRSA9IEJQLndyaXRlRmxvYXRMRVxuICBhcnIud3JpdGVGbG9hdEJFID0gQlAud3JpdGVGbG9hdEJFXG4gIGFyci53cml0ZURvdWJsZUxFID0gQlAud3JpdGVEb3VibGVMRVxuICBhcnIud3JpdGVEb3VibGVCRSA9IEJQLndyaXRlRG91YmxlQkVcbiAgYXJyLmZpbGwgPSBCUC5maWxsXG4gIGFyci5pbnNwZWN0ID0gQlAuaW5zcGVjdFxuICBhcnIudG9BcnJheUJ1ZmZlciA9IEJQLnRvQXJyYXlCdWZmZXJcblxuICByZXR1cm4gYXJyXG59XG5cbnZhciBJTlZBTElEX0JBU0U2NF9SRSA9IC9bXitcXC8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgc3RyaXBzIG91dCBpbnZhbGlkIGNoYXJhY3RlcnMgbGlrZSBcXG4gYW5kIFxcdCBmcm9tIHRoZSBzdHJpbmcsIGJhc2U2NC1qcyBkb2VzIG5vdFxuICBzdHIgPSBzdHJpbmd0cmltKHN0cikucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XG4gIGlmIChzdHIudHJpbSkgcmV0dXJuIHN0ci50cmltKClcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJylcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFwiMTAwXCI6IFwiQ29udGludWVcIixcbiAgXCIxMDFcIjogXCJTd2l0Y2hpbmcgUHJvdG9jb2xzXCIsXG4gIFwiMTAyXCI6IFwiUHJvY2Vzc2luZ1wiLFxuICBcIjIwMFwiOiBcIk9LXCIsXG4gIFwiMjAxXCI6IFwiQ3JlYXRlZFwiLFxuICBcIjIwMlwiOiBcIkFjY2VwdGVkXCIsXG4gIFwiMjAzXCI6IFwiTm9uLUF1dGhvcml0YXRpdmUgSW5mb3JtYXRpb25cIixcbiAgXCIyMDRcIjogXCJObyBDb250ZW50XCIsXG4gIFwiMjA1XCI6IFwiUmVzZXQgQ29udGVudFwiLFxuICBcIjIwNlwiOiBcIlBhcnRpYWwgQ29udGVudFwiLFxuICBcIjIwN1wiOiBcIk11bHRpLVN0YXR1c1wiLFxuICBcIjMwMFwiOiBcIk11bHRpcGxlIENob2ljZXNcIixcbiAgXCIzMDFcIjogXCJNb3ZlZCBQZXJtYW5lbnRseVwiLFxuICBcIjMwMlwiOiBcIk1vdmVkIFRlbXBvcmFyaWx5XCIsXG4gIFwiMzAzXCI6IFwiU2VlIE90aGVyXCIsXG4gIFwiMzA0XCI6IFwiTm90IE1vZGlmaWVkXCIsXG4gIFwiMzA1XCI6IFwiVXNlIFByb3h5XCIsXG4gIFwiMzA3XCI6IFwiVGVtcG9yYXJ5IFJlZGlyZWN0XCIsXG4gIFwiMzA4XCI6IFwiUGVybWFuZW50IFJlZGlyZWN0XCIsXG4gIFwiNDAwXCI6IFwiQmFkIFJlcXVlc3RcIixcbiAgXCI0MDFcIjogXCJVbmF1dGhvcml6ZWRcIixcbiAgXCI0MDJcIjogXCJQYXltZW50IFJlcXVpcmVkXCIsXG4gIFwiNDAzXCI6IFwiRm9yYmlkZGVuXCIsXG4gIFwiNDA0XCI6IFwiTm90IEZvdW5kXCIsXG4gIFwiNDA1XCI6IFwiTWV0aG9kIE5vdCBBbGxvd2VkXCIsXG4gIFwiNDA2XCI6IFwiTm90IEFjY2VwdGFibGVcIixcbiAgXCI0MDdcIjogXCJQcm94eSBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZFwiLFxuICBcIjQwOFwiOiBcIlJlcXVlc3QgVGltZS1vdXRcIixcbiAgXCI0MDlcIjogXCJDb25mbGljdFwiLFxuICBcIjQxMFwiOiBcIkdvbmVcIixcbiAgXCI0MTFcIjogXCJMZW5ndGggUmVxdWlyZWRcIixcbiAgXCI0MTJcIjogXCJQcmVjb25kaXRpb24gRmFpbGVkXCIsXG4gIFwiNDEzXCI6IFwiUmVxdWVzdCBFbnRpdHkgVG9vIExhcmdlXCIsXG4gIFwiNDE0XCI6IFwiUmVxdWVzdC1VUkkgVG9vIExhcmdlXCIsXG4gIFwiNDE1XCI6IFwiVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZVwiLFxuICBcIjQxNlwiOiBcIlJlcXVlc3RlZCBSYW5nZSBOb3QgU2F0aXNmaWFibGVcIixcbiAgXCI0MTdcIjogXCJFeHBlY3RhdGlvbiBGYWlsZWRcIixcbiAgXCI0MThcIjogXCJJJ20gYSB0ZWFwb3RcIixcbiAgXCI0MjJcIjogXCJVbnByb2Nlc3NhYmxlIEVudGl0eVwiLFxuICBcIjQyM1wiOiBcIkxvY2tlZFwiLFxuICBcIjQyNFwiOiBcIkZhaWxlZCBEZXBlbmRlbmN5XCIsXG4gIFwiNDI1XCI6IFwiVW5vcmRlcmVkIENvbGxlY3Rpb25cIixcbiAgXCI0MjZcIjogXCJVcGdyYWRlIFJlcXVpcmVkXCIsXG4gIFwiNDI4XCI6IFwiUHJlY29uZGl0aW9uIFJlcXVpcmVkXCIsXG4gIFwiNDI5XCI6IFwiVG9vIE1hbnkgUmVxdWVzdHNcIixcbiAgXCI0MzFcIjogXCJSZXF1ZXN0IEhlYWRlciBGaWVsZHMgVG9vIExhcmdlXCIsXG4gIFwiNTAwXCI6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIsXG4gIFwiNTAxXCI6IFwiTm90IEltcGxlbWVudGVkXCIsXG4gIFwiNTAyXCI6IFwiQmFkIEdhdGV3YXlcIixcbiAgXCI1MDNcIjogXCJTZXJ2aWNlIFVuYXZhaWxhYmxlXCIsXG4gIFwiNTA0XCI6IFwiR2F0ZXdheSBUaW1lLW91dFwiLFxuICBcIjUwNVwiOiBcIkhUVFAgVmVyc2lvbiBOb3QgU3VwcG9ydGVkXCIsXG4gIFwiNTA2XCI6IFwiVmFyaWFudCBBbHNvIE5lZ290aWF0ZXNcIixcbiAgXCI1MDdcIjogXCJJbnN1ZmZpY2llbnQgU3RvcmFnZVwiLFxuICBcIjUwOVwiOiBcIkJhbmR3aWR0aCBMaW1pdCBFeGNlZWRlZFwiLFxuICBcIjUxMFwiOiBcIk5vdCBFeHRlbmRlZFwiLFxuICBcIjUxMVwiOiBcIk5ldHdvcmsgQXV0aGVudGljYXRpb24gUmVxdWlyZWRcIlxufVxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIE5PVEU6IFRoZXNlIHR5cGUgY2hlY2tpbmcgZnVuY3Rpb25zIGludGVudGlvbmFsbHkgZG9uJ3QgdXNlIGBpbnN0YW5jZW9mYFxuLy8gYmVjYXVzZSBpdCBpcyBmcmFnaWxlIGFuZCBjYW4gYmUgZWFzaWx5IGZha2VkIHdpdGggYE9iamVjdC5jcmVhdGUoKWAuXG5cbmZ1bmN0aW9uIGlzQXJyYXkoYXJnKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJnKTtcbiAgfVxuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cbmV4cG9ydHMuaXNBcnJheSA9IGlzQXJyYXk7XG5cbmZ1bmN0aW9uIGlzQm9vbGVhbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJztcbn1cbmV4cG9ydHMuaXNCb29sZWFuID0gaXNCb29sZWFuO1xuXG5mdW5jdGlvbiBpc051bGwoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbCA9IGlzTnVsbDtcblxuZnVuY3Rpb24gaXNOdWxsT3JVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsT3JVbmRlZmluZWQgPSBpc051bGxPclVuZGVmaW5lZDtcblxuZnVuY3Rpb24gaXNOdW1iZXIoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnbnVtYmVyJztcbn1cbmV4cG9ydHMuaXNOdW1iZXIgPSBpc051bWJlcjtcblxuZnVuY3Rpb24gaXNTdHJpbmcoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3RyaW5nJztcbn1cbmV4cG9ydHMuaXNTdHJpbmcgPSBpc1N0cmluZztcblxuZnVuY3Rpb24gaXNTeW1ib2woYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnc3ltYm9sJztcbn1cbmV4cG9ydHMuaXNTeW1ib2wgPSBpc1N5bWJvbDtcblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbmV4cG9ydHMuaXNVbmRlZmluZWQgPSBpc1VuZGVmaW5lZDtcblxuZnVuY3Rpb24gaXNSZWdFeHAocmUpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKHJlKSA9PT0gJ1tvYmplY3QgUmVnRXhwXSc7XG59XG5leHBvcnRzLmlzUmVnRXhwID0gaXNSZWdFeHA7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuZXhwb3J0cy5pc09iamVjdCA9IGlzT2JqZWN0O1xuXG5mdW5jdGlvbiBpc0RhdGUoZCkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcoZCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cbmV4cG9ydHMuaXNEYXRlID0gaXNEYXRlO1xuXG5mdW5jdGlvbiBpc0Vycm9yKGUpIHtcbiAgcmV0dXJuIChvYmplY3RUb1N0cmluZyhlKSA9PT0gJ1tvYmplY3QgRXJyb3JdJyB8fCBlIGluc3RhbmNlb2YgRXJyb3IpO1xufVxuZXhwb3J0cy5pc0Vycm9yID0gaXNFcnJvcjtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5leHBvcnRzLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuXG5mdW5jdGlvbiBpc1ByaW1pdGl2ZShhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbCB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnIHx8ICAvLyBFUzYgc3ltYm9sXG4gICAgICAgICB0eXBlb2YgYXJnID09PSAndW5kZWZpbmVkJztcbn1cbmV4cG9ydHMuaXNQcmltaXRpdmUgPSBpc1ByaW1pdGl2ZTtcblxuZXhwb3J0cy5pc0J1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcjtcblxuZnVuY3Rpb24gb2JqZWN0VG9TdHJpbmcobykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pO1xufVxuIiwiXG4vKipcbiAqIEV4cG9zZSBgcGFyc2VgLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gcGFyc2U7XG5cbi8qKlxuICogVGVzdHMgZm9yIGJyb3dzZXIgc3VwcG9ydC5cbiAqL1xuXG52YXIgaW5uZXJIVE1MQnVnID0gZmFsc2U7XG52YXIgYnVnVGVzdERpdjtcbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gIGJ1Z1Rlc3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgLy8gU2V0dXBcbiAgYnVnVGVzdERpdi5pbm5lckhUTUwgPSAnICA8bGluay8+PHRhYmxlPjwvdGFibGU+PGEgaHJlZj1cIi9hXCI+YTwvYT48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIvPic7XG4gIC8vIE1ha2Ugc3VyZSB0aGF0IGxpbmsgZWxlbWVudHMgZ2V0IHNlcmlhbGl6ZWQgY29ycmVjdGx5IGJ5IGlubmVySFRNTFxuICAvLyBUaGlzIHJlcXVpcmVzIGEgd3JhcHBlciBlbGVtZW50IGluIElFXG4gIGlubmVySFRNTEJ1ZyA9ICFidWdUZXN0RGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaW5rJykubGVuZ3RoO1xuICBidWdUZXN0RGl2ID0gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIFdyYXAgbWFwIGZyb20ganF1ZXJ5LlxuICovXG5cbnZhciBtYXAgPSB7XG4gIGxlZ2VuZDogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG4gIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcbiAgY29sOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXSxcbiAgLy8gZm9yIHNjcmlwdC9saW5rL3N0eWxlIHRhZ3MgdG8gd29yayBpbiBJRTYtOCwgeW91IGhhdmUgdG8gd3JhcFxuICAvLyBpbiBhIGRpdiB3aXRoIGEgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyIGluIGZyb250LCBoYSFcbiAgX2RlZmF1bHQ6IGlubmVySFRNTEJ1ZyA/IFsxLCAnWDxkaXY+JywgJzwvZGl2PiddIDogWzAsICcnLCAnJ11cbn07XG5cbm1hcC50ZCA9XG5tYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblxubWFwLm9wdGlvbiA9XG5tYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblxubWFwLnRoZWFkID1cbm1hcC50Ym9keSA9XG5tYXAuY29sZ3JvdXAgPVxubWFwLmNhcHRpb24gPVxubWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbm1hcC5wb2x5bGluZSA9XG5tYXAuZWxsaXBzZSA9XG5tYXAucG9seWdvbiA9XG5tYXAuY2lyY2xlID1cbm1hcC50ZXh0ID1cbm1hcC5saW5lID1cbm1hcC5wYXRoID1cbm1hcC5yZWN0ID1cbm1hcC5nID0gWzEsICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2ZXJzaW9uPVwiMS4xXCI+JywnPC9zdmc+J107XG5cbi8qKlxuICogUGFyc2UgYGh0bWxgIGFuZCByZXR1cm4gYSBET00gTm9kZSBpbnN0YW5jZSwgd2hpY2ggY291bGQgYmUgYSBUZXh0Tm9kZSxcbiAqIEhUTUwgRE9NIE5vZGUgb2Ygc29tZSBraW5kICg8ZGl2PiBmb3IgZXhhbXBsZSksIG9yIGEgRG9jdW1lbnRGcmFnbWVudFxuICogaW5zdGFuY2UsIGRlcGVuZGluZyBvbiB0aGUgY29udGVudHMgb2YgdGhlIGBodG1sYCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGh0bWwgLSBIVE1MIHN0cmluZyB0byBcImRvbWlmeVwiXG4gKiBAcGFyYW0ge0RvY3VtZW50fSBkb2MgLSBUaGUgYGRvY3VtZW50YCBpbnN0YW5jZSB0byBjcmVhdGUgdGhlIE5vZGUgZm9yXG4gKiBAcmV0dXJuIHtET01Ob2RlfSB0aGUgVGV4dE5vZGUsIERPTSBOb2RlLCBvciBEb2N1bWVudEZyYWdtZW50IGluc3RhbmNlXG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShodG1sLCBkb2MpIHtcbiAgaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBodG1sKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdTdHJpbmcgZXhwZWN0ZWQnKTtcblxuICAvLyBkZWZhdWx0IHRvIHRoZSBnbG9iYWwgYGRvY3VtZW50YCBvYmplY3RcbiAgaWYgKCFkb2MpIGRvYyA9IGRvY3VtZW50O1xuXG4gIC8vIHRhZyBuYW1lXG4gIHZhciBtID0gLzwoW1xcdzpdKykvLmV4ZWMoaHRtbCk7XG4gIGlmICghbSkgcmV0dXJuIGRvYy5jcmVhdGVUZXh0Tm9kZShodG1sKTtcblxuICBodG1sID0gaHRtbC5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7IC8vIFJlbW92ZSBsZWFkaW5nL3RyYWlsaW5nIHdoaXRlc3BhY2VcblxuICB2YXIgdGFnID0gbVsxXTtcblxuICAvLyBib2R5IHN1cHBvcnRcbiAgaWYgKHRhZyA9PSAnYm9keScpIHtcbiAgICB2YXIgZWwgPSBkb2MuY3JlYXRlRWxlbWVudCgnaHRtbCcpO1xuICAgIGVsLmlubmVySFRNTCA9IGh0bWw7XG4gICAgcmV0dXJuIGVsLnJlbW92ZUNoaWxkKGVsLmxhc3RDaGlsZCk7XG4gIH1cblxuICAvLyB3cmFwIG1hcFxuICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5fZGVmYXVsdDtcbiAgdmFyIGRlcHRoID0gd3JhcFswXTtcbiAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG4gIHZhciBzdWZmaXggPSB3cmFwWzJdO1xuICB2YXIgZWwgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGVsLmlubmVySFRNTCA9IHByZWZpeCArIGh0bWwgKyBzdWZmaXg7XG4gIHdoaWxlIChkZXB0aC0tKSBlbCA9IGVsLmxhc3RDaGlsZDtcblxuICAvLyBvbmUgZWxlbWVudFxuICBpZiAoZWwuZmlyc3RDaGlsZCA9PSBlbC5sYXN0Q2hpbGQpIHtcbiAgICByZXR1cm4gZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gIH1cblxuICAvLyBzZXZlcmFsIGVsZW1lbnRzXG4gIHZhciBmcmFnbWVudCA9IGRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHdoaWxlIChlbC5maXJzdENoaWxkKSB7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCkpO1xuICB9XG5cbiAgcmV0dXJuIGZyYWdtZW50O1xufVxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzIHx8IHt9O1xuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufVxubW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG5FdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbihuKSB7XG4gIGlmICghaXNOdW1iZXIobikgfHwgbiA8IDAgfHwgaXNOYU4obikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCduIG11c3QgYmUgYSBwb3NpdGl2ZSBudW1iZXInKTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBlciwgaGFuZGxlciwgbGVuLCBhcmdzLCBpLCBsaXN0ZW5lcnM7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMpXG4gICAgdGhpcy5fZXZlbnRzID0ge307XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAodHlwZSA9PT0gJ2Vycm9yJykge1xuICAgIGlmICghdGhpcy5fZXZlbnRzLmVycm9yIHx8XG4gICAgICAgIChpc09iamVjdCh0aGlzLl9ldmVudHMuZXJyb3IpICYmICF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSkge1xuICAgICAgZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICBpZiAoZXIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICAgIH1cbiAgICAgIHRocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4nKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVyID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc1VuZGVmaW5lZChoYW5kbGVyKSlcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGlzRnVuY3Rpb24oaGFuZGxlcikpIHtcbiAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIGZhc3QgY2FzZXNcbiAgICAgIGNhc2UgMTpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgYXJndW1lbnRzWzFdLCBhcmd1bWVudHNbMl0pO1xuICAgICAgICBicmVhaztcbiAgICAgIC8vIHNsb3dlclxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgIGhhbmRsZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KGhhbmRsZXIpKSB7XG4gICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgbGlzdGVuZXJzID0gaGFuZGxlci5zbGljZSgpO1xuICAgIGxlbiA9IGxpc3RlbmVycy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKVxuICAgICAgbGlzdGVuZXJzW2ldLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIG07XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gIC8vIGFkZGluZyBpdCB0byB0aGUgbGlzdGVuZXJzLCBmaXJzdCBlbWl0IFwibmV3TGlzdGVuZXJcIi5cbiAgaWYgKHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lcilcbiAgICB0aGlzLmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgaXNGdW5jdGlvbihsaXN0ZW5lci5saXN0ZW5lcikgP1xuICAgICAgICAgICAgICBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICB0aGlzLl9ldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgZWxzZSBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICBlbHNlXG4gICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gW3RoaXMuX2V2ZW50c1t0eXBlXSwgbGlzdGVuZXJdO1xuXG4gIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gIGlmIChpc09iamVjdCh0aGlzLl9ldmVudHNbdHlwZV0pICYmICF0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkKSB7XG4gICAgaWYgKCFpc1VuZGVmaW5lZCh0aGlzLl9tYXhMaXN0ZW5lcnMpKSB7XG4gICAgICBtID0gdGhpcy5fbWF4TGlzdGVuZXJzO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gICAgfVxuXG4gICAgaWYgKG0gJiYgbSA+IDAgJiYgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCA+IG0pIHtcbiAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS53YXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS5lcnJvcignKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgJyArXG4gICAgICAgICAgICAgICAgICAgICdsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuICcgK1xuICAgICAgICAgICAgICAgICAgICAnVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gaW5jcmVhc2UgbGltaXQuJyxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW3R5cGVdLmxlbmd0aCk7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUudHJhY2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZCBpbiBJRSAxMFxuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIHZhciBmaXJlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIGcoKSB7XG4gICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBnKTtcblxuICAgIGlmICghZmlyZWQpIHtcbiAgICAgIGZpcmVkID0gdHJ1ZTtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG5cbiAgZy5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICB0aGlzLm9uKHR5cGUsIGcpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWRcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgbGlzdCwgcG9zaXRpb24sIGxlbmd0aCwgaTtcblxuICBpZiAoIWlzRnVuY3Rpb24obGlzdGVuZXIpKVxuICAgIHRocm93IFR5cGVFcnJvcignbGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXR1cm4gdGhpcztcblxuICBsaXN0ID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuICBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgcG9zaXRpb24gPSAtMTtcblxuICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHxcbiAgICAgIChpc0Z1bmN0aW9uKGxpc3QubGlzdGVuZXIpICYmIGxpc3QubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgaWYgKHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lcilcbiAgICAgIHRoaXMuZW1pdCgncmVtb3ZlTGlzdGVuZXInLCB0eXBlLCBsaXN0ZW5lcik7XG5cbiAgfSBlbHNlIGlmIChpc09iamVjdChsaXN0KSkge1xuICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tID4gMDspIHtcbiAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fFxuICAgICAgICAgIChsaXN0W2ldLmxpc3RlbmVyICYmIGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSkge1xuICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICByZXR1cm4gdGhpcztcblxuICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgbGlzdC5sZW5ndGggPSAwO1xuICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGlzdC5zcGxpY2UocG9zaXRpb24sIDEpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIGtleSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgaWYgKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIGVsc2UgaWYgKHRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICBmb3IgKGtleSBpbiB0aGlzLl9ldmVudHMpIHtcbiAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgaWYgKGlzRnVuY3Rpb24obGlzdGVuZXJzKSkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzKTtcbiAgfSBlbHNlIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAvLyBMSUZPIG9yZGVyXG4gICAgd2hpbGUgKGxpc3RlbmVycy5sZW5ndGgpXG4gICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tsaXN0ZW5lcnMubGVuZ3RoIC0gMV0pO1xuICB9XG4gIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgdmFyIHJldDtcbiAgaWYgKCF0aGlzLl9ldmVudHMgfHwgIXRoaXMuX2V2ZW50c1t0eXBlXSlcbiAgICByZXQgPSBbXTtcbiAgZWxzZSBpZiAoaXNGdW5jdGlvbih0aGlzLl9ldmVudHNbdHlwZV0pKVxuICAgIHJldCA9IFt0aGlzLl9ldmVudHNbdHlwZV1dO1xuICBlbHNlXG4gICAgcmV0ID0gdGhpcy5fZXZlbnRzW3R5cGVdLnNsaWNlKCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQgPSBmdW5jdGlvbih0eXBlKSB7XG4gIGlmICh0aGlzLl9ldmVudHMpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGV2bGlzdGVuZXIpKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAoZXZsaXN0ZW5lcilcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgfVxuICByZXR1cm4gMDtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xufTtcblxuZnVuY3Rpb24gaXNGdW5jdGlvbihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgYXJnICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuIiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG4iLCJpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09ICdmdW5jdGlvbicpIHtcbiAgLy8gaW1wbGVtZW50YXRpb24gZnJvbSBzdGFuZGFyZCBub2RlLmpzICd1dGlsJyBtb2R1bGVcbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmhlcml0cyhjdG9yLCBzdXBlckN0b3IpIHtcbiAgICBjdG9yLnN1cGVyXyA9IHN1cGVyQ3RvclxuICAgIGN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckN0b3IucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogY3RvcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICB2YXIgVGVtcEN0b3IgPSBmdW5jdGlvbiAoKSB7fVxuICAgIFRlbXBDdG9yLnByb3RvdHlwZSA9IHN1cGVyQ3Rvci5wcm90b3R5cGVcbiAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgY3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBjdG9yXG4gIH1cbn1cbiIsIi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBCdWZmZXJcbiAqXG4gKiBBdXRob3I6ICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIExpY2Vuc2U6ICBNSVRcbiAqXG4gKiBgbnBtIGluc3RhbGwgaXMtYnVmZmVyYFxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gISEob2JqICE9IG51bGwgJiZcbiAgICAob2JqLl9pc0J1ZmZlciB8fCAvLyBGb3IgU2FmYXJpIDUtNyAobWlzc2luZyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yKVxuICAgICAgKG9iai5jb25zdHJ1Y3RvciAmJlxuICAgICAgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iaikpXG4gICAgKSlcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJyKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiIsInZhciBhcnJheUVhY2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9hcnJheUVhY2gnKSxcbiAgICBiYXNlRWFjaCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VFYWNoJyksXG4gICAgY3JlYXRlRm9yRWFjaCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NyZWF0ZUZvckVhY2gnKTtcblxuLyoqXG4gKiBJdGVyYXRlcyBvdmVyIGVsZW1lbnRzIG9mIGBjb2xsZWN0aW9uYCBpbnZva2luZyBgaXRlcmF0ZWVgIGZvciBlYWNoIGVsZW1lbnQuXG4gKiBUaGUgYGl0ZXJhdGVlYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG4gKiAodmFsdWUsIGluZGV4fGtleSwgY29sbGVjdGlvbikuIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHlcbiAqIGJ5IGV4cGxpY2l0bHkgcmV0dXJuaW5nIGBmYWxzZWAuXG4gKlxuICogKipOb3RlOioqIEFzIHdpdGggb3RoZXIgXCJDb2xsZWN0aW9uc1wiIG1ldGhvZHMsIG9iamVjdHMgd2l0aCBhIFwibGVuZ3RoXCIgcHJvcGVydHlcbiAqIGFyZSBpdGVyYXRlZCBsaWtlIGFycmF5cy4gVG8gYXZvaWQgdGhpcyBiZWhhdmlvciBgXy5mb3JJbmAgb3IgYF8uZm9yT3duYFxuICogbWF5IGJlIHVzZWQgZm9yIG9iamVjdCBpdGVyYXRpb24uXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBhbGlhcyBlYWNoXG4gKiBAY2F0ZWdvcnkgQ29sbGVjdGlvblxuICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBpdGVyYXRlZWAuXG4gKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8oWzEsIDJdKS5mb3JFYWNoKGZ1bmN0aW9uKG4pIHtcbiAqICAgY29uc29sZS5sb2cobik7XG4gKiB9KS52YWx1ZSgpO1xuICogLy8gPT4gbG9ncyBlYWNoIHZhbHVlIGZyb20gbGVmdCB0byByaWdodCBhbmQgcmV0dXJucyB0aGUgYXJyYXlcbiAqXG4gKiBfLmZvckVhY2goeyAnYSc6IDEsICdiJzogMiB9LCBmdW5jdGlvbihuLCBrZXkpIHtcbiAqICAgY29uc29sZS5sb2cobiwga2V5KTtcbiAqIH0pO1xuICogLy8gPT4gbG9ncyBlYWNoIHZhbHVlLWtleSBwYWlyIGFuZCByZXR1cm5zIHRoZSBvYmplY3QgKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqL1xudmFyIGZvckVhY2ggPSBjcmVhdGVGb3JFYWNoKGFycmF5RWFjaCwgYmFzZUVhY2gpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZvckVhY2g7XG4iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZ2V0TmF0aXZlJyk7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTm93ID0gZ2V0TmF0aXZlKERhdGUsICdub3cnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlIHRoZSBVbml4IGVwb2NoXG4gKiAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IERhdGVcbiAqIEBleGFtcGxlXG4gKlxuICogXy5kZWZlcihmdW5jdGlvbihzdGFtcCkge1xuICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuICogfSwgXy5ub3coKSk7XG4gKiAvLyA9PiBsb2dzIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIGl0IHRvb2sgZm9yIHRoZSBkZWZlcnJlZCBmdW5jdGlvbiB0byBiZSBpbnZva2VkXG4gKi9cbnZhciBub3cgPSBuYXRpdmVOb3cgfHwgZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbm93O1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpLFxuICAgIG5vdyA9IHJlcXVpcmUoJy4uL2RhdGUvbm93Jyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGludm9jYXRpb25zLiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlIHRoYXQgYGZ1bmNgXG4gKiBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gcmV0dXJuIHRoZSByZXN1bHQgb2YgdGhlIGxhc3RcbiAqIGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXMgaW52b2tlZFxuICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiBpc1xuICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwOi8vZHJ1cGFsbW90aW9uLmNvbS9hcnRpY2xlL2RlYm91bmNlLWFuZC10aHJvdHRsZS12aXN1YWwtZXhwbGFuYXRpb24pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIGxlYWRpbmdcbiAqICBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmVcbiAqICBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nXG4gKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gYXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eFxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBpbnZva2UgYHNlbmRNYWlsYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzXG4gKiBqUXVlcnkoJyNwb3N0Ym94Jykub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBlbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzXG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwge1xuICogICAnbWF4V2FpdCc6IDEwMDBcbiAqIH0pKTtcbiAqXG4gKiAvLyBjYW5jZWwgYSBkZWJvdW5jZWQgY2FsbFxuICogdmFyIHRvZG9DaGFuZ2VzID0gXy5kZWJvdW5jZShiYXRjaExvZywgMTAwMCk7XG4gKiBPYmplY3Qub2JzZXJ2ZShtb2RlbHMudG9kbywgdG9kb0NoYW5nZXMpO1xuICpcbiAqIE9iamVjdC5vYnNlcnZlKG1vZGVscywgZnVuY3Rpb24oY2hhbmdlcykge1xuICogICBpZiAoXy5maW5kKGNoYW5nZXMsIHsgJ3VzZXInOiAndG9kbycsICd0eXBlJzogJ2RlbGV0ZSd9KSkge1xuICogICAgIHRvZG9DaGFuZ2VzLmNhbmNlbCgpO1xuICogICB9XG4gKiB9LCBbJ2RlbGV0ZSddKTtcbiAqXG4gKiAvLyAuLi5hdCBzb21lIHBvaW50IGBtb2RlbHMudG9kb2AgaXMgY2hhbmdlZFxuICogbW9kZWxzLnRvZG8uY29tcGxldGVkID0gdHJ1ZTtcbiAqXG4gKiAvLyAuLi5iZWZvcmUgMSBzZWNvbmQgaGFzIHBhc3NlZCBgbW9kZWxzLnRvZG9gIGlzIGRlbGV0ZWRcbiAqIC8vIHdoaWNoIGNhbmNlbHMgdGhlIGRlYm91bmNlZCBgdG9kb0NoYW5nZXNgIGNhbGxcbiAqIGRlbGV0ZSBtb2RlbHMudG9kbztcbiAqL1xuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgYXJncyxcbiAgICAgIG1heFRpbWVvdXRJZCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHN0YW1wLFxuICAgICAgdGhpc0FyZyxcbiAgICAgIHRpbWVvdXRJZCxcbiAgICAgIHRyYWlsaW5nQ2FsbCxcbiAgICAgIGxhc3RDYWxsZWQgPSAwLFxuICAgICAgbWF4V2FpdCA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB3YWl0IDwgMCA/IDAgOiAoK3dhaXQgfHwgMCk7XG4gIGlmIChvcHRpb25zID09PSB0cnVlKSB7XG4gICAgdmFyIGxlYWRpbmcgPSB0cnVlO1xuICAgIHRyYWlsaW5nID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4V2FpdCA9ICdtYXhXYWl0JyBpbiBvcHRpb25zICYmIG5hdGl2ZU1heCgrb3B0aW9ucy5tYXhXYWl0IHx8IDAsIHdhaXQpO1xuICAgIHRyYWlsaW5nID0gJ3RyYWlsaW5nJyBpbiBvcHRpb25zID8gISFvcHRpb25zLnRyYWlsaW5nIDogdHJhaWxpbmc7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwoKSB7XG4gICAgaWYgKHRpbWVvdXRJZCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgIH1cbiAgICBsYXN0Q2FsbGVkID0gMDtcbiAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBjb21wbGV0ZShpc0NhbGxlZCwgaWQpIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIGNsZWFyVGltZW91dChpZCk7XG4gICAgfVxuICAgIG1heFRpbWVvdXRJZCA9IHRpbWVvdXRJZCA9IHRyYWlsaW5nQ2FsbCA9IHVuZGVmaW5lZDtcbiAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgIGxhc3RDYWxsZWQgPSBub3coKTtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICAgIGFyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGF5ZWQoKSB7XG4gICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93KCkgLSBzdGFtcCk7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgIGNvbXBsZXRlKHRyYWlsaW5nQ2FsbCwgbWF4VGltZW91dElkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLCByZW1haW5pbmcpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1heERlbGF5ZWQoKSB7XG4gICAgY29tcGxldGUodHJhaWxpbmcsIHRpbWVvdXRJZCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICBzdGFtcCA9IG5vdygpO1xuICAgIHRoaXNBcmcgPSB0aGlzO1xuICAgIHRyYWlsaW5nQ2FsbCA9IHRyYWlsaW5nICYmICh0aW1lb3V0SWQgfHwgIWxlYWRpbmcpO1xuXG4gICAgaWYgKG1heFdhaXQgPT09IGZhbHNlKSB7XG4gICAgICB2YXIgbGVhZGluZ0NhbGwgPSBsZWFkaW5nICYmICF0aW1lb3V0SWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghbWF4VGltZW91dElkICYmICFsZWFkaW5nKSB7XG4gICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgIH1cbiAgICAgIHZhciByZW1haW5pbmcgPSBtYXhXYWl0IC0gKHN0YW1wIC0gbGFzdENhbGxlZCksXG4gICAgICAgICAgaXNDYWxsZWQgPSByZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiBtYXhXYWl0O1xuXG4gICAgICBpZiAoaXNDYWxsZWQpIHtcbiAgICAgICAgaWYgKG1heFRpbWVvdXRJZCkge1xuICAgICAgICAgIG1heFRpbWVvdXRJZCA9IGNsZWFyVGltZW91dChtYXhUaW1lb3V0SWQpO1xuICAgICAgICB9XG4gICAgICAgIGxhc3RDYWxsZWQgPSBzdGFtcDtcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCFtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgbWF4VGltZW91dElkID0gc2V0VGltZW91dChtYXhEZWxheWVkLCByZW1haW5pbmcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNDYWxsZWQgJiYgdGltZW91dElkKSB7XG4gICAgICB0aW1lb3V0SWQgPSBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIXRpbWVvdXRJZCAmJiB3YWl0ICE9PSBtYXhXYWl0KSB7XG4gICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGRlbGF5ZWQsIHdhaXQpO1xuICAgIH1cbiAgICBpZiAobGVhZGluZ0NhbGwpIHtcbiAgICAgIGlzQ2FsbGVkID0gdHJ1ZTtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgfVxuICAgIGlmIChpc0NhbGxlZCAmJiAhdGltZW91dElkICYmICFtYXhUaW1lb3V0SWQpIHtcbiAgICAgIGFyZ3MgPSB0aGlzQXJnID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIHJldHVybiBkZWJvdW5jZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGVib3VuY2U7XG4iLCIvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGVcbiAqIGNyZWF0ZWQgZnVuY3Rpb24gYW5kIGFyZ3VtZW50cyBmcm9tIGBzdGFydGAgYW5kIGJleW9uZCBwcm92aWRlZCBhcyBhbiBhcnJheS5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlIFtyZXN0IHBhcmFtZXRlcl0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0Z1bmN0aW9ucy9yZXN0X3BhcmFtZXRlcnMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIHNheSA9IF8ucmVzdFBhcmFtKGZ1bmN0aW9uKHdoYXQsIG5hbWVzKSB7XG4gKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcbiAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuICogfSk7XG4gKlxuICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG4gKiAvLyA9PiAnaGVsbG8gZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIHJlc3RQYXJhbShmdW5jLCBzdGFydCkge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiAoK3N0YXJ0IHx8IDApLCAwKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBuYXRpdmVNYXgoYXJncy5sZW5ndGggLSBzdGFydCwgMCksXG4gICAgICAgIHJlc3QgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHJlc3RbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcbiAgICB9XG4gICAgc3dpdGNoIChzdGFydCkge1xuICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIHJlc3QpO1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIHJlc3QpO1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0sIHJlc3QpO1xuICAgIH1cbiAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcbiAgICBpbmRleCA9IC0xO1xuICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICB9XG4gICAgb3RoZXJBcmdzW3N0YXJ0XSA9IHJlc3Q7XG4gICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgb3RoZXJBcmdzKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXN0UGFyYW07XG4iLCJ2YXIgZGVib3VuY2UgPSByZXF1aXJlKCcuL2RlYm91bmNlJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0Jyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKipcbiAqIENyZWF0ZXMgYSB0aHJvdHRsZWQgZnVuY3Rpb24gdGhhdCBvbmx5IGludm9rZXMgYGZ1bmNgIGF0IG1vc3Qgb25jZSBwZXJcbiAqIGV2ZXJ5IGB3YWl0YCBtaWxsaXNlY29uZHMuIFRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgXG4gKiBtZXRob2QgdG8gY2FuY2VsIGRlbGF5ZWQgaW52b2NhdGlvbnMuIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGVcbiAqIHRoYXQgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZVxuICogYHdhaXRgIHRpbWVvdXQuIFN1YnNlcXVlbnQgY2FsbHMgdG8gdGhlIHRocm90dGxlZCBmdW5jdGlvbiByZXR1cm4gdGhlXG4gKiByZXN1bHQgb2YgdGhlIGxhc3QgYGZ1bmNgIGNhbGwuXG4gKlxuICogKipOb3RlOioqIElmIGBsZWFkaW5nYCBhbmQgYHRyYWlsaW5nYCBvcHRpb25zIGFyZSBgdHJ1ZWAsIGBmdW5jYCBpcyBpbnZva2VkXG4gKiBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dCBvbmx5IGlmIHRoZSB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIGlzXG4gKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHA6Ly9kcnVwYWxtb3Rpb24uY29tL2FydGljbGUvZGVib3VuY2UtYW5kLXRocm90dGxlLXZpc3VhbC1leHBsYW5hdGlvbilcbiAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8udGhyb3R0bGVgIGFuZCBgXy5kZWJvdW5jZWAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gdGhyb3R0bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gdGhyb3R0bGUgaW52b2NhdGlvbnMgdG8uXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz10cnVlXSBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nXG4gKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV0gU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmdcbiAqICBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgdGhyb3R0bGVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBhdm9pZCBleGNlc3NpdmVseSB1cGRhdGluZyB0aGUgcG9zaXRpb24gd2hpbGUgc2Nyb2xsaW5nXG4gKiBqUXVlcnkod2luZG93KS5vbignc2Nyb2xsJywgXy50aHJvdHRsZSh1cGRhdGVQb3NpdGlvbiwgMTAwKSk7XG4gKlxuICogLy8gaW52b2tlIGByZW5ld1Rva2VuYCB3aGVuIHRoZSBjbGljayBldmVudCBpcyBmaXJlZCwgYnV0IG5vdCBtb3JlIHRoYW4gb25jZSBldmVyeSA1IG1pbnV0ZXNcbiAqIGpRdWVyeSgnLmludGVyYWN0aXZlJykub24oJ2NsaWNrJywgXy50aHJvdHRsZShyZW5ld1Rva2VuLCAzMDAwMDAsIHtcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBjYW5jZWwgYSB0cmFpbGluZyB0aHJvdHRsZWQgY2FsbFxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhyb3R0bGVkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxlYWRpbmcgPSB0cnVlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgIGxlYWRpbmcgPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuICAgIGxlYWRpbmcgPSAnbGVhZGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy5sZWFkaW5nIDogbGVhZGluZztcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG4gIHJldHVybiBkZWJvdW5jZShmdW5jLCB3YWl0LCB7ICdsZWFkaW5nJzogbGVhZGluZywgJ21heFdhaXQnOiArd2FpdCwgJ3RyYWlsaW5nJzogdHJhaWxpbmcgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGhyb3R0bGU7XG4iLCIvKipcbiAqIENvcGllcyB0aGUgdmFsdWVzIG9mIGBzb3VyY2VgIHRvIGBhcnJheWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZSBUaGUgYXJyYXkgdG8gY29weSB2YWx1ZXMgZnJvbS5cbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheT1bXV0gVGhlIGFycmF5IHRvIGNvcHkgdmFsdWVzIHRvLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5Q29weShzb3VyY2UsIGFycmF5KSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gc291cmNlLmxlbmd0aDtcblxuICBhcnJheSB8fCAoYXJyYXkgPSBBcnJheShsZW5ndGgpKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBhcnJheVtpbmRleF0gPSBzb3VyY2VbaW5kZXhdO1xuICB9XG4gIHJldHVybiBhcnJheTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcnJheUNvcHk7XG4iLCIvKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5mb3JFYWNoYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICovXG5mdW5jdGlvbiBhcnJheUVhY2goYXJyYXksIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKGl0ZXJhdGVlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSA9PT0gZmFsc2UpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXJyYXk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJyYXlFYWNoO1xuIiwiLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcnJheVNvbWU7XG4iLCIvKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIGJ5IGBfLnRlbXBsYXRlYCB0byBjdXN0b21pemUgaXRzIGBfLmFzc2lnbmAgdXNlLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2UgYGFzc2lnbkRlZmF1bHRzYCBleGNlcHQgdGhhdCBpdCBpZ25vcmVzXG4gKiBpbmhlcml0ZWQgcHJvcGVydHkgdmFsdWVzIHdoZW4gY2hlY2tpbmcgaWYgYSBwcm9wZXJ0eSBpcyBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBvYmplY3RWYWx1ZSBUaGUgZGVzdGluYXRpb24gb2JqZWN0IHByb3BlcnR5IHZhbHVlLlxuICogQHBhcmFtIHsqfSBzb3VyY2VWYWx1ZSBUaGUgc291cmNlIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBhc3NvY2lhdGVkIHdpdGggdGhlIG9iamVjdCBhbmQgc291cmNlIHZhbHVlcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSB2YWx1ZSB0byBhc3NpZ24gdG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduT3duRGVmYXVsdHMob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlLCBrZXksIG9iamVjdCkge1xuICByZXR1cm4gKG9iamVjdFZhbHVlID09PSB1bmRlZmluZWQgfHwgIWhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKVxuICAgID8gc291cmNlVmFsdWVcbiAgICA6IG9iamVjdFZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc2lnbk93bkRlZmF1bHRzO1xuIiwidmFyIGtleXMgPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5cycpO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5hc3NpZ25gIGZvciBjdXN0b21pemluZyBhc3NpZ25lZCB2YWx1ZXMgd2l0aG91dFxuICogc3VwcG9ydCBmb3IgYXJndW1lbnQganVnZ2xpbmcsIG11bHRpcGxlIHNvdXJjZXMsIGFuZCBgdGhpc2AgYmluZGluZyBgY3VzdG9taXplcmBcbiAqIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBhc3NpZ25XaXRoKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcHJvcHMgPSBrZXlzKHNvdXJjZSksXG4gICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIga2V5ID0gcHJvcHNbaW5kZXhdLFxuICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyKHZhbHVlLCBzb3VyY2Vba2V5XSwga2V5LCBvYmplY3QsIHNvdXJjZSk7XG5cbiAgICBpZiAoKHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlc3VsdCAhPT0gdmFsdWUpIDogKHZhbHVlID09PSB2YWx1ZSkpIHx8XG4gICAgICAgICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmICEoa2V5IGluIG9iamVjdCkpKSB7XG4gICAgICBvYmplY3Rba2V5XSA9IHJlc3VsdDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iamVjdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ25XaXRoO1xuIiwidmFyIGJhc2VDb3B5ID0gcmVxdWlyZSgnLi9iYXNlQ29weScpLFxuICAgIGtleXMgPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5cycpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmFzc2lnbmAgd2l0aG91dCBzdXBwb3J0IGZvciBhcmd1bWVudCBqdWdnbGluZyxcbiAqIG11bHRpcGxlIHNvdXJjZXMsIGFuZCBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gYmFzZUFzc2lnbihvYmplY3QsIHNvdXJjZSkge1xuICByZXR1cm4gc291cmNlID09IG51bGxcbiAgICA/IG9iamVjdFxuICAgIDogYmFzZUNvcHkoc291cmNlLCBrZXlzKHNvdXJjZSksIG9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUFzc2lnbjtcbiIsIi8qKlxuICogQ29waWVzIHByb3BlcnRpZXMgb2YgYHNvdXJjZWAgdG8gYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbS5cbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBjb3B5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3Q9e31dIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIHRvLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gYmFzZUNvcHkoc291cmNlLCBwcm9wcywgb2JqZWN0KSB7XG4gIG9iamVjdCB8fCAob2JqZWN0ID0ge30pO1xuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICBvYmplY3Rba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUNvcHk7XG4iLCJ2YXIgYmFzZUZvck93biA9IHJlcXVpcmUoJy4vYmFzZUZvck93bicpLFxuICAgIGNyZWF0ZUJhc2VFYWNoID0gcmVxdWlyZSgnLi9jcmVhdGVCYXNlRWFjaCcpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvckVhY2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdHxzdHJpbmd9IGNvbGxlY3Rpb24gVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheXxPYmplY3R8c3RyaW5nfSBSZXR1cm5zIGBjb2xsZWN0aW9uYC5cbiAqL1xudmFyIGJhc2VFYWNoID0gY3JlYXRlQmFzZUVhY2goYmFzZUZvck93bik7XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUVhY2g7XG4iLCJ2YXIgY3JlYXRlQmFzZUZvciA9IHJlcXVpcmUoJy4vY3JlYXRlQmFzZUZvcicpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBiYXNlRm9ySW5gIGFuZCBgYmFzZUZvck93bmAgd2hpY2ggaXRlcmF0ZXNcbiAqIG92ZXIgYG9iamVjdGAgcHJvcGVydGllcyByZXR1cm5lZCBieSBga2V5c0Z1bmNgIGludm9raW5nIGBpdGVyYXRlZWAgZm9yXG4gKiBlYWNoIHByb3BlcnR5LiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5IGJ5IGV4cGxpY2l0bHlcbiAqIHJldHVybmluZyBgZmFsc2VgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGtleXNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIGtleXMgb2YgYG9iamVjdGAuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG52YXIgYmFzZUZvciA9IGNyZWF0ZUJhc2VGb3IoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlRm9yO1xuIiwidmFyIGJhc2VGb3IgPSByZXF1aXJlKCcuL2Jhc2VGb3InKSxcbiAgICBrZXlzSW4gPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5c0luJyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9ySW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VGb3JJbihvYmplY3QsIGl0ZXJhdGVlKSB7XG4gIHJldHVybiBiYXNlRm9yKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNJbik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUZvckluO1xuIiwidmFyIGJhc2VGb3IgPSByZXF1aXJlKCcuL2Jhc2VGb3InKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JPd25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgY2FsbGJhY2tcbiAqIHNob3J0aGFuZHMgYW5kIGB0aGlzYCBiaW5kaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VGb3JPd24ob2JqZWN0LCBpdGVyYXRlZSkge1xuICByZXR1cm4gYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlRm9yT3duO1xuIiwidmFyIGJhc2VJc0VxdWFsRGVlcCA9IHJlcXVpcmUoJy4vYmFzZUlzRXF1YWxEZWVwJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0JyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aXRob3V0IHN1cHBvcnQgZm9yIGB0aGlzYCBiaW5kaW5nXG4gKiBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyO1xuICB9XG4gIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsO1xuIiwidmFyIGVxdWFsQXJyYXlzID0gcmVxdWlyZSgnLi9lcXVhbEFycmF5cycpLFxuICAgIGVxdWFsQnlUYWcgPSByZXF1aXJlKCcuL2VxdWFsQnlUYWcnKSxcbiAgICBlcXVhbE9iamVjdHMgPSByZXF1aXJlKCcuL2VxdWFsT2JqZWN0cycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJyYXknKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzVHlwZWRBcnJheScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIG9iamVjdHMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cbiAgaWYgKCFvYmpJc0Fycikge1xuICAgIG9ialRhZyA9IG9ialRvU3RyaW5nLmNhbGwob2JqZWN0KTtcbiAgICBpZiAob2JqVGFnID09IGFyZ3NUYWcpIHtcbiAgICAgIG9ialRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG9ialRhZyAhPSBvYmplY3RUYWcpIHtcbiAgICAgIG9iaklzQXJyID0gaXNUeXBlZEFycmF5KG9iamVjdCk7XG4gICAgfVxuICB9XG4gIGlmICghb3RoSXNBcnIpIHtcbiAgICBvdGhUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG90aGVyKTtcbiAgICBpZiAob3RoVGFnID09IGFyZ3NUYWcpIHtcbiAgICAgIG90aFRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG90aFRhZyAhPSBvYmplY3RUYWcpIHtcbiAgICAgIG90aElzQXJyID0gaXNUeXBlZEFycmF5KG90aGVyKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyxcbiAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyxcbiAgICAgIGlzU2FtZVRhZyA9IG9ialRhZyA9PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuICAgIHJldHVybiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZyk7XG4gIH1cbiAgaWYgKCFpc0xvb3NlKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCwgb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG4gIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblxuICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IG9iamVjdCkge1xuICAgICAgcmV0dXJuIHN0YWNrQltsZW5ndGhdID09IG90aGVyO1xuICAgIH1cbiAgfVxuICAvLyBBZGQgYG9iamVjdGAgYW5kIGBvdGhlcmAgdG8gdGhlIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICBzdGFja0EucHVzaChvYmplY3QpO1xuICBzdGFja0IucHVzaChvdGhlcik7XG5cbiAgdmFyIHJlc3VsdCA9IChvYmpJc0FyciA/IGVxdWFsQXJyYXlzIDogZXF1YWxPYmplY3RzKShvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcblxuICBzdGFja0EucG9wKCk7XG4gIHN0YWNrQi5wb3AoKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsRGVlcDtcbiIsInZhciBhcnJheUVhY2ggPSByZXF1aXJlKCcuL2FycmF5RWFjaCcpLFxuICAgIGJhc2VNZXJnZURlZXAgPSByZXF1aXJlKCcuL2Jhc2VNZXJnZURlZXAnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc0FycmF5JyksXG4gICAgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0JyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzVHlwZWRBcnJheScpLFxuICAgIGtleXMgPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5cycpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1lcmdlYCB3aXRob3V0IHN1cHBvcnQgZm9yIGFyZ3VtZW50IGp1Z2dsaW5nLFxuICogbXVsdGlwbGUgc291cmNlcywgYW5kIGB0aGlzYCBiaW5kaW5nIGBjdXN0b21pemVyYCBmdW5jdGlvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBtZXJnZWQgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQT1bXV0gVHJhY2tzIHRyYXZlcnNlZCBzb3VyY2Ugb2JqZWN0cy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIEFzc29jaWF0ZXMgdmFsdWVzIHdpdGggc291cmNlIGNvdW50ZXJwYXJ0cy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VNZXJnZShvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplciwgc3RhY2tBLCBzdGFja0IpIHtcbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuICB2YXIgaXNTcmNBcnIgPSBpc0FycmF5TGlrZShzb3VyY2UpICYmIChpc0FycmF5KHNvdXJjZSkgfHwgaXNUeXBlZEFycmF5KHNvdXJjZSkpLFxuICAgICAgcHJvcHMgPSBpc1NyY0FyciA/IHVuZGVmaW5lZCA6IGtleXMoc291cmNlKTtcblxuICBhcnJheUVhY2gocHJvcHMgfHwgc291cmNlLCBmdW5jdGlvbihzcmNWYWx1ZSwga2V5KSB7XG4gICAgaWYgKHByb3BzKSB7XG4gICAgICBrZXkgPSBzcmNWYWx1ZTtcbiAgICAgIHNyY1ZhbHVlID0gc291cmNlW2tleV07XG4gICAgfVxuICAgIGlmIChpc09iamVjdExpa2Uoc3JjVmFsdWUpKSB7XG4gICAgICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcbiAgICAgIHN0YWNrQiB8fCAoc3RhY2tCID0gW10pO1xuICAgICAgYmFzZU1lcmdlRGVlcChvYmplY3QsIHNvdXJjZSwga2V5LCBiYXNlTWVyZ2UsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcih2YWx1ZSwgc3JjVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlzQ29tbW9uID0gcmVzdWx0ID09PSB1bmRlZmluZWQ7XG5cbiAgICAgIGlmIChpc0NvbW1vbikge1xuICAgICAgICByZXN1bHQgPSBzcmNWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICgocmVzdWx0ICE9PSB1bmRlZmluZWQgfHwgKGlzU3JjQXJyICYmICEoa2V5IGluIG9iamVjdCkpKSAmJlxuICAgICAgICAgIChpc0NvbW1vbiB8fCAocmVzdWx0ID09PSByZXN1bHQgPyAocmVzdWx0ICE9PSB2YWx1ZSkgOiAodmFsdWUgPT09IHZhbHVlKSkpKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU1lcmdlO1xuIiwidmFyIGFycmF5Q29weSA9IHJlcXVpcmUoJy4vYXJyYXlDb3B5JyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4uL2xhbmcvaXNBcnJheScpLFxuICAgIGlzQXJyYXlMaWtlID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZScpLFxuICAgIGlzUGxhaW5PYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzUGxhaW5PYmplY3QnKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzVHlwZWRBcnJheScpLFxuICAgIHRvUGxhaW5PYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL3RvUGxhaW5PYmplY3QnKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VNZXJnZWAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBtZXJnZXMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAqIHJlZmVyZW5jZXMgdG8gYmUgbWVyZ2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBtZXJnZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IG1lcmdlRnVuYyBUaGUgZnVuY3Rpb24gdG8gbWVyZ2UgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2VkIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIG9iamVjdHMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIHZhbHVlcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZU1lcmdlRGVlcChvYmplY3QsIHNvdXJjZSwga2V5LCBtZXJnZUZ1bmMsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBsZW5ndGggPSBzdGFja0EubGVuZ3RoLFxuICAgICAgc3JjVmFsdWUgPSBzb3VyY2Vba2V5XTtcblxuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICBpZiAoc3RhY2tBW2xlbmd0aF0gPT0gc3JjVmFsdWUpIHtcbiAgICAgIG9iamVjdFtrZXldID0gc3RhY2tCW2xlbmd0aF07XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIHZhciB2YWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKSA6IHVuZGVmaW5lZCxcbiAgICAgIGlzQ29tbW9uID0gcmVzdWx0ID09PSB1bmRlZmluZWQ7XG5cbiAgaWYgKGlzQ29tbW9uKSB7XG4gICAgcmVzdWx0ID0gc3JjVmFsdWU7XG4gICAgaWYgKGlzQXJyYXlMaWtlKHNyY1ZhbHVlKSAmJiAoaXNBcnJheShzcmNWYWx1ZSkgfHwgaXNUeXBlZEFycmF5KHNyY1ZhbHVlKSkpIHtcbiAgICAgIHJlc3VsdCA9IGlzQXJyYXkodmFsdWUpXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiAoaXNBcnJheUxpa2UodmFsdWUpID8gYXJyYXlDb3B5KHZhbHVlKSA6IFtdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNQbGFpbk9iamVjdChzcmNWYWx1ZSkgfHwgaXNBcmd1bWVudHMoc3JjVmFsdWUpKSB7XG4gICAgICByZXN1bHQgPSBpc0FyZ3VtZW50cyh2YWx1ZSlcbiAgICAgICAgPyB0b1BsYWluT2JqZWN0KHZhbHVlKVxuICAgICAgICA6IChpc1BsYWluT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDoge30pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlzQ29tbW9uID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8vIEFkZCB0aGUgc291cmNlIHZhbHVlIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cyBhbmQgYXNzb2NpYXRlXG4gIC8vIGl0IHdpdGggaXRzIG1lcmdlZCB2YWx1ZS5cbiAgc3RhY2tBLnB1c2goc3JjVmFsdWUpO1xuICBzdGFja0IucHVzaChyZXN1bHQpO1xuXG4gIGlmIChpc0NvbW1vbikge1xuICAgIC8vIFJlY3Vyc2l2ZWx5IG1lcmdlIG9iamVjdHMgYW5kIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIG9iamVjdFtrZXldID0gbWVyZ2VGdW5jKHJlc3VsdCwgc3JjVmFsdWUsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKTtcbiAgfSBlbHNlIGlmIChyZXN1bHQgPT09IHJlc3VsdCA/IChyZXN1bHQgIT09IHZhbHVlKSA6ICh2YWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgb2JqZWN0W2tleV0gPSByZXN1bHQ7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlTWVyZ2VEZWVwO1xuIiwiLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHk7XG4iLCIvKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcgaWYgaXQncyBub3Qgb25lLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWRcbiAqIGZvciBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6ICh2YWx1ZSArICcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlVG9TdHJpbmc7XG4iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnZhbHVlc2AgYW5kIGBfLnZhbHVlc0luYCB3aGljaCBjcmVhdGVzIGFuXG4gKiBhcnJheSBvZiBgb2JqZWN0YCBwcm9wZXJ0eSB2YWx1ZXMgY29ycmVzcG9uZGluZyB0byB0aGUgcHJvcGVydHkgbmFtZXNcbiAqIG9mIGBwcm9wc2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBnZXQgdmFsdWVzIGZvci5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gYmFzZVZhbHVlcyhvYmplY3QsIHByb3BzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKTtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleF0gPSBvYmplY3RbcHJvcHNbaW5kZXhdXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VWYWx1ZXM7XG4iLCJ2YXIgaWRlbnRpdHkgPSByZXF1aXJlKCcuLi91dGlsaXR5L2lkZW50aXR5Jyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlQ2FsbGJhY2tgIHdoaWNoIG9ubHkgc3VwcG9ydHMgYHRoaXNgIGJpbmRpbmdcbiAqIGFuZCBzcGVjaWZ5aW5nIHRoZSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBiaW5kLlxuICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gKiBAcGFyYW0ge251bWJlcn0gW2FyZ0NvdW50XSBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY2FsbGJhY2suXG4gKi9cbmZ1bmN0aW9uIGJpbmRDYWxsYmFjayhmdW5jLCB0aGlzQXJnLCBhcmdDb3VudCkge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBpZGVudGl0eTtcbiAgfVxuICBpZiAodGhpc0FyZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIGZ1bmM7XG4gIH1cbiAgc3dpdGNoIChhcmdDb3VudCkge1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgIH07XG4gICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICB9O1xuICAgIGNhc2UgNTogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBvdGhlciwga2V5LCBvYmplY3QsIHNvdXJjZSkge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3VtZW50cyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmluZENhbGxiYWNrO1xuIiwiLyoqXG4gKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltTGVmdGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgY2hhcmFjdGVyXG4gKiBvZiBgc3RyaW5nYCB0aGF0IGlzIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFycyBUaGUgY2hhcmFjdGVycyB0byBmaW5kLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGNoYXJhY3RlciBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAqL1xuZnVuY3Rpb24gY2hhcnNMZWZ0SW5kZXgoc3RyaW5nLCBjaGFycykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgY2hhcnMuaW5kZXhPZihzdHJpbmcuY2hhckF0KGluZGV4KSkgPiAtMSkge31cbiAgcmV0dXJuIGluZGV4O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNoYXJzTGVmdEluZGV4O1xuIiwiLyoqXG4gKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltUmlnaHRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGxhc3QgY2hhcmFjdGVyXG4gKiBvZiBgc3RyaW5nYCB0aGF0IGlzIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFycyBUaGUgY2hhcmFjdGVycyB0byBmaW5kLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgY2hhcmFjdGVyIG5vdCBmb3VuZCBpbiBgY2hhcnNgLlxuICovXG5mdW5jdGlvbiBjaGFyc1JpZ2h0SW5kZXgoc3RyaW5nLCBjaGFycykge1xuICB2YXIgaW5kZXggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlIChpbmRleC0tICYmIGNoYXJzLmluZGV4T2Yoc3RyaW5nLmNoYXJBdChpbmRleCkpID4gLTEpIHt9XG4gIHJldHVybiBpbmRleDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjaGFyc1JpZ2h0SW5kZXg7XG4iLCJ2YXIgYmluZENhbGxiYWNrID0gcmVxdWlyZSgnLi9iaW5kQ2FsbGJhY2snKSxcbiAgICBpc0l0ZXJhdGVlQ2FsbCA9IHJlcXVpcmUoJy4vaXNJdGVyYXRlZUNhbGwnKSxcbiAgICByZXN0UGFyYW0gPSByZXF1aXJlKCcuLi9mdW5jdGlvbi9yZXN0UGFyYW0nKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgYF8uYXNzaWduYCwgYF8uZGVmYXVsdHNgLCBvciBgXy5tZXJnZWAgZnVuY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGFzc2lnbmVyIFRoZSBmdW5jdGlvbiB0byBhc3NpZ24gdmFsdWVzLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYXNzaWduZXIgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUFzc2lnbmVyKGFzc2lnbmVyKSB7XG4gIHJldHVybiByZXN0UGFyYW0oZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2VzKSB7XG4gICAgdmFyIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IG9iamVjdCA9PSBudWxsID8gMCA6IHNvdXJjZXMubGVuZ3RoLFxuICAgICAgICBjdXN0b21pemVyID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbbGVuZ3RoIC0gMl0gOiB1bmRlZmluZWQsXG4gICAgICAgIGd1YXJkID0gbGVuZ3RoID4gMiA/IHNvdXJjZXNbMl0gOiB1bmRlZmluZWQsXG4gICAgICAgIHRoaXNBcmcgPSBsZW5ndGggPiAxID8gc291cmNlc1tsZW5ndGggLSAxXSA6IHVuZGVmaW5lZDtcblxuICAgIGlmICh0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjdXN0b21pemVyID0gYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDUpO1xuICAgICAgbGVuZ3RoIC09IDI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGN1c3RvbWl6ZXIgPSB0eXBlb2YgdGhpc0FyZyA9PSAnZnVuY3Rpb24nID8gdGhpc0FyZyA6IHVuZGVmaW5lZDtcbiAgICAgIGxlbmd0aCAtPSAoY3VzdG9taXplciA/IDEgOiAwKTtcbiAgICB9XG4gICAgaWYgKGd1YXJkICYmIGlzSXRlcmF0ZWVDYWxsKHNvdXJjZXNbMF0sIHNvdXJjZXNbMV0sIGd1YXJkKSkge1xuICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA8IDMgPyB1bmRlZmluZWQgOiBjdXN0b21pemVyO1xuICAgICAgbGVuZ3RoID0gMTtcbiAgICB9XG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2luZGV4XTtcbiAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgYXNzaWduZXIob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVBc3NpZ25lcjtcbiIsInZhciBnZXRMZW5ndGggPSByZXF1aXJlKCcuL2dldExlbmd0aCcpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpLFxuICAgIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi90b09iamVjdCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBgYmFzZUVhY2hgIG9yIGBiYXNlRWFjaFJpZ2h0YCBmdW5jdGlvbi5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VFYWNoKGVhY2hGdW5jLCBmcm9tUmlnaHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKSB7XG4gICAgdmFyIGxlbmd0aCA9IGNvbGxlY3Rpb24gPyBnZXRMZW5ndGgoY29sbGVjdGlvbikgOiAwO1xuICAgIGlmICghaXNMZW5ndGgobGVuZ3RoKSkge1xuICAgICAgcmV0dXJuIGVhY2hGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKTtcbiAgICB9XG4gICAgdmFyIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTEsXG4gICAgICAgIGl0ZXJhYmxlID0gdG9PYmplY3QoY29sbGVjdGlvbik7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgaWYgKGl0ZXJhdGVlKGl0ZXJhYmxlW2luZGV4XSwgaW5kZXgsIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUJhc2VFYWNoO1xuIiwidmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi90b09iamVjdCcpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBiYXNlIGZ1bmN0aW9uIGZvciBgXy5mb3JJbmAgb3IgYF8uZm9ySW5SaWdodGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zyb21SaWdodF0gU3BlY2lmeSBpdGVyYXRpbmcgZnJvbSByaWdodCB0byBsZWZ0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYmFzZSBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQmFzZUZvcihmcm9tUmlnaHQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCwgaXRlcmF0ZWUsIGtleXNGdW5jKSB7XG4gICAgdmFyIGl0ZXJhYmxlID0gdG9PYmplY3Qob2JqZWN0KSxcbiAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLFxuICAgICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICAgIGluZGV4ID0gZnJvbVJpZ2h0ID8gbGVuZ3RoIDogLTE7XG5cbiAgICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuICAgICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtrZXldLCBrZXksIGl0ZXJhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQmFzZUZvcjtcbiIsInZhciBiaW5kQ2FsbGJhY2sgPSByZXF1aXJlKCcuL2JpbmRDYWxsYmFjaycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJyYXknKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gZm9yIGBfLmZvckVhY2hgIG9yIGBfLmZvckVhY2hSaWdodGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGFycmF5RnVuYyBUaGUgZnVuY3Rpb24gdG8gaXRlcmF0ZSBvdmVyIGFuIGFycmF5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZWFjaEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhIGNvbGxlY3Rpb24uXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBlYWNoIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVGb3JFYWNoKGFycmF5RnVuYywgZWFjaEZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGl0ZXJhdGVlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgaXRlcmF0ZWUgPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzQXJnID09PSB1bmRlZmluZWQgJiYgaXNBcnJheShjb2xsZWN0aW9uKSlcbiAgICAgID8gYXJyYXlGdW5jKGNvbGxlY3Rpb24sIGl0ZXJhdGVlKVxuICAgICAgOiBlYWNoRnVuYyhjb2xsZWN0aW9uLCBiaW5kQ2FsbGJhY2soaXRlcmF0ZWUsIHRoaXNBcmcsIDMpKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVGb3JFYWNoO1xuIiwidmFyIGFycmF5U29tZSA9IHJlcXVpcmUoJy4vYXJyYXlTb21lJyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIGFycmF5cy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJyYXlzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzTG9vc2UgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG4gIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG4gICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XSxcbiAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIoaXNMb29zZSA/IG90aFZhbHVlIDogYXJyVmFsdWUsIGlzTG9vc2UgPyBhcnJWYWx1ZSA6IG90aFZhbHVlLCBpbmRleCkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKGlzTG9vc2UpIHtcbiAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbEFycmF5cztcbiIsIi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2ZcbiAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdHMgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZykge1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgYm9vbFRhZzpcbiAgICBjYXNlIGRhdGVUYWc6XG4gICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWJlcnMsIGRhdGVzIHRvIG1pbGxpc2Vjb25kcyBhbmQgYm9vbGVhbnNcbiAgICAgIC8vIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzIG5vdCBlcXVhbC5cbiAgICAgIHJldHVybiArb2JqZWN0ID09ICtvdGhlcjtcblxuICAgIGNhc2UgZXJyb3JUYWc6XG4gICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICAvLyBUcmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWwuXG4gICAgICByZXR1cm4gKG9iamVjdCAhPSArb2JqZWN0KVxuICAgICAgICA/IG90aGVyICE9ICtvdGhlclxuICAgICAgICA6IG9iamVjdCA9PSArb3RoZXI7XG5cbiAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MgcHJpbWl0aXZlcyBhbmQgc3RyaW5nXG4gICAgICAvLyBvYmplY3RzIGFzIGVxdWFsLiBTZWUgaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4MTUuMTAuNi40IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXF1YWxCeVRhZztcbiIsInZhciBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKTtcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaW5nIHZhbHVlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTG9vc2VdIFNwZWNpZnkgcGVyZm9ybWluZyBwYXJ0aWFsIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQV0gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIG9iamVjdHMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCXSBUcmFja3MgdHJhdmVyc2VkIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc0xvb3NlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBpbmRleCA9IG9iakxlbmd0aDtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIGlmICghKGlzTG9vc2UgPyBrZXkgaW4gb3RoZXIgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCBrZXkpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICB2YXIgc2tpcEN0b3IgPSBpc0xvb3NlO1xuICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldLFxuICAgICAgICByZXN1bHQgPSBjdXN0b21pemVyID8gY3VzdG9taXplcihpc0xvb3NlID8gb3RoVmFsdWUgOiBvYmpWYWx1ZSwgaXNMb29zZT8gb2JqVmFsdWUgOiBvdGhWYWx1ZSwga2V5KSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIDogcmVzdWx0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgaWYgKCFza2lwQ3Rvcikge1xuICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cbiAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cbiAgICBpZiAob2JqQ3RvciAhPSBvdGhDdG9yICYmXG4gICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PSAnZnVuY3Rpb24nICYmIG90aEN0b3IgaW5zdGFuY2VvZiBvdGhDdG9yKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbE9iamVjdHM7XG4iLCIvKiogVXNlZCB0byBtYXAgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLiAqL1xudmFyIGh0bWxFc2NhcGVzID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiMzOTsnLFxuICAnYCc6ICcmIzk2Oydcbn07XG5cbi8qKlxuICogVXNlZCBieSBgXy5lc2NhcGVgIHRvIGNvbnZlcnQgY2hhcmFjdGVycyB0byBIVE1MIGVudGl0aWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlSHRtbENoYXIoY2hyKSB7XG4gIHJldHVybiBodG1sRXNjYXBlc1tjaHJdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZUh0bWxDaGFyO1xuIiwiLyoqIFVzZWQgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuICovXG52YXIgc3RyaW5nRXNjYXBlcyA9IHtcbiAgJ1xcXFwnOiAnXFxcXCcsXG4gIFwiJ1wiOiBcIidcIixcbiAgJ1xcbic6ICduJyxcbiAgJ1xccic6ICdyJyxcbiAgJ1xcdTIwMjgnOiAndTIwMjgnLFxuICAnXFx1MjAyOSc6ICd1MjAyOSdcbn07XG5cbi8qKlxuICogVXNlZCBieSBgXy50ZW1wbGF0ZWAgdG8gZXNjYXBlIGNoYXJhY3RlcnMgZm9yIGluY2x1c2lvbiBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaHIgVGhlIG1hdGNoZWQgY2hhcmFjdGVyIHRvIGVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgY2hhcmFjdGVyLlxuICovXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmdDaGFyKGNocikge1xuICByZXR1cm4gJ1xcXFwnICsgc3RyaW5nRXNjYXBlc1tjaHJdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZVN0cmluZ0NoYXI7XG4iLCJ2YXIgYmFzZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9iYXNlUHJvcGVydHknKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYSBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MilcbiAqIHRoYXQgYWZmZWN0cyBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuICovXG52YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRMZW5ndGg7XG4iLCJ2YXIgaXNOYXRpdmUgPSByZXF1aXJlKCcuLi9sYW5nL2lzTmF0aXZlJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGhvZCB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZShvYmplY3QsIGtleSkge1xuICB2YXIgdmFsdWUgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuICByZXR1cm4gaXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuIiwidmFyIGdldExlbmd0aCA9IHJlcXVpcmUoJy4vZ2V0TGVuZ3RoJyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXlMaWtlO1xuIiwiLyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xudmFyIHJlSXNVaW50ID0gL15cXGQrJC87XG5cbi8qKlxuICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgdmFsdWUgPSAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSA/ICt2YWx1ZSA6IC0xO1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSW5kZXg7XG4iLCJ2YXIgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlJyksXG4gICAgaXNJbmRleCA9IHJlcXVpcmUoJy4vaXNJbmRleCcpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSB2YWx1ZSBhcmd1bWVudC5cbiAqIEBwYXJhbSB7Kn0gaW5kZXggVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBpbmRleCBvciBrZXkgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp9IG9iamVjdCBUaGUgcG90ZW50aWFsIGl0ZXJhdGVlIG9iamVjdCBhcmd1bWVudC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXJndW1lbnRzIGFyZSBmcm9tIGFuIGl0ZXJhdGVlIGNhbGwsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGluZGV4LCBvYmplY3QpIHtcbiAgaWYgKCFpc09iamVjdChvYmplY3QpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB0eXBlID0gdHlwZW9mIGluZGV4O1xuICBpZiAodHlwZSA9PSAnbnVtYmVyJ1xuICAgICAgPyAoaXNBcnJheUxpa2Uob2JqZWN0KSAmJiBpc0luZGV4KGluZGV4LCBvYmplY3QubGVuZ3RoKSlcbiAgICAgIDogKHR5cGUgPT0gJ3N0cmluZycgJiYgaW5kZXggaW4gb2JqZWN0KSkge1xuICAgIHZhciBvdGhlciA9IG9iamVjdFtpbmRleF07XG4gICAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/ICh2YWx1ZSA9PT0gb3RoZXIpIDogKG90aGVyICE9PSBvdGhlcik7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSXRlcmF0ZWVDYWxsO1xuIiwiLyoqXG4gKiBVc2VkIGFzIHRoZSBbbWF4aW11bSBsZW5ndGhdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW51bWJlci5tYXhfc2FmZV9pbnRlZ2VyKVxuICogb2YgYW4gYXJyYXktbGlrZSB2YWx1ZS5cbiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgYmFzZWQgb24gW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0xlbmd0aDtcbiIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG4iLCIvKipcbiAqIFVzZWQgYnkgYHRyaW1tZWRMZWZ0SW5kZXhgIGFuZCBgdHJpbW1lZFJpZ2h0SW5kZXhgIHRvIGRldGVybWluZSBpZiBhXG4gKiBjaGFyYWN0ZXIgY29kZSBpcyB3aGl0ZXNwYWNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gY2hhckNvZGUgVGhlIGNoYXJhY3RlciBjb2RlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYGNoYXJDb2RlYCBpcyB3aGl0ZXNwYWNlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzU3BhY2UoY2hhckNvZGUpIHtcbiAgcmV0dXJuICgoY2hhckNvZGUgPD0gMTYwICYmIChjaGFyQ29kZSA+PSA5ICYmIGNoYXJDb2RlIDw9IDEzKSB8fCBjaGFyQ29kZSA9PSAzMiB8fCBjaGFyQ29kZSA9PSAxNjApIHx8IGNoYXJDb2RlID09IDU3NjAgfHwgY2hhckNvZGUgPT0gNjE1OCB8fFxuICAgIChjaGFyQ29kZSA+PSA4MTkyICYmIChjaGFyQ29kZSA8PSA4MjAyIHx8IGNoYXJDb2RlID09IDgyMzIgfHwgY2hhckNvZGUgPT0gODIzMyB8fCBjaGFyQ29kZSA9PSA4MjM5IHx8IGNoYXJDb2RlID09IDgyODcgfHwgY2hhckNvZGUgPT0gMTIyODggfHwgY2hhckNvZGUgPT0gNjUyNzkpKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTcGFjZTtcbiIsIi8qKiBVc2VkIHRvIG1hdGNoIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG52YXIgcmVFc2NhcGUgPSAvPCUtKFtcXHNcXFNdKz8pJT4vZztcblxubW9kdWxlLmV4cG9ydHMgPSByZUVzY2FwZTtcbiIsIi8qKiBVc2VkIHRvIG1hdGNoIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG52YXIgcmVFdmFsdWF0ZSA9IC88JShbXFxzXFxTXSs/KSU+L2c7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVFdmFsdWF0ZTtcbiIsIi8qKiBVc2VkIHRvIG1hdGNoIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG52YXIgcmVJbnRlcnBvbGF0ZSA9IC88JT0oW1xcc1xcU10rPyklPi9nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlSW50ZXJwb2xhdGU7XG4iLCJ2YXIgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4uL2xhbmcvaXNBcnJheScpLFxuICAgIGlzSW5kZXggPSByZXF1aXJlKCcuL2lzSW5kZXgnKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKSxcbiAgICBrZXlzSW4gPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5c0luJyk7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEEgZmFsbGJhY2sgaW1wbGVtZW50YXRpb24gb2YgYE9iamVjdC5rZXlzYCB3aGljaCBjcmVhdGVzIGFuIGFycmF5IG9mIHRoZVxuICogb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIHNoaW1LZXlzKG9iamVjdCkge1xuICB2YXIgcHJvcHMgPSBrZXlzSW4ob2JqZWN0KSxcbiAgICAgIHByb3BzTGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgbGVuZ3RoID0gcHJvcHNMZW5ndGggJiYgb2JqZWN0Lmxlbmd0aDtcblxuICB2YXIgYWxsb3dJbmRleGVzID0gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJlxuICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSk7XG5cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBbXTtcblxuICB3aGlsZSAoKytpbmRleCA8IHByb3BzTGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHByb3BzW2luZGV4XTtcbiAgICBpZiAoKGFsbG93SW5kZXhlcyAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSkgfHwgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hpbUtleXM7XG4iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0Jyk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBvYmplY3QgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgb2JqZWN0LlxuICovXG5mdW5jdGlvbiB0b09iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3QodmFsdWUpID8gdmFsdWUgOiBPYmplY3QodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRvT2JqZWN0O1xuIiwidmFyIGlzU3BhY2UgPSByZXF1aXJlKCcuL2lzU3BhY2UnKTtcblxuLyoqXG4gKiBVc2VkIGJ5IGBfLnRyaW1gIGFuZCBgXy50cmltTGVmdGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgbm9uLXdoaXRlc3BhY2VcbiAqIGNoYXJhY3RlciBvZiBgc3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Qgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICovXG5mdW5jdGlvbiB0cmltbWVkTGVmdEluZGV4KHN0cmluZykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGggJiYgaXNTcGFjZShzdHJpbmcuY2hhckNvZGVBdChpbmRleCkpKSB7fVxuICByZXR1cm4gaW5kZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdHJpbW1lZExlZnRJbmRleDtcbiIsInZhciBpc1NwYWNlID0gcmVxdWlyZSgnLi9pc1NwYWNlJyk7XG5cbi8qKlxuICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbVJpZ2h0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlXG4gKiBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3Qgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVyLlxuICovXG5mdW5jdGlvbiB0cmltbWVkUmlnaHRJbmRleChzdHJpbmcpIHtcbiAgdmFyIGluZGV4ID0gc3RyaW5nLmxlbmd0aDtcblxuICB3aGlsZSAoaW5kZXgtLSAmJiBpc1NwYWNlKHN0cmluZy5jaGFyQ29kZUF0KGluZGV4KSkpIHt9XG4gIHJldHVybiBpbmRleDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmltbWVkUmlnaHRJbmRleDtcbiIsInZhciBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzQXJyYXlMaWtlJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKiogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgYXJndW1lbnRzYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpICYmXG4gICAgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmICFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcmd1bWVudHM7XG4iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZ2V0TmF0aXZlJyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc0xlbmd0aCcpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVJc0FycmF5ID0gZ2V0TmF0aXZlKEFycmF5LCAnaXNBcnJheScpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheShmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc0FycmF5ID0gbmF0aXZlSXNBcnJheSB8fCBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFycmF5VGFnO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5O1xuIiwidmFyIGJhc2VJc0VxdWFsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZUlzRXF1YWwnKSxcbiAgICBiaW5kQ2FsbGJhY2sgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iaW5kQ2FsbGJhY2snKTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlXG4gKiBlcXVpdmFsZW50LiBJZiBgY3VzdG9taXplcmAgaXMgcHJvdmlkZWQgaXQncyBpbnZva2VkIHRvIGNvbXBhcmUgdmFsdWVzLlxuICogSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGAgY29tcGFyaXNvbnMgYXJlIGhhbmRsZWQgYnkgdGhlIG1ldGhvZFxuICogaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCB1cCB0b1xuICogdGhyZWUgYXJndW1lbnRzOiAodmFsdWUsIG90aGVyIFssIGluZGV4fGtleV0pLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBzdXBwb3J0cyBjb21wYXJpbmcgYXJyYXlzLCBib29sZWFucywgYERhdGVgIG9iamVjdHMsXG4gKiBudW1iZXJzLCBgT2JqZWN0YCBvYmplY3RzLCByZWdleGVzLCBhbmQgc3RyaW5ncy4gT2JqZWN0cyBhcmUgY29tcGFyZWQgYnlcbiAqIHRoZWlyIG93biwgbm90IGluaGVyaXRlZCwgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLiBGdW5jdGlvbnMgYW5kIERPTSBub2Rlc1xuICogYXJlICoqbm90Kiogc3VwcG9ydGVkLiBQcm92aWRlIGEgY3VzdG9taXplciBmdW5jdGlvbiB0byBleHRlbmQgc3VwcG9ydFxuICogZm9yIGNvbXBhcmluZyBvdGhlciB2YWx1ZXMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBhbGlhcyBlcVxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgdmFsdWUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqIHZhciBvdGhlciA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqXG4gKiBvYmplY3QgPT0gb3RoZXI7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNFcXVhbChvYmplY3QsIG90aGVyKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAqIHZhciBhcnJheSA9IFsnaGVsbG8nLCAnZ29vZGJ5ZSddO1xuICogdmFyIG90aGVyID0gWydoaScsICdnb29kYnllJ107XG4gKlxuICogXy5pc0VxdWFsKGFycmF5LCBvdGhlciwgZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gKiAgIGlmIChfLmV2ZXJ5KFt2YWx1ZSwgb3RoZXJdLCBSZWdFeHAucHJvdG90eXBlLnRlc3QsIC9eaCg/Oml8ZWxsbykkLykpIHtcbiAqICAgICByZXR1cm4gdHJ1ZTtcbiAqICAgfVxuICogfSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyLCB0aGlzQXJnKSB7XG4gIGN1c3RvbWl6ZXIgPSB0eXBlb2YgY3VzdG9taXplciA9PSAnZnVuY3Rpb24nID8gYmluZENhbGxiYWNrKGN1c3RvbWl6ZXIsIHRoaXNBcmcsIDMpIDogdW5kZWZpbmVkO1xuICB2YXIgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIG90aGVyKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuICByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplcikgOiAhIXJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0VxdWFsO1xuIiwidmFyIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhbiBgRXJyb3JgLCBgRXZhbEVycm9yYCwgYFJhbmdlRXJyb3JgLCBgUmVmZXJlbmNlRXJyb3JgLFxuICogYFN5bnRheEVycm9yYCwgYFR5cGVFcnJvcmAsIG9yIGBVUklFcnJvcmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBlcnJvciBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0Vycm9yKG5ldyBFcnJvcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Vycm9yKEVycm9yKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRXJyb3IodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlLm1lc3NhZ2UgPT0gJ3N0cmluZycgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZXJyb3JUYWc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFcnJvcjtcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNGdW5jdGlvbihfKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmkgd2hpY2ggcmV0dXJuICdmdW5jdGlvbicgZm9yIHJlZ2V4ZXNcbiAgLy8gYW5kIFNhZmFyaSA4IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGNvbnN0cnVjdG9ycy5cbiAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBmdW5jVGFnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb247XG4iLCJ2YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJy4vaXNGdW5jdGlvbicpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSA+IDUpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZm5Ub1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGZuVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZSgvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2csICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24uXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNOYXRpdmUoQXJyYXkucHJvdG90eXBlLnB1c2gpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNOYXRpdmUoXyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc05hdGl2ZSh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICByZXR1cm4gcmVJc05hdGl2ZS50ZXN0KGZuVG9TdHJpbmcuY2FsbCh2YWx1ZSkpO1xuICB9XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHJlSXNIb3N0Q3Rvci50ZXN0KHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc05hdGl2ZTtcbiIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlIFtsYW5ndWFnZSB0eXBlXShodHRwczovL2VzNS5naXRodWIuaW8vI3g4KSBvZiBgT2JqZWN0YC5cbiAqIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoMSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAvLyBBdm9pZCBhIFY4IEpJVCBidWcgaW4gQ2hyb21lIDE5LTIwLlxuICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG4iLCJ2YXIgYmFzZUZvckluID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZUZvckluJyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuL2lzQXJndW1lbnRzJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIHRoYXQgaXMsIGFuIG9iamVjdCBjcmVhdGVkIGJ5IHRoZVxuICogYE9iamVjdGAgY29uc3RydWN0b3Igb3Igb25lIHdpdGggYSBgW1tQcm90b3R5cGVdXWAgb2YgYG51bGxgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBhc3N1bWVzIG9iamVjdHMgY3JlYXRlZCBieSB0aGUgYE9iamVjdGAgY29uc3RydWN0b3JcbiAqIGhhdmUgbm8gaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwbGFpbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogfVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChuZXcgRm9vKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc1BsYWluT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdCh7ICd4JzogMCwgJ3knOiAwIH0pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWx1ZSkge1xuICB2YXIgQ3RvcjtcblxuICAvLyBFeGl0IGVhcmx5IGZvciBub24gYE9iamVjdGAgb2JqZWN0cy5cbiAgaWYgKCEoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBvYmplY3RUYWcgJiYgIWlzQXJndW1lbnRzKHZhbHVlKSkgfHxcbiAgICAgICghaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NvbnN0cnVjdG9yJykgJiYgKEN0b3IgPSB2YWx1ZS5jb25zdHJ1Y3RvciwgdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiAhKEN0b3IgaW5zdGFuY2VvZiBDdG9yKSkpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIElFIDwgOSBpdGVyYXRlcyBpbmhlcml0ZWQgcHJvcGVydGllcyBiZWZvcmUgb3duIHByb3BlcnRpZXMuIElmIHRoZSBmaXJzdFxuICAvLyBpdGVyYXRlZCBwcm9wZXJ0eSBpcyBhbiBvYmplY3QncyBvd24gcHJvcGVydHkgdGhlbiB0aGVyZSBhcmUgbm8gaW5oZXJpdGVkXG4gIC8vIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgdmFyIHJlc3VsdDtcbiAgLy8gSW4gbW9zdCBlbnZpcm9ubWVudHMgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMgYXJlIGl0ZXJhdGVkIGJlZm9yZVxuICAvLyBpdHMgaW5oZXJpdGVkIHByb3BlcnRpZXMuIElmIHRoZSBsYXN0IGl0ZXJhdGVkIHByb3BlcnR5IGlzIGFuIG9iamVjdCdzXG4gIC8vIG93biBwcm9wZXJ0eSB0aGVuIHRoZXJlIGFyZSBubyBpbmhlcml0ZWQgZW51bWVyYWJsZSBwcm9wZXJ0aWVzLlxuICBiYXNlRm9ySW4odmFsdWUsIGZ1bmN0aW9uKHN1YlZhbHVlLCBrZXkpIHtcbiAgICByZXN1bHQgPSBrZXk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgcmVzdWx0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1BsYWluT2JqZWN0O1xuIiwidmFyIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNMZW5ndGgnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4vKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cbnR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID1cbnR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID1cbnR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1R5cGVkQXJyYXk7XG4iLCJ2YXIgYmFzZUNvcHkgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlQ29weScpLFxuICAgIGtleXNJbiA9IHJlcXVpcmUoJy4uL29iamVjdC9rZXlzSW4nKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgcGxhaW4gb2JqZWN0IGZsYXR0ZW5pbmcgaW5oZXJpdGVkIGVudW1lcmFibGVcbiAqIHByb3BlcnRpZXMgb2YgYHZhbHVlYCB0byBvd24gcHJvcGVydGllcyBvZiB0aGUgcGxhaW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBwbGFpbiBvYmplY3QuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8uYXNzaWduKHsgJ2EnOiAxIH0sIG5ldyBGb28pO1xuICogLy8gPT4geyAnYSc6IDEsICdiJzogMiB9XG4gKlxuICogXy5hc3NpZ24oeyAnYSc6IDEgfSwgXy50b1BsYWluT2JqZWN0KG5ldyBGb28pKTtcbiAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIsICdjJzogMyB9XG4gKi9cbmZ1bmN0aW9uIHRvUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGJhc2VDb3B5KHZhbHVlLCBrZXlzSW4odmFsdWUpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b1BsYWluT2JqZWN0O1xuIiwidmFyIGFzc2lnbldpdGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9hc3NpZ25XaXRoJyksXG4gICAgYmFzZUFzc2lnbiA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VBc3NpZ24nKSxcbiAgICBjcmVhdGVBc3NpZ25lciA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NyZWF0ZUFzc2lnbmVyJyk7XG5cbi8qKlxuICogQXNzaWducyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHNvdXJjZSBvYmplY3QocykgdG8gdGhlIGRlc3RpbmF0aW9uXG4gKiBvYmplY3QuIFN1YnNlcXVlbnQgc291cmNlcyBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy5cbiAqIElmIGBjdXN0b21pemVyYCBpcyBwcm92aWRlZCBpdCdzIGludm9rZWQgdG8gcHJvZHVjZSB0aGUgYXNzaWduZWQgdmFsdWVzLlxuICogVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWQgd2l0aCBmaXZlIGFyZ3VtZW50czpcbiAqIChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBtdXRhdGVzIGBvYmplY3RgIGFuZCBpcyBiYXNlZCBvblxuICogW2BPYmplY3QuYXNzaWduYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LmFzc2lnbikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBhbGlhcyBleHRlbmRcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSBbc291cmNlc10gVGhlIHNvdXJjZSBvYmplY3RzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uYXNzaWduKHsgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICdhZ2UnOiA0MCB9LCB7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICogLy8gPT4geyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1cbiAqXG4gKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAqIHZhciBkZWZhdWx0cyA9IF8ucGFydGlhbFJpZ2h0KF8uYXNzaWduLCBmdW5jdGlvbih2YWx1ZSwgb3RoZXIpIHtcbiAqICAgcmV0dXJuIF8uaXNVbmRlZmluZWQodmFsdWUpID8gb3RoZXIgOiB2YWx1ZTtcbiAqIH0pO1xuICpcbiAqIGRlZmF1bHRzKHsgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICdhZ2UnOiAzNiB9LCB7ICd1c2VyJzogJ2ZyZWQnIH0pO1xuICogLy8gPT4geyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfVxuICovXG52YXIgYXNzaWduID0gY3JlYXRlQXNzaWduZXIoZnVuY3Rpb24ob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpIHtcbiAgcmV0dXJuIGN1c3RvbWl6ZXJcbiAgICA/IGFzc2lnbldpdGgob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIpXG4gICAgOiBiYXNlQXNzaWduKG9iamVjdCwgc291cmNlKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc2lnbjtcbiIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9nZXROYXRpdmUnKSxcbiAgICBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzQXJyYXlMaWtlJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0JyksXG4gICAgc2hpbUtleXMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9zaGltS2V5cycpO1xuXG4vKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUtleXMgPSBnZXROYXRpdmUoT2JqZWN0LCAna2V5cycpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LmtleXMpXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXMobmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogXy5rZXlzKCdoaScpO1xuICogLy8gPT4gWycwJywgJzEnXVxuICovXG52YXIga2V5cyA9ICFuYXRpdmVLZXlzID8gc2hpbUtleXMgOiBmdW5jdGlvbihvYmplY3QpIHtcbiAgdmFyIEN0b3IgPSBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdC5jb25zdHJ1Y3RvcjtcbiAgaWYgKCh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlID09PSBvYmplY3QpIHx8XG4gICAgICAodHlwZW9mIG9iamVjdCAhPSAnZnVuY3Rpb24nICYmIGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG4gICAgcmV0dXJuIHNoaW1LZXlzKG9iamVjdCk7XG4gIH1cbiAgcmV0dXJuIGlzT2JqZWN0KG9iamVjdCkgPyBuYXRpdmVLZXlzKG9iamVjdCkgOiBbXTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5cztcbiIsInZhciBpc0FyZ3VtZW50cyA9IHJlcXVpcmUoJy4uL2xhbmcvaXNBcmd1bWVudHMnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc0FycmF5JyksXG4gICAgaXNJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzSW5kZXgnKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzTGVuZ3RoJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuLi9sYW5nL2lzT2JqZWN0Jyk7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5c0luKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InLCAnYyddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKi9cbmZ1bmN0aW9uIGtleXNJbihvYmplY3QpIHtcbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICB9XG4gIHZhciBsZW5ndGggPSBvYmplY3QubGVuZ3RoO1xuICBsZW5ndGggPSAobGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiZcbiAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpICYmIGxlbmd0aCkgfHwgMDtcblxuICB2YXIgQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgIGluZGV4ID0gLTEsXG4gICAgICBpc1Byb3RvID0gdHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSA9PT0gb2JqZWN0LFxuICAgICAgcmVzdWx0ID0gQXJyYXkobGVuZ3RoKSxcbiAgICAgIHNraXBJbmRleGVzID0gbGVuZ3RoID4gMDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHJlc3VsdFtpbmRleF0gPSAoaW5kZXggKyAnJyk7XG4gIH1cbiAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgIGlmICghKHNraXBJbmRleGVzICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpKSAmJlxuICAgICAgICAhKGtleSA9PSAnY29uc3RydWN0b3InICYmIChpc1Byb3RvIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGtleXNJbjtcbiIsInZhciBiYXNlTWVyZ2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlTWVyZ2UnKSxcbiAgICBjcmVhdGVBc3NpZ25lciA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NyZWF0ZUFzc2lnbmVyJyk7XG5cbi8qKlxuICogUmVjdXJzaXZlbHkgbWVyZ2VzIG93biBlbnVtZXJhYmxlIHByb3BlcnRpZXMgb2YgdGhlIHNvdXJjZSBvYmplY3QocyksIHRoYXRcbiAqIGRvbid0IHJlc29sdmUgdG8gYHVuZGVmaW5lZGAgaW50byB0aGUgZGVzdGluYXRpb24gb2JqZWN0LiBTdWJzZXF1ZW50IHNvdXJjZXNcbiAqIG92ZXJ3cml0ZSBwcm9wZXJ0eSBhc3NpZ25tZW50cyBvZiBwcmV2aW91cyBzb3VyY2VzLiBJZiBgY3VzdG9taXplcmAgaXNcbiAqIHByb3ZpZGVkIGl0J3MgaW52b2tlZCB0byBwcm9kdWNlIHRoZSBtZXJnZWQgdmFsdWVzIG9mIHRoZSBkZXN0aW5hdGlvbiBhbmRcbiAqIHNvdXJjZSBwcm9wZXJ0aWVzLiBJZiBgY3VzdG9taXplcmAgcmV0dXJucyBgdW5kZWZpbmVkYCBtZXJnaW5nIGlzIGhhbmRsZWRcbiAqIGJ5IHRoZSBtZXRob2QgaW5zdGVhZC4gVGhlIGBjdXN0b21pemVyYCBpcyBib3VuZCB0byBgdGhpc0FyZ2AgYW5kIGludm9rZWRcbiAqIHdpdGggZml2ZSBhcmd1bWVudHM6IChvYmplY3RWYWx1ZSwgc291cmNlVmFsdWUsIGtleSwgb2JqZWN0LCBzb3VyY2UpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgdXNlcnMgPSB7XG4gKiAgICdkYXRhJzogW3sgJ3VzZXInOiAnYmFybmV5JyB9LCB7ICd1c2VyJzogJ2ZyZWQnIH1dXG4gKiB9O1xuICpcbiAqIHZhciBhZ2VzID0ge1xuICogICAnZGF0YSc6IFt7ICdhZ2UnOiAzNiB9LCB7ICdhZ2UnOiA0MCB9XVxuICogfTtcbiAqXG4gKiBfLm1lcmdlKHVzZXJzLCBhZ2VzKTtcbiAqIC8vID0+IHsgJ2RhdGEnOiBbeyAndXNlcic6ICdiYXJuZXknLCAnYWdlJzogMzYgfSwgeyAndXNlcic6ICdmcmVkJywgJ2FnZSc6IDQwIH1dIH1cbiAqXG4gKiAvLyB1c2luZyBhIGN1c3RvbWl6ZXIgY2FsbGJhY2tcbiAqIHZhciBvYmplY3QgPSB7XG4gKiAgICdmcnVpdHMnOiBbJ2FwcGxlJ10sXG4gKiAgICd2ZWdldGFibGVzJzogWydiZWV0J11cbiAqIH07XG4gKlxuICogdmFyIG90aGVyID0ge1xuICogICAnZnJ1aXRzJzogWydiYW5hbmEnXSxcbiAqICAgJ3ZlZ2V0YWJsZXMnOiBbJ2NhcnJvdCddXG4gKiB9O1xuICpcbiAqIF8ubWVyZ2Uob2JqZWN0LCBvdGhlciwgZnVuY3Rpb24oYSwgYikge1xuICogICBpZiAoXy5pc0FycmF5KGEpKSB7XG4gKiAgICAgcmV0dXJuIGEuY29uY2F0KGIpO1xuICogICB9XG4gKiB9KTtcbiAqIC8vID0+IHsgJ2ZydWl0cyc6IFsnYXBwbGUnLCAnYmFuYW5hJ10sICd2ZWdldGFibGVzJzogWydiZWV0JywgJ2NhcnJvdCddIH1cbiAqL1xudmFyIG1lcmdlID0gY3JlYXRlQXNzaWduZXIoYmFzZU1lcmdlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBtZXJnZTtcbiIsInZhciBiYXNlVG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlVG9TdHJpbmcnKSxcbiAgICBlc2NhcGVIdG1sQ2hhciA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2VzY2FwZUh0bWxDaGFyJyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIEhUTUwgZW50aXRpZXMgYW5kIEhUTUwgY2hhcmFjdGVycy4gKi9cbnZhciByZVVuZXNjYXBlZEh0bWwgPSAvWyY8PlwiJ2BdL2csXG4gICAgcmVIYXNVbmVzY2FwZWRIdG1sID0gUmVnRXhwKHJlVW5lc2NhcGVkSHRtbC5zb3VyY2UpO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBjaGFyYWN0ZXJzIFwiJlwiLCBcIjxcIiwgXCI+XCIsICdcIicsIFwiJ1wiLCBhbmQgXCJcXGBcIiwgaW4gYHN0cmluZ2AgdG9cbiAqIHRoZWlyIGNvcnJlc3BvbmRpbmcgSFRNTCBlbnRpdGllcy5cbiAqXG4gKiAqKk5vdGU6KiogTm8gb3RoZXIgY2hhcmFjdGVycyBhcmUgZXNjYXBlZC4gVG8gZXNjYXBlIGFkZGl0aW9uYWwgY2hhcmFjdGVyc1xuICogdXNlIGEgdGhpcmQtcGFydHkgbGlicmFyeSBsaWtlIFtfaGVfXShodHRwczovL210aHMuYmUvaGUpLlxuICpcbiAqIFRob3VnaCB0aGUgXCI+XCIgY2hhcmFjdGVyIGlzIGVzY2FwZWQgZm9yIHN5bW1ldHJ5LCBjaGFyYWN0ZXJzIGxpa2VcbiAqIFwiPlwiIGFuZCBcIi9cIiBkb24ndCBuZWVkIGVzY2FwaW5nIGluIEhUTUwgYW5kIGhhdmUgbm8gc3BlY2lhbCBtZWFuaW5nXG4gKiB1bmxlc3MgdGhleSdyZSBwYXJ0IG9mIGEgdGFnIG9yIHVucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS5cbiAqIFNlZSBbTWF0aGlhcyBCeW5lbnMncyBhcnRpY2xlXShodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvYW1iaWd1b3VzLWFtcGVyc2FuZHMpXG4gKiAodW5kZXIgXCJzZW1pLXJlbGF0ZWQgZnVuIGZhY3RcIikgZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBCYWNrdGlja3MgYXJlIGVzY2FwZWQgYmVjYXVzZSBpbiBJbnRlcm5ldCBFeHBsb3JlciA8IDksIHRoZXkgY2FuIGJyZWFrIG91dFxuICogb2YgYXR0cmlidXRlIHZhbHVlcyBvciBIVE1MIGNvbW1lbnRzLiBTZWUgWyM1OV0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzU5KSxcbiAqIFsjMTAyXShodHRwczovL2h0bWw1c2VjLm9yZy8jMTAyKSwgWyMxMDhdKGh0dHBzOi8vaHRtbDVzZWMub3JnLyMxMDgpLCBhbmRcbiAqIFsjMTMzXShodHRwczovL2h0bWw1c2VjLm9yZy8jMTMzKSBvZiB0aGUgW0hUTUw1IFNlY3VyaXR5IENoZWF0c2hlZXRdKGh0dHBzOi8vaHRtbDVzZWMub3JnLylcbiAqIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogV2hlbiB3b3JraW5nIHdpdGggSFRNTCB5b3Ugc2hvdWxkIGFsd2F5cyBbcXVvdGUgYXR0cmlidXRlIHZhbHVlc10oaHR0cDovL3dvbmtvLmNvbS9wb3N0L2h0bWwtZXNjYXBpbmcpXG4gKiB0byByZWR1Y2UgWFNTIHZlY3RvcnMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBTdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgc3RyaW5nIHRvIGVzY2FwZS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGVzY2FwZWQgc3RyaW5nLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmVzY2FwZSgnZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnKTtcbiAqIC8vID0+ICdmcmVkLCBiYXJuZXksICZhbXA7IHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZShzdHJpbmcpIHtcbiAgLy8gUmVzZXQgYGxhc3RJbmRleGAgYmVjYXVzZSBpbiBJRSA8IDkgYFN0cmluZyNyZXBsYWNlYCBkb2VzIG5vdC5cbiAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gIHJldHVybiAoc3RyaW5nICYmIHJlSGFzVW5lc2NhcGVkSHRtbC50ZXN0KHN0cmluZykpXG4gICAgPyBzdHJpbmcucmVwbGFjZShyZVVuZXNjYXBlZEh0bWwsIGVzY2FwZUh0bWxDaGFyKVxuICAgIDogc3RyaW5nO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZTtcbiIsInZhciBhc3NpZ25Pd25EZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Fzc2lnbk93bkRlZmF1bHRzJyksXG4gICAgYXNzaWduV2l0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Fzc2lnbldpdGgnKSxcbiAgICBhdHRlbXB0ID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9hdHRlbXB0JyksXG4gICAgYmFzZUFzc2lnbiA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VBc3NpZ24nKSxcbiAgICBiYXNlVG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlVG9TdHJpbmcnKSxcbiAgICBiYXNlVmFsdWVzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZVZhbHVlcycpLFxuICAgIGVzY2FwZVN0cmluZ0NoYXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9lc2NhcGVTdHJpbmdDaGFyJyksXG4gICAgaXNFcnJvciA9IHJlcXVpcmUoJy4uL2xhbmcvaXNFcnJvcicpLFxuICAgIGlzSXRlcmF0ZWVDYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNJdGVyYXRlZUNhbGwnKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKSxcbiAgICByZUludGVycG9sYXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcmVJbnRlcnBvbGF0ZScpLFxuICAgIHRlbXBsYXRlU2V0dGluZ3MgPSByZXF1aXJlKCcuL3RlbXBsYXRlU2V0dGluZ3MnKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggZW1wdHkgc3RyaW5nIGxpdGVyYWxzIGluIGNvbXBpbGVkIHRlbXBsYXRlIHNvdXJjZS4gKi9cbnZhciByZUVtcHR5U3RyaW5nTGVhZGluZyA9IC9cXGJfX3AgXFwrPSAnJzsvZyxcbiAgICByZUVtcHR5U3RyaW5nTWlkZGxlID0gL1xcYihfX3AgXFwrPSkgJycgXFwrL2csXG4gICAgcmVFbXB0eVN0cmluZ1RyYWlsaW5nID0gLyhfX2VcXCguKj9cXCl8XFxiX190XFwpKSBcXCtcXG4nJzsvZztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggW0VTIHRlbXBsYXRlIGRlbGltaXRlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRlbXBsYXRlLWxpdGVyYWwtbGV4aWNhbC1jb21wb25lbnRzKS4gKi9cbnZhciByZUVzVGVtcGxhdGUgPSAvXFwkXFx7KFteXFxcXH1dKig/OlxcXFwuW15cXFxcfV0qKSopXFx9L2c7XG5cbi8qKiBVc2VkIHRvIGVuc3VyZSBjYXB0dXJpbmcgb3JkZXIgb2YgdGVtcGxhdGUgZGVsaW1pdGVycy4gKi9cbnZhciByZU5vTWF0Y2ggPSAvKCReKS87XG5cbi8qKiBVc2VkIHRvIG1hdGNoIHVuZXNjYXBlZCBjaGFyYWN0ZXJzIGluIGNvbXBpbGVkIHN0cmluZyBsaXRlcmFscy4gKi9cbnZhciByZVVuZXNjYXBlZFN0cmluZyA9IC9bJ1xcblxcclxcdTIwMjhcXHUyMDI5XFxcXF0vZztcblxuLyoqXG4gKiBDcmVhdGVzIGEgY29tcGlsZWQgdGVtcGxhdGUgZnVuY3Rpb24gdGhhdCBjYW4gaW50ZXJwb2xhdGUgZGF0YSBwcm9wZXJ0aWVzXG4gKiBpbiBcImludGVycG9sYXRlXCIgZGVsaW1pdGVycywgSFRNTC1lc2NhcGUgaW50ZXJwb2xhdGVkIGRhdGEgcHJvcGVydGllcyBpblxuICogXCJlc2NhcGVcIiBkZWxpbWl0ZXJzLCBhbmQgZXhlY3V0ZSBKYXZhU2NyaXB0IGluIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXJzLiBEYXRhXG4gKiBwcm9wZXJ0aWVzIG1heSBiZSBhY2Nlc3NlZCBhcyBmcmVlIHZhcmlhYmxlcyBpbiB0aGUgdGVtcGxhdGUuIElmIGEgc2V0dGluZ1xuICogb2JqZWN0IGlzIHByb3ZpZGVkIGl0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgXy50ZW1wbGF0ZVNldHRpbmdzYCB2YWx1ZXMuXG4gKlxuICogKipOb3RlOioqIEluIHRoZSBkZXZlbG9wbWVudCBidWlsZCBgXy50ZW1wbGF0ZWAgdXRpbGl6ZXNcbiAqIFtzb3VyY2VVUkxzXShodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy9kZXZlbG9wZXJ0b29scy9zb3VyY2VtYXBzLyN0b2Mtc291cmNldXJsKVxuICogZm9yIGVhc2llciBkZWJ1Z2dpbmcuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gcHJlY29tcGlsaW5nIHRlbXBsYXRlcyBzZWVcbiAqIFtsb2Rhc2gncyBjdXN0b20gYnVpbGRzIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vbG9kYXNoLmNvbS9jdXN0b20tYnVpbGRzKS5cbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBDaHJvbWUgZXh0ZW5zaW9uIHNhbmRib3hlcyBzZWVcbiAqIFtDaHJvbWUncyBleHRlbnNpb25zIGRvY3VtZW50YXRpb25dKGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZXh0ZW5zaW9ucy9zYW5kYm94aW5nRXZhbCkuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBTdHJpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3RyaW5nPScnXSBUaGUgdGVtcGxhdGUgc3RyaW5nLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXNjYXBlXSBUaGUgSFRNTCBcImVzY2FwZVwiIGRlbGltaXRlci5cbiAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5ldmFsdWF0ZV0gVGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnMuaW1wb3J0c10gQW4gb2JqZWN0IHRvIGltcG9ydCBpbnRvIHRoZSB0ZW1wbGF0ZSBhcyBmcmVlIHZhcmlhYmxlcy5cbiAqIEBwYXJhbSB7UmVnRXhwfSBbb3B0aW9ucy5pbnRlcnBvbGF0ZV0gVGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMuc291cmNlVVJMXSBUaGUgc291cmNlVVJMIG9mIHRoZSB0ZW1wbGF0ZSdzIGNvbXBpbGVkIHNvdXJjZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy52YXJpYWJsZV0gVGhlIGRhdGEgb2JqZWN0IHZhcmlhYmxlIG5hbWUuXG4gKiBAcGFyYW0tIHtPYmplY3R9IFtvdGhlck9wdGlvbnNdIEVuYWJsZXMgdGhlIGxlZ2FjeSBgb3B0aW9uc2AgcGFyYW0gc2lnbmF0dXJlLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBjb21waWxlZCB0ZW1wbGF0ZSBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gdXNpbmcgdGhlIFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXIgdG8gY3JlYXRlIGEgY29tcGlsZWQgdGVtcGxhdGVcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSB1c2VyICU+IScpO1xuICogY29tcGlsZWQoeyAndXNlcic6ICdmcmVkJyB9KTtcbiAqIC8vID0+ICdoZWxsbyBmcmVkISdcbiAqXG4gKiAvLyB1c2luZyB0aGUgSFRNTCBcImVzY2FwZVwiIGRlbGltaXRlciB0byBlc2NhcGUgZGF0YSBwcm9wZXJ0eSB2YWx1ZXNcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJzxiPjwlLSB2YWx1ZSAlPjwvYj4nKTtcbiAqIGNvbXBpbGVkKHsgJ3ZhbHVlJzogJzxzY3JpcHQ+JyB9KTtcbiAqIC8vID0+ICc8Yj4mbHQ7c2NyaXB0Jmd0OzwvYj4nXG4gKlxuICogLy8gdXNpbmcgdGhlIFwiZXZhbHVhdGVcIiBkZWxpbWl0ZXIgdG8gZXhlY3V0ZSBKYXZhU2NyaXB0IGFuZCBnZW5lcmF0ZSBIVE1MXG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JSBfLmZvckVhY2godXNlcnMsIGZ1bmN0aW9uKHVzZXIpIHsgJT48bGk+PCUtIHVzZXIgJT48L2xpPjwlIH0pOyAlPicpO1xuICogY29tcGlsZWQoeyAndXNlcnMnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XG4gKiAvLyA9PiAnPGxpPmZyZWQ8L2xpPjxsaT5iYXJuZXk8L2xpPidcbiAqXG4gKiAvLyB1c2luZyB0aGUgaW50ZXJuYWwgYHByaW50YCBmdW5jdGlvbiBpbiBcImV2YWx1YXRlXCIgZGVsaW1pdGVyc1xuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPCUgcHJpbnQoXCJoZWxsbyBcIiArIHVzZXIpOyAlPiEnKTtcbiAqIGNvbXBpbGVkKHsgJ3VzZXInOiAnYmFybmV5JyB9KTtcbiAqIC8vID0+ICdoZWxsbyBiYXJuZXkhJ1xuICpcbiAqIC8vIHVzaW5nIHRoZSBFUyBkZWxpbWl0ZXIgYXMgYW4gYWx0ZXJuYXRpdmUgdG8gdGhlIGRlZmF1bHQgXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlclxuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGVsbG8gJHsgdXNlciB9IScpO1xuICogY29tcGlsZWQoeyAndXNlcic6ICdwZWJibGVzJyB9KTtcbiAqIC8vID0+ICdoZWxsbyBwZWJibGVzISdcbiAqXG4gKiAvLyB1c2luZyBjdXN0b20gdGVtcGxhdGUgZGVsaW1pdGVyc1xuICogXy50ZW1wbGF0ZVNldHRpbmdzLmludGVycG9sYXRlID0gL3t7KFtcXHNcXFNdKz8pfX0vZztcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIHt7IHVzZXIgfX0hJyk7XG4gKiBjb21waWxlZCh7ICd1c2VyJzogJ211c3RhY2hlJyB9KTtcbiAqIC8vID0+ICdoZWxsbyBtdXN0YWNoZSEnXG4gKlxuICogLy8gdXNpbmcgYmFja3NsYXNoZXMgdG8gdHJlYXQgZGVsaW1pdGVycyBhcyBwbGFpbiB0ZXh0XG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8JT0gXCJcXFxcPCUtIHZhbHVlICVcXFxcPlwiICU+Jyk7XG4gKiBjb21waWxlZCh7ICd2YWx1ZSc6ICdpZ25vcmVkJyB9KTtcbiAqIC8vID0+ICc8JS0gdmFsdWUgJT4nXG4gKlxuICogLy8gdXNpbmcgdGhlIGBpbXBvcnRzYCBvcHRpb24gdG8gaW1wb3J0IGBqUXVlcnlgIGFzIGBqcWBcbiAqIHZhciB0ZXh0ID0gJzwlIGpxLmVhY2godXNlcnMsIGZ1bmN0aW9uKHVzZXIpIHsgJT48bGk+PCUtIHVzZXIgJT48L2xpPjwlIH0pOyAlPic7XG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKHRleHQsIHsgJ2ltcG9ydHMnOiB7ICdqcSc6IGpRdWVyeSB9IH0pO1xuICogY29tcGlsZWQoeyAndXNlcnMnOiBbJ2ZyZWQnLCAnYmFybmV5J10gfSk7XG4gKiAvLyA9PiAnPGxpPmZyZWQ8L2xpPjxsaT5iYXJuZXk8L2xpPidcbiAqXG4gKiAvLyB1c2luZyB0aGUgYHNvdXJjZVVSTGAgb3B0aW9uIHRvIHNwZWNpZnkgYSBjdXN0b20gc291cmNlVVJMIGZvciB0aGUgdGVtcGxhdGVcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvIDwlPSB1c2VyICU+IScsIHsgJ3NvdXJjZVVSTCc6ICcvYmFzaWMvZ3JlZXRpbmcuanN0JyB9KTtcbiAqIGNvbXBpbGVkKGRhdGEpO1xuICogLy8gPT4gZmluZCB0aGUgc291cmNlIG9mIFwiZ3JlZXRpbmcuanN0XCIgdW5kZXIgdGhlIFNvdXJjZXMgdGFiIG9yIFJlc291cmNlcyBwYW5lbCBvZiB0aGUgd2ViIGluc3BlY3RvclxuICpcbiAqIC8vIHVzaW5nIHRoZSBgdmFyaWFibGVgIG9wdGlvbiB0byBlbnN1cmUgYSB3aXRoLXN0YXRlbWVudCBpc24ndCB1c2VkIGluIHRoZSBjb21waWxlZCB0ZW1wbGF0ZVxuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnaGkgPCU9IGRhdGEudXNlciAlPiEnLCB7ICd2YXJpYWJsZSc6ICdkYXRhJyB9KTtcbiAqIGNvbXBpbGVkLnNvdXJjZTtcbiAqIC8vID0+IGZ1bmN0aW9uKGRhdGEpIHtcbiAqIC8vICAgdmFyIF9fdCwgX19wID0gJyc7XG4gKiAvLyAgIF9fcCArPSAnaGkgJyArICgoX190ID0gKCBkYXRhLnVzZXIgKSkgPT0gbnVsbCA/ICcnIDogX190KSArICchJztcbiAqIC8vICAgcmV0dXJuIF9fcDtcbiAqIC8vIH1cbiAqXG4gKiAvLyB1c2luZyB0aGUgYHNvdXJjZWAgcHJvcGVydHkgdG8gaW5saW5lIGNvbXBpbGVkIHRlbXBsYXRlcyBmb3IgbWVhbmluZ2Z1bFxuICogLy8gbGluZSBudW1iZXJzIGluIGVycm9yIG1lc3NhZ2VzIGFuZCBhIHN0YWNrIHRyYWNlXG4gKiBmcy53cml0ZUZpbGVTeW5jKHBhdGguam9pbihjd2QsICdqc3QuanMnKSwgJ1xcXG4gKiAgIHZhciBKU1QgPSB7XFxcbiAqICAgICBcIm1haW5cIjogJyArIF8udGVtcGxhdGUobWFpblRleHQpLnNvdXJjZSArICdcXFxuICogICB9O1xcXG4gKiAnKTtcbiAqL1xuZnVuY3Rpb24gdGVtcGxhdGUoc3RyaW5nLCBvcHRpb25zLCBvdGhlck9wdGlvbnMpIHtcbiAgLy8gQmFzZWQgb24gSm9obiBSZXNpZydzIGB0bXBsYCBpbXBsZW1lbnRhdGlvbiAoaHR0cDovL2Vqb2huLm9yZy9ibG9nL2phdmFzY3JpcHQtbWljcm8tdGVtcGxhdGluZy8pXG4gIC8vIGFuZCBMYXVyYSBEb2t0b3JvdmEncyBkb1QuanMgKGh0dHBzOi8vZ2l0aHViLmNvbS9vbGFkby9kb1QpLlxuICB2YXIgc2V0dGluZ3MgPSB0ZW1wbGF0ZVNldHRpbmdzLmltcG9ydHMuXy50ZW1wbGF0ZVNldHRpbmdzIHx8IHRlbXBsYXRlU2V0dGluZ3M7XG5cbiAgaWYgKG90aGVyT3B0aW9ucyAmJiBpc0l0ZXJhdGVlQ2FsbChzdHJpbmcsIG9wdGlvbnMsIG90aGVyT3B0aW9ucykpIHtcbiAgICBvcHRpb25zID0gb3RoZXJPcHRpb25zID0gdW5kZWZpbmVkO1xuICB9XG4gIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICBvcHRpb25zID0gYXNzaWduV2l0aChiYXNlQXNzaWduKHt9LCBvdGhlck9wdGlvbnMgfHwgb3B0aW9ucyksIHNldHRpbmdzLCBhc3NpZ25Pd25EZWZhdWx0cyk7XG5cbiAgdmFyIGltcG9ydHMgPSBhc3NpZ25XaXRoKGJhc2VBc3NpZ24oe30sIG9wdGlvbnMuaW1wb3J0cyksIHNldHRpbmdzLmltcG9ydHMsIGFzc2lnbk93bkRlZmF1bHRzKSxcbiAgICAgIGltcG9ydHNLZXlzID0ga2V5cyhpbXBvcnRzKSxcbiAgICAgIGltcG9ydHNWYWx1ZXMgPSBiYXNlVmFsdWVzKGltcG9ydHMsIGltcG9ydHNLZXlzKTtcblxuICB2YXIgaXNFc2NhcGluZyxcbiAgICAgIGlzRXZhbHVhdGluZyxcbiAgICAgIGluZGV4ID0gMCxcbiAgICAgIGludGVycG9sYXRlID0gb3B0aW9ucy5pbnRlcnBvbGF0ZSB8fCByZU5vTWF0Y2gsXG4gICAgICBzb3VyY2UgPSBcIl9fcCArPSAnXCI7XG5cbiAgLy8gQ29tcGlsZSB0aGUgcmVnZXhwIHRvIG1hdGNoIGVhY2ggZGVsaW1pdGVyLlxuICB2YXIgcmVEZWxpbWl0ZXJzID0gUmVnRXhwKFxuICAgIChvcHRpb25zLmVzY2FwZSB8fCByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgaW50ZXJwb2xhdGUuc291cmNlICsgJ3wnICtcbiAgICAoaW50ZXJwb2xhdGUgPT09IHJlSW50ZXJwb2xhdGUgPyByZUVzVGVtcGxhdGUgOiByZU5vTWF0Y2gpLnNvdXJjZSArICd8JyArXG4gICAgKG9wdGlvbnMuZXZhbHVhdGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCQnXG4gICwgJ2cnKTtcblxuICAvLyBVc2UgYSBzb3VyY2VVUkwgZm9yIGVhc2llciBkZWJ1Z2dpbmcuXG4gIHZhciBzb3VyY2VVUkwgPSAnc291cmNlVVJMJyBpbiBvcHRpb25zID8gJy8vIyBzb3VyY2VVUkw9JyArIG9wdGlvbnMuc291cmNlVVJMICsgJ1xcbicgOiAnJztcblxuICBzdHJpbmcucmVwbGFjZShyZURlbGltaXRlcnMsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGVWYWx1ZSwgaW50ZXJwb2xhdGVWYWx1ZSwgZXNUZW1wbGF0ZVZhbHVlLCBldmFsdWF0ZVZhbHVlLCBvZmZzZXQpIHtcbiAgICBpbnRlcnBvbGF0ZVZhbHVlIHx8IChpbnRlcnBvbGF0ZVZhbHVlID0gZXNUZW1wbGF0ZVZhbHVlKTtcblxuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIHRoYXQgY2FuJ3QgYmUgaW5jbHVkZWQgaW4gc3RyaW5nIGxpdGVyYWxzLlxuICAgIHNvdXJjZSArPSBzdHJpbmcuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShyZVVuZXNjYXBlZFN0cmluZywgZXNjYXBlU3RyaW5nQ2hhcik7XG5cbiAgICAvLyBSZXBsYWNlIGRlbGltaXRlcnMgd2l0aCBzbmlwcGV0cy5cbiAgICBpZiAoZXNjYXBlVmFsdWUpIHtcbiAgICAgIGlzRXNjYXBpbmcgPSB0cnVlO1xuICAgICAgc291cmNlICs9IFwiJyArXFxuX19lKFwiICsgZXNjYXBlVmFsdWUgKyBcIikgK1xcbidcIjtcbiAgICB9XG4gICAgaWYgKGV2YWx1YXRlVmFsdWUpIHtcbiAgICAgIGlzRXZhbHVhdGluZyA9IHRydWU7XG4gICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGVWYWx1ZSArIFwiO1xcbl9fcCArPSAnXCI7XG4gICAgfVxuICAgIGlmIChpbnRlcnBvbGF0ZVZhbHVlKSB7XG4gICAgICBzb3VyY2UgKz0gXCInICtcXG4oKF9fdCA9IChcIiArIGludGVycG9sYXRlVmFsdWUgKyBcIikpID09IG51bGwgPyAnJyA6IF9fdCkgK1xcbidcIjtcbiAgICB9XG4gICAgaW5kZXggPSBvZmZzZXQgKyBtYXRjaC5sZW5ndGg7XG5cbiAgICAvLyBUaGUgSlMgZW5naW5lIGVtYmVkZGVkIGluIEFkb2JlIHByb2R1Y3RzIHJlcXVpcmVzIHJldHVybmluZyB0aGUgYG1hdGNoYFxuICAgIC8vIHN0cmluZyBpbiBvcmRlciB0byBwcm9kdWNlIHRoZSBjb3JyZWN0IGBvZmZzZXRgIHZhbHVlLlxuICAgIHJldHVybiBtYXRjaDtcbiAgfSk7XG5cbiAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAvLyBJZiBgdmFyaWFibGVgIGlzIG5vdCBzcGVjaWZpZWQgd3JhcCBhIHdpdGgtc3RhdGVtZW50IGFyb3VuZCB0aGUgZ2VuZXJhdGVkXG4gIC8vIGNvZGUgdG8gYWRkIHRoZSBkYXRhIG9iamVjdCB0byB0aGUgdG9wIG9mIHRoZSBzY29wZSBjaGFpbi5cbiAgdmFyIHZhcmlhYmxlID0gb3B0aW9ucy52YXJpYWJsZTtcbiAgaWYgKCF2YXJpYWJsZSkge1xuICAgIHNvdXJjZSA9ICd3aXRoIChvYmopIHtcXG4nICsgc291cmNlICsgJ1xcbn1cXG4nO1xuICB9XG4gIC8vIENsZWFudXAgY29kZSBieSBzdHJpcHBpbmcgZW1wdHkgc3RyaW5ncy5cbiAgc291cmNlID0gKGlzRXZhbHVhdGluZyA/IHNvdXJjZS5yZXBsYWNlKHJlRW1wdHlTdHJpbmdMZWFkaW5nLCAnJykgOiBzb3VyY2UpXG4gICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ01pZGRsZSwgJyQxJylcbiAgICAucmVwbGFjZShyZUVtcHR5U3RyaW5nVHJhaWxpbmcsICckMTsnKTtcblxuICAvLyBGcmFtZSBjb2RlIGFzIHRoZSBmdW5jdGlvbiBib2R5LlxuICBzb3VyY2UgPSAnZnVuY3Rpb24oJyArICh2YXJpYWJsZSB8fCAnb2JqJykgKyAnKSB7XFxuJyArXG4gICAgKHZhcmlhYmxlXG4gICAgICA/ICcnXG4gICAgICA6ICdvYmogfHwgKG9iaiA9IHt9KTtcXG4nXG4gICAgKSArXG4gICAgXCJ2YXIgX190LCBfX3AgPSAnJ1wiICtcbiAgICAoaXNFc2NhcGluZ1xuICAgICAgID8gJywgX19lID0gXy5lc2NhcGUnXG4gICAgICAgOiAnJ1xuICAgICkgK1xuICAgIChpc0V2YWx1YXRpbmdcbiAgICAgID8gJywgX19qID0gQXJyYXkucHJvdG90eXBlLmpvaW47XFxuJyArXG4gICAgICAgIFwiZnVuY3Rpb24gcHJpbnQoKSB7IF9fcCArPSBfX2ouY2FsbChhcmd1bWVudHMsICcnKSB9XFxuXCJcbiAgICAgIDogJztcXG4nXG4gICAgKSArXG4gICAgc291cmNlICtcbiAgICAncmV0dXJuIF9fcFxcbn0nO1xuXG4gIHZhciByZXN1bHQgPSBhdHRlbXB0KGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBGdW5jdGlvbihpbXBvcnRzS2V5cywgc291cmNlVVJMICsgJ3JldHVybiAnICsgc291cmNlKS5hcHBseSh1bmRlZmluZWQsIGltcG9ydHNWYWx1ZXMpO1xuICB9KTtcblxuICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBmdW5jdGlvbidzIHNvdXJjZSBieSBpdHMgYHRvU3RyaW5nYCBtZXRob2Qgb3JcbiAgLy8gdGhlIGBzb3VyY2VgIHByb3BlcnR5IGFzIGEgY29udmVuaWVuY2UgZm9yIGlubGluaW5nIGNvbXBpbGVkIHRlbXBsYXRlcy5cbiAgcmVzdWx0LnNvdXJjZSA9IHNvdXJjZTtcbiAgaWYgKGlzRXJyb3IocmVzdWx0KSkge1xuICAgIHRocm93IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRlbXBsYXRlO1xuIiwidmFyIGVzY2FwZSA9IHJlcXVpcmUoJy4vZXNjYXBlJyksXG4gICAgcmVFc2NhcGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZUVzY2FwZScpLFxuICAgIHJlRXZhbHVhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZUV2YWx1YXRlJyksXG4gICAgcmVJbnRlcnBvbGF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3JlSW50ZXJwb2xhdGUnKTtcblxuLyoqXG4gKiBCeSBkZWZhdWx0LCB0aGUgdGVtcGxhdGUgZGVsaW1pdGVycyB1c2VkIGJ5IGxvZGFzaCBhcmUgbGlrZSB0aG9zZSBpblxuICogZW1iZWRkZWQgUnVieSAoRVJCKS4gQ2hhbmdlIHRoZSBmb2xsb3dpbmcgdGVtcGxhdGUgc2V0dGluZ3MgdG8gdXNlXG4gKiBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAdHlwZSBPYmplY3RcbiAqL1xudmFyIHRlbXBsYXRlU2V0dGluZ3MgPSB7XG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gYmUgSFRNTC1lc2NhcGVkLlxuICAgKlxuICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAqIEB0eXBlIFJlZ0V4cFxuICAgKi9cbiAgJ2VzY2FwZSc6IHJlRXNjYXBlLFxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGRldGVjdCBjb2RlIHRvIGJlIGV2YWx1YXRlZC5cbiAgICpcbiAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgKiBAdHlwZSBSZWdFeHBcbiAgICovXG4gICdldmFsdWF0ZSc6IHJlRXZhbHVhdGUsXG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gZGV0ZWN0IGBkYXRhYCBwcm9wZXJ0eSB2YWx1ZXMgdG8gaW5qZWN0LlxuICAgKlxuICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAqIEB0eXBlIFJlZ0V4cFxuICAgKi9cbiAgJ2ludGVycG9sYXRlJzogcmVJbnRlcnBvbGF0ZSxcblxuICAvKipcbiAgICogVXNlZCB0byByZWZlcmVuY2UgdGhlIGRhdGEgb2JqZWN0IGluIHRoZSB0ZW1wbGF0ZSB0ZXh0LlxuICAgKlxuICAgKiBAbWVtYmVyT2YgXy50ZW1wbGF0ZVNldHRpbmdzXG4gICAqIEB0eXBlIHN0cmluZ1xuICAgKi9cbiAgJ3ZhcmlhYmxlJzogJycsXG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gaW1wb3J0IHZhcmlhYmxlcyBpbnRvIHRoZSBjb21waWxlZCB0ZW1wbGF0ZS5cbiAgICpcbiAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgKiBAdHlwZSBPYmplY3RcbiAgICovXG4gICdpbXBvcnRzJzoge1xuXG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGBsb2Rhc2hgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5ncy5pbXBvcnRzXG4gICAgICogQHR5cGUgRnVuY3Rpb25cbiAgICAgKi9cbiAgICAnXyc6IHsgJ2VzY2FwZSc6IGVzY2FwZSB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gdGVtcGxhdGVTZXR0aW5ncztcbiIsInZhciBiYXNlVG9TdHJpbmcgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlVG9TdHJpbmcnKSxcbiAgICBjaGFyc0xlZnRJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NoYXJzTGVmdEluZGV4JyksXG4gICAgY2hhcnNSaWdodEluZGV4ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvY2hhcnNSaWdodEluZGV4JyksXG4gICAgaXNJdGVyYXRlZUNhbGwgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc0l0ZXJhdGVlQ2FsbCcpLFxuICAgIHRyaW1tZWRMZWZ0SW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC90cmltbWVkTGVmdEluZGV4JyksXG4gICAgdHJpbW1lZFJpZ2h0SW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC90cmltbWVkUmlnaHRJbmRleCcpO1xuXG4vKipcbiAqIFJlbW92ZXMgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBvciBzcGVjaWZpZWQgY2hhcmFjdGVycyBmcm9tIGBzdHJpbmdgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byB0cmltLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjaGFycz13aGl0ZXNwYWNlXSBUaGUgY2hhcmFjdGVycyB0byB0cmltLlxuICogQHBhcmFtLSB7T2JqZWN0fSBbZ3VhcmRdIEVuYWJsZXMgdXNlIGFzIGEgY2FsbGJhY2sgZm9yIGZ1bmN0aW9ucyBsaWtlIGBfLm1hcGAuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSB0cmltbWVkIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50cmltKCcgIGFiYyAgJyk7XG4gKiAvLyA9PiAnYWJjJ1xuICpcbiAqIF8udHJpbSgnLV8tYWJjLV8tJywgJ18tJyk7XG4gKiAvLyA9PiAnYWJjJ1xuICpcbiAqIF8ubWFwKFsnICBmb28gICcsICcgIGJhciAgJ10sIF8udHJpbSk7XG4gKiAvLyA9PiBbJ2ZvbycsICdiYXInXVxuICovXG5mdW5jdGlvbiB0cmltKHN0cmluZywgY2hhcnMsIGd1YXJkKSB7XG4gIHZhciB2YWx1ZSA9IHN0cmluZztcbiAgc3RyaW5nID0gYmFzZVRvU3RyaW5nKHN0cmluZyk7XG4gIGlmICghc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZztcbiAgfVxuICBpZiAoZ3VhcmQgPyBpc0l0ZXJhdGVlQ2FsbCh2YWx1ZSwgY2hhcnMsIGd1YXJkKSA6IGNoYXJzID09IG51bGwpIHtcbiAgICByZXR1cm4gc3RyaW5nLnNsaWNlKHRyaW1tZWRMZWZ0SW5kZXgoc3RyaW5nKSwgdHJpbW1lZFJpZ2h0SW5kZXgoc3RyaW5nKSArIDEpO1xuICB9XG4gIGNoYXJzID0gKGNoYXJzICsgJycpO1xuICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJzTGVmdEluZGV4KHN0cmluZywgY2hhcnMpLCBjaGFyc1JpZ2h0SW5kZXgoc3RyaW5nLCBjaGFycykgKyAxKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmltO1xuIiwidmFyIGlzRXJyb3IgPSByZXF1aXJlKCcuLi9sYW5nL2lzRXJyb3InKSxcbiAgICByZXN0UGFyYW0gPSByZXF1aXJlKCcuLi9mdW5jdGlvbi9yZXN0UGFyYW0nKTtcblxuLyoqXG4gKiBBdHRlbXB0cyB0byBpbnZva2UgYGZ1bmNgLCByZXR1cm5pbmcgZWl0aGVyIHRoZSByZXN1bHQgb3IgdGhlIGNhdWdodCBlcnJvclxuICogb2JqZWN0LiBBbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0J3MgaW52b2tlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFV0aWxpdHlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGF0dGVtcHQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgYGZ1bmNgIHJlc3VsdCBvciBlcnJvciBvYmplY3QuXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIGF2b2lkIHRocm93aW5nIGVycm9ycyBmb3IgaW52YWxpZCBzZWxlY3RvcnNcbiAqIHZhciBlbGVtZW50cyA9IF8uYXR0ZW1wdChmdW5jdGlvbihzZWxlY3Rvcikge1xuICogICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gKiB9LCAnPl8+Jyk7XG4gKlxuICogaWYgKF8uaXNFcnJvcihlbGVtZW50cykpIHtcbiAqICAgZWxlbWVudHMgPSBbXTtcbiAqIH1cbiAqL1xudmFyIGF0dGVtcHQgPSByZXN0UGFyYW0oZnVuY3Rpb24oZnVuYywgYXJncykge1xuICB0cnkge1xuICAgIHJldHVybiBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHJldHVybiBpc0Vycm9yKGUpID8gZSA6IG5ldyBFcnJvcihlKTtcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXR0ZW1wdDtcbiIsIi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgcHJvdmlkZWQgdG8gaXQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3Q7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpZGVudGl0eTtcbiIsIid1c2Ugc3RyaWN0JztcblxuaWYgKCFwcm9jZXNzLnZlcnNpb24gfHxcbiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjAuJykgPT09IDAgfHxcbiAgICBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuJykgPT09IDAgJiYgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YxLjguJykgIT09IDApIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBuZXh0VGljaztcbn0gZWxzZSB7XG4gIG1vZHVsZS5leHBvcnRzID0gcHJvY2Vzcy5uZXh0VGljaztcbn1cblxuZnVuY3Rpb24gbmV4dFRpY2soZm4pIHtcbiAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICB2YXIgaSA9IDA7XG4gIHdoaWxlIChpIDwgYXJncy5sZW5ndGgpIHtcbiAgICBhcmdzW2krK10gPSBhcmd1bWVudHNbaV07XG4gIH1cbiAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7XG4gICAgZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gIH0pO1xufVxuIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvKiEgaHR0cHM6Ly9tdGhzLmJlL3B1bnljb2RlIHYxLjMuMiBieSBAbWF0aGlhcyAqL1xuOyhmdW5jdGlvbihyb290KSB7XG5cblx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlcyAqL1xuXHR2YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmXG5cdFx0IWV4cG9ydHMubm9kZVR5cGUgJiYgZXhwb3J0cztcblx0dmFyIGZyZWVNb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09ICdvYmplY3QnICYmIG1vZHVsZSAmJlxuXHRcdCFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlO1xuXHR2YXIgZnJlZUdsb2JhbCA9IHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsO1xuXHRpZiAoXG5cdFx0ZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLndpbmRvdyA9PT0gZnJlZUdsb2JhbCB8fFxuXHRcdGZyZWVHbG9iYWwuc2VsZiA9PT0gZnJlZUdsb2JhbFxuXHQpIHtcblx0XHRyb290ID0gZnJlZUdsb2JhbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgYHB1bnljb2RlYCBvYmplY3QuXG5cdCAqIEBuYW1lIHB1bnljb2RlXG5cdCAqIEB0eXBlIE9iamVjdFxuXHQgKi9cblx0dmFyIHB1bnljb2RlLFxuXG5cdC8qKiBIaWdoZXN0IHBvc2l0aXZlIHNpZ25lZCAzMi1iaXQgZmxvYXQgdmFsdWUgKi9cblx0bWF4SW50ID0gMjE0NzQ4MzY0NywgLy8gYWthLiAweDdGRkZGRkZGIG9yIDJeMzEtMVxuXG5cdC8qKiBCb290c3RyaW5nIHBhcmFtZXRlcnMgKi9cblx0YmFzZSA9IDM2LFxuXHR0TWluID0gMSxcblx0dE1heCA9IDI2LFxuXHRza2V3ID0gMzgsXG5cdGRhbXAgPSA3MDAsXG5cdGluaXRpYWxCaWFzID0gNzIsXG5cdGluaXRpYWxOID0gMTI4LCAvLyAweDgwXG5cdGRlbGltaXRlciA9ICctJywgLy8gJ1xceDJEJ1xuXG5cdC8qKiBSZWd1bGFyIGV4cHJlc3Npb25zICovXG5cdHJlZ2V4UHVueWNvZGUgPSAvXnhuLS0vLFxuXHRyZWdleE5vbkFTQ0lJID0gL1teXFx4MjAtXFx4N0VdLywgLy8gdW5wcmludGFibGUgQVNDSUkgY2hhcnMgKyBub24tQVNDSUkgY2hhcnNcblx0cmVnZXhTZXBhcmF0b3JzID0gL1tcXHgyRVxcdTMwMDJcXHVGRjBFXFx1RkY2MV0vZywgLy8gUkZDIDM0OTAgc2VwYXJhdG9yc1xuXG5cdC8qKiBFcnJvciBtZXNzYWdlcyAqL1xuXHRlcnJvcnMgPSB7XG5cdFx0J292ZXJmbG93JzogJ092ZXJmbG93OiBpbnB1dCBuZWVkcyB3aWRlciBpbnRlZ2VycyB0byBwcm9jZXNzJyxcblx0XHQnbm90LWJhc2ljJzogJ0lsbGVnYWwgaW5wdXQgPj0gMHg4MCAobm90IGEgYmFzaWMgY29kZSBwb2ludCknLFxuXHRcdCdpbnZhbGlkLWlucHV0JzogJ0ludmFsaWQgaW5wdXQnXG5cdH0sXG5cblx0LyoqIENvbnZlbmllbmNlIHNob3J0Y3V0cyAqL1xuXHRiYXNlTWludXNUTWluID0gYmFzZSAtIHRNaW4sXG5cdGZsb29yID0gTWF0aC5mbG9vcixcblx0c3RyaW5nRnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZSxcblxuXHQvKiogVGVtcG9yYXJ5IHZhcmlhYmxlICovXG5cdGtleTtcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQvKipcblx0ICogQSBnZW5lcmljIGVycm9yIHV0aWxpdHkgZnVuY3Rpb24uXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSBlcnJvciB0eXBlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRocm93cyBhIGBSYW5nZUVycm9yYCB3aXRoIHRoZSBhcHBsaWNhYmxlIGVycm9yIG1lc3NhZ2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcnJvcih0eXBlKSB7XG5cdFx0dGhyb3cgUmFuZ2VFcnJvcihlcnJvcnNbdHlwZV0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBgQXJyYXkjbWFwYCB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnkgYXJyYXlcblx0ICogaXRlbS5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBhcnJheSBvZiB2YWx1ZXMgcmV0dXJuZWQgYnkgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwKGFycmF5LCBmbikge1xuXHRcdHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdFx0dmFyIHJlc3VsdCA9IFtdO1xuXHRcdHdoaWxlIChsZW5ndGgtLSkge1xuXHRcdFx0cmVzdWx0W2xlbmd0aF0gPSBmbihhcnJheVtsZW5ndGhdKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIHNpbXBsZSBgQXJyYXkjbWFwYC1saWtlIHdyYXBwZXIgdG8gd29yayB3aXRoIGRvbWFpbiBuYW1lIHN0cmluZ3Mgb3IgZW1haWxcblx0ICogYWRkcmVzc2VzLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBUaGUgZnVuY3Rpb24gdGhhdCBnZXRzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICogY2hhcmFjdGVyLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IEEgbmV3IHN0cmluZyBvZiBjaGFyYWN0ZXJzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFja1xuXHQgKiBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcERvbWFpbihzdHJpbmcsIGZuKSB7XG5cdFx0dmFyIHBhcnRzID0gc3RyaW5nLnNwbGl0KCdAJyk7XG5cdFx0dmFyIHJlc3VsdCA9ICcnO1xuXHRcdGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG5cdFx0XHQvLyBJbiBlbWFpbCBhZGRyZXNzZXMsIG9ubHkgdGhlIGRvbWFpbiBuYW1lIHNob3VsZCBiZSBwdW55Y29kZWQuIExlYXZlXG5cdFx0XHQvLyB0aGUgbG9jYWwgcGFydCAoaS5lLiBldmVyeXRoaW5nIHVwIHRvIGBAYCkgaW50YWN0LlxuXHRcdFx0cmVzdWx0ID0gcGFydHNbMF0gKyAnQCc7XG5cdFx0XHRzdHJpbmcgPSBwYXJ0c1sxXTtcblx0XHR9XG5cdFx0Ly8gQXZvaWQgYHNwbGl0KHJlZ2V4KWAgZm9yIElFOCBjb21wYXRpYmlsaXR5LiBTZWUgIzE3LlxuXHRcdHN0cmluZyA9IHN0cmluZy5yZXBsYWNlKHJlZ2V4U2VwYXJhdG9ycywgJ1xceDJFJyk7XG5cdFx0dmFyIGxhYmVscyA9IHN0cmluZy5zcGxpdCgnLicpO1xuXHRcdHZhciBlbmNvZGVkID0gbWFwKGxhYmVscywgZm4pLmpvaW4oJy4nKTtcblx0XHRyZXR1cm4gcmVzdWx0ICsgZW5jb2RlZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIG51bWVyaWMgY29kZSBwb2ludHMgb2YgZWFjaCBVbmljb2RlXG5cdCAqIGNoYXJhY3RlciBpbiB0aGUgc3RyaW5nLiBXaGlsZSBKYXZhU2NyaXB0IHVzZXMgVUNTLTIgaW50ZXJuYWxseSxcblx0ICogdGhpcyBmdW5jdGlvbiB3aWxsIGNvbnZlcnQgYSBwYWlyIG9mIHN1cnJvZ2F0ZSBoYWx2ZXMgKGVhY2ggb2Ygd2hpY2hcblx0ICogVUNTLTIgZXhwb3NlcyBhcyBzZXBhcmF0ZSBjaGFyYWN0ZXJzKSBpbnRvIGEgc2luZ2xlIGNvZGUgcG9pbnQsXG5cdCAqIG1hdGNoaW5nIFVURi0xNi5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5lbmNvZGVgXG5cdCAqIEBzZWUgPGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nPlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBkZWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0cmluZyBUaGUgVW5pY29kZSBpbnB1dCBzdHJpbmcgKFVDUy0yKS5cblx0ICogQHJldHVybnMge0FycmF5fSBUaGUgbmV3IGFycmF5IG9mIGNvZGUgcG9pbnRzLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpIHtcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGNvdW50ZXIgPSAwLFxuXHRcdCAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoLFxuXHRcdCAgICB2YWx1ZSxcblx0XHQgICAgZXh0cmE7XG5cdFx0d2hpbGUgKGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdHZhbHVlID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdGlmICh2YWx1ZSA+PSAweEQ4MDAgJiYgdmFsdWUgPD0gMHhEQkZGICYmIGNvdW50ZXIgPCBsZW5ndGgpIHtcblx0XHRcdFx0Ly8gaGlnaCBzdXJyb2dhdGUsIGFuZCB0aGVyZSBpcyBhIG5leHQgY2hhcmFjdGVyXG5cdFx0XHRcdGV4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtcblx0XHRcdFx0aWYgKChleHRyYSAmIDB4RkMwMCkgPT0gMHhEQzAwKSB7IC8vIGxvdyBzdXJyb2dhdGVcblx0XHRcdFx0XHRvdXRwdXQucHVzaCgoKHZhbHVlICYgMHgzRkYpIDw8IDEwKSArIChleHRyYSAmIDB4M0ZGKSArIDB4MTAwMDApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIHVubWF0Y2hlZCBzdXJyb2dhdGU7IG9ubHkgYXBwZW5kIHRoaXMgY29kZSB1bml0LCBpbiBjYXNlIHRoZSBuZXh0XG5cdFx0XHRcdFx0Ly8gY29kZSB1bml0IGlzIHRoZSBoaWdoIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0XHRcdGNvdW50ZXItLTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3V0cHV0LnB1c2godmFsdWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0O1xuXHR9XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBzdHJpbmcgYmFzZWQgb24gYW4gYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHNlZSBgcHVueWNvZGUudWNzMi5kZWNvZGVgXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZS51Y3MyXG5cdCAqIEBuYW1lIGVuY29kZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBjb2RlUG9pbnRzIFRoZSBhcnJheSBvZiBudW1lcmljIGNvZGUgcG9pbnRzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgbmV3IFVuaWNvZGUgc3RyaW5nIChVQ1MtMikuXG5cdCAqL1xuXHRmdW5jdGlvbiB1Y3MyZW5jb2RlKGFycmF5KSB7XG5cdFx0cmV0dXJuIG1hcChhcnJheSwgZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdHZhciBvdXRwdXQgPSAnJztcblx0XHRcdGlmICh2YWx1ZSA+IDB4RkZGRikge1xuXHRcdFx0XHR2YWx1ZSAtPSAweDEwMDAwO1xuXHRcdFx0XHRvdXRwdXQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlKHZhbHVlID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTtcblx0XHRcdFx0dmFsdWUgPSAweERDMDAgfCB2YWx1ZSAmIDB4M0ZGO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSk7XG5cdFx0XHRyZXR1cm4gb3V0cHV0O1xuXHRcdH0pLmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgYmFzaWMgY29kZSBwb2ludCBpbnRvIGEgZGlnaXQvaW50ZWdlci5cblx0ICogQHNlZSBgZGlnaXRUb0Jhc2ljKClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBjb2RlUG9pbnQgVGhlIGJhc2ljIG51bWVyaWMgY29kZSBwb2ludCB2YWx1ZS5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIG51bWVyaWMgdmFsdWUgb2YgYSBiYXNpYyBjb2RlIHBvaW50IChmb3IgdXNlIGluXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaW4gdGhlIHJhbmdlIGAwYCB0byBgYmFzZSAtIDFgLCBvciBgYmFzZWAgaWZcblx0ICogdGhlIGNvZGUgcG9pbnQgZG9lcyBub3QgcmVwcmVzZW50IGEgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNpY1RvRGlnaXQoY29kZVBvaW50KSB7XG5cdFx0aWYgKGNvZGVQb2ludCAtIDQ4IDwgMTApIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSAyMjtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDY1IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA2NTtcblx0XHR9XG5cdFx0aWYgKGNvZGVQb2ludCAtIDk3IDwgMjYpIHtcblx0XHRcdHJldHVybiBjb2RlUG9pbnQgLSA5Nztcblx0XHR9XG5cdFx0cmV0dXJuIGJhc2U7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBkaWdpdC9pbnRlZ2VyIGludG8gYSBiYXNpYyBjb2RlIHBvaW50LlxuXHQgKiBAc2VlIGBiYXNpY1RvRGlnaXQoKWBcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpZ2l0IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHJldHVybnMge051bWJlcn0gVGhlIGJhc2ljIGNvZGUgcG9pbnQgd2hvc2UgdmFsdWUgKHdoZW4gdXNlZCBmb3Jcblx0ICogcmVwcmVzZW50aW5nIGludGVnZXJzKSBpcyBgZGlnaXRgLCB3aGljaCBuZWVkcyB0byBiZSBpbiB0aGUgcmFuZ2Vcblx0ICogYDBgIHRvIGBiYXNlIC0gMWAuIElmIGBmbGFnYCBpcyBub24temVybywgdGhlIHVwcGVyY2FzZSBmb3JtIGlzXG5cdCAqIHVzZWQ7IGVsc2UsIHRoZSBsb3dlcmNhc2UgZm9ybSBpcyB1c2VkLiBUaGUgYmVoYXZpb3IgaXMgdW5kZWZpbmVkXG5cdCAqIGlmIGBmbGFnYCBpcyBub24temVybyBhbmQgYGRpZ2l0YCBoYXMgbm8gdXBwZXJjYXNlIGZvcm0uXG5cdCAqL1xuXHRmdW5jdGlvbiBkaWdpdFRvQmFzaWMoZGlnaXQsIGZsYWcpIHtcblx0XHQvLyAgMC4uMjUgbWFwIHRvIEFTQ0lJIGEuLnogb3IgQS4uWlxuXHRcdC8vIDI2Li4zNSBtYXAgdG8gQVNDSUkgMC4uOVxuXHRcdHJldHVybiBkaWdpdCArIDIyICsgNzUgKiAoZGlnaXQgPCAyNikgLSAoKGZsYWcgIT0gMCkgPDwgNSk7XG5cdH1cblxuXHQvKipcblx0ICogQmlhcyBhZGFwdGF0aW9uIGZ1bmN0aW9uIGFzIHBlciBzZWN0aW9uIDMuNCBvZiBSRkMgMzQ5Mi5cblx0ICogaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzQ5MiNzZWN0aW9uLTMuNFxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gYWRhcHQoZGVsdGEsIG51bVBvaW50cywgZmlyc3RUaW1lKSB7XG5cdFx0dmFyIGsgPSAwO1xuXHRcdGRlbHRhID0gZmlyc3RUaW1lID8gZmxvb3IoZGVsdGEgLyBkYW1wKSA6IGRlbHRhID4+IDE7XG5cdFx0ZGVsdGEgKz0gZmxvb3IoZGVsdGEgLyBudW1Qb2ludHMpO1xuXHRcdGZvciAoLyogbm8gaW5pdGlhbGl6YXRpb24gKi87IGRlbHRhID4gYmFzZU1pbnVzVE1pbiAqIHRNYXggPj4gMTsgayArPSBiYXNlKSB7XG5cdFx0XHRkZWx0YSA9IGZsb29yKGRlbHRhIC8gYmFzZU1pbnVzVE1pbik7XG5cdFx0fVxuXHRcdHJldHVybiBmbG9vcihrICsgKGJhc2VNaW51c1RNaW4gKyAxKSAqIGRlbHRhIC8gKGRlbHRhICsgc2tldykpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scyB0byBhIHN0cmluZyBvZiBVbmljb2RlXG5cdCAqIHN5bWJvbHMuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSByZXN1bHRpbmcgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICovXG5cdGZ1bmN0aW9uIGRlY29kZShpbnB1dCkge1xuXHRcdC8vIERvbid0IHVzZSBVQ1MtMlxuXHRcdHZhciBvdXRwdXQgPSBbXSxcblx0XHQgICAgaW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGgsXG5cdFx0ICAgIG91dCxcblx0XHQgICAgaSA9IDAsXG5cdFx0ICAgIG4gPSBpbml0aWFsTixcblx0XHQgICAgYmlhcyA9IGluaXRpYWxCaWFzLFxuXHRcdCAgICBiYXNpYyxcblx0XHQgICAgaixcblx0XHQgICAgaW5kZXgsXG5cdFx0ICAgIG9sZGksXG5cdFx0ICAgIHcsXG5cdFx0ICAgIGssXG5cdFx0ICAgIGRpZ2l0LFxuXHRcdCAgICB0LFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgYmFzZU1pbnVzVDtcblxuXHRcdC8vIEhhbmRsZSB0aGUgYmFzaWMgY29kZSBwb2ludHM6IGxldCBgYmFzaWNgIGJlIHRoZSBudW1iZXIgb2YgaW5wdXQgY29kZVxuXHRcdC8vIHBvaW50cyBiZWZvcmUgdGhlIGxhc3QgZGVsaW1pdGVyLCBvciBgMGAgaWYgdGhlcmUgaXMgbm9uZSwgdGhlbiBjb3B5XG5cdFx0Ly8gdGhlIGZpcnN0IGJhc2ljIGNvZGUgcG9pbnRzIHRvIHRoZSBvdXRwdXQuXG5cblx0XHRiYXNpYyA9IGlucHV0Lmxhc3RJbmRleE9mKGRlbGltaXRlcik7XG5cdFx0aWYgKGJhc2ljIDwgMCkge1xuXHRcdFx0YmFzaWMgPSAwO1xuXHRcdH1cblxuXHRcdGZvciAoaiA9IDA7IGogPCBiYXNpYzsgKytqKSB7XG5cdFx0XHQvLyBpZiBpdCdzIG5vdCBhIGJhc2ljIGNvZGUgcG9pbnRcblx0XHRcdGlmIChpbnB1dC5jaGFyQ29kZUF0KGopID49IDB4ODApIHtcblx0XHRcdFx0ZXJyb3IoJ25vdC1iYXNpYycpO1xuXHRcdFx0fVxuXHRcdFx0b3V0cHV0LnB1c2goaW5wdXQuY2hhckNvZGVBdChqKSk7XG5cdFx0fVxuXG5cdFx0Ly8gTWFpbiBkZWNvZGluZyBsb29wOiBzdGFydCBqdXN0IGFmdGVyIHRoZSBsYXN0IGRlbGltaXRlciBpZiBhbnkgYmFzaWMgY29kZVxuXHRcdC8vIHBvaW50cyB3ZXJlIGNvcGllZDsgc3RhcnQgYXQgdGhlIGJlZ2lubmluZyBvdGhlcndpc2UuXG5cblx0XHRmb3IgKGluZGV4ID0gYmFzaWMgPiAwID8gYmFzaWMgKyAxIDogMDsgaW5kZXggPCBpbnB1dExlbmd0aDsgLyogbm8gZmluYWwgZXhwcmVzc2lvbiAqLykge1xuXG5cdFx0XHQvLyBgaW5kZXhgIGlzIHRoZSBpbmRleCBvZiB0aGUgbmV4dCBjaGFyYWN0ZXIgdG8gYmUgY29uc3VtZWQuXG5cdFx0XHQvLyBEZWNvZGUgYSBnZW5lcmFsaXplZCB2YXJpYWJsZS1sZW5ndGggaW50ZWdlciBpbnRvIGBkZWx0YWAsXG5cdFx0XHQvLyB3aGljaCBnZXRzIGFkZGVkIHRvIGBpYC4gVGhlIG92ZXJmbG93IGNoZWNraW5nIGlzIGVhc2llclxuXHRcdFx0Ly8gaWYgd2UgaW5jcmVhc2UgYGlgIGFzIHdlIGdvLCB0aGVuIHN1YnRyYWN0IG9mZiBpdHMgc3RhcnRpbmdcblx0XHRcdC8vIHZhbHVlIGF0IHRoZSBlbmQgdG8gb2J0YWluIGBkZWx0YWAuXG5cdFx0XHRmb3IgKG9sZGkgPSBpLCB3ID0gMSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7XG5cblx0XHRcdFx0aWYgKGluZGV4ID49IGlucHV0TGVuZ3RoKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ2ludmFsaWQtaW5wdXQnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRpZ2l0ID0gYmFzaWNUb0RpZ2l0KGlucHV0LmNoYXJDb2RlQXQoaW5kZXgrKykpO1xuXG5cdFx0XHRcdGlmIChkaWdpdCA+PSBiYXNlIHx8IGRpZ2l0ID4gZmxvb3IoKG1heEludCAtIGkpIC8gdykpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGkgKz0gZGlnaXQgKiB3O1xuXHRcdFx0XHR0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPCB0KSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdGlmICh3ID4gZmxvb3IobWF4SW50IC8gYmFzZU1pbnVzVCkpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHcgKj0gYmFzZU1pbnVzVDtcblxuXHRcdFx0fVxuXG5cdFx0XHRvdXQgPSBvdXRwdXQubGVuZ3RoICsgMTtcblx0XHRcdGJpYXMgPSBhZGFwdChpIC0gb2xkaSwgb3V0LCBvbGRpID09IDApO1xuXG5cdFx0XHQvLyBgaWAgd2FzIHN1cHBvc2VkIHRvIHdyYXAgYXJvdW5kIGZyb20gYG91dGAgdG8gYDBgLFxuXHRcdFx0Ly8gaW5jcmVtZW50aW5nIGBuYCBlYWNoIHRpbWUsIHNvIHdlJ2xsIGZpeCB0aGF0IG5vdzpcblx0XHRcdGlmIChmbG9vcihpIC8gb3V0KSA+IG1heEludCAtIG4pIHtcblx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHR9XG5cblx0XHRcdG4gKz0gZmxvb3IoaSAvIG91dCk7XG5cdFx0XHRpICU9IG91dDtcblxuXHRcdFx0Ly8gSW5zZXJ0IGBuYCBhdCBwb3NpdGlvbiBgaWAgb2YgdGhlIG91dHB1dFxuXHRcdFx0b3V0cHV0LnNwbGljZShpKyssIDAsIG4pO1xuXG5cdFx0fVxuXG5cdFx0cmV0dXJuIHVjczJlbmNvZGUob3V0cHV0KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMgKGUuZy4gYSBkb21haW4gbmFtZSBsYWJlbCkgdG8gYVxuXHQgKiBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBlbmNvZGUoaW5wdXQpIHtcblx0XHR2YXIgbixcblx0XHQgICAgZGVsdGEsXG5cdFx0ICAgIGhhbmRsZWRDUENvdW50LFxuXHRcdCAgICBiYXNpY0xlbmd0aCxcblx0XHQgICAgYmlhcyxcblx0XHQgICAgaixcblx0XHQgICAgbSxcblx0XHQgICAgcSxcblx0XHQgICAgayxcblx0XHQgICAgdCxcblx0XHQgICAgY3VycmVudFZhbHVlLFxuXHRcdCAgICBvdXRwdXQgPSBbXSxcblx0XHQgICAgLyoqIGBpbnB1dExlbmd0aGAgd2lsbCBob2xkIHRoZSBudW1iZXIgb2YgY29kZSBwb2ludHMgaW4gYGlucHV0YC4gKi9cblx0XHQgICAgaW5wdXRMZW5ndGgsXG5cdFx0ICAgIC8qKiBDYWNoZWQgY2FsY3VsYXRpb24gcmVzdWx0cyAqL1xuXHRcdCAgICBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsXG5cdFx0ICAgIGJhc2VNaW51c1QsXG5cdFx0ICAgIHFNaW51c1Q7XG5cblx0XHQvLyBDb252ZXJ0IHRoZSBpbnB1dCBpbiBVQ1MtMiB0byBVbmljb2RlXG5cdFx0aW5wdXQgPSB1Y3MyZGVjb2RlKGlucHV0KTtcblxuXHRcdC8vIENhY2hlIHRoZSBsZW5ndGhcblx0XHRpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aDtcblxuXHRcdC8vIEluaXRpYWxpemUgdGhlIHN0YXRlXG5cdFx0biA9IGluaXRpYWxOO1xuXHRcdGRlbHRhID0gMDtcblx0XHRiaWFzID0gaW5pdGlhbEJpYXM7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzXG5cdFx0Zm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA8IDB4ODApIHtcblx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGN1cnJlbnRWYWx1ZSkpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGhhbmRsZWRDUENvdW50ID0gYmFzaWNMZW5ndGggPSBvdXRwdXQubGVuZ3RoO1xuXG5cdFx0Ly8gYGhhbmRsZWRDUENvdW50YCBpcyB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIGhhbmRsZWQ7XG5cdFx0Ly8gYGJhc2ljTGVuZ3RoYCBpcyB0aGUgbnVtYmVyIG9mIGJhc2ljIGNvZGUgcG9pbnRzLlxuXG5cdFx0Ly8gRmluaXNoIHRoZSBiYXNpYyBzdHJpbmcgLSBpZiBpdCBpcyBub3QgZW1wdHkgLSB3aXRoIGEgZGVsaW1pdGVyXG5cdFx0aWYgKGJhc2ljTGVuZ3RoKSB7XG5cdFx0XHRvdXRwdXQucHVzaChkZWxpbWl0ZXIpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZW5jb2RpbmcgbG9vcDpcblx0XHR3aGlsZSAoaGFuZGxlZENQQ291bnQgPCBpbnB1dExlbmd0aCkge1xuXG5cdFx0XHQvLyBBbGwgbm9uLWJhc2ljIGNvZGUgcG9pbnRzIDwgbiBoYXZlIGJlZW4gaGFuZGxlZCBhbHJlYWR5LiBGaW5kIHRoZSBuZXh0XG5cdFx0XHQvLyBsYXJnZXIgb25lOlxuXHRcdFx0Zm9yIChtID0gbWF4SW50LCBqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPj0gbiAmJiBjdXJyZW50VmFsdWUgPCBtKSB7XG5cdFx0XHRcdFx0bSA9IGN1cnJlbnRWYWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBJbmNyZWFzZSBgZGVsdGFgIGVub3VnaCB0byBhZHZhbmNlIHRoZSBkZWNvZGVyJ3MgPG4saT4gc3RhdGUgdG8gPG0sMD4sXG5cdFx0XHQvLyBidXQgZ3VhcmQgYWdhaW5zdCBvdmVyZmxvd1xuXHRcdFx0aGFuZGxlZENQQ291bnRQbHVzT25lID0gaGFuZGxlZENQQ291bnQgKyAxO1xuXHRcdFx0aWYgKG0gLSBuID4gZmxvb3IoKG1heEludCAtIGRlbHRhKSAvIGhhbmRsZWRDUENvdW50UGx1c09uZSkpIHtcblx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHR9XG5cblx0XHRcdGRlbHRhICs9IChtIC0gbikgKiBoYW5kbGVkQ1BDb3VudFBsdXNPbmU7XG5cdFx0XHRuID0gbTtcblxuXHRcdFx0Zm9yIChqID0gMDsgaiA8IGlucHV0TGVuZ3RoOyArK2opIHtcblx0XHRcdFx0Y3VycmVudFZhbHVlID0gaW5wdXRbal07XG5cblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA8IG4gJiYgKytkZWx0YSA+IG1heEludCkge1xuXHRcdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGN1cnJlbnRWYWx1ZSA9PSBuKSB7XG5cdFx0XHRcdFx0Ly8gUmVwcmVzZW50IGRlbHRhIGFzIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXJcblx0XHRcdFx0XHRmb3IgKHEgPSBkZWx0YSwgayA9IGJhc2U7IC8qIG5vIGNvbmRpdGlvbiAqLzsgayArPSBiYXNlKSB7XG5cdFx0XHRcdFx0XHR0ID0gayA8PSBiaWFzID8gdE1pbiA6IChrID49IGJpYXMgKyB0TWF4ID8gdE1heCA6IGsgLSBiaWFzKTtcblx0XHRcdFx0XHRcdGlmIChxIDwgdCkge1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHFNaW51c1QgPSBxIC0gdDtcblx0XHRcdFx0XHRcdGJhc2VNaW51c1QgPSBiYXNlIC0gdDtcblx0XHRcdFx0XHRcdG91dHB1dC5wdXNoKFxuXHRcdFx0XHRcdFx0XHRzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHQgKyBxTWludXNUICUgYmFzZU1pbnVzVCwgMCkpXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0cSA9IGZsb29yKHFNaW51c1QgLyBiYXNlTWludXNUKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRvdXRwdXQucHVzaChzdHJpbmdGcm9tQ2hhckNvZGUoZGlnaXRUb0Jhc2ljKHEsIDApKSk7XG5cdFx0XHRcdFx0YmlhcyA9IGFkYXB0KGRlbHRhLCBoYW5kbGVkQ1BDb3VudFBsdXNPbmUsIGhhbmRsZWRDUENvdW50ID09IGJhc2ljTGVuZ3RoKTtcblx0XHRcdFx0XHRkZWx0YSA9IDA7XG5cdFx0XHRcdFx0KytoYW5kbGVkQ1BDb3VudDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQrK2RlbHRhO1xuXHRcdFx0KytuO1xuXG5cdFx0fVxuXHRcdHJldHVybiBvdXRwdXQuam9pbignJyk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBQdW55Y29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzc1xuXHQgKiB0byBVbmljb2RlLiBPbmx5IHRoZSBQdW55Y29kZWQgcGFydHMgb2YgdGhlIGlucHV0IHdpbGwgYmUgY29udmVydGVkLCBpLmUuXG5cdCAqIGl0IGRvZXNuJ3QgbWF0dGVyIGlmIHlvdSBjYWxsIGl0IG9uIGEgc3RyaW5nIHRoYXQgaGFzIGFscmVhZHkgYmVlblxuXHQgKiBjb252ZXJ0ZWQgdG8gVW5pY29kZS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgUHVueWNvZGVkIGRvbWFpbiBuYW1lIG9yIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogY29udmVydCB0byBVbmljb2RlLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgVW5pY29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gUHVueWNvZGVcblx0ICogc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9Vbmljb2RlKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhQdW55Y29kZS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyBkZWNvZGUoc3RyaW5nLnNsaWNlKDQpLnRvTG93ZXJDYXNlKCkpXG5cdFx0XHRcdDogc3RyaW5nO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgVW5pY29kZSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgZG9tYWluIG5hbWUgb3IgYW4gZW1haWwgYWRkcmVzcyB0b1xuXHQgKiBQdW55Y29kZS4gT25seSB0aGUgbm9uLUFTQ0lJIHBhcnRzIG9mIHRoZSBkb21haW4gbmFtZSB3aWxsIGJlIGNvbnZlcnRlZCxcblx0ICogaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCB3aXRoIGEgZG9tYWluIHRoYXQncyBhbHJlYWR5IGluXG5cdCAqIEFTQ0lJLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvIGNvbnZlcnQsIGFzIGFcblx0ICogVW5pY29kZSBzdHJpbmcuXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBQdW55Y29kZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgZ2l2ZW4gZG9tYWluIG5hbWUgb3Jcblx0ICogZW1haWwgYWRkcmVzcy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvQVNDSUkoaW5wdXQpIHtcblx0XHRyZXR1cm4gbWFwRG9tYWluKGlucHV0LCBmdW5jdGlvbihzdHJpbmcpIHtcblx0XHRcdHJldHVybiByZWdleE5vbkFTQ0lJLnRlc3Qoc3RyaW5nKVxuXHRcdFx0XHQ/ICd4bi0tJyArIGVuY29kZShzdHJpbmcpXG5cdFx0XHRcdDogc3RyaW5nO1xuXHRcdH0pO1xuXHR9XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0LyoqIERlZmluZSB0aGUgcHVibGljIEFQSSAqL1xuXHRwdW55Y29kZSA9IHtcblx0XHQvKipcblx0XHQgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgUHVueWNvZGUuanMgdmVyc2lvbiBudW1iZXIuXG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgU3RyaW5nXG5cdFx0ICovXG5cdFx0J3ZlcnNpb24nOiAnMS4zLjInLFxuXHRcdC8qKlxuXHRcdCAqIEFuIG9iamVjdCBvZiBtZXRob2RzIHRvIGNvbnZlcnQgZnJvbSBKYXZhU2NyaXB0J3MgaW50ZXJuYWwgY2hhcmFjdGVyXG5cdFx0ICogcmVwcmVzZW50YXRpb24gKFVDUy0yKSB0byBVbmljb2RlIGNvZGUgcG9pbnRzLCBhbmQgYmFjay5cblx0XHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0XHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0XHQgKiBAdHlwZSBPYmplY3Rcblx0XHQgKi9cblx0XHQndWNzMic6IHtcblx0XHRcdCdkZWNvZGUnOiB1Y3MyZGVjb2RlLFxuXHRcdFx0J2VuY29kZSc6IHVjczJlbmNvZGVcblx0XHR9LFxuXHRcdCdkZWNvZGUnOiBkZWNvZGUsXG5cdFx0J2VuY29kZSc6IGVuY29kZSxcblx0XHQndG9BU0NJSSc6IHRvQVNDSUksXG5cdFx0J3RvVW5pY29kZSc6IHRvVW5pY29kZVxuXHR9O1xuXG5cdC8qKiBFeHBvc2UgYHB1bnljb2RlYCAqL1xuXHQvLyBTb21lIEFNRCBidWlsZCBvcHRpbWl6ZXJzLCBsaWtlIHIuanMsIGNoZWNrIGZvciBzcGVjaWZpYyBjb25kaXRpb24gcGF0dGVybnNcblx0Ly8gbGlrZSB0aGUgZm9sbG93aW5nOlxuXHRpZiAoXG5cdFx0dHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmXG5cdFx0dHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiZcblx0XHRkZWZpbmUuYW1kXG5cdCkge1xuXHRcdGRlZmluZSgncHVueWNvZGUnLCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBwdW55Y29kZTtcblx0XHR9KTtcblx0fSBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7XG5cdFx0aWYgKG1vZHVsZS5leHBvcnRzID09IGZyZWVFeHBvcnRzKSB7IC8vIGluIE5vZGUuanMgb3IgUmluZ29KUyB2MC44LjArXG5cdFx0XHRmcmVlTW9kdWxlLmV4cG9ydHMgPSBwdW55Y29kZTtcblx0XHR9IGVsc2UgeyAvLyBpbiBOYXJ3aGFsIG9yIFJpbmdvSlMgdjAuNy4wLVxuXHRcdFx0Zm9yIChrZXkgaW4gcHVueWNvZGUpIHtcblx0XHRcdFx0cHVueWNvZGUuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAoZnJlZUV4cG9ydHNba2V5XSA9IHB1bnljb2RlW2tleV0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIHsgLy8gaW4gUmhpbm8gb3IgYSB3ZWIgYnJvd3NlclxuXHRcdHJvb3QucHVueWNvZGUgPSBwdW55Y29kZTtcblx0fVxuXG59KHRoaXMpKTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8vIElmIG9iai5oYXNPd25Qcm9wZXJ0eSBoYXMgYmVlbiBvdmVycmlkZGVuLCB0aGVuIGNhbGxpbmdcbi8vIG9iai5oYXNPd25Qcm9wZXJ0eShwcm9wKSB3aWxsIGJyZWFrLlxuLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vam95ZW50L25vZGUvaXNzdWVzLzE3MDdcbmZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwgcHJvcCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocXMsIHNlcCwgZXEsIG9wdGlvbnMpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIHZhciBvYmogPSB7fTtcblxuICBpZiAodHlwZW9mIHFzICE9PSAnc3RyaW5nJyB8fCBxcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgdmFyIHJlZ2V4cCA9IC9cXCsvZztcbiAgcXMgPSBxcy5zcGxpdChzZXApO1xuXG4gIHZhciBtYXhLZXlzID0gMTAwMDtcbiAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMubWF4S2V5cyA9PT0gJ251bWJlcicpIHtcbiAgICBtYXhLZXlzID0gb3B0aW9ucy5tYXhLZXlzO1xuICB9XG5cbiAgdmFyIGxlbiA9IHFzLmxlbmd0aDtcbiAgLy8gbWF4S2V5cyA8PSAwIG1lYW5zIHRoYXQgd2Ugc2hvdWxkIG5vdCBsaW1pdCBrZXlzIGNvdW50XG4gIGlmIChtYXhLZXlzID4gMCAmJiBsZW4gPiBtYXhLZXlzKSB7XG4gICAgbGVuID0gbWF4S2V5cztcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICB2YXIgeCA9IHFzW2ldLnJlcGxhY2UocmVnZXhwLCAnJTIwJyksXG4gICAgICAgIGlkeCA9IHguaW5kZXhPZihlcSksXG4gICAgICAgIGtzdHIsIHZzdHIsIGssIHY7XG5cbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgIGtzdHIgPSB4LnN1YnN0cigwLCBpZHgpO1xuICAgICAgdnN0ciA9IHguc3Vic3RyKGlkeCArIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBrc3RyID0geDtcbiAgICAgIHZzdHIgPSAnJztcbiAgICB9XG5cbiAgICBrID0gZGVjb2RlVVJJQ29tcG9uZW50KGtzdHIpO1xuICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodnN0cik7XG5cbiAgICBpZiAoIWhhc093blByb3BlcnR5KG9iaiwgaykpIHtcbiAgICAgIG9ialtrXSA9IHY7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KG9ialtrXSkpIHtcbiAgICAgIG9ialtrXS5wdXNoKHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmpba10gPSBbb2JqW2tdLCB2XTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh4cykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHhzKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgc3RyaW5naWZ5UHJpbWl0aXZlID0gZnVuY3Rpb24odikge1xuICBzd2l0Y2ggKHR5cGVvZiB2KSB7XG4gICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgIHJldHVybiB2O1xuXG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICByZXR1cm4gdiA/ICd0cnVlJyA6ICdmYWxzZSc7XG5cbiAgICBjYXNlICdudW1iZXInOlxuICAgICAgcmV0dXJuIGlzRmluaXRlKHYpID8gdiA6ICcnO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAnJztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvYmosIHNlcCwgZXEsIG5hbWUpIHtcbiAgc2VwID0gc2VwIHx8ICcmJztcbiAgZXEgPSBlcSB8fCAnPSc7XG4gIGlmIChvYmogPT09IG51bGwpIHtcbiAgICBvYmogPSB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAodHlwZW9mIG9iaiA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gbWFwKG9iamVjdEtleXMob2JqKSwgZnVuY3Rpb24oaykge1xuICAgICAgdmFyIGtzID0gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShrKSkgKyBlcTtcbiAgICAgIGlmIChpc0FycmF5KG9ialtrXSkpIHtcbiAgICAgICAgcmV0dXJuIG1hcChvYmpba10sIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICByZXR1cm4ga3MgKyBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKHYpKTtcbiAgICAgICAgfSkuam9pbihzZXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmpba10pKTtcbiAgICAgIH1cbiAgICB9KS5qb2luKHNlcCk7XG5cbiAgfVxuXG4gIGlmICghbmFtZSkgcmV0dXJuICcnO1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShuYW1lKSkgKyBlcSArXG4gICAgICAgICBlbmNvZGVVUklDb21wb25lbnQoc3RyaW5naWZ5UHJpbWl0aXZlKG9iaikpO1xufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uICh4cykge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHhzKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbmZ1bmN0aW9uIG1hcCAoeHMsIGYpIHtcbiAgaWYgKHhzLm1hcCkgcmV0dXJuIHhzLm1hcChmKTtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHhzLmxlbmd0aDsgaSsrKSB7XG4gICAgcmVzLnB1c2goZih4c1tpXSwgaSkpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIgcmVzID0gW107XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgcmVzLnB1c2goa2V5KTtcbiAgfVxuICByZXR1cm4gcmVzO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5kZWNvZGUgPSBleHBvcnRzLnBhcnNlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcbmV4cG9ydHMuZW5jb2RlID0gZXhwb3J0cy5zdHJpbmdpZnkgPSByZXF1aXJlKCcuL2VuY29kZScpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9saWIvX3N0cmVhbV9kdXBsZXguanNcIilcbiIsIi8vIGEgZHVwbGV4IHN0cmVhbSBpcyBqdXN0IGEgc3RyZWFtIHRoYXQgaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuXG4vLyBTaW5jZSBKUyBkb2Vzbid0IGhhdmUgbXVsdGlwbGUgcHJvdG90eXBhbCBpbmhlcml0YW5jZSwgdGhpcyBjbGFzc1xuLy8gcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gUmVhZGFibGUsIGFuZCB0aGVuIHBhcmFzaXRpY2FsbHkgZnJvbVxuLy8gV3JpdGFibGUuXG5cbid1c2Ugc3RyaWN0JztcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSBrZXlzLnB1c2goa2V5KTtcbiAgcmV0dXJuIGtleXM7XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG5tb2R1bGUuZXhwb3J0cyA9IER1cGxleDtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBwcm9jZXNzTmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzLW5leHRpY2stYXJncycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBSZWFkYWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV9yZWFkYWJsZScpO1xudmFyIFdyaXRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3dyaXRhYmxlJyk7XG5cbnV0aWwuaW5oZXJpdHMoRHVwbGV4LCBSZWFkYWJsZSk7XG5cbnZhciBrZXlzID0gb2JqZWN0S2V5cyhXcml0YWJsZS5wcm90b3R5cGUpO1xuZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7XG4gIHZhciBtZXRob2QgPSBrZXlzW3ZdO1xuICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSlcbiAgICBEdXBsZXgucHJvdG90eXBlW21ldGhvZF0gPSBXcml0YWJsZS5wcm90b3R5cGVbbWV0aG9kXTtcbn1cblxuZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpXG4gICAgcmV0dXJuIG5ldyBEdXBsZXgob3B0aW9ucyk7XG5cbiAgUmVhZGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgV3JpdGFibGUuY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnJlYWRhYmxlID09PSBmYWxzZSlcbiAgICB0aGlzLnJlYWRhYmxlID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy53cml0YWJsZSA9PT0gZmFsc2UpXG4gICAgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuXG4gIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpXG4gICAgdGhpcy5hbGxvd0hhbGZPcGVuID0gZmFsc2U7XG5cbiAgdGhpcy5vbmNlKCdlbmQnLCBvbmVuZCk7XG59XG5cbi8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXJcbmZ1bmN0aW9uIG9uZW5kKCkge1xuICAvLyBpZiB3ZSBhbGxvdyBoYWxmLW9wZW4gc3RhdGUsIG9yIGlmIHRoZSB3cml0YWJsZSBzaWRlIGVuZGVkLFxuICAvLyB0aGVuIHdlJ3JlIG9rLlxuICBpZiAodGhpcy5hbGxvd0hhbGZPcGVuIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpXG4gICAgcmV0dXJuO1xuXG4gIC8vIG5vIG1vcmUgZGF0YSBjYW4gYmUgd3JpdHRlbi5cbiAgLy8gQnV0IGFsbG93IG1vcmUgd3JpdGVzIHRvIGhhcHBlbiBpbiB0aGlzIHRpY2suXG4gIHByb2Nlc3NOZXh0VGljayhvbkVuZE5ULCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gb25FbmROVChzZWxmKSB7XG4gIHNlbGYuZW5kKCk7XG59XG5cbmZ1bmN0aW9uIGZvckVhY2ggKHhzLCBmKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZih4c1tpXSwgaSk7XG4gIH1cbn1cbiIsIi8vIGEgcGFzc3Rocm91Z2ggc3RyZWFtLlxuLy8gYmFzaWNhbGx5IGp1c3QgdGhlIG1vc3QgbWluaW1hbCBzb3J0IG9mIFRyYW5zZm9ybSBzdHJlYW0uXG4vLyBFdmVyeSB3cml0dGVuIGNodW5rIGdldHMgb3V0cHV0IGFzLWlzLlxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7XG5cbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCcuL19zdHJlYW1fdHJhbnNmb3JtJyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhQYXNzVGhyb3VnaCwgVHJhbnNmb3JtKTtcblxuZnVuY3Rpb24gUGFzc1Rocm91Z2gob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGFzc1Rocm91Z2gpKVxuICAgIHJldHVybiBuZXcgUGFzc1Rocm91Z2gob3B0aW9ucyk7XG5cbiAgVHJhbnNmb3JtLmNhbGwodGhpcywgb3B0aW9ucyk7XG59XG5cblBhc3NUaHJvdWdoLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjYihudWxsLCBjaHVuayk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWRhYmxlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHByb2Nlc3NOZXh0VGljayA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5Jyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5SZWFkYWJsZS5SZWFkYWJsZVN0YXRlID0gUmVhZGFibGVTdGF0ZTtcblxudmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgRUVsaXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICByZXR1cm4gZW1pdHRlci5saXN0ZW5lcnModHlwZSkubGVuZ3RoO1xufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBTdHJlYW07XG4oZnVuY3Rpb24gKCl7dHJ5e1xuICBTdHJlYW0gPSByZXF1aXJlKCdzdCcgKyAncmVhbScpO1xufWNhdGNoKF8pe31maW5hbGx5e1xuICBpZiAoIVN0cmVhbSlcbiAgICBTdHJlYW0gPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG59fSgpKVxuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgZGVidWdVdGlsID0gcmVxdWlyZSgndXRpbCcpO1xudmFyIGRlYnVnO1xuaWYgKGRlYnVnVXRpbCAmJiBkZWJ1Z1V0aWwuZGVidWdsb2cpIHtcbiAgZGVidWcgPSBkZWJ1Z1V0aWwuZGVidWdsb2coJ3N0cmVhbScpO1xufSBlbHNlIHtcbiAgZGVidWcgPSBmdW5jdGlvbiAoKSB7fTtcbn1cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgU3RyaW5nRGVjb2RlcjtcblxudXRpbC5pbmhlcml0cyhSZWFkYWJsZSwgU3RyZWFtKTtcblxuZnVuY3Rpb24gUmVhZGFibGVTdGF0ZShvcHRpb25zLCBzdHJlYW0pIHtcbiAgdmFyIER1cGxleCA9IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAvLyBvYmplY3Qgc3RyZWFtIGZsYWcuIFVzZWQgdG8gbWFrZSByZWFkKG4pIGlnbm9yZSBuIGFuZCB0b1xuICAvLyBtYWtlIGFsbCB0aGUgYnVmZmVyIG1lcmdpbmcgYW5kIGxlbmd0aCBjaGVja3MgZ28gYXdheVxuICB0aGlzLm9iamVjdE1vZGUgPSAhIW9wdGlvbnMub2JqZWN0TW9kZTtcblxuICBpZiAoc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4KVxuICAgIHRoaXMub2JqZWN0TW9kZSA9IHRoaXMub2JqZWN0TW9kZSB8fCAhIW9wdGlvbnMucmVhZGFibGVPYmplY3RNb2RlO1xuXG4gIC8vIHRoZSBwb2ludCBhdCB3aGljaCBpdCBzdG9wcyBjYWxsaW5nIF9yZWFkKCkgdG8gZmlsbCB0aGUgYnVmZmVyXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgXCJkb24ndCBjYWxsIF9yZWFkIHByZWVtcHRpdmVseSBldmVyXCJcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDtcbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gKGh3bSB8fCBod20gPT09IDApID8gaHdtIDogZGVmYXVsdEh3bTtcblxuICAvLyBjYXN0IHRvIGludHMuXG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrO1xuXG4gIHRoaXMuYnVmZmVyID0gW107XG4gIHRoaXMubGVuZ3RoID0gMDtcbiAgdGhpcy5waXBlcyA9IG51bGw7XG4gIHRoaXMucGlwZXNDb3VudCA9IDA7XG4gIHRoaXMuZmxvd2luZyA9IG51bGw7XG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIHRoaXMucmVhZGluZyA9IGZhbHNlO1xuXG4gIC8vIGEgZmxhZyB0byBiZSBhYmxlIHRvIHRlbGwgaWYgdGhlIG9ud3JpdGUgY2IgaXMgY2FsbGVkIGltbWVkaWF0ZWx5LFxuICAvLyBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlIGFueVxuICAvLyBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCB3cml0ZSBjYWxsLlxuICB0aGlzLnN5bmMgPSB0cnVlO1xuXG4gIC8vIHdoZW5ldmVyIHdlIHJldHVybiBudWxsLCB0aGVuIHdlIHNldCBhIGZsYWcgdG8gc2F5XG4gIC8vIHRoYXQgd2UncmUgYXdhaXRpbmcgYSAncmVhZGFibGUnIGV2ZW50IGVtaXNzaW9uLlxuICB0aGlzLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuICB0aGlzLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuICB0aGlzLnJlYWRhYmxlTGlzdGVuaW5nID0gZmFsc2U7XG5cbiAgLy8gQ3J5cHRvIGlzIGtpbmQgb2Ygb2xkIGFuZCBjcnVzdHkuICBIaXN0b3JpY2FsbHksIGl0cyBkZWZhdWx0IHN0cmluZ1xuICAvLyBlbmNvZGluZyBpcyAnYmluYXJ5JyBzbyB3ZSBoYXZlIHRvIG1ha2UgdGhpcyBjb25maWd1cmFibGUuXG4gIC8vIEV2ZXJ5dGhpbmcgZWxzZSBpbiB0aGUgdW5pdmVyc2UgdXNlcyAndXRmOCcsIHRob3VnaC5cbiAgdGhpcy5kZWZhdWx0RW5jb2RpbmcgPSBvcHRpb25zLmRlZmF1bHRFbmNvZGluZyB8fCAndXRmOCc7XG5cbiAgLy8gd2hlbiBwaXBpbmcsIHdlIG9ubHkgY2FyZSBhYm91dCAncmVhZGFibGUnIGV2ZW50cyB0aGF0IGhhcHBlblxuICAvLyBhZnRlciByZWFkKClpbmcgYWxsIHRoZSBieXRlcyBhbmQgbm90IGdldHRpbmcgYW55IHB1c2hiYWNrLlxuICB0aGlzLnJhbk91dCA9IGZhbHNlO1xuXG4gIC8vIHRoZSBudW1iZXIgb2Ygd3JpdGVycyB0aGF0IGFyZSBhd2FpdGluZyBhIGRyYWluIGV2ZW50IGluIC5waXBlKClzXG4gIHRoaXMuYXdhaXREcmFpbiA9IDA7XG5cbiAgLy8gaWYgdHJ1ZSwgYSBtYXliZVJlYWRNb3JlIGhhcyBiZWVuIHNjaGVkdWxlZFxuICB0aGlzLnJlYWRpbmdNb3JlID0gZmFsc2U7XG5cbiAgdGhpcy5kZWNvZGVyID0gbnVsbDtcbiAgdGhpcy5lbmNvZGluZyA9IG51bGw7XG4gIGlmIChvcHRpb25zLmVuY29kaW5nKSB7XG4gICAgaWYgKCFTdHJpbmdEZWNvZGVyKVxuICAgICAgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7XG4gICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gIH1cbn1cblxuZnVuY3Rpb24gUmVhZGFibGUob3B0aW9ucykge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpXG4gICAgcmV0dXJuIG5ldyBSZWFkYWJsZShvcHRpb25zKTtcblxuICB0aGlzLl9yZWFkYWJsZVN0YXRlID0gbmV3IFJlYWRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5XG4gIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuXG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLnJlYWQgPT09ICdmdW5jdGlvbicpXG4gICAgdGhpcy5fcmVhZCA9IG9wdGlvbnMucmVhZDtcblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuLy8gTWFudWFsbHkgc2hvdmUgc29tZXRoaW5nIGludG8gdGhlIHJlYWQoKSBidWZmZXIuXG4vLyBUaGlzIHJldHVybnMgdHJ1ZSBpZiB0aGUgaGlnaFdhdGVyTWFyayBoYXMgbm90IGJlZW4gaGl0IHlldCxcbi8vIHNpbWlsYXIgdG8gaG93IFdyaXRhYmxlLndyaXRlKCkgcmV0dXJucyB0cnVlIGlmIHlvdSBzaG91bGRcbi8vIHdyaXRlKCkgc29tZSBtb3JlLlxuUmVhZGFibGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykge1xuICAgIGVuY29kaW5nID0gZW5jb2RpbmcgfHwgc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuICAgIGlmIChlbmNvZGluZyAhPT0gc3RhdGUuZW5jb2RpbmcpIHtcbiAgICAgIGNodW5rID0gbmV3IEJ1ZmZlcihjaHVuaywgZW5jb2RpbmcpO1xuICAgICAgZW5jb2RpbmcgPSAnJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBmYWxzZSk7XG59O1xuXG4vLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKVxuUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbihjaHVuaykge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssICcnLCB0cnVlKTtcbn07XG5cblJlYWRhYmxlLnByb3RvdHlwZS5pc1BhdXNlZCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTtcbn07XG5cbmZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBhZGRUb0Zyb250KSB7XG4gIHZhciBlciA9IGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspO1xuICBpZiAoZXIpIHtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gIH0gZWxzZSBpZiAoY2h1bmsgPT09IG51bGwpIHtcbiAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKTtcbiAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHtcbiAgICBpZiAoc3RhdGUuZW5kZWQgJiYgIWFkZFRvRnJvbnQpIHtcbiAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0ucHVzaCgpIGFmdGVyIEVPRicpO1xuICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5lbmRFbWl0dGVkICYmIGFkZFRvRnJvbnQpIHtcbiAgICAgIHZhciBlID0gbmV3IEVycm9yKCdzdHJlYW0udW5zaGlmdCgpIGFmdGVyIGVuZCBldmVudCcpO1xuICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFhZGRUb0Zyb250ICYmICFlbmNvZGluZylcbiAgICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcblxuICAgICAgaWYgKCFhZGRUb0Zyb250KVxuICAgICAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG5cbiAgICAgIC8vIGlmIHdlIHdhbnQgdGhlIGRhdGEgbm93LCBqdXN0IGVtaXQgaXQuXG4gICAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLnN5bmMpIHtcbiAgICAgICAgc3RyZWFtLmVtaXQoJ2RhdGEnLCBjaHVuayk7XG4gICAgICAgIHN0cmVhbS5yZWFkKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdXBkYXRlIHRoZSBidWZmZXIgaW5mby5cbiAgICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgICAgICBpZiAoYWRkVG9Gcm9udClcbiAgICAgICAgICBzdGF0ZS5idWZmZXIudW5zaGlmdChjaHVuayk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG5cbiAgICAgICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSlcbiAgICAgICAgICBlbWl0UmVhZGFibGUoc3RyZWFtKTtcbiAgICAgIH1cblxuICAgICAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIWFkZFRvRnJvbnQpIHtcbiAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gbmVlZE1vcmVEYXRhKHN0YXRlKTtcbn1cblxuXG4vLyBpZiBpdCdzIHBhc3QgdGhlIGhpZ2ggd2F0ZXIgbWFyaywgd2UgY2FuIHB1c2ggaW4gc29tZSBtb3JlLlxuLy8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWVcbi8vIG1vcmUgYnl0ZXMuICBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLFxuLy8gc3VjaCBhcyB0aGUgcmVwbC4gIEFsc28sIGlmIHRoZSBwdXNoKCkgdHJpZ2dlcmVkIGFcbi8vIHJlYWRhYmxlIGV2ZW50LCBhbmQgdGhlIHVzZXIgY2FsbGVkIHJlYWQobGFyZ2VOdW1iZXIpIHN1Y2ggdGhhdFxuLy8gbmVlZFJlYWRhYmxlIHdhcyBzZXQsIHRoZW4gd2Ugb3VnaHQgdG8gcHVzaCBtb3JlLCBzbyB0aGF0IGFub3RoZXJcbi8vICdyZWFkYWJsZScgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQuXG5mdW5jdGlvbiBuZWVkTW9yZURhdGEoc3RhdGUpIHtcbiAgcmV0dXJuICFzdGF0ZS5lbmRlZCAmJlxuICAgICAgICAgKHN0YXRlLm5lZWRSZWFkYWJsZSB8fFxuICAgICAgICAgIHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHxcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggPT09IDApO1xufVxuXG4vLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cblJlYWRhYmxlLnByb3RvdHlwZS5zZXRFbmNvZGluZyA9IGZ1bmN0aW9uKGVuYykge1xuICBpZiAoIVN0cmluZ0RlY29kZXIpXG4gICAgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKGVuYyk7XG4gIHRoaXMuX3JlYWRhYmxlU3RhdGUuZW5jb2RpbmcgPSBlbmM7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gRG9uJ3QgcmFpc2UgdGhlIGh3bSA+IDhNQlxudmFyIE1BWF9IV00gPSAweDgwMDAwMDtcbmZ1bmN0aW9uIGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pIHtcbiAgaWYgKG4gPj0gTUFYX0hXTSkge1xuICAgIG4gPSBNQVhfSFdNO1xuICB9IGVsc2Uge1xuICAgIC8vIEdldCB0aGUgbmV4dCBoaWdoZXN0IHBvd2VyIG9mIDJcbiAgICBuLS07XG4gICAgbiB8PSBuID4+PiAxO1xuICAgIG4gfD0gbiA+Pj4gMjtcbiAgICBuIHw9IG4gPj4+IDQ7XG4gICAgbiB8PSBuID4+PiA4O1xuICAgIG4gfD0gbiA+Pj4gMTY7XG4gICAgbisrO1xuICB9XG4gIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpXG4gICAgcmV0dXJuIDA7XG5cbiAgaWYgKHN0YXRlLm9iamVjdE1vZGUpXG4gICAgcmV0dXJuIG4gPT09IDAgPyAwIDogMTtcblxuICBpZiAobiA9PT0gbnVsbCB8fCBpc05hTihuKSkge1xuICAgIC8vIG9ubHkgZmxvdyBvbmUgYnVmZmVyIGF0IGEgdGltZVxuICAgIGlmIChzdGF0ZS5mbG93aW5nICYmIHN0YXRlLmJ1ZmZlci5sZW5ndGgpXG4gICAgICByZXR1cm4gc3RhdGUuYnVmZmVyWzBdLmxlbmd0aDtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gc3RhdGUubGVuZ3RoO1xuICB9XG5cbiAgaWYgKG4gPD0gMClcbiAgICByZXR1cm4gMDtcblxuICAvLyBJZiB3ZSdyZSBhc2tpbmcgZm9yIG1vcmUgdGhhbiB0aGUgdGFyZ2V0IGJ1ZmZlciBsZXZlbCxcbiAgLy8gdGhlbiByYWlzZSB0aGUgd2F0ZXIgbWFyay4gIEJ1bXAgdXAgdG8gdGhlIG5leHQgaGlnaGVzdFxuICAvLyBwb3dlciBvZiAyLCB0byBwcmV2ZW50IGluY3JlYXNpbmcgaXQgZXhjZXNzaXZlbHkgaW4gdGlueVxuICAvLyBhbW91bnRzLlxuICBpZiAobiA+IHN0YXRlLmhpZ2hXYXRlck1hcmspXG4gICAgc3RhdGUuaGlnaFdhdGVyTWFyayA9IGNvbXB1dGVOZXdIaWdoV2F0ZXJNYXJrKG4pO1xuXG4gIC8vIGRvbid0IGhhdmUgdGhhdCBtdWNoLiAgcmV0dXJuIG51bGwsIHVubGVzcyB3ZSd2ZSBlbmRlZC5cbiAgaWYgKG4gPiBzdGF0ZS5sZW5ndGgpIHtcbiAgICBpZiAoIXN0YXRlLmVuZGVkKSB7XG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdGF0ZS5sZW5ndGg7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG47XG59XG5cbi8vIHlvdSBjYW4gb3ZlcnJpZGUgZWl0aGVyIHRoaXMgbWV0aG9kLCBvciB0aGUgYXN5bmMgX3JlYWQobikgYmVsb3cuXG5SZWFkYWJsZS5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgZGVidWcoJ3JlYWQnLCBuKTtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIG5PcmlnID0gbjtcblxuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPiAwKVxuICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuXG4gIC8vIGlmIHdlJ3JlIGRvaW5nIHJlYWQoMCkgdG8gdHJpZ2dlciBhIHJlYWRhYmxlIGV2ZW50LCBidXQgd2VcbiAgLy8gYWxyZWFkeSBoYXZlIGEgYnVuY2ggb2YgZGF0YSBpbiB0aGUgYnVmZmVyLCB0aGVuIGp1c3QgdHJpZ2dlclxuICAvLyB0aGUgJ3JlYWRhYmxlJyBldmVudCBhbmQgbW92ZSBvbi5cbiAgaWYgKG4gPT09IDAgJiZcbiAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSAmJlxuICAgICAgKHN0YXRlLmxlbmd0aCA+PSBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmVuZGVkKSkge1xuICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKVxuICAgICAgZW5kUmVhZGFibGUodGhpcyk7XG4gICAgZWxzZVxuICAgICAgZW1pdFJlYWRhYmxlKHRoaXMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbiA9IGhvd011Y2hUb1JlYWQobiwgc3RhdGUpO1xuXG4gIC8vIGlmIHdlJ3ZlIGVuZGVkLCBhbmQgd2UncmUgbm93IGNsZWFyLCB0aGVuIGZpbmlzaCBpdCB1cC5cbiAgaWYgKG4gPT09IDAgJiYgc3RhdGUuZW5kZWQpIHtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKVxuICAgICAgZW5kUmVhZGFibGUodGhpcyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBBbGwgdGhlIGFjdHVhbCBjaHVuayBnZW5lcmF0aW9uIGxvZ2ljIG5lZWRzIHRvIGJlXG4gIC8vICpiZWxvdyogdGhlIGNhbGwgdG8gX3JlYWQuICBUaGUgcmVhc29uIGlzIHRoYXQgaW4gY2VydGFpblxuICAvLyBzeW50aGV0aWMgc3RyZWFtIGNhc2VzLCBzdWNoIGFzIHBhc3N0aHJvdWdoIHN0cmVhbXMsIF9yZWFkXG4gIC8vIG1heSBiZSBhIGNvbXBsZXRlbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uIHdoaWNoIG1heSBjaGFuZ2VcbiAgLy8gdGhlIHN0YXRlIG9mIHRoZSByZWFkIGJ1ZmZlciwgcHJvdmlkaW5nIGVub3VnaCBkYXRhIHdoZW5cbiAgLy8gYmVmb3JlIHRoZXJlIHdhcyAqbm90KiBlbm91Z2guXG4gIC8vXG4gIC8vIFNvLCB0aGUgc3RlcHMgYXJlOlxuICAvLyAxLiBGaWd1cmUgb3V0IHdoYXQgdGhlIHN0YXRlIG9mIHRoaW5ncyB3aWxsIGJlIGFmdGVyIHdlIGRvXG4gIC8vIGEgcmVhZCBmcm9tIHRoZSBidWZmZXIuXG4gIC8vXG4gIC8vIDIuIElmIHRoYXQgcmVzdWx0aW5nIHN0YXRlIHdpbGwgdHJpZ2dlciBhIF9yZWFkLCB0aGVuIGNhbGwgX3JlYWQuXG4gIC8vIE5vdGUgdGhhdCB0aGlzIG1heSBiZSBhc3luY2hyb25vdXMsIG9yIHN5bmNocm9ub3VzLiAgWWVzLCBpdCBpc1xuICAvLyBkZWVwbHkgdWdseSB0byB3cml0ZSBBUElzIHRoaXMgd2F5LCBidXQgdGhhdCBzdGlsbCBkb2Vzbid0IG1lYW5cbiAgLy8gdGhhdCB0aGUgUmVhZGFibGUgY2xhc3Mgc2hvdWxkIGJlaGF2ZSBpbXByb3Blcmx5LCBhcyBzdHJlYW1zIGFyZVxuICAvLyBkZXNpZ25lZCB0byBiZSBzeW5jL2FzeW5jIGFnbm9zdGljLlxuICAvLyBUYWtlIG5vdGUgaWYgdGhlIF9yZWFkIGNhbGwgaXMgc3luYyBvciBhc3luYyAoaWUsIGlmIHRoZSByZWFkIGNhbGxcbiAgLy8gaGFzIHJldHVybmVkIHlldCksIHNvIHRoYXQgd2Uga25vdyB3aGV0aGVyIG9yIG5vdCBpdCdzIHNhZmUgdG8gZW1pdFxuICAvLyAncmVhZGFibGUnIGV0Yy5cbiAgLy9cbiAgLy8gMy4gQWN0dWFsbHkgcHVsbCB0aGUgcmVxdWVzdGVkIGNodW5rcyBvdXQgb2YgdGhlIGJ1ZmZlciBhbmQgcmV0dXJuLlxuXG4gIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy5cbiAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTtcbiAgZGVidWcoJ25lZWQgcmVhZGFibGUnLCBkb1JlYWQpO1xuXG4gIC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZVxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwIHx8IHN0YXRlLmxlbmd0aCAtIG4gPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZG9SZWFkID0gdHJ1ZTtcbiAgICBkZWJ1ZygnbGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsnLCBkb1JlYWQpO1xuICB9XG5cbiAgLy8gaG93ZXZlciwgaWYgd2UndmUgZW5kZWQsIHRoZW4gdGhlcmUncyBubyBwb2ludCwgYW5kIGlmIHdlJ3JlIGFscmVhZHlcbiAgLy8gcmVhZGluZywgdGhlbiBpdCdzIHVubmVjZXNzYXJ5LlxuICBpZiAoc3RhdGUuZW5kZWQgfHwgc3RhdGUucmVhZGluZykge1xuICAgIGRvUmVhZCA9IGZhbHNlO1xuICAgIGRlYnVnKCdyZWFkaW5nIG9yIGVuZGVkJywgZG9SZWFkKTtcbiAgfVxuXG4gIGlmIChkb1JlYWQpIHtcbiAgICBkZWJ1ZygnZG8gcmVhZCcpO1xuICAgIHN0YXRlLnJlYWRpbmcgPSB0cnVlO1xuICAgIHN0YXRlLnN5bmMgPSB0cnVlO1xuICAgIC8vIGlmIHRoZSBsZW5ndGggaXMgY3VycmVudGx5IHplcm8sIHRoZW4gd2UgKm5lZWQqIGEgcmVhZGFibGUgZXZlbnQuXG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMClcbiAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgLy8gY2FsbCBpbnRlcm5hbCByZWFkIG1ldGhvZFxuICAgIHRoaXMuX3JlYWQoc3RhdGUuaGlnaFdhdGVyTWFyayk7XG4gICAgc3RhdGUuc3luYyA9IGZhbHNlO1xuICB9XG5cbiAgLy8gSWYgX3JlYWQgcHVzaGVkIGRhdGEgc3luY2hyb25vdXNseSwgdGhlbiBgcmVhZGluZ2Agd2lsbCBiZSBmYWxzZSxcbiAgLy8gYW5kIHdlIG5lZWQgdG8gcmUtZXZhbHVhdGUgaG93IG11Y2ggZGF0YSB3ZSBjYW4gcmV0dXJuIHRvIHRoZSB1c2VyLlxuICBpZiAoZG9SZWFkICYmICFzdGF0ZS5yZWFkaW5nKVxuICAgIG4gPSBob3dNdWNoVG9SZWFkKG5PcmlnLCBzdGF0ZSk7XG5cbiAgdmFyIHJldDtcbiAgaWYgKG4gPiAwKVxuICAgIHJldCA9IGZyb21MaXN0KG4sIHN0YXRlKTtcbiAgZWxzZVxuICAgIHJldCA9IG51bGw7XG5cbiAgaWYgKHJldCA9PT0gbnVsbCkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgbiA9IDA7XG4gIH1cblxuICBzdGF0ZS5sZW5ndGggLT0gbjtcblxuICAvLyBJZiB3ZSBoYXZlIG5vdGhpbmcgaW4gdGhlIGJ1ZmZlciwgdGhlbiB3ZSB3YW50IHRvIGtub3dcbiAgLy8gYXMgc29vbiBhcyB3ZSAqZG8qIGdldCBzb21ldGhpbmcgaW50byB0aGUgYnVmZmVyLlxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5lbmRlZClcbiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXG4gIC8vIElmIHdlIHRyaWVkIHRvIHJlYWQoKSBwYXN0IHRoZSBFT0YsIHRoZW4gZW1pdCBlbmQgb24gdGhlIG5leHQgdGljay5cbiAgaWYgKG5PcmlnICE9PSBuICYmIHN0YXRlLmVuZGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMClcbiAgICBlbmRSZWFkYWJsZSh0aGlzKTtcblxuICBpZiAocmV0ICE9PSBudWxsKVxuICAgIHRoaXMuZW1pdCgnZGF0YScsIHJldCk7XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIGNodW5rSW52YWxpZChzdGF0ZSwgY2h1bmspIHtcbiAgdmFyIGVyID0gbnVsbDtcbiAgaWYgKCEoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgJiZcbiAgICAgIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiZcbiAgICAgIGNodW5rICE9PSBudWxsICYmXG4gICAgICBjaHVuayAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuICB9XG4gIHJldHVybiBlcjtcbn1cblxuXG5mdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmVuZGVkKSByZXR1cm47XG4gIGlmIChzdGF0ZS5kZWNvZGVyKSB7XG4gICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB7XG4gICAgICBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG4gICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG4gICAgfVxuICB9XG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcblxuICAvLyBlbWl0ICdyZWFkYWJsZScgbm93IHRvIG1ha2Ugc3VyZSBpdCBnZXRzIHBpY2tlZCB1cC5cbiAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG59XG5cbi8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlclxuLy8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyXG4vLyBhIG5leHRUaWNrIHJlY3Vyc2lvbiB3YXJuaW5nLCBidXQgdGhhdCdzIG5vdCBzbyBiYWQuXG5mdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgc3RhdGUubmVlZFJlYWRhYmxlID0gZmFsc2U7XG4gIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7XG4gICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpO1xuICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgaWYgKHN0YXRlLnN5bmMpXG4gICAgICBwcm9jZXNzTmV4dFRpY2soZW1pdFJlYWRhYmxlXywgc3RyZWFtKTtcbiAgICBlbHNlXG4gICAgICBlbWl0UmVhZGFibGVfKHN0cmVhbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlXyhzdHJlYW0pIHtcbiAgZGVidWcoJ2VtaXQgcmVhZGFibGUnKTtcbiAgc3RyZWFtLmVtaXQoJ3JlYWRhYmxlJyk7XG4gIGZsb3coc3RyZWFtKTtcbn1cblxuXG4vLyBhdCB0aGlzIHBvaW50LCB0aGUgdXNlciBoYXMgcHJlc3VtYWJseSBzZWVuIHRoZSAncmVhZGFibGUnIGV2ZW50LFxuLy8gYW5kIGNhbGxlZCByZWFkKCkgdG8gY29uc3VtZSBzb21lIGRhdGEuICB0aGF0IG1heSBoYXZlIHRyaWdnZXJlZFxuLy8gaW4gdHVybiBhbm90aGVyIF9yZWFkKG4pIGNhbGwsIGluIHdoaWNoIGNhc2UgcmVhZGluZyA9IHRydWUgaWZcbi8vIGl0J3MgaW4gcHJvZ3Jlc3MuXG4vLyBIb3dldmVyLCBpZiB3ZSdyZSBub3QgZW5kZWQsIG9yIHJlYWRpbmcsIGFuZCB0aGUgbGVuZ3RoIDwgaHdtLFxuLy8gdGhlbiBnbyBhaGVhZCBhbmQgdHJ5IHRvIHJlYWQgc29tZSBtb3JlIHByZWVtcHRpdmVseS5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmdNb3JlKSB7XG4gICAgc3RhdGUucmVhZGluZ01vcmUgPSB0cnVlO1xuICAgIHByb2Nlc3NOZXh0VGljayhtYXliZVJlYWRNb3JlXywgc3RyZWFtLCBzdGF0ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gbWF5YmVSZWFkTW9yZV8oc3RyZWFtLCBzdGF0ZSkge1xuICB2YXIgbGVuID0gc3RhdGUubGVuZ3RoO1xuICB3aGlsZSAoIXN0YXRlLnJlYWRpbmcgJiYgIXN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLmVuZGVkICYmXG4gICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZGVidWcoJ21heWJlUmVhZE1vcmUgcmVhZCAwJyk7XG4gICAgc3RyZWFtLnJlYWQoMCk7XG4gICAgaWYgKGxlbiA9PT0gc3RhdGUubGVuZ3RoKVxuICAgICAgLy8gZGlkbid0IGdldCBhbnkgZGF0YSwgc3RvcCBzcGlubmluZy5cbiAgICAgIGJyZWFrO1xuICAgIGVsc2VcbiAgICAgIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgfVxuICBzdGF0ZS5yZWFkaW5nTW9yZSA9IGZhbHNlO1xufVxuXG4vLyBhYnN0cmFjdCBtZXRob2QuICB0byBiZSBvdmVycmlkZGVuIGluIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG4vLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLlxuLy8gZm9yIHZpcnR1YWwgKG5vbi1zdHJpbmcsIG5vbi1idWZmZXIpIHN0cmVhbXMsIFwibGVuZ3RoXCIgaXMgc29tZXdoYXRcbi8vIGFyYml0cmFyeSwgYW5kIHBlcmhhcHMgbm90IHZlcnkgbWVhbmluZ2Z1bC5cblJlYWRhYmxlLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uKG4pIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBwaXBlT3B0cykge1xuICB2YXIgc3JjID0gdGhpcztcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICBzd2l0Y2ggKHN0YXRlLnBpcGVzQ291bnQpIHtcbiAgICBjYXNlIDA6XG4gICAgICBzdGF0ZS5waXBlcyA9IGRlc3Q7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDE6XG4gICAgICBzdGF0ZS5waXBlcyA9IFtzdGF0ZS5waXBlcywgZGVzdF07XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgc3RhdGUucGlwZXMucHVzaChkZXN0KTtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHN0YXRlLnBpcGVzQ291bnQgKz0gMTtcbiAgZGVidWcoJ3BpcGUgY291bnQ9JWQgb3B0cz0laicsIHN0YXRlLnBpcGVzQ291bnQsIHBpcGVPcHRzKTtcblxuICB2YXIgZG9FbmQgPSAoIXBpcGVPcHRzIHx8IHBpcGVPcHRzLmVuZCAhPT0gZmFsc2UpICYmXG4gICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3Rkb3V0ICYmXG4gICAgICAgICAgICAgIGRlc3QgIT09IHByb2Nlc3Muc3RkZXJyO1xuXG4gIHZhciBlbmRGbiA9IGRvRW5kID8gb25lbmQgOiBjbGVhbnVwO1xuICBpZiAoc3RhdGUuZW5kRW1pdHRlZClcbiAgICBwcm9jZXNzTmV4dFRpY2soZW5kRm4pO1xuICBlbHNlXG4gICAgc3JjLm9uY2UoJ2VuZCcsIGVuZEZuKTtcblxuICBkZXN0Lm9uKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gIGZ1bmN0aW9uIG9udW5waXBlKHJlYWRhYmxlKSB7XG4gICAgZGVidWcoJ29udW5waXBlJyk7XG4gICAgaWYgKHJlYWRhYmxlID09PSBzcmMpIHtcbiAgICAgIGNsZWFudXAoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICBkZWJ1Zygnb25lbmQnKTtcbiAgICBkZXN0LmVuZCgpO1xuICB9XG5cbiAgLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlclxuICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKClcbiAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXNcbiAgLy8gdG9vIHNsb3cuXG4gIHZhciBvbmRyYWluID0gcGlwZU9uRHJhaW4oc3JjKTtcbiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblxuICB2YXIgY2xlYW5lZFVwID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgZGVidWcoJ2NsZWFudXAnKTtcbiAgICAvLyBjbGVhbnVwIGV2ZW50IGhhbmRsZXJzIG9uY2UgdGhlIHBpcGUgaXMgYnJva2VuXG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ3VucGlwZScsIG9udW5waXBlKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApO1xuICAgIHNyYy5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7XG5cbiAgICBjbGVhbmVkVXAgPSB0cnVlO1xuXG4gICAgLy8gaWYgdGhlIHJlYWRlciBpcyB3YWl0aW5nIGZvciBhIGRyYWluIGV2ZW50IGZyb20gdGhpc1xuICAgIC8vIHNwZWNpZmljIHdyaXRlciwgdGhlbiBpdCB3b3VsZCBjYXVzZSBpdCB0byBuZXZlciBzdGFydFxuICAgIC8vIGZsb3dpbmcgYWdhaW4uXG4gICAgLy8gU28sIGlmIHRoaXMgaXMgYXdhaXRpbmcgYSBkcmFpbiwgdGhlbiB3ZSBqdXN0IGNhbGwgaXQgbm93LlxuICAgIC8vIElmIHdlIGRvbid0IGtub3csIHRoZW4gYXNzdW1lIHRoYXQgd2UgYXJlIHdhaXRpbmcgZm9yIG9uZS5cbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiAmJlxuICAgICAgICAoIWRlc3QuX3dyaXRhYmxlU3RhdGUgfHwgZGVzdC5fd3JpdGFibGVTdGF0ZS5uZWVkRHJhaW4pKVxuICAgICAgb25kcmFpbigpO1xuICB9XG5cbiAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTtcbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgZGVidWcoJ29uZGF0YScpO1xuICAgIHZhciByZXQgPSBkZXN0LndyaXRlKGNodW5rKTtcbiAgICBpZiAoZmFsc2UgPT09IHJldCkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgdW5waXBlZCBkdXJpbmcgYGRlc3Qud3JpdGUoKWAsIGl0IGlzIHBvc3NpYmxlXG4gICAgICAvLyB0byBnZXQgc3R1Y2sgaW4gYSBwZXJtYW5lbnRseSBwYXVzZWQgc3RhdGUgaWYgdGhhdCB3cml0ZVxuICAgICAgLy8gYWxzbyByZXR1cm5lZCBmYWxzZS5cbiAgICAgIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxICYmXG4gICAgICAgICAgc3RhdGUucGlwZXNbMF0gPT09IGRlc3QgJiZcbiAgICAgICAgICBzcmMubGlzdGVuZXJDb3VudCgnZGF0YScpID09PSAxICYmXG4gICAgICAgICAgIWNsZWFuZWRVcCkge1xuICAgICAgICBkZWJ1ZygnZmFsc2Ugd3JpdGUgcmVzcG9uc2UsIHBhdXNlJywgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4pO1xuICAgICAgICBzcmMuX3JlYWRhYmxlU3RhdGUuYXdhaXREcmFpbisrO1xuICAgICAgfVxuICAgICAgc3JjLnBhdXNlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIGRlc3QgaGFzIGFuIGVycm9yLCB0aGVuIHN0b3AgcGlwaW5nIGludG8gaXQuXG4gIC8vIGhvd2V2ZXIsIGRvbid0IHN1cHByZXNzIHRoZSB0aHJvd2luZyBiZWhhdmlvciBmb3IgdGhpcy5cbiAgZnVuY3Rpb24gb25lcnJvcihlcikge1xuICAgIGRlYnVnKCdvbmVycm9yJywgZXIpO1xuICAgIHVucGlwZSgpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgaWYgKEVFbGlzdGVuZXJDb3VudChkZXN0LCAnZXJyb3InKSA9PT0gMClcbiAgICAgIGRlc3QuZW1pdCgnZXJyb3InLCBlcik7XG4gIH1cbiAgLy8gVGhpcyBpcyBhIGJydXRhbGx5IHVnbHkgaGFjayB0byBtYWtlIHN1cmUgdGhhdCBvdXIgZXJyb3IgaGFuZGxlclxuICAvLyBpcyBhdHRhY2hlZCBiZWZvcmUgYW55IHVzZXJsYW5kIG9uZXMuICBORVZFUiBETyBUSElTLlxuICBpZiAoIWRlc3QuX2V2ZW50cyB8fCAhZGVzdC5fZXZlbnRzLmVycm9yKVxuICAgIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7XG4gIGVsc2UgaWYgKGlzQXJyYXkoZGVzdC5fZXZlbnRzLmVycm9yKSlcbiAgICBkZXN0Ll9ldmVudHMuZXJyb3IudW5zaGlmdChvbmVycm9yKTtcbiAgZWxzZVxuICAgIGRlc3QuX2V2ZW50cy5lcnJvciA9IFtvbmVycm9yLCBkZXN0Ll9ldmVudHMuZXJyb3JdO1xuXG5cbiAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgdW5waXBlKCk7XG4gIH1cbiAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpO1xuICBmdW5jdGlvbiBvbmZpbmlzaCgpIHtcbiAgICBkZWJ1Zygnb25maW5pc2gnKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIHVucGlwZSgpO1xuICB9XG4gIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpO1xuXG4gIGZ1bmN0aW9uIHVucGlwZSgpIHtcbiAgICBkZWJ1ZygndW5waXBlJyk7XG4gICAgc3JjLnVucGlwZShkZXN0KTtcbiAgfVxuXG4gIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvXG4gIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7XG5cbiAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LlxuICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTtcbiAgICBzcmMucmVzdW1lKCk7XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG5cbmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHN0YXRlID0gc3JjLl9yZWFkYWJsZVN0YXRlO1xuICAgIGRlYnVnKCdwaXBlT25EcmFpbicsIHN0YXRlLmF3YWl0RHJhaW4pO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluKVxuICAgICAgc3RhdGUuYXdhaXREcmFpbi0tO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFbGlzdGVuZXJDb3VudChzcmMsICdkYXRhJykpIHtcbiAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgICAgZmxvdyhzcmMpO1xuICAgIH1cbiAgfTtcbn1cblxuXG5SZWFkYWJsZS5wcm90b3R5cGUudW5waXBlID0gZnVuY3Rpb24oZGVzdCkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuXG4gIC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy5cbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDApXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgLy8ganVzdCBvbmUgZGVzdGluYXRpb24uICBtb3N0IGNvbW1vbiBjYXNlLlxuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSkge1xuICAgIC8vIHBhc3NlZCBpbiBvbmUsIGJ1dCBpdCdzIG5vdCB0aGUgcmlnaHQgb25lLlxuICAgIGlmIChkZXN0ICYmIGRlc3QgIT09IHN0YXRlLnBpcGVzKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAoIWRlc3QpXG4gICAgICBkZXN0ID0gc3RhdGUucGlwZXM7XG5cbiAgICAvLyBnb3QgYSBtYXRjaC5cbiAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG4gICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG4gICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIGlmIChkZXN0KVxuICAgICAgZGVzdC5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHNsb3cgY2FzZS4gbXVsdGlwbGUgcGlwZSBkZXN0aW5hdGlvbnMuXG5cbiAgaWYgKCFkZXN0KSB7XG4gICAgLy8gcmVtb3ZlIGFsbC5cbiAgICB2YXIgZGVzdHMgPSBzdGF0ZS5waXBlcztcbiAgICB2YXIgbGVuID0gc3RhdGUucGlwZXNDb3VudDtcbiAgICBzdGF0ZS5waXBlcyA9IG51bGw7XG4gICAgc3RhdGUucGlwZXNDb3VudCA9IDA7XG4gICAgc3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGRlc3RzW2ldLmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gdHJ5IHRvIGZpbmQgdGhlIHJpZ2h0IG9uZS5cbiAgdmFyIGkgPSBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KTtcbiAgaWYgKGkgPT09IC0xKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIHN0YXRlLnBpcGVzLnNwbGljZShpLCAxKTtcbiAgc3RhdGUucGlwZXNDb3VudCAtPSAxO1xuICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSlcbiAgICBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdO1xuXG4gIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBzZXQgdXAgZGF0YSBldmVudHMgaWYgdGhleSBhcmUgYXNrZWQgZm9yXG4vLyBFbnN1cmUgcmVhZGFibGUgbGlzdGVuZXJzIGV2ZW50dWFsbHkgZ2V0IHNvbWV0aGluZ1xuUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24oZXYsIGZuKSB7XG4gIHZhciByZXMgPSBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwodGhpcywgZXYsIGZuKTtcblxuICAvLyBJZiBsaXN0ZW5pbmcgdG8gZGF0YSwgYW5kIGl0IGhhcyBub3QgZXhwbGljaXRseSBiZWVuIHBhdXNlZCxcbiAgLy8gdGhlbiBjYWxsIHJlc3VtZSB0byBzdGFydCB0aGUgZmxvdyBvZiBkYXRhIG9uIHRoZSBuZXh0IHRpY2suXG4gIGlmIChldiA9PT0gJ2RhdGEnICYmIGZhbHNlICE9PSB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpIHtcbiAgICB0aGlzLnJlc3VtZSgpO1xuICB9XG5cbiAgaWYgKGV2ID09PSAncmVhZGFibGUnICYmIHRoaXMucmVhZGFibGUpIHtcbiAgICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICAgIGlmICghc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcpIHtcbiAgICAgIHN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IGZhbHNlO1xuICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICAgIGlmICghc3RhdGUucmVhZGluZykge1xuICAgICAgICBwcm9jZXNzTmV4dFRpY2soblJlYWRpbmdOZXh0VGljaywgdGhpcyk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxlbmd0aCkge1xuICAgICAgICBlbWl0UmVhZGFibGUodGhpcywgc3RhdGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuUmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uO1xuXG5mdW5jdGlvbiBuUmVhZGluZ05leHRUaWNrKHNlbGYpIHtcbiAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpO1xuICBzZWxmLnJlYWQoMCk7XG59XG5cbi8vIHBhdXNlKCkgYW5kIHJlc3VtZSgpIGFyZSByZW1uYW50cyBvZiB0aGUgbGVnYWN5IHJlYWRhYmxlIHN0cmVhbSBBUElcbi8vIElmIHRoZSB1c2VyIHVzZXMgdGhlbSwgdGhlbiBzd2l0Y2ggaW50byBvbGQgbW9kZS5cblJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZScpO1xuICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgIHJlc3VtZSh0aGlzLCBzdGF0ZSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiByZXN1bWUoc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlc3VtZVNjaGVkdWxlZCkge1xuICAgIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IHRydWU7XG4gICAgcHJvY2Vzc05leHRUaWNrKHJlc3VtZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJlc3VtZV8oc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICBkZWJ1ZygncmVzdW1lIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICB9XG5cbiAgc3RhdGUucmVzdW1lU2NoZWR1bGVkID0gZmFsc2U7XG4gIHN0cmVhbS5lbWl0KCdyZXN1bWUnKTtcbiAgZmxvdyhzdHJlYW0pO1xuICBpZiAoc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUucmVhZGluZylcbiAgICBzdHJlYW0ucmVhZCgwKTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gIGRlYnVnKCdjYWxsIHBhdXNlIGZsb3dpbmc9JWonLCB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpO1xuICBpZiAoZmFsc2UgIT09IHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdwYXVzZScpO1xuICAgIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9IGZhbHNlO1xuICAgIHRoaXMuZW1pdCgncGF1c2UnKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGZsb3coc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgZGVidWcoJ2Zsb3cnLCBzdGF0ZS5mbG93aW5nKTtcbiAgaWYgKHN0YXRlLmZsb3dpbmcpIHtcbiAgICBkbyB7XG4gICAgICB2YXIgY2h1bmsgPSBzdHJlYW0ucmVhZCgpO1xuICAgIH0gd2hpbGUgKG51bGwgIT09IGNodW5rICYmIHN0YXRlLmZsb3dpbmcpO1xuICB9XG59XG5cbi8vIHdyYXAgYW4gb2xkLXN0eWxlIHN0cmVhbSBhcyB0aGUgYXN5bmMgZGF0YSBzb3VyY2UuXG4vLyBUaGlzIGlzICpub3QqIHBhcnQgb2YgdGhlIHJlYWRhYmxlIHN0cmVhbSBpbnRlcmZhY2UuXG4vLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS5cblJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24oc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBwYXVzZWQgPSBmYWxzZTtcblxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHN0cmVhbS5vbignZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZW5kJyk7XG4gICAgaWYgKHN0YXRlLmRlY29kZXIgJiYgIXN0YXRlLmVuZGVkKSB7XG4gICAgICB2YXIgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLmVuZCgpO1xuICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aClcbiAgICAgICAgc2VsZi5wdXNoKGNodW5rKTtcbiAgICB9XG5cbiAgICBzZWxmLnB1c2gobnVsbCk7XG4gIH0pO1xuXG4gIHN0cmVhbS5vbignZGF0YScsIGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgZGF0YScpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyKVxuICAgICAgY2h1bmsgPSBzdGF0ZS5kZWNvZGVyLndyaXRlKGNodW5rKTtcblxuICAgIC8vIGRvbid0IHNraXAgb3ZlciBmYWxzeSB2YWx1ZXMgaW4gb2JqZWN0TW9kZVxuICAgIGlmIChzdGF0ZS5vYmplY3RNb2RlICYmIChjaHVuayA9PT0gbnVsbCB8fCBjaHVuayA9PT0gdW5kZWZpbmVkKSlcbiAgICAgIHJldHVybjtcbiAgICBlbHNlIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiAoIWNodW5rIHx8ICFjaHVuay5sZW5ndGgpKVxuICAgICAgcmV0dXJuO1xuXG4gICAgdmFyIHJldCA9IHNlbGYucHVzaChjaHVuayk7XG4gICAgaWYgKCFyZXQpIHtcbiAgICAgIHBhdXNlZCA9IHRydWU7XG4gICAgICBzdHJlYW0ucGF1c2UoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIHByb3h5IGFsbCB0aGUgb3RoZXIgbWV0aG9kcy5cbiAgLy8gaW1wb3J0YW50IHdoZW4gd3JhcHBpbmcgZmlsdGVycyBhbmQgZHVwbGV4ZXMuXG4gIGZvciAodmFyIGkgaW4gc3RyZWFtKSB7XG4gICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzW2ldID0gZnVuY3Rpb24obWV0aG9kKSB7IHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHN0cmVhbVttZXRob2RdLmFwcGx5KHN0cmVhbSwgYXJndW1lbnRzKTtcbiAgICAgIH07IH0oaSk7XG4gICAgfVxuICB9XG5cbiAgLy8gcHJveHkgY2VydGFpbiBpbXBvcnRhbnQgZXZlbnRzLlxuICB2YXIgZXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddO1xuICBmb3JFYWNoKGV2ZW50cywgZnVuY3Rpb24oZXYpIHtcbiAgICBzdHJlYW0ub24oZXYsIHNlbGYuZW1pdC5iaW5kKHNlbGYsIGV2KSk7XG4gIH0pO1xuXG4gIC8vIHdoZW4gd2UgdHJ5IHRvIGNvbnN1bWUgc29tZSBtb3JlIGJ5dGVzLCBzaW1wbHkgdW5wYXVzZSB0aGVcbiAgLy8gdW5kZXJseWluZyBzdHJlYW0uXG4gIHNlbGYuX3JlYWQgPSBmdW5jdGlvbihuKSB7XG4gICAgZGVidWcoJ3dyYXBwZWQgX3JlYWQnLCBuKTtcbiAgICBpZiAocGF1c2VkKSB7XG4gICAgICBwYXVzZWQgPSBmYWxzZTtcbiAgICAgIHN0cmVhbS5yZXN1bWUoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHNlbGY7XG59O1xuXG5cbi8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS5cblJlYWRhYmxlLl9mcm9tTGlzdCA9IGZyb21MaXN0O1xuXG4vLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuXG4vLyBMZW5ndGggaXMgdGhlIGNvbWJpbmVkIGxlbmd0aHMgb2YgYWxsIHRoZSBidWZmZXJzIGluIHRoZSBsaXN0LlxuZnVuY3Rpb24gZnJvbUxpc3Qobiwgc3RhdGUpIHtcbiAgdmFyIGxpc3QgPSBzdGF0ZS5idWZmZXI7XG4gIHZhciBsZW5ndGggPSBzdGF0ZS5sZW5ndGg7XG4gIHZhciBzdHJpbmdNb2RlID0gISFzdGF0ZS5kZWNvZGVyO1xuICB2YXIgb2JqZWN0TW9kZSA9ICEhc3RhdGUub2JqZWN0TW9kZTtcbiAgdmFyIHJldDtcblxuICAvLyBub3RoaW5nIGluIHRoZSBsaXN0LCBkZWZpbml0ZWx5IGVtcHR5LlxuICBpZiAobGlzdC5sZW5ndGggPT09IDApXG4gICAgcmV0dXJuIG51bGw7XG5cbiAgaWYgKGxlbmd0aCA9PT0gMClcbiAgICByZXQgPSBudWxsO1xuICBlbHNlIGlmIChvYmplY3RNb2RlKVxuICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcbiAgZWxzZSBpZiAoIW4gfHwgbiA+PSBsZW5ndGgpIHtcbiAgICAvLyByZWFkIGl0IGFsbCwgdHJ1bmNhdGUgdGhlIGFycmF5LlxuICAgIGlmIChzdHJpbmdNb2RlKVxuICAgICAgcmV0ID0gbGlzdC5qb2luKCcnKTtcbiAgICBlbHNlIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgIHJldCA9IGxpc3RbMF07XG4gICAgZWxzZVxuICAgICAgcmV0ID0gQnVmZmVyLmNvbmNhdChsaXN0LCBsZW5ndGgpO1xuICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgfSBlbHNlIHtcbiAgICAvLyByZWFkIGp1c3Qgc29tZSBvZiBpdC5cbiAgICBpZiAobiA8IGxpc3RbMF0ubGVuZ3RoKSB7XG4gICAgICAvLyBqdXN0IHRha2UgYSBwYXJ0IG9mIHRoZSBmaXJzdCBsaXN0IGl0ZW0uXG4gICAgICAvLyBzbGljZSBpcyB0aGUgc2FtZSBmb3IgYnVmZmVycyBhbmQgc3RyaW5ncy5cbiAgICAgIHZhciBidWYgPSBsaXN0WzBdO1xuICAgICAgcmV0ID0gYnVmLnNsaWNlKDAsIG4pO1xuICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShuKTtcbiAgICB9IGVsc2UgaWYgKG4gPT09IGxpc3RbMF0ubGVuZ3RoKSB7XG4gICAgICAvLyBmaXJzdCBsaXN0IGlzIGEgcGVyZmVjdCBtYXRjaFxuICAgICAgcmV0ID0gbGlzdC5zaGlmdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb21wbGV4IGNhc2UuXG4gICAgICAvLyB3ZSBoYXZlIGVub3VnaCB0byBjb3ZlciBpdCwgYnV0IGl0IHNwYW5zIHBhc3QgdGhlIGZpcnN0IGJ1ZmZlci5cbiAgICAgIGlmIChzdHJpbmdNb2RlKVxuICAgICAgICByZXQgPSAnJztcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0ID0gbmV3IEJ1ZmZlcihuKTtcblxuICAgICAgdmFyIGMgPSAwO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBsaXN0Lmxlbmd0aDsgaSA8IGwgJiYgYyA8IG47IGkrKykge1xuICAgICAgICB2YXIgYnVmID0gbGlzdFswXTtcbiAgICAgICAgdmFyIGNweSA9IE1hdGgubWluKG4gLSBjLCBidWYubGVuZ3RoKTtcblxuICAgICAgICBpZiAoc3RyaW5nTW9kZSlcbiAgICAgICAgICByZXQgKz0gYnVmLnNsaWNlKDAsIGNweSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBidWYuY29weShyZXQsIGMsIDAsIGNweSk7XG5cbiAgICAgICAgaWYgKGNweSA8IGJ1Zi5sZW5ndGgpXG4gICAgICAgICAgbGlzdFswXSA9IGJ1Zi5zbGljZShjcHkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgbGlzdC5zaGlmdCgpO1xuXG4gICAgICAgIGMgKz0gY3B5O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG5cbiAgLy8gSWYgd2UgZ2V0IGhlcmUgYmVmb3JlIGNvbnN1bWluZyBhbGwgdGhlIGJ5dGVzLCB0aGVuIHRoYXQgaXMgYVxuICAvLyBidWcgaW4gbm9kZS4gIFNob3VsZCBuZXZlciBoYXBwZW4uXG4gIGlmIChzdGF0ZS5sZW5ndGggPiAwKVxuICAgIHRocm93IG5ldyBFcnJvcignZW5kUmVhZGFibGUgY2FsbGVkIG9uIG5vbi1lbXB0eSBzdHJlYW0nKTtcblxuICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQpIHtcbiAgICBzdGF0ZS5lbmRlZCA9IHRydWU7XG4gICAgcHJvY2Vzc05leHRUaWNrKGVuZFJlYWRhYmxlTlQsIHN0YXRlLCBzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVuZFJlYWRhYmxlTlQoc3RhdGUsIHN0cmVhbSkge1xuICAvLyBDaGVjayB0aGF0IHdlIGRpZG4ndCBnZXQgb25lIGxhc3QgdW5zaGlmdC5cbiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmIHN0YXRlLmxlbmd0aCA9PT0gMCkge1xuICAgIHN0YXRlLmVuZEVtaXR0ZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5yZWFkYWJsZSA9IGZhbHNlO1xuICAgIHN0cmVhbS5lbWl0KCdlbmQnKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JFYWNoICh4cywgZikge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGYoeHNbaV0sIGkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGV4T2YgKHhzLCB4KSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0geHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaWYgKHhzW2ldID09PSB4KSByZXR1cm4gaTtcbiAgfVxuICByZXR1cm4gLTE7XG59XG4iLCIvLyBhIHRyYW5zZm9ybSBzdHJlYW0gaXMgYSByZWFkYWJsZS93cml0YWJsZSBzdHJlYW0gd2hlcmUgeW91IGRvXG4vLyBzb21ldGhpbmcgd2l0aCB0aGUgZGF0YS4gIFNvbWV0aW1lcyBpdCdzIGNhbGxlZCBhIFwiZmlsdGVyXCIsXG4vLyBidXQgdGhhdCdzIG5vdCBhIGdyZWF0IG5hbWUgZm9yIGl0LCBzaW5jZSB0aGF0IGltcGxpZXMgYSB0aGluZyB3aGVyZVxuLy8gc29tZSBiaXRzIHBhc3MgdGhyb3VnaCwgYW5kIG90aGVycyBhcmUgc2ltcGx5IGlnbm9yZWQuICAoVGhhdCB3b3VsZFxuLy8gYmUgYSB2YWxpZCBleGFtcGxlIG9mIGEgdHJhbnNmb3JtLCBvZiBjb3Vyc2UuKVxuLy9cbi8vIFdoaWxlIHRoZSBvdXRwdXQgaXMgY2F1c2FsbHkgcmVsYXRlZCB0byB0aGUgaW5wdXQsIGl0J3Mgbm90IGFcbi8vIG5lY2Vzc2FyaWx5IHN5bW1ldHJpYyBvciBzeW5jaHJvbm91cyB0cmFuc2Zvcm1hdGlvbi4gIEZvciBleGFtcGxlLFxuLy8gYSB6bGliIHN0cmVhbSBtaWdodCB0YWtlIG11bHRpcGxlIHBsYWluLXRleHQgd3JpdGVzKCksIGFuZCB0aGVuXG4vLyBlbWl0IGEgc2luZ2xlIGNvbXByZXNzZWQgY2h1bmsgc29tZSB0aW1lIGluIHRoZSBmdXR1cmUuXG4vL1xuLy8gSGVyZSdzIGhvdyB0aGlzIHdvcmtzOlxuLy9cbi8vIFRoZSBUcmFuc2Zvcm0gc3RyZWFtIGhhcyBhbGwgdGhlIGFzcGVjdHMgb2YgdGhlIHJlYWRhYmxlIGFuZCB3cml0YWJsZVxuLy8gc3RyZWFtIGNsYXNzZXMuICBXaGVuIHlvdSB3cml0ZShjaHVuayksIHRoYXQgY2FsbHMgX3dyaXRlKGNodW5rLGNiKVxuLy8gaW50ZXJuYWxseSwgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhlcmUncyBhIGxvdCBvZiBwZW5kaW5nIHdyaXRlc1xuLy8gYnVmZmVyZWQgdXAuICBXaGVuIHlvdSBjYWxsIHJlYWQoKSwgdGhhdCBjYWxscyBfcmVhZChuKSB1bnRpbFxuLy8gdGhlcmUncyBlbm91Z2ggcGVuZGluZyByZWFkYWJsZSBkYXRhIGJ1ZmZlcmVkIHVwLlxuLy9cbi8vIEluIGEgdHJhbnNmb3JtIHN0cmVhbSwgdGhlIHdyaXR0ZW4gZGF0YSBpcyBwbGFjZWQgaW4gYSBidWZmZXIuICBXaGVuXG4vLyBfcmVhZChuKSBpcyBjYWxsZWQsIGl0IHRyYW5zZm9ybXMgdGhlIHF1ZXVlZCB1cCBkYXRhLCBjYWxsaW5nIHRoZVxuLy8gYnVmZmVyZWQgX3dyaXRlIGNiJ3MgYXMgaXQgY29uc3VtZXMgY2h1bmtzLiAgSWYgY29uc3VtaW5nIGEgc2luZ2xlXG4vLyB3cml0dGVuIGNodW5rIHdvdWxkIHJlc3VsdCBpbiBtdWx0aXBsZSBvdXRwdXQgY2h1bmtzLCB0aGVuIHRoZSBmaXJzdFxuLy8gb3V0cHV0dGVkIGJpdCBjYWxscyB0aGUgcmVhZGNiLCBhbmQgc3Vic2VxdWVudCBjaHVua3MganVzdCBnbyBpbnRvXG4vLyB0aGUgcmVhZCBidWZmZXIsIGFuZCB3aWxsIGNhdXNlIGl0IHRvIGVtaXQgJ3JlYWRhYmxlJyBpZiBuZWNlc3NhcnkuXG4vL1xuLy8gVGhpcyB3YXksIGJhY2stcHJlc3N1cmUgaXMgYWN0dWFsbHkgZGV0ZXJtaW5lZCBieSB0aGUgcmVhZGluZyBzaWRlLFxuLy8gc2luY2UgX3JlYWQgaGFzIHRvIGJlIGNhbGxlZCB0byBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IGNodW5rLiAgSG93ZXZlcixcbi8vIGEgcGF0aG9sb2dpY2FsIGluZmxhdGUgdHlwZSBvZiB0cmFuc2Zvcm0gY2FuIGNhdXNlIGV4Y2Vzc2l2ZSBidWZmZXJpbmdcbi8vIGhlcmUuICBGb3IgZXhhbXBsZSwgaW1hZ2luZSBhIHN0cmVhbSB3aGVyZSBldmVyeSBieXRlIG9mIGlucHV0IGlzXG4vLyBpbnRlcnByZXRlZCBhcyBhbiBpbnRlZ2VyIGZyb20gMC0yNTUsIGFuZCB0aGVuIHJlc3VsdHMgaW4gdGhhdCBtYW55XG4vLyBieXRlcyBvZiBvdXRwdXQuICBXcml0aW5nIHRoZSA0IGJ5dGVzIHtmZixmZixmZixmZn0gd291bGQgcmVzdWx0IGluXG4vLyAxa2Igb2YgZGF0YSBiZWluZyBvdXRwdXQuICBJbiB0aGlzIGNhc2UsIHlvdSBjb3VsZCB3cml0ZSBhIHZlcnkgc21hbGxcbi8vIGFtb3VudCBvZiBpbnB1dCwgYW5kIGVuZCB1cCB3aXRoIGEgdmVyeSBsYXJnZSBhbW91bnQgb2Ygb3V0cHV0LiAgSW5cbi8vIHN1Y2ggYSBwYXRob2xvZ2ljYWwgaW5mbGF0aW5nIG1lY2hhbmlzbSwgdGhlcmUnZCBiZSBubyB3YXkgdG8gdGVsbFxuLy8gdGhlIHN5c3RlbSB0byBzdG9wIGRvaW5nIHRoZSB0cmFuc2Zvcm0uICBBIHNpbmdsZSA0TUIgd3JpdGUgY291bGRcbi8vIGNhdXNlIHRoZSBzeXN0ZW0gdG8gcnVuIG91dCBvZiBtZW1vcnkuXG4vL1xuLy8gSG93ZXZlciwgZXZlbiBpbiBzdWNoIGEgcGF0aG9sb2dpY2FsIGNhc2UsIG9ubHkgYSBzaW5nbGUgd3JpdHRlbiBjaHVua1xuLy8gd291bGQgYmUgY29uc3VtZWQsIGFuZCB0aGVuIHRoZSByZXN0IHdvdWxkIHdhaXQgKHVuLXRyYW5zZm9ybWVkKSB1bnRpbFxuLy8gdGhlIHJlc3VsdHMgb2YgdGhlIHByZXZpb3VzIHRyYW5zZm9ybWVkIGNodW5rIHdlcmUgY29uc3VtZWQuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBUcmFuc2Zvcm07XG5cbnZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhUcmFuc2Zvcm0sIER1cGxleCk7XG5cblxuZnVuY3Rpb24gVHJhbnNmb3JtU3RhdGUoc3RyZWFtKSB7XG4gIHRoaXMuYWZ0ZXJUcmFuc2Zvcm0gPSBmdW5jdGlvbihlciwgZGF0YSkge1xuICAgIHJldHVybiBhZnRlclRyYW5zZm9ybShzdHJlYW0sIGVyLCBkYXRhKTtcbiAgfTtcblxuICB0aGlzLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgdGhpcy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcbiAgdGhpcy53cml0ZWNodW5rID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSkge1xuICB2YXIgdHMgPSBzdHJlYW0uX3RyYW5zZm9ybVN0YXRlO1xuICB0cy50cmFuc2Zvcm1pbmcgPSBmYWxzZTtcblxuICB2YXIgY2IgPSB0cy53cml0ZWNiO1xuXG4gIGlmICghY2IpXG4gICAgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignbm8gd3JpdGVjYiBpbiBUcmFuc2Zvcm0gY2xhc3MnKSk7XG5cbiAgdHMud3JpdGVjaHVuayA9IG51bGw7XG4gIHRzLndyaXRlY2IgPSBudWxsO1xuXG4gIGlmIChkYXRhICE9PSBudWxsICYmIGRhdGEgIT09IHVuZGVmaW5lZClcbiAgICBzdHJlYW0ucHVzaChkYXRhKTtcblxuICBpZiAoY2IpXG4gICAgY2IoZXIpO1xuXG4gIHZhciBycyA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgcnMucmVhZGluZyA9IGZhbHNlO1xuICBpZiAocnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHtcbiAgICBzdHJlYW0uX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBUcmFuc2Zvcm0ob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSlcbiAgICByZXR1cm4gbmV3IFRyYW5zZm9ybShvcHRpb25zKTtcblxuICBEdXBsZXguY2FsbCh0aGlzLCBvcHRpb25zKTtcblxuICB0aGlzLl90cmFuc2Zvcm1TdGF0ZSA9IG5ldyBUcmFuc2Zvcm1TdGF0ZSh0aGlzKTtcblxuICAvLyB3aGVuIHRoZSB3cml0YWJsZSBzaWRlIGZpbmlzaGVzLCB0aGVuIGZsdXNoIG91dCBhbnl0aGluZyByZW1haW5pbmcuXG4gIHZhciBzdHJlYW0gPSB0aGlzO1xuXG4gIC8vIHN0YXJ0IG91dCBhc2tpbmcgZm9yIGEgcmVhZGFibGUgZXZlbnQgb25jZSBkYXRhIGlzIHRyYW5zZm9ybWVkLlxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgLy8gd2UgaGF2ZSBpbXBsZW1lbnRlZCB0aGUgX3JlYWQgbWV0aG9kLCBhbmQgZG9uZSB0aGUgb3RoZXIgdGhpbmdzXG4gIC8vIHRoYXQgUmVhZGFibGUgd2FudHMgYmVmb3JlIHRoZSBmaXJzdCBfcmVhZCBjYWxsLCBzbyB1bnNldCB0aGVcbiAgLy8gc3luYyBndWFyZCBmbGFnLlxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLnN5bmMgPSBmYWxzZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50cmFuc2Zvcm0gPT09ICdmdW5jdGlvbicpXG4gICAgICB0aGlzLl90cmFuc2Zvcm0gPSBvcHRpb25zLnRyYW5zZm9ybTtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5mbHVzaCA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgIHRoaXMuX2ZsdXNoID0gb3B0aW9ucy5mbHVzaDtcbiAgfVxuXG4gIHRoaXMub25jZSgncHJlZmluaXNoJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9mbHVzaCA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgIHRoaXMuX2ZsdXNoKGZ1bmN0aW9uKGVyKSB7XG4gICAgICAgIGRvbmUoc3RyZWFtLCBlcik7XG4gICAgICB9KTtcbiAgICBlbHNlXG4gICAgICBkb25lKHN0cmVhbSk7XG4gIH0pO1xufVxuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcpIHtcbiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUubmVlZFRyYW5zZm9ybSA9IGZhbHNlO1xuICByZXR1cm4gRHVwbGV4LnByb3RvdHlwZS5wdXNoLmNhbGwodGhpcywgY2h1bmssIGVuY29kaW5nKTtcbn07XG5cbi8vIFRoaXMgaXMgdGhlIHBhcnQgd2hlcmUgeW91IGRvIHN0dWZmIVxuLy8gb3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiBpbiBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuLy8gJ2NodW5rJyBpcyBhbiBpbnB1dCBjaHVuay5cbi8vXG4vLyBDYWxsIGBwdXNoKG5ld0NodW5rKWAgdG8gcGFzcyBhbG9uZyB0cmFuc2Zvcm1lZCBvdXRwdXRcbi8vIHRvIHRoZSByZWFkYWJsZSBzaWRlLiAgWW91IG1heSBjYWxsICdwdXNoJyB6ZXJvIG9yIG1vcmUgdGltZXMuXG4vL1xuLy8gQ2FsbCBgY2IoZXJyKWAgd2hlbiB5b3UgYXJlIGRvbmUgd2l0aCB0aGlzIGNodW5rLiAgSWYgeW91IHBhc3Ncbi8vIGFuIGVycm9yLCB0aGVuIHRoYXQnbGwgcHV0IHRoZSBodXJ0IG9uIHRoZSB3aG9sZSBvcGVyYXRpb24uICBJZiB5b3Vcbi8vIG5ldmVyIGNhbGwgY2IoKSwgdGhlbiB5b3UnbGwgbmV2ZXIgZ2V0IGFub3RoZXIgY2h1bmsuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl90cmFuc2Zvcm0gPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHRocm93IG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJyk7XG59O1xuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHRzID0gdGhpcy5fdHJhbnNmb3JtU3RhdGU7XG4gIHRzLndyaXRlY2IgPSBjYjtcbiAgdHMud3JpdGVjaHVuayA9IGNodW5rO1xuICB0cy53cml0ZWVuY29kaW5nID0gZW5jb2Rpbmc7XG4gIGlmICghdHMudHJhbnNmb3JtaW5nKSB7XG4gICAgdmFyIHJzID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAodHMubmVlZFRyYW5zZm9ybSB8fFxuICAgICAgICBycy5uZWVkUmVhZGFibGUgfHxcbiAgICAgICAgcnMubGVuZ3RoIDwgcnMuaGlnaFdhdGVyTWFyaylcbiAgICAgIHRoaXMuX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7XG4gIH1cbn07XG5cbi8vIERvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGFyZ3MgYXJlIGhlcmUuXG4vLyBfdHJhbnNmb3JtIGRvZXMgYWxsIHRoZSB3b3JrLlxuLy8gVGhhdCB3ZSBnb3QgaGVyZSBtZWFucyB0aGF0IHRoZSByZWFkYWJsZSBzaWRlIHdhbnRzIG1vcmUgZGF0YS5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbihuKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuXG4gIGlmICh0cy53cml0ZWNodW5rICE9PSBudWxsICYmIHRzLndyaXRlY2IgJiYgIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHRzLnRyYW5zZm9ybWluZyA9IHRydWU7XG4gICAgdGhpcy5fdHJhbnNmb3JtKHRzLndyaXRlY2h1bmssIHRzLndyaXRlZW5jb2RpbmcsIHRzLmFmdGVyVHJhbnNmb3JtKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBtYXJrIHRoYXQgd2UgbmVlZCBhIHRyYW5zZm9ybSwgc28gdGhhdCBhbnkgZGF0YSB0aGF0IGNvbWVzIGluXG4gICAgLy8gd2lsbCBnZXQgcHJvY2Vzc2VkLCBub3cgdGhhdCB3ZSd2ZSBhc2tlZCBmb3IgaXQuXG4gICAgdHMubmVlZFRyYW5zZm9ybSA9IHRydWU7XG4gIH1cbn07XG5cblxuZnVuY3Rpb24gZG9uZShzdHJlYW0sIGVyKSB7XG4gIGlmIChlcilcbiAgICByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuXG4gIC8vIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGVuIHRoYXQgbWVhbnNcbiAgLy8gdGhhdCBub3RoaW5nIG1vcmUgd2lsbCBldmVyIGJlIHByb3ZpZGVkXG4gIHZhciB3cyA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTtcblxuICBpZiAod3MubGVuZ3RoKVxuICAgIHRocm93IG5ldyBFcnJvcignY2FsbGluZyB0cmFuc2Zvcm0gZG9uZSB3aGVuIHdzLmxlbmd0aCAhPSAwJyk7XG5cbiAgaWYgKHRzLnRyYW5zZm9ybWluZylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiBzdGlsbCB0cmFuc2Zvcm1pbmcnKTtcblxuICByZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG59XG4iLCIvLyBBIGJpdCBzaW1wbGVyIHRoYW4gcmVhZGFibGUgc3RyZWFtcy5cbi8vIEltcGxlbWVudCBhbiBhc3luYyAuX3dyaXRlKGNodW5rLCBlbmNvZGluZywgY2IpLCBhbmQgaXQnbGwgaGFuZGxlIGFsbFxuLy8gdGhlIGRyYWluIGV2ZW50IGVtaXNzaW9uIGFuZCBidWZmZXJpbmcuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBXcml0YWJsZTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBwcm9jZXNzTmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzLW5leHRpY2stYXJncycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuV3JpdGFibGUuV3JpdGFibGVTdGF0ZSA9IFdyaXRhYmxlU3RhdGU7XG5cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgaW50ZXJuYWxVdGlsID0ge1xuICBkZXByZWNhdGU6IHJlcXVpcmUoJ3V0aWwtZGVwcmVjYXRlJylcbn07XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgU3RyZWFtO1xuKGZ1bmN0aW9uICgpe3RyeXtcbiAgU3RyZWFtID0gcmVxdWlyZSgnc3QnICsgJ3JlYW0nKTtcbn1jYXRjaChfKXt9ZmluYWxseXtcbiAgaWYgKCFTdHJlYW0pXG4gICAgU3RyZWFtID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xufX0oKSlcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyO1xuXG51dGlsLmluaGVyaXRzKFdyaXRhYmxlLCBTdHJlYW0pO1xuXG5mdW5jdGlvbiBub3AoKSB7fVxuXG5mdW5jdGlvbiBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHRoaXMuY2h1bmsgPSBjaHVuaztcbiAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nO1xuICB0aGlzLmNhbGxiYWNrID0gY2I7XG4gIHRoaXMubmV4dCA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIHZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnIHRvIGluZGljYXRlIHdoZXRoZXIgb3Igbm90IHRoaXMgc3RyZWFtXG4gIC8vIGNvbnRhaW5zIGJ1ZmZlcnMgb3Igb2JqZWN0cy5cbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cbiAgaWYgKHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleClcbiAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLndyaXRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggd3JpdGUoKSBzdGFydHMgcmV0dXJuaW5nIGZhbHNlXG4gIC8vIE5vdGU6IDAgaXMgYSB2YWxpZCB2YWx1ZSwgbWVhbnMgdGhhdCB3ZSBhbHdheXMgcmV0dXJuIGZhbHNlIGlmXG4gIC8vIHRoZSBlbnRpcmUgYnVmZmVyIGlzIG5vdCBmbHVzaGVkIGltbWVkaWF0ZWx5IG9uIHdyaXRlKClcbiAgdmFyIGh3bSA9IG9wdGlvbnMuaGlnaFdhdGVyTWFyaztcbiAgdmFyIGRlZmF1bHRId20gPSB0aGlzLm9iamVjdE1vZGUgPyAxNiA6IDE2ICogMTAyNDtcbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gKGh3bSB8fCBod20gPT09IDApID8gaHdtIDogZGVmYXVsdEh3bTtcblxuICAvLyBjYXN0IHRvIGludHMuXG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IH5+dGhpcy5oaWdoV2F0ZXJNYXJrO1xuXG4gIHRoaXMubmVlZERyYWluID0gZmFsc2U7XG4gIC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpXG4gIHRoaXMuZW5kaW5nID0gZmFsc2U7XG4gIC8vIHdoZW4gZW5kKCkgaGFzIGJlZW4gY2FsbGVkLCBhbmQgcmV0dXJuZWRcbiAgdGhpcy5lbmRlZCA9IGZhbHNlO1xuICAvLyB3aGVuICdmaW5pc2gnIGlzIGVtaXR0ZWRcbiAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIHNob3VsZCB3ZSBkZWNvZGUgc3RyaW5ncyBpbnRvIGJ1ZmZlcnMgYmVmb3JlIHBhc3NpbmcgdG8gX3dyaXRlP1xuICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmdcbiAgLy8gaGFuZGxpbmcgYXQgYSBsb3dlciBsZXZlbC5cbiAgdmFyIG5vRGVjb2RlID0gb3B0aW9ucy5kZWNvZGVTdHJpbmdzID09PSBmYWxzZTtcbiAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIG5vdCBhbiBhY3R1YWwgYnVmZmVyIHdlIGtlZXAgdHJhY2sgb2YsIGJ1dCBhIG1lYXN1cmVtZW50XG4gIC8vIG9mIGhvdyBtdWNoIHdlJ3JlIHdhaXRpbmcgdG8gZ2V0IHB1c2hlZCB0byBzb21lIHVuZGVybHlpbmdcbiAgLy8gc29ja2V0IG9yIGZpbGUuXG4gIHRoaXMubGVuZ3RoID0gMDtcblxuICAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLlxuICB0aGlzLndyaXRpbmcgPSBmYWxzZTtcblxuICAvLyB3aGVuIHRydWUgYWxsIHdyaXRlcyB3aWxsIGJlIGJ1ZmZlcmVkIHVudGlsIC51bmNvcmsoKSBjYWxsXG4gIHRoaXMuY29ya2VkID0gMDtcblxuICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSxcbiAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnlcbiAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgXCJsYXRlclwiIHNob3VsZCBnZW5lcmFsbHkgYWxzb1xuICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC5cbiAgdGhpcy5zeW5jID0gdHJ1ZTtcblxuICAvLyBhIGZsYWcgdG8ga25vdyBpZiB3ZSdyZSBwcm9jZXNzaW5nIHByZXZpb3VzbHkgYnVmZmVyZWQgaXRlbXMsIHdoaWNoXG4gIC8vIG1heSBjYWxsIHRoZSBfd3JpdGUoKSBjYWxsYmFjayBpbiB0aGUgc2FtZSB0aWNrLCBzbyB0aGF0IHdlIGRvbid0XG4gIC8vIGVuZCB1cCBpbiBhbiBvdmVybGFwcGVkIG9ud3JpdGUgc2l0dWF0aW9uLlxuICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCB0byBfd3JpdGUoY2h1bmssY2IpXG4gIHRoaXMub253cml0ZSA9IGZ1bmN0aW9uKGVyKSB7XG4gICAgb253cml0ZShzdHJlYW0sIGVyKTtcbiAgfTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCB0aGUgdXNlciBzdXBwbGllcyB0byB3cml0ZShjaHVuayxlbmNvZGluZyxjYilcbiAgdGhpcy53cml0ZWNiID0gbnVsbDtcblxuICAvLyB0aGUgYW1vdW50IHRoYXQgaXMgYmVpbmcgd3JpdHRlbiB3aGVuIF93cml0ZSBpcyBjYWxsZWQuXG4gIHRoaXMud3JpdGVsZW4gPSAwO1xuXG4gIHRoaXMuYnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgdGhpcy5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcblxuICAvLyBudW1iZXIgb2YgcGVuZGluZyB1c2VyLXN1cHBsaWVkIHdyaXRlIGNhbGxiYWNrc1xuICAvLyB0aGlzIG11c3QgYmUgMCBiZWZvcmUgJ2ZpbmlzaCcgY2FuIGJlIGVtaXR0ZWRcbiAgdGhpcy5wZW5kaW5nY2IgPSAwO1xuXG4gIC8vIGVtaXQgcHJlZmluaXNoIGlmIHRoZSBvbmx5IHRoaW5nIHdlJ3JlIHdhaXRpbmcgZm9yIGlzIF93cml0ZSBjYnNcbiAgLy8gVGhpcyBpcyByZWxldmFudCBmb3Igc3luY2hyb25vdXMgVHJhbnNmb3JtIHN0cmVhbXNcbiAgdGhpcy5wcmVmaW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIFRydWUgaWYgdGhlIGVycm9yIHdhcyBhbHJlYWR5IGVtaXR0ZWQgYW5kIHNob3VsZCBub3QgYmUgdGhyb3duIGFnYWluXG4gIHRoaXMuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG59XG5cbldyaXRhYmxlU3RhdGUucHJvdG90eXBlLmdldEJ1ZmZlciA9IGZ1bmN0aW9uIHdyaXRhYmxlU3RhdGVHZXRCdWZmZXIoKSB7XG4gIHZhciBjdXJyZW50ID0gdGhpcy5idWZmZXJlZFJlcXVlc3Q7XG4gIHZhciBvdXQgPSBbXTtcbiAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICBvdXQucHVzaChjdXJyZW50KTtcbiAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0O1xuICB9XG4gIHJldHVybiBvdXQ7XG59O1xuXG4oZnVuY3Rpb24gKCl7dHJ5IHtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZVN0YXRlLnByb3RvdHlwZSwgJ2J1ZmZlcicsIHtcbiAgZ2V0OiBpbnRlcm5hbFV0aWwuZGVwcmVjYXRlKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdldEJ1ZmZlcigpO1xuICB9LCAnX3dyaXRhYmxlU3RhdGUuYnVmZmVyIGlzIGRlcHJlY2F0ZWQuIFVzZSBfd3JpdGFibGVTdGF0ZS5nZXRCdWZmZXIgJyArXG4gICAgICdpbnN0ZWFkLicpXG59KTtcbn1jYXRjaChfKXt9fSgpKTtcblxuXG5mdW5jdGlvbiBXcml0YWJsZShvcHRpb25zKSB7XG4gIHZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgLy8gV3JpdGFibGUgY3RvciBpcyBhcHBsaWVkIHRvIER1cGxleGVzLCB0aG91Z2ggdGhleSdyZSBub3RcbiAgLy8gaW5zdGFuY2VvZiBXcml0YWJsZSwgdGhleSdyZSBpbnN0YW5jZW9mIFJlYWRhYmxlLlxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgV3JpdGFibGUpICYmICEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpXG4gICAgcmV0dXJuIG5ldyBXcml0YWJsZShvcHRpb25zKTtcblxuICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5LlxuICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgIHRoaXMuX3dyaXRlID0gb3B0aW9ucy53cml0ZTtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZXYgPT09ICdmdW5jdGlvbicpXG4gICAgICB0aGlzLl93cml0ZXYgPSBvcHRpb25zLndyaXRldjtcbiAgfVxuXG4gIFN0cmVhbS5jYWxsKHRoaXMpO1xufVxuXG4vLyBPdGhlcndpc2UgcGVvcGxlIGNhbiBwaXBlIFdyaXRhYmxlIHN0cmVhbXMsIHdoaWNoIGlzIGp1c3Qgd3JvbmcuXG5Xcml0YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdDYW5ub3QgcGlwZS4gTm90IHJlYWRhYmxlLicpKTtcbn07XG5cblxuZnVuY3Rpb24gd3JpdGVBZnRlckVuZChzdHJlYW0sIGNiKSB7XG4gIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7XG4gIC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiXG4gIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7XG59XG5cbi8vIElmIHdlIGdldCBzb21ldGhpbmcgdGhhdCBpcyBub3QgYSBidWZmZXIsIHN0cmluZywgbnVsbCwgb3IgdW5kZWZpbmVkLFxuLy8gYW5kIHdlJ3JlIG5vdCBpbiBvYmplY3RNb2RlLCB0aGVuIHRoYXQncyBhbiBlcnJvci5cbi8vIE90aGVyd2lzZSBzdHJlYW0gY2h1bmtzIGFyZSBhbGwgY29uc2lkZXJlZCB0byBiZSBvZiBsZW5ndGg9MSwgYW5kIHRoZVxuLy8gd2F0ZXJtYXJrcyBkZXRlcm1pbmUgaG93IG1hbnkgb2JqZWN0cyB0byBrZWVwIGluIHRoZSBidWZmZXIsIHJhdGhlciB0aGFuXG4vLyBob3cgbWFueSBieXRlcyBvciBjaGFyYWN0ZXJzLlxuZnVuY3Rpb24gdmFsaWRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgY2IpIHtcbiAgdmFyIHZhbGlkID0gdHJ1ZTtcblxuICBpZiAoIShCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSAmJlxuICAgICAgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJlxuICAgICAgY2h1bmsgIT09IG51bGwgJiZcbiAgICAgIGNodW5rICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgdmFyIGVyID0gbmV3IFR5cGVFcnJvcignSW52YWxpZCBub24tc3RyaW5nL2J1ZmZlciBjaHVuaycpO1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgICBwcm9jZXNzTmV4dFRpY2soY2IsIGVyKTtcbiAgICB2YWxpZCA9IGZhbHNlO1xuICB9XG4gIHJldHVybiB2YWxpZDtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuICB2YXIgcmV0ID0gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpXG4gICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcbiAgZWxzZSBpZiAoIWVuY29kaW5nKVxuICAgIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuXG4gIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpXG4gICAgY2IgPSBub3A7XG5cbiAgaWYgKHN0YXRlLmVuZGVkKVxuICAgIHdyaXRlQWZ0ZXJFbmQodGhpcywgY2IpO1xuICBlbHNlIGlmICh2YWxpZENodW5rKHRoaXMsIHN0YXRlLCBjaHVuaywgY2IpKSB7XG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgcmV0ID0gd3JpdGVPckJ1ZmZlcih0aGlzLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gIH1cblxuICByZXR1cm4gcmV0O1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLmNvcmsgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBzdGF0ZS5jb3JrZWQrKztcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkLS07XG5cbiAgICBpZiAoIXN0YXRlLndyaXRpbmcgJiZcbiAgICAgICAgIXN0YXRlLmNvcmtlZCAmJlxuICAgICAgICAhc3RhdGUuZmluaXNoZWQgJiZcbiAgICAgICAgIXN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgJiZcbiAgICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0KVxuICAgICAgY2xlYXJCdWZmZXIodGhpcywgc3RhdGUpO1xuICB9XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuc2V0RGVmYXVsdEVuY29kaW5nID0gZnVuY3Rpb24gc2V0RGVmYXVsdEVuY29kaW5nKGVuY29kaW5nKSB7XG4gIC8vIG5vZGU6OlBhcnNlRW5jb2RpbmcoKSByZXF1aXJlcyBsb3dlciBjYXNlLlxuICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJylcbiAgICBlbmNvZGluZyA9IGVuY29kaW5nLnRvTG93ZXJDYXNlKCk7XG4gIGlmICghKFsnaGV4JywgJ3V0ZjgnLCAndXRmLTgnLCAnYXNjaWknLCAnYmluYXJ5JywgJ2Jhc2U2NCcsXG4ndWNzMicsICd1Y3MtMicsJ3V0ZjE2bGUnLCAndXRmLTE2bGUnLCAncmF3J11cbi5pbmRleE9mKChlbmNvZGluZyArICcnKS50b0xvd2VyQ2FzZSgpKSA+IC0xKSlcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICB0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZyA9IGVuY29kaW5nO1xufTtcblxuZnVuY3Rpb24gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZykge1xuICBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiZcbiAgICAgIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmXG4gICAgICB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7XG4gICAgY2h1bmsgPSBuZXcgQnVmZmVyKGNodW5rLCBlbmNvZGluZyk7XG4gIH1cbiAgcmV0dXJuIGNodW5rO1xufVxuXG4vLyBpZiB3ZSdyZSBhbHJlYWR5IHdyaXRpbmcgc29tZXRoaW5nLCB0aGVuIGp1c3QgcHV0IHRoaXNcbi8vIGluIHRoZSBxdWV1ZSwgYW5kIHdhaXQgb3VyIHR1cm4uICBPdGhlcndpc2UsIGNhbGwgX3dyaXRlXG4vLyBJZiB3ZSByZXR1cm4gZmFsc2UsIHRoZW4gd2UgbmVlZCBhIGRyYWluIGV2ZW50LCBzbyBzZXQgdGhhdCBmbGFnLlxuZnVuY3Rpb24gd3JpdGVPckJ1ZmZlcihzdHJlYW0sIHN0YXRlLCBjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNodW5rID0gZGVjb2RlQ2h1bmsoc3RhdGUsIGNodW5rLCBlbmNvZGluZyk7XG5cbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpXG4gICAgZW5jb2RpbmcgPSAnYnVmZmVyJztcbiAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXG4gIHN0YXRlLmxlbmd0aCArPSBsZW47XG5cbiAgdmFyIHJldCA9IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcms7XG4gIC8vIHdlIG11c3QgZW5zdXJlIHRoYXQgcHJldmlvdXMgbmVlZERyYWluIHdpbGwgbm90IGJlIHJlc2V0IHRvIGZhbHNlLlxuICBpZiAoIXJldClcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSB0cnVlO1xuXG4gIGlmIChzdGF0ZS53cml0aW5nIHx8IHN0YXRlLmNvcmtlZCkge1xuICAgIHZhciBsYXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbmV3IFdyaXRlUmVxKGNodW5rLCBlbmNvZGluZywgY2IpO1xuICAgIGlmIChsYXN0KSB7XG4gICAgICBsYXN0Lm5leHQgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0O1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB3cml0ZXYsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBzdGF0ZS53cml0ZWxlbiA9IGxlbjtcbiAgc3RhdGUud3JpdGVjYiA9IGNiO1xuICBzdGF0ZS53cml0aW5nID0gdHJ1ZTtcbiAgc3RhdGUuc3luYyA9IHRydWU7XG4gIGlmICh3cml0ZXYpXG4gICAgc3RyZWFtLl93cml0ZXYoY2h1bmssIHN0YXRlLm9ud3JpdGUpO1xuICBlbHNlXG4gICAgc3RyZWFtLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIHN0YXRlLm9ud3JpdGUpO1xuICBzdGF0ZS5zeW5jID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpIHtcbiAgLS1zdGF0ZS5wZW5kaW5nY2I7XG4gIGlmIChzeW5jKVxuICAgIHByb2Nlc3NOZXh0VGljayhjYiwgZXIpO1xuICBlbHNlXG4gICAgY2IoZXIpO1xuXG4gIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSkge1xuICBzdGF0ZS53cml0aW5nID0gZmFsc2U7XG4gIHN0YXRlLndyaXRlY2IgPSBudWxsO1xuICBzdGF0ZS5sZW5ndGggLT0gc3RhdGUud3JpdGVsZW47XG4gIHN0YXRlLndyaXRlbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gb253cml0ZShzdHJlYW0sIGVyKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHN5bmMgPSBzdGF0ZS5zeW5jO1xuICB2YXIgY2IgPSBzdGF0ZS53cml0ZWNiO1xuXG4gIG9ud3JpdGVTdGF0ZVVwZGF0ZShzdGF0ZSk7XG5cbiAgaWYgKGVyKVxuICAgIG9ud3JpdGVFcnJvcihzdHJlYW0sIHN0YXRlLCBzeW5jLCBlciwgY2IpO1xuICBlbHNlIHtcbiAgICAvLyBDaGVjayBpZiB3ZSdyZSBhY3R1YWxseSByZWFkeSB0byBmaW5pc2gsIGJ1dCBkb24ndCBlbWl0IHlldFxuICAgIHZhciBmaW5pc2hlZCA9IG5lZWRGaW5pc2goc3RhdGUpO1xuXG4gICAgaWYgKCFmaW5pc2hlZCAmJlxuICAgICAgICAhc3RhdGUuY29ya2VkICYmXG4gICAgICAgICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmXG4gICAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkge1xuICAgICAgY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuXG4gICAgaWYgKHN5bmMpIHtcbiAgICAgIHByb2Nlc3NOZXh0VGljayhhZnRlcldyaXRlLCBzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKSB7XG4gIGlmICghZmluaXNoZWQpXG4gICAgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpO1xuICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgY2IoKTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG59XG5cbi8vIE11c3QgZm9yY2UgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIG9uIG5leHRUaWNrLCBzbyB0aGF0IHdlIGRvbid0XG4vLyBlbWl0ICdkcmFpbicgYmVmb3JlIHRoZSB3cml0ZSgpIGNvbnN1bWVyIGdldHMgdGhlICdmYWxzZScgcmV0dXJuXG4vLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLlxuZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHtcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTtcbiAgfVxufVxuXG5cbi8vIGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGluIHRoZSBidWZmZXIgd2FpdGluZywgdGhlbiBwcm9jZXNzIGl0XG5mdW5jdGlvbiBjbGVhckJ1ZmZlcihzdHJlYW0sIHN0YXRlKSB7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSB0cnVlO1xuICB2YXIgZW50cnkgPSBzdGF0ZS5idWZmZXJlZFJlcXVlc3Q7XG5cbiAgaWYgKHN0cmVhbS5fd3JpdGV2ICYmIGVudHJ5ICYmIGVudHJ5Lm5leHQpIHtcbiAgICAvLyBGYXN0IGNhc2UsIHdyaXRlIGV2ZXJ5dGhpbmcgdXNpbmcgX3dyaXRldigpXG4gICAgdmFyIGJ1ZmZlciA9IFtdO1xuICAgIHZhciBjYnMgPSBbXTtcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGNicy5wdXNoKGVudHJ5LmNhbGxiYWNrKTtcbiAgICAgIGJ1ZmZlci5wdXNoKGVudHJ5KTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDtcbiAgICB9XG5cbiAgICAvLyBjb3VudCB0aGUgb25lIHdlIGFyZSBhZGRpbmcsIGFzIHdlbGwuXG4gICAgLy8gVE9ETyhpc2FhY3MpIGNsZWFuIHRoaXMgdXBcbiAgICBzdGF0ZS5wZW5kaW5nY2IrKztcbiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHRydWUsIHN0YXRlLmxlbmd0aCwgYnVmZmVyLCAnJywgZnVuY3Rpb24oZXJyKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNicy5sZW5ndGg7IGkrKykge1xuICAgICAgICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgICAgICAgY2JzW2ldKGVycik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBDbGVhciBidWZmZXJcbiAgfSBlbHNlIHtcbiAgICAvLyBTbG93IGNhc2UsIHdyaXRlIGNodW5rcyBvbmUtYnktb25lXG4gICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICB2YXIgY2h1bmsgPSBlbnRyeS5jaHVuaztcbiAgICAgIHZhciBlbmNvZGluZyA9IGVudHJ5LmVuY29kaW5nO1xuICAgICAgdmFyIGNiID0gZW50cnkuY2FsbGJhY2s7XG4gICAgICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cbiAgICAgIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmFsc2UsIGxlbiwgY2h1bmssIGVuY29kaW5nLCBjYik7XG4gICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gICAgICAvLyBpZiB3ZSBkaWRuJ3QgY2FsbCB0aGUgb253cml0ZSBpbW1lZGlhdGVseSwgdGhlblxuICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy5cbiAgICAgIC8vIGFsc28sIHRoYXQgbWVhbnMgdGhhdCB0aGUgY2h1bmsgYW5kIGNiIGFyZSBjdXJyZW50bHlcbiAgICAgIC8vIGJlaW5nIHByb2Nlc3NlZCwgc28gbW92ZSB0aGUgYnVmZmVyIGNvdW50ZXIgcGFzdCB0aGVtLlxuICAgICAgaWYgKHN0YXRlLndyaXRpbmcpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVudHJ5ID09PSBudWxsKVxuICAgICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gIH1cbiAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gZW50cnk7XG4gIHN0YXRlLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcbn1cblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobmV3IEVycm9yKCdub3QgaW1wbGVtZW50ZWQnKSk7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuX3dyaXRldiA9IG51bGw7XG5cbldyaXRhYmxlLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cbiAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gY2h1bms7XG4gICAgY2h1bmsgPSBudWxsO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmIChjaHVuayAhPT0gbnVsbCAmJiBjaHVuayAhPT0gdW5kZWZpbmVkKVxuICAgIHRoaXMud3JpdGUoY2h1bmssIGVuY29kaW5nKTtcblxuICAvLyAuZW5kKCkgZnVsbHkgdW5jb3Jrc1xuICBpZiAoc3RhdGUuY29ya2VkKSB7XG4gICAgc3RhdGUuY29ya2VkID0gMTtcbiAgICB0aGlzLnVuY29yaygpO1xuICB9XG5cbiAgLy8gaWdub3JlIHVubmVjZXNzYXJ5IGVuZCgpIGNhbGxzLlxuICBpZiAoIXN0YXRlLmVuZGluZyAmJiAhc3RhdGUuZmluaXNoZWQpXG4gICAgZW5kV3JpdGFibGUodGhpcywgc3RhdGUsIGNiKTtcbn07XG5cblxuZnVuY3Rpb24gbmVlZEZpbmlzaChzdGF0ZSkge1xuICByZXR1cm4gKHN0YXRlLmVuZGluZyAmJlxuICAgICAgICAgIHN0YXRlLmxlbmd0aCA9PT0gMCAmJlxuICAgICAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9PT0gbnVsbCAmJlxuICAgICAgICAgICFzdGF0ZS5maW5pc2hlZCAmJlxuICAgICAgICAgICFzdGF0ZS53cml0aW5nKTtcbn1cblxuZnVuY3Rpb24gcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5wcmVmaW5pc2hlZCkge1xuICAgIHN0YXRlLnByZWZpbmlzaGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0uZW1pdCgncHJlZmluaXNoJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSkge1xuICB2YXIgbmVlZCA9IG5lZWRGaW5pc2goc3RhdGUpO1xuICBpZiAobmVlZCkge1xuICAgIGlmIChzdGF0ZS5wZW5kaW5nY2IgPT09IDApIHtcbiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTtcbiAgICAgIHN0YXRlLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5lbWl0KCdmaW5pc2gnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmVlZDtcbn1cblxuZnVuY3Rpb24gZW5kV3JpdGFibGUoc3RyZWFtLCBzdGF0ZSwgY2IpIHtcbiAgc3RhdGUuZW5kaW5nID0gdHJ1ZTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG4gIGlmIChjYikge1xuICAgIGlmIChzdGF0ZS5maW5pc2hlZClcbiAgICAgIHByb2Nlc3NOZXh0VGljayhjYik7XG4gICAgZWxzZVxuICAgICAgc3RyZWFtLm9uY2UoJ2ZpbmlzaCcsIGNiKTtcbiAgfVxuICBzdGF0ZS5lbmRlZCA9IHRydWU7XG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzXCIpXG4iLCJ2YXIgU3RyZWFtID0gKGZ1bmN0aW9uICgpe1xuICB0cnkge1xuICAgIHJldHVybiByZXF1aXJlKCdzdCcgKyAncmVhbScpOyAvLyBoYWNrIHRvIGZpeCBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgaXNzdWUgd2hlbiB1c2VkIHdpdGggYnJvd3NlcmlmeVxuICB9IGNhdGNoKF8pe31cbn0oKSk7XG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzJyk7XG5leHBvcnRzLlN0cmVhbSA9IFN0cmVhbSB8fCBleHBvcnRzO1xuZXhwb3J0cy5SZWFkYWJsZSA9IGV4cG9ydHM7XG5leHBvcnRzLldyaXRhYmxlID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcycpO1xuZXhwb3J0cy5EdXBsZXggPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX2R1cGxleC5qcycpO1xuZXhwb3J0cy5UcmFuc2Zvcm0gPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcycpO1xuZXhwb3J0cy5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMnKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vbGliL19zdHJlYW1fdHJhbnNmb3JtLmpzXCIpXG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzXCIpXG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxubW9kdWxlLmV4cG9ydHMgPSBTdHJlYW07XG5cbnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG5cbmluaGVyaXRzKFN0cmVhbSwgRUUpO1xuU3RyZWFtLlJlYWRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLmpzJyk7XG5TdHJlYW0uV3JpdGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMnKTtcblN0cmVhbS5EdXBsZXggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vZHVwbGV4LmpzJyk7XG5TdHJlYW0uVHJhbnNmb3JtID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcycpO1xuU3RyZWFtLlBhc3NUaHJvdWdoID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3Bhc3N0aHJvdWdoLmpzJyk7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuNC54XG5TdHJlYW0uU3RyZWFtID0gU3RyZWFtO1xuXG5cblxuLy8gb2xkLXN0eWxlIHN0cmVhbXMuICBOb3RlIHRoYXQgdGhlIHBpcGUgbWV0aG9kICh0aGUgb25seSByZWxldmFudFxuLy8gcGFydCBvZiB0aGlzIGNsYXNzKSBpcyBvdmVycmlkZGVuIGluIHRoZSBSZWFkYWJsZSBjbGFzcy5cblxuZnVuY3Rpb24gU3RyZWFtKCkge1xuICBFRS5jYWxsKHRoaXMpO1xufVxuXG5TdHJlYW0ucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbihkZXN0LCBvcHRpb25zKSB7XG4gIHZhciBzb3VyY2UgPSB0aGlzO1xuXG4gIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuICAgIGlmIChkZXN0LndyaXRhYmxlKSB7XG4gICAgICBpZiAoZmFsc2UgPT09IGRlc3Qud3JpdGUoY2h1bmspICYmIHNvdXJjZS5wYXVzZSkge1xuICAgICAgICBzb3VyY2UucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3VyY2Uub24oJ2RhdGEnLCBvbmRhdGEpO1xuXG4gIGZ1bmN0aW9uIG9uZHJhaW4oKSB7XG4gICAgaWYgKHNvdXJjZS5yZWFkYWJsZSAmJiBzb3VyY2UucmVzdW1lKSB7XG4gICAgICBzb3VyY2UucmVzdW1lKCk7XG4gICAgfVxuICB9XG5cbiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblxuICAvLyBJZiB0aGUgJ2VuZCcgb3B0aW9uIGlzIG5vdCBzdXBwbGllZCwgZGVzdC5lbmQoKSB3aWxsIGJlIGNhbGxlZCB3aGVuXG4gIC8vIHNvdXJjZSBnZXRzIHRoZSAnZW5kJyBvciAnY2xvc2UnIGV2ZW50cy4gIE9ubHkgZGVzdC5lbmQoKSBvbmNlLlxuICBpZiAoIWRlc3QuX2lzU3RkaW8gJiYgKCFvcHRpb25zIHx8IG9wdGlvbnMuZW5kICE9PSBmYWxzZSkpIHtcbiAgICBzb3VyY2Uub24oJ2VuZCcsIG9uZW5kKTtcbiAgICBzb3VyY2Uub24oJ2Nsb3NlJywgb25jbG9zZSk7XG4gIH1cblxuICB2YXIgZGlkT25FbmQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gb25lbmQoKSB7XG4gICAgaWYgKGRpZE9uRW5kKSByZXR1cm47XG4gICAgZGlkT25FbmQgPSB0cnVlO1xuXG4gICAgZGVzdC5lbmQoKTtcbiAgfVxuXG5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcbiAgICBkaWRPbkVuZCA9IHRydWU7XG5cbiAgICBpZiAodHlwZW9mIGRlc3QuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgZGVzdC5kZXN0cm95KCk7XG4gIH1cblxuICAvLyBkb24ndCBsZWF2ZSBkYW5nbGluZyBwaXBlcyB3aGVuIHRoZXJlIGFyZSBlcnJvcnMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBjbGVhbnVwKCk7XG4gICAgaWYgKEVFLmxpc3RlbmVyQ291bnQodGhpcywgJ2Vycm9yJykgPT09IDApIHtcbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgc3RyZWFtIGVycm9yIGluIHBpcGUuXG4gICAgfVxuICB9XG5cbiAgc291cmNlLm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuXG4gIC8vIHJlbW92ZSBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycyB0aGF0IHdlcmUgYWRkZWQuXG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIGNsZWFudXApO1xuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7XG4gIH1cblxuICBzb3VyY2Uub24oJ2VuZCcsIGNsZWFudXApO1xuICBzb3VyY2Uub24oJ2Nsb3NlJywgY2xlYW51cCk7XG5cbiAgZGVzdC5vbignY2xvc2UnLCBjbGVhbnVwKTtcblxuICBkZXN0LmVtaXQoJ3BpcGUnLCBzb3VyY2UpO1xuXG4gIC8vIEFsbG93IGZvciB1bml4LWxpa2UgdXNhZ2U6IEEucGlwZShCKS5waXBlKEMpXG4gIHJldHVybiBkZXN0O1xufTtcbiIsInZhciBDbGllbnRSZXF1ZXN0ID0gcmVxdWlyZSgnLi9saWIvcmVxdWVzdCcpXG52YXIgZXh0ZW5kID0gcmVxdWlyZSgneHRlbmQnKVxudmFyIHN0YXR1c0NvZGVzID0gcmVxdWlyZSgnYnVpbHRpbi1zdGF0dXMtY29kZXMnKVxudmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpXG5cbnZhciBodHRwID0gZXhwb3J0c1xuXG5odHRwLnJlcXVlc3QgPSBmdW5jdGlvbiAob3B0cywgY2IpIHtcblx0aWYgKHR5cGVvZiBvcHRzID09PSAnc3RyaW5nJylcblx0XHRvcHRzID0gdXJsLnBhcnNlKG9wdHMpXG5cdGVsc2Vcblx0XHRvcHRzID0gZXh0ZW5kKG9wdHMpXG5cblx0dmFyIHByb3RvY29sID0gb3B0cy5wcm90b2NvbCB8fCAnJ1xuXHR2YXIgaG9zdCA9IG9wdHMuaG9zdG5hbWUgfHwgb3B0cy5ob3N0XG5cdHZhciBwb3J0ID0gb3B0cy5wb3J0XG5cdHZhciBwYXRoID0gb3B0cy5wYXRoIHx8ICcvJ1xuXG5cdC8vIE5lY2Vzc2FyeSBmb3IgSVB2NiBhZGRyZXNzZXNcblx0aWYgKGhvc3QgJiYgaG9zdC5pbmRleE9mKCc6JykgIT09IC0xKVxuXHRcdGhvc3QgPSAnWycgKyBob3N0ICsgJ10nXG5cblx0Ly8gVGhpcyBtYXkgYmUgYSByZWxhdGl2ZSB1cmwuIFRoZSBicm93c2VyIHNob3VsZCBhbHdheXMgYmUgYWJsZSB0byBpbnRlcnByZXQgaXQgY29ycmVjdGx5LlxuXHRvcHRzLnVybCA9IChob3N0ID8gKHByb3RvY29sICsgJy8vJyArIGhvc3QpIDogJycpICsgKHBvcnQgPyAnOicgKyBwb3J0IDogJycpICsgcGF0aFxuXHRvcHRzLm1ldGhvZCA9IChvcHRzLm1ldGhvZCB8fCAnR0VUJykudG9VcHBlckNhc2UoKVxuXHRvcHRzLmhlYWRlcnMgPSBvcHRzLmhlYWRlcnMgfHwge31cblxuXHQvLyBBbHNvIHZhbGlkIG9wdHMuYXV0aCwgb3B0cy5tb2RlXG5cblx0dmFyIHJlcSA9IG5ldyBDbGllbnRSZXF1ZXN0KG9wdHMpXG5cdGlmIChjYilcblx0XHRyZXEub24oJ3Jlc3BvbnNlJywgY2IpXG5cdHJldHVybiByZXFcbn1cblxuaHR0cC5nZXQgPSBmdW5jdGlvbiBnZXQgKG9wdHMsIGNiKSB7XG5cdHZhciByZXEgPSBodHRwLnJlcXVlc3Qob3B0cywgY2IpXG5cdHJlcS5lbmQoKVxuXHRyZXR1cm4gcmVxXG59XG5cbmh0dHAuQWdlbnQgPSBmdW5jdGlvbiAoKSB7fVxuaHR0cC5BZ2VudC5kZWZhdWx0TWF4U29ja2V0cyA9IDRcblxuaHR0cC5TVEFUVVNfQ09ERVMgPSBzdGF0dXNDb2Rlc1xuXG5odHRwLk1FVEhPRFMgPSBbXG5cdCdDSEVDS09VVCcsXG5cdCdDT05ORUNUJyxcblx0J0NPUFknLFxuXHQnREVMRVRFJyxcblx0J0dFVCcsXG5cdCdIRUFEJyxcblx0J0xPQ0snLFxuXHQnTS1TRUFSQ0gnLFxuXHQnTUVSR0UnLFxuXHQnTUtBQ1RJVklUWScsXG5cdCdNS0NPTCcsXG5cdCdNT1ZFJyxcblx0J05PVElGWScsXG5cdCdPUFRJT05TJyxcblx0J1BBVENIJyxcblx0J1BPU1QnLFxuXHQnUFJPUEZJTkQnLFxuXHQnUFJPUFBBVENIJyxcblx0J1BVUkdFJyxcblx0J1BVVCcsXG5cdCdSRVBPUlQnLFxuXHQnU0VBUkNIJyxcblx0J1NVQlNDUklCRScsXG5cdCdUUkFDRScsXG5cdCdVTkxPQ0snLFxuXHQnVU5TVUJTQ1JJQkUnXG5dIiwiZXhwb3J0cy5mZXRjaCA9IGlzRnVuY3Rpb24oZ2xvYmFsLmZldGNoKSAmJiBpc0Z1bmN0aW9uKGdsb2JhbC5SZWFkYWJsZUJ5dGVTdHJlYW0pXG5cbmV4cG9ydHMuYmxvYkNvbnN0cnVjdG9yID0gZmFsc2VcbnRyeSB7XG5cdG5ldyBCbG9iKFtuZXcgQXJyYXlCdWZmZXIoMSldKVxuXHRleHBvcnRzLmJsb2JDb25zdHJ1Y3RvciA9IHRydWVcbn0gY2F0Y2ggKGUpIHt9XG5cbnZhciB4aHIgPSBuZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KClcbi8vIElmIGxvY2F0aW9uLmhvc3QgaXMgZW1wdHksIGUuZy4gaWYgdGhpcyBwYWdlL3dvcmtlciB3YXMgbG9hZGVkXG4vLyBmcm9tIGEgQmxvYiwgdGhlbiB1c2UgZXhhbXBsZS5jb20gdG8gYXZvaWQgYW4gZXJyb3Jcbnhoci5vcGVuKCdHRVQnLCBnbG9iYWwubG9jYXRpb24uaG9zdCA/ICcvJyA6ICdodHRwczovL2V4YW1wbGUuY29tJylcblxuZnVuY3Rpb24gY2hlY2tUeXBlU3VwcG9ydCAodHlwZSkge1xuXHR0cnkge1xuXHRcdHhoci5yZXNwb25zZVR5cGUgPSB0eXBlXG5cdFx0cmV0dXJuIHhoci5yZXNwb25zZVR5cGUgPT09IHR5cGVcblx0fSBjYXRjaCAoZSkge31cblx0cmV0dXJuIGZhbHNlXG59XG5cbi8vIEZvciBzb21lIHN0cmFuZ2UgcmVhc29uLCBTYWZhcmkgNy4wIHJlcG9ydHMgdHlwZW9mIGdsb2JhbC5BcnJheUJ1ZmZlciA9PT0gJ29iamVjdCcuXG4vLyBTYWZhcmkgNy4xIGFwcGVhcnMgdG8gaGF2ZSBmaXhlZCB0aGlzIGJ1Zy5cbnZhciBoYXZlQXJyYXlCdWZmZXIgPSB0eXBlb2YgZ2xvYmFsLkFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJ1xudmFyIGhhdmVTbGljZSA9IGhhdmVBcnJheUJ1ZmZlciAmJiBpc0Z1bmN0aW9uKGdsb2JhbC5BcnJheUJ1ZmZlci5wcm90b3R5cGUuc2xpY2UpXG5cbmV4cG9ydHMuYXJyYXlidWZmZXIgPSBoYXZlQXJyYXlCdWZmZXIgJiYgY2hlY2tUeXBlU3VwcG9ydCgnYXJyYXlidWZmZXInKVxuLy8gVGhlc2UgbmV4dCB0d28gdGVzdHMgdW5hdm9pZGFibHkgc2hvdyB3YXJuaW5ncyBpbiBDaHJvbWUuIFNpbmNlIGZldGNoIHdpbGwgYWx3YXlzXG4vLyBiZSB1c2VkIGlmIGl0J3MgYXZhaWxhYmxlLCBqdXN0IHJldHVybiBmYWxzZSBmb3IgdGhlc2UgdG8gYXZvaWQgdGhlIHdhcm5pbmdzLlxuZXhwb3J0cy5tc3N0cmVhbSA9ICFleHBvcnRzLmZldGNoICYmIGhhdmVTbGljZSAmJiBjaGVja1R5cGVTdXBwb3J0KCdtcy1zdHJlYW0nKVxuZXhwb3J0cy5tb3pjaHVua2VkYXJyYXlidWZmZXIgPSAhZXhwb3J0cy5mZXRjaCAmJiBoYXZlQXJyYXlCdWZmZXIgJiZcblx0Y2hlY2tUeXBlU3VwcG9ydCgnbW96LWNodW5rZWQtYXJyYXlidWZmZXInKVxuZXhwb3J0cy5vdmVycmlkZU1pbWVUeXBlID0gaXNGdW5jdGlvbih4aHIub3ZlcnJpZGVNaW1lVHlwZSlcbmV4cG9ydHMudmJBcnJheSA9IGlzRnVuY3Rpb24oZ2xvYmFsLlZCQXJyYXkpXG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24gKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbidcbn1cblxueGhyID0gbnVsbCAvLyBIZWxwIGdjXG4iLCIvLyB2YXIgQmFzZTY0ID0gcmVxdWlyZSgnQmFzZTY0JylcbnZhciBjYXBhYmlsaXR5ID0gcmVxdWlyZSgnLi9jYXBhYmlsaXR5JylcbnZhciBpbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJylcbnZhciByZXNwb25zZSA9IHJlcXVpcmUoJy4vcmVzcG9uc2UnKVxudmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpXG5cbnZhciBJbmNvbWluZ01lc3NhZ2UgPSByZXNwb25zZS5JbmNvbWluZ01lc3NhZ2VcbnZhciByU3RhdGVzID0gcmVzcG9uc2UucmVhZHlTdGF0ZXNcblxuZnVuY3Rpb24gZGVjaWRlTW9kZSAocHJlZmVyQmluYXJ5KSB7XG5cdGlmIChjYXBhYmlsaXR5LmZldGNoKSB7XG5cdFx0cmV0dXJuICdmZXRjaCdcblx0fSBlbHNlIGlmIChjYXBhYmlsaXR5Lm1vemNodW5rZWRhcnJheWJ1ZmZlcikge1xuXHRcdHJldHVybiAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInXG5cdH0gZWxzZSBpZiAoY2FwYWJpbGl0eS5tc3N0cmVhbSkge1xuXHRcdHJldHVybiAnbXMtc3RyZWFtJ1xuXHR9IGVsc2UgaWYgKGNhcGFiaWxpdHkuYXJyYXlidWZmZXIgJiYgcHJlZmVyQmluYXJ5KSB7XG5cdFx0cmV0dXJuICdhcnJheWJ1ZmZlcidcblx0fSBlbHNlIGlmIChjYXBhYmlsaXR5LnZiQXJyYXkgJiYgcHJlZmVyQmluYXJ5KSB7XG5cdFx0cmV0dXJuICd0ZXh0OnZiYXJyYXknXG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuICd0ZXh0J1xuXHR9XG59XG5cbnZhciBDbGllbnRSZXF1ZXN0ID0gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob3B0cykge1xuXHR2YXIgc2VsZiA9IHRoaXNcblx0c3RyZWFtLldyaXRhYmxlLmNhbGwoc2VsZilcblxuXHRzZWxmLl9vcHRzID0gb3B0c1xuXHRzZWxmLl9ib2R5ID0gW11cblx0c2VsZi5faGVhZGVycyA9IHt9XG5cdGlmIChvcHRzLmF1dGgpXG5cdFx0c2VsZi5zZXRIZWFkZXIoJ0F1dGhvcml6YXRpb24nLCAnQmFzaWMgJyArIG5ldyBCdWZmZXIob3B0cy5hdXRoKS50b1N0cmluZygnYmFzZTY0JykpXG5cdE9iamVjdC5rZXlzKG9wdHMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuXHRcdHNlbGYuc2V0SGVhZGVyKG5hbWUsIG9wdHMuaGVhZGVyc1tuYW1lXSlcblx0fSlcblxuXHR2YXIgcHJlZmVyQmluYXJ5XG5cdGlmIChvcHRzLm1vZGUgPT09ICdwcmVmZXItc3RyZWFtaW5nJykge1xuXHRcdC8vIElmIHN0cmVhbWluZyBpcyBhIGhpZ2ggcHJpb3JpdHkgYnV0IGJpbmFyeSBjb21wYXRpYmlsaXR5IGFuZFxuXHRcdC8vIHRoZSBhY2N1cmFjeSBvZiB0aGUgJ2NvbnRlbnQtdHlwZScgaGVhZGVyIGFyZW4ndFxuXHRcdHByZWZlckJpbmFyeSA9IGZhbHNlXG5cdH0gZWxzZSBpZiAob3B0cy5tb2RlID09PSAnYWxsb3ctd3JvbmctY29udGVudC10eXBlJykge1xuXHRcdC8vIElmIHN0cmVhbWluZyBpcyBtb3JlIGltcG9ydGFudCB0aGFuIHByZXNlcnZpbmcgdGhlICdjb250ZW50LXR5cGUnIGhlYWRlclxuXHRcdHByZWZlckJpbmFyeSA9ICFjYXBhYmlsaXR5Lm92ZXJyaWRlTWltZVR5cGVcblx0fSBlbHNlIGlmICghb3B0cy5tb2RlIHx8IG9wdHMubW9kZSA9PT0gJ2RlZmF1bHQnIHx8IG9wdHMubW9kZSA9PT0gJ3ByZWZlci1mYXN0Jykge1xuXHRcdC8vIFVzZSBiaW5hcnkgaWYgdGV4dCBzdHJlYW1pbmcgbWF5IGNvcnJ1cHQgZGF0YSBvciB0aGUgY29udGVudC10eXBlIGhlYWRlciwgb3IgZm9yIHNwZWVkXG5cdFx0cHJlZmVyQmluYXJ5ID0gdHJ1ZVxuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2YWx1ZSBmb3Igb3B0cy5tb2RlJylcblx0fVxuXHRzZWxmLl9tb2RlID0gZGVjaWRlTW9kZShwcmVmZXJCaW5hcnkpXG5cblx0c2VsZi5vbignZmluaXNoJywgZnVuY3Rpb24gKCkge1xuXHRcdHNlbGYuX29uRmluaXNoKClcblx0fSlcbn1cblxuaW5oZXJpdHMoQ2xpZW50UmVxdWVzdCwgc3RyZWFtLldyaXRhYmxlKVxuXG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5zZXRIZWFkZXIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcblx0dmFyIHNlbGYgPSB0aGlzXG5cdHZhciBsb3dlck5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKClcblx0Ly8gVGhpcyBjaGVjayBpcyBub3QgbmVjZXNzYXJ5LCBidXQgaXQgcHJldmVudHMgd2FybmluZ3MgZnJvbSBicm93c2VycyBhYm91dCBzZXR0aW5nIHVuc2FmZVxuXHQvLyBoZWFkZXJzLiBUbyBiZSBob25lc3QgSSdtIG5vdCBlbnRpcmVseSBzdXJlIGhpZGluZyB0aGVzZSB3YXJuaW5ncyBpcyBhIGdvb2QgdGhpbmcsIGJ1dFxuXHQvLyBodHRwLWJyb3dzZXJpZnkgZGlkIGl0LCBzbyBJIHdpbGwgdG9vLlxuXHRpZiAodW5zYWZlSGVhZGVycy5pbmRleE9mKGxvd2VyTmFtZSkgIT09IC0xKVxuXHRcdHJldHVyblxuXG5cdHNlbGYuX2hlYWRlcnNbbG93ZXJOYW1lXSA9IHtcblx0XHRuYW1lOiBuYW1lLFxuXHRcdHZhbHVlOiB2YWx1ZVxuXHR9XG59XG5cbkNsaWVudFJlcXVlc3QucHJvdG90eXBlLmdldEhlYWRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdHZhciBzZWxmID0gdGhpc1xuXHRyZXR1cm4gc2VsZi5faGVhZGVyc1tuYW1lLnRvTG93ZXJDYXNlKCldLnZhbHVlXG59XG5cbkNsaWVudFJlcXVlc3QucHJvdG90eXBlLnJlbW92ZUhlYWRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdHZhciBzZWxmID0gdGhpc1xuXHRkZWxldGUgc2VsZi5faGVhZGVyc1tuYW1lLnRvTG93ZXJDYXNlKCldXG59XG5cbkNsaWVudFJlcXVlc3QucHJvdG90eXBlLl9vbkZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHNlbGYgPSB0aGlzXG5cblx0aWYgKHNlbGYuX2Rlc3Ryb3llZClcblx0XHRyZXR1cm5cblx0dmFyIG9wdHMgPSBzZWxmLl9vcHRzXG5cblx0dmFyIGhlYWRlcnNPYmogPSBzZWxmLl9oZWFkZXJzXG5cdHZhciBib2R5XG5cdGlmIChvcHRzLm1ldGhvZCA9PT0gJ1BPU1QnIHx8IG9wdHMubWV0aG9kID09PSAnUFVUJyB8fCBvcHRzLm1ldGhvZCA9PT0gJ1BBVENIJykge1xuXHRcdGlmIChjYXBhYmlsaXR5LmJsb2JDb25zdHJ1Y3Rvcikge1xuXHRcdFx0Ym9keSA9IG5ldyBnbG9iYWwuQmxvYihzZWxmLl9ib2R5Lm1hcChmdW5jdGlvbiAoYnVmZmVyKSB7XG5cdFx0XHRcdHJldHVybiBidWZmZXIudG9BcnJheUJ1ZmZlcigpXG5cdFx0XHR9KSwge1xuXHRcdFx0XHR0eXBlOiAoaGVhZGVyc09ialsnY29udGVudC10eXBlJ10gfHwge30pLnZhbHVlIHx8ICcnXG5cdFx0XHR9KVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBnZXQgdXRmOCBzdHJpbmdcblx0XHRcdGJvZHkgPSBCdWZmZXIuY29uY2F0KHNlbGYuX2JvZHkpLnRvU3RyaW5nKClcblx0XHR9XG5cdH1cblxuXHRpZiAoc2VsZi5fbW9kZSA9PT0gJ2ZldGNoJykge1xuXHRcdHZhciBoZWFkZXJzID0gT2JqZWN0LmtleXMoaGVhZGVyc09iaikubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG5cdFx0XHRyZXR1cm4gW2hlYWRlcnNPYmpbbmFtZV0ubmFtZSwgaGVhZGVyc09ialtuYW1lXS52YWx1ZV1cblx0XHR9KVxuXG5cdFx0Z2xvYmFsLmZldGNoKHNlbGYuX29wdHMudXJsLCB7XG5cdFx0XHRtZXRob2Q6IHNlbGYuX29wdHMubWV0aG9kLFxuXHRcdFx0aGVhZGVyczogaGVhZGVycyxcblx0XHRcdGJvZHk6IGJvZHksXG5cdFx0XHRtb2RlOiAnY29ycycsXG5cdFx0XHRjcmVkZW50aWFsczogb3B0cy53aXRoQ3JlZGVudGlhbHMgPyAnaW5jbHVkZScgOiAnc2FtZS1vcmlnaW4nXG5cdFx0fSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblx0XHRcdHNlbGYuX2ZldGNoUmVzcG9uc2UgPSByZXNwb25zZVxuXHRcdFx0c2VsZi5fY29ubmVjdCgpXG5cdFx0fSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHRcdFx0c2VsZi5lbWl0KCdlcnJvcicsIHJlYXNvbilcblx0XHR9KVxuXHR9IGVsc2Uge1xuXHRcdHZhciB4aHIgPSBzZWxmLl94aHIgPSBuZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KClcblx0XHR0cnkge1xuXHRcdFx0eGhyLm9wZW4oc2VsZi5fb3B0cy5tZXRob2QsIHNlbGYuX29wdHMudXJsLCB0cnVlKVxuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0cHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpXG5cdFx0XHR9KVxuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0Ly8gQ2FuJ3Qgc2V0IHJlc3BvbnNlVHlwZSBvbiByZWFsbHkgb2xkIGJyb3dzZXJzXG5cdFx0aWYgKCdyZXNwb25zZVR5cGUnIGluIHhocilcblx0XHRcdHhoci5yZXNwb25zZVR5cGUgPSBzZWxmLl9tb2RlLnNwbGl0KCc6JylbMF1cblxuXHRcdGlmICgnd2l0aENyZWRlbnRpYWxzJyBpbiB4aHIpXG5cdFx0XHR4aHIud2l0aENyZWRlbnRpYWxzID0gISFvcHRzLndpdGhDcmVkZW50aWFsc1xuXG5cdFx0aWYgKHNlbGYuX21vZGUgPT09ICd0ZXh0JyAmJiAnb3ZlcnJpZGVNaW1lVHlwZScgaW4geGhyKVxuXHRcdFx0eGhyLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWQnKVxuXG5cdFx0T2JqZWN0LmtleXMoaGVhZGVyc09iaikuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuXHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyc09ialtuYW1lXS5uYW1lLCBoZWFkZXJzT2JqW25hbWVdLnZhbHVlKVxuXHRcdH0pXG5cblx0XHRzZWxmLl9yZXNwb25zZSA9IG51bGxcblx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0c3dpdGNoICh4aHIucmVhZHlTdGF0ZSkge1xuXHRcdFx0XHRjYXNlIHJTdGF0ZXMuTE9BRElORzpcblx0XHRcdFx0Y2FzZSByU3RhdGVzLkRPTkU6XG5cdFx0XHRcdFx0c2VsZi5fb25YSFJQcm9ncmVzcygpXG5cdFx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gTmVjZXNzYXJ5IGZvciBzdHJlYW1pbmcgaW4gRmlyZWZveCwgc2luY2UgeGhyLnJlc3BvbnNlIGlzIE9OTFkgZGVmaW5lZFxuXHRcdC8vIGluIG9ucHJvZ3Jlc3MsIG5vdCBpbiBvbnJlYWR5c3RhdGVjaGFuZ2Ugd2l0aCB4aHIucmVhZHlTdGF0ZSA9IDNcblx0XHRpZiAoc2VsZi5fbW9kZSA9PT0gJ21vei1jaHVua2VkLWFycmF5YnVmZmVyJykge1xuXHRcdFx0eGhyLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNlbGYuX29uWEhSUHJvZ3Jlc3MoKVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHNlbGYuX2Rlc3Ryb3llZClcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHRzZWxmLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdYSFIgZXJyb3InKSlcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0eGhyLnNlbmQoYm9keSlcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKVxuXHRcdFx0fSlcblx0XHRcdHJldHVyblxuXHRcdH1cblx0fVxufVxuXG4vKipcbiAqIENoZWNrcyBpZiB4aHIuc3RhdHVzIGlzIHJlYWRhYmxlLiBFdmVuIHRob3VnaCB0aGUgc3BlYyBzYXlzIGl0IHNob3VsZFxuICogYmUgYXZhaWxhYmxlIGluIHJlYWR5U3RhdGUgMywgYWNjZXNzaW5nIGl0IHRocm93cyBhbiBleGNlcHRpb24gaW4gSUU4XG4gKi9cbmZ1bmN0aW9uIHN0YXR1c1ZhbGlkICh4aHIpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gKHhoci5zdGF0dXMgIT09IG51bGwpXG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm4gZmFsc2Vcblx0fVxufVxuXG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5fb25YSFJQcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHNlbGYgPSB0aGlzXG5cblx0aWYgKCFzdGF0dXNWYWxpZChzZWxmLl94aHIpIHx8IHNlbGYuX2Rlc3Ryb3llZClcblx0XHRyZXR1cm5cblxuXHRpZiAoIXNlbGYuX3Jlc3BvbnNlKVxuXHRcdHNlbGYuX2Nvbm5lY3QoKVxuXG5cdHNlbGYuX3Jlc3BvbnNlLl9vblhIUlByb2dyZXNzKClcbn1cblxuQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuX2Nvbm5lY3QgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBzZWxmID0gdGhpc1xuXG5cdGlmIChzZWxmLl9kZXN0cm95ZWQpXG5cdFx0cmV0dXJuXG5cblx0c2VsZi5fcmVzcG9uc2UgPSBuZXcgSW5jb21pbmdNZXNzYWdlKHNlbGYuX3hociwgc2VsZi5fZmV0Y2hSZXNwb25zZSwgc2VsZi5fbW9kZSlcblx0c2VsZi5lbWl0KCdyZXNwb25zZScsIHNlbGYuX3Jlc3BvbnNlKVxufVxuXG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuXHR2YXIgc2VsZiA9IHRoaXNcblxuXHRzZWxmLl9ib2R5LnB1c2goY2h1bmspXG5cdGNiKClcbn1cblxuQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuYWJvcnQgPSBDbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgc2VsZiA9IHRoaXNcblx0c2VsZi5fZGVzdHJveWVkID0gdHJ1ZVxuXHRpZiAoc2VsZi5fcmVzcG9uc2UpXG5cdFx0c2VsZi5fcmVzcG9uc2UuX2Rlc3Ryb3llZCA9IHRydWVcblx0aWYgKHNlbGYuX3hocilcblx0XHRzZWxmLl94aHIuYWJvcnQoKVxuXHQvLyBDdXJyZW50bHksIHRoZXJlIGlzbid0IGEgd2F5IHRvIHRydWx5IGFib3J0IGEgZmV0Y2guXG5cdC8vIElmIHlvdSBsaWtlIGJpa2VzaGVkZGluZywgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93aGF0d2cvZmV0Y2gvaXNzdWVzLzI3XG59XG5cbkNsaWVudFJlcXVlc3QucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIChkYXRhLCBlbmNvZGluZywgY2IpIHtcblx0dmFyIHNlbGYgPSB0aGlzXG5cdGlmICh0eXBlb2YgZGF0YSA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGNiID0gZGF0YVxuXHRcdGRhdGEgPSB1bmRlZmluZWRcblx0fVxuXG5cdHN0cmVhbS5Xcml0YWJsZS5wcm90b3R5cGUuZW5kLmNhbGwoc2VsZiwgZGF0YSwgZW5jb2RpbmcsIGNiKVxufVxuXG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5mbHVzaEhlYWRlcnMgPSBmdW5jdGlvbiAoKSB7fVxuQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuc2V0VGltZW91dCA9IGZ1bmN0aW9uICgpIHt9XG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5zZXROb0RlbGF5ID0gZnVuY3Rpb24gKCkge31cbkNsaWVudFJlcXVlc3QucHJvdG90eXBlLnNldFNvY2tldEtlZXBBbGl2ZSA9IGZ1bmN0aW9uICgpIHt9XG5cbi8vIFRha2VuIGZyb20gaHR0cDovL3d3dy53My5vcmcvVFIvWE1MSHR0cFJlcXVlc3QvI3RoZS1zZXRyZXF1ZXN0aGVhZGVyJTI4JTI5LW1ldGhvZFxudmFyIHVuc2FmZUhlYWRlcnMgPSBbXG5cdCdhY2NlcHQtY2hhcnNldCcsXG5cdCdhY2NlcHQtZW5jb2RpbmcnLFxuXHQnYWNjZXNzLWNvbnRyb2wtcmVxdWVzdC1oZWFkZXJzJyxcblx0J2FjY2Vzcy1jb250cm9sLXJlcXVlc3QtbWV0aG9kJyxcblx0J2Nvbm5lY3Rpb24nLFxuXHQnY29udGVudC1sZW5ndGgnLFxuXHQnY29va2llJyxcblx0J2Nvb2tpZTInLFxuXHQnZGF0ZScsXG5cdCdkbnQnLFxuXHQnZXhwZWN0Jyxcblx0J2hvc3QnLFxuXHQna2VlcC1hbGl2ZScsXG5cdCdvcmlnaW4nLFxuXHQncmVmZXJlcicsXG5cdCd0ZScsXG5cdCd0cmFpbGVyJyxcblx0J3RyYW5zZmVyLWVuY29kaW5nJyxcblx0J3VwZ3JhZGUnLFxuXHQndXNlci1hZ2VudCcsXG5cdCd2aWEnXG5dXG4iLCJ2YXIgY2FwYWJpbGl0eSA9IHJlcXVpcmUoJy4vY2FwYWJpbGl0eScpXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG52YXIgc3RyZWFtID0gcmVxdWlyZSgnc3RyZWFtJylcblxudmFyIHJTdGF0ZXMgPSBleHBvcnRzLnJlYWR5U3RhdGVzID0ge1xuXHRVTlNFTlQ6IDAsXG5cdE9QRU5FRDogMSxcblx0SEVBREVSU19SRUNFSVZFRDogMixcblx0TE9BRElORzogMyxcblx0RE9ORTogNFxufVxuXG52YXIgSW5jb21pbmdNZXNzYWdlID0gZXhwb3J0cy5JbmNvbWluZ01lc3NhZ2UgPSBmdW5jdGlvbiAoeGhyLCByZXNwb25zZSwgbW9kZSkge1xuXHR2YXIgc2VsZiA9IHRoaXNcblx0c3RyZWFtLlJlYWRhYmxlLmNhbGwoc2VsZilcblxuXHRzZWxmLl9tb2RlID0gbW9kZVxuXHRzZWxmLmhlYWRlcnMgPSB7fVxuXHRzZWxmLnJhd0hlYWRlcnMgPSBbXVxuXHRzZWxmLnRyYWlsZXJzID0ge31cblx0c2VsZi5yYXdUcmFpbGVycyA9IFtdXG5cblx0Ly8gRmFrZSB0aGUgJ2Nsb3NlJyBldmVudCwgYnV0IG9ubHkgb25jZSAnZW5kJyBmaXJlc1xuXHRzZWxmLm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0Ly8gVGhlIG5leHRUaWNrIGlzIG5lY2Vzc2FyeSB0byBwcmV2ZW50IHRoZSAncmVxdWVzdCcgbW9kdWxlIGZyb20gY2F1c2luZyBhbiBpbmZpbml0ZSBsb29wXG5cdFx0cHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHRzZWxmLmVtaXQoJ2Nsb3NlJylcblx0XHR9KVxuXHR9KVxuXG5cdGlmIChtb2RlID09PSAnZmV0Y2gnKSB7XG5cdFx0c2VsZi5fZmV0Y2hSZXNwb25zZSA9IHJlc3BvbnNlXG5cblx0XHRzZWxmLnN0YXR1c0NvZGUgPSByZXNwb25zZS5zdGF0dXNcblx0XHRzZWxmLnN0YXR1c01lc3NhZ2UgPSByZXNwb25zZS5zdGF0dXNUZXh0XG5cdFx0Ly8gYmFja3dhcmRzIGNvbXBhdGlibGUgdmVyc2lvbiBvZiBmb3IgKDxpdGVtPiBvZiA8aXRlcmFibGU+KTpcblx0XHQvLyBmb3IgKHZhciA8aXRlbT4sX2ksX2l0ID0gPGl0ZXJhYmxlPltTeW1ib2wuaXRlcmF0b3JdKCk7IDxpdGVtPiA9IChfaSA9IF9pdC5uZXh0KCkpLnZhbHVlLCFfaS5kb25lOylcblx0XHRmb3IgKHZhciBoZWFkZXIsIF9pLCBfaXQgPSByZXNwb25zZS5oZWFkZXJzW1N5bWJvbC5pdGVyYXRvcl0oKTsgaGVhZGVyID0gKF9pID0gX2l0Lm5leHQoKSkudmFsdWUsICFfaS5kb25lOykge1xuXHRcdFx0c2VsZi5oZWFkZXJzW2hlYWRlclswXS50b0xvd2VyQ2FzZSgpXSA9IGhlYWRlclsxXVxuXHRcdFx0c2VsZi5yYXdIZWFkZXJzLnB1c2goaGVhZGVyWzBdLCBoZWFkZXJbMV0pXG5cdFx0fVxuXG5cdFx0Ly8gVE9ETzogdGhpcyBkb2Vzbid0IHJlc3BlY3QgYmFja3ByZXNzdXJlLiBPbmNlIFdyaXRhYmxlU3RyZWFtIGlzIGF2YWlsYWJsZSwgdGhpcyBjYW4gYmUgZml4ZWRcblx0XHR2YXIgcmVhZGVyID0gcmVzcG9uc2UuYm9keS5nZXRSZWFkZXIoKVxuXHRcdGZ1bmN0aW9uIHJlYWQgKCkge1xuXHRcdFx0cmVhZGVyLnJlYWQoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcblx0XHRcdFx0aWYgKHNlbGYuX2Rlc3Ryb3llZClcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0aWYgKHJlc3VsdC5kb25lKSB7XG5cdFx0XHRcdFx0c2VsZi5wdXNoKG51bGwpXG5cdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5wdXNoKG5ldyBCdWZmZXIocmVzdWx0LnZhbHVlKSlcblx0XHRcdFx0cmVhZCgpXG5cdFx0XHR9KVxuXHRcdH1cblx0XHRyZWFkKClcblxuXHR9IGVsc2Uge1xuXHRcdHNlbGYuX3hociA9IHhoclxuXHRcdHNlbGYuX3BvcyA9IDBcblxuXHRcdHNlbGYuc3RhdHVzQ29kZSA9IHhoci5zdGF0dXNcblx0XHRzZWxmLnN0YXR1c01lc3NhZ2UgPSB4aHIuc3RhdHVzVGV4dFxuXHRcdHZhciBoZWFkZXJzID0geGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpLnNwbGl0KC9cXHI/XFxuLylcblx0XHRoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24gKGhlYWRlcikge1xuXHRcdFx0dmFyIG1hdGNoZXMgPSBoZWFkZXIubWF0Y2goL14oW146XSspOlxccyooLiopLylcblx0XHRcdGlmIChtYXRjaGVzKSB7XG5cdFx0XHRcdHZhciBrZXkgPSBtYXRjaGVzWzFdLnRvTG93ZXJDYXNlKClcblx0XHRcdFx0aWYgKHNlbGYuaGVhZGVyc1trZXldICE9PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0c2VsZi5oZWFkZXJzW2tleV0gKz0gJywgJyArIG1hdGNoZXNbMl1cblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdHNlbGYuaGVhZGVyc1trZXldID0gbWF0Y2hlc1syXVxuXHRcdFx0XHRzZWxmLnJhd0hlYWRlcnMucHVzaChtYXRjaGVzWzFdLCBtYXRjaGVzWzJdKVxuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHRzZWxmLl9jaGFyc2V0ID0gJ3gtdXNlci1kZWZpbmVkJ1xuXHRcdGlmICghY2FwYWJpbGl0eS5vdmVycmlkZU1pbWVUeXBlKSB7XG5cdFx0XHR2YXIgbWltZVR5cGUgPSBzZWxmLnJhd0hlYWRlcnNbJ21pbWUtdHlwZSddXG5cdFx0XHRpZiAobWltZVR5cGUpIHtcblx0XHRcdFx0dmFyIGNoYXJzZXRNYXRjaCA9IG1pbWVUeXBlLm1hdGNoKC87XFxzKmNoYXJzZXQ9KFteO10pKDt8JCkvKVxuXHRcdFx0XHRpZiAoY2hhcnNldE1hdGNoKSB7XG5cdFx0XHRcdFx0c2VsZi5fY2hhcnNldCA9IGNoYXJzZXRNYXRjaFsxXS50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICghc2VsZi5fY2hhcnNldClcblx0XHRcdFx0c2VsZi5fY2hhcnNldCA9ICd1dGYtOCcgLy8gYmVzdCBndWVzc1xuXHRcdH1cblx0fVxufVxuXG5pbmhlcml0cyhJbmNvbWluZ01lc3NhZ2UsIHN0cmVhbS5SZWFkYWJsZSlcblxuSW5jb21pbmdNZXNzYWdlLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uICgpIHt9XG5cbkluY29taW5nTWVzc2FnZS5wcm90b3R5cGUuX29uWEhSUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBzZWxmID0gdGhpc1xuXG5cdHZhciB4aHIgPSBzZWxmLl94aHJcblxuXHR2YXIgcmVzcG9uc2UgPSBudWxsXG5cdHN3aXRjaCAoc2VsZi5fbW9kZSkge1xuXHRcdGNhc2UgJ3RleHQ6dmJhcnJheSc6IC8vIEZvciBJRTlcblx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gclN0YXRlcy5ET05FKVxuXHRcdFx0XHRicmVha1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Ly8gVGhpcyBmYWlscyBpbiBJRThcblx0XHRcdFx0cmVzcG9uc2UgPSBuZXcgZ2xvYmFsLlZCQXJyYXkoeGhyLnJlc3BvbnNlQm9keSkudG9BcnJheSgpXG5cdFx0XHR9IGNhdGNoIChlKSB7fVxuXHRcdFx0aWYgKHJlc3BvbnNlICE9PSBudWxsKSB7XG5cdFx0XHRcdHNlbGYucHVzaChuZXcgQnVmZmVyKHJlc3BvbnNlKSlcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHRcdC8vIEZhbGxzIHRocm91Z2ggaW4gSUU4XHRcblx0XHRjYXNlICd0ZXh0Jzpcblx0XHRcdHRyeSB7IC8vIFRoaXMgd2lsbCBmYWlsIHdoZW4gcmVhZHlTdGF0ZSA9IDMgaW4gSUU5LiBTd2l0Y2ggbW9kZSBhbmQgd2FpdCBmb3IgcmVhZHlTdGF0ZSA9IDRcblx0XHRcdFx0cmVzcG9uc2UgPSB4aHIucmVzcG9uc2VUZXh0XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdHNlbGYuX21vZGUgPSAndGV4dDp2YmFycmF5J1xuXHRcdFx0XHRicmVha1xuXHRcdFx0fVxuXHRcdFx0aWYgKHJlc3BvbnNlLmxlbmd0aCA+IHNlbGYuX3Bvcykge1xuXHRcdFx0XHR2YXIgbmV3RGF0YSA9IHJlc3BvbnNlLnN1YnN0cihzZWxmLl9wb3MpXG5cdFx0XHRcdGlmIChzZWxmLl9jaGFyc2V0ID09PSAneC11c2VyLWRlZmluZWQnKSB7XG5cdFx0XHRcdFx0dmFyIGJ1ZmZlciA9IG5ldyBCdWZmZXIobmV3RGF0YS5sZW5ndGgpXG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBuZXdEYXRhLmxlbmd0aDsgaSsrKVxuXHRcdFx0XHRcdFx0YnVmZmVyW2ldID0gbmV3RGF0YS5jaGFyQ29kZUF0KGkpICYgMHhmZlxuXG5cdFx0XHRcdFx0c2VsZi5wdXNoKGJ1ZmZlcilcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZWxmLnB1c2gobmV3RGF0YSwgc2VsZi5fY2hhcnNldClcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLl9wb3MgPSByZXNwb25zZS5sZW5ndGhcblx0XHRcdH1cblx0XHRcdGJyZWFrXG5cdFx0Y2FzZSAnYXJyYXlidWZmZXInOlxuXHRcdFx0aWYgKHhoci5yZWFkeVN0YXRlICE9PSByU3RhdGVzLkRPTkUpXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRyZXNwb25zZSA9IHhoci5yZXNwb25zZVxuXHRcdFx0c2VsZi5wdXNoKG5ldyBCdWZmZXIobmV3IFVpbnQ4QXJyYXkocmVzcG9uc2UpKSlcblx0XHRcdGJyZWFrXG5cdFx0Y2FzZSAnbW96LWNodW5rZWQtYXJyYXlidWZmZXInOiAvLyB0YWtlIHdob2xlXG5cdFx0XHRyZXNwb25zZSA9IHhoci5yZXNwb25zZVxuXHRcdFx0aWYgKHhoci5yZWFkeVN0YXRlICE9PSByU3RhdGVzLkxPQURJTkcgfHwgIXJlc3BvbnNlKVxuXHRcdFx0XHRicmVha1xuXHRcdFx0c2VsZi5wdXNoKG5ldyBCdWZmZXIobmV3IFVpbnQ4QXJyYXkocmVzcG9uc2UpKSlcblx0XHRcdGJyZWFrXG5cdFx0Y2FzZSAnbXMtc3RyZWFtJzpcblx0XHRcdHJlc3BvbnNlID0geGhyLnJlc3BvbnNlXG5cdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgIT09IHJTdGF0ZXMuTE9BRElORylcblx0XHRcdFx0YnJlYWtcblx0XHRcdHZhciByZWFkZXIgPSBuZXcgZ2xvYmFsLk1TU3RyZWFtUmVhZGVyKClcblx0XHRcdHJlYWRlci5vbnByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAocmVhZGVyLnJlc3VsdC5ieXRlTGVuZ3RoID4gc2VsZi5fcG9zKSB7XG5cdFx0XHRcdFx0c2VsZi5wdXNoKG5ldyBCdWZmZXIobmV3IFVpbnQ4QXJyYXkocmVhZGVyLnJlc3VsdC5zbGljZShzZWxmLl9wb3MpKSkpXG5cdFx0XHRcdFx0c2VsZi5fcG9zID0gcmVhZGVyLnJlc3VsdC5ieXRlTGVuZ3RoXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdHNlbGYucHVzaChudWxsKVxuXHRcdFx0fVxuXHRcdFx0Ly8gcmVhZGVyLm9uZXJyb3IgPSA/Pz8gLy8gVE9ETzogdGhpc1xuXHRcdFx0cmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHJlc3BvbnNlKVxuXHRcdFx0YnJlYWtcblx0fVxuXG5cdC8vIFRoZSBtcy1zdHJlYW0gY2FzZSBoYW5kbGVzIGVuZCBzZXBhcmF0ZWx5IGluIHJlYWRlci5vbmxvYWQoKVxuXHRpZiAoc2VsZi5feGhyLnJlYWR5U3RhdGUgPT09IHJTdGF0ZXMuRE9ORSAmJiBzZWxmLl9tb2RlICE9PSAnbXMtc3RyZWFtJykge1xuXHRcdHNlbGYucHVzaChudWxsKVxuXHR9XG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcblxudmFyIGlzQnVmZmVyRW5jb2RpbmcgPSBCdWZmZXIuaXNFbmNvZGluZ1xuICB8fCBmdW5jdGlvbihlbmNvZGluZykge1xuICAgICAgIHN3aXRjaCAoZW5jb2RpbmcgJiYgZW5jb2RpbmcudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgY2FzZSAnaGV4JzogY2FzZSAndXRmOCc6IGNhc2UgJ3V0Zi04JzogY2FzZSAnYXNjaWknOiBjYXNlICdiaW5hcnknOiBjYXNlICdiYXNlNjQnOiBjYXNlICd1Y3MyJzogY2FzZSAndWNzLTInOiBjYXNlICd1dGYxNmxlJzogY2FzZSAndXRmLTE2bGUnOiBjYXNlICdyYXcnOiByZXR1cm4gdHJ1ZTtcbiAgICAgICAgIGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcbiAgICAgICB9XG4gICAgIH1cblxuXG5mdW5jdGlvbiBhc3NlcnRFbmNvZGluZyhlbmNvZGluZykge1xuICBpZiAoZW5jb2RpbmcgJiYgIWlzQnVmZmVyRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICB9XG59XG5cbi8vIFN0cmluZ0RlY29kZXIgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlZmZpY2llbnRseSBzcGxpdHRpbmcgYSBzZXJpZXMgb2Zcbi8vIGJ1ZmZlcnMgaW50byBhIHNlcmllcyBvZiBKUyBzdHJpbmdzIHdpdGhvdXQgYnJlYWtpbmcgYXBhcnQgbXVsdGktYnl0ZVxuLy8gY2hhcmFjdGVycy4gQ0VTVS04IGlzIGhhbmRsZWQgYXMgcGFydCBvZiB0aGUgVVRGLTggZW5jb2RpbmcuXG4vL1xuLy8gQFRPRE8gSGFuZGxpbmcgYWxsIGVuY29kaW5ncyBpbnNpZGUgYSBzaW5nbGUgb2JqZWN0IG1ha2VzIGl0IHZlcnkgZGlmZmljdWx0XG4vLyB0byByZWFzb24gYWJvdXQgdGhpcyBjb2RlLCBzbyBpdCBzaG91bGQgYmUgc3BsaXQgdXAgaW4gdGhlIGZ1dHVyZS5cbi8vIEBUT0RPIFRoZXJlIHNob3VsZCBiZSBhIHV0Zjgtc3RyaWN0IGVuY29kaW5nIHRoYXQgcmVqZWN0cyBpbnZhbGlkIFVURi04IGNvZGVcbi8vIHBvaW50cyBhcyB1c2VkIGJ5IENFU1UtOC5cbnZhciBTdHJpbmdEZWNvZGVyID0gZXhwb3J0cy5TdHJpbmdEZWNvZGVyID0gZnVuY3Rpb24oZW5jb2RpbmcpIHtcbiAgdGhpcy5lbmNvZGluZyA9IChlbmNvZGluZyB8fCAndXRmOCcpLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvWy1fXS8sICcnKTtcbiAgYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpO1xuICBzd2l0Y2ggKHRoaXMuZW5jb2RpbmcpIHtcbiAgICBjYXNlICd1dGY4JzpcbiAgICAgIC8vIENFU1UtOCByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMy1ieXRlc1xuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgLy8gVVRGLTE2IHJlcHJlc2VudHMgZWFjaCBvZiBTdXJyb2dhdGUgUGFpciBieSAyLWJ5dGVzXG4gICAgICB0aGlzLnN1cnJvZ2F0ZVNpemUgPSAyO1xuICAgICAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhciA9IHV0ZjE2RGV0ZWN0SW5jb21wbGV0ZUNoYXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgLy8gQmFzZS02NCBzdG9yZXMgMyBieXRlcyBpbiA0IGNoYXJzLCBhbmQgcGFkcyB0aGUgcmVtYWluZGVyLlxuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMztcbiAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aGlzLndyaXRlID0gcGFzc1Rocm91Z2hXcml0ZTtcbiAgICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEVub3VnaCBzcGFjZSB0byBzdG9yZSBhbGwgYnl0ZXMgb2YgYSBzaW5nbGUgY2hhcmFjdGVyLiBVVEYtOCBuZWVkcyA0XG4gIC8vIGJ5dGVzLCBidXQgQ0VTVS04IG1heSByZXF1aXJlIHVwIHRvIDYgKDMgYnl0ZXMgcGVyIHN1cnJvZ2F0ZSkuXG4gIHRoaXMuY2hhckJ1ZmZlciA9IG5ldyBCdWZmZXIoNik7XG4gIC8vIE51bWJlciBvZiBieXRlcyByZWNlaXZlZCBmb3IgdGhlIGN1cnJlbnQgaW5jb21wbGV0ZSBtdWx0aS1ieXRlIGNoYXJhY3Rlci5cbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSAwO1xuICAvLyBOdW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuXG4gIHRoaXMuY2hhckxlbmd0aCA9IDA7XG59O1xuXG5cbi8vIHdyaXRlIGRlY29kZXMgdGhlIGdpdmVuIGJ1ZmZlciBhbmQgcmV0dXJucyBpdCBhcyBKUyBzdHJpbmcgdGhhdCBpc1xuLy8gZ3VhcmFudGVlZCB0byBub3QgY29udGFpbiBhbnkgcGFydGlhbCBtdWx0aS1ieXRlIGNoYXJhY3RlcnMuIEFueSBwYXJ0aWFsXG4vLyBjaGFyYWN0ZXIgZm91bmQgYXQgdGhlIGVuZCBvZiB0aGUgYnVmZmVyIGlzIGJ1ZmZlcmVkIHVwLCBhbmQgd2lsbCBiZVxuLy8gcmV0dXJuZWQgd2hlbiBjYWxsaW5nIHdyaXRlIGFnYWluIHdpdGggdGhlIHJlbWFpbmluZyBieXRlcy5cbi8vXG4vLyBOb3RlOiBDb252ZXJ0aW5nIGEgQnVmZmVyIGNvbnRhaW5pbmcgYW4gb3JwaGFuIHN1cnJvZ2F0ZSB0byBhIFN0cmluZ1xuLy8gY3VycmVudGx5IHdvcmtzLCBidXQgY29udmVydGluZyBhIFN0cmluZyB0byBhIEJ1ZmZlciAodmlhIGBuZXcgQnVmZmVyYCwgb3Jcbi8vIEJ1ZmZlciN3cml0ZSkgd2lsbCByZXBsYWNlIGluY29tcGxldGUgc3Vycm9nYXRlcyB3aXRoIHRoZSB1bmljb2RlXG4vLyByZXBsYWNlbWVudCBjaGFyYWN0ZXIuIFNlZSBodHRwczovL2NvZGVyZXZpZXcuY2hyb21pdW0ub3JnLzEyMTE3MzAwOS8gLlxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdmFyIGNoYXJTdHIgPSAnJztcbiAgLy8gaWYgb3VyIGxhc3Qgd3JpdGUgZW5kZWQgd2l0aCBhbiBpbmNvbXBsZXRlIG11bHRpYnl0ZSBjaGFyYWN0ZXJcbiAgd2hpbGUgKHRoaXMuY2hhckxlbmd0aCkge1xuICAgIC8vIGRldGVybWluZSBob3cgbWFueSByZW1haW5pbmcgYnl0ZXMgdGhpcyBidWZmZXIgaGFzIHRvIG9mZmVyIGZvciB0aGlzIGNoYXJcbiAgICB2YXIgYXZhaWxhYmxlID0gKGJ1ZmZlci5sZW5ndGggPj0gdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQpID9cbiAgICAgICAgdGhpcy5jaGFyTGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQgOlxuICAgICAgICBidWZmZXIubGVuZ3RoO1xuXG4gICAgLy8gYWRkIHRoZSBuZXcgYnl0ZXMgdG8gdGhlIGNoYXIgYnVmZmVyXG4gICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCB0aGlzLmNoYXJSZWNlaXZlZCwgMCwgYXZhaWxhYmxlKTtcbiAgICB0aGlzLmNoYXJSZWNlaXZlZCArPSBhdmFpbGFibGU7XG5cbiAgICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQgPCB0aGlzLmNoYXJMZW5ndGgpIHtcbiAgICAgIC8vIHN0aWxsIG5vdCBlbm91Z2ggY2hhcnMgaW4gdGhpcyBidWZmZXI/IHdhaXQgZm9yIG1vcmUgLi4uXG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlIGJ5dGVzIGJlbG9uZ2luZyB0byB0aGUgY3VycmVudCBjaGFyYWN0ZXIgZnJvbSB0aGUgYnVmZmVyXG4gICAgYnVmZmVyID0gYnVmZmVyLnNsaWNlKGF2YWlsYWJsZSwgYnVmZmVyLmxlbmd0aCk7XG5cbiAgICAvLyBnZXQgdGhlIGNoYXJhY3RlciB0aGF0IHdhcyBzcGxpdFxuICAgIGNoYXJTdHIgPSB0aGlzLmNoYXJCdWZmZXIuc2xpY2UoMCwgdGhpcy5jaGFyTGVuZ3RoKS50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcblxuICAgIC8vIENFU1UtODogbGVhZCBzdXJyb2dhdGUgKEQ4MDAtREJGRikgaXMgYWxzbyB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXJcbiAgICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoY2hhclN0ci5sZW5ndGggLSAxKTtcbiAgICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoICs9IHRoaXMuc3Vycm9nYXRlU2l6ZTtcbiAgICAgIGNoYXJTdHIgPSAnJztcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB0aGlzLmNoYXJSZWNlaXZlZCA9IHRoaXMuY2hhckxlbmd0aCA9IDA7XG5cbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbW9yZSBieXRlcyBpbiB0aGlzIGJ1ZmZlciwganVzdCBlbWl0IG91ciBjaGFyXG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBjaGFyU3RyO1xuICAgIH1cbiAgICBicmVhaztcbiAgfVxuXG4gIC8vIGRldGVybWluZSBhbmQgc2V0IGNoYXJMZW5ndGggLyBjaGFyUmVjZWl2ZWRcbiAgdGhpcy5kZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpO1xuXG4gIHZhciBlbmQgPSBidWZmZXIubGVuZ3RoO1xuICBpZiAodGhpcy5jaGFyTGVuZ3RoKSB7XG4gICAgLy8gYnVmZmVyIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlciBieXRlcyB3ZSBnb3RcbiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIGJ1ZmZlci5sZW5ndGggLSB0aGlzLmNoYXJSZWNlaXZlZCwgZW5kKTtcbiAgICBlbmQgLT0gdGhpcy5jaGFyUmVjZWl2ZWQ7XG4gIH1cblxuICBjaGFyU3RyICs9IGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCBlbmQpO1xuXG4gIHZhciBlbmQgPSBjaGFyU3RyLmxlbmd0aCAtIDE7XG4gIHZhciBjaGFyQ29kZSA9IGNoYXJTdHIuY2hhckNvZGVBdChlbmQpO1xuICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyXG4gIGlmIChjaGFyQ29kZSA+PSAweEQ4MDAgJiYgY2hhckNvZGUgPD0gMHhEQkZGKSB7XG4gICAgdmFyIHNpemUgPSB0aGlzLnN1cnJvZ2F0ZVNpemU7XG4gICAgdGhpcy5jaGFyTGVuZ3RoICs9IHNpemU7XG4gICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gc2l6ZTtcbiAgICB0aGlzLmNoYXJCdWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIHNpemUsIDAsIHNpemUpO1xuICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgMCwgMCwgc2l6ZSk7XG4gICAgcmV0dXJuIGNoYXJTdHIuc3Vic3RyaW5nKDAsIGVuZCk7XG4gIH1cblxuICAvLyBvciBqdXN0IGVtaXQgdGhlIGNoYXJTdHJcbiAgcmV0dXJuIGNoYXJTdHI7XG59O1xuXG4vLyBkZXRlY3RJbmNvbXBsZXRlQ2hhciBkZXRlcm1pbmVzIGlmIHRoZXJlIGlzIGFuIGluY29tcGxldGUgVVRGLTggY2hhcmFjdGVyIGF0XG4vLyB0aGUgZW5kIG9mIHRoZSBnaXZlbiBidWZmZXIuIElmIHNvLCBpdCBzZXRzIHRoaXMuY2hhckxlbmd0aCB0byB0aGUgYnl0ZVxuLy8gbGVuZ3RoIHRoYXQgY2hhcmFjdGVyLCBhbmQgc2V0cyB0aGlzLmNoYXJSZWNlaXZlZCB0byB0aGUgbnVtYmVyIG9mIGJ5dGVzXG4vLyB0aGF0IGFyZSBhdmFpbGFibGUgZm9yIHRoaXMgY2hhcmFjdGVyLlxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgLy8gZGV0ZXJtaW5lIGhvdyBtYW55IGJ5dGVzIHdlIGhhdmUgdG8gY2hlY2sgYXQgdGhlIGVuZCBvZiB0aGlzIGJ1ZmZlclxuICB2YXIgaSA9IChidWZmZXIubGVuZ3RoID49IDMpID8gMyA6IGJ1ZmZlci5sZW5ndGg7XG5cbiAgLy8gRmlndXJlIG91dCBpZiBvbmUgb2YgdGhlIGxhc3QgaSBieXRlcyBvZiBvdXIgYnVmZmVyIGFubm91bmNlcyBhblxuICAvLyBpbmNvbXBsZXRlIGNoYXIuXG4gIGZvciAoOyBpID4gMDsgaS0tKSB7XG4gICAgdmFyIGMgPSBidWZmZXJbYnVmZmVyLmxlbmd0aCAtIGldO1xuXG4gICAgLy8gU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVRGLTgjRGVzY3JpcHRpb25cblxuICAgIC8vIDExMFhYWFhYXG4gICAgaWYgKGkgPT0gMSAmJiBjID4+IDUgPT0gMHgwNikge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMjtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIDExMTBYWFhYXG4gICAgaWYgKGkgPD0gMiAmJiBjID4+IDQgPT0gMHgwRSkge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gMztcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIDExMTEwWFhYXG4gICAgaWYgKGkgPD0gMyAmJiBjID4+IDMgPT0gMHgxRSkge1xuICAgICAgdGhpcy5jaGFyTGVuZ3RoID0gNDtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGk7XG59O1xuXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgdmFyIHJlcyA9ICcnO1xuICBpZiAoYnVmZmVyICYmIGJ1ZmZlci5sZW5ndGgpXG4gICAgcmVzID0gdGhpcy53cml0ZShidWZmZXIpO1xuXG4gIGlmICh0aGlzLmNoYXJSZWNlaXZlZCkge1xuICAgIHZhciBjciA9IHRoaXMuY2hhclJlY2VpdmVkO1xuICAgIHZhciBidWYgPSB0aGlzLmNoYXJCdWZmZXI7XG4gICAgdmFyIGVuYyA9IHRoaXMuZW5jb2Rpbmc7XG4gICAgcmVzICs9IGJ1Zi5zbGljZSgwLCBjcikudG9TdHJpbmcoZW5jKTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuXG5mdW5jdGlvbiBwYXNzVGhyb3VnaFdyaXRlKGJ1ZmZlcikge1xuICByZXR1cm4gYnVmZmVyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcpO1xufVxuXG5mdW5jdGlvbiB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyKGJ1ZmZlcikge1xuICB0aGlzLmNoYXJSZWNlaXZlZCA9IGJ1ZmZlci5sZW5ndGggJSAyO1xuICB0aGlzLmNoYXJMZW5ndGggPSB0aGlzLmNoYXJSZWNlaXZlZCA/IDIgOiAwO1xufVxuXG5mdW5jdGlvbiBiYXNlNjREZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHtcbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMztcbiAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAzIDogMDtcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBwdW55Y29kZSA9IHJlcXVpcmUoJ3B1bnljb2RlJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJy4vdXRpbCcpO1xuXG5leHBvcnRzLnBhcnNlID0gdXJsUGFyc2U7XG5leHBvcnRzLnJlc29sdmUgPSB1cmxSZXNvbHZlO1xuZXhwb3J0cy5yZXNvbHZlT2JqZWN0ID0gdXJsUmVzb2x2ZU9iamVjdDtcbmV4cG9ydHMuZm9ybWF0ID0gdXJsRm9ybWF0O1xuXG5leHBvcnRzLlVybCA9IFVybDtcblxuZnVuY3Rpb24gVXJsKCkge1xuICB0aGlzLnByb3RvY29sID0gbnVsbDtcbiAgdGhpcy5zbGFzaGVzID0gbnVsbDtcbiAgdGhpcy5hdXRoID0gbnVsbDtcbiAgdGhpcy5ob3N0ID0gbnVsbDtcbiAgdGhpcy5wb3J0ID0gbnVsbDtcbiAgdGhpcy5ob3N0bmFtZSA9IG51bGw7XG4gIHRoaXMuaGFzaCA9IG51bGw7XG4gIHRoaXMuc2VhcmNoID0gbnVsbDtcbiAgdGhpcy5xdWVyeSA9IG51bGw7XG4gIHRoaXMucGF0aG5hbWUgPSBudWxsO1xuICB0aGlzLnBhdGggPSBudWxsO1xuICB0aGlzLmhyZWYgPSBudWxsO1xufVxuXG4vLyBSZWZlcmVuY2U6IFJGQyAzOTg2LCBSRkMgMTgwOCwgUkZDIDIzOTZcblxuLy8gZGVmaW5lIHRoZXNlIGhlcmUgc28gYXQgbGVhc3QgdGhleSBvbmx5IGhhdmUgdG8gYmVcbi8vIGNvbXBpbGVkIG9uY2Ugb24gdGhlIGZpcnN0IG1vZHVsZSBsb2FkLlxudmFyIHByb3RvY29sUGF0dGVybiA9IC9eKFthLXowLTkuKy1dKzopL2ksXG4gICAgcG9ydFBhdHRlcm4gPSAvOlswLTldKiQvLFxuXG4gICAgLy8gU3BlY2lhbCBjYXNlIGZvciBhIHNpbXBsZSBwYXRoIFVSTFxuICAgIHNpbXBsZVBhdGhQYXR0ZXJuID0gL14oXFwvXFwvPyg/IVxcLylbXlxcP1xcc10qKShcXD9bXlxcc10qKT8kLyxcblxuICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIHJlc2VydmVkIGZvciBkZWxpbWl0aW5nIFVSTHMuXG4gICAgLy8gV2UgYWN0dWFsbHkganVzdCBhdXRvLWVzY2FwZSB0aGVzZS5cbiAgICBkZWxpbXMgPSBbJzwnLCAnPicsICdcIicsICdgJywgJyAnLCAnXFxyJywgJ1xcbicsICdcXHQnXSxcblxuICAgIC8vIFJGQyAyMzk2OiBjaGFyYWN0ZXJzIG5vdCBhbGxvd2VkIGZvciB2YXJpb3VzIHJlYXNvbnMuXG4gICAgdW53aXNlID0gWyd7JywgJ30nLCAnfCcsICdcXFxcJywgJ14nLCAnYCddLmNvbmNhdChkZWxpbXMpLFxuXG4gICAgLy8gQWxsb3dlZCBieSBSRkNzLCBidXQgY2F1c2Ugb2YgWFNTIGF0dGFja3MuICBBbHdheXMgZXNjYXBlIHRoZXNlLlxuICAgIGF1dG9Fc2NhcGUgPSBbJ1xcJyddLmNvbmNhdCh1bndpc2UpLFxuICAgIC8vIENoYXJhY3RlcnMgdGhhdCBhcmUgbmV2ZXIgZXZlciBhbGxvd2VkIGluIGEgaG9zdG5hbWUuXG4gICAgLy8gTm90ZSB0aGF0IGFueSBpbnZhbGlkIGNoYXJzIGFyZSBhbHNvIGhhbmRsZWQsIGJ1dCB0aGVzZVxuICAgIC8vIGFyZSB0aGUgb25lcyB0aGF0IGFyZSAqZXhwZWN0ZWQqIHRvIGJlIHNlZW4sIHNvIHdlIGZhc3QtcGF0aFxuICAgIC8vIHRoZW0uXG4gICAgbm9uSG9zdENoYXJzID0gWyclJywgJy8nLCAnPycsICc7JywgJyMnXS5jb25jYXQoYXV0b0VzY2FwZSksXG4gICAgaG9zdEVuZGluZ0NoYXJzID0gWycvJywgJz8nLCAnIyddLFxuICAgIGhvc3RuYW1lTWF4TGVuID0gMjU1LFxuICAgIGhvc3RuYW1lUGFydFBhdHRlcm4gPSAvXlsrYS16MC05QS1aXy1dezAsNjN9JC8sXG4gICAgaG9zdG5hbWVQYXJ0U3RhcnQgPSAvXihbK2EtejAtOUEtWl8tXXswLDYzfSkoLiopJC8sXG4gICAgLy8gcHJvdG9jb2xzIHRoYXQgY2FuIGFsbG93IFwidW5zYWZlXCIgYW5kIFwidW53aXNlXCIgY2hhcnMuXG4gICAgdW5zYWZlUHJvdG9jb2wgPSB7XG4gICAgICAnamF2YXNjcmlwdCc6IHRydWUsXG4gICAgICAnamF2YXNjcmlwdDonOiB0cnVlXG4gICAgfSxcbiAgICAvLyBwcm90b2NvbHMgdGhhdCBuZXZlciBoYXZlIGEgaG9zdG5hbWUuXG4gICAgaG9zdGxlc3NQcm90b2NvbCA9IHtcbiAgICAgICdqYXZhc2NyaXB0JzogdHJ1ZSxcbiAgICAgICdqYXZhc2NyaXB0Oic6IHRydWVcbiAgICB9LFxuICAgIC8vIHByb3RvY29scyB0aGF0IGFsd2F5cyBjb250YWluIGEgLy8gYml0LlxuICAgIHNsYXNoZWRQcm90b2NvbCA9IHtcbiAgICAgICdodHRwJzogdHJ1ZSxcbiAgICAgICdodHRwcyc6IHRydWUsXG4gICAgICAnZnRwJzogdHJ1ZSxcbiAgICAgICdnb3BoZXInOiB0cnVlLFxuICAgICAgJ2ZpbGUnOiB0cnVlLFxuICAgICAgJ2h0dHA6JzogdHJ1ZSxcbiAgICAgICdodHRwczonOiB0cnVlLFxuICAgICAgJ2Z0cDonOiB0cnVlLFxuICAgICAgJ2dvcGhlcjonOiB0cnVlLFxuICAgICAgJ2ZpbGU6JzogdHJ1ZVxuICAgIH0sXG4gICAgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCdxdWVyeXN0cmluZycpO1xuXG5mdW5jdGlvbiB1cmxQYXJzZSh1cmwsIHBhcnNlUXVlcnlTdHJpbmcsIHNsYXNoZXNEZW5vdGVIb3N0KSB7XG4gIGlmICh1cmwgJiYgdXRpbC5pc09iamVjdCh1cmwpICYmIHVybCBpbnN0YW5jZW9mIFVybCkgcmV0dXJuIHVybDtcblxuICB2YXIgdSA9IG5ldyBVcmw7XG4gIHUucGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCk7XG4gIHJldHVybiB1O1xufVxuXG5VcmwucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24odXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuICBpZiAoIXV0aWwuaXNTdHJpbmcodXJsKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQYXJhbWV0ZXIgJ3VybCcgbXVzdCBiZSBhIHN0cmluZywgbm90IFwiICsgdHlwZW9mIHVybCk7XG4gIH1cblxuICAvLyBDb3B5IGNocm9tZSwgSUUsIG9wZXJhIGJhY2tzbGFzaC1oYW5kbGluZyBiZWhhdmlvci5cbiAgLy8gQmFjayBzbGFzaGVzIGJlZm9yZSB0aGUgcXVlcnkgc3RyaW5nIGdldCBjb252ZXJ0ZWQgdG8gZm9yd2FyZCBzbGFzaGVzXG4gIC8vIFNlZTogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTI1OTE2XG4gIHZhciBxdWVyeUluZGV4ID0gdXJsLmluZGV4T2YoJz8nKSxcbiAgICAgIHNwbGl0dGVyID1cbiAgICAgICAgICAocXVlcnlJbmRleCAhPT0gLTEgJiYgcXVlcnlJbmRleCA8IHVybC5pbmRleE9mKCcjJykpID8gJz8nIDogJyMnLFxuICAgICAgdVNwbGl0ID0gdXJsLnNwbGl0KHNwbGl0dGVyKSxcbiAgICAgIHNsYXNoUmVnZXggPSAvXFxcXC9nO1xuICB1U3BsaXRbMF0gPSB1U3BsaXRbMF0ucmVwbGFjZShzbGFzaFJlZ2V4LCAnLycpO1xuICB1cmwgPSB1U3BsaXQuam9pbihzcGxpdHRlcik7XG5cbiAgdmFyIHJlc3QgPSB1cmw7XG5cbiAgLy8gdHJpbSBiZWZvcmUgcHJvY2VlZGluZy5cbiAgLy8gVGhpcyBpcyB0byBzdXBwb3J0IHBhcnNlIHN0dWZmIGxpa2UgXCIgIGh0dHA6Ly9mb28uY29tICBcXG5cIlxuICByZXN0ID0gcmVzdC50cmltKCk7XG5cbiAgaWYgKCFzbGFzaGVzRGVub3RlSG9zdCAmJiB1cmwuc3BsaXQoJyMnKS5sZW5ndGggPT09IDEpIHtcbiAgICAvLyBUcnkgZmFzdCBwYXRoIHJlZ2V4cFxuICAgIHZhciBzaW1wbGVQYXRoID0gc2ltcGxlUGF0aFBhdHRlcm4uZXhlYyhyZXN0KTtcbiAgICBpZiAoc2ltcGxlUGF0aCkge1xuICAgICAgdGhpcy5wYXRoID0gcmVzdDtcbiAgICAgIHRoaXMuaHJlZiA9IHJlc3Q7XG4gICAgICB0aGlzLnBhdGhuYW1lID0gc2ltcGxlUGF0aFsxXTtcbiAgICAgIGlmIChzaW1wbGVQYXRoWzJdKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gc2ltcGxlUGF0aFsyXTtcbiAgICAgICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2UodGhpcy5zZWFyY2guc3Vic3RyKDEpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5zZWFyY2guc3Vic3RyKDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2ggPSAnJztcbiAgICAgICAgdGhpcy5xdWVyeSA9IHt9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG5cbiAgdmFyIHByb3RvID0gcHJvdG9jb2xQYXR0ZXJuLmV4ZWMocmVzdCk7XG4gIGlmIChwcm90bykge1xuICAgIHByb3RvID0gcHJvdG9bMF07XG4gICAgdmFyIGxvd2VyUHJvdG8gPSBwcm90by50b0xvd2VyQ2FzZSgpO1xuICAgIHRoaXMucHJvdG9jb2wgPSBsb3dlclByb3RvO1xuICAgIHJlc3QgPSByZXN0LnN1YnN0cihwcm90by5sZW5ndGgpO1xuICB9XG5cbiAgLy8gZmlndXJlIG91dCBpZiBpdCdzIGdvdCBhIGhvc3RcbiAgLy8gdXNlckBzZXJ2ZXIgaXMgKmFsd2F5cyogaW50ZXJwcmV0ZWQgYXMgYSBob3N0bmFtZSwgYW5kIHVybFxuICAvLyByZXNvbHV0aW9uIHdpbGwgdHJlYXQgLy9mb28vYmFyIGFzIGhvc3Q9Zm9vLHBhdGg9YmFyIGJlY2F1c2UgdGhhdCdzXG4gIC8vIGhvdyB0aGUgYnJvd3NlciByZXNvbHZlcyByZWxhdGl2ZSBVUkxzLlxuICBpZiAoc2xhc2hlc0Rlbm90ZUhvc3QgfHwgcHJvdG8gfHwgcmVzdC5tYXRjaCgvXlxcL1xcL1teQFxcL10rQFteQFxcL10rLykpIHtcbiAgICB2YXIgc2xhc2hlcyA9IHJlc3Quc3Vic3RyKDAsIDIpID09PSAnLy8nO1xuICAgIGlmIChzbGFzaGVzICYmICEocHJvdG8gJiYgaG9zdGxlc3NQcm90b2NvbFtwcm90b10pKSB7XG4gICAgICByZXN0ID0gcmVzdC5zdWJzdHIoMik7XG4gICAgICB0aGlzLnNsYXNoZXMgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmICghaG9zdGxlc3NQcm90b2NvbFtwcm90b10gJiZcbiAgICAgIChzbGFzaGVzIHx8IChwcm90byAmJiAhc2xhc2hlZFByb3RvY29sW3Byb3RvXSkpKSB7XG5cbiAgICAvLyB0aGVyZSdzIGEgaG9zdG5hbWUuXG4gICAgLy8gdGhlIGZpcnN0IGluc3RhbmNlIG9mIC8sID8sIDssIG9yICMgZW5kcyB0aGUgaG9zdC5cbiAgICAvL1xuICAgIC8vIElmIHRoZXJlIGlzIGFuIEAgaW4gdGhlIGhvc3RuYW1lLCB0aGVuIG5vbi1ob3N0IGNoYXJzICphcmUqIGFsbG93ZWRcbiAgICAvLyB0byB0aGUgbGVmdCBvZiB0aGUgbGFzdCBAIHNpZ24sIHVubGVzcyBzb21lIGhvc3QtZW5kaW5nIGNoYXJhY3RlclxuICAgIC8vIGNvbWVzICpiZWZvcmUqIHRoZSBALXNpZ24uXG4gICAgLy8gVVJMcyBhcmUgb2Jub3hpb3VzLlxuICAgIC8vXG4gICAgLy8gZXg6XG4gICAgLy8gaHR0cDovL2FAYkBjLyA9PiB1c2VyOmFAYiBob3N0OmNcbiAgICAvLyBodHRwOi8vYUBiP0BjID0+IHVzZXI6YSBob3N0OmMgcGF0aDovP0BjXG5cbiAgICAvLyB2MC4xMiBUT0RPKGlzYWFjcyk6IFRoaXMgaXMgbm90IHF1aXRlIGhvdyBDaHJvbWUgZG9lcyB0aGluZ3MuXG4gICAgLy8gUmV2aWV3IG91ciB0ZXN0IGNhc2UgYWdhaW5zdCBicm93c2VycyBtb3JlIGNvbXByZWhlbnNpdmVseS5cblxuICAgIC8vIGZpbmQgdGhlIGZpcnN0IGluc3RhbmNlIG9mIGFueSBob3N0RW5kaW5nQ2hhcnNcbiAgICB2YXIgaG9zdEVuZCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaG9zdEVuZGluZ0NoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKGhvc3RFbmRpbmdDaGFyc1tpXSk7XG4gICAgICBpZiAoaGVjICE9PSAtMSAmJiAoaG9zdEVuZCA9PT0gLTEgfHwgaGVjIDwgaG9zdEVuZCkpXG4gICAgICAgIGhvc3RFbmQgPSBoZWM7XG4gICAgfVxuXG4gICAgLy8gYXQgdGhpcyBwb2ludCwgZWl0aGVyIHdlIGhhdmUgYW4gZXhwbGljaXQgcG9pbnQgd2hlcmUgdGhlXG4gICAgLy8gYXV0aCBwb3J0aW9uIGNhbm5vdCBnbyBwYXN0LCBvciB0aGUgbGFzdCBAIGNoYXIgaXMgdGhlIGRlY2lkZXIuXG4gICAgdmFyIGF1dGgsIGF0U2lnbjtcbiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpIHtcbiAgICAgIC8vIGF0U2lnbiBjYW4gYmUgYW55d2hlcmUuXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGF0U2lnbiBtdXN0IGJlIGluIGF1dGggcG9ydGlvbi5cbiAgICAgIC8vIGh0dHA6Ly9hQGIvY0BkID0+IGhvc3Q6YiBhdXRoOmEgcGF0aDovY0BkXG4gICAgICBhdFNpZ24gPSByZXN0Lmxhc3RJbmRleE9mKCdAJywgaG9zdEVuZCk7XG4gICAgfVxuXG4gICAgLy8gTm93IHdlIGhhdmUgYSBwb3J0aW9uIHdoaWNoIGlzIGRlZmluaXRlbHkgdGhlIGF1dGguXG4gICAgLy8gUHVsbCB0aGF0IG9mZi5cbiAgICBpZiAoYXRTaWduICE9PSAtMSkge1xuICAgICAgYXV0aCA9IHJlc3Quc2xpY2UoMCwgYXRTaWduKTtcbiAgICAgIHJlc3QgPSByZXN0LnNsaWNlKGF0U2lnbiArIDEpO1xuICAgICAgdGhpcy5hdXRoID0gZGVjb2RlVVJJQ29tcG9uZW50KGF1dGgpO1xuICAgIH1cblxuICAgIC8vIHRoZSBob3N0IGlzIHRoZSByZW1haW5pbmcgdG8gdGhlIGxlZnQgb2YgdGhlIGZpcnN0IG5vbi1ob3N0IGNoYXJcbiAgICBob3N0RW5kID0gLTE7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub25Ib3N0Q2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBoZWMgPSByZXN0LmluZGV4T2Yobm9uSG9zdENoYXJzW2ldKTtcbiAgICAgIGlmIChoZWMgIT09IC0xICYmIChob3N0RW5kID09PSAtMSB8fCBoZWMgPCBob3N0RW5kKSlcbiAgICAgICAgaG9zdEVuZCA9IGhlYztcbiAgICB9XG4gICAgLy8gaWYgd2Ugc3RpbGwgaGF2ZSBub3QgaGl0IGl0LCB0aGVuIHRoZSBlbnRpcmUgdGhpbmcgaXMgYSBob3N0LlxuICAgIGlmIChob3N0RW5kID09PSAtMSlcbiAgICAgIGhvc3RFbmQgPSByZXN0Lmxlbmd0aDtcblxuICAgIHRoaXMuaG9zdCA9IHJlc3Quc2xpY2UoMCwgaG9zdEVuZCk7XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoaG9zdEVuZCk7XG5cbiAgICAvLyBwdWxsIG91dCBwb3J0LlxuICAgIHRoaXMucGFyc2VIb3N0KCk7XG5cbiAgICAvLyB3ZSd2ZSBpbmRpY2F0ZWQgdGhhdCB0aGVyZSBpcyBhIGhvc3RuYW1lLFxuICAgIC8vIHNvIGV2ZW4gaWYgaXQncyBlbXB0eSwgaXQgaGFzIHRvIGJlIHByZXNlbnQuXG4gICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUgfHwgJyc7XG5cbiAgICAvLyBpZiBob3N0bmFtZSBiZWdpbnMgd2l0aCBbIGFuZCBlbmRzIHdpdGggXVxuICAgIC8vIGFzc3VtZSB0aGF0IGl0J3MgYW4gSVB2NiBhZGRyZXNzLlxuICAgIHZhciBpcHY2SG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lWzBdID09PSAnWycgJiZcbiAgICAgICAgdGhpcy5ob3N0bmFtZVt0aGlzLmhvc3RuYW1lLmxlbmd0aCAtIDFdID09PSAnXSc7XG5cbiAgICAvLyB2YWxpZGF0ZSBhIGxpdHRsZS5cbiAgICBpZiAoIWlwdjZIb3N0bmFtZSkge1xuICAgICAgdmFyIGhvc3RwYXJ0cyA9IHRoaXMuaG9zdG5hbWUuc3BsaXQoL1xcLi8pO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBob3N0cGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBwYXJ0ID0gaG9zdHBhcnRzW2ldO1xuICAgICAgICBpZiAoIXBhcnQpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIXBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcbiAgICAgICAgICB2YXIgbmV3cGFydCA9ICcnO1xuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBrID0gcGFydC5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgIGlmIChwYXJ0LmNoYXJDb2RlQXQoaikgPiAxMjcpIHtcbiAgICAgICAgICAgICAgLy8gd2UgcmVwbGFjZSBub24tQVNDSUkgY2hhciB3aXRoIGEgdGVtcG9yYXJ5IHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhpcyB0byBtYWtlIHN1cmUgc2l6ZSBvZiBob3N0bmFtZSBpcyBub3RcbiAgICAgICAgICAgICAgLy8gYnJva2VuIGJ5IHJlcGxhY2luZyBub24tQVNDSUkgYnkgbm90aGluZ1xuICAgICAgICAgICAgICBuZXdwYXJ0ICs9ICd4JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG5ld3BhcnQgKz0gcGFydFtqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gd2UgdGVzdCBhZ2FpbiB3aXRoIEFTQ0lJIGNoYXIgb25seVxuICAgICAgICAgIGlmICghbmV3cGFydC5tYXRjaChob3N0bmFtZVBhcnRQYXR0ZXJuKSkge1xuICAgICAgICAgICAgdmFyIHZhbGlkUGFydHMgPSBob3N0cGFydHMuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICB2YXIgbm90SG9zdCA9IGhvc3RwYXJ0cy5zbGljZShpICsgMSk7XG4gICAgICAgICAgICB2YXIgYml0ID0gcGFydC5tYXRjaChob3N0bmFtZVBhcnRTdGFydCk7XG4gICAgICAgICAgICBpZiAoYml0KSB7XG4gICAgICAgICAgICAgIHZhbGlkUGFydHMucHVzaChiaXRbMV0pO1xuICAgICAgICAgICAgICBub3RIb3N0LnVuc2hpZnQoYml0WzJdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub3RIb3N0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXN0ID0gJy8nICsgbm90SG9zdC5qb2luKCcuJykgKyByZXN0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ob3N0bmFtZSA9IHZhbGlkUGFydHMuam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaG9zdG5hbWUubGVuZ3RoID4gaG9zdG5hbWVNYXhMZW4pIHtcbiAgICAgIHRoaXMuaG9zdG5hbWUgPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaG9zdG5hbWVzIGFyZSBhbHdheXMgbG93ZXIgY2FzZS5cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIC8vIElETkEgU3VwcG9ydDogUmV0dXJucyBhIHB1bnljb2RlZCByZXByZXNlbnRhdGlvbiBvZiBcImRvbWFpblwiLlxuICAgICAgLy8gSXQgb25seSBjb252ZXJ0cyBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgdGhhdFxuICAgICAgLy8gaGF2ZSBub24tQVNDSUkgY2hhcmFjdGVycywgaS5lLiBpdCBkb2Vzbid0IG1hdHRlciBpZlxuICAgICAgLy8geW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0IGFscmVhZHkgaXMgQVNDSUktb25seS5cbiAgICAgIHRoaXMuaG9zdG5hbWUgPSBwdW55Y29kZS50b0FTQ0lJKHRoaXMuaG9zdG5hbWUpO1xuICAgIH1cblxuICAgIHZhciBwID0gdGhpcy5wb3J0ID8gJzonICsgdGhpcy5wb3J0IDogJyc7XG4gICAgdmFyIGggPSB0aGlzLmhvc3RuYW1lIHx8ICcnO1xuICAgIHRoaXMuaG9zdCA9IGggKyBwO1xuICAgIHRoaXMuaHJlZiArPSB0aGlzLmhvc3Q7XG5cbiAgICAvLyBzdHJpcCBbIGFuZCBdIGZyb20gdGhlIGhvc3RuYW1lXG4gICAgLy8gdGhlIGhvc3QgZmllbGQgc3RpbGwgcmV0YWlucyB0aGVtLCB0aG91Z2hcbiAgICBpZiAoaXB2Nkhvc3RuYW1lKSB7XG4gICAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZS5zdWJzdHIoMSwgdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAyKTtcbiAgICAgIGlmIChyZXN0WzBdICE9PSAnLycpIHtcbiAgICAgICAgcmVzdCA9ICcvJyArIHJlc3Q7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gbm93IHJlc3QgaXMgc2V0IHRvIHRoZSBwb3N0LWhvc3Qgc3R1ZmYuXG4gIC8vIGNob3Agb2ZmIGFueSBkZWxpbSBjaGFycy5cbiAgaWYgKCF1bnNhZmVQcm90b2NvbFtsb3dlclByb3RvXSkge1xuXG4gICAgLy8gRmlyc3QsIG1ha2UgMTAwJSBzdXJlIHRoYXQgYW55IFwiYXV0b0VzY2FwZVwiIGNoYXJzIGdldFxuICAgIC8vIGVzY2FwZWQsIGV2ZW4gaWYgZW5jb2RlVVJJQ29tcG9uZW50IGRvZXNuJ3QgdGhpbmsgdGhleVxuICAgIC8vIG5lZWQgdG8gYmUuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdXRvRXNjYXBlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGFlID0gYXV0b0VzY2FwZVtpXTtcbiAgICAgIGlmIChyZXN0LmluZGV4T2YoYWUpID09PSAtMSlcbiAgICAgICAgY29udGludWU7XG4gICAgICB2YXIgZXNjID0gZW5jb2RlVVJJQ29tcG9uZW50KGFlKTtcbiAgICAgIGlmIChlc2MgPT09IGFlKSB7XG4gICAgICAgIGVzYyA9IGVzY2FwZShhZSk7XG4gICAgICB9XG4gICAgICByZXN0ID0gcmVzdC5zcGxpdChhZSkuam9pbihlc2MpO1xuICAgIH1cbiAgfVxuXG5cbiAgLy8gY2hvcCBvZmYgZnJvbSB0aGUgdGFpbCBmaXJzdC5cbiAgdmFyIGhhc2ggPSByZXN0LmluZGV4T2YoJyMnKTtcbiAgaWYgKGhhc2ggIT09IC0xKSB7XG4gICAgLy8gZ290IGEgZnJhZ21lbnQgc3RyaW5nLlxuICAgIHRoaXMuaGFzaCA9IHJlc3Quc3Vic3RyKGhhc2gpO1xuICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIGhhc2gpO1xuICB9XG4gIHZhciBxbSA9IHJlc3QuaW5kZXhPZignPycpO1xuICBpZiAocW0gIT09IC0xKSB7XG4gICAgdGhpcy5zZWFyY2ggPSByZXN0LnN1YnN0cihxbSk7XG4gICAgdGhpcy5xdWVyeSA9IHJlc3Quc3Vic3RyKHFtICsgMSk7XG4gICAgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAgIHRoaXMucXVlcnkgPSBxdWVyeXN0cmluZy5wYXJzZSh0aGlzLnF1ZXJ5KTtcbiAgICB9XG4gICAgcmVzdCA9IHJlc3Quc2xpY2UoMCwgcW0pO1xuICB9IGVsc2UgaWYgKHBhcnNlUXVlcnlTdHJpbmcpIHtcbiAgICAvLyBubyBxdWVyeSBzdHJpbmcsIGJ1dCBwYXJzZVF1ZXJ5U3RyaW5nIHN0aWxsIHJlcXVlc3RlZFxuICAgIHRoaXMuc2VhcmNoID0gJyc7XG4gICAgdGhpcy5xdWVyeSA9IHt9O1xuICB9XG4gIGlmIChyZXN0KSB0aGlzLnBhdGhuYW1lID0gcmVzdDtcbiAgaWYgKHNsYXNoZWRQcm90b2NvbFtsb3dlclByb3RvXSAmJlxuICAgICAgdGhpcy5ob3N0bmFtZSAmJiAhdGhpcy5wYXRobmFtZSkge1xuICAgIHRoaXMucGF0aG5hbWUgPSAnLyc7XG4gIH1cblxuICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gIGlmICh0aGlzLnBhdGhuYW1lIHx8IHRoaXMuc2VhcmNoKSB7XG4gICAgdmFyIHAgPSB0aGlzLnBhdGhuYW1lIHx8ICcnO1xuICAgIHZhciBzID0gdGhpcy5zZWFyY2ggfHwgJyc7XG4gICAgdGhpcy5wYXRoID0gcCArIHM7XG4gIH1cblxuICAvLyBmaW5hbGx5LCByZWNvbnN0cnVjdCB0aGUgaHJlZiBiYXNlZCBvbiB3aGF0IGhhcyBiZWVuIHZhbGlkYXRlZC5cbiAgdGhpcy5ocmVmID0gdGhpcy5mb3JtYXQoKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBmb3JtYXQgYSBwYXJzZWQgb2JqZWN0IGludG8gYSB1cmwgc3RyaW5nXG5mdW5jdGlvbiB1cmxGb3JtYXQob2JqKSB7XG4gIC8vIGVuc3VyZSBpdCdzIGFuIG9iamVjdCwgYW5kIG5vdCBhIHN0cmluZyB1cmwuXG4gIC8vIElmIGl0J3MgYW4gb2JqLCB0aGlzIGlzIGEgbm8tb3AuXG4gIC8vIHRoaXMgd2F5LCB5b3UgY2FuIGNhbGwgdXJsX2Zvcm1hdCgpIG9uIHN0cmluZ3NcbiAgLy8gdG8gY2xlYW4gdXAgcG90ZW50aWFsbHkgd29ua3kgdXJscy5cbiAgaWYgKHV0aWwuaXNTdHJpbmcob2JqKSkgb2JqID0gdXJsUGFyc2Uob2JqKTtcbiAgaWYgKCEob2JqIGluc3RhbmNlb2YgVXJsKSkgcmV0dXJuIFVybC5wcm90b3R5cGUuZm9ybWF0LmNhbGwob2JqKTtcbiAgcmV0dXJuIG9iai5mb3JtYXQoKTtcbn1cblxuVXJsLnByb3RvdHlwZS5mb3JtYXQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGF1dGggPSB0aGlzLmF1dGggfHwgJyc7XG4gIGlmIChhdXRoKSB7XG4gICAgYXV0aCA9IGVuY29kZVVSSUNvbXBvbmVudChhdXRoKTtcbiAgICBhdXRoID0gYXV0aC5yZXBsYWNlKC8lM0EvaSwgJzonKTtcbiAgICBhdXRoICs9ICdAJztcbiAgfVxuXG4gIHZhciBwcm90b2NvbCA9IHRoaXMucHJvdG9jb2wgfHwgJycsXG4gICAgICBwYXRobmFtZSA9IHRoaXMucGF0aG5hbWUgfHwgJycsXG4gICAgICBoYXNoID0gdGhpcy5oYXNoIHx8ICcnLFxuICAgICAgaG9zdCA9IGZhbHNlLFxuICAgICAgcXVlcnkgPSAnJztcblxuICBpZiAodGhpcy5ob3N0KSB7XG4gICAgaG9zdCA9IGF1dGggKyB0aGlzLmhvc3Q7XG4gIH0gZWxzZSBpZiAodGhpcy5ob3N0bmFtZSkge1xuICAgIGhvc3QgPSBhdXRoICsgKHRoaXMuaG9zdG5hbWUuaW5kZXhPZignOicpID09PSAtMSA/XG4gICAgICAgIHRoaXMuaG9zdG5hbWUgOlxuICAgICAgICAnWycgKyB0aGlzLmhvc3RuYW1lICsgJ10nKTtcbiAgICBpZiAodGhpcy5wb3J0KSB7XG4gICAgICBob3N0ICs9ICc6JyArIHRoaXMucG9ydDtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5xdWVyeSAmJlxuICAgICAgdXRpbC5pc09iamVjdCh0aGlzLnF1ZXJ5KSAmJlxuICAgICAgT2JqZWN0LmtleXModGhpcy5xdWVyeSkubGVuZ3RoKSB7XG4gICAgcXVlcnkgPSBxdWVyeXN0cmluZy5zdHJpbmdpZnkodGhpcy5xdWVyeSk7XG4gIH1cblxuICB2YXIgc2VhcmNoID0gdGhpcy5zZWFyY2ggfHwgKHF1ZXJ5ICYmICgnPycgKyBxdWVyeSkpIHx8ICcnO1xuXG4gIGlmIChwcm90b2NvbCAmJiBwcm90b2NvbC5zdWJzdHIoLTEpICE9PSAnOicpIHByb3RvY29sICs9ICc6JztcblxuICAvLyBvbmx5IHRoZSBzbGFzaGVkUHJvdG9jb2xzIGdldCB0aGUgLy8uICBOb3QgbWFpbHRvOiwgeG1wcDosIGV0Yy5cbiAgLy8gdW5sZXNzIHRoZXkgaGFkIHRoZW0gdG8gYmVnaW4gd2l0aC5cbiAgaWYgKHRoaXMuc2xhc2hlcyB8fFxuICAgICAgKCFwcm90b2NvbCB8fCBzbGFzaGVkUHJvdG9jb2xbcHJvdG9jb2xdKSAmJiBob3N0ICE9PSBmYWxzZSkge1xuICAgIGhvc3QgPSAnLy8nICsgKGhvc3QgfHwgJycpO1xuICAgIGlmIChwYXRobmFtZSAmJiBwYXRobmFtZS5jaGFyQXQoMCkgIT09ICcvJykgcGF0aG5hbWUgPSAnLycgKyBwYXRobmFtZTtcbiAgfSBlbHNlIGlmICghaG9zdCkge1xuICAgIGhvc3QgPSAnJztcbiAgfVxuXG4gIGlmIChoYXNoICYmIGhhc2guY2hhckF0KDApICE9PSAnIycpIGhhc2ggPSAnIycgKyBoYXNoO1xuICBpZiAoc2VhcmNoICYmIHNlYXJjaC5jaGFyQXQoMCkgIT09ICc/Jykgc2VhcmNoID0gJz8nICsgc2VhcmNoO1xuXG4gIHBhdGhuYW1lID0gcGF0aG5hbWUucmVwbGFjZSgvWz8jXS9nLCBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQobWF0Y2gpO1xuICB9KTtcbiAgc2VhcmNoID0gc2VhcmNoLnJlcGxhY2UoJyMnLCAnJTIzJyk7XG5cbiAgcmV0dXJuIHByb3RvY29sICsgaG9zdCArIHBhdGhuYW1lICsgc2VhcmNoICsgaGFzaDtcbn07XG5cbmZ1bmN0aW9uIHVybFJlc29sdmUoc291cmNlLCByZWxhdGl2ZSkge1xuICByZXR1cm4gdXJsUGFyc2Uoc291cmNlLCBmYWxzZSwgdHJ1ZSkucmVzb2x2ZShyZWxhdGl2ZSk7XG59XG5cblVybC5wcm90b3R5cGUucmVzb2x2ZSA9IGZ1bmN0aW9uKHJlbGF0aXZlKSB7XG4gIHJldHVybiB0aGlzLnJlc29sdmVPYmplY3QodXJsUGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKSkuZm9ybWF0KCk7XG59O1xuXG5mdW5jdGlvbiB1cmxSZXNvbHZlT2JqZWN0KHNvdXJjZSwgcmVsYXRpdmUpIHtcbiAgaWYgKCFzb3VyY2UpIHJldHVybiByZWxhdGl2ZTtcbiAgcmV0dXJuIHVybFBhcnNlKHNvdXJjZSwgZmFsc2UsIHRydWUpLnJlc29sdmVPYmplY3QocmVsYXRpdmUpO1xufVxuXG5VcmwucHJvdG90eXBlLnJlc29sdmVPYmplY3QgPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xuICBpZiAodXRpbC5pc1N0cmluZyhyZWxhdGl2ZSkpIHtcbiAgICB2YXIgcmVsID0gbmV3IFVybCgpO1xuICAgIHJlbC5wYXJzZShyZWxhdGl2ZSwgZmFsc2UsIHRydWUpO1xuICAgIHJlbGF0aXZlID0gcmVsO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IG5ldyBVcmwoKTtcbiAgdmFyIHRrZXlzID0gT2JqZWN0LmtleXModGhpcyk7XG4gIGZvciAodmFyIHRrID0gMDsgdGsgPCB0a2V5cy5sZW5ndGg7IHRrKyspIHtcbiAgICB2YXIgdGtleSA9IHRrZXlzW3RrXTtcbiAgICByZXN1bHRbdGtleV0gPSB0aGlzW3RrZXldO1xuICB9XG5cbiAgLy8gaGFzaCBpcyBhbHdheXMgb3ZlcnJpZGRlbiwgbm8gbWF0dGVyIHdoYXQuXG4gIC8vIGV2ZW4gaHJlZj1cIlwiIHdpbGwgcmVtb3ZlIGl0LlxuICByZXN1bHQuaGFzaCA9IHJlbGF0aXZlLmhhc2g7XG5cbiAgLy8gaWYgdGhlIHJlbGF0aXZlIHVybCBpcyBlbXB0eSwgdGhlbiB0aGVyZSdzIG5vdGhpbmcgbGVmdCB0byBkbyBoZXJlLlxuICBpZiAocmVsYXRpdmUuaHJlZiA9PT0gJycpIHtcbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gaHJlZnMgbGlrZSAvL2Zvby9iYXIgYWx3YXlzIGN1dCB0byB0aGUgcHJvdG9jb2wuXG4gIGlmIChyZWxhdGl2ZS5zbGFzaGVzICYmICFyZWxhdGl2ZS5wcm90b2NvbCkge1xuICAgIC8vIHRha2UgZXZlcnl0aGluZyBleGNlcHQgdGhlIHByb3RvY29sIGZyb20gcmVsYXRpdmVcbiAgICB2YXIgcmtleXMgPSBPYmplY3Qua2V5cyhyZWxhdGl2ZSk7XG4gICAgZm9yICh2YXIgcmsgPSAwOyByayA8IHJrZXlzLmxlbmd0aDsgcmsrKykge1xuICAgICAgdmFyIHJrZXkgPSBya2V5c1tya107XG4gICAgICBpZiAocmtleSAhPT0gJ3Byb3RvY29sJylcbiAgICAgICAgcmVzdWx0W3JrZXldID0gcmVsYXRpdmVbcmtleV07XG4gICAgfVxuXG4gICAgLy91cmxQYXJzZSBhcHBlbmRzIHRyYWlsaW5nIC8gdG8gdXJscyBsaWtlIGh0dHA6Ly93d3cuZXhhbXBsZS5jb21cbiAgICBpZiAoc2xhc2hlZFByb3RvY29sW3Jlc3VsdC5wcm90b2NvbF0gJiZcbiAgICAgICAgcmVzdWx0Lmhvc3RuYW1lICYmICFyZXN1bHQucGF0aG5hbWUpIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gcmVzdWx0LnBhdGhuYW1lID0gJy8nO1xuICAgIH1cblxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBpZiAocmVsYXRpdmUucHJvdG9jb2wgJiYgcmVsYXRpdmUucHJvdG9jb2wgIT09IHJlc3VsdC5wcm90b2NvbCkge1xuICAgIC8vIGlmIGl0J3MgYSBrbm93biB1cmwgcHJvdG9jb2wsIHRoZW4gY2hhbmdpbmdcbiAgICAvLyB0aGUgcHJvdG9jb2wgZG9lcyB3ZWlyZCB0aGluZ3NcbiAgICAvLyBmaXJzdCwgaWYgaXQncyBub3QgZmlsZTosIHRoZW4gd2UgTVVTVCBoYXZlIGEgaG9zdCxcbiAgICAvLyBhbmQgaWYgdGhlcmUgd2FzIGEgcGF0aFxuICAgIC8vIHRvIGJlZ2luIHdpdGgsIHRoZW4gd2UgTVVTVCBoYXZlIGEgcGF0aC5cbiAgICAvLyBpZiBpdCBpcyBmaWxlOiwgdGhlbiB0aGUgaG9zdCBpcyBkcm9wcGVkLFxuICAgIC8vIGJlY2F1c2UgdGhhdCdzIGtub3duIHRvIGJlIGhvc3RsZXNzLlxuICAgIC8vIGFueXRoaW5nIGVsc2UgaXMgYXNzdW1lZCB0byBiZSBhYnNvbHV0ZS5cbiAgICBpZiAoIXNsYXNoZWRQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocmVsYXRpdmUpO1xuICAgICAgZm9yICh2YXIgdiA9IDA7IHYgPCBrZXlzLmxlbmd0aDsgdisrKSB7XG4gICAgICAgIHZhciBrID0ga2V5c1t2XTtcbiAgICAgICAgcmVzdWx0W2tdID0gcmVsYXRpdmVba107XG4gICAgICB9XG4gICAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmVzdWx0LnByb3RvY29sID0gcmVsYXRpdmUucHJvdG9jb2w7XG4gICAgaWYgKCFyZWxhdGl2ZS5ob3N0ICYmICFob3N0bGVzc1Byb3RvY29sW3JlbGF0aXZlLnByb3RvY29sXSkge1xuICAgICAgdmFyIHJlbFBhdGggPSAocmVsYXRpdmUucGF0aG5hbWUgfHwgJycpLnNwbGl0KCcvJyk7XG4gICAgICB3aGlsZSAocmVsUGF0aC5sZW5ndGggJiYgIShyZWxhdGl2ZS5ob3N0ID0gcmVsUGF0aC5zaGlmdCgpKSk7XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3QpIHJlbGF0aXZlLmhvc3QgPSAnJztcbiAgICAgIGlmICghcmVsYXRpdmUuaG9zdG5hbWUpIHJlbGF0aXZlLmhvc3RuYW1lID0gJyc7XG4gICAgICBpZiAocmVsUGF0aFswXSAhPT0gJycpIHJlbFBhdGgudW5zaGlmdCgnJyk7XG4gICAgICBpZiAocmVsUGF0aC5sZW5ndGggPCAyKSByZWxQYXRoLnVuc2hpZnQoJycpO1xuICAgICAgcmVzdWx0LnBhdGhuYW1lID0gcmVsUGF0aC5qb2luKCcvJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbGF0aXZlLnBhdGhuYW1lO1xuICAgIH1cbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICAgIHJlc3VsdC5ob3N0ID0gcmVsYXRpdmUuaG9zdCB8fCAnJztcbiAgICByZXN1bHQuYXV0aCA9IHJlbGF0aXZlLmF1dGg7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdDtcbiAgICByZXN1bHQucG9ydCA9IHJlbGF0aXZlLnBvcnQ7XG4gICAgLy8gdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAocmVzdWx0LnBhdGhuYW1lIHx8IHJlc3VsdC5zZWFyY2gpIHtcbiAgICAgIHZhciBwID0gcmVzdWx0LnBhdGhuYW1lIHx8ICcnO1xuICAgICAgdmFyIHMgPSByZXN1bHQuc2VhcmNoIHx8ICcnO1xuICAgICAgcmVzdWx0LnBhdGggPSBwICsgcztcbiAgICB9XG4gICAgcmVzdWx0LnNsYXNoZXMgPSByZXN1bHQuc2xhc2hlcyB8fCByZWxhdGl2ZS5zbGFzaGVzO1xuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB2YXIgaXNTb3VyY2VBYnMgPSAocmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5jaGFyQXQoMCkgPT09ICcvJyksXG4gICAgICBpc1JlbEFicyA9IChcbiAgICAgICAgICByZWxhdGl2ZS5ob3N0IHx8XG4gICAgICAgICAgcmVsYXRpdmUucGF0aG5hbWUgJiYgcmVsYXRpdmUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLydcbiAgICAgICksXG4gICAgICBtdXN0RW5kQWJzID0gKGlzUmVsQWJzIHx8IGlzU291cmNlQWJzIHx8XG4gICAgICAgICAgICAgICAgICAgIChyZXN1bHQuaG9zdCAmJiByZWxhdGl2ZS5wYXRobmFtZSkpLFxuICAgICAgcmVtb3ZlQWxsRG90cyA9IG11c3RFbmRBYnMsXG4gICAgICBzcmNQYXRoID0gcmVzdWx0LnBhdGhuYW1lICYmIHJlc3VsdC5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLFxuICAgICAgcmVsUGF0aCA9IHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLnNwbGl0KCcvJykgfHwgW10sXG4gICAgICBwc3ljaG90aWMgPSByZXN1bHQucHJvdG9jb2wgJiYgIXNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdO1xuXG4gIC8vIGlmIHRoZSB1cmwgaXMgYSBub24tc2xhc2hlZCB1cmwsIHRoZW4gcmVsYXRpdmVcbiAgLy8gbGlua3MgbGlrZSAuLi8uLiBzaG91bGQgYmUgYWJsZVxuICAvLyB0byBjcmF3bCB1cCB0byB0aGUgaG9zdG5hbWUsIGFzIHdlbGwuICBUaGlzIGlzIHN0cmFuZ2UuXG4gIC8vIHJlc3VsdC5wcm90b2NvbCBoYXMgYWxyZWFkeSBiZWVuIHNldCBieSBub3cuXG4gIC8vIExhdGVyIG9uLCBwdXQgdGhlIGZpcnN0IHBhdGggcGFydCBpbnRvIHRoZSBob3N0IGZpZWxkLlxuICBpZiAocHN5Y2hvdGljKSB7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gJyc7XG4gICAgcmVzdWx0LnBvcnQgPSBudWxsO1xuICAgIGlmIChyZXN1bHQuaG9zdCkge1xuICAgICAgaWYgKHNyY1BhdGhbMF0gPT09ICcnKSBzcmNQYXRoWzBdID0gcmVzdWx0Lmhvc3Q7XG4gICAgICBlbHNlIHNyY1BhdGgudW5zaGlmdChyZXN1bHQuaG9zdCk7XG4gICAgfVxuICAgIHJlc3VsdC5ob3N0ID0gJyc7XG4gICAgaWYgKHJlbGF0aXZlLnByb3RvY29sKSB7XG4gICAgICByZWxhdGl2ZS5ob3N0bmFtZSA9IG51bGw7XG4gICAgICByZWxhdGl2ZS5wb3J0ID0gbnVsbDtcbiAgICAgIGlmIChyZWxhdGl2ZS5ob3N0KSB7XG4gICAgICAgIGlmIChyZWxQYXRoWzBdID09PSAnJykgcmVsUGF0aFswXSA9IHJlbGF0aXZlLmhvc3Q7XG4gICAgICAgIGVsc2UgcmVsUGF0aC51bnNoaWZ0KHJlbGF0aXZlLmhvc3QpO1xuICAgICAgfVxuICAgICAgcmVsYXRpdmUuaG9zdCA9IG51bGw7XG4gICAgfVxuICAgIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzICYmIChyZWxQYXRoWzBdID09PSAnJyB8fCBzcmNQYXRoWzBdID09PSAnJyk7XG4gIH1cblxuICBpZiAoaXNSZWxBYnMpIHtcbiAgICAvLyBpdCdzIGFic29sdXRlLlxuICAgIHJlc3VsdC5ob3N0ID0gKHJlbGF0aXZlLmhvc3QgfHwgcmVsYXRpdmUuaG9zdCA9PT0gJycpID9cbiAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3QgOiByZXN1bHQuaG9zdDtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSAocmVsYXRpdmUuaG9zdG5hbWUgfHwgcmVsYXRpdmUuaG9zdG5hbWUgPT09ICcnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgOiByZXN1bHQuaG9zdG5hbWU7XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICBzcmNQYXRoID0gcmVsUGF0aDtcbiAgICAvLyBmYWxsIHRocm91Z2ggdG8gdGhlIGRvdC1oYW5kbGluZyBiZWxvdy5cbiAgfSBlbHNlIGlmIChyZWxQYXRoLmxlbmd0aCkge1xuICAgIC8vIGl0J3MgcmVsYXRpdmVcbiAgICAvLyB0aHJvdyBhd2F5IHRoZSBleGlzdGluZyBmaWxlLCBhbmQgdGFrZSB0aGUgbmV3IHBhdGggaW5zdGVhZC5cbiAgICBpZiAoIXNyY1BhdGgpIHNyY1BhdGggPSBbXTtcbiAgICBzcmNQYXRoLnBvcCgpO1xuICAgIHNyY1BhdGggPSBzcmNQYXRoLmNvbmNhdChyZWxQYXRoKTtcbiAgICByZXN1bHQuc2VhcmNoID0gcmVsYXRpdmUuc2VhcmNoO1xuICAgIHJlc3VsdC5xdWVyeSA9IHJlbGF0aXZlLnF1ZXJ5O1xuICB9IGVsc2UgaWYgKCF1dGlsLmlzTnVsbE9yVW5kZWZpbmVkKHJlbGF0aXZlLnNlYXJjaCkpIHtcbiAgICAvLyBqdXN0IHB1bGwgb3V0IHRoZSBzZWFyY2guXG4gICAgLy8gbGlrZSBocmVmPSc/Zm9vJy5cbiAgICAvLyBQdXQgdGhpcyBhZnRlciB0aGUgb3RoZXIgdHdvIGNhc2VzIGJlY2F1c2UgaXQgc2ltcGxpZmllcyB0aGUgYm9vbGVhbnNcbiAgICBpZiAocHN5Y2hvdGljKSB7XG4gICAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IHNyY1BhdGguc2hpZnQoKTtcbiAgICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3RcbiAgICAgIC8vdGhpcyBlc3BlY2lhbGx5IGhhcHBlbnMgaW4gY2FzZXMgbGlrZVxuICAgICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcbiAgICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5ob3N0LnNwbGl0KCdAJykgOiBmYWxzZTtcbiAgICAgIGlmIChhdXRoSW5Ib3N0KSB7XG4gICAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgICByZXN1bHQuaG9zdCA9IHJlc3VsdC5ob3N0bmFtZSA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICAvL3RvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKCF1dGlsLmlzTnVsbChyZXN1bHQucGF0aG5hbWUpIHx8ICF1dGlsLmlzTnVsbChyZXN1bHQuc2VhcmNoKSkge1xuICAgICAgcmVzdWx0LnBhdGggPSAocmVzdWx0LnBhdGhuYW1lID8gcmVzdWx0LnBhdGhuYW1lIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAgKHJlc3VsdC5zZWFyY2ggPyByZXN1bHQuc2VhcmNoIDogJycpO1xuICAgIH1cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKCFzcmNQYXRoLmxlbmd0aCkge1xuICAgIC8vIG5vIHBhdGggYXQgYWxsLiAgZWFzeS5cbiAgICAvLyB3ZSd2ZSBhbHJlYWR5IGhhbmRsZWQgdGhlIG90aGVyIHN0dWZmIGFib3ZlLlxuICAgIHJlc3VsdC5wYXRobmFtZSA9IG51bGw7XG4gICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICAgIGlmIChyZXN1bHQuc2VhcmNoKSB7XG4gICAgICByZXN1bHQucGF0aCA9ICcvJyArIHJlc3VsdC5zZWFyY2g7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gbnVsbDtcbiAgICB9XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIGlmIGEgdXJsIEVORHMgaW4gLiBvciAuLiwgdGhlbiBpdCBtdXN0IGdldCBhIHRyYWlsaW5nIHNsYXNoLlxuICAvLyBob3dldmVyLCBpZiBpdCBlbmRzIGluIGFueXRoaW5nIGVsc2Ugbm9uLXNsYXNoeSxcbiAgLy8gdGhlbiBpdCBtdXN0IE5PVCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cbiAgdmFyIGxhc3QgPSBzcmNQYXRoLnNsaWNlKC0xKVswXTtcbiAgdmFyIGhhc1RyYWlsaW5nU2xhc2ggPSAoXG4gICAgICAocmVzdWx0Lmhvc3QgfHwgcmVsYXRpdmUuaG9zdCB8fCBzcmNQYXRoLmxlbmd0aCA+IDEpICYmXG4gICAgICAobGFzdCA9PT0gJy4nIHx8IGxhc3QgPT09ICcuLicpIHx8IGxhc3QgPT09ICcnKTtcblxuICAvLyBzdHJpcCBzaW5nbGUgZG90cywgcmVzb2x2ZSBkb3VibGUgZG90cyB0byBwYXJlbnQgZGlyXG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBzcmNQYXRoLmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICBsYXN0ID0gc3JjUGF0aFtpXTtcbiAgICBpZiAobGFzdCA9PT0gJy4nKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICB9IGVsc2UgaWYgKGxhc3QgPT09ICcuLicpIHtcbiAgICAgIHNyY1BhdGguc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwLS07XG4gICAgfVxuICB9XG5cbiAgLy8gaWYgdGhlIHBhdGggaXMgYWxsb3dlZCB0byBnbyBhYm92ZSB0aGUgcm9vdCwgcmVzdG9yZSBsZWFkaW5nIC4uc1xuICBpZiAoIW11c3RFbmRBYnMgJiYgIXJlbW92ZUFsbERvdHMpIHtcbiAgICBmb3IgKDsgdXAtLTsgdXApIHtcbiAgICAgIHNyY1BhdGgudW5zaGlmdCgnLi4nKTtcbiAgICB9XG4gIH1cblxuICBpZiAobXVzdEVuZEFicyAmJiBzcmNQYXRoWzBdICE9PSAnJyAmJlxuICAgICAgKCFzcmNQYXRoWzBdIHx8IHNyY1BhdGhbMF0uY2hhckF0KDApICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC51bnNoaWZ0KCcnKTtcbiAgfVxuXG4gIGlmIChoYXNUcmFpbGluZ1NsYXNoICYmIChzcmNQYXRoLmpvaW4oJy8nKS5zdWJzdHIoLTEpICE9PSAnLycpKSB7XG4gICAgc3JjUGF0aC5wdXNoKCcnKTtcbiAgfVxuXG4gIHZhciBpc0Fic29sdXRlID0gc3JjUGF0aFswXSA9PT0gJycgfHxcbiAgICAgIChzcmNQYXRoWzBdICYmIHNyY1BhdGhbMF0uY2hhckF0KDApID09PSAnLycpO1xuXG4gIC8vIHB1dCB0aGUgaG9zdCBiYWNrXG4gIGlmIChwc3ljaG90aWMpIHtcbiAgICByZXN1bHQuaG9zdG5hbWUgPSByZXN1bHQuaG9zdCA9IGlzQWJzb2x1dGUgPyAnJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNQYXRoLmxlbmd0aCA/IHNyY1BhdGguc2hpZnQoKSA6ICcnO1xuICAgIC8vb2NjYXRpb25hbHkgdGhlIGF1dGggY2FuIGdldCBzdHVjayBvbmx5IGluIGhvc3RcbiAgICAvL3RoaXMgZXNwZWNpYWxseSBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAvL3VybC5yZXNvbHZlT2JqZWN0KCdtYWlsdG86bG9jYWwxQGRvbWFpbjEnLCAnbG9jYWwyQGRvbWFpbjInKVxuICAgIHZhciBhdXRoSW5Ib3N0ID0gcmVzdWx0Lmhvc3QgJiYgcmVzdWx0Lmhvc3QuaW5kZXhPZignQCcpID4gMCA/XG4gICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG4gICAgaWYgKGF1dGhJbkhvc3QpIHtcbiAgICAgIHJlc3VsdC5hdXRoID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgfVxuICB9XG5cbiAgbXVzdEVuZEFicyA9IG11c3RFbmRBYnMgfHwgKHJlc3VsdC5ob3N0ICYmIHNyY1BhdGgubGVuZ3RoKTtcblxuICBpZiAobXVzdEVuZEFicyAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7XG4gIH1cblxuICBpZiAoIXNyY1BhdGgubGVuZ3RoKSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gbnVsbDtcbiAgICByZXN1bHQucGF0aCA9IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0LnBhdGhuYW1lID0gc3JjUGF0aC5qb2luKCcvJyk7XG4gIH1cblxuICAvL3RvIHN1cHBvcnQgcmVxdWVzdC5odHRwXG4gIGlmICghdXRpbC5pc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhdXRpbC5pc051bGwocmVzdWx0LnNlYXJjaCkpIHtcbiAgICByZXN1bHQucGF0aCA9IChyZXN1bHQucGF0aG5hbWUgPyByZXN1bHQucGF0aG5hbWUgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgKHJlc3VsdC5zZWFyY2ggPyByZXN1bHQuc2VhcmNoIDogJycpO1xuICB9XG4gIHJlc3VsdC5hdXRoID0gcmVsYXRpdmUuYXV0aCB8fCByZXN1bHQuYXV0aDtcbiAgcmVzdWx0LnNsYXNoZXMgPSByZXN1bHQuc2xhc2hlcyB8fCByZWxhdGl2ZS5zbGFzaGVzO1xuICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblVybC5wcm90b3R5cGUucGFyc2VIb3N0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBob3N0ID0gdGhpcy5ob3N0O1xuICB2YXIgcG9ydCA9IHBvcnRQYXR0ZXJuLmV4ZWMoaG9zdCk7XG4gIGlmIChwb3J0KSB7XG4gICAgcG9ydCA9IHBvcnRbMF07XG4gICAgaWYgKHBvcnQgIT09ICc6Jykge1xuICAgICAgdGhpcy5wb3J0ID0gcG9ydC5zdWJzdHIoMSk7XG4gICAgfVxuICAgIGhvc3QgPSBob3N0LnN1YnN0cigwLCBob3N0Lmxlbmd0aCAtIHBvcnQubGVuZ3RoKTtcbiAgfVxuICBpZiAoaG9zdCkgdGhpcy5ob3N0bmFtZSA9IGhvc3Q7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNTdHJpbmc6IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiB0eXBlb2YoYXJnKSA9PT0gJ3N0cmluZyc7XG4gIH0sXG4gIGlzT2JqZWN0OiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gdHlwZW9mKGFyZykgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbiAgfSxcbiAgaXNOdWxsOiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gYXJnID09PSBudWxsO1xuICB9LFxuICBpc051bGxPclVuZGVmaW5lZDogZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGFyZyA9PSBudWxsO1xuICB9XG59O1xuIiwiXG4vKipcbiAqIE1vZHVsZSBleHBvcnRzLlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZGVwcmVjYXRlO1xuXG4vKipcbiAqIE1hcmsgdGhhdCBhIG1ldGhvZCBzaG91bGQgbm90IGJlIHVzZWQuXG4gKiBSZXR1cm5zIGEgbW9kaWZpZWQgZnVuY3Rpb24gd2hpY2ggd2FybnMgb25jZSBieSBkZWZhdWx0LlxuICpcbiAqIElmIGBsb2NhbFN0b3JhZ2Uubm9EZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBpdCBpcyBhIG5vLW9wLlxuICpcbiAqIElmIGBsb2NhbFN0b3JhZ2UudGhyb3dEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9uc1xuICogd2lsbCB0aHJvdyBhbiBFcnJvciB3aGVuIGludm9rZWQuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS50cmFjZURlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zXG4gKiB3aWxsIGludm9rZSBgY29uc29sZS50cmFjZSgpYCBpbnN0ZWFkIG9mIGBjb25zb2xlLmVycm9yKClgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIC0gdGhlIGZ1bmN0aW9uIHRvIGRlcHJlY2F0ZVxuICogQHBhcmFtIHtTdHJpbmd9IG1zZyAtIHRoZSBzdHJpbmcgdG8gcHJpbnQgdG8gdGhlIGNvbnNvbGUgd2hlbiBgZm5gIGlzIGludm9rZWRcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gYSBuZXcgXCJkZXByZWNhdGVkXCIgdmVyc2lvbiBvZiBgZm5gXG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIGRlcHJlY2F0ZSAoZm4sIG1zZykge1xuICBpZiAoY29uZmlnKCdub0RlcHJlY2F0aW9uJykpIHtcbiAgICByZXR1cm4gZm47XG4gIH1cblxuICB2YXIgd2FybmVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGRlcHJlY2F0ZWQoKSB7XG4gICAgaWYgKCF3YXJuZWQpIHtcbiAgICAgIGlmIChjb25maWcoJ3Rocm93RGVwcmVjYXRpb24nKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAoY29uZmlnKCd0cmFjZURlcHJlY2F0aW9uJykpIHtcbiAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1zZyk7XG4gICAgICB9XG4gICAgICB3YXJuZWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfVxuXG4gIHJldHVybiBkZXByZWNhdGVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBgbG9jYWxTdG9yYWdlYCBmb3IgYm9vbGVhbiB2YWx1ZXMgZm9yIHRoZSBnaXZlbiBgbmFtZWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm5zIHtCb29sZWFufVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gY29uZmlnIChuYW1lKSB7XG4gIC8vIGFjY2Vzc2luZyBnbG9iYWwubG9jYWxTdG9yYWdlIGNhbiB0cmlnZ2VyIGEgRE9NRXhjZXB0aW9uIGluIHNhbmRib3hlZCBpZnJhbWVzXG4gIHRyeSB7XG4gICAgaWYgKCFnbG9iYWwubG9jYWxTdG9yYWdlKSByZXR1cm4gZmFsc2U7XG4gIH0gY2F0Y2ggKF8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHZhbCA9IGdsb2JhbC5sb2NhbFN0b3JhZ2VbbmFtZV07XG4gIGlmIChudWxsID09IHZhbCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gU3RyaW5nKHZhbCkudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSBleHRlbmRcblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuZnVuY3Rpb24gZXh0ZW5kKCkge1xuICAgIHZhciB0YXJnZXQgPSB7fVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXVxuXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXRcbn1cbiIsInZhciBfID0gcmVxdWlyZSgnLi9sb2Rhc2gnKTtcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJy4vZGVidWcnKTtcbnZhciByZW1vdGVFdmVudHMgPSBbXTtcbnZhciBsb2NhbEV2ZW50cyA9IFtdO1xudmFyIGluaXRpYXRlZCA9IGZhbHNlO1xudmFyIHNoYXJlZCA9IGZhbHNlO1xudmFyIGN1cnNvciA9IG51bGw7XG52YXIgd2lkZ2V0O1xudmFyIGVudGl0eSA9ICcnO1xudmFyIGVtaXQ7XG52YXIgcGF0aCA9ICcnO1xudmFyIGV2ZW50VGltZXN0YW1wID0gMDtcbnZhciB1cGRhdGVJbnRlcnZhbCA9IG51bGw7XG52YXIgdXBkYXRlSW50ZXJ2YWxWYWx1ZSA9IDUwMDA7XG52YXIgdXBkYXRlU3RhdGVJbnRlcnZhbCA9IG51bGw7XG52YXIgY2hlY2tFdmVyeSA9IF8uZGVib3VuY2UodW5zaGFyZUJyb3dzZXIsIDMwMDAwKTtcbnZhciBjdXJzb3JYID0gMCwgY3Vyc29yWSA9IDA7XG52YXIgcmVxdWVzdEFGO1xuXG5mdW5jdGlvbiBpbml0KG9wdGlvbnMpe1xuXHRpZihpbml0aWF0ZWQpIHJldHVybiBkZWJ1Zy5pbmZvKCdDb2Jyb3dzaW5nIGFscmVhZHkgaW5pdGlhdGVkJyk7XG5cblx0YWRkRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ2tleWRvd24nLCBldmVudHNIYW5kbGVyKTtcblx0YWRkRXZlbnQoZG9jdW1lbnQsICdrZXlwcmVzcycsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ21vdXNldXAnLCBldmVudHNIYW5kbGVyKTtcblx0YWRkRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ2NoYW5nZScsIGV2ZW50c0hhbmRsZXIpO1xuXG5cdHdpZGdldCA9ICh0eXBlb2Ygb3B0aW9ucy53aWRnZXQgPT09ICdzdHJpbmcnKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy53aWRnZXQpIDogb3B0aW9ucy53aWRnZXQ7XG5cdGVudGl0eSA9IG9wdGlvbnMuZW50aXR5O1xuXHRlbWl0ID0gb3B0aW9ucy5lbWl0O1xuXHRwYXRoID0gb3B0aW9ucy5wYXRoO1xuXG5cdGluaXRpYXRlZCA9IHRydWU7XG5cdHVwZGF0ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoZW1pdEV2ZW50cywgdXBkYXRlSW50ZXJ2YWxWYWx1ZSk7XG5cblx0ZGVidWcubG9nKCdjb2Jyb3dzaW5nIG1vZHVsZSBpbml0aWF0ZWQgd2l0aCBwYXJhbWV0ZXJzOiAnLCBvcHRpb25zKTtcblx0ZW1pdCgnY29icm93c2luZy9pbml0Jyk7XG59XG5cbmZ1bmN0aW9uIHNoYXJlQnJvd3Nlcigpe1xuICAgIGlmKHNoYXJlZCkgcmV0dXJuIGRlYnVnLmluZm8oJ0Jyb3dzZXIgYWxyZWFkeSBzaGFyZWQnKTtcbiAgICBhZGRFdmVudChkb2N1bWVudCwgJ3Njcm9sbCcsIGV2ZW50c0hhbmRsZXIpO1xuICAgIGFkZEV2ZW50KGRvY3VtZW50LCAnc2VsZWN0JywgZXZlbnRzSGFuZGxlcik7XG4gICAgYWRkRXZlbnQoZG9jdW1lbnQsICdtb3VzZW1vdmUnLCBldmVudHNIYW5kbGVyKTtcblxuICAgIC8vIGFkZEV2ZW50KGRvY3VtZW50LCAnbW91c2VvdmVyJywgZXZlbnRzSGFuZGxlcik7XG4gICAgLy8gYWRkRXZlbnQoZG9jdW1lbnQsICdtb3VzZW91dCcsIGV2ZW50c0hhbmRsZXIpO1xuICAgIFxuICAgIGNyZWF0ZVJlbW90ZUN1cnNvcigpO1xuICAgIHNoYXJlZCA9IHRydWU7XG4gICAgdXBkYXRlU3RhdGVJbnRlcnZhbCA9IHNldEludGVydmFsKHVwZGF0ZVN0YXRlLCB1cGRhdGVJbnRlcnZhbFZhbHVlKTtcbiAgICBjbGVhckludGVydmFsKHVwZGF0ZUludGVydmFsKTtcblxuICAgIGRlYnVnLmxvZygnYnJvd3NlciBzaGFyZWQnKTtcbiAgICBlbWl0KCdjb2Jyb3dzaW5nL3NoYXJlZCcsIHsgZW50aXR5OiBlbnRpdHkgfSk7XG59XG5cbmZ1bmN0aW9uIHVuc2hhcmVCcm93c2VyKCl7XG5cdGlmKCFzaGFyZWQpIHJldHVybiBkZWJ1Zy5pbmZvKCdCcm93c2VyIGFscmVhZHkgdW5zaGFyZWQnKTtcblxuICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnc2Nyb2xsJywgZXZlbnRzSGFuZGxlcik7XG4gICAgcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdzZWxlY3QnLCBldmVudHNIYW5kbGVyKTtcbiAgICByZW1vdmVFdmVudChkb2N1bWVudCwgJ21vdXNlbW92ZScsIGV2ZW50c0hhbmRsZXIpO1xuXG4gICAgLy8gcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdtb3VzZW92ZXInLCBldmVudHNIYW5kbGVyKTtcbiAgICAvLyByZW1vdmVFdmVudChkb2N1bWVudCwgJ21vdXNlb3V0JywgZXZlbnRzSGFuZGxlcik7XG4gICAgXG4gICAgcmVtb3ZlUmVtb3RlQ3Vyc29yKCk7XG4gICAgc2hhcmVkID0gZmFsc2U7XG4gICAgdXBkYXRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChlbWl0RXZlbnRzLCB1cGRhdGVJbnRlcnZhbFZhbHVlKTtcbiAgICBjbGVhckludGVydmFsKHVwZGF0ZVN0YXRlSW50ZXJ2YWwpO1xuXG5cdGVtaXQoJ2NvYnJvd3NpbmcvdW5zaGFyZWQnLCB7IGVudGl0eTogZW50aXR5IH0pO1xuICAgIGRlYnVnLmxvZygnYnJvd3NlciB1bnNoYXJlZCcpO1xufVxuXG5mdW5jdGlvbiB1bnNoYXJlQWxsKCl7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAna2V5dXAnLCBldmVudHNIYW5kbGVyKTtcblx0Ly8gcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdrZXlkb3duJywgZXZlbnRzSGFuZGxlcik7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAna2V5cHJlc3MnLCBldmVudHNIYW5kbGVyKTtcblx0Ly8gcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdtb3VzZXVwJywgZXZlbnRzSGFuZGxlcik7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnY2xpY2snLCBldmVudHNIYW5kbGVyKTtcblx0Ly8gcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdjaGFuZ2UnLCBldmVudHNIYW5kbGVyKTtcblx0Y2xlYXJJbnRlcnZhbCh1cGRhdGVJbnRlcnZhbCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlbW90ZUN1cnNvcigpe1xuXHR2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdGlmKCFjdXJzb3IpIHtcblx0XHRjdXJzb3I9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuXHRcdGN1cnNvci5jbGFzc05hbWUgPSAnd2Mtcm10LXB0cic7XG5cdFx0Y3Vyc29yLnNldEF0dHJpYnV0ZSgnc3JjJywgcGF0aCsnaW1hZ2VzL3BvaW50ZXIucG5nJyk7XG5cdFx0Y3Vyc29yLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcblx0XHRpZihib2R5LmZpcnN0Q2hpbGQpIHtcblx0XHRcdGJvZHkuaW5zZXJ0QmVmb3JlKGN1cnNvciwgYm9keS5maXJzdENoaWxkKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ym9keS5hcHBlbmRDaGlsZChjdXJzb3IpO1xuXHRcblx0XHR9XG5cdFx0cmVkcmF3Q3Vyc29yKCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVkcmF3Q3Vyc29yKCl7XG5cdGN1cnNvci5zdHlsZS5sZWZ0ID0gY3Vyc29yWDtcblx0Y3Vyc29yLnN0eWxlLnRvcCA9IGN1cnNvclk7XG5cdHJlcXVlc3RBRiA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVkcmF3Q3Vyc29yKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlUmVtb3RlQ3Vyc29yKCl7XG5cdGlmKCFjdXJzb3IpIHJldHVybjtcblx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUocmVxdWVzdEFGKTtcblx0Y3Vyc29yLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY3Vyc29yKTtcblx0Y3Vyc29yID0gbnVsbDtcbn1cblxuLy9mcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjg5NzE1NS9nZXQtY3Vyc29yLXBvc2l0aW9uLWluLWNoYXJhY3RlcnMtd2l0aGluLWEtdGV4dC1pbnB1dC1maWVsZFxuZnVuY3Rpb24gZ2V0Q2FyZXRQb3NpdGlvbiAob0ZpZWxkKSB7XG4gIC8vIEluaXRpYWxpemVcblx0dmFyIGlDYXJldFBvcyA9IDA7XG5cbiAgLy8gSUUgU3VwcG9ydFxuICAgIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcblxuICAgIC8vIFNldCBmb2N1cyBvbiB0aGUgZWxlbWVudFxuICAgICAgICBvRmllbGQuZm9jdXMgKCk7XG5cbiAgICAvLyBUbyBnZXQgY3Vyc29yIHBvc2l0aW9uLCBnZXQgZW1wdHkgc2VsZWN0aW9uIHJhbmdlXG4gICAgICAgIHZhciBvU2VsID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlICgpO1xuXG4gICAgLy8gTW92ZSBzZWxlY3Rpb24gc3RhcnQgdG8gMCBwb3NpdGlvblxuICAgICAgICBvU2VsLm1vdmVTdGFydCAoJ2NoYXJhY3RlcicsIC1vRmllbGQudmFsdWUubGVuZ3RoKTtcblxuICAgIC8vIFRoZSBjYXJldCBwb3NpdGlvbiBpcyBzZWxlY3Rpb24gbGVuZ3RoXG4gICAgICAgIGlDYXJldFBvcyA9IG9TZWwudGV4dC5sZW5ndGg7XG4gICAgfVxuICAgIGVsc2UgaWYob0ZpZWxkLnR5cGUgJiYgKG9GaWVsZC50eXBlID09PSAnZW1haWwnIHx8IG9GaWVsZC50eXBlID09PSAnbnVtYmVyJykpe1xuICAgICAgICBpQ2FyZXRQb3MgPSBudWxsO1xuICAgIH1cbiAgLy8gRmlyZWZveCBzdXBwb3J0XG4gICAgZWxzZSBpZiAob0ZpZWxkLnNlbGVjdGlvblN0YXJ0IHx8IG9GaWVsZC5zZWxlY3Rpb25TdGFydCA9PSAnMCcpe1xuICAgICAgICBpQ2FyZXRQb3MgPSBvRmllbGQuc2VsZWN0aW9uU3RhcnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpQ2FyZXRQb3MgPSBudWxsO1xuICAgIH1cblx0Ly8gUmV0dXJuIHJlc3VsdHNcblx0cmV0dXJuIChpQ2FyZXRQb3MpO1xufVxuXG5mdW5jdGlvbiBlbWl0RXZlbnRzKCl7XG5cdC8vIGlmKCFzaGFyZWQgJiYgIWxvY2FsRXZlbnRzLmxlbmd0aCkgcmV0dXJuO1xuXHRlbWl0KCdjb2Jyb3dzaW5nL2V2ZW50JywgeyBlbnRpdHk6IGVudGl0eSwgZXZlbnRzOiBsb2NhbEV2ZW50cyB9KTtcblx0bG9jYWxFdmVudHMgPSBbXTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlU3RhdGUoKXtcblx0bG9jYWxFdmVudHMucHVzaCh7IHNoYXJlZDogdHJ1ZSwgZW50aXR5OiBlbnRpdHkgfSk7XG59XG5cbmZ1bmN0aW9uIGV2ZW50c0hhbmRsZXIoZXZ0KXtcblx0dmFyIGUgPSBldnQgfHwgd2luZG93LmV2ZW50LFxuXHRcdGV0eXBlID0gZS50eXBlLFxuXHRcdHRhcmcgPSBlLnRhcmdldCxcblx0XHRub2RlTmFtZSA9IHRhcmcubm9kZU5hbWUsXG5cdFx0ZGIgPSBkb2N1bWVudC5ib2R5LFxuXHRcdHBhcmFtcyA9IHt9LFxuXHRcdG5vZGVJbmRleCA9IG51bGwsXG5cdFx0bm9kZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YXJnLm5vZGVOYW1lKSxcblx0XHRzY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLFxuXHRcdHNjcm9sbExlZnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsXG5cdFx0aSA9IDA7XG5cblx0Ly8gaWYgdGhlIHRhcmdldCBpcyB0ZXh0IG5vZGUsIGdldCBwYXJlbnQgbm9kZVxuXHRpZih0YXJnLm5vZGVUeXBlID09PSAzKSB0YXJnID0gdGFyZy5wYXJlbnROb2RlO1xuXG5cdC8vIHJldHVybiBpZiB0aGUgdGFyZ2V0IG5vZGUgaXMgdGhlIGRlc2NlbmRhbnQgb2Ygd2lkZ2V0IGVsZW1lbnRcblx0aWYoZW50aXR5ID09PSAndXNlcicgJiYgaXNEZXNjZW5kYW50KHdpZGdldCwgdGFyZykpIHJldHVybjtcblxuXHRmb3IoaT0wOyBpIDwgcmVtb3RlRXZlbnRzLmxlbmd0aDsgaSsrKXtcblx0XHRpZihyZW1vdGVFdmVudHNbaV0uZXZlbnQgPT0gZXR5cGUpe1xuXHRcdFx0cmVtb3RlRXZlbnRzLnNwbGljZShpLCAxKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHQvLyBnZXQgdGhlIGluZGV4IG9mIHRhcmdldCBub2RlXG5cdGZvcihpPTA7IGk8bm9kZXMubGVuZ3RoOyBpKyspe1xuXHRcdGlmKG5vZGVzW2ldID09IHRhcmcpIG5vZGVJbmRleCA9IGk7XG5cdH1cblxuXHQvLyBldmVudCB0eXBlXG5cdHBhcmFtcy5ldmVudCA9IGV0eXBlO1xuXHQvLyBlbnRpdHlcblx0cGFyYW1zLmVudGl0eSA9IGVudGl0eTtcblx0Ly8gdGFyZ2V0IG5vZGVcblx0cGFyYW1zLnRuID0gbm9kZU5hbWU7XG5cdC8vIGluZGV4IG9mIHRoZSB0YXJnZXQgbm9kZVxuXHRwYXJhbXMudG5pID0gbm9kZUluZGV4O1xuXHQvLyBsYXlvdXQgd2lkdGggb2YgdGhlIGRvY3VtZW50LmJvZHlcblx0cGFyYW1zLncgPSBkYi5vZmZzZXRXaWR0aDtcblx0Ly8gbGF5b3V0IGhlaWdodCBvZiB0aGUgZG9jdW1lbnQuYm9keVxuXHRwYXJhbXMuaCA9IGRiLm9mZnNldEhlaWdodDtcblx0cGFyYW1zLnN4ID0gc2Nyb2xsTGVmdDtcblx0cGFyYW1zLnN5ID0gc2Nyb2xsVG9wO1xuXG5cdGlmKGV0eXBlID09PSAnbW91c2Vtb3ZlJyB8fCBldHlwZSA9PT0gJ21vdXNlb3ZlcicgfHwgZXR5cGUgPT09ICdtb3VzZW91dCcpIHtcblx0XHR2YXIgeCA9IGUucGFnZVggfHwgZS5jbGllbnRYICsgc2Nyb2xsVG9wO1xuXHRcdHZhciB5ID0gZS5wYWdlWSB8fCBlLmNsaWVudFkgKyBzY3JvbGxMZWZ0O1xuXG5cdFx0Ly8gY3Vyc29yIGhvcmlzb250YWwgcG9zdGlvblxuXHRcdHBhcmFtcy54ID0geDtcblx0XHQvLyBjdXJzb3IgdmVydGljYWwgcG9zaXRpb25cblx0XHRwYXJhbXMueSA9IHk7XG5cblx0XHQvLyBmb3IoaT0wOyBpIDwgbG9jYWxFdmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyBcdGlmKGxvY2FsRXZlbnRzW2ldLmluZGV4T2YoZXR5cGUpICE9IC0xKSB7XG5cdFx0Ly8gXHRcdGxvY2FsRXZlbnRzLnNwbGljZShpLCAxKTtcblx0XHQvLyBcdFx0YnJlYWs7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gfVxuXHR9IGVsc2UgaWYoZXR5cGUgPT09ICdzY3JvbGwnKSB7XG5cdFx0Ly8gZm9yKGk9MDsgaSA8IGxvY2FsRXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Ly8gXHRpZihsb2NhbEV2ZW50c1tpXS5pbmRleE9mKCdzY3JvbGwnKSAhPSAtMSkge1xuXHRcdC8vIFx0XHRsb2NhbEV2ZW50cy5zcGxpY2UoaSwgMSk7XG5cdFx0Ly8gXHRcdGJyZWFrO1xuXHRcdC8vIFx0fVxuXHRcdC8vIH1cblx0XHRcblx0XHQvLyB2YXIgc3QgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblx0XHQvLyB2YXIgc2wgPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XG5cblx0fSBlbHNlIGlmKGV0eXBlID09ICdrZXl1cCcgfHwgZXR5cGUgPT0gJ2tleWRvd24nIHx8IGV0eXBlID09ICdrZXlwcmVzcycpIHtcblx0XHR2YXIgY29kZSA9IGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cdFx0dmFyIGMgPSBnZXRDYXJldFBvc2l0aW9uKHRhcmcpO1xuXG5cdFx0aWYobm9kZU5hbWUgPT09ICdJTlBVVCcgJiYgdGFyZy50eXBlID09PSAncGFzc3dvcmQnKSByZXR1cm47XG5cblx0XHRpZihldHlwZSA9PSAna2V5dXAnKSB7XG5cdFx0XHRpZigoYyA9PT0gbnVsbCkgfHwgKGNvZGUgPT0gODYgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpKSkge1xuXHRcdFx0XHR2YXIgdHZhbHVlID0gdGFyZy52YWx1ZTtcblx0XHRcdFx0aWYodHZhbHVlKSB7XG5cdFx0XHRcdFx0dHZhbHVlID0gdHZhbHVlLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xuXHRcdFx0XHRcdC8vIHRoZSB2YWx1ZSBhdHRyaWJ1dGUgb2YgdGhlIHRhcmdldCBub2RlLCBpZiBleGlzdHNcblx0XHRcdFx0XHRwYXJhbXMudmFsdWUgPSB0dmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYoZXR5cGUgPT0gJ2tleWRvd24nKSB7XG5cdFx0XHRpZihjICE9PSBudWxsICYmIChjb2RlID09IDggfHwgY29kZSA9PSA0NiB8fCBjb2RlID09IDE5MCkpIHtcblx0XHRcdFx0aWYoIXRhcmcudmFsdWUpIHJldHVybjtcblx0XHRcdFx0Ly8gY2FyZXQgcG9zaXRpb25cblx0XHRcdFx0cGFyYW1zLnBvcyA9IGM7XG5cdFx0XHRcdC8vIGNoYXIgY29kZVxuXHRcdFx0XHRwYXJhbXMuY29kZSA9IGNvZGU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmKGV0eXBlID09PSAna2V5cHJlc3MnKSB7XG5cdFx0XHRpZihjICE9PSBudWxsICYmIGNvZGUgIT0gOCAmJiBjb2RlICE9IDQ2KSB7XG5cdFx0XHRcdC8vIGNhcmV0IHBvc2l0aW9uXG5cdFx0XHRcdHBhcmFtcy5wb3MgPSBjO1xuXHRcdFx0XHQvLyBjaGFyIGNvZGVcblx0XHRcdFx0cGFyYW1zLmNvZGUgPSBjb2RlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmKGV0eXBlID09PSAnY2hhbmdlJykge1xuXHRcdGlmKG5vZGVOYW1lID09PSAnSU5QVVQnICYmIHRhcmcudHlwZSA9PT0gJ3Bhc3N3b3JkJykgcmV0dXJuO1xuXHRcdHBhcmFtcy52YWx1ZSA9IHRhcmcudmFsdWU7XG5cblx0fSBlbHNlIGlmKGV0eXBlID09ICdtb3VzZXVwJyB8fCBldHlwZSA9PSAnc2VsZWN0Jyl7XG5cdFx0dmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSB8fCBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS50ZXh0LFxuXHRcdFx0c28gPSBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LFxuXHRcdFx0ZW8gPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQsXG5cdFx0XHRhbmNob3JQYXJlbnROb2RlSW5kZXggPSAwLFxuXHRcdFx0YW5jaG9yUGFyZW50Tm9kZU5hbWUgPSAnJyxcblx0XHRcdGFuY2hvck5vZGVJbmRleCA9IDAsXG5cdFx0XHRhbmNob3JQYXJlbnQgPSAnJyxcblx0XHRcdGZvY3VzUGFyZW50Tm9kZUluZGV4ID0gMCxcblx0XHRcdGZvY3VzUGFyZW50Tm9kZU5hbWUgPSAnJyxcblx0XHRcdGZvY3VzTm9kZUluZGV4ID0gMCxcblx0XHRcdGZvY3VzUGFyZW50ID0gJycsXG5cdFx0XHRyZXZlcnNlID0gZmFsc2U7XG5cblx0XHRpZihzZWxlY3Rpb24uYW5jaG9yTm9kZSAhPT0gbnVsbCkge1xuXHRcdFx0YW5jaG9yUGFyZW50ID0gc2VsZWN0aW9uLmFuY2hvck5vZGUucGFyZW50Tm9kZTtcblxuXHRcdFx0Zm9yKGk9MDsgaTxhbmNob3JQYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdGlmKGFuY2hvclBhcmVudC5jaGlsZE5vZGVzW2ldID09IHNlbGVjdGlvbi5hbmNob3JOb2RlKSBhbmNob3JOb2RlSW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRhbmNob3JQYXJlbnROb2RlTmFtZSA9IGFuY2hvclBhcmVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0bm9kZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShhbmNob3JQYXJlbnROb2RlTmFtZSk7XG5cdFx0XHRmb3IoaT0wO2k8bm9kZXMubGVuZ3RoO2krKykge1xuXHRcdFx0XHRpZihub2Rlc1tpXSA9PT0gYW5jaG9yUGFyZW50KSBhbmNob3JQYXJlbnROb2RlSW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb2N1c1BhcmVudCA9IHNlbGVjdGlvbi5mb2N1c05vZGUucGFyZW50Tm9kZTtcblx0XHRcdGZvcihpPTA7IGk8Zm9jdXNQYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdGlmKGZvY3VzUGFyZW50LmNoaWxkTm9kZXNbaV0gPT0gc2VsZWN0aW9uLmZvY3VzTm9kZSkgZm9jdXNOb2RlSW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb2N1c1BhcmVudE5vZGVOYW1lID0gZm9jdXNQYXJlbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdG5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZm9jdXNQYXJlbnROb2RlTmFtZSk7XG5cdFx0XHRmb3IoaT0wO2k8bm9kZXMubGVuZ3RoO2krKykge1xuXHRcdFx0XHRpZihub2Rlc1tpXSA9PT0gZm9jdXNQYXJlbnQpIGZvY3VzUGFyZW50Tm9kZUluZGV4ID0gaTtcblx0XHRcdH1cblx0XHRcdFxuXG5cdFx0XHRpZihhbmNob3JQYXJlbnROb2RlTmFtZSA9PT0gZm9jdXNQYXJlbnROb2RlTmFtZSAmJlxuXHRcdFx0XHRhbmNob3JQYXJlbnROb2RlSW5kZXggPT09IGZvY3VzUGFyZW50Tm9kZUluZGV4ICYmXG5cdFx0XHRcdFx0YW5jaG9yTm9kZUluZGV4ID09PSBmb2N1c05vZGVJbmRleCAmJlxuXHRcdFx0XHRcdFx0c28gPiBlbylcblx0XHRcdFx0XHRcdFx0cmV2ZXJzZSA9IHRydWU7XG5cblx0XHRcdC8vIG5hbWUgb2YgdGhlIHRhcmdldCBub2RlIHdoZXJlIHNlbGVjdGlvbiBzdGFydGVkXG5cdFx0XHRwYXJhbXMuc24gPSBhbmNob3JQYXJlbnROb2RlTmFtZTtcblx0XHRcdHBhcmFtcy5zbmkgPSBhbmNob3JQYXJlbnROb2RlSW5kZXg7XG5cdFx0XHRwYXJhbXMuc2NoaSA9IGFuY2hvck5vZGVJbmRleDtcblx0XHRcdC8vIG5hbWUgb2YgdGhlIHRhcmdldCBub2RlIHdoZXJlIHNlbGVjdGlvbiBlbmRlZFxuXHRcdFx0cGFyYW1zLmVuID0gZm9jdXNQYXJlbnROb2RlTmFtZTtcblx0XHRcdHBhcmFtcy5lbmkgPSBmb2N1c1BhcmVudE5vZGVJbmRleDtcblx0XHRcdHBhcmFtcy5lY2hpID0gZm9jdXNOb2RlSW5kZXg7XG5cdFx0XHRwYXJhbXMuc28gPSByZXZlcnNlID8gZW8gOiBzbztcblx0XHRcdHBhcmFtcy5lbyA9IHJldmVyc2UgPyBzbyA6IGVvO1xuXHRcdH1cblx0fSBlbHNlIGlmKGV0eXBlID09ICdjbGljaycpIHtcblx0XHRwYXJhbXMuc2N4ID0gZS5zY3JlZW5YO1xuXHRcdHBhcmFtcy5zY3kgPSBlLnNjcmVlblk7XG5cdH1cblxuXHQvLyBkZWJ1Zy5sb2coJ2V2ZW50c0hhbmRsZXI6ICcsIHBhcmFtcyk7XG5cdGxvY2FsRXZlbnRzLnB1c2gocGFyYW1zKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlRXZlbnRzKHJlc3VsdCl7XG5cdHZhciBtYWluRWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcblx0XHR0YXJnZXQsXG5cdFx0ZXZ0ID0ge307XG5cblx0aWYocmVzdWx0LmV2ZW50cyAmJiByZXN1bHQuZXZlbnRzLmxlbmd0aCkge1xuXG5cdFx0Ly8gY2hlY2sgZm9yIHNjcm9sbFRvcC9MZWZ0LiBcblx0XHQvLyBJRSBhbmQgRmlyZWZveCBhbHdheXMgcmV0dXJuIDAgZnJvbSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcC9MZWZ0LCBcblx0XHQvLyB3aGlsZSBvdGhlciBicm93c2VycyByZXR1cm4gMCBmcm9tIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxuXHRcdG1haW5FbGVtZW50ID0gKCdBY3RpdmVYT2JqZWN0JyBpbiB3aW5kb3cgfHwgdHlwZW9mIEluc3RhbGxUcmlnZ2VyICE9PSAndW5kZWZpbmVkJykgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgOiBkb2N1bWVudC5ib2R5O1xuXG5cdFx0Zm9yKHZhciBpPTA7IGk8cmVzdWx0LmV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0ZXZ0ID0gcmVzdWx0LmV2ZW50c1tpXTtcblxuXHRcdFx0Ly8gaWYoZXZ0LnNoYXJlZCAhPT0gdW5kZWZpbmVkKSBkZWJ1Zy5sb2coJ3NoYXJlZCBldmVudHMnLCBldmVudFRpbWVzdGFtcCwgZXZ0LCByZXN1bHQuaW5pdCk7XG5cdFx0XHRpZihldnQudGltZXN0YW1wIDwgZXZlbnRUaW1lc3RhbXApIGNvbnRpbnVlO1xuXHRcdFx0aWYoZXZ0LmVudGl0eSA9PT0gZW50aXR5KSBjb250aW51ZTtcblx0XHRcdFx0XHRcblx0XHRcdGlmKGV2dC5zaGFyZWQgIT09IHVuZGVmaW5lZCl7XG5cdFx0XHRcdGlmKGV2dC5zaGFyZWQpe1xuXHRcdFx0XHRcdGNoZWNrRXZlcnkoKTtcblx0XHRcdFx0XHRzaGFyZUJyb3dzZXIoKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZighcmVzdWx0Lmhpc3RvcnlFdmVudHMpIHVuc2hhcmVCcm93c2VyKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGV2dC51cmwpIHtcblx0XHRcdFx0aWYoIXJlc3VsdC5oaXN0b3J5RXZlbnRzKSB7XG5cdFx0XHRcdFx0dmFyIHVybCA9IGV2dC51cmw7XG5cdFx0XHRcdFx0dmFyIGRvY1VybCA9IGRvY3VtZW50LlVSTDtcblx0XHRcdFx0XHRpZihkb2NVcmwuaW5kZXhPZignY2hhdFNlc3Npb25JZCcpICE9PSAtMSkge1xuXHRcdFx0XHRcdFx0ZG9jVXJsID0gZG9jVXJsLnN1YnN0cigwLCBkb2NVcmwuaW5kZXhPZignY2hhdFNlc3Npb25JZCcpLTEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZih1cmwgIT0gZG9jVXJsKSBjaGFuZ2VVUkwodXJsKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYoZXZ0Lncpe1xuXHRcdFx0XHRpZihldnQuZW50aXR5ID09PSAndXNlcicpIHtcblx0XHRcdFx0XHR2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cdFx0XHRcdFx0dmFyIGlubmVyVyA9IGJvZHkub2Zmc2V0V2lkdGg7XG5cdFx0XHRcdFx0aWYoaW5uZXJXICE9PSBldnQudykge1xuXHRcdFx0XHRcdFx0ZG9jdW1lbnQuYm9keS5zdHlsZS53aWR0aCA9IGV2dC53ICsgJ3B4Jztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGV2dC5ldmVudCA9PT0gJ21vdXNlbW92ZScpIHtcblx0XHRcdFx0aWYoY3Vyc29yKSB7XG5cdFx0XHRcdFx0Y3Vyc29yWCA9IGV2dC54ICsgJ3B4Jztcblx0XHRcdFx0XHRjdXJzb3JZID0gZXZ0LnkgKyAncHgnO1xuXHRcdFx0XHRcdC8vIGN1cnNvci5zdHlsZS5sZWZ0ID0gZXZ0LnggKyAncHgnO1xuXHRcdFx0XHRcdC8vIGN1cnNvci5zdHlsZS50b3AgPSBldnQueSArICdweCc7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZihldnQuZXZlbnQgPT09ICdzY3JvbGwnKSB7XG5cdFx0XHRcdGlmKGV2dC50biAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0aWYoZXZ0LnRuID09PSAnI2RvY3VtZW50JykgdGFyZ2V0ID0gbWFpbkVsZW1lbnQ7XG5cdFx0XHRcdFx0ZWxzZSB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShldnQudG4pW2V2dC50bmldO1xuXHRcdFx0XHRcdGlmKHRhcmdldCl7XG5cdFx0XHRcdFx0XHR0YXJnZXQuc2Nyb2xsVG9wID0gZXZ0LnN5O1xuXHRcdFx0XHRcdFx0dGFyZ2V0LnNjcm9sbExlZnQgPSBldnQuc3g7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYoZXZ0LmV2ZW50ID09PSAnbW91c2V1cCcgfHwgZXZ0LmV2ZW50ID09PSAnc2VsZWN0Jyl7XG5cdFx0XHRcdGlmKGV2dC5zbikge1xuXHRcdFx0XHRcdHZhciBzdGFydE5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShldnQuc24pW2V2dC5zbmldO1xuXHRcdFx0XHRcdHZhciBlbmROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZXZ0LmVuKVtldnQuZW5pXTtcblx0XHRcdFx0XHRpZihkb2N1bWVudC5jcmVhdGVSYW5nZSAmJiBzdGFydE5vZGUgIT09IHVuZGVmaW5lZCAmJiBlbmROb2RlICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHRcdHZhciBybmcgPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpO1xuXHRcdFx0XHRcdFx0cm5nLnNldFN0YXJ0KHN0YXJ0Tm9kZS5jaGlsZE5vZGVzW2V2dC5zY2hpXSwgZXZ0LnNvKTtcblx0XHRcdFx0XHRcdHJuZy5zZXRFbmQoZW5kTm9kZS5jaGlsZE5vZGVzW2V2dC5lY2hpXSwgZXZ0LmVvKTtcblx0XHRcdFx0XHRcdHZhciBzZWwgPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRcdFx0XHRzZWwucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cdFx0XHRcdFx0XHRzZWwuYWRkUmFuZ2Uocm5nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZihldnQuZXZlbnQgPT09ICdrZXl1cCcgfHwgZXZ0LmV2ZW50ID09PSAna2V5ZG93bicgfHwgZXZ0LmV2ZW50ID09PSAna2V5cHJlc3MnKSB7XG5cdFx0XHRcdGlmKGV2dC50biAhPT0gdW5kZWZpbmVkICYmIGV2dC50bmkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGV2dC50bilbZXZ0LnRuaV07XG5cdFx0XHRcdFx0aWYodGFyZ2V0KXtcblx0XHRcdFx0XHRcdHZhciBvdXRwdXQ7XG5cdFx0XHRcdFx0XHR2YXIgYSA9IHRhcmdldC52YWx1ZTtcblx0XHRcdFx0XHRcdGlmKGV2dC5jb2RlID09IDgpIHtcblx0XHRcdFx0XHRcdFx0aWYoZXZ0LnBvcyA9PSBhLmxlbmd0aC0xKSBvdXRwdXQgPSBhLnN1YnN0cigwLCBldnQucG9zLTEpO1xuXHRcdFx0XHRcdFx0XHRlbHNlIGlmKGV2dC5wb3MgPT09IDApIHJldHVybjtcblx0XHRcdFx0XHRcdFx0ZWxzZSBvdXRwdXQgPSBhLnN1YnN0cigwLCBldnQucG9zLTEpICsgYS5zdWJzdHIoZXZ0LnBvcyk7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC52YWx1ZSA9IG91dHB1dDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihldnQuY29kZSA9PSA0Nikge1xuXHRcdFx0XHRcdFx0XHRvdXRwdXQgPSBhLnN1YnN0cigwLCBldnQucG9zKSArIGEuc3Vic3RyKGV2dC5wb3MrMSk7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC52YWx1ZSA9IG91dHB1dDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihldnQuY29kZSA9PSAxOTApIHtcblx0XHRcdFx0XHRcdFx0b3V0cHV0ID0gYS5zdWJzdHIoMCwgZXZ0LnBvcykgKyAnLicgKyBhLnN1YnN0cihldnQucG9zKTtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LnZhbHVlID0gb3V0cHV0O1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmKGV2dC52YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB0dmFsdWUgPSBldnQudmFsdWU7XG5cdFx0XHRcdFx0XHRcdHR2YWx1ZSA9IHR2YWx1ZS5yZXBsYWNlKC88YnI+L2csICdcXG4nKTtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LnZhbHVlID0gdHZhbHVlO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0dmFyIGMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2dC5jb2RlKTtcblx0XHRcdFx0XHRcdFx0aWYoYSkgb3V0cHV0ID0gYS5zdWJzdHIoMCwgZXZ0LnBvcykgKyBjICsgYS5zdWJzdHIoZXZ0LnBvcyk7XG5cdFx0XHRcdFx0XHRcdGVsc2Ugb3V0cHV0ID0gYztcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LnZhbHVlID0gb3V0cHV0O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKGV2dC5ldmVudCA9PT0gJ2NoYW5nZScpIHtcblx0XHRcdFx0dGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZXZ0LnRuKVtldnQudG5pXTtcblx0XHRcdFx0dGFyZ2V0LnZhbHVlID0gZXZ0LnZhbHVlO1xuXHRcdFx0fSBlbHNlIGlmKGV2dC5ldmVudCA9PT0gJ2NsaWNrJyl7XG5cdFx0XHRcdC8vIHZhciBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGV2dC50bi50b0xvd2VyQ2FzZSgpKTtcblx0XHRcdFx0dGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZXZ0LnRuKVtldnQudG5pXTtcblx0XHRcdFx0aWYodGFyZ2V0KSB0YXJnZXQuY2xpY2soKTtcblx0XHRcdFx0Ly8gZWxlbWVudHNbZXZ0LnRuaV0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3llbGxvdyc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShldnQudG4pW2V2dC50bmldO1xuXHRcdFx0XHRpZih0YXJnZXQpIHtcblx0XHRcdFx0XHR2YXIgZXZ0T3B0cyA9IG1vdXNlRXZlbnQoZXZ0LmV2ZW50LCBldnQueCwgZXZ0LnksIGV2dC54LCBldnQueSk7XG5cdFx0XHRcdFx0ZGlzcGF0Y2hFdmVudCh0YXJnZXQsIGV2dE9wdHMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmKGV2dC5ldmVudCA9PT0gJ2NsaWNrJyB8fCBldnQuZXZlbnQgPT09ICdzY3JvbGwnKSByZW1vdGVFdmVudHMucHVzaChldnQpO1xuXHRcdH1cblx0fVxuXG5cdGlmKHJlc3VsdC50aW1lc3RhbXApIGV2ZW50VGltZXN0YW1wID0gcmVzdWx0LnRpbWVzdGFtcDtcblx0aWYoc2hhcmVkKSBlbWl0RXZlbnRzKCk7XG59XG5cbmZ1bmN0aW9uIG1vdXNlRXZlbnQodHlwZSwgc3gsIHN5LCBjeCwgY3kpIHtcblx0dmFyIGV2dDtcblx0dmFyIGUgPSB7XG5cdFx0YnViYmxlczogdHJ1ZSxcblx0XHRjYW5jZWxhYmxlOiAodHlwZSAhPSBcIm1vdXNlbW92ZVwiKSxcblx0XHR2aWV3OiB3aW5kb3csXG5cdFx0ZGV0YWlsOiAwLFxuXHRcdHNjcmVlblg6IHN4LFxuXHRcdHNjcmVlblk6IHN5LFxuXHRcdGNsaWVudFg6IGN4LFxuXHRcdGNsaWVudFk6IGN5LFxuXHRcdGN0cmxLZXk6IGZhbHNlLFxuXHRcdGFsdEtleTogZmFsc2UsXG5cdFx0c2hpZnRLZXk6IGZhbHNlLFxuXHRcdG1ldGFLZXk6IGZhbHNlLFxuXHRcdGJ1dHRvbjogMCxcblx0XHRyZWxhdGVkVGFyZ2V0OiB1bmRlZmluZWRcblx0fTtcblx0aWYgKHR5cGVvZiggZG9jdW1lbnQuY3JlYXRlRXZlbnQgKSA9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO1xuXHRcdGV2dC5pbml0TW91c2VFdmVudChcblx0XHRcdHR5cGUsXG5cdFx0XHRlLmJ1YmJsZXMsXG5cdFx0XHRlLmNhbmNlbGFibGUsXG5cdFx0XHRlLnZpZXcsXG5cdFx0XHRlLmRldGFpbCxcblx0XHRcdGUuc2NyZWVuWCxcblx0XHRcdGUuc2NyZWVuWSxcblx0XHRcdGUuY2xpZW50WCxcblx0XHRcdGUuY2xpZW50WSxcblx0XHRcdGUuY3RybEtleSxcblx0XHRcdGUuYWx0S2V5LFxuXHRcdFx0ZS5zaGlmdEtleSxcblx0XHRcdGUubWV0YUtleSxcblx0XHRcdGUuYnV0dG9uLFxuXHRcdFx0ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlXG5cdFx0KTtcblx0fSBlbHNlIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCkge1xuXHRcdGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG5cdFx0Zm9yICh2YXIgcHJvcCBpbiBlKSB7XG5cdFx0XHRldnRbcHJvcF0gPSBlW3Byb3BdO1xuXHRcdH1cblx0XHRldnQuYnV0dG9uID0geyAwOjEsIDE6NCwgMjoyIH1bZXZ0LmJ1dHRvbl0gfHwgZXZ0LmJ1dHRvbjtcblx0fVxuXHRyZXR1cm4gZXZ0O1xufVxuZnVuY3Rpb24gZGlzcGF0Y2hFdmVudCAoZWwsIGV2dCkge1xuXHRpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xuXHRcdGVsLmRpc3BhdGNoRXZlbnQoZXZ0KTtcblx0fSBlbHNlIGlmIChlbC5maXJlRXZlbnQpIHtcblx0XHRlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGV2dCk7XG5cdH1cblx0cmV0dXJuIGV2dDtcbn1cblxuZnVuY3Rpb24gY2hhbmdlVVJMKHVybCkge1xuICAgIHZhciBkb2NVcmwgPSBkb2N1bWVudC5VUkw7XG4gICAgaWYgKGRvY1VybCAhPT0gdXJsKSB7XG5cdFx0ZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IHVybDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzRGVzY2VuZGFudChwYXJlbnQsIGNoaWxkKSB7XG4gICAgIHZhciBub2RlID0gY2hpbGQucGFyZW50Tm9kZTtcbiAgICAgd2hpbGUgKG5vZGUgIT0gbnVsbCkge1xuICAgICAgICAgaWYgKG5vZGUgPT0gcGFyZW50KSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgIH1cbiAgICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudChvYmosIGV2VHlwZSwgZm4pIHtcbiAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSBvYmouYWRkRXZlbnRMaXN0ZW5lcihldlR5cGUsIGZuLCBmYWxzZSk7XG4gIGVsc2UgaWYgKG9iai5hdHRhY2hFdmVudCkgb2JqLmF0dGFjaEV2ZW50KFwib25cIitldlR5cGUsIGZuKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50KG9iaiwgZXZUeXBlLCBmbikge1xuICBpZiAob2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIpIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKGV2VHlwZSwgZm4sIGZhbHNlKTtcbiAgZWxzZSBpZiAob2JqLmRldGFjaEV2ZW50KSBvYmouZGV0YWNoRXZlbnQoXCJvblwiK2V2VHlwZSwgZm4pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0aW5pdDogaW5pdCxcblx0c2hhcmU6IHNoYXJlQnJvd3Nlcixcblx0dW5zaGFyZTogdW5zaGFyZUJyb3dzZXIsXG5cdHVuc2hhcmVBbGw6IHVuc2hhcmVBbGwsXG5cdGVtaXRFdmVudHM6IGVtaXRFdmVudHMsXG5cdHVwZGF0ZUV2ZW50czogdXBkYXRlRXZlbnRzXG59OyIsIlxudmFyIEV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbnZhciBzdG9yYWdlID0gcmVxdWlyZSgnLi9zdG9yYWdlJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xudmFyIGRlYnVnID0gcmVxdWlyZSgnLi9kZWJ1ZycpO1xuLy8gdmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpLnBhcnNlKGRvY3VtZW50LlVSTCwgdHJ1ZSk7XG52YXIgdXJsID0gd2luZG93LmxvY2F0aW9uO1xudmFyIF8gPSByZXF1aXJlKCcuL2xvZGFzaCcpO1xudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuLyoqXG4gKiBDb3JlIG1vZHVsZSBpbXBsZW1lbnRzIG1haW4gaW50ZXJuYWwgZnVuY3Rpb25hbGl0eVxuICogXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMgSW5zdGFudGlhdGlvbiBvcHRpb25zIHRoYXQgb3ZlcnJpZGVzIG1vZHVsZSBkZWZhdWx0c1xuICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgIFJldHVybiBwdWJsaWMgQVBJXG4gKi9cblxudmFyIGRlZmF1bHRzID0ge1xuXHQvLyBJUENDIHNlcnZlciBJUCBhZGRyZXNzL2RvbWFpbiBuYW1lIGFuZCBwb3J0IG51bWJlci5cblx0Ly8gZXguOiBcImh0dHA6Ly8xOTIuMTY4LjEuMTAwOjg4ODBcIlxuXHRzZXJ2ZXI6ICcnXG59O1xuXG5pbmhlcml0cyhXY2hhdEFQSSwgRXZlbnRFbWl0dGVyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBXY2hhdEFQSTtcblxuZnVuY3Rpb24gV2NoYXRBUEkob3B0aW9ucyl7XG5cblx0Ly8gZXh0ZW5kIGRlZmF1bHQgb3B0aW9uc1xuXHQvLyB3aXRoIHByb3ZpZGVkIG9iamVjdFxuXHR0aGlzLm9wdGlvbnMgPSBfLmFzc2lnbihkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cblx0dGhpcy5vcHRpb25zLnNlcnZlclVybCA9IHRoaXMub3B0aW9ucy5zZXJ2ZXIgKyAnL2lwY2MvJCQkJztcblxuXHQvLyAvLyBDdXJyZW50IHNlc3Npb24gc3RhdGUgb2JqZWN0XG5cdC8vIHRoaXMuc2Vzc2lvbiA9IHtcblx0Ly8gXHRzaWQ6IG51bGwsXG5cdC8vIFx0ZXZlbnRUaW1lc3RhbXA6IDAsXG5cdC8vIFx0bXNnVGltZXN0YW1wOiAwLFxuXHQvLyBcdGVudGl0eTogdW5kZWZpbmVkLFxuXHQvLyBcdGNoYXQ6IG51bGxcblx0Ly8gfTtcblxuXHQvLyB0aGlzLm9uKCdzZXNzaW9uL2NyZWF0ZScsIGZ1bmN0aW9uIChyZXN1bHQpe1xuXHQvLyBcdHRoaXMuc2Vzc2lvbi5zaWQgPSByZXN1bHQuc2lkO1xuXHQvLyB9KTtcblxuXHR0aGlzLm9uKCdFcnJvcicsIGZ1bmN0aW9uIChlcnIsIHBhcmFtcyl7XG5cdFx0aWYoZXJyLmNvZGUgPT09IDQwNCkge1xuXHRcdFx0dGhpcy5zZXNzaW9uVGltZW91dChwYXJhbXMpO1xuXHRcdH1cblx0XHRkZWJ1Zy5lcnJvcihlcnIsIHBhcmFtcyk7XG5cdH0pO1xuXG5cdHJldHVybiB0aGlzO1xuXG59XG5cbi8qKlxuICogTW9kdWxlIGluaXRpYXRpb25cbiAqIEVtaXRzIG1vZHVsZS9zdGFydCBldmVudCBpZiBtb2R1bGUgc3RhcnRlZFxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuaW5pdE1vZHVsZSA9IGZ1bmN0aW9uKCl7XG5cdHZhciBlbnRpdHkgPSBzdG9yYWdlLmdldFN0YXRlKCdlbnRpdHknLCAnc2Vzc2lvbicpLFxuXHRcdHNpZCA9IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpO1xuXG5cdGRlYnVnLmxvZygnaW5pdE1vZHVsZTogJywgZW50aXR5LCBzaWQpO1xuXG5cdC8vIEEgY2hhdFNlc3Npb25JZCBwYXJhbWV0ZXIgaW4gdGhlIHVybCBxdWVyeSBcblx0Ly8gaW5kaWNhdGVzIHRoYXQgdGhlIHdlYiBwYWdlIHdhcyBvcGVuZWQgYnkgYWdlbnQuXG5cdC8vIEluIHRoYXQgY2FzZSBhZ2VudCBzaG91bGQgam9pbiB0aGUgc2Vzc2lvbi5cblx0aWYodXJsLmhyZWYuaW5kZXhPZignY2hhdFNlc3Npb25JZCcpICE9PSAtMSkge1xuXHRcdHNpZCA9IHRoaXMuZ2V0U2lkRnJvbVVybCh1cmwuaHJlZik7XG5cdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ2VudGl0eScsICdhZ2VudCcsICdzZXNzaW9uJyk7XG5cdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ3NpZCcsIHNpZCk7XG5cdFx0dGhpcy5qb2luU2Vzc2lvbihzaWQpO1xuXHR9IGVsc2UgaWYoZW50aXR5ID09PSAnYWdlbnQnICYmIHNpZCkgeyAvLyBJbiBjYXNlIHRoZSBjb2Jyb3dzaW5nIHNlc3Npb24gaXMgYWN0aXZlXG5cdFx0dGhpcy5qb2luU2Vzc2lvbihzaWQsIHVybC5ocmVmKTtcblx0fSBlbHNlIHtcblxuXHRcdC8vIEluIGNhc2UgYSBzZXNzaW9uIGlzIGFscmVhZHkgaW5pdGlhdGVkIFxuXHRcdC8vIGFuZCBzdG9yYWdlIGNvbnRhaW5lcyBzaWQgcGFyYW1ldGVyXG5cdFx0aWYoc2lkKSB7XG5cdFx0XHR0aGlzLnVwZGF0ZUV2ZW50cyhbeyBlbnRpdHk6IGVudGl0eSwgdXJsOiB1cmwuaHJlZiB9XSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KXtcblx0XHRcdFx0aWYoZXJyKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdzaWQnLCBzaWQpO1xuXHRcdFx0XHR0aGlzLmVtaXQoJ3Nlc3Npb24vY29udGludWUnLCB7IGVudGl0eTogZW50aXR5LCB1cmw6IHVybC5ocmVmIH0pO1xuXHRcdFx0fS5iaW5kKHRoaXMpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ2VudGl0eScsICd1c2VyJywgJ3Nlc3Npb24nKTtcblx0XHRcdC8vIENyZWF0ZSBuZXcgc2Vzc2lvblxuXHRcdFx0dGhpcy5jcmVhdGVTZXNzaW9uKHVybC5ocmVmKTtcblx0XHR9XG5cdH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIHNlc3Npb25cbiAqIEVtaXRzIHNlc3Npb24vY3JlYXRlIGV2ZW50XG4gKiBpZiBpbml0aWF0aW9uIGlzIHN1Y2Nlc3NmdWxcbiAqXG4gKiBAcGFyYW0gXHR7U3RyaW5nfSBcdHVybCBcdEN1cnJlbnQgZnVsbCBVUkxcbiAqIEByZXR1cm4gXHR7U3RyaW5nfVx0c2lkIFx0TmV3IHNlc3Npb24gaWRcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmNyZWF0ZVNlc3Npb24gPSBmdW5jdGlvbihwYWdlVXJsKXtcblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIHtcblx0XHRtZXRob2Q6ICdjcmVhdGVTZXNzaW9uJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHVybDogKHBhZ2VVcmwgfHwgdXJsLmhyZWYpXG5cdFx0fVxuXHR9LCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgeyBtZXRob2Q6ICdjcmVhdGVTZXNzaW9uJywgcGFyYW1zOiB7IHBhZ2VVcmw6IHBhZ2VVcmwgfSB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRib2R5LnJlc3VsdC51cmwgPSB1cmwuaHJlZjtcblx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnc2lkJywgYm9keS5yZXN1bHQuc2lkKTtcblx0XHR0aGlzLmVtaXQoJ3Nlc3Npb24vY3JlYXRlJywgYm9keS5yZXN1bHQpO1xuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLmpvaW5TZXNzaW9uID0gZnVuY3Rpb24oc2lkLCB1cmwpe1xuXHR0aGlzLmVtaXQoJ3Nlc3Npb24vam9pbicsIHsgc2lkOiBzaWQsIHVybDogdXJsIH0pO1xufTtcblxuLyoqIFxuICogU2VuZC9vYnRhaW4gZXZlbnRzIHRvL2Zyb20gdGhlIHNlcnZlci4gXG4gKiBFdmVudHMgY291bGQgYmUgb2J0YWluZWQgZnJvbSB0aGUgc2VydmVyIGJ5IHNwZWNpZnlpbmcgYSB0aW1lc3RhbXBcbiAqIGFzIGEgc3RhcnRpbmcgcG9pbnQgZnJvbSB3aGljaCBhbiBldmVudHMgd291bGQgYmUgb2J0YWluZWRcbioqL1xuV2NoYXRBUEkucHJvdG90eXBlLnVwZGF0ZUV2ZW50cyA9IGZ1bmN0aW9uKGV2ZW50cywgY2Ipe1xuXHR2YXIgc2Vzc2lvbklkID0gc3RvcmFnZS5nZXRTdGF0ZSgnc2lkJyksIHBhcmFtcztcblx0aWYoIXNlc3Npb25JZCkgcmV0dXJuO1xuXHRcblx0cGFyYW1zID0ge1xuXHRcdG1ldGhvZDogJ3VwZGF0ZUV2ZW50cycsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHNlc3Npb25JZCxcblx0XHRcdHRpbWVzdGFtcDogc3RvcmFnZS5nZXRTdGF0ZSgnZXZlbnRUaW1lc3RhbXAnLCAnY2FjaGUnKSxcblx0XHRcdGV2ZW50czogZXZlbnRzXG5cdFx0fVxuXHR9O1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwgcGFyYW1zLCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgcGFyYW1zKTtcblx0XHRcdHJldHVybiBjYihlcnIpOyAvLyBUT0RPOiBoYW5kbGUgZXJyb3Jcblx0XHR9XG5cblx0XHRpZihib2R5LnJlc3VsdC50aW1lc3RhbXAgPiBzdG9yYWdlLmdldFN0YXRlKCdldmVudFRpbWVzdGFtcCcsICdjYWNoZScpKSB7XG5cdFx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnZXZlbnRUaW1lc3RhbXAnLCBib2R5LnJlc3VsdC50aW1lc3RhbXAsICdjYWNoZScpO1xuXHRcdFx0aWYoY2IpIGNiKG51bGwsIGJvZHkucmVzdWx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYoY2IpIGNiKG51bGwsIHsgZXZlbnRzOiBbXSB9KTtcblx0XHR9XG5cdFx0XHRcblxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBHZXQgYXZhaWxhYmxlIGRpYWxvZyBsYW5ndWFnZXNcbiAqIElmIGxhbmd1YWdlcyBhcmUgbm90IGF2YWlsYWJsZSwgXG4gKiB0aGVuIGVpdGhlciB0aGVyZSBhcmUgbm8gYXZhaWxhYmxlIGFnZW50cyBvclxuICogbGFuZ3VhZ2VzIHdlcmVuJ3Qgc2V0IGluIEFkbWluIFN0dWRpb1xuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuZ2V0TGFuZ3VhZ2VzID0gZnVuY3Rpb24oY2Ipe1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ2dldExhbmd1YWdlcycsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpXG5cdFx0fVxuXHR9LCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgeyBtZXRob2Q6ICdnZXRMYW5ndWFnZXMnIH0pO1xuXHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0fVxuXG5cdFx0Y2IobnVsbCwgYm9keSk7XG5cdH0uYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIFJlcXVlc3QgY2hhdCBzZXNzaW9uXG4gKiBcbiAqIEBwYXJhbSAge09iamVjdH0gcGFyYW1zIC0gdXNlciBwYXJhbWV0ZXJzIChuYW1lLCBwaG9uZSwgc3ViamVjdCwgbGFuZ3VhZ2UsIGV0Yy4pXG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5jaGF0UmVxdWVzdCA9IGZ1bmN0aW9uKHBhcmFtcywgY2Ipe1xuXHRwYXJhbXMuc2lkID0gc3RvcmFnZS5nZXRTdGF0ZSgnc2lkJyk7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG5cdFx0bWV0aG9kOiAnY2hhdFJlcXVlc3QnLFxuXHRcdHBhcmFtczogcGFyYW1zXG5cdH0sIGZ1bmN0aW9uIChlcnIsIHJlcywgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCB7IG1ldGhvZDogJ2NoYXRSZXF1ZXN0JywgcGFyYW1zOiBwYXJhbXMgfSk7XG5cdFx0XHRpZihjYikgY2IoZXJyKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRwYXJhbXMudXJsID0gdXJsLmhyZWY7XG5cdFx0dGhpcy5lbWl0KCdjaGF0L3N0YXJ0JywgXy5tZXJnZShwYXJhbXMsIGJvZHkucmVzdWx0KSk7XG5cdFx0aWYoY2IpIGNiKG51bGwsIGJvZHkpO1xuXHR9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBHZXQgZGlhbG9nIG1lc3NhZ2VzXG4gKiBcbiAqIEBwYXJhbSAge051bWJlcn0gdGltZXN0YW1wIEdldCBtZXNzYWdlcyBzaW5jZSBwcm92aWRlZCB0aW1lc3RhbXBcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmdldE1lc3NhZ2VzID0gZnVuY3Rpb24oY2Ipe1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ2dldE1lc3NhZ2VzJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogc3RvcmFnZS5nZXRTdGF0ZSgnc2lkJyksXG5cdFx0XHR0aW1lc3RhbXA6IHN0b3JhZ2UuZ2V0U3RhdGUoJ21zZ1RpbWVzdGFtcCcpXG5cdFx0fVxuXHR9LCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgeyBtZXRob2Q6ICdnZXRNZXNzYWdlcycgfSk7XG5cdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHR9XG5cblx0XHRpZihib2R5LnJlc3VsdC5tZXNzYWdlcykge1xuXHRcdFx0dGhpcy5lbWl0KCdtZXNzYWdlL25ldycsIGJvZHkucmVzdWx0KTtcblx0XHR9IGVsc2UgaWYoYm9keS5yZXN1bHQudHlwaW5nKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ21lc3NhZ2UvdHlwaW5nJywgYm9keS5yZXN1bHQpO1xuXHRcdH1cblx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnbXNnVGltZXN0YW1wJywgYm9keS5yZXN1bHQudGltZXN0YW1wKTtcblx0XHRpZihjYikgY2IobnVsbCwgYm9keS5yZXN1bHQpO1xuXHR9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBTZW5kIG1lc3NhZ2UgdG8gdGhlIGFnZW50XG4gKiBcbiAqIEBwYXJhbSAge1N0cmluZ30gdGV4dCAtIG1lc3NhZ2UgY29udGVudCBpbiBjYXNlIG9mIHJlZ3VsYXIgbWVzc2FnZSBcbiAqIG9yIGRhdGFVUkwgaW4gY2FzZSBvZiBmaWxlIHRyYW5zZmVyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGZpbGUgLSAoT3B0aW9uYWwpIGZpbGUgbmFtZVxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbih0ZXh0LCBmaWxlKXtcblx0dmFyIHBhcmFtcyA9IHtcblx0XHRzaWQ6IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpLFxuXHRcdHRleHQ6IHRleHRcblx0fTtcblx0aWYoZmlsZSkgcGFyYW1zLmZpbGUgPSBmaWxlO1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ3NldE1lc3NhZ2UnLFxuXHRcdHBhcmFtczogcGFyYW1zXG5cdH0sIGZ1bmN0aW9uKGVyciwgcmVzLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAnc2VuZE1lc3NhZ2UnLCBwYXJhbXM6IHBhcmFtcyB9KTtcblx0XHRcdHJldHVybiBjYihlcnIpO1xuXHRcdH1cblx0fSk7XG59O1xuXG4vKipcbiAqIENsb3NlIGN1cnJlbnQgY2hhdCBzZXNzaW9uXG4gKiBcbiAqIEBwYXJhbSAge051bWJlcn0gcmF0aW5nIFNlcnZpY2UgcmF0aW5nXG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5jbG9zZUNoYXQgPSBmdW5jdGlvbihyYXRpbmcpe1xuXHR2YXIgcmVxUGFyYW1zID0ge1xuXHRcdG1ldGhvZDogJ2Nsb3NlQ2hhdCcsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpXG5cdFx0fVxuXHR9O1xuXHRpZihyYXRpbmcpIHJlcVBhcmFtcy5wYXJhbXMucmF0aW5nID0gcmF0aW5nO1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwgcmVxUGFyYW1zLCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgcmVxUGFyYW1zKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ2NoYXQnLCBmYWxzZSk7XG5cdFx0dGhpcy5lbWl0KCdjaGF0L2Nsb3NlJywgeyByYXRpbmc6IHJhdGluZywgdXJsOiB1cmwuaHJlZiB9KTtcblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogU2VuZCBkaWFsb2cgZWl0aGVyIHRvIHRoZSBzcGVjaWZpZWQgZW1haWwgYWRkcmVzcyAoaWYgcGFyYW1ldGVyIFwidG9cIiBoYXMgcGFzc2VkKVxuICogb3IgdG8gY2FsbCBjZW50ZXIgYWRtaW5pc3RyYXRvciAoaWYgcGFyYW1ldGVyIFwiZW1haWxcIiBoYXMgcGFzc2VkKVxuICpcbiAqIEVpdGhlclxuICogQHBhcmFtICB7U3RyaW5nfSB0b1x0XHRcdERlc3RpbmF0aW9uIGVtYWlsIGFkZHJlc3NcbiAqXG4gKiBPclxuICogQHBhcmFtICB7U3RyaW5nfSBlbWFpbFx0XHRTZW5kZXIgZW1haWwgYWRkcmVzc1xuICogQHBhcmFtICB7U3RyaW5nfSB1bmFtZVx0XHRTZW5kZXIgbmFtZVxuICogQHBhcmFtICB7U3RyaW5nfSBmaWxlbmFtZVx0QXR0YWNobWVudCBmaWxlbmFtZVxuICogQHBhcmFtICB7U3RyaW5nfSBmaWxlZGF0YVx0QXR0YWNobWVudCBmaWxlIFVSTFxuICpcbiAqIEJvdGhcbiAqIEBwYXJhbSAge1N0cmluZ30gdGV4dFx0XHRFbWFpbCBib2R5XG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5zZW5kRW1haWwgPSBmdW5jdGlvbihwYXJhbXMsIGNiKXtcblx0cGFyYW1zLnNpZCA9IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpO1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ3NlbmRNYWlsJyxcblx0XHRwYXJhbXM6IHBhcmFtc1xuXHR9LCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVyciwgeyBtZXRob2Q6ICdzZW5kRW1haWwnLCBwYXJhbXM6IHBhcmFtcyB9KTtcblx0XHRcdGlmKGNiKSBjYihlcnIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuZW1pdCgnY2hhdC9zZW5kJywgcGFyYW1zKTtcblx0XHRpZihjYikgY2IobnVsbCwgYm9keSk7XG5cdH0uYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIFNlbmQgY2FsbGJhY2sgcmVxdWVzdFxuICogXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHRhc2sgLSBpZCBvZiB0aGUgY2FsbGJhY2sgdGFzayB0aGF0IGNvbmZpZ3VyZWQgaW4gdGhlIEFkbWluIFN0dWRpb1xuICogQHBhcmFtICB7U3RyaW5nfSBwaG9uZSAtIFVzZXIncyBwaG9uZSBudW1iZXJcbiAqIEBwYXJhbSAge051bWJlcn0gdGltZSAtIFRpbWVzdGFtcCBvZiB0aGUgY2FsbCB0byBiZSBpbml0aWF0ZWRcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLnJlcXVlc3RDYWxsYmFjayA9IGZ1bmN0aW9uKHBhcmFtcywgY2Ipe1xuXHRwYXJhbXMuc2lkID0gc3RvcmFnZS5nZXRTdGF0ZSgnc2lkJyk7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG5cdFx0bWV0aG9kOiAncmVxdWVzdENhbGxiYWNrJyxcblx0XHRwYXJhbXM6IHBhcmFtc1xuXHR9LCBmdW5jdGlvbihlcnIsIHJlcywgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCB7IG1ldGhvZDogJ3JlcXVlc3RDYWxsYmFjaycsIHBhcmFtczogcGFyYW1zIH0pO1xuXHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0fVxuXHRcdGlmKGNiKSBjYihudWxsLCBib2R5LnJlc3VsdCk7XG5cdH0uYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIERpc2pvaW4gY3VycmVudCBhY3RpdmUgc2Vzc2lvblxuICogRW1pdHMgc2Vzc2lvbi9kaXNqb2luIGV2ZW50XG4gKiBpZiByZXF1ZXN0IGlzIGZ1bGZpbGxlZFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzaWQgSUQgb2YgYWN0aXZlIHNlc3Npb25cbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmRpc2pvaW5TZXNzaW9uID0gZnVuY3Rpb24oc2lkKXtcblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIHtcblx0XHRtZXRob2Q6ICdkaXNqb2luU2Vzc2lvbicsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHNpZFxuXHRcdH1cblx0fSwgZnVuY3Rpb24gKGVyciwgcmVzLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAnZGlzam9pblNlc3Npb24nLCBwYXJhbXM6IHsgc2lkOiBzaWQgfSB9KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmVtaXQoJ3Nlc3Npb24vZGlzam9pbicsIHsgdXJsOiB1cmwuaHJlZiB9KTtcblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogSW5mb3JtcyB0aGUgc2VydmVyIHRoYXQgdGhlIGNvYnJvd3NpbmcgZmVhdHVyZSBpcyB0dXJuZWQgb24gb3Igb2ZmXG4gKiBAcGFyYW0gIHtCb29sZWFufSBzdGF0ZSBSZXByZXNlbnRzIHRoZSBzdGF0ZSBvZiBjb2Jyb3dzaW5nIGZlYXR1cmVcbiAqIEBwYXJhbSAge1N0cmluZ30gdXJsICAgVXJsIHdoZXJlIHRoZSBmZWF0dXJlJ3Mgc3RhdGUgaXMgY2hhbmdlZFxuICogQHJldHVybiBub25lXG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5zd2l0Y2hTaGFyZVN0YXRlID0gZnVuY3Rpb24oc3RhdGUsIHVybCl7XG5cdHZhciBtZXRob2QgPSBzdGF0ZSA/ICdzaGFyZU9wZW5lZCcgOiAnc2hhcmVDbG9zZWQnO1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogbWV0aG9kLFxuXHRcdHBhcmFtczoge1xuXHRcdFx0c2lkOiBzdG9yYWdlLmdldFN0YXRlKCdzaWQnKSxcblx0XHRcdHVybDogdXJsXG5cdFx0fVxuXHR9LCBmdW5jdGlvbihlcnIsIHJlcywgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCB7IG1ldGhvZDogJ3N3aXRjaFNoYXJlU3RhdGUnLCBwYXJhbXM6IHsgc3RhdGU6IHN0YXRlIH0gfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLnNldENoYXRUaW1lb3V0ID0gZnVuY3Rpb24odGltZW91dCl7XG5cdHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpe1xuXHRcdHRoaXMuZW1pdCgnY2hhdC90aW1lb3V0Jyk7XG5cdH0uYmluZCh0aGlzKSwgdGltZW91dCoxMDAwKTtcbn07XG5cbldjaGF0QVBJLnByb3RvdHlwZS51c2VySXNUeXBpbmcgPSBmdW5jdGlvbigpe1xuXHQvLyBkZWJ1Zy5sb2coJ3VzZXIgaXMgdHlwaW5nIScpO1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ3R5cGluZycsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpXG5cdFx0fVxuXHR9LCBmdW5jdGlvbiAoZXJyKXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAnc2V0Q2hhdFRpbWVvdXQnIH0pO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbldjaGF0QVBJLnByb3RvdHlwZS51cGRhdGVVcmwgPSBmdW5jdGlvbih1cmwpe1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ3VwZGF0ZVVybCcsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpLFxuXHRcdFx0dXJsOiB1cmxcblx0XHR9XG5cdH0sIGZ1bmN0aW9uKGVyciwgcmVzLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAndXBkYXRlVXJsJywgcGFyYW1zOiB7IHVybDogdXJsIH0gfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLmxpbmtGb2xsb3dlZCA9IGZ1bmN0aW9uKHVybCl7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG5cdFx0bWV0aG9kOiAnbGlua0ZvbGxvd2VkJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogc3RvcmFnZS5nZXRTdGF0ZSgnc2lkJyksXG5cdFx0XHR1cmw6IHVybFxuXHRcdH1cblx0fSwgZnVuY3Rpb24gKGVyciwgcmVzLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIsIHsgbWV0aG9kOiAnbGlua0ZvbGxvd2VkJywgcGFyYW1zOiB7IHVybDogdXJsIH0gfSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLnNlc3Npb25UaW1lb3V0ID0gZnVuY3Rpb24ocGFyYW1zKSB7XG5cdC8vIGRlYnVnLmxvZygnc2Vzc2lvblRpbWVvdXQgcGFyYW1zOiAnLCBwYXJhbXMpO1xuXHRwYXJhbXMudXJsID0gdXJsLmhyZWY7XG5cdHRoaXMuZW1pdCgnc2Vzc2lvbi90aW1lb3V0JywgcGFyYW1zKTtcbn07XG5cbldjaGF0QVBJLnByb3RvdHlwZS5nZXRTaWRGcm9tVXJsID0gZnVuY3Rpb24odXJsKSB7XG5cdHZhciBzdWJzdHIgPSB1cmwuc3Vic3RyaW5nKHVybC5pbmRleE9mKCdjaGF0U2Vzc2lvbklkPScpKTtcblx0c3Vic3RyID0gc3Vic3RyLnN1YnN0cmluZyhzdWJzdHIuaW5kZXhPZignPScpKzEpO1xuXHRyZXR1cm4gc3Vic3RyO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGxvZzogZnVuY3Rpb24oKXsgbG9nKGFyZ3VtZW50cywgJ2xvZycpOyB9LFxuICAgIGluZm86IGZ1bmN0aW9uKCl7IGxvZyhhcmd1bWVudHMsICdpbmZvJyk7IH0sXG4gICAgd2FybjogZnVuY3Rpb24oKXsgbG9nKGFyZ3VtZW50cywgJ3dhcm4nKTsgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24oKXsgbG9nKGFyZ3VtZW50cywgJ2Vycm9yJyk7IH1cbn07XG5cbmZ1bmN0aW9uIGxvZyhhcmdzLCBtZXRob2Qpe1xuICAgIGlmKGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc3djLmRlYnVnJykpIHtcbiAgICAgICAgW10uZm9yRWFjaC5jYWxsKGFyZ3MsIGZ1bmN0aW9uKGFyZyl7XG4gICAgICAgICAgICBnbG9iYWwuY29uc29sZVttZXRob2RdID8gZ2xvYmFsLmNvbnNvbGVbbWV0aG9kXShhcmcpIDogZ2xvYmFsLmNvbnNvbGUubG9nKGFyZyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxufSIsIi8qXG4gKiBKc1NJUCB2Mi4wLjFcbiAqIHRoZSBKYXZhc2NyaXB0IFNJUCBsaWJyYXJ5XG4gKiBDb3B5cmlnaHQ6IDIwMTItMjAxNiBKb3PDqSBMdWlzIE1pbGzDoW4gPGptaWxsYW5AYWxpYXgubmV0PiAoaHR0cHM6Ly9naXRodWIuY29tL2ptaWxsYW4pXG4gKiBIb21lcGFnZTogaHR0cDovL2pzc2lwLm5ldFxuICogTGljZW5zZTogTUlUXG4gKi9cblxuIWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgdDt0PVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyx0LkpzU0lQPWUoKX19KGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIGZ1bmN0aW9uIHQoZSxuLHIpe2Z1bmN0aW9uIHMoaSxvKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIW8mJnUpcmV0dXJuIHUoaSwhMCk7aWYobClyZXR1cm4gbChpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBjPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChjLmV4cG9ydHMsZnVuY3Rpb24odCl7dmFyIG49ZVtpXVsxXVt0XTtyZXR1cm4gcyhuP246dCl9LGMsYy5leHBvcnRzLHQsZSxuLHIpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciBsPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8ci5sZW5ndGg7aSsrKXMocltpXSk7cmV0dXJuIHN9KHsxOltmdW5jdGlvbihlLHQsbil7dmFyIHI9ZShcIi4uL3BhY2thZ2UuanNvblwiKSxzPXtVU0VSX0FHRU5UOnIudGl0bGUrXCIgXCIrci52ZXJzaW9uLFNJUDpcInNpcFwiLFNJUFM6XCJzaXBzXCIsY2F1c2VzOntDT05ORUNUSU9OX0VSUk9SOlwiQ29ubmVjdGlvbiBFcnJvclwiLFJFUVVFU1RfVElNRU9VVDpcIlJlcXVlc3QgVGltZW91dFwiLFNJUF9GQUlMVVJFX0NPREU6XCJTSVAgRmFpbHVyZSBDb2RlXCIsSU5URVJOQUxfRVJST1I6XCJJbnRlcm5hbCBFcnJvclwiLEJVU1k6XCJCdXN5XCIsUkVKRUNURUQ6XCJSZWplY3RlZFwiLFJFRElSRUNURUQ6XCJSZWRpcmVjdGVkXCIsVU5BVkFJTEFCTEU6XCJVbmF2YWlsYWJsZVwiLE5PVF9GT1VORDpcIk5vdCBGb3VuZFwiLEFERFJFU1NfSU5DT01QTEVURTpcIkFkZHJlc3MgSW5jb21wbGV0ZVwiLElOQ09NUEFUSUJMRV9TRFA6XCJJbmNvbXBhdGlibGUgU0RQXCIsTUlTU0lOR19TRFA6XCJNaXNzaW5nIFNEUFwiLEFVVEhFTlRJQ0FUSU9OX0VSUk9SOlwiQXV0aGVudGljYXRpb24gRXJyb3JcIixCWUU6XCJUZXJtaW5hdGVkXCIsV0VCUlRDX0VSUk9SOlwiV2ViUlRDIEVycm9yXCIsQ0FOQ0VMRUQ6XCJDYW5jZWxlZFwiLE5PX0FOU1dFUjpcIk5vIEFuc3dlclwiLEVYUElSRVM6XCJFeHBpcmVzXCIsTk9fQUNLOlwiTm8gQUNLXCIsRElBTE9HX0VSUk9SOlwiRGlhbG9nIEVycm9yXCIsVVNFUl9ERU5JRURfTUVESUFfQUNDRVNTOlwiVXNlciBEZW5pZWQgTWVkaWEgQWNjZXNzXCIsQkFEX01FRElBX0RFU0NSSVBUSU9OOlwiQmFkIE1lZGlhIERlc2NyaXB0aW9uXCIsUlRQX1RJTUVPVVQ6XCJSVFAgVGltZW91dFwifSxTSVBfRVJST1JfQ0FVU0VTOntSRURJUkVDVEVEOlszMDAsMzAxLDMwMiwzMDUsMzgwXSxCVVNZOls0ODYsNjAwXSxSRUpFQ1RFRDpbNDAzLDYwM10sTk9UX0ZPVU5EOls0MDQsNjA0XSxVTkFWQUlMQUJMRTpbNDgwLDQxMCw0MDgsNDMwXSxBRERSRVNTX0lOQ09NUExFVEU6WzQ4NCw0MjRdLElOQ09NUEFUSUJMRV9TRFA6WzQ4OCw2MDZdLEFVVEhFTlRJQ0FUSU9OX0VSUk9SOls0MDEsNDA3XX0sQUNLOlwiQUNLXCIsQllFOlwiQllFXCIsQ0FOQ0VMOlwiQ0FOQ0VMXCIsSU5GTzpcIklORk9cIixJTlZJVEU6XCJJTlZJVEVcIixNRVNTQUdFOlwiTUVTU0FHRVwiLE5PVElGWTpcIk5PVElGWVwiLE9QVElPTlM6XCJPUFRJT05TXCIsUkVHSVNURVI6XCJSRUdJU1RFUlwiLFJFRkVSOlwiUkVGRVJcIixVUERBVEU6XCJVUERBVEVcIixTVUJTQ1JJQkU6XCJTVUJTQ1JJQkVcIixSRUFTT05fUEhSQVNFOnsxMDA6XCJUcnlpbmdcIiwxODA6XCJSaW5naW5nXCIsMTgxOlwiQ2FsbCBJcyBCZWluZyBGb3J3YXJkZWRcIiwxODI6XCJRdWV1ZWRcIiwxODM6XCJTZXNzaW9uIFByb2dyZXNzXCIsMTk5OlwiRWFybHkgRGlhbG9nIFRlcm1pbmF0ZWRcIiwyMDA6XCJPS1wiLDIwMjpcIkFjY2VwdGVkXCIsMjA0OlwiTm8gTm90aWZpY2F0aW9uXCIsMzAwOlwiTXVsdGlwbGUgQ2hvaWNlc1wiLDMwMTpcIk1vdmVkIFBlcm1hbmVudGx5XCIsMzAyOlwiTW92ZWQgVGVtcG9yYXJpbHlcIiwzMDU6XCJVc2UgUHJveHlcIiwzODA6XCJBbHRlcm5hdGl2ZSBTZXJ2aWNlXCIsNDAwOlwiQmFkIFJlcXVlc3RcIiw0MDE6XCJVbmF1dGhvcml6ZWRcIiw0MDI6XCJQYXltZW50IFJlcXVpcmVkXCIsNDAzOlwiRm9yYmlkZGVuXCIsNDA0OlwiTm90IEZvdW5kXCIsNDA1OlwiTWV0aG9kIE5vdCBBbGxvd2VkXCIsNDA2OlwiTm90IEFjY2VwdGFibGVcIiw0MDc6XCJQcm94eSBBdXRoZW50aWNhdGlvbiBSZXF1aXJlZFwiLDQwODpcIlJlcXVlc3QgVGltZW91dFwiLDQxMDpcIkdvbmVcIiw0MTI6XCJDb25kaXRpb25hbCBSZXF1ZXN0IEZhaWxlZFwiLDQxMzpcIlJlcXVlc3QgRW50aXR5IFRvbyBMYXJnZVwiLDQxNDpcIlJlcXVlc3QtVVJJIFRvbyBMb25nXCIsNDE1OlwiVW5zdXBwb3J0ZWQgTWVkaWEgVHlwZVwiLDQxNjpcIlVuc3VwcG9ydGVkIFVSSSBTY2hlbWVcIiw0MTc6XCJVbmtub3duIFJlc291cmNlLVByaW9yaXR5XCIsNDIwOlwiQmFkIEV4dGVuc2lvblwiLDQyMTpcIkV4dGVuc2lvbiBSZXF1aXJlZFwiLDQyMjpcIlNlc3Npb24gSW50ZXJ2YWwgVG9vIFNtYWxsXCIsNDIzOlwiSW50ZXJ2YWwgVG9vIEJyaWVmXCIsNDI0OlwiQmFkIExvY2F0aW9uIEluZm9ybWF0aW9uXCIsNDI4OlwiVXNlIElkZW50aXR5IEhlYWRlclwiLDQyOTpcIlByb3ZpZGUgUmVmZXJyZXIgSWRlbnRpdHlcIiw0MzA6XCJGbG93IEZhaWxlZFwiLDQzMzpcIkFub255bWl0eSBEaXNhbGxvd2VkXCIsNDM2OlwiQmFkIElkZW50aXR5LUluZm9cIiw0Mzc6XCJVbnN1cHBvcnRlZCBDZXJ0aWZpY2F0ZVwiLDQzODpcIkludmFsaWQgSWRlbnRpdHkgSGVhZGVyXCIsNDM5OlwiRmlyc3QgSG9wIExhY2tzIE91dGJvdW5kIFN1cHBvcnRcIiw0NDA6XCJNYXgtQnJlYWR0aCBFeGNlZWRlZFwiLDQ2OTpcIkJhZCBJbmZvIFBhY2thZ2VcIiw0NzA6XCJDb25zZW50IE5lZWRlZFwiLDQ3ODpcIlVucmVzb2x2YWJsZSBEZXN0aW5hdGlvblwiLDQ4MDpcIlRlbXBvcmFyaWx5IFVuYXZhaWxhYmxlXCIsNDgxOlwiQ2FsbC9UcmFuc2FjdGlvbiBEb2VzIE5vdCBFeGlzdFwiLDQ4MjpcIkxvb3AgRGV0ZWN0ZWRcIiw0ODM6XCJUb28gTWFueSBIb3BzXCIsNDg0OlwiQWRkcmVzcyBJbmNvbXBsZXRlXCIsNDg1OlwiQW1iaWd1b3VzXCIsNDg2OlwiQnVzeSBIZXJlXCIsNDg3OlwiUmVxdWVzdCBUZXJtaW5hdGVkXCIsNDg4OlwiTm90IEFjY2VwdGFibGUgSGVyZVwiLDQ4OTpcIkJhZCBFdmVudFwiLDQ5MTpcIlJlcXVlc3QgUGVuZGluZ1wiLDQ5MzpcIlVuZGVjaXBoZXJhYmxlXCIsNDk0OlwiU2VjdXJpdHkgQWdyZWVtZW50IFJlcXVpcmVkXCIsNTAwOlwiSnNTSVAgSW50ZXJuYWwgRXJyb3JcIiw1MDE6XCJOb3QgSW1wbGVtZW50ZWRcIiw1MDI6XCJCYWQgR2F0ZXdheVwiLDUwMzpcIlNlcnZpY2UgVW5hdmFpbGFibGVcIiw1MDQ6XCJTZXJ2ZXIgVGltZS1vdXRcIiw1MDU6XCJWZXJzaW9uIE5vdCBTdXBwb3J0ZWRcIiw1MTM6XCJNZXNzYWdlIFRvbyBMYXJnZVwiLDU4MDpcIlByZWNvbmRpdGlvbiBGYWlsdXJlXCIsNjAwOlwiQnVzeSBFdmVyeXdoZXJlXCIsNjAzOlwiRGVjbGluZVwiLDYwNDpcIkRvZXMgTm90IEV4aXN0IEFueXdoZXJlXCIsNjA2OlwiTm90IEFjY2VwdGFibGVcIn0sQUxMT1dFRF9NRVRIT0RTOlwiSU5WSVRFLEFDSyxDQU5DRUwsQllFLFVQREFURSxNRVNTQUdFLE9QVElPTlMsUkVGRVIsSU5GT1wiLEFDQ0VQVEVEX0JPRFlfVFlQRVM6XCJhcHBsaWNhdGlvbi9zZHAsIGFwcGxpY2F0aW9uL2R0bWYtcmVsYXlcIixNQVhfRk9SV0FSRFM6NjksU0VTU0lPTl9FWFBJUkVTOjkwLE1JTl9TRVNTSU9OX0VYUElSRVM6NjB9O3QuZXhwb3J0cz1zfSx7XCIuLi9wYWNrYWdlLmpzb25cIjo0N31dLDI6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCxuLHIpe3ZhciBvO3JldHVybiB0aGlzLnVhY19wZW5kaW5nX3JlcGx5PSExLHRoaXMudWFzX3BlbmRpbmdfcmVwbHk9ITEsdC5oYXNIZWFkZXIoXCJjb250YWN0XCIpPyhyPXQgaW5zdGFuY2VvZiBpLkluY29taW5nUmVzcG9uc2U/dC5zdGF0dXNfY29kZTwyMDA/cy5TVEFUVVNfRUFSTFk6cy5TVEFUVVNfQ09ORklSTUVEOnJ8fHMuU1RBVFVTX0NPTkZJUk1FRCxvPXQucGFyc2VIZWFkZXIoXCJjb250YWN0XCIpLFwiVUFTXCI9PT1uPyh0aGlzLmlkPXtjYWxsX2lkOnQuY2FsbF9pZCxsb2NhbF90YWc6dC50b190YWcscmVtb3RlX3RhZzp0LmZyb21fdGFnLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbF9pZCt0aGlzLmxvY2FsX3RhZyt0aGlzLnJlbW90ZV90YWd9fSx0aGlzLnN0YXRlPXIsdGhpcy5yZW1vdGVfc2VxbnVtPXQuY3NlcSx0aGlzLmxvY2FsX3VyaT10LnBhcnNlSGVhZGVyKFwidG9cIikudXJpLHRoaXMucmVtb3RlX3VyaT10LnBhcnNlSGVhZGVyKFwiZnJvbVwiKS51cmksdGhpcy5yZW1vdGVfdGFyZ2V0PW8udXJpLHRoaXMucm91dGVfc2V0PXQuZ2V0SGVhZGVycyhcInJlY29yZC1yb3V0ZVwiKSk6XCJVQUNcIj09PW4mJih0aGlzLmlkPXtjYWxsX2lkOnQuY2FsbF9pZCxsb2NhbF90YWc6dC5mcm9tX3RhZyxyZW1vdGVfdGFnOnQudG9fdGFnLHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FsbF9pZCt0aGlzLmxvY2FsX3RhZyt0aGlzLnJlbW90ZV90YWd9fSx0aGlzLnN0YXRlPXIsdGhpcy5sb2NhbF9zZXFudW09dC5jc2VxLHRoaXMubG9jYWxfdXJpPXQucGFyc2VIZWFkZXIoXCJmcm9tXCIpLnVyaSx0aGlzLnJlbW90ZV91cmk9dC5wYXJzZUhlYWRlcihcInRvXCIpLnVyaSx0aGlzLnJlbW90ZV90YXJnZXQ9by51cmksdGhpcy5yb3V0ZV9zZXQ9dC5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLnJldmVyc2UoKSksdGhpcy5vd25lcj1lLGUudWEuZGlhbG9nc1t0aGlzLmlkLnRvU3RyaW5nKCldPXRoaXMsdm9pZCBsKFwibmV3IFwiK24rXCIgZGlhbG9nIGNyZWF0ZWQgd2l0aCBzdGF0dXMgXCIrKHRoaXMuc3RhdGU9PT1zLlNUQVRVU19FQVJMWT9cIkVBUkxZXCI6XCJDT05GSVJNRURcIikpKTp7ZXJyb3I6XCJ1bmFibGUgdG8gY3JlYXRlIGEgRGlhbG9nIHdpdGhvdXQgQ29udGFjdCBoZWFkZXIgZmllbGRcIn19dC5leHBvcnRzPXI7dmFyIHM9e1NUQVRVU19FQVJMWToxLFNUQVRVU19DT05GSVJNRUQ6Mn07ci5DPXM7dmFyIGw9ZShcImRlYnVnXCIpKFwiSnNTSVA6RGlhbG9nXCIpLGk9ZShcIi4vU0lQTWVzc2FnZVwiKSxvPWUoXCIuL0NvbnN0YW50c1wiKSx1PWUoXCIuL1RyYW5zYWN0aW9uc1wiKSxhPWUoXCIuL0RpYWxvZy9SZXF1ZXN0U2VuZGVyXCIpO3IucHJvdG90eXBlPXt1cGRhdGU6ZnVuY3Rpb24oZSx0KXt0aGlzLnN0YXRlPXMuU1RBVFVTX0NPTkZJUk1FRCxsKFwiZGlhbG9nIFwiK3RoaXMuaWQudG9TdHJpbmcoKStcIiAgY2hhbmdlZCB0byBDT05GSVJNRUQgc3RhdGVcIiksXCJVQUNcIj09PXQmJih0aGlzLnJvdXRlX3NldD1lLmdldEhlYWRlcnMoXCJyZWNvcmQtcm91dGVcIikucmV2ZXJzZSgpKX0sdGVybWluYXRlOmZ1bmN0aW9uKCl7bChcImRpYWxvZyBcIit0aGlzLmlkLnRvU3RyaW5nKCkrXCIgZGVsZXRlZFwiKSxkZWxldGUgdGhpcy5vd25lci51YS5kaWFsb2dzW3RoaXMuaWQudG9TdHJpbmcoKV19LGNyZWF0ZVJlcXVlc3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLHM7cmV0dXJuIHQ9dCYmdC5zbGljZSgpfHxbXSx0aGlzLmxvY2FsX3NlcW51bXx8KHRoaXMubG9jYWxfc2VxbnVtPU1hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpKSxyPWU9PT1vLkNBTkNFTHx8ZT09PW8uQUNLP3RoaXMubG9jYWxfc2VxbnVtOnRoaXMubG9jYWxfc2VxbnVtKz0xLHM9bmV3IGkuT3V0Z29pbmdSZXF1ZXN0KGUsdGhpcy5yZW1vdGVfdGFyZ2V0LHRoaXMub3duZXIudWEse2NzZXE6cixjYWxsX2lkOnRoaXMuaWQuY2FsbF9pZCxmcm9tX3VyaTp0aGlzLmxvY2FsX3VyaSxmcm9tX3RhZzp0aGlzLmlkLmxvY2FsX3RhZyx0b191cmk6dGhpcy5yZW1vdGVfdXJpLHRvX3RhZzp0aGlzLmlkLnJlbW90ZV90YWcscm91dGVfc2V0OnRoaXMucm91dGVfc2V0fSx0LG4pLHMuZGlhbG9nPXRoaXMsc30sY2hlY2tJbkRpYWxvZ1JlcXVlc3Q6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLnJlbW90ZV9zZXFudW0pe2lmKGUuY3NlcTx0aGlzLnJlbW90ZV9zZXFudW0pcmV0dXJuIGUubWV0aG9kIT09by5BQ0smJmUucmVwbHkoNTAwKSwhMTtlLmNzZXE+dGhpcy5yZW1vdGVfc2VxbnVtJiYodGhpcy5yZW1vdGVfc2VxbnVtPWUuY3NlcSl9ZWxzZSB0aGlzLnJlbW90ZV9zZXFudW09ZS5jc2VxO2lmKGUubWV0aG9kPT09by5JTlZJVEV8fGUubWV0aG9kPT09by5VUERBVEUmJmUuYm9keSl7aWYodGhpcy51YWNfcGVuZGluZ19yZXBseT09PSEwKWUucmVwbHkoNDkxKTtlbHNle2lmKHRoaXMudWFzX3BlbmRpbmdfcmVwbHk9PT0hMCl7dmFyIG49KDEwKk1hdGgucmFuZG9tKCl8MCkrMTtyZXR1cm4gZS5yZXBseSg1MDAsbnVsbCxbXCJSZXRyeS1BZnRlcjpcIituXSksITF9dGhpcy51YXNfcGVuZGluZ19yZXBseT0hMCxlLnNlcnZlcl90cmFuc2FjdGlvbi5vbihcInN0YXRlQ2hhbmdlZFwiLGZ1bmN0aW9uIHIoKXt0aGlzLnN0YXRlIT09dS5DLlNUQVRVU19BQ0NFUFRFRCYmdGhpcy5zdGF0ZSE9PXUuQy5TVEFUVVNfQ09NUExFVEVEJiZ0aGlzLnN0YXRlIT09dS5DLlNUQVRVU19URVJNSU5BVEVEfHwoZS5zZXJ2ZXJfdHJhbnNhY3Rpb24ucmVtb3ZlTGlzdGVuZXIoXCJzdGF0ZUNoYW5nZWRcIixyKSx0LnVhc19wZW5kaW5nX3JlcGx5PSExKX0pfWUuaGFzSGVhZGVyKFwiY29udGFjdFwiKSYmZS5zZXJ2ZXJfdHJhbnNhY3Rpb24ub24oXCJzdGF0ZUNoYW5nZWRcIixmdW5jdGlvbigpe3RoaXMuc3RhdGU9PT11LkMuU1RBVFVTX0FDQ0VQVEVEJiYodC5yZW1vdGVfdGFyZ2V0PWUucGFyc2VIZWFkZXIoXCJjb250YWN0XCIpLnVyaSl9KX1lbHNlIGUubWV0aG9kPT09by5OT1RJRlkmJmUuaGFzSGVhZGVyKFwiY29udGFjdFwiKSYmZS5zZXJ2ZXJfdHJhbnNhY3Rpb24ub24oXCJzdGF0ZUNoYW5nZWRcIixmdW5jdGlvbigpe3RoaXMuc3RhdGU9PT11LkMuU1RBVFVTX0NPTVBMRVRFRCYmKHQucmVtb3RlX3RhcmdldD1lLnBhcnNlSGVhZGVyKFwiY29udGFjdFwiKS51cmkpfSk7cmV0dXJuITB9LHNlbmRSZXF1ZXN0OmZ1bmN0aW9uKGUsdCxuKXtuPW58fHt9O3ZhciByPW4uZXh0cmFIZWFkZXJzJiZuLmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSxzPW4uYm9keXx8bnVsbCxsPXRoaXMuY3JlYXRlUmVxdWVzdCh0LHIscyksaT1uZXcgYSh0aGlzLGUsbCk7cmV0dXJuIGkuc2VuZCgpLGx9LHJlY2VpdmVSZXF1ZXN0OmZ1bmN0aW9uKGUpe3RoaXMuY2hlY2tJbkRpYWxvZ1JlcXVlc3QoZSkmJnRoaXMub3duZXIucmVjZWl2ZVJlcXVlc3QoZSl9fX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9EaWFsb2cvUmVxdWVzdFNlbmRlclwiOjMsXCIuL1NJUE1lc3NhZ2VcIjoxOCxcIi4vVHJhbnNhY3Rpb25zXCI6MjEsZGVidWc6MzN9XSwzOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbil7dGhpcy5kaWFsb2c9ZSx0aGlzLmFwcGxpY2FudD10LHRoaXMucmVxdWVzdD1uLHRoaXMucmVhdHRlbXB0PSExLHRoaXMucmVhdHRlbXB0VGltZXI9bnVsbH10LmV4cG9ydHM9cjt2YXIgcz1lKFwiLi4vQ29uc3RhbnRzXCIpLGw9ZShcIi4uL1RyYW5zYWN0aW9uc1wiKSxpPWUoXCIuLi9SVENTZXNzaW9uXCIpLG89ZShcIi4uL1JlcXVlc3RTZW5kZXJcIik7ci5wcm90b3R5cGU9e3NlbmQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9bmV3IG8odGhpcyx0aGlzLmRpYWxvZy5vd25lci51YSk7dC5zZW5kKCksKHRoaXMucmVxdWVzdC5tZXRob2Q9PT1zLklOVklURXx8dGhpcy5yZXF1ZXN0Lm1ldGhvZD09PXMuVVBEQVRFJiZ0aGlzLnJlcXVlc3QuYm9keSkmJnQuY2xpZW50VHJhbnNhY3Rpb24uc3RhdGUhPT1sLkMuU1RBVFVTX1RFUk1JTkFURUQmJih0aGlzLmRpYWxvZy51YWNfcGVuZGluZ19yZXBseT0hMCx0LmNsaWVudFRyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24gbigpe3RoaXMuc3RhdGUhPT1sLkMuU1RBVFVTX0FDQ0VQVEVEJiZ0aGlzLnN0YXRlIT09bC5DLlNUQVRVU19DT01QTEVURUQmJnRoaXMuc3RhdGUhPT1sLkMuU1RBVFVTX1RFUk1JTkFURUR8fCh0LmNsaWVudFRyYW5zYWN0aW9uLnJlbW92ZUxpc3RlbmVyKFwic3RhdGVDaGFuZ2VkXCIsbiksZS5kaWFsb2cudWFjX3BlbmRpbmdfcmVwbHk9ITEpfSkpfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy5hcHBsaWNhbnQub25SZXF1ZXN0VGltZW91dCgpfSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7dGhpcy5hcHBsaWNhbnQub25UcmFuc3BvcnRFcnJvcigpfSxyZWNlaXZlUmVzcG9uc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczs0MDg9PT1lLnN0YXR1c19jb2RlfHw0ODE9PT1lLnN0YXR1c19jb2RlP3RoaXMuYXBwbGljYW50Lm9uRGlhbG9nRXJyb3IoZSk6ZS5tZXRob2Q9PT1zLklOVklURSYmNDkxPT09ZS5zdGF0dXNfY29kZT90aGlzLnJlYXR0ZW1wdD90aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UoZSk6KHRoaXMucmVxdWVzdC5jc2VxLnZhbHVlPXRoaXMuZGlhbG9nLmxvY2FsX3NlcW51bSs9MSx0aGlzLnJlYXR0ZW1wdFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmFwcGxpY2FudC5vd25lci5zdGF0dXMhPT1pLkMuU1RBVFVTX1RFUk1JTkFURUQmJih0LnJlYXR0ZW1wdD0hMCx0LnJlcXVlc3Rfc2VuZGVyLnNlbmQoKSl9LDFlMykpOnRoaXMuYXBwbGljYW50LnJlY2VpdmVSZXNwb25zZShlKX19fSx7XCIuLi9Db25zdGFudHNcIjoxLFwiLi4vUlRDU2Vzc2lvblwiOjExLFwiLi4vUmVxdWVzdFNlbmRlclwiOjE3LFwiLi4vVHJhbnNhY3Rpb25zXCI6MjF9XSw0OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXt0aGlzLmNyZWRlbnRpYWxzPWUsdGhpcy5jbm9uY2U9bnVsbCx0aGlzLm5jPTAsdGhpcy5uY0hleD1cIjAwMDAwMDAwXCIsdGhpcy5hbGdvcml0aG09bnVsbCx0aGlzLnJlYWxtPW51bGwsdGhpcy5ub25jZT1udWxsLHRoaXMub3BhcXVlPW51bGwsdGhpcy5zdGFsZT1udWxsLHRoaXMucW9wPW51bGwsdGhpcy5tZXRob2Q9bnVsbCx0aGlzLnVyaT1udWxsLHRoaXMuaGExPW51bGwsdGhpcy5yZXNwb25zZT1udWxsfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkRpZ2VzdEF1dGhlbnRpY2F0aW9uXCIpLGw9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6RGlnZXN0QXV0aGVudGljYXRpb25cIik7bC5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7dmFyIGk9ZShcIi4vVXRpbHNcIik7ci5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlXCJyZWFsbVwiOnJldHVybiB0aGlzLnJlYWxtO2Nhc2VcImhhMVwiOnJldHVybiB0aGlzLmhhMTtkZWZhdWx0OnJldHVybiB2b2lkIGwoJ2dldCgpIHwgY2Fubm90IGdldCBcIiVzXCIgcGFyYW1ldGVyJyxlKX19LHIucHJvdG90eXBlLmF1dGhlbnRpY2F0ZT1mdW5jdGlvbihlLHQpe3ZhciBuLHI7aWYodGhpcy5hbGdvcml0aG09dC5hbGdvcml0aG0sdGhpcy5yZWFsbT10LnJlYWxtLHRoaXMubm9uY2U9dC5ub25jZSx0aGlzLm9wYXF1ZT10Lm9wYXF1ZSx0aGlzLnN0YWxlPXQuc3RhbGUsdGhpcy5hbGdvcml0aG0pe2lmKFwiTUQ1XCIhPT10aGlzLmFsZ29yaXRobSlyZXR1cm4gbCgnYXV0aGVudGljYXRlKCkgfCBjaGFsbGVuZ2Ugd2l0aCBEaWdlc3QgYWxnb3JpdGhtIGRpZmZlcmVudCB0aGFuIFwiTUQ1XCIsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQnKSwhMX1lbHNlIHRoaXMuYWxnb3JpdGhtPVwiTUQ1XCI7aWYoIXRoaXMubm9uY2UpcmV0dXJuIGwoXCJhdXRoZW50aWNhdGUoKSB8IGNoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCBub25jZSwgYXV0aGVudGljYXRpb24gYWJvcnRlZFwiKSwhMTtpZighdGhpcy5yZWFsbSlyZXR1cm4gbChcImF1dGhlbnRpY2F0ZSgpIHwgY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IHJlYWxtLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkXCIpLCExO2lmKCF0aGlzLmNyZWRlbnRpYWxzLnBhc3N3b3JkKXtpZighdGhpcy5jcmVkZW50aWFscy5oYTEpcmV0dXJuIGwoXCJhdXRoZW50aWNhdGUoKSB8IG5vIHBsYWluIFNJUCBwYXNzd29yZCBub3IgaGExIHByb3ZpZGVkLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkXCIpLCExO2lmKHRoaXMuY3JlZGVudGlhbHMucmVhbG0hPT10aGlzLnJlYWxtKXJldHVybiBsKCdhdXRoZW50aWNhdGUoKSB8IG5vIHBsYWluIFNJUCBwYXNzd29yZCwgYW5kIHN0b3JlZCBgcmVhbG1gIGRvZXMgbm90IG1hdGNoIHRoZSBnaXZlbiBgcmVhbG1gLCBjYW5ub3QgYXV0aGVudGljYXRlIFtzdG9yZWQ6XCIlc1wiLCBnaXZlbjpcIiVzXCJdJyx0aGlzLmNyZWRlbnRpYWxzLnJlYWxtLHRoaXMucmVhbG0pLCExfWlmKHQucW9wKWlmKHQucW9wLmluZGV4T2YoXCJhdXRoXCIpPi0xKXRoaXMucW9wPVwiYXV0aFwiO2Vsc2V7aWYoISh0LnFvcC5pbmRleE9mKFwiYXV0aC1pbnRcIik+LTEpKXJldHVybiBsKCdhdXRoZW50aWNhdGUoKSB8IGNoYWxsZW5nZSB3aXRob3V0IERpZ2VzdCBxb3AgZGlmZmVyZW50IHRoYW4gXCJhdXRoXCIgb3IgXCJhdXRoLWludFwiLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkJyksITE7dGhpcy5xb3A9XCJhdXRoLWludFwifWVsc2UgdGhpcy5xb3A9bnVsbDtyZXR1cm4gdGhpcy5tZXRob2Q9ZS5tZXRob2QsdGhpcy51cmk9ZS5ydXJpLHRoaXMuY25vbmNlPWkuY3JlYXRlUmFuZG9tVG9rZW4oMTIpLHRoaXMubmMrPTEscj1OdW1iZXIodGhpcy5uYykudG9TdHJpbmcoMTYpLHRoaXMubmNIZXg9XCIwMDAwMDAwMFwiLnN1YnN0cigwLDgtci5sZW5ndGgpK3IsNDI5NDk2NzI5Nj09PXRoaXMubmMmJih0aGlzLm5jPTEsdGhpcy5uY0hleD1cIjAwMDAwMDAxXCIpLHRoaXMuY3JlZGVudGlhbHMucGFzc3dvcmQ/dGhpcy5oYTE9aS5jYWxjdWxhdGVNRDUodGhpcy5jcmVkZW50aWFscy51c2VybmFtZStcIjpcIit0aGlzLnJlYWxtK1wiOlwiK3RoaXMuY3JlZGVudGlhbHMucGFzc3dvcmQpOnRoaXMuaGExPXRoaXMuY3JlZGVudGlhbHMuaGExLFwiYXV0aFwiPT09dGhpcy5xb3A/KG49aS5jYWxjdWxhdGVNRDUodGhpcy5tZXRob2QrXCI6XCIrdGhpcy51cmkpLHRoaXMucmVzcG9uc2U9aS5jYWxjdWxhdGVNRDUodGhpcy5oYTErXCI6XCIrdGhpcy5ub25jZStcIjpcIit0aGlzLm5jSGV4K1wiOlwiK3RoaXMuY25vbmNlK1wiOmF1dGg6XCIrbikpOlwiYXV0aC1pbnRcIj09PXRoaXMucW9wPyhuPWkuY2FsY3VsYXRlTUQ1KHRoaXMubWV0aG9kK1wiOlwiK3RoaXMudXJpK1wiOlwiK2kuY2FsY3VsYXRlTUQ1KHRoaXMuYm9keT90aGlzLmJvZHk6XCJcIikpLHRoaXMucmVzcG9uc2U9aS5jYWxjdWxhdGVNRDUodGhpcy5oYTErXCI6XCIrdGhpcy5ub25jZStcIjpcIit0aGlzLm5jSGV4K1wiOlwiK3RoaXMuY25vbmNlK1wiOmF1dGgtaW50OlwiK24pKTpudWxsPT09dGhpcy5xb3AmJihuPWkuY2FsY3VsYXRlTUQ1KHRoaXMubWV0aG9kK1wiOlwiK3RoaXMudXJpKSx0aGlzLnJlc3BvbnNlPWkuY2FsY3VsYXRlTUQ1KHRoaXMuaGExK1wiOlwiK3RoaXMubm9uY2UrXCI6XCIrbikpLHMoXCJhdXRoZW50aWNhdGUoKSB8IHJlc3BvbnNlIGdlbmVyYXRlZFwiKSwhMH0sci5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZT1bXTtpZighdGhpcy5yZXNwb25zZSl0aHJvdyBuZXcgRXJyb3IoXCJyZXNwb25zZSBmaWVsZCBkb2VzIG5vdCBleGlzdCwgY2Fubm90IGdlbmVyYXRlIEF1dGhvcml6YXRpb24gaGVhZGVyXCIpO3JldHVybiBlLnB1c2goXCJhbGdvcml0aG09XCIrdGhpcy5hbGdvcml0aG0pLGUucHVzaCgndXNlcm5hbWU9XCInK3RoaXMuY3JlZGVudGlhbHMudXNlcm5hbWUrJ1wiJyksZS5wdXNoKCdyZWFsbT1cIicrdGhpcy5yZWFsbSsnXCInKSxlLnB1c2goJ25vbmNlPVwiJyt0aGlzLm5vbmNlKydcIicpLGUucHVzaCgndXJpPVwiJyt0aGlzLnVyaSsnXCInKSxlLnB1c2goJ3Jlc3BvbnNlPVwiJyt0aGlzLnJlc3BvbnNlKydcIicpLHRoaXMub3BhcXVlJiZlLnB1c2goJ29wYXF1ZT1cIicrdGhpcy5vcGFxdWUrJ1wiJyksdGhpcy5xb3AmJihlLnB1c2goXCJxb3A9XCIrdGhpcy5xb3ApLGUucHVzaCgnY25vbmNlPVwiJyt0aGlzLmNub25jZSsnXCInKSxlLnB1c2goXCJuYz1cIit0aGlzLm5jSGV4KSksXCJEaWdlc3QgXCIrZS5qb2luKFwiLCBcIil9fSx7XCIuL1V0aWxzXCI6MjUsZGVidWc6MzN9XSw1OltmdW5jdGlvbihlLHQsbil7dmFyIHI9e0NvbmZpZ3VyYXRpb25FcnJvcjpmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUsdCl7dGhpcy5jb2RlPTEsdGhpcy5uYW1lPVwiQ09ORklHVVJBVElPTl9FUlJPUlwiLHRoaXMucGFyYW1ldGVyPWUsdGhpcy52YWx1ZT10LHRoaXMubWVzc2FnZT10aGlzLnZhbHVlP1wiSW52YWxpZCB2YWx1ZSBcIitKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlKSsnIGZvciBwYXJhbWV0ZXIgXCInK3RoaXMucGFyYW1ldGVyKydcIic6XCJNaXNzaW5nIHBhcmFtZXRlcjogXCIrdGhpcy5wYXJhbWV0ZXJ9O3JldHVybiBlLnByb3RvdHlwZT1uZXcgRXJyb3IsZX0oKSxJbnZhbGlkU3RhdGVFcnJvcjpmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3RoaXMuY29kZT0yLHRoaXMubmFtZT1cIklOVkFMSURfU1RBVEVfRVJST1JcIix0aGlzLnN0YXR1cz1lLHRoaXMubWVzc2FnZT1cIkludmFsaWQgc3RhdHVzOiBcIitlfTtyZXR1cm4gZS5wcm90b3R5cGU9bmV3IEVycm9yLGV9KCksTm90U3VwcG9ydGVkRXJyb3I6ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlKXt0aGlzLmNvZGU9Myx0aGlzLm5hbWU9XCJOT1RfU1VQUE9SVEVEX0VSUk9SXCIsdGhpcy5tZXNzYWdlPWV9O3JldHVybiBlLnByb3RvdHlwZT1uZXcgRXJyb3IsZX0oKSxOb3RSZWFkeUVycm9yOmZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5jb2RlPTQsdGhpcy5uYW1lPVwiTk9UX1JFQURZX0VSUk9SXCIsdGhpcy5tZXNzYWdlPWV9O3JldHVybiBlLnByb3RvdHlwZT1uZXcgRXJyb3IsZX0oKX07dC5leHBvcnRzPXJ9LHt9XSw2OltmdW5jdGlvbihlLHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtyZXR1cm4nXCInK2UucmVwbGFjZSgvXFxcXC9nLFwiXFxcXFxcXFxcIikucmVwbGFjZSgvXCIvZywnXFxcXFwiJykucmVwbGFjZSgvXFx4MDgvZyxcIlxcXFxiXCIpLnJlcGxhY2UoL1xcdC9nLFwiXFxcXHRcIikucmVwbGFjZSgvXFxuL2csXCJcXFxcblwiKS5yZXBsYWNlKC9cXGYvZyxcIlxcXFxmXCIpLnJlcGxhY2UoL1xcci9nLFwiXFxcXHJcIikucmVwbGFjZSgvW1xceDAwLVxceDA3XFx4MEJcXHgwRS1cXHgxRlxceDgwLVxcdUZGRkZdL2csZXNjYXBlKSsnXCInfXZhciBuPXtwYXJzZTpmdW5jdGlvbihuLHIpe2Z1bmN0aW9uIHMoZSl7Q3I+X3J8fChfcj5DciYmKENyPV9yLFNyPVtdKSxTci5wdXNoKGUpKX1mdW5jdGlvbiBsKCl7dmFyIGU7cmV0dXJuXCJcXHJcXG5cIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiXFxyXFxuXCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIlxcXFxyXFxcXG5cIicpKSxlfWZ1bmN0aW9uIGkoKXt2YXIgZTtyZXR1cm4vXlswLTldLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiWzAtOV1cIikpLGV9ZnVuY3Rpb24gbygpe3ZhciBlO3JldHVybi9eW2EtekEtWl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbYS16QS1aXVwiKSksZX1mdW5jdGlvbiB1KCl7dmFyIGU7cmV0dXJuL15bMC05YS1mQS1GXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlswLTlhLWZBLUZdXCIpKSxlfWZ1bmN0aW9uIGEoKXt2YXIgZTtyZXR1cm4gZT1kKCksbnVsbD09PWUmJihlPXAoKSksZX1mdW5jdGlvbiBjKCl7dmFyIGU7cmV0dXJuL15bXFwwLVxceEZGXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIltcXFxcMC1cXFxceEZGXVwiKSksZX1mdW5jdGlvbiBoKCl7dmFyIGU7cmV0dXJuL15bXCJdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdbXCJdJykpLGV9ZnVuY3Rpb24gZCgpe3ZhciBlO3JldHVybiAzMj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIgXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiIFwiJykpLGV9ZnVuY3Rpb24gcCgpe3ZhciBlO3JldHVybiA5PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIlx0XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiXFxcXHRcIicpKSxlfWZ1bmN0aW9uIGYoKXt2YXIgZTtyZXR1cm4vXlthLXpBLVowLTldLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiW2EtekEtWjAtOV1cIikpLGV9ZnVuY3Rpb24gbSgpe3ZhciBlO3JldHVybiA1OT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI7XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGw9PT1lJiYoNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiL1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsPT09ZSYmKDYzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbD09PWUmJig1OD09PW4uY2hhckNvZGVBdChfcik/KGU9XCI6XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT1lJiYoNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiQFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsPT09ZSYmKDM4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiZcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PWUmJig2MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI9XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT1lJiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiK1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09ZSYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiRcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIkXCInKSksbnVsbD09PWUmJig0ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCIsXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpKSkpKSkpKSkpLGV9ZnVuY3Rpb24gZygpe3ZhciBlO3JldHVybiBlPWYoKSxudWxsPT09ZSYmKGU9VCgpKSxlfWZ1bmN0aW9uIFQoKXt2YXIgZTtyZXR1cm4gNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiLVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09ZSYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIl9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJfXCInKSksbnVsbD09PWUmJig0Nj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIuXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGw9PT1lJiYoMzM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiIVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiFcIicpKSxudWxsPT09ZSYmKDEyNj09PW4uY2hhckNvZGVBdChfcik/KGU9XCJ+XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiflwiJykpLG51bGw9PT1lJiYoNDI9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiKlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIipcIicpKSxudWxsPT09ZSYmKDM5PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIidcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJcXCdcIicpKSxudWxsPT09ZSYmKDQwPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIihcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIoXCInKSksbnVsbD09PWUmJig0MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCIpXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiKVwiJykpKSkpKSkpKSksZX1mdW5jdGlvbiBfKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLDM3PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiVcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIlXCInKSksbnVsbCE9PWU/KHQ9dSgpLG51bGwhPT10PyhyPXUoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5qb2luKFwiXCIpfShsLGUpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gdigpe3ZhciBlLHQsbixyLHMsaTtmb3Iocj1fcixzPV9yLGk9X3IsZT1bXSx0PWEoKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9YSgpO2lmKG51bGwhPT1lPyh0PWwoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksZT1udWxsIT09ZT9lOlwiXCIsbnVsbCE9PWUpe2lmKG49YSgpLG51bGwhPT1uKWZvcih0PVtdO251bGwhPT1uOyl0LnB1c2gobiksbj1hKCk7ZWxzZSB0PW51bGw7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIiBcIn0ocikpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBDKCl7dmFyIGU7cmV0dXJuIGU9digpLGU9bnVsbCE9PWU/ZTpcIlwifWZ1bmN0aW9uIFMoKXt2YXIgZSx0LHIsbCxpO2ZvcihsPV9yLGk9X3IsZT1bXSx0PWQoKSxudWxsPT09dCYmKHQ9cCgpKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9ZCgpLG51bGw9PT10JiYodD1wKCkpO3JldHVybiBudWxsIT09ZT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiOlwifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEUoKXt2YXIgZSx0LHIscyxsLGksbztpZihsPV9yLGk9X3IsdD1BKCksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PUEoKTtlbHNlIGU9bnVsbDtpZihudWxsIT09ZSl7Zm9yKHQ9W10sbz1fcixyPVtdLHM9digpO251bGwhPT1zOylyLnB1c2gocykscz12KCk7Zm9yKG51bGwhPT1yPyhzPUEoKSxudWxsIT09cz9yPVtyLHNdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXI7KXtmb3IodC5wdXNoKHIpLG89X3Iscj1bXSxzPXYoKTtudWxsIT09czspci5wdXNoKHMpLHM9digpO251bGwhPT1yPyhzPUEoKSxudWxsIT09cz9yPVtyLHNdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byl9bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4gbi5zdWJzdHJpbmcoX3IsZSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gQSgpe3ZhciBlO3JldHVybi9eWyEtfl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbIS1+XVwiKSksbnVsbD09PWUmJihlPXkoKSksZX1mdW5jdGlvbiB5KCl7dmFyIGU7cmV0dXJuL15bXFx4ODAtXFx1RkZGRl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbXFxcXHg4MC1cXFxcdUZGRkZdXCIpKSxlfWZ1bmN0aW9uIFIoKXt2YXIgZTtyZXR1cm4vXltcXHg4MC1cXHhCRl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbXFxcXHg4MC1cXFxceEJGXVwiKSksZX1mdW5jdGlvbiBiKCl7dmFyIGU7cmV0dXJuIGU9aSgpLG51bGw9PT1lJiYoL15bYS1mXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlthLWZdXCIpKSksZX1mdW5jdGlvbiBJKCl7dmFyIGUsdCxyO2lmKHI9X3IsdD1mKCksbnVsbD09PXQmJig0NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCItXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT10JiYoNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsPT09dCYmKDMzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiFcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIhXCInKSksbnVsbD09PXQmJigzNz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIlXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJVwiJykpLG51bGw9PT10JiYoNDI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIipcIicpKSxudWxsPT09dCYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIl9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJfXCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT10JiYoOTY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiYFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcImBcIicpKSxudWxsPT09dCYmKDM5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIidcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJcXCdcIicpKSxudWxsPT09dCYmKDEyNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ+XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiflwiJykpKSkpKSkpKSkpKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9ZigpLG51bGw9PT10JiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09dCYmKDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbD09PXQmJigzMz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIhXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiIVwiJykpLG51bGw9PT10JiYoMzc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiVcIicpKSxudWxsPT09dCYmKDQyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIipcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIqXCInKSksbnVsbD09PXQmJig5NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJfXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09dCYmKDk2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cImBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJgXCInKSksbnVsbD09PXQmJigzOT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCInXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXFwnXCInKSksbnVsbD09PXQmJigxMjY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiflwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIn5cIicpKSkpKSkpKSkpKSk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4gbi5zdWJzdHJpbmcoX3IsZSl9KHIpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gdygpe3ZhciBlLHQscjtpZihyPV9yLHQ9ZigpLG51bGw9PT10JiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09dCYmKDMzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiFcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIhXCInKSksbnVsbD09PXQmJigzNz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIlXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJVwiJykpLG51bGw9PT10JiYoNDI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIipcIicpKSxudWxsPT09dCYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIl9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJfXCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT10JiYoOTY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiYFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcImBcIicpKSxudWxsPT09dCYmKDM5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIidcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJcXCdcIicpKSxudWxsPT09dCYmKDEyNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ+XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiflwiJykpKSkpKSkpKSkpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1mKCksbnVsbD09PXQmJig0NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCItXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT10JiYoMzM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiIVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiFcIicpKSxudWxsPT09dCYmKDM3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiVcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIlXCInKSksbnVsbD09PXQmJig0Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIqXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKlwiJykpLG51bGw9PT10JiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiX1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXQmJig5Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJgXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiYFwiJykpLG51bGw9PT10JiYoMzk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJ1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIlxcJ1wiJykpLG51bGw9PT10JiYoMTI2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIn5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ+XCInKSkpKSkpKSkpKSk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4gbi5zdWJzdHJpbmcoX3IsZSl9KHIpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gTigpe3ZhciBlO3JldHVybiA0MD09PW4uY2hhckNvZGVBdChfcik/KGU9XCIoXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiKFwiJykpLG51bGw9PT1lJiYoNDE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiKVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIilcIicpKSxudWxsPT09ZSYmKDYwPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjxcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI8XCInKSksbnVsbD09PWUmJig2Mj09PW4uY2hhckNvZGVBdChfcik/KGU9XCI+XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiPlwiJykpLG51bGw9PT1lJiYoNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiQFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsPT09ZSYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIixcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIsXCInKSksbnVsbD09PWUmJig1OT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI7XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGw9PT1lJiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiOlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09ZSYmKDkyPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIlxcXFxcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJcXFxcXFxcXFwiJykpLG51bGw9PT1lJiYoZT1oKCksbnVsbD09PWUmJig0Nz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIvXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGw9PT1lJiYoOTE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiW1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIltcIicpKSxudWxsPT09ZSYmKDkzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIl1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJdXCInKSksbnVsbD09PWUmJig2Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCI/XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGw9PT1lJiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiPVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09ZSYmKDEyMz09PW4uY2hhckNvZGVBdChfcik/KGU9XCJ7XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wie1wiJykpLG51bGw9PT1lJiYoMTI1PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIn1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJ9XCInKSksbnVsbD09PWUmJihlPWQoKSxudWxsPT09ZSYmKGU9cCgpKSkpKSkpKSkpKSkpKSkpKSkpLGV9ZnVuY3Rpb24gRCgpe3ZhciBlLHQscjtpZihyPV9yLHQ9ZigpLG51bGw9PT10JiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09dCYmKDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbD09PXQmJigzMz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIhXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiIVwiJykpLG51bGw9PT10JiYoMzc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiVcIicpKSxudWxsPT09dCYmKDQyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIipcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIqXCInKSksbnVsbD09PXQmJig5NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJfXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09dCYmKDk2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cImBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJgXCInKSksbnVsbD09PXQmJigzOT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCInXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXFwnXCInKSksbnVsbD09PXQmJigxMjY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiflwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIn5cIicpKSxudWxsPT09dCYmKDQwPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIihcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIoXCInKSksbnVsbD09PXQmJig0MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIpXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKVwiJykpLG51bGw9PT10JiYoNjA9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjxcIicpKSxudWxsPT09dCYmKDYyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI+XCInKSksbnVsbD09PXQmJig1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT10JiYoOTI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiXFxcXFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIlxcXFxcXFxcXCInKSksbnVsbD09PXQmJih0PWgoKSxudWxsPT09dCYmKDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbD09PXQmJig5MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJbXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiW1wiJykpLG51bGw9PT10JiYoOTM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiXVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIl1cIicpKSxudWxsPT09dCYmKDYzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbD09PXQmJigxMjM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwie1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIntcIicpKSxudWxsPT09dCYmKDEyNT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wifVwiJykpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWYoKSxudWxsPT09dCYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXQmJig0Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIuXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGw9PT10JiYoMzM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiIVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiFcIicpKSxudWxsPT09dCYmKDM3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiVcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIlXCInKSksbnVsbD09PXQmJig0Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIqXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKlwiJykpLG51bGw9PT10JiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiX1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXQmJig5Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJgXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiYFwiJykpLG51bGw9PT10JiYoMzk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJ1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIlxcJ1wiJykpLG51bGw9PT10JiYoMTI2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIn5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ+XCInKSksbnVsbD09PXQmJig0MD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIoXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKFwiJykpLG51bGw9PT10JiYoNDE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIilcIicpKSxudWxsPT09dCYmKDYwPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjxcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI8XCInKSksbnVsbD09PXQmJig2Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI+XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPlwiJykpLG51bGw9PT10JiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09dCYmKDkyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIlxcXFxcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJcXFxcXFxcXFwiJykpLG51bGw9PT10JiYodD1oKCksbnVsbD09PXQmJig0Nz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIvXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGw9PT10JiYoOTE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiW1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIltcIicpKSxudWxsPT09dCYmKDkzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIl1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJdXCInKSksbnVsbD09PXQmJig2Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI/XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGw9PT10JiYoMTIzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIntcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ7XCInKSksbnVsbD09PXQmJigxMjU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwifVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIn1cIicpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3Vic3RyaW5nKF9yLGUpfShyKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIE8oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWU/KDQyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIipcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIqXCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIipcIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiB4KCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9QygpLG51bGwhPT1lPyg0Nz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIvXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCIvXCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gVSgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZT8oNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiPVwifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIE0oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWU/KDQwPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIihcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIoXCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIihcIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBQKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9QygpLG51bGwhPT1lPyg0MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIpXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKVwiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCIpXCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gcSgpe3ZhciBlLHQscixsO3JldHVybiByPV9yLGw9X3IsNjI9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiPlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj5cIicpKSxudWxsIT09ZT8odD1DKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIj5cIn0ocikpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBMKCl7dmFyIGUsdCxyLGw7cmV0dXJuIHI9X3IsbD1fcixlPUMoKSxudWxsIT09ZT8oNjA9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjxcIicpKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiPFwifShyKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIGsoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWU/KDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIixcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIsXCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIixcIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBIKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9QygpLG51bGwhPT1lPyg1OT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI7XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCI7XCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gRigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiOlwifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEcoKXt2YXIgZSx0LG4scjtyZXR1cm4gbj1fcixyPV9yLGU9QygpLG51bGwhPT1lPyh0PWgoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybidcIid9KG4pKSxudWxsPT09ZSYmKF9yPW4pLGV9ZnVuY3Rpb24gaigpe3ZhciBlLHQsbixyO3JldHVybiBuPV9yLHI9X3IsZT1oKCksbnVsbCE9PWU/KHQ9QygpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuJ1wiJ30obikpLG51bGw9PT1lJiYoX3I9biksZX1mdW5jdGlvbiBXKCl7dmFyIGUsdCxuLHI7aWYocj1fcixlPU0oKSxudWxsIT09ZSl7Zm9yKHQ9W10sbj1CKCksbnVsbD09PW4mJihuPUooKSxudWxsPT09biYmKG49VygpKSk7bnVsbCE9PW47KXQucHVzaChuKSxuPUIoKSxudWxsPT09biYmKG49SigpLG51bGw9PT1uJiYobj1XKCkpKTtudWxsIT09dD8obj1QKCksbnVsbCE9PW4/ZT1bZSx0LG5dOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9cil9ZWxzZSBlPW51bGwsX3I9cjtyZXR1cm4gZX1mdW5jdGlvbiBCKCl7dmFyIGU7cmV0dXJuL15bIS0nXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlshLSddXCIpKSxudWxsPT09ZSYmKC9eWyotW10vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbKi1bXVwiKSksbnVsbD09PWUmJigvXltcXF0tfl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbXFxcXF0tfl1cIikpLG51bGw9PT1lJiYoZT15KCksbnVsbD09PWUmJihlPXYoKSkpKSksZX1mdW5jdGlvbiB6KCl7dmFyIGUsdCxyLHMsbCxpO2lmKGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZSlpZih0PWgoKSxudWxsIT09dCl7Zm9yKHI9W10scz1ZKCksbnVsbD09PXMmJihzPUooKSk7bnVsbCE9PXM7KXIucHVzaChzKSxzPVkoKSxudWxsPT09cyYmKHM9SigpKTtudWxsIT09cj8ocz1oKCksbnVsbCE9PXM/ZT1bZSx0LHIsc106KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO2Vsc2UgZT1udWxsLF9yPWk7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4gbi5zdWJzdHJpbmcoX3IsZSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gVigpe3ZhciBlLHQscixzLGwsaTtpZihsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWUpaWYodD1oKCksbnVsbCE9PXQpe2ZvcihyPVtdLHM9WSgpLG51bGw9PT1zJiYocz1KKCkpO251bGwhPT1zOylyLnB1c2gocykscz1ZKCksbnVsbD09PXMmJihzPUooKSk7bnVsbCE9PXI/KHM9aCgpLG51bGwhPT1zP2U9W2UsdCxyLHNdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtlbHNlIGU9bnVsbCxfcj1pO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3Vic3RyaW5nKF9yLTEsZSsxKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBZKCl7dmFyIGU7cmV0dXJuIGU9digpLG51bGw9PT1lJiYoMzM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiIVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiFcIicpKSxudWxsPT09ZSYmKC9eWyMtW10vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbIy1bXVwiKSksbnVsbD09PWUmJigvXltcXF0tfl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbXFxcXF0tfl1cIikpLG51bGw9PT1lJiYoZT15KCkpKSkpLGV9ZnVuY3Rpb24gSigpe3ZhciBlLHQscjtyZXR1cm4gcj1fciw5Mj09PW4uY2hhckNvZGVBdChfcik/KGU9XCJcXFxcXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiXFxcXFxcXFxcIicpKSxudWxsIT09ZT8oL15bXFwwLVxcdF0vLnRlc3Qobi5jaGFyQXQoX3IpKT8odD1uLmNoYXJBdChfciksX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoXCJbXFxcXDAtXFxcXHRdXCIpKSxudWxsPT09dCYmKC9eW1xceDBCLVxcZl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8odD1uLmNoYXJBdChfciksX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoXCJbXFxcXHgwQi1cXFxcZl1cIikpLG51bGw9PT10JiYoL15bXFx4MEUtf10vLnRlc3Qobi5jaGFyQXQoX3IpKT8odD1uLmNoYXJBdChfciksX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoXCJbXFxcXHgwRS1/XVwiKSkpKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBLKCl7dmFyIGUsdCxyLGwsaSxvO3JldHVybiBpPV9yLG89X3IsZT1YKCksbnVsbCE9PWU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9ZWUoKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8obD1zZSgpLG51bGwhPT1sP2U9W2UsdCxyLGxdOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9byksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3RyeXt5ci51cmk9bmV3IEVyKHlyLnNjaGVtZSx5ci51c2VyLHlyLmhvc3QseXIucG9ydCksZGVsZXRlIHlyLnNjaGVtZSxkZWxldGUgeXIudXNlcixkZWxldGUgeXIuaG9zdCxkZWxldGUgeXIuaG9zdF90eXBlLGRlbGV0ZSB5ci5wb3J0fWNhdGNoKHQpe3lyPS0xfX0oaSkpLG51bGw9PT1lJiYoX3I9aSksZX1mdW5jdGlvbiAkKCl7dmFyIGUsdCxsLGksbyx1LGEsYztyZXR1cm4gYT1fcixjPV9yLGU9WCgpLG51bGwhPT1lPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhsPWVlKCksbD1udWxsIT09bD9sOlwiXCIsbnVsbCE9PWw/KGk9c2UoKSxudWxsIT09aT8obz1nZSgpLG51bGwhPT1vPyh1PU5lKCksdT1udWxsIT09dT91OlwiXCIsbnVsbCE9PXU/ZT1bZSx0LGwsaSxvLHVdOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YykpOihlPW51bGwsX3I9YyksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3RyeXt5ci51cmk9bmV3IEVyKHlyLnNjaGVtZSx5ci51c2VyLHlyLmhvc3QseXIucG9ydCx5ci51cmlfcGFyYW1zLHlyLnVyaV9oZWFkZXJzKSxkZWxldGUgeXIuc2NoZW1lLGRlbGV0ZSB5ci51c2VyLGRlbGV0ZSB5ci5ob3N0LGRlbGV0ZSB5ci5ob3N0X3R5cGUsZGVsZXRlIHlyLnBvcnQsZGVsZXRlIHlyLnVyaV9wYXJhbXMsXCJTSVBfVVJJXCI9PT1yJiYoeXI9eXIudXJpKX1jYXRjaCh0KXt5cj0tMX19KGEpKSxudWxsPT09ZSYmKF9yPWEpLGV9ZnVuY3Rpb24gWCgpe3ZhciBlO3JldHVybiBlPVEoKSxudWxsPT09ZSYmKGU9WigpKSxlfWZ1bmN0aW9uIFEoKXt2YXIgZSx0O3JldHVybiB0PV9yLFwic2lwc1wiPT09bi5zdWJzdHIoX3IsNCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw0KSxfcis9NCk6KGU9bnVsbCwwPT09dnImJnMoJ1wic2lwc1wiJykpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnNjaGVtZT10LnRvTG93ZXJDYXNlKCl9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBaKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixcInNpcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wic2lwXCInKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuc2NoZW1lPXQudG9Mb3dlckNhc2UoKX0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIGVlKCl7dmFyIGUsdCxyLGwsaSxvO3JldHVybiBsPV9yLGk9X3IsZT10ZSgpLG51bGwhPT1lPyhvPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9cmUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bykpOih0PW51bGwsX3I9byksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KDY0PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIkBcIixcbl9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIudXNlcj1kZWNvZGVVUklDb21wb25lbnQobi5zdWJzdHJpbmcoX3ItMSxlKSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gdGUoKXt2YXIgZSx0O2lmKHQ9ZygpLG51bGw9PT10JiYodD1fKCksbnVsbD09PXQmJih0PW5lKCkpKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9ZygpLG51bGw9PT10JiYodD1fKCksbnVsbD09PXQmJih0PW5lKCkpKTtlbHNlIGU9bnVsbDtyZXR1cm4gZX1mdW5jdGlvbiBuZSgpe3ZhciBlO3JldHVybiAzOD09PW4uY2hhckNvZGVBdChfcik/KGU9XCImXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT1lJiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiPVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09ZSYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIitcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PWUmJigzNj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIkXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpLG51bGw9PT1lJiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiLFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIixcIicpKSxudWxsPT09ZSYmKDU5PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjtcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbD09PWUmJig2Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCI/XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGw9PT1lJiYoNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiL1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSkpKSkpKSksZX1mdW5jdGlvbiByZSgpe3ZhciBlLHQscjtmb3Iocj1fcixlPVtdLHQ9ZygpLG51bGw9PT10JiYodD1fKCksbnVsbD09PXQmJigzOD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCImXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT10JiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXQmJigzNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIkXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpLG51bGw9PT10JiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIixcIicpKSkpKSkpKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9ZygpLG51bGw9PT10JiYodD1fKCksbnVsbD09PXQmJigzOD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCImXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT10JiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXQmJigzNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIkXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpLG51bGw9PT10JiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIixcIicpKSkpKSkpKTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLnBhc3N3b3JkPW4uc3Vic3RyaW5nKF9yLGUpfShyKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIHNlKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixlPWxlKCksbnVsbCE9PWU/KGk9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1tZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1pKSk6KHQ9bnVsbCxfcj1pKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBsZSgpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1pZSgpLG51bGw9PT1lJiYoZT1wZSgpLG51bGw9PT1lJiYoZT1hZSgpKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiB5ci5ob3N0PW4uc3Vic3RyaW5nKF9yLGUpLnRvTG93ZXJDYXNlKCkseXIuaG9zdH0odCkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBpZSgpe3ZhciBlLHQscixsLGksbztmb3IobD1fcixpPV9yLGU9W10sbz1fcix0PW9lKCksbnVsbCE9PXQ/KDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi5cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPW8pKToodD1udWxsLF9yPW8pO251bGwhPT10OyllLnB1c2godCksbz1fcix0PW9lKCksbnVsbCE9PXQ/KDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi5cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPW8pKToodD1udWxsLF9yPW8pO3JldHVybiBudWxsIT09ZT8odD11ZSgpLG51bGwhPT10Pyg0Nj09PW4uY2hhckNvZGVBdChfcik/KHI9XCIuXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4geXIuaG9zdF90eXBlPVwiZG9tYWluXCIsbi5zdWJzdHJpbmcoX3IsZSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gb2UoKXt2YXIgZSx0LHIsbDtpZihsPV9yLGU9ZigpLG51bGwhPT1lKXtmb3IodD1bXSxyPWYoKSxudWxsPT09ciYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi1cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXImJig5NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCJfXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpKSk7bnVsbCE9PXI7KXQucHVzaChyKSxyPWYoKSxudWxsPT09ciYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi1cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXImJig5NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCJfXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpKSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIGV9ZnVuY3Rpb24gdWUoKXt2YXIgZSx0LHIsbDtpZihsPV9yLGU9bygpLG51bGwhPT1lKXtmb3IodD1bXSxyPWYoKSxudWxsPT09ciYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi1cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXImJig5NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCJfXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpKSk7bnVsbCE9PXI7KXQucHVzaChyKSxyPWYoKSxudWxsPT09ciYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi1cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXImJig5NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCJfXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpKSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIGV9ZnVuY3Rpb24gYWUoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsOTE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiW1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIltcIicpKSxudWxsIT09ZT8odD1jZSgpLG51bGwhPT10Pyg5Mz09PW4uY2hhckNvZGVBdChfcik/KHI9XCJdXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiXVwiJykpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4geXIuaG9zdF90eXBlPVwiSVB2NlwiLG4uc3Vic3RyaW5nKF9yLGUpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIGNlKCl7dmFyIGUsdCxyLGwsaSxvLHUsYSxjLGgsZCxwLGYsbSxnLFQ7cmV0dXJuIG09X3IsZz1fcixlPWhlKCksbnVsbCE9PWU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiOlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bD8oaT1oZSgpLG51bGwhPT1pPyg1OD09PW4uY2hhckNvZGVBdChfcik/KG89XCI6XCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1vPyh1PWhlKCksbnVsbCE9PXU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oYT1cIjpcIixfcisrKTooYT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWE/KGM9aGUoKSxudWxsIT09Yz8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhoPVwiOlwiLF9yKyspOihoPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aD8oZD1oZSgpLG51bGwhPT1kPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHA9XCI6XCIsX3IrKyk6KHA9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1wPyhmPWRlKCksbnVsbCE9PWY/ZT1bZSx0LHIsbCxpLG8sdSxhLGMsaCxkLHAsZl06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCI6OlwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1lPyh0PWhlKCksbnVsbCE9PXQ/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhpPVwiOlwiLF9yKyspOihpPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aT8obz1oZSgpLG51bGwhPT1vPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHU9XCI6XCIsX3IrKyk6KHU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT11PyhhPWhlKCksbnVsbCE9PWE/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oYz1cIjpcIixfcisrKTooYz1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWM/KGg9aGUoKSxudWxsIT09aD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhkPVwiOlwiLF9yKyspOihkPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09ZD8ocD1kZSgpLG51bGwhPT1wP2U9W2UsdCxyLGwsaSxvLHUsYSxjLGgsZCxwXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIjo6XCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWU/KHQ9aGUoKSxudWxsIT09dD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGk9XCI6XCIsX3IrKyk6KGk9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1pPyhvPWhlKCksbnVsbCE9PW8/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odT1cIjpcIixfcisrKToodT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXU/KGE9aGUoKSxudWxsIT09YT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhjPVwiOlwiLF9yKyspOihjPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09Yz8oaD1kZSgpLG51bGwhPT1oP2U9W2UsdCxyLGwsaSxvLHUsYSxjLGhdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiOjpcIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09ZT8odD1oZSgpLG51bGwhPT10Pyg1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaT1cIjpcIixfcisrKTooaT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWk/KG89aGUoKSxudWxsIT09bz8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh1PVwiOlwiLF9yKyspOih1PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dT8oYT1kZSgpLG51bGwhPT1hP2U9W2UsdCxyLGwsaSxvLHUsYV06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCI6OlwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1lPyh0PWhlKCksbnVsbCE9PXQ/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhpPVwiOlwiLF9yKyspOihpPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aT8obz1kZSgpLG51bGwhPT1vP2U9W2UsdCxyLGwsaSxvXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIjo6XCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWU/KHQ9aGUoKSxudWxsIT09dD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1kZSgpLG51bGwhPT1sP2U9W2UsdCxyLGxdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiOjpcIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09ZT8odD1kZSgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCI6OlwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1lPyh0PWhlKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixlPWhlKCksbnVsbCE9PWU/KFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyh0PVwiOjpcIixfcis9Mik6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGw9XCI6XCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1sPyhpPWhlKCksbnVsbCE9PWk/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIjpcIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PW8/KHU9aGUoKSxudWxsIT09dT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhhPVwiOlwiLF9yKyspOihhPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09YT8oYz1oZSgpLG51bGwhPT1jPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGg9XCI6XCIsX3IrKyk6KGg9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1oPyhkPWRlKCksbnVsbCE9PWQ/ZT1bZSx0LHIsbCxpLG8sdSxhLGMsaCxkXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixlPWhlKCksbnVsbCE9PWU/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1UKSk6KHQ9bnVsbCxfcj1UKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8oXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KHI9XCI6OlwiLF9yKz0yKToocj1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaT1cIjpcIixfcisrKTooaT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWk/KG89aGUoKSxudWxsIT09bz8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh1PVwiOlwiLF9yKyspOih1PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dT8oYT1oZSgpLG51bGwhPT1hPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGM9XCI6XCIsX3IrKyk6KGM9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1jPyhoPWRlKCksbnVsbCE9PWg/ZT1bZSx0LHIsbCxpLG8sdSxhLGMsaF06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsZT1oZSgpLG51bGwhPT1lPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9VCkpOih0PW51bGwsX3I9VCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1UKSk6KHI9bnVsbCxfcj1UKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8oXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGw9XCI6OlwiLF9yKz0yKToobD1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1sPyhpPWhlKCksbnVsbCE9PWk/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIjpcIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PW8/KHU9aGUoKSxudWxsIT09dT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhhPVwiOlwiLF9yKyspOihhPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09YT8oYz1kZSgpLG51bGwhPT1jP2U9W2UsdCxyLGwsaSxvLHUsYSxjXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixlPWhlKCksbnVsbCE9PWU/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1UKSk6KHQ9bnVsbCxfcj1UKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPVQpKToocj1udWxsLF9yPVQpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIjpcIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWw/KGk9aGUoKSxudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9VCkpOihsPW51bGwsX3I9VCksbD1udWxsIT09bD9sOlwiXCIsbnVsbCE9PWw/KFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhpPVwiOjpcIixfcis9Mik6KGk9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09aT8obz1oZSgpLG51bGwhPT1vPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHU9XCI6XCIsX3IrKyk6KHU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT11PyhhPWRlKCksbnVsbCE9PWE/ZT1bZSx0LHIsbCxpLG8sdSxhXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixlPWhlKCksbnVsbCE9PWU/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1UKSk6KHQ9bnVsbCxfcj1UKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPVQpKToocj1udWxsLF9yPVQpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIjpcIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWw/KGk9aGUoKSxudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9VCkpOihsPW51bGwsX3I9VCksbD1udWxsIT09bD9sOlwiXCIsbnVsbCE9PWw/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhpPVwiOlwiLF9yKyspOihpPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aT8obz1oZSgpLG51bGwhPT1vP2k9W2ksb106KGk9bnVsbCxfcj1UKSk6KGk9bnVsbCxfcj1UKSxpPW51bGwhPT1pP2k6XCJcIixudWxsIT09aT8oXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KG89XCI6OlwiLF9yKz0yKToobz1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1vPyh1PWRlKCksbnVsbCE9PXU/ZT1bZSx0LHIsbCxpLG8sdV06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsZT1oZSgpLG51bGwhPT1lPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9VCkpOih0PW51bGwsX3I9VCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1UKSk6KHI9bnVsbCxfcj1UKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KGw9XCI6XCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1sPyhpPWhlKCksbnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPVQpKToobD1udWxsLF9yPVQpLGw9bnVsbCE9PWw/bDpcIlwiLG51bGwhPT1sPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaT1cIjpcIixfcisrKTooaT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWk/KG89aGUoKSxudWxsIT09bz9pPVtpLG9dOihpPW51bGwsX3I9VCkpOihpPW51bGwsX3I9VCksaT1udWxsIT09aT9pOlwiXCIsbnVsbCE9PWk/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiOlwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bz8odT1oZSgpLG51bGwhPT11P289W28sdV06KG89bnVsbCxfcj1UKSk6KG89bnVsbCxfcj1UKSxvPW51bGwhPT1vP286XCJcIixudWxsIT09bz8oXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KHU9XCI6OlwiLF9yKz0yKToodT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT11PyhhPWhlKCksbnVsbCE9PWE/ZT1bZSx0LHIsbCxpLG8sdSxhXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixlPWhlKCksbnVsbCE9PWU/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1UKSk6KHQ9bnVsbCxfcj1UKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPVQpKToocj1udWxsLF9yPVQpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIjpcIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWw/KGk9aGUoKSxudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9VCkpOihsPW51bGwsX3I9VCksbD1udWxsIT09bD9sOlwiXCIsbnVsbCE9PWw/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhpPVwiOlwiLF9yKyspOihpPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aT8obz1oZSgpLG51bGwhPT1vP2k9W2ksb106KGk9bnVsbCxfcj1UKSk6KGk9bnVsbCxfcj1UKSxpPW51bGwhPT1pP2k6XCJcIixudWxsIT09aT8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KG89XCI6XCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1vPyh1PWhlKCksbnVsbCE9PXU/bz1bbyx1XToobz1udWxsLF9yPVQpKToobz1udWxsLF9yPVQpLG89bnVsbCE9PW8/bzpcIlwiLG51bGwhPT1vPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odT1cIjpcIixfcisrKToodT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXU/KGE9aGUoKSxudWxsIT09YT91PVt1LGFdOih1PW51bGwsX3I9VCkpOih1PW51bGwsX3I9VCksdT1udWxsIT09dT91OlwiXCIsbnVsbCE9PXU/KFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhhPVwiOjpcIixfcis9Mik6KGE9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09YT9lPVtlLHQscixsLGksbyx1LGFdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpKSkpKSkpKSkpKSkpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHlyLmhvc3RfdHlwZT1cIklQdjZcIixuLnN1YnN0cmluZyhfcixlKX0obSkpLG51bGw9PT1lJiYoX3I9bSksZX1mdW5jdGlvbiBoZSgpe3ZhciBlLHQsbixyLHM7cmV0dXJuIHM9X3IsZT11KCksbnVsbCE9PWU/KHQ9dSgpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhuPXUoKSxuPW51bGwhPT1uP246XCJcIixudWxsIT09bj8ocj11KCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/ZT1bZSx0LG4scl06KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSxlfWZ1bmN0aW9uIGRlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIGw9X3IsZT1oZSgpLG51bGwhPT1lPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbD09PWUmJihlPXBlKCkpLGV9ZnVuY3Rpb24gcGUoKXt2YXIgZSx0LHIsbCxpLG8sdSxhLGM7cmV0dXJuIGE9X3IsYz1fcixlPWZlKCksbnVsbCE9PWU/KDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PXQ/KHI9ZmUoKSxudWxsIT09cj8oNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiLlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09bD8oaT1mZSgpLG51bGwhPT1pPyg0Nj09PW4uY2hhckNvZGVBdChfcik/KG89XCIuXCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT1vPyh1PWZlKCksbnVsbCE9PXU/ZT1bZSx0LHIsbCxpLG8sdV06KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHlyLmhvc3RfdHlwZT1cIklQdjRcIixuLnN1YnN0cmluZyhfcixlKX0oYSkpLG51bGw9PT1lJiYoX3I9YSksZX1mdW5jdGlvbiBmZSgpe3ZhciBlLHQscixsO3JldHVybiBsPV9yLFwiMjVcIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiMjVcIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiMjVcIicpKSxudWxsIT09ZT8oL15bMC01XS8udGVzdChuLmNoYXJBdChfcikpPyh0PW4uY2hhckF0KF9yKSxfcisrKToodD1udWxsLDA9PT12ciYmcyhcIlswLTVdXCIpKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbD09PWUmJihsPV9yLDUwPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjJcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIyXCInKSksbnVsbCE9PWU/KC9eWzAtNF0vLnRlc3Qobi5jaGFyQXQoX3IpKT8odD1uLmNoYXJBdChfciksX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoXCJbMC00XVwiKSksbnVsbCE9PXQ/KHI9aSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGw9PT1lJiYobD1fciw0OT09PW4uY2hhckNvZGVBdChfcik/KGU9XCIxXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiMVwiJykpLG51bGwhPT1lPyh0PWkoKSxudWxsIT09dD8ocj1pKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbD09PWUmJihsPV9yLC9eWzEtOV0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbMS05XVwiKSksbnVsbCE9PWU/KHQ9aSgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsPT09ZSYmKGU9aSgpKSkpKSxlfWZ1bmN0aW9uIG1lKCl7dmFyIGUsdCxuLHIscyxsLG87cmV0dXJuIGw9X3Isbz1fcixlPWkoKSxlPW51bGwhPT1lP2U6XCJcIixudWxsIT09ZT8odD1pKCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KG49aSgpLG49bnVsbCE9PW4/bjpcIlwiLG51bGwhPT1uPyhyPWkoKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8ocz1pKCkscz1udWxsIT09cz9zOlwiXCIsbnVsbCE9PXM/ZT1bZSx0LG4scixzXTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3JldHVybiB0PXBhcnNlSW50KHQuam9pbihcIlwiKSkseXIucG9ydD10LHR9KGwsZSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBnZSgpe3ZhciBlLHQscixsO2ZvcihlPVtdLGw9X3IsNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiO1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsIT09dD8ocj1UZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1sKSk6KHQ9bnVsbCxfcj1sKTtudWxsIT09dDspZS5wdXNoKHQpLGw9X3IsNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiO1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsIT09dD8ocj1UZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1sKSk6KHQ9bnVsbCxfcj1sKTtyZXR1cm4gZX1mdW5jdGlvbiBUZSgpe3ZhciBlO3JldHVybiBlPV9lKCksbnVsbD09PWUmJihlPXZlKCksbnVsbD09PWUmJihlPUNlKCksbnVsbD09PWUmJihlPVNlKCksbnVsbD09PWUmJihlPUVlKCksbnVsbD09PWUmJihlPUFlKCksbnVsbD09PWUmJihlPXllKCkpKSkpKSksZX1mdW5jdGlvbiBfZSgpe3ZhciBlLHQscixsO3JldHVybiByPV9yLGw9X3IsXCJ0cmFuc3BvcnQ9XCI9PT1uLnN1YnN0cihfciwxMCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwxMCksX3IrPTEwKTooZT1udWxsLDA9PT12ciYmcygnXCJ0cmFuc3BvcnQ9XCInKSksbnVsbCE9PWU/KFwidWRwXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyh0PW4uc3Vic3RyKF9yLDMpLF9yKz0zKToodD1udWxsLDA9PT12ciYmcygnXCJ1ZHBcIicpKSxudWxsPT09dCYmKFwidGNwXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyh0PW4uc3Vic3RyKF9yLDMpLF9yKz0zKToodD1udWxsLDA9PT12ciYmcygnXCJ0Y3BcIicpKSxudWxsPT09dCYmKFwic2N0cFwiPT09bi5zdWJzdHIoX3IsNCkudG9Mb3dlckNhc2UoKT8odD1uLnN1YnN0cihfciw0KSxfcis9NCk6KHQ9bnVsbCwwPT09dnImJnMoJ1wic2N0cFwiJykpLG51bGw9PT10JiYoXCJ0bHNcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KHQ9bi5zdWJzdHIoX3IsMyksX3IrPTMpOih0PW51bGwsMD09PXZyJiZzKCdcInRsc1wiJykpLG51bGw9PT10JiYodD1JKCkpKSkpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci51cmlfcGFyYW1zfHwoeXIudXJpX3BhcmFtcz17fSkseXIudXJpX3BhcmFtcy50cmFuc3BvcnQ9dC50b0xvd2VyQ2FzZSgpfShyLGVbMV0pKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gdmUoKXt2YXIgZSx0LHIsbDtyZXR1cm4gcj1fcixsPV9yLFwidXNlcj1cIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcInVzZXI9XCInKSksbnVsbCE9PWU/KFwicGhvbmVcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KHQ9bi5zdWJzdHIoX3IsNSksX3IrPTUpOih0PW51bGwsMD09PXZyJiZzKCdcInBob25lXCInKSksbnVsbD09PXQmJihcImlwXCI9PT1uLnN1YnN0cihfciwyKS50b0xvd2VyQ2FzZSgpPyh0PW4uc3Vic3RyKF9yLDIpLF9yKz0yKToodD1udWxsLDA9PT12ciYmcygnXCJpcFwiJykpLG51bGw9PT10JiYodD1JKCkpKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudXJpX3BhcmFtc3x8KHlyLnVyaV9wYXJhbXM9e30pLHlyLnVyaV9wYXJhbXMudXNlcj10LnRvTG93ZXJDYXNlKCl9KHIsZVsxXSkpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBDZSgpe3ZhciBlLHQscixsO3JldHVybiByPV9yLGw9X3IsXCJtZXRob2Q9XCI9PT1uLnN1YnN0cihfciw3KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDcpLF9yKz03KTooZT1udWxsLDA9PT12ciYmcygnXCJtZXRob2Q9XCInKSksbnVsbCE9PWU/KHQ9YXQoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudXJpX3BhcmFtc3x8KHlyLnVyaV9wYXJhbXM9e30pLHlyLnVyaV9wYXJhbXMubWV0aG9kPXR9KHIsZVsxXSkpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBTZSgpe3ZhciBlLHQscixsO3JldHVybiByPV9yLGw9X3IsXCJ0dGw9XCI9PT1uLnN1YnN0cihfciw0KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDQpLF9yKz00KTooZT1udWxsLDA9PT12ciYmcygnXCJ0dGw9XCInKSksbnVsbCE9PWU/KHQ9Sm4oKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucGFyYW1zfHwoeXIucGFyYW1zPXt9KSx5ci5wYXJhbXMudHRsPXR9KHIsZVsxXSkpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBFZSgpe3ZhciBlLHQscixsO3JldHVybiByPV9yLGw9X3IsXCJtYWRkcj1cIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcIm1hZGRyPVwiJykpLG51bGwhPT1lPyh0PWxlKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnVyaV9wYXJhbXN8fCh5ci51cmlfcGFyYW1zPXt9KSx5ci51cmlfcGFyYW1zLm1hZGRyPXR9KHIsZVsxXSkpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBBZSgpe3ZhciBlLHQscixsLGksbztyZXR1cm4gbD1fcixpPV9yLFwibHJcIj09PW4uc3Vic3RyKF9yLDIpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMiksX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcImxyXCInKSksbnVsbCE9PWU/KG89X3IsNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsIT09dD8ocj1JKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPW8pKToodD1udWxsLF9yPW8pLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIudXJpX3BhcmFtc3x8KHlyLnVyaV9wYXJhbXM9e30pLHlyLnVyaV9wYXJhbXMubHI9dm9pZCAwfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIHllKCl7dmFyIGUsdCxyLGwsaSxvO3JldHVybiBsPV9yLGk9X3IsZT1SZSgpLG51bGwhPT1lPyhvPV9yLDYxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbCE9PXQ/KHI9YmUoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bykpOih0PW51bGwsX3I9byksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQsbil7eXIudXJpX3BhcmFtc3x8KHlyLnVyaV9wYXJhbXM9e30pLG49XCJ1bmRlZmluZWRcIj09dHlwZW9mIG4/dm9pZCAwOm5bMV0seXIudXJpX3BhcmFtc1t0LnRvTG93ZXJDYXNlKCldPW59KGwsZVswXSxlWzFdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIFJlKCl7dmFyIGUsdCxuO2lmKG49X3IsdD1JZSgpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1JZSgpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5qb2luKFwiXCIpfShuLGUpKSxudWxsPT09ZSYmKF9yPW4pLGV9ZnVuY3Rpb24gYmUoKXt2YXIgZSx0LG47aWYobj1fcix0PUllKCksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PUllKCk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3JldHVybiB0LmpvaW4oXCJcIil9KG4sZSkpLG51bGw9PT1lJiYoX3I9biksZX1mdW5jdGlvbiBJZSgpe3ZhciBlO3JldHVybiBlPXdlKCksbnVsbD09PWUmJihlPWcoKSxudWxsPT09ZSYmKGU9XygpKSksZX1mdW5jdGlvbiB3ZSgpe3ZhciBlO3JldHVybiA5MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCJbXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiW1wiJykpLG51bGw9PT1lJiYoOTM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiXVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIl1cIicpKSxudWxsPT09ZSYmKDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIi9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbD09PWUmJig1OD09PW4uY2hhckNvZGVBdChfcik/KGU9XCI6XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT1lJiYoMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09ZSYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIitcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PWUmJigzNj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIkXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpKSkpKSkpLGV9ZnVuY3Rpb24gTmUoKXt2YXIgZSx0LHIsbCxpLG8sdTtpZihvPV9yLDYzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbCE9PWUpaWYodD1EZSgpLG51bGwhPT10KXtmb3Iocj1bXSx1PV9yLDM4PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIiZcIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbCE9PWw/KGk9RGUoKSxudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9dSkpOihsPW51bGwsX3I9dSk7bnVsbCE9PWw7KXIucHVzaChsKSx1PV9yLDM4PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIiZcIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbCE9PWw/KGk9RGUoKSxudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9dSkpOihsPW51bGwsX3I9dSk7bnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9byl9ZWxzZSBlPW51bGwsX3I9bztlbHNlIGU9bnVsbCxfcj1vO3JldHVybiBlfWZ1bmN0aW9uIERlKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9T2UoKSxudWxsIT09ZT8oNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsIT09dD8ocj14ZSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQsbil7dD10LmpvaW4oXCJcIikudG9Mb3dlckNhc2UoKSxuPW4uam9pbihcIlwiKSx5ci51cmlfaGVhZGVyc3x8KHlyLnVyaV9oZWFkZXJzPXt9KSx5ci51cmlfaGVhZGVyc1t0XT95ci51cmlfaGVhZGVyc1t0XS5wdXNoKG4pOnlyLnVyaV9oZWFkZXJzW3RdPVtuXX0obCxlWzBdLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gT2UoKXt2YXIgZSx0O2lmKHQ9VWUoKSxudWxsPT09dCYmKHQ9ZygpLG51bGw9PT10JiYodD1fKCkpKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9VWUoKSxudWxsPT09dCYmKHQ9ZygpLG51bGw9PT10JiYodD1fKCkpKTtlbHNlIGU9bnVsbDtyZXR1cm4gZX1mdW5jdGlvbiB4ZSgpe3ZhciBlLHQ7Zm9yKGU9W10sdD1VZSgpLG51bGw9PT10JiYodD1nKCksbnVsbD09PXQmJih0PV8oKSkpO251bGwhPT10OyllLnB1c2godCksdD1VZSgpLG51bGw9PT10JiYodD1nKCksbnVsbD09PXQmJih0PV8oKSkpO3JldHVybiBlfWZ1bmN0aW9uIFVlKCl7dmFyIGU7cmV0dXJuIDkxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIltcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJbXCInKSksbnVsbD09PWUmJig5Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCJdXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiXVwiJykpLG51bGw9PT1lJiYoNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiL1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsPT09ZSYmKDYzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbD09PWUmJig1OD09PW4uY2hhckNvZGVBdChfcik/KGU9XCI6XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT1lJiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiK1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09ZSYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiRcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIkXCInKSkpKSkpKSksZX1mdW5jdGlvbiBNZSgpe3ZhciBlO3JldHVybiBlPWN0KCksbnVsbD09PWUmJihlPVBlKCkpLGV9ZnVuY3Rpb24gUGUoKXt2YXIgZSx0LG4scixzLGw7cmV0dXJuIGw9X3IsZT1hdCgpLG51bGwhPT1lPyh0PWQoKSxudWxsIT09dD8obj1xZSgpLG51bGwhPT1uPyhyPWQoKSxudWxsIT09cj8ocz1aZSgpLG51bGwhPT1zP2U9W2UsdCxuLHIsc106KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIHFlKCl7dmFyIGU7cmV0dXJuIGU9JCgpLG51bGw9PT1lJiYoZT1MZSgpKSxlfWZ1bmN0aW9uIExlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIGw9X3IsZT1KZSgpLG51bGwhPT1lPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWtlKCksbnVsbD09PXImJihyPUdlKCkpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24ga2UoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGU9SGUoKSxudWxsPT09ZSYmKGU9RmUoKSksbnVsbCE9PWU/KGk9X3IsNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiP1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsIT09dD8ocj1RZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1pKSk6KHQ9bnVsbCxfcj1pKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBIZSgpe3ZhciBlLHQscixsO3JldHVybiBsPV9yLFwiLy9cIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiLy9cIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiLy9cIicpKSxudWxsIT09ZT8odD1LZSgpLG51bGwhPT10PyhyPUZlKCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBGZSgpe3ZhciBlLHQscjtyZXR1cm4gcj1fciw0Nz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIvXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGwhPT1lPyh0PUJlKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gR2UoKXt2YXIgZSx0LG4scjtpZihyPV9yLGU9V2UoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbj1qZSgpO251bGwhPT1uOyl0LnB1c2gobiksbj1qZSgpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKX1lbHNlIGU9bnVsbCxfcj1yO3JldHVybiBlfWZ1bmN0aW9uIGplKCl7dmFyIGU7cmV0dXJuIGU9bSgpLG51bGw9PT1lJiYoZT1nKCksbnVsbD09PWUmJihlPV8oKSkpLGV9ZnVuY3Rpb24gV2UoKXt2YXIgZTtyZXR1cm4gZT1nKCksbnVsbD09PWUmJihlPV8oKSxudWxsPT09ZSYmKDU5PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjtcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbD09PWUmJig2Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCI/XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGw9PT1lJiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiOlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09ZSYmKDY0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIkBcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbD09PWUmJigzOD09PW4uY2hhckNvZGVBdChfcik/KGU9XCImXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT1lJiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiPVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09ZSYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIitcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PWUmJigzNj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIkXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpLG51bGw9PT1lJiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiLFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIixcIicpKSkpKSkpKSkpKSksZX1mdW5jdGlvbiBCZSgpe3ZhciBlLHQscixsLGksbztpZihpPV9yLGU9emUoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbz1fciw0Nz09PW4uY2hhckNvZGVBdChfcik/KHI9XCIvXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGwhPT1yPyhsPXplKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT1yOyl0LnB1c2gociksbz1fciw0Nz09PW4uY2hhckNvZGVBdChfcik/KHI9XCIvXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGwhPT1yPyhsPXplKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO3JldHVybiBlfWZ1bmN0aW9uIHplKCl7dmFyIGUsdCxyLGwsaSxvO2ZvcihpPV9yLGU9W10sdD1ZZSgpO251bGwhPT10OyllLnB1c2godCksdD1ZZSgpO2lmKG51bGwhPT1lKXtmb3IodD1bXSxvPV9yLDU5PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjtcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbCE9PXI/KGw9VmUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXI7KXQucHVzaChyKSxvPV9yLDU5PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjtcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbCE9PXI/KGw9VmUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7cmV0dXJuIGV9ZnVuY3Rpb24gVmUoKXt2YXIgZSx0O2ZvcihlPVtdLHQ9WWUoKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9WWUoKTtyZXR1cm4gZX1mdW5jdGlvbiBZZSgpe3ZhciBlO3JldHVybiBlPWcoKSxudWxsPT09ZSYmKGU9XygpLG51bGw9PT1lJiYoNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiOlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsPT09ZSYmKDY0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIkBcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbD09PWUmJigzOD09PW4uY2hhckNvZGVBdChfcik/KGU9XCImXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT1lJiYoNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiPVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsPT09ZSYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIitcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PWUmJigzNj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIkXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpLG51bGw9PT1lJiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiLFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIixcIicpKSkpKSkpKSkpLGV9ZnVuY3Rpb24gSmUoKXt2YXIgZSx0LHIsbCx1O2lmKGw9X3IsdT1fcixlPW8oKSxudWxsIT09ZSl7Zm9yKHQ9W10scj1vKCksbnVsbD09PXImJihyPWkoKSxudWxsPT09ciYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIitcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXImJig0NT09PW4uY2hhckNvZGVBdChfcik/KHI9XCItXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT1yJiYoNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSkpKSk7bnVsbCE9PXI7KXQucHVzaChyKSxyPW8oKSxudWxsPT09ciYmKHI9aSgpLG51bGw9PT1yJiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiK1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09ciYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi1cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXImJig0Nj09PW4uY2hhckNvZGVBdChfcik/KHI9XCIuXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpKSkpKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9dSl9ZWxzZSBlPW51bGwsX3I9dTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLnNjaGVtZT1uLnN1YnN0cmluZyhfcixlKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBLZSgpe3ZhciBlO3JldHVybiBlPSRlKCksbnVsbD09PWUmJihlPVhlKCkpLGV9ZnVuY3Rpb24gJGUoKXt2YXIgZSx0LHIsbDtyZXR1cm4gcj1fcixsPV9yLGU9ZWUoKSxudWxsIT09ZT8oNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiQFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZT1udWxsIT09ZT9lOlwiXCIsbnVsbCE9PWU/KHQ9c2UoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZT1udWxsIT09ZT9lOlwiXCJ9ZnVuY3Rpb24gWGUoKXt2YXIgZSx0O2lmKHQ9ZygpLG51bGw9PT10JiYodD1fKCksbnVsbD09PXQmJigzNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIkXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpLG51bGw9PT10JiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIixcIicpKSxudWxsPT09dCYmKDU5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjtcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbD09PXQmJig1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT10JiYoNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiQFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsPT09dCYmKDM4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiZcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PXQmJig2MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSkpKSkpKSkpKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9ZygpLG51bGw9PT10JiYodD1fKCksbnVsbD09PXQmJigzNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIkXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJFwiJykpLG51bGw9PT10JiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIixcIicpKSxudWxsPT09dCYmKDU5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjtcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbD09PXQmJig1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT10JiYoNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiQFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsPT09dCYmKDM4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiZcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PXQmJig2MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSkpKSkpKSkpKTtlbHNlIGU9bnVsbDtyZXR1cm4gZX1mdW5jdGlvbiBRZSgpe3ZhciBlLHQ7Zm9yKGU9W10sdD1qZSgpO251bGwhPT10OyllLnB1c2godCksdD1qZSgpO3JldHVybiBlfWZ1bmN0aW9uIFplKCl7dmFyIGUsdCxyLGwsbyx1LGEsYztpZihhPV9yLGM9X3IsXCJzaXBcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcIlNJUFwiJykpLG51bGwhPT1lKWlmKDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbCE9PXQpe2lmKGw9aSgpLG51bGwhPT1sKWZvcihyPVtdO251bGwhPT1sOylyLnB1c2gobCksbD1pKCk7ZWxzZSByPW51bGw7aWYobnVsbCE9PXIpaWYoNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiLlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09bCl7aWYodT1pKCksbnVsbCE9PXUpZm9yKG89W107bnVsbCE9PXU7KW8ucHVzaCh1KSx1PWkoKTtlbHNlIG89bnVsbDtudWxsIT09bz9lPVtlLHQscixsLG9dOihlPW51bGwsX3I9Yyl9ZWxzZSBlPW51bGwsX3I9YztlbHNlIGU9bnVsbCxfcj1jfWVsc2UgZT1udWxsLF9yPWM7ZWxzZSBlPW51bGwsX3I9YztyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLnNpcF92ZXJzaW9uPW4uc3Vic3RyaW5nKF9yLGUpfShhKSksbnVsbD09PWUmJihfcj1hKSxlfWZ1bmN0aW9uIGV0KCl7dmFyIGU7cmV0dXJuXCJJTlZJVEVcIj09PW4uc3Vic3RyKF9yLDYpPyhlPVwiSU5WSVRFXCIsX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcIklOVklURVwiJykpLGV9ZnVuY3Rpb24gdHQoKXt2YXIgZTtyZXR1cm5cIkFDS1wiPT09bi5zdWJzdHIoX3IsMyk/KGU9XCJBQ0tcIixfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wiQUNLXCInKSksZX1mdW5jdGlvbiBudCgpe3ZhciBlO3JldHVyblwiT1BUSU9OU1wiPT09bi5zdWJzdHIoX3IsNyk/KGU9XCJPUFRJT05TXCIsX3IrPTcpOihlPW51bGwsMD09PXZyJiZzKCdcIk9QVElPTlNcIicpKSxlfWZ1bmN0aW9uIHJ0KCl7dmFyIGU7cmV0dXJuXCJCWUVcIj09PW4uc3Vic3RyKF9yLDMpPyhlPVwiQllFXCIsX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcIkJZRVwiJykpLGV9ZnVuY3Rpb24gc3QoKXt2YXIgZTtyZXR1cm5cIkNBTkNFTFwiPT09bi5zdWJzdHIoX3IsNik/KGU9XCJDQU5DRUxcIixfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wiQ0FOQ0VMXCInKSksZX1mdW5jdGlvbiBsdCgpe3ZhciBlO3JldHVyblwiUkVHSVNURVJcIj09PW4uc3Vic3RyKF9yLDgpPyhlPVwiUkVHSVNURVJcIixfcis9OCk6KGU9bnVsbCwwPT09dnImJnMoJ1wiUkVHSVNURVJcIicpKSxlfWZ1bmN0aW9uIGl0KCl7dmFyIGU7cmV0dXJuXCJTVUJTQ1JJQkVcIj09PW4uc3Vic3RyKF9yLDkpPyhlPVwiU1VCU0NSSUJFXCIsX3IrPTkpOihlPW51bGwsMD09PXZyJiZzKCdcIlNVQlNDUklCRVwiJykpLGV9ZnVuY3Rpb24gb3QoKXt2YXIgZTtyZXR1cm5cIk5PVElGWVwiPT09bi5zdWJzdHIoX3IsNik/KGU9XCJOT1RJRllcIixfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wiTk9USUZZXCInKSksZX1mdW5jdGlvbiB1dCgpe3ZhciBlO3JldHVyblwiUkVGRVJcIj09PW4uc3Vic3RyKF9yLDUpPyhlPVwiUkVGRVJcIixfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiUkVGRVJcIicpKSxlfWZ1bmN0aW9uIGF0KCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPWV0KCksbnVsbD09PWUmJihlPXR0KCksbnVsbD09PWUmJihlPW50KCksbnVsbD09PWUmJihlPXJ0KCksbnVsbD09PWUmJihlPXN0KCksbnVsbD09PWUmJihlPWx0KCksbnVsbD09PWUmJihlPWl0KCksbnVsbD09PWUmJihlPW90KCksbnVsbD09PWUmJihlPXV0KCksbnVsbD09PWUmJihlPUkoKSkpKSkpKSkpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHlyLm1ldGhvZD1uLnN1YnN0cmluZyhfcixlKSx5ci5tZXRob2R9KHQpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gY3QoKXt2YXIgZSx0LG4scixzLGw7cmV0dXJuIGw9X3IsZT1aZSgpLG51bGwhPT1lPyh0PWQoKSxudWxsIT09dD8obj1odCgpLG51bGwhPT1uPyhyPWQoKSxudWxsIT09cj8ocz1wdCgpLG51bGwhPT1zP2U9W2UsdCxuLHIsc106KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIGh0KCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPWR0KCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuc3RhdHVzX2NvZGU9cGFyc2VJbnQodC5qb2luKFwiXCIpKX0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIGR0KCl7dmFyIGUsdCxuLHI7cmV0dXJuIHI9X3IsZT1pKCksbnVsbCE9PWU/KHQ9aSgpLG51bGwhPT10PyhuPWkoKSxudWxsIT09bj9lPVtlLHQsbl06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIHB0KCl7dmFyIGUsdCxyO2ZvcihyPV9yLGU9W10sdD1tKCksbnVsbD09PXQmJih0PWcoKSxudWxsPT09dCYmKHQ9XygpLG51bGw9PT10JiYodD15KCksbnVsbD09PXQmJih0PVIoKSxudWxsPT09dCYmKHQ9ZCgpLG51bGw9PT10JiYodD1wKCkpKSkpKSk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PW0oKSxudWxsPT09dCYmKHQ9ZygpLG51bGw9PT10JiYodD1fKCksbnVsbD09PXQmJih0PXkoKSxudWxsPT09dCYmKHQ9UigpLG51bGw9PT10JiYodD1kKCksbnVsbD09PXQmJih0PXAoKSkpKSkpKTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLnJlYXNvbl9waHJhc2U9bi5zdWJzdHJpbmcoX3IsZSl9KHIpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gZnQoKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPVl0KCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9WXQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49aygpLG51bGwhPT1uPyhyPVl0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIG10KCl7dmFyIGUsdCxyLGwsaSxvO3JldHVybiBsPV9yLGk9X3IsZT1EKCksbnVsbCE9PWU/KG89X3IsNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiQFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsIT09dD8ocj1EKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPW8pKToodD1udWxsLF9yPW8pLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXI9bi5zdWJzdHJpbmcoX3IsZSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gZ3QoKXt2YXIgZSx0LG4scixzLGwsaTtpZihzPV9yLGU9TygpLG51bGw9PT1lKWlmKGw9X3IsZT1UdCgpLG51bGwhPT1lKXtmb3IodD1bXSxpPV9yLG49aygpLG51bGwhPT1uPyhyPVR0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT1uOyl0LnB1c2gobiksaT1fcixuPWsoKSxudWxsIT09bj8ocj1UdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsXG5fcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dmFyIHQsbjtmb3Iobj15ci5tdWx0aV9oZWFkZXIubGVuZ3RoLHQ9MDtuPnQ7dCsrKWlmKG51bGw9PT15ci5tdWx0aV9oZWFkZXJbdF0ucGFyc2VkKXt5cj1udWxsO2JyZWFrfXlyPW51bGwhPT15cj95ci5tdWx0aV9oZWFkZXI6LTF9KHMpKSxudWxsPT09ZSYmKF9yPXMpLGV9ZnVuY3Rpb24gVHQoKXt2YXIgZSx0LG4scixzLGwsaTtpZihzPV9yLGw9X3IsZT1LKCksbnVsbD09PWUmJihlPV90KCkpLG51bGwhPT1lKXtmb3IodD1bXSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPUN0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT1uOyl0LnB1c2gobiksaT1fcixuPUgoKSxudWxsIT09bj8ocj1DdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3ZhciB0O3lyLm11bHRpX2hlYWRlcnx8KHlyLm11bHRpX2hlYWRlcj1bXSk7dHJ5e3Q9bmV3IEFyKHlyLnVyaSx5ci5kaXNwbGF5X25hbWUseXIucGFyYW1zKSxkZWxldGUgeXIudXJpLGRlbGV0ZSB5ci5kaXNwbGF5X25hbWUsZGVsZXRlIHlyLnBhcmFtc31jYXRjaChuKXt0PW51bGx9eXIubXVsdGlfaGVhZGVyLnB1c2goe3Bvc3NpdGlvbjpfcixvZmZzZXQ6ZSxwYXJzZWQ6dH0pfShzKSksbnVsbD09PWUmJihfcj1zKSxlfWZ1bmN0aW9uIF90KCl7dmFyIGUsdCxuLHIscztyZXR1cm4gcz1fcixlPXZ0KCksZT1udWxsIT09ZT9lOlwiXCIsbnVsbCE9PWU/KHQ9TCgpLG51bGwhPT10PyhuPSQoKSxudWxsIT09bj8ocj1xKCksbnVsbCE9PXI/ZT1bZSx0LG4scl06KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSxlfWZ1bmN0aW9uIHZ0KCl7dmFyIGUsdCxyLHMsbCxpLG87aWYobD1fcixpPV9yLGU9SSgpLG51bGwhPT1lKXtmb3IodD1bXSxvPV9yLHI9digpLG51bGwhPT1yPyhzPUkoKSxudWxsIT09cz9yPVtyLHNdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXI7KXQucHVzaChyKSxvPV9yLHI9digpLG51bGwhPT1yPyhzPUkoKSxudWxsIT09cz9yPVtyLHNdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7cmV0dXJuIG51bGw9PT1lJiYoZT16KCkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3Q9bi5zdWJzdHJpbmcoX3IsZSkudHJpbSgpLCdcIic9PT10WzBdJiYodD10LnN1YnN0cmluZygxLHQubGVuZ3RoLTEpKSx5ci5kaXNwbGF5X25hbWU9dH0obCxlKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEN0KCl7dmFyIGU7cmV0dXJuIGU9U3QoKSxudWxsPT09ZSYmKGU9RXQoKSxudWxsPT09ZSYmKGU9UnQoKSkpLGV9ZnVuY3Rpb24gU3QoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJxXCI9PT1uLnN1YnN0cihfciwxKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDEpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcInFcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9eXQoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5wYXJhbXN8fCh5ci5wYXJhbXM9e30pLHlyLnBhcmFtcy5xPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBFdCgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcImV4cGlyZXNcIj09PW4uc3Vic3RyKF9yLDcpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNyksX3IrPTcpOihlPW51bGwsMD09PXZyJiZzKCdcImV4cGlyZXNcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9QXQoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5wYXJhbXN8fCh5ci5wYXJhbXM9e30pLHlyLnBhcmFtcy5leHBpcmVzPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBBdCgpe3ZhciBlLHQsbjtpZihuPV9yLHQ9aSgpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1pKCk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3JldHVybiBwYXJzZUludCh0LmpvaW4oXCJcIikpfShuLGUpKSxudWxsPT09ZSYmKF9yPW4pLGV9ZnVuY3Rpb24geXQoKXt2YXIgZSx0LHIsbCxvLHUsYSxjO3JldHVybiB1PV9yLGE9X3IsNDg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiMFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjBcIicpKSxudWxsIT09ZT8oYz1fciw0Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIuXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT10PyhyPWkoKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8obD1pKCksbD1udWxsIT09bD9sOlwiXCIsbnVsbCE9PWw/KG89aSgpLG89bnVsbCE9PW8/bzpcIlwiLG51bGwhPT1vP3Q9W3QscixsLG9dOih0PW51bGwsX3I9YykpOih0PW51bGwsX3I9YykpOih0PW51bGwsX3I9YykpOih0PW51bGwsX3I9YyksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWEpKTooZT1udWxsLF9yPWEpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VGbG9hdChuLnN1YnN0cmluZyhfcixlKSl9KHUpKSxudWxsPT09ZSYmKF9yPXUpLGV9ZnVuY3Rpb24gUnQoKXt2YXIgZSx0LG4scixzLGw7cmV0dXJuIHI9X3Iscz1fcixlPUkoKSxudWxsIT09ZT8obD1fcix0PVUoKSxudWxsIT09dD8obj1idCgpLG51bGwhPT1uP3Q9W3Qsbl06KHQ9bnVsbCxfcj1sKSk6KHQ9bnVsbCxfcj1sKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cyksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCxuKXt5ci5wYXJhbXN8fCh5ci5wYXJhbXM9e30pLG49XCJ1bmRlZmluZWRcIj09dHlwZW9mIG4/dm9pZCAwOm5bMV0seXIucGFyYW1zW3QudG9Mb3dlckNhc2UoKV09bn0ocixlWzBdLGVbMV0pKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gYnQoKXt2YXIgZTtyZXR1cm4gZT1JKCksbnVsbD09PWUmJihlPWxlKCksbnVsbD09PWUmJihlPXooKSkpLGV9ZnVuY3Rpb24gSXQoKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPXd0KCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9TnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPU50KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIHd0KCl7dmFyIGU7cmV0dXJuXCJyZW5kZXJcIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcInJlbmRlclwiJykpLG51bGw9PT1lJiYoXCJzZXNzaW9uXCI9PT1uLnN1YnN0cihfciw3KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDcpLF9yKz03KTooZT1udWxsLDA9PT12ciYmcygnXCJzZXNzaW9uXCInKSksbnVsbD09PWUmJihcImljb25cIj09PW4uc3Vic3RyKF9yLDQpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNCksX3IrPTQpOihlPW51bGwsMD09PXZyJiZzKCdcImljb25cIicpKSxudWxsPT09ZSYmKFwiYWxlcnRcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcImFsZXJ0XCInKSksbnVsbD09PWUmJihlPUkoKSkpKSksZX1mdW5jdGlvbiBOdCgpe3ZhciBlO3JldHVybiBlPUR0KCksbnVsbD09PWUmJihlPVJ0KCkpLGV9ZnVuY3Rpb24gRHQoKXt2YXIgZSx0LHIsbDtyZXR1cm4gbD1fcixcImhhbmRsaW5nXCI9PT1uLnN1YnN0cihfciw4KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDgpLF9yKz04KTooZT1udWxsLDA9PT12ciYmcygnXCJoYW5kbGluZ1wiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8oXCJvcHRpb25hbFwiPT09bi5zdWJzdHIoX3IsOCkudG9Mb3dlckNhc2UoKT8ocj1uLnN1YnN0cihfciw4KSxfcis9OCk6KHI9bnVsbCwwPT09dnImJnMoJ1wib3B0aW9uYWxcIicpKSxudWxsPT09ciYmKFwicmVxdWlyZWRcIj09PW4uc3Vic3RyKF9yLDgpLnRvTG93ZXJDYXNlKCk/KHI9bi5zdWJzdHIoX3IsOCksX3IrPTgpOihyPW51bGwsMD09PXZyJiZzKCdcInJlcXVpcmVkXCInKSksbnVsbD09PXImJihyPUkoKSkpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gT3QoKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPUkoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPWsoKSxudWxsIT09bj8ocj1JKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPWsoKSxudWxsIT09bj8ocj1JKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIHh0KCl7dmFyIGUsdCxuO2lmKG49X3IsdD1pKCksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWkoKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXI9cGFyc2VJbnQodC5qb2luKFwiXCIpKX0obixlKSksbnVsbD09PWUmJihfcj1uKSxlfWZ1bmN0aW9uIFV0KCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPU10KCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyPW4uc3Vic3RyaW5nKF9yLGUpfSh0KSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIE10KCl7dmFyIGUsdCxuLHIscyxsLGksbztpZihpPV9yLGU9UHQoKSxudWxsIT09ZSlpZih0PXgoKSxudWxsIT09dClpZihuPUZ0KCksbnVsbCE9PW4pe2ZvcihyPVtdLG89X3Iscz1IKCksbnVsbCE9PXM/KGw9R3QoKSxudWxsIT09bD9zPVtzLGxdOihzPW51bGwsX3I9bykpOihzPW51bGwsX3I9byk7bnVsbCE9PXM7KXIucHVzaChzKSxvPV9yLHM9SCgpLG51bGwhPT1zPyhsPUd0KCksbnVsbCE9PWw/cz1bcyxsXToocz1udWxsLF9yPW8pKToocz1udWxsLF9yPW8pO251bGwhPT1yP2U9W2UsdCxuLHJdOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtlbHNlIGU9bnVsbCxfcj1pO2Vsc2UgZT1udWxsLF9yPWk7cmV0dXJuIGV9ZnVuY3Rpb24gUHQoKXt2YXIgZTtyZXR1cm4gZT1xdCgpLG51bGw9PT1lJiYoZT1MdCgpKSxlfWZ1bmN0aW9uIHF0KCl7dmFyIGU7cmV0dXJuXCJ0ZXh0XCI9PT1uLnN1YnN0cihfciw0KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDQpLF9yKz00KTooZT1udWxsLDA9PT12ciYmcygnXCJ0ZXh0XCInKSksbnVsbD09PWUmJihcImltYWdlXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJpbWFnZVwiJykpLG51bGw9PT1lJiYoXCJhdWRpb1wiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiYXVkaW9cIicpKSxudWxsPT09ZSYmKFwidmlkZW9cIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcInZpZGVvXCInKSksbnVsbD09PWUmJihcImFwcGxpY2F0aW9uXCI9PT1uLnN1YnN0cihfciwxMSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwxMSksX3IrPTExKTooZT1udWxsLDA9PT12ciYmcygnXCJhcHBsaWNhdGlvblwiJykpLG51bGw9PT1lJiYoZT1rdCgpKSkpKSksZX1mdW5jdGlvbiBMdCgpe3ZhciBlO3JldHVyblwibWVzc2FnZVwiPT09bi5zdWJzdHIoX3IsNykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw3KSxfcis9Nyk6KGU9bnVsbCwwPT09dnImJnMoJ1wibWVzc2FnZVwiJykpLG51bGw9PT1lJiYoXCJtdWx0aXBhcnRcIj09PW4uc3Vic3RyKF9yLDkpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOSksX3IrPTkpOihlPW51bGwsMD09PXZyJiZzKCdcIm11bHRpcGFydFwiJykpLG51bGw9PT1lJiYoZT1rdCgpKSksZX1mdW5jdGlvbiBrdCgpe3ZhciBlO3JldHVybiBlPUkoKSxudWxsPT09ZSYmKGU9SHQoKSksZX1mdW5jdGlvbiBIdCgpe3ZhciBlLHQscjtyZXR1cm4gcj1fcixcIngtXCI9PT1uLnN1YnN0cihfciwyKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDIpLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCJ4LVwiJykpLG51bGwhPT1lPyh0PUkoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBGdCgpe3ZhciBlO3JldHVybiBlPWt0KCksbnVsbD09PWUmJihlPUkoKSksZX1mdW5jdGlvbiBHdCgpe3ZhciBlLHQsbixyO3JldHVybiByPV9yLGU9SSgpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8obj1qdCgpLG51bGwhPT1uP2U9W2UsdCxuXTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24ganQoKXt2YXIgZTtyZXR1cm4gZT1JKCksbnVsbD09PWUmJihlPXooKSksZX1mdW5jdGlvbiBXdCgpe3ZhciBlLHQsbixyO3JldHVybiByPV9yLGU9QnQoKSxudWxsIT09ZT8odD12KCksbnVsbCE9PXQ/KG49YXQoKSxudWxsIT09bj9lPVtlLHQsbl06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIEJ0KCl7dmFyIGUsdCxuO2lmKG49X3IsdD1pKCksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWkoKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudmFsdWU9cGFyc2VJbnQodC5qb2luKFwiXCIpKX0obixlKSksbnVsbD09PWUmJihfcj1uKSxlfWZ1bmN0aW9uIHp0KCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPUF0KCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXI9dH0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIFZ0KCl7dmFyIGUsdCxuLHIscyxsLGk7aWYocz1fcixsPV9yLGU9WXQoKSxudWxsIT09ZSl7Zm9yKHQ9W10saT1fcixuPUgoKSxudWxsIT09bj8ocj1SdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09bjspdC5wdXNoKG4pLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9UnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLmV2ZW50PXQuam9pbihcIlwiKS50b0xvd2VyQ2FzZSgpfShzLGVbMF0pKSxudWxsPT09ZSYmKF9yPXMpLGV9ZnVuY3Rpb24gWXQoKXt2YXIgZSx0LHIsbCxpLG87aWYoaT1fcixlPXcoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbz1fciw0Nj09PW4uY2hhckNvZGVBdChfcik/KHI9XCIuXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT1yPyhsPXcoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXI7KXQucHVzaChyKSxvPV9yLDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi5cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PXI/KGw9dygpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gZX1mdW5jdGlvbiBKdCgpe3ZhciBlLHQsbixyLHMsbCxpO2lmKHM9X3IsbD1fcixlPUsoKSxudWxsPT09ZSYmKGU9X3QoKSksbnVsbCE9PWUpe2Zvcih0PVtdLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9S3QoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PW47KXQucHVzaChuKSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPUt0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dmFyIHQ9eXIudGFnO3RyeXt5cj1uZXcgQXIoeXIudXJpLHlyLmRpc3BsYXlfbmFtZSx5ci5wYXJhbXMpLHQmJnlyLnNldFBhcmFtKFwidGFnXCIsdCl9Y2F0Y2gobil7eXI9LTF9fShzKSksbnVsbD09PWUmJihfcj1zKSxlfWZ1bmN0aW9uIEt0KCl7dmFyIGU7cmV0dXJuIGU9JHQoKSxudWxsPT09ZSYmKGU9UnQoKSksZX1mdW5jdGlvbiAkdCgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcInRhZ1wiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1widGFnXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPUkoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci50YWc9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIFh0KCl7dmFyIGUsdCxuO2lmKG49X3IsdD1pKCksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWkoKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXI9cGFyc2VJbnQodC5qb2luKFwiXCIpKX0obixlKSksbnVsbD09PWUmJihfcj1uKSxlfWZ1bmN0aW9uIFF0KCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPUF0KCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXI9dH0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIFp0KCl7dmFyIGUsdCxuLHIscyxsLGksbyx1LGE7Zm9yKG89X3IsdT1fcixlPVtdLHQ9dnQoKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9dnQoKTtpZihudWxsIT09ZSlpZih0PUwoKSxudWxsIT09dClpZihuPSQoKSxudWxsIT09bilpZihyPXEoKSxudWxsIT09cil7Zm9yKHM9W10sYT1fcixsPUgoKSxudWxsIT09bD8oaT1SdCgpLG51bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj1hKSk6KGw9bnVsbCxfcj1hKTtudWxsIT09bDspcy5wdXNoKGwpLGE9X3IsbD1IKCksbnVsbCE9PWw/KGk9UnQoKSxudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9YSkpOihsPW51bGwsX3I9YSk7bnVsbCE9PXM/ZT1bZSx0LG4scixzXTooZT1udWxsLF9yPXUpfWVsc2UgZT1udWxsLF9yPXU7ZWxzZSBlPW51bGwsX3I9dTtlbHNlIGU9bnVsbCxfcj11O2Vsc2UgZT1udWxsLF9yPXU7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt0cnl7eXI9bmV3IEFyKHlyLnVyaSx5ci5kaXNwbGF5X25hbWUseXIucGFyYW1zKX1jYXRjaCh0KXt5cj0tMX19KG8pKSxudWxsPT09ZSYmKF9yPW8pLGV9ZnVuY3Rpb24gZW4oKXt2YXIgZTtyZXR1cm4gZT10bigpfWZ1bmN0aW9uIHRuKCl7dmFyIGUsdCxyLGwsaSxvLHUsYTtpZih1PV9yLFwiZGlnZXN0XCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJEaWdlc3RcIicpKSxudWxsIT09ZSlpZih0PXYoKSxudWxsIT09dClpZihyPXNuKCksbnVsbCE9PXIpe2ZvcihsPVtdLGE9X3IsaT1rKCksbnVsbCE9PWk/KG89c24oKSxudWxsIT09bz9pPVtpLG9dOihpPW51bGwsX3I9YSkpOihpPW51bGwsX3I9YSk7bnVsbCE9PWk7KWwucHVzaChpKSxhPV9yLGk9aygpLG51bGwhPT1pPyhvPXNuKCksbnVsbCE9PW8/aT1baSxvXTooaT1udWxsLF9yPWEpKTooaT1udWxsLF9yPWEpO251bGwhPT1sP2U9W2UsdCxyLGxdOihlPW51bGwsX3I9dSl9ZWxzZSBlPW51bGwsX3I9dTtlbHNlIGU9bnVsbCxfcj11O2Vsc2UgZT1udWxsLF9yPXU7cmV0dXJuIG51bGw9PT1lJiYoZT1ubigpKSxlfWZ1bmN0aW9uIG5uKCl7dmFyIGUsdCxuLHIscyxsLGksbztpZihpPV9yLGU9SSgpLG51bGwhPT1lKWlmKHQ9digpLG51bGwhPT10KWlmKG49cm4oKSxudWxsIT09bil7Zm9yKHI9W10sbz1fcixzPWsoKSxudWxsIT09cz8obD1ybigpLG51bGwhPT1sP3M9W3MsbF06KHM9bnVsbCxfcj1vKSk6KHM9bnVsbCxfcj1vKTtudWxsIT09czspci5wdXNoKHMpLG89X3Iscz1rKCksbnVsbCE9PXM/KGw9cm4oKSxudWxsIT09bD9zPVtzLGxdOihzPW51bGwsX3I9bykpOihzPW51bGwsX3I9byk7bnVsbCE9PXI/ZT1bZSx0LG4scl06KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO2Vsc2UgZT1udWxsLF9yPWk7ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gZX1mdW5jdGlvbiBybigpe3ZhciBlLHQsbixyO3JldHVybiByPV9yLGU9SSgpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8obj1JKCksbnVsbD09PW4mJihuPXooKSksbnVsbCE9PW4/ZT1bZSx0LG5dOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBzbigpe3ZhciBlO3JldHVybiBlPWxuKCksbnVsbD09PWUmJihlPXVuKCksbnVsbD09PWUmJihlPWNuKCksbnVsbD09PWUmJihlPWRuKCksbnVsbD09PWUmJihlPXBuKCksbnVsbD09PWUmJihlPWZuKCksbnVsbD09PWUmJihlPW1uKCksbnVsbD09PWUmJihlPXJuKCkpKSkpKSkpLGV9ZnVuY3Rpb24gbG4oKXt2YXIgZSx0LHIsbDtyZXR1cm4gbD1fcixcInJlYWxtXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJyZWFsbVwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1vbigpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gb24oKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9VigpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnJlYWxtPXR9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiB1bigpe3ZhciBlLHQscixsLGksbyx1LGEsYztpZihhPV9yLFwiZG9tYWluXCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJkb21haW5cIicpKSxudWxsIT09ZSlpZih0PVUoKSxudWxsIT09dClpZihyPUcoKSxudWxsIT09cilpZihsPWFuKCksbnVsbCE9PWwpe2lmKGk9W10sYz1fcix1PWQoKSxudWxsIT09dSlmb3Iobz1bXTtudWxsIT09dTspby5wdXNoKHUpLHU9ZCgpO2Vsc2Ugbz1udWxsO2ZvcihudWxsIT09bz8odT1hbigpLG51bGwhPT11P289W28sdV06KG89bnVsbCxfcj1jKSk6KG89bnVsbCxfcj1jKTtudWxsIT09bzspe2lmKGkucHVzaChvKSxjPV9yLHU9ZCgpLG51bGwhPT11KWZvcihvPVtdO251bGwhPT11OylvLnB1c2godSksdT1kKCk7ZWxzZSBvPW51bGw7bnVsbCE9PW8/KHU9YW4oKSxudWxsIT09dT9vPVtvLHVdOihvPW51bGwsX3I9YykpOihvPW51bGwsX3I9Yyl9bnVsbCE9PWk/KG89aigpLG51bGwhPT1vP2U9W2UsdCxyLGwsaSxvXTooZT1udWxsLF9yPWEpKTooZT1udWxsLF9yPWEpfWVsc2UgZT1udWxsLF9yPWE7ZWxzZSBlPW51bGwsX3I9YTtlbHNlIGU9bnVsbCxfcj1hO2Vsc2UgZT1udWxsLF9yPWE7cmV0dXJuIGV9ZnVuY3Rpb24gYW4oKXt2YXIgZTtyZXR1cm4gZT1MZSgpLG51bGw9PT1lJiYoZT1GZSgpKSxlfWZ1bmN0aW9uIGNuKCl7dmFyIGUsdCxyLGw7cmV0dXJuIGw9X3IsXCJub25jZVwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wibm9uY2VcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9aG4oKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIGhuKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPVYoKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5ub25jZT10fSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gZG4oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJvcGFxdWVcIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcIm9wYXF1ZVwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1WKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIub3BhcXVlPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBwbigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsXCJzdGFsZVwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wic3RhbGVcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KGk9X3IsXCJ0cnVlXCI9PT1uLnN1YnN0cihfciw0KS50b0xvd2VyQ2FzZSgpPyhyPW4uc3Vic3RyKF9yLDQpLF9yKz00KToocj1udWxsLDA9PT12ciYmcygnXCJ0cnVlXCInKSksbnVsbCE9PXImJihyPWZ1bmN0aW9uKGUpe3lyLnN0YWxlPSEwfShpKSksbnVsbD09PXImJihfcj1pKSxudWxsPT09ciYmKGk9X3IsXCJmYWxzZVwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8ocj1uLnN1YnN0cihfciw1KSxfcis9NSk6KHI9bnVsbCwwPT09dnImJnMoJ1wiZmFsc2VcIicpKSxudWxsIT09ciYmKHI9ZnVuY3Rpb24oZSl7eXIuc3RhbGU9ITF9KGkpKSxudWxsPT09ciYmKF9yPWkpKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIGZuKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwiYWxnb3JpdGhtXCI9PT1uLnN1YnN0cihfciw5KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDkpLF9yKz05KTooZT1udWxsLDA9PT12ciYmcygnXCJhbGdvcml0aG1cIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KFwibWQ1XCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhyPW4uc3Vic3RyKF9yLDMpLF9yKz0zKToocj1udWxsLDA9PT12ciYmcygnXCJNRDVcIicpKSxudWxsPT09ciYmKFwibWQ1LXNlc3NcIj09PW4uc3Vic3RyKF9yLDgpLnRvTG93ZXJDYXNlKCk/KHI9bi5zdWJzdHIoX3IsOCksX3IrPTgpOihyPW51bGwsMD09PXZyJiZzKCdcIk1ENS1zZXNzXCInKSksbnVsbD09PXImJihyPUkoKSkpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLmFsZ29yaXRobT10LnRvVXBwZXJDYXNlKCl9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBtbigpe3ZhciBlLHQscixsLGksbyx1LGEsYyxoO2lmKGE9X3IsXCJxb3BcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcInFvcFwiJykpLG51bGwhPT1lKWlmKHQ9VSgpLG51bGwhPT10KWlmKHI9RygpLG51bGwhPT1yKXtpZihjPV9yLGw9Z24oKSxudWxsIT09bCl7Zm9yKGk9W10saD1fciw0ND09PW4uY2hhckNvZGVBdChfcik/KG89XCIsXCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpLG51bGwhPT1vPyh1PWduKCksbnVsbCE9PXU/bz1bbyx1XToobz1udWxsLF9yPWgpKToobz1udWxsLF9yPWgpO251bGwhPT1vOylpLnB1c2gobyksaD1fciw0ND09PW4uY2hhckNvZGVBdChfcik/KG89XCIsXCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpLG51bGwhPT1vPyh1PWduKCksbnVsbCE9PXU/bz1bbyx1XToobz1udWxsLF9yPWgpKToobz1udWxsLF9yPWgpO251bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj1jKX1lbHNlIGw9bnVsbCxfcj1jO251bGwhPT1sPyhpPWooKSxudWxsIT09aT9lPVtlLHQscixsLGldOihlPW51bGwsX3I9YSkpOihlPW51bGwsX3I9YSl9ZWxzZSBlPW51bGwsX3I9YTtlbHNlIGU9bnVsbCxfcj1hO2Vsc2UgZT1udWxsLF9yPWE7cmV0dXJuIGV9ZnVuY3Rpb24gZ24oKXt2YXIgZSx0O3JldHVybiB0PV9yLFwiYXV0aC1pbnRcIj09PW4uc3Vic3RyKF9yLDgpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOCksX3IrPTgpOihlPW51bGwsMD09PXZyJiZzKCdcImF1dGgtaW50XCInKSksbnVsbD09PWUmJihcImF1dGhcIj09PW4uc3Vic3RyKF9yLDQpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNCksX3IrPTQpOihlPW51bGwsMD09PXZyJiZzKCdcImF1dGhcIicpKSxudWxsPT09ZSYmKGU9SSgpKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucW9wfHwoeXIucW9wPVtdKSx5ci5xb3AucHVzaCh0LnRvTG93ZXJDYXNlKCkpfSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gVG4oKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPUkoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPWsoKSxudWxsIT09bj8ocj1JKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPWsoKSxudWxsIT09bj8ocj1JKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIF9uKCl7dmFyIGUsdCxuLHIscyxsLGk7aWYocz1fcixsPV9yLGU9dm4oKSxudWxsIT09ZSl7Zm9yKHQ9W10saT1fcixuPWsoKSxudWxsIT09bj8ocj12bigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09bjspdC5wdXNoKG4pLGk9X3Isbj1rKCksbnVsbCE9PW4/KHI9dm4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt2YXIgdCxuO2ZvcihuPXlyLm11bHRpX2hlYWRlci5sZW5ndGgsdD0wO24+dDt0KyspaWYobnVsbD09PXlyLm11bHRpX2hlYWRlclt0XS5wYXJzZWQpe3lyPW51bGw7YnJlYWt9eXI9bnVsbCE9PXlyP3lyLm11bHRpX2hlYWRlcjotMX0ocykpLG51bGw9PT1lJiYoX3I9cyksZX1mdW5jdGlvbiB2bigpe3ZhciBlLHQsbixyLHMsbCxpO2lmKHM9X3IsbD1fcixlPV90KCksbnVsbCE9PWUpe2Zvcih0PVtdLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9UnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PW47KXQucHVzaChuKSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPVJ0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dmFyIHQ7eXIubXVsdGlfaGVhZGVyfHwoeXIubXVsdGlfaGVhZGVyPVtdKTt0cnl7dD1uZXcgQXIoeXIudXJpLHlyLmRpc3BsYXlfbmFtZSx5ci5wYXJhbXMpLGRlbGV0ZSB5ci51cmksZGVsZXRlIHlyLmRpc3BsYXlfbmFtZSxkZWxldGUgeXIucGFyYW1zfWNhdGNoKG4pe3Q9bnVsbH15ci5tdWx0aV9oZWFkZXIucHVzaCh7cG9zc2l0aW9uOl9yLG9mZnNldDplLHBhcnNlZDp0fSl9KHMpKSxudWxsPT09ZSYmKF9yPXMpLGV9ZnVuY3Rpb24gQ24oKXt2YXIgZSx0LHIsbCxpLG8sdTtpZihpPV9yLG89X3IsXCJzaXBcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcIlNJUFwiJykpLG51bGw9PT1lJiYoZT1JKCkpLG51bGwhPT1lKXtmb3IodD1bXSx1PV9yLHI9SCgpLG51bGwhPT1yPyhsPVNuKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPXUpKToocj1udWxsLF9yPXUpO251bGwhPT1yOyl0LnB1c2gociksdT1fcixyPUgoKSxudWxsIT09cj8obD1TbigpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj11KSk6KHI9bnVsbCxfcj11KTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9byl9ZWxzZSBlPW51bGwsX3I9bztyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7aWYoeXIucHJvdG9jb2w9dC50b0xvd2VyQ2FzZSgpLHlyLnBhcmFtc3x8KHlyLnBhcmFtcz17fSkseXIucGFyYW1zLnRleHQmJidcIic9PT15ci5wYXJhbXMudGV4dFswXSl7dmFyIG49eXIucGFyYW1zLnRleHQ7eXIudGV4dD1uLnN1YnN0cmluZygxLG4ubGVuZ3RoLTEpLGRlbGV0ZSB5ci5wYXJhbXMudGV4dH19KGksZVswXSkpLG51bGw9PT1lJiYoX3I9aSksZX1mdW5jdGlvbiBTbigpe3ZhciBlO3JldHVybiBlPUVuKCksbnVsbD09PWUmJihlPVJ0KCkpLGV9ZnVuY3Rpb24gRW4oKXt2YXIgZSx0LHIsbCxvLHU7aWYobz1fcix1PV9yLFwiY2F1c2VcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcImNhdXNlXCInKSksbnVsbCE9PWUpaWYodD1VKCksbnVsbCE9PXQpe2lmKGw9aSgpLG51bGwhPT1sKWZvcihyPVtdO251bGwhPT1sOylyLnB1c2gobCksbD1pKCk7ZWxzZSByPW51bGw7bnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9dSl9ZWxzZSBlPW51bGwsX3I9dTtlbHNlIGU9bnVsbCxfcj11O3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5jYXVzZT1wYXJzZUludCh0LmpvaW4oXCJcIikpfShvLGVbMl0pKSxudWxsPT09ZSYmKF9yPW8pLGV9ZnVuY3Rpb24gQW4oKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPUkoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPWsoKSxudWxsIT09bj8ocj1JKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPWsoKSxudWxsIT09bj8ocj1JKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIHluKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1SbigpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49aygpLG51bGwhPT1uPyhyPVJuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPWsoKSxudWxsIT09bj8ocj1SbigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiBSbigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9X3QoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPUgoKSxudWxsIT09bj8ocj1SdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9UnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gYm4oKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPUluKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9d24oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPXduKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIEluKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixcImFjdGl2ZVwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wiYWN0aXZlXCInKSksbnVsbD09PWUmJihcInBlbmRpbmdcIj09PW4uc3Vic3RyKF9yLDcpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNyksX3IrPTcpOihlPW51bGwsMD09PXZyJiZzKCdcInBlbmRpbmdcIicpKSxudWxsPT09ZSYmKFwidGVybWluYXRlZFwiPT09bi5zdWJzdHIoX3IsMTApLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMTApLF9yKz0xMCk6KGU9bnVsbCwwPT09dnImJnMoJ1widGVybWluYXRlZFwiJykpLG51bGw9PT1lJiYoZT1JKCkpKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLnN0YXRlPW4uc3Vic3RyaW5nKF9yLGUpfSh0KSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIHduKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwicmVhc29uXCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJyZWFzb25cIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9Tm4oKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmKHlyLnJlYXNvbj10KX0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxudWxsPT09ZSYmKGw9X3IsaT1fcixcImV4cGlyZXNcIj09PW4uc3Vic3RyKF9yLDcpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNyksX3IrPTcpOihlPW51bGwsMD09PXZyJiZzKCdcImV4cGlyZXNcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9QXQoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmKHlyLmV4cGlyZXM9dCl9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksbnVsbD09PWUmJihsPV9yLGk9X3IsXCJyZXRyeV9hZnRlclwiPT09bi5zdWJzdHIoX3IsMTEpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMTEpLF9yKz0xMSk6KGU9bnVsbCwwPT09dnImJnMoJ1wicmV0cnlfYWZ0ZXJcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9QXQoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmKHlyLnJldHJ5X2FmdGVyPXQpfShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLG51bGw9PT1lJiYoZT1SdCgpKSkpLGV9ZnVuY3Rpb24gTm4oKXt2YXIgZTtyZXR1cm5cImRlYWN0aXZhdGVkXCI9PT1uLnN1YnN0cihfciwxMSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwxMSksX3IrPTExKTooZT1udWxsLDA9PT12ciYmcygnXCJkZWFjdGl2YXRlZFwiJykpLG51bGw9PT1lJiYoXCJwcm9iYXRpb25cIj09PW4uc3Vic3RyKF9yLDkpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOSksX3IrPTkpOihlPW51bGwsMD09PXZyJiZzKCdcInByb2JhdGlvblwiJykpLG51bGw9PT1lJiYoXCJyZWplY3RlZFwiPT09bi5zdWJzdHIoX3IsOCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw4KSxfcis9OCk6KGU9bnVsbCwwPT09dnImJnMoJ1wicmVqZWN0ZWRcIicpKSxudWxsPT09ZSYmKFwidGltZW91dFwiPT09bi5zdWJzdHIoX3IsNykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw3KSxfcis9Nyk6KGU9bnVsbCwwPT09dnImJnMoJ1widGltZW91dFwiJykpLG51bGw9PT1lJiYoXCJnaXZldXBcIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcImdpdmV1cFwiJykpLG51bGw9PT1lJiYoXCJub3Jlc291cmNlXCI9PT1uLnN1YnN0cihfciwxMCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwxMCksX3IrPTEwKTooZT1udWxsLDA9PT12ciYmcygnXCJub3Jlc291cmNlXCInKSksbnVsbD09PWUmJihcImludmFyaWFudFwiPT09bi5zdWJzdHIoX3IsOSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw5KSxfcis9OSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiaW52YXJpYW50XCInKSksbnVsbD09PWUmJihlPUkoKSkpKSkpKSksZX1mdW5jdGlvbiBEbigpe3ZhciBlO3JldHVybiBlPUUoKSxlPW51bGwhPT1lP2U6XCJcIn1mdW5jdGlvbiBPbigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9SSgpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49aygpLG51bGwhPT1uPyhyPUkoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49aygpLG51bGwhPT1uPyhyPUkoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGU9bnVsbCE9PWU/ZTpcIlwifWZ1bmN0aW9uIHhuKCl7dmFyIGUsdCxuLHIscyxsLGk7aWYocz1fcixsPV9yLGU9SygpLG51bGw9PT1lJiYoZT1fdCgpKSxudWxsIT09ZSl7Zm9yKHQ9W10saT1fcixuPUgoKSxudWxsIT09bj8ocj1VbigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09bjspdC5wdXNoKG4pLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9VW4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt2YXIgdD15ci50YWc7dHJ5e3lyPW5ldyBBcih5ci51cmkseXIuZGlzcGxheV9uYW1lLHlyLnBhcmFtcyksdCYmeXIuc2V0UGFyYW0oXCJ0YWdcIix0KX1jYXRjaChuKXt5cj0tMX19KHMpKSxudWxsPT09ZSYmKF9yPXMpLGV9ZnVuY3Rpb24gVW4oKXt2YXIgZTtyZXR1cm4gZT0kdCgpLG51bGw9PT1lJiYoZT1SdCgpKSxlfWZ1bmN0aW9uIE1uKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1QbigpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49aygpLG51bGwhPT1uPyhyPVBuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPWsoKSxudWxsIT09bj8ocj1QbigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiBQbigpe3ZhciBlLHQsbixyLHMsbCxpLG87aWYoaT1fcixlPWpuKCksbnVsbCE9PWUpaWYodD12KCksbnVsbCE9PXQpaWYobj16bigpLG51bGwhPT1uKXtmb3Iocj1bXSxvPV9yLHM9SCgpLG51bGwhPT1zPyhsPXFuKCksbnVsbCE9PWw/cz1bcyxsXToocz1udWxsLF9yPW8pKToocz1udWxsLF9yPW8pO251bGwhPT1zOylyLnB1c2gocyksbz1fcixzPUgoKSxudWxsIT09cz8obD1xbigpLG51bGwhPT1sP3M9W3MsbF06KHM9bnVsbCxfcj1vKSk6KHM9bnVsbCxfcj1vKTtudWxsIT09cj9lPVtlLHQsbixyXTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7ZWxzZSBlPW51bGwsX3I9aTtlbHNlIGU9bnVsbCxfcj1pO3JldHVybiBlfWZ1bmN0aW9uIHFuKCl7dmFyIGU7cmV0dXJuIGU9TG4oKSxudWxsPT09ZSYmKGU9a24oKSxudWxsPT09ZSYmKGU9SG4oKSxudWxsPT09ZSYmKGU9Rm4oKSxudWxsPT09ZSYmKGU9R24oKSxudWxsPT09ZSYmKGU9UnQoKSkpKSkpLGV9ZnVuY3Rpb24gTG4oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJ0dGxcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcInR0bFwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1KbigpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnR0bD10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24ga24oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJtYWRkclwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wibWFkZHJcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9bGUoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5tYWRkcj10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gSG4oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJyZWNlaXZlZFwiPT09bi5zdWJzdHIoX3IsOCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw4KSxfcis9OCk6KGU9bnVsbCwwPT09dnImJnMoJ1wicmVjZWl2ZWRcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9cGUoKSxudWxsPT09ciYmKHI9Y2UoKSksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucmVjZWl2ZWQ9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEZuKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwiYnJhbmNoXCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJicmFuY2hcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9SSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLmJyYW5jaD10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gR24oKXt2YXIgZSx0LHIsbCxvLHUsYTtpZihvPV9yLHU9X3IsXCJycG9ydFwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wicnBvcnRcIicpKSxudWxsIT09ZSl7aWYoYT1fcix0PVUoKSxudWxsIT09dCl7Zm9yKHI9W10sbD1pKCk7bnVsbCE9PWw7KXIucHVzaChsKSxsPWkoKTtudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9YSl9ZWxzZSB0PW51bGwsX3I9YTt0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9dSl9ZWxzZSBlPW51bGwsX3I9dTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe1widW5kZWZpbmVkXCIhPXR5cGVvZiByZXNwb25zZV9wb3J0JiYoeXIucnBvcnQ9cmVzcG9uc2VfcG9ydC5qb2luKFwiXCIpKX0obykpLG51bGw9PT1lJiYoX3I9byksZX1mdW5jdGlvbiBqbigpe3ZhciBlLHQsbixyLHMsbDtyZXR1cm4gbD1fcixlPVduKCksbnVsbCE9PWU/KHQ9eCgpLG51bGwhPT10PyhuPUkoKSxudWxsIT09bj8ocj14KCksbnVsbCE9PXI/KHM9Qm4oKSxudWxsIT09cz9lPVtlLHQsbixyLHNdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBXbigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsXCJzaXBcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcIlNJUFwiJykpLG51bGw9PT1lJiYoZT1JKCkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnByb3RvY29sPXR9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBCbigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsXCJ1ZHBcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcIlVEUFwiJykpLG51bGw9PT1lJiYoXCJ0Y3BcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcIlRDUFwiJykpLG51bGw9PT1lJiYoXCJ0bHNcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihlPW51bGwsMD09PXZyJiZzKCdcIlRMU1wiJykpLG51bGw9PT1lJiYoXCJzY3RwXCI9PT1uLnN1YnN0cihfciw0KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDQpLF9yKz00KTooZT1udWxsLDA9PT12ciYmcygnXCJTQ1RQXCInKSksbnVsbD09PWUmJihlPUkoKSkpKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudHJhbnNwb3J0PXR9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiB6bigpe3ZhciBlLHQsbixyLHM7cmV0dXJuIHI9X3IsZT1WbigpLG51bGwhPT1lPyhzPV9yLHQ9RigpLG51bGwhPT10PyhuPVluKCksbnVsbCE9PW4/dD1bdCxuXToodD1udWxsLF9yPXMpKToodD1udWxsLF9yPXMpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIFZuKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPXBlKCksbnVsbD09PWUmJihlPWFlKCksbnVsbD09PWUmJihlPWllKCkpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIuaG9zdD1uLnN1YnN0cmluZyhfcixlKX0odCkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBZbigpe3ZhciBlLHQsbixyLHMsbCxvO3JldHVybiBsPV9yLG89X3IsZT1pKCksZT1udWxsIT09ZT9lOlwiXCIsbnVsbCE9PWU/KHQ9aSgpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhuPWkoKSxuPW51bGwhPT1uP246XCJcIixudWxsIT09bj8ocj1pKCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KHM9aSgpLHM9bnVsbCE9PXM/czpcIlwiLG51bGwhPT1zP2U9W2UsdCxuLHIsc106KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5wb3J0PXBhcnNlSW50KHQuam9pbihcIlwiKSl9KGwsZSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBKbigpe3ZhciBlLHQsbixyLHM7cmV0dXJuIHI9X3Iscz1fcixlPWkoKSxudWxsIT09ZT8odD1pKCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KG49aSgpLG49bnVsbCE9PW4/bjpcIlwiLG51bGwhPT1uP2U9W2UsdCxuXTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3JldHVybiBwYXJzZUludCh0LmpvaW4oXCJcIikpfShyLGUpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gS24oKXt2YXIgZTtyZXR1cm4gZT10bigpfWZ1bmN0aW9uICRuKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1YbigpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPVFuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPUgoKSxudWxsIT09bj8ocj1RbigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiBYbigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1BdCgpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLmV4cGlyZXM9dH0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIFFuKCl7dmFyIGU7cmV0dXJuIGU9Wm4oKSxudWxsPT09ZSYmKGU9UnQoKSksZX1mdW5jdGlvbiBabigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcInJlZnJlc2hlclwiPT09bi5zdWJzdHIoX3IsOSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw5KSxfcis9OSk6KGU9bnVsbCwwPT09dnImJnMoJ1wicmVmcmVzaGVyXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhcInVhY1wiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8ocj1uLnN1YnN0cihfciwzKSxfcis9Myk6KHI9bnVsbCwwPT09dnImJnMoJ1widWFjXCInKSksbnVsbD09PXImJihcInVhc1wiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8ocj1uLnN1YnN0cihfciwzKSxfcis9Myk6KHI9bnVsbCwwPT09dnImJnMoJ1widWFzXCInKSkpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnJlZnJlc2hlcj10LnRvTG93ZXJDYXNlKCl9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBlcigpe3ZhciBlLHQsbixyO3JldHVybiByPV9yLGU9SSgpLG51bGwhPT1lPyh0PVMoKSxudWxsIT09dD8obj10cigpLG51bGwhPT1uP2U9W2UsdCxuXTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gdHIoKXt2YXIgZSx0O2ZvcihlPVtdLHQ9QSgpLG51bGw9PT10JiYodD1SKCksbnVsbD09PXQmJih0PXYoKSkpO251bGwhPT10OyllLnB1c2godCksdD1BKCksbnVsbD09PXQmJih0PVIoKSxudWxsPT09dCYmKHQ9digpKSk7cmV0dXJuIGV9ZnVuY3Rpb24gbnIoKXt2YXIgZSx0O2ZvcihlPVtdLHQ9YygpO251bGwhPT10OyllLnB1c2godCksdD1jKCk7cmV0dXJuIGV9ZnVuY3Rpb24gcnIoKXt2YXIgZSx0LHI7cmV0dXJuIHI9X3IsXCJ1dWlkOlwiPT09bi5zdWJzdHIoX3IsNSk/KGU9XCJ1dWlkOlwiLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJ1dWlkOlwiJykpLG51bGwhPT1lPyh0PXNyKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gc3IoKXt2YXIgZSx0LHIsbCxpLG8sdSxhLGMsaCxkO3JldHVybiBoPV9yLGQ9X3IsZT1pcigpLG51bGwhPT1lPyg0NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCItXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGwhPT10PyhyPWxyKCksbnVsbCE9PXI/KDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIi1cIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbCE9PWw/KGk9bHIoKSxudWxsIT09aT8oNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiLVwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsIT09bz8odT1scigpLG51bGwhPT11Pyg0NT09PW4uY2hhckNvZGVBdChfcik/KGE9XCItXCIsX3IrKyk6KGE9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGwhPT1hPyhjPW9yKCksbnVsbCE9PWM/ZT1bZSx0LHIsbCxpLG8sdSxhLGNdOihlPW51bGwsX3I9ZCkpOihlPW51bGwsX3I9ZCkpOihlPW51bGwsX3I9ZCkpOihlPW51bGwsX3I9ZCkpOihlPW51bGwsX3I9ZCkpOihlPW51bGwsX3I9ZCkpOihlPW51bGwsX3I9ZCkpOihlPW51bGwsX3I9ZCkpOihlPW51bGwsX3I9ZCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXI9bi5zdWJzdHJpbmcoX3IrNSxlKX0oaCxlWzBdKSksbnVsbD09PWUmJihfcj1oKSxlfWZ1bmN0aW9uIGxyKCl7dmFyIGUsdCxuLHIscztyZXR1cm4gcz1fcixlPXUoKSxudWxsIT09ZT8odD11KCksbnVsbCE9PXQ/KG49dSgpLG51bGwhPT1uPyhyPXUoKSxudWxsIT09cj9lPVtlLHQsbixyXTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpLGV9ZnVuY3Rpb24gaXIoKXt2YXIgZSx0LG47cmV0dXJuIG49X3IsZT1scigpLG51bGwhPT1lPyh0PWxyKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPW4pKTooZT1udWxsLF9yPW4pLGV9ZnVuY3Rpb24gb3IoKXt2YXIgZSx0LG4scjtyZXR1cm4gcj1fcixlPWxyKCksbnVsbCE9PWU/KHQ9bHIoKSxudWxsIT09dD8obj1scigpLG51bGwhPT1uP2U9W2UsdCxuXTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gdXIoKXt2YXIgZSx0LG4scixzLGwsaTtpZihzPV9yLGw9X3IsZT1LKCksbnVsbD09PWUmJihlPV90KCkpLG51bGwhPT1lKXtmb3IodD1bXSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPVJ0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT1uOyl0LnB1c2gobiksaT1fcixuPUgoKSxudWxsIT09bj8ocj1SdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3RyeXt5cj1uZXcgQXIoeXIudXJpLHlyLmRpc3BsYXlfbmFtZSx5ci5wYXJhbXMpfWNhdGNoKHQpe3lyPS0xfX0ocykpLG51bGw9PT1lJiYoX3I9cyksZX1mdW5jdGlvbiBhcigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9Y3IoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPUgoKSxudWxsIT09bj8ocj1ocigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9aHIoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gY3IoKXt2YXIgZSx0LHIsbCxpLG87cmV0dXJuIGw9X3IsaT1fcixlPUQoKSxudWxsIT09ZT8obz1fciw2ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJAXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGwhPT10PyhyPUQoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bykpOih0PW51bGwsX3I9byksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci5jYWxsX2lkPW4uc3Vic3RyaW5nKF9yLGUpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIGhyKCl7dmFyIGU7cmV0dXJuIGU9ZHIoKSxudWxsPT09ZSYmKGU9cHIoKSxudWxsPT09ZSYmKGU9ZnIoKSxudWxsPT09ZSYmKGU9UnQoKSkpKSxlfWZ1bmN0aW9uIGRyKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwidG8tdGFnXCI9PT1uLnN1YnN0cihfciw2KT8oZT1cInRvLXRhZ1wiLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJ0by10YWdcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9SSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnRvX3RhZz10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gcHIoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJmcm9tLXRhZ1wiPT09bi5zdWJzdHIoX3IsOCk/KGU9XCJmcm9tLXRhZ1wiLF9yKz04KTooZT1udWxsLDA9PT12ciYmcygnXCJmcm9tLXRhZ1wiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1JKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuZnJvbV90YWc9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIGZyKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixcImVhcmx5LW9ubHlcIj09PW4uc3Vic3RyKF9yLDEwKT8oZT1cImVhcmx5LW9ubHlcIixfcis9MTApOihlPW51bGwsMD09PXZyJiZzKCdcImVhcmx5LW9ubHlcIicpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIuZWFybHlfb25seT0hMH0odCkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBtcihlKXtlLnNvcnQoKTtmb3IodmFyIHQ9bnVsbCxuPVtdLHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdIT09dCYmKG4ucHVzaChlW3JdKSx0PWVbcl0pO3JldHVybiBufWZ1bmN0aW9uIGdyKCl7Zm9yKHZhciBlPTEsdD0xLHI9ITEscz0wO3M8TWF0aC5tYXgoX3IsQ3IpO3MrKyl7dmFyIGw9bi5jaGFyQXQocyk7XCJcXG5cIj09PWw/KHJ8fGUrKyx0PTEscj0hMSk6XCJcXHJcIj09PWx8fFwiXFx1MjAyOFwiPT09bHx8XCJcXHUyMDI5XCI9PT1sPyhlKyssdD0xLHI9ITApOih0Kysscj0hMSl9cmV0dXJue2xpbmU6ZSxjb2x1bW46dH19dmFyIFRyPXtDUkxGOmwsRElHSVQ6aSxBTFBIQTpvLEhFWERJRzp1LFdTUDphLE9DVEVUOmMsRFFVT1RFOmgsU1A6ZCxIVEFCOnAsYWxwaGFudW06ZixyZXNlcnZlZDptLHVucmVzZXJ2ZWQ6ZyxtYXJrOlQsZXNjYXBlZDpfLExXUzp2LFNXUzpDLEhDT0xPTjpTLFRFWFRfVVRGOF9UUklNOkUsVEVYVF9VVEY4Y2hhcjpBLFVURjhfTk9OQVNDSUk6eSxVVEY4X0NPTlQ6UixMSEVYOmIsdG9rZW46SSx0b2tlbl9ub2RvdDp3LHNlcGFyYXRvcnM6Tix3b3JkOkQsU1RBUjpPLFNMQVNIOngsRVFVQUw6VSxMUEFSRU46TSxSUEFSRU46UCxSQVFVT1Q6cSxMQVFVT1Q6TCxDT01NQTprLFNFTUk6SCxDT0xPTjpGLExEUVVPVDpHLFJEUVVPVDpqLGNvbW1lbnQ6VyxjdGV4dDpCLHF1b3RlZF9zdHJpbmc6eixxdW90ZWRfc3RyaW5nX2NsZWFuOlYscWR0ZXh0OlkscXVvdGVkX3BhaXI6SixTSVBfVVJJX25vcGFyYW1zOkssU0lQX1VSSTokLHVyaV9zY2hlbWU6WCx1cmlfc2NoZW1lX3NpcHM6USx1cmlfc2NoZW1lX3NpcDpaLHVzZXJpbmZvOmVlLHVzZXI6dGUsdXNlcl91bnJlc2VydmVkOm5lLHBhc3N3b3JkOnJlLGhvc3Rwb3J0OnNlLGhvc3Q6bGUsaG9zdG5hbWU6aWUsZG9tYWlubGFiZWw6b2UsdG9wbGFiZWw6dWUsSVB2NnJlZmVyZW5jZTphZSxJUHY2YWRkcmVzczpjZSxoMTY6aGUsbHMzMjpkZSxJUHY0YWRkcmVzczpwZSxkZWNfb2N0ZXQ6ZmUscG9ydDptZSx1cmlfcGFyYW1ldGVyczpnZSx1cmlfcGFyYW1ldGVyOlRlLHRyYW5zcG9ydF9wYXJhbTpfZSx1c2VyX3BhcmFtOnZlLG1ldGhvZF9wYXJhbTpDZSx0dGxfcGFyYW06U2UsbWFkZHJfcGFyYW06RWUsbHJfcGFyYW06QWUsb3RoZXJfcGFyYW06eWUscG5hbWU6UmUscHZhbHVlOmJlLHBhcmFtY2hhcjpJZSxwYXJhbV91bnJlc2VydmVkOndlLGhlYWRlcnM6TmUsaGVhZGVyOkRlLGhuYW1lOk9lLGh2YWx1ZTp4ZSxobnZfdW5yZXNlcnZlZDpVZSxSZXF1ZXN0X1Jlc3BvbnNlOk1lLFJlcXVlc3RfTGluZTpQZSxSZXF1ZXN0X1VSSTpxZSxhYnNvbHV0ZVVSSTpMZSxoaWVyX3BhcnQ6a2UsbmV0X3BhdGg6SGUsYWJzX3BhdGg6RmUsb3BhcXVlX3BhcnQ6R2UsdXJpYzpqZSx1cmljX25vX3NsYXNoOldlLHBhdGhfc2VnbWVudHM6QmUsc2VnbWVudDp6ZSxwYXJhbTpWZSxwY2hhcjpZZSxzY2hlbWU6SmUsYXV0aG9yaXR5OktlLHNydnI6JGUscmVnX25hbWU6WGUscXVlcnk6UWUsU0lQX1ZlcnNpb246WmUsSU5WSVRFbTpldCxBQ0ttOnR0LE9QVElPTlNtOm50LEJZRW06cnQsQ0FOQ0VMbTpzdCxSRUdJU1RFUm06bHQsU1VCU0NSSUJFbTppdCxOT1RJRlltOm90LFJFRkVSbTp1dCxNZXRob2Q6YXQsU3RhdHVzX0xpbmU6Y3QsU3RhdHVzX0NvZGU6aHQsZXh0ZW5zaW9uX2NvZGU6ZHQsUmVhc29uX1BocmFzZTpwdCxcbkFsbG93X0V2ZW50czpmdCxDYWxsX0lEOm10LENvbnRhY3Q6Z3QsY29udGFjdF9wYXJhbTpUdCxuYW1lX2FkZHI6X3QsZGlzcGxheV9uYW1lOnZ0LGNvbnRhY3RfcGFyYW1zOkN0LGNfcF9xOlN0LGNfcF9leHBpcmVzOkV0LGRlbHRhX3NlY29uZHM6QXQscXZhbHVlOnl0LGdlbmVyaWNfcGFyYW06UnQsZ2VuX3ZhbHVlOmJ0LENvbnRlbnRfRGlzcG9zaXRpb246SXQsZGlzcF90eXBlOnd0LGRpc3BfcGFyYW06TnQsaGFuZGxpbmdfcGFyYW06RHQsQ29udGVudF9FbmNvZGluZzpPdCxDb250ZW50X0xlbmd0aDp4dCxDb250ZW50X1R5cGU6VXQsbWVkaWFfdHlwZTpNdCxtX3R5cGU6UHQsZGlzY3JldGVfdHlwZTpxdCxjb21wb3NpdGVfdHlwZTpMdCxleHRlbnNpb25fdG9rZW46a3QseF90b2tlbjpIdCxtX3N1YnR5cGU6RnQsbV9wYXJhbWV0ZXI6R3QsbV92YWx1ZTpqdCxDU2VxOld0LENTZXFfdmFsdWU6QnQsRXhwaXJlczp6dCxFdmVudDpWdCxldmVudF90eXBlOll0LEZyb206SnQsZnJvbV9wYXJhbTpLdCx0YWdfcGFyYW06JHQsTWF4X0ZvcndhcmRzOlh0LE1pbl9FeHBpcmVzOlF0LE5hbWVfQWRkcl9IZWFkZXI6WnQsUHJveHlfQXV0aGVudGljYXRlOmVuLGNoYWxsZW5nZTp0bixvdGhlcl9jaGFsbGVuZ2U6bm4sYXV0aF9wYXJhbTpybixkaWdlc3RfY2xuOnNuLHJlYWxtOmxuLHJlYWxtX3ZhbHVlOm9uLGRvbWFpbjp1bixVUkk6YW4sbm9uY2U6Y24sbm9uY2VfdmFsdWU6aG4sb3BhcXVlOmRuLHN0YWxlOnBuLGFsZ29yaXRobTpmbixxb3Bfb3B0aW9uczptbixxb3BfdmFsdWU6Z24sUHJveHlfUmVxdWlyZTpUbixSZWNvcmRfUm91dGU6X24scmVjX3JvdXRlOnZuLFJlYXNvbjpDbixyZWFzb25fcGFyYW06U24scmVhc29uX2NhdXNlOkVuLFJlcXVpcmU6QW4sUm91dGU6eW4scm91dGVfcGFyYW06Um4sU3Vic2NyaXB0aW9uX1N0YXRlOmJuLHN1YnN0YXRlX3ZhbHVlOkluLHN1YmV4cF9wYXJhbXM6d24sZXZlbnRfcmVhc29uX3ZhbHVlOk5uLFN1YmplY3Q6RG4sU3VwcG9ydGVkOk9uLFRvOnhuLHRvX3BhcmFtOlVuLFZpYTpNbix2aWFfcGFyYW06UG4sdmlhX3BhcmFtczpxbix2aWFfdHRsOkxuLHZpYV9tYWRkcjprbix2aWFfcmVjZWl2ZWQ6SG4sdmlhX2JyYW5jaDpGbixyZXNwb25zZV9wb3J0OkduLHNlbnRfcHJvdG9jb2w6am4scHJvdG9jb2xfbmFtZTpXbix0cmFuc3BvcnQ6Qm4sc2VudF9ieTp6bix2aWFfaG9zdDpWbix2aWFfcG9ydDpZbix0dGw6Sm4sV1dXX0F1dGhlbnRpY2F0ZTpLbixTZXNzaW9uX0V4cGlyZXM6JG4sc19lX2V4cGlyZXM6WG4sc19lX3BhcmFtczpRbixzX2VfcmVmcmVzaGVyOlpuLGV4dGVuc2lvbl9oZWFkZXI6ZXIsaGVhZGVyX3ZhbHVlOnRyLG1lc3NhZ2VfYm9keTpucix1dWlkX1VSSTpycix1dWlkOnNyLGhleDQ6bHIsaGV4ODppcixoZXgxMjpvcixSZWZlcl9Ubzp1cixSZXBsYWNlczphcixjYWxsX2lkOmNyLHJlcGxhY2VzX3BhcmFtOmhyLHRvX3RhZzpkcixmcm9tX3RhZzpwcixlYXJseV9mbGFnOmZyfTtpZih2b2lkIDAhPT1yKXtpZih2b2lkIDA9PT1UcltyXSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJ1bGUgbmFtZTogXCIrdChyKStcIi5cIil9ZWxzZSByPVwiQ1JMRlwiO3ZhciBfcj0wLHZyPTAsQ3I9MCxTcj1bXSxFcj1lKFwiLi9VUklcIiksQXI9ZShcIi4vTmFtZUFkZHJIZWFkZXJcIikseXI9e30sUnI9VHJbcl0oKTtpZihudWxsPT09UnJ8fF9yIT09bi5sZW5ndGgpe3ZhciBicj1NYXRoLm1heChfcixDciksSXI9YnI8bi5sZW5ndGg/bi5jaGFyQXQoYnIpOm51bGwsd3I9Z3IoKTtyZXR1cm4gbmV3IHRoaXMuU3ludGF4RXJyb3IobXIoU3IpLElyLGJyLHdyLmxpbmUsd3IuY29sdW1uKSwtMX1yZXR1cm4geXJ9LHRvU291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZX19O3JldHVybiBuLlN5bnRheEVycm9yPWZ1bmN0aW9uKGUsbixyLHMsbCl7ZnVuY3Rpb24gaShlLG4pe3ZhciByLHM7c3dpdGNoKGUubGVuZ3RoKXtjYXNlIDA6cj1cImVuZCBvZiBpbnB1dFwiO2JyZWFrO2Nhc2UgMTpyPWVbMF07YnJlYWs7ZGVmYXVsdDpyPWUuc2xpY2UoMCxlLmxlbmd0aC0xKS5qb2luKFwiLCBcIikrXCIgb3IgXCIrZVtlLmxlbmd0aC0xXX1yZXR1cm4gcz1uP3Qobik6XCJlbmQgb2YgaW5wdXRcIixcIkV4cGVjdGVkIFwiK3IrXCIgYnV0IFwiK3MrXCIgZm91bmQuXCJ9dGhpcy5uYW1lPVwiU3ludGF4RXJyb3JcIix0aGlzLmV4cGVjdGVkPWUsdGhpcy5mb3VuZD1uLHRoaXMubWVzc2FnZT1pKGUsbiksdGhpcy5vZmZzZXQ9cix0aGlzLmxpbmU9cyx0aGlzLmNvbHVtbj1sfSxuLlN5bnRheEVycm9yLnByb3RvdHlwZT1FcnJvci5wcm90b3R5cGUsbn0oKX0se1wiLi9OYW1lQWRkckhlYWRlclwiOjksXCIuL1VSSVwiOjI0fV0sNzpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUoXCJkZWJ1Z1wiKShcIkpzU0lQXCIpLHM9ZShcIi4uL3BhY2thZ2UuanNvblwiKTtyKFwidmVyc2lvbiAlc1wiLHMudmVyc2lvbik7dmFyIGw9ZShcInJ0Y25pbmphXCIpLGk9ZShcIi4vQ29uc3RhbnRzXCIpLG89ZShcIi4vRXhjZXB0aW9uc1wiKSx1PWUoXCIuL1V0aWxzXCIpLGE9ZShcIi4vVUFcIiksYz1lKFwiLi9VUklcIiksaD1lKFwiLi9OYW1lQWRkckhlYWRlclwiKSxkPWUoXCIuL0dyYW1tYXJcIikscD1lKFwiLi9Tb2NrZXRcIiksZj1lKFwiLi9XZWJTb2NrZXRJbnRlcmZhY2VcIiksbT10LmV4cG9ydHM9e0M6aSxFeGNlcHRpb25zOm8sVXRpbHM6dSxVQTphLFVSSTpjLE5hbWVBZGRySGVhZGVyOmgsU29ja2V0OnAsV2ViU29ja2V0SW50ZXJmYWNlOmYsR3JhbW1hcjpkLGRlYnVnOmUoXCJkZWJ1Z1wiKSxydGNuaW5qYTpsfTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhtLHtuYW1lOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy50aXRsZX19LHZlcnNpb246e2dldDpmdW5jdGlvbigpe3JldHVybiBzLnZlcnNpb259fX0pfSx7XCIuLi9wYWNrYWdlLmpzb25cIjo0NyxcIi4vQ29uc3RhbnRzXCI6MSxcIi4vRXhjZXB0aW9uc1wiOjUsXCIuL0dyYW1tYXJcIjo2LFwiLi9OYW1lQWRkckhlYWRlclwiOjksXCIuL1NvY2tldFwiOjE5LFwiLi9VQVwiOjIzLFwiLi9VUklcIjoyNCxcIi4vVXRpbHNcIjoyNSxcIi4vV2ViU29ja2V0SW50ZXJmYWNlXCI6MjYsZGVidWc6MzMscnRjbmluamE6Mzh9XSw4OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXt0aGlzLnVhPWUsdGhpcy5kYXRhPXt9LGwuRXZlbnRFbWl0dGVyLmNhbGwodGhpcyl9dC5leHBvcnRzPXI7dmFyIHM9ZShcInV0aWxcIiksbD1lKFwiZXZlbnRzXCIpLGk9ZShcIi4vQ29uc3RhbnRzXCIpLG89ZShcIi4vU0lQTWVzc2FnZVwiKSx1PWUoXCIuL1V0aWxzXCIpLGE9ZShcIi4vUmVxdWVzdFNlbmRlclwiKSxjPWUoXCIuL1RyYW5zYWN0aW9uc1wiKSxoPWUoXCIuL0V4Y2VwdGlvbnNcIik7cy5pbmhlcml0cyhyLGwuRXZlbnRFbWl0dGVyKSxyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixzLGwsdSxjLGg9ZTtpZih2b2lkIDA9PT1lfHx2b2lkIDA9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKTtpZihlPXRoaXMudWEubm9ybWFsaXplVGFyZ2V0KGUpLCFlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRhcmdldDogXCIraCk7bj1ufHx7fSxjPW4uZXh0cmFIZWFkZXJzJiZuLmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSx1PW4uZXZlbnRIYW5kbGVyc3x8e30sbD1uLmNvbnRlbnRUeXBlfHxcInRleHQvcGxhaW5cIix0aGlzLmNvbnRlbnRfdHlwZT1sO2ZvcihzIGluIHUpdGhpcy5vbihzLHVbc10pO3RoaXMuY2xvc2VkPSExLHRoaXMudWEuYXBwbGljYW50c1t0aGlzXT10aGlzLGMucHVzaChcIkNvbnRlbnQtVHlwZTogXCIrbCksdGhpcy5yZXF1ZXN0PW5ldyBvLk91dGdvaW5nUmVxdWVzdChpLk1FU1NBR0UsZSx0aGlzLnVhLG51bGwsYyksdD8odGhpcy5yZXF1ZXN0LmJvZHk9dCx0aGlzLmNvbnRlbnQ9dCk6dGhpcy5jb250ZW50PW51bGwscj1uZXcgYSh0aGlzLHRoaXMudWEpLHRoaXMubmV3TWVzc2FnZShcImxvY2FsXCIsdGhpcy5yZXF1ZXN0KSxyLnNlbmQoKX0sci5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKCF0aGlzLmNsb3NlZClzd2l0Y2goITApe2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTpkZWxldGUgdGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdLHRoaXMuZW1pdChcInN1Y2NlZWRlZFwiLHtvcmlnaW5hdG9yOlwicmVtb3RlXCIscmVzcG9uc2U6ZX0pO2JyZWFrO2RlZmF1bHQ6ZGVsZXRlIHRoaXMudWEuYXBwbGljYW50c1t0aGlzXSx0PXUuc2lwRXJyb3JDYXVzZShlLnN0YXR1c19jb2RlKSx0aGlzLmVtaXQoXCJmYWlsZWRcIix7b3JpZ2luYXRvcjpcInJlbW90ZVwiLHJlc3BvbnNlOmUsY2F1c2U6dH0pfX0sci5wcm90b3R5cGUub25SZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe3RoaXMuY2xvc2VkfHx0aGlzLmVtaXQoXCJmYWlsZWRcIix7b3JpZ2luYXRvcjpcInN5c3RlbVwiLGNhdXNlOmkuY2F1c2VzLlJFUVVFU1RfVElNRU9VVH0pfSxyLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fHRoaXMuZW1pdChcImZhaWxlZFwiLHtvcmlnaW5hdG9yOlwic3lzdGVtXCIsY2F1c2U6aS5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUn0pfSxyLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuY2xvc2VkPSEwLGRlbGV0ZSB0aGlzLnVhLmFwcGxpY2FudHNbdGhpc119LHIucHJvdG90eXBlLmluaXRfaW5jb21pbmc9ZnVuY3Rpb24oZSl7dmFyIHQ7dGhpcy5yZXF1ZXN0PWUsdGhpcy5jb250ZW50X3R5cGU9ZS5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIiksZS5ib2R5P3RoaXMuY29udGVudD1lLmJvZHk6dGhpcy5jb250ZW50PW51bGwsdGhpcy5uZXdNZXNzYWdlKFwicmVtb3RlXCIsZSksdD10aGlzLnVhLnRyYW5zYWN0aW9ucy5uaXN0W2UudmlhX2JyYW5jaF0sIXR8fHQuc3RhdGUhPT1jLkMuU1RBVFVTX1RSWUlORyYmdC5zdGF0ZSE9PWMuQy5TVEFUVVNfUFJPQ0VFRElOR3x8ZS5yZXBseSgyMDApfSxyLnByb3RvdHlwZS5hY2NlcHQ9ZnVuY3Rpb24oZSl7ZT1lfHx7fTt2YXIgdD1lLmV4dHJhSGVhZGVycyYmZS5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10sbj1lLmJvZHk7aWYoXCJpbmNvbWluZ1wiIT09dGhpcy5kaXJlY3Rpb24pdGhyb3cgbmV3IGguTm90U3VwcG9ydGVkRXJyb3IoJ1wiYWNjZXB0XCIgbm90IHN1cHBvcnRlZCBmb3Igb3V0Z29pbmcgTWVzc2FnZScpO3RoaXMucmVxdWVzdC5yZXBseSgyMDAsbnVsbCx0LG4pfSxyLnByb3RvdHlwZS5yZWplY3Q9ZnVuY3Rpb24oZSl7ZT1lfHx7fTt2YXIgdD1lLnN0YXR1c19jb2RlfHw0ODAsbj1lLnJlYXNvbl9waHJhc2Uscj1lLmV4dHJhSGVhZGVycyYmZS5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10scz1lLmJvZHk7aWYoXCJpbmNvbWluZ1wiIT09dGhpcy5kaXJlY3Rpb24pdGhyb3cgbmV3IGguTm90U3VwcG9ydGVkRXJyb3IoJ1wicmVqZWN0XCIgbm90IHN1cHBvcnRlZCBmb3Igb3V0Z29pbmcgTWVzc2FnZScpO2lmKDMwMD50fHx0Pj03MDApdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzX2NvZGU6IFwiK3QpO3RoaXMucmVxdWVzdC5yZXBseSh0LG4scixzKX0sci5wcm90b3R5cGUubmV3TWVzc2FnZT1mdW5jdGlvbihlLHQpe1wicmVtb3RlXCI9PT1lPyh0aGlzLmRpcmVjdGlvbj1cImluY29taW5nXCIsdGhpcy5sb2NhbF9pZGVudGl0eT10LnRvLHRoaXMucmVtb3RlX2lkZW50aXR5PXQuZnJvbSk6XCJsb2NhbFwiPT09ZSYmKHRoaXMuZGlyZWN0aW9uPVwib3V0Z29pbmdcIix0aGlzLmxvY2FsX2lkZW50aXR5PXQuZnJvbSx0aGlzLnJlbW90ZV9pZGVudGl0eT10LnRvKSx0aGlzLnVhLm5ld01lc3NhZ2Uoe29yaWdpbmF0b3I6ZSxtZXNzYWdlOnRoaXMscmVxdWVzdDp0fSl9fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL0V4Y2VwdGlvbnNcIjo1LFwiLi9SZXF1ZXN0U2VuZGVyXCI6MTcsXCIuL1NJUE1lc3NhZ2VcIjoxOCxcIi4vVHJhbnNhY3Rpb25zXCI6MjEsXCIuL1V0aWxzXCI6MjUsZXZlbnRzOjI4LHV0aWw6MzJ9XSw5OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbil7dmFyIHI7aWYoIShlJiZlIGluc3RhbmNlb2YgcykpdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyBvciBpbnZhbGlkIFwidXJpXCIgcGFyYW1ldGVyJyk7dGhpcy51cmk9ZSx0aGlzLnBhcmFtZXRlcnM9e307Zm9yKHIgaW4gbil0aGlzLnNldFBhcmFtKHIsbltyXSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7ZGlzcGxheV9uYW1lOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sc2V0OmZ1bmN0aW9uKGUpe3Q9MD09PWU/XCIwXCI6ZX19fSl9dC5leHBvcnRzPXI7dmFyIHM9ZShcIi4vVVJJXCIpLGw9ZShcIi4vR3JhbW1hclwiKTtyLnByb3RvdHlwZT17c2V0UGFyYW06ZnVuY3Rpb24oZSx0KXtlJiYodGhpcy5wYXJhbWV0ZXJzW2UudG9Mb3dlckNhc2UoKV09XCJ1bmRlZmluZWRcIj09dHlwZW9mIHR8fG51bGw9PT10P251bGw6dC50b1N0cmluZygpKX0sZ2V0UGFyYW06ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5wYXJhbWV0ZXJzW2UudG9Mb3dlckNhc2UoKV06dm9pZCAwfSxoYXNQYXJhbTpmdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKSYmITB8fCExOnZvaWQgMH0sZGVsZXRlUGFyYW06ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGU9ZS50b0xvd2VyQ2FzZSgpLHRoaXMucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShlKT8odD10aGlzLnBhcmFtZXRlcnNbZV0sZGVsZXRlIHRoaXMucGFyYW1ldGVyc1tlXSx0KTp2b2lkIDB9LGNsZWFyUGFyYW1zOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbWV0ZXJzPXt9fSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgcih0aGlzLnVyaS5jbG9uZSgpLHRoaXMuZGlzcGxheV9uYW1lLEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJhbWV0ZXJzKSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBlLHQ7ZT10aGlzLmRpc3BsYXlfbmFtZXx8MD09PXRoaXMuZGlzcGxheV9uYW1lPydcIicrdGhpcy5kaXNwbGF5X25hbWUrJ1wiICc6XCJcIixlKz1cIjxcIit0aGlzLnVyaS50b1N0cmluZygpK1wiPlwiO2Zvcih0IGluIHRoaXMucGFyYW1ldGVycyllKz1cIjtcIit0LG51bGwhPT10aGlzLnBhcmFtZXRlcnNbdF0mJihlKz1cIj1cIit0aGlzLnBhcmFtZXRlcnNbdF0pO3JldHVybiBlfX0sci5wYXJzZT1mdW5jdGlvbihlKXtyZXR1cm4gZT1sLnBhcnNlKGUsXCJOYW1lX0FkZHJfSGVhZGVyXCIpLC0xIT09ZT9lOnZvaWQgMH19LHtcIi4vR3JhbW1hclwiOjYsXCIuL1VSSVwiOjI0fV0sMTA6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7dmFyIG49dCxyPTAscz0wO2lmKGUuc3Vic3RyaW5nKG4sbisyKS5tYXRjaCgvKF5cXHJcXG4pLykpcmV0dXJuLTI7Zm9yKDswPT09cjspe2lmKHM9ZS5pbmRleE9mKFwiXFxyXFxuXCIsbiksLTE9PT1zKXJldHVybiBzOyFlLnN1YnN0cmluZyhzKzIscys0KS5tYXRjaCgvKF5cXHJcXG4pLykmJmUuY2hhckF0KHMrMikubWF0Y2goLyheXFxzKykvKT9uPXMrMjpyPXN9cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlLHQsbixyKXt2YXIgcyxsLGksYSxjPXQuaW5kZXhPZihcIjpcIixuKSxoPXQuc3Vic3RyaW5nKG4sYykudHJpbSgpLGQ9dC5zdWJzdHJpbmcoYysxLHIpLnRyaW0oKTtzd2l0Y2goaC50b0xvd2VyQ2FzZSgpKXtjYXNlXCJ2aWFcIjpjYXNlXCJ2XCI6ZS5hZGRIZWFkZXIoXCJ2aWFcIixkKSwxPT09ZS5nZXRIZWFkZXJzKFwidmlhXCIpLmxlbmd0aD8oYT1lLnBhcnNlSGVhZGVyKFwiVmlhXCIpLGEmJihlLnZpYT1hLGUudmlhX2JyYW5jaD1hLmJyYW5jaCkpOmE9MDticmVhaztjYXNlXCJmcm9tXCI6Y2FzZVwiZlwiOmUuc2V0SGVhZGVyKFwiZnJvbVwiLGQpLGE9ZS5wYXJzZUhlYWRlcihcImZyb21cIiksYSYmKGUuZnJvbT1hLGUuZnJvbV90YWc9YS5nZXRQYXJhbShcInRhZ1wiKSk7YnJlYWs7Y2FzZVwidG9cIjpjYXNlXCJ0XCI6ZS5zZXRIZWFkZXIoXCJ0b1wiLGQpLGE9ZS5wYXJzZUhlYWRlcihcInRvXCIpLGEmJihlLnRvPWEsZS50b190YWc9YS5nZXRQYXJhbShcInRhZ1wiKSk7YnJlYWs7Y2FzZVwicmVjb3JkLXJvdXRlXCI6Zm9yKGE9by5wYXJzZShkLFwiUmVjb3JkX1JvdXRlXCIpLC0xPT09YSYmKGE9dm9pZCAwKSxpPWEubGVuZ3RoLGw9MDtpPmw7bCsrKXM9YVtsXSxlLmFkZEhlYWRlcihcInJlY29yZC1yb3V0ZVwiLGQuc3Vic3RyaW5nKHMucG9zc2l0aW9uLHMub2Zmc2V0KSksZS5oZWFkZXJzW1wiUmVjb3JkLVJvdXRlXCJdW2UuZ2V0SGVhZGVycyhcInJlY29yZC1yb3V0ZVwiKS5sZW5ndGgtMV0ucGFyc2VkPXMucGFyc2VkO2JyZWFrO2Nhc2VcImNhbGwtaWRcIjpjYXNlXCJpXCI6ZS5zZXRIZWFkZXIoXCJjYWxsLWlkXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwiY2FsbC1pZFwiKSxhJiYoZS5jYWxsX2lkPWQpO2JyZWFrO2Nhc2VcImNvbnRhY3RcIjpjYXNlXCJtXCI6Zm9yKGE9by5wYXJzZShkLFwiQ29udGFjdFwiKSwtMT09PWEmJihhPXZvaWQgMCksaT1hLmxlbmd0aCxsPTA7aT5sO2wrKylzPWFbbF0sZS5hZGRIZWFkZXIoXCJjb250YWN0XCIsZC5zdWJzdHJpbmcocy5wb3NzaXRpb24scy5vZmZzZXQpKSxlLmhlYWRlcnMuQ29udGFjdFtlLmdldEhlYWRlcnMoXCJjb250YWN0XCIpLmxlbmd0aC0xXS5wYXJzZWQ9cy5wYXJzZWQ7YnJlYWs7Y2FzZVwiY29udGVudC1sZW5ndGhcIjpjYXNlXCJsXCI6ZS5zZXRIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiLGQpLGE9ZS5wYXJzZUhlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIpO2JyZWFrO2Nhc2VcImNvbnRlbnQtdHlwZVwiOmNhc2VcImNcIjplLnNldEhlYWRlcihcImNvbnRlbnQtdHlwZVwiLGQpLGE9ZS5wYXJzZUhlYWRlcihcImNvbnRlbnQtdHlwZVwiKTticmVhaztjYXNlXCJjc2VxXCI6ZS5zZXRIZWFkZXIoXCJjc2VxXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwiY3NlcVwiKSxhJiYoZS5jc2VxPWEudmFsdWUpLGUgaW5zdGFuY2VvZiB1LkluY29taW5nUmVzcG9uc2UmJihlLm1ldGhvZD1hLm1ldGhvZCk7YnJlYWs7Y2FzZVwibWF4LWZvcndhcmRzXCI6ZS5zZXRIZWFkZXIoXCJtYXgtZm9yd2FyZHNcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJtYXgtZm9yd2FyZHNcIik7YnJlYWs7Y2FzZVwid3d3LWF1dGhlbnRpY2F0ZVwiOmUuc2V0SGVhZGVyKFwid3d3LWF1dGhlbnRpY2F0ZVwiLGQpLGE9ZS5wYXJzZUhlYWRlcihcInd3dy1hdXRoZW50aWNhdGVcIik7YnJlYWs7Y2FzZVwicHJveHktYXV0aGVudGljYXRlXCI6ZS5zZXRIZWFkZXIoXCJwcm94eS1hdXRoZW50aWNhdGVcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJwcm94eS1hdXRoZW50aWNhdGVcIik7YnJlYWs7Y2FzZVwic2Vzc2lvbi1leHBpcmVzXCI6Y2FzZVwieFwiOmUuc2V0SGVhZGVyKFwic2Vzc2lvbi1leHBpcmVzXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwic2Vzc2lvbi1leHBpcmVzXCIpLGEmJihlLnNlc3Npb25fZXhwaXJlcz1hLmV4cGlyZXMsZS5zZXNzaW9uX2V4cGlyZXNfcmVmcmVzaGVyPWEucmVmcmVzaGVyKTticmVhaztjYXNlXCJyZWZlci10b1wiOmNhc2VcInJcIjplLnNldEhlYWRlcihcInJlZmVyLXRvXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwicmVmZXItdG9cIiksYSYmKGUucmVmZXJfdG89YSk7YnJlYWs7Y2FzZVwicmVwbGFjZXNcIjplLnNldEhlYWRlcihcInJlcGxhY2VzXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwicmVwbGFjZXNcIiksYSYmKGUucmVwbGFjZXM9YSk7YnJlYWs7Y2FzZVwiZXZlbnRcIjpjYXNlXCJvXCI6ZS5zZXRIZWFkZXIoXCJldmVudFwiLGQpLGE9ZS5wYXJzZUhlYWRlcihcImV2ZW50XCIpLGEmJihlLmV2ZW50PWEpO2JyZWFrO2RlZmF1bHQ6ZS5zZXRIZWFkZXIoaCxkKSxhPTB9cmV0dXJuIHZvaWQgMD09PWE/e2Vycm9yOidlcnJvciBwYXJzaW5nIGhlYWRlciBcIicraCsnXCInfTohMH12YXIgbD17fTt0LmV4cG9ydHM9bDt2YXIgaT1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpQYXJzZXJcIik7aS5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7dmFyIG89ZShcIi4vR3JhbW1hclwiKSx1PWUoXCIuL1NJUE1lc3NhZ2VcIik7bC5wYXJzZU1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbixsLGEsYyxoLGQ9MCxwPWUuaW5kZXhPZihcIlxcclxcblwiKTtpZigtMT09PXApcmV0dXJuIHZvaWQgaShcInBhcnNlTWVzc2FnZSgpIHwgbm8gQ1JMRiBmb3VuZCwgbm90IGEgU0lQIG1lc3NhZ2VcIik7aWYobD1lLnN1YnN0cmluZygwLHApLGg9by5wYXJzZShsLFwiUmVxdWVzdF9SZXNwb25zZVwiKSwtMT09PWgpcmV0dXJuIHZvaWQgaSgncGFyc2VNZXNzYWdlKCkgfCBlcnJvciBwYXJzaW5nIGZpcnN0IGxpbmUgb2YgU0lQIG1lc3NhZ2U6IFwiJytsKydcIicpO2ZvcihoLnN0YXR1c19jb2RlPyhuPW5ldyB1LkluY29taW5nUmVzcG9uc2Usbi5zdGF0dXNfY29kZT1oLnN0YXR1c19jb2RlLG4ucmVhc29uX3BocmFzZT1oLnJlYXNvbl9waHJhc2UpOihuPW5ldyB1LkluY29taW5nUmVxdWVzdCh0KSxuLm1ldGhvZD1oLm1ldGhvZCxuLnJ1cmk9aC51cmkpLG4uZGF0YT1lLGQ9cCsyOzspe2lmKHA9cihlLGQpLC0yPT09cCl7Yz1kKzI7YnJlYWt9aWYoLTE9PT1wKXJldHVybiB2b2lkIGkoXCJwYXJzZU1lc3NhZ2UoKSB8IG1hbGZvcm1lZCBtZXNzYWdlXCIpO2lmKGg9cyhuLGUsZCxwKSxoIT09ITApcmV0dXJuIHZvaWQgaShcInBhcnNlTWVzc2FnZSgpIHxcIixoLmVycm9yKTtkPXArMn1yZXR1cm4gbi5oYXNIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiKT8oYT1uLmdldEhlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIpLG4uYm9keT1lLnN1YnN0cihjLGEpKTpuLmJvZHk9ZS5zdWJzdHJpbmcoYyksbn19LHtcIi4vR3JhbW1hclwiOjYsXCIuL1NJUE1lc3NhZ2VcIjoxOCxkZWJ1ZzozM31dLDExOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXtHKFwibmV3XCIpLHRoaXMudWE9ZSx0aGlzLnN0YXR1cz1rLlNUQVRVU19OVUxMLHRoaXMuZGlhbG9nPW51bGwsdGhpcy5lYXJseURpYWxvZ3M9e30sdGhpcy5jb25uZWN0aW9uPW51bGwsdGhpcy5pc19jb25maXJtZWQ9ITEsdGhpcy5sYXRlX3NkcD0hMSx0aGlzLnJ0Y09mZmVyQ29uc3RyYWludHM9bnVsbCx0aGlzLnJ0Y0Fuc3dlckNvbnN0cmFpbnRzPW51bGwsdGhpcy5sb2NhbE1lZGlhU3RyZWFtPW51bGwsdGhpcy5sb2NhbE1lZGlhU3RyZWFtTG9jYWxseUdlbmVyYXRlZD0hMSx0aGlzLnJ0Y1JlYWR5PSEwLHRoaXMudGltZXJzPXthY2tUaW1lcjpudWxsLGV4cGlyZXNUaW1lcjpudWxsLGludml0ZTJ4eFRpbWVyOm51bGwsdXNlck5vQW5zd2VyVGltZXI6bnVsbH0sdGhpcy5kaXJlY3Rpb249bnVsbCx0aGlzLmxvY2FsX2lkZW50aXR5PW51bGwsdGhpcy5yZW1vdGVfaWRlbnRpdHk9bnVsbCx0aGlzLnN0YXJ0X3RpbWU9bnVsbCx0aGlzLmVuZF90aW1lPW51bGwsdGhpcy50b25lcz1udWxsLHRoaXMuYXVkaW9NdXRlZD0hMSx0aGlzLnZpZGVvTXV0ZWQ9ITEsdGhpcy5sb2NhbEhvbGQ9ITEsdGhpcy5yZW1vdGVIb2xkPSExLHRoaXMuc2Vzc2lvblRpbWVycz17ZW5hYmxlZDp0aGlzLnVhLmNvbmZpZ3VyYXRpb24uc2Vzc2lvbl90aW1lcnMsZGVmYXVsdEV4cGlyZXM6ei5TRVNTSU9OX0VYUElSRVMsY3VycmVudEV4cGlyZXM6bnVsbCxydW5uaW5nOiExLHJlZnJlc2hlcjohMSx0aW1lcjpudWxsfSx0aGlzLnJlZmVyU3Vic2NyaWJlcnM9e30sdGhpcy5kYXRhPXt9LEYuRXZlbnRFbWl0dGVyLmNhbGwodGhpcyl9ZnVuY3Rpb24gcyhlLHQpe3ZhciBuPXRoaXMscj1LLlQxO3RoaXMudGltZXJzLmludml0ZTJ4eFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24gcygpe24uc3RhdHVzPT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiYoZS5yZXBseSgyMDAsbnVsbCxbXCJDb250YWN0OiBcIituLmNvbnRhY3RdLHQpLHI8Sy5UMiYmKHI9MipyLHI+Sy5UMiYmKHI9Sy5UMikpLG4udGltZXJzLmludml0ZTJ4eFRpbWVyPXNldFRpbWVvdXQocyxyKSl9LHIpfWZ1bmN0aW9uIGwoKXt2YXIgZT10aGlzO3RoaXMudGltZXJzLmFja1RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnN0YXR1cz09PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmKEcoXCJubyBBQ0sgcmVjZWl2ZWQsIHRlcm1pbmF0aW5nIHRoZSBzZXNzaW9uXCIpLGNsZWFyVGltZW91dChlLnRpbWVycy5pbnZpdGUyeHhUaW1lciksdi5jYWxsKGUsei5CWUUpLHguY2FsbChlLFwicmVtb3RlXCIsbnVsbCx6LmNhdXNlcy5OT19BQ0spKX0sSy5USU1FUl9IKX1mdW5jdGlvbiBpKGUsdCl7dmFyIG49dGhpczt0aGlzLmNvbm5lY3Rpb249bmV3IFcuUlRDUGVlckNvbm5lY3Rpb24oZSx0KSx0aGlzLmNvbm5lY3Rpb24ub25hZGRzdHJlYW09ZnVuY3Rpb24oZSx0KXtuLmVtaXQoXCJhZGRzdHJlYW1cIix7c3RyZWFtOnR9KX0sdGhpcy5jb25uZWN0aW9uLm9ucmVtb3Zlc3RyZWFtPWZ1bmN0aW9uKGUsdCl7bi5lbWl0KFwicmVtb3Zlc3RyZWFtXCIse3N0cmVhbTp0fSl9LHRoaXMuY29ubmVjdGlvbi5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1mdW5jdGlvbihlLHQpe24uZW1pdChcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHtzdGF0ZTp0fSksXCJmYWlsZWRcIj09PXQmJm4udGVybWluYXRlKHtjYXVzZTp6LmNhdXNlcy5SVFBfVElNRU9VVCxzdGF0dXNfY29kZToyMDAscmVhc29uX3BocmFzZTp6LmNhdXNlcy5SVFBfVElNRU9VVH0pfX1mdW5jdGlvbiBvKGUsdCxuLHIpe2Z1bmN0aW9uIHMocil7aS5vbmljZWNhbmRpZGF0ZT1mdW5jdGlvbihuLHIpe2lmKCFyKXtpZihpLm9uaWNlY2FuZGlkYXRlPW51bGwsbC5ydGNSZWFkeT0hMCx0KXt2YXIgcz17b3JpZ2luYXRvcjpcImxvY2FsXCIsdHlwZTplLHNkcDppLmxvY2FsRGVzY3JpcHRpb24uc2RwfTtsLmVtaXQoXCJzZHBcIixzKSx0KHMuc2RwKX10PW51bGx9fSxpLnNldExvY2FsRGVzY3JpcHRpb24ocixmdW5jdGlvbigpe2lmKFwiY29tcGxldGVcIj09PWkuaWNlR2F0aGVyaW5nU3RhdGUpe2lmKGwucnRjUmVhZHk9ITAsdCl7dmFyIG49e29yaWdpbmF0b3I6XCJsb2NhbFwiLHR5cGU6ZSxzZHA6aS5sb2NhbERlc2NyaXB0aW9uLnNkcH07bC5lbWl0KFwic2RwXCIsbiksdChuLnNkcCl9dD1udWxsfX0sZnVuY3Rpb24oZSl7bC5ydGNSZWFkeT0hMCxuJiZuKGUpfSl9RyhcImNyZWF0ZUxvY2FsRGVzY3JpcHRpb24oKVwiKTt2YXIgbD10aGlzLGk9dGhpcy5jb25uZWN0aW9uO2lmKHRoaXMucnRjUmVhZHk9ITEsXCJvZmZlclwiPT09ZSlpLmNyZWF0ZU9mZmVyKHMsZnVuY3Rpb24oZSl7bC5ydGNSZWFkeT0hMCxuJiZuKGUpfSxyKTtlbHNle2lmKFwiYW5zd2VyXCIhPT1lKXRocm93IG5ldyBFcnJvcignY3JlYXRlTG9jYWxEZXNjcmlwdGlvbigpIHwgdHlwZSBtdXN0IGJlIFwib2ZmZXJcIiBvciBcImFuc3dlclwiLCBidXQgXCInK2UrJ1wiIHdhcyBnaXZlbicpO2kuY3JlYXRlQW5zd2VyKHMsZnVuY3Rpb24oZSl7bC5ydGNSZWFkeT0hMCxuJiZuKGUpfSxyKX19ZnVuY3Rpb24gdShlLHQsbil7dmFyIHIscyxsPVwiVUFTXCI9PT10P2UudG9fdGFnOmUuZnJvbV90YWcsaT1cIlVBU1wiPT09dD9lLmZyb21fdGFnOmUudG9fdGFnLG89ZS5jYWxsX2lkK2wraTtyZXR1cm4gcz10aGlzLmVhcmx5RGlhbG9nc1tvXSxuP3M/ITA6KHM9bmV3IFgodGhpcyxlLHQsWC5DLlNUQVRVU19FQVJMWSkscy5lcnJvcj8oRyhzLmVycm9yKSxVLmNhbGwodGhpcyxcInJlbW90ZVwiLGUsei5jYXVzZXMuSU5URVJOQUxfRVJST1IpLCExKToodGhpcy5lYXJseURpYWxvZ3Nbb109cywhMCkpOih0aGlzLmZyb21fdGFnPWUuZnJvbV90YWcsdGhpcy50b190YWc9ZS50b190YWcscz8ocy51cGRhdGUoZSx0KSx0aGlzLmRpYWxvZz1zLGRlbGV0ZSB0aGlzLmVhcmx5RGlhbG9nc1tvXSwhMCk6KHI9bmV3IFgodGhpcyxlLHQpLHIuZXJyb3I/KEcoci5lcnJvciksVS5jYWxsKHRoaXMsXCJyZW1vdGVcIixlLHouY2F1c2VzLklOVEVSTkFMX0VSUk9SKSwhMSk6KHRoaXMuZGlhbG9nPXIsITApKSl9ZnVuY3Rpb24gYShlKXtmdW5jdGlvbiB0KHQpe3Q9dHx8e30sZj0hMDt2YXIgbj10LnN0YXR1c19jb2RlfHw0MDMscj10LnJlYXNvbl9waHJhc2V8fFwiXCIscz10LmV4dHJhSGVhZGVycyYmdC5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W107aWYodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQpcmV0dXJuITE7aWYoMzAwPm58fG4+PTcwMCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrbik7ZS5yZXBseShuLHIscyl9ZnVuY3Rpb24gbigpe3IoZnVuY3Rpb24odCl7dmFyIG49W1wiQ29udGFjdDogXCIraC5jb250YWN0XTtFLmNhbGwoaCxlLG4pLGgubGF0ZV9zZHAmJih0PUMuY2FsbChoLHQpKSxlLnJlcGx5KDIwMCxudWxsLG4sdCxmdW5jdGlvbigpe2guc3RhdHVzPWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyxzLmNhbGwoaCxlLHQpLGwuY2FsbChoKX0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIG0uY2FsbGJhY2smJm0uY2FsbGJhY2soKX0sZnVuY3Rpb24oKXtlLnJlcGx5KDUwMCl9KX1mdW5jdGlvbiByKGUsdCl7aC5sYXRlX3NkcD9vLmNhbGwoaCxcIm9mZmVyXCIsZSx0LGgucnRjT2ZmZXJDb25zdHJhaW50cyk6KGgucmVtb3RlSG9sZD09PSEwJiZwPT09ITE/KGgucmVtb3RlSG9sZD0hMSxQLmNhbGwoaCxcInJlbW90ZVwiKSk6aC5yZW1vdGVIb2xkPT09ITEmJnA9PT0hMCYmKGgucmVtb3RlSG9sZD0hMCxNLmNhbGwoaCxcInJlbW90ZVwiKSksby5jYWxsKGgsXCJhbnN3ZXJcIixlLHQsaC5ydGNBbnN3ZXJDb25zdHJhaW50cykpfUcoXCJyZWNlaXZlUmVpbnZpdGUoKVwiKTt2YXIgaSx1LGEsYyxoPXRoaXMsZD1lLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSxwPSExLGY9ITEsbT17cmVxdWVzdDplLGNhbGxiYWNrOnZvaWQgMCxyZWplY3Q6dC5iaW5kKHRoaXMpfTtpZih0aGlzLmVtaXQoXCJyZWludml0ZVwiLG0pLCFmKWlmKGUuYm9keSl7aWYodGhpcy5sYXRlX3NkcD0hMSxcImFwcGxpY2F0aW9uL3NkcFwiIT09ZClyZXR1cm4gRyhcImludmFsaWQgQ29udGVudC1UeXBlXCIpLHZvaWQgZS5yZXBseSg0MTUpO2ZvcihpPWUucGFyc2VTRFAoKSx1PTA7dTxpLm1lZGlhLmxlbmd0aDt1KyspaWYoYz1pLm1lZGlhW3VdLC0xIT09cmUuaW5kZXhPZihjLnR5cGUpKXtpZihhPWMuZGlyZWN0aW9ufHxpLmRpcmVjdGlvbnx8XCJzZW5kcmVjdlwiLFwic2VuZG9ubHlcIiE9PWEmJlwiaW5hY3RpdmVcIiE9PWEpe3A9ITE7YnJlYWt9cD0hMH12YXIgZz17b3JpZ2luYXRvcjpcInJlbW90ZVwiLHR5cGU6XCJvZmZlclwiLHNkcDplLmJvZHl9O3RoaXMuZW1pdChcInNkcFwiLGcpLHRoaXMuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgVy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJvZmZlclwiLHNkcDpnLnNkcH0pLG4sZnVuY3Rpb24oKXtlLnJlcGx5KDQ4OCl9KX1lbHNlIHRoaXMubGF0ZV9zZHA9ITAsbigpfWZ1bmN0aW9uIGMoZSl7ZnVuY3Rpb24gdCh0KXt0PXR8fHt9LGE9ITA7dmFyIG49dC5zdGF0dXNfY29kZXx8NDAzLHI9dC5yZWFzb25fcGhyYXNlfHxcIlwiLHM9dC5leHRyYUhlYWRlcnMmJnQuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdO2lmKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEKXJldHVybiExO2lmKDMwMD5ufHxuPj03MDApdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzX2NvZGU6IFwiK24pO2UucmVwbHkobixyLHMpfUcoXCJyZWNlaXZlVXBkYXRlKClcIik7dmFyIG4scixzLGwsaT10aGlzLHU9ZS5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIiksYT0hMSxjPSExLGg9e3JlcXVlc3Q6ZSxjYWxsYmFjazp2b2lkIDAscmVqZWN0OnQuYmluZCh0aGlzKX07aWYodGhpcy5lbWl0KFwidXBkYXRlXCIsaCksIWEpe2lmKCFlLmJvZHkpe3ZhciBkPVtdO3JldHVybiBFLmNhbGwodGhpcyxlLGQpLHZvaWQgZS5yZXBseSgyMDAsbnVsbCxkKX1pZihcImFwcGxpY2F0aW9uL3NkcFwiIT09dSlyZXR1cm4gRyhcImludmFsaWQgQ29udGVudC1UeXBlXCIpLHZvaWQgZS5yZXBseSg0MTUpO2ZvcihuPWUucGFyc2VTRFAoKSxyPTA7cjxuLm1lZGlhLmxlbmd0aDtyKyspaWYobD1uLm1lZGlhW3JdLC0xIT09cmUuaW5kZXhPZihsLnR5cGUpKXtpZihzPWwuZGlyZWN0aW9ufHxuLmRpcmVjdGlvbnx8XCJzZW5kcmVjdlwiLFwic2VuZG9ubHlcIiE9PXMmJlwiaW5hY3RpdmVcIiE9PXMpe2M9ITE7YnJlYWt9Yz0hMH12YXIgcD17b3JpZ2luYXRvcjpcInJlbW90ZVwiLHR5cGU6XCJvZmZlclwiLHNkcDplLmJvZHl9O3RoaXMuZW1pdChcInNkcFwiLHApLHRoaXMuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgVy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJvZmZlclwiLHNkcDpwLnNkcH0pLGZ1bmN0aW9uKCl7aS5yZW1vdGVIb2xkPT09ITAmJmM9PT0hMT8oaS5yZW1vdGVIb2xkPSExLFAuY2FsbChpLFwicmVtb3RlXCIpKTppLnJlbW90ZUhvbGQ9PT0hMSYmYz09PSEwJiYoaS5yZW1vdGVIb2xkPSEwLE0uY2FsbChpLFwicmVtb3RlXCIpKSxvLmNhbGwoaSxcImFuc3dlclwiLGZ1bmN0aW9uKHQpe3ZhciBuPVtcIkNvbnRhY3Q6IFwiK2kuY29udGFjdF07RS5jYWxsKGksZSxuKSxlLnJlcGx5KDIwMCxudWxsLG4sdCksXCJmdW5jdGlvblwiPT10eXBlb2YgaC5jYWxsYmFjayYmaC5jYWxsYmFjaygpfSxmdW5jdGlvbigpe2UucmVwbHkoNTAwKX0pfSxmdW5jdGlvbigpe2UucmVwbHkoNDg4KX0sdGhpcy5ydGNBbnN3ZXJDb25zdHJhaW50cyl9fWZ1bmN0aW9uIGgoZSl7ZnVuY3Rpb24gdCh0LG4pe3ZhciBsLGk7cmV0dXJuIG49bnx8e30sdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3Q6bnVsbCx0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQ/ITE6KGw9bmV3IHIodGhpcy51YSksbC5vbihcInByb2dyZXNzXCIsZnVuY3Rpb24oZSl7cy5ub3RpZnkoZS5yZXNwb25zZS5zdGF0dXNfY29kZSxlLnJlc3BvbnNlLnJlYXNvbl9waHJhc2UpfSksbC5vbihcImFjY2VwdGVkXCIsZnVuY3Rpb24oZSl7cy5ub3RpZnkoZS5yZXNwb25zZS5zdGF0dXNfY29kZSxlLnJlc3BvbnNlLnJlYXNvbl9waHJhc2UpfSksbC5vbihcImZhaWxlZFwiLGZ1bmN0aW9uKGUpe2UubWVzc2FnZT9zLm5vdGlmeShlLm1lc3NhZ2Uuc3RhdHVzX2NvZGUsZS5tZXNzYWdlLnJlYXNvbl9waHJhc2UpOnMubm90aWZ5KDQ4NyxlLmNhdXNlKX0pLGUucmVmZXJfdG8udXJpLmhhc0hlYWRlcihcInJlcGxhY2VzXCIpJiYoaT1kZWNvZGVVUklDb21wb25lbnQoZS5yZWZlcl90by51cmkuZ2V0SGVhZGVyKFwicmVwbGFjZXNcIikpLG4uZXh0cmFIZWFkZXJzPW4uZXh0cmFIZWFkZXJzfHxbXSxuLmV4dHJhSGVhZGVycy5wdXNoKFwiUmVwbGFjZXM6IFwiK2kpKSx2b2lkIGwuY29ubmVjdChlLnJlZmVyX3RvLnVyaS50b0FvcigpLG4sdCkpfWZ1bmN0aW9uIG4oKXtzLm5vdGlmeSg2MDMpfUcoXCJyZWNlaXZlUmVmZXIoKVwiKTt2YXIgcyxsPXRoaXM7cmV0dXJuIHZvaWQgMD09PXR5cGVvZiBlLnJlZmVyX3RvPyhHKFwibm8gUmVmZXItVG8gaGVhZGVyIGZpZWxkIHByZXNlbnQgaW4gUkVGRVJcIiksdm9pZCBlLnJlcGx5KDQwMCkpOmUucmVmZXJfdG8udXJpLnNjaGVtZSE9PXouU0lQPyhHKFwiUmVmZXItVG8gaGVhZGVyIGZpZWxkIHBvaW50cyB0byBhIG5vbi1TSVAgVVJJIHNjaGVtZVwiKSx2b2lkIGUucmVwbHkoNDE2KSk6KGUucmVwbHkoMjAyKSxzPW5ldyB0ZSh0aGlzLGUuY3NlcSksdm9pZCB0aGlzLmVtaXQoXCJyZWZlclwiLHtyZXF1ZXN0OmUsYWNjZXB0OmZ1bmN0aW9uKGUsbil7dC5jYWxsKGwsZSxuKX0scmVqZWN0OmZ1bmN0aW9uKCl7bi5jYWxsKGwpfX0pKX1mdW5jdGlvbiBkKGUpe3N3aXRjaChHKFwicmVjZWl2ZU5vdGlmeSgpXCIpLHZvaWQgMD09PXR5cGVvZiBlLmV2ZW50JiZlLnJlcGx5KDQwMCksZS5ldmVudC5ldmVudCl7Y2FzZVwicmVmZXJcIjp2YXIgdD1lLmV2ZW50LnBhcmFtcy5pZCxuPXRoaXMucmVmZXJTdWJzY3JpYmVyc1t0XTtpZighbilyZXR1cm4gdm9pZCBlLnJlcGx5KDQ4MSxcIlN1YnNjcmlwdGlvbiBkb2VzIG5vdCBleGlzdFwiKTtuLnJlY2VpdmVOb3RpZnkoZSksZS5yZXBseSgyMDApO2JyZWFrO2RlZmF1bHQ6ZS5yZXBseSg0ODkpfX1mdW5jdGlvbiBwKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG47cmV0dXJuIHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZ0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRD8hMToobj1uZXcgcih0aGlzLnVhKSxuLm9uKFwiY29uZmlybWVkXCIsZnVuY3Rpb24oKXtzLnRlcm1pbmF0ZSgpfSksdm9pZCBuLmluaXRfaW5jb21pbmcoZSx0KSl9ZnVuY3Rpb24gbigpe0coXCJSZXBsYWNlZCBJTlZJVEUgcmVqZWN0ZWQgYnkgdGhlIHVzZXJcIiksZS5yZXBseSg0ODYpfUcoXCJyZWNlaXZlUmVwbGFjZXMoKVwiKTt2YXIgcz10aGlzO3RoaXMuZW1pdChcInJlcGxhY2VzXCIse3JlcXVlc3Q6ZSxhY2NlcHQ6ZnVuY3Rpb24oZSl7dC5jYWxsKHMsZSl9LHJlamVjdDpmdW5jdGlvbigpe24uY2FsbChzKX19KX1mdW5jdGlvbiBmKGUsdCxuKXtmdW5jdGlvbiByKGUpe3Uuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmKHUubG9jYWxNZWRpYVN0cmVhbT1lLGUmJnUuY29ubmVjdGlvbi5hZGRTdHJlYW0oZSksdS5lbWl0KFwicGVlcmNvbm5lY3Rpb25cIix7cGVlcmNvbm5lY3Rpb246dS5jb25uZWN0aW9ufSksdy5jYWxsKHUsdS5yZXF1ZXN0KSxvLmNhbGwodSxcIm9mZmVyXCIsbCxpLHQpKX1mdW5jdGlvbiBzKCl7dS5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiZVLmNhbGwodSxcImxvY2FsXCIsbnVsbCx6LmNhdXNlcy5VU0VSX0RFTklFRF9NRURJQV9BQ0NFU1MpfWZ1bmN0aW9uIGwoZSl7dS5pc0NhbmNlbGVkfHx1LnN0YXR1cz09PWsuU1RBVFVTX1RFUk1JTkFURUR8fCh1LnJlcXVlc3QuYm9keT1lLHUuc3RhdHVzPWsuU1RBVFVTX0lOVklURV9TRU5ULHUuZW1pdChcInNlbmRpbmdcIix7cmVxdWVzdDp1LnJlcXVlc3R9KSxhLnNlbmQoKSl9ZnVuY3Rpb24gaSgpe3Uuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmVS5jYWxsKHUsXCJzeXN0ZW1cIixudWxsLHouY2F1c2VzLldFQlJUQ19FUlJPUil9dmFyIHU9dGhpcyxhPW5ldyBRKHUsdGhpcy51YSk7dGhpcy5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7bS5jYWxsKHUsZSl9LG4/c2V0VGltZW91dChmdW5jdGlvbigpe3Iobil9KTplLmF1ZGlvfHxlLnZpZGVvPyh0aGlzLmxvY2FsTWVkaWFTdHJlYW1Mb2NhbGx5R2VuZXJhdGVkPSEwLFcuZ2V0VXNlck1lZGlhKGUscixzKSk6cihudWxsKX1mdW5jdGlvbiBtKGUpe0coXCJyZWNlaXZlSW52aXRlUmVzcG9uc2UoKVwiKTt2YXIgdCxuLHIscz10aGlzO2lmKHRoaXMuZGlhbG9nJiZlLnN0YXR1c19jb2RlPj0yMDAmJmUuc3RhdHVzX2NvZGU8PTI5OSlyZXR1cm4gdGhpcy5kaWFsb2cuaWQuY2FsbF9pZD09PWUuY2FsbF9pZCYmdGhpcy5kaWFsb2cuaWQubG9jYWxfdGFnPT09ZS5mcm9tX3RhZyYmdGhpcy5kaWFsb2cuaWQucmVtb3RlX3RhZz09PWUudG9fdGFnP3ZvaWQgdi5jYWxsKHRoaXMsei5BQ0spOihuPW5ldyBYKHRoaXMsZSxcIlVBQ1wiKSx2b2lkIDAhPT1uLmVycm9yP3ZvaWQgRyhuLmVycm9yKToobi5zZW5kUmVxdWVzdCh7b3duZXI6e3N0YXR1czprLlNUQVRVU19URVJNSU5BVEVEfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7fSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7fSxvbkRpYWxvZ0Vycm9yOmZ1bmN0aW9uKCl7fSxyZWNlaXZlUmVzcG9uc2U6ZnVuY3Rpb24oKXt9fSx6LkFDSyksdm9pZCBuLnNlbmRSZXF1ZXN0KHtvd25lcjp7c3RhdHVzOmsuU1RBVFVTX1RFUk1JTkFURUR9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXt9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXt9LG9uRGlhbG9nRXJyb3I6ZnVuY3Rpb24oKXt9LHJlY2VpdmVSZXNwb25zZTpmdW5jdGlvbigpe319LHouQllFKSkpO2lmKHRoaXMuaXNDYW5jZWxlZClyZXR1cm4gdGhpcy5pc0NhbmNlbGVkPSExLHZvaWQoZS5zdGF0dXNfY29kZT49MTAwJiZlLnN0YXR1c19jb2RlPDIwMD90aGlzLnJlcXVlc3QuY2FuY2VsKHRoaXMuY2FuY2VsUmVhc29uKTplLnN0YXR1c19jb2RlPj0yMDAmJmUuc3RhdHVzX2NvZGU8Mjk5JiZfLmNhbGwodGhpcyxlKSk7aWYodGhpcy5zdGF0dXM9PT1rLlNUQVRVU19JTlZJVEVfU0VOVHx8dGhpcy5zdGF0dXM9PT1rLlNUQVRVU18xWFhfUkVDRUlWRUQpc3dpdGNoKCEwKXtjYXNlL14xMDAkLy50ZXN0KGUuc3RhdHVzX2NvZGUpOnRoaXMuc3RhdHVzPWsuU1RBVFVTXzFYWF9SRUNFSVZFRDticmVhaztjYXNlL14xWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmlmKCFlLnRvX3RhZyl7RyhcIjF4eCByZXNwb25zZSByZWNlaXZlZCB3aXRob3V0IHRvIHRhZ1wiKTticmVha31pZihlLmhhc0hlYWRlcihcImNvbnRhY3RcIikmJiF1LmNhbGwodGhpcyxlLFwiVUFDXCIsITApKWJyZWFrO2lmKHRoaXMuc3RhdHVzPWsuU1RBVFVTXzFYWF9SRUNFSVZFRCxOLmNhbGwodGhpcyxcInJlbW90ZVwiLGUpLCFlLmJvZHkpYnJlYWs7cj17b3JpZ2luYXRvcjpcInJlbW90ZVwiLHR5cGU6XCJwcmFuc3dlclwiLHNkcDplLmJvZHl9LHRoaXMuZW1pdChcInNkcFwiLHIpLHRoaXMuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgVy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJwcmFuc3dlclwiLHNkcDpyLnNkcH0pLG51bGwsbnVsbCk7YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTppZih0aGlzLnN0YXR1cz1rLlNUQVRVU19DT05GSVJNRUQsIWUuYm9keSl7Xy5jYWxsKHRoaXMsZSw0MDAsei5jYXVzZXMuTUlTU0lOR19TRFApLFUuY2FsbCh0aGlzLFwicmVtb3RlXCIsZSx6LmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pO2JyZWFrfWlmKCF1LmNhbGwodGhpcyxlLFwiVUFDXCIpKWJyZWFrO3I9e29yaWdpbmF0b3I6XCJyZW1vdGVcIix0eXBlOlwiYW5zd2VyXCIsc2RwOmUuYm9keX0sdGhpcy5lbWl0KFwic2RwXCIsciksdGhpcy5jb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBXLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcImFuc3dlclwiLHNkcDpyLnNkcH0pLGZ1bmN0aW9uKCl7QS5jYWxsKHMsZSksRC5jYWxsKHMsXCJyZW1vdGVcIixlKSx2LmNhbGwocyx6LkFDSyksTy5jYWxsKHMsXCJsb2NhbFwiLG51bGwpfSxmdW5jdGlvbigpe18uY2FsbChzLGUsNDg4LFwiTm90IEFjY2VwdGFibGUgSGVyZVwiKSxVLmNhbGwocyxcInJlbW90ZVwiLGUsei5jYXVzZXMuQkFEX01FRElBX0RFU0NSSVBUSU9OKX0pO2JyZWFrO2RlZmF1bHQ6dD1KLnNpcEVycm9yQ2F1c2UoZS5zdGF0dXNfY29kZSksVS5jYWxsKHRoaXMsXCJyZW1vdGVcIixlLHQpfX1mdW5jdGlvbiBnKGUpe2Z1bmN0aW9uIHQoZSl7aWYoci5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYodi5jYWxsKHIsei5BQ0spLCF1KSl7aWYoQS5jYWxsKHIsZSksIWUuYm9keSlyZXR1cm4gdm9pZCBuKCk7aWYoXCJhcHBsaWNhdGlvbi9zZHBcIiE9PWUuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpKXJldHVybiB2b2lkIG4oKTt2YXIgdD17b3JpZ2luYXRvcjpcInJlbW90ZVwiLHR5cGU6XCJhbnN3ZXJcIixzZHA6ZS5ib2R5fTtyLmVtaXQoXCJzZHBcIix0KSxyLmNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFcuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwiYW5zd2VyXCIsc2RwOnQuc2RwfSksZnVuY3Rpb24oKXtsLnN1Y2NlZWRlZCYmbC5zdWNjZWVkZWQoZSl9LGZ1bmN0aW9uKCl7bigpfSl9fWZ1bmN0aW9uIG4oZSl7bC5mYWlsZWQmJmwuZmFpbGVkKGUpfUcoXCJzZW5kUmVpbnZpdGUoKVwiKSxlPWV8fHt9O3ZhciByPXRoaXMscz1lLmV4dHJhSGVhZGVyc3x8W10sbD1lLmV2ZW50SGFuZGxlcnN8fHt9LGk9ZS5ydGNPZmZlckNvbnN0cmFpbnRzfHx0aGlzLnJ0Y09mZmVyQ29uc3RyYWludHN8fG51bGwsdT0hMTtzLnB1c2goXCJDb250YWN0OiBcIit0aGlzLmNvbnRhY3QpLHMucHVzaChcIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vc2RwXCIpLHRoaXMuc2Vzc2lvblRpbWVycy5ydW5uaW5nJiZzLnB1c2goXCJTZXNzaW9uLUV4cGlyZXM6IFwiK3RoaXMuc2Vzc2lvblRpbWVycy5jdXJyZW50RXhwaXJlcytcIjtyZWZyZXNoZXI9XCIrKHRoaXMuc2Vzc2lvblRpbWVycy5yZWZyZXNoZXI/XCJ1YWNcIjpcInVhc1wiKSksby5jYWxsKHRoaXMsXCJvZmZlclwiLGZ1bmN0aW9uKGUpe2U9Qy5jYWxsKHIsZSk7dmFyIGw9bmV3IFoocix6LklOVklURSk7bC5zZW5kKHtleHRyYUhlYWRlcnM6cyxib2R5OmUsZXZlbnRIYW5kbGVyczp7b25TdWNjZXNzUmVzcG9uc2U6ZnVuY3Rpb24oZSl7dChlKSx1PSEwfSxvbkVycm9yUmVzcG9uc2U6ZnVuY3Rpb24oZSl7bihlKX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3Iub25UcmFuc3BvcnRFcnJvcigpfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7ci5vblJlcXVlc3RUaW1lb3V0KCl9LG9uRGlhbG9nRXJyb3I6ZnVuY3Rpb24oKXtyLm9uRGlhbG9nRXJyb3IoKX19fSl9LGZ1bmN0aW9uKCl7bigpfSxpKX1mdW5jdGlvbiBUKGUpe2Z1bmN0aW9uIHQoZSl7aWYoci5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYhYSlpZihBLmNhbGwocixlKSx1KXtpZighZS5ib2R5KXJldHVybiB2b2lkIG4oKTtpZihcImFwcGxpY2F0aW9uL3NkcFwiIT09ZS5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpcmV0dXJuIHZvaWQgbigpO3ZhciB0PXtvcmlnaW5hdG9yOlwicmVtb3RlXCIsdHlwZTpcImFuc3dlclwiLHNkcDplLmJvZHl9O3IuZW1pdChcInNkcFwiLHQpLHIuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgVy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6dC5zZHB9KSxmdW5jdGlvbigpe2wuc3VjY2VlZGVkJiZsLnN1Y2NlZWRlZChlKX0sZnVuY3Rpb24oKXtuKCl9KX1lbHNlIGwuc3VjY2VlZGVkJiZsLnN1Y2NlZWRlZChlKX1mdW5jdGlvbiBuKGUpe2wuZmFpbGVkJiZsLmZhaWxlZChlKX1HKFwic2VuZFVwZGF0ZSgpXCIpLGU9ZXx8e307dmFyIHI9dGhpcyxzPWUuZXh0cmFIZWFkZXJzfHxbXSxsPWUuZXZlbnRIYW5kbGVyc3x8e30saT1lLnJ0Y09mZmVyQ29uc3RyYWludHN8fHRoaXMucnRjT2ZmZXJDb25zdHJhaW50c3x8bnVsbCx1PWUuc2RwT2ZmZXJ8fCExLGE9ITE7aWYocy5wdXNoKFwiQ29udGFjdDogXCIrdGhpcy5jb250YWN0KSx0aGlzLnNlc3Npb25UaW1lcnMucnVubmluZyYmcy5wdXNoKFwiU2Vzc2lvbi1FeHBpcmVzOiBcIit0aGlzLnNlc3Npb25UaW1lcnMuY3VycmVudEV4cGlyZXMrXCI7cmVmcmVzaGVyPVwiKyh0aGlzLnNlc3Npb25UaW1lcnMucmVmcmVzaGVyP1widWFjXCI6XCJ1YXNcIikpLHUpcy5wdXNoKFwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9zZHBcIiksby5jYWxsKHRoaXMsXCJvZmZlclwiLGZ1bmN0aW9uKGUpe2U9Qy5jYWxsKHIsZSk7dmFyIGw9bmV3IFoocix6LlVQREFURSk7bC5zZW5kKHtleHRyYUhlYWRlcnM6cyxib2R5OmUsZXZlbnRIYW5kbGVyczp7b25TdWNjZXNzUmVzcG9uc2U6ZnVuY3Rpb24oZSl7dChlKSxhPSEwfSxvbkVycm9yUmVzcG9uc2U6ZnVuY3Rpb24oZSl7bihlKX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3Iub25UcmFuc3BvcnRFcnJvcigpfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7ci5vblJlcXVlc3RUaW1lb3V0KCl9LG9uRGlhbG9nRXJyb3I6ZnVuY3Rpb24oKXtyLm9uRGlhbG9nRXJyb3IoKX19fSl9LGZ1bmN0aW9uKCl7bigpfSxpKTtlbHNle3ZhciBjPW5ldyBaKHIsei5VUERBVEUpO2Muc2VuZCh7ZXh0cmFIZWFkZXJzOnMsZXZlbnRIYW5kbGVyczp7b25TdWNjZXNzUmVzcG9uc2U6ZnVuY3Rpb24oZSl7dChlKX0sb25FcnJvclJlc3BvbnNlOmZ1bmN0aW9uKGUpe24oZSl9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXtyLm9uVHJhbnNwb3J0RXJyb3IoKX0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe3Iub25SZXF1ZXN0VGltZW91dCgpfSxvbkRpYWxvZ0Vycm9yOmZ1bmN0aW9uKCl7ci5vbkRpYWxvZ0Vycm9yKCl9fX0pfX1mdW5jdGlvbiBfKGUsdCxuKXtHKFwiYWNjZXB0QW5kVGVybWluYXRlKClcIik7dmFyIHI9W107dCYmKG49bnx8ei5SRUFTT05fUEhSQVNFW3RdfHxcIlwiLHIucHVzaChcIlJlYXNvbjogU0lQIDtjYXVzZT1cIit0Kyc7IHRleHQ9XCInK24rJ1wiJykpLCh0aGlzLmRpYWxvZ3x8dS5jYWxsKHRoaXMsZSxcIlVBQ1wiKSkmJih2LmNhbGwodGhpcyx6LkFDSyksdi5jYWxsKHRoaXMsei5CWUUse2V4dHJhSGVhZGVyczpyfSkpLHRoaXMuc3RhdHVzPWsuU1RBVFVTX1RFUk1JTkFURUR9ZnVuY3Rpb24gdihlLHQpe0coXCJzZW5kUmVxdWVzdCgpXCIpO3ZhciBuPW5ldyBaKHRoaXMsZSk7bi5zZW5kKHQpfWZ1bmN0aW9uIEMoZSl7dmFyIHQsbixyO2lmKCF0aGlzLmxvY2FsSG9sZCYmIXRoaXMucmVtb3RlSG9sZClyZXR1cm4gZTtpZihlPUIucGFyc2UoZSksdGhpcy5sb2NhbEhvbGQmJiF0aGlzLnJlbW90ZUhvbGQpZm9yKEcoXCJtYW5nbGVPZmZlcigpIHwgbWUgb24gaG9sZCwgbWFuZ2xpbmcgb2ZmZXJcIiksbj1lLm1lZGlhLmxlbmd0aCx0PTA7bj50O3QrKylyPWUubWVkaWFbdF0sLTEhPT1yZS5pbmRleE9mKHIudHlwZSkmJihyLmRpcmVjdGlvbj9cInNlbmRyZWN2XCI9PT1yLmRpcmVjdGlvbj9yLmRpcmVjdGlvbj1cInNlbmRvbmx5XCI6XCJyZWN2b25seVwiPT09ci5kaXJlY3Rpb24mJihyLmRpcmVjdGlvbj1cImluYWN0aXZlXCIpOnIuZGlyZWN0aW9uPVwic2VuZG9ubHlcIik7ZWxzZSBpZih0aGlzLmxvY2FsSG9sZCYmdGhpcy5yZW1vdGVIb2xkKWZvcihHKFwibWFuZ2xlT2ZmZXIoKSB8IGJvdGggb24gaG9sZCwgbWFuZ2xpbmcgb2ZmZXJcIiksbj1lLm1lZGlhLmxlbmd0aCx0PTA7bj50O3QrKylyPWUubWVkaWFbdF0sLTEhPT1yZS5pbmRleE9mKHIudHlwZSkmJihyLmRpcmVjdGlvbj1cImluYWN0aXZlXCIpO2Vsc2UgaWYodGhpcy5yZW1vdGVIb2xkKWZvcihHKFwibWFuZ2xlT2ZmZXIoKSB8IHJlbW90ZSBvbiBob2xkLCBtYW5nbGluZyBvZmZlclwiKSxuPWUubWVkaWEubGVuZ3RoLHQ9MDtuPnQ7dCsrKXI9ZS5tZWRpYVt0XSwtMSE9PXJlLmluZGV4T2Yoci50eXBlKSYmKHIuZGlyZWN0aW9uP1wic2VuZHJlY3ZcIj09PXIuZGlyZWN0aW9uP3IuZGlyZWN0aW9uPVwicmVjdm9ubHlcIjpcInJlY3Zvbmx5XCI9PT1yLmRpcmVjdGlvbiYmKHIuZGlyZWN0aW9uPVwiaW5hY3RpdmVcIik6ci5kaXJlY3Rpb249XCJyZWN2b25seVwiKTtyZXR1cm4gQi53cml0ZShlKX1mdW5jdGlvbiBTKCl7dmFyIGU9ITAsdD0hMDsodGhpcy5sb2NhbEhvbGR8fHRoaXMucmVtb3RlSG9sZCkmJihlPSExLHQ9ITEpLHRoaXMuYXVkaW9NdXRlZCYmKGU9ITEpLHRoaXMudmlkZW9NdXRlZCYmKHQ9ITEpLFIuY2FsbCh0aGlzLCFlKSxiLmNhbGwodGhpcywhdCl9ZnVuY3Rpb24gRShlLHQpe2lmKHRoaXMuc2Vzc2lvblRpbWVycy5lbmFibGVkKXt2YXIgbjtlLnNlc3Npb25fZXhwaXJlcyYmZS5zZXNzaW9uX2V4cGlyZXM+PXouTUlOX1NFU1NJT05fRVhQSVJFUz8odGhpcy5zZXNzaW9uVGltZXJzLmN1cnJlbnRFeHBpcmVzPWUuc2Vzc2lvbl9leHBpcmVzLG49ZS5zZXNzaW9uX2V4cGlyZXNfcmVmcmVzaGVyfHxcInVhc1wiKToodGhpcy5zZXNzaW9uVGltZXJzLmN1cnJlbnRFeHBpcmVzPXRoaXMuc2Vzc2lvblRpbWVycy5kZWZhdWx0RXhwaXJlcyxuPVwidWFzXCIpLHQucHVzaChcIlNlc3Npb24tRXhwaXJlczogXCIrdGhpcy5zZXNzaW9uVGltZXJzLmN1cnJlbnRFeHBpcmVzK1wiO3JlZnJlc2hlcj1cIituKSx0aGlzLnNlc3Npb25UaW1lcnMucmVmcmVzaGVyPVwidWFzXCI9PT1uLHkuY2FsbCh0aGlzKX19ZnVuY3Rpb24gQShlKXtpZih0aGlzLnNlc3Npb25UaW1lcnMuZW5hYmxlZCl7dmFyIHQ7ZS5zZXNzaW9uX2V4cGlyZXMmJmUuc2Vzc2lvbl9leHBpcmVzPj16Lk1JTl9TRVNTSU9OX0VYUElSRVM/KHRoaXMuc2Vzc2lvblRpbWVycy5jdXJyZW50RXhwaXJlcz1lLnNlc3Npb25fZXhwaXJlcyx0PWUuc2Vzc2lvbl9leHBpcmVzX3JlZnJlc2hlcnx8XCJ1YWNcIik6KHRoaXMuc2Vzc2lvblRpbWVycy5jdXJyZW50RXhwaXJlcz10aGlzLnNlc3Npb25UaW1lcnMuZGVmYXVsdEV4cGlyZXMsdD1cInVhY1wiKSx0aGlzLnNlc3Npb25UaW1lcnMucmVmcmVzaGVyPVwidWFjXCI9PT10LHkuY2FsbCh0aGlzKX19ZnVuY3Rpb24geSgpe3ZhciBlPXRoaXMsdD10aGlzLnNlc3Npb25UaW1lcnMuY3VycmVudEV4cGlyZXM7dGhpcy5zZXNzaW9uVGltZXJzLnJ1bm5pbmc9ITAsY2xlYXJUaW1lb3V0KHRoaXMuc2Vzc2lvblRpbWVycy50aW1lciksdGhpcy5zZXNzaW9uVGltZXJzLnJlZnJlc2hlcj90aGlzLnNlc3Npb25UaW1lcnMudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2Uuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmKEcoXCJydW5TZXNzaW9uVGltZXIoKSB8IHNlbmRpbmcgc2Vzc2lvbiByZWZyZXNoIHJlcXVlc3RcIiksVC5jYWxsKGUse2V2ZW50SGFuZGxlcnM6e3N1Y2NlZWRlZDpmdW5jdGlvbih0KXtBLmNhbGwoZSx0KX19fSkpfSw1MDAqdCk6dGhpcy5zZXNzaW9uVGltZXJzLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJihqKFwicnVuU2Vzc2lvblRpbWVyKCkgfCB0aW1lciBleHBpcmVkLCB0ZXJtaW5hdGluZyB0aGUgc2Vzc2lvblwiKSxlLnRlcm1pbmF0ZSh7Y2F1c2U6ei5jYXVzZXMuUkVRVUVTVF9USU1FT1VULHN0YXR1c19jb2RlOjQwOCxyZWFzb25fcGhyYXNlOlwiU2Vzc2lvbiBUaW1lciBFeHBpcmVkXCJ9KSl9LDExMDAqdCl9ZnVuY3Rpb24gUihlKXt2YXIgdCxuLHIscyxsLGk9dGhpcy5jb25uZWN0aW9uLmdldExvY2FsU3RyZWFtcygpO2ZvcihyPWkubGVuZ3RoLHQ9MDtyPnQ7dCsrKWZvcihsPWlbdF0uZ2V0QXVkaW9UcmFja3MoKSxzPWwubGVuZ3RoLG49MDtzPm47bisrKWxbbl0uZW5hYmxlZD0hZX1mdW5jdGlvbiBiKGUpe3ZhciB0LG4scixzLGwsaT10aGlzLmNvbm5lY3Rpb24uZ2V0TG9jYWxTdHJlYW1zKCk7Zm9yKHI9aS5sZW5ndGgsdD0wO3I+dDt0KyspZm9yKGw9aVt0XS5nZXRWaWRlb1RyYWNrcygpLHM9bC5sZW5ndGgsbj0wO3M+bjtuKyspbFtuXS5lbmFibGVkPSFlfWZ1bmN0aW9uIEkoZSx0KXtHKFwibmV3UlRDU2Vzc2lvblwiKSx0aGlzLnVhLm5ld1JUQ1Nlc3Npb24oe29yaWdpbmF0b3I6ZSxzZXNzaW9uOnRoaXMscmVxdWVzdDp0fSl9ZnVuY3Rpb24gdyhlKXtHKFwic2Vzc2lvbiBjb25uZWN0aW5nXCIpLHRoaXMuZW1pdChcImNvbm5lY3RpbmdcIix7cmVxdWVzdDplfSl9ZnVuY3Rpb24gTihlLHQpe0coXCJzZXNzaW9uIHByb2dyZXNzXCIpLHRoaXMuZW1pdChcInByb2dyZXNzXCIse29yaWdpbmF0b3I6ZSxyZXNwb25zZTp0fHxudWxsfSl9ZnVuY3Rpb24gRChlLHQpe0coXCJzZXNzaW9uIGFjY2VwdGVkXCIpLHRoaXMuc3RhcnRfdGltZT1uZXcgRGF0ZSx0aGlzLmVtaXQoXCJhY2NlcHRlZFwiLHtvcmlnaW5hdG9yOmUscmVzcG9uc2U6dHx8bnVsbH0pfWZ1bmN0aW9uIE8oZSx0KXtHKFwic2Vzc2lvbiBjb25maXJtZWRcIiksdGhpcy5pc19jb25maXJtZWQ9ITAsdGhpcy5lbWl0KFwiY29uZmlybWVkXCIse29yaWdpbmF0b3I6ZSxhY2s6dHx8bnVsbH0pfWZ1bmN0aW9uIHgoZSx0LG4pe0coXCJzZXNzaW9uIGVuZGVkXCIpLHRoaXMuZW5kX3RpbWU9bmV3IERhdGUsdGhpcy5jbG9zZSgpLHRoaXMuZW1pdChcImVuZGVkXCIse29yaWdpbmF0b3I6ZSxtZXNzYWdlOnR8fG51bGwsY2F1c2U6bn0pfWZ1bmN0aW9uIFUoZSx0LG4pe0coXCJzZXNzaW9uIGZhaWxlZFwiKSx0aGlzLmNsb3NlKCksdGhpcy5lbWl0KFwiZmFpbGVkXCIse29yaWdpbmF0b3I6ZSxtZXNzYWdlOnR8fG51bGwsY2F1c2U6bn0pfWZ1bmN0aW9uIE0oZSl7RyhcInNlc3Npb24gb25ob2xkXCIpLFMuY2FsbCh0aGlzKSx0aGlzLmVtaXQoXCJob2xkXCIse29yaWdpbmF0b3I6ZX0pfWZ1bmN0aW9uIFAoZSl7RyhcInNlc3Npb24gb251bmhvbGRcIiksUy5jYWxsKHRoaXMpLHRoaXMuZW1pdChcInVuaG9sZFwiLHtvcmlnaW5hdG9yOmV9KX1mdW5jdGlvbiBxKGUpe0coXCJzZXNzaW9uIG9ubXV0ZVwiKSxTLmNhbGwodGhpcyksdGhpcy5lbWl0KFwibXV0ZWRcIix7YXVkaW86ZS5hdWRpbyx2aWRlbzplLnZpZGVvfSl9ZnVuY3Rpb24gTChlKXtHKFwic2Vzc2lvbiBvbnVubXV0ZVwiKSxTLmNhbGwodGhpcyksdGhpcy5lbWl0KFwidW5tdXRlZFwiLHthdWRpbzplLmF1ZGlvLHZpZGVvOmUudmlkZW99KX10LmV4cG9ydHM9cjt2YXIgaz17U1RBVFVTX05VTEw6MCxTVEFUVVNfSU5WSVRFX1NFTlQ6MSxTVEFUVVNfMVhYX1JFQ0VJVkVEOjIsU1RBVFVTX0lOVklURV9SRUNFSVZFRDozLFNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVI6NCxTVEFUVVNfQU5TV0VSRUQ6NSxTVEFUVVNfV0FJVElOR19GT1JfQUNLOjYsU1RBVFVTX0NBTkNFTEVEOjcsU1RBVFVTX1RFUk1JTkFURUQ6OCxTVEFUVVNfQ09ORklSTUVEOjl9O3IuQz1rO3ZhciBIPWUoXCJ1dGlsXCIpLEY9ZShcImV2ZW50c1wiKSxHPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlJUQ1Nlc3Npb25cIiksaj1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpSVENTZXNzaW9uXCIpO2oubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO3ZhciBXPWUoXCJydGNuaW5qYVwiKSxCPWUoXCJzZHAtdHJhbnNmb3JtXCIpLHo9ZShcIi4vQ29uc3RhbnRzXCIpLFY9ZShcIi4vRXhjZXB0aW9uc1wiKSxZPWUoXCIuL1RyYW5zYWN0aW9uc1wiKSxKPWUoXCIuL1V0aWxzXCIpLEs9ZShcIi4vVGltZXJzXCIpLCQ9ZShcIi4vU0lQTWVzc2FnZVwiKSxYPWUoXCIuL0RpYWxvZ1wiKSxRPWUoXCIuL1JlcXVlc3RTZW5kZXJcIiksWj1lKFwiLi9SVENTZXNzaW9uL1JlcXVlc3RcIiksZWU9ZShcIi4vUlRDU2Vzc2lvbi9EVE1GXCIpLHRlPWUoXCIuL1JUQ1Nlc3Npb24vUmVmZXJOb3RpZmllclwiKSxuZT1lKFwiLi9SVENTZXNzaW9uL1JlZmVyU3Vic2NyaWJlclwiKSxyZT1bXCJhdWRpb1wiLFwidmlkZW9cIl07SC5pbmhlcml0cyhyLEYuRXZlbnRFbWl0dGVyKSxyLnByb3RvdHlwZS5pc0luUHJvZ3Jlc3M9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5zdGF0dXMpe2Nhc2Ugay5TVEFUVVNfTlVMTDpjYXNlIGsuU1RBVFVTX0lOVklURV9TRU5UOmNhc2Ugay5TVEFUVVNfMVhYX1JFQ0VJVkVEOmNhc2Ugay5TVEFUVVNfSU5WSVRFX1JFQ0VJVkVEOmNhc2Ugay5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxyLnByb3RvdHlwZS5pc0VzdGFibGlzaGVkPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuc3RhdHVzKXtjYXNlIGsuU1RBVFVTX0FOU1dFUkVEOmNhc2Ugay5TVEFUVVNfV0FJVElOR19GT1JfQUNLOmNhc2Ugay5TVEFUVVNfQ09ORklSTUVEOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxyLnByb3RvdHlwZS5pc0VuZGVkPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuc3RhdHVzKXtjYXNlIGsuU1RBVFVTX0NBTkNFTEVEOmNhc2Ugay5TVEFUVVNfVEVSTUlOQVRFRDpyZXR1cm4hMDtkZWZhdWx0OnJldHVybiExfX0sci5wcm90b3R5cGUuaXNNdXRlZD1mdW5jdGlvbigpe3JldHVybnthdWRpbzp0aGlzLmF1ZGlvTXV0ZWQsdmlkZW86dGhpcy52aWRlb011dGVkfX0sci5wcm90b3R5cGUuaXNPbkhvbGQ9ZnVuY3Rpb24oKXtyZXR1cm57bG9jYWw6dGhpcy5sb2NhbEhvbGQscmVtb3RlOnRoaXMucmVtb3RlSG9sZH19LHIucHJvdG90eXBlLmlzUmVhZHlUb1JlT2ZmZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ydGNSZWFkeT90aGlzLmRpYWxvZz90aGlzLmRpYWxvZy51YWNfcGVuZGluZ19yZXBseT09PSEwfHx0aGlzLmRpYWxvZy51YXNfcGVuZGluZ19yZXBseT09PSEwPyhHKFwiaXNSZWFkeVRvUmVPZmZlcigpIHwgdGhlcmUgaXMgYW5vdGhlciBJTlZJVEUvVVBEQVRFIHRyYW5zYWN0aW9uIGluIHByb2dyZXNzXCIpLCExKTohMDooRyhcImlzUmVhZHlUb1JlT2ZmZXIoKSB8IHNlc3Npb24gbm90IGVzdGFibGlzaGVkIHlldFwiKSwhMSk6KEcoXCJpc1JlYWR5VG9SZU9mZmVyKCkgfCBpbnRlcm5hbCBXZWJSVEMgc3RhdHVzIG5vdCByZWFkeVwiKSwhMSl9LHIucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oZSx0LG4pe0coXCJjb25uZWN0KClcIiksdD10fHx7fTt2YXIgcixzLGw9ZSxvPXQuZXZlbnRIYW5kbGVyc3x8e30sdT10LmV4dHJhSGVhZGVycyYmdC5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10sYT10Lm1lZGlhQ29uc3RyYWludHN8fHthdWRpbzohMCx2aWRlbzohMH0sYz10Lm1lZGlhU3RyZWFtfHxudWxsLGg9dC5wY0NvbmZpZ3x8e2ljZVNlcnZlcnM6W119LGQ9dC5ydGNDb25zdHJhaW50c3x8bnVsbCxwPXQucnRjT2ZmZXJDb25zdHJhaW50c3x8bnVsbDtpZih0aGlzLnJ0Y09mZmVyQ29uc3RyYWludHM9cCx0aGlzLnJ0Y0Fuc3dlckNvbnN0cmFpbnRzPXQucnRjQW5zd2VyQ29uc3RyYWludHN8fG51bGwsdGhpcy5zZXNzaW9uVGltZXJzLmVuYWJsZWQmJkouaXNEZWNpbWFsKHQuc2Vzc2lvblRpbWVyc0V4cGlyZXMpJiYodC5zZXNzaW9uVGltZXJzRXhwaXJlcz49ei5NSU5fU0VTU0lPTl9FWFBJUkVTP3RoaXMuc2Vzc2lvblRpbWVycy5kZWZhdWx0RXhwaXJlcz10LnNlc3Npb25UaW1lcnNFeHBpcmVzOnRoaXMuc2Vzc2lvblRpbWVycy5kZWZhdWx0RXhwaXJlcz16LlNFU1NJT05fRVhQSVJFUyksdGhpcy5kYXRhPXQuZGF0YXx8dGhpcy5kYXRhLHZvaWQgMD09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBlbm91Z2ggYXJndW1lbnRzXCIpO2lmKCFXLmhhc1dlYlJUQygpKXRocm93IG5ldyBWLk5vdFN1cHBvcnRlZEVycm9yKFwiV2ViUlRDIG5vdCBzdXBwb3J0ZWRcIik7aWYoZT10aGlzLnVhLm5vcm1hbGl6ZVRhcmdldChlKSwhZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0YXJnZXQ6IFwiK2wpO2lmKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfTlVMTCl0aHJvdyBuZXcgVi5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7Zm9yKHIgaW4gbyl0aGlzLm9uKHIsb1tyXSk7dGhpcy5mcm9tX3RhZz1KLm5ld1RhZygpLHRoaXMuYW5vbnltb3VzPXQuYW5vbnltb3VzfHwhMSx0aGlzLmlzQ2FuY2VsZWQ9ITEscz17ZnJvbV90YWc6dGhpcy5mcm9tX3RhZ30sdGhpcy5jb250YWN0PXRoaXMudWEuY29udGFjdC50b1N0cmluZyh7YW5vbnltb3VzOnRoaXMuYW5vbnltb3VzLG91dGJvdW5kOiEwfSksdGhpcy5hbm9ueW1vdXMmJihzLmZyb21fZGlzcGxheV9uYW1lPVwiQW5vbnltb3VzXCIscy5mcm9tX3VyaT1cInNpcDphbm9ueW1vdXNAYW5vbnltb3VzLmludmFsaWRcIix1LnB1c2goXCJQLVByZWZlcnJlZC1JZGVudGl0eTogXCIrdGhpcy51YS5jb25maWd1cmF0aW9uLnVyaS50b1N0cmluZygpKSx1LnB1c2goXCJQcml2YWN5OiBpZFwiKSksdS5wdXNoKFwiQ29udGFjdDogXCIrdGhpcy5jb250YWN0KSx1LnB1c2goXCJDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcFwiKSx0aGlzLnNlc3Npb25UaW1lcnMuZW5hYmxlZCYmdS5wdXNoKFwiU2Vzc2lvbi1FeHBpcmVzOiBcIit0aGlzLnNlc3Npb25UaW1lcnMuZGVmYXVsdEV4cGlyZXMpLHRoaXMucmVxdWVzdD1uZXcgJC5PdXRnb2luZ1JlcXVlc3Qoei5JTlZJVEUsZSx0aGlzLnVhLHMsdSksdGhpcy5pZD10aGlzLnJlcXVlc3QuY2FsbF9pZCt0aGlzLmZyb21fdGFnLGkuY2FsbCh0aGlzLGgsZCksdGhpcy51YS5zZXNzaW9uc1t0aGlzLmlkXT10aGlzLHRoaXMuZGlyZWN0aW9uPVwib3V0Z29pbmdcIix0aGlzLmxvY2FsX2lkZW50aXR5PXRoaXMucmVxdWVzdC5mcm9tLHRoaXMucmVtb3RlX2lkZW50aXR5PXRoaXMucmVxdWVzdC50byxuP24odGhpcyk6SS5jYWxsKHRoaXMsXCJsb2NhbFwiLHRoaXMucmVxdWVzdCksZi5jYWxsKHRoaXMsYSxwLGMpfSxyLnByb3RvdHlwZS5pbml0X2luY29taW5nPWZ1bmN0aW9uKGUsdCl7RyhcImluaXRfaW5jb21pbmcoKVwiKTt2YXIgbixyPXRoaXMscz1lLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKTtyZXR1cm4gZS5ib2R5JiZcImFwcGxpY2F0aW9uL3NkcFwiIT09cz92b2lkIGUucmVwbHkoNDE1KToodGhpcy5zdGF0dXM9ay5TVEFUVVNfSU5WSVRFX1JFQ0VJVkVELHRoaXMuZnJvbV90YWc9ZS5mcm9tX3RhZyx0aGlzLmlkPWUuY2FsbF9pZCt0aGlzLmZyb21fdGFnLHRoaXMucmVxdWVzdD1lLHRoaXMuY29udGFjdD10aGlzLnVhLmNvbnRhY3QudG9TdHJpbmcoKSx0aGlzLnVhLnNlc3Npb25zW3RoaXMuaWRdPXRoaXMsZS5oYXNIZWFkZXIoXCJleHBpcmVzXCIpJiYobj0xZTMqZS5nZXRIZWFkZXIoXCJleHBpcmVzXCIpKSxlLnRvX3RhZz1KLm5ld1RhZygpLHUuY2FsbCh0aGlzLGUsXCJVQVNcIiwhMCk/KGUuYm9keT90aGlzLmxhdGVfc2RwPSExOnRoaXMubGF0ZV9zZHA9ITAsdGhpcy5zdGF0dXM9ay5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSLHRoaXMudGltZXJzLnVzZXJOb0Fuc3dlclRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnJlcGx5KDQwOCksVS5jYWxsKHIsXCJsb2NhbFwiLG51bGwsei5jYXVzZXMuTk9fQU5TV0VSKX0sdGhpcy51YS5jb25maWd1cmF0aW9uLm5vX2Fuc3dlcl90aW1lb3V0KSxuJiYodGhpcy50aW1lcnMuZXhwaXJlc1RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLnN0YXR1cz09PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUiYmKGUucmVwbHkoNDg3KSxVLmNhbGwocixcInN5c3RlbVwiLG51bGwsei5jYXVzZXMuRVhQSVJFUykpO1xufSxuKSksdGhpcy5kaXJlY3Rpb249XCJpbmNvbWluZ1wiLHRoaXMubG9jYWxfaWRlbnRpdHk9ZS50byx0aGlzLnJlbW90ZV9pZGVudGl0eT1lLmZyb20sdD90KHRoaXMpOkkuY2FsbCh0aGlzLFwicmVtb3RlXCIsZSksdm9pZCh0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJihlLnJlcGx5KDE4MCxudWxsLFtcIkNvbnRhY3Q6IFwiK3IuY29udGFjdF0pLE4uY2FsbChyLFwibG9jYWxcIixudWxsKSkpKTp2b2lkIGUucmVwbHkoNTAwLFwiTWlzc2luZyBDb250YWN0IGhlYWRlciBmaWVsZFwiKSl9LHIucHJvdG90eXBlLmFuc3dlcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe2lmKHYuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRClpZih2LmxvY2FsTWVkaWFTdHJlYW09ZSxlJiZ2LmNvbm5lY3Rpb24uYWRkU3RyZWFtKGUpLHYucmVxdWVzdC5ib2R5fHx2LmVtaXQoXCJwZWVyY29ubmVjdGlvblwiLHtwZWVyY29ubmVjdGlvbjp2LmNvbm5lY3Rpb259KSx2LmxhdGVfc2RwKXIoKTtlbHNle3ZhciB0PXtvcmlnaW5hdG9yOlwicmVtb3RlXCIsdHlwZTpcIm9mZmVyXCIsc2RwOkMuYm9keX07di5lbWl0KFwic2RwXCIsdCksdi5jb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBXLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcIm9mZmVyXCIsc2RwOnQuc2RwfSkscixmdW5jdGlvbigpe0MucmVwbHkoNDg4KSxVLmNhbGwodixcInN5c3RlbVwiLG51bGwsei5jYXVzZXMuV0VCUlRDX0VSUk9SKX0pfX1mdW5jdGlvbiBuKCl7di5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYoQy5yZXBseSg0ODApLFUuY2FsbCh2LFwibG9jYWxcIixudWxsLHouY2F1c2VzLlVTRVJfREVOSUVEX01FRElBX0FDQ0VTUykpfWZ1bmN0aW9uIHIoKXt3LmNhbGwodixDKSx2LmxhdGVfc2RwP28uY2FsbCh2LFwib2ZmZXJcIixhLGMsdi5ydGNPZmZlckNvbnN0cmFpbnRzKTpvLmNhbGwodixcImFuc3dlclwiLGEsYyxJKX1mdW5jdGlvbiBhKGUpe2Z1bmN0aW9uIHQoKXt2LnN0YXR1cz1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0sscy5jYWxsKHYsQyxlKSxsLmNhbGwodiksRC5jYWxsKHYsXCJsb2NhbFwiKX1mdW5jdGlvbiBuKCl7VS5jYWxsKHYsXCJzeXN0ZW1cIixudWxsLHouY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpfXYuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmKEUuY2FsbCh2LEMsUyksQy5yZXBseSgyMDAsbnVsbCxTLGUsdCxuKSl9ZnVuY3Rpb24gYygpe3Yuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmKEMucmVwbHkoNTAwKSxVLmNhbGwodixcInN5c3RlbVwiLG51bGwsei5jYXVzZXMuV0VCUlRDX0VSUk9SKSl9RyhcImFuc3dlcigpXCIpLGU9ZXx8e307dmFyIGgsZCxwLGYsbT0hMSxnPSExLFQ9ITEsXz0hMSx2PXRoaXMsQz10aGlzLnJlcXVlc3QsUz1lLmV4dHJhSGVhZGVycyYmZS5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10sQT1lLm1lZGlhQ29uc3RyYWludHN8fHt9LHk9ZS5tZWRpYVN0cmVhbXx8bnVsbCxSPWUucGNDb25maWd8fHtpY2VTZXJ2ZXJzOltdfSxiPWUucnRjQ29uc3RyYWludHN8fG51bGwsST1lLnJ0Y0Fuc3dlckNvbnN0cmFpbnRzfHxudWxsO2lmKHRoaXMucnRjQW5zd2VyQ29uc3RyYWludHM9SSx0aGlzLnJ0Y09mZmVyQ29uc3RyYWludHM9ZS5ydGNPZmZlckNvbnN0cmFpbnRzfHxudWxsLHRoaXMuc2Vzc2lvblRpbWVycy5lbmFibGVkJiZKLmlzRGVjaW1hbChlLnNlc3Npb25UaW1lcnNFeHBpcmVzKSYmKGUuc2Vzc2lvblRpbWVyc0V4cGlyZXM+PXouTUlOX1NFU1NJT05fRVhQSVJFUz90aGlzLnNlc3Npb25UaW1lcnMuZGVmYXVsdEV4cGlyZXM9ZS5zZXNzaW9uVGltZXJzRXhwaXJlczp0aGlzLnNlc3Npb25UaW1lcnMuZGVmYXVsdEV4cGlyZXM9ei5TRVNTSU9OX0VYUElSRVMpLHRoaXMuZGF0YT1lLmRhdGF8fHRoaXMuZGF0YSxcImluY29taW5nXCIhPT10aGlzLmRpcmVjdGlvbil0aHJvdyBuZXcgVi5Ob3RTdXBwb3J0ZWRFcnJvcignXCJhbnN3ZXJcIiBub3Qgc3VwcG9ydGVkIGZvciBvdXRnb2luZyBSVENTZXNzaW9uJyk7aWYodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVIpdGhyb3cgbmV3IFYuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpO2lmKHRoaXMuc3RhdHVzPWsuU1RBVFVTX0FOU1dFUkVELCF1LmNhbGwodGhpcyxDLFwiVUFTXCIpKXJldHVybiB2b2lkIEMucmVwbHkoNTAwLFwiRXJyb3IgY3JlYXRpbmcgZGlhbG9nXCIpO2ZvcihjbGVhclRpbWVvdXQodGhpcy50aW1lcnMudXNlck5vQW5zd2VyVGltZXIpLFMudW5zaGlmdChcIkNvbnRhY3Q6IFwiK3YuY29udGFjdCkscD1DLnBhcnNlU0RQKCksQXJyYXkuaXNBcnJheShwLm1lZGlhKXx8KHAubWVkaWE9W3AubWVkaWFdKSxoPXAubWVkaWEubGVuZ3RoO2gtLTspe3ZhciBOPXAubWVkaWFbaF07XCJhdWRpb1wiPT09Ti50eXBlJiYobT0hMCxOLmRpcmVjdGlvbiYmXCJzZW5kcmVjdlwiIT09Ti5kaXJlY3Rpb258fChUPSEwKSksXCJ2aWRlb1wiPT09Ti50eXBlJiYoZz0hMCxOLmRpcmVjdGlvbiYmXCJzZW5kcmVjdlwiIT09Ti5kaXJlY3Rpb258fChfPSEwKSl9aWYoeSYmQS5hdWRpbz09PSExKWZvcihmPXkuZ2V0QXVkaW9UcmFja3MoKSxkPWYubGVuZ3RoLGg9MDtkPmg7aCsrKXkucmVtb3ZlVHJhY2soZltoXSk7aWYoeSYmQS52aWRlbz09PSExKWZvcihmPXkuZ2V0VmlkZW9UcmFja3MoKSxkPWYubGVuZ3RoLGg9MDtkPmg7aCsrKXkucmVtb3ZlVHJhY2soZltoXSk7eXx8dm9pZCAwIT09QS5hdWRpb3x8KEEuYXVkaW89VCkseXx8dm9pZCAwIT09QS52aWRlb3x8KEEudmlkZW89XykseXx8bXx8KEEuYXVkaW89ITEpLHl8fGd8fChBLnZpZGVvPSExKSxpLmNhbGwodGhpcyxSLGIpLHk/dCh5KTpBLmF1ZGlvfHxBLnZpZGVvPyh2LmxvY2FsTWVkaWFTdHJlYW1Mb2NhbGx5R2VuZXJhdGVkPSEwLFcuZ2V0VXNlck1lZGlhKEEsdCxuKSk6dChudWxsKX0sci5wcm90b3R5cGUudGVybWluYXRlPWZ1bmN0aW9uKGUpe0coXCJ0ZXJtaW5hdGUoKVwiKSxlPWV8fHt9O3ZhciB0LG4scj1lLmNhdXNlfHx6LmNhdXNlcy5CWUUscz1lLnN0YXR1c19jb2RlLGw9ZS5yZWFzb25fcGhyYXNlLGk9ZS5leHRyYUhlYWRlcnMmJmUuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLG89ZS5ib2R5LHU9dGhpcztpZih0aGlzLnN0YXR1cz09PWsuU1RBVFVTX1RFUk1JTkFURUQpdGhyb3cgbmV3IFYuSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zdGF0dXMpO3N3aXRjaCh0aGlzLnN0YXR1cyl7Y2FzZSBrLlNUQVRVU19OVUxMOmNhc2Ugay5TVEFUVVNfSU5WSVRFX1NFTlQ6Y2FzZSBrLlNUQVRVU18xWFhfUkVDRUlWRUQ6aWYoRyhcImNhbmNlbGluZyBzZXNzc2lvblwiKSxzJiYoMjAwPnN8fHM+PTcwMCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzX2NvZGU6IFwiK3MpO3MmJihsPWx8fHouUkVBU09OX1BIUkFTRVtzXXx8XCJcIix0PVwiU0lQIDtjYXVzZT1cIitzKycgO3RleHQ9XCInK2wrJ1wiJyksdGhpcy5zdGF0dXM9PT1rLlNUQVRVU19OVUxMPyh0aGlzLmlzQ2FuY2VsZWQ9ITAsdGhpcy5jYW5jZWxSZWFzb249dCk6dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19JTlZJVEVfU0VOVD8odGhpcy5pc0NhbmNlbGVkPSEwLHRoaXMuY2FuY2VsUmVhc29uPXQpOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfMVhYX1JFQ0VJVkVEJiZ0aGlzLnJlcXVlc3QuY2FuY2VsKHQpLHRoaXMuc3RhdHVzPWsuU1RBVFVTX0NBTkNFTEVELFUuY2FsbCh0aGlzLFwibG9jYWxcIixudWxsLHouY2F1c2VzLkNBTkNFTEVEKTticmVhaztjYXNlIGsuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUjpjYXNlIGsuU1RBVFVTX0FOU1dFUkVEOmlmKEcoXCJyZWplY3Rpbmcgc2Vzc2lvblwiKSxzPXN8fDQ4MCwzMDA+c3x8cz49NzAwKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIitzKTt0aGlzLnJlcXVlc3QucmVwbHkocyxsLGksbyksVS5jYWxsKHRoaXMsXCJsb2NhbFwiLG51bGwsei5jYXVzZXMuUkVKRUNURUQpO2JyZWFrO2Nhc2Ugay5TVEFUVVNfV0FJVElOR19GT1JfQUNLOmNhc2Ugay5TVEFUVVNfQ09ORklSTUVEOmlmKEcoXCJ0ZXJtaW5hdGluZyBzZXNzaW9uXCIpLGw9ZS5yZWFzb25fcGhyYXNlfHx6LlJFQVNPTl9QSFJBU0Vbc118fFwiXCIscyYmKDIwMD5zfHxzPj03MDApKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIitzKTtzJiZpLnB1c2goXCJSZWFzb246IFNJUCA7Y2F1c2U9XCIrcysnOyB0ZXh0PVwiJytsKydcIicpLHRoaXMuc3RhdHVzPT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZcImluY29taW5nXCI9PT10aGlzLmRpcmVjdGlvbiYmdGhpcy5yZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbi5zdGF0ZSE9PVkuQy5TVEFUVVNfVEVSTUlOQVRFRD8obj10aGlzLmRpYWxvZyx0aGlzLnJlY2VpdmVSZXF1ZXN0PWZ1bmN0aW9uKGUpe2UubWV0aG9kPT09ei5BQ0smJih2LmNhbGwodGhpcyx6LkJZRSx7ZXh0cmFIZWFkZXJzOmksYm9keTpvfSksbi50ZXJtaW5hdGUoKSl9LHRoaXMucmVxdWVzdC5zZXJ2ZXJfdHJhbnNhY3Rpb24ub24oXCJzdGF0ZUNoYW5nZWRcIixmdW5jdGlvbigpe3RoaXMuc3RhdGU9PT1ZLkMuU1RBVFVTX1RFUk1JTkFURUQmJih2LmNhbGwodSx6LkJZRSx7ZXh0cmFIZWFkZXJzOmksYm9keTpvfSksbi50ZXJtaW5hdGUoKSl9KSx4LmNhbGwodGhpcyxcImxvY2FsXCIsbnVsbCxyKSx0aGlzLmRpYWxvZz1uLHRoaXMudWEuZGlhbG9nc1tuLmlkLnRvU3RyaW5nKCldPW4pOih2LmNhbGwodGhpcyx6LkJZRSx7ZXh0cmFIZWFkZXJzOmksYm9keTpvfSkseC5jYWxsKHRoaXMsXCJsb2NhbFwiLG51bGwscikpfX0sci5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtHKFwiY2xvc2UoKVwiKTt2YXIgZTtpZih0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQpe2lmKHRoaXMuY29ubmVjdGlvbil0cnl7dGhpcy5jb25uZWN0aW9uLmNsb3NlKCl9Y2F0Y2godCl7aihcImNsb3NlKCkgfCBlcnJvciBjbG9zaW5nIHRoZSBSVENQZWVyQ29ubmVjdGlvbjogJW9cIix0KX10aGlzLmxvY2FsTWVkaWFTdHJlYW0mJnRoaXMubG9jYWxNZWRpYVN0cmVhbUxvY2FsbHlHZW5lcmF0ZWQmJihHKFwiY2xvc2UoKSB8IGNsb3NpbmcgbG9jYWwgTWVkaWFTdHJlYW1cIiksVy5jbG9zZU1lZGlhU3RyZWFtKHRoaXMubG9jYWxNZWRpYVN0cmVhbSkpO2ZvcihlIGluIHRoaXMudGltZXJzKWNsZWFyVGltZW91dCh0aGlzLnRpbWVyc1tlXSk7Y2xlYXJUaW1lb3V0KHRoaXMuc2Vzc2lvblRpbWVycy50aW1lciksdGhpcy5kaWFsb2cmJih0aGlzLmRpYWxvZy50ZXJtaW5hdGUoKSxkZWxldGUgdGhpcy5kaWFsb2cpO2ZvcihlIGluIHRoaXMuZWFybHlEaWFsb2dzKXRoaXMuZWFybHlEaWFsb2dzW2VdLnRlcm1pbmF0ZSgpLGRlbGV0ZSB0aGlzLmVhcmx5RGlhbG9nc1tlXTt0aGlzLnN0YXR1cz1rLlNUQVRVU19URVJNSU5BVEVELGRlbGV0ZSB0aGlzLnVhLnNlc3Npb25zW3RoaXMuaWRdfX0sci5wcm90b3R5cGUuc2VuZERUTUY9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7dmFyIGUsbztpZihpLnN0YXR1cz09PWsuU1RBVFVTX1RFUk1JTkFURUR8fCFpLnRvbmVzfHxsPj1pLnRvbmVzLmxlbmd0aClyZXR1cm4gdm9pZChpLnRvbmVzPW51bGwpO2lmKGU9aS50b25lc1tsXSxsKz0xLFwiLFwiPT09ZSlvPTJlMztlbHNle3ZhciB1PW5ldyBlZShpKTt0LmV2ZW50SGFuZGxlcnM9e2ZhaWxlZDpmdW5jdGlvbigpe2kudG9uZXM9bnVsbH19LHUuc2VuZChlLHQpLG89citzfXNldFRpbWVvdXQobixvKX1HKFwic2VuZERUTUYoKSB8IHRvbmVzOiAlc1wiLGUpO3ZhciByLHMsbD0wLGk9dGhpcztpZih0PXR8fHt9LHI9dC5kdXJhdGlvbnx8bnVsbCxzPXQuaW50ZXJUb25lR2FwfHxudWxsLHZvaWQgMD09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBlbm91Z2ggYXJndW1lbnRzXCIpO2lmKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEJiZ0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyl0aHJvdyBuZXcgVi5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUmJihlPWUudG9TdHJpbmcoKSksIWV8fFwic3RyaW5nXCIhPXR5cGVvZiBlfHwhZS5tYXRjaCgvXlswLTlBLUQjKixdKyQvaSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdG9uZXM6IFwiK2UpO2lmKHImJiFKLmlzRGVjaW1hbChyKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0b25lIGR1cmF0aW9uOiBcIityKTtpZihyP3I8ZWUuQy5NSU5fRFVSQVRJT04/KEcoJ1wiZHVyYXRpb25cIiB2YWx1ZSBpcyBsb3dlciB0aGFuIHRoZSBtaW5pbXVtIGFsbG93ZWQsIHNldHRpbmcgaXQgdG8gJytlZS5DLk1JTl9EVVJBVElPTitcIiBtaWxsaXNlY29uZHNcIikscj1lZS5DLk1JTl9EVVJBVElPTik6cj5lZS5DLk1BWF9EVVJBVElPTj8oRygnXCJkdXJhdGlvblwiIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB0aGUgbWF4aW11bSBhbGxvd2VkLCBzZXR0aW5nIGl0IHRvICcrZWUuQy5NQVhfRFVSQVRJT04rXCIgbWlsbGlzZWNvbmRzXCIpLHI9ZWUuQy5NQVhfRFVSQVRJT04pOnI9TWF0aC5hYnMocik6cj1lZS5DLkRFRkFVTFRfRFVSQVRJT04sdC5kdXJhdGlvbj1yLHMmJiFKLmlzRGVjaW1hbChzKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBpbnRlclRvbmVHYXA6IFwiK3MpO3JldHVybiBzP3M8ZWUuQy5NSU5fSU5URVJfVE9ORV9HQVA/KEcoJ1wiaW50ZXJUb25lR2FwXCIgdmFsdWUgaXMgbG93ZXIgdGhhbiB0aGUgbWluaW11bSBhbGxvd2VkLCBzZXR0aW5nIGl0IHRvICcrZWUuQy5NSU5fSU5URVJfVE9ORV9HQVArXCIgbWlsbGlzZWNvbmRzXCIpLHM9ZWUuQy5NSU5fSU5URVJfVE9ORV9HQVApOnM9TWF0aC5hYnMocyk6cz1lZS5DLkRFRkFVTFRfSU5URVJfVE9ORV9HQVAsdGhpcy50b25lcz92b2lkKHRoaXMudG9uZXMrPWUpOih0aGlzLnRvbmVzPWUsdm9pZCBuKCkpfSxyLnByb3RvdHlwZS5tdXRlPWZ1bmN0aW9uKGUpe0coXCJtdXRlKClcIiksZT1lfHx7YXVkaW86ITAsdmlkZW86ITF9O3ZhciB0PSExLG49ITE7dGhpcy5hdWRpb011dGVkPT09ITEmJmUuYXVkaW8mJih0PSEwLHRoaXMuYXVkaW9NdXRlZD0hMCxSLmNhbGwodGhpcywhMCkpLHRoaXMudmlkZW9NdXRlZD09PSExJiZlLnZpZGVvJiYobj0hMCx0aGlzLnZpZGVvTXV0ZWQ9ITAsYi5jYWxsKHRoaXMsITApKSx0IT09ITAmJm4hPT0hMHx8cS5jYWxsKHRoaXMse2F1ZGlvOnQsdmlkZW86bn0pfSxyLnByb3RvdHlwZS51bm11dGU9ZnVuY3Rpb24oZSl7RyhcInVubXV0ZSgpXCIpLGU9ZXx8e2F1ZGlvOiEwLHZpZGVvOiEwfTt2YXIgdD0hMSxuPSExO3RoaXMuYXVkaW9NdXRlZD09PSEwJiZlLmF1ZGlvJiYodD0hMCx0aGlzLmF1ZGlvTXV0ZWQ9ITEsdGhpcy5sb2NhbEhvbGQ9PT0hMSYmUi5jYWxsKHRoaXMsITEpKSx0aGlzLnZpZGVvTXV0ZWQ9PT0hMCYmZS52aWRlbyYmKG49ITAsdGhpcy52aWRlb011dGVkPSExLHRoaXMubG9jYWxIb2xkPT09ITEmJmIuY2FsbCh0aGlzLCExKSksdCE9PSEwJiZuIT09ITB8fEwuY2FsbCh0aGlzLHthdWRpbzp0LHZpZGVvOm59KX0sci5wcm90b3R5cGUuaG9sZD1mdW5jdGlvbihlLHQpe0coXCJob2xkKClcIiksZT1lfHx7fTt2YXIgbixyPXRoaXM7cmV0dXJuIHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZ0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRD8hMTp0aGlzLmxvY2FsSG9sZD09PSEwPyExOnRoaXMuaXNSZWFkeVRvUmVPZmZlcigpPyh0aGlzLmxvY2FsSG9sZD0hMCxNLmNhbGwodGhpcyxcImxvY2FsXCIpLG49e3N1Y2NlZWRlZDpmdW5jdGlvbigpe3QmJnQoKX0sZmFpbGVkOmZ1bmN0aW9uKCl7ci50ZXJtaW5hdGUoe2NhdXNlOnouY2F1c2VzLldFQlJUQ19FUlJPUixzdGF0dXNfY29kZTo1MDAscmVhc29uX3BocmFzZTpcIkhvbGQgRmFpbGVkXCJ9KX19LGUudXNlVXBkYXRlP1QuY2FsbCh0aGlzLHtzZHBPZmZlcjohMCxldmVudEhhbmRsZXJzOm4sZXh0cmFIZWFkZXJzOmUuZXh0cmFIZWFkZXJzfSk6Zy5jYWxsKHRoaXMse2V2ZW50SGFuZGxlcnM6bixleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnN9KSwhMCk6ITF9LHIucHJvdG90eXBlLnVuaG9sZD1mdW5jdGlvbihlLHQpe0coXCJ1bmhvbGQoKVwiKSxlPWV8fHt9O3ZhciBuLHI9dGhpcztyZXR1cm4gdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJnRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEPyExOnRoaXMubG9jYWxIb2xkPT09ITE/ITE6dGhpcy5pc1JlYWR5VG9SZU9mZmVyKCk/KHRoaXMubG9jYWxIb2xkPSExLFAuY2FsbCh0aGlzLFwibG9jYWxcIiksbj17c3VjY2VlZGVkOmZ1bmN0aW9uKCl7dCYmdCgpfSxmYWlsZWQ6ZnVuY3Rpb24oKXtyLnRlcm1pbmF0ZSh7Y2F1c2U6ei5jYXVzZXMuV0VCUlRDX0VSUk9SLHN0YXR1c19jb2RlOjUwMCxyZWFzb25fcGhyYXNlOlwiVW5ob2xkIEZhaWxlZFwifSl9fSxlLnVzZVVwZGF0ZT9ULmNhbGwodGhpcyx7c2RwT2ZmZXI6ITAsZXZlbnRIYW5kbGVyczpuLGV4dHJhSGVhZGVyczplLmV4dHJhSGVhZGVyc30pOmcuY2FsbCh0aGlzLHtldmVudEhhbmRsZXJzOm4sZXh0cmFIZWFkZXJzOmUuZXh0cmFIZWFkZXJzfSksITApOiExfSxyLnByb3RvdHlwZS5yZW5lZ290aWF0ZT1mdW5jdGlvbihlLHQpe0coXCJyZW5lZ290aWF0ZSgpXCIpLGU9ZXx8e307dmFyIG4scj10aGlzLHM9ZS5ydGNPZmZlckNvbnN0cmFpbnRzfHxudWxsO3JldHVybiB0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQ/ITE6dGhpcy5pc1JlYWR5VG9SZU9mZmVyKCk/KG49e3N1Y2NlZWRlZDpmdW5jdGlvbigpe3QmJnQoKX0sZmFpbGVkOmZ1bmN0aW9uKCl7ci50ZXJtaW5hdGUoe2NhdXNlOnouY2F1c2VzLldFQlJUQ19FUlJPUixzdGF0dXNfY29kZTo1MDAscmVhc29uX3BocmFzZTpcIk1lZGlhIFJlbmVnb3RpYXRpb24gRmFpbGVkXCJ9KX19LFMuY2FsbCh0aGlzKSxlLnVzZVVwZGF0ZT9ULmNhbGwodGhpcyx7c2RwT2ZmZXI6ITAsZXZlbnRIYW5kbGVyczpuLHJ0Y09mZmVyQ29uc3RyYWludHM6cyxleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnN9KTpnLmNhbGwodGhpcyx7ZXZlbnRIYW5kbGVyczpuLHJ0Y09mZmVyQ29uc3RyYWludHM6cyxleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnN9KSwhMCk6ITF9LHIucHJvdG90eXBlLnJlZmVyPWZ1bmN0aW9uKGUsdCl7RyhcInJlZmVyKClcIik7dmFyIG4scixzPXRoaXMsbD1lO2lmKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZ0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRClyZXR1cm4hMTtpZihlPXRoaXMudWEubm9ybWFsaXplVGFyZ2V0KGUpLCFlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRhcmdldDogXCIrbCk7cmV0dXJuIG49bmV3IG5lKHRoaXMpLG4uc2VuZFJlZmVyKGUsdCkscj1uLm91dGdvaW5nUmVxdWVzdC5jc2VxLHRoaXMucmVmZXJTdWJzY3JpYmVyc1tyXT1uLG4ub24oXCJyZXF1ZXN0RmFpbGVkXCIsZnVuY3Rpb24oKXtkZWxldGUgcy5yZWZlclN1YnNjcmliZXJzW3JdfSksbi5vbihcImFjY2VwdGVkXCIsZnVuY3Rpb24oKXtkZWxldGUgcy5yZWZlclN1YnNjcmliZXJzW3JdfSksbi5vbihcImZhaWxlZFwiLGZ1bmN0aW9uKCl7ZGVsZXRlIHMucmVmZXJTdWJzY3JpYmVyc1tyXX0pLG59LHIucHJvdG90eXBlLnJlY2VpdmVSZXF1ZXN0PWZ1bmN0aW9uKGUpe0coXCJyZWNlaXZlUmVxdWVzdCgpXCIpO3ZhciB0LG49dGhpcztpZihlLm1ldGhvZD09PXouQ0FOQ0VMKXRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSJiZ0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0FOU1dFUkVEfHwodGhpcy5zdGF0dXM9ay5TVEFUVVNfQ0FOQ0VMRUQsdGhpcy5yZXF1ZXN0LnJlcGx5KDQ4NyksVS5jYWxsKHRoaXMsXCJyZW1vdGVcIixlLHouY2F1c2VzLkNBTkNFTEVEKSk7ZWxzZSBzd2l0Y2goZS5tZXRob2Qpe2Nhc2Ugei5BQ0s6aWYodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0spcmV0dXJuO2lmKHRoaXMuc3RhdHVzPWsuU1RBVFVTX0NPTkZJUk1FRCxjbGVhclRpbWVvdXQodGhpcy50aW1lcnMuYWNrVGltZXIpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5pbnZpdGUyeHhUaW1lciksdGhpcy5sYXRlX3NkcCl7aWYoIWUuYm9keSl7dGhpcy50ZXJtaW5hdGUoe2NhdXNlOnouY2F1c2VzLk1JU1NJTkdfU0RQLHN0YXR1c19jb2RlOjQwMH0pO2JyZWFrfXZhciByPXtvcmlnaW5hdG9yOlwicmVtb3RlXCIsdHlwZTpcImFuc3dlclwiLHNkcDplLmJvZHl9O3RoaXMuZW1pdChcInNkcFwiLHIpLHRoaXMuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgVy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6ci5zZHB9KSxmdW5jdGlvbigpe24uaXNfY29uZmlybWVkfHxPLmNhbGwobixcInJlbW90ZVwiLGUpfSxmdW5jdGlvbigpe24udGVybWluYXRlKHtjYXVzZTp6LmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04sc3RhdHVzX2NvZGU6NDg4fSl9KX1lbHNlIHRoaXMuaXNfY29uZmlybWVkfHxPLmNhbGwodGhpcyxcInJlbW90ZVwiLGUpO2JyZWFrO2Nhc2Ugei5CWUU6dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19DT05GSVJNRUQ/KGUucmVwbHkoMjAwKSx4LmNhbGwodGhpcyxcInJlbW90ZVwiLGUsei5jYXVzZXMuQllFKSk6dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19JTlZJVEVfUkVDRUlWRUQ/KGUucmVwbHkoMjAwKSx0aGlzLnJlcXVlc3QucmVwbHkoNDg3LFwiQllFIFJlY2VpdmVkXCIpLHguY2FsbCh0aGlzLFwicmVtb3RlXCIsZSx6LmNhdXNlcy5CWUUpKTplLnJlcGx5KDQwMyxcIldyb25nIFN0YXR1c1wiKTticmVhaztjYXNlIHouSU5WSVRFOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfQ09ORklSTUVEP2UuaGFzSGVhZGVyKFwicmVwbGFjZXNcIik/cC5jYWxsKHRoaXMsZSk6YS5jYWxsKHRoaXMsZSk6ZS5yZXBseSg0MDMsXCJXcm9uZyBTdGF0dXNcIik7YnJlYWs7Y2FzZSB6LklORk86dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19DT05GSVJNRUR8fHRoaXMuc3RhdHVzPT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLfHx0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0lOVklURV9SRUNFSVZFRD8odD1lLmdldEhlYWRlcihcImNvbnRlbnQtdHlwZVwiKSx0JiZ0Lm1hdGNoKC9eYXBwbGljYXRpb25cXC9kdG1mLXJlbGF5L2kpP25ldyBlZSh0aGlzKS5pbml0X2luY29taW5nKGUpOmUucmVwbHkoNDE1KSk6ZS5yZXBseSg0MDMsXCJXcm9uZyBTdGF0dXNcIik7YnJlYWs7Y2FzZSB6LlVQREFURTp0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0NPTkZJUk1FRD9jLmNhbGwodGhpcyxlKTplLnJlcGx5KDQwMyxcIldyb25nIFN0YXR1c1wiKTticmVhaztjYXNlIHouUkVGRVI6dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19DT05GSVJNRUQ/aC5jYWxsKHRoaXMsZSk6ZS5yZXBseSg0MDMsXCJXcm9uZyBTdGF0dXNcIik7YnJlYWs7Y2FzZSB6Lk5PVElGWTp0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0NPTkZJUk1FRD9kLmNhbGwodGhpcyxlKTplLnJlcGx5KDQwMyxcIldyb25nIFN0YXR1c1wiKTticmVhaztkZWZhdWx0OmUucmVwbHkoNTAxKX19LHIucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXtqKFwib25UcmFuc3BvcnRFcnJvcigpXCIpLHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmdGhpcy50ZXJtaW5hdGUoe3N0YXR1c19jb2RlOjUwMCxyZWFzb25fcGhyYXNlOnouY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IsY2F1c2U6ei5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUn0pfSxyLnByb3RvdHlwZS5vblJlcXVlc3RUaW1lb3V0PWZ1bmN0aW9uKCl7RyhcIm9uUmVxdWVzdFRpbWVvdXRcIiksdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiZ0aGlzLnRlcm1pbmF0ZSh7c3RhdHVzX2NvZGU6NDA4LHJlYXNvbl9waHJhc2U6ei5jYXVzZXMuUkVRVUVTVF9USU1FT1VULGNhdXNlOnouY2F1c2VzLlJFUVVFU1RfVElNRU9VVH0pfSxyLnByb3RvdHlwZS5vbkRpYWxvZ0Vycm9yPWZ1bmN0aW9uKCl7aihcIm9uRGlhbG9nRXJyb3IoKVwiKSx0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJnRoaXMudGVybWluYXRlKHtzdGF0dXNfY29kZTo1MDAscmVhc29uX3BocmFzZTp6LmNhdXNlcy5ESUFMT0dfRVJST1IsY2F1c2U6ei5jYXVzZXMuRElBTE9HX0VSUk9SfSl9LHIucHJvdG90eXBlLm5ld0RUTUY9ZnVuY3Rpb24oZSl7RyhcIm5ld0RUTUYoKVwiKSx0aGlzLmVtaXQoXCJuZXdEVE1GXCIsZSl9LHIucHJvdG90eXBlLnJlc2V0TG9jYWxNZWRpYT1mdW5jdGlvbigpe0coXCJyZXNldExvY2FsTWVkaWEoKVwiKSx0aGlzLmxvY2FsSG9sZD0hMSx0aGlzLmF1ZGlvTXV0ZWQ9ITEsdGhpcy52aWRlb011dGVkPSExLFMuY2FsbCh0aGlzKX19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vRGlhbG9nXCI6MixcIi4vRXhjZXB0aW9uc1wiOjUsXCIuL1JUQ1Nlc3Npb24vRFRNRlwiOjEyLFwiLi9SVENTZXNzaW9uL1JlZmVyTm90aWZpZXJcIjoxMyxcIi4vUlRDU2Vzc2lvbi9SZWZlclN1YnNjcmliZXJcIjoxNCxcIi4vUlRDU2Vzc2lvbi9SZXF1ZXN0XCI6MTUsXCIuL1JlcXVlc3RTZW5kZXJcIjoxNyxcIi4vU0lQTWVzc2FnZVwiOjE4LFwiLi9UaW1lcnNcIjoyMCxcIi4vVHJhbnNhY3Rpb25zXCI6MjEsXCIuL1V0aWxzXCI6MjUsZGVidWc6MzMsZXZlbnRzOjI4LHJ0Y25pbmphOjM4LFwic2RwLXRyYW5zZm9ybVwiOjQ0LHV0aWw6MzJ9XSwxMjpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7dGhpcy5vd25lcj1lLHRoaXMuZGlyZWN0aW9uPW51bGwsdGhpcy50b25lPW51bGwsdGhpcy5kdXJhdGlvbj1udWxsfXQuZXhwb3J0cz1yO3ZhciBzPXtNSU5fRFVSQVRJT046NzAsTUFYX0RVUkFUSU9OOjZlMyxERUZBVUxUX0RVUkFUSU9OOjEwMCxNSU5fSU5URVJfVE9ORV9HQVA6NTAsREVGQVVMVF9JTlRFUl9UT05FX0dBUDo1MDB9O3IuQz1zO3ZhciBsPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlJUQ1Nlc3Npb246RFRNRlwiKSxpPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOlJUQ1Nlc3Npb246RFRNRlwiKTtpLmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKTt2YXIgbz1lKFwiLi4vQ29uc3RhbnRzXCIpLHU9ZShcIi4uL0V4Y2VwdGlvbnNcIiksYT1lKFwiLi4vUlRDU2Vzc2lvblwiKTtyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUsdCl7dmFyIG4scjtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKTtpZih0aGlzLmRpcmVjdGlvbj1cIm91dGdvaW5nXCIsdGhpcy5vd25lci5zdGF0dXMhPT1hLkMuU1RBVFVTX0NPTkZJUk1FRCYmdGhpcy5vd25lci5zdGF0dXMhPT1hLkMuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyl0aHJvdyBuZXcgdS5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLm93bmVyLnN0YXR1cyk7aWYodD10fHx7fSxuPXQuZXh0cmFIZWFkZXJzP3QuZXh0cmFIZWFkZXJzLnNsaWNlKCk6W10sdGhpcy5ldmVudEhhbmRsZXJzPXQuZXZlbnRIYW5kbGVyc3x8e30sXCJzdHJpbmdcIj09dHlwZW9mIGUpZT1lLnRvVXBwZXJDYXNlKCk7ZWxzZXtpZihcIm51bWJlclwiIT10eXBlb2YgZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0b25lOiBcIitlKTtlPWUudG9TdHJpbmcoKX1pZighZS5tYXRjaCgvXlswLTlBLUQjKl0kLykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdG9uZTogXCIrZSk7dGhpcy50b25lPWUsdGhpcy5kdXJhdGlvbj10LmR1cmF0aW9uLG4ucHVzaChcIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vZHRtZi1yZWxheVwiKSxyPVwiU2lnbmFsPVwiK3RoaXMudG9uZStcIlxcclxcblwiLHIrPVwiRHVyYXRpb249XCIrdGhpcy5kdXJhdGlvbix0aGlzLm93bmVyLm5ld0RUTUYoe29yaWdpbmF0b3I6XCJsb2NhbFwiLGR0bWY6dGhpcyxyZXF1ZXN0OnRoaXMucmVxdWVzdH0pLHRoaXMub3duZXIuZGlhbG9nLnNlbmRSZXF1ZXN0KHRoaXMsby5JTkZPLHtleHRyYUhlYWRlcnM6bixib2R5OnJ9KX0sci5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUpe3N3aXRjaCghMCl7Y2FzZS9eMVswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTpicmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmwoXCJvblN1Y2Nlc3NSZXNwb25zZVwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25TdWNjZXNzUmVzcG9uc2UmJnRoaXMuZXZlbnRIYW5kbGVycy5vblN1Y2Nlc3NSZXNwb25zZShlKTticmVhaztkZWZhdWx0OnRoaXMuZXZlbnRIYW5kbGVycy5vbkVycm9yUmVzcG9uc2UmJnRoaXMuZXZlbnRIYW5kbGVycy5vbkVycm9yUmVzcG9uc2UoZSl9fSxyLnByb3RvdHlwZS5vblJlcXVlc3RUaW1lb3V0PWZ1bmN0aW9uKCl7aShcIm9uUmVxdWVzdFRpbWVvdXRcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uUmVxdWVzdFRpbWVvdXQmJnRoaXMuZXZlbnRIYW5kbGVycy5vblJlcXVlc3RUaW1lb3V0KCl9LHIucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXtpKFwib25UcmFuc3BvcnRFcnJvclwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25UcmFuc3BvcnRFcnJvciYmdGhpcy5ldmVudEhhbmRsZXJzLm9uVHJhbnNwb3J0RXJyb3IoKX0sci5wcm90b3R5cGUub25EaWFsb2dFcnJvcj1mdW5jdGlvbigpe2koXCJvbkRpYWxvZ0Vycm9yXCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vbkRpYWxvZ0Vycm9yJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25EaWFsb2dFcnJvcigpfSxyLnByb3RvdHlwZS5pbml0X2luY29taW5nPWZ1bmN0aW9uKGUpe3ZhciB0LG49L14oU2lnbmFsXFxzKj89XFxzKj8pKFswLTlBLUQjKl17MX0pKFxccyk/LiovLHI9L14oRHVyYXRpb25cXHM/PVxccz8pKFswLTldezEsNH0pKFxccyk/LiovO3RoaXMuZGlyZWN0aW9uPVwiaW5jb21pbmdcIix0aGlzLnJlcXVlc3Q9ZSxlLnJlcGx5KDIwMCksZS5ib2R5JiYodD1lLmJvZHkuc3BsaXQoXCJcXG5cIiksdC5sZW5ndGg+PTEmJm4udGVzdCh0WzBdKSYmKHRoaXMudG9uZT10WzBdLnJlcGxhY2UobixcIiQyXCIpKSx0Lmxlbmd0aD49MiYmci50ZXN0KHRbMV0pJiYodGhpcy5kdXJhdGlvbj1wYXJzZUludCh0WzFdLnJlcGxhY2UocixcIiQyXCIpLDEwKSkpLHRoaXMuZHVyYXRpb258fCh0aGlzLmR1cmF0aW9uPXMuREVGQVVMVF9EVVJBVElPTiksdGhpcy50b25lP3RoaXMub3duZXIubmV3RFRNRih7b3JpZ2luYXRvcjpcInJlbW90ZVwiLGR0bWY6dGhpcyxyZXF1ZXN0OmV9KTpsKFwiaW52YWxpZCBJTkZPIERUTUYgcmVjZWl2ZWQsIGRpc2NhcmRlZFwiKX19LHtcIi4uL0NvbnN0YW50c1wiOjEsXCIuLi9FeGNlcHRpb25zXCI6NSxcIi4uL1JUQ1Nlc3Npb25cIjoxMSxkZWJ1ZzozM31dLDEzOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbil7dGhpcy5zZXNzaW9uPWUsdGhpcy5pZD10LHRoaXMuZXhwaXJlcz1ufHxzLmV4cGlyZXMsdGhpcy5hY3RpdmU9ITAsdGhpcy5ub3RpZnkoMTAwKX10LmV4cG9ydHM9cjt2YXIgcz17ZXZlbnRfdHlwZTpcInJlZmVyXCIsYm9keV90eXBlOlwibWVzc2FnZS9zaXBmcmFnO3ZlcnNpb249Mi4wXCIsZXhwaXJlczozMDB9LGw9ZShcImRlYnVnXCIpKFwiSnNTSVA6UlRDU2Vzc2lvbjpSZWZlck5vdGlmaWVyXCIpLGk9ZShcIi4uL0NvbnN0YW50c1wiKSxvPWUoXCIuL1JlcXVlc3RcIik7ci5wcm90b3R5cGUubm90aWZ5PWZ1bmN0aW9uKGUsdCl7bChcIm5vdGlmeSgpXCIpO3ZhciBuLHI9dGhpcztpZih0aGlzLmFjdGl2ZSE9PSExKXt0PXR8fGkuUkVBU09OX1BIUkFTRVtlXXx8XCJcIixuPWU+PTIwMD9cInRlcm1pbmF0ZWQ7cmVhc29uPW5vcmVzb3VyY2VcIjpcImFjdGl2ZTtleHBpcmVzPVwiK3RoaXMuZXhwaXJlczt2YXIgdT1uZXcgbyh0aGlzLnNlc3Npb24saS5OT1RJRlkpO3Uuc2VuZCh7ZXh0cmFIZWFkZXJzOltcIkV2ZW50OiBcIitzLmV2ZW50X3R5cGUrXCI7aWQ9XCIrci5pZCxcIlN1YnNjcmlwdGlvbi1TdGF0ZTogXCIrbixcIkNvbnRlbnQtVHlwZTogXCIrcy5ib2R5X3R5cGVdLGJvZHk6XCJTSVAvMi4wIFwiK2UrXCIgXCIrdCxldmVudEhhbmRsZXJzOntvbkVycm9yUmVzcG9uc2U6ZnVuY3Rpb24oKXtyLmFjdGl2ZT0hMX19fSl9fX0se1wiLi4vQ29uc3RhbnRzXCI6MSxcIi4vUmVxdWVzdFwiOjE1LGRlYnVnOjMzfV0sMTQ6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe3RoaXMuc2Vzc2lvbj1lLHRoaXMudGltZXI9bnVsbCx0aGlzLm91dGdvaW5nUmVxdWVzdD1udWxsLG8uRXZlbnRFbWl0dGVyLmNhbGwodGhpcyl9ZnVuY3Rpb24gcygpe2NvbnNvbGUubG9nKFwicmVtb3ZlU3Vic2NyaWJlcigpXCIpLGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKSx0aGlzLnNlc3Npb24ucmVmZXJTdWJzY3JpYmVyPW51bGx9dC5leHBvcnRzPXI7dmFyIGw9e2V4cGlyZXM6MTIwfSxpPWUoXCJ1dGlsXCIpLG89ZShcImV2ZW50c1wiKSx1PWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlJUQ1Nlc3Npb246UmVmZXJTdWJzY3JpYmVyXCIpLGE9ZShcIi4uL0NvbnN0YW50c1wiKSxjPWUoXCIuLi9HcmFtbWFyXCIpLGg9ZShcIi4vUmVxdWVzdFwiKTtpLmluaGVyaXRzKHIsby5FdmVudEVtaXR0ZXIpLHIucHJvdG90eXBlLnNlbmRSZWZlcj1mdW5jdGlvbihlLHQpe3UoXCJzZW5kUmVmZXIoKVwiKTt2YXIgbixyLGksbz1udWxsLGM9dGhpczt0PXR8fHt9LG49dC5leHRyYUhlYWRlcnM/dC5leHRyYUhlYWRlcnMuc2xpY2UoKTpbXSxyPXQuZXZlbnRIYW5kbGVyc3x8e307Zm9yKHZhciBkIGluIHIpdGhpcy5vbihkLHJbZF0pO3QucmVwbGFjZXMmJihvPXQucmVwbGFjZXMucmVxdWVzdC5jYWxsX2lkLG8rPVwiO3RvLXRhZz1cIit0LnJlcGxhY2VzLnRvX3RhZyxvKz1cIjtmcm9tLXRhZz1cIit0LnJlcGxhY2VzLmZyb21fdGFnLG89ZW5jb2RlVVJJQ29tcG9uZW50KG8pKSxpPVwiUmVmZXItVG86IDxcIitlKyhvP1wiP1JlcGxhY2VzPVwiK286XCJcIikrXCI+XCIsbi5wdXNoKGkpO3ZhciBwPW5ldyBoKHRoaXMuc2Vzc2lvbixhLlJFRkVSKTt0aGlzLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLmNhbGwoYyl9LDFlMypsLmV4cGlyZXMpLHAuc2VuZCh7ZXh0cmFIZWFkZXJzOm4sZXZlbnRIYW5kbGVyczp7b25TdWNjZXNzUmVzcG9uc2U6ZnVuY3Rpb24oZSl7Yy5lbWl0KFwicmVxdWVzdFN1Y2NlZWRlZFwiLHtyZXNwb25zZTplfSl9LG9uRXJyb3JSZXNwb25zZTpmdW5jdGlvbihlKXtjLmVtaXQoXCJyZXF1ZXN0RmFpbGVkXCIse3Jlc3BvbnNlOmUsY2F1c2U6YS5jYXVzZXMuUkVKRUNURUR9KX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3MuY2FsbChjKSxjLmVtaXQoXCJyZXF1ZXN0RmFpbGVkXCIse3Jlc3BvbnNlOm51bGwsY2F1c2U6YS5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUn0pfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7cy5jYWxsKGMpLGMuZW1pdChcInJlcXVlc3RGYWlsZWRcIix7cmVzcG9uc2U6bnVsbCxjYXVzZTphLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVR9KX0sb25EaWFsb2dFcnJvcjpmdW5jdGlvbigpe3MuY2FsbChjKSxjLmVtaXQoXCJyZXF1ZXN0RmFpbGVkXCIse3Jlc3BvbnNlOm51bGwsY2F1c2U6YS5jYXVzZXMuRElBTE9HX0VSUk9SfSl9fX0pLHRoaXMub3V0Z29pbmdSZXF1ZXN0PXAub3V0Z29pbmdSZXF1ZXN0fSxyLnByb3RvdHlwZS5yZWNlaXZlTm90aWZ5PWZ1bmN0aW9uKGUpe3UoXCJyZWNlaXZlTm90aWZ5KClcIik7dmFyIHQ7aWYoZS5ib2R5KXtpZih0PWMucGFyc2UoZS5ib2R5LFwiU3RhdHVzX0xpbmVcIiksLTE9PT10KXJldHVybiB2b2lkIHUoJ3JlY2VpdmVOb3RpZnkoKSB8IGVycm9yIHBhcnNpbmcgTk9USUZZIGJvZHk6IFwiJytlLmJvZHkrJ1wiJyk7c3dpdGNoKCEwKXtjYXNlL14xMDAkLy50ZXN0KHQuc3RhdHVzX2NvZGUpOnRoaXMuZW1pdChcInRyeWluZ1wiLHtyZXF1ZXN0OmUsc3RhdHVzX2xpbmU6dH0pO2JyZWFrO2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk6dGhpcy5lbWl0KFwicHJvZ3Jlc3NcIix7cmVxdWVzdDplLHN0YXR1c19saW5lOnR9KTticmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KHQuc3RhdHVzX2NvZGUpOnMuY2FsbCh0aGlzKSx0aGlzLmVtaXQoXCJhY2NlcHRlZFwiLHtyZXF1ZXN0OmUsc3RhdHVzX2xpbmU6dH0pO2JyZWFrO2RlZmF1bHQ6cy5jYWxsKHRoaXMpLHRoaXMuZW1pdChcImZhaWxlZFwiLHtyZXF1ZXN0OmUsc3RhdHVzX2xpbmU6dH0pfX19fSx7XCIuLi9Db25zdGFudHNcIjoxLFwiLi4vR3JhbW1hclwiOjYsXCIuL1JlcXVlc3RcIjoxNSxkZWJ1ZzozMyxldmVudHM6MjgsdXRpbDozMn1dLDE1OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQpe2lmKHMoXCJuZXcgfCAlc1wiLHQpLHRoaXMuc2Vzc2lvbj1lLHRoaXMubWV0aG9kPXQsdGhpcy5vdXRnb2luZ1JlcXVlc3Q9bnVsbCx0aGlzLnNlc3Npb24uc3RhdHVzIT09dS5DLlNUQVRVU18xWFhfUkVDRUlWRUQmJnRoaXMuc2Vzc2lvbi5zdGF0dXMhPT11LkMuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUiYmdGhpcy5zZXNzaW9uLnN0YXR1cyE9PXUuQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZ0aGlzLnNlc3Npb24uc3RhdHVzIT09dS5DLlNUQVRVU19DT05GSVJNRUQmJnRoaXMuc2Vzc2lvbi5zdGF0dXMhPT11LkMuU1RBVFVTX1RFUk1JTkFURUQpdGhyb3cgbmV3IG8uSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zZXNzaW9uLnN0YXR1cyk7aWYodGhpcy5zZXNzaW9uLnN0YXR1cz09PXUuQy5TVEFUVVNfVEVSTUlOQVRFRCYmdCE9PWkuQllFKXRocm93IG5ldyBvLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc2Vzc2lvbi5zdGF0dXMpfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlJUQ1Nlc3Npb246UmVxdWVzdFwiKSxsPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOlJUQ1Nlc3Npb246UmVxdWVzdFwiKTtsLmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKTt2YXIgaT1lKFwiLi4vQ29uc3RhbnRzXCIpLG89ZShcIi4uL0V4Y2VwdGlvbnNcIiksdT1lKFwiLi4vUlRDU2Vzc2lvblwiKTtyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUpe2U9ZXx8e307dmFyIHQ9ZS5leHRyYUhlYWRlcnMmJmUuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLG49ZS5ib2R5fHxudWxsO3RoaXMuZXZlbnRIYW5kbGVycz1lLmV2ZW50SGFuZGxlcnN8fHt9LHRoaXMub3V0Z29pbmdSZXF1ZXN0PXRoaXMuc2Vzc2lvbi5kaWFsb2cuc2VuZFJlcXVlc3QodGhpcyx0aGlzLm1ldGhvZCx7ZXh0cmFIZWFkZXJzOnQsYm9keTpufSl9LHIucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlKXtzd2l0Y2goITApe2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6cyhcIm9uUHJvZ3Jlc3NSZXNwb25zZVwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25Qcm9ncmVzc1Jlc3BvbnNlJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25Qcm9ncmVzc1Jlc3BvbnNlKGUpO2JyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6cyhcIm9uU3VjY2Vzc1Jlc3BvbnNlXCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vblN1Y2Nlc3NSZXNwb25zZSYmdGhpcy5ldmVudEhhbmRsZXJzLm9uU3VjY2Vzc1Jlc3BvbnNlKGUpO2JyZWFrO2RlZmF1bHQ6cyhcIm9uRXJyb3JSZXNwb25zZVwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25FcnJvclJlc3BvbnNlJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25FcnJvclJlc3BvbnNlKGUpfX0sci5wcm90b3R5cGUub25SZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe2woXCJvblJlcXVlc3RUaW1lb3V0XCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vblJlcXVlc3RUaW1lb3V0JiZ0aGlzLmV2ZW50SGFuZGxlcnMub25SZXF1ZXN0VGltZW91dCgpfSxyLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7bChcIm9uVHJhbnNwb3J0RXJyb3JcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uVHJhbnNwb3J0RXJyb3ImJnRoaXMuZXZlbnRIYW5kbGVycy5vblRyYW5zcG9ydEVycm9yKCl9LHIucHJvdG90eXBlLm9uRGlhbG9nRXJyb3I9ZnVuY3Rpb24oKXtsKFwib25EaWFsb2dFcnJvclwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25EaWFsb2dFcnJvciYmdGhpcy5ldmVudEhhbmRsZXJzLm9uRGlhbG9nRXJyb3IoKX19LHtcIi4uL0NvbnN0YW50c1wiOjEsXCIuLi9FeGNlcHRpb25zXCI6NSxcIi4uL1JUQ1Nlc3Npb25cIjoxMSxkZWJ1ZzozM31dLDE2OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQpe3ZhciBuPTE7dGhpcy51YT1lLHRoaXMudHJhbnNwb3J0PXQsdGhpcy5yZWdpc3RyYXI9ZS5jb25maWd1cmF0aW9uLnJlZ2lzdHJhcl9zZXJ2ZXIsdGhpcy5leHBpcmVzPWUuY29uZmlndXJhdGlvbi5yZWdpc3Rlcl9leHBpcmVzLHRoaXMuY2FsbF9pZD1sLmNyZWF0ZVJhbmRvbVRva2VuKDIyKSx0aGlzLmNzZXE9MCx0aGlzLnRvX3VyaT1lLmNvbmZpZ3VyYXRpb24udXJpLHRoaXMucmVnaXN0cmF0aW9uVGltZXI9bnVsbCx0aGlzLnJlZ2lzdGVyZWQ9ITEsdGhpcy5jb250YWN0PXRoaXMudWEuY29udGFjdC50b1N0cmluZygpLHRoaXMuY29udGFjdCs9XCI7K3NpcC5pY2VcIix0aGlzLmV4dHJhSGVhZGVycz1bXSx0aGlzLmV4dHJhQ29udGFjdFBhcmFtcz1cIlwiLG4mJih0aGlzLmNvbnRhY3QrPVwiO3JlZy1pZD1cIituLHRoaXMuY29udGFjdCs9Jzsrc2lwLmluc3RhbmNlPVwiPHVybjp1dWlkOicrdGhpcy51YS5jb25maWd1cmF0aW9uLmluc3RhbmNlX2lkKyc+XCInKX10LmV4cG9ydHM9cjt2YXIgcz1lKFwiZGVidWdcIikoXCJKc1NJUDpSZWdpc3RyYXRvclwiKSxsPWUoXCIuL1V0aWxzXCIpLGk9ZShcIi4vQ29uc3RhbnRzXCIpLG89ZShcIi4vU0lQTWVzc2FnZVwiKSx1PWUoXCIuL1JlcXVlc3RTZW5kZXJcIik7ci5wcm90b3R5cGU9e3NldEV4dHJhSGVhZGVyczpmdW5jdGlvbihlKXtBcnJheS5pc0FycmF5KGUpfHwoZT1bXSksdGhpcy5leHRyYUhlYWRlcnM9ZS5zbGljZSgpfSxzZXRFeHRyYUNvbnRhY3RQYXJhbXM6ZnVuY3Rpb24oZSl7ZSBpbnN0YW5jZW9mIE9iamVjdHx8KGU9e30pLHRoaXMuZXh0cmFDb250YWN0UGFyYW1zPVwiXCI7Zm9yKHZhciB0IGluIGUpe3ZhciBuPWVbdF07dGhpcy5leHRyYUNvbnRhY3RQYXJhbXMrPVwiO1wiK3QsbiYmKHRoaXMuZXh0cmFDb250YWN0UGFyYW1zKz1cIj1cIituKX19LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI9dGhpcztuPXRoaXMuZXh0cmFIZWFkZXJzLnNsaWNlKCksbi5wdXNoKFwiQ29udGFjdDogXCIrdGhpcy5jb250YWN0K1wiO2V4cGlyZXM9XCIrdGhpcy5leHBpcmVzK3RoaXMuZXh0cmFDb250YWN0UGFyYW1zKSxuLnB1c2goXCJFeHBpcmVzOiBcIit0aGlzLmV4cGlyZXMpLHRoaXMucmVxdWVzdD1uZXcgby5PdXRnb2luZ1JlcXVlc3QoaS5SRUdJU1RFUix0aGlzLnJlZ2lzdHJhcix0aGlzLnVhLHt0b191cmk6dGhpcy50b191cmksY2FsbF9pZDp0aGlzLmNhbGxfaWQsY3NlcTp0aGlzLmNzZXErPTF9LG4pLGU9bmV3IHUodGhpcyx0aGlzLnVhKSx0aGlzLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlKXt2YXIgbixvLHU9ZS5nZXRIZWFkZXJzKFwiY29udGFjdFwiKS5sZW5ndGg7aWYoZS5jc2VxPT09dGhpcy5jc2VxKXN3aXRjaChudWxsIT09dGhpcy5yZWdpc3RyYXRpb25UaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyKSx0aGlzLnJlZ2lzdHJhdGlvblRpbWVyPW51bGwpLCEwKXtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmJyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6aWYoZS5oYXNIZWFkZXIoXCJleHBpcmVzXCIpJiYobz1lLmdldEhlYWRlcihcImV4cGlyZXNcIikpLCF1KXtzKFwibm8gQ29udGFjdCBoZWFkZXIgaW4gcmVzcG9uc2UgdG8gUkVHSVNURVIsIHJlc3BvbnNlIGlnbm9yZWRcIik7YnJlYWt9Zm9yKDt1LS07KXtpZihuPWUucGFyc2VIZWFkZXIoXCJjb250YWN0XCIsdSksbi51cmkudXNlcj09PXRoaXMudWEuY29udGFjdC51cmkudXNlcil7bz1uLmdldFBhcmFtKFwiZXhwaXJlc1wiKTticmVha31uPW51bGx9aWYoIW4pe3MoXCJubyBDb250YWN0IGhlYWRlciBwb2ludGluZyB0byB1cywgcmVzcG9uc2UgaWdub3JlZFwiKTticmVha31vfHwobz10aGlzLmV4cGlyZXMpLHRoaXMucmVnaXN0cmF0aW9uVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3IucmVnaXN0cmF0aW9uVGltZXI9bnVsbCxyLnJlZ2lzdGVyKCl9LDFlMypvLTNlMyksbi5oYXNQYXJhbShcInRlbXAtZ3J1dVwiKSYmKHRoaXMudWEuY29udGFjdC50ZW1wX2dydXU9bi5nZXRQYXJhbShcInRlbXAtZ3J1dVwiKS5yZXBsYWNlKC9cIi9nLFwiXCIpKSxuLmhhc1BhcmFtKFwicHViLWdydXVcIikmJih0aGlzLnVhLmNvbnRhY3QucHViX2dydXU9bi5nZXRQYXJhbShcInB1Yi1ncnV1XCIpLnJlcGxhY2UoL1wiL2csXCJcIikpLHRoaXMucmVnaXN0ZXJlZHx8KHRoaXMucmVnaXN0ZXJlZD0hMCx0aGlzLnVhLnJlZ2lzdGVyZWQoe3Jlc3BvbnNlOmV9KSk7YnJlYWs7Y2FzZS9eNDIzJC8udGVzdChlLnN0YXR1c19jb2RlKTplLmhhc0hlYWRlcihcIm1pbi1leHBpcmVzXCIpPyh0aGlzLmV4cGlyZXM9ZS5nZXRIZWFkZXIoXCJtaW4tZXhwaXJlc1wiKSx0aGlzLnJlZ2lzdGVyKCkpOihzKFwiNDIzIHJlc3BvbnNlIHJlY2VpdmVkIGZvciBSRUdJU1RFUiB3aXRob3V0IE1pbi1FeHBpcmVzXCIpLHRoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShlLGkuY2F1c2VzLlNJUF9GQUlMVVJFX0NPREUpKTticmVhaztkZWZhdWx0OnQ9bC5zaXBFcnJvckNhdXNlKGUuc3RhdHVzX2NvZGUpLHRoaXMucmVnaXN0cmF0aW9uRmFpbHVyZShlLHQpfX0sdGhpcy5vblJlcXVlc3RUaW1lb3V0PWZ1bmN0aW9uKCl7dGhpcy5yZWdpc3RyYXRpb25GYWlsdXJlKG51bGwsaS5jYXVzZXMuUkVRVUVTVF9USU1FT1VUKX0sdGhpcy5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7dGhpcy5yZWdpc3RyYXRpb25GYWlsdXJlKG51bGwsaS5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUil9LGUuc2VuZCgpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGUpe3ZhciB0O2lmKCF0aGlzLnJlZ2lzdGVyZWQpcmV0dXJuIHZvaWQgcyhcImFscmVhZHkgdW5yZWdpc3RlcmVkXCIpO2U9ZXx8e30sdGhpcy5yZWdpc3RlcmVkPSExLG51bGwhPT10aGlzLnJlZ2lzdHJhdGlvblRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpLHRoaXMucmVnaXN0cmF0aW9uVGltZXI9bnVsbCksdD10aGlzLmV4dHJhSGVhZGVycy5zbGljZSgpLGUuYWxsPyh0LnB1c2goXCJDb250YWN0OiAqXCIrdGhpcy5leHRyYUNvbnRhY3RQYXJhbXMpLHQucHVzaChcIkV4cGlyZXM6IDBcIiksdGhpcy5yZXF1ZXN0PW5ldyBvLk91dGdvaW5nUmVxdWVzdChpLlJFR0lTVEVSLHRoaXMucmVnaXN0cmFyLHRoaXMudWEse3RvX3VyaTp0aGlzLnRvX3VyaSxjYWxsX2lkOnRoaXMuY2FsbF9pZCxjc2VxOnRoaXMuY3NlcSs9MX0sdCkpOih0LnB1c2goXCJDb250YWN0OiBcIit0aGlzLmNvbnRhY3QrXCI7ZXhwaXJlcz0wXCIrdGhpcy5leHRyYUNvbnRhY3RQYXJhbXMpLHQucHVzaChcIkV4cGlyZXM6IDBcIiksdGhpcy5yZXF1ZXN0PW5ldyBvLk91dGdvaW5nUmVxdWVzdChpLlJFR0lTVEVSLHRoaXMucmVnaXN0cmFyLHRoaXMudWEse3RvX3VyaTp0aGlzLnRvX3VyaSxjYWxsX2lkOnRoaXMuY2FsbF9pZCxjc2VxOnRoaXMuY3NlcSs9MX0sdCkpO3ZhciBuPW5ldyB1KHRoaXMsdGhpcy51YSk7dGhpcy5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7dmFyIHQ7c3dpdGNoKCEwKXtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmJyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6dGhpcy51bnJlZ2lzdGVyZWQoZSk7YnJlYWs7ZGVmYXVsdDp0PWwuc2lwRXJyb3JDYXVzZShlLnN0YXR1c19jb2RlKSx0aGlzLnVucmVnaXN0ZXJlZChlLHQpfX0sdGhpcy5vblJlcXVlc3RUaW1lb3V0PWZ1bmN0aW9uKCl7dGhpcy51bnJlZ2lzdGVyZWQobnVsbCxpLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpfSx0aGlzLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXt0aGlzLnVucmVnaXN0ZXJlZChudWxsLGkuY2F1c2VzLkNPTk5FQ1RJT05fRVJST1IpfSxuLnNlbmQoKX0scmVnaXN0cmF0aW9uRmFpbHVyZTpmdW5jdGlvbihlLHQpe3RoaXMudWEucmVnaXN0cmF0aW9uRmFpbGVkKHtyZXNwb25zZTplfHxudWxsLGNhdXNlOnR9KSx0aGlzLnJlZ2lzdGVyZWQmJih0aGlzLnJlZ2lzdGVyZWQ9ITEsdGhpcy51YS51bnJlZ2lzdGVyZWQoe3Jlc3BvbnNlOmV8fG51bGwsY2F1c2U6dH0pKX0sdW5yZWdpc3RlcmVkOmZ1bmN0aW9uKGUsdCl7dGhpcy5yZWdpc3RlcmVkPSExLHRoaXMudWEudW5yZWdpc3RlcmVkKHtyZXNwb25zZTplfHxudWxsLGNhdXNlOnR8fG51bGx9KX0sb25UcmFuc3BvcnRDbG9zZWQ6ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5yZWdpc3RyYXRpb25UaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnJlZ2lzdHJhdGlvblRpbWVyKSx0aGlzLnJlZ2lzdHJhdGlvblRpbWVyPW51bGwpLHRoaXMucmVnaXN0ZXJlZCYmKHRoaXMucmVnaXN0ZXJlZD0hMSx0aGlzLnVhLnVucmVnaXN0ZXJlZCh7fSkpfSxjbG9zZTpmdW5jdGlvbigpe3RoaXMucmVnaXN0ZXJlZCYmdGhpcy51bnJlZ2lzdGVyKCl9fX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9SZXF1ZXN0U2VuZGVyXCI6MTcsXCIuL1NJUE1lc3NhZ2VcIjoxOCxcIi4vVXRpbHNcIjoyNSxkZWJ1ZzozM31dLDE3OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQpe3RoaXMudWE9dCx0aGlzLmFwcGxpY2FudD1lLHRoaXMubWV0aG9kPWUucmVxdWVzdC5tZXRob2QsdGhpcy5yZXF1ZXN0PWUucmVxdWVzdCx0aGlzLmF1dGg9bnVsbCx0aGlzLmNoYWxsZW5nZWQ9ITEsdGhpcy5zdGFsZWQ9ITEsdC5zdGF0dXMhPT1pLkMuU1RBVFVTX1VTRVJfQ0xPU0VEfHx0aGlzLm1ldGhvZD09PWwuQllFJiZ0aGlzLm1ldGhvZD09PWwuQUNLfHx0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKX10LmV4cG9ydHM9cjt2YXIgcz1lKFwiZGVidWdcIikoXCJKc1NJUDpSZXF1ZXN0U2VuZGVyXCIpLGw9ZShcIi4vQ29uc3RhbnRzXCIpLGk9ZShcIi4vVUFcIiksbz1lKFwiLi9EaWdlc3RBdXRoZW50aWNhdGlvblwiKSx1PWUoXCIuL1RyYW5zYWN0aW9uc1wiKTtyLnByb3RvdHlwZT17c2VuZDpmdW5jdGlvbigpe3N3aXRjaCh0aGlzLm1ldGhvZCl7Y2FzZVwiSU5WSVRFXCI6dGhpcy5jbGllbnRUcmFuc2FjdGlvbj1uZXcgdS5JbnZpdGVDbGllbnRUcmFuc2FjdGlvbih0aGlzLHRoaXMucmVxdWVzdCx0aGlzLnVhLnRyYW5zcG9ydCk7YnJlYWs7Y2FzZVwiQUNLXCI6dGhpcy5jbGllbnRUcmFuc2FjdGlvbj1uZXcgdS5BY2tDbGllbnRUcmFuc2FjdGlvbih0aGlzLHRoaXMucmVxdWVzdCx0aGlzLnVhLnRyYW5zcG9ydCk7YnJlYWs7ZGVmYXVsdDp0aGlzLmNsaWVudFRyYW5zYWN0aW9uPW5ldyB1Lk5vbkludml0ZUNsaWVudFRyYW5zYWN0aW9uKHRoaXMsdGhpcy5yZXF1ZXN0LHRoaXMudWEudHJhbnNwb3J0KX10aGlzLmNsaWVudFRyYW5zYWN0aW9uLnNlbmQoKX0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe3RoaXMuYXBwbGljYW50Lm9uUmVxdWVzdFRpbWVvdXQoKX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3RoaXMuYXBwbGljYW50Lm9uVHJhbnNwb3J0RXJyb3IoKX0scmVjZWl2ZVJlc3BvbnNlOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixpPWUuc3RhdHVzX2NvZGU7aWYoNDAxIT09aSYmNDA3IT09aXx8bnVsbD09PXRoaXMudWEuY29uZmlndXJhdGlvbi5wYXNzd29yZCYmbnVsbD09PXRoaXMudWEuY29uZmlndXJhdGlvbi5oYTEpdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKGUpO2Vsc2V7aWYoNDAxPT09ZS5zdGF0dXNfY29kZT8obj1lLnBhcnNlSGVhZGVyKFwid3d3LWF1dGhlbnRpY2F0ZVwiKSxyPVwiYXV0aG9yaXphdGlvblwiKToobj1lLnBhcnNlSGVhZGVyKFwicHJveHktYXV0aGVudGljYXRlXCIpLHI9XCJwcm94eS1hdXRob3JpemF0aW9uXCIpLCFuKXJldHVybiBzKGUuc3RhdHVzX2NvZGUrXCIgd2l0aCB3cm9uZyBvciBtaXNzaW5nIGNoYWxsZW5nZSwgY2Fubm90IGF1dGhlbnRpY2F0ZVwiKSx2b2lkIHRoaXMuYXBwbGljYW50LnJlY2VpdmVSZXNwb25zZShlKTtpZighdGhpcy5jaGFsbGVuZ2VkfHwhdGhpcy5zdGFsZWQmJm4uc3RhbGU9PT0hMCl7aWYodGhpcy5hdXRofHwodGhpcy5hdXRoPW5ldyBvKHt1c2VybmFtZTp0aGlzLnVhLmNvbmZpZ3VyYXRpb24uYXV0aG9yaXphdGlvbl91c2VyLHBhc3N3b3JkOnRoaXMudWEuY29uZmlndXJhdGlvbi5wYXNzd29yZCxyZWFsbTp0aGlzLnVhLmNvbmZpZ3VyYXRpb24ucmVhbG0saGExOnRoaXMudWEuY29uZmlndXJhdGlvbi5oYTF9KSksIXRoaXMuYXV0aC5hdXRoZW50aWNhdGUodGhpcy5yZXF1ZXN0LG4pKXJldHVybiB2b2lkIHRoaXMuYXBwbGljYW50LnJlY2VpdmVSZXNwb25zZShlKTt0aGlzLmNoYWxsZW5nZWQ9ITAsdGhpcy51YS5zZXQoXCJyZWFsbVwiLHRoaXMuYXV0aC5nZXQoXCJyZWFsbVwiKSksdGhpcy51YS5zZXQoXCJoYTFcIix0aGlzLmF1dGguZ2V0KFwiaGExXCIpKSxuLnN0YWxlJiYodGhpcy5zdGFsZWQ9ITApLHQ9ZS5tZXRob2Q9PT1sLlJFR0lTVEVSP3RoaXMuYXBwbGljYW50LmNzZXErPTE6dGhpcy5yZXF1ZXN0LmRpYWxvZz90aGlzLnJlcXVlc3QuZGlhbG9nLmxvY2FsX3NlcW51bSs9MTp0aGlzLnJlcXVlc3QuY3NlcSsxLHRoaXMucmVxdWVzdD10aGlzLnJlcXVlc3QuY2xvbmUoKSx0aGlzLnJlcXVlc3QuY3NlcT10LHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoXCJjc2VxXCIsdCtcIiBcIit0aGlzLm1ldGhvZCksdGhpcy5yZXF1ZXN0LnNldEhlYWRlcihyLHRoaXMuYXV0aC50b1N0cmluZygpKSx0aGlzLnNlbmQoKX1lbHNlIHRoaXMuYXBwbGljYW50LnJlY2VpdmVSZXNwb25zZShlKX19fX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9EaWdlc3RBdXRoZW50aWNhdGlvblwiOjQsXCIuL1RyYW5zYWN0aW9uc1wiOjIxLFwiLi9VQVwiOjIzLGRlYnVnOjMzfV0sMTg6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCxuLHIscyxsKXt2YXIgaSxvLHUsZDtyZXR1cm4gcj1yfHx7fSxlJiZ0JiZuPyh0aGlzLnVhPW4sdGhpcy5oZWFkZXJzPXt9LHRoaXMubWV0aG9kPWUsdGhpcy5ydXJpPXQsdGhpcy5ib2R5PWwsdGhpcy5leHRyYUhlYWRlcnM9cyYmcy5zbGljZSgpfHxbXSxyLnJvdXRlX3NldD90aGlzLnNldEhlYWRlcihcInJvdXRlXCIsci5yb3V0ZV9zZXQpOm4uY29uZmlndXJhdGlvbi51c2VfcHJlbG9hZGVkX3JvdXRlJiZ0aGlzLnNldEhlYWRlcihcInJvdXRlXCIsXCI8XCIrbi50cmFuc3BvcnQuc2lwX3VyaStcIjtscj5cIiksdGhpcy5zZXRIZWFkZXIoXCJ2aWFcIixcIlwiKSx0aGlzLnNldEhlYWRlcihcIm1heC1mb3J3YXJkc1wiLGEuTUFYX0ZPUldBUkRTKSxpPXIudG9fZGlzcGxheV9uYW1lfHwwPT09ci50b19kaXNwbGF5X25hbWU/J1wiJytyLnRvX2Rpc3BsYXlfbmFtZSsnXCIgJzpcIlwiLGkrPVwiPFwiKyhyLnRvX3VyaXx8dCkrXCI+XCIsaSs9ci50b190YWc/XCI7dGFnPVwiK3IudG9fdGFnOlwiXCIsdGhpcy50bz1uZXcgaC5wYXJzZShpKSx0aGlzLnNldEhlYWRlcihcInRvXCIsaSksbz1yLmZyb21fZGlzcGxheV9uYW1lfHwwPT09ci5mcm9tX2Rpc3BsYXlfbmFtZT8nXCInK3IuZnJvbV9kaXNwbGF5X25hbWUrJ1wiICc6bi5jb25maWd1cmF0aW9uLmRpc3BsYXlfbmFtZT8nXCInK24uY29uZmlndXJhdGlvbi5kaXNwbGF5X25hbWUrJ1wiICc6XCJcIixvKz1cIjxcIisoci5mcm9tX3VyaXx8bi5jb25maWd1cmF0aW9uLnVyaSkrXCI+O3RhZz1cIixvKz1yLmZyb21fdGFnfHxjLm5ld1RhZygpLHRoaXMuZnJvbT1uZXcgaC5wYXJzZShvKSx0aGlzLnNldEhlYWRlcihcImZyb21cIixvKSx1PXIuY2FsbF9pZHx8bi5jb25maWd1cmF0aW9uLmpzc2lwX2lkK2MuY3JlYXRlUmFuZG9tVG9rZW4oMTUpLHRoaXMuY2FsbF9pZD11LHRoaXMuc2V0SGVhZGVyKFwiY2FsbC1pZFwiLHUpLGQ9ci5jc2VxfHxNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKSx0aGlzLmNzZXE9ZCx2b2lkIHRoaXMuc2V0SGVhZGVyKFwiY3NlcVwiLGQrXCIgXCIrZSkpOm51bGx9ZnVuY3Rpb24gcygpe3RoaXMuZGF0YT1udWxsLHRoaXMuaGVhZGVycz1udWxsLHRoaXMubWV0aG9kPW51bGwsdGhpcy52aWE9bnVsbCx0aGlzLnZpYV9icmFuY2g9bnVsbCx0aGlzLmNhbGxfaWQ9bnVsbCx0aGlzLmNzZXE9bnVsbCx0aGlzLmZyb209bnVsbCx0aGlzLmZyb21fdGFnPW51bGwsdGhpcy50bz1udWxsLHRoaXMudG9fdGFnPW51bGwsdGhpcy5ib2R5PW51bGwsdGhpcy5zZHA9bnVsbH1mdW5jdGlvbiBsKGUpe3RoaXMudWE9ZSx0aGlzLmhlYWRlcnM9e30sdGhpcy5ydXJpPW51bGwsdGhpcy50cmFuc3BvcnQ9bnVsbCx0aGlzLnNlcnZlcl90cmFuc2FjdGlvbj1udWxsfWZ1bmN0aW9uIGkoKXt0aGlzLmhlYWRlcnM9e30sdGhpcy5zdGF0dXNfY29kZT1udWxsLHRoaXMucmVhc29uX3BocmFzZT1udWxsfXQuZXhwb3J0cz17T3V0Z29pbmdSZXF1ZXN0OnIsSW5jb21pbmdSZXF1ZXN0OmwsSW5jb21pbmdSZXNwb25zZTppfTt2YXIgbz1lKFwiZGVidWdcIikoXCJKc1NJUDpTSVBNZXNzYWdlXCIpLHU9ZShcInNkcC10cmFuc2Zvcm1cIiksYT1lKFwiLi9Db25zdGFudHNcIiksYz1lKFwiLi9VdGlsc1wiKSxoPWUoXCIuL05hbWVBZGRySGVhZGVyXCIpLGQ9ZShcIi4vR3JhbW1hclwiKTtyLnByb3RvdHlwZT17c2V0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scjtmb3Iobj1uZXcgUmVnRXhwKFwiXlxcXFxzKlwiK2UrXCJcXFxccyo6XCIsXCJpXCIpLHI9MDtyPHRoaXMuZXh0cmFIZWFkZXJzLmxlbmd0aDtyKyspbi50ZXN0KHRoaXMuZXh0cmFIZWFkZXJzW3JdKSYmdGhpcy5leHRyYUhlYWRlcnMuc3BsaWNlKHIsMSk7dGhpcy5oZWFkZXJzW2MuaGVhZGVyaXplKGUpXT1BcnJheS5pc0FycmF5KHQpP3Q6W3RdfSxnZXRIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMuZXh0cmFIZWFkZXJzLmxlbmd0aCxzPXRoaXMuaGVhZGVyc1tjLmhlYWRlcml6ZShlKV07aWYocyl7aWYoc1swXSlyZXR1cm4gc1swXX1lbHNlIGZvcih0PW5ldyBSZWdFeHAoXCJeXFxcXHMqXCIrZStcIlxcXFxzKjpcIixcImlcIiksbj0wO3I+bjtuKyspaWYocz10aGlzLmV4dHJhSGVhZGVyc1tuXSx0LnRlc3QocykpcmV0dXJuIHMuc3Vic3RyaW5nKHMuaW5kZXhPZihcIjpcIikrMSkudHJpbSgpfSxnZXRIZWFkZXJzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scixzPXRoaXMuaGVhZGVyc1tjLmhlYWRlcml6ZShlKV0sbD1bXTtpZihzKXtmb3Iobj1zLmxlbmd0aCx0PTA7bj50O3QrKylsLnB1c2goc1t0XSk7cmV0dXJuIGx9Zm9yKG49dGhpcy5leHRyYUhlYWRlcnMubGVuZ3RoLHI9bmV3IFJlZ0V4cChcIl5cXFxccypcIitlK1wiXFxcXHMqOlwiLFwiaVwiKSx0PTA7bj50O3QrKylzPXRoaXMuZXh0cmFIZWFkZXJzW3RdLHIudGVzdChzKSYmbC5wdXNoKHMuc3Vic3RyaW5nKHMuaW5kZXhPZihcIjpcIikrMSkudHJpbSgpKTtyZXR1cm4gbH0saGFzSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj10aGlzLmV4dHJhSGVhZGVycy5sZW5ndGg7aWYodGhpcy5oZWFkZXJzW2MuaGVhZGVyaXplKGUpXSlyZXR1cm4hMDtmb3IodD1uZXcgUmVnRXhwKFwiXlxcXFxzKlwiK2UrXCJcXFxccyo6XCIsXCJpXCIpLG49MDtyPm47bisrKWlmKHQudGVzdCh0aGlzLmV4dHJhSGVhZGVyc1tuXSkpcmV0dXJuITA7cmV0dXJuITF9LHBhcnNlU0RQOmZ1bmN0aW9uKGUpe3JldHVybiFlJiZ0aGlzLnNkcD90aGlzLnNkcDoodGhpcy5zZHA9dS5wYXJzZSh0aGlzLmJvZHl8fFwiXCIpLHRoaXMuc2RwKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scj1cIlwiLHM9W107cis9dGhpcy5tZXRob2QrXCIgXCIrdGhpcy5ydXJpK1wiIFNJUC8yLjBcXHJcXG5cIjtmb3IoZSBpbiB0aGlzLmhlYWRlcnMpZm9yKHQ9dGhpcy5oZWFkZXJzW2VdLmxlbmd0aCxuPTA7dD5uO24rKylyKz1lK1wiOiBcIit0aGlzLmhlYWRlcnNbZV1bbl0rXCJcXHJcXG5cIjtmb3IodD10aGlzLmV4dHJhSGVhZGVycy5sZW5ndGgsbj0wO3Q+bjtuKyspcis9dGhpcy5leHRyYUhlYWRlcnNbbl0udHJpbSgpK1wiXFxyXFxuXCI7c3dpdGNoKHRoaXMubWV0aG9kKXtjYXNlIGEuUkVHSVNURVI6cy5wdXNoKFwicGF0aFwiLFwiZ3J1dVwiKTticmVhaztjYXNlIGEuSU5WSVRFOnRoaXMudWEuY29uZmlndXJhdGlvbi5zZXNzaW9uX3RpbWVycyYmcy5wdXNoKFwidGltZXJcIiksKHRoaXMudWEuY29udGFjdC5wdWJfZ3J1dXx8dGhpcy51YS5jb250YWN0LnRlbXBfZ3J1dSkmJnMucHVzaChcImdydXVcIikscy5wdXNoKFwiaWNlXCIsXCJyZXBsYWNlc1wiKTticmVhaztjYXNlIGEuVVBEQVRFOnRoaXMudWEuY29uZmlndXJhdGlvbi5zZXNzaW9uX3RpbWVycyYmcy5wdXNoKFwidGltZXJcIikscy5wdXNoKFwiaWNlXCIpfXJldHVybiBzLnB1c2goXCJvdXRib3VuZFwiKSxyKz1cIkFsbG93OiBcIithLkFMTE9XRURfTUVUSE9EUytcIlxcclxcblwiLHIrPVwiU3VwcG9ydGVkOiBcIitzK1wiXFxyXFxuXCIscis9XCJVc2VyLUFnZW50OiBcIithLlVTRVJfQUdFTlQrXCJcXHJcXG5cIix0aGlzLmJvZHk/KHQ9Yy5zdHJfdXRmOF9sZW5ndGgodGhpcy5ib2R5KSxyKz1cIkNvbnRlbnQtTGVuZ3RoOiBcIit0K1wiXFxyXFxuXFxyXFxuXCIscis9dGhpcy5ib2R5KTpyKz1cIkNvbnRlbnQtTGVuZ3RoOiAwXFxyXFxuXFxyXFxuXCIscn0sY2xvbmU6ZnVuY3Rpb24oKXt2YXIgZT1uZXcgcih0aGlzLm1ldGhvZCx0aGlzLnJ1cmksdGhpcy51YSk7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbih0KXtlLmhlYWRlcnNbdF09dGhpcy5oZWFkZXJzW3RdLnNsaWNlKCl9LHRoaXMpLGUuYm9keT10aGlzLmJvZHksZS5leHRyYUhlYWRlcnM9dGhpcy5leHRyYUhlYWRlcnMmJnRoaXMuZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLGUudG89dGhpcy50byxlLmZyb209dGhpcy5mcm9tLGUuY2FsbF9pZD10aGlzLmNhbGxfaWQsZS5jc2VxPXRoaXMuY3NlcSxlfX0scy5wcm90b3R5cGU9e2FkZEhlYWRlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXtyYXc6dH07ZT1jLmhlYWRlcml6ZShlKSx0aGlzLmhlYWRlcnNbZV0/dGhpcy5oZWFkZXJzW2VdLnB1c2gobik6dGhpcy5oZWFkZXJzW2VdPVtuXX0sZ2V0SGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuaGVhZGVyc1tjLmhlYWRlcml6ZShlKV07aWYodClyZXR1cm4gdFswXT90WzBdLnJhdzp2b2lkIDB9LGdldEhlYWRlcnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMuaGVhZGVyc1tjLmhlYWRlcml6ZShlKV0scz1bXTtpZighcilyZXR1cm5bXTtmb3Iobj1yLmxlbmd0aCx0PTA7bj50O3QrKylzLnB1c2goclt0XS5yYXcpO3JldHVybiBzfSxoYXNIZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuISF0aGlzLmhlYWRlcnNbYy5oZWFkZXJpemUoZSldfSxwYXJzZUhlYWRlcjpmdW5jdGlvbihlLHQpe3ZhciBuLHIscztyZXR1cm4gZT1jLmhlYWRlcml6ZShlKSx0PXR8fDAsdGhpcy5oZWFkZXJzW2VdP3Q+PXRoaXMuaGVhZGVyc1tlXS5sZW5ndGg/dm9pZCBvKCdub3Qgc28gbWFueSBcIicrZSsnXCIgaGVhZGVycyBwcmVzZW50Jyk6KG49dGhpcy5oZWFkZXJzW2VdW3RdLHI9bi5yYXcsbi5wYXJzZWQ/bi5wYXJzZWQ6KHM9ZC5wYXJzZShyLGUucmVwbGFjZSgvLS9nLFwiX1wiKSksLTE9PT1zPyh0aGlzLmhlYWRlcnNbZV0uc3BsaWNlKHQsMSksdm9pZCBvKCdlcnJvciBwYXJzaW5nIFwiJytlKydcIiBoZWFkZXIgZmllbGQgd2l0aCB2YWx1ZSBcIicrcisnXCInKSk6KG4ucGFyc2VkPXMscykpKTp2b2lkIG8oJ2hlYWRlciBcIicrZSsnXCIgbm90IHByZXNlbnQnKX0sczpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnBhcnNlSGVhZGVyKGUsdCl9LHNldEhlYWRlcjpmdW5jdGlvbihlLHQpe3ZhciBuPXtyYXc6dH07dGhpcy5oZWFkZXJzW2MuaGVhZGVyaXplKGUpXT1bbl19LHBhcnNlU0RQOmZ1bmN0aW9uKGUpe3JldHVybiFlJiZ0aGlzLnNkcD90aGlzLnNkcDoodGhpcy5zZHA9dS5wYXJzZSh0aGlzLmJvZHl8fFwiXCIpLHRoaXMuc2RwKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfX0sbC5wcm90b3R5cGU9bmV3IHMsbC5wcm90b3R5cGUucmVwbHk9ZnVuY3Rpb24oZSx0LG4scixzLGwpe3ZhciBpLG8sdSxoLGQscD1bXSxmPXRoaXMuZ2V0SGVhZGVyKFwiVG9cIiksbT0wLGc9MDtpZihlPWV8fG51bGwsdD10fHxudWxsLCFlfHwxMDA+ZXx8ZT42OTkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzX2NvZGU6IFwiK2UpO2lmKHQmJlwic3RyaW5nXCIhPXR5cGVvZiB0JiYhKHQgaW5zdGFuY2VvZiBTdHJpbmcpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHJlYXNvbl9waHJhc2U6IFwiK3QpO2lmKHQ9dHx8YS5SRUFTT05fUEhSQVNFW2VdfHxcIlwiLG49biYmbi5zbGljZSgpfHxbXSxkPVwiU0lQLzIuMCBcIitlK1wiIFwiK3QrXCJcXHJcXG5cIix0aGlzLm1ldGhvZD09PWEuSU5WSVRFJiZlPjEwMCYmMjAwPj1lKWZvcihpPXRoaXMuZ2V0SGVhZGVycyhcInJlY29yZC1yb3V0ZVwiKSx1PWkubGVuZ3RoLG07dT5tO20rKylkKz1cIlJlY29yZC1Sb3V0ZTogXCIraVttXStcIlxcclxcblwiO2ZvcihvPXRoaXMuZ2V0SGVhZGVycyhcInZpYVwiKSx1PW8ubGVuZ3RoLGc7dT5nO2crKylkKz1cIlZpYTogXCIrb1tnXStcIlxcclxcblwiO2ZvcighdGhpcy50b190YWcmJmU+MTAwP2YrPVwiO3RhZz1cIitjLm5ld1RhZygpOnRoaXMudG9fdGFnJiYhdGhpcy5zKFwidG9cIikuaGFzUGFyYW0oXCJ0YWdcIikmJihmKz1cIjt0YWc9XCIrdGhpcy50b190YWcpLFxuZCs9XCJUbzogXCIrZitcIlxcclxcblwiLGQrPVwiRnJvbTogXCIrdGhpcy5nZXRIZWFkZXIoXCJGcm9tXCIpK1wiXFxyXFxuXCIsZCs9XCJDYWxsLUlEOiBcIit0aGlzLmNhbGxfaWQrXCJcXHJcXG5cIixkKz1cIkNTZXE6IFwiK3RoaXMuY3NlcStcIiBcIit0aGlzLm1ldGhvZCtcIlxcclxcblwiLHU9bi5sZW5ndGgsaD0wO3U+aDtoKyspZCs9bltoXS50cmltKCkrXCJcXHJcXG5cIjtzd2l0Y2godGhpcy5tZXRob2Qpe2Nhc2UgYS5JTlZJVEU6dGhpcy51YS5jb25maWd1cmF0aW9uLnNlc3Npb25fdGltZXJzJiZwLnB1c2goXCJ0aW1lclwiKSwodGhpcy51YS5jb250YWN0LnB1Yl9ncnV1fHx0aGlzLnVhLmNvbnRhY3QudGVtcF9ncnV1KSYmcC5wdXNoKFwiZ3J1dVwiKSxwLnB1c2goXCJpY2VcIixcInJlcGxhY2VzXCIpO2JyZWFrO2Nhc2UgYS5VUERBVEU6dGhpcy51YS5jb25maWd1cmF0aW9uLnNlc3Npb25fdGltZXJzJiZwLnB1c2goXCJ0aW1lclwiKSxyJiZwLnB1c2goXCJpY2VcIikscC5wdXNoKFwicmVwbGFjZXNcIil9cC5wdXNoKFwib3V0Ym91bmRcIiksdGhpcy5tZXRob2Q9PT1hLk9QVElPTlM/KGQrPVwiQWxsb3c6IFwiK2EuQUxMT1dFRF9NRVRIT0RTK1wiXFxyXFxuXCIsZCs9XCJBY2NlcHQ6IFwiK2EuQUNDRVBURURfQk9EWV9UWVBFUytcIlxcclxcblwiKTo0MDU9PT1lP2QrPVwiQWxsb3c6IFwiK2EuQUxMT1dFRF9NRVRIT0RTK1wiXFxyXFxuXCI6NDE1PT09ZSYmKGQrPVwiQWNjZXB0OiBcIithLkFDQ0VQVEVEX0JPRFlfVFlQRVMrXCJcXHJcXG5cIiksZCs9XCJTdXBwb3J0ZWQ6IFwiK3ArXCJcXHJcXG5cIixyPyh1PWMuc3RyX3V0ZjhfbGVuZ3RoKHIpLGQrPVwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9zZHBcXHJcXG5cIixkKz1cIkNvbnRlbnQtTGVuZ3RoOiBcIit1K1wiXFxyXFxuXFxyXFxuXCIsZCs9cik6ZCs9XCJDb250ZW50LUxlbmd0aDogMFxcclxcblxcclxcblwiLHRoaXMuc2VydmVyX3RyYW5zYWN0aW9uLnJlY2VpdmVSZXNwb25zZShlLGQscyxsKX0sbC5wcm90b3R5cGUucmVwbHlfc2w9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLHM9MCxsPXRoaXMuZ2V0SGVhZGVycyhcInZpYVwiKSxpPWwubGVuZ3RoO2lmKGU9ZXx8bnVsbCx0PXR8fG51bGwsIWV8fDEwMD5lfHxlPjY5OSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrZSk7aWYodCYmXCJzdHJpbmdcIiE9dHlwZW9mIHQmJiEodCBpbnN0YW5jZW9mIFN0cmluZykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgcmVhc29uX3BocmFzZTogXCIrdCk7Zm9yKHQ9dHx8YS5SRUFTT05fUEhSQVNFW2VdfHxcIlwiLHI9XCJTSVAvMi4wIFwiK2UrXCIgXCIrdCtcIlxcclxcblwiLHM7aT5zO3MrKylyKz1cIlZpYTogXCIrbFtzXStcIlxcclxcblwiO249dGhpcy5nZXRIZWFkZXIoXCJUb1wiKSwhdGhpcy50b190YWcmJmU+MTAwP24rPVwiO3RhZz1cIitjLm5ld1RhZygpOnRoaXMudG9fdGFnJiYhdGhpcy5zKFwidG9cIikuaGFzUGFyYW0oXCJ0YWdcIikmJihuKz1cIjt0YWc9XCIrdGhpcy50b190YWcpLHIrPVwiVG86IFwiK24rXCJcXHJcXG5cIixyKz1cIkZyb206IFwiK3RoaXMuZ2V0SGVhZGVyKFwiRnJvbVwiKStcIlxcclxcblwiLHIrPVwiQ2FsbC1JRDogXCIrdGhpcy5jYWxsX2lkK1wiXFxyXFxuXCIscis9XCJDU2VxOiBcIit0aGlzLmNzZXErXCIgXCIrdGhpcy5tZXRob2QrXCJcXHJcXG5cIixyKz1cIkNvbnRlbnQtTGVuZ3RoOiAwXFxyXFxuXFxyXFxuXCIsdGhpcy50cmFuc3BvcnQuc2VuZChyKX0saS5wcm90b3R5cGU9bmV3IHN9LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vR3JhbW1hclwiOjYsXCIuL05hbWVBZGRySGVhZGVyXCI6OSxcIi4vVXRpbHNcIjoyNSxkZWJ1ZzozMyxcInNkcC10cmFuc2Zvcm1cIjo0NH1dLDE5OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe310LmV4cG9ydHM9cjt2YXIgcz1lKFwiLi9VdGlsc1wiKSxsPWUoXCIuL0dyYW1tYXJcIiksaT1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpTb2NrZXRcIik7ci5pc1NvY2tldD1mdW5jdGlvbihlKXtpZihcInVuZGVmaW5lZFwiPT10eXBlb2YgZSlyZXR1cm4gaShcInVuZGVmaW5lZCBKc1NJUC5Tb2NrZXQgaW5zdGFuY2VcIiksITE7dHJ5e2lmKCFzLmlzU3RyaW5nKGUudXJsKSl0aHJvdyBpKFwibWlzc2luZyBvciBpbnZhbGlkIEpzU0lQLlNvY2tldCB1cmwgcHJvcGVydHlcIiksbmV3IEVycm9yO2lmKCFzLmlzU3RyaW5nKGUudmlhX3RyYW5zcG9ydCkpdGhyb3cgaShcIm1pc3Npbmcgb3IgaW52YWxpZCBKc1NJUC5Tb2NrZXQgdmlhX3RyYW5zcG9ydCBwcm9wZXJ0eVwiKSxuZXcgRXJyb3I7aWYoLTE9PT1sLnBhcnNlKGUuc2lwX3VyaSxcIlNJUF9VUklcIikpdGhyb3cgaShcIm1pc3Npbmcgb3IgaW52YWxpZCBKc1NJUC5Tb2NrZXQgc2lwX3VyaSBwcm9wZXJ0eVwiKSxuZXcgRXJyb3J9Y2F0Y2godCl7cmV0dXJuITF9dHJ5e1tcImNvbm5lY3RcIixcImRpc2Nvbm5lY3RcIixcInNlbmRcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtpZighcy5pc0Z1bmN0aW9uKGVbdF0pKXRocm93IGkoXCJtaXNzaW5nIG9yIGludmFsaWQgSnNTSVAuU29ja2V0IG1ldGhvZDogXCIrdCksbmV3IEVycm9yfSl9Y2F0Y2godCl7cmV0dXJuITF9cmV0dXJuITB9fSx7XCIuL0dyYW1tYXJcIjo2LFwiLi9VdGlsc1wiOjI1LGRlYnVnOjMzfV0sMjA6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj01MDAscz00ZTMsbD01ZTMsaT17VDE6cixUMjpzLFQ0OmwsVElNRVJfQjo2NCpyLFRJTUVSX0Q6MCpyLFRJTUVSX0Y6NjQqcixUSU1FUl9IOjY0KnIsVElNRVJfSTowKnIsVElNRVJfSjowKnIsVElNRVJfSzowKmwsVElNRVJfTDo2NCpyLFRJTUVSX006NjQqcixQUk9WSVNJT05BTF9SRVNQT05TRV9JTlRFUlZBTDo2ZTR9O3QuZXhwb3J0cz1pfSx7fV0sMjE6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCxuKXt2YXIgcjt0aGlzLnR5cGU9YS5OT05fSU5WSVRFX0NMSUVOVCx0aGlzLnRyYW5zcG9ydD1uLHRoaXMuaWQ9XCJ6OWhHNGJLXCIrTWF0aC5mbG9vcigxZTcqTWF0aC5yYW5kb20oKSksdGhpcy5yZXF1ZXN0X3NlbmRlcj1lLHRoaXMucmVxdWVzdD10LHI9XCJTSVAvMi4wL1wiK24udmlhX3RyYW5zcG9ydCxyKz1cIiBcIitlLnVhLmNvbmZpZ3VyYXRpb24udmlhX2hvc3QrXCI7YnJhbmNoPVwiK3RoaXMuaWQsdGhpcy5yZXF1ZXN0LnNldEhlYWRlcihcInZpYVwiLHIpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEubmV3VHJhbnNhY3Rpb24odGhpcyksaC5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKX1mdW5jdGlvbiBzKGUsdCxuKXt2YXIgcixzPXRoaXM7dGhpcy50eXBlPWEuSU5WSVRFX0NMSUVOVCx0aGlzLnRyYW5zcG9ydD1uLHRoaXMuaWQ9XCJ6OWhHNGJLXCIrTWF0aC5mbG9vcigxZTcqTWF0aC5yYW5kb20oKSksdGhpcy5yZXF1ZXN0X3NlbmRlcj1lLHRoaXMucmVxdWVzdD10LHI9XCJTSVAvMi4wL1wiK24udmlhX3RyYW5zcG9ydCxyKz1cIiBcIitlLnVhLmNvbmZpZ3VyYXRpb24udmlhX2hvc3QrXCI7YnJhbmNoPVwiK3RoaXMuaWQsdGhpcy5yZXF1ZXN0LnNldEhlYWRlcihcInZpYVwiLHIpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEubmV3VHJhbnNhY3Rpb24odGhpcyksdGhpcy5yZXF1ZXN0LmNhbmNlbD1mdW5jdGlvbihlKXtzLmNhbmNlbF9yZXF1ZXN0KHMsZSl9LGguRXZlbnRFbWl0dGVyLmNhbGwodGhpcyl9ZnVuY3Rpb24gbChlLHQsbil7dmFyIHI7dGhpcy50cmFuc3BvcnQ9bix0aGlzLmlkPVwiejloRzRiS1wiK01hdGguZmxvb3IoMWU3Kk1hdGgucmFuZG9tKCkpLHRoaXMucmVxdWVzdF9zZW5kZXI9ZSx0aGlzLnJlcXVlc3Q9dCxyPVwiU0lQLzIuMC9cIituLnZpYV90cmFuc3BvcnQscis9XCIgXCIrZS51YS5jb25maWd1cmF0aW9uLnZpYV9ob3N0K1wiO2JyYW5jaD1cIit0aGlzLmlkLHRoaXMucmVxdWVzdC5zZXRIZWFkZXIoXCJ2aWFcIixyKSxoLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpfWZ1bmN0aW9uIGkoZSx0KXt0aGlzLnR5cGU9YS5OT05fSU5WSVRFX1NFUlZFUix0aGlzLmlkPWUudmlhX2JyYW5jaCx0aGlzLnJlcXVlc3Q9ZSx0aGlzLnRyYW5zcG9ydD1lLnRyYW5zcG9ydCx0aGlzLnVhPXQsdGhpcy5sYXN0X3Jlc3BvbnNlPVwiXCIsZS5zZXJ2ZXJfdHJhbnNhY3Rpb249dGhpcyx0aGlzLnN0YXRlPWEuU1RBVFVTX1RSWUlORyx0Lm5ld1RyYW5zYWN0aW9uKHRoaXMpLGguRXZlbnRFbWl0dGVyLmNhbGwodGhpcyl9ZnVuY3Rpb24gbyhlLHQpe3RoaXMudHlwZT1hLklOVklURV9TRVJWRVIsdGhpcy5pZD1lLnZpYV9icmFuY2gsdGhpcy5yZXF1ZXN0PWUsdGhpcy50cmFuc3BvcnQ9ZS50cmFuc3BvcnQsdGhpcy51YT10LHRoaXMubGFzdF9yZXNwb25zZT1cIlwiLGUuc2VydmVyX3RyYW5zYWN0aW9uPXRoaXMsdGhpcy5zdGF0ZT1hLlNUQVRVU19QUk9DRUVESU5HLHQubmV3VHJhbnNhY3Rpb24odGhpcyksdGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyPW51bGwsZS5yZXBseSgxMDApLGguRXZlbnRFbWl0dGVyLmNhbGwodGhpcyl9ZnVuY3Rpb24gdShlLHQpe3ZhciBuO3N3aXRjaCh0Lm1ldGhvZCl7Y2FzZSBULklOVklURTppZihuPWUudHJhbnNhY3Rpb25zLmlzdFt0LnZpYV9icmFuY2hdKXtzd2l0Y2gobi5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOm4udHJhbnNwb3J0LnNlbmQobi5sYXN0X3Jlc3BvbnNlKTticmVhaztjYXNlIGEuU1RBVFVTX0FDQ0VQVEVEOn1yZXR1cm4hMH1icmVhaztjYXNlIFQuQUNLOmlmKG49ZS50cmFuc2FjdGlvbnMuaXN0W3QudmlhX2JyYW5jaF0sIW4pcmV0dXJuITE7aWYobi5zdGF0ZT09PWEuU1RBVFVTX0FDQ0VQVEVEKXJldHVybiExO2lmKG4uc3RhdGU9PT1hLlNUQVRVU19DT01QTEVURUQpcmV0dXJuIG4uc3RhdGU9YS5TVEFUVVNfQ09ORklSTUVELG4uST1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi50aW1lcl9JKCl9LF8uVElNRVJfSSksITA7YnJlYWs7Y2FzZSBULkNBTkNFTDpyZXR1cm4gbj1lLnRyYW5zYWN0aW9ucy5pc3RbdC52aWFfYnJhbmNoXSxuPyh0LnJlcGx5X3NsKDIwMCksbi5zdGF0ZSE9PWEuU1RBVFVTX1BST0NFRURJTkcpOih0LnJlcGx5X3NsKDQ4MSksITApO2RlZmF1bHQ6aWYobj1lLnRyYW5zYWN0aW9ucy5uaXN0W3QudmlhX2JyYW5jaF0pe3N3aXRjaChuLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1RSWUlORzpicmVhaztjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6Y2FzZSBhLlNUQVRVU19DT01QTEVURUQ6bi50cmFuc3BvcnQuc2VuZChuLmxhc3RfcmVzcG9uc2UpfXJldHVybiEwfX19dC5leHBvcnRzPXtDOm51bGwsTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb246cixJbnZpdGVDbGllbnRUcmFuc2FjdGlvbjpzLEFja0NsaWVudFRyYW5zYWN0aW9uOmwsTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb246aSxJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbjpvLGNoZWNrVHJhbnNhY3Rpb246dX07dmFyIGE9e1NUQVRVU19UUllJTkc6MSxTVEFUVVNfUFJPQ0VFRElORzoyLFNUQVRVU19DQUxMSU5HOjMsU1RBVFVTX0FDQ0VQVEVEOjQsU1RBVFVTX0NPTVBMRVRFRDo1LFNUQVRVU19URVJNSU5BVEVEOjYsU1RBVFVTX0NPTkZJUk1FRDo3LE5PTl9JTlZJVEVfQ0xJRU5UOlwibmljdFwiLE5PTl9JTlZJVEVfU0VSVkVSOlwibmlzdFwiLElOVklURV9DTElFTlQ6XCJpY3RcIixJTlZJVEVfU0VSVkVSOlwiaXN0XCJ9O3QuZXhwb3J0cy5DPWE7dmFyIGM9ZShcInV0aWxcIiksaD1lKFwiZXZlbnRzXCIpLGQ9ZShcImRlYnVnXCIpKFwiSnNTSVA6Tm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb25cIikscD1lKFwiZGVidWdcIikoXCJKc1NJUDpJbnZpdGVDbGllbnRUcmFuc2FjdGlvblwiKSxmPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkFja0NsaWVudFRyYW5zYWN0aW9uXCIpLG09ZShcImRlYnVnXCIpKFwiSnNTSVA6Tm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb25cIiksZz1lKFwiZGVidWdcIikoXCJKc1NJUDpJbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvblwiKSxUPWUoXCIuL0NvbnN0YW50c1wiKSxfPWUoXCIuL1RpbWVyc1wiKTtjLmluaGVyaXRzKHIsaC5FdmVudEVtaXR0ZXIpLHIucHJvdG90eXBlLnN0YXRlQ2hhbmdlZD1mdW5jdGlvbihlKXt0aGlzLnN0YXRlPWUsdGhpcy5lbWl0KFwic3RhdGVDaGFuZ2VkXCIpfSxyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19UUllJTkcpLHRoaXMuRj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS50aW1lcl9GKCl9LF8uVElNRVJfRiksdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLnJlcXVlc3QpfHx0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKX0sci5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe2QoXCJ0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQsIGRlbGV0aW5nIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLGNsZWFyVGltZW91dCh0aGlzLkYpLGNsZWFyVGltZW91dCh0aGlzLkspLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpLHRoaXMucmVxdWVzdF9zZW5kZXIub25UcmFuc3BvcnRFcnJvcigpfSxyLnByb3RvdHlwZS50aW1lcl9GPWZ1bmN0aW9uKCl7ZChcIlRpbWVyIEYgZXhwaXJlZCBmb3IgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyksdGhpcy5yZXF1ZXN0X3NlbmRlci5vblJlcXVlc3RUaW1lb3V0KCl9LHIucHJvdG90eXBlLnRpbWVyX0s9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKX0sci5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLnN0YXR1c19jb2RlO2lmKDIwMD5uKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1RSWUlORzpjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfUFJPQ0VFRElORyksdGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UoZSl9ZWxzZSBzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19UUllJTkc6Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX0NPTVBMRVRFRCksY2xlYXJUaW1lb3V0KHRoaXMuRiksNDA4PT09bj90aGlzLnJlcXVlc3Rfc2VuZGVyLm9uUmVxdWVzdFRpbWVvdXQoKTp0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShlKSx0aGlzLks9c2V0VGltZW91dChmdW5jdGlvbigpe3QudGltZXJfSygpfSxfLlRJTUVSX0spO2JyZWFrO2Nhc2UgYS5TVEFUVVNfQ09NUExFVEVEOn19LGMuaW5oZXJpdHMocyxoLkV2ZW50RW1pdHRlcikscy5wcm90b3R5cGUuc3RhdGVDaGFuZ2VkPWZ1bmN0aW9uKGUpe3RoaXMuc3RhdGU9ZSx0aGlzLmVtaXQoXCJzdGF0ZUNoYW5nZWRcIil9LHMucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX0NBTExJTkcpLHRoaXMuQj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS50aW1lcl9CKCl9LF8uVElNRVJfQiksdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLnJlcXVlc3QpfHx0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKX0scy5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLkIpLGNsZWFyVGltZW91dCh0aGlzLkQpLGNsZWFyVGltZW91dCh0aGlzLk0pLHRoaXMuc3RhdGUhPT1hLlNUQVRVU19BQ0NFUFRFRCYmKHAoXCJ0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQsIGRlbGV0aW5nIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMucmVxdWVzdF9zZW5kZXIub25UcmFuc3BvcnRFcnJvcigpKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKX0scy5wcm90b3R5cGUudGltZXJfTT1mdW5jdGlvbigpe3AoXCJUaW1lciBNIGV4cGlyZWQgZm9yIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGU9PT1hLlNUQVRVU19BQ0NFUFRFRCYmKGNsZWFyVGltZW91dCh0aGlzLkIpLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpKX0scy5wcm90b3R5cGUudGltZXJfQj1mdW5jdGlvbigpe3AoXCJUaW1lciBCIGV4cGlyZWQgZm9yIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGU9PT1hLlNUQVRVU19DQUxMSU5HJiYodGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyksdGhpcy5yZXF1ZXN0X3NlbmRlci5vblJlcXVlc3RUaW1lb3V0KCkpfSxzLnByb3RvdHlwZS50aW1lcl9EPWZ1bmN0aW9uKCl7cChcIlRpbWVyIEQgZXhwaXJlZCBmb3IgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksY2xlYXJUaW1lb3V0KHRoaXMuQiksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyl9LHMucHJvdG90eXBlLnNlbmRBQ0s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmFjaz1cIkFDSyBcIit0aGlzLnJlcXVlc3QucnVyaStcIiBTSVAvMi4wXFxyXFxuXCIsdGhpcy5hY2srPVwiVmlhOiBcIit0aGlzLnJlcXVlc3QuaGVhZGVycy5WaWEudG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMucmVxdWVzdC5oZWFkZXJzLlJvdXRlJiYodGhpcy5hY2srPVwiUm91dGU6IFwiK3RoaXMucmVxdWVzdC5oZWFkZXJzLlJvdXRlLnRvU3RyaW5nKCkrXCJcXHJcXG5cIiksdGhpcy5hY2srPVwiVG86IFwiK2UuZ2V0SGVhZGVyKFwidG9cIikrXCJcXHJcXG5cIix0aGlzLmFjays9XCJGcm9tOiBcIit0aGlzLnJlcXVlc3QuaGVhZGVycy5Gcm9tLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLmFjays9XCJDYWxsLUlEOiBcIit0aGlzLnJlcXVlc3QuaGVhZGVyc1tcIkNhbGwtSURcIl0udG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMuYWNrKz1cIkNTZXE6IFwiK3RoaXMucmVxdWVzdC5oZWFkZXJzLkNTZXEudG9TdHJpbmcoKS5zcGxpdChcIiBcIilbMF0sdGhpcy5hY2srPVwiIEFDS1xcclxcblwiLHRoaXMuYWNrKz1cIkNvbnRlbnQtTGVuZ3RoOiAwXFxyXFxuXFxyXFxuXCIsdGhpcy5EPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnRpbWVyX0QoKX0sXy5USU1FUl9EKSx0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMuYWNrKX0scy5wcm90b3R5cGUuY2FuY2VsX3JlcXVlc3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnJlcXVlc3Q7dGhpcy5jYW5jZWw9VC5DQU5DRUwrXCIgXCIrbi5ydXJpK1wiIFNJUC8yLjBcXHJcXG5cIix0aGlzLmNhbmNlbCs9XCJWaWE6IFwiK24uaGVhZGVycy5WaWEudG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMucmVxdWVzdC5oZWFkZXJzLlJvdXRlJiYodGhpcy5jYW5jZWwrPVwiUm91dGU6IFwiK24uaGVhZGVycy5Sb3V0ZS50b1N0cmluZygpK1wiXFxyXFxuXCIpLHRoaXMuY2FuY2VsKz1cIlRvOiBcIituLmhlYWRlcnMuVG8udG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMuY2FuY2VsKz1cIkZyb206IFwiK24uaGVhZGVycy5Gcm9tLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLmNhbmNlbCs9XCJDYWxsLUlEOiBcIituLmhlYWRlcnNbXCJDYWxsLUlEXCJdLnRvU3RyaW5nKCkrXCJcXHJcXG5cIix0aGlzLmNhbmNlbCs9XCJDU2VxOiBcIituLmhlYWRlcnMuQ1NlcS50b1N0cmluZygpLnNwbGl0KFwiIFwiKVswXStcIiBDQU5DRUxcXHJcXG5cIix0JiYodGhpcy5jYW5jZWwrPVwiUmVhc29uOiBcIit0K1wiXFxyXFxuXCIpLHRoaXMuY2FuY2VsKz1cIkNvbnRlbnQtTGVuZ3RoOiAwXFxyXFxuXFxyXFxuXCIsdGhpcy5zdGF0ZT09PWEuU1RBVFVTX1BST0NFRURJTkcmJnRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5jYW5jZWwpfSxzLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuc3RhdHVzX2NvZGU7aWYobj49MTAwJiYxOTk+PW4pc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfQ0FMTElORzp0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19QUk9DRUVESU5HKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShlKTticmVhaztjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UoZSl9ZWxzZSBpZihuPj0yMDAmJjI5OT49bilzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19DQUxMSU5HOmNhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19BQ0NFUFRFRCksdGhpcy5NPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnRpbWVyX00oKX0sXy5USU1FUl9NKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShlKTticmVhaztjYXNlIGEuU1RBVFVTX0FDQ0VQVEVEOnRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKGUpfWVsc2UgaWYobj49MzAwJiY2OTk+PW4pc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfQ0FMTElORzpjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfQ09NUExFVEVEKSx0aGlzLnNlbmRBQ0soZSksdGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UoZSk7YnJlYWs7Y2FzZSBhLlNUQVRVU19DT01QTEVURUQ6dGhpcy5zZW5kQUNLKGUpfX0sYy5pbmhlcml0cyhsLGguRXZlbnRFbWl0dGVyKSxsLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKCl7dGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLnJlcXVlc3QpfHx0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKX0sbC5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe2YoXCJ0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQgZm9yIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMucmVxdWVzdF9zZW5kZXIub25UcmFuc3BvcnRFcnJvcigpfSxjLmluaGVyaXRzKGksaC5FdmVudEVtaXR0ZXIpLGkucHJvdG90eXBlLnN0YXRlQ2hhbmdlZD1mdW5jdGlvbihlKXt0aGlzLnN0YXRlPWUsdGhpcy5lbWl0KFwic3RhdGVDaGFuZ2VkXCIpfSxpLnByb3RvdHlwZS50aW1lcl9KPWZ1bmN0aW9uKCl7bShcIlRpbWVyIEogZXhwaXJlZCBmb3IgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyl9LGkucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zcG9ydEVycm9yfHwodGhpcy50cmFuc3BvcnRFcnJvcj0hMCxtKFwidHJhbnNwb3J0IGVycm9yIG9jY3VycmVkLCBkZWxldGluZyB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSxjbGVhclRpbWVvdXQodGhpcy5KKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSl9LGkucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlLHQsbixyKXt2YXIgcz10aGlzO2lmKDEwMD09PWUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfVFJZSU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1BST0NFRURJTkcpLHRoaXMudHJhbnNwb3J0LnNlbmQodCl8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpO2JyZWFrO2Nhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLmxhc3RfcmVzcG9uc2U9dCx0aGlzLnRyYW5zcG9ydC5zZW5kKHQpP24mJm4oKToodGhpcy5vblRyYW5zcG9ydEVycm9yKCksciYmcigpKX1lbHNlIGlmKGU+PTIwMCYmNjk5Pj1lKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1RSWUlORzpjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfQ09NUExFVEVEKSx0aGlzLmxhc3RfcmVzcG9uc2U9dCx0aGlzLko9c2V0VGltZW91dChmdW5jdGlvbigpe3MudGltZXJfSigpfSxfLlRJTUVSX0opLHRoaXMudHJhbnNwb3J0LnNlbmQodCk/biYmbigpOih0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKSxyJiZyKCkpO2JyZWFrO2Nhc2UgYS5TVEFUVVNfQ09NUExFVEVEOn19LGMuaW5oZXJpdHMobyxoLkV2ZW50RW1pdHRlciksby5wcm90b3R5cGUuc3RhdGVDaGFuZ2VkPWZ1bmN0aW9uKGUpe3RoaXMuc3RhdGU9ZSx0aGlzLmVtaXQoXCJzdGF0ZUNoYW5nZWRcIil9LG8ucHJvdG90eXBlLnRpbWVyX0g9ZnVuY3Rpb24oKXtnKFwiVGltZXIgSCBleHBpcmVkIGZvciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnN0YXRlPT09YS5TVEFUVVNfQ09NUExFVEVEJiZnKFwiQUNLIG5vdCByZWNlaXZlZCwgZGlhbG9nIHdpbGwgYmUgdGVybWluYXRlZFwiKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKX0sby5wcm90b3R5cGUudGltZXJfST1mdW5jdGlvbigpe3RoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpfSxvLnByb3RvdHlwZS50aW1lcl9MPWZ1bmN0aW9uKCl7ZyhcIlRpbWVyIEwgZXhwaXJlZCBmb3IgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5zdGF0ZT09PWEuU1RBVFVTX0FDQ0VQVEVEJiYodGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcykpfSxvLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7dGhpcy50cmFuc3BvcnRFcnJvcnx8KHRoaXMudHJhbnNwb3J0RXJyb3I9ITAsZyhcInRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksbnVsbCE9PXRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciYmKGNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKSx0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9bnVsbCksY2xlYXJUaW1lb3V0KHRoaXMuTCksY2xlYXJUaW1lb3V0KHRoaXMuSCksY2xlYXJUaW1lb3V0KHRoaXMuSSksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcykpfSxvLnByb3RvdHlwZS5yZXNlbmRfcHJvdmlzaW9uYWw9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMubGFzdF9yZXNwb25zZSl8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpfSxvLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSx0LG4scil7dmFyIHM9dGhpcztpZihlPj0xMDAmJjE5OT49ZSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMudHJhbnNwb3J0LnNlbmQodCl8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHRoaXMubGFzdF9yZXNwb25zZT10fWlmKGU+MTAwJiYxOTk+PWUmJnRoaXMuc3RhdGU9PT1hLlNUQVRVU19QUk9DRUVESU5HKW51bGw9PT10aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXImJih0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtzLnJlc2VuZF9wcm92aXNpb25hbCgpfSxfLlBST1ZJU0lPTkFMX1JFU1BPTlNFX0lOVEVSVkFMKSk7ZWxzZSBpZihlPj0yMDAmJjI5OT49ZSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX0FDQ0VQVEVEKSx0aGlzLmxhc3RfcmVzcG9uc2U9dCx0aGlzLkw9c2V0VGltZW91dChmdW5jdGlvbigpe3MudGltZXJfTCgpfSxfLlRJTUVSX0wpLG51bGwhPT10aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXImJihjbGVhckludGVydmFsKHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciksdGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyPW51bGwpO2Nhc2UgYS5TVEFUVVNfQUNDRVBURUQ6dGhpcy50cmFuc3BvcnQuc2VuZCh0KT9uJiZuKCk6KHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHImJnIoKSl9ZWxzZSBpZihlPj0zMDAmJjY5OT49ZSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOm51bGwhPT10aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXImJihjbGVhckludGVydmFsKHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciksdGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyPW51bGwpLHRoaXMudHJhbnNwb3J0LnNlbmQodCk/KHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX0NPTVBMRVRFRCksdGhpcy5IPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzLnRpbWVyX0goKX0sXy5USU1FUl9IKSxuJiZuKCkpOih0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKSxyJiZyKCkpfX19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vVGltZXJzXCI6MjAsZGVidWc6MzMsZXZlbnRzOjI4LHV0aWw6MzJ9XSwyMjpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0KXtpZihjKFwibmV3KClcIiksdGhpcy5zdGF0dXM9ZC5TVEFUVVNfRElTQ09OTkVDVEVELHRoaXMuc29ja2V0PW51bGwsdGhpcy5zb2NrZXRzPVtdLHRoaXMucmVjb3Zlcnlfb3B0aW9ucz10fHxkLnJlY292ZXJ5X29wdGlvbnMsdGhpcy5yZWNvdmVyX2F0dGVtcHRzPTAsdGhpcy5yZWNvdmVyeV90aW1lcj1udWxsLHRoaXMuY2xvc2VfcmVxdWVzdGVkPSExLFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50LiB1bmRlZmluZWQgJ3NvY2tldHMnIGFyZ3VtZW50XCIpO2UgaW5zdGFuY2VvZiBBcnJheXx8KGU9W2VdKSxlLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoIWEuaXNTb2NrZXQoZS5zb2NrZXQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50LiBpbnZhbGlkICdKc1NJUC5Tb2NrZXQnIGluc3RhbmNlXCIpO2lmKGUud2VpZ2h0JiYhTnVtYmVyKGUud2VpZ2h0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhcmd1bWVudC4gJ3dlaWdodCcgYXR0cmlidXRlIGlzIG5vdCBhIG51bWJlclwiKTt0aGlzLnNvY2tldHMucHVzaCh7c29ja2V0OmUuc29ja2V0LHdlaWdodDplLndlaWdodHx8MCxzdGF0dXM6ZC5TT0NLRVRfU1RBVFVTX1JFQURZfSl9LHRoaXMpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3ZpYV90cmFuc3BvcnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvY2tldC52aWFfdHJhbnNwb3J0fX0sdXJsOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb2NrZXQudXJsfX0sc2lwX3VyaTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc29ja2V0LnNpcF91cml9fX0pLHUuY2FsbCh0aGlzKX1mdW5jdGlvbiBzKCl7dGhpcy5yZWNvdmVyX2F0dGVtcHRzPTAsdGhpcy5zdGF0dXM9ZC5TVEFUVVNfQ09OTkVDVEVELG51bGwhPT10aGlzLnJlY292ZXJ5X3RpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVjb3ZlcnlfdGltZXIpLHRoaXMucmVjb3ZlcnlfdGltZXI9bnVsbCksdGhpcy5vbmNvbm5lY3Qoe3NvY2tldDp0aGlzfSl9ZnVuY3Rpb24gbChlLHQsbil7dGhpcy5zdGF0dXM9ZC5TVEFUVVNfRElTQ09OTkVDVEVELHRoaXMub25kaXNjb25uZWN0KHtzb2NrZXQ6dGhpcy5zb2NrZXQsZXJyb3I6ZSxjb2RlOnQscmVhc29uOm59KSx0aGlzLmNsb3NlX3JlcXVlc3RlZHx8KGUmJih0aGlzLnNvY2tldC5zdGF0dXM9ZC5TT0NLRVRfU1RBVFVTX0VSUk9SKSxvLmNhbGwodGhpcyxlKSl9ZnVuY3Rpb24gaShlKXtpZihcIlxcclxcblwiPT09ZSlyZXR1cm4gdm9pZCBjKFwicmVjZWl2ZWQgbWVzc2FnZSB3aXRoIENSTEYgS2VlcCBBbGl2ZSByZXNwb25zZVwiKTtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl7dHJ5e2U9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50OEFycmF5KGUpKX1jYXRjaCh0KXtyZXR1cm4gdm9pZCBjKFwicmVjZWl2ZWQgYmluYXJ5IG1lc3NhZ2UgZmFpbGVkIHRvIGJlIGNvbnZlcnRlZCBpbnRvIHN0cmluZywgbWVzc2FnZSBkaXNjYXJkZWRcIil9YyhcInJlY2VpdmVkIGJpbmFyeSBtZXNzYWdlOlxcblxcblwiK2UrXCJcXG5cIil9ZWxzZSBjKFwicmVjZWl2ZWQgdGV4dCBtZXNzYWdlOlxcblxcblwiK2UrXCJcXG5cIik7dGhpcy5vbmRhdGEoe3RyYW5zcG9ydDp0aGlzLG1lc3NhZ2U6ZX0pfWZ1bmN0aW9uIG8oKXt2YXIgZSx0PXRoaXM7dGhpcy5yZWNvdmVyX2F0dGVtcHRzKz0xLGU9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKk1hdGgucG93KDIsdGhpcy5yZWNvdmVyX2F0dGVtcHRzKSsxKSxlPHRoaXMucmVjb3Zlcnlfb3B0aW9ucy5taW5faW50ZXJ2YWw/ZT10aGlzLnJlY292ZXJ5X29wdGlvbnMubWluX2ludGVydmFsOmU+dGhpcy5yZWNvdmVyeV9vcHRpb25zLm1heF9pbnRlcnZhbCYmKGU9dGhpcy5yZWNvdmVyeV9vcHRpb25zLm1heF9pbnRlcnZhbCksYyhcInJlY29ubmVjdGlvbiBhdHRlbXB0OiBcIit0aGlzLnJlY292ZXJfYXR0ZW1wdHMrXCIuIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0IGluIFwiK2UrXCIgc2Vjb25kc1wiKSx0aGlzLnJlY292ZXJ5X3RpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmNsb3NlX3JlcXVlc3RlZHx8dC5pc0Nvbm5lY3RlZCgpfHx0LmlzQ29ubmVjdGluZygpfHwodS5jYWxsKHQpLHQuY29ubmVjdCgpKX0sMWUzKmUpfWZ1bmN0aW9uIHUoKXt2YXIgZT1bXTtpZih0aGlzLnNvY2tldHMuZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0YXR1cyE9PWQuU09DS0VUX1NUQVRVU19FUlJPUiYmKDA9PT1lLmxlbmd0aD9lLnB1c2godCk6dC53ZWlnaHQ+ZVswXS53ZWlnaHQ/ZT1bdF06dC53ZWlnaHQ9PT1lWzBdLndlaWdodCYmZS5wdXNoKHQpKX0pLDA9PT1lLmxlbmd0aClyZXR1cm4gdGhpcy5zb2NrZXRzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdGF0dXM9ZC5TT0NLRVRfU1RBVFVTX1JFQURZfSksdm9pZCB1LmNhbGwodGhpcyk7dmFyIHQ9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmUubGVuZ3RoKTt0aGlzLnNvY2tldD1lW3RdLnNvY2tldH10LmV4cG9ydHM9cjt2YXIgYT1lKFwiLi9Tb2NrZXRcIiksYz1lKFwiZGVidWdcIikoXCJKc1NJUDpUcmFuc3BvcnRcIiksaD1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpUcmFuc3BvcnRcIiksZD17U1RBVFVTX0NPTk5FQ1RFRDowLFNUQVRVU19DT05ORUNUSU5HOjEsU1RBVFVTX0RJU0NPTk5FQ1RFRDoyLFNPQ0tFVF9TVEFUVVNfUkVBRFk6MCxTT0NLRVRfU1RBVFVTX0VSUk9SOjEscmVjb3Zlcnlfb3B0aW9uczp7bWluX2ludGVydmFsOjIsbWF4X2ludGVydmFsOjMwfX07ci5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbigpe3JldHVybiBjKFwiY29ubmVjdCgpXCIpLHRoaXMuaXNDb25uZWN0ZWQoKT92b2lkIGMoXCJUcmFuc3BvcnQgaXMgYWxyZWFkeSBjb25uZWN0ZWRcIik6dGhpcy5pc0Nvbm5lY3RpbmcoKT92b2lkIGMoXCJUcmFuc3BvcnQgaXMgY29ubmVjdGluZ1wiKToodGhpcy5jbG9zZV9yZXF1ZXN0ZWQ9ITEsdGhpcy5zdGF0dXM9ZC5TVEFUVVNfQ09OTkVDVElORyx0aGlzLm9uY29ubmVjdGluZyh7c29ja2V0OnRoaXMuc29ja2V0LGF0dGVtcHRzOnRoaXMucmVjb3Zlcl9hdHRlbXB0c30pLHZvaWQodGhpcy5jbG9zZV9yZXF1ZXN0ZWR8fCh0aGlzLnNvY2tldC5vbmNvbm5lY3Q9cy5iaW5kKHRoaXMpLHRoaXMuc29ja2V0Lm9uZGlzY29ubmVjdD1sLmJpbmQodGhpcyksdGhpcy5zb2NrZXQub25kYXRhPWkuYmluZCh0aGlzKSx0aGlzLnNvY2tldC5jb25uZWN0KCkpKSl9LHIucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXtjKFwiY2xvc2UoKVwiKSx0aGlzLmNsb3NlX3JlcXVlc3RlZD0hMCx0aGlzLnJlY292ZXJfYXR0ZW1wdHM9MCx0aGlzLnN0YXR1cz1kLlNUQVRVU19ESVNDT05ORUNURUQsbnVsbCE9PXRoaXMucmVjb3ZlcnlfdGltZXImJihjbGVhclRpbWVvdXQodGhpcy5yZWNvdmVyeV90aW1lciksdGhpcy5yZWNvdmVyeV90aW1lcj1udWxsKSx0aGlzLnNvY2tldC5vbmNvbm5lY3Q9ZnVuY3Rpb24oKXt9LHRoaXMuc29ja2V0Lm9uZGlzY29ubmVjdD1mdW5jdGlvbigpe30sdGhpcy5zb2NrZXQub25kYXRhPWZ1bmN0aW9uKCl7fSx0aGlzLnNvY2tldC5kaXNjb25uZWN0KCksdGhpcy5vbmRpc2Nvbm5lY3QoKX0sci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXtpZihjKFwic2VuZCgpXCIpLCF0aGlzLmlzQ29ubmVjdGVkKCkpcmV0dXJuIGgoXCJ1bmFibGUgdG8gc2VuZCBtZXNzYWdlLCB0cmFuc3BvcnQgaXMgbm90IGNvbm5lY3RlZFwiKSwhMTt2YXIgdD1lLnRvU3RyaW5nKCk7cmV0dXJuIGMoXCJzZW5kaW5nIG1lc3NhZ2U6XFxuXFxuXCIrdCtcIlxcblwiKSx0aGlzLnNvY2tldC5zZW5kKHQpfSxyLnByb3RvdHlwZS5pc0Nvbm5lY3RlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN0YXR1cz09PWQuU1RBVFVTX0NPTk5FQ1RFRH0sci5wcm90b3R5cGUuaXNDb25uZWN0aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdHVzPT09ZC5TVEFUVVNfQ09OTkVDVElOR319LHtcIi4vU29ja2V0XCI6MTksZGVidWc6MzN9XSwyMzpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7aWYodGhpcy5jYWNoZT17Y3JlZGVudGlhbHM6e319LHRoaXMuY29uZmlndXJhdGlvbj17fSx0aGlzLmR5bkNvbmZpZ3VyYXRpb249e30sdGhpcy5kaWFsb2dzPXt9LHRoaXMuYXBwbGljYW50cz17fSx0aGlzLnNlc3Npb25zPXt9LHRoaXMudHJhbnNwb3J0PW51bGwsdGhpcy5jb250YWN0PW51bGwsdGhpcy5zdGF0dXM9dS5TVEFUVVNfSU5JVCx0aGlzLmVycm9yPW51bGwsdGhpcy50cmFuc2FjdGlvbnM9e25pc3Q6e30sbmljdDp7fSxpc3Q6e30saWN0Ont9fSx0aGlzLmRhdGE9e30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7dHJhbnNhY3Rpb25zQ291bnQ6e2dldDpmdW5jdGlvbigpe3ZhciBlLHQ9W1wibmlzdFwiLFwibmljdFwiLFwiaXN0XCIsXCJpY3RcIl0sbj0wO2ZvcihlIGluIHQpbis9T2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnNbdFtlXV0pLmxlbmd0aDtyZXR1cm4gbn19LG5pY3RUcmFuc2FjdGlvbnNDb3VudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zLm5pY3QpLmxlbmd0aH19LG5pc3RUcmFuc2FjdGlvbnNDb3VudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zLm5pc3QpLmxlbmd0aH19LGljdFRyYW5zYWN0aW9uc0NvdW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnMuaWN0KS5sZW5ndGh9fSxpc3RUcmFuc2FjdGlvbnNDb3VudDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudHJhbnNhY3Rpb25zLmlzdCkubGVuZ3RofX19KSx2b2lkIDA9PT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJOb3QgZW5vdWdoIGFyZ3VtZW50c1wiKTt0cnl7dGhpcy5sb2FkQ29uZmlnKGUpfWNhdGNoKHQpe3Rocm93IHRoaXMuc3RhdHVzPXUuU1RBVFVTX05PVF9SRUFEWSx0aGlzLmVycm9yPXUuQ09ORklHVVJBVElPTl9FUlJPUix0fXRoaXMuX3JlZ2lzdHJhdG9yPW5ldyBtKHRoaXMpLGMuRXZlbnRFbWl0dGVyLmNhbGwodGhpcykscC5jYWxsZWR8fHAoKX1mdW5jdGlvbiBzKGUpe3RoaXMuZW1pdChcImNvbm5lY3RpbmdcIixlKX1mdW5jdGlvbiBsKGUpe3RoaXMuc3RhdHVzIT09dS5TVEFUVVNfVVNFUl9DTE9TRUQmJih0aGlzLnN0YXR1cz11LlNUQVRVU19SRUFEWSx0aGlzLmVycm9yPW51bGwsdGhpcy5lbWl0KFwiY29ubmVjdGVkXCIsZSksdGhpcy5keW5Db25maWd1cmF0aW9uLnJlZ2lzdGVyJiZ0aGlzLl9yZWdpc3RyYXRvci5yZWdpc3RlcigpKX1mdW5jdGlvbiBpKGUpe3ZhciB0LG4scixzPVtcIm5pY3RcIixcImljdFwiLFwibmlzdFwiLFwiaXN0XCJdO2ZvcihyPXMubGVuZ3RoLHQ9MDtyPnQ7dCsrKWZvcihuIGluIHRoaXMudHJhbnNhY3Rpb25zW3NbdF1dKXRoaXMudHJhbnNhY3Rpb25zW3NbdF1dW25dLm9uVHJhbnNwb3J0RXJyb3IoKTt0aGlzLmVtaXQoXCJkaXNjb25uZWN0ZWRcIixlKSx0aGlzLl9yZWdpc3RyYXRvci5vblRyYW5zcG9ydENsb3NlZCgpLHRoaXMuc3RhdHVzIT09dS5TVEFUVVNfVVNFUl9DTE9TRUQmJih0aGlzLnN0YXR1cz11LlNUQVRVU19OT1RfUkVBRFksdGhpcy5lcnJvcj11Lk5FVFdPUktfRVJST1IpfWZ1bmN0aW9uIG8oZSl7dmFyIHQsbj1lLnRyYW5zcG9ydCxzPWUubWVzc2FnZTtpZihzPWIucGFyc2VNZXNzYWdlKHMsdGhpcykscyYmISh0aGlzLnN0YXR1cz09PXIuQy5TVEFUVVNfVVNFUl9DTE9TRUQmJnMgaW5zdGFuY2VvZiBJLkluY29taW5nUmVxdWVzdCkmJncocyx0aGlzLG4pKWlmKHMgaW5zdGFuY2VvZiBJLkluY29taW5nUmVxdWVzdClzLnRyYW5zcG9ydD1uLHRoaXMucmVjZWl2ZVJlcXVlc3Qocyk7ZWxzZSBpZihzIGluc3RhbmNlb2YgSS5JbmNvbWluZ1Jlc3BvbnNlKXN3aXRjaChzLm1ldGhvZCl7Y2FzZSBmLklOVklURTp0PXRoaXMudHJhbnNhY3Rpb25zLmljdFtzLnZpYV9icmFuY2hdLHQmJnQucmVjZWl2ZVJlc3BvbnNlKHMpO2JyZWFrO2Nhc2UgZi5BQ0s6YnJlYWs7ZGVmYXVsdDp0PXRoaXMudHJhbnNhY3Rpb25zLm5pY3Rbcy52aWFfYnJhbmNoXSx0JiZ0LnJlY2VpdmVSZXNwb25zZShzKX19dC5leHBvcnRzPXI7dmFyIHU9e1NUQVRVU19JTklUOjAsU1RBVFVTX1JFQURZOjEsU1RBVFVTX1VTRVJfQ0xPU0VEOjIsU1RBVFVTX05PVF9SRUFEWTozLENPTkZJR1VSQVRJT05fRVJST1I6MSxORVRXT1JLX0VSUk9SOjJ9O3IuQz11O3ZhciBhPWUoXCJ1dGlsXCIpLGM9ZShcImV2ZW50c1wiKSxoPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlVBXCIpLGQ9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6VUFcIik7ZC5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7dmFyIHA9ZShcInJ0Y25pbmphXCIpLGY9ZShcIi4vQ29uc3RhbnRzXCIpLG09ZShcIi4vUmVnaXN0cmF0b3JcIiksZz1lKFwiLi9SVENTZXNzaW9uXCIpLFQ9ZShcIi4vTWVzc2FnZVwiKSxfPWUoXCIuL1RyYW5zYWN0aW9uc1wiKSx2PWUoXCIuL1RyYW5zcG9ydFwiKSxDPWUoXCIuL1dlYlNvY2tldEludGVyZmFjZVwiKSxTPWUoXCIuL1NvY2tldFwiKSxFPWUoXCIuL1V0aWxzXCIpLEE9ZShcIi4vRXhjZXB0aW9uc1wiKSx5PWUoXCIuL1VSSVwiKSxSPWUoXCIuL0dyYW1tYXJcIiksYj1lKFwiLi9QYXJzZXJcIiksST1lKFwiLi9TSVBNZXNzYWdlXCIpLHc9ZShcIi4vc2FuaXR5Q2hlY2tcIik7YS5pbmhlcml0cyhyLGMuRXZlbnRFbWl0dGVyKSxyLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtoKFwicmVzdGFydGluZyBVQVwiKSx0LnN0YXR1cz11LlNUQVRVU19SRUFEWSx0LnRyYW5zcG9ydC5jb25uZWN0KCl9aChcInN0YXJ0KClcIik7dmFyIHQ9dGhpczt0aGlzLnN0YXR1cz09PXUuU1RBVFVTX0lOSVQ/dGhpcy50cmFuc3BvcnQuY29ubmVjdCgpOnRoaXMuc3RhdHVzPT09dS5TVEFUVVNfVVNFUl9DTE9TRUQ/dGhpcy5pc0Nvbm5lY3RlZCgpP3RoaXMub25jZShcImRpc2Nvbm5lY3RlZFwiLGUpOmUoKTpoKHRoaXMuc3RhdHVzPT09dS5TVEFUVVNfUkVBRFk/XCJVQSBpcyBpbiBSRUFEWSBzdGF0dXMsIG5vdCByZXN0YXJ0ZWRcIjpcIkVSUk9SOiBjb25uZWN0aW9uIGlzIGRvd24sIEF1dG8tUmVjb3Zlcnkgc3lzdGVtIGlzIHRyeWluZyB0byByZWNvbm5lY3RcIiksdGhpcy5keW5Db25maWd1cmF0aW9uLnJlZ2lzdGVyPXRoaXMuY29uZmlndXJhdGlvbi5yZWdpc3Rlcn0sci5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oKXtoKFwicmVnaXN0ZXIoKVwiKSx0aGlzLmR5bkNvbmZpZ3VyYXRpb24ucmVnaXN0ZXI9ITAsdGhpcy5fcmVnaXN0cmF0b3IucmVnaXN0ZXIoKX0sci5wcm90b3R5cGUudW5yZWdpc3Rlcj1mdW5jdGlvbihlKXtoKFwidW5yZWdpc3RlcigpXCIpLHRoaXMuZHluQ29uZmlndXJhdGlvbi5yZWdpc3Rlcj0hMSx0aGlzLl9yZWdpc3RyYXRvci51bnJlZ2lzdGVyKGUpfSxyLnByb3RvdHlwZS5yZWdpc3RyYXRvcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZWdpc3RyYXRvcn0sci5wcm90b3R5cGUuaXNSZWdpc3RlcmVkPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9yZWdpc3RyYXRvci5yZWdpc3RlcmVkfSxyLnByb3RvdHlwZS5pc0Nvbm5lY3RlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zcG9ydC5pc0Nvbm5lY3RlZCgpfSxyLnByb3RvdHlwZS5jYWxsPWZ1bmN0aW9uKGUsdCl7aChcImNhbGwoKVwiKTt2YXIgbjtyZXR1cm4gbj1uZXcgZyh0aGlzKSxuLmNvbm5lY3QoZSx0KSxufSxyLnByb3RvdHlwZS5zZW5kTWVzc2FnZT1mdW5jdGlvbihlLHQsbil7aChcInNlbmRNZXNzYWdlKClcIik7dmFyIHI7cmV0dXJuIHI9bmV3IFQodGhpcyksci5zZW5kKGUsdCxuKSxyfSxyLnByb3RvdHlwZS50ZXJtaW5hdGVTZXNzaW9ucz1mdW5jdGlvbihlKXtoKFwidGVybWluYXRlU2Vzc2lvbnMoKVwiKTtmb3IodmFyIHQgaW4gdGhpcy5zZXNzaW9ucyl0aGlzLnNlc3Npb25zW3RdLmlzRW5kZWQoKXx8dGhpcy5zZXNzaW9uc1t0XS50ZXJtaW5hdGUoZSl9LHIucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXtoKFwic3RvcCgpXCIpO3ZhciBlLHQsbixyPXRoaXM7aWYodGhpcy5keW5Db25maWd1cmF0aW9uPXt9LHRoaXMuc3RhdHVzPT09dS5TVEFUVVNfVVNFUl9DTE9TRUQpcmV0dXJuIHZvaWQgaChcIlVBIGFscmVhZHkgY2xvc2VkXCIpO3RoaXMuX3JlZ2lzdHJhdG9yLmNsb3NlKCksbj1PYmplY3Qua2V5cyh0aGlzLnNlc3Npb25zKS5sZW5ndGg7Zm9yKGUgaW4gdGhpcy5zZXNzaW9ucyl7aChcImNsb3Npbmcgc2Vzc2lvbiBcIitlKTt0cnl7dGhpcy5zZXNzaW9uc1tlXS50ZXJtaW5hdGUoKX1jYXRjaChzKXt9fWZvcih0IGluIHRoaXMuYXBwbGljYW50cyl0cnl7dGhpcy5hcHBsaWNhbnRzW3RdLmNsb3NlKCl9Y2F0Y2gocyl7fXRoaXMuc3RhdHVzPXUuU1RBVFVTX1VTRVJfQ0xPU0VELDA9PT10aGlzLm5pc3RUcmFuc2FjdGlvbnNDb3VudCYmMD09PXRoaXMubmljdFRyYW5zYWN0aW9uc0NvdW50JiYwPT09dGhpcy5pY3RUcmFuc2FjdGlvbnNDb3VudCYmMD09PXRoaXMuaXN0VHJhbnNhY3Rpb25zQ291bnQmJjA9PT1uP3IudHJhbnNwb3J0LmRpc2Nvbm5lY3QoKTpzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci50cmFuc3BvcnQuZGlzY29ubmVjdCgpfSwyZTMpfSxyLnByb3RvdHlwZS5ub3JtYWxpemVUYXJnZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIEUubm9ybWFsaXplVGFyZ2V0KGUsdGhpcy5jb25maWd1cmF0aW9uLmhvc3Rwb3J0X3BhcmFtcyl9LHIucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZVwicmVhbG1cIjpyZXR1cm4gdGhpcy5jb25maWd1cmF0aW9uLnJlYWxtO2Nhc2VcImhhMVwiOnJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24uaGExO2RlZmF1bHQ6cmV0dXJuIHZvaWQgZCgnZ2V0KCkgfCBjYW5ub3QgZ2V0IFwiJXNcIiBwYXJhbWV0ZXIgaW4gcnVudGltZScsZSl9cmV0dXJuITB9LHIucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlXCJwYXNzd29yZFwiOnRoaXMuY29uZmlndXJhdGlvbi5wYXNzd29yZD1TdHJpbmcodCk7YnJlYWs7Y2FzZVwicmVhbG1cIjp0aGlzLmNvbmZpZ3VyYXRpb24ucmVhbG09U3RyaW5nKHQpO2JyZWFrO2Nhc2VcImhhMVwiOnRoaXMuY29uZmlndXJhdGlvbi5oYTE9U3RyaW5nKHQpLHRoaXMuY29uZmlndXJhdGlvbi5wYXNzd29yZD1udWxsO2JyZWFrO2Nhc2VcImRpc3BsYXlfbmFtZVwiOmlmKC0xPT09Ui5wYXJzZSgnXCInK3QrJ1wiJyxcImRpc3BsYXlfbmFtZVwiKSlyZXR1cm4gZCgnc2V0KCkgfCB3cm9uZyBcImRpc3BsYXlfbmFtZVwiJyksITE7dGhpcy5jb25maWd1cmF0aW9uLmRpc3BsYXlfbmFtZT10O2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGQoJ3NldCgpIHwgY2Fubm90IHNldCBcIiVzXCIgcGFyYW1ldGVyIGluIHJ1bnRpbWUnLGUpLCExfXJldHVybiEwfSxyLnByb3RvdHlwZS5uZXdUcmFuc2FjdGlvbj1mdW5jdGlvbihlKXt0aGlzLnRyYW5zYWN0aW9uc1tlLnR5cGVdW2UuaWRdPWUsdGhpcy5lbWl0KFwibmV3VHJhbnNhY3Rpb25cIix7dHJhbnNhY3Rpb246ZX0pfSxyLnByb3RvdHlwZS5kZXN0cm95VHJhbnNhY3Rpb249ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMudHJhbnNhY3Rpb25zW2UudHlwZV1bZS5pZF0sdGhpcy5lbWl0KFwidHJhbnNhY3Rpb25EZXN0cm95ZWRcIix7dHJhbnNhY3Rpb246ZX0pfSxyLnByb3RvdHlwZS5uZXdNZXNzYWdlPWZ1bmN0aW9uKGUpe3RoaXMuZW1pdChcIm5ld01lc3NhZ2VcIixlKX0sci5wcm90b3R5cGUubmV3UlRDU2Vzc2lvbj1mdW5jdGlvbihlKXt0aGlzLmVtaXQoXCJuZXdSVENTZXNzaW9uXCIsZSl9LHIucHJvdG90eXBlLnJlZ2lzdGVyZWQ9ZnVuY3Rpb24oZSl7dGhpcy5lbWl0KFwicmVnaXN0ZXJlZFwiLGUpfSxyLnByb3RvdHlwZS51bnJlZ2lzdGVyZWQ9ZnVuY3Rpb24oZSl7dGhpcy5lbWl0KFwidW5yZWdpc3RlcmVkXCIsZSl9LHIucHJvdG90eXBlLnJlZ2lzdHJhdGlvbkZhaWxlZD1mdW5jdGlvbihlKXt0aGlzLmVtaXQoXCJyZWdpc3RyYXRpb25GYWlsZWRcIixlKX0sci5wcm90b3R5cGUucmVjZWl2ZVJlcXVlc3Q9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLHMsbD1lLm1ldGhvZDtpZihlLnJ1cmkudXNlciE9PXRoaXMuY29uZmlndXJhdGlvbi51cmkudXNlciYmZS5ydXJpLnVzZXIhPT10aGlzLmNvbnRhY3QudXJpLnVzZXIpcmV0dXJuIGgoXCJSZXF1ZXN0LVVSSSBkb2VzIG5vdCBwb2ludCB0byB1c1wiKSx2b2lkKGUubWV0aG9kIT09Zi5BQ0smJmUucmVwbHlfc2woNDA0KSk7aWYoZS5ydXJpLnNjaGVtZT09PWYuU0lQUylyZXR1cm4gdm9pZCBlLnJlcGx5X3NsKDQxNik7aWYoIV8uY2hlY2tUcmFuc2FjdGlvbih0aGlzLGUpKXtpZihsPT09Zi5JTlZJVEU/bmV3IF8uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24oZSx0aGlzKTpsIT09Zi5BQ0smJmwhPT1mLkNBTkNFTCYmbmV3IF8uTm9uSW52aXRlU2VydmVyVHJhbnNhY3Rpb24oZSx0aGlzKSxsPT09Zi5PUFRJT05TKWUucmVwbHkoMjAwKTtlbHNlIGlmKGw9PT1mLk1FU1NBR0Upe2lmKDA9PT10aGlzLmxpc3RlbmVycyhcIm5ld01lc3NhZ2VcIikubGVuZ3RoKXJldHVybiB2b2lkIGUucmVwbHkoNDA1KTtyPW5ldyBUKHRoaXMpLHIuaW5pdF9pbmNvbWluZyhlKX1lbHNlIGlmKGw9PT1mLklOVklURSYmIWUudG9fdGFnJiYwPT09dGhpcy5saXN0ZW5lcnMoXCJuZXdSVENTZXNzaW9uXCIpLmxlbmd0aClyZXR1cm4gdm9pZCBlLnJlcGx5KDQwNSk7aWYoZS50b190YWcpdD10aGlzLmZpbmREaWFsb2coZS5jYWxsX2lkLGUuZnJvbV90YWcsZS50b190YWcpLHQ/dC5yZWNlaXZlUmVxdWVzdChlKTpsPT09Zi5OT1RJRlk/KG49dGhpcy5maW5kU2Vzc2lvbihlKSxuP24ucmVjZWl2ZVJlcXVlc3QoZSk6KGgoXCJyZWNlaXZlZCBOT1RJRlkgcmVxdWVzdCBmb3IgYSBub24gZXhpc3RlbnQgc3Vic2NyaXB0aW9uXCIpLGUucmVwbHkoNDgxLFwiU3Vic2NyaXB0aW9uIGRvZXMgbm90IGV4aXN0XCIpKSk6bCE9PWYuQUNLJiZlLnJlcGx5KDQ4MSk7ZWxzZSBzd2l0Y2gobCl7Y2FzZSBmLklOVklURTpwLmhhc1dlYlJUQygpP2UuaGFzSGVhZGVyKFwicmVwbGFjZXNcIik/KHM9ZS5yZXBsYWNlcyx0PXRoaXMuZmluZERpYWxvZyhzLmNhbGxfaWQscy5mcm9tX3RhZyxzLnRvX3RhZyksdD8obj10Lm93bmVyLG4uaXNFbmRlZCgpP2UucmVwbHkoNjAzKTpuLnJlY2VpdmVSZXF1ZXN0KGUpKTplLnJlcGx5KDQ4MSkpOihuPW5ldyBnKHRoaXMpLG4uaW5pdF9pbmNvbWluZyhlKSk6KGgoXCJJTlZJVEUgcmVjZWl2ZWQgYnV0IFdlYlJUQyBpcyBub3Qgc3VwcG9ydGVkXCIpLGUucmVwbHkoNDg4KSk7YnJlYWs7Y2FzZSBmLkJZRTplLnJlcGx5KDQ4MSk7YnJlYWs7Y2FzZSBmLkNBTkNFTDpuPXRoaXMuZmluZFNlc3Npb24oZSksbj9uLnJlY2VpdmVSZXF1ZXN0KGUpOmgoXCJyZWNlaXZlZCBDQU5DRUwgcmVxdWVzdCBmb3IgYSBub24gZXhpc3RlbnQgc2Vzc2lvblwiKTticmVhaztjYXNlIGYuQUNLOmJyZWFrO2RlZmF1bHQ6ZS5yZXBseSg0MDUpfX19LHIucHJvdG90eXBlLmZpbmRTZXNzaW9uPWZ1bmN0aW9uKGUpe3ZhciB0PWUuY2FsbF9pZCtlLmZyb21fdGFnLG49dGhpcy5zZXNzaW9uc1t0XSxyPWUuY2FsbF9pZCtlLnRvX3RhZyxzPXRoaXMuc2Vzc2lvbnNbcl07cmV0dXJuIG4/bjpzP3M6bnVsbH0sci5wcm90b3R5cGUuZmluZERpYWxvZz1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZSt0K24scz10aGlzLmRpYWxvZ3Nbcl07cmV0dXJuIHM/czoocj1lK24rdCxzPXRoaXMuZGlhbG9nc1tyXSxzP3M6bnVsbCl9LHIucHJvdG90eXBlLmxvYWRDb25maWc9ZnVuY3Rpb24oZSl7dmFyIHQsbix1LGEsYyxwPXt2aWFfaG9zdDpFLmNyZWF0ZVJhbmRvbVRva2VuKDEyKStcIi5pbnZhbGlkXCIsY29udGFjdF91cmk6bnVsbCxwYXNzd29yZDpudWxsLHJlYWxtOm51bGwsaGExOm51bGwscmVnaXN0ZXJfZXhwaXJlczo2MDAscmVnaXN0ZXI6ITAscmVnaXN0cmFyX3NlcnZlcjpudWxsLHVzZV9wcmVsb2FkZWRfcm91dGU6ITEsbm9fYW5zd2VyX3RpbWVvdXQ6NjAsc2Vzc2lvbl90aW1lcnM6ITB9O2Zvcih0IGluIHIuY29uZmlndXJhdGlvbl9jaGVjay5tYW5kYXRvcnkpe2lmKCFlLmhhc093blByb3BlcnR5KHQpKXRocm93IG5ldyBBLkNvbmZpZ3VyYXRpb25FcnJvcih0KTtpZihuPWVbdF0sdT1yLmNvbmZpZ3VyYXRpb25fY2hlY2subWFuZGF0b3J5W3RdLmNhbGwodGhpcyxuKSx2b2lkIDA9PT11KXRocm93IG5ldyBBLkNvbmZpZ3VyYXRpb25FcnJvcih0LG4pO3BbdF09dX1mb3IodCBpbiByLmNvbmZpZ3VyYXRpb25fY2hlY2sub3B0aW9uYWwpaWYoZS5oYXNPd25Qcm9wZXJ0eSh0KSl7aWYobj1lW3RdLEUuaXNFbXB0eShuKSljb250aW51ZTtpZih1PXIuY29uZmlndXJhdGlvbl9jaGVjay5vcHRpb25hbFt0XS5jYWxsKHRoaXMsbixlKSx2b2lkIDA9PT11KXRocm93IG5ldyBBLkNvbmZpZ3VyYXRpb25FcnJvcih0LG4pO3BbdF09dX0wPT09cC5kaXNwbGF5X25hbWUmJihwLmRpc3BsYXlfbmFtZT1cIjBcIikscC5pbnN0YW5jZV9pZHx8KHAuaW5zdGFuY2VfaWQ9RS5uZXdVVUlEKCkpLHAuanNzaXBfaWQ9RS5jcmVhdGVSYW5kb21Ub2tlbig1KSxhPXAudXJpLmNsb25lKCksYS51c2VyPW51bGwscC5ob3N0cG9ydF9wYXJhbXM9YS50b1N0cmluZygpLnJlcGxhY2UoL15zaXA6L2ksXCJcIik7dmFyIGY9W107aWYocC53c19zZXJ2ZXJzJiZBcnJheS5pc0FycmF5KHAud3Nfc2VydmVycykmJihmPWYuY29uY2F0KHAud3Nfc2VydmVycykpLHAuc29ja2V0cyYmQXJyYXkuaXNBcnJheShwLnNvY2tldHMpJiYoZj1mLmNvbmNhdChwLnNvY2tldHMpKSwwPT09Zi5sZW5ndGgpdGhyb3cgbmV3IEEuQ29uZmlndXJhdGlvbkVycm9yKFwic29ja2V0c1wiKTt0cnl7dGhpcy50cmFuc3BvcnQ9bmV3IHYoZix7bWF4X2ludGVydmFsOnAuY29ubmVjdGlvbl9yZWNvdmVyeV9tYXhfaW50ZXJ2YWwsbWluX2ludGVydmFsOnAuY29ubmVjdGlvbl9yZWNvdmVyeV9taW5faW50ZXJ2YWx9KSx0aGlzLnRyYW5zcG9ydC5vbmNvbm5lY3Rpbmc9cy5iaW5kKHRoaXMpLHRoaXMudHJhbnNwb3J0Lm9uY29ubmVjdD1sLmJpbmQodGhpcyksdGhpcy50cmFuc3BvcnQub25kaXNjb25uZWN0PWkuYmluZCh0aGlzKSx0aGlzLnRyYW5zcG9ydC5vbmRhdGE9by5iaW5kKHRoaXMpLGRlbGV0ZSBwLmNvbm5lY3Rpb25fcmVjb3ZlcnlfbWF4X2ludGVydmFsLGRlbGV0ZSBwLmNvbm5lY3Rpb25fcmVjb3ZlcnlfbWluX2ludGVydmFsLGRlbGV0ZSBwLndzX3NlcnZlcnMsZGVsZXRlIHAuc29ja2V0c31jYXRjaChtKXt0aHJvdyBkKG0pLG5ldyBBLkNvbmZpZ3VyYXRpb25FcnJvcihcInNvY2tldHNcIixmKX1wLmF1dGhvcml6YXRpb25fdXNlcnx8KHAuYXV0aG9yaXphdGlvbl91c2VyPXAudXJpLnVzZXIpLHAucmVnaXN0cmFyX3NlcnZlcnx8KGM9cC51cmkuY2xvbmUoKSxjLnVzZXI9bnVsbCxjLmNsZWFyUGFyYW1zKCksYy5jbGVhckhlYWRlcnMoKSxwLnJlZ2lzdHJhcl9zZXJ2ZXI9YykscC5ub19hbnN3ZXJfdGltZW91dD0xZTMqcC5ub19hbnN3ZXJfdGltZW91dCxwLmNvbnRhY3RfdXJpP3AudmlhX2hvc3Q9cC5jb250YWN0X3VyaS5ob3N0OnAuY29udGFjdF91cmk9bmV3IHkoXCJzaXBcIixFLmNyZWF0ZVJhbmRvbVRva2VuKDgpLHAudmlhX2hvc3QsbnVsbCx7dHJhbnNwb3J0Olwid3NcIn0pLHRoaXMuY29udGFjdD17cHViX2dydXU6bnVsbCx0ZW1wX2dydXU6bnVsbCx1cmk6cC5jb250YWN0X3VyaSx0b1N0cmluZzpmdW5jdGlvbihlKXtlPWV8fHt9O3ZhciB0PWUuYW5vbnltb3VzfHxudWxsLG49ZS5vdXRib3VuZHx8bnVsbCxyPVwiPFwiO3JldHVybiByKz10P3RoaXMudGVtcF9ncnV1fHxcInNpcDphbm9ueW1vdXNAYW5vbnltb3VzLmludmFsaWQ7dHJhbnNwb3J0PXdzXCI6dGhpcy5wdWJfZ3J1dXx8dGhpcy51cmkudG9TdHJpbmcoKSwhbnx8KHQ/dGhpcy50ZW1wX2dydXU6dGhpcy5wdWJfZ3J1dSl8fChyKz1cIjtvYlwiKSxyKz1cIj5cIn19O2Zvcih0IGluIHApci5jb25maWd1cmF0aW9uX3NrZWxldG9uW3RdLnZhbHVlPXBbdF07T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy5jb25maWd1cmF0aW9uLHIuY29uZmlndXJhdGlvbl9za2VsZXRvbik7Zm9yKHQgaW4gcClyLmNvbmZpZ3VyYXRpb25fc2tlbGV0b25bdF0udmFsdWU9XCJcIjtoKFwiY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIGFmdGVyIHZhbGlkYXRpb246XCIpO2Zvcih0IGluIHApc3dpdGNoKHQpe2Nhc2VcInVyaVwiOmNhc2VcInJlZ2lzdHJhcl9zZXJ2ZXJcIjpoKFwiLSBcIit0K1wiOiBcIitwW3RdKTticmVhaztjYXNlXCJwYXNzd29yZFwiOmNhc2VcImhhMVwiOmgoXCItIFwiK3QrXCI6IE5PVCBTSE9XTlwiKTticmVhaztkZWZhdWx0OmgoXCItIFwiK3QrXCI6IFwiK0pTT04uc3RyaW5naWZ5KHBbdF0pKX19LHIuY29uZmlndXJhdGlvbl9za2VsZXRvbj1mdW5jdGlvbigpe3ZhciBlLHQsbixyPXt9LHM9W1wianNzaXBfaWRcIixcImhvc3Rwb3J0X3BhcmFtc1wiLFwidXJpXCIsXCJhdXRob3JpemF0aW9uX3VzZXJcIixcImNvbnRhY3RfdXJpXCIsXCJkaXNwbGF5X25hbWVcIixcImluc3RhbmNlX2lkXCIsXCJub19hbnN3ZXJfdGltZW91dFwiLFwic2Vzc2lvbl90aW1lcnNcIixcInBhc3N3b3JkXCIsXCJyZWFsbVwiLFwiaGExXCIsXCJyZWdpc3Rlcl9leHBpcmVzXCIsXCJyZWdpc3RyYXJfc2VydmVyXCIsXCJzb2NrZXRzXCIsXCJ1c2VfcHJlbG9hZGVkX3JvdXRlXCIsXCJ3c19zZXJ2ZXJzXCIsXCJ2aWFfY29yZV92YWx1ZVwiLFwidmlhX2hvc3RcIl0sbD1bXCJwYXNzd29yZFwiLFwicmVhbG1cIixcImhhMVwiLFwiZGlzcGxheV9uYW1lXCJdO2ZvcihlIGluIHMpdD1zW2VdLG49LTEhPT1sLmluZGV4T2YodCksclt0XT17dmFsdWU6XCJcIix3cml0YWJsZTpuLGNvbmZpZ3VyYWJsZTohMX07cmV0dXJuIHIucmVnaXN0ZXI9e3ZhbHVlOlwiXCIsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiExfSxyfSgpLHIuY29uZmlndXJhdGlvbl9jaGVjaz17bWFuZGF0b3J5Ont1cmk6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuL15zaXA6L2kudGVzdChlKXx8KGU9Zi5TSVArXCI6XCIrZSksdD15LnBhcnNlKGUpLHQmJnQudXNlcj90OnZvaWQgMH19LG9wdGlvbmFsOnthdXRob3JpemF0aW9uX3VzZXI6ZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1SLnBhcnNlKCdcIicrZSsnXCInLFwicXVvdGVkX3N0cmluZ1wiKT92b2lkIDA6ZX0sY29ubmVjdGlvbl9yZWNvdmVyeV9tYXhfaW50ZXJ2YWw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIEUuaXNEZWNpbWFsKGUpJiYodD1OdW1iZXIoZSksdD4wKT90OnZvaWQgMH0sY29ubmVjdGlvbl9yZWNvdmVyeV9taW5faW50ZXJ2YWw6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIEUuaXNEZWNpbWFsKGUpJiYodD1OdW1iZXIoZSksdD4wKT90OnZvaWQgMH0sY29udGFjdF91cmk6ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe3ZhciB0PVIucGFyc2UoZSxcIlNJUF9VUklcIik7aWYoLTEhPT10KXJldHVybiB0fX0sZGlzcGxheV9uYW1lOmZ1bmN0aW9uKGUpe3JldHVybi0xPT09Ui5wYXJzZSgnXCInK2UrJ1wiJyxcImRpc3BsYXlfbmFtZVwiKT92b2lkIDA6ZX0saW5zdGFuY2VfaWQ6ZnVuY3Rpb24oZSl7cmV0dXJuL151dWlkOi9pLnRlc3QoZSkmJihlPWUuc3Vic3RyKDUpKSwtMT09PVIucGFyc2UoZSxcInV1aWRcIik/dm9pZCAwOmV9LG5vX2Fuc3dlcl90aW1lb3V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBFLmlzRGVjaW1hbChlKSYmKHQ9TnVtYmVyKGUpLHQ+MCk/dDp2b2lkIDB9LHNlc3Npb25fdGltZXJzOmZ1bmN0aW9uKGUpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZT9lOnZvaWQgMH0scGFzc3dvcmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFN0cmluZyhlKX0scmVhbG06ZnVuY3Rpb24oZSl7cmV0dXJuIFN0cmluZyhlKX0saGExOmZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcoZSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGUpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZT9lOnZvaWQgMH0scmVnaXN0ZXJfZXhwaXJlczpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gRS5pc0RlY2ltYWwoZSkmJih0PU51bWJlcihlKSx0PjApP3Q6dm9pZCAwfSxyZWdpc3RyYXJfc2VydmVyOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybi9ec2lwOi9pLnRlc3QoZSl8fChlPWYuU0lQK1wiOlwiK2UpLHQ9eS5wYXJzZShlKSx0P3QudXNlcj92b2lkIDA6dDp2b2lkIDB9LHNvY2tldHM6ZnVuY3Rpb24oZSl7dmFyIHQsbjtpZihTLmlzU29ja2V0KGUpKWU9W3tzb2NrZXQ6ZX1dO2Vsc2V7aWYoIUFycmF5LmlzQXJyYXkoZSl8fCFlLmxlbmd0aClyZXR1cm47Zm9yKG49ZS5sZW5ndGgsdD0wO24+dDt0KyspUy5pc1NvY2tldChlW3RdKSYmKGVbdF09e3NvY2tldDplW3RdfSl9cmV0dXJuIGV9LHVzZV9wcmVsb2FkZWRfcm91dGU6ZnVuY3Rpb24oZSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlP2U6dm9pZCAwfSx3c19zZXJ2ZXJzOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1bXTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSllPVt7d3NfdXJpOmV9XTtlbHNle2lmKCFBcnJheS5pc0FycmF5KGUpfHwhZS5sZW5ndGgpcmV0dXJuO2ZvcihuPWUubGVuZ3RoLHQ9MDtuPnQ7dCsrKVwic3RyaW5nXCI9PXR5cGVvZiBlW3RdJiYoZVt0XT17d3NfdXJpOmVbdF19KX1mb3Iobj1lLmxlbmd0aCx0PTA7bj50O3QrKyl0cnl7ci5wdXNoKHtzb2NrZXQ6bmV3IEMoZVt0XS53c191cmkpLHdlaWdodDplW3RdLndlaWdodHx8MH0pfWNhdGNoKHMpe3JldHVybiB2b2lkIGQocyl9cmV0dXJuIHJ9fX19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vRXhjZXB0aW9uc1wiOjUsXCIuL0dyYW1tYXJcIjo2LFwiLi9NZXNzYWdlXCI6OCxcIi4vUGFyc2VyXCI6MTAsXCIuL1JUQ1Nlc3Npb25cIjoxMSxcIi4vUmVnaXN0cmF0b3JcIjoxNixcIi4vU0lQTWVzc2FnZVwiOjE4LFwiLi9Tb2NrZXRcIjoxOSxcIi4vVHJhbnNhY3Rpb25zXCI6MjEsXCIuL1RyYW5zcG9ydFwiOjIyLFwiLi9VUklcIjoyNCxcIi4vVXRpbHNcIjoyNSxcIi4vV2ViU29ja2V0SW50ZXJmYWNlXCI6MjYsXCIuL3Nhbml0eUNoZWNrXCI6MjcsZGVidWc6MzMsZXZlbnRzOjI4LHJ0Y25pbmphOjM4LHV0aWw6MzJ9XSwyNDpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4scixsLGkpe3ZhciBvLHU7aWYoIW4pdGhyb3cgbmV3IFR5cGVFcnJvcignbWlzc2luZyBvciBpbnZhbGlkIFwiaG9zdFwiIHBhcmFtZXRlcicpO2U9ZXx8cy5TSVAsdGhpcy5wYXJhbWV0ZXJzPXt9LHRoaXMuaGVhZGVycz17fTtmb3IobyBpbiBsKXRoaXMuc2V0UGFyYW0obyxsW29dKTtmb3IodSBpbiBpKXRoaXMuc2V0SGVhZGVyKHUsaVt1XSk7T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7c2NoZW1lOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZX0sc2V0OmZ1bmN0aW9uKHQpe2U9dC50b0xvd2VyQ2FzZSgpfX0sdXNlcjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR9LHNldDpmdW5jdGlvbihlKXt0PWV9fSxob3N0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sc2V0OmZ1bmN0aW9uKGUpe249ZS50b0xvd2VyQ2FzZSgpfX0scG9ydDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHJ9LHNldDpmdW5jdGlvbihlKXtyPTA9PT1lP2U6cGFyc2VJbnQoZSwxMCl8fG51bGx9fX0pfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCIuL0NvbnN0YW50c1wiKSxsPWUoXCIuL1V0aWxzXCIpLGk9ZShcIi4vR3JhbW1hclwiKTtyLnByb3RvdHlwZT17c2V0UGFyYW06ZnVuY3Rpb24oZSx0KXtlJiYodGhpcy5wYXJhbWV0ZXJzW2UudG9Mb3dlckNhc2UoKV09XCJ1bmRlZmluZWRcIj09dHlwZW9mIHR8fG51bGw9PT10P251bGw6dC50b1N0cmluZygpKX0sZ2V0UGFyYW06ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5wYXJhbWV0ZXJzW2UudG9Mb3dlckNhc2UoKV06dm9pZCAwfSxoYXNQYXJhbTpmdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLnBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKSYmITB8fCExOnZvaWQgMH0sZGVsZXRlUGFyYW06ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIGU9ZS50b0xvd2VyQ2FzZSgpLHRoaXMucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShlKT8odD10aGlzLnBhcmFtZXRlcnNbZV0sZGVsZXRlIHRoaXMucGFyYW1ldGVyc1tlXSx0KTp2b2lkIDB9LGNsZWFyUGFyYW1zOmZ1bmN0aW9uKCl7dGhpcy5wYXJhbWV0ZXJzPXt9fSxzZXRIZWFkZXI6ZnVuY3Rpb24oZSx0KXt0aGlzLmhlYWRlcnNbbC5oZWFkZXJpemUoZSldPUFycmF5LmlzQXJyYXkodCk/dDpbdF19LGdldEhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLmhlYWRlcnNbbC5oZWFkZXJpemUoZSldOnZvaWQgMDtcbn0saGFzSGVhZGVyOmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShsLmhlYWRlcml6ZShlKSkmJiEwfHwhMTp2b2lkIDB9LGRlbGV0ZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZT1sLmhlYWRlcml6ZShlKSx0aGlzLmhlYWRlcnMuaGFzT3duUHJvcGVydHkoZSk/KHQ9dGhpcy5oZWFkZXJzW2VdLGRlbGV0ZSB0aGlzLmhlYWRlcnNbZV0sdCk6dm9pZCAwfSxjbGVhckhlYWRlcnM6ZnVuY3Rpb24oKXt0aGlzLmhlYWRlcnM9e319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMuc2NoZW1lLHRoaXMudXNlcix0aGlzLmhvc3QsdGhpcy5wb3J0LEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJhbWV0ZXJzKSksSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmhlYWRlcnMpKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIscz1bXTtyPXRoaXMuc2NoZW1lK1wiOlwiLHRoaXMudXNlciYmKHIrPWwuZXNjYXBlVXNlcih0aGlzLnVzZXIpK1wiQFwiKSxyKz10aGlzLmhvc3QsKHRoaXMucG9ydHx8MD09PXRoaXMucG9ydCkmJihyKz1cIjpcIit0aGlzLnBvcnQpO2Zvcih0IGluIHRoaXMucGFyYW1ldGVycylyKz1cIjtcIit0LG51bGwhPT10aGlzLnBhcmFtZXRlcnNbdF0mJihyKz1cIj1cIit0aGlzLnBhcmFtZXRlcnNbdF0pO2ZvcihlIGluIHRoaXMuaGVhZGVycylmb3Iobj0wO248dGhpcy5oZWFkZXJzW2VdLmxlbmd0aDtuKyspcy5wdXNoKGUrXCI9XCIrdGhpcy5oZWFkZXJzW2VdW25dKTtyZXR1cm4gcy5sZW5ndGg+MCYmKHIrPVwiP1wiK3Muam9pbihcIiZcIikpLHJ9LHRvQW9yOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0PXRoaXMuc2NoZW1lK1wiOlwiLHRoaXMudXNlciYmKHQrPWwuZXNjYXBlVXNlcih0aGlzLnVzZXIpK1wiQFwiKSx0Kz10aGlzLmhvc3QsZSYmKHRoaXMucG9ydHx8MD09PXRoaXMucG9ydCkmJih0Kz1cIjpcIit0aGlzLnBvcnQpLHR9fSxyLnBhcnNlPWZ1bmN0aW9uKGUpe3JldHVybiBlPWkucGFyc2UoZSxcIlNJUF9VUklcIiksLTEhPT1lP2U6dm9pZCAwfX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9HcmFtbWFyXCI6NixcIi4vVXRpbHNcIjoyNX1dLDI1OltmdW5jdGlvbihlLHQsbil7dmFyIHI9e307dC5leHBvcnRzPXI7dmFyIHM9ZShcIi4vQ29uc3RhbnRzXCIpLGw9ZShcIi4vVVJJXCIpLGk9ZShcIi4vR3JhbW1hclwiKTtyLnN0cl91dGY4X2xlbmd0aD1mdW5jdGlvbihlKXtyZXR1cm4gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGUpKS5sZW5ndGh9LHIuaXNGdW5jdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZT9cIltvYmplY3QgRnVuY3Rpb25dXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk6ITF9LHIuaXNTdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWU/XCJbb2JqZWN0IFN0cmluZ11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKTohMX0sci5pc0RlY2ltYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIWlzTmFOKGUpJiZwYXJzZUZsb2F0KGUpPT09cGFyc2VJbnQoZSwxMCl9LHIuaXNFbXB0eT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09PWV8fFwiXCI9PT1lfHx2b2lkIDA9PT1lfHxBcnJheS5pc0FycmF5KGUpJiYwPT09ZS5sZW5ndGh8fFwibnVtYmVyXCI9PXR5cGVvZiBlJiZpc05hTihlKT8hMDp2b2lkIDB9LHIuaGFzTWV0aG9kcz1mdW5jdGlvbihlKXtmb3IodmFyIHQsbj0xO3Q9YXJndW1lbnRzW24rK107KWlmKHRoaXMuaXNGdW5jdGlvbihlW3RdKSlyZXR1cm4hMTtyZXR1cm4hMH0sci5jcmVhdGVSYW5kb21Ub2tlbj1mdW5jdGlvbihlLHQpe3ZhciBuLHIscz1cIlwiO2Zvcih0PXR8fDMyLG49MDtlPm47bisrKXI9TWF0aC5yYW5kb20oKSp0fDAscys9ci50b1N0cmluZyh0KTtyZXR1cm4gc30sci5uZXdUYWc9ZnVuY3Rpb24oKXtyZXR1cm4gci5jcmVhdGVSYW5kb21Ub2tlbigxMCl9LHIubmV3VVVJRD1mdW5jdGlvbigpe3ZhciBlPVwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLGZ1bmN0aW9uKGUpe3ZhciB0PTE2Kk1hdGgucmFuZG9tKCl8MCxuPVwieFwiPT09ZT90OjMmdHw4O3JldHVybiBuLnRvU3RyaW5nKDE2KX0pO3JldHVybiBlfSxyLmhvc3RUeXBlPWZ1bmN0aW9uKGUpe3JldHVybiBlPyhlPWkucGFyc2UoZSxcImhvc3RcIiksLTEhPT1lP2UuaG9zdF90eXBlOnZvaWQgMCk6dm9pZCAwfSxyLm5vcm1hbGl6ZVRhcmdldD1mdW5jdGlvbihlLHQpe3ZhciBuLGksbyx1O2lmKGUpe2lmKGUgaW5zdGFuY2VvZiBsKXJldHVybiBlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtzd2l0Y2goaT1lLnNwbGl0KFwiQFwiKSxpLmxlbmd0aCl7Y2FzZSAxOmlmKCF0KXJldHVybjtvPWUsdT10O2JyZWFrO2Nhc2UgMjpvPWlbMF0sdT1pWzFdO2JyZWFrO2RlZmF1bHQ6bz1pLnNsaWNlKDAsaS5sZW5ndGgtMSkuam9pbihcIkBcIiksdT1pW2kubGVuZ3RoLTFdfXJldHVybiBvPW8ucmVwbGFjZSgvXihzaXBzP3x0ZWwpOi9pLFwiXCIpLC9eW1xcLVxcLlxcKFxcKV0qXFwrP1swLTlcXC1cXC5cXChcXCldKyQvLnRlc3QobykmJihvPW8ucmVwbGFjZSgvW1xcLVxcLlxcKFxcKV0vZyxcIlwiKSksZT1zLlNJUCtcIjpcIityLmVzY2FwZVVzZXIobykrXCJAXCIrdSwobj1sLnBhcnNlKGUpKT9uOnZvaWQgMH19ZWxzZTt9LHIuZXNjYXBlVXNlcj1mdW5jdGlvbihlKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChlKSkucmVwbGFjZSgvJTNBL2dpLFwiOlwiKS5yZXBsYWNlKC8lMkIvZ2ksXCIrXCIpLnJlcGxhY2UoLyUzRi9naSxcIj9cIikucmVwbGFjZSgvJTJGL2dpLFwiL1wiKX0sci5oZWFkZXJpemU9ZnVuY3Rpb24oZSl7dmFyIHQsbj17XCJDYWxsLUlkXCI6XCJDYWxsLUlEXCIsQ3NlcTpcIkNTZXFcIixcIld3dy1BdXRoZW50aWNhdGVcIjpcIldXVy1BdXRoZW50aWNhdGVcIn0scj1lLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLFwiLVwiKS5zcGxpdChcIi1cIikscz1cIlwiLGw9ci5sZW5ndGg7Zm9yKHQ9MDtsPnQ7dCsrKTAhPT10JiYocys9XCItXCIpLHMrPXJbdF0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrclt0XS5zdWJzdHJpbmcoMSk7cmV0dXJuIG5bc10mJihzPW5bc10pLHN9LHIuc2lwRXJyb3JDYXVzZT1mdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBzLlNJUF9FUlJPUl9DQVVTRVMpaWYoLTEhPT1zLlNJUF9FUlJPUl9DQVVTRVNbdF0uaW5kZXhPZihlKSlyZXR1cm4gcy5jYXVzZXNbdF07cmV0dXJuIHMuY2F1c2VzLlNJUF9GQUlMVVJFX0NPREV9LHIuZ2V0UmFuZG9tVGVzdE5ldElQPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3JldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKHQtZSsxKStlKX1yZXR1cm5cIjE5Mi4wLjIuXCIrZSgxLDI1NCl9LHIuY2FsY3VsYXRlTUQ1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gZTw8dHxlPj4+MzItdH1mdW5jdGlvbiBuKGUsdCl7dmFyIG4scixzLGwsaTtyZXR1cm4gcz0yMTQ3NDgzNjQ4JmUsbD0yMTQ3NDgzNjQ4JnQsbj0xMDczNzQxODI0JmUscj0xMDczNzQxODI0JnQsaT0oMTA3Mzc0MTgyMyZlKSsoMTA3Mzc0MTgyMyZ0KSxuJnI/MjE0NzQ4MzY0OF5pXnNebDpufHI/MTA3Mzc0MTgyNCZpPzMyMjEyMjU0NzJeaV5zXmw6MTA3Mzc0MTgyNF5pXnNebDppXnNebH1mdW5jdGlvbiByKGUsdCxuKXtyZXR1cm4gZSZ0fH5lJm59ZnVuY3Rpb24gcyhlLHQsbil7cmV0dXJuIGUmbnx0Jn5ufWZ1bmN0aW9uIGwoZSx0LG4pe3JldHVybiBlXnRebn1mdW5jdGlvbiBpKGUsdCxuKXtyZXR1cm4gdF4oZXx+bil9ZnVuY3Rpb24gbyhlLHMsbCxpLG8sdSxhKXtyZXR1cm4gZT1uKGUsbihuKHIocyxsLGkpLG8pLGEpKSxuKHQoZSx1KSxzKX1mdW5jdGlvbiB1KGUscixsLGksbyx1LGEpe3JldHVybiBlPW4oZSxuKG4ocyhyLGwsaSksbyksYSkpLG4odChlLHUpLHIpfWZ1bmN0aW9uIGEoZSxyLHMsaSxvLHUsYSl7cmV0dXJuIGU9bihlLG4obihsKHIscyxpKSxvKSxhKSksbih0KGUsdSkscil9ZnVuY3Rpb24gYyhlLHIscyxsLG8sdSxhKXtyZXR1cm4gZT1uKGUsbihuKGkocixzLGwpLG8pLGEpKSxuKHQoZSx1KSxyKX1mdW5jdGlvbiBoKGUpe2Zvcih2YXIgdCxuPWUubGVuZ3RoLHI9bis4LHM9KHItciU2NCkvNjQsbD0xNioocysxKSxpPW5ldyBBcnJheShsLTEpLG89MCx1PTA7bj51Oyl0PSh1LXUlNCkvNCxvPXUlNCo4LGlbdF09aVt0XXxlLmNoYXJDb2RlQXQodSk8PG8sdSsrO3JldHVybiB0PSh1LXUlNCkvNCxvPXUlNCo4LGlbdF09aVt0XXwxMjg8PG8saVtsLTJdPW48PDMsaVtsLTFdPW4+Pj4yOSxpfWZ1bmN0aW9uIGQoZSl7dmFyIHQsbixyPVwiXCIscz1cIlwiO2ZvcihuPTA7Mz49bjtuKyspdD1lPj4+OCpuJjI1NSxzPVwiMFwiK3QudG9TdHJpbmcoMTYpLHIrPXMuc3Vic3RyKHMubGVuZ3RoLTIsMik7cmV0dXJuIHJ9ZnVuY3Rpb24gcChlKXtlPWUucmVwbGFjZSgvXFxyXFxuL2csXCJcXG5cIik7Zm9yKHZhciB0PVwiXCIsbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgcj1lLmNoYXJDb2RlQXQobik7MTI4PnI/dCs9U3RyaW5nLmZyb21DaGFyQ29kZShyKTpyPjEyNyYmMjA0OD5yPyh0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHI+PjZ8MTkyKSx0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKDYzJnJ8MTI4KSk6KHQrPVN0cmluZy5mcm9tQ2hhckNvZGUocj4+MTJ8MjI0KSx0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHI+PjYmNjN8MTI4KSx0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKDYzJnJ8MTI4KSl9cmV0dXJuIHR9dmFyIGYsbSxnLFQsXyx2LEMsUyxFLEE9W10seT03LFI9MTIsYj0xNyxJPTIyLHc9NSxOPTksRD0xNCxPPTIwLHg9NCxVPTExLE09MTYsUD0yMyxxPTYsTD0xMCxrPTE1LEg9MjE7Zm9yKGU9cChlKSxBPWgoZSksdj0xNzMyNTg0MTkzLEM9NDAyMzIzMzQxNyxTPTI1NjIzODMxMDIsRT0yNzE3MzM4NzgsZj0wO2Y8QS5sZW5ndGg7Zis9MTYpbT12LGc9QyxUPVMsXz1FLHY9byh2LEMsUyxFLEFbZiswXSx5LDM2MTQwOTAzNjApLEU9byhFLHYsQyxTLEFbZisxXSxSLDM5MDU0MDI3MTApLFM9byhTLEUsdixDLEFbZisyXSxiLDYwNjEwNTgxOSksQz1vKEMsUyxFLHYsQVtmKzNdLEksMzI1MDQ0MTk2Niksdj1vKHYsQyxTLEUsQVtmKzRdLHksNDExODU0ODM5OSksRT1vKEUsdixDLFMsQVtmKzVdLFIsMTIwMDA4MDQyNiksUz1vKFMsRSx2LEMsQVtmKzZdLGIsMjgyMTczNTk1NSksQz1vKEMsUyxFLHYsQVtmKzddLEksNDI0OTI2MTMxMyksdj1vKHYsQyxTLEUsQVtmKzhdLHksMTc3MDAzNTQxNiksRT1vKEUsdixDLFMsQVtmKzldLFIsMjMzNjU1Mjg3OSksUz1vKFMsRSx2LEMsQVtmKzEwXSxiLDQyOTQ5MjUyMzMpLEM9byhDLFMsRSx2LEFbZisxMV0sSSwyMzA0NTYzMTM0KSx2PW8odixDLFMsRSxBW2YrMTJdLHksMTgwNDYwMzY4MiksRT1vKEUsdixDLFMsQVtmKzEzXSxSLDQyNTQ2MjYxOTUpLFM9byhTLEUsdixDLEFbZisxNF0sYiwyNzkyOTY1MDA2KSxDPW8oQyxTLEUsdixBW2YrMTVdLEksMTIzNjUzNTMyOSksdj11KHYsQyxTLEUsQVtmKzFdLHcsNDEyOTE3MDc4NiksRT11KEUsdixDLFMsQVtmKzZdLE4sMzIyNTQ2NTY2NCksUz11KFMsRSx2LEMsQVtmKzExXSxELDY0MzcxNzcxMyksQz11KEMsUyxFLHYsQVtmKzBdLE8sMzkyMTA2OTk5NCksdj11KHYsQyxTLEUsQVtmKzVdLHcsMzU5MzQwODYwNSksRT11KEUsdixDLFMsQVtmKzEwXSxOLDM4MDE2MDgzKSxTPXUoUyxFLHYsQyxBW2YrMTVdLEQsMzYzNDQ4ODk2MSksQz11KEMsUyxFLHYsQVtmKzRdLE8sMzg4OTQyOTQ0OCksdj11KHYsQyxTLEUsQVtmKzldLHcsNTY4NDQ2NDM4KSxFPXUoRSx2LEMsUyxBW2YrMTRdLE4sMzI3NTE2MzYwNiksUz11KFMsRSx2LEMsQVtmKzNdLEQsNDEwNzYwMzMzNSksQz11KEMsUyxFLHYsQVtmKzhdLE8sMTE2MzUzMTUwMSksdj11KHYsQyxTLEUsQVtmKzEzXSx3LDI4NTAyODU4MjkpLEU9dShFLHYsQyxTLEFbZisyXSxOLDQyNDM1NjM1MTIpLFM9dShTLEUsdixDLEFbZis3XSxELDE3MzUzMjg0NzMpLEM9dShDLFMsRSx2LEFbZisxMl0sTywyMzY4MzU5NTYyKSx2PWEodixDLFMsRSxBW2YrNV0seCw0Mjk0NTg4NzM4KSxFPWEoRSx2LEMsUyxBW2YrOF0sVSwyMjcyMzkyODMzKSxTPWEoUyxFLHYsQyxBW2YrMTFdLE0sMTgzOTAzMDU2MiksQz1hKEMsUyxFLHYsQVtmKzE0XSxQLDQyNTk2NTc3NDApLHY9YSh2LEMsUyxFLEFbZisxXSx4LDI3NjM5NzUyMzYpLEU9YShFLHYsQyxTLEFbZis0XSxVLDEyNzI4OTMzNTMpLFM9YShTLEUsdixDLEFbZis3XSxNLDQxMzk0Njk2NjQpLEM9YShDLFMsRSx2LEFbZisxMF0sUCwzMjAwMjM2NjU2KSx2PWEodixDLFMsRSxBW2YrMTNdLHgsNjgxMjc5MTc0KSxFPWEoRSx2LEMsUyxBW2YrMF0sVSwzOTM2NDMwMDc0KSxTPWEoUyxFLHYsQyxBW2YrM10sTSwzNTcyNDQ1MzE3KSxDPWEoQyxTLEUsdixBW2YrNl0sUCw3NjAyOTE4OSksdj1hKHYsQyxTLEUsQVtmKzldLHgsMzY1NDYwMjgwOSksRT1hKEUsdixDLFMsQVtmKzEyXSxVLDM4NzMxNTE0NjEpLFM9YShTLEUsdixDLEFbZisxNV0sTSw1MzA3NDI1MjApLEM9YShDLFMsRSx2LEFbZisyXSxQLDMyOTk2Mjg2NDUpLHY9Yyh2LEMsUyxFLEFbZiswXSxxLDQwOTYzMzY0NTIpLEU9YyhFLHYsQyxTLEFbZis3XSxMLDExMjY4OTE0MTUpLFM9YyhTLEUsdixDLEFbZisxNF0saywyODc4NjEyMzkxKSxDPWMoQyxTLEUsdixBW2YrNV0sSCw0MjM3NTMzMjQxKSx2PWModixDLFMsRSxBW2YrMTJdLHEsMTcwMDQ4NTU3MSksRT1jKEUsdixDLFMsQVtmKzNdLEwsMjM5OTk4MDY5MCksUz1jKFMsRSx2LEMsQVtmKzEwXSxrLDQyOTM5MTU3NzMpLEM9YyhDLFMsRSx2LEFbZisxXSxILDIyNDAwNDQ0OTcpLHY9Yyh2LEMsUyxFLEFbZis4XSxxLDE4NzMzMTMzNTkpLEU9YyhFLHYsQyxTLEFbZisxNV0sTCw0MjY0MzU1NTUyKSxTPWMoUyxFLHYsQyxBW2YrNl0saywyNzM0NzY4OTE2KSxDPWMoQyxTLEUsdixBW2YrMTNdLEgsMTMwOTE1MTY0OSksdj1jKHYsQyxTLEUsQVtmKzRdLHEsNDE0OTQ0NDIyNiksRT1jKEUsdixDLFMsQVtmKzExXSxMLDMxNzQ3NTY5MTcpLFM9YyhTLEUsdixDLEFbZisyXSxrLDcxODc4NzI1OSksQz1jKEMsUyxFLHYsQVtmKzldLEgsMzk1MTQ4MTc0NSksdj1uKHYsbSksQz1uKEMsZyksUz1uKFMsVCksRT1uKEUsXyk7dmFyIEY9ZCh2KStkKEMpK2QoUykrZChFKTtyZXR1cm4gRi50b0xvd2VyQ2FzZSgpfX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9HcmFtbWFyXCI6NixcIi4vVVJJXCI6MjR9XSwyNjpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7YShcIm5ldygpXCIpO3ZhciB0PW51bGwsbj1udWxsO3RoaXMud3M9bnVsbCxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHt2aWFfdHJhbnNwb3J0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbn0sc2V0OmZ1bmN0aW9uKGUpe249ZS50b1VwcGVyQ2FzZSgpfX0sc2lwX3VyaTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHR9fSx1cmw6e2dldDpmdW5jdGlvbigpe3JldHVybiBlfX19KTt2YXIgcj11LnBhcnNlKGUsXCJhYnNvbHV0ZVVSSVwiKTtpZigtMT09PXIpdGhyb3cgYyhcImludmFsaWQgV2ViU29ja2V0IFVSSTogXCIrZSksbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXJndW1lbnQ6IFwiK2UpO2lmKFwid3NzXCIhPT1yLnNjaGVtZSYmXCJ3c1wiIT09ci5zY2hlbWUpdGhyb3cgYyhcImludmFsaWQgV2ViU29ja2V0IFVSSSBzY2hlbWU6IFwiK3Iuc2NoZW1lKSxuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhcmd1bWVudDogXCIrZSk7dD1cInNpcDpcIityLmhvc3QrKHIucG9ydD9cIjpcIityLnBvcnQ6XCJcIikrXCI7dHJhbnNwb3J0PXdzXCIsdGhpcy52aWFfdHJhbnNwb3J0PXIuc2NoZW1lfWZ1bmN0aW9uIHMoKXthKFwiV2ViU29ja2V0IFwiK3RoaXMudXJsK1wiIGNvbm5lY3RlZFwiKSx0aGlzLm9uY29ubmVjdCgpfWZ1bmN0aW9uIGwoZSl7YShcIldlYlNvY2tldCBcIit0aGlzLnVybCtcIiBjbG9zZWRcIiksZS53YXNDbGVhbj09PSExJiZhKFwiV2ViU29ja2V0IGFicnVwdCBkaXNjb25uZWN0aW9uXCIpLHRoaXMub25kaXNjb25uZWN0KGUud2FzQ2xlYW4sZS5jb2RlLGUucmVhc29uKX1mdW5jdGlvbiBpKGUpe2EoXCJyZWNlaXZlZCBXZWJTb2NrZXQgbWVzc2FnZVwiKSx0aGlzLm9uZGF0YShlLmRhdGEpfWZ1bmN0aW9uIG8oZSl7YyhcIldlYlNvY2tldCBcIit0aGlzLnVybCtcIiBlcnJvcjogXCIrZSl9dC5leHBvcnRzPXI7dmFyIHU9ZShcIi4vR3JhbW1hclwiKSxhPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOldlYlNvY2tldEludGVyZmFjZVwiKSxjPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOldlYlNvY2tldEludGVyZmFjZVwiKTtyLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7aWYoYShcImNvbm5lY3QoKVwiKSx0aGlzLmlzQ29ubmVjdGVkKCkpcmV0dXJuIHZvaWQgYShcIldlYlNvY2tldCBcIit0aGlzLnVybCtcIiBpcyBhbHJlYWR5IGNvbm5lY3RlZFwiKTtpZih0aGlzLmlzQ29ubmVjdGluZygpKXJldHVybiB2b2lkIGEoXCJXZWJTb2NrZXQgXCIrdGhpcy51cmwrXCIgaXMgY29ubmVjdGluZ1wiKTt0aGlzLndzJiZ0aGlzLndzLmNsb3NlKCksYShcImNvbm5lY3RpbmcgdG8gV2ViU29ja2V0IFwiK3RoaXMudXJsKTt0cnl7dGhpcy53cz1uZXcgV2ViU29ja2V0KHRoaXMudXJsLFwic2lwXCIpLHRoaXMud3MuYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIsdGhpcy53cy5vbm9wZW49cy5iaW5kKHRoaXMpLHRoaXMud3Mub25jbG9zZT1sLmJpbmQodGhpcyksdGhpcy53cy5vbm1lc3NhZ2U9aS5iaW5kKHRoaXMpLHRoaXMud3Mub25lcnJvcj1vLmJpbmQodGhpcyl9Y2F0Y2goZSl7by5jYWxsKHRoaXMsZSl9fSxyLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7YShcImRpc2Nvbm5lY3QoKVwiKSx0aGlzLndzJiYodGhpcy53cy5jbG9zZSgpLHRoaXMud3M9bnVsbCl9LHIucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGEoXCJzZW5kKClcIiksdGhpcy5pc0Nvbm5lY3RlZCgpPyh0aGlzLndzLnNlbmQoZSksITApOihjKFwidW5hYmxlIHRvIHNlbmQgbWVzc2FnZSwgV2ViU29ja2V0IGlzIG5vdCBvcGVuXCIpLCExKX0sci5wcm90b3R5cGUuaXNDb25uZWN0ZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cyYmdGhpcy53cy5yZWFkeVN0YXRlPT09dGhpcy53cy5PUEVOfSxyLnByb3RvdHlwZS5pc0Nvbm5lY3Rpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cyYmdGhpcy53cy5yZWFkeVN0YXRlPT09dGhpcy53cy5DT05ORUNUSU5HfX0se1wiLi9HcmFtbWFyXCI6NixkZWJ1ZzozM31dLDI3OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbil7dmFyIHIscztmb3IoZD1lLHA9dCxmPW4scj1TLmxlbmd0aDtyLS07KWlmKHM9U1tyXShkKSxzPT09ITEpcmV0dXJuITE7aWYoZCBpbnN0YW5jZW9mIFQuSW5jb21pbmdSZXF1ZXN0KXtmb3Iocj12Lmxlbmd0aDtyLS07KWlmKHM9dltyXShkKSxzPT09ITEpcmV0dXJuITF9ZWxzZSBpZihkIGluc3RhbmNlb2YgVC5JbmNvbWluZ1Jlc3BvbnNlKWZvcihyPUMubGVuZ3RoO3ItLTspaWYocz1DW3JdKGQpLHM9PT0hMSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiBzKCl7cmV0dXJuXCJzaXBcIiE9PWQucyhcInRvXCIpLnVyaS5zY2hlbWU/KGgoNDE2KSwhMSk6dm9pZCAwfWZ1bmN0aW9uIGwoKXtyZXR1cm4gZC50b190YWd8fGQuY2FsbF9pZC5zdWJzdHIoMCw1KSE9PXAuY29uZmlndXJhdGlvbi5qc3NpcF9pZD92b2lkIDA6KGgoNDgyKSwhMSl9ZnVuY3Rpb24gaSgpe3ZhciBlPV8uc3RyX3V0ZjhfbGVuZ3RoKGQuYm9keSksdD1kLmdldEhlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIpO3JldHVybiB0PmU/KGgoNDAwKSwhMSk6dm9pZCAwfWZ1bmN0aW9uIG8oKXt2YXIgZSx0LG49ZC5mcm9tX3RhZyxyPWQuY2FsbF9pZCxzPWQuY3NlcTtpZighZC50b190YWcpaWYoZC5tZXRob2Q9PT1nLklOVklURSl7aWYocC50cmFuc2FjdGlvbnMuaXN0W2QudmlhX2JyYW5jaF0pcmV0dXJuITE7Zm9yKHQgaW4gcC50cmFuc2FjdGlvbnMuaXN0KWlmKGU9cC50cmFuc2FjdGlvbnMuaXN0W3RdLGUucmVxdWVzdC5mcm9tX3RhZz09PW4mJmUucmVxdWVzdC5jYWxsX2lkPT09ciYmZS5yZXF1ZXN0LmNzZXE9PT1zKXJldHVybiBoKDQ4MiksITF9ZWxzZXtpZihwLnRyYW5zYWN0aW9ucy5uaXN0W2QudmlhX2JyYW5jaF0pcmV0dXJuITE7Zm9yKHQgaW4gcC50cmFuc2FjdGlvbnMubmlzdClpZihlPXAudHJhbnNhY3Rpb25zLm5pc3RbdF0sZS5yZXF1ZXN0LmZyb21fdGFnPT09biYmZS5yZXF1ZXN0LmNhbGxfaWQ9PT1yJiZlLnJlcXVlc3QuY3NlcT09PXMpcmV0dXJuIGgoNDgyKSwhMX19ZnVuY3Rpb24gdSgpe3JldHVybiBkLmdldEhlYWRlcnMoXCJ2aWFcIikubGVuZ3RoPjE/KG0oXCJtb3JlIHRoYW4gb25lIFZpYSBoZWFkZXIgZmllbGQgcHJlc2VudCBpbiB0aGUgcmVzcG9uc2UsIGRyb3BwaW5nIHRoZSByZXNwb25zZVwiKSwhMSk6dm9pZCAwfWZ1bmN0aW9uIGEoKXt2YXIgZT1fLnN0cl91dGY4X2xlbmd0aChkLmJvZHkpLHQ9ZC5nZXRIZWFkZXIoXCJjb250ZW50LWxlbmd0aFwiKTtyZXR1cm4gdD5lPyhtKFwibWVzc2FnZSBib2R5IGxlbmd0aCBpcyBsb3dlciB0aGFuIHRoZSB2YWx1ZSBpbiBDb250ZW50LUxlbmd0aCBoZWFkZXIgZmllbGQsIGRyb3BwaW5nIHRoZSByZXNwb25zZVwiKSwhMSk6dm9pZCAwfWZ1bmN0aW9uIGMoKXtmb3IodmFyIGU9W1wiZnJvbVwiLFwidG9cIixcImNhbGxfaWRcIixcImNzZXFcIixcInZpYVwiXSx0PWUubGVuZ3RoO3QtLTspaWYoIWQuaGFzSGVhZGVyKGVbdF0pKXJldHVybiBtKFwibWlzc2luZyBtYW5kYXRvcnkgaGVhZGVyIGZpZWxkIDogXCIrZVt0XStcIiwgZHJvcHBpbmcgdGhlIHJlc3BvbnNlXCIpLCExfWZ1bmN0aW9uIGgoZSl7dmFyIHQsbj1cIlNJUC8yLjAgXCIrZStcIiBcIitnLlJFQVNPTl9QSFJBU0VbZV0rXCJcXHJcXG5cIixyPWQuZ2V0SGVhZGVycyhcInZpYVwiKSxzPXIubGVuZ3RoLGw9MDtmb3IobDtzPmw7bCsrKW4rPVwiVmlhOiBcIityW2xdK1wiXFxyXFxuXCI7dD1kLmdldEhlYWRlcihcIlRvXCIpLGQudG9fdGFnfHwodCs9XCI7dGFnPVwiK18ubmV3VGFnKCkpLG4rPVwiVG86IFwiK3QrXCJcXHJcXG5cIixuKz1cIkZyb206IFwiK2QuZ2V0SGVhZGVyKFwiRnJvbVwiKStcIlxcclxcblwiLG4rPVwiQ2FsbC1JRDogXCIrZC5jYWxsX2lkK1wiXFxyXFxuXCIsbis9XCJDU2VxOiBcIitkLmNzZXErXCIgXCIrZC5tZXRob2QrXCJcXHJcXG5cIixuKz1cIlxcclxcblwiLGYuc2VuZChuKX10LmV4cG9ydHM9cjt2YXIgZCxwLGYsbT1lKFwiZGVidWdcIikoXCJKc1NJUDpzYW5pdHlDaGVja1wiKSxnPWUoXCIuL0NvbnN0YW50c1wiKSxUPWUoXCIuL1NJUE1lc3NhZ2VcIiksXz1lKFwiLi9VdGlsc1wiKSx2PVtdLEM9W10sUz1bXTt2LnB1c2gocyksdi5wdXNoKGwpLHYucHVzaChpKSx2LnB1c2gobyksQy5wdXNoKHUpLEMucHVzaChhKSxTLnB1c2goYyl9LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vU0lQTWVzc2FnZVwiOjE4LFwiLi9VdGlsc1wiOjI1LGRlYnVnOjMzfV0sMjg6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdGhpcy5fbWF4TGlzdGVuZXJzPXRoaXMuX21heExpc3RlbmVyc3x8dm9pZCAwfWZ1bmN0aW9uIHMoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX1mdW5jdGlvbiBsKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIGkoZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUmJm51bGwhPT1lfWZ1bmN0aW9uIG8oZSl7cmV0dXJuIHZvaWQgMD09PWV9dC5leHBvcnRzPXIsci5FdmVudEVtaXR0ZXI9cixyLnByb3RvdHlwZS5fZXZlbnRzPXZvaWQgMCxyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzPXZvaWQgMCxyLmRlZmF1bHRNYXhMaXN0ZW5lcnM9MTAsci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzPWZ1bmN0aW9uKGUpe2lmKCFsKGUpfHwwPmV8fGlzTmFOKGUpKXRocm93IFR5cGVFcnJvcihcIm4gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlclwiKTtyZXR1cm4gdGhpcy5fbWF4TGlzdGVuZXJzPWUsdGhpc30sci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXt2YXIgdCxuLHIsbCx1LGE7aWYodGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KSxcImVycm9yXCI9PT1lJiYoIXRoaXMuX2V2ZW50cy5lcnJvcnx8aSh0aGlzLl9ldmVudHMuZXJyb3IpJiYhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpe2lmKHQ9YXJndW1lbnRzWzFdLHQgaW5zdGFuY2VvZiBFcnJvcil0aHJvdyB0O3Rocm93IFR5cGVFcnJvcignVW5jYXVnaHQsIHVuc3BlY2lmaWVkIFwiZXJyb3JcIiBldmVudC4nKX1pZihuPXRoaXMuX2V2ZW50c1tlXSxvKG4pKXJldHVybiExO2lmKHMobikpc3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMTpuLmNhbGwodGhpcyk7YnJlYWs7Y2FzZSAyOm4uY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSk7YnJlYWs7Y2FzZSAzOm4uY2FsbCh0aGlzLGFyZ3VtZW50c1sxXSxhcmd1bWVudHNbMl0pO2JyZWFrO2RlZmF1bHQ6bD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksbi5hcHBseSh0aGlzLGwpfWVsc2UgaWYoaShuKSlmb3IobD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksYT1uLnNsaWNlKCkscj1hLmxlbmd0aCx1PTA7cj51O3UrKylhW3VdLmFwcGx5KHRoaXMsbCk7cmV0dXJuITB9LHIucHJvdG90eXBlLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dmFyIG47aWYoIXModCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3JldHVybiB0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pLHRoaXMuX2V2ZW50cy5uZXdMaXN0ZW5lciYmdGhpcy5lbWl0KFwibmV3TGlzdGVuZXJcIixlLHModC5saXN0ZW5lcik/dC5saXN0ZW5lcjp0KSx0aGlzLl9ldmVudHNbZV0/aSh0aGlzLl9ldmVudHNbZV0pP3RoaXMuX2V2ZW50c1tlXS5wdXNoKHQpOnRoaXMuX2V2ZW50c1tlXT1bdGhpcy5fZXZlbnRzW2VdLHRdOnRoaXMuX2V2ZW50c1tlXT10LGkodGhpcy5fZXZlbnRzW2VdKSYmIXRoaXMuX2V2ZW50c1tlXS53YXJuZWQmJihuPW8odGhpcy5fbWF4TGlzdGVuZXJzKT9yLmRlZmF1bHRNYXhMaXN0ZW5lcnM6dGhpcy5fbWF4TGlzdGVuZXJzLG4mJm4+MCYmdGhpcy5fZXZlbnRzW2VdLmxlbmd0aD5uJiYodGhpcy5fZXZlbnRzW2VdLndhcm5lZD0hMCxjb25zb2xlLmVycm9yKFwiKG5vZGUpIHdhcm5pbmc6IHBvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiBVc2UgZW1pdHRlci5zZXRNYXhMaXN0ZW5lcnMoKSB0byBpbmNyZWFzZSBsaW1pdC5cIix0aGlzLl9ldmVudHNbZV0ubGVuZ3RoKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLnRyYWNlJiZjb25zb2xlLnRyYWNlKCkpKSx0aGlzfSxyLnByb3RvdHlwZS5vbj1yLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixyLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpe3RoaXMucmVtb3ZlTGlzdGVuZXIoZSxuKSxyfHwocj0hMCx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9aWYoIXModCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciByPSExO3JldHVybiBuLmxpc3RlbmVyPXQsdGhpcy5vbihlLG4pLHRoaXN9LHIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixsLG87aWYoIXModCkpdGhyb3cgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO2lmKCF0aGlzLl9ldmVudHN8fCF0aGlzLl9ldmVudHNbZV0pcmV0dXJuIHRoaXM7aWYobj10aGlzLl9ldmVudHNbZV0sbD1uLmxlbmd0aCxyPS0xLG49PT10fHxzKG4ubGlzdGVuZXIpJiZuLmxpc3RlbmVyPT09dClkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLHQpO2Vsc2UgaWYoaShuKSl7Zm9yKG89bDtvLS0gPjA7KWlmKG5bb109PT10fHxuW29dLmxpc3RlbmVyJiZuW29dLmxpc3RlbmVyPT09dCl7cj1vO2JyZWFrfWlmKDA+cilyZXR1cm4gdGhpczsxPT09bi5sZW5ndGg/KG4ubGVuZ3RoPTAsZGVsZXRlIHRoaXMuX2V2ZW50c1tlXSk6bi5zcGxpY2UociwxKSx0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXImJnRoaXMuZW1pdChcInJlbW92ZUxpc3RlbmVyXCIsZSx0KX1yZXR1cm4gdGhpc30sci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIXRoaXMuX2V2ZW50cylyZXR1cm4gdGhpcztpZighdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKXJldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90aGlzLl9ldmVudHM9e306dGhpcy5fZXZlbnRzW2VdJiZkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpe2Zvcih0IGluIHRoaXMuX2V2ZW50cylcInJlbW92ZUxpc3RlbmVyXCIhPT10JiZ0aGlzLnJlbW92ZUFsbExpc3RlbmVycyh0KTtyZXR1cm4gdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZW1vdmVMaXN0ZW5lclwiKSx0aGlzLl9ldmVudHM9e30sdGhpc31pZihuPXRoaXMuX2V2ZW50c1tlXSxzKG4pKXRoaXMucmVtb3ZlTGlzdGVuZXIoZSxuKTtlbHNlIGlmKG4pZm9yKDtuLmxlbmd0aDspdGhpcy5yZW1vdmVMaXN0ZW5lcihlLG5bbi5sZW5ndGgtMV0pO3JldHVybiBkZWxldGUgdGhpcy5fZXZlbnRzW2VdLHRoaXN9LHIucHJvdG90eXBlLmxpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdD10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1tlXT9zKHRoaXMuX2V2ZW50c1tlXSk/W3RoaXMuX2V2ZW50c1tlXV06dGhpcy5fZXZlbnRzW2VdLnNsaWNlKCk6W119LHIucHJvdG90eXBlLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZXZlbnRzKXt2YXIgdD10aGlzLl9ldmVudHNbZV07aWYocyh0KSlyZXR1cm4gMTtpZih0KXJldHVybiB0Lmxlbmd0aH1yZXR1cm4gMH0sci5saXN0ZW5lckNvdW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGlzdGVuZXJDb3VudCh0KX19LHt9XSwyOTpbZnVuY3Rpb24oZSx0LG4pe1wiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5jcmVhdGU/dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7ZS5zdXBlcl89dCxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6ZSxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KX06dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7ZS5zdXBlcl89dDt2YXIgbj1mdW5jdGlvbigpe307bi5wcm90b3R5cGU9dC5wcm90b3R5cGUsZS5wcm90b3R5cGU9bmV3IG4sZS5wcm90b3R5cGUuY29uc3RydWN0b3I9ZX19LHt9XSwzMDpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoKXtjJiZvJiYoYz0hMSxvLmxlbmd0aD9hPW8uY29uY2F0KGEpOmg9LTEsYS5sZW5ndGgmJnMoKSl9ZnVuY3Rpb24gcygpe2lmKCFjKXt2YXIgZT1zZXRUaW1lb3V0KHIpO2M9ITA7Zm9yKHZhciB0PWEubGVuZ3RoO3Q7KXtmb3Iobz1hLGE9W107KytoPHQ7KW8mJm9baF0ucnVuKCk7aD0tMSx0PWEubGVuZ3RofW89bnVsbCxjPSExLGNsZWFyVGltZW91dChlKX19ZnVuY3Rpb24gbChlLHQpe3RoaXMuZnVuPWUsdGhpcy5hcnJheT10fWZ1bmN0aW9uIGkoKXt9dmFyIG8sdT10LmV4cG9ydHM9e30sYT1bXSxjPSExLGg9LTE7dS5uZXh0VGljaz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aC0xKTtpZihhcmd1bWVudHMubGVuZ3RoPjEpZm9yKHZhciBuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO2EucHVzaChuZXcgbChlLHQpKSwxIT09YS5sZW5ndGh8fGN8fHNldFRpbWVvdXQocywwKX0sbC5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KX0sdS50aXRsZT1cImJyb3dzZXJcIix1LmJyb3dzZXI9ITAsdS5lbnY9e30sdS5hcmd2PVtdLHUudmVyc2lvbj1cIlwiLHUudmVyc2lvbnM9e30sdS5vbj1pLHUuYWRkTGlzdGVuZXI9aSx1Lm9uY2U9aSx1Lm9mZj1pLHUucmVtb3ZlTGlzdGVuZXI9aSx1LnJlbW92ZUFsbExpc3RlbmVycz1pLHUuZW1pdD1pLHUuYmluZGluZz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZFwiKX0sdS5jd2Q9ZnVuY3Rpb24oKXtyZXR1cm5cIi9cIn0sdS5jaGRpcj1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWRcIil9LHUudW1hc2s9ZnVuY3Rpb24oKXtyZXR1cm4gMH19LHt9XSwzMTpbZnVuY3Rpb24oZSx0LG4pe3QuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJvYmplY3RcIj09dHlwZW9mIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY29weSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5maWxsJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnJlYWRVSW50OH19LHt9XSwzMjpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbih0LHIpe2Z1bmN0aW9uIHMoZSx0KXt2YXIgcj17c2VlbjpbXSxzdHlsaXplOml9O3JldHVybiBhcmd1bWVudHMubGVuZ3RoPj0zJiYoci5kZXB0aD1hcmd1bWVudHNbMl0pLGFyZ3VtZW50cy5sZW5ndGg+PTQmJihyLmNvbG9ycz1hcmd1bWVudHNbM10pLG0odCk/ci5zaG93SGlkZGVuPXQ6dCYmbi5fZXh0ZW5kKHIsdCksUyhyLnNob3dIaWRkZW4pJiYoci5zaG93SGlkZGVuPSExKSxTKHIuZGVwdGgpJiYoci5kZXB0aD0yKSxTKHIuY29sb3JzKSYmKHIuY29sb3JzPSExKSxTKHIuY3VzdG9tSW5zcGVjdCkmJihyLmN1c3RvbUluc3BlY3Q9ITApLHIuY29sb3JzJiYoci5zdHlsaXplPWwpLHUocixlLHIuZGVwdGgpfWZ1bmN0aW9uIGwoZSx0KXt2YXIgbj1zLnN0eWxlc1t0XTtyZXR1cm4gbj9cIlx1MDAxYltcIitzLmNvbG9yc1tuXVswXStcIm1cIitlK1wiXHUwMDFiW1wiK3MuY29sb3JzW25dWzFdK1wibVwiOmV9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBlfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9e307cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlLG4pe3RbZV09ITB9KSx0fWZ1bmN0aW9uIHUoZSx0LHIpe2lmKGUuY3VzdG9tSW5zcGVjdCYmdCYmYih0Lmluc3BlY3QpJiZ0Lmluc3BlY3QhPT1uLmluc3BlY3QmJighdC5jb25zdHJ1Y3Rvcnx8dC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUhPT10KSl7dmFyIHM9dC5pbnNwZWN0KHIsZSk7cmV0dXJuIHYocyl8fChzPXUoZSxzLHIpKSxzfXZhciBsPWEoZSx0KTtpZihsKXJldHVybiBsO3ZhciBpPU9iamVjdC5rZXlzKHQpLG09byhpKTtpZihlLnNob3dIaWRkZW4mJihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpKSxSKHQpJiYoaS5pbmRleE9mKFwibWVzc2FnZVwiKT49MHx8aS5pbmRleE9mKFwiZGVzY3JpcHRpb25cIik+PTApKXJldHVybiBjKHQpO2lmKDA9PT1pLmxlbmd0aCl7aWYoYih0KSl7dmFyIGc9dC5uYW1lP1wiOiBcIit0Lm5hbWU6XCJcIjtyZXR1cm4gZS5zdHlsaXplKFwiW0Z1bmN0aW9uXCIrZytcIl1cIixcInNwZWNpYWxcIil9aWYoRSh0KSlyZXR1cm4gZS5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSxcInJlZ2V4cFwiKTtpZih5KHQpKXJldHVybiBlLnN0eWxpemUoRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSxcImRhdGVcIik7aWYoUih0KSlyZXR1cm4gYyh0KX12YXIgVD1cIlwiLF89ITEsQz1bXCJ7XCIsXCJ9XCJdO2lmKGYodCkmJihfPSEwLEM9W1wiW1wiLFwiXVwiXSksYih0KSl7dmFyIFM9dC5uYW1lP1wiOiBcIit0Lm5hbWU6XCJcIjtUPVwiIFtGdW5jdGlvblwiK1MrXCJdXCJ9aWYoRSh0KSYmKFQ9XCIgXCIrUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKSx5KHQpJiYoVD1cIiBcIitEYXRlLnByb3RvdHlwZS50b1VUQ1N0cmluZy5jYWxsKHQpKSxSKHQpJiYoVD1cIiBcIitjKHQpKSwwPT09aS5sZW5ndGgmJighX3x8MD09dC5sZW5ndGgpKXJldHVybiBDWzBdK1QrQ1sxXTtpZigwPnIpcmV0dXJuIEUodCk/ZS5zdHlsaXplKFJlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSxcInJlZ2V4cFwiKTplLnN0eWxpemUoXCJbT2JqZWN0XVwiLFwic3BlY2lhbFwiKTtlLnNlZW4ucHVzaCh0KTt2YXIgQTtyZXR1cm4gQT1fP2goZSx0LHIsbSxpKTppLm1hcChmdW5jdGlvbihuKXtyZXR1cm4gZChlLHQscixtLG4sXyl9KSxlLnNlZW4ucG9wKCkscChBLFQsQyl9ZnVuY3Rpb24gYShlLHQpe2lmKFModCkpcmV0dXJuIGUuc3R5bGl6ZShcInVuZGVmaW5lZFwiLFwidW5kZWZpbmVkXCIpO2lmKHYodCkpe3ZhciBuPVwiJ1wiK0pTT04uc3RyaW5naWZ5KHQpLnJlcGxhY2UoL15cInxcIiQvZyxcIlwiKS5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKStcIidcIjtyZXR1cm4gZS5zdHlsaXplKG4sXCJzdHJpbmdcIil9cmV0dXJuIF8odCk/ZS5zdHlsaXplKFwiXCIrdCxcIm51bWJlclwiKTptKHQpP2Uuc3R5bGl6ZShcIlwiK3QsXCJib29sZWFuXCIpOmcodCk/ZS5zdHlsaXplKFwibnVsbFwiLFwibnVsbFwiKTp2b2lkIDB9ZnVuY3Rpb24gYyhlKXtyZXR1cm5cIltcIitFcnJvci5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKStcIl1cIn1mdW5jdGlvbiBoKGUsdCxuLHIscyl7Zm9yKHZhciBsPVtdLGk9MCxvPXQubGVuZ3RoO28+aTsrK2kpTyh0LFN0cmluZyhpKSk/bC5wdXNoKGQoZSx0LG4scixTdHJpbmcoaSksITApKTpsLnB1c2goXCJcIik7cmV0dXJuIHMuZm9yRWFjaChmdW5jdGlvbihzKXtzLm1hdGNoKC9eXFxkKyQvKXx8bC5wdXNoKGQoZSx0LG4scixzLCEwKSl9KSxsfWZ1bmN0aW9uIGQoZSx0LG4scixzLGwpe3ZhciBpLG8sYTtpZihhPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxzKXx8e3ZhbHVlOnRbc119LGEuZ2V0P289YS5zZXQ/ZS5zdHlsaXplKFwiW0dldHRlci9TZXR0ZXJdXCIsXCJzcGVjaWFsXCIpOmUuc3R5bGl6ZShcIltHZXR0ZXJdXCIsXCJzcGVjaWFsXCIpOmEuc2V0JiYobz1lLnN0eWxpemUoXCJbU2V0dGVyXVwiLFwic3BlY2lhbFwiKSksTyhyLHMpfHwoaT1cIltcIitzK1wiXVwiKSxvfHwoZS5zZWVuLmluZGV4T2YoYS52YWx1ZSk8MD8obz1nKG4pP3UoZSxhLnZhbHVlLG51bGwpOnUoZSxhLnZhbHVlLG4tMSksby5pbmRleE9mKFwiXFxuXCIpPi0xJiYobz1sP28uc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiICBcIitlfSkuam9pbihcIlxcblwiKS5zdWJzdHIoMik6XCJcXG5cIitvLnNwbGl0KFwiXFxuXCIpLm1hcChmdW5jdGlvbihlKXtyZXR1cm5cIiAgIFwiK2V9KS5qb2luKFwiXFxuXCIpKSk6bz1lLnN0eWxpemUoXCJbQ2lyY3VsYXJdXCIsXCJzcGVjaWFsXCIpKSxTKGkpKXtpZihsJiZzLm1hdGNoKC9eXFxkKyQvKSlyZXR1cm4gbztpPUpTT04uc3RyaW5naWZ5KFwiXCIrcyksaS5tYXRjaCgvXlwiKFthLXpBLVpfXVthLXpBLVpfMC05XSopXCIkLyk/KGk9aS5zdWJzdHIoMSxpLmxlbmd0aC0yKSxpPWUuc3R5bGl6ZShpLFwibmFtZVwiKSk6KGk9aS5yZXBsYWNlKC8nL2csXCJcXFxcJ1wiKS5yZXBsYWNlKC9cXFxcXCIvZywnXCInKS5yZXBsYWNlKC8oXlwifFwiJCkvZyxcIidcIiksaT1lLnN0eWxpemUoaSxcInN0cmluZ1wiKSl9cmV0dXJuIGkrXCI6IFwiK299ZnVuY3Rpb24gcChlLHQsbil7dmFyIHI9MCxzPWUucmVkdWNlKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIrKyx0LmluZGV4T2YoXCJcXG5cIik+PTAmJnIrKyxlK3QucmVwbGFjZSgvXFx1MDAxYlxcW1xcZFxcZD9tL2csXCJcIikubGVuZ3RoKzF9LDApO3JldHVybiBzPjYwP25bMF0rKFwiXCI9PT10P1wiXCI6dCtcIlxcbiBcIikrXCIgXCIrZS5qb2luKFwiLFxcbiAgXCIpK1wiIFwiK25bMV06blswXSt0K1wiIFwiK2Uuam9pbihcIiwgXCIpK1wiIFwiK25bMV19ZnVuY3Rpb24gZihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKX1mdW5jdGlvbiBtKGUpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZX1mdW5jdGlvbiBnKGUpe3JldHVybiBudWxsPT09ZX1mdW5jdGlvbiBUKGUpe3JldHVybiBudWxsPT1lfWZ1bmN0aW9uIF8oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9ZnVuY3Rpb24gdihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX1mdW5jdGlvbiBDKGUpe3JldHVyblwic3ltYm9sXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIFMoZSl7cmV0dXJuIHZvaWQgMD09PWV9ZnVuY3Rpb24gRShlKXtyZXR1cm4gQShlKSYmXCJbb2JqZWN0IFJlZ0V4cF1cIj09PXcoZSl9ZnVuY3Rpb24gQShlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWV9ZnVuY3Rpb24geShlKXtyZXR1cm4gQShlKSYmXCJbb2JqZWN0IERhdGVdXCI9PT13KGUpfWZ1bmN0aW9uIFIoZSl7cmV0dXJuIEEoZSkmJihcIltvYmplY3QgRXJyb3JdXCI9PT13KGUpfHxlIGluc3RhbmNlb2YgRXJyb3IpfWZ1bmN0aW9uIGIoZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZX1mdW5jdGlvbiBJKGUpe3JldHVybiBudWxsPT09ZXx8XCJib29sZWFuXCI9PXR5cGVvZiBlfHxcIm51bWJlclwiPT10eXBlb2YgZXx8XCJzdHJpbmdcIj09dHlwZW9mIGV8fFwic3ltYm9sXCI9PXR5cGVvZiBlfHxcInVuZGVmaW5lZFwiPT10eXBlb2YgZX1mdW5jdGlvbiB3KGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9ZnVuY3Rpb24gTihlKXtyZXR1cm4gMTA+ZT9cIjBcIitlLnRvU3RyaW5nKDEwKTplLnRvU3RyaW5nKDEwKX1mdW5jdGlvbiBEKCl7dmFyIGU9bmV3IERhdGUsdD1bTihlLmdldEhvdXJzKCkpLE4oZS5nZXRNaW51dGVzKCkpLE4oZS5nZXRTZWNvbmRzKCkpXS5qb2luKFwiOlwiKTtyZXR1cm5bZS5nZXREYXRlKCksUFtlLmdldE1vbnRoKCldLHRdLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIE8oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9dmFyIHg9LyVbc2RqJV0vZztuLmZvcm1hdD1mdW5jdGlvbihlKXtpZighdihlKSl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXQucHVzaChzKGFyZ3VtZW50c1tuXSkpO3JldHVybiB0LmpvaW4oXCIgXCIpfWZvcih2YXIgbj0xLHI9YXJndW1lbnRzLGw9ci5sZW5ndGgsaT1TdHJpbmcoZSkucmVwbGFjZSh4LGZ1bmN0aW9uKGUpe2lmKFwiJSVcIj09PWUpcmV0dXJuXCIlXCI7aWYobj49bClyZXR1cm4gZTtzd2l0Y2goZSl7Y2FzZVwiJXNcIjpyZXR1cm4gU3RyaW5nKHJbbisrXSk7Y2FzZVwiJWRcIjpyZXR1cm4gTnVtYmVyKHJbbisrXSk7Y2FzZVwiJWpcIjp0cnl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHJbbisrXSl9Y2F0Y2godCl7cmV0dXJuXCJbQ2lyY3VsYXJdXCJ9ZGVmYXVsdDpyZXR1cm4gZX19KSxvPXJbbl07bD5uO289clsrK25dKWkrPWcobyl8fCFBKG8pP1wiIFwiK286XCIgXCIrcyhvKTtyZXR1cm4gaX0sbi5kZXByZWNhdGU9ZnVuY3Rpb24oZSxzKXtmdW5jdGlvbiBsKCl7aWYoIWkpe2lmKHQudGhyb3dEZXByZWNhdGlvbil0aHJvdyBuZXcgRXJyb3Iocyk7dC50cmFjZURlcHJlY2F0aW9uP2NvbnNvbGUudHJhY2Uocyk6Y29uc29sZS5lcnJvcihzKSxpPSEwfXJldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1pZihTKHIucHJvY2VzcykpcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4uZGVwcmVjYXRlKGUscykuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtpZih0Lm5vRGVwcmVjYXRpb249PT0hMClyZXR1cm4gZTt2YXIgaT0hMTtyZXR1cm4gbH07dmFyIFUsTT17fTtuLmRlYnVnbG9nPWZ1bmN0aW9uKGUpe2lmKFMoVSkmJihVPXQuZW52Lk5PREVfREVCVUd8fFwiXCIpLGU9ZS50b1VwcGVyQ2FzZSgpLCFNW2VdKWlmKG5ldyBSZWdFeHAoXCJcXFxcYlwiK2UrXCJcXFxcYlwiLFwiaVwiKS50ZXN0KFUpKXt2YXIgcj10LnBpZDtNW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9bi5mb3JtYXQuYXBwbHkobixhcmd1bWVudHMpO2NvbnNvbGUuZXJyb3IoXCIlcyAlZDogJXNcIixlLHIsdCl9fWVsc2UgTVtlXT1mdW5jdGlvbigpe307cmV0dXJuIE1bZV19LG4uaW5zcGVjdD1zLHMuY29sb3JzPXtib2xkOlsxLDIyXSxpdGFsaWM6WzMsMjNdLHVuZGVybGluZTpbNCwyNF0saW52ZXJzZTpbNywyN10sd2hpdGU6WzM3LDM5XSxncmV5Ols5MCwzOV0sYmxhY2s6WzMwLDM5XSxibHVlOlszNCwzOV0sY3lhbjpbMzYsMzldLGdyZWVuOlszMiwzOV0sbWFnZW50YTpbMzUsMzldLHJlZDpbMzEsMzldLHllbGxvdzpbMzMsMzldfSxzLnN0eWxlcz17c3BlY2lhbDpcImN5YW5cIixudW1iZXI6XCJ5ZWxsb3dcIixcImJvb2xlYW5cIjpcInllbGxvd1wiLHVuZGVmaW5lZDpcImdyZXlcIixcIm51bGxcIjpcImJvbGRcIixzdHJpbmc6XCJncmVlblwiLGRhdGU6XCJtYWdlbnRhXCIscmVnZXhwOlwicmVkXCJ9LG4uaXNBcnJheT1mLG4uaXNCb29sZWFuPW0sbi5pc051bGw9ZyxuLmlzTnVsbE9yVW5kZWZpbmVkPVQsbi5pc051bWJlcj1fLG4uaXNTdHJpbmc9dixuLmlzU3ltYm9sPUMsbi5pc1VuZGVmaW5lZD1TLG4uaXNSZWdFeHA9RSxuLmlzT2JqZWN0PUEsbi5pc0RhdGU9eSxuLmlzRXJyb3I9UixuLmlzRnVuY3Rpb249YixuLmlzUHJpbWl0aXZlPUksbi5pc0J1ZmZlcj1lKFwiLi9zdXBwb3J0L2lzQnVmZmVyXCIpO3ZhciBQPVtcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIl07bi5sb2c9ZnVuY3Rpb24oKXtjb25zb2xlLmxvZyhcIiVzIC0gJXNcIixEKCksbi5mb3JtYXQuYXBwbHkobixhcmd1bWVudHMpKX0sbi5pbmhlcml0cz1lKFwiaW5oZXJpdHNcIiksbi5fZXh0ZW5kPWZ1bmN0aW9uKGUsdCl7aWYoIXR8fCFBKHQpKXJldHVybiBlO2Zvcih2YXIgbj1PYmplY3Qua2V5cyh0KSxyPW4ubGVuZ3RoO3ItLTspZVtuW3JdXT10W25bcl1dO3JldHVybiBlfX0pLmNhbGwodGhpcyxlKFwiX3Byb2Nlc3NcIiksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtcIi4vc3VwcG9ydC9pc0J1ZmZlclwiOjMxLF9wcm9jZXNzOjMwLGluaGVyaXRzOjI5fV0sMzM6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7cmV0dXJuXCJXZWJraXRBcHBlYXJhbmNlXCJpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGV8fHdpbmRvdy5jb25zb2xlJiYoY29uc29sZS5maXJlYnVnfHxjb25zb2xlLmV4Y2VwdGlvbiYmY29uc29sZS50YWJsZSl8fG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFxcLyhcXGQrKS8pJiZwYXJzZUludChSZWdFeHAuJDEsMTApPj0zMX1mdW5jdGlvbiBzKCl7dmFyIGU9YXJndW1lbnRzLHQ9dGhpcy51c2VDb2xvcnM7aWYoZVswXT0odD9cIiVjXCI6XCJcIikrdGhpcy5uYW1lc3BhY2UrKHQ/XCIgJWNcIjpcIiBcIikrZVswXSsodD9cIiVjIFwiOlwiIFwiKStcIitcIituLmh1bWFuaXplKHRoaXMuZGlmZiksIXQpcmV0dXJuIGU7dmFyIHI9XCJjb2xvcjogXCIrdGhpcy5jb2xvcjtlPVtlWzBdLHIsXCJjb2xvcjogaW5oZXJpdFwiXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZSwxKSk7dmFyIHM9MCxsPTA7cmV0dXJuIGVbMF0ucmVwbGFjZSgvJVthLXolXS9nLGZ1bmN0aW9uKGUpe1wiJSVcIiE9PWUmJihzKyssXCIlY1wiPT09ZSYmKGw9cykpfSksZS5zcGxpY2UobCwwLHIpLGV9ZnVuY3Rpb24gbCgpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLmxvZyYmRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwoY29uc29sZS5sb2csY29uc29sZSxhcmd1bWVudHMpfWZ1bmN0aW9uIGkoZSl7dHJ5e251bGw9PWU/bi5zdG9yYWdlLnJlbW92ZUl0ZW0oXCJkZWJ1Z1wiKTpuLnN0b3JhZ2UuZGVidWc9ZX1jYXRjaCh0KXt9fWZ1bmN0aW9uIG8oKXt2YXIgZTt0cnl7ZT1uLnN0b3JhZ2UuZGVidWd9Y2F0Y2godCl7fXJldHVybiBlfWZ1bmN0aW9uIHUoKXt0cnl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2V9Y2F0Y2goZSl7fX1uPXQuZXhwb3J0cz1lKFwiLi9kZWJ1Z1wiKSxuLmxvZz1sLG4uZm9ybWF0QXJncz1zLG4uc2F2ZT1pLG4ubG9hZD1vLG4udXNlQ29sb3JzPXIsbi5zdG9yYWdlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBjaHJvbWUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjaHJvbWUuc3RvcmFnZT9jaHJvbWUuc3RvcmFnZS5sb2NhbDp1KCksbi5jb2xvcnM9W1wibGlnaHRzZWFncmVlblwiLFwiZm9yZXN0Z3JlZW5cIixcImdvbGRlbnJvZFwiLFwiZG9kZ2VyYmx1ZVwiLFwiZGFya29yY2hpZFwiLFwiY3JpbXNvblwiXSxuLmZvcm1hdHRlcnMuaj1mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSl9LG4uZW5hYmxlKG8oKSl9LHtcIi4vZGVidWdcIjozNH1dLDM0OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe3JldHVybiBuLmNvbG9yc1tjKyslbi5jb2xvcnMubGVuZ3RoXX1mdW5jdGlvbiBzKGUpe2Z1bmN0aW9uIHQoKXt9ZnVuY3Rpb24gcygpe3ZhciBlPXMsdD0rbmV3IERhdGUsbD10LShhfHx0KTtlLmRpZmY9bCxlLnByZXY9YSxlLmN1cnI9dCxhPXQsbnVsbD09ZS51c2VDb2xvcnMmJihlLnVzZUNvbG9ycz1uLnVzZUNvbG9ycygpKSxudWxsPT1lLmNvbG9yJiZlLnVzZUNvbG9ycyYmKGUuY29sb3I9cigpKTt2YXIgaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2lbMF09bi5jb2VyY2UoaVswXSksXCJzdHJpbmdcIiE9dHlwZW9mIGlbMF0mJihpPVtcIiVvXCJdLmNvbmNhdChpKSk7dmFyIG89MDtpWzBdPWlbMF0ucmVwbGFjZSgvJShbYS16JV0pL2csZnVuY3Rpb24odCxyKXtpZihcIiUlXCI9PT10KXJldHVybiB0O28rKzt2YXIgcz1uLmZvcm1hdHRlcnNbcl07aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygcyl7dmFyIGw9aVtvXTt0PXMuY2FsbChlLGwpLGkuc3BsaWNlKG8sMSksby0tfXJldHVybiB0fSksXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5mb3JtYXRBcmdzJiYoaT1uLmZvcm1hdEFyZ3MuYXBwbHkoZSxpKSk7dmFyIHU9cy5sb2d8fG4ubG9nfHxjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpO3UuYXBwbHkoZSxpKX10LmVuYWJsZWQ9ITEscy5lbmFibGVkPSEwO3ZhciBsPW4uZW5hYmxlZChlKT9zOnQ7cmV0dXJuIGwubmFtZXNwYWNlPWUsbH1mdW5jdGlvbiBsKGUpe24uc2F2ZShlKTtmb3IodmFyIHQ9KGV8fFwiXCIpLnNwbGl0KC9bXFxzLF0rLykscj10Lmxlbmd0aCxzPTA7cj5zO3MrKyl0W3NdJiYoZT10W3NdLnJlcGxhY2UoL1xcKi9nLFwiLio/XCIpLFwiLVwiPT09ZVswXT9uLnNraXBzLnB1c2gobmV3IFJlZ0V4cChcIl5cIitlLnN1YnN0cigxKStcIiRcIikpOm4ubmFtZXMucHVzaChuZXcgUmVnRXhwKFwiXlwiK2UrXCIkXCIpKSl9ZnVuY3Rpb24gaSgpe24uZW5hYmxlKFwiXCIpfWZ1bmN0aW9uIG8oZSl7dmFyIHQscjtmb3IodD0wLHI9bi5za2lwcy5sZW5ndGg7cj50O3QrKylpZihuLnNraXBzW3RdLnRlc3QoZSkpcmV0dXJuITE7Zm9yKHQ9MCxyPW4ubmFtZXMubGVuZ3RoO3I+dDt0KyspaWYobi5uYW1lc1t0XS50ZXN0KGUpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvcj9lLnN0YWNrfHxlLm1lc3NhZ2U6ZX1uPXQuZXhwb3J0cz1zLG4uY29lcmNlPXUsbi5kaXNhYmxlPWksbi5lbmFibGU9bCxuLmVuYWJsZWQ9byxuLmh1bWFuaXplPWUoXCJtc1wiKSxuLm5hbWVzPVtdLG4uc2tpcHM9W10sbi5mb3JtYXR0ZXJzPXt9O3ZhciBhLGM9MH0se21zOjM1fV0sMzU6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe2lmKGU9XCJcIitlLCEoZS5sZW5ndGg+MWU0KSl7dmFyIHQ9L14oKD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhlKTtpZih0KXt2YXIgbj1wYXJzZUZsb2F0KHRbMV0pLHI9KHRbMl18fFwibXNcIikudG9Mb3dlckNhc2UoKTtzd2l0Y2gocil7Y2FzZVwieWVhcnNcIjpjYXNlXCJ5ZWFyXCI6Y2FzZVwieXJzXCI6Y2FzZVwieXJcIjpjYXNlXCJ5XCI6cmV0dXJuIG4qaDtjYXNlXCJkYXlzXCI6Y2FzZVwiZGF5XCI6Y2FzZVwiZFwiOnJldHVybiBuKmM7Y2FzZVwiaG91cnNcIjpjYXNlXCJob3VyXCI6Y2FzZVwiaHJzXCI6Y2FzZVwiaHJcIjpjYXNlXCJoXCI6cmV0dXJuIG4qYTtjYXNlXCJtaW51dGVzXCI6Y2FzZVwibWludXRlXCI6Y2FzZVwibWluc1wiOmNhc2VcIm1pblwiOmNhc2VcIm1cIjpyZXR1cm4gbip1O2Nhc2VcInNlY29uZHNcIjpjYXNlXCJzZWNvbmRcIjpjYXNlXCJzZWNzXCI6Y2FzZVwic2VjXCI6Y2FzZVwic1wiOnJldHVybiBuKm87Y2FzZVwibWlsbGlzZWNvbmRzXCI6Y2FzZVwibWlsbGlzZWNvbmRcIjpjYXNlXCJtc2Vjc1wiOmNhc2VcIm1zZWNcIjpjYXNlXCJtc1wiOnJldHVybiBufX19fWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGU+PWM/TWF0aC5yb3VuZChlL2MpK1wiZFwiOmU+PWE/TWF0aC5yb3VuZChlL2EpK1wiaFwiOmU+PXU/TWF0aC5yb3VuZChlL3UpK1wibVwiOmU+PW8/TWF0aC5yb3VuZChlL28pK1wic1wiOmUrXCJtc1wifWZ1bmN0aW9uIGwoZSl7cmV0dXJuIGkoZSxjLFwiZGF5XCIpfHxpKGUsYSxcImhvdXJcIil8fGkoZSx1LFwibWludXRlXCIpfHxpKGUsbyxcInNlY29uZFwiKXx8ZStcIiBtc1wifWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiB0PmU/dm9pZCAwOjEuNSp0PmU/TWF0aC5mbG9vcihlL3QpK1wiIFwiK246TWF0aC5jZWlsKGUvdCkrXCIgXCIrbitcInNcIn12YXIgbz0xZTMsdT02MCpvLGE9NjAqdSxjPTI0KmEsaD0zNjUuMjUqYzt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD10fHx7fSxcInN0cmluZ1wiPT10eXBlb2YgZT9yKGUpOnRbXCJsb25nXCJdP2woZSk6cyhlKX19LHt9XSwzNjpbZnVuY3Rpb24oZSx0LG4peyhmdW5jdGlvbihuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwicnRjbmluamE6IFdlYlJUQyBub3Qgc3VwcG9ydGVkLCBtaXNzaW5nIFwiK2UrXCIgW2Jyb3dzZXI6IFwiK2kubmFtZStcIiBcIitpLnZlcnNpb24rXCJdXCIpfX1pZih2JiZpLmNocm9tZSYmXz49MzJ8fGkuYW5kcm9pZCYmaS5jaHJvbWUmJl8+PTM5fHx2JiZpLm9wZXJhJiZfPj0yN3x8aS5hbmRyb2lkJiZpLm9wZXJhJiZfPj0yNHx8aS5hbmRyb2lkJiZpLndlYmtpdCYmIWkuY2hyb21lJiZfPj0zN3x8bC53ZWJraXRHZXRVc2VyTWVkaWEmJnMud2Via2l0UlRDUGVlckNvbm5lY3Rpb24pQz0hMCxhPWwud2Via2l0R2V0VXNlck1lZGlhLmJpbmQobCksYz1zLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLGg9cy5SVENTZXNzaW9uRGVzY3JpcHRpb24sZD1zLlJUQ0ljZUNhbmRpZGF0ZSxwPXMuTWVkaWFTdHJlYW1UcmFjayxwJiZwLmdldFNvdXJjZXM/Zj1wLmdldFNvdXJjZXMuYmluZChwKTpsLmdldE1lZGlhRGV2aWNlcyYmKGY9bC5nZXRNZWRpYURldmljZXMuYmluZChsKSksbT1mdW5jdGlvbihlLHQpe3JldHVybiBlLnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKHQpLGV9LGc9ITAsVD0hMTtlbHNlIGlmKHYmJmkuZmlyZWZveCYmXz49MjJ8fGkuYW5kcm9pZCYmaS5maXJlZm94JiZfPj0zM3x8bC5tb3pHZXRVc2VyTWVkaWEmJnMubW96UlRDUGVlckNvbm5lY3Rpb24pQz0hMCxhPWwubW96R2V0VXNlck1lZGlhLmJpbmQobCksYz1zLm1velJUQ1BlZXJDb25uZWN0aW9uLGg9cy5tb3pSVENTZXNzaW9uRGVzY3JpcHRpb24sZD1zLm1velJUQ0ljZUNhbmRpZGF0ZSxwPXMuTWVkaWFTdHJlYW1UcmFjayxtPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3JjPVVSTC5jcmVhdGVPYmplY3RVUkwodCksZX0sZz0hMSxUPSExO2Vsc2UgaWYoZS5wbHVnaW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucGx1Z2luLmlzUmVxdWlyZWQmJmUucGx1Z2luLmlzUmVxdWlyZWQoKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5wbHVnaW4uaXNJbnN0YWxsZWQmJmUucGx1Z2luLmlzSW5zdGFsbGVkKCkpe3ZhciBuPWUucGx1Z2luW1wiaW50ZXJmYWNlXCJdO0M9ITAsYT1uLmdldFVzZXJNZWRpYSxjPW4uUlRDUGVlckNvbm5lY3Rpb24saD1uLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbixkPW4uUlRDSWNlQ2FuZGlkYXRlLHA9bi5NZWRpYVN0cmVhbVRyYWNrLHAmJnAuZ2V0U291cmNlcz9mPXAuZ2V0U291cmNlcy5iaW5kKHApOmwuZ2V0TWVkaWFEZXZpY2VzJiYoZj1sLmdldE1lZGlhRGV2aWNlcy5iaW5kKGwpKSxtPW4uYXR0YWNoTWVkaWFTdHJlYW0sZz1uLmNhblJlbmVnb3RpYXRlLFQ9ITB9ZWxzZSBsLmdldFVzZXJNZWRpYSYmcy5SVENQZWVyQ29ubmVjdGlvbiYmKEM9ITAsYT1sLmdldFVzZXJNZWRpYS5iaW5kKGwpLGM9cy5SVENQZWVyQ29ubmVjdGlvbixoPXMuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLGQ9cy5SVENJY2VDYW5kaWRhdGUscD1zLk1lZGlhU3RyZWFtVHJhY2sscCYmcC5nZXRTb3VyY2VzP2Y9cC5nZXRTb3VyY2VzLmJpbmQocCk6bC5nZXRNZWRpYURldmljZXMmJihmPWwuZ2V0TWVkaWFEZXZpY2VzLmJpbmQobCkpLG09cy5hdHRhY2hNZWRpYVN0cmVhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zcmM9VVJMLmNyZWF0ZU9iamVjdFVSTCh0KSxlfSxnPSEwLFQ9ITEpO3JldHVybiByLmhhc1dlYlJUQz1mdW5jdGlvbigpe3JldHVybiBDfSxhP3IuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUsdCxuKXtvKFwiZ2V0VXNlck1lZGlhKCkgfCBjb25zdHJhaW50czogJW9cIixlKTt0cnl7YShlLGZ1bmN0aW9uKGUpe28oXCJnZXRVc2VyTWVkaWEoKSB8IHN1Y2Nlc3NcIiksdCYmdChlKX0sZnVuY3Rpb24oZSl7byhcImdldFVzZXJNZWRpYSgpIHwgZXJyb3I6XCIsZSksbiYmbihlKX0pfWNhdGNoKHIpe3UoXCJnZXRVc2VyTWVkaWEoKSB8IGVycm9yOlwiLHIpLG4mJm4ocil9fTpyLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlLG4scil7dShcImdldFVzZXJNZWRpYSgpIHwgV2ViUlRDIG5vdCBzdXBwb3J0ZWRcIikscj9yKG5ldyBFcnJvcihcInJ0Y25pbmphOiBXZWJSVEMgbm90IHN1cHBvcnRlZCwgbWlzc2luZyBnZXRVc2VyTWVkaWEgW2Jyb3dzZXI6IFwiK2kubmFtZStcIiBcIitpLnZlcnNpb24rXCJdXCIpKTp0KFwiZ2V0VXNlck1lZGlhXCIpfSxyLlJUQ1BlZXJDb25uZWN0aW9uPWN8fHQoXCJSVENQZWVyQ29ubmVjdGlvblwiKSxyLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj1ofHx0KFwiUlRDU2Vzc2lvbkRlc2NyaXB0aW9uXCIpLHIuUlRDSWNlQ2FuZGlkYXRlPWR8fHQoXCJSVENJY2VDYW5kaWRhdGVcIiksci5NZWRpYVN0cmVhbVRyYWNrPXB8fHQoXCJNZWRpYVN0cmVhbVRyYWNrXCIpLHIuZ2V0TWVkaWFEZXZpY2VzPWYsci5hdHRhY2hNZWRpYVN0cmVhbT1tfHx0KFwiYXR0YWNoTWVkaWFTdHJlYW1cIiksci5jYW5SZW5lZ290aWF0ZT1nLHIuY2xvc2VNZWRpYVN0cmVhbT1mdW5jdGlvbihlKXtpZihlKXRyeXtvKFwiY2xvc2VNZWRpYVN0cmVhbSgpIHwgY2FsbGluZyBzdG9wKCkgb24gYWxsIHRoZSBNZWRpYVN0cmVhbVRyYWNrXCIpO3ZhciB0LG4scjtpZihlLmdldFRyYWNrcylmb3IodD1lLmdldFRyYWNrcygpLG49MCxyPXQubGVuZ3RoO3I+bjtuKz0xKXRbbl0uc3RvcCgpO2Vsc2V7Zm9yKHQ9ZS5nZXRBdWRpb1RyYWNrcygpLG49MCxyPXQubGVuZ3RoO3I+bjtuKz0xKXRbbl0uc3RvcCgpO2Zvcih0PWUuZ2V0VmlkZW9UcmFja3MoKSxuPTAscj10Lmxlbmd0aDtyPm47bis9MSl0W25dLnN0b3AoKX19Y2F0Y2gocyl7XCJmdW5jdGlvblwiIT10eXBlb2YgZS5zdG9wJiZcIm9iamVjdFwiIT10eXBlb2YgZS5zdG9wfHwobyhcImNsb3NlTWVkaWFTdHJlYW0oKSB8IGNhbGxpbmcgc3RvcCgpIG9uIHRoZSBNZWRpYVN0cmVhbVwiKSxlLnN0b3AoKSl9fSxyLmZpeFBlZXJDb25uZWN0aW9uQ29uZmlnPWZ1bmN0aW9uKGUpe3ZhciB0LG4scixzLGw7Zm9yKEFycmF5LmlzQXJyYXkoZS5pY2VTZXJ2ZXJzKXx8KGUuaWNlU2VydmVycz1bXSksdD0wLG49ZS5pY2VTZXJ2ZXJzLmxlbmd0aDtuPnQ7dCs9MSlyPWUuaWNlU2VydmVyc1t0XSxzPXIuaGFzT3duUHJvcGVydHkoXCJ1cmxzXCIpLGw9ci5oYXNPd25Qcm9wZXJ0eShcInVybFwiKSxcIm9iamVjdFwiPT10eXBlb2YgciYmKHMmJiFsP3IudXJsPUFycmF5LmlzQXJyYXkoci51cmxzKT9yLnVybHNbMF06ci51cmxzOiFzJiZsJiYoci51cmxzPUFycmF5LmlzQXJyYXkoci51cmwpP3IudXJsLnNsaWNlKCk6ci51cmwpLGwmJkFycmF5LmlzQXJyYXkoci51cmwpJiYoci51cmw9ci51cmxbMF0pKX0sci5maXhSVENPZmZlck9wdGlvbnM9ZnVuY3Rpb24oZSl7ZT1lfHx7fSxUPyhlLmhhc093blByb3BlcnR5KFwib2ZmZXJUb1JlY2VpdmVBdWRpb1wiKSYmKGUubWFuZGF0b3J5PWUubWFuZGF0b3J5fHx7fSxlLm1hbmRhdG9yeS5PZmZlclRvUmVjZWl2ZUF1ZGlvPSEhZS5vZmZlclRvUmVjZWl2ZUF1ZGlvKSxlLmhhc093blByb3BlcnR5KFwib2ZmZXJUb1JlY2VpdmVWaWRlb1wiKSYmKGUubWFuZGF0b3J5PWUubWFuZGF0b3J5fHx7fSxlLm1hbmRhdG9yeS5PZmZlclRvUmVjZWl2ZVZpZGVvPSEhZS5vZmZlclRvUmVjZWl2ZVZpZGVvKSk6KGUubWFuZGF0b3J5JiZlLm1hbmRhdG9yeS5oYXNPd25Qcm9wZXJ0eShcIk9mZmVyVG9SZWNlaXZlQXVkaW9cIikmJihlLm9mZmVyVG9SZWNlaXZlQXVkaW89ZS5tYW5kYXRvcnkuT2ZmZXJUb1JlY2VpdmVBdWRpbz8xOjApLGUubWFuZGF0b3J5JiZlLm1hbmRhdG9yeS5oYXNPd25Qcm9wZXJ0eShcIk9mZmVyVG9SZWNlaXZlVmlkZW9cIikmJihlLm9mZmVyVG9SZWNlaXZlVmlkZW89ZS5tYW5kYXRvcnkuT2ZmZXJUb1JlY2VpdmVWaWRlbz8xOjApLGRlbGV0ZSBlLm1hbmRhdG9yeSl9LHJ9dC5leHBvcnRzPXI7dmFyIHMsbCxpPWUoXCJib3dzZXJcIiksbz1lKFwiZGVidWdcIikoXCJydGNuaW5qYTpBZGFwdGVyXCIpLHU9ZShcImRlYnVnXCIpKFwicnRjbmluamE6RVJST1I6QWRhcHRlclwiKSxhPW51bGwsYz1udWxsLGg9bnVsbCxkPW51bGwscD1udWxsLGY9bnVsbCxtPW51bGwsZz0hMSxUPSExLF89TnVtYmVyKGkudmVyc2lvbil8fDAsdj0hKGkubW9iaWxlfHxpLnRhYmxldCYmIShpLm1zaWUmJl8+PTEwKSksQz0hMTt1LmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKSxzPW4ud2luZG93fHxuLGw9cy5uYXZpZ2F0b3J8fHt9fSkuY2FsbCh0aGlzLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7Ym93c2VyOjQwLGRlYnVnOjMzfV0sMzc6W2Z1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKGUsdCl7aChcIm5ldyB8IFtwY0NvbmZpZzolbywgcGNDb25zdHJhaW50czolb11cIixlLHQpLHMuY2FsbCh0aGlzLGUpLHRoaXMucGNDb25zdHJhaW50cz10LHRoaXMub3VyTG9jYWxEZXNjcmlwdGlvbj1udWxsLHRoaXMub3VyU2lnbmFsaW5nU3RhdGU9bnVsbCx0aGlzLm91ckljZUNvbm5lY3Rpb25TdGF0ZT1udWxsLHRoaXMub3VySWNlR2F0aGVyaW5nU3RhdGU9bnVsbCx0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dD1udWxsLHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheT1udWxsLHRoaXMuaWdub3JlSWNlR2F0aGVyaW5nPSExLHRoaXMuY2xvc2VkPSExLG8uY2FsbCh0aGlzKSxhLmNhbGwodGhpcyl9ZnVuY3Rpb24gcyhlKXt0aGlzLnBjQ29uZmlnPWMoITAsZSkscC5maXhQZWVyQ29ubmVjdGlvbkNvbmZpZyh0aGlzLnBjQ29uZmlnKSx0aGlzLm9wdGlvbnM9e2ljZVRyYW5zcG9ydHNSZWxheTpcInJlbGF5XCI9PT10aGlzLnBjQ29uZmlnLmljZVRyYW5zcG9ydHMsaWNlVHJhbnNwb3J0c05vbmU6XCJub25lXCI9PT10aGlzLnBjQ29uZmlnLmljZVRyYW5zcG9ydHMsZ2F0aGVyaW5nVGltZW91dDp0aGlzLnBjQ29uZmlnLmdhdGhlcmluZ1RpbWVvdXQsZ2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXk6dGhpcy5wY0NvbmZpZy5nYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheX0sZGVsZXRlIHRoaXMucGNDb25maWcuZ2F0aGVyaW5nVGltZW91dCxkZWxldGUgdGhpcy5wY0NvbmZpZy5nYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSxoKFwic2V0Q29uZmlndXJhdGlvbkFuZE9wdGlvbnMgfCBwcm9jZXNzZWQgcGNDb25maWc6ICVvXCIsdGhpcy5wY0NvbmZpZyl9ZnVuY3Rpb24gbCgpe3JldHVybiB0aGlzLmNsb3NlZHx8dGhpcy5wYyYmXCJjbG9zZWRcIj09PXRoaXMucGMuaWNlQ29ubmVjdGlvblN0YXRlfWZ1bmN0aW9uIGkoKXt2YXIgZT10aGlzLHQ9dGhpcy5wYzt0Lm9ubmVnb3RpYXRpb25uZWVkZWQ9ZnVuY3Rpb24odCl7bC5jYWxsKGUpfHwoaChcIm9ubmVnb3RpYXRpb25uZWVkZWQoKVwiKSxlLm9ubmVnb3RpYXRpb25uZWVkZWQmJmUub25uZWdvdGlhdGlvbm5lZWRlZCh0KSl9LHQub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24odCl7dmFyIG4scixzO2lmKCFsLmNhbGwoZSkmJiFlLmlnbm9yZUljZUdhdGhlcmluZyYmIWUub3B0aW9ucy5pY2VUcmFuc3BvcnRzTm9uZSlpZihuPXQuY2FuZGlkYXRlKXtpZihyPWYuUkVHRVhQX1JFTEFZX0NBTkRJREFURS50ZXN0KG4uY2FuZGlkYXRlKSxlLm9wdGlvbnMuaWNlVHJhbnNwb3J0c1JlbGF5JiYhcilyZXR1cm47ciYmIWUudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSYmXCJudW1iZXJcIj09dHlwZW9mIGUub3B0aW9ucy5nYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSYmKGgoXCJvbmljZWNhbmRpZGF0ZSgpIHwgZmlyc3QgcmVsYXkgY2FuZGlkYXRlIGZvdW5kLCBlbmRpbmcgZ2F0aGVyaW5nIGluICVkIG1zXCIsZS5vcHRpb25zLmdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5KSxcbmUudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bC5jYWxsKGUpfHwoaChcImZvcmNlZCBlbmQgb2YgY2FuZGlkYXRlcyBhZnRlciB0aW1lb3V0XCIpLGRlbGV0ZSBlLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXksY2xlYXJUaW1lb3V0KGUudGltZXJHYXRoZXJpbmdUaW1lb3V0KSxkZWxldGUgZS50aW1lckdhdGhlcmluZ1RpbWVvdXQsZS5pZ25vcmVJY2VHYXRoZXJpbmc9ITAsZS5vbmljZWNhbmRpZGF0ZSYmZS5vbmljZWNhbmRpZGF0ZSh7Y2FuZGlkYXRlOm51bGx9LG51bGwpKX0sZS5vcHRpb25zLmdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5KSkscz1uZXcgcC5SVENJY2VDYW5kaWRhdGUoe3NkcE1pZDpuLnNkcE1pZCxzZHBNTGluZUluZGV4Om4uc2RwTUxpbmVJbmRleCxjYW5kaWRhdGU6bi5jYW5kaWRhdGV9KSxudWxsPT09bS5ub3JtYWxpemVDYW5kaWRhdGUmJihmLlJFR0VYUF9OT1JNQUxJWkVEX0NBTkRJREFURS50ZXN0KG4uY2FuZGlkYXRlKT9tLm5vcm1hbGl6ZUNhbmRpZGF0ZT0hMTooaCgnb25pY2VjYW5kaWRhdGUoKSB8IG5vcm1hbGl6aW5nIElDRSBjYW5kaWRhdGVzIHN5bnRheCAocmVtb3ZlIFwiYT1cIiBhbmQgXCJcXFxcclxcXFxuXCIpJyksbS5ub3JtYWxpemVDYW5kaWRhdGU9ITApKSxtLm5vcm1hbGl6ZUNhbmRpZGF0ZSYmKHMuY2FuZGlkYXRlPW4uY2FuZGlkYXRlLnJlcGxhY2UoZi5SRUdFWFBfRklYX0NBTkRJREFURSxcIlwiKSksaChcIm9uaWNlY2FuZGlkYXRlKCkgfCBtJWQoJXMpICVzXCIscy5zZHBNTGluZUluZGV4LHMuc2RwTWlkfHxcIm5vIG1pZFwiLHMuY2FuZGlkYXRlKSxlLm9uaWNlY2FuZGlkYXRlJiZlLm9uaWNlY2FuZGlkYXRlKHQscyl9ZWxzZSBoKFwib25pY2VjYW5kaWRhdGUoKSB8IGVuZCBvZiBjYW5kaWRhdGVzXCIpLGNsZWFyVGltZW91dChlLnRpbWVyR2F0aGVyaW5nVGltZW91dCksZGVsZXRlIGUudGltZXJHYXRoZXJpbmdUaW1lb3V0LGNsZWFyVGltZW91dChlLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkpLGRlbGV0ZSBlLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXksZS5vbmljZWNhbmRpZGF0ZSYmZS5vbmljZWNhbmRpZGF0ZSh0LG51bGwpfSx0Lm9uYWRkc3RyZWFtPWZ1bmN0aW9uKHQpe2wuY2FsbChlKXx8KGgoXCJvbmFkZHN0cmVhbSgpIHwgc3RyZWFtOiAlb1wiLHQuc3RyZWFtKSxlLm9uYWRkc3RyZWFtJiZlLm9uYWRkc3RyZWFtKHQsdC5zdHJlYW0pKX0sdC5vbnJlbW92ZXN0cmVhbT1mdW5jdGlvbih0KXtsLmNhbGwoZSl8fChoKFwib25yZW1vdmVzdHJlYW0oKSB8IHN0cmVhbTogJW9cIix0LnN0cmVhbSksZS5vbnJlbW92ZXN0cmVhbSYmZS5vbnJlbW92ZXN0cmVhbSh0LHQuc3RyZWFtKSl9LHQub25kYXRhY2hhbm5lbD1mdW5jdGlvbih0KXtsLmNhbGwoZSl8fChoKFwib25kYXRhY2hhbm5lbCgpIHwgZGF0YWNoYW5uZWw6ICVvXCIsdC5jaGFubmVsKSxlLm9uZGF0YWNoYW5uZWwmJmUub25kYXRhY2hhbm5lbCh0LHQuY2hhbm5lbCkpfSx0Lm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2U9ZnVuY3Rpb24obil7dC5zaWduYWxpbmdTdGF0ZSE9PWUub3VyU2lnbmFsaW5nU3RhdGUmJihoKFwib25zaWduYWxpbmdzdGF0ZWNoYW5nZSgpIHwgc2lnbmFsaW5nU3RhdGU6ICVzXCIsdC5zaWduYWxpbmdTdGF0ZSksZS5vdXJTaWduYWxpbmdTdGF0ZT10LnNpZ25hbGluZ1N0YXRlLGUub25zaWduYWxpbmdzdGF0ZWNoYW5nZSYmZS5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlKG4sdC5zaWduYWxpbmdTdGF0ZSkpfSx0Lm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKG4pe3QuaWNlQ29ubmVjdGlvblN0YXRlIT09ZS5vdXJJY2VDb25uZWN0aW9uU3RhdGUmJihoKFwib25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoKSB8IGljZUNvbm5lY3Rpb25TdGF0ZTogJXNcIix0LmljZUNvbm5lY3Rpb25TdGF0ZSksZS5vdXJJY2VDb25uZWN0aW9uU3RhdGU9dC5pY2VDb25uZWN0aW9uU3RhdGUsZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmZS5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZShuLHQuaWNlQ29ubmVjdGlvblN0YXRlKSl9LHQub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZT1mdW5jdGlvbihuKXtsLmNhbGwoZSl8fHQuaWNlR2F0aGVyaW5nU3RhdGUhPT1lLm91ckljZUdhdGhlcmluZ1N0YXRlJiYoaChcIm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UoKSB8IGljZUdhdGhlcmluZ1N0YXRlOiAlc1wiLHQuaWNlR2F0aGVyaW5nU3RhdGUpLGUub3VySWNlR2F0aGVyaW5nU3RhdGU9dC5pY2VHYXRoZXJpbmdTdGF0ZSxlLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2UmJmUub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZShuLHQuaWNlR2F0aGVyaW5nU3RhdGUpKX0sdC5vbmlkZW50aXR5cmVzdWx0PWZ1bmN0aW9uKHQpe2wuY2FsbChlKXx8KGgoXCJvbmlkZW50aXR5cmVzdWx0KClcIiksZS5vbmlkZW50aXR5cmVzdWx0JiZlLm9uaWRlbnRpdHlyZXN1bHQodCkpfSx0Lm9ucGVlcmlkZW50aXR5PWZ1bmN0aW9uKHQpe2wuY2FsbChlKXx8KGgoXCJvbnBlZXJpZGVudGl0eSgpXCIpLGUub25wZWVyaWRlbnRpdHkmJmUub25wZWVyaWRlbnRpdHkodCkpfSx0Lm9uaWRwYXNzZXJ0aW9uZXJyb3I9ZnVuY3Rpb24odCl7bC5jYWxsKGUpfHwoaChcIm9uaWRwYXNzZXJ0aW9uZXJyb3IoKVwiKSxlLm9uaWRwYXNzZXJ0aW9uZXJyb3ImJmUub25pZHBhc3NlcnRpb25lcnJvcih0KSl9LHQub25pZHB2YWxpZGF0aW9uZXJyb3I9ZnVuY3Rpb24odCl7bC5jYWxsKGUpfHwoaChcIm9uaWRwdmFsaWRhdGlvbmVycm9yKClcIiksZS5vbmlkcHZhbGlkYXRpb25lcnJvciYmZS5vbmlkcHZhbGlkYXRpb25lcnJvcih0KSl9fWZ1bmN0aW9uIG8oKXt0aGlzLnBjQ29uc3RyYWludHM/dGhpcy5wYz1uZXcgcC5SVENQZWVyQ29ubmVjdGlvbih0aGlzLnBjQ29uZmlnLHRoaXMucGNDb25zdHJhaW50cyk6dGhpcy5wYz1uZXcgcC5SVENQZWVyQ29ubmVjdGlvbih0aGlzLnBjQ29uZmlnKSxpLmNhbGwodGhpcyl9ZnVuY3Rpb24gdSgpe3ZhciBlPXRoaXMucGMsdD10aGlzLm9wdGlvbnMsbj1udWxsO3JldHVybiBlLmxvY2FsRGVzY3JpcHRpb24/KHQuaWNlVHJhbnNwb3J0c1JlbGF5P249ZS5sb2NhbERlc2NyaXB0aW9uLnNkcC5yZXBsYWNlKGYuUkVHRVhQX1NEUF9OT05fUkVMQVlfQ0FORElEQVRFUyxcIlwiKTp0LmljZVRyYW5zcG9ydHNOb25lJiYobj1lLmxvY2FsRGVzY3JpcHRpb24uc2RwLnJlcGxhY2UoZi5SRUdFWFBfU0RQX0NBTkRJREFURVMsXCJcIikpLHRoaXMub3VyTG9jYWxEZXNjcmlwdGlvbj1uZXcgcC5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6ZS5sb2NhbERlc2NyaXB0aW9uLnR5cGUsc2RwOm58fGUubG9jYWxEZXNjcmlwdGlvbi5zZHB9KSx0aGlzLm91ckxvY2FsRGVzY3JpcHRpb24pOih0aGlzLm91ckxvY2FsRGVzY3JpcHRpb249bnVsbCxudWxsKX1mdW5jdGlvbiBhKCl7dmFyIGU9dGhpcztPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtwZWVyQ29ubmVjdGlvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUucGN9fSxzaWduYWxpbmdTdGF0ZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUucGMuc2lnbmFsaW5nU3RhdGV9fSxpY2VDb25uZWN0aW9uU3RhdGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBlLnBjLmljZUNvbm5lY3Rpb25TdGF0ZX19LGljZUdhdGhlcmluZ1N0YXRlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5wYy5pY2VHYXRoZXJpbmdTdGF0ZX19LGxvY2FsRGVzY3JpcHRpb246e2dldDpmdW5jdGlvbigpe3JldHVybiB1LmNhbGwoZSl9fSxyZW1vdGVEZXNjcmlwdGlvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUucGMucmVtb3RlRGVzY3JpcHRpb259fSxwZWVySWRlbnRpdHk6e2dldDpmdW5jdGlvbigpe3JldHVybiBlLnBjLnBlZXJJZGVudGl0eX19fSl9dC5leHBvcnRzPXI7dmFyIGM9ZShcIm1lcmdlXCIpLGg9ZShcImRlYnVnXCIpKFwicnRjbmluamE6UlRDUGVlckNvbm5lY3Rpb25cIiksZD1lKFwiZGVidWdcIikoXCJydGNuaW5qYTpFUlJPUjpSVENQZWVyQ29ubmVjdGlvblwiKSxwPWUoXCIuL0FkYXB0ZXJcIiksZj17UkVHRVhQX05PUk1BTElaRURfQ0FORElEQVRFOm5ldyBSZWdFeHAoL15jYW5kaWRhdGU6L2kpLFJFR0VYUF9GSVhfQ0FORElEQVRFOm5ldyBSZWdFeHAoLyheYT18XFxyfFxcbikvZ2kpLFJFR0VYUF9SRUxBWV9DQU5ESURBVEU6bmV3IFJlZ0V4cCgvIHJlbGF5IC9pKSxSRUdFWFBfU0RQX0NBTkRJREFURVM6bmV3IFJlZ0V4cCgvXmE9Y2FuZGlkYXRlOi4qXFxyXFxuL2dpbSksUkVHRVhQX1NEUF9OT05fUkVMQVlfQ0FORElEQVRFUzpuZXcgUmVnRXhwKC9eYT1jYW5kaWRhdGU6KC4oPyFyZWxheSApKSpcXHJcXG4vZ2ltKX0sbT17bm9ybWFsaXplQ2FuZGlkYXRlOm51bGx9O2QubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpLHIucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKGUsdCxuKXtoKFwiY3JlYXRlT2ZmZXIoKVwiKTt2YXIgcj10aGlzO3AuZml4UlRDT2ZmZXJPcHRpb25zKG4pLHRoaXMucGMuY3JlYXRlT2ZmZXIoZnVuY3Rpb24odCl7bC5jYWxsKHIpfHwoaChcImNyZWF0ZU9mZmVyKCkgfCBzdWNjZXNzXCIpLGUmJmUodCkpfSxmdW5jdGlvbihlKXtsLmNhbGwocil8fChkKFwiY3JlYXRlT2ZmZXIoKSB8IGVycm9yOlwiLGUpLHQmJnQoZSkpfSxuKX0sci5wcm90b3R5cGUuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKGUsdCxuKXtoKFwiY3JlYXRlQW5zd2VyKClcIik7dmFyIHI9dGhpczt0aGlzLnBjLmNyZWF0ZUFuc3dlcihmdW5jdGlvbih0KXtsLmNhbGwocil8fChoKFwiY3JlYXRlQW5zd2VyKCkgfCBzdWNjZXNzXCIpLGUmJmUodCkpfSxmdW5jdGlvbihlKXtsLmNhbGwocil8fChkKFwiY3JlYXRlQW5zd2VyKCkgfCBlcnJvcjpcIixlKSx0JiZ0KGUpKX0sbil9LHIucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb249ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoKXtcIm51bWJlclwiPT10eXBlb2Ygcy5vcHRpb25zLmdhdGhlcmluZ1RpbWVvdXQmJlwiY29tcGxldGVcIiE9PXMucGMuaWNlR2F0aGVyaW5nU3RhdGUmJihoKFwic2V0TG9jYWxEZXNjcmlwdGlvbigpIHwgZW5kaW5nIGdhdGhlcmluZyBpbiAlZCBtcyAoZ2F0aGVyaW5nVGltZW91dCBvcHRpb24pXCIscy5vcHRpb25zLmdhdGhlcmluZ1RpbWVvdXQpLHMudGltZXJHYXRoZXJpbmdUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtsLmNhbGwocyl8fChoKFwiZm9yY2VkIGVuZCBvZiBjYW5kaWRhdGVzIGFmdGVyIGdhdGhlcmluZ1RpbWVvdXQgdGltZW91dFwiKSxkZWxldGUgcy50aW1lckdhdGhlcmluZ1RpbWVvdXQsY2xlYXJUaW1lb3V0KHMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSksZGVsZXRlIHMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSxzLmlnbm9yZUljZUdhdGhlcmluZz0hMCxzLm9uaWNlY2FuZGlkYXRlJiZzLm9uaWNlY2FuZGlkYXRlKHtjYW5kaWRhdGU6bnVsbH0sbnVsbCkpfSxzLm9wdGlvbnMuZ2F0aGVyaW5nVGltZW91dCkpfWgoXCJzZXRMb2NhbERlc2NyaXB0aW9uKClcIik7dmFyIHM9dGhpczt0aGlzLnBjLnNldExvY2FsRGVzY3JpcHRpb24oZSxmdW5jdGlvbigpe2wuY2FsbChzKXx8KGgoXCJzZXRMb2NhbERlc2NyaXB0aW9uKCkgfCBzdWNjZXNzXCIpLGNsZWFyVGltZW91dChzLnRpbWVyR2F0aGVyaW5nVGltZW91dCksZGVsZXRlIHMudGltZXJHYXRoZXJpbmdUaW1lb3V0LGNsZWFyVGltZW91dChzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkpLGRlbGV0ZSBzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkscigpLHQmJnQoKSl9LGZ1bmN0aW9uKGUpe2wuY2FsbChzKXx8KGQoXCJzZXRMb2NhbERlc2NyaXB0aW9uKCkgfCBlcnJvcjpcIixlKSxuJiZuKGUpKX0pLHRoaXMuaWdub3JlSWNlR2F0aGVyaW5nPSExfSxyLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbihlLHQsbil7aChcInNldFJlbW90ZURlc2NyaXB0aW9uKClcIik7dmFyIHI9dGhpczt0aGlzLnBjLnNldFJlbW90ZURlc2NyaXB0aW9uKGUsZnVuY3Rpb24oKXtsLmNhbGwocil8fChoKFwic2V0UmVtb3RlRGVzY3JpcHRpb24oKSB8IHN1Y2Nlc3NcIiksdCYmdCgpKX0sZnVuY3Rpb24oZSl7bC5jYWxsKHIpfHwoZChcInNldFJlbW90ZURlc2NyaXB0aW9uKCkgfCBlcnJvcjpcIixlKSxuJiZuKGUpKX0pfSxyLnByb3RvdHlwZS51cGRhdGVJY2U9ZnVuY3Rpb24oZSl7aChcInVwZGF0ZUljZSgpIHwgcGNDb25maWc6ICVvXCIsZSkscy5jYWxsKHRoaXMsZSksdGhpcy5wYy51cGRhdGVJY2UodGhpcy5wY0NvbmZpZyksdGhpcy5pZ25vcmVJY2VHYXRoZXJpbmc9ITF9LHIucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbihlLHQsbil7aChcImFkZEljZUNhbmRpZGF0ZSgpIHwgY2FuZGlkYXRlOiAlb1wiLGUpO3ZhciByPXRoaXM7dGhpcy5wYy5hZGRJY2VDYW5kaWRhdGUoZSxmdW5jdGlvbigpe2wuY2FsbChyKXx8KGgoXCJhZGRJY2VDYW5kaWRhdGUoKSB8IHN1Y2Nlc3NcIiksdCYmdCgpKX0sZnVuY3Rpb24oZSl7bC5jYWxsKHIpfHwoZChcImFkZEljZUNhbmRpZGF0ZSgpIHwgZXJyb3I6XCIsZSksbiYmbihlKSl9KX0sci5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiBoKFwiZ2V0Q29uZmlndXJhdGlvbigpXCIpLHRoaXMucGMuZ2V0Q29uZmlndXJhdGlvbigpfSxyLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gaChcImdldExvY2FsU3RyZWFtcygpXCIpLHRoaXMucGMuZ2V0TG9jYWxTdHJlYW1zKCl9LHIucHJvdG90eXBlLmdldFJlbW90ZVN0cmVhbXM9ZnVuY3Rpb24oKXtyZXR1cm4gaChcImdldFJlbW90ZVN0cmVhbXMoKVwiKSx0aGlzLnBjLmdldFJlbW90ZVN0cmVhbXMoKX0sci5wcm90b3R5cGUuZ2V0U3RyZWFtQnlJZD1mdW5jdGlvbihlKXtyZXR1cm4gaChcImdldFN0cmVhbUJ5SWQoKSB8IHN0cmVhbUlkOiAlc1wiLGUpLHRoaXMucGMuZ2V0U3RyZWFtQnlJZChlKX0sci5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe2goXCJhZGRTdHJlYW0oKSB8IHN0cmVhbTogJXNcIixlKSx0aGlzLnBjLmFkZFN0cmVhbShlKX0sci5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe2goXCJyZW1vdmVTdHJlYW0oKSB8IHN0cmVhbTogJW9cIixlKSx0aGlzLnBjLnJlbW92ZVN0cmVhbShlKX0sci5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtoKFwiY2xvc2UoKVwiKSx0aGlzLmNsb3NlZD0hMCxjbGVhclRpbWVvdXQodGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXQpLGRlbGV0ZSB0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dCxjbGVhclRpbWVvdXQodGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5KSxkZWxldGUgdGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5LHRoaXMucGMuY2xvc2UoKX0sci5wcm90b3R5cGUuY3JlYXRlRGF0YUNoYW5uZWw9ZnVuY3Rpb24oKXtyZXR1cm4gaChcImNyZWF0ZURhdGFDaGFubmVsKClcIiksdGhpcy5wYy5jcmVhdGVEYXRhQ2hhbm5lbC5hcHBseSh0aGlzLnBjLGFyZ3VtZW50cyl9LHIucHJvdG90eXBlLmNyZWF0ZURUTUZTZW5kZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGgoXCJjcmVhdGVEVE1GU2VuZGVyKClcIiksdGhpcy5wYy5jcmVhdGVEVE1GU2VuZGVyKGUpfSxyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3JldHVybiBoKFwiZ2V0U3RhdHMoKVwiKSx0aGlzLnBjLmdldFN0YXRzLmFwcGx5KHRoaXMucGMsYXJndW1lbnRzKX0sci5wcm90b3R5cGUuc2V0SWRlbnRpdHlQcm92aWRlcj1mdW5jdGlvbigpe3JldHVybiBoKFwic2V0SWRlbnRpdHlQcm92aWRlcigpXCIpLHRoaXMucGMuc2V0SWRlbnRpdHlQcm92aWRlci5hcHBseSh0aGlzLnBjLGFyZ3VtZW50cyl9LHIucHJvdG90eXBlLmdldElkZW50aXR5QXNzZXJ0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGgoXCJnZXRJZGVudGl0eUFzc2VydGlvbigpXCIpLHRoaXMucGMuZ2V0SWRlbnRpdHlBc3NlcnRpb24oKX0sci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oZSl7aChcInJlc2V0KCkgfCBwY0NvbmZpZzogJW9cIixlKTt2YXIgdD10aGlzLnBjO3Qub25uZWdvdGlhdGlvbm5lZWRlZD1udWxsLHQub25pY2VjYW5kaWRhdGU9bnVsbCx0Lm9uYWRkc3RyZWFtPW51bGwsdC5vbnJlbW92ZXN0cmVhbT1udWxsLHQub25kYXRhY2hhbm5lbD1udWxsLHQub25zaWduYWxpbmdzdGF0ZWNoYW5nZT1udWxsLHQub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9bnVsbCx0Lm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2U9bnVsbCx0Lm9uaWRlbnRpdHlyZXN1bHQ9bnVsbCx0Lm9ucGVlcmlkZW50aXR5PW51bGwsdC5vbmlkcGFzc2VydGlvbmVycm9yPW51bGwsdC5vbmlkcHZhbGlkYXRpb25lcnJvcj1udWxsLGNsZWFyVGltZW91dCh0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dCksZGVsZXRlIHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0LGNsZWFyVGltZW91dCh0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkpLGRlbGV0ZSB0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXksaChcInJlc2V0KCkgfCBjbG9zaW5nIGN1cnJlbnQgcGVlckNvbm5lY3Rpb25cIiksdC5jbG9zZSgpLHMuY2FsbCh0aGlzLGUpLG8uY2FsbCh0aGlzKX19LHtcIi4vQWRhcHRlclwiOjM2LGRlYnVnOjMzLG1lcmdlOjQxfV0sMzg6W2Z1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiByKGUpe3ZhciB0PXUoZXx8e30pO3JldHVybiBjPSEwLHIuUlRDUGVlckNvbm5lY3Rpb249YSxyLmdldFVzZXJNZWRpYT10LmdldFVzZXJNZWRpYSxyLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj10LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbixyLlJUQ0ljZUNhbmRpZGF0ZT10LlJUQ0ljZUNhbmRpZGF0ZSxyLk1lZGlhU3RyZWFtVHJhY2s9dC5NZWRpYVN0cmVhbVRyYWNrLHIuZ2V0TWVkaWFEZXZpY2VzPXQuZ2V0TWVkaWFEZXZpY2VzLHIuYXR0YWNoTWVkaWFTdHJlYW09dC5hdHRhY2hNZWRpYVN0cmVhbSxyLmNsb3NlTWVkaWFTdHJlYW09dC5jbG9zZU1lZGlhU3RyZWFtLHIuY2FuUmVuZWdvdGlhdGU9dC5jYW5SZW5lZ290aWF0ZSx0Lmhhc1dlYlJUQygpPyhsKFwiV2ViUlRDIHN1cHBvcnRlZFwiKSwhMCk6KGkoXCJXZWJSVEMgbm90IHN1cHBvcnRlZFwiKSwhMSl9dC5leHBvcnRzPXI7dmFyIHM9ZShcImJvd3NlclwiKSxsPWUoXCJkZWJ1Z1wiKShcInJ0Y25pbmphXCIpLGk9ZShcImRlYnVnXCIpKFwicnRjbmluamE6RVJST1JcIiksbz1lKFwiLi92ZXJzaW9uXCIpLHU9ZShcIi4vQWRhcHRlclwiKSxhPWUoXCIuL1JUQ1BlZXJDb25uZWN0aW9uXCIpLGM9ITE7aS5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSksbChcInZlcnNpb24gJXNcIixvKSxsKFwiZGV0ZWN0ZWQgYnJvd3NlcjogJXMgJXMgW21vYmlsZTolcywgdGFibGV0OiVzLCBhbmRyb2lkOiVzLCBpb3M6JXNdXCIscy5uYW1lLHMudmVyc2lvbiwhIXMubW9iaWxlLCEhcy50YWJsZXQsISFzLmFuZHJvaWQsISFzLmlvcyksci5oYXNXZWJSVEM9ZnVuY3Rpb24oKXtyZXR1cm4gY3x8cigpLHUuaGFzV2ViUlRDKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwidmVyc2lvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gb319KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcImNhbGxlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY319KSxyLmRlYnVnPWUoXCJkZWJ1Z1wiKSxyLmJyb3dzZXI9c30se1wiLi9BZGFwdGVyXCI6MzYsXCIuL1JUQ1BlZXJDb25uZWN0aW9uXCI6MzcsXCIuL3ZlcnNpb25cIjozOSxib3dzZXI6NDAsZGVidWc6MzN9XSwzOTpbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3QuZXhwb3J0cz1lKFwiLi4vcGFja2FnZS5qc29uXCIpLnZlcnNpb259LHtcIi4uL3BhY2thZ2UuanNvblwiOjQyfV0sNDA6W2Z1bmN0aW9uKHQsbixyKXshZnVuY3Rpb24odCxyKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgbiYmbi5leHBvcnRzP24uZXhwb3J0cz1yKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmZS5hbWQ/ZShyKTp0aGlzW3RdPXIoKX0oXCJib3dzZXJcIixmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7ZnVuY3Rpb24gbih0KXt2YXIgbj1lLm1hdGNoKHQpO3JldHVybiBuJiZuLmxlbmd0aD4xJiZuWzFdfHxcIlwifWZ1bmN0aW9uIHIodCl7dmFyIG49ZS5tYXRjaCh0KTtyZXR1cm4gbiYmbi5sZW5ndGg+MSYmblsyXXx8XCJcIn12YXIgcyxsPW4oLyhpcG9kfGlwaG9uZXxpcGFkKS9pKS50b0xvd2VyQ2FzZSgpLGk9L2xpa2UgYW5kcm9pZC9pLnRlc3QoZSksbz0haSYmL2FuZHJvaWQvaS50ZXN0KGUpLHU9L25leHVzXFxzKlswLTZdXFxzKi9pLnRlc3QoZSksYT0hdSYmL25leHVzXFxzKlswLTldKy9pLnRlc3QoZSksYz0vQ3JPUy8udGVzdChlKSxoPS9zaWxrL2kudGVzdChlKSxkPS9zYWlsZmlzaC9pLnRlc3QoZSkscD0vdGl6ZW4vaS50ZXN0KGUpLGY9Lyh3ZWJ8aHB3KW9zL2kudGVzdChlKSxtPS93aW5kb3dzIHBob25lL2kudGVzdChlKSxnPSFtJiYvd2luZG93cy9pLnRlc3QoZSksVD0hbCYmIWgmJi9tYWNpbnRvc2gvaS50ZXN0KGUpLF89IW8mJiFkJiYhcCYmIWYmJi9saW51eC9pLnRlc3QoZSksdj1uKC9lZGdlXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSxDPW4oL3ZlcnNpb25cXC8oXFxkKyhcXC5cXGQrKT8pL2kpLFM9L3RhYmxldC9pLnRlc3QoZSksRT0hUyYmL1teLV1tb2JpL2kudGVzdChlKSxBPS94Ym94L2kudGVzdChlKTsvb3BlcmF8b3ByfG9waW9zL2kudGVzdChlKT9zPXtuYW1lOlwiT3BlcmFcIixvcGVyYTp0LHZlcnNpb246Q3x8bigvKD86b3BlcmF8b3ByfG9waW9zKVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKX06L2NvYXN0L2kudGVzdChlKT9zPXtuYW1lOlwiT3BlcmEgQ29hc3RcIixjb2FzdDp0LHZlcnNpb246Q3x8bigvKD86Y29hc3QpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpfToveWFicm93c2VyL2kudGVzdChlKT9zPXtuYW1lOlwiWWFuZGV4IEJyb3dzZXJcIix5YW5kZXhicm93c2VyOnQsdmVyc2lvbjpDfHxuKC8oPzp5YWJyb3dzZXIpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpfTovdWNicm93c2VyL2kudGVzdChlKT9zPXtuYW1lOlwiVUMgQnJvd3NlclwiLHVjYnJvd3Nlcjp0LHZlcnNpb246bigvKD86dWNicm93c2VyKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpfTovbXhpb3MvaS50ZXN0KGUpP3M9e25hbWU6XCJNYXh0aG9uXCIsbWF4dGhvbjp0LHZlcnNpb246bigvKD86bXhpb3MpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSl9Oi9lcGlwaGFueS9pLnRlc3QoZSk/cz17bmFtZTpcIkVwaXBoYW55XCIsZXBpcGhhbnk6dCx2ZXJzaW9uOm4oLyg/OmVwaXBoYW55KVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpfTovcHVmZmluL2kudGVzdChlKT9zPXtuYW1lOlwiUHVmZmluXCIscHVmZmluOnQsdmVyc2lvbjpuKC8oPzpwdWZmaW4pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspPykvaSl9Oi9zbGVpcG5pci9pLnRlc3QoZSk/cz17bmFtZTpcIlNsZWlwbmlyXCIsc2xlaXBuaXI6dCx2ZXJzaW9uOm4oLyg/OnNsZWlwbmlyKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpfTovay1tZWxlb24vaS50ZXN0KGUpP3M9e25hbWU6XCJLLU1lbGVvblwiLGtNZWxlb246dCx2ZXJzaW9uOm4oLyg/OmstbWVsZW9uKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpfTptPyhzPXtuYW1lOlwiV2luZG93cyBQaG9uZVwiLHdpbmRvd3NwaG9uZTp0fSx2PyhzLm1zZWRnZT10LHMudmVyc2lvbj12KToocy5tc2llPXQscy52ZXJzaW9uPW4oL2llbW9iaWxlXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSkpOi9tc2llfHRyaWRlbnQvaS50ZXN0KGUpP3M9e25hbWU6XCJJbnRlcm5ldCBFeHBsb3JlclwiLG1zaWU6dCx2ZXJzaW9uOm4oLyg/Om1zaWUgfHJ2OikoXFxkKyhcXC5cXGQrKT8pL2kpfTpjP3M9e25hbWU6XCJDaHJvbWVcIixjaHJvbWVvczp0LGNocm9tZUJvb2s6dCxjaHJvbWU6dCx2ZXJzaW9uOm4oLyg/OmNocm9tZXxjcmlvc3xjcm1vKVxcLyhcXGQrKFxcLlxcZCspPykvaSl9Oi9jaHJvbWUuKz8gZWRnZS9pLnRlc3QoZSk/cz17bmFtZTpcIk1pY3Jvc29mdCBFZGdlXCIsbXNlZGdlOnQsdmVyc2lvbjp2fTovdml2YWxkaS9pLnRlc3QoZSk/cz17bmFtZTpcIlZpdmFsZGlcIix2aXZhbGRpOnQsdmVyc2lvbjpuKC92aXZhbGRpXFwvKFxcZCsoXFwuXFxkKyk/KS9pKXx8Q306ZD9zPXtuYW1lOlwiU2FpbGZpc2hcIixzYWlsZmlzaDp0LHZlcnNpb246bigvc2FpbGZpc2hcXHM/YnJvd3NlclxcLyhcXGQrKFxcLlxcZCspPykvaSl9Oi9zZWFtb25rZXlcXC8vaS50ZXN0KGUpP3M9e25hbWU6XCJTZWFNb25rZXlcIixzZWFtb25rZXk6dCx2ZXJzaW9uOm4oL3NlYW1vbmtleVxcLyhcXGQrKFxcLlxcZCspPykvaSl9Oi9maXJlZm94fGljZXdlYXNlbHxmeGlvcy9pLnRlc3QoZSk/KHM9e25hbWU6XCJGaXJlZm94XCIsZmlyZWZveDp0LHZlcnNpb246bigvKD86ZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MpWyBcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKX0sL1xcKChtb2JpbGV8dGFibGV0KTtbXlxcKV0qcnY6W1xcZFxcLl0rXFwpL2kudGVzdChlKSYmKHMuZmlyZWZveG9zPXQpKTpoP3M9e25hbWU6XCJBbWF6b24gU2lsa1wiLHNpbGs6dCx2ZXJzaW9uOm4oL3NpbGtcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTovcGhhbnRvbS9pLnRlc3QoZSk/cz17bmFtZTpcIlBoYW50b21KU1wiLHBoYW50b206dCx2ZXJzaW9uOm4oL3BoYW50b21qc1xcLyhcXGQrKFxcLlxcZCspPykvaSl9Oi9zbGltZXJqcy9pLnRlc3QoZSk/cz17bmFtZTpcIlNsaW1lckpTXCIsc2xpbWVyOnQsdmVyc2lvbjpuKC9zbGltZXJqc1xcLyhcXGQrKFxcLlxcZCspPykvaSl9Oi9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLnRlc3QoZSl8fC9yaW1cXHN0YWJsZXQvaS50ZXN0KGUpP3M9e25hbWU6XCJCbGFja0JlcnJ5XCIsYmxhY2tiZXJyeTp0LHZlcnNpb246Q3x8bigvYmxhY2tiZXJyeVtcXGRdK1xcLyhcXGQrKFxcLlxcZCspPykvaSl9OmY/KHM9e25hbWU6XCJXZWJPU1wiLHdlYm9zOnQsdmVyc2lvbjpDfHxuKC93KD86ZWIpP29zYnJvd3NlclxcLyhcXGQrKFxcLlxcZCspPykvaSl9LC90b3VjaHBhZFxcLy9pLnRlc3QoZSkmJihzLnRvdWNocGFkPXQpKTovYmFkYS9pLnRlc3QoZSk/cz17bmFtZTpcIkJhZGFcIixiYWRhOnQsdmVyc2lvbjpuKC9kb2xmaW5cXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTpwP3M9e25hbWU6XCJUaXplblwiLHRpemVuOnQsdmVyc2lvbjpuKC8oPzp0aXplblxccz8pP2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfHxDfTovcXVwemlsbGEvaS50ZXN0KGUpP3M9e25hbWU6XCJRdXBaaWxsYVwiLHF1cHppbGxhOnQsdmVyc2lvbjpuKC8oPzpxdXB6aWxsYSlbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKXx8Q306L2Nocm9taXVtL2kudGVzdChlKT9zPXtuYW1lOlwiQ2hyb21pdW1cIixjaHJvbWl1bTp0LHZlcnNpb246bigvKD86Y2hyb21pdW0pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspPykvaSl8fEN9Oi9jaHJvbWV8Y3Jpb3N8Y3Jtby9pLnRlc3QoZSk/cz17bmFtZTpcIkNocm9tZVwiLGNocm9tZTp0LHZlcnNpb246bigvKD86Y2hyb21lfGNyaW9zfGNybW8pXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06bz9zPXtuYW1lOlwiQW5kcm9pZFwiLHZlcnNpb246Q306L3NhZmFyaXxhcHBsZXdlYmtpdC9pLnRlc3QoZSk/KHM9e25hbWU6XCJTYWZhcmlcIixzYWZhcmk6dH0sQyYmKHMudmVyc2lvbj1DKSk6bD8ocz17bmFtZTpcImlwaG9uZVwiPT1sP1wiaVBob25lXCI6XCJpcGFkXCI9PWw/XCJpUGFkXCI6XCJpUG9kXCJ9LEMmJihzLnZlcnNpb249QykpOnM9L2dvb2dsZWJvdC9pLnRlc3QoZSk/e25hbWU6XCJHb29nbGVib3RcIixnb29nbGVib3Q6dCx2ZXJzaW9uOm4oL2dvb2dsZWJvdFxcLyhcXGQrKFxcLlxcZCspKS9pKXx8Q306e25hbWU6bigvXiguKilcXC8oLiopIC8pLHZlcnNpb246cigvXiguKilcXC8oLiopIC8pfSwhcy5tc2VkZ2UmJi8oYXBwbGUpP3dlYmtpdC9pLnRlc3QoZSk/KC8oYXBwbGUpP3dlYmtpdFxcLzUzN1xcLjM2L2kudGVzdChlKT8ocy5uYW1lPXMubmFtZXx8XCJCbGlua1wiLHMuYmxpbms9dCk6KHMubmFtZT1zLm5hbWV8fFwiV2Via2l0XCIscy53ZWJraXQ9dCksIXMudmVyc2lvbiYmQyYmKHMudmVyc2lvbj1DKSk6IXMub3BlcmEmJi9nZWNrb1xcLy9pLnRlc3QoZSkmJihzLm5hbWU9cy5uYW1lfHxcIkdlY2tvXCIscy5nZWNrbz10LHMudmVyc2lvbj1zLnZlcnNpb258fG4oL2dlY2tvXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSkscy5tc2VkZ2V8fCFvJiYhcy5zaWxrP2w/KHNbbF09dCxzLmlvcz10KTpUP3MubWFjPXQ6QT9zLnhib3g9dDpnP3Mud2luZG93cz10Ol8mJihzLmxpbnV4PXQpOnMuYW5kcm9pZD10O3ZhciB5PVwiXCI7cy53aW5kb3dzcGhvbmU/eT1uKC93aW5kb3dzIHBob25lICg/Om9zKT9cXHM/KFxcZCsoXFwuXFxkKykqKS9pKTpsPyh5PW4oL29zIChcXGQrKFtfXFxzXVxcZCspKikgbGlrZSBtYWMgb3MgeC9pKSx5PXkucmVwbGFjZSgvW19cXHNdL2csXCIuXCIpKTpvP3k9bigvYW5kcm9pZFsgXFwvLV0oXFxkKyhcXC5cXGQrKSopL2kpOnMud2Vib3M/eT1uKC8oPzp3ZWJ8aHB3KW9zXFwvKFxcZCsoXFwuXFxkKykqKS9pKTpzLmJsYWNrYmVycnk/eT1uKC9yaW1cXHN0YWJsZXRcXHNvc1xccyhcXGQrKFxcLlxcZCspKikvaSk6cy5iYWRhP3k9bigvYmFkYVxcLyhcXGQrKFxcLlxcZCspKikvaSk6cy50aXplbiYmKHk9bigvdGl6ZW5bXFwvXFxzXShcXGQrKFxcLlxcZCspKikvaSkpLHkmJihzLm9zdmVyc2lvbj15KTt2YXIgUj15LnNwbGl0KFwiLlwiKVswXTtyZXR1cm4gU3x8YXx8XCJpcGFkXCI9PWx8fG8mJigzPT1SfHxSPj00JiYhRSl8fHMuc2lsaz9zLnRhYmxldD10OihFfHxcImlwaG9uZVwiPT1sfHxcImlwb2RcIj09bHx8b3x8dXx8cy5ibGFja2JlcnJ5fHxzLndlYm9zfHxzLmJhZGEpJiYocy5tb2JpbGU9dCkscy5tc2VkZ2V8fHMubXNpZSYmcy52ZXJzaW9uPj0xMHx8cy55YW5kZXhicm93c2VyJiZzLnZlcnNpb24+PTE1fHxzLnZpdmFsZGkmJnMudmVyc2lvbj49MXx8cy5jaHJvbWUmJnMudmVyc2lvbj49MjB8fHMuZmlyZWZveCYmcy52ZXJzaW9uPj0yMHx8cy5zYWZhcmkmJnMudmVyc2lvbj49Nnx8cy5vcGVyYSYmcy52ZXJzaW9uPj0xMHx8cy5pb3MmJnMub3N2ZXJzaW9uJiZzLm9zdmVyc2lvbi5zcGxpdChcIi5cIilbMF0+PTZ8fHMuYmxhY2tiZXJyeSYmcy52ZXJzaW9uPj0xMC4xP3MuYT10OnMubXNpZSYmcy52ZXJzaW9uPDEwfHxzLmNocm9tZSYmcy52ZXJzaW9uPDIwfHxzLmZpcmVmb3gmJnMudmVyc2lvbjwyMHx8cy5zYWZhcmkmJnMudmVyc2lvbjw2fHxzLm9wZXJhJiZzLnZlcnNpb248MTB8fHMuaW9zJiZzLm9zdmVyc2lvbiYmcy5vc3ZlcnNpb24uc3BsaXQoXCIuXCIpWzBdPDY/cy5jPXQ6cy54PXQsc312YXIgdD0hMCxuPWUoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvcj9uYXZpZ2F0b3IudXNlckFnZW50OlwiXCIpO3JldHVybiBuLnRlc3Q9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDsrK3Qpe3ZhciByPWVbdF07aWYoXCJzdHJpbmdcIj09dHlwZW9mIHImJnIgaW4gbilyZXR1cm4hMH1yZXR1cm4hMX0sbi5fZGV0ZWN0PWUsbn0pfSx7fV0sNDE6W2Z1bmN0aW9uKGUsdCxuKXshZnVuY3Rpb24oZSl7ZnVuY3Rpb24gbihlLHQpe2lmKFwib2JqZWN0XCIhPT1zKGUpKXJldHVybiB0O2Zvcih2YXIgciBpbiB0KVwib2JqZWN0XCI9PT1zKGVbcl0pJiZcIm9iamVjdFwiPT09cyh0W3JdKT9lW3JdPW4oZVtyXSx0W3JdKTplW3JdPXRbcl07cmV0dXJuIGV9ZnVuY3Rpb24gcihlLHQscil7dmFyIGk9clswXSxvPXIubGVuZ3RoOyhlfHxcIm9iamVjdFwiIT09cyhpKSkmJihpPXt9KTtmb3IodmFyIHU9MDtvPnU7Kyt1KXt2YXIgYT1yW3VdLGM9cyhhKTtpZihcIm9iamVjdFwiPT09Yylmb3IodmFyIGggaW4gYSl7dmFyIGQ9ZT9sLmNsb25lKGFbaF0pOmFbaF07dD9pW2hdPW4oaVtoXSxkKTppW2hdPWR9fXJldHVybiBpfWZ1bmN0aW9uIHMoZSl7cmV0dXJue30udG9TdHJpbmcuY2FsbChlKS5zbGljZSg4LC0xKS50b0xvd2VyQ2FzZSgpfXZhciBsPWZ1bmN0aW9uKGUpe3JldHVybiByKGU9PT0hMCwhMSxhcmd1bWVudHMpfSxpPVwibWVyZ2VcIjtsLnJlY3Vyc2l2ZT1mdW5jdGlvbihlKXtyZXR1cm4gcihlPT09ITAsITAsYXJndW1lbnRzKX0sbC5jbG9uZT1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZSxpPXMoZSk7aWYoXCJhcnJheVwiPT09aSlmb3Iocj1bXSxuPWUubGVuZ3RoLHQ9MDtuPnQ7Kyt0KXJbdF09bC5jbG9uZShlW3RdKTtlbHNlIGlmKFwib2JqZWN0XCI9PT1pKXtyPXt9O2Zvcih0IGluIGUpclt0XT1sLmNsb25lKGVbdF0pfXJldHVybiByfSxlP3QuZXhwb3J0cz1sOndpbmRvd1tpXT1sfShcIm9iamVjdFwiPT10eXBlb2YgdCYmdCYmXCJvYmplY3RcIj09dHlwZW9mIHQuZXhwb3J0cyYmdC5leHBvcnRzKX0se31dLDQyOltmdW5jdGlvbihlLHQsbil7dC5leHBvcnRzPXtuYW1lOlwicnRjbmluamFcIix2ZXJzaW9uOlwiMC42LjdcIixkZXNjcmlwdGlvbjpcIldlYlJUQyBBUEkgd3JhcHBlciB0byBkZWFsIHdpdGggZGlmZmVyZW50IGJyb3dzZXJzXCIsYXV0aG9yOntuYW1lOlwiScOxYWtpIEJheiBDYXN0aWxsb1wiLGVtYWlsOlwiaW5ha2kuYmF6QGVmYWNlMmZhY2UuY29tXCIsdXJsOlwiaHR0cDovL2VmYWNlMmZhY2UuY29tXCJ9LGNvbnRyaWJ1dG9yczpbe25hbWU6XCJKZXPDunMgUMOpcmV6XCIsZW1haWw6XCJqZXN1cy5wZXJlekBlZmFjZTJmYWNlLmNvbVwifV0sbGljZW5zZTpcIk1JVFwiLG1haW46XCJsaWIvcnRjbmluamEuanNcIixob21lcGFnZTpcImh0dHBzOi8vZ2l0aHViLmNvbS9lZmFjZTJmYWNlL3J0Y25pbmphLmpzXCIscmVwb3NpdG9yeTp7dHlwZTpcImdpdFwiLHVybDpcImdpdCtodHRwczovL2dpdGh1Yi5jb20vZWZhY2UyZmFjZS9ydGNuaW5qYS5qcy5naXRcIn0sa2V5d29yZHM6W1wid2VicnRjXCJdLGVuZ2luZXM6e25vZGU6XCI+PTAuMTAuMzJcIn0sZGVwZW5kZW5jaWVzOntib3dzZXI6XCJeMS4yLjBcIixkZWJ1ZzpcIl4yLjIuMFwiLG1lcmdlOlwiXjEuMi4wXCJ9LGRldkRlcGVuZGVuY2llczp7YnJvd3NlcmlmeTpcIl4xMy4wLjFcIixndWxwOlwiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9ndWxwanMvZ3VscC5naXQjNC4wXCIsXCJndWxwLWV4cGVjdC1maWxlXCI6XCIwLjAuN1wiLFwiZ3VscC1maWxlbG9nXCI6XCJeMC40LjFcIixcImd1bHAtaGVhZGVyXCI6XCJeMS44LjJcIixcImd1bHAtanNjc1wiOlwiXjMuMC4yXCIsXCJndWxwLWpzY3Mtc3R5bGlzaFwiOlwiXjEuNC4wXCIsXCJndWxwLWpzaGludFwiOlwiXjIuMC4xXCIsXCJndWxwLXJlbmFtZVwiOlwiXjEuMi4yXCIsXCJndWxwLXVnbGlmeVwiOlwiXjEuNS4zXCIsXCJqc2hpbnQtc3R5bGlzaFwiOlwiXjIuMi4wXCIsXCJ2aW55bC1zb3VyY2Utc3RyZWFtXCI6XCJeMS4xLjBcIn0scmVhZG1lOicjIHJ0Y25pbmphLmpzIDxpbWcgc3JjPVwiaHR0cDovL3d3dy5wdWJudWIuY29tL2Jsb2cvd3AtY29udGVudC91cGxvYWRzLzIwMTQvMDEvZ29vZ2xlLXdlYnJ0Yy1sb2dvLnBuZ1wiIGhlaWdodD1cIjMwXCIgd2lkdGg9XCIzMFwiPlxcblxcbldlYlJUQyBBUEkgd3JhcHBlciB0byBkZWFsIHdpdGggZGlmZmVyZW50IGJyb3dzZXJzIHRyYW5zcGFyZW50bHksIFtldmVudHVhbGx5XShodHRwOi8vaXN3ZWJydGNyZWFkeXlldC5jb20vKSB0aGlzIGxpYnJhcnkgc2hvdWxkblxcJ3QgYmUgbmVlZGVkLiBXZSBvbmx5IGhhdmUgdG8gd2FpdCB1bnRpbCBXM0MgZ3JvdXAgaW4gY2hhcmdlIFtmaW5pc2hlcyB0aGUgc3BlY2lmaWNhdGlvbl0oaHR0cHM6Ly90b29scy5pZXRmLm9yZy93Zy9ydGN3ZWIvKSBhbmQgdGhlIGRpZmZlcmVudCBicm93c2VycyBpbXBsZW1lbnQgaXQgY29ycmVjdGx5IDpzd2VhdF9zbWlsZTouXFxuXFxuPGltZyBzcmM9XCJodHRwOi8vaW1hZ2VzNC5mYW5wb3AuY29tL2ltYWdlL3Bob3Rvcy8yMTgwMDAwMC9icm93c2VyLWZpZ2h0LWdvb2dsZS1jaHJvbWUtMjE4NjU0NTQtNjAwLTUzMS5qcGdcIiBoZWlnaHQ9XCIyNTBcIiB3aWR0aD1cIjI1MFwiPlxcblxcblN1cHBvcnRlZCBlbnZpcm9ubWVudHM6XFxuKiBbR29vZ2xlIENocm9tZV0oaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9jaHJvbWUvYnJvd3Nlci9kZXNrdG9wL2luZGV4Lmh0bWwpIChkZXNrdG9wICYgbW9iaWxlKVxcbiogW0dvb2dsZSBDYW5hcnldKGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vY2hyb21lL2Jyb3dzZXIvY2FuYXJ5Lmh0bWwpIChkZXNrdG9wICYgbW9iaWxlKVxcbiogW01vemlsbGEgRmlyZWZveF0oaHR0cHM6Ly93d3cubW96aWxsYS5vcmcvZW4tR0IvZmlyZWZveC9uZXcpIChkZXNrdG9wICYgbW9iaWxlKVxcbiogW0ZpcmVmb3ggTmlndGhseV0oaHR0cHM6Ly9uaWdodGx5Lm1vemlsbGEub3JnLykgKGRlc2t0b3AgJiBtb2JpbGUpXFxuKiBbT3BlcmFdKGh0dHA6Ly93d3cub3BlcmEuY29tLylcXG4qIFtWaXZhbGRpXShodHRwczovL3ZpdmFsZGkuY29tLylcXG4qIFtDcm9zc1dhbGtdKGh0dHBzOi8vY3Jvc3N3YWxrLXByb2plY3Qub3JnLylcXG4qIFtDb3Jkb3ZhXShodHRwOi8vY29yZG92YS5hcGFjaGUub3JnLyk6IGlPUyBzdXBwb3J0LCB5b3Ugb25seSBoYXZlIHRvIHVzZSBvdXIgcGx1Z2luIFtmb2xsb3dpbmcgdGhlc2Ugc3RlcHNdKGh0dHBzOi8vZ2l0aHViLmNvbS9lZmFjZTJmYWNlL2NvcmRvdmEtcGx1Z2luLWlvc3J0YyN1c2FnZSkuXFxuKiBbTlcuanNdKGh0dHBzOi8vZ2l0aHViLmNvbS9ud2pzL253LmpzLylcXG4qIFtFbGVjdHJvbl0oaHR0cHM6Ly9naXRodWIuY29tL2F0b20vZWxlY3Ryb24pXFxuXFxuXFxuIyMgSW5zdGFsbGF0aW9uXFxuXFxuIyMjICoqbnBtKio6XFxuXFxuYGBgYmFzaFxcbiQgbnBtIGluc3RhbGwgcnRjbmluamFcXG5gYGBcXG5cXG5hbmQgdGhlbjpcXG5cXG5gYGBqYXZhc2NyaXB0XFxudmFyIHJ0Y25pbmphID0gcmVxdWlyZShcXCdydGNuaW5qYVxcJyk7XFxuYGBgXFxuXFxuIyMjICoqYm93ZXIqKjpcXG5cXG5gYGBiYXNoXFxuJCBib3dlciBpbnN0YWxsIHJ0Y25pbmphXFxuYGBgXFxuXFxuXFxuIyMgQnJvd3NlcmlmaWVkIGxpYnJhcnlcXG5cXG5UYWtlIGEgYnJvd3NlcmlmaWVkIHZlcnNpb24gb2YgdGhlIGxpYnJhcnkgZnJvbSB0aGUgYGRpc3QvYCBmb2xkZXI6XFxuXFxuKiBgZGlzdC9ydGNuaW5qYS5qc2A6IFRoZSB1bmNvbXByZXNzZWQgdmVyc2lvbi5cXG4qIGBkaXN0L3J0Y25pbmphLm1pbi5qc2A6IFRoZSBjb21wcmVzc2VkIHByb2R1Y3Rpb24tcmVhZHkgdmVyc2lvbi5cXG5cXG5UaGV5IGV4cG9zZSB0aGUgZ2xvYmFsIGB3aW5kb3cucnRjbmluamFgIG1vZHVsZS5cXG5cXG5cXG4jIyBVc2FnZVxcblxcbkluIHRoZSBbZXhhbXBsZXNdKC4vZXhhbXBsZXMvKSBmb2xkZXIgd2UgcHJvdmlkZSBhIGNvbXBsZXRlIG9uZS5cXG5cXG5gYGBqYXZhc2NyaXB0XFxuLy8gTXVzdCBmaXJzdCBjYWxsIGl0LlxcbnJ0Y25pbmphKCk7XFxuXFxuLy8gVGhlbiBjaGVjay5cXG5pZiAocnRjbmluamEuaGFzV2ViUlRDKCkpIHtcXG4gICAgLy8gRG8gc29tZXRoaW5nLlxcbn1cXG5lbHNlIHtcXG4gICAgLy8gRG8gc29tZXRoaW5nLlxcbn1cXG5gYGBcXG5cXG5cXG4jIyBEb2N1bWVudGF0aW9uXFxuXFxuWW91IGNhbiByZWFkIHRoZSBmdWxsIFtBUEkgZG9jdW1lbnRhdGlvbl0oZG9jcy9pbmRleC5tZCkgaW4gdGhlIGRvY3MgZm9sZGVyLlxcblxcblxcbiMjIElzc3Vlc1xcblxcbmh0dHBzOi8vZ2l0aHViLmNvbS9lZmFjZTJmYWNlL3J0Y25pbmphLmpzL2lzc3Vlc1xcblxcblxcbiMjIERldmVsb3BlciBndWlkZVxcblxcbiogQ3JlYXRlIGEgYnJhbmNoIHdpdGggYSBuYW1lIGluY2x1ZGluZyB5b3VyIHVzZXIgYW5kIGEgbWVhbmluZ2Z1bCB3b3JkIGFib3V0IHRoZSBmaXgvZmVhdHVyZSB5b3VcXCdyZSBnb2luZyB0byBpbXBsZW1lbnQsIGllOiBcImplc3VzcHJ1YmlvL2ZpeHN0dWZmXCJcXG4qIFVzZSBbR2l0SHViIHB1bGwgcmVxdWVzdHNdKGh0dHBzOi8vaGVscC5naXRodWIuY29tL2FydGljbGVzL3VzaW5nLXB1bGwtcmVxdWVzdHMpLlxcbiogQ29udmVudGlvbnM6XFxuICogV2UgdXNlIFtKU0hpbnRdKGh0dHA6Ly9qc2hpbnQuY29tLykgYW5kIFtDcm9ja2ZvcmRcXCdzIFN0eWxlZ3VpZGVdKGh0dHA6Ly9qYXZhc2NyaXB0LmNyb2NrZm9yZC5jb20vY29kZS5odG1sKS5cXG4gKiBQbGVhc2UgcnVuIGBncnVudCBsaW50YCB0byBiZSBzdXJlIHlvdXIgY29kZSBmaXRzIHdpdGggdGhlbS5cXG5cXG5cXG4jIyMgRGVidWdnaW5nXFxuXFxuVGhlIGxpYnJhcnkgaW5jbHVkZXMgdGhlIE5vZGUgW2RlYnVnXShodHRwczovL2dpdGh1Yi5jb20vdmlzaW9ubWVkaWEvZGVidWcpIG1vZHVsZS4gSW4gb3JkZXIgdG8gZW5hYmxlIGRlYnVnZ2luZzpcXG5cXG5JbiBOb2RlIHNldCB0aGUgYERFQlVHPXJ0Y25pbmphKmAgZW52aXJvbm1lbnQgdmFyaWFibGUgYmVmb3JlIHJ1bm5pbmcgdGhlIGFwcGxpY2F0aW9uLCBvciBzZXQgaXQgYXQgdGhlIHRvcCBvZiB0aGUgc2NyaXB0OlxcblxcbmBgYGphdmFzY3JpcHRcXG5wcm9jZXNzLmVudi5ERUJVRyA9IFxcJ3J0Y25pbmphKlxcJztcXG5gYGBcXG5cXG5JbiB0aGUgYnJvd3NlciBydW4gYHJ0Y25pbmphLmRlYnVnLmVuYWJsZShcXCdydGNuaW5qYSpcXCcpO2AgYW5kIHJlbG9hZCB0aGUgcGFnZS4gTm90ZSB0aGF0IHRoZSBkZWJ1Z2dpbmcgc2V0dGluZ3MgYXJlIHN0b3JlZCBpbnRvIHRoZSBicm93c2VyIExvY2FsU3RvcmFnZS4gVG8gZGlzYWJsZSBpdCBydW4gYHJ0Y25pbmphLmRlYnVnLmRpc2FibGUoXFwncnRjbmluamEqXFwnKTtgLlxcblxcblxcbiMjIENvcHlyaWdodCAmIExpY2Vuc2VcXG5cXG4qIGVGYWNlMkZhY2UgSW5jLlxcbiogW01JVF0oLi9MSUNFTlNFKVxcbicscmVhZG1lRmlsZW5hbWU6XCJSRUFETUUubWRcIixnaXRIZWFkOlwiZDM2YjAyZDA1MDNjYTE1Mjc3MTY5MjkzNWE0MDk2MTMwZjI4ZGM1ZFwiLGJ1Z3M6e3VybDpcImh0dHBzOi8vZ2l0aHViLmNvbS9lZmFjZTJmYWNlL3J0Y25pbmphLmpzL2lzc3Vlc1wifSxfaWQ6XCJydGNuaW5qYUAwLjYuN1wiLHNjcmlwdHM6e30sX3NoYXN1bTpcImY3Yzg4NTVmMmMwZTQxYWUwOGM2MzgzNzViYWQxZGM5NzczNjllYzJcIixfZnJvbTpcInJ0Y25pbmphQD49MC42LjcgPDAuNy4wXCJ9fSx7fV0sNDM6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj10LmV4cG9ydHM9e3Y6W3tuYW1lOlwidmVyc2lvblwiLHJlZzovXihcXGQqKSQvfV0sbzpbe25hbWU6XCJvcmlnaW5cIixyZWc6L14oXFxTKikgKFxcZCopIChcXGQqKSAoXFxTKikgSVAoXFxkKSAoXFxTKikvLG5hbWVzOltcInVzZXJuYW1lXCIsXCJzZXNzaW9uSWRcIixcInNlc3Npb25WZXJzaW9uXCIsXCJuZXRUeXBlXCIsXCJpcFZlclwiLFwiYWRkcmVzc1wiXSxmb3JtYXQ6XCIlcyAlcyAlZCAlcyBJUCVkICVzXCJ9XSxzOlt7bmFtZTpcIm5hbWVcIn1dLGk6W3tuYW1lOlwiZGVzY3JpcHRpb25cIn1dLHU6W3tuYW1lOlwidXJpXCJ9XSxlOlt7bmFtZTpcImVtYWlsXCJ9XSxwOlt7bmFtZTpcInBob25lXCJ9XSx6Olt7bmFtZTpcInRpbWV6b25lc1wifV0scjpbe25hbWU6XCJyZXBlYXRzXCJ9XSx0Olt7bmFtZTpcInRpbWluZ1wiLHJlZzovXihcXGQqKSAoXFxkKikvLG5hbWVzOltcInN0YXJ0XCIsXCJzdG9wXCJdLGZvcm1hdDpcIiVkICVkXCJ9XSxjOlt7bmFtZTpcImNvbm5lY3Rpb25cIixyZWc6L15JTiBJUChcXGQpIChcXFMqKS8sbmFtZXM6W1widmVyc2lvblwiLFwiaXBcIl0sZm9ybWF0OlwiSU4gSVAlZCAlc1wifV0sYjpbe3B1c2g6XCJiYW5kd2lkdGhcIixyZWc6L14oVElBU3xBU3xDVHxSUnxSUyk6KFxcZCopLyxuYW1lczpbXCJ0eXBlXCIsXCJsaW1pdFwiXSxmb3JtYXQ6XCIlczolc1wifV0sbTpbe3JlZzovXihcXHcqKSAoXFxkKikgKFtcXHdcXC9dKikoPzogKC4qKSk/LyxuYW1lczpbXCJ0eXBlXCIsXCJwb3J0XCIsXCJwcm90b2NvbFwiLFwicGF5bG9hZHNcIl0sZm9ybWF0OlwiJXMgJWQgJXMgJXNcIn1dLGE6W3twdXNoOlwicnRwXCIscmVnOi9ecnRwbWFwOihcXGQqKSAoW1xcd1xcLVxcLl0qKSg/OlxccypcXC8oXFxkKikoPzpcXHMqXFwvKFxcUyopKT8pPy8sbmFtZXM6W1wicGF5bG9hZFwiLFwiY29kZWNcIixcInJhdGVcIixcImVuY29kaW5nXCJdLGZvcm1hdDpmdW5jdGlvbihlKXtyZXR1cm4gZS5lbmNvZGluZz9cInJ0cG1hcDolZCAlcy8lcy8lc1wiOmUucmF0ZT9cInJ0cG1hcDolZCAlcy8lc1wiOlwicnRwbWFwOiVkICVzXCJ9fSx7cHVzaDpcImZtdHBcIixyZWc6L15mbXRwOihcXGQqKSAoW1xcU3wgXSopLyxuYW1lczpbXCJwYXlsb2FkXCIsXCJjb25maWdcIl0sZm9ybWF0OlwiZm10cDolZCAlc1wifSx7bmFtZTpcImNvbnRyb2xcIixyZWc6L15jb250cm9sOiguKikvLGZvcm1hdDpcImNvbnRyb2w6JXNcIn0se25hbWU6XCJydGNwXCIscmVnOi9ecnRjcDooXFxkKikoPzogKFxcUyopIElQKFxcZCkgKFxcUyopKT8vLG5hbWVzOltcInBvcnRcIixcIm5ldFR5cGVcIixcImlwVmVyXCIsXCJhZGRyZXNzXCJdLGZvcm1hdDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5hZGRyZXNzP1wicnRjcDolZCAlcyBJUCVkICVzXCI6XCJydGNwOiVkXCJ9fSx7cHVzaDpcInJ0Y3BGYlRyckludFwiLHJlZzovXnJ0Y3AtZmI6KFxcKnxcXGQqKSB0cnItaW50IChcXGQqKS8sbmFtZXM6W1wicGF5bG9hZFwiLFwidmFsdWVcIl0sZm9ybWF0OlwicnRjcC1mYjolZCB0cnItaW50ICVkXCJ9LHtwdXNoOlwicnRjcEZiXCIscmVnOi9ecnRjcC1mYjooXFwqfFxcZCopIChbXFx3LV9dKikoPzogKFtcXHctX10qKSk/LyxuYW1lczpbXCJwYXlsb2FkXCIsXCJ0eXBlXCIsXCJzdWJ0eXBlXCJdLGZvcm1hdDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5zdWJ0eXBlP1wicnRjcC1mYjolcyAlcyAlc1wiOlwicnRjcC1mYjolcyAlc1wifX0se3B1c2g6XCJleHRcIixyZWc6L15leHRtYXA6KFtcXHdfXFwvXSopIChcXFMqKSg/OiAoXFxTKikpPy8sbmFtZXM6W1widmFsdWVcIixcInVyaVwiLFwiY29uZmlnXCJdLGZvcm1hdDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5jb25maWc/XCJleHRtYXA6JXMgJXMgJXNcIjpcImV4dG1hcDolcyAlc1wifX0se3B1c2g6XCJjcnlwdG9cIixyZWc6L15jcnlwdG86KFxcZCopIChbXFx3X10qKSAoXFxTKikoPzogKFxcUyopKT8vLG5hbWVzOltcImlkXCIsXCJzdWl0ZVwiLFwiY29uZmlnXCIsXCJzZXNzaW9uQ29uZmlnXCJdLGZvcm1hdDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbCE9ZS5zZXNzaW9uQ29uZmlnP1wiY3J5cHRvOiVkICVzICVzICVzXCI6XCJjcnlwdG86JWQgJXMgJXNcIn19LHtuYW1lOlwic2V0dXBcIixyZWc6L15zZXR1cDooXFx3KikvLGZvcm1hdDpcInNldHVwOiVzXCJ9LHtuYW1lOlwibWlkXCIscmVnOi9ebWlkOihbXlxcc10qKS8sZm9ybWF0OlwibWlkOiVzXCJ9LHtuYW1lOlwibXNpZFwiLHJlZzovXm1zaWQ6KC4qKS8sZm9ybWF0OlwibXNpZDolc1wifSx7bmFtZTpcInB0aW1lXCIscmVnOi9ecHRpbWU6KFxcZCopLyxmb3JtYXQ6XCJwdGltZTolZFwifSx7bmFtZTpcIm1heHB0aW1lXCIscmVnOi9ebWF4cHRpbWU6KFxcZCopLyxmb3JtYXQ6XCJtYXhwdGltZTolZFwifSx7bmFtZTpcImRpcmVjdGlvblwiLHJlZzovXihzZW5kcmVjdnxyZWN2b25seXxzZW5kb25seXxpbmFjdGl2ZSkvfSx7bmFtZTpcImljZWxpdGVcIixyZWc6L14oaWNlLWxpdGUpL30se25hbWU6XCJpY2VVZnJhZ1wiLHJlZzovXmljZS11ZnJhZzooXFxTKikvLGZvcm1hdDpcImljZS11ZnJhZzolc1wifSx7bmFtZTpcImljZVB3ZFwiLHJlZzovXmljZS1wd2Q6KFxcUyopLyxmb3JtYXQ6XCJpY2UtcHdkOiVzXCJ9LHtuYW1lOlwiZmluZ2VycHJpbnRcIixyZWc6L15maW5nZXJwcmludDooXFxTKikgKFxcUyopLyxuYW1lczpbXCJ0eXBlXCIsXCJoYXNoXCJdLGZvcm1hdDpcImZpbmdlcnByaW50OiVzICVzXCJ9LHtwdXNoOlwiY2FuZGlkYXRlc1wiLHJlZzovXmNhbmRpZGF0ZTooXFxTKikgKFxcZCopIChcXFMqKSAoXFxkKikgKFxcUyopIChcXGQqKSB0eXAgKFxcUyopKD86IHJhZGRyIChcXFMqKSBycG9ydCAoXFxkKikpPyg/OiB0Y3B0eXBlIChcXFMqKSk/KD86IGdlbmVyYXRpb24gKFxcZCopKT8vLG5hbWVzOltcImZvdW5kYXRpb25cIixcImNvbXBvbmVudFwiLFwidHJhbnNwb3J0XCIsXCJwcmlvcml0eVwiLFwiaXBcIixcInBvcnRcIixcInR5cGVcIixcInJhZGRyXCIsXCJycG9ydFwiLFwidGNwdHlwZVwiLFwiZ2VuZXJhdGlvblwiXSxmb3JtYXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJjYW5kaWRhdGU6JXMgJWQgJXMgJWQgJXMgJWQgdHlwICVzXCI7cmV0dXJuIHQrPW51bGwhPWUucmFkZHI/XCIgcmFkZHIgJXMgcnBvcnQgJWRcIjpcIiV2JXZcIix0Kz1udWxsIT1lLnRjcHR5cGU/XCIgdGNwdHlwZSAlc1wiOlwiJXZcIixudWxsIT1lLmdlbmVyYXRpb24mJih0Kz1cIiBnZW5lcmF0aW9uICVkXCIpLHR9fSx7bmFtZTpcImVuZE9mQ2FuZGlkYXRlc1wiLHJlZzovXihlbmQtb2YtY2FuZGlkYXRlcykvfSx7bmFtZTpcInJlbW90ZUNhbmRpZGF0ZXNcIixyZWc6L15yZW1vdGUtY2FuZGlkYXRlczooLiopLyxmb3JtYXQ6XCJyZW1vdGUtY2FuZGlkYXRlczolc1wifSx7bmFtZTpcImljZU9wdGlvbnNcIixyZWc6L15pY2Utb3B0aW9uczooXFxTKikvLGZvcm1hdDpcImljZS1vcHRpb25zOiVzXCJ9LHtwdXNoOlwic3NyY3NcIixyZWc6L15zc3JjOihcXGQqKSAoW1xcd19dKik6KC4qKS8sbmFtZXM6W1wiaWRcIixcImF0dHJpYnV0ZVwiLFwidmFsdWVcIl0sZm9ybWF0Olwic3NyYzolZCAlczolc1wifSx7cHVzaDpcInNzcmNHcm91cHNcIixyZWc6L15zc3JjLWdyb3VwOihcXHcqKSAoLiopLyxuYW1lczpbXCJzZW1hbnRpY3NcIixcInNzcmNzXCJdLGZvcm1hdDpcInNzcmMtZ3JvdXA6JXMgJXNcIn0se25hbWU6XCJtc2lkU2VtYW50aWNcIixyZWc6L15tc2lkLXNlbWFudGljOlxccz8oXFx3KikgKFxcUyopLyxuYW1lczpbXCJzZW1hbnRpY1wiLFwidG9rZW5cIl0sZm9ybWF0OlwibXNpZC1zZW1hbnRpYzogJXMgJXNcIn0se3B1c2g6XCJncm91cHNcIixyZWc6L15ncm91cDooXFx3KikgKC4qKS8sbmFtZXM6W1widHlwZVwiLFwibWlkc1wiXSxmb3JtYXQ6XCJncm91cDolcyAlc1wifSx7bmFtZTpcInJ0Y3BNdXhcIixyZWc6L14ocnRjcC1tdXgpL30se25hbWU6XCJydGNwUnNpemVcIixyZWc6L14ocnRjcC1yc2l6ZSkvfSx7bmFtZTpcInNjdHBtYXBcIixyZWc6L15zY3RwbWFwOihbXFx3X1xcL10qKSAoXFxTKikoPzogKFxcUyopKT8vLG5hbWVzOltcInNjdHBtYXBOdW1iZXJcIixcImFwcFwiLFwibWF4TWVzc2FnZVNpemVcIl0sZm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lLm1heE1lc3NhZ2VTaXplP1wic2N0cG1hcDolcyAlcyAlc1wiOlwic2N0cG1hcDolcyAlc1wifX0se3B1c2g6XCJpbnZhbGlkXCIsbmFtZXM6W1widmFsdWVcIl19XX07T2JqZWN0LmtleXMocikuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1yW2VdO3QuZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlZ3x8KGUucmVnPS8oLiopLyksZS5mb3JtYXR8fChlLmZvcm1hdD1cIiVzXCIpfSl9KX0se31dLDQ0OltmdW5jdGlvbihlLHQsbil7dmFyIHI9ZShcIi4vcGFyc2VyXCIpLHM9ZShcIi4vd3JpdGVyXCIpO24ud3JpdGU9cyxuLnBhcnNlPXIucGFyc2Usbi5wYXJzZUZtdHBDb25maWc9ci5wYXJzZUZtdHBDb25maWcsbi5wYXJzZVBheWxvYWRzPXIucGFyc2VQYXlsb2FkcyxuLnBhcnNlUmVtb3RlQ2FuZGlkYXRlcz1yLnBhcnNlUmVtb3RlQ2FuZGlkYXRlc30se1wiLi9wYXJzZXJcIjo0NSxcIi4vd3JpdGVyXCI6NDZ9XSw0NTpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPWZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcoTnVtYmVyKGUpKT09PWU/TnVtYmVyKGUpOmV9LHM9ZnVuY3Rpb24oZSx0LG4scyl7aWYocyYmIW4pdFtzXT1yKGVbMV0pO2Vsc2UgZm9yKHZhciBsPTA7bDxuLmxlbmd0aDtsKz0xKW51bGwhPWVbbCsxXSYmKHRbbltsXV09cihlW2wrMV0pKX0sbD1mdW5jdGlvbihlLHQsbil7dmFyIHI9ZS5uYW1lJiZlLm5hbWVzO2UucHVzaCYmIXRbZS5wdXNoXT90W2UucHVzaF09W106ciYmIXRbZS5uYW1lXSYmKHRbZS5uYW1lXT17fSk7dmFyIGw9ZS5wdXNoP3t9OnI/dFtlLm5hbWVdOnQ7cyhuLm1hdGNoKGUucmVnKSxsLGUubmFtZXMsZS5uYW1lKSxlLnB1c2gmJnRbZS5wdXNoXS5wdXNoKGwpfSxpPWUoXCIuL2dyYW1tYXJcIiksbz1SZWdFeHAucHJvdG90eXBlLnRlc3QuYmluZCgvXihbYS16XSk9KC4qKS8pO24ucGFyc2U9ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbj1bXSxyPXQ7cmV0dXJuIGUuc3BsaXQoLyhcXHJcXG58XFxyfFxcbikvKS5maWx0ZXIobykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLHM9ZS5zbGljZSgyKTtcIm1cIj09PXQmJihuLnB1c2goe3J0cDpbXSxmbXRwOltdfSkscj1uW24ubGVuZ3RoLTFdKTtmb3IodmFyIG89MDtvPChpW3RdfHxbXSkubGVuZ3RoO28rPTEpe3ZhciB1PWlbdF1bb107aWYodS5yZWcudGVzdChzKSlyZXR1cm4gbCh1LHIscyl9fSksdC5tZWRpYT1uLHR9O3ZhciB1PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5zcGxpdCgvPSguKykvLDIpO3JldHVybiAyPT09bi5sZW5ndGgmJihlW25bMF1dPXIoblsxXSkpLGV9O24ucGFyc2VGbXRwQ29uZmlnPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KC9cXDtcXHM/LykucmVkdWNlKHUse30pfSxuLnBhcnNlUGF5bG9hZHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoXCIgXCIpLm1hcChOdW1iZXIpfSxuLnBhcnNlUmVtb3RlQ2FuZGlkYXRlcz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj1lLnNwbGl0KFwiIFwiKS5tYXAocikscz0wO3M8bi5sZW5ndGg7cys9Myl0LnB1c2goe2NvbXBvbmVudDpuW3NdLGlwOm5bcysxXSxwb3J0Om5bcysyXX0pO3JldHVybiB0fX0se1wiLi9ncmFtbWFyXCI6NDN9XSw0NjpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUoXCIuL2dyYW1tYXJcIikscz0vJVtzZHYlXS9nLGw9ZnVuY3Rpb24oZSl7dmFyIHQ9MSxuPWFyZ3VtZW50cyxyPW4ubGVuZ3RoO3JldHVybiBlLnJlcGxhY2UocyxmdW5jdGlvbihlKXtpZih0Pj1yKXJldHVybiBlO3ZhciBzPW5bdF07c3dpdGNoKHQrPTEsZSl7Y2FzZVwiJSVcIjpyZXR1cm5cIiVcIjtjYXNlXCIlc1wiOnJldHVybiBTdHJpbmcocyk7Y2FzZVwiJWRcIjpyZXR1cm4gTnVtYmVyKHMpO2Nhc2VcIiV2XCI6cmV0dXJuXCJcIn19KX0saT1mdW5jdGlvbihlLHQsbil7dmFyIHI9dC5mb3JtYXQgaW5zdGFuY2VvZiBGdW5jdGlvbj90LmZvcm1hdCh0LnB1c2g/bjpuW3QubmFtZV0pOnQuZm9ybWF0LHM9W2UrXCI9XCIrcl07aWYodC5uYW1lcylmb3IodmFyIGk9MDtpPHQubmFtZXMubGVuZ3RoO2krPTEpe3ZhciBvPXQubmFtZXNbaV07dC5uYW1lP3MucHVzaChuW3QubmFtZV1bb10pOnMucHVzaChuW3QubmFtZXNbaV1dKX1lbHNlIHMucHVzaChuW3QubmFtZV0pO3JldHVybiBsLmFwcGx5KG51bGwscyl9LG89W1widlwiLFwib1wiLFwic1wiLFwiaVwiLFwidVwiLFwiZVwiLFwicFwiLFwiY1wiLFwiYlwiLFwidFwiLFwiclwiLFwielwiLFwiYVwiXSx1PVtcImlcIixcImNcIixcImJcIixcImFcIl07dC5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dD10fHx7fSxudWxsPT1lLnZlcnNpb24mJihlLnZlcnNpb249MCksbnVsbD09ZS5uYW1lJiYoZS5uYW1lPVwiIFwiKSxlLm1lZGlhLmZvckVhY2goZnVuY3Rpb24oZSl7bnVsbD09ZS5wYXlsb2FkcyYmKGUucGF5bG9hZHM9XCJcIil9KTt2YXIgbj10Lm91dGVyT3JkZXJ8fG8scz10LmlubmVyT3JkZXJ8fHUsbD1bXTtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JbdF0uZm9yRWFjaChmdW5jdGlvbihuKXtuLm5hbWUgaW4gZSYmbnVsbCE9ZVtuLm5hbWVdP2wucHVzaChpKHQsbixlKSk6bi5wdXNoIGluIGUmJm51bGwhPWVbbi5wdXNoXSYmZVtuLnB1c2hdLmZvckVhY2goZnVuY3Rpb24oZSl7bC5wdXNoKGkodCxuLGUpKX0pfSl9KSxlLm1lZGlhLmZvckVhY2goZnVuY3Rpb24oZSl7bC5wdXNoKGkoXCJtXCIsci5tWzBdLGUpKSxzLmZvckVhY2goZnVuY3Rpb24odCl7clt0XS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24ubmFtZSBpbiBlJiZudWxsIT1lW24ubmFtZV0/bC5wdXNoKGkodCxuLGUpKTpuLnB1c2ggaW4gZSYmbnVsbCE9ZVtuLnB1c2hdJiZlW24ucHVzaF0uZm9yRWFjaChmdW5jdGlvbihlKXtsLnB1c2goaSh0LG4sZSkpfSl9KX0pfSksbC5qb2luKFwiXFxyXFxuXCIpK1wiXFxyXFxuXCJ9fSx7XCIuL2dyYW1tYXJcIjo0M31dLDQ3OltmdW5jdGlvbihlLHQsbil7dC5leHBvcnRzPXtuYW1lOlwianNzaXBcIix0aXRsZTpcIkpzU0lQXCIsZGVzY3JpcHRpb246XCJ0aGUgSmF2YXNjcmlwdCBTSVAgbGlicmFyeVwiLHZlcnNpb246XCIyLjAuMVwiLGhvbWVwYWdlOlwiaHR0cDovL2pzc2lwLm5ldFwiLGF1dGhvcjpcIkpvc8OpIEx1aXMgTWlsbMOhbiA8am1pbGxhbkBhbGlheC5uZXQ+IChodHRwczovL2dpdGh1Yi5jb20vam1pbGxhbilcIixjb250cmlidXRvcnM6W1wiScOxYWtpIEJheiBDYXN0aWxsbyA8aWJjQGFsaWF4Lm5ldD4gKGh0dHBzOi8vZ2l0aHViLmNvbS9pYmMpXCIsXCJTYcO6bCBJYmFycmEgQ29ycmV0Z8OpIDxzYWdodWxAZ21haWwuY29tPiAoaHR0cHM6Ly9naXRodWIuY29tL3NhZ2h1bClcIl0sbWFpbjpcImxpYi9Kc1NJUC5qc1wiLGtleXdvcmRzOltcInNpcFwiLFwid2Vic29ja2V0XCIsXCJ3ZWJydGNcIixcIm5vZGVcIixcImJyb3dzZXJcIixcImxpYnJhcnlcIl0sbGljZW5zZTpcIk1JVFwiLHJlcG9zaXRvcnk6e3R5cGU6XCJnaXRcIix1cmw6XCJodHRwczovL2dpdGh1Yi5jb20vdmVyc2F0aWNhL0pzU0lQLmdpdFwifSxidWdzOnt1cmw6XCJodHRwczovL2dpdGh1Yi5jb20vdmVyc2F0aWNhL0pzU0lQL2lzc3Vlc1wifSxkZXBlbmRlbmNpZXM6e2RlYnVnOlwiXjIuMi4wXCIscnRjbmluamE6XCJeMC42LjdcIixcInNkcC10cmFuc2Zvcm1cIjpcIl4xLjYuMlwifSxkZXZEZXBlbmRlbmNpZXM6e2Jyb3dzZXJpZnk6XCJeMTMuMC4xXCIsZ3VscDpcImdpdCtodHRwczovL2dpdGh1Yi5jb20vZ3VscGpzL2d1bHAuZ2l0IzQuMFwiLFwiZ3VscC1leHBlY3QtZmlsZVwiOlwiMC4wLjdcIixcImd1bHAtaGVhZGVyXCI6XCJeMS44LjJcIixcImd1bHAtanNoaW50XCI6XCJeMi4wLjFcIixcImd1bHAtbm9kZXVuaXQtcnVubmVyXCI6XCJeMC4yLjJcIixcImd1bHAtcmVuYW1lXCI6XCJeMS4yLjJcIixcImd1bHAtdWdsaWZ5XCI6XCJeMS41LjNcIixcImd1bHAtdXRpbFwiOlwiXjMuMC43XCIsanNoaW50OlwiXjIuOS4yXCIsXCJqc2hpbnQtc3R5bGlzaFwiOlwiXjIuMi4wXCIscGVnanM6XCIwLjcuMFwiLFwidmlueWwtYnVmZmVyXCI6XCJeMS4wLjBcIixcInZpbnlsLXNvdXJjZS1zdHJlYW1cIjpcIl4xLjEuMFwifSxzY3JpcHRzOnt0ZXN0OlwiZ3VscCB0ZXN0XCJ9fX0se31dfSx7fSxbN10pKDcpfSk7IiwidmFyIF90ZW1wbGF0ZSA9IHJlcXVpcmUoJ2xvZGFzaC9zdHJpbmcvdGVtcGxhdGUnKTtcbnZhciBfZm9yRWFjaCA9IHJlcXVpcmUoJ2xvZGFzaC9jb2xsZWN0aW9uL2ZvckVhY2gnKTtcbnZhciBfYXNzaWduID0gcmVxdWlyZSgnbG9kYXNoL29iamVjdC9hc3NpZ24nKTtcbnZhciBfbWVyZ2UgPSByZXF1aXJlKCdsb2Rhc2gvb2JqZWN0L21lcmdlJyk7XG52YXIgX2lzRXF1YWwgPSByZXF1aXJlKCdsb2Rhc2gvbGFuZy9pc0VxdWFsJyk7XG52YXIgX3RyaW0gPSByZXF1aXJlKCdsb2Rhc2gvc3RyaW5nL3RyaW0nKTtcbnZhciBfdGhyb3R0bGUgPSByZXF1aXJlKCdsb2Rhc2gvZnVuY3Rpb24vdGhyb3R0bGUnKTtcbnZhciBfZGVib3VuY2UgPSByZXF1aXJlKCdsb2Rhc2gvZnVuY3Rpb24vZGVib3VuY2UnKTtcblxuZnVuY3Rpb24gZGVib3VuY2UoZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG5cdHZhciB0aW1lb3V0O1xuXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuXHRcdHZhciBsYXRlciA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGltZW91dCA9IG51bGw7XG5cdFx0XHRpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0XHR9O1xuXHRcdHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuXHRcdGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0XHR0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG5cdFx0aWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdH07XG59XG5cbmZ1bmN0aW9uIGZpbmRQYXJlbnQoZWxlbSwgc2VsZWN0b3IpIHtcblxuICAgIHZhciBmaXJzdENoYXIgPSBzZWxlY3Rvci5jaGFyQXQoMCk7XG5cbiAgICAvLyBHZXQgY2xvc2VzdCBtYXRjaFxuICAgIGZvciAoIDsgZWxlbSAmJiBlbGVtICE9PSBkb2N1bWVudDsgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSApIHtcbiAgICAgICAgaWYgKCBmaXJzdENoYXIgPT09ICcuJyApIHtcbiAgICAgICAgICAgIGlmICggZWxlbS5jbGFzc0xpc3QuY29udGFpbnMoIHNlbGVjdG9yLnN1YnN0cigxKSApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCBmaXJzdENoYXIgPT09ICcjJyApIHtcbiAgICAgICAgICAgIGlmICggZWxlbS5pZCA9PT0gc2VsZWN0b3Iuc3Vic3RyKDEpICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKCBmaXJzdENoYXIgPT09ICdbJyApIHtcbiAgICAgICAgICAgIGlmIChlbGVtLmhhc0F0dHJpYnV0ZSggc2VsZWN0b3Iuc3Vic3RyKDEsIHNlbGVjdG9yLmxlbmd0aCAtIDIpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYoZWxlbS5ub2RlTmFtZSA9PT0gc2VsZWN0b3IudG9VcHBlckNhc2UoKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG5cbn1cblxuZnVuY3Rpb24gcG9sbChmbiwgY2FsbGJhY2ssIGVycmJhY2ssIHRpbWVvdXQsIGludGVydmFsKSB7XG4gICAgdmFyIGVuZFRpbWUgPSBOdW1iZXIobmV3IERhdGUoKSkgKyAodGltZW91dCB8fCAyMDAwKTtcbiAgICBpbnRlcnZhbCA9IGludGVydmFsIHx8IDMwMDtcblxuICAgIChmdW5jdGlvbiBwKCkge1xuICAgICAgICAvLyBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCwgd2UncmUgZG9uZSEgXG4gICAgICAgIGlmKGZuKCkpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlIGNvbmRpdGlvbiBpc24ndCBtZXQgYnV0IHRoZSB0aW1lb3V0IGhhc24ndCBlbGFwc2VkLCBnbyBhZ2FpblxuICAgICAgICBlbHNlIGlmIChOdW1iZXIobmV3IERhdGUoKSkgPCBlbmRUaW1lKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHAsIGludGVydmFsKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEaWRuJ3QgbWF0Y2ggYW5kIHRvbyBtdWNoIHRpbWUsIHJlamVjdCFcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlcnJiYWNrKG5ldyBFcnJvcigndGltZWQgb3V0IGZvciAnICsgZm4gKyAnOiAnICsgYXJndW1lbnRzKSk7XG4gICAgICAgIH1cbiAgICB9KSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0dGVtcGxhdGU6IF90ZW1wbGF0ZSxcblx0Zm9yRWFjaDogX2ZvckVhY2gsXG5cdGFzc2lnbjogX2Fzc2lnbixcblx0bWVyZ2U6IF9tZXJnZSxcblx0aXNFcXVhbDogX2lzRXF1YWwsXG5cdHRyaW06IF90cmltLFxuXHR0aHJvdHRsZTogX3Rocm90dGxlLFxuXHRkZWJvdW5jZTogZGVib3VuY2UsXG4gICAgcG9sbDogcG9sbCxcblx0ZmluZFBhcmVudDogZmluZFBhcmVudFxufTsiLCJ2YXIgd2lkZ2V0ID0gcmVxdWlyZSgnLi93aWRnZXQuanMnKTtcbnZhciBhcGkgPSByZXF1aXJlKCcuL2NvcmUuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB3aWRnZXQubW9kdWxlO1xuIiwidmFyIHVybCA9IHJlcXVpcmUoJ3VybCcpO1xudmFyIGh0dHAgPSByZXF1aXJlKCdodHRwJyk7XG52YXIgZGVidWcgPSByZXF1aXJlKCcuL2RlYnVnJyk7XG52YXIgY2FjaGUgPSB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdHBvc3Q6IHBvc3QsXG5cdGdldDogZ2V0XG59O1xuXG5mdW5jdGlvbiBwb3N0KHBvc3RVcmwsIGRhdGEsIGNiKXtcblxuXHQvLyBkZWJ1Zy5sb2coJ3Bvc3QgcmVxdWVzdDogJywgcG9zdFVybCwgZGF0YSk7XG5cblx0dmFyIHVybE9iaiA9IHVybC5wYXJzZShwb3N0VXJsKSxcblx0XHRcblx0anNvbiA9IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuXG5cdHJlcSwgYm9keSA9ICcnLCBrZWVwQWxpdmVBZ2VudCxcblxuXHRvcHRpb25zID0ge1xuXHRcdG1ldGhvZDogJ1BPU1QnLFxuXHRcdHByb3RvY29sOiB1cmxPYmoucHJvdG9jb2wgfHwgd2luZG93LmxvY2F0aW9uLnByb3RvY29sLFxuXHRcdGhvc3RuYW1lOiB1cmxPYmouaG9zdG5hbWUsXG5cdFx0cG9ydDogdXJsT2JqLnBvcnQsXG5cdFx0cGF0aDogdXJsT2JqLnBhdGgsXG5cdFx0J0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04Jyxcblx0XHQnQ29udGVudC1sZW5ndGgnOiBqc29uLmxlbmd0aFxuXHR9O1xuXG5cdGtlZXBBbGl2ZUFnZW50ID0gbmV3IGh0dHAuQWdlbnQoeyBrZWVwQWxpdmU6IHRydWUgfSk7XG5cdG9wdGlvbnMuYWdlbnQgPSBrZWVwQWxpdmVBZ2VudDtcblxuXHRyZXEgPSBodHRwLnJlcXVlc3Qob3B0aW9ucywgZnVuY3Rpb24gKHJlcyl7XG5cdFx0cmVzLnNldEVuY29kaW5nKCd1dGY4Jyk7XG5cdFx0cmVzLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7XG5cdFx0XHRib2R5ICs9IGNodW5rO1xuXHRcdH0pO1xuXHRcdHJlcy5vbignZW5kJywgZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBkZWJ1Zy5sb2coYm9keSk7XG5cdFx0XHRpZihib2R5ID09PSAne30nKSB7XG5cdFx0XHRcdC8vIGJvZHkgPSBKU09OLnBhcnNlKHtyZXN1bHQ6ICdPSyd9KTtcblx0XHRcdFx0Ym9keSA9IFwie3Jlc3VsdDogJ09LJ31cIjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ym9keSA9IEpTT04ucGFyc2UoYm9keSk7XG5cblx0XHRcdGlmKGJvZHkuZXJyb3IpIHtcblx0XHRcdFx0Y2IoYm9keS5lcnJvcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYihudWxsLCByZXMsIGJvZHkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHRyZXEub24oJ2Vycm9yJywgZnVuY3Rpb24gKGVycil7XG5cdFx0Y2IoZXJyKTtcblx0fSk7XG5cblx0cmVxLndyaXRlKGpzb24pO1xuXHRyZXEuZW5kKCk7XG59XG5cbmZ1bmN0aW9uIGdldChzZWxlY3RvciwgcG9zdFVybCwgY2Ipe1xuXG5cdHZhciBib2R5ID0gJyc7XG5cblx0aWYoc2VsZWN0b3IgJiYgY2FjaGVbc2VsZWN0b3JdKSB7XG5cdFx0cmV0dXJuIGNiKG51bGwsIGNhY2hlW3NlbGVjdG9yXSk7XG5cdH1cblxuXHRodHRwLmdldChwb3N0VXJsLCBmdW5jdGlvbiAocmVzKSB7XG5cdFx0cmVzLnNldEVuY29kaW5nKCd1dGY4Jyk7XG5cdFx0cmVzLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7XG5cdFx0XHRib2R5ICs9IGNodW5rO1xuXHRcdH0pO1xuXHRcdHJlcy5vbignZW5kJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRpZihzZWxlY3RvcikgY2FjaGVbc2VsZWN0b3JdID0gYm9keTtcblx0XHRcdGNiKG51bGwsIGJvZHkpO1xuXHRcdH0pO1xuXHR9KS5vbignZXJyb3InLCBmdW5jdGlvbihlcnIpIHtcblx0XHRjYihlcnIpO1xuXHR9KTtcbn1cbiIsInZhciBzdG9yYWdlID0gZ2xvYmFsLmxvY2FsU3RvcmFnZTtcbnZhciBzZXNzaW9uID0gZ2xvYmFsLnNlc3Npb25TdG9yYWdlO1xudmFyIHByZWZpeCA9ICdzd2MnO1xudmFyIGRlbGltaXRlciA9ICcuJztcblxuLy8gQ3VycmVudCBjYWNoZSBvYmplY3RcbnZhciBjYWNoZSA9IHtcblx0c2lkOiBudWxsLFxuXHRldmVudFRpbWVzdGFtcDogMCxcblx0bXNnVGltZXN0YW1wOiAwLFxuXHRlbnRpdHk6IHVuZGVmaW5lZCxcblx0Y2hhdDogbnVsbFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdGdldDogZ2V0SXRlbSxcblx0c2V0OiBzZXRJdGVtLFxuXHRyZW1vdmU6IHJlbW92ZUl0ZW0sXG5cdGdldFN0YXRlOiBnZXRTdGF0ZSxcblx0c2F2ZVN0YXRlOiBzYXZlU3RhdGUsXG5cdHJlbW92ZVN0YXRlOiByZW1vdmVTdGF0ZVxufTtcblxuZnVuY3Rpb24gZ2V0SXRlbShrZXksIGxvY2F0aW9uKSB7XG5cdGlmKGxvY2F0aW9uID09PSAnc2Vzc2lvbicpIHtcblx0XHRyZXR1cm4gSlNPTi5wYXJzZShzZXNzaW9uLmdldEl0ZW0ocHJlZml4K2RlbGltaXRlcitrZXkpKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gSlNPTi5wYXJzZShzdG9yYWdlLmdldEl0ZW0ocHJlZml4K2RlbGltaXRlcitrZXkpKTtcblx0fVxufVxuXG5mdW5jdGlvbiBzZXRJdGVtKGtleSwgdmFsdWUsIGxvY2F0aW9uKSB7XG5cdGlmKGxvY2F0aW9uID09PSAnc2Vzc2lvbicpIHtcblx0XHRzZXNzaW9uLnNldEl0ZW0ocHJlZml4K2RlbGltaXRlcitrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG5cdH0gZWxzZSB7XG5cdFx0c3RvcmFnZS5zZXRJdGVtKHByZWZpeCtkZWxpbWl0ZXIra2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuXHR9XG5cdHJldHVybiB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXksIGxvY2F0aW9uKSB7XG5cdGlmKGxvY2F0aW9uID09PSAnc2Vzc2lvbicpIHtcblx0XHRzZXNzaW9uLnJlbW92ZUl0ZW0ocHJlZml4K2RlbGltaXRlcitrZXkpO1xuXHR9IGVsc2Uge1xuXHRcdHN0b3JhZ2UucmVtb3ZlSXRlbShwcmVmaXgrZGVsaW1pdGVyK2tleSk7XG5cdH1cbn1cblxuLyoqXG4gKiBHZXQgc2F2ZWQgcHJvcGVydHkgZnJvbSBsb2NhbFN0b3JhZ2Ugb3IgZnJvbSBzZXNzaW9uIGNhY2hlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGtleSAgICAgIC0gaXRlbSBrZXkgaW4gc3RvcmFnZSBtZW1vcnlcbiAqIEBwYXJhbSAge1t0eXBlXX0gbG9jYXRpb24gLSBmcm9tIHdoZXJlIHRvIHJldHJpZXZlIGl0ZW0uIFxuICogQ291bGQgYmUgZWl0aGVyIFwic3RvcmFnZVwiIC0gZnJvbSBsb2NhbFN0b3JhZ2UsIG9yIFwiY2FjaGVcIiAtIGZyb20gc2Vzc2lvbiBjYWNoZVxuICogQHJldHVybiB7U3RyaW5nfE9iamVjdHxGdW5jdGlvbn0gICAgICAgICAgLSBpdGVtIHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGdldFN0YXRlKGtleSwgbG9jYXRpb24pe1xuXHRpZighbG9jYXRpb24pIHtcblx0XHRyZXR1cm4gKGNhY2hlW2tleV0gIT09IHVuZGVmaW5lZCAmJiBjYWNoZVtrZXldICE9PSBudWxsKSA/IGNhY2hlW2tleV0gOiBnZXRJdGVtKGtleSk7XG5cdH0gZWxzZSBpZihsb2NhdGlvbiA9PT0gJ2NhY2hlJykge1xuXHRcdHJldHVybiBjYWNoZVtrZXldO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBnZXRJdGVtKGtleSwgbG9jYXRpb24pO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNhdmVTdGF0ZShrZXksIHZhbHVlLCBsb2NhdGlvbil7XG5cdGNhY2hlW2tleV0gPSB2YWx1ZTtcblx0aWYobG9jYXRpb24gIT09ICdjYWNoZScpIHtcblx0XHRzZXRJdGVtKGtleSwgdmFsdWUsIGxvY2F0aW9uKTtcblx0fVxuXHRyZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0YXRlKGtleSwgbG9jYXRpb24pIHtcblx0ZGVsZXRlIGNhY2hlW2tleV07XG5cdHJlbW92ZUl0ZW0oa2V5KTtcbn1cbiIsInZhciBkZWJ1ZyA9IHJlcXVpcmUoJy4vZGVidWcnKTtcbnZhciBldmVudHMgPSB7fSxcbkpzU0lQID0gcmVxdWlyZSgnLi9qc3NpcC5taW4uanMnKSxcbi8vIEpzU0lQID0gZ2xvYmFsLkpzU0lQLFxub3B0aW9ucyxcbnNpcENsaWVudCxcbnNpcFNlc3Npb24sXG5zaXBDYWxsRXZlbnRzO1xuXG5mdW5jdGlvbiBpc1dlYnJ0Y1N1cHBvcnRlZCgpe1xuXHR2YXIgUlRDID0gd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uIHx8IHdpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbiB8fCB3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24sXG5cdFx0dXNlck1laWRhID0gbmF2aWdhdG9yLmdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tc0dldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhLFxuXHRcdGljZSA9IHdpbmRvdy5tb3pSVENJY2VDYW5kaWRhdGUgfHwgd2luZG93LlJUQ0ljZUNhbmRpZGF0ZTtcblxuXHRyZXR1cm4gISFSVEMgJiYgISF1c2VyTWVpZGEgJiYgISFpY2U7XG59XG5cbmZ1bmN0aW9uIGluaXRKc1NJUEV2ZW50cygpe1xuXHRzaXBDbGllbnQub24oJ2Nvbm5lY3RlZCcsIGZ1bmN0aW9uKGUpeyBkZWJ1Zy5sb2coJ3NpcCBjb25uZWN0ZWQgZXZlbnQ6ICcsIGUpOyB9KTtcblx0c2lwQ2xpZW50Lm9uKCdkaXNjb25uZWN0ZWQnLCBmdW5jdGlvbihlKXsgZGVidWcubG9nKCdzaXAgZGlzY29ubmVjdGVkIGV2ZW50OiAnLCBlKTsgfSk7XG5cdHNpcENsaWVudC5vbignbmV3TWVzc2FnZScsIGZ1bmN0aW9uKGUpeyBkZWJ1Zy5sb2coJ3NpcCBuZXdNZXNzYWdlIGV2ZW50OiAnLCBlKTsgfSk7XG5cdHNpcENsaWVudC5vbignbmV3UlRDU2Vzc2lvbicsIGZ1bmN0aW9uKGUpe1xuXHRcdGRlYnVnLmxvZygnc2lwIG5ld1JUQ1Nlc3Npb24gZXZlbnQ6ICcsIGUpO1xuXHRcdGV2ZW50cy5lbWl0KCd3ZWJydGMvbmV3UlRDU2Vzc2lvbicsIGUpO1xuXHRcdC8vIGlmKGUuc2Vzc2lvbi5kaXJlY3Rpb24gPT09ICdvdXRnb2luZycpXG5cdFx0Ly8gXHRldmVudHMuZW1pdCgnd2VicnRjL291dGdvaW5nQ2FsbCcsIGUpO1xuXHRcdC8vIGVsc2Vcblx0XHQvLyBcdGV2ZW50cy5lbWl0KCd3ZWJydGMvaW5jb21pbmdDYWxsJywgZSk7XG5cdFx0XG5cdFx0XHRzaXBTZXNzaW9uID0gZS5zZXNzaW9uO1xuXHR9KTtcblx0c2lwQ2xpZW50Lm9uKCdyZWdpc3RlcmVkJywgZnVuY3Rpb24oZSl7IGRlYnVnLmxvZygnc2lwIHJlZ2lzdGVyZWQgZXZlbnQ6ICcsIGUpOyB9KTtcblx0c2lwQ2xpZW50Lm9uKCd1bnJlZ2lzdGVyZWQnLCBmdW5jdGlvbihlKXsgZGVidWcubG9nKCdzaXAgdW5yZWdpc3RlcmVkIGV2ZW50OiAnLCBlKTsgfSk7XG5cdHNpcENsaWVudC5vbigncmVnaXN0cmF0aW9uRmFpbGVkJywgZnVuY3Rpb24oZSl7IGRlYnVnLmxvZygnc2lwIHJlZ2lzdHJhdGlvbkZhaWxlZCBldmVudDogJywgZSk7IH0pO1xuXG5cdHNpcENhbGxFdmVudHMgPSB7XG5cdFx0cHJvZ3Jlc3M6IGZ1bmN0aW9uKGUpe1xuXHRcdFx0ZGVidWcubG9nKCdjYWxsIHByb2dyZXNzIGV2ZW50OiAnLCBlKTtcblx0XHRcdGV2ZW50cy5lbWl0KCd3ZWJydGMvcHJvZ3Jlc3MnLCBlKTtcblx0XHR9LFxuXHRcdGZhaWxlZDogZnVuY3Rpb24oZSl7XG5cdFx0XHRkZWJ1Zy5sb2coJ2NhbGwgZmFpbGVkIGV2ZW50OicsIGUpO1xuXHRcdFx0ZXZlbnRzLmVtaXQoJ3dlYnJ0Yy9mYWlsZWQnLCBlKTtcblx0XHR9LFxuXHRcdGVuZGVkOiBmdW5jdGlvbihlKXtcblx0XHRcdGRlYnVnLmxvZygnY2FsbCBlbmRlZCBldmVudDogJywgZSk7XG5cdFx0XHRldmVudHMuZW1pdCgnd2VicnRjL2VuZGVkJywgZSk7XG5cdFx0fSxcblx0XHRjb25maXJtZWQ6IGZ1bmN0aW9uKGUpe1xuXHRcdFx0ZGVidWcubG9nKCdjYWxsIGNvbmZpcm1lZCBldmVudDogJywgZSk7XG5cdFx0XHRldmVudHMuZW1pdCgnd2VicnRjL2NvbmZpcm1lZCcsIGUpO1xuXHRcdH0sXG5cdFx0YWRkc3RyZWFtOiBmdW5jdGlvbihlKXtcblx0XHRcdGRlYnVnLmxvZygnY2FsbCBhZGRzdHJlYW0gZXZlbnQ6ICcsIGUpO1xuXHRcdFx0ZXZlbnRzLmVtaXQoJ3dlYnJ0Yy9hZGRzdHJlYW0nLCBlKTtcblx0XHRcdHZhciBzdHJlYW0gPSBlLnN0cmVhbTtcblx0XHRcdG9wdGlvbnMuYXVkaW9SZW1vdGUgPSBKc1NJUC5ydGNuaW5qYS5hdHRhY2hNZWRpYVN0cmVhbShvcHRpb25zLmF1ZGlvUmVtb3RlLCBzdHJlYW0pO1xuXHRcdH1cblx0XHQvLyBzZHA6IGZ1bmN0aW9uKGUpe1xuXHRcdC8vIFx0ZGVidWcubG9nKCdzZHA6ICcsIGUpO1xuXHRcdC8vIH1cblx0fTtcbn1cblxuZnVuY3Rpb24gaXNFc3RhYmxpc2hlZCgpe1xuXHRyZXR1cm4gc2lwU2Vzc2lvbi5pc0VzdGFibGlzaGVkKCk7XG59XG5cbmZ1bmN0aW9uIGlzSW5Qcm9ncmVzcygpe1xuXHRyZXR1cm4gc2lwU2Vzc2lvbi5pc0luUHJvZ3Jlc3MoKTtcbn1cblxuZnVuY3Rpb24gaXNFbmRlZCgpe1xuXHRyZXR1cm4gc2lwU2Vzc2lvbi5pc0VuZGVkKCk7XG59XG5cbmZ1bmN0aW9uIHVucmVnaXN0ZXIoKXtcblx0c2lwQ2xpZW50LnN0b3AoKTtcbn1cblxuZnVuY3Rpb24gYXVkaW9jYWxsKG51bWJlcil7XG5cdHNpcFNlc3Npb24gPSBzaXBDbGllbnQuY2FsbChudW1iZXIsIHtcblx0XHRldmVudEhhbmRsZXJzOiBzaXBDYWxsRXZlbnRzLFxuXHRcdG1lZGlhQ29uc3RyYWludHM6IHsgYXVkaW86IHRydWUsIHZpZGVvOiBmYWxzZSB9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB0ZXJtaW5hdGUoKXtcblx0c2lwU2Vzc2lvbi50ZXJtaW5hdGUoe1xuXHRcdHN0YXR1c19jb2RlOiAyMDBcblx0fSk7XG5cdC8vIHNpcENsaWVudC50ZXJtaW5hdGVTZXNzaW9ucygpO1xufVxuXG5mdW5jdGlvbiBhbnN3ZXIoKXtcblx0ZGVidWcubG9nKCdhbnN3ZXI6ICcsc2lwQ2xpZW50KTtcblx0c2lwU2Vzc2lvbi5hbnN3ZXIoKTtcbn1cblxuZnVuY3Rpb24gaG9sZCgpe1xuXHRkZWJ1Zy5sb2coJ2hvbGQ6ICcsIHNpcFNlc3Npb24uaXNPbkhvbGQoKSk7XG5cdGlmKHNpcFNlc3Npb24gJiYgc2lwU2Vzc2lvbi5pc09uSG9sZCgpLmxvY2FsKSB7XG5cdFx0c2lwU2Vzc2lvbi51bmhvbGQoKTtcblx0fSBlbHNlIHtcblx0XHRzaXBTZXNzaW9uLmhvbGQoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjcmVhdGVSZW1vdGVBdWRpbygpe1xuXHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuXHRlbC5zZXRBdHRyaWJ1dGUoJ2F1dG9wbGF5JywgJ2F1dG9wbGF5Jyk7XG5cdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuXHRyZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIGluaXQob3B0cyl7XG5cdGRlYnVnLmxvZygnSW5pdGlhdGluZyBXZWJSVEMgbW9kdWxlOicsIG9wdHMpO1xuXHRvcHRpb25zID0gb3B0cztcblxuXHQvLyAhIWdldCByaWQgb2YgdGhpcyEhXG5cdGV2ZW50cy5lbWl0ID0gb3B0cy5lbWl0O1xuXHRldmVudHMub24gPSBvcHRzLm9uO1xuXHQvLyAhIWdldCByaWQgb2YgdGhpcyEhXG5cblx0b3B0aW9ucy5hdWRpb1JlbW90ZSA9IGNyZWF0ZVJlbW90ZUF1ZGlvKCk7XG5cdHNpcENsaWVudCA9IG5ldyBKc1NJUC5VQShvcHRpb25zLnNpcCk7XG5cdGluaXRKc1NJUEV2ZW50cygpO1xuXHRzaXBDbGllbnQuc3RhcnQoKTtcblx0Ly8gcmV0dXJuIHNpcENsaWVudDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdGxpYjogSnNTSVAsXG5cdGluaXQ6IGluaXQsXG5cdHVucmVnaXN0ZXI6IHVucmVnaXN0ZXIsXG5cdGF1ZGlvY2FsbDogYXVkaW9jYWxsLFxuXHR0ZXJtaW5hdGU6IHRlcm1pbmF0ZSxcblx0YW5zd2VyOiBhbnN3ZXIsXG5cdGhvbGQ6IGhvbGQsXG5cdGlzSW5Qcm9ncmVzczogaXNJblByb2dyZXNzLFxuXHRpc0VzdGFibGlzaGVkOiBpc0VzdGFibGlzaGVkLFxuXHRpc0VuZGVkOiBpc0VuZGVkLFxuXHRpc1N1cHBvcnRlZDogaXNXZWJydGNTdXBwb3J0ZWRcbn07IiwidmFyIGRvbWlmeSA9IHJlcXVpcmUoJ2RvbWlmeScpO1xudmFyIGNvcmUgPSByZXF1aXJlKCcuL2NvcmUnKTtcbnZhciBzdG9yYWdlID0gcmVxdWlyZSgnLi9zdG9yYWdlJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xudmFyIGRlYnVnID0gcmVxdWlyZSgnLi9kZWJ1ZycpO1xudmFyIF8gPSByZXF1aXJlKCcuL2xvZGFzaCcpO1xudmFyIGZyYXNlcyA9IG51bGw7XG52YXIgY29icm93c2luZyA9IHJlcXVpcmUoJy4vY29icm93c2luZycpO1xudmFyIFdlYlJUQyA9IHJlcXVpcmUoJy4vd2VicnRjJyk7XG52YXIgc2VydmVyVXJsID0ge307XG52YXIgZm9ybXM7XG52YXIgYXBpO1xuXG4vLyBXaWRnZXQgaW5pdGlhdGlvbiBvcHRpb25zXG52YXIgZGVmYXVsdHMgPSB7XG5cdC8vIHByZWZpeCBmb3IgQ1NTIGNsYXNzZXMgYW5kIGlkcy4gXG5cdC8vIENoYW5nZSBpdCBvbmx5IGlmIHRoZSBkZWZhdWx0IHByZWZpeCBcblx0Ly8gbWF0Y2hlcyB3aXRoIGV4aXN0ZWQgY2xhc3NlcyBvciBpZHMgb24gdGhlIHdlYnNpdGVcblx0cHJlZml4OiAnc3djJyxcblx0Ly8gd2hldGhlciBvciBub3QgdG8gYXNrIHVzZXIgXG5cdC8vIHRvIGludHJvZHVjZSBoaW0gc2VsZiBiZWZvcmUgdGhlIGNoYXQgc2Vzc2lvblxuXHRpbnRybzogZmFsc2UsXG5cdC8vIHdoZXRoZXIgb3Igbm90IHRvIGFkZCB3aWRnZXQgdG8gdGhlIHdlYnBhZ2Vcblx0d2lkZ2V0OiB0cnVlLFxuXHQvLyBET00gZWxlbWVudCB0aGF0IG9wZW5zIGEgd2lkZ2V0XG5cdGJ1dHRvbkVsZW1lbnQ6IG51bGwsXG5cdHRpdGxlOiAnJyxcblx0bGFuZzogJ2VuJyxcblx0bGFuZ0Zyb21Vcmw6IGZhbHNlLFxuXHRwb3NpdGlvbjogJ3JpZ2h0Jyxcblx0aGlkZU9mZmxpbmVCdXR0b246IGZhbHNlLFxuXHRvZmZlcjogZmFsc2UsXG5cdHN0eWxlczoge1xuXHRcdHByaW1hcnk6IHtcblx0XHRcdGJhY2tncm91bmRDb2xvcjogJyM1NTU1NTUnLFxuXHRcdFx0Y29sb3I6ICcjRkZGRkZGJ1xuXHRcdH0sXG5cdFx0aW50cm86IHtcblx0XHRcdGJhY2tncm91bmRJbWFnZTogXCJpbWFnZXMvYmdyLTAyLmpwZ1wiXG5cdFx0fSxcblx0XHRzZW5kbWFpbDoge1xuXHRcdFx0YmFja2dyb3VuZEltYWdlOiBcImltYWdlcy9iZ3ItMDEuanBnXCJcblx0XHR9LFxuXHRcdGNsb3NlQ2hhdDoge1xuXHRcdFx0YmFja2dyb3VuZEltYWdlOiBcImltYWdlcy9iZ3ItMDIuanBnXCJcblx0XHR9XG5cdH0sXG5cdGJ1dHRvblN0eWxlczoge1xuXHRcdG9ubGluZToge1xuXHRcdFx0YmFja2dyb3VuZENvbG9yOiAncmdiYSgxNzUsMjI5LDI1NSwwLjgpJyxcblx0XHRcdGNvbG9yOiAnJ1xuXHRcdH0sXG5cdFx0b2ZmbGluZToge1xuXHRcdFx0YmFja2dyb3VuZENvbG9yOiAncmdiYSgyNDEsMjQxLDI0MSwwLjgpJyxcblx0XHRcdGNvbG9yOiAnJ1xuXHRcdH0sXG5cdFx0dGltZW91dDoge1xuXHRcdFx0YmFja2dyb3VuZENvbG9yOiAncmdiYSgyNDEsMjQxLDI0MSwwLjgpJyxcblx0XHRcdGNvbG9yOiAnJ1xuXHRcdH0sXG5cdFx0bm90aWZpZWQ6IHtcblx0XHRcdGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjUzLDI1MCwxMjksMC44KScsXG5cdFx0XHRjb2xvcjogJydcblx0XHR9LFxuXHRcdGNvbG9yOiAnIzc3Nydcblx0fSxcblx0d2lkZ2V0V2luZG93T3B0aW9uczogJ2xlZnQ9MTAsdG9wPTEwLHdpZHRoPTM1MCxoZWlnaHQ9NTUwLHJlc2l6YWJsZScsXG5cdC8vIGFic29sdXRlIHBhdGggdG8gdGhlIHdjaGF0IGZvbGRlclxuXHRwYXRoOiAnL2lwY2Mvd2ViY2hhdC8nLFxuXHQvLyBhYnNvbHV0ZSBwYXRoIHRvIHRoZSBjbGllbnRzIGZpbGVzLiBJZiBub3Qgc2V0LCBmaWxlcyByZXF1ZXN0ZWQgZnJvbSBkZWZhdWx0cy5zZXJ2ZXIgKyBkZWZhdWx0cy5wYXRoLlxuXHRjbGllbnRQYXRoOiAnJyxcblx0Ly8gYWJzb2x1dGUgcGF0aCB0byB0aGUgY3NzIGZsaWVcblx0c3R5bGVzUGF0aDogJycsXG5cdC8vIGluIHNlY29uZHNcblx0Y2hlY2tTdGF0dXNUaW1lb3V0OiAzMCxcblx0Ly8gaW4gc2Vjb25kc1xuXHRnZXRNZXNzYWdlc1RpbWVvdXQ6IDEsXG5cdC8vIGRpc3BsYXllZCBpbiB0aGUgZW1haWwgdGVtcGxhdGVcblx0aG9zdDogd2luZG93LmxvY2F0aW9uLmhvc3QsXG5cdC8vIHdlYnJ0YyBvcHRpb25zXG5cdHdlYnJ0Yzoge1xuXHRcdHNpcDoge30sXG5cdFx0aG90bGluZTogJydcblx0fSxcblx0d2VicnRjRW5hYmxlZDogZmFsc2UsXG5cdGNhbGxiYWNrOiB7XG5cdFx0dGFzazogJydcblx0fVxufSxcblxuLy8gQ3VycmVudCB3aWRnZXQgc3RhdGVcbndpZGdldFN0YXRlID0ge1xuXHRpbml0aWF0ZWQ6IGZhbHNlLFxuXHRhY3RpdmU6IGZhbHNlLFxuXHRzdGF0ZTogJycsIC8vIFwib25saW5lXCIgfCBcIm9mZmxpbmVcIiB8IFwidGltZW91dFwiLFxuXHRzaGFyZTogZmFsc2Vcbn0sXG5kaWFsb2cgPSBbXSxcblxuLy8gYXZhaWxhYmxlIGRpYWxvZyBsYW5ndWFnZXNcbmxhbmdzID0gW10sXG5jdXJyTGFuZyA9ICcnLFxubWVzc2FnZXNUaW1lb3V0LFxubm9NZXNzYWdlc1RpbWVvdXQsXG5jaGF0VGltZW91dCxcbi8vIENvbnRhaW5lciBmb3IgbWVzc2FnZXNcbm1lc3NhZ2VzQ29udCxcbi8vIFdpZGdldCBkb20gZWxlbWVudFxud2lkZ2V0LFxuXG4vLyBXaWRnZXQgaW4gYSBzZXBhcmF0ZSB3aW5kb3dcbndpZGdldFdpbmRvdyxcbi8vIFdpZGdldCBwYW5lcyBlbGVtZW50c1xucGFuZXMsXG5hZ2VudElzVHlwaW5nVGltZW91dCxcbnVzZXJJc1R5cGluZ1RpbWVvdXQsXG50aW1lclVwZGF0ZUludGVydmFsLFxucG9sbFR1cm5zID0gMTtcbi8vIHJpbmdUb25lID0gbnVsbCxcbi8vIHJpbmdUb25lSW50ZXJ2YWwgPSBudWxsO1xuXG5mdW5jdGlvbiBXaWRnZXQob3B0aW9ucyl7XG5cblx0Xy5tZXJnZShkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cdC8vIF8uYXNzaWduKGRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcblxuXHRkZWJ1Zy5sb2coJ1dpZGdldDogJywgb3B0aW9ucyk7XG5cblx0ZGVmYXVsdHMuY2xpZW50UGF0aCA9IGRlZmF1bHRzLmNsaWVudFBhdGggfHwgKGRlZmF1bHRzLnNlcnZlciArIGRlZmF1bHRzLnBhdGgpO1xuXG5cdGFkZFdpZGdldFN0eWxlcygpO1xuXHRzZXJ2ZXJVcmwgPSByZXF1aXJlKCd1cmwnKS5wYXJzZShkZWZhdWx0cy5zZXJ2ZXIsIHRydWUpO1xuXG5cdGFwaSA9IG5ldyBjb3JlKG9wdGlvbnMpXG5cdC5vbignc2Vzc2lvbi9jcmVhdGUnLCBvblNlc3Npb25TdWNjZXNzKVxuXHQub24oJ3Nlc3Npb24vY29udGludWUnLCBvblNlc3Npb25TdWNjZXNzKVxuXHQub24oJ3Nlc3Npb24vam9pbicsIG9uU2Vzc2lvbkpvaW4pXG5cdC5vbignc2Vzc2lvbi9pbml0Jywgb25TZXNzaW9uSW5pdCk7XG5cdC8vIC5vbignY2hhdC9sYW5ndWFnZXMnLCBvbk5ld0xhbmd1YWdlcyk7XG5cdFxuXHRpZihkZWZhdWx0cy53aWRnZXQpIHtcblx0XHRhcGkub24oJ2NoYXQvc3RhcnQnLCBzdGFydENoYXQpXG5cdFx0Lm9uKCdjaGF0L2Nsb3NlJywgb25DaGF0Q2xvc2UpXG5cdFx0Lm9uKCdjaGF0L3RpbWVvdXQnLCBvbkNoYXRUaW1lb3V0KVxuXHRcdC5vbignbWVzc2FnZS9uZXcnLCBjbGVhclVuZGVsaXZlcmVkKVxuXHRcdC5vbignbWVzc2FnZS9uZXcnLCBuZXdNZXNzYWdlKVxuXHRcdC5vbignbWVzc2FnZS90eXBpbmcnLCBvbkFnZW50VHlwaW5nKVxuXG5cdFx0Lm9uKCdmb3JtL3N1Ym1pdCcsIG9uRm9ybVN1Ym1pdClcblx0XHQub24oJ2Zvcm0vcmVqZWN0JywgY2xvc2VGb3JtKVxuXHRcdC5vbignd2lkZ2V0L2xvYWQnLCBvbldpZGdldExvYWQpO1xuXHRcdC8vIC5vbignd2lkZ2V0L2luaXQnLCBvbldpZGdldEluaXQpO1xuXHRcdC8vIC5vbignd2lkZ2V0L3N0YXRlY2hhbmdlJywgY2hhbmdlV2dTdGF0ZSk7XG5cdH1cblxuXHRpZihkZWZhdWx0cy53ZWJydGMuc2lwLndzX3NlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiBXZWJSVEMuaXNTdXBwb3J0ZWQoKSkge1xuXHRcdGlmKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgc2VydmVyVXJsLnByb3RvY29sID09PSAnaHR0cHM6Jyl7XG5cdFx0XHQvLyBzZXQgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IHdlYnJ0YyBmZWF0dXJlIGlzIHN1cHBvcnRlZCBhbmQgZW5hYmxlZFxuXHRcdFx0ZGVmYXVsdHMud2VicnRjRW5hYmxlZCA9IHRydWU7XG5cblx0XHRcdC8vIHNldCB3ZWJydGMgZXZlbnQgaGFuZGxlcnNcblx0XHRcdGFwaS5vbignd2VicnRjL25ld1JUQ1Nlc3Npb24nLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRpbml0Q2FsbFN0YXRlKCduZXdSVENTZXNzaW9uJyk7XG5cdFx0XHR9KTtcblx0XHRcdGFwaS5vbignd2VicnRjL3Byb2dyZXNzJywgZnVuY3Rpb24oZSl7XG5cdFx0XHRcdGlmKGUucmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT09IDE4MCkge1xuXHRcdFx0XHRcdGluaXRDYWxsU3RhdGUoJ3JpbmdpbmcnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpbml0Q2FsbFN0YXRlKCdjb25maXJtZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRhcGkub24oJ3dlYnJ0Yy9hZGRzdHJlYW0nLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRpbml0Q2FsbFN0YXRlKCdjb25uZWN0ZWQnKTtcblx0XHRcdH0pO1xuXHRcdFx0YXBpLm9uKCd3ZWJydGMvZW5kZWQnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHRpbml0Q2FsbFN0YXRlKCdlbmRlZCcpO1xuXHRcdFx0fSk7XG5cdFx0XHRhcGkub24oJ3dlYnJ0Yy9mYWlsZWQnLCBmdW5jdGlvbihlKXtcblx0XHRcdFx0aWYoZS5jYXVzZSA9PT0gJ0NhbmNlbGVkJyl7XG5cdFx0XHRcdFx0aW5pdENhbGxTdGF0ZSgnY2FuY2VsZWQnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpbml0Q2FsbFN0YXRlKCdmYWlsZWQnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdC8vIHJpbmdUb25lIGF1ZGlvIGVsZW1lbnQgcGxheXMgcmluZ1RvbmUgc291bmQgd2hlbiBjYWxsaW5nIHRvIGFnZW50XG5cdFx0XHQvLyByaW5nVG9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5cdFx0XHQvLyByaW5nVG9uZS5zcmMgPSBkZWZhdWx0cy5jbGllbnRQYXRoKydzb3VuZHMvcmluZ291dC53YXYnO1xuXHRcdFx0Ly8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyaW5nVG9uZSk7XG5cblx0XHRcdC8vIGluaXRpYXRlIHdlYnJ0YyBtb2R1bGUgd2l0aCBwYXJhbWV0ZXJzXG5cdFx0XHRpbml0V2VicnRjTW9kdWxlKHtcblx0XHRcdFx0c2lwOiBkZWZhdWx0cy53ZWJydGMuc2lwLFxuXHRcdFx0XHRlbWl0OiBwdWJsaWNBcGkuZW1pdCxcblx0XHRcdFx0b246IHB1YmxpY0FwaS5vblxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHdlYnJ0YyBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIsIGJ1dCB0aGUgY3VycmVudCB3ZWIgcGFnZVxuXHRcdFx0Ly8gaXMgbG9jYXRlZCBvbiBpbnNlY3VyZSBvcmlnaW5zLCB0aGVyZWZvcmUgdGhlIHdlYnJ0YyBpcyBub3Qgc3VwcG9ydGVkXG5cdFx0XHRkZWJ1Zy53YXJuKCdXZWJSVEMgZmVhdHVyZSBpcyBkaXNhYmxlZCcpO1xuXHRcdFx0ZGVidWcud2FybignZ2V0VXNlck1lZGlhKCkgbm8gbG9uZ2VyIHdvcmtzIG9uIGluc2VjdXJlIG9yaWdpbnMuIFRvIHVzZSB0aGlzIGZlYXR1cmUsIHlvdSBzaG91bGQgY29uc2lkZXIgc3dpdGNoaW5nIHlvdXIgYXBwbGljYXRpb24gdG8gYSBzZWN1cmUgb3JpZ2luLCBzdWNoIGFzIEhUVFBTLiBTZWUgaHR0cHM6Ly9nb28uZ2wvclN0VEd6IGZvciBtb3JlIGRldGFpbHMuJyk7XG5cdFx0fVxuXHR9XG5cdFx0XG5cdHNldFNlc3Npb25UaW1lb3V0SGFuZGxlcigpO1xuXG5cdC8vIGxvYWQgdHJhbnNsYXRpb25zXG5cdHJlcXVlc3QuZ2V0KCdmcmFzZXMnLCBkZWZhdWx0cy5jbGllbnRQYXRoKyd0cmFuc2xhdGlvbnMuanNvbicsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCl7XG5cdFx0aWYoZXJyKSByZXR1cm4gYXBpLmVtaXQoJ0Vycm9yJywgZXJyKTtcblx0XHRmcmFzZXMgPSBKU09OLnBhcnNlKHJlc3VsdCk7XG5cdH0pO1xuXHRcblx0Ly8gbG9hZCBmb3Jtc1xuXHRyZXF1ZXN0LmdldCgnZm9ybXNfanNvbicsIGRlZmF1bHRzLmNsaWVudFBhdGgrJ2Zvcm1zLmpzb24nLCBmdW5jdGlvbiAoZXJyLCByZXN1bHQpe1xuXHRcdGlmKGVycikgcmV0dXJuIGFwaS5lbWl0KCdFcnJvcicsIGVycik7XG5cdFx0Zm9ybXMgPSBKU09OLnBhcnNlKHJlc3VsdCkuZm9ybXM7XG5cdH0pO1xuXG5cdHJlcXVlc3QuZ2V0KCdmb3Jtc190bXAnLCBkZWZhdWx0cy5jbGllbnRQYXRoKydwYXJ0aWFscy9mb3Jtcy5odG1sJywgZnVuY3Rpb24gKGVyciwgdGVtcGxhdGUpe1xuXHRcdGlmKGVycikgcmV0dXJuIGFwaS5lbWl0KCdFcnJvcicsIGVycik7XG5cdH0pO1xuXG5cdHJldHVybiBwdWJsaWNBcGk7XG59XG5cbnZhciBwdWJsaWNBcGkgPSB7XG5cblx0aW5pdE1vZHVsZTogaW5pdE1vZHVsZSxcblx0aW5pdFdpZGdldFN0YXRlOiBpbml0V2lkZ2V0U3RhdGUsXG5cdG9wZW5XaWRnZXQ6IG9wZW5XaWRnZXQsXG5cdGluaXRDaGF0OiBpbml0Q2hhdCxcblx0Z2V0V2lkZ2V0RWxlbWVudDogZ2V0V2lkZ2V0RWxlbWVudCxcblx0aXNXZWJydGNTdXBwb3J0ZWQ6IFdlYlJUQy5pc1N1cHBvcnRlZCxcblx0Z2V0RW50aXR5OiBmdW5jdGlvbigpeyByZXR1cm4gc3RvcmFnZS5nZXRTdGF0ZSgnZW50aXR5JywgJ3Nlc3Npb24nKTsgfSxcblx0b246IGZ1bmN0aW9uKGV2dCwgbGlzdGVuZXIpIHtcblx0XHRhcGkub24oZXZ0LCBsaXN0ZW5lcik7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cdGVtaXQ6IGZ1bmN0aW9uIChldnQsIGxpc3RlbmVyKXtcblx0XHRhcGkuZW1pdChldnQsIGxpc3RlbmVyKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0LyoqXG5cdCAqIFNldCBkZWZhdWx0IHVzZXIgY3JlZGVudGlhbHMuXG5cdCAqIElmIFwiaW50cm9cIiBpcyBmYWxzZSwgdGhhbiBkaWFsb2cgd2lsbCBzdGFydCB3aXRoIHRoZXNlIGNyZWRlbnRpYWxzLlxuXHQgKiBOT1RFOiBNdXN0IGJlIGNhbGxlZCBiZWZvcmUgaW5pdE1vZHVsZSBtZXRob2Rcblx0ICogXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBVc2VyIGNyZWRlbnRpYWxzLCBpLmUuIFwidW5hbWVcIiwgXCJsYW5nXCIsIFwicGhvbmVcIiwgXCJzdWJqZWN0XCJcblx0ICovXG5cdHNldERlZmF1bHRDcmVkZW50aWFsczogZnVuY3Rpb24ocGFyYW1zKSB7XG5cdFx0ZGVmYXVsdHMuY3JlZGVudGlhbHMgPSBwYXJhbXM7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cbmZ1bmN0aW9uIGluaXRNb2R1bGUoKXtcblx0YXBpLmluaXRNb2R1bGUoKTtcblx0cmV0dXJuIHB1YmxpY0FwaTtcbn1cblxuZnVuY3Rpb24gaW5pdFdlYnJ0Y01vZHVsZShvcHRzKXtcblx0ZGVidWcubG9nKCdpbml0V2VicnRjTW9kdWxlOiAnLCBvcHRzKTtcblx0V2ViUlRDLmluaXQob3B0cyk7XG59XG5cbi8vIFNlc3Npb24gaXMgZWl0aGVyIGNyZWF0ZWQgb3IgY29udGludWVzXG5mdW5jdGlvbiBvblNlc3Npb25TdWNjZXNzKCl7XG5cblx0Ly8gV2FpdCB3aGlsZSB0cmFuc2xhdGlvbnMgYXJlIGxvYWRlZFxuXHRfLnBvbGwoZnVuY3Rpb24oKXtcblxuXHRcdHJldHVybiAoZnJhc2VzICE9PSBudWxsKTtcblxuXHR9LCBmdW5jdGlvbigpe1xuXHRcdFxuXHRcdC8vIHNldCBjdXJyZW50IHVzZXIgbGFuZ3VhZ2Vcblx0XHRjdXJyTGFuZyA9IGN1cnJMYW5nIHx8IGRldGVjdExhbmd1YWdlKCk7XG5cdFx0c2V0U2Vzc2lvblRpbWVvdXRIYW5kbGVyKCk7XG5cblx0XHQvLyBJZiBwYWdlIGxvYWRlZCBhbmQgXCJ3aWRnZXRcIiBwcm9wZXJ0eSBpcyBzZXQgLSBsb2FkIHdpZGdldFxuXHRcdGlmKGRlZmF1bHRzLndpZGdldCAmJiAhd2lkZ2V0U3RhdGUuaW5pdGlhdGVkICYmIGlzQnJvd3NlclN1cHBvcnRlZCgpKSB7XG5cdFx0XHRsb2FkV2lkZ2V0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGltZW91dCB3YXMgb2NjdXJlZCwgaW5pdCBjaGF0IGFmdGVyIGEgc2Vzc2lvbiBpcyBjcmVhdGVkXG5cdFx0aWYoaGFzV2dTdGF0ZSgndGltZW91dCcpKSB7XG5cdFx0XHRyZW1vdmVXZ1N0YXRlKCd0aW1lb3V0Jyk7XG5cdFx0XHRnZXRMYW5ndWFnZXMoKTtcblx0XHR9XG5cblx0XHQvLyBpZiB3aW5kb3cgaXMgbm90IGEgb3BlbmVkIHdpbmRvd1xuXHRcdGlmKCFkZWZhdWx0cy5leHRlcm5hbCkge1xuXHRcdFx0YXBpLnVwZGF0ZVVybCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG5cblx0XHRcdGluaXRDb2Jyb3dzaW5nTW9kdWxlKHtcblx0XHRcdFx0dXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcblx0XHRcdFx0ZW50aXR5OiBzdG9yYWdlLmdldFN0YXRlKCdlbnRpdHknLCAnc2Vzc2lvbicpLFxuXHRcdFx0XHR3aWRnZXQ6ICcjJytkZWZhdWx0cy5wcmVmaXgrJy13Zy1jb250J1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0YXBpLmVtaXQoJ3Nlc3Npb24vaW5pdCcsIHtvcHRpb25zOiBkZWZhdWx0cywgdXJsOiBnbG9iYWwubG9jYXRpb24uaHJlZiB9KTtcblxuXHR9LCBmdW5jdGlvbigpe1xuXHRcdFxuXHRcdGlmKHBvbGxUdXJucyA8IDIpIHtcblx0XHRcdHBvbGxUdXJucysrO1xuXHRcdFx0V2lkZ2V0KGRlZmF1bHRzKS5pbml0TW9kdWxlKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBhcGkuZW1pdCgnRXJyb3InLCAnTW9kdWxlIHdhc25cXCd0IGluaXRpYXRlZCBkdWUgdG8gbmV0d29yayBlcnJvcnMnKTtcblx0XHR9XG5cblx0fSwgNjAwMDApO1x0XHRcblxufVxuXG5mdW5jdGlvbiBvblNlc3Npb25Jbml0KCl7XG5cdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdpbml0JywgdHJ1ZSwgJ3Nlc3Npb24nKTtcblx0aWYod2lkZ2V0V2luZG93ICYmICF3aWRnZXRXaW5kb3cuY2xvc2VkKSB3aWRnZXRXaW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShkZWZhdWx0cy5wcmVmaXgrJy5pbml0JywgdHJ1ZSk7XG59XG5cbi8vIHNlbmQgc2hhcmVkIGV2ZW50IHRvIHRoZSB1c2VyJ3MgYnJvd3NlclxuZnVuY3Rpb24gb25TZXNzaW9uSm9pbihwYXJhbXMpe1xuXHQvLyBkZWJ1Zy5sb2coJ29uU2Vzc2lvbkpvaW46ICcsIHBhcmFtcyk7XG5cdGluaXRDb2Jyb3dzaW5nTW9kdWxlKHsgdXJsOiBwYXJhbXMudXJsLCBlbnRpdHk6IHN0b3JhZ2UuZ2V0U3RhdGUoJ2VudGl0eScsICdzZXNzaW9uJykgfSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRXaWRnZXQoY2Ipe1xuXHQvLyBkZWJ1Zy5sb2coJ2xvYWQgd2lkZ2V0IScpO1xuXHR2YXIgY29tcGlsZWQ7XG5cdHJlcXVlc3QuZ2V0KCd3aWRnZXRfdG1wJywgZGVmYXVsdHMuY2xpZW50UGF0aCsnd2lkZ2V0Lmh0bWwnLCBmdW5jdGlvbiAoZXJyLCBib2R5KXtcblx0XHRpZihlcnIpIHJldHVybjtcblx0XHRjb21waWxlZCA9IGNvbXBpbGVUZW1wbGF0ZShib2R5LCB7XG5cdFx0XHRkZWZhdWx0czogZGVmYXVsdHMsXG5cdFx0XHRsYW5ndWFnZXM6IGxhbmdzLFxuXHRcdFx0dHJhbnNsYXRpb25zOiBmcmFzZXMsXG5cdFx0XHRjdXJyTGFuZzogY3VyckxhbmcgfHwgZGVmYXVsdHMubGFuZyxcblx0XHRcdGNyZWRlbnRpYWxzOiBzdG9yYWdlLmdldFN0YXRlKCdjcmVkZW50aWFscycsICdzZXNzaW9uJykgfHwge30sXG5cdFx0XHRfOiBfXG5cdFx0fSk7XG5cblx0XHQvLyBXaWRnZXQgdmFyaWFibGUgYXNzaWdubWVudFxuXHRcdHdpZGdldCA9IGRvbWlmeShjb21waWxlZCk7XG5cdFx0Ly8gZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUod2lkZ2V0LCBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpO1xuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQod2lkZ2V0KTtcblx0XHRhcGkuZW1pdCgnd2lkZ2V0L2xvYWQnLCB3aWRnZXQpO1xuXG5cdH0pO1xufVxuXG5mdW5jdGlvbiBvbldpZGdldExvYWQod2lkZ2V0KXtcblx0ZGVidWcubG9nKCd3aWRnZXQgbG9hZGVkIScpO1xuXHRcblx0aWYoZGVmYXVsdHMuYnV0dG9uRWxlbWVudCkgXG5cdFx0ZGVmYXVsdHMuYnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHB1YmxpY0FwaS5vcGVuV2lkZ2V0LCBmYWxzZSk7XG5cblx0YXBpLm9uY2UoJ2NoYXQvbGFuZ3VhZ2VzJywgaW5pdFdpZGdldCk7XG5cdGdldExhbmd1YWdlcygpO1xuXHQvLyBpbml0V2lkZ2V0KCk7XG59XG5cbmZ1bmN0aW9uIGluaXRDb2Jyb3dzaW5nTW9kdWxlKHBhcmFtcyl7XG5cdC8vIGluaXQgY29icm93c2luZyBtb2R1bGUgb25seSBvbiBtYWluIHdpbmRvd1xuXHRpZihkZWZhdWx0cy5leHRlcm5hbCkgcmV0dXJuO1xuXG5cdGFwaS5vbignY29icm93c2luZy9pbml0JywgZnVuY3Rpb24oKXtcblx0XHRpZihzdG9yYWdlLmdldFN0YXRlKCdzaGFyZWQnLCAnc2Vzc2lvbicpIHx8IHBhcmFtcy5lbnRpdHkgPT09ICdhZ2VudCcpIGNvYnJvd3Npbmcuc2hhcmUoKTtcblx0XHQvLyBjb2Jyb3dzaW5nLmVtaXRFdmVudHMoKTtcblx0fSk7XG5cdGFwaS5vbignY29icm93c2luZy9ldmVudCcsIGZ1bmN0aW9uKHBhcmFtcyl7XG5cdFx0YXBpLnVwZGF0ZUV2ZW50cyhwYXJhbXMuZXZlbnRzLCBmdW5jdGlvbihlcnIsIHJlc3VsdCl7XG5cdFx0XHRpZihlcnIpIHJldHVybjtcblx0XHRcdGNvYnJvd3NpbmcudXBkYXRlRXZlbnRzKHJlc3VsdCk7XG5cdFx0fSk7XG5cdH0pO1xuXG5cdGFwaS5vbignY29icm93c2luZy9zaGFyZWQnLCBmdW5jdGlvbigpe1xuXHRcdGlmKCFzdG9yYWdlLmdldFN0YXRlKCdzaGFyZWQnLCAnc2Vzc2lvbicpICYmIHBhcmFtcy5lbnRpdHkgPT09ICd1c2VyJykge1xuXHRcdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ3NoYXJlZCcsIHRydWUsICdzZXNzaW9uJyk7XG5cdFx0XHRhcGkuc3dpdGNoU2hhcmVTdGF0ZSh0cnVlLCBwYXJhbXMudXJsKTtcblx0XHR9XG5cdFx0YXBpLnVwZGF0ZUV2ZW50cyhbeyBlbnRpdHk6IHBhcmFtcy5lbnRpdHksIHVybDogcGFyYW1zLnVybCwgc2hhcmVkOiB0cnVlIH1dLCBmdW5jdGlvbihlcnIsIHJlc3VsdCl7XG5cdFx0XHQvLyBpZihlcnIpIHJldHVybjtcblx0XHRcdHJlc3VsdC5oaXN0b3J5RXZlbnRzID0gdHJ1ZTtcblx0XHRcdC8vIGRlYnVnLmxvZygnY29icm93c2luZyB1cGRhdGU6ICcsIHJlc3VsdCk7XG5cdFx0XHRjb2Jyb3dzaW5nLnVwZGF0ZUV2ZW50cyhyZXN1bHQpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHRhcGkub24oJ2NvYnJvd3NpbmcvdW5zaGFyZWQnLCBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdzaGFyZWQnLCBmYWxzZSwgJ3Nlc3Npb24nKTtcblx0XHRhcGkudXBkYXRlRXZlbnRzKFt7IGVudGl0eTogcGFyYW1zLmVudGl0eSwgdXJsOiBwYXJhbXMudXJsLCBzaGFyZWQ6IGZhbHNlIH1dLCBmdW5jdGlvbihlcnIsIHJlc3VsKXtcblx0XHRcdC8vIGlmKGVycikgcmV0dXJuO1xuXHRcdFx0aWYocGFyYW1zLmVudGl0eSA9PT0gJ3VzZXInKSBhcGkuc3dpdGNoU2hhcmVTdGF0ZShmYWxzZSwgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXHRcdFx0ZWxzZSBjb2Jyb3dzaW5nLnVuc2hhcmVBbGwoKTtcblx0XHR9KTtcblx0fSk7XG5cdFxuXHRjb2Jyb3dzaW5nLmluaXQoe1xuXHRcdHdpZGdldDogcGFyYW1zLndpZGdldCxcblx0XHRlbnRpdHk6IHBhcmFtcy5lbnRpdHksXG5cdFx0ZW1pdDogcHVibGljQXBpLmVtaXQsXG5cdFx0cGF0aDogZGVmYXVsdHMuY2xpZW50UGF0aFxuXHR9KTtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkZ2V0RWxlbWVudCgpe1xuXHRyZXR1cm4gd2lkZ2V0O1xufVxuXG5mdW5jdGlvbiBnZXRMYW5ndWFnZXMoKXtcblx0YXBpLmdldExhbmd1YWdlcyhmdW5jdGlvbiAoZXJyLCBib2R5KXtcblx0XHRpZihlcnIpIHJldHVybjtcblx0XHRpZihib2R5KSBvbk5ld0xhbmd1YWdlcyhib2R5LnJlc3VsdCk7XG5cdFx0c2V0VGltZW91dChnZXRMYW5ndWFnZXMsIGRlZmF1bHRzLmNoZWNrU3RhdHVzVGltZW91dCoxMDAwKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIG9uTmV3TGFuZ3VhZ2VzKGxhbmd1YWdlcyl7XG5cdC8vIGRlYnVnLmxvZygnbGFuZ3VhZ2VzOiAnLCBsYW5ndWFnZXMpO1xuXHR2YXIgc3RhdGUgPSBsYW5ndWFnZXMubGVuZ3RoID8gJ29ubGluZScgOiAnb2ZmbGluZScsXG5cdG9wdGlvbnMgPSAnJywgc2VsZWN0ZWQ7XG5cblx0Ly8gaWYoaGFzV2dTdGF0ZShzdGF0ZSkpIHJldHVybjtcblx0aWYod2lkZ2V0U3RhdGUuc3RhdGUgPT09IHN0YXRlKSByZXR1cm47XG5cdFxuXHRsYW5ncyA9IGxhbmd1YWdlcztcblxuXHRpZih3aWRnZXQgJiYgZGVmYXVsdHMuaW50cm8ubGVuZ3RoKSB7XG5cdFx0Ly8gQWRkIGxhbmd1YWdlcyB0byB0aGUgdGVtcGxhdGVcblx0XHRsYW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGxhbmcpIHtcblx0XHRcdGlmKGZyYXNlc1tsYW5nXSAmJiBmcmFzZXNbbGFuZ10ubGFuZykge1xuXHRcdFx0XHRzZWxlY3RlZCA9IGxhbmcgPT09IGN1cnJMYW5nID8gJ3NlbGVjdGVkJyA6ICcnO1xuXHRcdFx0XHRvcHRpb25zICs9ICc8b3B0aW9uIHZhbHVlPVwiJytsYW5nKydcIiAnK3NlbGVjdGVkKycgPicrZnJhc2VzW2xhbmddLmxhbmcrJzwvb3B0aW9uPic7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Z2xvYmFsW2RlZmF1bHRzLnByZWZpeCsnSW50cm9Gb3JtJ10ubGFuZy5pbm5lckhUTUwgPSBvcHRpb25zO1xuXHR9XG5cblx0Y2hhbmdlV2dTdGF0ZSh7IHN0YXRlOiBzdGF0ZSB9KTtcblx0YXBpLmVtaXQoJ2NoYXQvbGFuZ3VhZ2VzJywgbGFuZ3VhZ2VzKTtcbn1cblxuZnVuY3Rpb24gaW5pdFdpZGdldCgpe1xuXHQvLyBkZWJ1Zy5sb2coJ0luaXQgd2lkZ2V0IScpO1xuXHR3aWRnZXRTdGF0ZS5pbml0aWF0ZWQgPSB0cnVlO1xuXG5cdHNldExpc3RlbmVycyh3aWRnZXQpO1xuXHRjaGFuZ2VXZ1N0YXRlKHsgc3RhdGU6IHdpZGdldFN0YXRlLnN0YXRlIH0pO1xuXG5cdGlmKGRlZmF1bHRzLmhpZGVPZmZsaW5lQnV0dG9uKSB7XG5cdFx0YWRkV2dTdGF0ZSgnbm8tYnV0dG9uJyk7XG5cdH1cblxuXHRpZihkZWZhdWx0cy5vZmZlcikge1xuXHRcdHNldE9mZmVyKCk7XG5cdH1cblxuXHQvLyBpZiBjaGF0IHN0YXJ0ZWRcblx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcpID09PSB0cnVlKSB7XG5cdFx0cmVxdWVzdENoYXQoc3RvcmFnZS5nZXRTdGF0ZSgnY3JlZGVudGlhbHMnLCAnc2Vzc2lvbicpIHx8IHt9KTtcblx0XHRzaG93V2lkZ2V0KCk7XG5cdFx0Ly8gaW5pdENoYXQoKTtcblx0fVxuXG5cdC8vIGlmIHdlYnJ0YyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIHdzX3NlcnZlcnMgcGFyYW1ldGVyIGlzIHNldCAtIGNoYW5nZSBidXR0b24gaWNvblxuXHRpZihkZWZhdWx0cy53ZWJydGNFbmFibGVkKSB7XG5cdFx0YWRkV2dTdGF0ZSgnd2VicnRjLWVuYWJsZWQnKTtcblx0fVxuXG5cdC8vIFdpZGdldCBpcyBpbml0aWF0ZWRcblx0YXBpLmVtaXQoJ3dpZGdldC9pbml0Jyk7XG59XG5cbmZ1bmN0aW9uIHNldE9mZmVyKCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdHNob3dPZmZlcih7XG5cdFx0XHRmcm9tOiBkZWZhdWx0cy5vZmZlci5mcm9tIHx8IGZyYXNlc1tjdXJyTGFuZ10uVE9QX0JBUi50aXRsZSxcblx0XHRcdHRpbWU6IERhdGUubm93KCksXG5cdFx0XHR0ZXh0OiBkZWZhdWx0cy5vZmZlci50ZXh0IHx8IGZyYXNlc1tjdXJyTGFuZ10uZGVmYXVsdF9vZmZlclxuXHRcdH0pO1xuXHR9LCBkZWZhdWx0cy5vZmZlci5pblNlY29uZHMgPyBkZWZhdWx0cy5vZmZlci5pblNlY29uZHMqMTAwMCA6IDMwMDAwKTtcbn1cblxuZnVuY3Rpb24gc2hvd09mZmVyKG1lc3NhZ2UpIHtcblx0Ly8gUmV0dXJuIGlmIHVzZXIgYWxyZWFkeSBpbnRlcmFjdCB3aXRoIHRoZSB3aWRnZXRcblx0aWYod2lkZ2V0U3RhdGUuc3RhdGUgIT09ICdvbmxpbmUnIHx8IGlzSW50ZXJhY3RlZCgpKSByZXR1cm47XG5cdG5ld01lc3NhZ2UoeyBtZXNzYWdlczogW21lc3NhZ2VdIH0pO1xufVxuXG5mdW5jdGlvbiBzZXRJbnRlcmFjdGVkKCl7XG5cdGlmKCFzdG9yYWdlLmdldFN0YXRlKCdpbnRlcmFjdGVkJywgJ3Nlc3Npb24nKSkge1xuXHRcdHN0b3JhZ2Uuc2F2ZVN0YXRlKCdpbnRlcmFjdGVkJywgdHJ1ZSwgJ3Nlc3Npb24nKTtcblx0fVxufVxuXG5mdW5jdGlvbiBpc0ludGVyYWN0ZWQoKXtcblx0cmV0dXJuIHN0b3JhZ2UuZ2V0U3RhdGUoJ2ludGVyYWN0ZWQnLCAnc2Vzc2lvbicpO1xufVxuXG5mdW5jdGlvbiBpbml0Q2hhdCgpe1xuXHRzaG93V2lkZ2V0KCk7XG5cblx0Ly8gLy8gaWYgY2hhdCBhbHJlYWR5IHN0YXJ0ZWQgYW5kIHdpZGdldCB3YXMgbWluaW1pemVkIC0ganVzdCBzaG93IHRoZSB3aWRnZXRcblx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcsICdjYWNoZScpKSByZXR1cm47XG5cblx0aWYoIWxhbmdzLmxlbmd0aCkge1xuXHRcdHN3aXRjaFBhbmUoJ3NlbmRlbWFpbCcpO1xuXHR9IGVsc2UgaWYoZGVmYXVsdHMuaW50cm8ubGVuZ3RoKSB7XG5cdFx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcpKSB7XG5cdFx0XHRyZXF1ZXN0Q2hhdChzdG9yYWdlLmdldFN0YXRlKCdjcmVkZW50aWFscycsICdzZXNzaW9uJykpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzd2l0Y2hQYW5lKCdjcmVkZW50aWFscycpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRyZXF1ZXN0Q2hhdCh7IGxhbmc6IGN1cnJMYW5nIH0pO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlcXVlc3RDaGF0KGNyZWRlbnRpYWxzKXtcblx0aWYoIWNyZWRlbnRpYWxzLnVuYW1lKSBjcmVkZW50aWFscy51bmFtZSA9IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpLnNwbGl0KCdfJylbMF07XG5cdFxuXHQvLyBTYXZlIHVzZXIgbGFuZ3VhZ2UgYmFzZWQgb24gcHJlZmVyYWJsZSBkaWFsb2cgbGFuZ3VhZ2Vcblx0aWYoY3JlZGVudGlhbHMubGFuZyAmJiBjcmVkZW50aWFscy5sYW5nICE9PSBjdXJyTGFuZyApIHtcblx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnbGFuZycsIGNyZWRlbnRpYWxzLmxhbmcpO1xuXHR9XG5cdGlmKCFjcmVkZW50aWFscy5sYW5nKSB7XG5cdFx0Y3JlZGVudGlhbHMubGFuZyA9IGN1cnJMYW5nO1xuXHR9XG5cdFxuXHQvLyBTYXZlIGNyZWRlbnRpYWxzIGZvciBjdXJyZW50IHNlc3Npb25cblx0Ly8gSXQgd2lsbCBiZSByZW1vdmVkIG9uIHNlc3Npb24gdGltZW91dFxuXHRzdG9yYWdlLnNhdmVTdGF0ZSgnY3JlZGVudGlhbHMnLCBjcmVkZW50aWFscywgJ3Nlc3Npb24nKTtcblxuXHRhcGkuY2hhdFJlcXVlc3QoY3JlZGVudGlhbHMpO1xuXHRzd2l0Y2hQYW5lKCdtZXNzYWdlcycpO1xufVxuXG5mdW5jdGlvbiBzdGFydENoYXQocGFyYW1zKXtcblx0c3RvcmFnZS5zYXZlU3RhdGUoJ2NoYXQnLCB0cnVlKTtcblx0aWYocGFyYW1zLnRpbWVvdXQpIHtcblx0XHQvLyBkZWJ1Zy5sb2coJ2NoYXQgdGltZW91dDogJywgcGFyYW1zLnRpbWVvdXQpO1xuXHRcdGNoYXRUaW1lb3V0ID0gYXBpLnNldENoYXRUaW1lb3V0KHBhcmFtcy50aW1lb3V0KTtcblx0fVxuXHRnZXRNZXNzYWdlcygpO1xuXHRhZGRXZ1N0YXRlKCdjaGF0Jyk7XG59XG5cbmZ1bmN0aW9uIGdldE1lc3NhZ2VzKCl7XG5cdC8vIGRlYnVnLmxvZygnZ2V0IG1lc3NhZ2VzIScpO1xuXHRcblx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcpKVxuXHRcdG5vTWVzc2FnZXNUaW1lb3V0ID0gc2V0VGltZW91dChnZXRNZXNzYWdlcywgNjAqMTAwMCk7XG5cdFxuXHRhcGkuZ2V0TWVzc2FnZXMoZnVuY3Rpb24ocmVzdWx0KSB7XG5cdFx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcpKSB7XG5cdFx0XHRtZXNzYWdlc1RpbWVvdXQgPSBzZXRUaW1lb3V0KGdldE1lc3NhZ2VzLCBkZWZhdWx0cy5nZXRNZXNzYWdlc1RpbWVvdXQqMTAwMCk7XG5cdFx0XHRjbGVhclRpbWVvdXQobm9NZXNzYWdlc1RpbWVvdXQpO1xuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKG1lc3NhZ2Upe1xuXHRhcGkuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG5cdG5ld01lc3NhZ2UoeyBtZXNzYWdlczogW3tcblx0XHRmcm9tOiBzdG9yYWdlLmdldFN0YXRlKCdjcmVkZW50aWFscycsICdzZXNzaW9uJykudW5hbWUsXG5cdFx0dGltZTogRGF0ZS5ub3coKSxcblx0XHR0ZXh0OiBtZXNzYWdlLFxuXHRcdGhpZGRlbjogdHJ1ZSxcblx0XHRjbGFzc05hbWU6IGRlZmF1bHRzLnByZWZpeCsnLW1zZy11bmRlbGl2ZXJlZCdcblx0fV0gfSk7XG5cdGlmKGNoYXRUaW1lb3V0KSBjbGVhclRpbWVvdXQoY2hhdFRpbWVvdXQpO1xufVxuXG5mdW5jdGlvbiBuZXdNZXNzYWdlKHJlc3VsdCl7XG5cdC8vIGRlYnVnLmxvZygnbmV3IG1lc3NhZ2VzIGFycml2ZWQhJywgcmVzdWx0KTtcblxuXHR2YXIgc3RyLFxuXHRcdGVscyA9IFtdLFxuXHRcdHRleHQsXG5cdFx0Y29tcGlsZWQsXG5cdFx0ZGVmYXVsdFVuYW1lID0gZmFsc2UsXG5cdFx0Y3JlZGVudGlhbHMgPSBzdG9yYWdlLmdldFN0YXRlKCdjcmVkZW50aWFscycsICdzZXNzaW9uJykgfHwge30sXG5cdFx0YW5hbWUgPSBzdG9yYWdlLmdldFN0YXRlKCdhbmFtZScsICdzZXNzaW9uJyksXG5cdFx0dW5hbWUgPSBjcmVkZW50aWFscy51bmFtZSA/IGNyZWRlbnRpYWxzLnVuYW1lIDogJyc7XG5cblx0aWYodW5hbWUgPT09IHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpLnNwbGl0KCdfJylbMF0pIHtcblx0XHRkZWZhdWx0VW5hbWUgPSB0cnVlO1xuXHR9XG5cblx0cmVzdWx0Lm1lc3NhZ2VzLmZvckVhY2goZnVuY3Rpb24obWVzc2FnZSwgaW5kZXgpIHtcblx0XHRcblx0XHRtZXNzYWdlLmVudGl0eSA9IG1lc3NhZ2UuZnJvbSA9PT0gdW5hbWUgPyAndXNlcicgOiAnYWdlbnQnO1xuXHRcdG1lc3NhZ2UuZnJvbSA9IChtZXNzYWdlLmVudGl0eSA9PT0gJ3VzZXInICYmIGRlZmF1bHRVbmFtZSkgPyBmcmFzZXNbY3VyckxhbmddLmRlZmF1bHRfdXNlcl9uYW1lIDogbWVzc2FnZS5mcm9tO1xuXHRcdG1lc3NhZ2UudGltZSA9IG1lc3NhZ2UudGltZSA/IHBhcnNlVGltZShtZXNzYWdlLnRpbWUpIDogcGFyc2VUaW1lKERhdGUubm93KCkpO1xuXG5cdFx0dGV4dCA9IHBhcnNlTWVzc2FnZShtZXNzYWdlLnRleHQsIG1lc3NhZ2UuZmlsZSwgbWVzc2FnZS5lbnRpdHkpO1xuXG5cdFx0aWYodGV4dC50eXBlID09PSAnZm9ybScpIHtcblx0XHRcdHJlcXVlc3QuZ2V0KCdmb3Jtc190bXAnLCBkZWZhdWx0cy5jbGllbnRQYXRoKydwYXJ0aWFscy9mb3Jtcy5odG1sJywgZnVuY3Rpb24gKGVyciwgdGVtcGxhdGUpe1xuXHRcdFx0XHRpZihlcnIpIHJldHVybiBjYihlcnIpO1xuXG5cdFx0XHRcdGNvbXBpbGVkID0gY29tcGlsZVRlbXBsYXRlKHRlbXBsYXRlLCB7XG5cdFx0XHRcdFx0ZGVmYXVsdHM6IGRlZmF1bHRzLFxuXHRcdFx0XHRcdG1lc3NhZ2U6IG1lc3NhZ2UsXG5cdFx0XHRcdFx0Zm9ybTogdGV4dC5jb250ZW50LFxuXHRcdFx0XHRcdGNyZWRlbnRpYWxzOiBjcmVkZW50aWFscyxcblx0XHRcdFx0XHRmcmFzZXM6IGZyYXNlc1soY3VyckxhbmcgfHwgZGVmYXVsdHMubGFuZyldLFxuXHRcdFx0XHRcdF86IF9cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmKGdsb2JhbFt0ZXh0LmNvbnRlbnQubmFtZV0pIGNsb3NlRm9ybSh7IGZvcm1OYW1lOiB0ZXh0LmNvbnRlbnQubmFtZSB9KTtcblx0XHRcdFx0bWVzc2FnZXNDb250Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJzxsaT4nK2NvbXBpbGVkKyc8L2xpPicpO1xuXHRcdFx0XHRtZXNzYWdlc0NvbnQuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250LnNjcm9sbEhlaWdodDtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtZXNzYWdlLnRleHQgPSB0ZXh0LmNvbnRlbnQ7XG5cdFx0XHRjb21waWxlZCA9IGNvbXBpbGVUZW1wbGF0ZShtZXNzYWdlVGVtcGxhdGUoKSwgbWVzc2FnZSk7XG5cdFx0XHRtZXNzYWdlc0NvbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAnPGxpICcrKG1lc3NhZ2UuY2xhc3NOYW1lID8gJ2NsYXNzPVwiJyttZXNzYWdlLmNsYXNzTmFtZSsnXCInIDogJycgKSsnPicrY29tcGlsZWQrJzwvbGk+Jyk7XG5cblx0XHRcdGlmKGluZGV4ID09PSByZXN1bHQubWVzc2FnZXMubGVuZ3RoLTEpIHtcblx0XHRcdFx0b25MYXN0TWVzc2FnZShjb21waWxlZCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5lZWQgZm9yIHNlbmRpbmcgZGlhbG9nIHRvIGVtYWlsXG5cdFx0XHRpZighbWVzc2FnZS5oaWRkZW4pIGRpYWxvZy5wdXNoKGNvbXBpbGVkKTtcblx0XHR9XG5cblx0XHQvLyBTYXZlIGFnZW50IG5hbWVcblx0XHRpZihtZXNzYWdlLmVudGl0eSA9PT0gJ2FnZW50JyAmJiBhbmFtZSAhPT0gbWVzc2FnZS5mcm9tKSB7XG5cdFx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnYW5hbWUnLCBtZXNzYWdlLmZyb20sICdzZXNzaW9uJyk7XG5cdFx0fVxuXG5cdH0pO1xuXG5cdG1lc3NhZ2VzQ29udC5zY3JvbGxUb3AgPSBtZXNzYWdlc0NvbnQuc2Nyb2xsSGVpZ2h0O1xufVxuXG5mdW5jdGlvbiBjbGVhclVuZGVsaXZlcmVkKCl7XG5cdHZhciB1bmRlbGl2ZXJlZCA9IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLicrZGVmYXVsdHMucHJlZml4KyctbXNnLXVuZGVsaXZlcmVkJykpO1xuXHRpZih1bmRlbGl2ZXJlZCAmJiB1bmRlbGl2ZXJlZC5sZW5ndGgpIHtcblx0XHR1bmRlbGl2ZXJlZC5mb3JFYWNoKGZ1bmN0aW9uKG1zZyl7XG5cdFx0XHRtc2cuY2xhc3NMaXN0LmFkZChkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHR9KTtcblx0fVxufVxuXG4vKipcbiAqIFZpc3VhbCBub3RpZmljYXRpb24gYWJvdXQgYSBuZXcgbWVzc2FnZSBmb21yIGFnZW50LlxuICogSXQgaXMgYWxzbyB1c2VkIGZvciBvZmZlciBub3RpZmljYXRpb25cbiAqIFxuICogQHBhcmFtICB7U3RyaW5nfSBtZXNzYWdlIC0gTmV3IG1lc3NhZ2UgY29udGVudCBcbiAqL1xuZnVuY3Rpb24gb25MYXN0TWVzc2FnZShtZXNzYWdlKXtcblx0dmFyIGxhc3RNc2c7XG5cdGlmKCF3aWRnZXRTdGF0ZS5hY3RpdmUpIHtcblx0XHRsYXN0TXNnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctbGFzdG1zZycpO1xuXG5cdFx0UHJlZml4ZWRFdmVudChsYXN0TXNnLCAnYW5pbWF0aW9uZW5kJywgW1wid2Via2l0XCIsIFwibW96XCIsIFwiTVNcIiwgXCJvXCIsIFwiXCJdLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRidG4uY2hpbGRyZW5bMF0uc3R5bGUuaGVpZ2h0ID0gZS50YXJnZXQuc2Nyb2xsSGVpZ2h0ICsgJ3B4Jztcblx0XHR9KTtcblxuXHRcdGxhc3RNc2cuaW5uZXJIVE1MID0gbWVzc2FnZTtcblx0XHQvLyBjaGFuZ2VXZ1N0YXRlKHsgc3RhdGU6ICdub3RpZmllZCcgfSk7XG5cdFx0YWRkV2dTdGF0ZSgnbm90aWZpZWQnKTtcblx0XHRzZXRCdXR0b25TdHlsZSgnbm90aWZpZWQnKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjb21waWxlRW1haWwoY29udGVudCwgY2IpIHtcblx0dmFyIGNvbXBpbGVkO1xuXHRyZXF1ZXN0LmdldCgnZW1haWxfdG1wJywgZGVmYXVsdHMuY2xpZW50UGF0aCsncGFydGlhbHMvZW1haWwuaHRtbCcsIGZ1bmN0aW9uIChlcnIsIGJvZHkpe1xuXHRcdGlmKGVycikgcmV0dXJuIGNiKGVycik7XG5cblx0XHRjb21waWxlZCA9IGNvbXBpbGVUZW1wbGF0ZShib2R5LCB7XG5cdFx0XHRkZWZhdWx0czogZGVmYXVsdHMsXG5cdFx0XHRjb250ZW50OiBjb250ZW50LFxuXHRcdFx0ZnJhc2VzOiBmcmFzZXNbKGN1cnJMYW5nIHx8IGRlZmF1bHRzLmxhbmcpXSxcblx0XHRcdF86IF9cblx0XHR9KTtcblxuXHRcdGlmKGNiKSByZXR1cm4gY2IobnVsbCwgY29tcGlsZWQpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gc2VuZERpYWxvZyhwYXJhbXMpe1xuXHR2YXIgZGlhbG9nU3RyID0gcGFyYW1zLnRleHQuam9pbignJyk7XG5cdGNvbXBpbGVFbWFpbChkaWFsb2dTdHIsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG5cdFx0aWYoZXJyKSByZXR1cm47XG5cdFx0cGFyYW1zLnRleHQgPSByZXN1bHQ7XG5cdFx0YXBpLnNlbmRFbWFpbChwYXJhbXMpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gc2VuZENvbXBsYWluKHBhcmFtcyl7XG5cdHZhciBib2R5ID0gW107XG5cdC8vIFRPRE86IGV4cGxhaW4uLi5cblx0dmFyIGNvbXBsYWluID0gY29tcGlsZVRlbXBsYXRlKG1lc3NhZ2VUZW1wbGF0ZSgpLCB7XG5cdFx0ZnJvbTogZnJhc2VzW2N1cnJMYW5nXS5FTUFJTF9TVUJKRUNUUy5jb21wbGFpbisnICcrcGFyYW1zLmVtYWlsLFxuXHRcdHRleHQ6IHBhcmFtcy50ZXh0LFxuXHRcdGVudGl0eTogJycsXG5cdFx0dGltZTogJydcblx0fSk7XG5cblx0Ym9keSA9IGJvZHkuY29uY2F0KFxuXHRcdGNvbXBsYWluLFxuXHRcdCc8YnI+PHAgY2xhc3M9XCJoMVwiPicrZnJhc2VzW2N1cnJMYW5nXS5FTUFJTF9TVUJKRUNUUy5kaWFsb2crJyAnK2RlZmF1bHRzLmhvc3QrJzwvcD48YnI+Jyxcblx0XHRkaWFsb2dcblx0KS5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgY3Vycikge1xuXHRcdHJldHVybiBwcmV2LmNvbmNhdChjdXJyKTtcblx0fSk7XG5cblx0Y29tcGlsZUVtYWlsKGJvZHksIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG5cdFx0aWYoZXJyKSByZXR1cm47XG5cdFx0cGFyYW1zLnRleHQgPSByZXN1bHQ7XG5cdFx0YXBpLnNlbmRFbWFpbChwYXJhbXMpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gc2VuZFJlcXVlc3QocGFyYW1zLCBjYikge1xuXHQvLyBUT0RPOiBleHBsYWluLi4uXG5cdHZhciBtc2cgPSBjb21waWxlVGVtcGxhdGUobWVzc2FnZVRlbXBsYXRlKCksIHtcblx0XHRmcm9tOiBmcmFzZXNbY3VyckxhbmddLkVNQUlMX1NVQkpFQ1RTLnJlcXVlc3QrJyAnK3BhcmFtcy51bmFtZSsnICgnK3BhcmFtcy5lbWFpbCsnKScsXG5cdFx0dGV4dDogcGFyYW1zLnRleHQsXG5cdFx0ZW50aXR5OiAnJyxcblx0XHR0aW1lOiAnJ1xuXHR9KTtcblxuXHRjb21waWxlRW1haWwobXNnLCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuXHRcdGlmKGVycikgcmV0dXJuO1xuXHRcdHBhcmFtcy50ZXh0ID0gcmVzdWx0O1xuXHRcdGFwaS5zZW5kRW1haWwocGFyYW1zKTtcblx0XHRpZihjYikgY2IoKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHN1Ym1pdFNlbmRNYWlsRm9ybShmb3JtLCBkYXRhKSB7XG5cdHZhciBwYXJhbXMgPSB7fSxcblx0XHRmaWxlO1xuXG5cdGlmKCFkYXRhLmVtYWlsKSB7XG5cdFx0YWxlcnQoZnJhc2VzW2N1cnJMYW5nXS5FUlJPUlMuZW1haWwpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGRhdGEuc3ViamVjdCA9IGZyYXNlc1tjdXJyTGFuZ10uRU1BSUxfU1VCSkVDVFMucmVxdWVzdCsnICcrZGF0YS5lbWFpbDtcblxuXHRpZihkYXRhLmZpbGUpIHtcblx0XHRmaWxlID0gZ2V0RmlsZUNvbnRlbnQoZm9ybS5maWxlLCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuXHRcdFx0aWYoIWVycikge1xuXHRcdFx0XHRkYXRhLmZpbGVuYW1lID0gcmVzdWx0LmZpbGVuYW1lO1xuXHRcdFx0XHRkYXRhLmZpbGVkYXRhID0gcmVzdWx0LmZpbGVkYXRhO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVidWcud2FybignRmlsZSB3YXNuXFwndCBzZW50Jyk7XG5cdFx0XHR9XG5cdFx0XHRkZWxldGUgZGF0YS5maWxlO1xuXHRcdFx0c2VuZFJlcXVlc3QoZGF0YSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGZvcm0ucmVzZXQoKTtcblx0XHRcdFx0Y2xvc2VXaWRnZXQoKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHNlbmRSZXF1ZXN0KGRhdGEsIGZ1bmN0aW9uKCkge1xuXHRcdFx0Zm9ybS5yZXNldCgpO1xuXHRcdFx0Y2xvc2VXaWRnZXQoKTtcblx0XHR9KTtcblx0fVxufVxuXG5mdW5jdGlvbiBzdWJtaXRDbG9zZUNoYXRGb3JtKGZvcm0sIGRhdGEpe1xuXHR2YXIgcmF0aW5nID0gKGRhdGEgJiYgZGF0YS5yYXRpbmcpID8gcGFyc2VJbnQoZGF0YS5yYXRpbmcsIDEwKSA6IG51bGw7XG5cdGlmKGRhdGEgJiYgZGF0YS5zZW5kRGlhbG9nKSB7XG5cdFx0aWYoIWRhdGEuZW1haWwpIHtcblx0XHRcdGFsZXJ0KGZyYXNlc1tjdXJyTGFuZ10uRVJST1JTLmVtYWlsKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Ly8gZGVidWcubG9nKCdzZW5kIGRpYWxvZycpO1xuXHRcdHNlbmREaWFsb2coe1xuXHRcdFx0dG86IGRhdGEuZW1haWwsXG5cdFx0XHRzdWJqZWN0OiBmcmFzZXNbY3VyckxhbmddLkVNQUlMX1NVQkpFQ1RTLmRpYWxvZysnICcrZGVmYXVsdHMuaG9zdCxcblx0XHRcdHRleHQ6IGRpYWxvZyAvLyBnbG9iYWwgdmFyaWFibGVcblx0XHR9KTtcblx0fVxuXHRpZihkYXRhICYmIGRhdGEudGV4dCkge1xuXHRcdGlmKCFkYXRhLmVtYWlsKSB7XG5cdFx0XHRhbGVydChmcmFzZXNbY3VyckxhbmddLkVSUk9SUy5lbWFpbCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIGRlYnVnLmxvZygnc2VuZCBjb21wbGFpbiEnKTtcblx0XHRcdHNlbmRDb21wbGFpbih7XG5cdFx0XHRcdGVtYWlsOiBkYXRhLmVtYWlsLFxuXHRcdFx0XHRzdWJqZWN0OiBmcmFzZXNbY3VyckxhbmddLkVNQUlMX1NVQkpFQ1RTLmNvbXBsYWluKycgJytkYXRhLmVtYWlsLFxuXHRcdFx0XHR0ZXh0OiBkYXRhLnRleHRcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRpZihjaGF0VGltZW91dCkgY2xlYXJUaW1lb3V0KGNoYXRUaW1lb3V0KTtcblx0aWYoZm9ybSkgZm9ybS5yZXNldCgpO1xuXHRcblx0Y2xvc2VDaGF0KHJhdGluZyk7XG5cdGNsb3NlV2lkZ2V0KCk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlQ2hhdChyYXRpbmcpIHtcblx0c3RvcmFnZS5zYXZlU3RhdGUoJ2NoYXQnLCBmYWxzZSk7XG5cdGFwaS5jbG9zZUNoYXQocmF0aW5nKTtcblx0cmVtb3ZlV2dTdGF0ZSgnY2hhdCcpO1xufVxuXG5mdW5jdGlvbiBvbkNoYXRDbG9zZSgpe1xuXHRpZihzdG9yYWdlLmdldFN0YXRlKCdzaGFyZWQnLCAnc2Vzc2lvbicpKSBjb2Jyb3dzaW5nLnVuc2hhcmUoKTtcbn1cblxuZnVuY3Rpb24gb25DaGF0VGltZW91dCgpe1xuXHQvLyBkZWJ1Zy5sb2coJ2NoYXQgdGltZW91dCEnKTtcblx0c3dpdGNoUGFuZSgnY2xvc2VjaGF0Jyk7XG5cdGNsb3NlQ2hhdCgpO1xufVxuXG5mdW5jdGlvbiBvbkFnZW50VHlwaW5nKG9wdHMpe1xuXHQvLyBkZWJ1Zy5sb2coJ0FnZW50IGlzIHR5cGluZyEnKTtcblx0aWYoIWFnZW50SXNUeXBpbmdUaW1lb3V0KSB7XG5cdFx0YWRkV2dTdGF0ZSgnYWdlbnQtdHlwaW5nJyk7XG5cdH1cblx0Y2xlYXJUaW1lb3V0KGFnZW50SXNUeXBpbmdUaW1lb3V0KTtcblx0YWdlbnRJc1R5cGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGFnZW50SXNUeXBpbmdUaW1lb3V0ID0gbnVsbDtcblx0XHRyZW1vdmVXZ1N0YXRlKCdhZ2VudC10eXBpbmcnKTtcblx0XHQvLyBkZWJ1Zy5sb2coJ2FnZW50IGlzIG5vdCB0eXBpbmcgYW55bW9yZSEnKTtcblx0fSwgNTAwMCk7XG59XG5cbmZ1bmN0aW9uIHNldFNlc3Npb25UaW1lb3V0SGFuZGxlcigpe1xuXHRpZihhcGkubGlzdGVuZXJDb3VudCgnc2Vzc2lvbi90aW1lb3V0JykgPj0gMSkgcmV0dXJuO1xuXHRhcGkub25jZSgnc2Vzc2lvbi90aW1lb3V0JywgZnVuY3Rpb24gKHBhcmFtcyl7XG5cdFx0Ly8gZGVidWcubG9nKCdTZXNzaW9uIHRpbWVvdXQhJywgcGFyYW1zKTtcblxuXHRcdGlmKHN0b3JhZ2UuZ2V0U3RhdGUoJ2NoYXQnKSA9PT0gdHJ1ZSkge1xuXHRcdFx0Y2xvc2VDaGF0KCk7XG5cdFx0fVxuXHRcdGlmKHdpZGdldCkge1xuXHRcdFx0Ly8gYWRkV2dTdGF0ZSgndGltZW91dCcpO1xuXHRcdFx0Y2xvc2VXaWRnZXQoKTtcblx0XHR9XG5cdFx0Y2hhbmdlV2dTdGF0ZSh7IHN0YXRlOiAndGltZW91dCcgfSk7XG5cdFx0Ly8gd2lkZ2V0U3RhdGUuc3RhdGUgPSAndGltZW91dCc7XG5cdFx0Ly8gYWRkV2dTdGF0ZSgndGltZW91dCcpO1xuXHRcdHNldEJ1dHRvblN0eWxlKCd0aW1lb3V0Jyk7XG5cdFx0c3RvcmFnZS5yZW1vdmVTdGF0ZSgnc2lkJyk7XG5cblx0XHRpZihwYXJhbXMgJiYgcGFyYW1zLm1ldGhvZCA9PT0gJ3VwZGF0ZUV2ZW50cycpIHtcblx0XHRcdGluaXRNb2R1bGUoKTtcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBpbml0Q2FsbCgpe1xuXHRzd2l0Y2hQYW5lKCdjYWxsQWdlbnQnKTtcblx0V2ViUlRDLmF1ZGlvY2FsbChkZWZhdWx0cy53ZWJydGMuaG90bGluZSk7XG5cdC8vIFdlYlJUQy5hdWRpb2NhbGwoJ3NpcDonK2RlZmF1bHRzLndlYnJ0Yy5ob3RsaW5lKydAJytzZXJ2ZXJVcmwuaG9zdCk7XG59XG5cbmZ1bmN0aW9uIGluaXRDYWxsYmFjaygpe1xuXHRzd2l0Y2hQYW5lKCdjYWxsYmFjaycpO1xufVxuXG5mdW5jdGlvbiBzZXRDYWxsYmFjaygpe1xuXHR2YXIgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLWNhbGxiYWNrLXNldHRpbmdzJyksXG5cdFx0Zm9ybURhdGEgPSBnZXRGb3JtRGF0YShmb3JtKSxcblx0XHRjYlNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1jYWxsYmFjay1zcGlubmVyJyksXG5cdFx0Y2JTZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbGJhY2stc2VudCcpO1xuXHRcblx0Zm9ybURhdGEucGhvbmUgPSBmb3JtRGF0YS5waG9uZSA/IGZvcm1hdFBob25lTnVtYmVyKGZvcm1EYXRhLnBob25lKSA6IG51bGw7XG5cblx0aWYoIWZvcm1EYXRhLnBob25lIHx8IGZvcm1EYXRhLnBob25lLmxlbmd0aCA8IDEwKSB7XG5cdFx0cmV0dXJuIGFsZXJ0KGZyYXNlc1tjdXJyTGFuZ10uRVJST1JTLnRlbCk7XG5cdH1cblxuXHRmb3JtRGF0YS50aW1lID0gcGFyc2VGbG9hdChmb3JtRGF0YS50aW1lKTtcblx0XG5cdGlmKGZvcm1EYXRhLnRpbWUgPD0gMCkgcmV0dXJuO1xuXG5cdGZvcm1EYXRhLnRpbWUgPSBEYXRlLm5vdygpICsgKGZvcm1EYXRhLnRpbWUgKiA2MCAqIDEwMDApO1xuXHRmb3JtRGF0YS50YXNrID0gZGVmYXVsdHMuY2FsbGJhY2sudGFzaztcblx0ZGVidWcubG9nKCdzZXRDYWxsYmFjayBkYXRhOiAnLCBmb3JtRGF0YSk7XG5cblx0Zm9ybS5jbGFzc0xpc3QuYWRkKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRjYlNwaW5uZXIuY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblxuXHRhcGkucmVxdWVzdENhbGxiYWNrKGZvcm1EYXRhLCBmdW5jdGlvbihlcnIsIHJlc3VsdCkge1xuXHRcdGRlYnVnLmxvZygnc2V0Q2FsbGJhY2sgcmVzdWx0OiAnLCBlcnIsIHJlc3VsdCk7XG5cblx0XHRjYlNwaW5uZXIuY2xhc3NMaXN0LmFkZChkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHRmb3JtLmNsYXNzTGlzdC5yZW1vdmUoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cblx0XHRpZihlcnIpIHJldHVybjtcblx0XHRcblx0XHRzd2l0Y2hQYW5lKCdjYWxsYmFja1NlbnQnKTtcblx0fSk7XG5cblx0Zm9ybS5yZXNldCgpO1xufVxuXG5mdW5jdGlvbiBpbml0Q2FsbFN0YXRlKHN0YXRlKXtcblx0ZGVidWcubG9nKCdpbml0Q2FsbFN0YXRlOiAnLCBzdGF0ZSk7XG5cblx0dmFyIHNwaW5uZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1jYWxsLXNwaW5uZXInKSxcblx0XHRpbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbC1pbmZvJyksXG5cdFx0dGV4dFN0YXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbC1zdGF0ZScpLFxuXHRcdHRpbWVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctY2FsbC10aW1lcicpLFxuXHRcdHRyeUFnYWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctdHJ5YWdhaW4tYnRuJyk7XG5cblx0aWYoc3RhdGUgPT09ICduZXdSVENTZXNzaW9uJykge1xuXHRcdGluaXRDYWxsU3RhdGUoJ29uY2FsbCcpO1xuXG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ2NvbmZpcm1lZCcpIHtcblx0XHR0ZXh0U3RhdGUuaW5uZXJUZXh0ID0gZnJhc2VzW2N1cnJMYW5nXS5BVURJT19DQUxMLmNhbGxpbmdfYWdlbnQ7XG5cdFx0aW5mby5jbGFzc0xpc3QucmVtb3ZlKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRcdHNwaW5uZXIuY2xhc3NMaXN0LmFkZChkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHR0cnlBZ2Fpbi5jbGFzc0xpc3QuYWRkKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ3JpbmdpbmcnKSB7XG5cdFx0c2V0VGltZXIodGltZXIsICdpbml0JywgMCk7XG5cdFx0dGltZXIuY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHQvLyBwbGF5UmluZ1RvbmUoKTtcblxuXHR9IGVsc2UgaWYoc3RhdGUgPT09ICdjb25uZWN0ZWQnKSB7XG5cdFx0dGV4dFN0YXRlLmlubmVyVGV4dCA9IGZyYXNlc1tjdXJyTGFuZ10uQVVESU9fQ0FMTC5jb25uZWN0ZWRfd2l0aF9hZ2VudDtcblx0XHRzZXRUaW1lcih0aW1lciwgJ3N0YXJ0JywgMCk7XG5cdFx0Ly8gc3RvcFJpbmdUb25lKCk7XG5cblx0fSBlbHNlIGlmKHN0YXRlID09PSAnZW5kZWQnKSB7XG5cdFx0dGV4dFN0YXRlLmlubmVyVGV4dCA9IGZyYXNlc1tjdXJyTGFuZ10uQVVESU9fQ0FMTC5jYWxsX2VuZGVkO1xuXHRcdHNldFRpbWVyKHRpbWVyLCAnc3RvcCcpO1xuXHRcdGluaXRDYWxsU3RhdGUoJ29uY2FsbGVuZCcpO1xuXHRcdFxuXHR9IGVsc2UgaWYoc3RhdGUgPT09ICdmYWlsZWQnIHx8IHN0YXRlID09PSAnY2FuY2VsZWQnKSB7XG5cdFx0aWYoc3RhdGUgPT09ICdmYWlsZWQnKSB7XG5cdFx0XHR0ZXh0U3RhdGUuaW5uZXJUZXh0ID0gZnJhc2VzW2N1cnJMYW5nXS5BVURJT19DQUxMLmNhbGxfZmFpbGVkO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0ZXh0U3RhdGUuaW5uZXJUZXh0ID0gZnJhc2VzW2N1cnJMYW5nXS5BVURJT19DQUxMLmNhbGxfY2FuY2VsZWQ7XG5cdFx0fVxuXHRcdGluZm8uY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHRzcGlubmVyLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdFx0dGltZXIuY2xhc3NMaXN0LmFkZChkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHR0cnlBZ2Fpbi5jbGFzc0xpc3QucmVtb3ZlKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRcdGluaXRDYWxsU3RhdGUoJ29uY2FsbGVuZCcpO1xuXG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ29uY2FsbCcpIHtcblx0XHR3aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuICdZb3VyIGNvbm5lY3Rpb24gaXMgaW4gcHJvZ3Jlc3MuIERvIHlvdSByZWFseSB3YW50IHRvIGNsb3NlIGl0Pyc7XG5cdFx0fTtcblx0XHRzdG9yYWdlLnNhdmVTdGF0ZSgnY2FsbCcsIHRydWUsICdjYWNoZScpO1xuXHRcdGFkZFdnU3RhdGUoJ3dlYnJ0Yy1jYWxsJyk7XG5cblx0fSBlbHNlIGlmKHN0YXRlID09PSAnb25jYWxsZW5kJykge1xuXHRcdHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IG51bGw7XG5cdFx0c3RvcmFnZS5zYXZlU3RhdGUoJ2NhbGwnLCBmYWxzZSwgJ2NhY2hlJyk7XG5cdFx0cmVtb3ZlV2dTdGF0ZSgnd2VicnRjLWNhbGwnKTtcblx0XHQvLyBzdG9wUmluZ1RvbmUoKTtcblxuXHR9IGVsc2UgaWYoJ2luaXQnKSB7XG5cdFx0aW5mby5jbGFzc0xpc3QuYWRkKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRcdHNwaW5uZXIuY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHR0cnlBZ2Fpbi5jbGFzc0xpc3QuYWRkKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNldFRpbWVyKHRpbWVyLCBzdGF0ZSwgc2Vjb25kcyl7XG5cdHZhciB0aW1lID0gc2Vjb25kcztcblx0aWYoc3RhdGUgPT09ICdzdGFydCcpIHtcblx0XHR0aW1lclVwZGF0ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcblx0XHRcdHRpbWUgPSB0aW1lKzE7XG5cdFx0XHR0aW1lci50ZXh0Q29udGVudCA9IGNvbnZlcnRUaW1lKHRpbWUpO1xuXHRcdH0sIDEwMDApO1xuXHR9IGVsc2UgaWYoc3RhdGUgPT09ICdzdG9wJykge1xuXHRcdGNsZWFySW50ZXJ2YWwodGltZXJVcGRhdGVJbnRlcnZhbCk7XG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ2luaXQnKSB7XG5cdFx0dGltZXIudGV4dENvbnRlbnQgPSBjb252ZXJ0VGltZSgwKTtcblx0fVxufVxuXG5mdW5jdGlvbiBlbmRDYWxsKCl7XG5cdGlmKFdlYlJUQy5pc0VzdGFibGlzaGVkKCkgfHwgV2ViUlRDLmlzSW5Qcm9ncmVzcygpKSB7XG5cdFx0V2ViUlRDLnRlcm1pbmF0ZSgpO1xuXHR9IGVsc2Uge1xuXHRcdGNsb3NlV2lkZ2V0KCk7XG5cdFx0aW5pdENhbGxTdGF0ZSgnaW5pdCcpO1xuXHR9XG59XG5cbi8vIGZ1bmN0aW9uIHBsYXlSaW5nVG9uZSgpe1xuLy8gXHRpZihyaW5nVG9uZUludGVydmFsKSByZXR1cm47XG4vLyBcdHJpbmdUb25lSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuLy8gXHRcdHJpbmdUb25lLnBsYXkoKTtcbi8vIFx0fSwgMzAwMCk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIHN0b3BSaW5nVG9uZSgpe1xuLy8gXHRjbGVhckludGVydmFsKHJpbmdUb25lSW50ZXJ2YWwpO1xuLy8gfVxuXG4vKipcbiAqIE9wZW4gd2ViIGNoYXQgd2lkZ2V0IGluIGEgbmV3IHdpbmRvd1xuICovXG5mdW5jdGlvbiBvcGVuV2lkZ2V0KCl7XG5cdGRlYnVnLmxvZygnb3BlbiB3aWRnZXQ6ICcsIHN0b3JhZ2UuZ2V0U3RhdGUoJ3NpZCcpKTtcblx0dmFyIHVybCA9IGRlZmF1bHRzLmNsaWVudFBhdGgrJ3dpbmRvdy5odG1sJyxcblx0XHRvcHRzID0ge30sXG5cdFx0b3B0c0VuY29kZWQgPSAnJztcblx0XG5cdGlmKCF3aWRnZXRXaW5kb3cgfHwgd2lkZ2V0V2luZG93LmNsb3NlZCkge1xuXG5cdFx0Xy5tZXJnZShvcHRzLCBkZWZhdWx0cyk7XG5cblx0XHRvcHRzLndpZGdldCA9IHRydWU7XG5cdFx0Ly8gc2V0IGV4dGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCB0aGUgbW9kdWxlIGxvYWRzIG5vdCBpbiB0aGUgbWFpbiB3aW5kb3dcblx0XHRvcHRzLmV4dGVybmFsID0gdHJ1ZTtcblxuXHRcdHdpZGdldFdpbmRvdyA9IHdpbmRvdy5vcGVuKCcnLCAnd2NoYXQnLCBkZWZhdWx0cy53aWRnZXRXaW5kb3dPcHRpb25zKTtcblx0XHR3aWRnZXRXaW5kb3cgPSBjb25zdHJ1Y3RXaW5kb3cod2lkZ2V0V2luZG93KTtcblx0XHR3aWRnZXRXaW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnd2NoYXRfb3B0aW9ucycsIEpTT04uc3RyaW5naWZ5KG9wdHMpKTtcblxuXHRcdC8vIFdhaXQgd2hpbGUgdGhlIHNjcmlwdCBpcyBsb2FkZWQsIFxuXHRcdC8vIHRoZW4gaW5pdCBtb2R1bGUgaW4gdGhlIGNoaWxkIHdpbmRvd1xuXHRcdF8ucG9sbChmdW5jdGlvbigpe1xuXHRcdFx0cmV0dXJuIHdpZGdldFdpbmRvdy5XY2hhdCAhPT0gdW5kZWZpbmVkO1xuXHRcdH0sIGZ1bmN0aW9uKCl7XG5cdFx0XHR3aWRnZXRXaW5kb3cuTW9kdWxlID0gd2lkZ2V0V2luZG93LldjaGF0KG9wdHMpO1xuXHRcdFx0d2lkZ2V0V2luZG93Lk1vZHVsZS5vbignd2lkZ2V0L2luaXQnLCBmdW5jdGlvbigpe1xuXHRcdFx0XHR3aWRnZXRXaW5kb3cuTW9kdWxlLmluaXRXaWRnZXRTdGF0ZSgpO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8qIFxuXHRcdFx0KiBQcm94eSBhbGwgZXZlbnRzIHRoYXQgaXMgZW1pdHRlZCBpbiB0aGUgY2hpbGQgd2luZG93XG5cdFx0XHQqIHRvIHRoZSBtYWluIHdpbmRvdywgYnV0IHdpdGggdGhlICd3aW5kb3cvJyBwcmVmaXggYmVmb3JlIHRoZSBldmVudCBuYW1lLlxuXHRcdFx0KiBTbywgZm9yIGV4YW1wbGUsICdjaGF0L3N0YXJ0JyBldmVudCBpbiB0aGUgY2hpbGQgd2luZG93LFxuXHRcdFx0KiB3b3VsZCBiZSAnd2luZG93L2NoYXQvc3RhcnQnIGluIHRoZSBtYWluIHdpbmRvdyBcblx0XHRcdCovXG5cdFx0XHRfLmZvckVhY2goYXBpLl9ldmVudHMsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGNvbGwpe1xuXHRcdFx0XHR3aWRnZXRXaW5kb3cuTW9kdWxlLm9uKGtleSwgZnVuY3Rpb24ocGFyYW1zKXtcblx0XHRcdFx0XHRwYXJhbXMudXJsID0gZ2xvYmFsLmxvY2F0aW9uLmhyZWY7XG5cdFx0XHRcdFx0YXBpLmVtaXQoJ3dpbmRvdy8nK2tleSwgcGFyYW1zKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0d2lkZ2V0V2luZG93Lk1vZHVsZS5pbml0TW9kdWxlKCk7XG5cblx0XHR9LCBmdW5jdGlvbigpe1xuXHRcdFx0Y29uc29sZS53YXJuKCdXY2hhdCBtb2R1bGUgd2FzIG5vdCBpbml0aWF0ZWQgZHVlIHRvIG5ldHdvcmsgY29ubmVjdGlvbiBpc3N1ZXMuJyk7XG5cdFx0fSwgMTIwMDAwKTtcblx0XHRcblx0XHR3aWRnZXRXaW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbigpe1xuXHRcdFx0Ly9jbG9zZSBjaGF0IGlmIHVzZXIgY2xvc2UgdGhlIHdpZGdldCB3aW5kb3dcblx0XHRcdC8vd2l0aG91dCBlbmRpbmcgYSBkaWFsb2dcblx0XHRcdGlmKHN0b3JhZ2UuZ2V0U3RhdGUoJ2NoYXQnLCAnc3RvcmFnZScpKSBjbG9zZUNoYXQoKTtcblx0XHR9O1xuXHR9XG5cdGlmKHdpZGdldFdpbmRvdy5mb2N1cykgd2lkZ2V0V2luZG93LmZvY3VzKCk7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFdpbmRvdyh3aW5kb3dPYmplY3Qpe1xuXHR2YXIgbG9hZGVyLFxuXHRzY3JpcHQsXG5cdGxpbmssXG5cdGNoYXJzZXQsXG5cdHZpZXdwb3J0LFxuXHR0aXRsZSxcblx0Y3VyckxhbmcgPSBjdXJyTGFuZyB8fCBkZXRlY3RMYW5ndWFnZSgpLFxuXHRsb2FkZXJFbGVtZW50cyA9IHdpbmRvd09iamVjdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcblx0bG9hZGVyU3R5bGVzID0gY3JlYXRlU3R5bGVzaGVldCh3aW5kb3dPYmplY3QsICdzd2MtbG9hZGVyLXN0eWxlcycpLFxuXHRoZWFkID0gd2luZG93T2JqZWN0LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0sXG5cdGJvZHkgPSB3aW5kb3dPYmplY3QuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcblxuXHRsb2FkZXJFbGVtZW50cy5jbGFzc05hbWUgPSBcInN3Yy13aWRnZXQtbG9hZGVyXCI7XG5cdGxvYWRlckVsZW1lbnRzLmlubmVySFRNTCA9IFwiPHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48c3Bhbj48L3NwYW4+XCI7XG5cblx0dmlld3BvcnQgPSB3aW5kb3dPYmplY3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpO1xuXHR2aWV3cG9ydC5uYW1lID0gJ3ZpZXdwb3J0Jztcblx0dmlld3BvcnQuY29udGVudCA9ICd3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSwgbWF4aW11bS1zY2FsZT0xLCB1c2VyLXNjYWxhYmxlPTAnO1xuXG5cdGNoYXJzZXQgPSB3aW5kb3dPYmplY3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpO1xuXHRjaGFyc2V0LnNldEF0dHJpYnV0ZSgnY2hhcnNldCcsICd1dGYtOCcpO1xuXG5cdHRpdGxlID0gd2luZG93T2JqZWN0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RpdGxlJyk7XG5cdHRpdGxlLnRleHRDb250ZW50ID0gZnJhc2VzW2N1cnJMYW5nXS5UT1BfQkFSLnRpdGxlO1xuXG5cdC8vIGxvYWRlciA9IHdpbmRvd09iamVjdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0Ly8gbG9hZGVyLnNyYyA9IGRlZmF1bHRzLmNsaWVudFBhdGgrJ2xvYWRlci5qcyc7XG5cblx0c2NyaXB0ID0gd2luZG93T2JqZWN0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXHRzY3JpcHQuc3JjID0gZGVmYXVsdHMuY2xpZW50UGF0aCsnd2NoYXQubWluLmpzJztcblx0c2NyaXB0LmNoYXJzZXQgPSAnVVRGLTgnO1xuXG5cdGhlYWQuYXBwZW5kQ2hpbGQodmlld3BvcnQpO1xuXHRoZWFkLmFwcGVuZENoaWxkKGNoYXJzZXQpO1xuXHRoZWFkLmFwcGVuZENoaWxkKHRpdGxlKTtcblx0aGVhZC5hcHBlbmRDaGlsZChsb2FkZXJTdHlsZXMpO1xuXHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cblx0Ym9keS5pZCA9ICdzd2Mtd2ctd2luZG93Jztcblx0Ym9keS5hcHBlbmRDaGlsZChsb2FkZXJFbGVtZW50cyk7XG5cdC8vIGJvZHkuYXBwZW5kQ2hpbGQobG9hZGVyKTtcblxuXHRhZGRMb2FkZXJSdWxlcyhoZWFkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzdHlsZScpWzBdKTtcblxuXHRyZXR1cm4gd2luZG93T2JqZWN0O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTdHlsZXNoZWV0KHdpbmRvd09iamVjdCwgaWQpe1xuXHQvLyBDcmVhdGUgdGhlIDxzdHlsZT4gdGFnXG5cdFx0dmFyIHN0eWxlID0gd2luZG93T2JqZWN0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0XHRzdHlsZS50eXBlID0gJ3RleHQvY3NzJztcblx0XHRpZihpZCkgc3R5bGUuaWQgPSBpZDtcblxuXHRcdC8vIFdlYktpdCBoYWNrIDooXG5cdFx0c3R5bGUuYXBwZW5kQ2hpbGQod2luZG93T2JqZWN0LmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpKTtcblxuXHRcdHJldHVybiBzdHlsZTtcbn1cblxuZnVuY3Rpb24gYWRkTG9hZGVyUnVsZXMoc3R5bGUpe1xuXHR2YXIgdGhlUnVsZXMgPSBbXG5cdFx0XCJib2R5IHsgbWFyZ2luOjA7IGJhY2tncm91bmQtY29sb3I6ICNlZWU7IH1cIixcblx0XHRcIkBrZXlmcmFtZXMgcHJlbG9hZGluZyB7XCIsXG5cdFx0XHRcIjAgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IH1cIixcblx0XHRcdFwiNTAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyB9XCIsXG5cdFx0XHRcIjEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IH1cIixcblx0XHRcIn1cIixcblx0XHRcIkAtd2Via2l0LWtleWZyYW1lcyBwcmVsb2FkaW5nIHtcIixcblx0XHRcdFwiMCB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgfVwiLFxuXHRcdFx0XCI1MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IH1cIixcblx0XHRcdFwiMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgfVwiLFxuXHRcdFwifVwiLFxuXHRcdFwiQC1tb3ota2V5ZnJhbWVzIHByZWxvYWRpbmcge1wiLFxuXHRcdFx0XCIwIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyB9XCIsXG5cdFx0XHRcIjUwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgfVwiLFxuXHRcdFx0XCIxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbW96LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC1tcy10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtby10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyB9XCIsXG5cdFx0XCJ9XCIsXG5cdFx0XCJALW1zLWtleWZyYW1lcyBwcmVsb2FkaW5nIHtcIixcblx0XHRcdFwiMCB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgfVwiLFxuXHRcdFx0XCI1MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IH1cIixcblx0XHRcdFwiMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgfVwiLFxuXHRcdFwifVwiLFxuXHRcdFwiQC1vLWtleWZyYW1lcyBwcmVsb2FkaW5nIHtcIixcblx0XHRcdFwiMCB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgfVwiLFxuXHRcdFx0XCI1MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDE1cHgpOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1tb3otdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwxNXB4KTsgLW1zLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IC1vLXRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMTVweCk7IH1cIixcblx0XHRcdFwiMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlKDAsMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW1vei10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApOyAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgLW8tdHJhbnNmb3JtOiB0cmFuc2xhdGUoMCwwKTsgfVwiLFxuXHRcdFwifVwiLFxuXHRcdFwiLnN3Yy13aWRnZXQtbG9hZGVyIHtcIixcblx0XHRcdFwicG9zaXRpb246IGFic29sdXRlO1wiLFxuXHRcdFx0XCJ3aWR0aDogMTAwJTtcIixcblx0XHRcdFwidG9wOiA1MCU7XCIsXG5cdFx0XHRcIm1hcmdpbi10b3A6IC0xOHB4O1wiLFxuXHRcdFx0XCJ0ZXh0LWFsaWduOiBjZW50ZXI7XCIsXG5cdFx0XCJ9XCIsXG5cdFx0XCIuc3djLXdpZGdldC1sb2FkZXIgc3BhbiB7XCIsXG5cdFx0XHRcImRpc3BsYXk6IGlubGluZS1ibG9jaztcIixcblx0XHRcdFwid2lkdGg6IDE4cHg7XCIsXG5cdFx0XHRcImhlaWdodDogMThweDtcIixcblx0XHRcdFwiYm9yZGVyLXJhZGl1czogNTAlO1wiLFxuXHRcdFx0XCJiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1wiLFxuXHRcdFx0XCJtYXJnaW46IDNweDtcIixcblx0XHRcIn1cIixcblx0XHRcIi5zd2Mtd2lkZ2V0LWxvYWRlciBzcGFuOm50aC1sYXN0LWNoaWxkKDEpIHsgLXdlYmtpdC1hbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC4xcyBsaW5lYXIgaW5maW5pdGU7IC1tb3otYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuMXMgbGluZWFyIGluZmluaXRlOyAtbXMtYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuMXMgbGluZWFyIGluZmluaXRlOyAtby1hbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC4xcyBsaW5lYXIgaW5maW5pdGU7IGFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjFzIGxpbmVhciBpbmZpbml0ZTsgfVwiLFxuXHRcdFwiLnN3Yy13aWRnZXQtbG9hZGVyIHNwYW46bnRoLWxhc3QtY2hpbGQoMikgeyAtd2Via2l0LWFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjNzIGxpbmVhciBpbmZpbml0ZTsgLW1vei1hbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC4zcyBsaW5lYXIgaW5maW5pdGU7IC1tcy1hbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC4zcyBsaW5lYXIgaW5maW5pdGU7IC1vLWFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjNzIGxpbmVhciBpbmZpbml0ZTsgYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuM3MgbGluZWFyIGluZmluaXRlOyB9XCIsXG5cdFx0XCIuc3djLXdpZGdldC1sb2FkZXIgc3BhbjpudGgtbGFzdC1jaGlsZCgzKSB7IC13ZWJraXQtYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuNXMgbGluZWFyIGluZmluaXRlOyAtbW96LWFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjVzIGxpbmVhciBpbmZpbml0ZTsgLW1zLWFuaW1hdGlvbjogcHJlbG9hZGluZyAuOHMgLjVzIGxpbmVhciBpbmZpbml0ZTsgLW8tYW5pbWF0aW9uOiBwcmVsb2FkaW5nIC44cyAuNXMgbGluZWFyIGluZmluaXRlOyBhbmltYXRpb246IHByZWxvYWRpbmcgLjhzIC41cyBsaW5lYXIgaW5maW5pdGU7IH1cIixcblx0XS5qb2luKFwiIFwiKTtcblxuXHRzdHlsZS5pbm5lckhUTUwgPSB0aGVSdWxlcztcbn1cblxuLyoqXG4gKiBTZXQgV2lkZ2V0IGV2ZW50IGxpc3RlbmVyc1xuICogQHBhcmFtIHtET01FbGVtZW50fSB3aWRnZXQgLSBXaWRnZXQgSFRNTCBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIHNldExpc3RlbmVycyh3aWRnZXQpe1xuXHQvLyB2YXIgc2VuZE1zZ0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLXNlbmQtbWVzc2FnZScpLFxuXHR2YXIgZmlsZVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLWZpbGUtc2VsZWN0JyksXG5cdFx0dGV4dEZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZS10ZXh0JyksXG5cdFx0aW5wdXRzID0gW10uc2xpY2UuY2FsbCh3aWRnZXQucXVlcnlTZWxlY3RvckFsbCgnLicrZGVmYXVsdHMucHJlZml4KyctaW5wdXRmaWxlJykpO1xuXG5cdGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLWJ0bi1jb250Jyk7XG5cdHBhbmVzID0gW10uc2xpY2UuY2FsbCh3aWRnZXQucXVlcnlTZWxlY3RvckFsbCgnLicrZGVmYXVsdHMucHJlZml4Kyctd2ctcGFuZScpKTtcblx0bWVzc2FnZXNDb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZXMtY29udCcpO1xuXG5cdGlucHV0cy5mb3JFYWNoKGZ1bmN0aW9uKGlucHV0KXtcblx0XHR2YXIgbGFiZWwgPSBpbnB1dC5uZXh0RWxlbWVudFNpYmxpbmcsXG5cdFx0XHRsYWJlbFZhbCA9IGxhYmVsLnRleHRDb250ZW50O1xuXG5cdFx0YWRkRXZlbnQoaW5wdXQsICdjaGFuZ2UnLCBmdW5jdGlvbihlKXtcblx0XHRcdHZhciBmaWxlTmFtZSA9IGUudGFyZ2V0LnZhbHVlLnNwbGl0KCAnXFxcXCcgKS5wb3AoKTtcblx0XHRcdGlmKGZpbGVOYW1lKVxuXHRcdFx0XHRsYWJlbC50ZXh0Q29udGVudCA9IGZpbGVOYW1lO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRsYWJlbC50ZXh0Q29udGVudCA9IGxhYmVsVmFsO1xuXHRcdH0pO1xuXHR9KTtcblxuXHRhZGRFdmVudChidG4sICdjbGljaycsIGJ0bkNsaWNrSGFuZGxlcik7XG5cdGFkZEV2ZW50KHdpZGdldCwgJ2NsaWNrJywgd2dDbGlja0hhbmRsZXIpO1xuXHRhZGRFdmVudCh3aWRnZXQsICdzdWJtaXQnLCB3Z1N1Ym1pdEhhbmRsZXIpO1xuXHQvLyBhZGRFdmVudChzZW5kTXNnQnRuLCAnY2xpY2snLCB3Z1NlbmRNZXNzYWdlKTtcblx0YWRkRXZlbnQoZmlsZVNlbGVjdCwgJ2NoYW5nZScsIHdnU2VuZEZpbGUpO1xuXHRhZGRFdmVudCh0ZXh0RmllbGQsICdrZXlwcmVzcycsIHdnVHlwaW5nSGFuZGxlcik7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogV2lkZ2V0IGV2ZW50IGhhbmRsZXJzICpcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZnVuY3Rpb24gd2dDbGlja0hhbmRsZXIoZSl7XG5cdHZhciB0YXJnID0gZS50YXJnZXQsXG5cdFx0aGFuZGxlcixcblx0XHRwYW5lLFxuXHRcdGhyZWYsXG5cdFx0ZGF0YUhyZWY7XG5cblx0aWYodGFyZy5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdBJyB8fCB0YXJnLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ0JVVFRPTicpXG5cdFx0dGFyZyA9IHRhcmcucGFyZW50Tm9kZTtcblx0XG5cdGhhbmRsZXIgPSB0YXJnLmdldEF0dHJpYnV0ZSgnZGF0YS0nK2RlZmF1bHRzLnByZWZpeCsnLWhhbmRsZXInKTtcblx0ZGF0YUhyZWYgPSB0YXJnLmdldEF0dHJpYnV0ZSgnZGF0YS0nK2RlZmF1bHRzLnByZWZpeCsnLWxpbmsnKTtcblxuXHRpZihoYW5kbGVyID09PSAnY2xvc2VXaWRnZXQnKSB7XG5cdFx0Y2xvc2VXaWRnZXQoKTtcblx0fSBlbHNlIGlmKGhhbmRsZXIgPT09ICdmaW5pc2gnKSB7XG5cdFx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2hhdCcpKSBzd2l0Y2hQYW5lKCdjbG9zZWNoYXQnKTtcblx0XHRlbHNlIGNsb3NlV2lkZ2V0KCk7XG5cdH0gZWxzZSBpZihoYW5kbGVyID09PSAnc2VuZE1lc3NhZ2UnKSB7XG5cdFx0d2dTZW5kTWVzc2FnZSgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ29wZW5XaW5kb3cnKSB7XG5cdFx0b3BlbldpZGdldCgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ3JlamVjdEZvcm0nKSB7XG5cdFx0YXBpLmVtaXQoJ2Zvcm0vcmVqZWN0JywgeyBmb3JtTmFtZTogXy5maW5kUGFyZW50KHRhcmcsICdmb3JtJykubmFtZSB9KTtcblx0fSBlbHNlIGlmKGhhbmRsZXIgPT09ICdpbml0Q2FsbCcpIHtcblx0XHRpbml0Q2FsbCgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ2luaXRDYWxsYmFjaycpIHtcblx0XHRpbml0Q2FsbGJhY2soKTtcblx0fSBlbHNlIGlmKGhhbmRsZXIgPT09ICdzZXRDYWxsYmFjaycpIHtcblx0XHRzZXRDYWxsYmFjaygpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ2luaXRDaGF0Jykge1xuXHRcdGluaXRDaGF0KCk7XG5cdH0gZWxzZSBpZihoYW5kbGVyID09PSAnZW5kQ2FsbCcpIHtcblx0XHRlbmRDYWxsKCk7XG5cdH1cblxuXHRpZih0YXJnLnRhZ05hbWUgPT09ICdBJykge1xuXHRcdGhyZWYgPSB0YXJnLmhyZWY7XG5cblx0XHRpZihkYXRhSHJlZikge1xuXHRcdFx0YXBpLmxpbmtGb2xsb3dlZChkYXRhSHJlZik7XG5cdFx0fSBlbHNlIGlmKGhyZWYuaW5kZXhPZignIycpICE9PSAtMSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0cGFuZSA9IGhyZWYuc3Vic3RyaW5nKHRhcmcuaHJlZi5pbmRleE9mKCcjJykrMSk7XG5cdFx0XHRpZihwYW5lKSBzd2l0Y2hQYW5lKHBhbmUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBidG5DbGlja0hhbmRsZXIoZSl7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0dmFyIHRhcmcgPSBlLnRhcmdldCxcblx0XHRjdXJyVGFyZyA9IGUuY3VycmVudFRhcmdldDtcblxuXHQvLyByZW1vdmUgbm90aWZpY2F0aW9uIG9mIGEgbmV3IG1lc3NhZ2Vcblx0aWYodGFyZy5pZCA9PT0gZGVmYXVsdHMucHJlZml4KyctdW5ub3RpZnktYnRuJykge1xuXHRcdHJlbW92ZVdnU3RhdGUoJ25vdGlmaWVkJyk7XG5cdFx0Ly8gcmVzZXQgYnV0dG9uIGhlaWdodFxuXHRcdHJlc2V0U3R5bGVzKGJ0bi5jaGlsZHJlblswXSk7XG5cdFx0c2V0QnV0dG9uU3R5bGUod2lkZ2V0U3RhdGUuc3RhdGUpO1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmKGN1cnJUYXJnLmlkID09PSBkZWZhdWx0cy5wcmVmaXgrJy1idG4tY29udCcpIHtcblx0XHRpbml0V2lkZ2V0U3RhdGUoKTtcblx0fVxufVxuXG5mdW5jdGlvbiBpbml0V2lkZ2V0U3RhdGUoKXtcblx0Ly8gSWYgZWxlbWVudCBpcyBpbnRlcmFjdGVkLCB0aGVuIG5vIG5vdGlmaWNhdGlvbnMgb2YgYSBuZXcgbWVzc2FnZSBcblx0Ly8gd2lsbCBvY2N1ciBkdXJpbmcgY3VycmVudCBicm93c2VyIHNlc3Npb25cblx0c2V0SW50ZXJhY3RlZCgpO1xuXHQvLyBJZiB0aW1lb3V0IGlzIG9jY3VyZWQsIGluaXQgc2Vzc2lvbiBmaXJzdFxuXHRpZihoYXNXZ1N0YXRlKCd0aW1lb3V0JykpIHtcblx0XHRpbml0TW9kdWxlKCk7XG5cdH0gZWxzZSBpZihzdG9yYWdlLmdldFN0YXRlKCdjaGF0JywgJ2NhY2hlJykpe1xuXHRcdHNob3dXaWRnZXQoKTtcblx0fSBlbHNlIGlmKCFsYW5ncy5sZW5ndGgpe1xuXHRcdHN3aXRjaFBhbmUoJ3NlbmRlbWFpbCcpO1xuXHR9IGVsc2UgaWYoZGVmYXVsdHMud2VicnRjRW5hYmxlZCl7XG5cdFx0Ly8gaWYgY2FsbCBpcyBpbiBwcm9ncmVzcyAtIGp1c3Qgc2hvdyB0aGUgd2lkZ2V0XG5cdFx0aWYoc3RvcmFnZS5nZXRTdGF0ZSgnY2FsbCcsICdjYWNoZScpKSB7XG5cdFx0XHRzaG93V2lkZ2V0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN3aXRjaFBhbmUoJ2Nob29zZUNvbm5lY3Rpb24nKTtcblx0XHR9XG5cdH0gZWxzZSBpZihkZWZhdWx0cy5jYWxsYmFjay50YXNrKSB7XG5cdFx0c3dpdGNoUGFuZSgnY2hvb3NlQ29ubmVjdGlvbicpO1xuXHR9IGVsc2Uge1xuXHRcdGluaXRDaGF0KCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gd2dTZW5kTWVzc2FnZSgpe1xuXHR2YXIgbXNnLFxuXHRcdHRleHRhcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZS10ZXh0Jyk7XG5cblx0bXNnID0gXy50cmltKHRleHRhcmVhLnZhbHVlKTtcblx0aWYobXNnKSB7XG5cdFx0c2VuZE1lc3NhZ2UobXNnKTtcblx0XHR0ZXh0YXJlYS52YWx1ZSA9ICcnO1xuXHRcdHJlbW92ZVdnU3RhdGUoJ3R5cGUtZXh0ZW5kJyk7XG5cdH1cblx0aWYoIXN0b3JhZ2UuZ2V0U3RhdGUoJ2NoYXQnKSkge1xuXHRcdGluaXRDaGF0KCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gd2dUeXBpbmdIYW5kbGVyKGUpe1xuXHR2YXIgdGFyZyA9IGUudGFyZ2V0O1xuXHRpZihlLmtleUNvZGUgPT09IDEwIHx8IGUua2V5Q29kZSA9PT0gMTMpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0d2dTZW5kTWVzc2FnZSgpO1xuXHR9IGVsc2Uge1xuXHRcdGlmKCF1c2VySXNUeXBpbmdUaW1lb3V0KSB7XG5cdFx0XHR1c2VySXNUeXBpbmdUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0dXNlcklzVHlwaW5nVGltZW91dCA9IG51bGw7XG5cdFx0XHRcdGFwaS51c2VySXNUeXBpbmcoKTtcblx0XHRcdH0sIDEwMDApO1xuXHRcdH1cblx0fVxuXG5cdGlmKHRhcmcudmFsdWUubGVuZ3RoID49IDgwICYmICFoYXNXZ1N0YXRlKCd0eXBlLWV4dGVuZCcpKVxuXHRcdGFkZFdnU3RhdGUoJ3R5cGUtZXh0ZW5kJyk7XG5cdGlmKHRhcmcudmFsdWUubGVuZ3RoIDwgODAgJiYgaGFzV2dTdGF0ZSgndHlwZS1leHRlbmQnKSlcblx0XHRyZW1vdmVXZ1N0YXRlKCd0eXBlLWV4dGVuZCcpO1xufVxuXG5mdW5jdGlvbiB3Z1N1Ym1pdEhhbmRsZXIoZSl7XG5cdHZhciB0YXJnID0gZS50YXJnZXQ7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0aWYodGFyZy50YWdOYW1lID09PSAnRk9STScpXG5cdFx0YXBpLmVtaXQoJ2Zvcm0vc3VibWl0JywgeyBmb3JtRWxlbWVudDogdGFyZywgZm9ybURhdGE6IGdldEZvcm1EYXRhKHRhcmcpIH0pO1xufVxuXG5mdW5jdGlvbiB3Z1NlbmRGaWxlKGUpe1xuXHR2YXIgdGFyZyA9IGUudGFyZ2V0O1xuXHR2YXIgZmlsZSA9IGdldEZpbGVDb250ZW50KHRhcmcsIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG5cdFx0ZGVidWcubG9nKCd3Z1NlbmRGaWxlOiAnLCByZXN1bHQpO1xuXHRcdGlmKGVycikge1xuXHRcdFx0YWxlcnQoJ0ZpbGUgd2FzIG5vdCBzZW50Jyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFwaS5zZW5kTWVzc2FnZShyZXN1bHQuZmlsZWRhdGEsIHJlc3VsdC5maWxlbmFtZSk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBXaWRnZXQgZWxlbWVudHMgbWFuaXB1bGF0aW9uICpcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZnVuY3Rpb24gc3dpdGNoUGFuZShwYW5lKXtcblx0Ly8gdmFyIHBhbmVJZCA9IGRlZmF1bHRzLnByZWZpeCsnLScrcGFuZSsnLXBhbmUnO1xuXHR2YXIgYXR0ciA9ICdkYXRhLScrZGVmYXVsdHMucHJlZml4KyctcGFuZSc7XG5cdC8vIGRlYnVnLmxvZygnc3dpdGNoUGFuZSBwYW5lczonLCBwYW5lcywgJ3BhbmU6ICcsIHBhbmUpO1xuXHRwYW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuXHRcdGlmKGl0ZW0uZ2V0QXR0cmlidXRlKGF0dHIpID09PSBwYW5lKSB7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdH1cblx0fSk7XG5cblx0aWYoIXdpZGdldFN0YXRlLmFjdGl2ZSkgc2hvd1dpZGdldCgpO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VXZ1N0YXRlKHBhcmFtcyl7XG5cdGlmKCF3aWRnZXQgfHwgd2lkZ2V0U3RhdGUuc3RhdGUgPT09IHBhcmFtcy5zdGF0ZSkgcmV0dXJuO1xuXHRpZihwYXJhbXMuc3RhdGUgPT09ICdvZmZsaW5lJykge1xuXHRcdHJlbW92ZVdnU3RhdGUoJ29ubGluZScpO1xuXHR9IGVsc2UgaWYocGFyYW1zLnN0YXRlID09PSAnb25saW5lJykge1xuXHRcdHJlbW92ZVdnU3RhdGUoJ29mZmxpbmUnKTtcblx0XHRcblx0fVxuXG5cdHdpZGdldFN0YXRlLnN0YXRlID0gcGFyYW1zLnN0YXRlO1xuXHRhZGRXZ1N0YXRlKHBhcmFtcy5zdGF0ZSk7XG5cdC8vIGFwaS5lbWl0KCd3aWRnZXQvc3RhdGVjaGFuZ2UnLCB7IHN0YXRlOiBwYXJhbXMuc3RhdGUgfSk7XG5cdHNldEJ1dHRvblN0eWxlKHBhcmFtcy5zdGF0ZSk7XG59XG5cbi8vIFRPRE86IFRoaXMgaXMgbm90IGEgZ29vZCBzb2x1dGlvbiBvciBtYXliZSBub3QgYSBnb29kIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiBzZXRCdXR0b25TdHlsZShzdGF0ZSkge1xuXHQvLyBkZWJ1Zy5sb2coJ3NldEJ1dHRvblN0eWxlOiAnLCBzdGF0ZSk7XG5cdGlmKCF3aWRnZXQgfHwgZGVmYXVsdHMuYnV0dG9uU3R5bGVzW3N0YXRlXSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdHZhciB3Z0J0biA9IHdpZGdldC5xdWVyeVNlbGVjdG9yKCcuJytkZWZhdWx0cy5wcmVmaXgrJy13Zy1idG4nKSxcblx0XHRidG5JY29uID0gd2lkZ2V0LnF1ZXJ5U2VsZWN0b3IoJy4nK2RlZmF1bHRzLnByZWZpeCsnLWJ0bi1pY29uJyk7XG5cblx0d2dCdG4uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZGVmYXVsdHMuYnV0dG9uU3R5bGVzW3N0YXRlXS5iYWNrZ3JvdW5kQ29sb3I7XG5cdGJ0bkljb24uc3R5bGUuY29sb3IgPSBkZWZhdWx0cy5idXR0b25TdHlsZXNbc3RhdGVdLmNvbG9yIHx8IGRlZmF1bHRzLmJ1dHRvblN0eWxlcy5jb2xvcjtcbn1cblxuZnVuY3Rpb24gYWRkV2dTdGF0ZShzdGF0ZSl7XG5cdGlmKHdpZGdldCkgd2lkZ2V0LmNsYXNzTGlzdC5hZGQoc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBoYXNXZ1N0YXRlKHN0YXRlKXtcblx0aWYod2lkZ2V0KSByZXR1cm4gd2lkZ2V0LmNsYXNzTGlzdC5jb250YWlucyhzdGF0ZSk7XG5cdGVsc2UgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVXZ1N0YXRlKHN0YXRlKXtcblx0aWYod2lkZ2V0KSB3aWRnZXQuY2xhc3NMaXN0LnJlbW92ZShzdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIHNob3dXaWRnZXQoKXtcblx0d2lkZ2V0U3RhdGUuYWN0aXZlID0gdHJ1ZTtcblx0YWRkV2dTdGF0ZSgnYWN0aXZlJyk7XG5cdHJlbW92ZVdnU3RhdGUoJ25vdGlmaWVkJyk7XG5cblx0Ly8gcmVzZXQgYnV0dG9uIGhlaWdodFxuXHRyZXNldFN0eWxlcyhidG4uY2hpbGRyZW5bMF0pO1xuXHRzZXRCdXR0b25TdHlsZSh3aWRnZXRTdGF0ZS5zdGF0ZSk7XG5cblx0bWVzc2FnZXNDb250LnNjcm9sbFRvcCA9IG1lc3NhZ2VzQ29udC5zY3JvbGxIZWlnaHQ7XG59XG5cbmZ1bmN0aW9uIGNsb3NlV2lkZ2V0KCl7XG5cdGlmKHdpbmRvdy5vcGVuZXIpIHtcblx0XHR3aW5kb3cuY2xvc2UoKTtcblx0fSBlbHNlIHtcblx0XHR3aWRnZXRTdGF0ZS5hY3RpdmUgPSBmYWxzZTtcblx0XHRyZW1vdmVXZ1N0YXRlKCdhY3RpdmUnKTtcblx0fVxufVxuXG5mdW5jdGlvbiBvbkZvcm1TdWJtaXQocGFyYW1zKXtcblx0dmFyIGZvcm0gPSBwYXJhbXMuZm9ybUVsZW1lbnQ7XG5cdHZhciBmb3JtRGF0YSA9IHBhcmFtcy5mb3JtRGF0YTtcblx0Ly8gZGVidWcubG9nKCdvbkZvcm1TdWJtaXQ6ICcsIGZvcm0sIGZvcm1EYXRhKTtcblx0aWYoZm9ybS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdGUtZm9ybScpKSB7XG5cdFx0dmFyIHZhbGlkID0gdmFsaWRhdGVGb3JtKGZvcm0pO1xuXHRcdGlmKCF2YWxpZCkgcmV0dXJuO1xuXHRcdC8vIGRlYnVnLmxvZygnb25Gb3JtU3VibWl0IHZhbGlkOiAnLCB2YWxpZCk7XG5cdH1cblx0aWYoZm9ybS5pZCA9PT0gZGVmYXVsdHMucHJlZml4KyctY2xvc2VjaGF0LWZvcm0nKSB7XG5cdFx0c3VibWl0Q2xvc2VDaGF0Rm9ybShmb3JtLCBmb3JtRGF0YSk7XG5cdH0gZWxzZSBpZihmb3JtLmlkID09PSBkZWZhdWx0cy5wcmVmaXgrJy1zZW5kbWFpbC1mb3JtJykge1xuXHRcdHN1Ym1pdFNlbmRNYWlsRm9ybShmb3JtLCBmb3JtRGF0YSk7XG5cdH0gZWxzZSBpZihmb3JtLmlkID09PSBkZWZhdWx0cy5wcmVmaXgrJy1pbnRyby1mb3JtJykge1xuXHRcdHJlcXVlc3RDaGF0KGZvcm1EYXRhKTtcblx0fSBlbHNlIGlmKGZvcm0uaWQgPT09IGRlZmF1bHRzLnByZWZpeCsnLWNhbGwtYnRuLWZvcm0nKXtcblx0XHRpbml0Q2FsbCgpO1xuXHR9IGVsc2UgaWYoZm9ybS5pZCA9PT0gZGVmYXVsdHMucHJlZml4KyctY2hhdC1idG4tZm9ybScpe1xuXHRcdGluaXRDaGF0KCk7XG5cdH0gZWxzZSB7XG5cdFx0Y2xvc2VGb3JtKHsgZm9ybU5hbWU6IGZvcm0ubmFtZSB9LCB0cnVlKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjbG9zZUZvcm0ocGFyYW1zLCBzdWJtaXQpe1xuXHR2YXIgZm9ybSA9IGdsb2JhbFtwYXJhbXMuZm9ybU5hbWVdO1xuXHRpZighZm9ybSkgcmV0dXJuIGZhbHNlO1xuXHRpZihzdWJtaXQpIHtcblx0XHRmb3JtLm91dGVySFRNTCA9ICc8cCBjbGFzcz1cIicrZGVmYXVsdHMucHJlZml4KyctdGV4dC1jZW50ZXJcIj4nK1xuXHRcdFx0XHRcdFx0XHQnPGkgY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLXRleHQtc3VjY2VzcyAnK2RlZmF1bHRzLnByZWZpeCsnLWljb24tY2hlY2tcIj48L2k+Jytcblx0XHRcdFx0XHRcdFx0JzxzcGFuPiAnK2ZyYXNlc1tjdXJyTGFuZ10uRk9STVMuc3VibWl0dGVkKyc8L3NwYW4+Jytcblx0XHRcdFx0XHRcdCc8L3A+Jztcblx0fSBlbHNlIHtcblx0XHRmb3JtLm91dGVySFRNTCA9ICc8cCBjbGFzcz1cIicrZGVmYXVsdHMucHJlZml4KyctdGV4dC1jZW50ZXJcIj4nK1xuXHRcdFx0XHRcdFx0XHQnPGkgY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLXRleHQtZGFuZ2VyICcrZGVmYXVsdHMucHJlZml4KyctaWNvbi1yZW1vdmVcIj48L2k+Jytcblx0XHRcdFx0XHRcdFx0JzxzcGFuPiAnK2ZyYXNlc1tjdXJyTGFuZ10uRk9STVMuY2FuY2VsZWQrJzwvc3Bhbj4nK1xuXHRcdFx0XHRcdFx0JzwvcD4nO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGdldEZpbGVDb250ZW50KGVsZW1lbnQsIGNiKXtcblx0dmFyIGZpbGVzID0gZWxlbWVudC5maWxlcyxcblx0XHRmaWxlLFxuXHRcdGRhdGEsXG5cdFx0cmVhZGVyO1xuXG5cdGlmKCFmaWxlcy5sZW5ndGgpIHJldHVybjtcblx0aWYoIWdsb2JhbC5GaWxlUmVhZGVyKSB7XG5cdFx0aWYoY2IpIGNiKCdPQlNPTEVURV9CUk9XU0VSJyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0ZmlsZSA9IGZpbGVzWzBdO1xuXG5cdHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGRhdGEgPSBldmVudC50YXJnZXQucmVzdWx0O1xuXHRcdGRhdGEgPSBkYXRhLnN1YnN0cmluZyhkYXRhLmluZGV4T2YoJywnKSsxKTtcblx0XHRpZihjYikgY2IobnVsbCwgeyBmaWxlZGF0YTogZGF0YSwgZmlsZW5hbWU6IGZpbGUubmFtZSB9KTtcblx0fTtcblx0cmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGFwaS5lbWl0KCdFcnJvcicsIGV2ZW50LnRhcmdldC5lcnJvcik7XG5cdFx0aWYoY2IpIGNiKGV2ZW50LnRhcmdldC5lcnJvcik7XG5cdH07XG5cdHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xufVxuXG5mdW5jdGlvbiBtZXNzYWdlVGVtcGxhdGUoKXtcblx0dmFyIHN0ciA9ICc8ZGl2IGNsYXNzPVwiJytkZWZhdWx0cy5wcmVmaXgrJy1tZXNzYWdlICcrZGVmYXVsdHMucHJlZml4KyctPCU9ZW50aXR5ICU+LW1zZ1wiPicgK1xuXHRcdFx0XHRcdCc8c3BhbiBjbGFzcz1cIicrZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZS1mcm9tXCI+PCU9ZnJvbSAlPjwvc3Bhbj4nICtcblx0XHRcdFx0XHQnPHNwYW4gY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2UtdGltZVwiPiA8JT0gdGltZSAlPjwvc3Bhbj4nICtcblx0XHRcdFx0XHQnPGJyPicgK1xuXHRcdFx0XHRcdCc8cCBjbGFzcz1cIicrZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZS1jb250ZW50XCIgPCUgaWYoZW50aXR5ID09PSBcInVzZXJcIikgeyAlPiBzdHlsZT1cImJvcmRlci1jb2xvcjonK2RlZmF1bHRzLnN0eWxlcy5wcmltYXJ5LmJhY2tncm91bmRDb2xvcisnXCIgPCUgfSAlPj48JT10ZXh0ICU+PC9wPicgK1xuXHRcdFx0XHQnPC9kaXY+Jztcblx0XHRcdFx0Ly8gJzwvbGk+Jztcblx0cmV0dXJuIHN0cjtcbn1cblxuLy8gZnVuY3Rpb24gYWdlbnRJc1R5cGluZ1RlbXBsYXRlKCl7XG4vLyBcdHZhciBzdHIgPSAnPGRpdiBpZD1cIicrZGVmYXVsdHMucHJlZml4KyctYWdlbnQtdHlwaW5nXCIgY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLWFnZW50LXR5cGluZ1wiPicgK1xuLy8gXHRcdFx0XHRcdCc8c3Bhbj48JT1hbmFtZSAlPjwvc3Bhbj4nICtcbi8vIFx0XHRcdFx0XHQnPHNwYW4+IDwlPSB0ZXh0ICU+PC9zcGFuPicgK1xuLy8gXHRcdFx0XHQnPC9kaXY+Jztcbi8vIFx0cmV0dXJuIHN0cjtcbi8vIH1cblxuZnVuY3Rpb24gY29tcGlsZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKXtcblx0dmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSh0ZW1wbGF0ZSk7XG5cdHJldHVybiBjb21waWxlZChkYXRhKTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBIZWxwZXIgZnVuY3Rpb25zICpcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZnVuY3Rpb24gZGV0ZWN0TGFuZ3VhZ2UoKXtcblx0dmFyIHN0b3JhZ2VMYW5nID0gc3RvcmFnZS5nZXRTdGF0ZSgnbGFuZycpLFxuXHRcdGF2YWlsYWJsZUxhbmdzID0gW10sXG5cdFx0bGFuZyxcblx0XHRwYXRoO1xuXG5cdGlmKHN0b3JhZ2VMYW5nKSB7XG5cdFx0bGFuZyA9IHN0b3JhZ2VMYW5nO1xuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gbGlzdCBhdmFpbGFibGUgbGFuZ3VhZ2VzIGJ5IHRyYW5zbGF0aW9ucyBrZXlzXG5cdFx0Zm9yKHZhciBrZXkgaW4gZnJhc2VzKSB7XG5cdFx0XHRhdmFpbGFibGVMYW5ncy5wdXNoKGtleSk7XG5cdFx0fVxuXG5cdFx0aWYoZGVmYXVsdHMubGFuZ0Zyb21VcmwpIHtcblx0XHRcdGdsb2JhbC5sb2NhdGlvbi5wYXRobmFtZVxuXHRcdFx0LnNwbGl0KCcvJylcblx0XHRcdC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0aWYoYXZhaWxhYmxlTGFuZ3MuaW5kZXhPZihpdGVtKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRsYW5nID0gaXRlbTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYoIWxhbmcpIHtcblx0XHRcdGxhbmcgPSBkZWZhdWx0cy5sYW5nIHx8IChuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZSkuc3BsaXQoJy0nKVswXTtcblx0XHRcdGlmKGF2YWlsYWJsZUxhbmdzLmluZGV4T2YobGFuZykgPT09IC0xKSBsYW5nID0gJ2VuJztcblx0XHR9XG5cdH1cblxuXHQvLyBkZWJ1Zy5sb2coJ2RldGVjdGVkIGxhbmc6ICcsIGxhbmcpO1xuXG5cdHJldHVybiBsYW5nO1xufVxuXG5mdW5jdGlvbiBicm93c2VySXNPYnNvbGV0ZSgpIHtcblx0ZGVidWcud2FybignWW91ciBicm93c2VyIGlzIG9ic29sZXRlIScpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWUodHMpIHtcblx0dmFyIGRhdGUgPSBuZXcgRGF0ZSh0cyksXG5cdFx0aG91cnMgPSBkYXRlLmdldEhvdXJzKCksXG5cdFx0bWludXRlcyA9IGRhdGUuZ2V0TWludXRlcygpLFxuXHRcdHRpbWUgPSAoaG91cnMgPCAxMCA/ICcwJytob3VycyA6IGhvdXJzKSArICc6JyArIChtaW51dGVzIDwgMTAgPyAnMCcrbWludXRlcyA6IG1pbnV0ZXMpO1xuXG5cdHJldHVybiB0aW1lO1xufVxuXG5mdW5jdGlvbiBwYXJzZU1lc3NhZ2UodGV4dCwgZmlsZSwgZW50aXR5KXtcblx0dmFyIGZpbGVuYW1lLCBmb3JtO1xuXHRpZihmaWxlKSB7XG5cdFx0ZmlsZW5hbWUgPSB0ZXh0LnN1YnN0cmluZyh0ZXh0LmluZGV4T2YoJ18nKSsxKTtcblx0XHRpZihpc0ltYWdlKGZpbGUpKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiAnaW1hZ2UnLFxuXHRcdFx0XHRjb250ZW50OiAnPGEgaHJlZj1cIicrYXBpLm9wdGlvbnMuc2VydmVyKycvaXBjYy8nK3RleHQrJ1wiIGRvd25sb2FkPVwiJytmaWxlbmFtZSsnXCI+JyArXG5cdFx0XHRcdFx0XHQnPGltZyBzcmM9XCInK2FwaS5vcHRpb25zLnNlcnZlcisnL2lwY2MvJyt0ZXh0KydcIiBhbHQ9XCJmaWxlIHByZXZpZXdcIiAvPicgK1xuXHRcdFx0XHRcdCc8L2E+J1xuXHRcdFx0fTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0dHlwZTogJ2ZpbGUnLFxuXHRcdFx0XHRjb250ZW50OiAnPGEgaHJlZj1cIicrYXBpLm9wdGlvbnMuc2VydmVyKycvaXBjYy8nK3RleHQrJ1wiIGRvd25sb2FkPVwiJytmaWxlbmFtZSsnXCI+JytmaWxlbmFtZSsnPC9hPidcblx0XHRcdH07XG5cdFx0fVxuXHR9IGVsc2UgaWYoZW50aXR5ID09PSAnYWdlbnQnICYmIG5ldyBSZWdFeHAoJ157Lit9JCcpLnRlc3QodGV4dCkpIHtcblx0XHRmb3Jtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdGlmKGl0ZW0ubmFtZSA9PT0gdGV4dC5zdWJzdHJpbmcoMSwgdGV4dC5sZW5ndGgtMSkpIHtcblx0XHRcdFx0Zm9ybSA9IGl0ZW07XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogZm9ybSA/ICdmb3JtJyA6ICd0ZXh0Jyxcblx0XHRcdGNvbnRlbnQ6IGZvcm0gPyBmb3JtIDogdGV4dFxuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6ICd0ZXh0Jyxcblx0XHRcdGNvbnRlbnQ6IHRleHQuc3BsaXQoXCIgXCIpLm1hcChjb252ZXJ0TGlua3MpLmpvaW4oXCIgXCIpXG5cdFx0fTtcblx0fVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0TGlua3ModGV4dCl7XG5cdHZhciBsZWZ0b3ZlcnMgPSAwO1xuXHR2YXIgaHJlZiA9IHRleHQ7XG5cdGlmKGlzTGluayh0ZXh0KSl7XG5cblx0XHR3aGlsZSghKGhyZWYuY2hhckF0KGhyZWYubGVuZ3RoLTEpLm1hdGNoKC9bYS16MC05XFwvXS9pKSkpe1xuXHRcdFx0aHJlZiA9IGhyZWYuc2xpY2UoMCwtMSk7XG5cdFx0XHRsZWZ0b3ZlcnMgKz0gMTtcblx0XHR9XG5cdFx0cmV0dXJuICc8YSBocmVmPVwiJytocmVmKydcIiB0YXJnZXQ9XCJfYmxhbmtcIiBkYXRhLScrZGVmYXVsdHMucHJlZml4KyctbGluaz1cIicraHJlZisnXCI+JytocmVmKyc8L2E+JyArIHRleHQuc3Vic3RyKHRleHQubGVuZ3RoIC0gbGVmdG92ZXJzKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gdGV4dDtcblx0fVxufVxuXG5mdW5jdGlvbiBpc0xpbmsodGV4dCl7XG5cdHZhciBwYXR0ZXJuID0gbmV3IFJlZ0V4cCgnXmh0dHA6XFwvXFwvfF5odHRwczpcXC9cXC8nKTtcblx0cmV0dXJuIHBhdHRlcm4udGVzdCh0ZXh0KTtcbn1cblxuZnVuY3Rpb24gaXNJbWFnZShmaWxlbmFtZSl7XG5cdHZhciByZWdleCA9IG5ldyBSZWdFeHAoJ3BuZ3xQTkd8anBnfEpQR3xKUEVHfGpwZWd8Z2lmfEdJRicpO1xuXHR2YXIgZXh0ID0gZmlsZW5hbWUuc3Vic3RyaW5nKGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJykrMSk7XG5cdHJldHVybiByZWdleC50ZXN0KGV4dCk7XG59XG5cbmZ1bmN0aW9uIGdldEZvcm1EYXRhKGZvcm0pe1xuXHR2YXIgZm9ybURhdGEgPSB7fTtcblx0W10uc2xpY2UuY2FsbChmb3JtLmVsZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XG5cdFx0aWYoZWwudHlwZSA9PT0gJ2NoZWNrYm94JykgZm9ybURhdGFbZWwubmFtZV0gPSBlbC5jaGVja2VkO1xuXHRcdGVsc2Uge1xuXHRcdFx0aWYoZWwudmFsdWUpIGZvcm1EYXRhW2VsLm5hbWVdID0gZWwudmFsdWU7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIGZvcm1EYXRhO1xufVxuXG5mdW5jdGlvbiB2YWxpZGF0ZUZvcm0oZm9ybSl7XG5cdHZhciB2YWxpZCA9IHRydWU7XG5cdFtdLnNsaWNlLmNhbGwoZm9ybS5lbGVtZW50cykuZXZlcnkoZnVuY3Rpb24oZWwpIHtcblx0XHQvLyBkZWJ1Zy5sb2coJ3ZhbGlkYXRlRm9ybSBlbDonLCBlbCwgZWwuaGFzQXR0cmlidXRlKCdyZXF1aXJlZCcpLCBlbC52YWx1ZSwgZWwudHlwZSk7XG5cdFx0aWYoZWwuaGFzQXR0cmlidXRlKCdyZXF1aXJlZCcpICYmIChlbC52YWx1ZSA9PT0gXCJcIiB8fCBlbC52YWx1ZSA9PT0gbnVsbCkpIHtcblx0XHRcdGFsZXJ0KGZyYXNlc1tjdXJyTGFuZ10uRVJST1JTW2VsLnR5cGVdIHx8IGZyYXNlc1tjdXJyTGFuZ10uRVJST1JTLnJlcXVpcmVkKTtcblx0XHRcdHZhbGlkID0gZmFsc2U7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fSk7XG5cdC8vIGRlYnVnLmxvZygndmFsaWRhdGVGb3JtIHZhbGlkOiAnLCB2YWxpZCk7XG5cdHJldHVybiB2YWxpZDtcbn1cblxuZnVuY3Rpb24gcmVzZXRTdHlsZXMoZWxlbWVudCl7XG5cdGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xufVxuXG5mdW5jdGlvbiBhZGRXaWRnZXRTdHlsZXMoKXtcblx0XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuXHRcdGxpbmsucmVsID0gJ3N0eWxlc2hlZXQnO1xuXHRcdGxpbmsuaHJlZiA9IGRlZmF1bHRzLnN0eWxlc1BhdGggfHwgZGVmYXVsdHMuY2xpZW50UGF0aCsnbWFpbi5jc3MnO1xuXG5cdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG59XG5cbmZ1bmN0aW9uIFByZWZpeGVkRXZlbnQoZWxlbWVudCwgdHlwZSwgcGZ4LCBjYWxsYmFjaykge1xuXHRmb3IgKHZhciBwID0gMDsgcCA8IHBmeC5sZW5ndGg7IHArKykge1xuXHRcdGlmICghcGZ4W3BdKSB0eXBlID0gdHlwZS50b0xvd2VyQ2FzZSgpO1xuXHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihwZnhbcF0rdHlwZSwgY2FsbGJhY2ssIGZhbHNlKTtcblx0fVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0VGltZShzZWNvbmRzKXtcblx0dmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCksXG5cdFx0c2Vjc1JlbWFpbiA9IHNlY29uZHMgJSA2MCxcblx0XHRzdHIgPSAobWludXRlcyA+IDkgPyBtaW51dGVzIDogJzAnICsgbWludXRlcykgKyAnOicgKyAoc2Vjc1JlbWFpbiA+IDkgPyBzZWNzUmVtYWluIDogJzAnICsgc2Vjc1JlbWFpbik7XG5cdHJldHVybiBzdHI7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFBob25lTnVtYmVyKHBob25lKSB7XG5cdHJldHVybiBwaG9uZS5yZXBsYWNlKC9cXEQrL2csIFwiXCIpO1xufVxuXG5mdW5jdGlvbiBpc0Jyb3dzZXJTdXBwb3J0ZWQoKSB7XG5cdHJldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdCAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudChvYmosIGV2VHlwZSwgZm4pIHtcbiAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSBvYmouYWRkRXZlbnRMaXN0ZW5lcihldlR5cGUsIGZuLCBmYWxzZSk7XG4gIGVsc2UgaWYgKG9iai5hdHRhY2hFdmVudCkgb2JqLmF0dGFjaEV2ZW50KFwib25cIitldlR5cGUsIGZuKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50KG9iaiwgZXZUeXBlLCBmbikge1xuICBpZiAob2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIpIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKGV2VHlwZSwgZm4sIGZhbHNlKTtcbiAgZWxzZSBpZiAob2JqLmRldGFjaEV2ZW50KSBvYmouZGV0YWNoRXZlbnQoXCJvblwiK2V2VHlwZSwgZm4pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0bW9kdWxlOiBXaWRnZXQsXG5cdGFwaTogcHVibGljQXBpXG59O1xuIl19
