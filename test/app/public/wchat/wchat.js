(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Wchat = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

;(function (exports) {
	'use strict';

  var Arr = (typeof Uint8Array !== 'undefined')
    ? Uint8Array
    : Array

	var PLUS   = '+'.charCodeAt(0)
	var SLASH  = '/'.charCodeAt(0)
	var NUMBER = '0'.charCodeAt(0)
	var LOWER  = 'a'.charCodeAt(0)
	var UPPER  = 'A'.charCodeAt(0)
	var PLUS_URL_SAFE = '-'.charCodeAt(0)
	var SLASH_URL_SAFE = '_'.charCodeAt(0)

	function decode (elt) {
		var code = elt.charCodeAt(0)
		if (code === PLUS ||
		    code === PLUS_URL_SAFE)
			return 62 // '+'
		if (code === SLASH ||
		    code === SLASH_URL_SAFE)
			return 63 // '/'
		if (code < NUMBER)
			return -1 //no match
		if (code < NUMBER + 10)
			return code - NUMBER + 26 + 26
		if (code < UPPER + 26)
			return code - UPPER
		if (code < LOWER + 26)
			return code - LOWER + 26
	}

	function b64ToByteArray (b64) {
		var i, j, l, tmp, placeHolders, arr

		if (b64.length % 4 > 0) {
			throw new Error('Invalid string. Length must be a multiple of 4')
		}

		// the number of equal signs (place holders)
		// if there are two placeholders, than the two characters before it
		// represent one byte
		// if there is only one, then the three characters before it represent 2 bytes
		// this is just a cheap hack to not do indexOf twice
		var len = b64.length
		placeHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0

		// base64 is 4/3 + up to two characters of the original data
		arr = new Arr(b64.length * 3 / 4 - placeHolders)

		// if there are placeholders, only get up to the last complete 4 chars
		l = placeHolders > 0 ? b64.length - 4 : b64.length

		var L = 0

		function push (v) {
			arr[L++] = v
		}

		for (i = 0, j = 0; i < l; i += 4, j += 3) {
			tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))
			push((tmp & 0xFF0000) >> 16)
			push((tmp & 0xFF00) >> 8)
			push(tmp & 0xFF)
		}

		if (placeHolders === 2) {
			tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)
			push(tmp & 0xFF)
		} else if (placeHolders === 1) {
			tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)
			push((tmp >> 8) & 0xFF)
			push(tmp & 0xFF)
		}

		return arr
	}

	function uint8ToBase64 (uint8) {
		var i,
			extraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes
			output = "",
			temp, length

		function encode (num) {
			return lookup.charAt(num)
		}

		function tripletToBase64 (num) {
			return encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)
		}

		// go through the array every three bytes, we'll deal with trailing stuff later
		for (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {
			temp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])
			output += tripletToBase64(temp)
		}

		// pad the end with zeros, but make sure to not forget the extra bytes
		switch (extraBytes) {
			case 1:
				temp = uint8[uint8.length - 1]
				output += encode(temp >> 2)
				output += encode((temp << 4) & 0x3F)
				output += '=='
				break
			case 2:
				temp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])
				output += encode(temp >> 10)
				output += encode((temp >> 4) & 0x3F)
				output += encode((temp << 2) & 0x3F)
				output += '='
				break
		}

		return output
	}

	exports.toByteArray = b64ToByteArray
	exports.fromByteArray = uint8ToBase64
}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))

},{}],2:[function(require,module,exports){

},{}],3:[function(require,module,exports){
(function (global){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */

var base64 = require('base64-js')
var ieee754 = require('ieee754')
var isArray = require('isarray')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50
Buffer.poolSize = 8192 // not used by this implementation

var rootParent = {}

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Safari 5-7 lacks support for changing the `Object.prototype.constructor` property
 *     on objects.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

function typedArraySupport () {
  function Bar () {}
  try {
    var arr = new Uint8Array(1)
    arr.foo = function () { return 42 }
    arr.constructor = Bar
    return arr.foo() === 42 && // typed array instances can be augmented
        arr.constructor === Bar && // constructor can be set
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

/**
 * Class: Buffer
 * =============
 *
 * The Buffer constructor returns instances of `Uint8Array` that are augmented
 * with function properties for all the node `Buffer` API functions. We use
 * `Uint8Array` so that square bracket notation works as expected -- it returns
 * a single octet.
 *
 * By augmenting the instances, we can avoid modifying the `Uint8Array`
 * prototype.
 */
function Buffer (arg) {
  if (!(this instanceof Buffer)) {
    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.
    if (arguments.length > 1) return new Buffer(arg, arguments[1])
    return new Buffer(arg)
  }

  this.length = 0
  this.parent = undefined

  // Common case.
  if (typeof arg === 'number') {
    return fromNumber(this, arg)
  }

  // Slightly less common case.
  if (typeof arg === 'string') {
    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')
  }

  // Unusual.
  return fromObject(this, arg)
}

function fromNumber (that, length) {
  that = allocate(that, length < 0 ? 0 : checked(length) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < length; i++) {
      that[i] = 0
    }
  }
  return that
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'

  // Assumption: byteLength() return value is always < kMaxLength.
  var length = byteLength(string, encoding) | 0
  that = allocate(that, length)

  that.write(string, encoding)
  return that
}

function fromObject (that, object) {
  if (Buffer.isBuffer(object)) return fromBuffer(that, object)

  if (isArray(object)) return fromArray(that, object)

  if (object == null) {
    throw new TypeError('must start with number, buffer, array or string')
  }

  if (typeof ArrayBuffer !== 'undefined') {
    if (object.buffer instanceof ArrayBuffer) {
      return fromTypedArray(that, object)
    }
    if (object instanceof ArrayBuffer) {
      return fromArrayBuffer(that, object)
    }
  }

  if (object.length) return fromArrayLike(that, object)

  return fromJsonObject(that, object)
}

function fromBuffer (that, buffer) {
  var length = checked(buffer.length) | 0
  that = allocate(that, length)
  buffer.copy(that, 0, 0, length)
  return that
}

function fromArray (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

// Duplicate of fromArray() to keep fromArray() monomorphic.
function fromTypedArray (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  // Truncating the elements is probably not what people expect from typed
  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior
  // of the old Buffer constructor.
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array) {
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    array.byteLength
    that = Buffer._augment(new Uint8Array(array))
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromTypedArray(that, new Uint8Array(array))
  }
  return that
}

function fromArrayLike (that, array) {
  var length = checked(array.length) | 0
  that = allocate(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.
// Returns a zero-length buffer for inputs that don't conform to the spec.
function fromJsonObject (that, object) {
  var array
  var length = 0

  if (object.type === 'Buffer' && isArray(object.data)) {
    array = object.data
    length = checked(array.length) | 0
  }
  that = allocate(that, length)

  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
}

function allocate (that, length) {
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = Buffer._augment(new Uint8Array(length))
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that.length = length
    that._isBuffer = true
  }

  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1
  if (fromPool) that.parent = rootParent

  return that
}

function checked (length) {
  // Note: cannot use `length < kMaxLength` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (subject, encoding) {
  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)

  var buf = new Buffer(subject, encoding)
  delete buf.parent
  return buf
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  var i = 0
  var len = Math.min(x, y)
  while (i < len) {
    if (a[i] !== b[i]) break

    ++i
  }

  if (i !== len) {
    x = a[i]
    y = b[i]
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'binary':
    case 'base64':
    case 'raw':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')

  if (list.length === 0) {
    return new Buffer(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; i++) {
      length += list[i].length
    }
  }

  var buf = new Buffer(length)
  var pos = 0
  for (i = 0; i < list.length; i++) {
    var item = list[i]
    item.copy(buf, pos)
    pos += item.length
  }
  return buf
}

function byteLength (string, encoding) {
  if (typeof string !== 'string') string = '' + string

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'binary':
      // Deprecated
      case 'raw':
      case 'raws':
        return len
      case 'utf8':
      case 'utf-8':
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

// pre-set for values that may exist in the future
Buffer.prototype.length = undefined
Buffer.prototype.parent = undefined

function slowToString (encoding, start, end) {
  var loweredCase = false

  start = start | 0
  end = end === undefined || end === Infinity ? this.length : end | 0

  if (!encoding) encoding = 'utf8'
  if (start < 0) start = 0
  if (end > this.length) end = this.length
  if (end <= start) return ''

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'binary':
        return binarySlice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return 0
  return Buffer.compare(this, b)
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset) {
  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff
  else if (byteOffset < -0x80000000) byteOffset = -0x80000000
  byteOffset >>= 0

  if (this.length === 0) return -1
  if (byteOffset >= this.length) return -1

  // Negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)

  if (typeof val === 'string') {
    if (val.length === 0) return -1 // special case: looking for empty string always fails
    return String.prototype.indexOf.call(this, val, byteOffset)
  }
  if (Buffer.isBuffer(val)) {
    return arrayIndexOf(this, val, byteOffset)
  }
  if (typeof val === 'number') {
    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {
      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)
    }
    return arrayIndexOf(this, [ val ], byteOffset)
  }

  function arrayIndexOf (arr, val, byteOffset) {
    var foundIndex = -1
    for (var i = 0; byteOffset + i < arr.length; i++) {
      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex
      } else {
        foundIndex = -1
      }
    }
    return -1
  }

  throw new TypeError('val must be string, number or Buffer')
}

// `get` is deprecated
Buffer.prototype.get = function get (offset) {
  console.log('.get() is deprecated. Access using array indexes instead.')
  return this.readUInt8(offset)
}

// `set` is deprecated
Buffer.prototype.set = function set (v, offset) {
  console.log('.set() is deprecated. Access using array indexes instead.')
  return this.writeUInt8(v, offset)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new Error('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; i++) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) throw new Error('Invalid hex string')
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function binaryWrite (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    var swap = encoding
    encoding = offset
    offset = length | 0
    length = swap
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'binary':
        return binaryWrite(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function binarySlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; i++) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; i++) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = Buffer._augment(this.subarray(start, end))
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; i++) {
      newBuf[i] = this[i + start]
    }
  }

  if (newBuf.length) newBuf.parent = this.parent || this

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = value < 0 ? 1 : 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (value > max || value < min) throw new RangeError('value is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('index out of range')
  if (offset < 0) throw new RangeError('index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; i--) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; i++) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    target._set(this.subarray(start, start + len), targetStart)
  }

  return len
}

// fill(value, start=0, end=buffer.length)
Buffer.prototype.fill = function fill (value, start, end) {
  if (!value) value = 0
  if (!start) start = 0
  if (!end) end = this.length

  if (end < start) throw new RangeError('end < start')

  // Fill 0 bytes; we're done
  if (end === start) return
  if (this.length === 0) return

  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')
  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')

  var i
  if (typeof value === 'number') {
    for (i = start; i < end; i++) {
      this[i] = value
    }
  } else {
    var bytes = utf8ToBytes(value.toString())
    var len = bytes.length
    for (i = start; i < end; i++) {
      this[i] = bytes[i % len]
    }
  }

  return this
}

/**
 * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.
 * Added in Node 0.12. Only available in browsers that support ArrayBuffer.
 */
Buffer.prototype.toArrayBuffer = function toArrayBuffer () {
  if (typeof Uint8Array !== 'undefined') {
    if (Buffer.TYPED_ARRAY_SUPPORT) {
      return (new Buffer(this)).buffer
    } else {
      var buf = new Uint8Array(this.length)
      for (var i = 0, len = buf.length; i < len; i += 1) {
        buf[i] = this[i]
      }
      return buf.buffer
    }
  } else {
    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')
  }
}

// HELPER FUNCTIONS
// ================

var BP = Buffer.prototype

/**
 * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods
 */
Buffer._augment = function _augment (arr) {
  arr.constructor = Buffer
  arr._isBuffer = true

  // save reference to original Uint8Array set method before overwriting
  arr._set = arr.set

  // deprecated
  arr.get = BP.get
  arr.set = BP.set

  arr.write = BP.write
  arr.toString = BP.toString
  arr.toLocaleString = BP.toString
  arr.toJSON = BP.toJSON
  arr.equals = BP.equals
  arr.compare = BP.compare
  arr.indexOf = BP.indexOf
  arr.copy = BP.copy
  arr.slice = BP.slice
  arr.readUIntLE = BP.readUIntLE
  arr.readUIntBE = BP.readUIntBE
  arr.readUInt8 = BP.readUInt8
  arr.readUInt16LE = BP.readUInt16LE
  arr.readUInt16BE = BP.readUInt16BE
  arr.readUInt32LE = BP.readUInt32LE
  arr.readUInt32BE = BP.readUInt32BE
  arr.readIntLE = BP.readIntLE
  arr.readIntBE = BP.readIntBE
  arr.readInt8 = BP.readInt8
  arr.readInt16LE = BP.readInt16LE
  arr.readInt16BE = BP.readInt16BE
  arr.readInt32LE = BP.readInt32LE
  arr.readInt32BE = BP.readInt32BE
  arr.readFloatLE = BP.readFloatLE
  arr.readFloatBE = BP.readFloatBE
  arr.readDoubleLE = BP.readDoubleLE
  arr.readDoubleBE = BP.readDoubleBE
  arr.writeUInt8 = BP.writeUInt8
  arr.writeUIntLE = BP.writeUIntLE
  arr.writeUIntBE = BP.writeUIntBE
  arr.writeUInt16LE = BP.writeUInt16LE
  arr.writeUInt16BE = BP.writeUInt16BE
  arr.writeUInt32LE = BP.writeUInt32LE
  arr.writeUInt32BE = BP.writeUInt32BE
  arr.writeIntLE = BP.writeIntLE
  arr.writeIntBE = BP.writeIntBE
  arr.writeInt8 = BP.writeInt8
  arr.writeInt16LE = BP.writeInt16LE
  arr.writeInt16BE = BP.writeInt16BE
  arr.writeInt32LE = BP.writeInt32LE
  arr.writeInt32BE = BP.writeInt32BE
  arr.writeFloatLE = BP.writeFloatLE
  arr.writeFloatBE = BP.writeFloatBE
  arr.writeDoubleLE = BP.writeDoubleLE
  arr.writeDoubleBE = BP.writeDoubleBE
  arr.fill = BP.fill
  arr.inspect = BP.inspect
  arr.toArrayBuffer = BP.toArrayBuffer

  return arr
}

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; i++) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; i++) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; i++) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":1,"ieee754":8,"isarray":11}],4:[function(require,module,exports){
module.exports = {
  "100": "Continue",
  "101": "Switching Protocols",
  "102": "Processing",
  "200": "OK",
  "201": "Created",
  "202": "Accepted",
  "203": "Non-Authoritative Information",
  "204": "No Content",
  "205": "Reset Content",
  "206": "Partial Content",
  "207": "Multi-Status",
  "300": "Multiple Choices",
  "301": "Moved Permanently",
  "302": "Moved Temporarily",
  "303": "See Other",
  "304": "Not Modified",
  "305": "Use Proxy",
  "307": "Temporary Redirect",
  "308": "Permanent Redirect",
  "400": "Bad Request",
  "401": "Unauthorized",
  "402": "Payment Required",
  "403": "Forbidden",
  "404": "Not Found",
  "405": "Method Not Allowed",
  "406": "Not Acceptable",
  "407": "Proxy Authentication Required",
  "408": "Request Time-out",
  "409": "Conflict",
  "410": "Gone",
  "411": "Length Required",
  "412": "Precondition Failed",
  "413": "Request Entity Too Large",
  "414": "Request-URI Too Large",
  "415": "Unsupported Media Type",
  "416": "Requested Range Not Satisfiable",
  "417": "Expectation Failed",
  "418": "I'm a teapot",
  "422": "Unprocessable Entity",
  "423": "Locked",
  "424": "Failed Dependency",
  "425": "Unordered Collection",
  "426": "Upgrade Required",
  "428": "Precondition Required",
  "429": "Too Many Requests",
  "431": "Request Header Fields Too Large",
  "500": "Internal Server Error",
  "501": "Not Implemented",
  "502": "Bad Gateway",
  "503": "Service Unavailable",
  "504": "Gateway Time-out",
  "505": "HTTP Version Not Supported",
  "506": "Variant Also Negotiates",
  "507": "Insufficient Storage",
  "509": "Bandwidth Limit Exceeded",
  "510": "Not Extended",
  "511": "Network Authentication Required"
}

},{}],5:[function(require,module,exports){
(function (Buffer){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.

function isArray(arg) {
  if (Array.isArray) {
    return Array.isArray(arg);
  }
  return objectToString(arg) === '[object Array]';
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = Buffer.isBuffer;

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

}).call(this,{"isBuffer":require("../../is-buffer/index.js")})

},{"../../is-buffer/index.js":10}],6:[function(require,module,exports){

/**
 * Expose `parse`.
 */

module.exports = parse;

/**
 * Tests for browser support.
 */

var innerHTMLBug = false;
var bugTestDiv;
if (typeof document !== 'undefined') {
  bugTestDiv = document.createElement('div');
  // Setup
  bugTestDiv.innerHTML = '  <link/><table></table><a href="/a">a</a><input type="checkbox"/>';
  // Make sure that link elements get serialized correctly by innerHTML
  // This requires a wrapper element in IE
  innerHTMLBug = !bugTestDiv.getElementsByTagName('link').length;
  bugTestDiv = undefined;
}

/**
 * Wrap map from jquery.
 */

var map = {
  legend: [1, '<fieldset>', '</fieldset>'],
  tr: [2, '<table><tbody>', '</tbody></table>'],
  col: [2, '<table><tbody></tbody><colgroup>', '</colgroup></table>'],
  // for script/link/style tags to work in IE6-8, you have to wrap
  // in a div with a non-whitespace character in front, ha!
  _default: innerHTMLBug ? [1, 'X<div>', '</div>'] : [0, '', '']
};

map.td =
map.th = [3, '<table><tbody><tr>', '</tr></tbody></table>'];

map.option =
map.optgroup = [1, '<select multiple="multiple">', '</select>'];

map.thead =
map.tbody =
map.colgroup =
map.caption =
map.tfoot = [1, '<table>', '</table>'];

map.polyline =
map.ellipse =
map.polygon =
map.circle =
map.text =
map.line =
map.path =
map.rect =
map.g = [1, '<svg xmlns="http://www.w3.org/2000/svg" version="1.1">','</svg>'];

/**
 * Parse `html` and return a DOM Node instance, which could be a TextNode,
 * HTML DOM Node of some kind (<div> for example), or a DocumentFragment
 * instance, depending on the contents of the `html` string.
 *
 * @param {String} html - HTML string to "domify"
 * @param {Document} doc - The `document` instance to create the Node for
 * @return {DOMNode} the TextNode, DOM Node, or DocumentFragment instance
 * @api private
 */

function parse(html, doc) {
  if ('string' != typeof html) throw new TypeError('String expected');

  // default to the global `document` object
  if (!doc) doc = document;

  // tag name
  var m = /<([\w:]+)/.exec(html);
  if (!m) return doc.createTextNode(html);

  html = html.replace(/^\s+|\s+$/g, ''); // Remove leading/trailing whitespace

  var tag = m[1];

  // body support
  if (tag == 'body') {
    var el = doc.createElement('html');
    el.innerHTML = html;
    return el.removeChild(el.lastChild);
  }

  // wrap map
  var wrap = map[tag] || map._default;
  var depth = wrap[0];
  var prefix = wrap[1];
  var suffix = wrap[2];
  var el = doc.createElement('div');
  el.innerHTML = prefix + html + suffix;
  while (depth--) el = el.lastChild;

  // one element
  if (el.firstChild == el.lastChild) {
    return el.removeChild(el.firstChild);
  }

  // several elements
  var fragment = doc.createDocumentFragment();
  while (el.firstChild) {
    fragment.appendChild(el.removeChild(el.firstChild));
  }

  return fragment;
}

},{}],7:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

function EventEmitter() {
  this._events = this._events || {};
  this._maxListeners = this._maxListeners || undefined;
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
EventEmitter.defaultMaxListeners = 10;

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function(n) {
  if (!isNumber(n) || n < 0 || isNaN(n))
    throw TypeError('n must be a positive number');
  this._maxListeners = n;
  return this;
};

EventEmitter.prototype.emit = function(type) {
  var er, handler, len, args, i, listeners;

  if (!this._events)
    this._events = {};

  // If there is no 'error' event listener then throw.
  if (type === 'error') {
    if (!this._events.error ||
        (isObject(this._events.error) && !this._events.error.length)) {
      er = arguments[1];
      if (er instanceof Error) {
        throw er; // Unhandled 'error' event
      }
      throw TypeError('Uncaught, unspecified "error" event.');
    }
  }

  handler = this._events[type];

  if (isUndefined(handler))
    return false;

  if (isFunction(handler)) {
    switch (arguments.length) {
      // fast cases
      case 1:
        handler.call(this);
        break;
      case 2:
        handler.call(this, arguments[1]);
        break;
      case 3:
        handler.call(this, arguments[1], arguments[2]);
        break;
      // slower
      default:
        args = Array.prototype.slice.call(arguments, 1);
        handler.apply(this, args);
    }
  } else if (isObject(handler)) {
    args = Array.prototype.slice.call(arguments, 1);
    listeners = handler.slice();
    len = listeners.length;
    for (i = 0; i < len; i++)
      listeners[i].apply(this, args);
  }

  return true;
};

EventEmitter.prototype.addListener = function(type, listener) {
  var m;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events)
    this._events = {};

  // To avoid recursion in the case that type === "newListener"! Before
  // adding it to the listeners, first emit "newListener".
  if (this._events.newListener)
    this.emit('newListener', type,
              isFunction(listener.listener) ?
              listener.listener : listener);

  if (!this._events[type])
    // Optimize the case of one listener. Don't need the extra array object.
    this._events[type] = listener;
  else if (isObject(this._events[type]))
    // If we've already got an array, just append.
    this._events[type].push(listener);
  else
    // Adding the second element, need to change to array.
    this._events[type] = [this._events[type], listener];

  // Check for listener leak
  if (isObject(this._events[type]) && !this._events[type].warned) {
    if (!isUndefined(this._maxListeners)) {
      m = this._maxListeners;
    } else {
      m = EventEmitter.defaultMaxListeners;
    }

    if (m && m > 0 && this._events[type].length > m) {
      this._events[type].warned = true;
      console.error('(node) warning: possible EventEmitter memory ' +
                    'leak detected. %d listeners added. ' +
                    'Use emitter.setMaxListeners() to increase limit.',
                    this._events[type].length);
      if (typeof console.trace === 'function') {
        // not supported in IE 10
        console.trace();
      }
    }
  }

  return this;
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.once = function(type, listener) {
  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  var fired = false;

  function g() {
    this.removeListener(type, g);

    if (!fired) {
      fired = true;
      listener.apply(this, arguments);
    }
  }

  g.listener = listener;
  this.on(type, g);

  return this;
};

// emits a 'removeListener' event iff the listener was removed
EventEmitter.prototype.removeListener = function(type, listener) {
  var list, position, length, i;

  if (!isFunction(listener))
    throw TypeError('listener must be a function');

  if (!this._events || !this._events[type])
    return this;

  list = this._events[type];
  length = list.length;
  position = -1;

  if (list === listener ||
      (isFunction(list.listener) && list.listener === listener)) {
    delete this._events[type];
    if (this._events.removeListener)
      this.emit('removeListener', type, listener);

  } else if (isObject(list)) {
    for (i = length; i-- > 0;) {
      if (list[i] === listener ||
          (list[i].listener && list[i].listener === listener)) {
        position = i;
        break;
      }
    }

    if (position < 0)
      return this;

    if (list.length === 1) {
      list.length = 0;
      delete this._events[type];
    } else {
      list.splice(position, 1);
    }

    if (this._events.removeListener)
      this.emit('removeListener', type, listener);
  }

  return this;
};

EventEmitter.prototype.removeAllListeners = function(type) {
  var key, listeners;

  if (!this._events)
    return this;

  // not listening for removeListener, no need to emit
  if (!this._events.removeListener) {
    if (arguments.length === 0)
      this._events = {};
    else if (this._events[type])
      delete this._events[type];
    return this;
  }

  // emit removeListener for all listeners on all events
  if (arguments.length === 0) {
    for (key in this._events) {
      if (key === 'removeListener') continue;
      this.removeAllListeners(key);
    }
    this.removeAllListeners('removeListener');
    this._events = {};
    return this;
  }

  listeners = this._events[type];

  if (isFunction(listeners)) {
    this.removeListener(type, listeners);
  } else if (listeners) {
    // LIFO order
    while (listeners.length)
      this.removeListener(type, listeners[listeners.length - 1]);
  }
  delete this._events[type];

  return this;
};

EventEmitter.prototype.listeners = function(type) {
  var ret;
  if (!this._events || !this._events[type])
    ret = [];
  else if (isFunction(this._events[type]))
    ret = [this._events[type]];
  else
    ret = this._events[type].slice();
  return ret;
};

EventEmitter.prototype.listenerCount = function(type) {
  if (this._events) {
    var evlistener = this._events[type];

    if (isFunction(evlistener))
      return 1;
    else if (evlistener)
      return evlistener.length;
  }
  return 0;
};

EventEmitter.listenerCount = function(emitter, type) {
  return emitter.listenerCount(type);
};

function isFunction(arg) {
  return typeof arg === 'function';
}

function isNumber(arg) {
  return typeof arg === 'number';
}

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}

function isUndefined(arg) {
  return arg === void 0;
}

},{}],8:[function(require,module,exports){
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}

},{}],9:[function(require,module,exports){
if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    ctor.prototype = Object.create(superCtor.prototype, {
      constructor: {
        value: ctor,
        enumerable: false,
        writable: true,
        configurable: true
      }
    });
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    ctor.super_ = superCtor
    var TempCtor = function () {}
    TempCtor.prototype = superCtor.prototype
    ctor.prototype = new TempCtor()
    ctor.prototype.constructor = ctor
  }
}

},{}],10:[function(require,module,exports){
/**
 * Determine if an object is Buffer
 *
 * Author:   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * License:  MIT
 *
 * `npm install is-buffer`
 */

module.exports = function (obj) {
  return !!(obj != null &&
    (obj._isBuffer || // For Safari 5-7 (missing Object.prototype.constructor)
      (obj.constructor &&
      typeof obj.constructor.isBuffer === 'function' &&
      obj.constructor.isBuffer(obj))
    ))
}

},{}],11:[function(require,module,exports){
module.exports = Array.isArray || function (arr) {
  return Object.prototype.toString.call(arr) == '[object Array]';
};

},{}],12:[function(require,module,exports){
var arrayEach = require('../internal/arrayEach'),
    baseEach = require('../internal/baseEach'),
    createForEach = require('../internal/createForEach');

/**
 * Iterates over elements of `collection` invoking `iteratee` for each element.
 * The `iteratee` is bound to `thisArg` and invoked with three arguments:
 * (value, index|key, collection). Iteratee functions may exit iteration early
 * by explicitly returning `false`.
 *
 * **Note:** As with other "Collections" methods, objects with a "length" property
 * are iterated like arrays. To avoid this behavior `_.forIn` or `_.forOwn`
 * may be used for object iteration.
 *
 * @static
 * @memberOf _
 * @alias each
 * @category Collection
 * @param {Array|Object|string} collection The collection to iterate over.
 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
 * @param {*} [thisArg] The `this` binding of `iteratee`.
 * @returns {Array|Object|string} Returns `collection`.
 * @example
 *
 * _([1, 2]).forEach(function(n) {
 *   console.log(n);
 * }).value();
 * // => logs each value from left to right and returns the array
 *
 * _.forEach({ 'a': 1, 'b': 2 }, function(n, key) {
 *   console.log(n, key);
 * });
 * // => logs each value-key pair and returns the object (iteration order is not guaranteed)
 */
var forEach = createForEach(arrayEach, baseEach);

module.exports = forEach;

},{"../internal/arrayEach":18,"../internal/baseEach":24,"../internal/createForEach":41}],13:[function(require,module,exports){
var getNative = require('../internal/getNative');

/* Native method references for those with the same name as other `lodash` methods. */
var nativeNow = getNative(Date, 'now');

/**
 * Gets the number of milliseconds that have elapsed since the Unix epoch
 * (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @category Date
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => logs the number of milliseconds it took for the deferred function to be invoked
 */
var now = nativeNow || function() {
  return new Date().getTime();
};

module.exports = now;

},{"../internal/getNative":48}],14:[function(require,module,exports){
var isObject = require('../lang/isObject'),
    now = require('../date/now');

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Native method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Creates a debounced function that delays invoking `func` until after `wait`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a `cancel` method to cancel
 * delayed invocations. Provide an options object to indicate that `func`
 * should be invoked on the leading and/or trailing edge of the `wait` timeout.
 * Subsequent calls to the debounced function return the result of the last
 * `func` invocation.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
 * on the trailing edge of the timeout only if the the debounced function is
 * invoked more than once during the `wait` timeout.
 *
 * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
 * for details over the differences between `_.debounce` and `_.throttle`.
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options] The options object.
 * @param {boolean} [options.leading=false] Specify invoking on the leading
 *  edge of the timeout.
 * @param {number} [options.maxWait] The maximum time `func` is allowed to be
 *  delayed before it's invoked.
 * @param {boolean} [options.trailing=true] Specify invoking on the trailing
 *  edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // avoid costly calculations while the window size is in flux
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // invoke `sendMail` when the click event is fired, debouncing subsequent calls
 * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // ensure `batchLog` is invoked once after 1 second of debounced calls
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', _.debounce(batchLog, 250, {
 *   'maxWait': 1000
 * }));
 *
 * // cancel a debounced call
 * var todoChanges = _.debounce(batchLog, 1000);
 * Object.observe(models.todo, todoChanges);
 *
 * Object.observe(models, function(changes) {
 *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {
 *     todoChanges.cancel();
 *   }
 * }, ['delete']);
 *
 * // ...at some point `models.todo` is changed
 * models.todo.completed = true;
 *
 * // ...before 1 second has passed `models.todo` is deleted
 * // which cancels the debounced `todoChanges` call
 * delete models.todo;
 */
function debounce(func, wait, options) {
  var args,
      maxTimeoutId,
      result,
      stamp,
      thisArg,
      timeoutId,
      trailingCall,
      lastCalled = 0,
      maxWait = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = wait < 0 ? 0 : (+wait || 0);
  if (options === true) {
    var leading = true;
    trailing = false;
  } else if (isObject(options)) {
    leading = !!options.leading;
    maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function cancel() {
    if (timeoutId) {
      clearTimeout(timeoutId);
    }
    if (maxTimeoutId) {
      clearTimeout(maxTimeoutId);
    }
    lastCalled = 0;
    maxTimeoutId = timeoutId = trailingCall = undefined;
  }

  function complete(isCalled, id) {
    if (id) {
      clearTimeout(id);
    }
    maxTimeoutId = timeoutId = trailingCall = undefined;
    if (isCalled) {
      lastCalled = now();
      result = func.apply(thisArg, args);
      if (!timeoutId && !maxTimeoutId) {
        args = thisArg = undefined;
      }
    }
  }

  function delayed() {
    var remaining = wait - (now() - stamp);
    if (remaining <= 0 || remaining > wait) {
      complete(trailingCall, maxTimeoutId);
    } else {
      timeoutId = setTimeout(delayed, remaining);
    }
  }

  function maxDelayed() {
    complete(trailing, timeoutId);
  }

  function debounced() {
    args = arguments;
    stamp = now();
    thisArg = this;
    trailingCall = trailing && (timeoutId || !leading);

    if (maxWait === false) {
      var leadingCall = leading && !timeoutId;
    } else {
      if (!maxTimeoutId && !leading) {
        lastCalled = stamp;
      }
      var remaining = maxWait - (stamp - lastCalled),
          isCalled = remaining <= 0 || remaining > maxWait;

      if (isCalled) {
        if (maxTimeoutId) {
          maxTimeoutId = clearTimeout(maxTimeoutId);
        }
        lastCalled = stamp;
        result = func.apply(thisArg, args);
      }
      else if (!maxTimeoutId) {
        maxTimeoutId = setTimeout(maxDelayed, remaining);
      }
    }
    if (isCalled && timeoutId) {
      timeoutId = clearTimeout(timeoutId);
    }
    else if (!timeoutId && wait !== maxWait) {
      timeoutId = setTimeout(delayed, wait);
    }
    if (leadingCall) {
      isCalled = true;
      result = func.apply(thisArg, args);
    }
    if (isCalled && !timeoutId && !maxTimeoutId) {
      args = thisArg = undefined;
    }
    return result;
  }
  debounced.cancel = cancel;
  return debounced;
}

module.exports = debounce;

},{"../date/now":13,"../lang/isObject":68}],15:[function(require,module,exports){
/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Native method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * Creates a function that invokes `func` with the `this` binding of the
 * created function and arguments from `start` and beyond provided as an array.
 *
 * **Note:** This method is based on the [rest parameter](https://developer.mozilla.org/Web/JavaScript/Reference/Functions/rest_parameters).
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @returns {Function} Returns the new function.
 * @example
 *
 * var say = _.restParam(function(what, names) {
 *   return what + ' ' + _.initial(names).join(', ') +
 *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);
 * });
 *
 * say('hello', 'fred', 'barney', 'pebbles');
 * // => 'hello fred, barney, & pebbles'
 */
function restParam(func, start) {
  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  start = nativeMax(start === undefined ? (func.length - 1) : (+start || 0), 0);
  return function() {
    var args = arguments,
        index = -1,
        length = nativeMax(args.length - start, 0),
        rest = Array(length);

    while (++index < length) {
      rest[index] = args[start + index];
    }
    switch (start) {
      case 0: return func.call(this, rest);
      case 1: return func.call(this, args[0], rest);
      case 2: return func.call(this, args[0], args[1], rest);
    }
    var otherArgs = Array(start + 1);
    index = -1;
    while (++index < start) {
      otherArgs[index] = args[index];
    }
    otherArgs[start] = rest;
    return func.apply(this, otherArgs);
  };
}

module.exports = restParam;

},{}],16:[function(require,module,exports){
var debounce = require('./debounce'),
    isObject = require('../lang/isObject');

/** Used as the `TypeError` message for "Functions" methods. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a throttled function that only invokes `func` at most once per
 * every `wait` milliseconds. The throttled function comes with a `cancel`
 * method to cancel delayed invocations. Provide an options object to indicate
 * that `func` should be invoked on the leading and/or trailing edge of the
 * `wait` timeout. Subsequent calls to the throttled function return the
 * result of the last `func` call.
 *
 * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked
 * on the trailing edge of the timeout only if the the throttled function is
 * invoked more than once during the `wait` timeout.
 *
 * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)
 * for details over the differences between `_.throttle` and `_.debounce`.
 *
 * @static
 * @memberOf _
 * @category Function
 * @param {Function} func The function to throttle.
 * @param {number} [wait=0] The number of milliseconds to throttle invocations to.
 * @param {Object} [options] The options object.
 * @param {boolean} [options.leading=true] Specify invoking on the leading
 *  edge of the timeout.
 * @param {boolean} [options.trailing=true] Specify invoking on the trailing
 *  edge of the timeout.
 * @returns {Function} Returns the new throttled function.
 * @example
 *
 * // avoid excessively updating the position while scrolling
 * jQuery(window).on('scroll', _.throttle(updatePosition, 100));
 *
 * // invoke `renewToken` when the click event is fired, but not more than once every 5 minutes
 * jQuery('.interactive').on('click', _.throttle(renewToken, 300000, {
 *   'trailing': false
 * }));
 *
 * // cancel a trailing throttled call
 * jQuery(window).on('popstate', throttled.cancel);
 */
function throttle(func, wait, options) {
  var leading = true,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  if (options === false) {
    leading = false;
  } else if (isObject(options)) {
    leading = 'leading' in options ? !!options.leading : leading;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }
  return debounce(func, wait, { 'leading': leading, 'maxWait': +wait, 'trailing': trailing });
}

module.exports = throttle;

},{"../lang/isObject":68,"./debounce":14}],17:[function(require,module,exports){
/**
 * Copies the values of `source` to `array`.
 *
 * @private
 * @param {Array} source The array to copy values from.
 * @param {Array} [array=[]] The array to copy values to.
 * @returns {Array} Returns `array`.
 */
function arrayCopy(source, array) {
  var index = -1,
      length = source.length;

  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}

module.exports = arrayCopy;

},{}],18:[function(require,module,exports){
/**
 * A specialized version of `_.forEach` for arrays without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns `array`.
 */
function arrayEach(array, iteratee) {
  var index = -1,
      length = array.length;

  while (++index < length) {
    if (iteratee(array[index], index, array) === false) {
      break;
    }
  }
  return array;
}

module.exports = arrayEach;

},{}],19:[function(require,module,exports){
/**
 * A specialized version of `_.some` for arrays without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array} array The array to iterate over.
 * @param {Function} predicate The function invoked per iteration.
 * @returns {boolean} Returns `true` if any element passes the predicate check,
 *  else `false`.
 */
function arraySome(array, predicate) {
  var index = -1,
      length = array.length;

  while (++index < length) {
    if (predicate(array[index], index, array)) {
      return true;
    }
  }
  return false;
}

module.exports = arraySome;

},{}],20:[function(require,module,exports){
/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used by `_.template` to customize its `_.assign` use.
 *
 * **Note:** This function is like `assignDefaults` except that it ignores
 * inherited property values when checking if a property is `undefined`.
 *
 * @private
 * @param {*} objectValue The destination object property value.
 * @param {*} sourceValue The source object property value.
 * @param {string} key The key associated with the object and source values.
 * @param {Object} object The destination object.
 * @returns {*} Returns the value to assign to the destination object.
 */
function assignOwnDefaults(objectValue, sourceValue, key, object) {
  return (objectValue === undefined || !hasOwnProperty.call(object, key))
    ? sourceValue
    : objectValue;
}

module.exports = assignOwnDefaults;

},{}],21:[function(require,module,exports){
var keys = require('../object/keys');

/**
 * A specialized version of `_.assign` for customizing assigned values without
 * support for argument juggling, multiple sources, and `this` binding `customizer`
 * functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {Function} customizer The function to customize assigned values.
 * @returns {Object} Returns `object`.
 */
function assignWith(object, source, customizer) {
  var index = -1,
      props = keys(source),
      length = props.length;

  while (++index < length) {
    var key = props[index],
        value = object[key],
        result = customizer(value, source[key], key, object, source);

    if ((result === result ? (result !== value) : (value === value)) ||
        (value === undefined && !(key in object))) {
      object[key] = result;
    }
  }
  return object;
}

module.exports = assignWith;

},{"../object/keys":73}],22:[function(require,module,exports){
var baseCopy = require('./baseCopy'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.assign` without support for argument juggling,
 * multiple sources, and `customizer` functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @returns {Object} Returns `object`.
 */
function baseAssign(object, source) {
  return source == null
    ? object
    : baseCopy(source, keys(source), object);
}

module.exports = baseAssign;

},{"../object/keys":73,"./baseCopy":23}],23:[function(require,module,exports){
/**
 * Copies properties of `source` to `object`.
 *
 * @private
 * @param {Object} source The object to copy properties from.
 * @param {Array} props The property names to copy.
 * @param {Object} [object={}] The object to copy properties to.
 * @returns {Object} Returns `object`.
 */
function baseCopy(source, props, object) {
  object || (object = {});

  var index = -1,
      length = props.length;

  while (++index < length) {
    var key = props[index];
    object[key] = source[key];
  }
  return object;
}

module.exports = baseCopy;

},{}],24:[function(require,module,exports){
var baseForOwn = require('./baseForOwn'),
    createBaseEach = require('./createBaseEach');

/**
 * The base implementation of `_.forEach` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Array|Object|string} collection The collection to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array|Object|string} Returns `collection`.
 */
var baseEach = createBaseEach(baseForOwn);

module.exports = baseEach;

},{"./baseForOwn":27,"./createBaseEach":39}],25:[function(require,module,exports){
var createBaseFor = require('./createBaseFor');

/**
 * The base implementation of `baseForIn` and `baseForOwn` which iterates
 * over `object` properties returned by `keysFunc` invoking `iteratee` for
 * each property. Iteratee functions may exit iteration early by explicitly
 * returning `false`.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @returns {Object} Returns `object`.
 */
var baseFor = createBaseFor();

module.exports = baseFor;

},{"./createBaseFor":40}],26:[function(require,module,exports){
var baseFor = require('./baseFor'),
    keysIn = require('../object/keysIn');

/**
 * The base implementation of `_.forIn` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns `object`.
 */
function baseForIn(object, iteratee) {
  return baseFor(object, iteratee, keysIn);
}

module.exports = baseForIn;

},{"../object/keysIn":74,"./baseFor":25}],27:[function(require,module,exports){
var baseFor = require('./baseFor'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.forOwn` without support for callback
 * shorthands and `this` binding.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Object} Returns `object`.
 */
function baseForOwn(object, iteratee) {
  return baseFor(object, iteratee, keys);
}

module.exports = baseForOwn;

},{"../object/keys":73,"./baseFor":25}],28:[function(require,module,exports){
var baseIsEqualDeep = require('./baseIsEqualDeep'),
    isObject = require('../lang/isObject'),
    isObjectLike = require('./isObjectLike');

/**
 * The base implementation of `_.isEqual` without support for `this` binding
 * `customizer` functions.
 *
 * @private
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {Function} [customizer] The function to customize comparing values.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 */
function baseIsEqual(value, other, customizer, isLoose, stackA, stackB) {
  if (value === other) {
    return true;
  }
  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {
    return value !== value && other !== other;
  }
  return baseIsEqualDeep(value, other, baseIsEqual, customizer, isLoose, stackA, stackB);
}

module.exports = baseIsEqual;

},{"../lang/isObject":68,"./baseIsEqualDeep":29,"./isObjectLike":53}],29:[function(require,module,exports){
var equalArrays = require('./equalArrays'),
    equalByTag = require('./equalByTag'),
    equalObjects = require('./equalObjects'),
    isArray = require('../lang/isArray'),
    isTypedArray = require('../lang/isTypedArray');

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    objectTag = '[object Object]';

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * A specialized version of `baseIsEqual` for arrays and objects which performs
 * deep comparisons and tracks traversed objects enabling objects with circular
 * references to be compared.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing objects.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA=[]] Tracks traversed `value` objects.
 * @param {Array} [stackB=[]] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function baseIsEqualDeep(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var objIsArr = isArray(object),
      othIsArr = isArray(other),
      objTag = arrayTag,
      othTag = arrayTag;

  if (!objIsArr) {
    objTag = objToString.call(object);
    if (objTag == argsTag) {
      objTag = objectTag;
    } else if (objTag != objectTag) {
      objIsArr = isTypedArray(object);
    }
  }
  if (!othIsArr) {
    othTag = objToString.call(other);
    if (othTag == argsTag) {
      othTag = objectTag;
    } else if (othTag != objectTag) {
      othIsArr = isTypedArray(other);
    }
  }
  var objIsObj = objTag == objectTag,
      othIsObj = othTag == objectTag,
      isSameTag = objTag == othTag;

  if (isSameTag && !(objIsArr || objIsObj)) {
    return equalByTag(object, other, objTag);
  }
  if (!isLoose) {
    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

    if (objIsWrapped || othIsWrapped) {
      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, customizer, isLoose, stackA, stackB);
    }
  }
  if (!isSameTag) {
    return false;
  }
  // Assume cyclic values are equal.
  // For more information on detecting circular references see https://es5.github.io/#JO.
  stackA || (stackA = []);
  stackB || (stackB = []);

  var length = stackA.length;
  while (length--) {
    if (stackA[length] == object) {
      return stackB[length] == other;
    }
  }
  // Add `object` and `other` to the stack of traversed objects.
  stackA.push(object);
  stackB.push(other);

  var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, customizer, isLoose, stackA, stackB);

  stackA.pop();
  stackB.pop();

  return result;
}

module.exports = baseIsEqualDeep;

},{"../lang/isArray":63,"../lang/isTypedArray":70,"./equalArrays":42,"./equalByTag":43,"./equalObjects":44}],30:[function(require,module,exports){
var arrayEach = require('./arrayEach'),
    baseMergeDeep = require('./baseMergeDeep'),
    isArray = require('../lang/isArray'),
    isArrayLike = require('./isArrayLike'),
    isObject = require('../lang/isObject'),
    isObjectLike = require('./isObjectLike'),
    isTypedArray = require('../lang/isTypedArray'),
    keys = require('../object/keys');

/**
 * The base implementation of `_.merge` without support for argument juggling,
 * multiple sources, and `this` binding `customizer` functions.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {Function} [customizer] The function to customize merged values.
 * @param {Array} [stackA=[]] Tracks traversed source objects.
 * @param {Array} [stackB=[]] Associates values with source counterparts.
 * @returns {Object} Returns `object`.
 */
function baseMerge(object, source, customizer, stackA, stackB) {
  if (!isObject(object)) {
    return object;
  }
  var isSrcArr = isArrayLike(source) && (isArray(source) || isTypedArray(source)),
      props = isSrcArr ? undefined : keys(source);

  arrayEach(props || source, function(srcValue, key) {
    if (props) {
      key = srcValue;
      srcValue = source[key];
    }
    if (isObjectLike(srcValue)) {
      stackA || (stackA = []);
      stackB || (stackB = []);
      baseMergeDeep(object, source, key, baseMerge, customizer, stackA, stackB);
    }
    else {
      var value = object[key],
          result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
          isCommon = result === undefined;

      if (isCommon) {
        result = srcValue;
      }
      if ((result !== undefined || (isSrcArr && !(key in object))) &&
          (isCommon || (result === result ? (result !== value) : (value === value)))) {
        object[key] = result;
      }
    }
  });
  return object;
}

module.exports = baseMerge;

},{"../lang/isArray":63,"../lang/isObject":68,"../lang/isTypedArray":70,"../object/keys":73,"./arrayEach":18,"./baseMergeDeep":31,"./isArrayLike":49,"./isObjectLike":53}],31:[function(require,module,exports){
var arrayCopy = require('./arrayCopy'),
    isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isArrayLike = require('./isArrayLike'),
    isPlainObject = require('../lang/isPlainObject'),
    isTypedArray = require('../lang/isTypedArray'),
    toPlainObject = require('../lang/toPlainObject');

/**
 * A specialized version of `baseMerge` for arrays and objects which performs
 * deep merges and tracks traversed objects enabling objects with circular
 * references to be merged.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {string} key The key of the value to merge.
 * @param {Function} mergeFunc The function to merge values.
 * @param {Function} [customizer] The function to customize merged values.
 * @param {Array} [stackA=[]] Tracks traversed source objects.
 * @param {Array} [stackB=[]] Associates values with source counterparts.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function baseMergeDeep(object, source, key, mergeFunc, customizer, stackA, stackB) {
  var length = stackA.length,
      srcValue = source[key];

  while (length--) {
    if (stackA[length] == srcValue) {
      object[key] = stackB[length];
      return;
    }
  }
  var value = object[key],
      result = customizer ? customizer(value, srcValue, key, object, source) : undefined,
      isCommon = result === undefined;

  if (isCommon) {
    result = srcValue;
    if (isArrayLike(srcValue) && (isArray(srcValue) || isTypedArray(srcValue))) {
      result = isArray(value)
        ? value
        : (isArrayLike(value) ? arrayCopy(value) : []);
    }
    else if (isPlainObject(srcValue) || isArguments(srcValue)) {
      result = isArguments(value)
        ? toPlainObject(value)
        : (isPlainObject(value) ? value : {});
    }
    else {
      isCommon = false;
    }
  }
  // Add the source value to the stack of traversed objects and associate
  // it with its merged value.
  stackA.push(srcValue);
  stackB.push(result);

  if (isCommon) {
    // Recursively merge objects and arrays (susceptible to call stack limits).
    object[key] = mergeFunc(result, srcValue, customizer, stackA, stackB);
  } else if (result === result ? (result !== value) : (value === value)) {
    object[key] = result;
  }
}

module.exports = baseMergeDeep;

},{"../lang/isArguments":62,"../lang/isArray":63,"../lang/isPlainObject":69,"../lang/isTypedArray":70,"../lang/toPlainObject":71,"./arrayCopy":17,"./isArrayLike":49}],32:[function(require,module,exports){
/**
 * The base implementation of `_.property` without support for deep paths.
 *
 * @private
 * @param {string} key The key of the property to get.
 * @returns {Function} Returns the new function.
 */
function baseProperty(key) {
  return function(object) {
    return object == null ? undefined : object[key];
  };
}

module.exports = baseProperty;

},{}],33:[function(require,module,exports){
/**
 * Converts `value` to a string if it's not one. An empty string is returned
 * for `null` or `undefined` values.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {string} Returns the string.
 */
function baseToString(value) {
  return value == null ? '' : (value + '');
}

module.exports = baseToString;

},{}],34:[function(require,module,exports){
/**
 * The base implementation of `_.values` and `_.valuesIn` which creates an
 * array of `object` property values corresponding to the property names
 * of `props`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array} props The property names to get values for.
 * @returns {Object} Returns the array of property values.
 */
function baseValues(object, props) {
  var index = -1,
      length = props.length,
      result = Array(length);

  while (++index < length) {
    result[index] = object[props[index]];
  }
  return result;
}

module.exports = baseValues;

},{}],35:[function(require,module,exports){
var identity = require('../utility/identity');

/**
 * A specialized version of `baseCallback` which only supports `this` binding
 * and specifying the number of arguments to provide to `func`.
 *
 * @private
 * @param {Function} func The function to bind.
 * @param {*} thisArg The `this` binding of `func`.
 * @param {number} [argCount] The number of arguments to provide to `func`.
 * @returns {Function} Returns the callback.
 */
function bindCallback(func, thisArg, argCount) {
  if (typeof func != 'function') {
    return identity;
  }
  if (thisArg === undefined) {
    return func;
  }
  switch (argCount) {
    case 1: return function(value) {
      return func.call(thisArg, value);
    };
    case 3: return function(value, index, collection) {
      return func.call(thisArg, value, index, collection);
    };
    case 4: return function(accumulator, value, index, collection) {
      return func.call(thisArg, accumulator, value, index, collection);
    };
    case 5: return function(value, other, key, object, source) {
      return func.call(thisArg, value, other, key, object, source);
    };
  }
  return function() {
    return func.apply(thisArg, arguments);
  };
}

module.exports = bindCallback;

},{"../utility/identity":81}],36:[function(require,module,exports){
/**
 * Used by `_.trim` and `_.trimLeft` to get the index of the first character
 * of `string` that is not found in `chars`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @param {string} chars The characters to find.
 * @returns {number} Returns the index of the first character not found in `chars`.
 */
function charsLeftIndex(string, chars) {
  var index = -1,
      length = string.length;

  while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}
  return index;
}

module.exports = charsLeftIndex;

},{}],37:[function(require,module,exports){
/**
 * Used by `_.trim` and `_.trimRight` to get the index of the last character
 * of `string` that is not found in `chars`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @param {string} chars The characters to find.
 * @returns {number} Returns the index of the last character not found in `chars`.
 */
function charsRightIndex(string, chars) {
  var index = string.length;

  while (index-- && chars.indexOf(string.charAt(index)) > -1) {}
  return index;
}

module.exports = charsRightIndex;

},{}],38:[function(require,module,exports){
var bindCallback = require('./bindCallback'),
    isIterateeCall = require('./isIterateeCall'),
    restParam = require('../function/restParam');

/**
 * Creates a `_.assign`, `_.defaults`, or `_.merge` function.
 *
 * @private
 * @param {Function} assigner The function to assign values.
 * @returns {Function} Returns the new assigner function.
 */
function createAssigner(assigner) {
  return restParam(function(object, sources) {
    var index = -1,
        length = object == null ? 0 : sources.length,
        customizer = length > 2 ? sources[length - 2] : undefined,
        guard = length > 2 ? sources[2] : undefined,
        thisArg = length > 1 ? sources[length - 1] : undefined;

    if (typeof customizer == 'function') {
      customizer = bindCallback(customizer, thisArg, 5);
      length -= 2;
    } else {
      customizer = typeof thisArg == 'function' ? thisArg : undefined;
      length -= (customizer ? 1 : 0);
    }
    if (guard && isIterateeCall(sources[0], sources[1], guard)) {
      customizer = length < 3 ? undefined : customizer;
      length = 1;
    }
    while (++index < length) {
      var source = sources[index];
      if (source) {
        assigner(object, source, customizer);
      }
    }
    return object;
  });
}

module.exports = createAssigner;

},{"../function/restParam":15,"./bindCallback":35,"./isIterateeCall":51}],39:[function(require,module,exports){
var getLength = require('./getLength'),
    isLength = require('./isLength'),
    toObject = require('./toObject');

/**
 * Creates a `baseEach` or `baseEachRight` function.
 *
 * @private
 * @param {Function} eachFunc The function to iterate over a collection.
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseEach(eachFunc, fromRight) {
  return function(collection, iteratee) {
    var length = collection ? getLength(collection) : 0;
    if (!isLength(length)) {
      return eachFunc(collection, iteratee);
    }
    var index = fromRight ? length : -1,
        iterable = toObject(collection);

    while ((fromRight ? index-- : ++index < length)) {
      if (iteratee(iterable[index], index, iterable) === false) {
        break;
      }
    }
    return collection;
  };
}

module.exports = createBaseEach;

},{"./getLength":47,"./isLength":52,"./toObject":59}],40:[function(require,module,exports){
var toObject = require('./toObject');

/**
 * Creates a base function for `_.forIn` or `_.forInRight`.
 *
 * @private
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseFor(fromRight) {
  return function(object, iteratee, keysFunc) {
    var iterable = toObject(object),
        props = keysFunc(object),
        length = props.length,
        index = fromRight ? length : -1;

    while ((fromRight ? index-- : ++index < length)) {
      var key = props[index];
      if (iteratee(iterable[key], key, iterable) === false) {
        break;
      }
    }
    return object;
  };
}

module.exports = createBaseFor;

},{"./toObject":59}],41:[function(require,module,exports){
var bindCallback = require('./bindCallback'),
    isArray = require('../lang/isArray');

/**
 * Creates a function for `_.forEach` or `_.forEachRight`.
 *
 * @private
 * @param {Function} arrayFunc The function to iterate over an array.
 * @param {Function} eachFunc The function to iterate over a collection.
 * @returns {Function} Returns the new each function.
 */
function createForEach(arrayFunc, eachFunc) {
  return function(collection, iteratee, thisArg) {
    return (typeof iteratee == 'function' && thisArg === undefined && isArray(collection))
      ? arrayFunc(collection, iteratee)
      : eachFunc(collection, bindCallback(iteratee, thisArg, 3));
  };
}

module.exports = createForEach;

},{"../lang/isArray":63,"./bindCallback":35}],42:[function(require,module,exports){
var arraySome = require('./arraySome');

/**
 * A specialized version of `baseIsEqualDeep` for arrays with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Array} array The array to compare.
 * @param {Array} other The other array to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing arrays.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
 */
function equalArrays(array, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var index = -1,
      arrLength = array.length,
      othLength = other.length;

  if (arrLength != othLength && !(isLoose && othLength > arrLength)) {
    return false;
  }
  // Ignore non-index properties.
  while (++index < arrLength) {
    var arrValue = array[index],
        othValue = other[index],
        result = customizer ? customizer(isLoose ? othValue : arrValue, isLoose ? arrValue : othValue, index) : undefined;

    if (result !== undefined) {
      if (result) {
        continue;
      }
      return false;
    }
    // Recursively compare arrays (susceptible to call stack limits).
    if (isLoose) {
      if (!arraySome(other, function(othValue) {
            return arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB);
          })) {
        return false;
      }
    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, customizer, isLoose, stackA, stackB))) {
      return false;
    }
  }
  return true;
}

module.exports = equalArrays;

},{"./arraySome":19}],43:[function(require,module,exports){
/** `Object#toString` result references. */
var boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    numberTag = '[object Number]',
    regexpTag = '[object RegExp]',
    stringTag = '[object String]';

/**
 * A specialized version of `baseIsEqualDeep` for comparing objects of
 * the same `toStringTag`.
 *
 * **Note:** This function only supports comparing values with tags of
 * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {string} tag The `toStringTag` of the objects to compare.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalByTag(object, other, tag) {
  switch (tag) {
    case boolTag:
    case dateTag:
      // Coerce dates and booleans to numbers, dates to milliseconds and booleans
      // to `1` or `0` treating invalid dates coerced to `NaN` as not equal.
      return +object == +other;

    case errorTag:
      return object.name == other.name && object.message == other.message;

    case numberTag:
      // Treat `NaN` vs. `NaN` as equal.
      return (object != +object)
        ? other != +other
        : object == +other;

    case regexpTag:
    case stringTag:
      // Coerce regexes to strings and treat strings primitives and string
      // objects as equal. See https://es5.github.io/#x15.10.6.4 for more details.
      return object == (other + '');
  }
  return false;
}

module.exports = equalByTag;

},{}],44:[function(require,module,exports){
var keys = require('../object/keys');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A specialized version of `baseIsEqualDeep` for objects with support for
 * partial deep comparisons.
 *
 * @private
 * @param {Object} object The object to compare.
 * @param {Object} other The other object to compare.
 * @param {Function} equalFunc The function to determine equivalents of values.
 * @param {Function} [customizer] The function to customize comparing values.
 * @param {boolean} [isLoose] Specify performing partial comparisons.
 * @param {Array} [stackA] Tracks traversed `value` objects.
 * @param {Array} [stackB] Tracks traversed `other` objects.
 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
 */
function equalObjects(object, other, equalFunc, customizer, isLoose, stackA, stackB) {
  var objProps = keys(object),
      objLength = objProps.length,
      othProps = keys(other),
      othLength = othProps.length;

  if (objLength != othLength && !isLoose) {
    return false;
  }
  var index = objLength;
  while (index--) {
    var key = objProps[index];
    if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {
      return false;
    }
  }
  var skipCtor = isLoose;
  while (++index < objLength) {
    key = objProps[index];
    var objValue = object[key],
        othValue = other[key],
        result = customizer ? customizer(isLoose ? othValue : objValue, isLoose? objValue : othValue, key) : undefined;

    // Recursively compare objects (susceptible to call stack limits).
    if (!(result === undefined ? equalFunc(objValue, othValue, customizer, isLoose, stackA, stackB) : result)) {
      return false;
    }
    skipCtor || (skipCtor = key == 'constructor');
  }
  if (!skipCtor) {
    var objCtor = object.constructor,
        othCtor = other.constructor;

    // Non `Object` object instances with different constructors are not equal.
    if (objCtor != othCtor &&
        ('constructor' in object && 'constructor' in other) &&
        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
          typeof othCtor == 'function' && othCtor instanceof othCtor)) {
      return false;
    }
  }
  return true;
}

module.exports = equalObjects;

},{"../object/keys":73}],45:[function(require,module,exports){
/** Used to map characters to HTML entities. */
var htmlEscapes = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#39;',
  '`': '&#96;'
};

/**
 * Used by `_.escape` to convert characters to HTML entities.
 *
 * @private
 * @param {string} chr The matched character to escape.
 * @returns {string} Returns the escaped character.
 */
function escapeHtmlChar(chr) {
  return htmlEscapes[chr];
}

module.exports = escapeHtmlChar;

},{}],46:[function(require,module,exports){
/** Used to escape characters for inclusion in compiled string literals. */
var stringEscapes = {
  '\\': '\\',
  "'": "'",
  '\n': 'n',
  '\r': 'r',
  '\u2028': 'u2028',
  '\u2029': 'u2029'
};

/**
 * Used by `_.template` to escape characters for inclusion in compiled string literals.
 *
 * @private
 * @param {string} chr The matched character to escape.
 * @returns {string} Returns the escaped character.
 */
function escapeStringChar(chr) {
  return '\\' + stringEscapes[chr];
}

module.exports = escapeStringChar;

},{}],47:[function(require,module,exports){
var baseProperty = require('./baseProperty');

/**
 * Gets the "length" property value of `object`.
 *
 * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)
 * that affects Safari on at least iOS 8.1-8.3 ARM64.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {*} Returns the "length" value.
 */
var getLength = baseProperty('length');

module.exports = getLength;

},{"./baseProperty":32}],48:[function(require,module,exports){
var isNative = require('../lang/isNative');

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = object == null ? undefined : object[key];
  return isNative(value) ? value : undefined;
}

module.exports = getNative;

},{"../lang/isNative":67}],49:[function(require,module,exports){
var getLength = require('./getLength'),
    isLength = require('./isLength');

/**
 * Checks if `value` is array-like.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 */
function isArrayLike(value) {
  return value != null && isLength(getLength(value));
}

module.exports = isArrayLike;

},{"./getLength":47,"./isLength":52}],50:[function(require,module,exports){
/** Used to detect unsigned integer values. */
var reIsUint = /^\d+$/;

/**
 * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
 * of an array-like value.
 */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */
function isIndex(value, length) {
  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;
  length = length == null ? MAX_SAFE_INTEGER : length;
  return value > -1 && value % 1 == 0 && value < length;
}

module.exports = isIndex;

},{}],51:[function(require,module,exports){
var isArrayLike = require('./isArrayLike'),
    isIndex = require('./isIndex'),
    isObject = require('../lang/isObject');

/**
 * Checks if the provided arguments are from an iteratee call.
 *
 * @private
 * @param {*} value The potential iteratee value argument.
 * @param {*} index The potential iteratee index or key argument.
 * @param {*} object The potential iteratee object argument.
 * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.
 */
function isIterateeCall(value, index, object) {
  if (!isObject(object)) {
    return false;
  }
  var type = typeof index;
  if (type == 'number'
      ? (isArrayLike(object) && isIndex(index, object.length))
      : (type == 'string' && index in object)) {
    var other = object[index];
    return value === value ? (value === other) : (other !== other);
  }
  return false;
}

module.exports = isIterateeCall;

},{"../lang/isObject":68,"./isArrayLike":49,"./isIndex":50}],52:[function(require,module,exports){
/**
 * Used as the [maximum length](http://ecma-international.org/ecma-262/6.0/#sec-number.max_safe_integer)
 * of an array-like value.
 */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This function is based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 */
function isLength(value) {
  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}

module.exports = isLength;

},{}],53:[function(require,module,exports){
/**
 * Checks if `value` is object-like.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 */
function isObjectLike(value) {
  return !!value && typeof value == 'object';
}

module.exports = isObjectLike;

},{}],54:[function(require,module,exports){
/**
 * Used by `trimmedLeftIndex` and `trimmedRightIndex` to determine if a
 * character code is whitespace.
 *
 * @private
 * @param {number} charCode The character code to inspect.
 * @returns {boolean} Returns `true` if `charCode` is whitespace, else `false`.
 */
function isSpace(charCode) {
  return ((charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160) || charCode == 5760 || charCode == 6158 ||
    (charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279)));
}

module.exports = isSpace;

},{}],55:[function(require,module,exports){
/** Used to match template delimiters. */
var reEscape = /<%-([\s\S]+?)%>/g;

module.exports = reEscape;

},{}],56:[function(require,module,exports){
/** Used to match template delimiters. */
var reEvaluate = /<%([\s\S]+?)%>/g;

module.exports = reEvaluate;

},{}],57:[function(require,module,exports){
/** Used to match template delimiters. */
var reInterpolate = /<%=([\s\S]+?)%>/g;

module.exports = reInterpolate;

},{}],58:[function(require,module,exports){
var isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isIndex = require('./isIndex'),
    isLength = require('./isLength'),
    keysIn = require('../object/keysIn');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * A fallback implementation of `Object.keys` which creates an array of the
 * own enumerable property names of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function shimKeys(object) {
  var props = keysIn(object),
      propsLength = props.length,
      length = propsLength && object.length;

  var allowIndexes = !!length && isLength(length) &&
    (isArray(object) || isArguments(object));

  var index = -1,
      result = [];

  while (++index < propsLength) {
    var key = props[index];
    if ((allowIndexes && isIndex(key, length)) || hasOwnProperty.call(object, key)) {
      result.push(key);
    }
  }
  return result;
}

module.exports = shimKeys;

},{"../lang/isArguments":62,"../lang/isArray":63,"../object/keysIn":74,"./isIndex":50,"./isLength":52}],59:[function(require,module,exports){
var isObject = require('../lang/isObject');

/**
 * Converts `value` to an object if it's not one.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {Object} Returns the object.
 */
function toObject(value) {
  return isObject(value) ? value : Object(value);
}

module.exports = toObject;

},{"../lang/isObject":68}],60:[function(require,module,exports){
var isSpace = require('./isSpace');

/**
 * Used by `_.trim` and `_.trimLeft` to get the index of the first non-whitespace
 * character of `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the first non-whitespace character.
 */
function trimmedLeftIndex(string) {
  var index = -1,
      length = string.length;

  while (++index < length && isSpace(string.charCodeAt(index))) {}
  return index;
}

module.exports = trimmedLeftIndex;

},{"./isSpace":54}],61:[function(require,module,exports){
var isSpace = require('./isSpace');

/**
 * Used by `_.trim` and `_.trimRight` to get the index of the last non-whitespace
 * character of `string`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the last non-whitespace character.
 */
function trimmedRightIndex(string) {
  var index = string.length;

  while (index-- && isSpace(string.charCodeAt(index))) {}
  return index;
}

module.exports = trimmedRightIndex;

},{"./isSpace":54}],62:[function(require,module,exports){
var isArrayLike = require('../internal/isArrayLike'),
    isObjectLike = require('../internal/isObjectLike');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Native method references. */
var propertyIsEnumerable = objectProto.propertyIsEnumerable;

/**
 * Checks if `value` is classified as an `arguments` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
function isArguments(value) {
  return isObjectLike(value) && isArrayLike(value) &&
    hasOwnProperty.call(value, 'callee') && !propertyIsEnumerable.call(value, 'callee');
}

module.exports = isArguments;

},{"../internal/isArrayLike":49,"../internal/isObjectLike":53}],63:[function(require,module,exports){
var getNative = require('../internal/getNative'),
    isLength = require('../internal/isLength'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var arrayTag = '[object Array]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/* Native method references for those with the same name as other `lodash` methods. */
var nativeIsArray = getNative(Array, 'isArray');

/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(function() { return arguments; }());
 * // => false
 */
var isArray = nativeIsArray || function(value) {
  return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag;
};

module.exports = isArray;

},{"../internal/getNative":48,"../internal/isLength":52,"../internal/isObjectLike":53}],64:[function(require,module,exports){
var baseIsEqual = require('../internal/baseIsEqual'),
    bindCallback = require('../internal/bindCallback');

/**
 * Performs a deep comparison between two values to determine if they are
 * equivalent. If `customizer` is provided it's invoked to compare values.
 * If `customizer` returns `undefined` comparisons are handled by the method
 * instead. The `customizer` is bound to `thisArg` and invoked with up to
 * three arguments: (value, other [, index|key]).
 *
 * **Note:** This method supports comparing arrays, booleans, `Date` objects,
 * numbers, `Object` objects, regexes, and strings. Objects are compared by
 * their own, not inherited, enumerable properties. Functions and DOM nodes
 * are **not** supported. Provide a customizer function to extend support
 * for comparing other values.
 *
 * @static
 * @memberOf _
 * @alias eq
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {Function} [customizer] The function to customize value comparisons.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'user': 'fred' };
 * var other = { 'user': 'fred' };
 *
 * object == other;
 * // => false
 *
 * _.isEqual(object, other);
 * // => true
 *
 * // using a customizer callback
 * var array = ['hello', 'goodbye'];
 * var other = ['hi', 'goodbye'];
 *
 * _.isEqual(array, other, function(value, other) {
 *   if (_.every([value, other], RegExp.prototype.test, /^h(?:i|ello)$/)) {
 *     return true;
 *   }
 * });
 * // => true
 */
function isEqual(value, other, customizer, thisArg) {
  customizer = typeof customizer == 'function' ? bindCallback(customizer, thisArg, 3) : undefined;
  var result = customizer ? customizer(value, other) : undefined;
  return  result === undefined ? baseIsEqual(value, other, customizer) : !!result;
}

module.exports = isEqual;

},{"../internal/baseIsEqual":28,"../internal/bindCallback":35}],65:[function(require,module,exports){
var isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var errorTag = '[object Error]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,
 * `SyntaxError`, `TypeError`, or `URIError` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an error object, else `false`.
 * @example
 *
 * _.isError(new Error);
 * // => true
 *
 * _.isError(Error);
 * // => false
 */
function isError(value) {
  return isObjectLike(value) && typeof value.message == 'string' && objToString.call(value) == errorTag;
}

module.exports = isError;

},{"../internal/isObjectLike":53}],66:[function(require,module,exports){
var isObject = require('./isObject');

/** `Object#toString` result references. */
var funcTag = '[object Function]';

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in older versions of Chrome and Safari which return 'function' for regexes
  // and Safari 8 which returns 'object' for typed array constructors.
  return isObject(value) && objToString.call(value) == funcTag;
}

module.exports = isFunction;

},{"./isObject":68}],67:[function(require,module,exports){
var isFunction = require('./isFunction'),
    isObjectLike = require('../internal/isObjectLike');

/** Used to detect host constructors (Safari > 5). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var fnToString = Function.prototype.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/**
 * Checks if `value` is a native function.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function, else `false`.
 * @example
 *
 * _.isNative(Array.prototype.push);
 * // => true
 *
 * _.isNative(_);
 * // => false
 */
function isNative(value) {
  if (value == null) {
    return false;
  }
  if (isFunction(value)) {
    return reIsNative.test(fnToString.call(value));
  }
  return isObjectLike(value) && reIsHostCtor.test(value);
}

module.exports = isNative;

},{"../internal/isObjectLike":53,"./isFunction":66}],68:[function(require,module,exports){
/**
 * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.
 * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(1);
 * // => false
 */
function isObject(value) {
  // Avoid a V8 JIT bug in Chrome 19-20.
  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.
  var type = typeof value;
  return !!value && (type == 'object' || type == 'function');
}

module.exports = isObject;

},{}],69:[function(require,module,exports){
var baseForIn = require('../internal/baseForIn'),
    isArguments = require('./isArguments'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var objectTag = '[object Object]';

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * **Note:** This method assumes objects created by the `Object` constructor
 * have no inherited enumerable properties.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  var Ctor;

  // Exit early for non `Object` objects.
  if (!(isObjectLike(value) && objToString.call(value) == objectTag && !isArguments(value)) ||
      (!hasOwnProperty.call(value, 'constructor') && (Ctor = value.constructor, typeof Ctor == 'function' && !(Ctor instanceof Ctor)))) {
    return false;
  }
  // IE < 9 iterates inherited properties before own properties. If the first
  // iterated property is an object's own property then there are no inherited
  // enumerable properties.
  var result;
  // In most environments an object's own properties are iterated before
  // its inherited properties. If the last iterated property is an object's
  // own property then there are no inherited enumerable properties.
  baseForIn(value, function(subValue, key) {
    result = key;
  });
  return result === undefined || hasOwnProperty.call(value, result);
}

module.exports = isPlainObject;

},{"../internal/baseForIn":26,"../internal/isObjectLike":53,"./isArguments":62}],70:[function(require,module,exports){
var isLength = require('../internal/isLength'),
    isObjectLike = require('../internal/isObjectLike');

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    funcTag = '[object Function]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    objectTag = '[object Object]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    weakMapTag = '[object WeakMap]';

var arrayBufferTag = '[object ArrayBuffer]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';

/** Used to identify `toStringTag` values of typed arrays. */
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
typedArrayTags[dateTag] = typedArrayTags[errorTag] =
typedArrayTags[funcTag] = typedArrayTags[mapTag] =
typedArrayTags[numberTag] = typedArrayTags[objectTag] =
typedArrayTags[regexpTag] = typedArrayTags[setTag] =
typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;

/** Used for native method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)
 * of values.
 */
var objToString = objectProto.toString;

/**
 * Checks if `value` is classified as a typed array.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.
 * @example
 *
 * _.isTypedArray(new Uint8Array);
 * // => true
 *
 * _.isTypedArray([]);
 * // => false
 */
function isTypedArray(value) {
  return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];
}

module.exports = isTypedArray;

},{"../internal/isLength":52,"../internal/isObjectLike":53}],71:[function(require,module,exports){
var baseCopy = require('../internal/baseCopy'),
    keysIn = require('../object/keysIn');

/**
 * Converts `value` to a plain object flattening inherited enumerable
 * properties of `value` to own properties of the plain object.
 *
 * @static
 * @memberOf _
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {Object} Returns the converted plain object.
 * @example
 *
 * function Foo() {
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.assign({ 'a': 1 }, new Foo);
 * // => { 'a': 1, 'b': 2 }
 *
 * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
 * // => { 'a': 1, 'b': 2, 'c': 3 }
 */
function toPlainObject(value) {
  return baseCopy(value, keysIn(value));
}

module.exports = toPlainObject;

},{"../internal/baseCopy":23,"../object/keysIn":74}],72:[function(require,module,exports){
var assignWith = require('../internal/assignWith'),
    baseAssign = require('../internal/baseAssign'),
    createAssigner = require('../internal/createAssigner');

/**
 * Assigns own enumerable properties of source object(s) to the destination
 * object. Subsequent sources overwrite property assignments of previous sources.
 * If `customizer` is provided it's invoked to produce the assigned values.
 * The `customizer` is bound to `thisArg` and invoked with five arguments:
 * (objectValue, sourceValue, key, object, source).
 *
 * **Note:** This method mutates `object` and is based on
 * [`Object.assign`](http://ecma-international.org/ecma-262/6.0/#sec-object.assign).
 *
 * @static
 * @memberOf _
 * @alias extend
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @param {Function} [customizer] The function to customize assigned values.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {Object} Returns `object`.
 * @example
 *
 * _.assign({ 'user': 'barney' }, { 'age': 40 }, { 'user': 'fred' });
 * // => { 'user': 'fred', 'age': 40 }
 *
 * // using a customizer callback
 * var defaults = _.partialRight(_.assign, function(value, other) {
 *   return _.isUndefined(value) ? other : value;
 * });
 *
 * defaults({ 'user': 'barney' }, { 'age': 36 }, { 'user': 'fred' });
 * // => { 'user': 'barney', 'age': 36 }
 */
var assign = createAssigner(function(object, source, customizer) {
  return customizer
    ? assignWith(object, source, customizer)
    : baseAssign(object, source);
});

module.exports = assign;

},{"../internal/assignWith":21,"../internal/baseAssign":22,"../internal/createAssigner":38}],73:[function(require,module,exports){
var getNative = require('../internal/getNative'),
    isArrayLike = require('../internal/isArrayLike'),
    isObject = require('../lang/isObject'),
    shimKeys = require('../internal/shimKeys');

/* Native method references for those with the same name as other `lodash` methods. */
var nativeKeys = getNative(Object, 'keys');

/**
 * Creates an array of the own enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects. See the
 * [ES spec](http://ecma-international.org/ecma-262/6.0/#sec-object.keys)
 * for more details.
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keys(new Foo);
 * // => ['a', 'b'] (iteration order is not guaranteed)
 *
 * _.keys('hi');
 * // => ['0', '1']
 */
var keys = !nativeKeys ? shimKeys : function(object) {
  var Ctor = object == null ? undefined : object.constructor;
  if ((typeof Ctor == 'function' && Ctor.prototype === object) ||
      (typeof object != 'function' && isArrayLike(object))) {
    return shimKeys(object);
  }
  return isObject(object) ? nativeKeys(object) : [];
};

module.exports = keys;

},{"../internal/getNative":48,"../internal/isArrayLike":49,"../internal/shimKeys":58,"../lang/isObject":68}],74:[function(require,module,exports){
var isArguments = require('../lang/isArguments'),
    isArray = require('../lang/isArray'),
    isIndex = require('../internal/isIndex'),
    isLength = require('../internal/isLength'),
    isObject = require('../lang/isObject');

/** Used for native method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Creates an array of the own and inherited enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects.
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keysIn(new Foo);
 * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
 */
function keysIn(object) {
  if (object == null) {
    return [];
  }
  if (!isObject(object)) {
    object = Object(object);
  }
  var length = object.length;
  length = (length && isLength(length) &&
    (isArray(object) || isArguments(object)) && length) || 0;

  var Ctor = object.constructor,
      index = -1,
      isProto = typeof Ctor == 'function' && Ctor.prototype === object,
      result = Array(length),
      skipIndexes = length > 0;

  while (++index < length) {
    result[index] = (index + '');
  }
  for (var key in object) {
    if (!(skipIndexes && isIndex(key, length)) &&
        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
      result.push(key);
    }
  }
  return result;
}

module.exports = keysIn;

},{"../internal/isIndex":50,"../internal/isLength":52,"../lang/isArguments":62,"../lang/isArray":63,"../lang/isObject":68}],75:[function(require,module,exports){
var baseMerge = require('../internal/baseMerge'),
    createAssigner = require('../internal/createAssigner');

/**
 * Recursively merges own enumerable properties of the source object(s), that
 * don't resolve to `undefined` into the destination object. Subsequent sources
 * overwrite property assignments of previous sources. If `customizer` is
 * provided it's invoked to produce the merged values of the destination and
 * source properties. If `customizer` returns `undefined` merging is handled
 * by the method instead. The `customizer` is bound to `thisArg` and invoked
 * with five arguments: (objectValue, sourceValue, key, object, source).
 *
 * @static
 * @memberOf _
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @param {Function} [customizer] The function to customize assigned values.
 * @param {*} [thisArg] The `this` binding of `customizer`.
 * @returns {Object} Returns `object`.
 * @example
 *
 * var users = {
 *   'data': [{ 'user': 'barney' }, { 'user': 'fred' }]
 * };
 *
 * var ages = {
 *   'data': [{ 'age': 36 }, { 'age': 40 }]
 * };
 *
 * _.merge(users, ages);
 * // => { 'data': [{ 'user': 'barney', 'age': 36 }, { 'user': 'fred', 'age': 40 }] }
 *
 * // using a customizer callback
 * var object = {
 *   'fruits': ['apple'],
 *   'vegetables': ['beet']
 * };
 *
 * var other = {
 *   'fruits': ['banana'],
 *   'vegetables': ['carrot']
 * };
 *
 * _.merge(object, other, function(a, b) {
 *   if (_.isArray(a)) {
 *     return a.concat(b);
 *   }
 * });
 * // => { 'fruits': ['apple', 'banana'], 'vegetables': ['beet', 'carrot'] }
 */
var merge = createAssigner(baseMerge);

module.exports = merge;

},{"../internal/baseMerge":30,"../internal/createAssigner":38}],76:[function(require,module,exports){
var baseToString = require('../internal/baseToString'),
    escapeHtmlChar = require('../internal/escapeHtmlChar');

/** Used to match HTML entities and HTML characters. */
var reUnescapedHtml = /[&<>"'`]/g,
    reHasUnescapedHtml = RegExp(reUnescapedHtml.source);

/**
 * Converts the characters "&", "<", ">", '"', "'", and "\`", in `string` to
 * their corresponding HTML entities.
 *
 * **Note:** No other characters are escaped. To escape additional characters
 * use a third-party library like [_he_](https://mths.be/he).
 *
 * Though the ">" character is escaped for symmetry, characters like
 * ">" and "/" don't need escaping in HTML and have no special meaning
 * unless they're part of a tag or unquoted attribute value.
 * See [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)
 * (under "semi-related fun fact") for more details.
 *
 * Backticks are escaped because in Internet Explorer < 9, they can break out
 * of attribute values or HTML comments. See [#59](https://html5sec.org/#59),
 * [#102](https://html5sec.org/#102), [#108](https://html5sec.org/#108), and
 * [#133](https://html5sec.org/#133) of the [HTML5 Security Cheatsheet](https://html5sec.org/)
 * for more details.
 *
 * When working with HTML you should always [quote attribute values](http://wonko.com/post/html-escaping)
 * to reduce XSS vectors.
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The string to escape.
 * @returns {string} Returns the escaped string.
 * @example
 *
 * _.escape('fred, barney, & pebbles');
 * // => 'fred, barney, &amp; pebbles'
 */
function escape(string) {
  // Reset `lastIndex` because in IE < 9 `String#replace` does not.
  string = baseToString(string);
  return (string && reHasUnescapedHtml.test(string))
    ? string.replace(reUnescapedHtml, escapeHtmlChar)
    : string;
}

module.exports = escape;

},{"../internal/baseToString":33,"../internal/escapeHtmlChar":45}],77:[function(require,module,exports){
var assignOwnDefaults = require('../internal/assignOwnDefaults'),
    assignWith = require('../internal/assignWith'),
    attempt = require('../utility/attempt'),
    baseAssign = require('../internal/baseAssign'),
    baseToString = require('../internal/baseToString'),
    baseValues = require('../internal/baseValues'),
    escapeStringChar = require('../internal/escapeStringChar'),
    isError = require('../lang/isError'),
    isIterateeCall = require('../internal/isIterateeCall'),
    keys = require('../object/keys'),
    reInterpolate = require('../internal/reInterpolate'),
    templateSettings = require('./templateSettings');

/** Used to match empty string literals in compiled template source. */
var reEmptyStringLeading = /\b__p \+= '';/g,
    reEmptyStringMiddle = /\b(__p \+=) '' \+/g,
    reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;

/** Used to match [ES template delimiters](http://ecma-international.org/ecma-262/6.0/#sec-template-literal-lexical-components). */
var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;

/** Used to ensure capturing order of template delimiters. */
var reNoMatch = /($^)/;

/** Used to match unescaped characters in compiled string literals. */
var reUnescapedString = /['\n\r\u2028\u2029\\]/g;

/**
 * Creates a compiled template function that can interpolate data properties
 * in "interpolate" delimiters, HTML-escape interpolated data properties in
 * "escape" delimiters, and execute JavaScript in "evaluate" delimiters. Data
 * properties may be accessed as free variables in the template. If a setting
 * object is provided it takes precedence over `_.templateSettings` values.
 *
 * **Note:** In the development build `_.template` utilizes
 * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)
 * for easier debugging.
 *
 * For more information on precompiling templates see
 * [lodash's custom builds documentation](https://lodash.com/custom-builds).
 *
 * For more information on Chrome extension sandboxes see
 * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The template string.
 * @param {Object} [options] The options object.
 * @param {RegExp} [options.escape] The HTML "escape" delimiter.
 * @param {RegExp} [options.evaluate] The "evaluate" delimiter.
 * @param {Object} [options.imports] An object to import into the template as free variables.
 * @param {RegExp} [options.interpolate] The "interpolate" delimiter.
 * @param {string} [options.sourceURL] The sourceURL of the template's compiled source.
 * @param {string} [options.variable] The data object variable name.
 * @param- {Object} [otherOptions] Enables the legacy `options` param signature.
 * @returns {Function} Returns the compiled template function.
 * @example
 *
 * // using the "interpolate" delimiter to create a compiled template
 * var compiled = _.template('hello <%= user %>!');
 * compiled({ 'user': 'fred' });
 * // => 'hello fred!'
 *
 * // using the HTML "escape" delimiter to escape data property values
 * var compiled = _.template('<b><%- value %></b>');
 * compiled({ 'value': '<script>' });
 * // => '<b>&lt;script&gt;</b>'
 *
 * // using the "evaluate" delimiter to execute JavaScript and generate HTML
 * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');
 * compiled({ 'users': ['fred', 'barney'] });
 * // => '<li>fred</li><li>barney</li>'
 *
 * // using the internal `print` function in "evaluate" delimiters
 * var compiled = _.template('<% print("hello " + user); %>!');
 * compiled({ 'user': 'barney' });
 * // => 'hello barney!'
 *
 * // using the ES delimiter as an alternative to the default "interpolate" delimiter
 * var compiled = _.template('hello ${ user }!');
 * compiled({ 'user': 'pebbles' });
 * // => 'hello pebbles!'
 *
 * // using custom template delimiters
 * _.templateSettings.interpolate = /{{([\s\S]+?)}}/g;
 * var compiled = _.template('hello {{ user }}!');
 * compiled({ 'user': 'mustache' });
 * // => 'hello mustache!'
 *
 * // using backslashes to treat delimiters as plain text
 * var compiled = _.template('<%= "\\<%- value %\\>" %>');
 * compiled({ 'value': 'ignored' });
 * // => '<%- value %>'
 *
 * // using the `imports` option to import `jQuery` as `jq`
 * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';
 * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });
 * compiled({ 'users': ['fred', 'barney'] });
 * // => '<li>fred</li><li>barney</li>'
 *
 * // using the `sourceURL` option to specify a custom sourceURL for the template
 * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });
 * compiled(data);
 * // => find the source of "greeting.jst" under the Sources tab or Resources panel of the web inspector
 *
 * // using the `variable` option to ensure a with-statement isn't used in the compiled template
 * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });
 * compiled.source;
 * // => function(data) {
 * //   var __t, __p = '';
 * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';
 * //   return __p;
 * // }
 *
 * // using the `source` property to inline compiled templates for meaningful
 * // line numbers in error messages and a stack trace
 * fs.writeFileSync(path.join(cwd, 'jst.js'), '\
 *   var JST = {\
 *     "main": ' + _.template(mainText).source + '\
 *   };\
 * ');
 */
function template(string, options, otherOptions) {
  // Based on John Resig's `tmpl` implementation (http://ejohn.org/blog/javascript-micro-templating/)
  // and Laura Doktorova's doT.js (https://github.com/olado/doT).
  var settings = templateSettings.imports._.templateSettings || templateSettings;

  if (otherOptions && isIterateeCall(string, options, otherOptions)) {
    options = otherOptions = undefined;
  }
  string = baseToString(string);
  options = assignWith(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);

  var imports = assignWith(baseAssign({}, options.imports), settings.imports, assignOwnDefaults),
      importsKeys = keys(imports),
      importsValues = baseValues(imports, importsKeys);

  var isEscaping,
      isEvaluating,
      index = 0,
      interpolate = options.interpolate || reNoMatch,
      source = "__p += '";

  // Compile the regexp to match each delimiter.
  var reDelimiters = RegExp(
    (options.escape || reNoMatch).source + '|' +
    interpolate.source + '|' +
    (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +
    (options.evaluate || reNoMatch).source + '|$'
  , 'g');

  // Use a sourceURL for easier debugging.
  var sourceURL = 'sourceURL' in options ? '//# sourceURL=' + options.sourceURL + '\n' : '';

  string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
    interpolateValue || (interpolateValue = esTemplateValue);

    // Escape characters that can't be included in string literals.
    source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);

    // Replace delimiters with snippets.
    if (escapeValue) {
      isEscaping = true;
      source += "' +\n__e(" + escapeValue + ") +\n'";
    }
    if (evaluateValue) {
      isEvaluating = true;
      source += "';\n" + evaluateValue + ";\n__p += '";
    }
    if (interpolateValue) {
      source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
    }
    index = offset + match.length;

    // The JS engine embedded in Adobe products requires returning the `match`
    // string in order to produce the correct `offset` value.
    return match;
  });

  source += "';\n";

  // If `variable` is not specified wrap a with-statement around the generated
  // code to add the data object to the top of the scope chain.
  var variable = options.variable;
  if (!variable) {
    source = 'with (obj) {\n' + source + '\n}\n';
  }
  // Cleanup code by stripping empty strings.
  source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)
    .replace(reEmptyStringMiddle, '$1')
    .replace(reEmptyStringTrailing, '$1;');

  // Frame code as the function body.
  source = 'function(' + (variable || 'obj') + ') {\n' +
    (variable
      ? ''
      : 'obj || (obj = {});\n'
    ) +
    "var __t, __p = ''" +
    (isEscaping
       ? ', __e = _.escape'
       : ''
    ) +
    (isEvaluating
      ? ', __j = Array.prototype.join;\n' +
        "function print() { __p += __j.call(arguments, '') }\n"
      : ';\n'
    ) +
    source +
    'return __p\n}';

  var result = attempt(function() {
    return Function(importsKeys, sourceURL + 'return ' + source).apply(undefined, importsValues);
  });

  // Provide the compiled function's source by its `toString` method or
  // the `source` property as a convenience for inlining compiled templates.
  result.source = source;
  if (isError(result)) {
    throw result;
  }
  return result;
}

module.exports = template;

},{"../internal/assignOwnDefaults":20,"../internal/assignWith":21,"../internal/baseAssign":22,"../internal/baseToString":33,"../internal/baseValues":34,"../internal/escapeStringChar":46,"../internal/isIterateeCall":51,"../internal/reInterpolate":57,"../lang/isError":65,"../object/keys":73,"../utility/attempt":80,"./templateSettings":78}],78:[function(require,module,exports){
var escape = require('./escape'),
    reEscape = require('../internal/reEscape'),
    reEvaluate = require('../internal/reEvaluate'),
    reInterpolate = require('../internal/reInterpolate');

/**
 * By default, the template delimiters used by lodash are like those in
 * embedded Ruby (ERB). Change the following template settings to use
 * alternative delimiters.
 *
 * @static
 * @memberOf _
 * @type Object
 */
var templateSettings = {

  /**
   * Used to detect `data` property values to be HTML-escaped.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'escape': reEscape,

  /**
   * Used to detect code to be evaluated.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'evaluate': reEvaluate,

  /**
   * Used to detect `data` property values to inject.
   *
   * @memberOf _.templateSettings
   * @type RegExp
   */
  'interpolate': reInterpolate,

  /**
   * Used to reference the data object in the template text.
   *
   * @memberOf _.templateSettings
   * @type string
   */
  'variable': '',

  /**
   * Used to import variables into the compiled template.
   *
   * @memberOf _.templateSettings
   * @type Object
   */
  'imports': {

    /**
     * A reference to the `lodash` function.
     *
     * @memberOf _.templateSettings.imports
     * @type Function
     */
    '_': { 'escape': escape }
  }
};

module.exports = templateSettings;

},{"../internal/reEscape":55,"../internal/reEvaluate":56,"../internal/reInterpolate":57,"./escape":76}],79:[function(require,module,exports){
var baseToString = require('../internal/baseToString'),
    charsLeftIndex = require('../internal/charsLeftIndex'),
    charsRightIndex = require('../internal/charsRightIndex'),
    isIterateeCall = require('../internal/isIterateeCall'),
    trimmedLeftIndex = require('../internal/trimmedLeftIndex'),
    trimmedRightIndex = require('../internal/trimmedRightIndex');

/**
 * Removes leading and trailing whitespace or specified characters from `string`.
 *
 * @static
 * @memberOf _
 * @category String
 * @param {string} [string=''] The string to trim.
 * @param {string} [chars=whitespace] The characters to trim.
 * @param- {Object} [guard] Enables use as a callback for functions like `_.map`.
 * @returns {string} Returns the trimmed string.
 * @example
 *
 * _.trim('  abc  ');
 * // => 'abc'
 *
 * _.trim('-_-abc-_-', '_-');
 * // => 'abc'
 *
 * _.map(['  foo  ', '  bar  '], _.trim);
 * // => ['foo', 'bar']
 */
function trim(string, chars, guard) {
  var value = string;
  string = baseToString(string);
  if (!string) {
    return string;
  }
  if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
    return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);
  }
  chars = (chars + '');
  return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);
}

module.exports = trim;

},{"../internal/baseToString":33,"../internal/charsLeftIndex":36,"../internal/charsRightIndex":37,"../internal/isIterateeCall":51,"../internal/trimmedLeftIndex":60,"../internal/trimmedRightIndex":61}],80:[function(require,module,exports){
var isError = require('../lang/isError'),
    restParam = require('../function/restParam');

/**
 * Attempts to invoke `func`, returning either the result or the caught error
 * object. Any additional arguments are provided to `func` when it's invoked.
 *
 * @static
 * @memberOf _
 * @category Utility
 * @param {Function} func The function to attempt.
 * @returns {*} Returns the `func` result or error object.
 * @example
 *
 * // avoid throwing errors for invalid selectors
 * var elements = _.attempt(function(selector) {
 *   return document.querySelectorAll(selector);
 * }, '>_>');
 *
 * if (_.isError(elements)) {
 *   elements = [];
 * }
 */
var attempt = restParam(function(func, args) {
  try {
    return func.apply(undefined, args);
  } catch(e) {
    return isError(e) ? e : new Error(e);
  }
});

module.exports = attempt;

},{"../function/restParam":15,"../lang/isError":65}],81:[function(require,module,exports){
/**
 * This method returns the first argument provided to it.
 *
 * @static
 * @memberOf _
 * @category Utility
 * @param {*} value Any value.
 * @returns {*} Returns `value`.
 * @example
 *
 * var object = { 'user': 'fred' };
 *
 * _.identity(object) === object;
 * // => true
 */
function identity(value) {
  return value;
}

module.exports = identity;

},{}],82:[function(require,module,exports){
(function (process){
'use strict';

if (!process.version ||
    process.version.indexOf('v0.') === 0 ||
    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {
  module.exports = nextTick;
} else {
  module.exports = process.nextTick;
}

function nextTick(fn) {
  var args = new Array(arguments.length - 1);
  var i = 0;
  while (i < args.length) {
    args[i++] = arguments[i];
  }
  process.nextTick(function afterTick() {
    fn.apply(null, args);
  });
}

}).call(this,require('_process'))

},{"_process":83}],83:[function(require,module,exports){
// shim for using process in browser

var process = module.exports = {};
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = setTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    clearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        setTimeout(drainQueue, 0);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],84:[function(require,module,exports){
(function (global){
/*! https://mths.be/punycode v1.3.2 by @mathias */
;(function(root) {

	/** Detect free variables */
	var freeExports = typeof exports == 'object' && exports &&
		!exports.nodeType && exports;
	var freeModule = typeof module == 'object' && module &&
		!module.nodeType && module;
	var freeGlobal = typeof global == 'object' && global;
	if (
		freeGlobal.global === freeGlobal ||
		freeGlobal.window === freeGlobal ||
		freeGlobal.self === freeGlobal
	) {
		root = freeGlobal;
	}

	/**
	 * The `punycode` object.
	 * @name punycode
	 * @type Object
	 */
	var punycode,

	/** Highest positive signed 32-bit float value */
	maxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1

	/** Bootstring parameters */
	base = 36,
	tMin = 1,
	tMax = 26,
	skew = 38,
	damp = 700,
	initialBias = 72,
	initialN = 128, // 0x80
	delimiter = '-', // '\x2D'

	/** Regular expressions */
	regexPunycode = /^xn--/,
	regexNonASCII = /[^\x20-\x7E]/, // unprintable ASCII chars + non-ASCII chars
	regexSeparators = /[\x2E\u3002\uFF0E\uFF61]/g, // RFC 3490 separators

	/** Error messages */
	errors = {
		'overflow': 'Overflow: input needs wider integers to process',
		'not-basic': 'Illegal input >= 0x80 (not a basic code point)',
		'invalid-input': 'Invalid input'
	},

	/** Convenience shortcuts */
	baseMinusTMin = base - tMin,
	floor = Math.floor,
	stringFromCharCode = String.fromCharCode,

	/** Temporary variable */
	key;

	/*--------------------------------------------------------------------------*/

	/**
	 * A generic error utility function.
	 * @private
	 * @param {String} type The error type.
	 * @returns {Error} Throws a `RangeError` with the applicable error message.
	 */
	function error(type) {
		throw RangeError(errors[type]);
	}

	/**
	 * A generic `Array#map` utility function.
	 * @private
	 * @param {Array} array The array to iterate over.
	 * @param {Function} callback The function that gets called for every array
	 * item.
	 * @returns {Array} A new array of values returned by the callback function.
	 */
	function map(array, fn) {
		var length = array.length;
		var result = [];
		while (length--) {
			result[length] = fn(array[length]);
		}
		return result;
	}

	/**
	 * A simple `Array#map`-like wrapper to work with domain name strings or email
	 * addresses.
	 * @private
	 * @param {String} domain The domain name or email address.
	 * @param {Function} callback The function that gets called for every
	 * character.
	 * @returns {Array} A new string of characters returned by the callback
	 * function.
	 */
	function mapDomain(string, fn) {
		var parts = string.split('@');
		var result = '';
		if (parts.length > 1) {
			// In email addresses, only the domain name should be punycoded. Leave
			// the local part (i.e. everything up to `@`) intact.
			result = parts[0] + '@';
			string = parts[1];
		}
		// Avoid `split(regex)` for IE8 compatibility. See #17.
		string = string.replace(regexSeparators, '\x2E');
		var labels = string.split('.');
		var encoded = map(labels, fn).join('.');
		return result + encoded;
	}

	/**
	 * Creates an array containing the numeric code points of each Unicode
	 * character in the string. While JavaScript uses UCS-2 internally,
	 * this function will convert a pair of surrogate halves (each of which
	 * UCS-2 exposes as separate characters) into a single code point,
	 * matching UTF-16.
	 * @see `punycode.ucs2.encode`
	 * @see <https://mathiasbynens.be/notes/javascript-encoding>
	 * @memberOf punycode.ucs2
	 * @name decode
	 * @param {String} string The Unicode input string (UCS-2).
	 * @returns {Array} The new array of code points.
	 */
	function ucs2decode(string) {
		var output = [],
		    counter = 0,
		    length = string.length,
		    value,
		    extra;
		while (counter < length) {
			value = string.charCodeAt(counter++);
			if (value >= 0xD800 && value <= 0xDBFF && counter < length) {
				// high surrogate, and there is a next character
				extra = string.charCodeAt(counter++);
				if ((extra & 0xFC00) == 0xDC00) { // low surrogate
					output.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);
				} else {
					// unmatched surrogate; only append this code unit, in case the next
					// code unit is the high surrogate of a surrogate pair
					output.push(value);
					counter--;
				}
			} else {
				output.push(value);
			}
		}
		return output;
	}

	/**
	 * Creates a string based on an array of numeric code points.
	 * @see `punycode.ucs2.decode`
	 * @memberOf punycode.ucs2
	 * @name encode
	 * @param {Array} codePoints The array of numeric code points.
	 * @returns {String} The new Unicode string (UCS-2).
	 */
	function ucs2encode(array) {
		return map(array, function(value) {
			var output = '';
			if (value > 0xFFFF) {
				value -= 0x10000;
				output += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);
				value = 0xDC00 | value & 0x3FF;
			}
			output += stringFromCharCode(value);
			return output;
		}).join('');
	}

	/**
	 * Converts a basic code point into a digit/integer.
	 * @see `digitToBasic()`
	 * @private
	 * @param {Number} codePoint The basic numeric code point value.
	 * @returns {Number} The numeric value of a basic code point (for use in
	 * representing integers) in the range `0` to `base - 1`, or `base` if
	 * the code point does not represent a value.
	 */
	function basicToDigit(codePoint) {
		if (codePoint - 48 < 10) {
			return codePoint - 22;
		}
		if (codePoint - 65 < 26) {
			return codePoint - 65;
		}
		if (codePoint - 97 < 26) {
			return codePoint - 97;
		}
		return base;
	}

	/**
	 * Converts a digit/integer into a basic code point.
	 * @see `basicToDigit()`
	 * @private
	 * @param {Number} digit The numeric value of a basic code point.
	 * @returns {Number} The basic code point whose value (when used for
	 * representing integers) is `digit`, which needs to be in the range
	 * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is
	 * used; else, the lowercase form is used. The behavior is undefined
	 * if `flag` is non-zero and `digit` has no uppercase form.
	 */
	function digitToBasic(digit, flag) {
		//  0..25 map to ASCII a..z or A..Z
		// 26..35 map to ASCII 0..9
		return digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);
	}

	/**
	 * Bias adaptation function as per section 3.4 of RFC 3492.
	 * http://tools.ietf.org/html/rfc3492#section-3.4
	 * @private
	 */
	function adapt(delta, numPoints, firstTime) {
		var k = 0;
		delta = firstTime ? floor(delta / damp) : delta >> 1;
		delta += floor(delta / numPoints);
		for (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {
			delta = floor(delta / baseMinusTMin);
		}
		return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));
	}

	/**
	 * Converts a Punycode string of ASCII-only symbols to a string of Unicode
	 * symbols.
	 * @memberOf punycode
	 * @param {String} input The Punycode string of ASCII-only symbols.
	 * @returns {String} The resulting string of Unicode symbols.
	 */
	function decode(input) {
		// Don't use UCS-2
		var output = [],
		    inputLength = input.length,
		    out,
		    i = 0,
		    n = initialN,
		    bias = initialBias,
		    basic,
		    j,
		    index,
		    oldi,
		    w,
		    k,
		    digit,
		    t,
		    /** Cached calculation results */
		    baseMinusT;

		// Handle the basic code points: let `basic` be the number of input code
		// points before the last delimiter, or `0` if there is none, then copy
		// the first basic code points to the output.

		basic = input.lastIndexOf(delimiter);
		if (basic < 0) {
			basic = 0;
		}

		for (j = 0; j < basic; ++j) {
			// if it's not a basic code point
			if (input.charCodeAt(j) >= 0x80) {
				error('not-basic');
			}
			output.push(input.charCodeAt(j));
		}

		// Main decoding loop: start just after the last delimiter if any basic code
		// points were copied; start at the beginning otherwise.

		for (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {

			// `index` is the index of the next character to be consumed.
			// Decode a generalized variable-length integer into `delta`,
			// which gets added to `i`. The overflow checking is easier
			// if we increase `i` as we go, then subtract off its starting
			// value at the end to obtain `delta`.
			for (oldi = i, w = 1, k = base; /* no condition */; k += base) {

				if (index >= inputLength) {
					error('invalid-input');
				}

				digit = basicToDigit(input.charCodeAt(index++));

				if (digit >= base || digit > floor((maxInt - i) / w)) {
					error('overflow');
				}

				i += digit * w;
				t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);

				if (digit < t) {
					break;
				}

				baseMinusT = base - t;
				if (w > floor(maxInt / baseMinusT)) {
					error('overflow');
				}

				w *= baseMinusT;

			}

			out = output.length + 1;
			bias = adapt(i - oldi, out, oldi == 0);

			// `i` was supposed to wrap around from `out` to `0`,
			// incrementing `n` each time, so we'll fix that now:
			if (floor(i / out) > maxInt - n) {
				error('overflow');
			}

			n += floor(i / out);
			i %= out;

			// Insert `n` at position `i` of the output
			output.splice(i++, 0, n);

		}

		return ucs2encode(output);
	}

	/**
	 * Converts a string of Unicode symbols (e.g. a domain name label) to a
	 * Punycode string of ASCII-only symbols.
	 * @memberOf punycode
	 * @param {String} input The string of Unicode symbols.
	 * @returns {String} The resulting Punycode string of ASCII-only symbols.
	 */
	function encode(input) {
		var n,
		    delta,
		    handledCPCount,
		    basicLength,
		    bias,
		    j,
		    m,
		    q,
		    k,
		    t,
		    currentValue,
		    output = [],
		    /** `inputLength` will hold the number of code points in `input`. */
		    inputLength,
		    /** Cached calculation results */
		    handledCPCountPlusOne,
		    baseMinusT,
		    qMinusT;

		// Convert the input in UCS-2 to Unicode
		input = ucs2decode(input);

		// Cache the length
		inputLength = input.length;

		// Initialize the state
		n = initialN;
		delta = 0;
		bias = initialBias;

		// Handle the basic code points
		for (j = 0; j < inputLength; ++j) {
			currentValue = input[j];
			if (currentValue < 0x80) {
				output.push(stringFromCharCode(currentValue));
			}
		}

		handledCPCount = basicLength = output.length;

		// `handledCPCount` is the number of code points that have been handled;
		// `basicLength` is the number of basic code points.

		// Finish the basic string - if it is not empty - with a delimiter
		if (basicLength) {
			output.push(delimiter);
		}

		// Main encoding loop:
		while (handledCPCount < inputLength) {

			// All non-basic code points < n have been handled already. Find the next
			// larger one:
			for (m = maxInt, j = 0; j < inputLength; ++j) {
				currentValue = input[j];
				if (currentValue >= n && currentValue < m) {
					m = currentValue;
				}
			}

			// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,
			// but guard against overflow
			handledCPCountPlusOne = handledCPCount + 1;
			if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {
				error('overflow');
			}

			delta += (m - n) * handledCPCountPlusOne;
			n = m;

			for (j = 0; j < inputLength; ++j) {
				currentValue = input[j];

				if (currentValue < n && ++delta > maxInt) {
					error('overflow');
				}

				if (currentValue == n) {
					// Represent delta as a generalized variable-length integer
					for (q = delta, k = base; /* no condition */; k += base) {
						t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);
						if (q < t) {
							break;
						}
						qMinusT = q - t;
						baseMinusT = base - t;
						output.push(
							stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))
						);
						q = floor(qMinusT / baseMinusT);
					}

					output.push(stringFromCharCode(digitToBasic(q, 0)));
					bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
					delta = 0;
					++handledCPCount;
				}
			}

			++delta;
			++n;

		}
		return output.join('');
	}

	/**
	 * Converts a Punycode string representing a domain name or an email address
	 * to Unicode. Only the Punycoded parts of the input will be converted, i.e.
	 * it doesn't matter if you call it on a string that has already been
	 * converted to Unicode.
	 * @memberOf punycode
	 * @param {String} input The Punycoded domain name or email address to
	 * convert to Unicode.
	 * @returns {String} The Unicode representation of the given Punycode
	 * string.
	 */
	function toUnicode(input) {
		return mapDomain(input, function(string) {
			return regexPunycode.test(string)
				? decode(string.slice(4).toLowerCase())
				: string;
		});
	}

	/**
	 * Converts a Unicode string representing a domain name or an email address to
	 * Punycode. Only the non-ASCII parts of the domain name will be converted,
	 * i.e. it doesn't matter if you call it with a domain that's already in
	 * ASCII.
	 * @memberOf punycode
	 * @param {String} input The domain name or email address to convert, as a
	 * Unicode string.
	 * @returns {String} The Punycode representation of the given domain name or
	 * email address.
	 */
	function toASCII(input) {
		return mapDomain(input, function(string) {
			return regexNonASCII.test(string)
				? 'xn--' + encode(string)
				: string;
		});
	}

	/*--------------------------------------------------------------------------*/

	/** Define the public API */
	punycode = {
		/**
		 * A string representing the current Punycode.js version number.
		 * @memberOf punycode
		 * @type String
		 */
		'version': '1.3.2',
		/**
		 * An object of methods to convert from JavaScript's internal character
		 * representation (UCS-2) to Unicode code points, and back.
		 * @see <https://mathiasbynens.be/notes/javascript-encoding>
		 * @memberOf punycode
		 * @type Object
		 */
		'ucs2': {
			'decode': ucs2decode,
			'encode': ucs2encode
		},
		'decode': decode,
		'encode': encode,
		'toASCII': toASCII,
		'toUnicode': toUnicode
	};

	/** Expose `punycode` */
	// Some AMD build optimizers, like r.js, check for specific condition patterns
	// like the following:
	if (
		typeof define == 'function' &&
		typeof define.amd == 'object' &&
		define.amd
	) {
		define('punycode', function() {
			return punycode;
		});
	} else if (freeExports && freeModule) {
		if (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+
			freeModule.exports = punycode;
		} else { // in Narwhal or RingoJS v0.7.0-
			for (key in punycode) {
				punycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);
			}
		}
	} else { // in Rhino or a web browser
		root.punycode = punycode;
	}

}(this));

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],85:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

'use strict';

// If obj.hasOwnProperty has been overridden, then calling
// obj.hasOwnProperty(prop) will break.
// See: https://github.com/joyent/node/issues/1707
function hasOwnProperty(obj, prop) {
  return Object.prototype.hasOwnProperty.call(obj, prop);
}

module.exports = function(qs, sep, eq, options) {
  sep = sep || '&';
  eq = eq || '=';
  var obj = {};

  if (typeof qs !== 'string' || qs.length === 0) {
    return obj;
  }

  var regexp = /\+/g;
  qs = qs.split(sep);

  var maxKeys = 1000;
  if (options && typeof options.maxKeys === 'number') {
    maxKeys = options.maxKeys;
  }

  var len = qs.length;
  // maxKeys <= 0 means that we should not limit keys count
  if (maxKeys > 0 && len > maxKeys) {
    len = maxKeys;
  }

  for (var i = 0; i < len; ++i) {
    var x = qs[i].replace(regexp, '%20'),
        idx = x.indexOf(eq),
        kstr, vstr, k, v;

    if (idx >= 0) {
      kstr = x.substr(0, idx);
      vstr = x.substr(idx + 1);
    } else {
      kstr = x;
      vstr = '';
    }

    k = decodeURIComponent(kstr);
    v = decodeURIComponent(vstr);

    if (!hasOwnProperty(obj, k)) {
      obj[k] = v;
    } else if (isArray(obj[k])) {
      obj[k].push(v);
    } else {
      obj[k] = [obj[k], v];
    }
  }

  return obj;
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

},{}],86:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

'use strict';

var stringifyPrimitive = function(v) {
  switch (typeof v) {
    case 'string':
      return v;

    case 'boolean':
      return v ? 'true' : 'false';

    case 'number':
      return isFinite(v) ? v : '';

    default:
      return '';
  }
};

module.exports = function(obj, sep, eq, name) {
  sep = sep || '&';
  eq = eq || '=';
  if (obj === null) {
    obj = undefined;
  }

  if (typeof obj === 'object') {
    return map(objectKeys(obj), function(k) {
      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;
      if (isArray(obj[k])) {
        return map(obj[k], function(v) {
          return ks + encodeURIComponent(stringifyPrimitive(v));
        }).join(sep);
      } else {
        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));
      }
    }).join(sep);

  }

  if (!name) return '';
  return encodeURIComponent(stringifyPrimitive(name)) + eq +
         encodeURIComponent(stringifyPrimitive(obj));
};

var isArray = Array.isArray || function (xs) {
  return Object.prototype.toString.call(xs) === '[object Array]';
};

function map (xs, f) {
  if (xs.map) return xs.map(f);
  var res = [];
  for (var i = 0; i < xs.length; i++) {
    res.push(f(xs[i], i));
  }
  return res;
}

var objectKeys = Object.keys || function (obj) {
  var res = [];
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);
  }
  return res;
};

},{}],87:[function(require,module,exports){
'use strict';

exports.decode = exports.parse = require('./decode');
exports.encode = exports.stringify = require('./encode');

},{"./decode":85,"./encode":86}],88:[function(require,module,exports){
module.exports = require("./lib/_stream_duplex.js")

},{"./lib/_stream_duplex.js":89}],89:[function(require,module,exports){
// a duplex stream is just a stream that is both readable and writable.
// Since JS doesn't have multiple prototypal inheritance, this class
// prototypally inherits from Readable, and then parasitically from
// Writable.

'use strict';

/*<replacement>*/
var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) keys.push(key);
  return keys;
}
/*</replacement>*/


module.exports = Duplex;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/



/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

var Readable = require('./_stream_readable');
var Writable = require('./_stream_writable');

util.inherits(Duplex, Readable);

var keys = objectKeys(Writable.prototype);
for (var v = 0; v < keys.length; v++) {
  var method = keys[v];
  if (!Duplex.prototype[method])
    Duplex.prototype[method] = Writable.prototype[method];
}

function Duplex(options) {
  if (!(this instanceof Duplex))
    return new Duplex(options);

  Readable.call(this, options);
  Writable.call(this, options);

  if (options && options.readable === false)
    this.readable = false;

  if (options && options.writable === false)
    this.writable = false;

  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false)
    this.allowHalfOpen = false;

  this.once('end', onend);
}

// the no-half-open enforcer
function onend() {
  // if we allow half-open state, or if the writable side ended,
  // then we're ok.
  if (this.allowHalfOpen || this._writableState.ended)
    return;

  // no more data can be written.
  // But allow more writes to happen in this tick.
  processNextTick(onEndNT, this);
}

function onEndNT(self) {
  self.end();
}

function forEach (xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

},{"./_stream_readable":91,"./_stream_writable":93,"core-util-is":5,"inherits":9,"process-nextick-args":82}],90:[function(require,module,exports){
// a passthrough stream.
// basically just the most minimal sort of Transform stream.
// Every written chunk gets output as-is.

'use strict';

module.exports = PassThrough;

var Transform = require('./_stream_transform');

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

util.inherits(PassThrough, Transform);

function PassThrough(options) {
  if (!(this instanceof PassThrough))
    return new PassThrough(options);

  Transform.call(this, options);
}

PassThrough.prototype._transform = function(chunk, encoding, cb) {
  cb(null, chunk);
};

},{"./_stream_transform":92,"core-util-is":5,"inherits":9}],91:[function(require,module,exports){
(function (process){
'use strict';

module.exports = Readable;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/


/*<replacement>*/
var isArray = require('isarray');
/*</replacement>*/


/*<replacement>*/
var Buffer = require('buffer').Buffer;
/*</replacement>*/

Readable.ReadableState = ReadableState;

var EE = require('events');

/*<replacement>*/
var EElistenerCount = function(emitter, type) {
  return emitter.listeners(type).length;
};
/*</replacement>*/



/*<replacement>*/
var Stream;
(function (){try{
  Stream = require('st' + 'ream');
}catch(_){}finally{
  if (!Stream)
    Stream = require('events').EventEmitter;
}}())
/*</replacement>*/

var Buffer = require('buffer').Buffer;

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/



/*<replacement>*/
var debugUtil = require('util');
var debug;
if (debugUtil && debugUtil.debuglog) {
  debug = debugUtil.debuglog('stream');
} else {
  debug = function () {};
}
/*</replacement>*/

var StringDecoder;

util.inherits(Readable, Stream);

function ReadableState(options, stream) {
  var Duplex = require('./_stream_duplex');

  options = options || {};

  // object stream flag. Used to make read(n) ignore n and to
  // make all the buffer merging and length checks go away
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex)
    this.objectMode = this.objectMode || !!options.readableObjectMode;

  // the point at which it stops calling _read() to fill the buffer
  // Note: 0 is a valid value, means "don't call _read preemptively ever"
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = ~~this.highWaterMark;

  this.buffer = [];
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // whenever we return null, then we set a flag to say
  // that we're awaiting a 'readable' event emission.
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // when piping, we only care about 'readable' events that happen
  // after read()ing all the bytes and not getting any pushback.
  this.ranOut = false;

  // the number of writers that are awaiting a drain event in .pipe()s
  this.awaitDrain = 0;

  // if true, a maybeReadMore has been scheduled
  this.readingMore = false;

  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    if (!StringDecoder)
      StringDecoder = require('string_decoder/').StringDecoder;
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}

function Readable(options) {
  var Duplex = require('./_stream_duplex');

  if (!(this instanceof Readable))
    return new Readable(options);

  this._readableState = new ReadableState(options, this);

  // legacy
  this.readable = true;

  if (options && typeof options.read === 'function')
    this._read = options.read;

  Stream.call(this);
}

// Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.
Readable.prototype.push = function(chunk, encoding) {
  var state = this._readableState;

  if (!state.objectMode && typeof chunk === 'string') {
    encoding = encoding || state.defaultEncoding;
    if (encoding !== state.encoding) {
      chunk = new Buffer(chunk, encoding);
      encoding = '';
    }
  }

  return readableAddChunk(this, state, chunk, encoding, false);
};

// Unshift should *always* be something directly out of read()
Readable.prototype.unshift = function(chunk) {
  var state = this._readableState;
  return readableAddChunk(this, state, chunk, '', true);
};

Readable.prototype.isPaused = function() {
  return this._readableState.flowing === false;
};

function readableAddChunk(stream, state, chunk, encoding, addToFront) {
  var er = chunkInvalid(state, chunk);
  if (er) {
    stream.emit('error', er);
  } else if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else if (state.objectMode || chunk && chunk.length > 0) {
    if (state.ended && !addToFront) {
      var e = new Error('stream.push() after EOF');
      stream.emit('error', e);
    } else if (state.endEmitted && addToFront) {
      var e = new Error('stream.unshift() after end event');
      stream.emit('error', e);
    } else {
      if (state.decoder && !addToFront && !encoding)
        chunk = state.decoder.write(chunk);

      if (!addToFront)
        state.reading = false;

      // if we want the data now, just emit it.
      if (state.flowing && state.length === 0 && !state.sync) {
        stream.emit('data', chunk);
        stream.read(0);
      } else {
        // update the buffer info.
        state.length += state.objectMode ? 1 : chunk.length;
        if (addToFront)
          state.buffer.unshift(chunk);
        else
          state.buffer.push(chunk);

        if (state.needReadable)
          emitReadable(stream);
      }

      maybeReadMore(stream, state);
    }
  } else if (!addToFront) {
    state.reading = false;
  }

  return needMoreData(state);
}


// if it's past the high water mark, we can push in some more.
// Also, if we have no data yet, we can stand some
// more bytes.  This is to work around cases where hwm=0,
// such as the repl.  Also, if the push() triggered a
// readable event, and the user called read(largeNumber) such that
// needReadable was set, then we ought to push more, so that another
// 'readable' event will be triggered.
function needMoreData(state) {
  return !state.ended &&
         (state.needReadable ||
          state.length < state.highWaterMark ||
          state.length === 0);
}

// backwards compatibility.
Readable.prototype.setEncoding = function(enc) {
  if (!StringDecoder)
    StringDecoder = require('string_decoder/').StringDecoder;
  this._readableState.decoder = new StringDecoder(enc);
  this._readableState.encoding = enc;
  return this;
};

// Don't raise the hwm > 8MB
var MAX_HWM = 0x800000;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    // Get the next highest power of 2
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}

function howMuchToRead(n, state) {
  if (state.length === 0 && state.ended)
    return 0;

  if (state.objectMode)
    return n === 0 ? 0 : 1;

  if (n === null || isNaN(n)) {
    // only flow one buffer at a time
    if (state.flowing && state.buffer.length)
      return state.buffer[0].length;
    else
      return state.length;
  }

  if (n <= 0)
    return 0;

  // If we're asking for more than the target buffer level,
  // then raise the water mark.  Bump up to the next highest
  // power of 2, to prevent increasing it excessively in tiny
  // amounts.
  if (n > state.highWaterMark)
    state.highWaterMark = computeNewHighWaterMark(n);

  // don't have that much.  return null, unless we've ended.
  if (n > state.length) {
    if (!state.ended) {
      state.needReadable = true;
      return 0;
    } else {
      return state.length;
    }
  }

  return n;
}

// you can override either this method, or the async _read(n) below.
Readable.prototype.read = function(n) {
  debug('read', n);
  var state = this._readableState;
  var nOrig = n;

  if (typeof n !== 'number' || n > 0)
    state.emittedReadable = false;

  // if we're doing read(0) to trigger a readable event, but we
  // already have a bunch of data in the buffer, then just trigger
  // the 'readable' event and move on.
  if (n === 0 &&
      state.needReadable &&
      (state.length >= state.highWaterMark || state.ended)) {
    debug('read: emitReadable', state.length, state.ended);
    if (state.length === 0 && state.ended)
      endReadable(this);
    else
      emitReadable(this);
    return null;
  }

  n = howMuchToRead(n, state);

  // if we've ended, and we're now clear, then finish it up.
  if (n === 0 && state.ended) {
    if (state.length === 0)
      endReadable(this);
    return null;
  }

  // All the actual chunk generation logic needs to be
  // *below* the call to _read.  The reason is that in certain
  // synthetic stream cases, such as passthrough streams, _read
  // may be a completely synchronous operation which may change
  // the state of the read buffer, providing enough data when
  // before there was *not* enough.
  //
  // So, the steps are:
  // 1. Figure out what the state of things will be after we do
  // a read from the buffer.
  //
  // 2. If that resulting state will trigger a _read, then call _read.
  // Note that this may be asynchronous, or synchronous.  Yes, it is
  // deeply ugly to write APIs this way, but that still doesn't mean
  // that the Readable class should behave improperly, as streams are
  // designed to be sync/async agnostic.
  // Take note if the _read call is sync or async (ie, if the read call
  // has returned yet), so that we know whether or not it's safe to emit
  // 'readable' etc.
  //
  // 3. Actually pull the requested chunks out of the buffer and return.

  // if we need a readable event, then we need to do some reading.
  var doRead = state.needReadable;
  debug('need readable', doRead);

  // if we currently have less than the highWaterMark, then also read some
  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug('length less than watermark', doRead);
  }

  // however, if we've ended, then there's no point, and if we're already
  // reading, then it's unnecessary.
  if (state.ended || state.reading) {
    doRead = false;
    debug('reading or ended', doRead);
  }

  if (doRead) {
    debug('do read');
    state.reading = true;
    state.sync = true;
    // if the length is currently zero, then we *need* a readable event.
    if (state.length === 0)
      state.needReadable = true;
    // call internal read method
    this._read(state.highWaterMark);
    state.sync = false;
  }

  // If _read pushed data synchronously, then `reading` will be false,
  // and we need to re-evaluate how much data we can return to the user.
  if (doRead && !state.reading)
    n = howMuchToRead(nOrig, state);

  var ret;
  if (n > 0)
    ret = fromList(n, state);
  else
    ret = null;

  if (ret === null) {
    state.needReadable = true;
    n = 0;
  }

  state.length -= n;

  // If we have nothing in the buffer, then we want to know
  // as soon as we *do* get something into the buffer.
  if (state.length === 0 && !state.ended)
    state.needReadable = true;

  // If we tried to read() past the EOF, then emit end on the next tick.
  if (nOrig !== n && state.ended && state.length === 0)
    endReadable(this);

  if (ret !== null)
    this.emit('data', ret);

  return ret;
};

function chunkInvalid(state, chunk) {
  var er = null;
  if (!(Buffer.isBuffer(chunk)) &&
      typeof chunk !== 'string' &&
      chunk !== null &&
      chunk !== undefined &&
      !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  return er;
}


function onEofChunk(stream, state) {
  if (state.ended) return;
  if (state.decoder) {
    var chunk = state.decoder.end();
    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }
  state.ended = true;

  // emit 'readable' now to make sure it gets picked up.
  emitReadable(stream);
}

// Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.
function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;
  if (!state.emittedReadable) {
    debug('emitReadable', state.flowing);
    state.emittedReadable = true;
    if (state.sync)
      processNextTick(emitReadable_, stream);
    else
      emitReadable_(stream);
  }
}

function emitReadable_(stream) {
  debug('emit readable');
  stream.emit('readable');
  flow(stream);
}


// at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.
function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    processNextTick(maybeReadMore_, stream, state);
  }
}

function maybeReadMore_(stream, state) {
  var len = state.length;
  while (!state.reading && !state.flowing && !state.ended &&
         state.length < state.highWaterMark) {
    debug('maybeReadMore read 0');
    stream.read(0);
    if (len === state.length)
      // didn't get any data, stop spinning.
      break;
    else
      len = state.length;
  }
  state.readingMore = false;
}

// abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.
Readable.prototype._read = function(n) {
  this.emit('error', new Error('not implemented'));
};

Readable.prototype.pipe = function(dest, pipeOpts) {
  var src = this;
  var state = this._readableState;

  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;
    case 1:
      state.pipes = [state.pipes, dest];
      break;
    default:
      state.pipes.push(dest);
      break;
  }
  state.pipesCount += 1;
  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);

  var doEnd = (!pipeOpts || pipeOpts.end !== false) &&
              dest !== process.stdout &&
              dest !== process.stderr;

  var endFn = doEnd ? onend : cleanup;
  if (state.endEmitted)
    processNextTick(endFn);
  else
    src.once('end', endFn);

  dest.on('unpipe', onunpipe);
  function onunpipe(readable) {
    debug('onunpipe');
    if (readable === src) {
      cleanup();
    }
  }

  function onend() {
    debug('onend');
    dest.end();
  }

  // when the dest drains, it reduces the awaitDrain counter
  // on the source.  This would be more elegant with a .once()
  // handler in flow(), but adding and removing repeatedly is
  // too slow.
  var ondrain = pipeOnDrain(src);
  dest.on('drain', ondrain);

  var cleanedUp = false;
  function cleanup() {
    debug('cleanup');
    // cleanup event handlers once the pipe is broken
    dest.removeListener('close', onclose);
    dest.removeListener('finish', onfinish);
    dest.removeListener('drain', ondrain);
    dest.removeListener('error', onerror);
    dest.removeListener('unpipe', onunpipe);
    src.removeListener('end', onend);
    src.removeListener('end', cleanup);
    src.removeListener('data', ondata);

    cleanedUp = true;

    // if the reader is waiting for a drain event from this
    // specific writer, then it would cause it to never start
    // flowing again.
    // So, if this is awaiting a drain, then we just call it now.
    // If we don't know, then assume that we are waiting for one.
    if (state.awaitDrain &&
        (!dest._writableState || dest._writableState.needDrain))
      ondrain();
  }

  src.on('data', ondata);
  function ondata(chunk) {
    debug('ondata');
    var ret = dest.write(chunk);
    if (false === ret) {
      // If the user unpiped during `dest.write()`, it is possible
      // to get stuck in a permanently paused state if that write
      // also returned false.
      if (state.pipesCount === 1 &&
          state.pipes[0] === dest &&
          src.listenerCount('data') === 1 &&
          !cleanedUp) {
        debug('false write response, pause', src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
      }
      src.pause();
    }
  }

  // if the dest has an error, then stop piping into it.
  // however, don't suppress the throwing behavior for this.
  function onerror(er) {
    debug('onerror', er);
    unpipe();
    dest.removeListener('error', onerror);
    if (EElistenerCount(dest, 'error') === 0)
      dest.emit('error', er);
  }
  // This is a brutally ugly hack to make sure that our error handler
  // is attached before any userland ones.  NEVER DO THIS.
  if (!dest._events || !dest._events.error)
    dest.on('error', onerror);
  else if (isArray(dest._events.error))
    dest._events.error.unshift(onerror);
  else
    dest._events.error = [onerror, dest._events.error];


  // Both close and finish should trigger unpipe, but only once.
  function onclose() {
    dest.removeListener('finish', onfinish);
    unpipe();
  }
  dest.once('close', onclose);
  function onfinish() {
    debug('onfinish');
    dest.removeListener('close', onclose);
    unpipe();
  }
  dest.once('finish', onfinish);

  function unpipe() {
    debug('unpipe');
    src.unpipe(dest);
  }

  // tell the dest that it's being piped to
  dest.emit('pipe', src);

  // start the flow if it hasn't been started already.
  if (!state.flowing) {
    debug('pipe resume');
    src.resume();
  }

  return dest;
};

function pipeOnDrain(src) {
  return function() {
    var state = src._readableState;
    debug('pipeOnDrain', state.awaitDrain);
    if (state.awaitDrain)
      state.awaitDrain--;
    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {
      state.flowing = true;
      flow(src);
    }
  };
}


Readable.prototype.unpipe = function(dest) {
  var state = this._readableState;

  // if we're not piping anywhere, then do nothing.
  if (state.pipesCount === 0)
    return this;

  // just one destination.  most common case.
  if (state.pipesCount === 1) {
    // passed in one, but it's not the right one.
    if (dest && dest !== state.pipes)
      return this;

    if (!dest)
      dest = state.pipes;

    // got a match.
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest)
      dest.emit('unpipe', this);
    return this;
  }

  // slow case. multiple pipe destinations.

  if (!dest) {
    // remove all.
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;

    for (var i = 0; i < len; i++)
      dests[i].emit('unpipe', this);
    return this;
  }

  // try to find the right one.
  var i = indexOf(state.pipes, dest);
  if (i === -1)
    return this;

  state.pipes.splice(i, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1)
    state.pipes = state.pipes[0];

  dest.emit('unpipe', this);

  return this;
};

// set up data events if they are asked for
// Ensure readable listeners eventually get something
Readable.prototype.on = function(ev, fn) {
  var res = Stream.prototype.on.call(this, ev, fn);

  // If listening to data, and it has not explicitly been paused,
  // then call resume to start the flow of data on the next tick.
  if (ev === 'data' && false !== this._readableState.flowing) {
    this.resume();
  }

  if (ev === 'readable' && this.readable) {
    var state = this._readableState;
    if (!state.readableListening) {
      state.readableListening = true;
      state.emittedReadable = false;
      state.needReadable = true;
      if (!state.reading) {
        processNextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this, state);
      }
    }
  }

  return res;
};
Readable.prototype.addListener = Readable.prototype.on;

function nReadingNextTick(self) {
  debug('readable nexttick read 0');
  self.read(0);
}

// pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.
Readable.prototype.resume = function() {
  var state = this._readableState;
  if (!state.flowing) {
    debug('resume');
    state.flowing = true;
    resume(this, state);
  }
  return this;
};

function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    processNextTick(resume_, stream, state);
  }
}

function resume_(stream, state) {
  if (!state.reading) {
    debug('resume read 0');
    stream.read(0);
  }

  state.resumeScheduled = false;
  stream.emit('resume');
  flow(stream);
  if (state.flowing && !state.reading)
    stream.read(0);
}

Readable.prototype.pause = function() {
  debug('call pause flowing=%j', this._readableState.flowing);
  if (false !== this._readableState.flowing) {
    debug('pause');
    this._readableState.flowing = false;
    this.emit('pause');
  }
  return this;
};

function flow(stream) {
  var state = stream._readableState;
  debug('flow', state.flowing);
  if (state.flowing) {
    do {
      var chunk = stream.read();
    } while (null !== chunk && state.flowing);
  }
}

// wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.
Readable.prototype.wrap = function(stream) {
  var state = this._readableState;
  var paused = false;

  var self = this;
  stream.on('end', function() {
    debug('wrapped end');
    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length)
        self.push(chunk);
    }

    self.push(null);
  });

  stream.on('data', function(chunk) {
    debug('wrapped data');
    if (state.decoder)
      chunk = state.decoder.write(chunk);

    // don't skip over falsy values in objectMode
    if (state.objectMode && (chunk === null || chunk === undefined))
      return;
    else if (!state.objectMode && (!chunk || !chunk.length))
      return;

    var ret = self.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });

  // proxy all the other methods.
  // important when wrapping filters and duplexes.
  for (var i in stream) {
    if (this[i] === undefined && typeof stream[i] === 'function') {
      this[i] = function(method) { return function() {
        return stream[method].apply(stream, arguments);
      }; }(i);
    }
  }

  // proxy certain important events.
  var events = ['error', 'close', 'destroy', 'pause', 'resume'];
  forEach(events, function(ev) {
    stream.on(ev, self.emit.bind(self, ev));
  });

  // when we try to consume some more bytes, simply unpause the
  // underlying stream.
  self._read = function(n) {
    debug('wrapped _read', n);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };

  return self;
};


// exposed for testing purposes only.
Readable._fromList = fromList;

// Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
function fromList(n, state) {
  var list = state.buffer;
  var length = state.length;
  var stringMode = !!state.decoder;
  var objectMode = !!state.objectMode;
  var ret;

  // nothing in the list, definitely empty.
  if (list.length === 0)
    return null;

  if (length === 0)
    ret = null;
  else if (objectMode)
    ret = list.shift();
  else if (!n || n >= length) {
    // read it all, truncate the array.
    if (stringMode)
      ret = list.join('');
    else if (list.length === 1)
      ret = list[0];
    else
      ret = Buffer.concat(list, length);
    list.length = 0;
  } else {
    // read just some of it.
    if (n < list[0].length) {
      // just take a part of the first list item.
      // slice is the same for buffers and strings.
      var buf = list[0];
      ret = buf.slice(0, n);
      list[0] = buf.slice(n);
    } else if (n === list[0].length) {
      // first list is a perfect match
      ret = list.shift();
    } else {
      // complex case.
      // we have enough to cover it, but it spans past the first buffer.
      if (stringMode)
        ret = '';
      else
        ret = new Buffer(n);

      var c = 0;
      for (var i = 0, l = list.length; i < l && c < n; i++) {
        var buf = list[0];
        var cpy = Math.min(n - c, buf.length);

        if (stringMode)
          ret += buf.slice(0, cpy);
        else
          buf.copy(ret, c, 0, cpy);

        if (cpy < buf.length)
          list[0] = buf.slice(cpy);
        else
          list.shift();

        c += cpy;
      }
    }
  }

  return ret;
}

function endReadable(stream) {
  var state = stream._readableState;

  // If we get here before consuming all the bytes, then that is a
  // bug in node.  Should never happen.
  if (state.length > 0)
    throw new Error('endReadable called on non-empty stream');

  if (!state.endEmitted) {
    state.ended = true;
    processNextTick(endReadableNT, state, stream);
  }
}

function endReadableNT(state, stream) {
  // Check that we didn't get one last unshift.
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit('end');
  }
}

function forEach (xs, f) {
  for (var i = 0, l = xs.length; i < l; i++) {
    f(xs[i], i);
  }
}

function indexOf (xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x) return i;
  }
  return -1;
}

}).call(this,require('_process'))

},{"./_stream_duplex":89,"_process":83,"buffer":3,"core-util-is":5,"events":7,"inherits":9,"isarray":11,"process-nextick-args":82,"string_decoder/":103,"util":2}],92:[function(require,module,exports){
// a transform stream is a readable/writable stream where you do
// something with the data.  Sometimes it's called a "filter",
// but that's not a great name for it, since that implies a thing where
// some bits pass through, and others are simply ignored.  (That would
// be a valid example of a transform, of course.)
//
// While the output is causally related to the input, it's not a
// necessarily symmetric or synchronous transformation.  For example,
// a zlib stream might take multiple plain-text writes(), and then
// emit a single compressed chunk some time in the future.
//
// Here's how this works:
//
// The Transform stream has all the aspects of the readable and writable
// stream classes.  When you write(chunk), that calls _write(chunk,cb)
// internally, and returns false if there's a lot of pending writes
// buffered up.  When you call read(), that calls _read(n) until
// there's enough pending readable data buffered up.
//
// In a transform stream, the written data is placed in a buffer.  When
// _read(n) is called, it transforms the queued up data, calling the
// buffered _write cb's as it consumes chunks.  If consuming a single
// written chunk would result in multiple output chunks, then the first
// outputted bit calls the readcb, and subsequent chunks just go into
// the read buffer, and will cause it to emit 'readable' if necessary.
//
// This way, back-pressure is actually determined by the reading side,
// since _read has to be called to start processing a new chunk.  However,
// a pathological inflate type of transform can cause excessive buffering
// here.  For example, imagine a stream where every byte of input is
// interpreted as an integer from 0-255, and then results in that many
// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in
// 1kb of data being output.  In this case, you could write a very small
// amount of input, and end up with a very large amount of output.  In
// such a pathological inflating mechanism, there'd be no way to tell
// the system to stop doing the transform.  A single 4MB write could
// cause the system to run out of memory.
//
// However, even in such a pathological case, only a single written chunk
// would be consumed, and then the rest would wait (un-transformed) until
// the results of the previous transformed chunk were consumed.

'use strict';

module.exports = Transform;

var Duplex = require('./_stream_duplex');

/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/

util.inherits(Transform, Duplex);


function TransformState(stream) {
  this.afterTransform = function(er, data) {
    return afterTransform(stream, er, data);
  };

  this.needTransform = false;
  this.transforming = false;
  this.writecb = null;
  this.writechunk = null;
}

function afterTransform(stream, er, data) {
  var ts = stream._transformState;
  ts.transforming = false;

  var cb = ts.writecb;

  if (!cb)
    return stream.emit('error', new Error('no writecb in Transform class'));

  ts.writechunk = null;
  ts.writecb = null;

  if (data !== null && data !== undefined)
    stream.push(data);

  if (cb)
    cb(er);

  var rs = stream._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    stream._read(rs.highWaterMark);
  }
}


function Transform(options) {
  if (!(this instanceof Transform))
    return new Transform(options);

  Duplex.call(this, options);

  this._transformState = new TransformState(this);

  // when the writable side finishes, then flush out anything remaining.
  var stream = this;

  // start out asking for a readable event once data is transformed.
  this._readableState.needReadable = true;

  // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.
  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === 'function')
      this._transform = options.transform;

    if (typeof options.flush === 'function')
      this._flush = options.flush;
  }

  this.once('prefinish', function() {
    if (typeof this._flush === 'function')
      this._flush(function(er) {
        done(stream, er);
      });
    else
      done(stream);
  });
}

Transform.prototype.push = function(chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
};

// This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.
Transform.prototype._transform = function(chunk, encoding, cb) {
  throw new Error('not implemented');
};

Transform.prototype._write = function(chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform ||
        rs.needReadable ||
        rs.length < rs.highWaterMark)
      this._read(rs.highWaterMark);
  }
};

// Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.
Transform.prototype._read = function(n) {
  var ts = this._transformState;

  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we've asked for it.
    ts.needTransform = true;
  }
};


function done(stream, er) {
  if (er)
    return stream.emit('error', er);

  // if there's nothing in the write buffer, then that means
  // that nothing more will ever be provided
  var ws = stream._writableState;
  var ts = stream._transformState;

  if (ws.length)
    throw new Error('calling transform done when ws.length != 0');

  if (ts.transforming)
    throw new Error('calling transform done when still transforming');

  return stream.push(null);
}

},{"./_stream_duplex":89,"core-util-is":5,"inherits":9}],93:[function(require,module,exports){
// A bit simpler than readable streams.
// Implement an async ._write(chunk, encoding, cb), and it'll handle all
// the drain event emission and buffering.

'use strict';

module.exports = Writable;

/*<replacement>*/
var processNextTick = require('process-nextick-args');
/*</replacement>*/


/*<replacement>*/
var Buffer = require('buffer').Buffer;
/*</replacement>*/

Writable.WritableState = WritableState;


/*<replacement>*/
var util = require('core-util-is');
util.inherits = require('inherits');
/*</replacement>*/


/*<replacement>*/
var internalUtil = {
  deprecate: require('util-deprecate')
};
/*</replacement>*/



/*<replacement>*/
var Stream;
(function (){try{
  Stream = require('st' + 'ream');
}catch(_){}finally{
  if (!Stream)
    Stream = require('events').EventEmitter;
}}())
/*</replacement>*/

var Buffer = require('buffer').Buffer;

util.inherits(Writable, Stream);

function nop() {}

function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}

function WritableState(options, stream) {
  var Duplex = require('./_stream_duplex');

  options = options || {};

  // object stream flag to indicate whether or not this stream
  // contains buffers or objects.
  this.objectMode = !!options.objectMode;

  if (stream instanceof Duplex)
    this.objectMode = this.objectMode || !!options.writableObjectMode;

  // the point at which write() starts returning false
  // Note: 0 is a valid value, means that we always return false if
  // the entire buffer is not flushed immediately on write()
  var hwm = options.highWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;
  this.highWaterMark = (hwm || hwm === 0) ? hwm : defaultHwm;

  // cast to ints.
  this.highWaterMark = ~~this.highWaterMark;

  this.needDrain = false;
  // at the start of calling end()
  this.ending = false;
  // when end() has been called, and returned
  this.ended = false;
  // when 'finish' is emitted
  this.finished = false;

  // should we decode strings into buffers before passing to _write?
  // this is here so that some node-core streams can optimize string
  // handling at a lower level.
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // not an actual buffer we keep track of, but a measurement
  // of how much we're waiting to get pushed to some underlying
  // socket or file.
  this.length = 0;

  // a flag to see when we're in the middle of a write.
  this.writing = false;

  // when true all writes will be buffered until .uncork() call
  this.corked = 0;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // a flag to know if we're processing previously buffered items, which
  // may call the _write() callback in the same tick, so that we don't
  // end up in an overlapped onwrite situation.
  this.bufferProcessing = false;

  // the callback that's passed to _write(chunk,cb)
  this.onwrite = function(er) {
    onwrite(stream, er);
  };

  // the callback that the user supplies to write(chunk,encoding,cb)
  this.writecb = null;

  // the amount that is being written when _write is called.
  this.writelen = 0;

  this.bufferedRequest = null;
  this.lastBufferedRequest = null;

  // number of pending user-supplied write callbacks
  // this must be 0 before 'finish' can be emitted
  this.pendingcb = 0;

  // emit prefinish if the only thing we're waiting for is _write cbs
  // This is relevant for synchronous Transform streams
  this.prefinished = false;

  // True if the error was already emitted and should not be thrown again
  this.errorEmitted = false;
}

WritableState.prototype.getBuffer = function writableStateGetBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};

(function (){try {
Object.defineProperty(WritableState.prototype, 'buffer', {
  get: internalUtil.deprecate(function() {
    return this.getBuffer();
  }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' +
     'instead.')
});
}catch(_){}}());


function Writable(options) {
  var Duplex = require('./_stream_duplex');

  // Writable ctor is applied to Duplexes, though they're not
  // instanceof Writable, they're instanceof Readable.
  if (!(this instanceof Writable) && !(this instanceof Duplex))
    return new Writable(options);

  this._writableState = new WritableState(options, this);

  // legacy.
  this.writable = true;

  if (options) {
    if (typeof options.write === 'function')
      this._write = options.write;

    if (typeof options.writev === 'function')
      this._writev = options.writev;
  }

  Stream.call(this);
}

// Otherwise people can pipe Writable streams, which is just wrong.
Writable.prototype.pipe = function() {
  this.emit('error', new Error('Cannot pipe. Not readable.'));
};


function writeAfterEnd(stream, cb) {
  var er = new Error('write after end');
  // TODO: defer error events consistently everywhere, not just the cb
  stream.emit('error', er);
  processNextTick(cb, er);
}

// If we get something that is not a buffer, string, null, or undefined,
// and we're not in objectMode, then that's an error.
// Otherwise stream chunks are all considered to be of length=1, and the
// watermarks determine how many objects to keep in the buffer, rather than
// how many bytes or characters.
function validChunk(stream, state, chunk, cb) {
  var valid = true;

  if (!(Buffer.isBuffer(chunk)) &&
      typeof chunk !== 'string' &&
      chunk !== null &&
      chunk !== undefined &&
      !state.objectMode) {
    var er = new TypeError('Invalid non-string/buffer chunk');
    stream.emit('error', er);
    processNextTick(cb, er);
    valid = false;
  }
  return valid;
}

Writable.prototype.write = function(chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;

  if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (Buffer.isBuffer(chunk))
    encoding = 'buffer';
  else if (!encoding)
    encoding = state.defaultEncoding;

  if (typeof cb !== 'function')
    cb = nop;

  if (state.ended)
    writeAfterEnd(this, cb);
  else if (validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, chunk, encoding, cb);
  }

  return ret;
};

Writable.prototype.cork = function() {
  var state = this._writableState;

  state.corked++;
};

Writable.prototype.uncork = function() {
  var state = this._writableState;

  if (state.corked) {
    state.corked--;

    if (!state.writing &&
        !state.corked &&
        !state.finished &&
        !state.bufferProcessing &&
        state.bufferedRequest)
      clearBuffer(this, state);
  }
};

Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  // node::ParseEncoding() requires lower case.
  if (typeof encoding === 'string')
    encoding = encoding.toLowerCase();
  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64',
'ucs2', 'ucs-2','utf16le', 'utf-16le', 'raw']
.indexOf((encoding + '').toLowerCase()) > -1))
    throw new TypeError('Unknown encoding: ' + encoding);
  this._writableState.defaultEncoding = encoding;
};

function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode &&
      state.decodeStrings !== false &&
      typeof chunk === 'string') {
    chunk = new Buffer(chunk, encoding);
  }
  return chunk;
}

// if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.
function writeOrBuffer(stream, state, chunk, encoding, cb) {
  chunk = decodeChunk(state, chunk, encoding);

  if (Buffer.isBuffer(chunk))
    encoding = 'buffer';
  var len = state.objectMode ? 1 : chunk.length;

  state.length += len;

  var ret = state.length < state.highWaterMark;
  // we must ensure that previous needDrain will not be reset to false.
  if (!ret)
    state.needDrain = true;

  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = new WriteReq(chunk, encoding, cb);
    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }

  return ret;
}

function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev)
    stream._writev(chunk, state.onwrite);
  else
    stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}

function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;
  if (sync)
    processNextTick(cb, er);
  else
    cb(er);

  stream._writableState.errorEmitted = true;
  stream.emit('error', er);
}

function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}

function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;

  onwriteStateUpdate(state);

  if (er)
    onwriteError(stream, state, sync, er, cb);
  else {
    // Check if we're actually ready to finish, but don't emit yet
    var finished = needFinish(state);

    if (!finished &&
        !state.corked &&
        !state.bufferProcessing &&
        state.bufferedRequest) {
      clearBuffer(stream, state);
    }

    if (sync) {
      processNextTick(afterWrite, stream, state, finished, cb);
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}

function afterWrite(stream, state, finished, cb) {
  if (!finished)
    onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
}

// Must force callback to be called on nextTick, so that we don't
// emit 'drain' before the write() consumer gets the 'false' return
// value, and has a chance to attach a 'drain' listener.
function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit('drain');
  }
}


// if there's something in the buffer waiting, then process it
function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;

  if (stream._writev && entry && entry.next) {
    // Fast case, write everything using _writev()
    var buffer = [];
    var cbs = [];
    while (entry) {
      cbs.push(entry.callback);
      buffer.push(entry);
      entry = entry.next;
    }

    // count the one we are adding, as well.
    // TODO(isaacs) clean this up
    state.pendingcb++;
    state.lastBufferedRequest = null;
    doWrite(stream, state, true, state.length, buffer, '', function(err) {
      for (var i = 0; i < cbs.length; i++) {
        state.pendingcb--;
        cbs[i](err);
      }
    });

    // Clear buffer
  } else {
    // Slow case, write chunks one-by-one
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;

      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next;
      // if we didn't call the onwrite immediately, then
      // it means that we need to wait until it does.
      // also, that means that the chunk and cb are currently
      // being processed, so move the buffer counter past them.
      if (state.writing) {
        break;
      }
    }

    if (entry === null)
      state.lastBufferedRequest = null;
  }
  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}

Writable.prototype._write = function(chunk, encoding, cb) {
  cb(new Error('not implemented'));
};

Writable.prototype._writev = null;

Writable.prototype.end = function(chunk, encoding, cb) {
  var state = this._writableState;

  if (typeof chunk === 'function') {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (chunk !== null && chunk !== undefined)
    this.write(chunk, encoding);

  // .end() fully uncorks
  if (state.corked) {
    state.corked = 1;
    this.uncork();
  }

  // ignore unnecessary end() calls.
  if (!state.ending && !state.finished)
    endWritable(this, state, cb);
};


function needFinish(state) {
  return (state.ending &&
          state.length === 0 &&
          state.bufferedRequest === null &&
          !state.finished &&
          !state.writing);
}

function prefinish(stream, state) {
  if (!state.prefinished) {
    state.prefinished = true;
    stream.emit('prefinish');
  }
}

function finishMaybe(stream, state) {
  var need = needFinish(state);
  if (need) {
    if (state.pendingcb === 0) {
      prefinish(stream, state);
      state.finished = true;
      stream.emit('finish');
    } else {
      prefinish(stream, state);
    }
  }
  return need;
}

function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);
  if (cb) {
    if (state.finished)
      processNextTick(cb);
    else
      stream.once('finish', cb);
  }
  state.ended = true;
}

},{"./_stream_duplex":89,"buffer":3,"core-util-is":5,"events":7,"inherits":9,"process-nextick-args":82,"util-deprecate":106}],94:[function(require,module,exports){
module.exports = require("./lib/_stream_passthrough.js")

},{"./lib/_stream_passthrough.js":90}],95:[function(require,module,exports){
var Stream = (function (){
  try {
    return require('st' + 'ream'); // hack to fix a circular dependency issue when used with browserify
  } catch(_){}
}());
exports = module.exports = require('./lib/_stream_readable.js');
exports.Stream = Stream || exports;
exports.Readable = exports;
exports.Writable = require('./lib/_stream_writable.js');
exports.Duplex = require('./lib/_stream_duplex.js');
exports.Transform = require('./lib/_stream_transform.js');
exports.PassThrough = require('./lib/_stream_passthrough.js');

},{"./lib/_stream_duplex.js":89,"./lib/_stream_passthrough.js":90,"./lib/_stream_readable.js":91,"./lib/_stream_transform.js":92,"./lib/_stream_writable.js":93}],96:[function(require,module,exports){
module.exports = require("./lib/_stream_transform.js")

},{"./lib/_stream_transform.js":92}],97:[function(require,module,exports){
module.exports = require("./lib/_stream_writable.js")

},{"./lib/_stream_writable.js":93}],98:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

module.exports = Stream;

var EE = require('events').EventEmitter;
var inherits = require('inherits');

inherits(Stream, EE);
Stream.Readable = require('readable-stream/readable.js');
Stream.Writable = require('readable-stream/writable.js');
Stream.Duplex = require('readable-stream/duplex.js');
Stream.Transform = require('readable-stream/transform.js');
Stream.PassThrough = require('readable-stream/passthrough.js');

// Backwards-compat with node 0.4.x
Stream.Stream = Stream;



// old-style streams.  Note that the pipe method (the only relevant
// part of this class) is overridden in the Readable class.

function Stream() {
  EE.call(this);
}

Stream.prototype.pipe = function(dest, options) {
  var source = this;

  function ondata(chunk) {
    if (dest.writable) {
      if (false === dest.write(chunk) && source.pause) {
        source.pause();
      }
    }
  }

  source.on('data', ondata);

  function ondrain() {
    if (source.readable && source.resume) {
      source.resume();
    }
  }

  dest.on('drain', ondrain);

  // If the 'end' option is not supplied, dest.end() will be called when
  // source gets the 'end' or 'close' events.  Only dest.end() once.
  if (!dest._isStdio && (!options || options.end !== false)) {
    source.on('end', onend);
    source.on('close', onclose);
  }

  var didOnEnd = false;
  function onend() {
    if (didOnEnd) return;
    didOnEnd = true;

    dest.end();
  }


  function onclose() {
    if (didOnEnd) return;
    didOnEnd = true;

    if (typeof dest.destroy === 'function') dest.destroy();
  }

  // don't leave dangling pipes when there are errors.
  function onerror(er) {
    cleanup();
    if (EE.listenerCount(this, 'error') === 0) {
      throw er; // Unhandled stream error in pipe.
    }
  }

  source.on('error', onerror);
  dest.on('error', onerror);

  // remove all the event listeners that were added.
  function cleanup() {
    source.removeListener('data', ondata);
    dest.removeListener('drain', ondrain);

    source.removeListener('end', onend);
    source.removeListener('close', onclose);

    source.removeListener('error', onerror);
    dest.removeListener('error', onerror);

    source.removeListener('end', cleanup);
    source.removeListener('close', cleanup);

    dest.removeListener('close', cleanup);
  }

  source.on('end', cleanup);
  source.on('close', cleanup);

  dest.on('close', cleanup);

  dest.emit('pipe', source);

  // Allow for unix-like usage: A.pipe(B).pipe(C)
  return dest;
};

},{"events":7,"inherits":9,"readable-stream/duplex.js":88,"readable-stream/passthrough.js":94,"readable-stream/readable.js":95,"readable-stream/transform.js":96,"readable-stream/writable.js":97}],99:[function(require,module,exports){
var ClientRequest = require('./lib/request')
var extend = require('xtend')
var statusCodes = require('builtin-status-codes')
var url = require('url')

var http = exports

http.request = function (opts, cb) {
	if (typeof opts === 'string')
		opts = url.parse(opts)
	else
		opts = extend(opts)

	var protocol = opts.protocol || ''
	var host = opts.hostname || opts.host
	var port = opts.port
	var path = opts.path || '/'

	// Necessary for IPv6 addresses
	if (host && host.indexOf(':') !== -1)
		host = '[' + host + ']'

	// This may be a relative url. The browser should always be able to interpret it correctly.
	opts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path
	opts.method = (opts.method || 'GET').toUpperCase()
	opts.headers = opts.headers || {}

	// Also valid opts.auth, opts.mode

	var req = new ClientRequest(opts)
	if (cb)
		req.on('response', cb)
	return req
}

http.get = function get (opts, cb) {
	var req = http.request(opts, cb)
	req.end()
	return req
}

http.Agent = function () {}
http.Agent.defaultMaxSockets = 4

http.STATUS_CODES = statusCodes

http.METHODS = [
	'CHECKOUT',
	'CONNECT',
	'COPY',
	'DELETE',
	'GET',
	'HEAD',
	'LOCK',
	'M-SEARCH',
	'MERGE',
	'MKACTIVITY',
	'MKCOL',
	'MOVE',
	'NOTIFY',
	'OPTIONS',
	'PATCH',
	'POST',
	'PROPFIND',
	'PROPPATCH',
	'PURGE',
	'PUT',
	'REPORT',
	'SEARCH',
	'SUBSCRIBE',
	'TRACE',
	'UNLOCK',
	'UNSUBSCRIBE'
]
},{"./lib/request":101,"builtin-status-codes":4,"url":104,"xtend":107}],100:[function(require,module,exports){
(function (global){
exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableByteStream)

exports.blobConstructor = false
try {
	new Blob([new ArrayBuffer(1)])
	exports.blobConstructor = true
} catch (e) {}

var xhr = new global.XMLHttpRequest()
// If location.host is empty, e.g. if this page/worker was loaded
// from a Blob, then use example.com to avoid an error
xhr.open('GET', global.location.host ? '/' : 'https://example.com')

function checkTypeSupport (type) {
	try {
		xhr.responseType = type
		return xhr.responseType === type
	} catch (e) {}
	return false
}

// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.
// Safari 7.1 appears to have fixed this bug.
var haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'
var haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)

exports.arraybuffer = haveArrayBuffer && checkTypeSupport('arraybuffer')
// These next two tests unavoidably show warnings in Chrome. Since fetch will always
// be used if it's available, just return false for these to avoid the warnings.
exports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')
exports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&
	checkTypeSupport('moz-chunked-arraybuffer')
exports.overrideMimeType = isFunction(xhr.overrideMimeType)
exports.vbArray = isFunction(global.VBArray)

function isFunction (value) {
  return typeof value === 'function'
}

xhr = null // Help gc

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],101:[function(require,module,exports){
(function (process,global,Buffer){
// var Base64 = require('Base64')
var capability = require('./capability')
var inherits = require('inherits')
var response = require('./response')
var stream = require('stream')

var IncomingMessage = response.IncomingMessage
var rStates = response.readyStates

function decideMode (preferBinary) {
	if (capability.fetch) {
		return 'fetch'
	} else if (capability.mozchunkedarraybuffer) {
		return 'moz-chunked-arraybuffer'
	} else if (capability.msstream) {
		return 'ms-stream'
	} else if (capability.arraybuffer && preferBinary) {
		return 'arraybuffer'
	} else if (capability.vbArray && preferBinary) {
		return 'text:vbarray'
	} else {
		return 'text'
	}
}

var ClientRequest = module.exports = function (opts) {
	var self = this
	stream.Writable.call(self)

	self._opts = opts
	self._body = []
	self._headers = {}
	if (opts.auth)
		self.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))
	Object.keys(opts.headers).forEach(function (name) {
		self.setHeader(name, opts.headers[name])
	})

	var preferBinary
	if (opts.mode === 'prefer-streaming') {
		// If streaming is a high priority but binary compatibility and
		// the accuracy of the 'content-type' header aren't
		preferBinary = false
	} else if (opts.mode === 'allow-wrong-content-type') {
		// If streaming is more important than preserving the 'content-type' header
		preferBinary = !capability.overrideMimeType
	} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {
		// Use binary if text streaming may corrupt data or the content-type header, or for speed
		preferBinary = true
	} else {
		throw new Error('Invalid value for opts.mode')
	}
	self._mode = decideMode(preferBinary)

	self.on('finish', function () {
		self._onFinish()
	})
}

inherits(ClientRequest, stream.Writable)

ClientRequest.prototype.setHeader = function (name, value) {
	var self = this
	var lowerName = name.toLowerCase()
	// This check is not necessary, but it prevents warnings from browsers about setting unsafe
	// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but
	// http-browserify did it, so I will too.
	if (unsafeHeaders.indexOf(lowerName) !== -1)
		return

	self._headers[lowerName] = {
		name: name,
		value: value
	}
}

ClientRequest.prototype.getHeader = function (name) {
	var self = this
	return self._headers[name.toLowerCase()].value
}

ClientRequest.prototype.removeHeader = function (name) {
	var self = this
	delete self._headers[name.toLowerCase()]
}

ClientRequest.prototype._onFinish = function () {
	var self = this

	if (self._destroyed)
		return
	var opts = self._opts

	var headersObj = self._headers
	var body
	if (opts.method === 'POST' || opts.method === 'PUT' || opts.method === 'PATCH') {
		if (capability.blobConstructor) {
			body = new global.Blob(self._body.map(function (buffer) {
				return buffer.toArrayBuffer()
			}), {
				type: (headersObj['content-type'] || {}).value || ''
			})
		} else {
			// get utf8 string
			body = Buffer.concat(self._body).toString()
		}
	}

	if (self._mode === 'fetch') {
		var headers = Object.keys(headersObj).map(function (name) {
			return [headersObj[name].name, headersObj[name].value]
		})

		global.fetch(self._opts.url, {
			method: self._opts.method,
			headers: headers,
			body: body,
			mode: 'cors',
			credentials: opts.withCredentials ? 'include' : 'same-origin'
		}).then(function (response) {
			self._fetchResponse = response
			self._connect()
		}, function (reason) {
			self.emit('error', reason)
		})
	} else {
		var xhr = self._xhr = new global.XMLHttpRequest()
		try {
			xhr.open(self._opts.method, self._opts.url, true)
		} catch (err) {
			process.nextTick(function () {
				self.emit('error', err)
			})
			return
		}

		// Can't set responseType on really old browsers
		if ('responseType' in xhr)
			xhr.responseType = self._mode.split(':')[0]

		if ('withCredentials' in xhr)
			xhr.withCredentials = !!opts.withCredentials

		if (self._mode === 'text' && 'overrideMimeType' in xhr)
			xhr.overrideMimeType('text/plain; charset=x-user-defined')

		Object.keys(headersObj).forEach(function (name) {
			xhr.setRequestHeader(headersObj[name].name, headersObj[name].value)
		})

		self._response = null
		xhr.onreadystatechange = function () {
			switch (xhr.readyState) {
				case rStates.LOADING:
				case rStates.DONE:
					self._onXHRProgress()
					break
			}
		}
		// Necessary for streaming in Firefox, since xhr.response is ONLY defined
		// in onprogress, not in onreadystatechange with xhr.readyState = 3
		if (self._mode === 'moz-chunked-arraybuffer') {
			xhr.onprogress = function () {
				self._onXHRProgress()
			}
		}

		xhr.onerror = function () {
			if (self._destroyed)
				return
			self.emit('error', new Error('XHR error'))
		}

		try {
			xhr.send(body)
		} catch (err) {
			process.nextTick(function () {
				self.emit('error', err)
			})
			return
		}
	}
}

/**
 * Checks if xhr.status is readable. Even though the spec says it should
 * be available in readyState 3, accessing it throws an exception in IE8
 */
function statusValid (xhr) {
	try {
		return (xhr.status !== null)
	} catch (e) {
		return false
	}
}

ClientRequest.prototype._onXHRProgress = function () {
	var self = this

	if (!statusValid(self._xhr) || self._destroyed)
		return

	if (!self._response)
		self._connect()

	self._response._onXHRProgress()
}

ClientRequest.prototype._connect = function () {
	var self = this

	if (self._destroyed)
		return

	self._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode)
	self.emit('response', self._response)
}

ClientRequest.prototype._write = function (chunk, encoding, cb) {
	var self = this

	self._body.push(chunk)
	cb()
}

ClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {
	var self = this
	self._destroyed = true
	if (self._response)
		self._response._destroyed = true
	if (self._xhr)
		self._xhr.abort()
	// Currently, there isn't a way to truly abort a fetch.
	// If you like bikeshedding, see https://github.com/whatwg/fetch/issues/27
}

ClientRequest.prototype.end = function (data, encoding, cb) {
	var self = this
	if (typeof data === 'function') {
		cb = data
		data = undefined
	}

	stream.Writable.prototype.end.call(self, data, encoding, cb)
}

ClientRequest.prototype.flushHeaders = function () {}
ClientRequest.prototype.setTimeout = function () {}
ClientRequest.prototype.setNoDelay = function () {}
ClientRequest.prototype.setSocketKeepAlive = function () {}

// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method
var unsafeHeaders = [
	'accept-charset',
	'accept-encoding',
	'access-control-request-headers',
	'access-control-request-method',
	'connection',
	'content-length',
	'cookie',
	'cookie2',
	'date',
	'dnt',
	'expect',
	'host',
	'keep-alive',
	'origin',
	'referer',
	'te',
	'trailer',
	'transfer-encoding',
	'upgrade',
	'user-agent',
	'via'
]

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"./capability":100,"./response":102,"_process":83,"buffer":3,"inherits":9,"stream":98}],102:[function(require,module,exports){
(function (process,global,Buffer){
var capability = require('./capability')
var inherits = require('inherits')
var stream = require('stream')

var rStates = exports.readyStates = {
	UNSENT: 0,
	OPENED: 1,
	HEADERS_RECEIVED: 2,
	LOADING: 3,
	DONE: 4
}

var IncomingMessage = exports.IncomingMessage = function (xhr, response, mode) {
	var self = this
	stream.Readable.call(self)

	self._mode = mode
	self.headers = {}
	self.rawHeaders = []
	self.trailers = {}
	self.rawTrailers = []

	// Fake the 'close' event, but only once 'end' fires
	self.on('end', function () {
		// The nextTick is necessary to prevent the 'request' module from causing an infinite loop
		process.nextTick(function () {
			self.emit('close')
		})
	})

	if (mode === 'fetch') {
		self._fetchResponse = response

		self.statusCode = response.status
		self.statusMessage = response.statusText
		// backwards compatible version of for (<item> of <iterable>):
		// for (var <item>,_i,_it = <iterable>[Symbol.iterator](); <item> = (_i = _it.next()).value,!_i.done;)
		for (var header, _i, _it = response.headers[Symbol.iterator](); header = (_i = _it.next()).value, !_i.done;) {
			self.headers[header[0].toLowerCase()] = header[1]
			self.rawHeaders.push(header[0], header[1])
		}

		// TODO: this doesn't respect backpressure. Once WritableStream is available, this can be fixed
		var reader = response.body.getReader()
		function read () {
			reader.read().then(function (result) {
				if (self._destroyed)
					return
				if (result.done) {
					self.push(null)
					return
				}
				self.push(new Buffer(result.value))
				read()
			})
		}
		read()

	} else {
		self._xhr = xhr
		self._pos = 0

		self.statusCode = xhr.status
		self.statusMessage = xhr.statusText
		var headers = xhr.getAllResponseHeaders().split(/\r?\n/)
		headers.forEach(function (header) {
			var matches = header.match(/^([^:]+):\s*(.*)/)
			if (matches) {
				var key = matches[1].toLowerCase()
				if (self.headers[key] !== undefined)
					self.headers[key] += ', ' + matches[2]
				else
					self.headers[key] = matches[2]
				self.rawHeaders.push(matches[1], matches[2])
			}
		})

		self._charset = 'x-user-defined'
		if (!capability.overrideMimeType) {
			var mimeType = self.rawHeaders['mime-type']
			if (mimeType) {
				var charsetMatch = mimeType.match(/;\s*charset=([^;])(;|$)/)
				if (charsetMatch) {
					self._charset = charsetMatch[1].toLowerCase()
				}
			}
			if (!self._charset)
				self._charset = 'utf-8' // best guess
		}
	}
}

inherits(IncomingMessage, stream.Readable)

IncomingMessage.prototype._read = function () {}

IncomingMessage.prototype._onXHRProgress = function () {
	var self = this

	var xhr = self._xhr

	var response = null
	switch (self._mode) {
		case 'text:vbarray': // For IE9
			if (xhr.readyState !== rStates.DONE)
				break
			try {
				// This fails in IE8
				response = new global.VBArray(xhr.responseBody).toArray()
			} catch (e) {}
			if (response !== null) {
				self.push(new Buffer(response))
				break
			}
			// Falls through in IE8	
		case 'text':
			try { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4
				response = xhr.responseText
			} catch (e) {
				self._mode = 'text:vbarray'
				break
			}
			if (response.length > self._pos) {
				var newData = response.substr(self._pos)
				if (self._charset === 'x-user-defined') {
					var buffer = new Buffer(newData.length)
					for (var i = 0; i < newData.length; i++)
						buffer[i] = newData.charCodeAt(i) & 0xff

					self.push(buffer)
				} else {
					self.push(newData, self._charset)
				}
				self._pos = response.length
			}
			break
		case 'arraybuffer':
			if (xhr.readyState !== rStates.DONE)
				break
			response = xhr.response
			self.push(new Buffer(new Uint8Array(response)))
			break
		case 'moz-chunked-arraybuffer': // take whole
			response = xhr.response
			if (xhr.readyState !== rStates.LOADING || !response)
				break
			self.push(new Buffer(new Uint8Array(response)))
			break
		case 'ms-stream':
			response = xhr.response
			if (xhr.readyState !== rStates.LOADING)
				break
			var reader = new global.MSStreamReader()
			reader.onprogress = function () {
				if (reader.result.byteLength > self._pos) {
					self.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))
					self._pos = reader.result.byteLength
				}
			}
			reader.onload = function () {
				self.push(null)
			}
			// reader.onerror = ??? // TODO: this
			reader.readAsArrayBuffer(response)
			break
	}

	// The ms-stream case handles end separately in reader.onload()
	if (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {
		self.push(null)
	}
}

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {},require("buffer").Buffer)

},{"./capability":100,"_process":83,"buffer":3,"inherits":9,"stream":98}],103:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var Buffer = require('buffer').Buffer;

var isBufferEncoding = Buffer.isEncoding
  || function(encoding) {
       switch (encoding && encoding.toLowerCase()) {
         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;
         default: return false;
       }
     }


function assertEncoding(encoding) {
  if (encoding && !isBufferEncoding(encoding)) {
    throw new Error('Unknown encoding: ' + encoding);
  }
}

// StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters. CESU-8 is handled as part of the UTF-8 encoding.
//
// @TODO Handling all encodings inside a single object makes it very difficult
// to reason about this code, so it should be split up in the future.
// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code
// points as used by CESU-8.
var StringDecoder = exports.StringDecoder = function(encoding) {
  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');
  assertEncoding(encoding);
  switch (this.encoding) {
    case 'utf8':
      // CESU-8 represents each of Surrogate Pair by 3-bytes
      this.surrogateSize = 3;
      break;
    case 'ucs2':
    case 'utf16le':
      // UTF-16 represents each of Surrogate Pair by 2-bytes
      this.surrogateSize = 2;
      this.detectIncompleteChar = utf16DetectIncompleteChar;
      break;
    case 'base64':
      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.
      this.surrogateSize = 3;
      this.detectIncompleteChar = base64DetectIncompleteChar;
      break;
    default:
      this.write = passThroughWrite;
      return;
  }

  // Enough space to store all bytes of a single character. UTF-8 needs 4
  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).
  this.charBuffer = new Buffer(6);
  // Number of bytes received for the current incomplete multi-byte character.
  this.charReceived = 0;
  // Number of bytes expected for the current incomplete multi-byte character.
  this.charLength = 0;
};


// write decodes the given buffer and returns it as JS string that is
// guaranteed to not contain any partial multi-byte characters. Any partial
// character found at the end of the buffer is buffered up, and will be
// returned when calling write again with the remaining bytes.
//
// Note: Converting a Buffer containing an orphan surrogate to a String
// currently works, but converting a String to a Buffer (via `new Buffer`, or
// Buffer#write) will replace incomplete surrogates with the unicode
// replacement character. See https://codereview.chromium.org/121173009/ .
StringDecoder.prototype.write = function(buffer) {
  var charStr = '';
  // if our last write ended with an incomplete multibyte character
  while (this.charLength) {
    // determine how many remaining bytes this buffer has to offer for this char
    var available = (buffer.length >= this.charLength - this.charReceived) ?
        this.charLength - this.charReceived :
        buffer.length;

    // add the new bytes to the char buffer
    buffer.copy(this.charBuffer, this.charReceived, 0, available);
    this.charReceived += available;

    if (this.charReceived < this.charLength) {
      // still not enough chars in this buffer? wait for more ...
      return '';
    }

    // remove bytes belonging to the current character from the buffer
    buffer = buffer.slice(available, buffer.length);

    // get the character that was split
    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);

    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character
    var charCode = charStr.charCodeAt(charStr.length - 1);
    if (charCode >= 0xD800 && charCode <= 0xDBFF) {
      this.charLength += this.surrogateSize;
      charStr = '';
      continue;
    }
    this.charReceived = this.charLength = 0;

    // if there are no more bytes in this buffer, just emit our char
    if (buffer.length === 0) {
      return charStr;
    }
    break;
  }

  // determine and set charLength / charReceived
  this.detectIncompleteChar(buffer);

  var end = buffer.length;
  if (this.charLength) {
    // buffer the incomplete character bytes we got
    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);
    end -= this.charReceived;
  }

  charStr += buffer.toString(this.encoding, 0, end);

  var end = charStr.length - 1;
  var charCode = charStr.charCodeAt(end);
  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character
  if (charCode >= 0xD800 && charCode <= 0xDBFF) {
    var size = this.surrogateSize;
    this.charLength += size;
    this.charReceived += size;
    this.charBuffer.copy(this.charBuffer, size, 0, size);
    buffer.copy(this.charBuffer, 0, 0, size);
    return charStr.substring(0, end);
  }

  // or just emit the charStr
  return charStr;
};

// detectIncompleteChar determines if there is an incomplete UTF-8 character at
// the end of the given buffer. If so, it sets this.charLength to the byte
// length that character, and sets this.charReceived to the number of bytes
// that are available for this character.
StringDecoder.prototype.detectIncompleteChar = function(buffer) {
  // determine how many bytes we have to check at the end of this buffer
  var i = (buffer.length >= 3) ? 3 : buffer.length;

  // Figure out if one of the last i bytes of our buffer announces an
  // incomplete char.
  for (; i > 0; i--) {
    var c = buffer[buffer.length - i];

    // See http://en.wikipedia.org/wiki/UTF-8#Description

    // 110XXXXX
    if (i == 1 && c >> 5 == 0x06) {
      this.charLength = 2;
      break;
    }

    // 1110XXXX
    if (i <= 2 && c >> 4 == 0x0E) {
      this.charLength = 3;
      break;
    }

    // 11110XXX
    if (i <= 3 && c >> 3 == 0x1E) {
      this.charLength = 4;
      break;
    }
  }
  this.charReceived = i;
};

StringDecoder.prototype.end = function(buffer) {
  var res = '';
  if (buffer && buffer.length)
    res = this.write(buffer);

  if (this.charReceived) {
    var cr = this.charReceived;
    var buf = this.charBuffer;
    var enc = this.encoding;
    res += buf.slice(0, cr).toString(enc);
  }

  return res;
};

function passThroughWrite(buffer) {
  return buffer.toString(this.encoding);
}

function utf16DetectIncompleteChar(buffer) {
  this.charReceived = buffer.length % 2;
  this.charLength = this.charReceived ? 2 : 0;
}

function base64DetectIncompleteChar(buffer) {
  this.charReceived = buffer.length % 3;
  this.charLength = this.charReceived ? 3 : 0;
}

},{"buffer":3}],104:[function(require,module,exports){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

'use strict';

var punycode = require('punycode');
var util = require('./util');

exports.parse = urlParse;
exports.resolve = urlResolve;
exports.resolveObject = urlResolveObject;
exports.format = urlFormat;

exports.Url = Url;

function Url() {
  this.protocol = null;
  this.slashes = null;
  this.auth = null;
  this.host = null;
  this.port = null;
  this.hostname = null;
  this.hash = null;
  this.search = null;
  this.query = null;
  this.pathname = null;
  this.path = null;
  this.href = null;
}

// Reference: RFC 3986, RFC 1808, RFC 2396

// define these here so at least they only have to be
// compiled once on the first module load.
var protocolPattern = /^([a-z0-9.+-]+:)/i,
    portPattern = /:[0-9]*$/,

    // Special case for a simple path URL
    simplePathPattern = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,

    // RFC 2396: characters reserved for delimiting URLs.
    // We actually just auto-escape these.
    delims = ['<', '>', '"', '`', ' ', '\r', '\n', '\t'],

    // RFC 2396: characters not allowed for various reasons.
    unwise = ['{', '}', '|', '\\', '^', '`'].concat(delims),

    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.
    autoEscape = ['\''].concat(unwise),
    // Characters that are never ever allowed in a hostname.
    // Note that any invalid chars are also handled, but these
    // are the ones that are *expected* to be seen, so we fast-path
    // them.
    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),
    hostEndingChars = ['/', '?', '#'],
    hostnameMaxLen = 255,
    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,
    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
    // protocols that can allow "unsafe" and "unwise" chars.
    unsafeProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that never have a hostname.
    hostlessProtocol = {
      'javascript': true,
      'javascript:': true
    },
    // protocols that always contain a // bit.
    slashedProtocol = {
      'http': true,
      'https': true,
      'ftp': true,
      'gopher': true,
      'file': true,
      'http:': true,
      'https:': true,
      'ftp:': true,
      'gopher:': true,
      'file:': true
    },
    querystring = require('querystring');

function urlParse(url, parseQueryString, slashesDenoteHost) {
  if (url && util.isObject(url) && url instanceof Url) return url;

  var u = new Url;
  u.parse(url, parseQueryString, slashesDenoteHost);
  return u;
}

Url.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {
  if (!util.isString(url)) {
    throw new TypeError("Parameter 'url' must be a string, not " + typeof url);
  }

  // Copy chrome, IE, opera backslash-handling behavior.
  // Back slashes before the query string get converted to forward slashes
  // See: https://code.google.com/p/chromium/issues/detail?id=25916
  var queryIndex = url.indexOf('?'),
      splitter =
          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',
      uSplit = url.split(splitter),
      slashRegex = /\\/g;
  uSplit[0] = uSplit[0].replace(slashRegex, '/');
  url = uSplit.join(splitter);

  var rest = url;

  // trim before proceeding.
  // This is to support parse stuff like "  http://foo.com  \n"
  rest = rest.trim();

  if (!slashesDenoteHost && url.split('#').length === 1) {
    // Try fast path regexp
    var simplePath = simplePathPattern.exec(rest);
    if (simplePath) {
      this.path = rest;
      this.href = rest;
      this.pathname = simplePath[1];
      if (simplePath[2]) {
        this.search = simplePath[2];
        if (parseQueryString) {
          this.query = querystring.parse(this.search.substr(1));
        } else {
          this.query = this.search.substr(1);
        }
      } else if (parseQueryString) {
        this.search = '';
        this.query = {};
      }
      return this;
    }
  }

  var proto = protocolPattern.exec(rest);
  if (proto) {
    proto = proto[0];
    var lowerProto = proto.toLowerCase();
    this.protocol = lowerProto;
    rest = rest.substr(proto.length);
  }

  // figure out if it's got a host
  // user@server is *always* interpreted as a hostname, and url
  // resolution will treat //foo/bar as host=foo,path=bar because that's
  // how the browser resolves relative URLs.
  if (slashesDenoteHost || proto || rest.match(/^\/\/[^@\/]+@[^@\/]+/)) {
    var slashes = rest.substr(0, 2) === '//';
    if (slashes && !(proto && hostlessProtocol[proto])) {
      rest = rest.substr(2);
      this.slashes = true;
    }
  }

  if (!hostlessProtocol[proto] &&
      (slashes || (proto && !slashedProtocol[proto]))) {

    // there's a hostname.
    // the first instance of /, ?, ;, or # ends the host.
    //
    // If there is an @ in the hostname, then non-host chars *are* allowed
    // to the left of the last @ sign, unless some host-ending character
    // comes *before* the @-sign.
    // URLs are obnoxious.
    //
    // ex:
    // http://a@b@c/ => user:a@b host:c
    // http://a@b?@c => user:a host:c path:/?@c

    // v0.12 TODO(isaacs): This is not quite how Chrome does things.
    // Review our test case against browsers more comprehensively.

    // find the first instance of any hostEndingChars
    var hostEnd = -1;
    for (var i = 0; i < hostEndingChars.length; i++) {
      var hec = rest.indexOf(hostEndingChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }

    // at this point, either we have an explicit point where the
    // auth portion cannot go past, or the last @ char is the decider.
    var auth, atSign;
    if (hostEnd === -1) {
      // atSign can be anywhere.
      atSign = rest.lastIndexOf('@');
    } else {
      // atSign must be in auth portion.
      // http://a@b/c@d => host:b auth:a path:/c@d
      atSign = rest.lastIndexOf('@', hostEnd);
    }

    // Now we have a portion which is definitely the auth.
    // Pull that off.
    if (atSign !== -1) {
      auth = rest.slice(0, atSign);
      rest = rest.slice(atSign + 1);
      this.auth = decodeURIComponent(auth);
    }

    // the host is the remaining to the left of the first non-host char
    hostEnd = -1;
    for (var i = 0; i < nonHostChars.length; i++) {
      var hec = rest.indexOf(nonHostChars[i]);
      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))
        hostEnd = hec;
    }
    // if we still have not hit it, then the entire thing is a host.
    if (hostEnd === -1)
      hostEnd = rest.length;

    this.host = rest.slice(0, hostEnd);
    rest = rest.slice(hostEnd);

    // pull out port.
    this.parseHost();

    // we've indicated that there is a hostname,
    // so even if it's empty, it has to be present.
    this.hostname = this.hostname || '';

    // if hostname begins with [ and ends with ]
    // assume that it's an IPv6 address.
    var ipv6Hostname = this.hostname[0] === '[' &&
        this.hostname[this.hostname.length - 1] === ']';

    // validate a little.
    if (!ipv6Hostname) {
      var hostparts = this.hostname.split(/\./);
      for (var i = 0, l = hostparts.length; i < l; i++) {
        var part = hostparts[i];
        if (!part) continue;
        if (!part.match(hostnamePartPattern)) {
          var newpart = '';
          for (var j = 0, k = part.length; j < k; j++) {
            if (part.charCodeAt(j) > 127) {
              // we replace non-ASCII char with a temporary placeholder
              // we need this to make sure size of hostname is not
              // broken by replacing non-ASCII by nothing
              newpart += 'x';
            } else {
              newpart += part[j];
            }
          }
          // we test again with ASCII char only
          if (!newpart.match(hostnamePartPattern)) {
            var validParts = hostparts.slice(0, i);
            var notHost = hostparts.slice(i + 1);
            var bit = part.match(hostnamePartStart);
            if (bit) {
              validParts.push(bit[1]);
              notHost.unshift(bit[2]);
            }
            if (notHost.length) {
              rest = '/' + notHost.join('.') + rest;
            }
            this.hostname = validParts.join('.');
            break;
          }
        }
      }
    }

    if (this.hostname.length > hostnameMaxLen) {
      this.hostname = '';
    } else {
      // hostnames are always lower case.
      this.hostname = this.hostname.toLowerCase();
    }

    if (!ipv6Hostname) {
      // IDNA Support: Returns a punycoded representation of "domain".
      // It only converts parts of the domain name that
      // have non-ASCII characters, i.e. it doesn't matter if
      // you call it with a domain that already is ASCII-only.
      this.hostname = punycode.toASCII(this.hostname);
    }

    var p = this.port ? ':' + this.port : '';
    var h = this.hostname || '';
    this.host = h + p;
    this.href += this.host;

    // strip [ and ] from the hostname
    // the host field still retains them, though
    if (ipv6Hostname) {
      this.hostname = this.hostname.substr(1, this.hostname.length - 2);
      if (rest[0] !== '/') {
        rest = '/' + rest;
      }
    }
  }

  // now rest is set to the post-host stuff.
  // chop off any delim chars.
  if (!unsafeProtocol[lowerProto]) {

    // First, make 100% sure that any "autoEscape" chars get
    // escaped, even if encodeURIComponent doesn't think they
    // need to be.
    for (var i = 0, l = autoEscape.length; i < l; i++) {
      var ae = autoEscape[i];
      if (rest.indexOf(ae) === -1)
        continue;
      var esc = encodeURIComponent(ae);
      if (esc === ae) {
        esc = escape(ae);
      }
      rest = rest.split(ae).join(esc);
    }
  }


  // chop off from the tail first.
  var hash = rest.indexOf('#');
  if (hash !== -1) {
    // got a fragment string.
    this.hash = rest.substr(hash);
    rest = rest.slice(0, hash);
  }
  var qm = rest.indexOf('?');
  if (qm !== -1) {
    this.search = rest.substr(qm);
    this.query = rest.substr(qm + 1);
    if (parseQueryString) {
      this.query = querystring.parse(this.query);
    }
    rest = rest.slice(0, qm);
  } else if (parseQueryString) {
    // no query string, but parseQueryString still requested
    this.search = '';
    this.query = {};
  }
  if (rest) this.pathname = rest;
  if (slashedProtocol[lowerProto] &&
      this.hostname && !this.pathname) {
    this.pathname = '/';
  }

  //to support http.request
  if (this.pathname || this.search) {
    var p = this.pathname || '';
    var s = this.search || '';
    this.path = p + s;
  }

  // finally, reconstruct the href based on what has been validated.
  this.href = this.format();
  return this;
};

// format a parsed object into a url string
function urlFormat(obj) {
  // ensure it's an object, and not a string url.
  // If it's an obj, this is a no-op.
  // this way, you can call url_format() on strings
  // to clean up potentially wonky urls.
  if (util.isString(obj)) obj = urlParse(obj);
  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);
  return obj.format();
}

Url.prototype.format = function() {
  var auth = this.auth || '';
  if (auth) {
    auth = encodeURIComponent(auth);
    auth = auth.replace(/%3A/i, ':');
    auth += '@';
  }

  var protocol = this.protocol || '',
      pathname = this.pathname || '',
      hash = this.hash || '',
      host = false,
      query = '';

  if (this.host) {
    host = auth + this.host;
  } else if (this.hostname) {
    host = auth + (this.hostname.indexOf(':') === -1 ?
        this.hostname :
        '[' + this.hostname + ']');
    if (this.port) {
      host += ':' + this.port;
    }
  }

  if (this.query &&
      util.isObject(this.query) &&
      Object.keys(this.query).length) {
    query = querystring.stringify(this.query);
  }

  var search = this.search || (query && ('?' + query)) || '';

  if (protocol && protocol.substr(-1) !== ':') protocol += ':';

  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.
  // unless they had them to begin with.
  if (this.slashes ||
      (!protocol || slashedProtocol[protocol]) && host !== false) {
    host = '//' + (host || '');
    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;
  } else if (!host) {
    host = '';
  }

  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;
  if (search && search.charAt(0) !== '?') search = '?' + search;

  pathname = pathname.replace(/[?#]/g, function(match) {
    return encodeURIComponent(match);
  });
  search = search.replace('#', '%23');

  return protocol + host + pathname + search + hash;
};

function urlResolve(source, relative) {
  return urlParse(source, false, true).resolve(relative);
}

Url.prototype.resolve = function(relative) {
  return this.resolveObject(urlParse(relative, false, true)).format();
};

function urlResolveObject(source, relative) {
  if (!source) return relative;
  return urlParse(source, false, true).resolveObject(relative);
}

Url.prototype.resolveObject = function(relative) {
  if (util.isString(relative)) {
    var rel = new Url();
    rel.parse(relative, false, true);
    relative = rel;
  }

  var result = new Url();
  var tkeys = Object.keys(this);
  for (var tk = 0; tk < tkeys.length; tk++) {
    var tkey = tkeys[tk];
    result[tkey] = this[tkey];
  }

  // hash is always overridden, no matter what.
  // even href="" will remove it.
  result.hash = relative.hash;

  // if the relative url is empty, then there's nothing left to do here.
  if (relative.href === '') {
    result.href = result.format();
    return result;
  }

  // hrefs like //foo/bar always cut to the protocol.
  if (relative.slashes && !relative.protocol) {
    // take everything except the protocol from relative
    var rkeys = Object.keys(relative);
    for (var rk = 0; rk < rkeys.length; rk++) {
      var rkey = rkeys[rk];
      if (rkey !== 'protocol')
        result[rkey] = relative[rkey];
    }

    //urlParse appends trailing / to urls like http://www.example.com
    if (slashedProtocol[result.protocol] &&
        result.hostname && !result.pathname) {
      result.path = result.pathname = '/';
    }

    result.href = result.format();
    return result;
  }

  if (relative.protocol && relative.protocol !== result.protocol) {
    // if it's a known url protocol, then changing
    // the protocol does weird things
    // first, if it's not file:, then we MUST have a host,
    // and if there was a path
    // to begin with, then we MUST have a path.
    // if it is file:, then the host is dropped,
    // because that's known to be hostless.
    // anything else is assumed to be absolute.
    if (!slashedProtocol[relative.protocol]) {
      var keys = Object.keys(relative);
      for (var v = 0; v < keys.length; v++) {
        var k = keys[v];
        result[k] = relative[k];
      }
      result.href = result.format();
      return result;
    }

    result.protocol = relative.protocol;
    if (!relative.host && !hostlessProtocol[relative.protocol]) {
      var relPath = (relative.pathname || '').split('/');
      while (relPath.length && !(relative.host = relPath.shift()));
      if (!relative.host) relative.host = '';
      if (!relative.hostname) relative.hostname = '';
      if (relPath[0] !== '') relPath.unshift('');
      if (relPath.length < 2) relPath.unshift('');
      result.pathname = relPath.join('/');
    } else {
      result.pathname = relative.pathname;
    }
    result.search = relative.search;
    result.query = relative.query;
    result.host = relative.host || '';
    result.auth = relative.auth;
    result.hostname = relative.hostname || relative.host;
    result.port = relative.port;
    // to support http.request
    if (result.pathname || result.search) {
      var p = result.pathname || '';
      var s = result.search || '';
      result.path = p + s;
    }
    result.slashes = result.slashes || relative.slashes;
    result.href = result.format();
    return result;
  }

  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),
      isRelAbs = (
          relative.host ||
          relative.pathname && relative.pathname.charAt(0) === '/'
      ),
      mustEndAbs = (isRelAbs || isSourceAbs ||
                    (result.host && relative.pathname)),
      removeAllDots = mustEndAbs,
      srcPath = result.pathname && result.pathname.split('/') || [],
      relPath = relative.pathname && relative.pathname.split('/') || [],
      psychotic = result.protocol && !slashedProtocol[result.protocol];

  // if the url is a non-slashed url, then relative
  // links like ../.. should be able
  // to crawl up to the hostname, as well.  This is strange.
  // result.protocol has already been set by now.
  // Later on, put the first path part into the host field.
  if (psychotic) {
    result.hostname = '';
    result.port = null;
    if (result.host) {
      if (srcPath[0] === '') srcPath[0] = result.host;
      else srcPath.unshift(result.host);
    }
    result.host = '';
    if (relative.protocol) {
      relative.hostname = null;
      relative.port = null;
      if (relative.host) {
        if (relPath[0] === '') relPath[0] = relative.host;
        else relPath.unshift(relative.host);
      }
      relative.host = null;
    }
    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');
  }

  if (isRelAbs) {
    // it's absolute.
    result.host = (relative.host || relative.host === '') ?
                  relative.host : result.host;
    result.hostname = (relative.hostname || relative.hostname === '') ?
                      relative.hostname : result.hostname;
    result.search = relative.search;
    result.query = relative.query;
    srcPath = relPath;
    // fall through to the dot-handling below.
  } else if (relPath.length) {
    // it's relative
    // throw away the existing file, and take the new path instead.
    if (!srcPath) srcPath = [];
    srcPath.pop();
    srcPath = srcPath.concat(relPath);
    result.search = relative.search;
    result.query = relative.query;
  } else if (!util.isNullOrUndefined(relative.search)) {
    // just pull out the search.
    // like href='?foo'.
    // Put this after the other two cases because it simplifies the booleans
    if (psychotic) {
      result.hostname = result.host = srcPath.shift();
      //occationaly the auth can get stuck only in host
      //this especially happens in cases like
      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
      var authInHost = result.host && result.host.indexOf('@') > 0 ?
                       result.host.split('@') : false;
      if (authInHost) {
        result.auth = authInHost.shift();
        result.host = result.hostname = authInHost.shift();
      }
    }
    result.search = relative.search;
    result.query = relative.query;
    //to support http.request
    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
      result.path = (result.pathname ? result.pathname : '') +
                    (result.search ? result.search : '');
    }
    result.href = result.format();
    return result;
  }

  if (!srcPath.length) {
    // no path at all.  easy.
    // we've already handled the other stuff above.
    result.pathname = null;
    //to support http.request
    if (result.search) {
      result.path = '/' + result.search;
    } else {
      result.path = null;
    }
    result.href = result.format();
    return result;
  }

  // if a url ENDs in . or .., then it must get a trailing slash.
  // however, if it ends in anything else non-slashy,
  // then it must NOT get a trailing slash.
  var last = srcPath.slice(-1)[0];
  var hasTrailingSlash = (
      (result.host || relative.host || srcPath.length > 1) &&
      (last === '.' || last === '..') || last === '');

  // strip single dots, resolve double dots to parent dir
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = srcPath.length; i >= 0; i--) {
    last = srcPath[i];
    if (last === '.') {
      srcPath.splice(i, 1);
    } else if (last === '..') {
      srcPath.splice(i, 1);
      up++;
    } else if (up) {
      srcPath.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (!mustEndAbs && !removeAllDots) {
    for (; up--; up) {
      srcPath.unshift('..');
    }
  }

  if (mustEndAbs && srcPath[0] !== '' &&
      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {
    srcPath.unshift('');
  }

  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {
    srcPath.push('');
  }

  var isAbsolute = srcPath[0] === '' ||
      (srcPath[0] && srcPath[0].charAt(0) === '/');

  // put the host back
  if (psychotic) {
    result.hostname = result.host = isAbsolute ? '' :
                                    srcPath.length ? srcPath.shift() : '';
    //occationaly the auth can get stuck only in host
    //this especially happens in cases like
    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')
    var authInHost = result.host && result.host.indexOf('@') > 0 ?
                     result.host.split('@') : false;
    if (authInHost) {
      result.auth = authInHost.shift();
      result.host = result.hostname = authInHost.shift();
    }
  }

  mustEndAbs = mustEndAbs || (result.host && srcPath.length);

  if (mustEndAbs && !isAbsolute) {
    srcPath.unshift('');
  }

  if (!srcPath.length) {
    result.pathname = null;
    result.path = null;
  } else {
    result.pathname = srcPath.join('/');
  }

  //to support request.http
  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {
    result.path = (result.pathname ? result.pathname : '') +
                  (result.search ? result.search : '');
  }
  result.auth = relative.auth || result.auth;
  result.slashes = result.slashes || relative.slashes;
  result.href = result.format();
  return result;
};

Url.prototype.parseHost = function() {
  var host = this.host;
  var port = portPattern.exec(host);
  if (port) {
    port = port[0];
    if (port !== ':') {
      this.port = port.substr(1);
    }
    host = host.substr(0, host.length - port.length);
  }
  if (host) this.hostname = host;
};

},{"./util":105,"punycode":84,"querystring":87}],105:[function(require,module,exports){
'use strict';

module.exports = {
  isString: function(arg) {
    return typeof(arg) === 'string';
  },
  isObject: function(arg) {
    return typeof(arg) === 'object' && arg !== null;
  },
  isNull: function(arg) {
    return arg === null;
  },
  isNullOrUndefined: function(arg) {
    return arg == null;
  }
};

},{}],106:[function(require,module,exports){
(function (global){

/**
 * Module exports.
 */

module.exports = deprecate;

/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */

function deprecate (fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}

/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */

function config (name) {
  // accessing global.localStorage can trigger a DOMException in sandboxed iframes
  try {
    if (!global.localStorage) return false;
  } catch (_) {
    return false;
  }
  var val = global.localStorage[name];
  if (null == val) return false;
  return String(val).toLowerCase() === 'true';
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],107:[function(require,module,exports){
module.exports = extend

var hasOwnProperty = Object.prototype.hasOwnProperty;

function extend() {
    var target = {}

    for (var i = 0; i < arguments.length; i++) {
        var source = arguments[i]

        for (var key in source) {
            if (hasOwnProperty.call(source, key)) {
                target[key] = source[key]
            }
        }
    }

    return target
}

},{}],108:[function(require,module,exports){
var _ = require('./lodash');
var remoteEvents = [];
var localEvents = [];
var initiated = false;
var shared = false;
var cursor = null;
var widget;
var entity = '';
var emit;
var path = '';
var eventTimestamp = 0;
var updateInterval = null;
var updateIntervalValue = 5000;
var updateStateInterval = null;
var checkEvery = _.debounce(unshareBrowser, 30000);
var cursorX = 0, cursorY = 0;
var requestAF;

function init(options){
	if(initiated) return console.info('Cobrowsing already initiated');

	addEvent(document, 'keyup', eventsHandler);
	addEvent(document, 'keydown', eventsHandler);
	addEvent(document, 'keypress', eventsHandler);
	addEvent(document, 'mouseup', eventsHandler);
	addEvent(document, 'click', eventsHandler);
	addEvent(document, 'change', eventsHandler);

	widget = (typeof options.widget === 'string') ? document.querySelector(options.widget) : options.widget;
	entity = options.entity;
	emit = options.emit;
	path = options.path;

	initiated = true;
	updateInterval = setInterval(emitEvents, updateIntervalValue);

	console.log('cobrowsing module initiated with parameters: ', options);
	emit('cobrowsing/init');
}

function shareBrowser(){
    if(shared) return console.info('Browser already shared');
    addEvent(document, 'scroll', eventsHandler);
    addEvent(document, 'select', eventsHandler);
    addEvent(document, 'mousemove', eventsHandler);

    // addEvent(document, 'mouseover', eventsHandler);
    // addEvent(document, 'mouseout', eventsHandler);
    
    createRemoteCursor();
    shared = true;
    updateStateInterval = setInterval(updateState, updateIntervalValue);
    clearInterval(updateInterval);

    console.log('browser shared');
    emit('cobrowsing/shared', { entity: entity });
}

function unshareBrowser(){
	if(!shared) return console.info('Browser already unshared');

    removeEvent(document, 'scroll', eventsHandler);
    removeEvent(document, 'select', eventsHandler);
    removeEvent(document, 'mousemove', eventsHandler);

    // removeEvent(document, 'mouseover', eventsHandler);
    // removeEvent(document, 'mouseout', eventsHandler);
    
    removeRemoteCursor();
    shared = false;
    updateInterval = setInterval(emitEvents, updateIntervalValue);
    clearInterval(updateStateInterval);

	emit('cobrowsing/unshared', { entity: entity });
    console.log('browser unshared');
}

function unshareAll(){
	// removeEvent(document, 'keyup', eventsHandler);
	// removeEvent(document, 'keydown', eventsHandler);
	// removeEvent(document, 'keypress', eventsHandler);
	// removeEvent(document, 'mouseup', eventsHandler);
	// removeEvent(document, 'click', eventsHandler);
	// removeEvent(document, 'change', eventsHandler);
	clearInterval(updateInterval);
}

function createRemoteCursor(){
	var body = document.body;
	if(!cursor) {
		cursor= document.createElement('img');
		cursor.className = 'wc-rmt-ptr';
		cursor.setAttribute('src', path+'images/pointer.png');
		cursor.style.position = 'absolute';
		if(body.firstChild) {
			body.insertBefore(cursor, body.firstChild);
		} else {
			body.appendChild(cursor);
	
		}
		redrawCursor();
	}
}

function redrawCursor(){
	cursor.style.left = cursorX;
	cursor.style.top = cursorY;
	requestAF = window.requestAnimationFrame(redrawCursor);
}

function removeRemoteCursor(){
	if(!cursor) return;
	cancelAnimationFrame(requestAF);
	cursor.parentNode.removeChild(cursor);
	cursor = null;
}

//from http://stackoverflow.com/questions/2897155/get-cursor-position-in-characters-within-a-text-input-field
function getCaretPosition (oField) {
  // Initialize
	var iCaretPos = 0;

  // IE Support
    if (document.selection) {

    // Set focus on the element
        oField.focus ();

    // To get cursor position, get empty selection range
        var oSel = document.selection.createRange ();

    // Move selection start to 0 position
        oSel.moveStart ('character', -oField.value.length);

    // The caret position is selection length
        iCaretPos = oSel.text.length;
    }
    else if(oField.type && (oField.type === 'email' || oField.type === 'number')){
        iCaretPos = null;
    }
  // Firefox support
    else if (oField.selectionStart || oField.selectionStart == '0'){
        iCaretPos = oField.selectionStart;
    }
    else {
        iCaretPos = null;
    }
	// Return results
	return (iCaretPos);
}

function emitEvents(){
	emit('cobrowsing/event', { entity: entity, events: localEvents });
	localEvents = [];
}

function updateState(){
	localEvents.push({ shared: true, entity: entity });
}

function eventsHandler(evt){
	var e = evt || window.event,
		etype = e.type,
		targ = e.target,
		nodeName = targ.nodeName,
		db = document.body,
		params = {},
		nodeIndex = null,
		nodes = document.getElementsByTagName(targ.nodeName),
		scrollTop = document.documentElement.scrollTop || document.body.scrollTop,
		scrollLeft = document.documentElement.scrollLeft || document.body.scrollLeft,
		i = 0;

	// if the target is text node, get parent node
	if(targ.nodeType === 3) targ = targ.parentNode;

	// return if the target node is the descendant of widget element
	if(entity === 'user' && isDescendant(widget, targ)) return;

	for(i=0; i < remoteEvents.length; i++){
		if(remoteEvents[i].event == etype){
			remoteEvents.splice(i, 1);
			return;
		}
	}

	// get the index of target node
	for(i=0; i<nodes.length; i++){
		if(nodes[i] == targ) nodeIndex = i;
	}

	// event type
	params.event = etype;
	// entity
	params.entity = entity;
	// target node
	params.tn = nodeName;
	// index of the target node
	params.tni = nodeIndex;
	// layout width of the document.body
	params.w = db.offsetWidth;
	// layout height of the document.body
	params.h = db.offsetHeight;
	params.sx = scrollLeft;
	params.sy = scrollTop;

	if(etype === 'mousemove' || etype === 'mouseover' || etype === 'mouseout') {
		var x = e.pageX || e.clientX + scrollTop;
		var y = e.pageY || e.clientY + scrollLeft;

		// cursor horisontal postion
		params.x = x;
		// cursor vertical position
		params.y = y;

		// for(i=0; i < localEvents.length; i++) {
		// 	if(localEvents[i].indexOf(etype) != -1) {
		// 		localEvents.splice(i, 1);
		// 		break;
		// 	}
		// }
	} else if(etype === 'scroll') {
		// for(i=0; i < localEvents.length; i++) {
		// 	if(localEvents[i].indexOf('scroll') != -1) {
		// 		localEvents.splice(i, 1);
		// 		break;
		// 	}
		// }
		
		// var st = window.pageYOffset || document.documentElement.scrollTop;
		// var sl = window.pageXOffset || document.documentElement.scrollLeft;

	} else if(etype == 'keyup' || etype == 'keydown' || etype == 'keypress') {
		var code = e.charCode || e.keyCode || e.which;
		var c = getCaretPosition(targ);

		if(nodeName === 'INPUT' && targ.type === 'password') return;

		if(etype == 'keyup') {
			if((c === null) || (code == 86 && (e.metaKey || e.ctrlKey))) {
				var tvalue = targ.value;
				if(tvalue) {
					tvalue = tvalue.replace(/\n/g, '<br>');
					// the value attribute of the target node, if exists
					params.value = tvalue;
				}
			} else {
				return;
			}
		} else if(etype == 'keydown') {
			if(c !== null && (code == 8 || code == 46 || code == 190)) {
				if(!targ.value) return;
				// caret position
				params.pos = c;
				// char code
				params.code = code;
			} else {
				return;
			}
		} else if(etype === 'keypress') {
			if(c !== null && code != 8 && code != 46) {
				// caret position
				params.pos = c;
				// char code
				params.code = code;
			} else {
				return;
			}
		}
	} else if(etype === 'change') {
		if(nodeName === 'INPUT' && targ.type === 'password') return;
		params.value = targ.value;

	} else if(etype == 'mouseup' || etype == 'select'){
		var selection = window.getSelection() || document.selection.createRange().text,
			so = selection.anchorOffset,
			eo = selection.focusOffset,
			anchorParentNodeIndex = 0,
			anchorParentNodeName = '',
			anchorNodeIndex = 0,
			anchorParent = '',
			focusParentNodeIndex = 0,
			focusParentNodeName = '',
			focusNodeIndex = 0,
			focusParent = '',
			reverse = false;

		if(selection.anchorNode !== null) {
			anchorParent = selection.anchorNode.parentNode;

			for(i=0; i<anchorParent.childNodes.length;i++) {
				if(anchorParent.childNodes[i] == selection.anchorNode) anchorNodeIndex = i;
			}
			
			anchorParentNodeName = anchorParent.nodeName.toLowerCase();
			nodes = document.getElementsByTagName(anchorParentNodeName);
			for(i=0;i<nodes.length;i++) {
				if(nodes[i] === anchorParent) anchorParentNodeIndex = i;
			}
			
			focusParent = selection.focusNode.parentNode;
			for(i=0; i<focusParent.childNodes.length;i++) {
				if(focusParent.childNodes[i] == selection.focusNode) focusNodeIndex = i;
			}
			
			focusParentNodeName = focusParent.nodeName.toLowerCase();
			nodes = document.getElementsByTagName(focusParentNodeName);
			for(i=0;i<nodes.length;i++) {
				if(nodes[i] === focusParent) focusParentNodeIndex = i;
			}
			

			if(anchorParentNodeName === focusParentNodeName &&
				anchorParentNodeIndex === focusParentNodeIndex &&
					anchorNodeIndex === focusNodeIndex &&
						so > eo)
							reverse = true;

			// name of the target node where selection started
			params.sn = anchorParentNodeName;
			params.sni = anchorParentNodeIndex;
			params.schi = anchorNodeIndex;
			// name of the target node where selection ended
			params.en = focusParentNodeName;
			params.eni = focusParentNodeIndex;
			params.echi = focusNodeIndex;
			params.so = reverse ? eo : so;
			params.eo = reverse ? so : eo;
		}
	} else if(etype == 'click') {
		params.scx = e.screenX;
		params.scy = e.screenY;
	}

	// console.log('eventsHandler: ', params);
	localEvents.push(params);
}

function updateEvents(result){
	var mainElement = document.documentElement,
		target,
		evt = {};

	if(result.events && result.events.length) {

		// check for scrollTop/Left. 
		// IE and Firefox always return 0 from document.body.scrollTop/Left, 
		// while other browsers return 0 from document.documentElement
		mainElement = ('ActiveXObject' in window || typeof InstallTrigger !== 'undefined') ? document.documentElement : document.body;

		for(var i=0; i<result.events.length; i++) {
			evt = result.events[i];

			// if(evt.shared !== undefined) console.log('shared events', eventTimestamp, evt, result.init);
			if(evt.timestamp < eventTimestamp) continue;
			if(evt.entity === entity) continue;
					
			if(evt.shared !== undefined){
				if(evt.shared){
					checkEvery();
					shareBrowser();
				} else {
					if(!result.historyEvents) unshareBrowser();
				}
			}
			if(evt.url) {
				if(!result.historyEvents) {
					var url = evt.url;
					var docUrl = document.URL;
					if(docUrl.indexOf('chatSessionId') !== -1) {
						docUrl = docUrl.substr(0, docUrl.indexOf('chatSessionId')-1);
					}
					if(url != docUrl) changeURL(url);
				}
			}
			if(evt.w){
				if(evt.entity === 'user') {
					var body = document.body;
					var innerW = body.offsetWidth;
					if(innerW !== evt.w) {
						document.body.style.width = evt.w + 'px';
					}
				}
			}
			if(evt.event === 'mousemove') {
				if(cursor) {
					cursorX = evt.x + 'px';
					cursorY = evt.y + 'px';
					// cursor.style.left = evt.x + 'px';
					// cursor.style.top = evt.y + 'px';
				}
			} else if(evt.event === 'scroll') {
				if(evt.tn !== undefined) {
					if(evt.tn === '#document') target = mainElement;
					else target = document.getElementsByTagName(evt.tn)[evt.tni];
					if(target){
						target.scrollTop = evt.sy;
						target.scrollLeft = evt.sx;
					}
				}
			} else if(evt.event === 'mouseup' || evt.event === 'select'){
				if(evt.sn) {
					var startNode = document.getElementsByTagName(evt.sn)[evt.sni];
					var endNode = document.getElementsByTagName(evt.en)[evt.eni];
					if(document.createRange && startNode !== undefined && endNode !== undefined) {
						var rng = document.createRange();
						rng.setStart(startNode.childNodes[evt.schi], evt.so);
						rng.setEnd(endNode.childNodes[evt.echi], evt.eo);
						var sel = window.getSelection();
						sel.removeAllRanges();
						sel.addRange(rng);
					}
				}
			} else if(evt.event === 'keyup' || evt.event === 'keydown' || evt.event === 'keypress') {
				if(evt.tn !== undefined && evt.tni !== undefined) {
					target = document.getElementsByTagName(evt.tn)[evt.tni];
					if(target){
						var output;
						var a = target.value;
						if(evt.code == 8) {
							if(evt.pos == a.length-1) output = a.substr(0, evt.pos-1);
							else if(evt.pos === 0) return;
							else output = a.substr(0, evt.pos-1) + a.substr(evt.pos);
							target.value = output;
						} else if(evt.code == 46) {
							output = a.substr(0, evt.pos) + a.substr(evt.pos+1);
							target.value = output;
						} else if(evt.code == 190) {
							output = a.substr(0, evt.pos) + '.' + a.substr(evt.pos);
							target.value = output;
						} else if(evt.value !== undefined) {
							var tvalue = evt.value;
							tvalue = tvalue.replace(/<br>/g, '\n');
							target.value = tvalue;
						} else {
							var c = String.fromCharCode(evt.code);
							if(a) output = a.substr(0, evt.pos) + c + a.substr(evt.pos);
							else output = c;
							target.value = output;
						}
					}
				}
			} else if(evt.event === 'change') {
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				target.value = evt.value;
			} else if(evt.event === 'click'){
				// var elements = document.getElementsByTagName(evt.tn.toLowerCase());
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				if(target) target.click();
				// elements[evt.tni].style.backgroundColor = 'yellow';
			} else {
				target = document.getElementsByTagName(evt.tn)[evt.tni];
				if(target) {
					var evtOpts = mouseEvent(evt.event, evt.x, evt.y, evt.x, evt.y);
					dispatchEvent(target, evtOpts);
				}
			}

			if(evt.event === 'click' || evt.event === 'scroll') remoteEvents.push(evt);
		}
	}

	if(result.timestamp) eventTimestamp = result.timestamp;
	if(shared) emitEvents();
}

function mouseEvent(type, sx, sy, cx, cy) {
	var evt;
	var e = {
		bubbles: true,
		cancelable: (type != "mousemove"),
		view: window,
		detail: 0,
		screenX: sx,
		screenY: sy,
		clientX: cx,
		clientY: cy,
		ctrlKey: false,
		altKey: false,
		shiftKey: false,
		metaKey: false,
		button: 0,
		relatedTarget: undefined
	};
	if (typeof( document.createEvent ) == "function") {
		evt = document.createEvent("MouseEvents");
		evt.initMouseEvent(
			type,
			e.bubbles,
			e.cancelable,
			e.view,
			e.detail,
			e.screenX,
			e.screenY,
			e.clientX,
			e.clientY,
			e.ctrlKey,
			e.altKey,
			e.shiftKey,
			e.metaKey,
			e.button,
			document.body.parentNode
		);
	} else if (document.createEventObject) {
		evt = document.createEventObject();
		for (var prop in e) {
			evt[prop] = e[prop];
		}
		evt.button = { 0:1, 1:4, 2:2 }[evt.button] || evt.button;
	}
	return evt;
}
function dispatchEvent (el, evt) {
	if (el.dispatchEvent) {
		el.dispatchEvent(evt);
	} else if (el.fireEvent) {
		el.fireEvent('on' + type, evt);
	}
	return evt;
}

function changeURL(url) {
    var docUrl = document.URL;
    if (docUrl !== url) {
		document.location.href = url;
    }
}

function isDescendant(parent, child) {
     var node = child.parentNode;
     while (node != null) {
         if (node == parent) return true;
         node = node.parentNode;
     }
     return false;
}

function addEvent(obj, evType, fn) {
  if (obj.addEventListener) obj.addEventListener(evType, fn, false);
  else if (obj.attachEvent) obj.attachEvent("on"+evType, fn);
}
function removeEvent(obj, evType, fn) {
  if (obj.removeEventListener) obj.removeEventListener(evType, fn, false);
  else if (obj.detachEvent) obj.detachEvent("on"+evType, fn);
}

module.exports = {
	init: init,
	share: shareBrowser,
	unshare: unshareBrowser,
	unshareAll: unshareAll,
	emitEvents: emitEvents,
	updateEvents: updateEvents
};
},{"./lodash":111}],109:[function(require,module,exports){

var EventEmitter = require('events').EventEmitter;
var storage = require('./storage');
var request = require('./request');
var url = require('url').parse(document.URL, true);
var _ = require('./lodash');
var inherits = require('inherits');

/**
 * Core module implements main internal functionality
 * 
 * @param  {Object} options Instantiation options that overrides module defaults
 * @return {Object}         Return public API
 */

var defaults = {
	// IPCC server IP address/domain name and port number.
	// ex.: "http://192.168.1.100:8880"
	server: '',
	// Absolute path to the webchat folder on the web server
	// where the website is located
	path: '/wchat/'
};

inherits(WchatAPI, EventEmitter);

module.exports = WchatAPI;

function WchatAPI(options){

	// extend default options
	// with provided object
	this.options = _.assign(defaults, options || {});

	this.options.serverUrl = this.options.server + '/ipcc/$$$';

	// Current session state object
	this.session = {
		sid: null,
		eventTimestamp: 0,
		msgTimestamp: 0,
		entity: undefined,
		chat: null
	};

	this.on('session/create', function (result){
		this.session.sid = result.sid;
		// this.updateUrl(url.href);
	});
	this.on('session/continue', function (result){
		// this.updateUrl(url.href);
	});

	this.on('Error', function (err, params){
		console.log('ERROR: ', err, params);
		if(err.code === 404) {
			this.sessionTimeout(params);
		}
		console.error(err, params);
	});

	return this;

}

/**
 * Module initiation
 * Emits module/start event if module started
 */
WchatAPI.prototype.initModule = function(){
	var entity = this.getState('entity', 'session'),
		sid = this.getState('sid');

	// A chatSessionId parameter in the url query 
	// indicates that the web page was opened by agent.
	// In that case agent should join the session.
	if(url.href.indexOf('chatSessionId') !== -1) {
		sid = getSidFromUrl(url.href);
		this.saveState('entity', 'agent', 'session');
		this.saveState('sid', sid);
		this.joinSession(sid);
	} else if(entity === 'agent' && sid) { // In case the cobrowsing session is active
		this.joinSession(sid, url.href);
	} else {

		// In case a session is already initiated 
		// and storage containes sid parameter
		if(sid) {
			this.updateEvents([{ entity: entity, url: url.href }], function (err, result){
				if(err) {
					return;
				}
				this.saveState('sid', sid);
				this.emit('session/continue', { entity: entity });
			}.bind(this));
		} else {
			this.saveState('entity', 'user', 'session');
			// Create new session
			this.createSession(url.href);
		}
	}
};

/**
 * Create session
 * Emits session/create event
 * if initiation is successful
 *
 * @param {String} url Current full URL
 */
WchatAPI.prototype.createSession = function(pageUrl){
	// console.log('createSession, '+this.options.serverUrl);
	request.post(this.options.serverUrl, {
		method: 'createSession',
		params: {
			url: (pageUrl || url.href)
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err);
			return;
		}

		this.saveState('sid', body.result.sid);
		this.emit('session/create', body.result);
	}.bind(this));
};

WchatAPI.prototype.joinSession = function(sid, url){
	// this.saveState('shared', true, 'session');
	this.emit('session/join', { sid: sid, url: url });
};

WchatAPI.prototype.updateEvents = function(events, cb){
	var params = {
		method: 'updateEvents',
		params: {
			sid: this.getState('sid'),
			timestamp: this.getState('eventTimestamp', 'cache'),
			events: events
		}
	};
	request.post(this.options.serverUrl, params, function (err, res, body){
		if(err) {
			this.emit('Error', err, params);
			return cb(err); // TODO: handle error
		}

		if(body.result.timestamp > this.getState('eventTimestamp', 'cache')) {
			this.saveState('eventTimestamp', body.result.timestamp, 'cache');
			if(cb) cb(null, body.result);
		} else {
			if(cb) cb(null, { events: [] });
		}
			

	}.bind(this));
};

/**
 * Get available dialog languages
 * If languages are not available, 
 * then either there are no available agents or
 * languages weren't set by administrator
 */
WchatAPI.prototype.getLanguages = function(cb){
	request.post(this.options.serverUrl, {
		method: 'getLanguages',
		params: {
			sid: this.getState('sid')
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err);
			return cb(err);
		}

		cb(null, body);
	}.bind(this));
};

/**
 * Request chat session
 * 
 * @param  {Object} params - user parameters (name, phone, etc.)
 */
WchatAPI.prototype.chatRequest = function(params, cb){
	params.sid = this.getState('sid');
	request.post(this.options.serverUrl, {
		method: 'chatRequest',
		params: params
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err);
			if(cb) cb(err);
			return;
		}

		this.emit('chat/start', body.result);
		if(cb) cb(null, body);
	}.bind(this));
};

/**
 * Get dialog messages
 * 
 * @param  {Number} timestamp Get messages since provided timestamp
 */
WchatAPI.prototype.getMessages = function(cb){
	request.post(this.options.serverUrl, {
		method: 'getMessages',
		params: {
			sid: this.getState('sid'),
			timestamp: this.getState('msgTimestamp')
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err);
			return cb(err);
		}

		if(body.result.messages) {
			this.emit('message/new', body.result);
		} else if(body.result.typing) {
			this.emit('message/typing', body.result);
		}
		this.saveState('msgTimestamp', body.result.timestamp);
		if(cb) cb(null, body.result);
	}.bind(this));
};

/**
 * Send message to the agent
 * 
 * @param  {String} text - message content in case of regular message 
 * or dataURL in case of file transfer
 * @param  {String} file - (Optional) file name
 */
WchatAPI.prototype.sendMessage = function(text, file){
	var params = {
		sid: this.getState('sid'),
		text: text
	};
	if(file) params.file = file;
	request.post(this.options.serverUrl, {
		method: 'setMessage',
		params: params
	}, function(err, res, body){
		if(err) {
			this.emit('Error', err);
			return cb(err);
		}
	});
};

/**
 * Close current chat session
 * 
 * @param  {Number} rating Service rating
 */
WchatAPI.prototype.closeChat = function(rating){
	var reqParams = {
		method: 'closeChat',
		params: {
			sid: this.getState('sid')
		}
	};
	if(rating) reqParams.params.rating = rating;
	request.post(this.options.serverUrl, reqParams, function (err, res, body){
		if(err) {
			this.emit('Error', err, reqParams);
			return;
		}
		this.saveState('chat', false);
		this.emit('chat/close', { rating: rating });
	}.bind(this));
};

/**
 * Send dialog either to the specified email address (if parameter "to" has passed)
 * or to call center administrator (if parameter "email" has passed)
 *
 * Either
 * @param  {String} to			Destination email address
 *
 * Or
 * @param  {String} email		Sender email address
 * @param  {String} uname		Sender name
 * @param  {String} filename	Attachment filename
 * @param  {String} filedata	Attachment file URL
 *
 * Both
 * @param  {String} text		Email body
 */
WchatAPI.prototype.sendEmail = function(params, cb){
	params.sid = this.getState('sid');
	request.post(this.options.serverUrl, {
		method: 'sendMail',
		params: params
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err);
			if(cb) cb(err);
			return;
		}

		this.emit('chat/send', params);
		if(cb) cb(null, body);
	}.bind(this));
};

/**
 * Disjoin current active session
 * Emits session/disjoin event
 * if request is fulfilled
 *
 * @param {String} sid ID of active session
 */
WchatAPI.prototype.disjoinSession = function(sid){
	request.post(this.options.serverUrl, {
		method: 'disjoinSession',
		params: {
			sid: sid
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err);
			return;
		}

		this.emit('session/disjoin');
	}.bind(this));
};

/**
 * Informs the server that the cobrowsing feature is turned on or off
 * @param  {Boolean} state Represents the state of cobrowsing feature
 * @param  {String} url   Url where the feature's state is changed
 * @return none
 */
WchatAPI.prototype.switchShareState = function(state, url){
	var method = state ? 'shareOpened' : 'shareClosed';
	request.post(this.options.serverUrl, {
		method: method,
		params: {
			sid: this.getState('sid'),
			url: url
		}
	}, function(err, res, body){
		if(err) {
			this.emit('Error', err);
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.setChatTimeout = function(timeout){
	return setTimeout(function (){
		this.emit('chat/timeout');
	}.bind(this), timeout*1000);
};

WchatAPI.prototype.userIsTyping = function(){
	// console.log('user is typing!');
	request.post(this.options.serverUrl, {
		method: 'typing',
		params: {
			sid: this.getState('sid')
		}
	}, function (err){
		if(err) {
			this.emit('Error', err);
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.updateUrl = function(url){
	request.post(this.options.serverUrl, {
		method: 'updateUrl',
		params: {
			sid: this.getState('sid'),
			url: url
		}
	}, function(err, res, body){
		if(err) {
			this.emit('Error', err);
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.linkFollowed = function(url){
	request.post(this.options.serverUrl, {
		method: 'linkFollowed',
		params: {
			sid: this.getState('sid'),
			url: url
		}
	}, function (err, res, body){
		if(err) {
			this.emit('Error', err);
			return;
		}
	}.bind(this));
};

WchatAPI.prototype.saveState = function(key, value, location){
	this.session[key] = value;
	if(location !== 'cache') {
		storage.set(key, value, location);
	}
	return value;
};

/**
 * Get saved property from localStorage or from session cache
 * @param  {String} key      - item key in storage memory
 * @param  {[type]} location - from where to retrieve item. 
 * Could be either "storage" - from localStorage, or "cache" - from session cache
 * @return {String|Object|Function}          - item value
 */
WchatAPI.prototype.getState = function(key, location){
	if(!location) {
		return (this.session[key] !== undefined && this.session[key] !== null) ? this.session[key] : storage.get(key);
	} else if(location === 'cache') {
		return this.session[key];
	} else {
		return storage.get(key, location);
	}
};

WchatAPI.prototype.removeState = function(key, location) {
	delete this.session[key];
	storage.remove(key);
};

WchatAPI.prototype.sessionTimeout = function(params){
	// console.log('sessionTimeout params: ', params);
	this.emit('session/timeout', params);
};

function getSidFromUrl(url){
	var substr = url.substring(url.indexOf('chatSessionId='));
	substr = substr.substring(substr.indexOf('=')+1);
	return substr;
}

},{"./lodash":111,"./request":113,"./storage":114,"events":7,"inherits":9,"url":104}],110:[function(require,module,exports){
(function (global){
/*
 * JsSIP v2.0.1
 * the Javascript SIP library
 * Copyright: 2012-2016 José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)
 * Homepage: http://jssip.net
 * License: MIT
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.JsSIP=e()}}(function(){var e;return function t(e,n,r){function s(i,o){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!o&&u)return u(i,!0);if(l)return l(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return s(n?n:t)},c,c.exports,t,e,n,r)}return n[i].exports}for(var l="function"==typeof require&&require,i=0;i<r.length;i++)s(r[i]);return s}({1:[function(e,t,n){var r=e("../package.json"),s={USER_AGENT:r.title+" "+r.version,SIP:"sip",SIPS:"sips",causes:{CONNECTION_ERROR:"Connection Error",REQUEST_TIMEOUT:"Request Timeout",SIP_FAILURE_CODE:"SIP Failure Code",INTERNAL_ERROR:"Internal Error",BUSY:"Busy",REJECTED:"Rejected",REDIRECTED:"Redirected",UNAVAILABLE:"Unavailable",NOT_FOUND:"Not Found",ADDRESS_INCOMPLETE:"Address Incomplete",INCOMPATIBLE_SDP:"Incompatible SDP",MISSING_SDP:"Missing SDP",AUTHENTICATION_ERROR:"Authentication Error",BYE:"Terminated",WEBRTC_ERROR:"WebRTC Error",CANCELED:"Canceled",NO_ANSWER:"No Answer",EXPIRES:"Expires",NO_ACK:"No ACK",DIALOG_ERROR:"Dialog Error",USER_DENIED_MEDIA_ACCESS:"User Denied Media Access",BAD_MEDIA_DESCRIPTION:"Bad Media Description",RTP_TIMEOUT:"RTP Timeout"},SIP_ERROR_CAUSES:{REDIRECTED:[300,301,302,305,380],BUSY:[486,600],REJECTED:[403,603],NOT_FOUND:[404,604],UNAVAILABLE:[480,410,408,430],ADDRESS_INCOMPLETE:[484,424],INCOMPATIBLE_SDP:[488,606],AUTHENTICATION_ERROR:[401,407]},ACK:"ACK",BYE:"BYE",CANCEL:"CANCEL",INFO:"INFO",INVITE:"INVITE",MESSAGE:"MESSAGE",NOTIFY:"NOTIFY",OPTIONS:"OPTIONS",REGISTER:"REGISTER",REFER:"REFER",UPDATE:"UPDATE",SUBSCRIBE:"SUBSCRIBE",REASON_PHRASE:{100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"JsSIP Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"},ALLOWED_METHODS:"INVITE,ACK,CANCEL,BYE,UPDATE,MESSAGE,OPTIONS,REFER,INFO",ACCEPTED_BODY_TYPES:"application/sdp, application/dtmf-relay",MAX_FORWARDS:69,SESSION_EXPIRES:90,MIN_SESSION_EXPIRES:60};t.exports=s},{"../package.json":47}],2:[function(e,t,n){function r(e,t,n,r){var o;return this.uac_pending_reply=!1,this.uas_pending_reply=!1,t.hasHeader("contact")?(r=t instanceof i.IncomingResponse?t.status_code<200?s.STATUS_EARLY:s.STATUS_CONFIRMED:r||s.STATUS_CONFIRMED,o=t.parseHeader("contact"),"UAS"===n?(this.id={call_id:t.call_id,local_tag:t.to_tag,remote_tag:t.from_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=r,this.remote_seqnum=t.cseq,this.local_uri=t.parseHeader("to").uri,this.remote_uri=t.parseHeader("from").uri,this.remote_target=o.uri,this.route_set=t.getHeaders("record-route")):"UAC"===n&&(this.id={call_id:t.call_id,local_tag:t.from_tag,remote_tag:t.to_tag,toString:function(){return this.call_id+this.local_tag+this.remote_tag}},this.state=r,this.local_seqnum=t.cseq,this.local_uri=t.parseHeader("from").uri,this.remote_uri=t.parseHeader("to").uri,this.remote_target=o.uri,this.route_set=t.getHeaders("record-route").reverse()),this.owner=e,e.ua.dialogs[this.id.toString()]=this,void l("new "+n+" dialog created with status "+(this.state===s.STATUS_EARLY?"EARLY":"CONFIRMED"))):{error:"unable to create a Dialog without Contact header field"}}t.exports=r;var s={STATUS_EARLY:1,STATUS_CONFIRMED:2};r.C=s;var l=e("debug")("JsSIP:Dialog"),i=e("./SIPMessage"),o=e("./Constants"),u=e("./Transactions"),a=e("./Dialog/RequestSender");r.prototype={update:function(e,t){this.state=s.STATUS_CONFIRMED,l("dialog "+this.id.toString()+"  changed to CONFIRMED state"),"UAC"===t&&(this.route_set=e.getHeaders("record-route").reverse())},terminate:function(){l("dialog "+this.id.toString()+" deleted"),delete this.owner.ua.dialogs[this.id.toString()]},createRequest:function(e,t,n){var r,s;return t=t&&t.slice()||[],this.local_seqnum||(this.local_seqnum=Math.floor(1e4*Math.random())),r=e===o.CANCEL||e===o.ACK?this.local_seqnum:this.local_seqnum+=1,s=new i.OutgoingRequest(e,this.remote_target,this.owner.ua,{cseq:r,call_id:this.id.call_id,from_uri:this.local_uri,from_tag:this.id.local_tag,to_uri:this.remote_uri,to_tag:this.id.remote_tag,route_set:this.route_set},t,n),s.dialog=this,s},checkInDialogRequest:function(e){var t=this;if(this.remote_seqnum){if(e.cseq<this.remote_seqnum)return e.method!==o.ACK&&e.reply(500),!1;e.cseq>this.remote_seqnum&&(this.remote_seqnum=e.cseq)}else this.remote_seqnum=e.cseq;if(e.method===o.INVITE||e.method===o.UPDATE&&e.body){if(this.uac_pending_reply===!0)e.reply(491);else{if(this.uas_pending_reply===!0){var n=(10*Math.random()|0)+1;return e.reply(500,null,["Retry-After:"+n]),!1}this.uas_pending_reply=!0,e.server_transaction.on("stateChanged",function r(){this.state!==u.C.STATUS_ACCEPTED&&this.state!==u.C.STATUS_COMPLETED&&this.state!==u.C.STATUS_TERMINATED||(e.server_transaction.removeListener("stateChanged",r),t.uas_pending_reply=!1)})}e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){this.state===u.C.STATUS_ACCEPTED&&(t.remote_target=e.parseHeader("contact").uri)})}else e.method===o.NOTIFY&&e.hasHeader("contact")&&e.server_transaction.on("stateChanged",function(){this.state===u.C.STATUS_COMPLETED&&(t.remote_target=e.parseHeader("contact").uri)});return!0},sendRequest:function(e,t,n){n=n||{};var r=n.extraHeaders&&n.extraHeaders.slice()||[],s=n.body||null,l=this.createRequest(t,r,s),i=new a(this,e,l);return i.send(),l},receiveRequest:function(e){this.checkInDialogRequest(e)&&this.owner.receiveRequest(e)}}},{"./Constants":1,"./Dialog/RequestSender":3,"./SIPMessage":18,"./Transactions":21,debug:33}],3:[function(e,t,n){function r(e,t,n){this.dialog=e,this.applicant=t,this.request=n,this.reattempt=!1,this.reattemptTimer=null}t.exports=r;var s=e("../Constants"),l=e("../Transactions"),i=e("../RTCSession"),o=e("../RequestSender");r.prototype={send:function(){var e=this,t=new o(this,this.dialog.owner.ua);t.send(),(this.request.method===s.INVITE||this.request.method===s.UPDATE&&this.request.body)&&t.clientTransaction.state!==l.C.STATUS_TERMINATED&&(this.dialog.uac_pending_reply=!0,t.clientTransaction.on("stateChanged",function n(){this.state!==l.C.STATUS_ACCEPTED&&this.state!==l.C.STATUS_COMPLETED&&this.state!==l.C.STATUS_TERMINATED||(t.clientTransaction.removeListener("stateChanged",n),e.dialog.uac_pending_reply=!1)}))},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(e){var t=this;408===e.status_code||481===e.status_code?this.applicant.onDialogError(e):e.method===s.INVITE&&491===e.status_code?this.reattempt?this.applicant.receiveResponse(e):(this.request.cseq.value=this.dialog.local_seqnum+=1,this.reattemptTimer=setTimeout(function(){t.applicant.owner.status!==i.C.STATUS_TERMINATED&&(t.reattempt=!0,t.request_sender.send())},1e3)):this.applicant.receiveResponse(e)}}},{"../Constants":1,"../RTCSession":11,"../RequestSender":17,"../Transactions":21}],4:[function(e,t,n){function r(e){this.credentials=e,this.cnonce=null,this.nc=0,this.ncHex="00000000",this.algorithm=null,this.realm=null,this.nonce=null,this.opaque=null,this.stale=null,this.qop=null,this.method=null,this.uri=null,this.ha1=null,this.response=null}t.exports=r;var s=e("debug")("JsSIP:DigestAuthentication"),l=e("debug")("JsSIP:ERROR:DigestAuthentication");l.log=console.warn.bind(console);var i=e("./Utils");r.prototype.get=function(e){switch(e){case"realm":return this.realm;case"ha1":return this.ha1;default:return void l('get() | cannot get "%s" parameter',e)}},r.prototype.authenticate=function(e,t){var n,r;if(this.algorithm=t.algorithm,this.realm=t.realm,this.nonce=t.nonce,this.opaque=t.opaque,this.stale=t.stale,this.algorithm){if("MD5"!==this.algorithm)return l('authenticate() | challenge with Digest algorithm different than "MD5", authentication aborted'),!1}else this.algorithm="MD5";if(!this.nonce)return l("authenticate() | challenge without Digest nonce, authentication aborted"),!1;if(!this.realm)return l("authenticate() | challenge without Digest realm, authentication aborted"),!1;if(!this.credentials.password){if(!this.credentials.ha1)return l("authenticate() | no plain SIP password nor ha1 provided, authentication aborted"),!1;if(this.credentials.realm!==this.realm)return l('authenticate() | no plain SIP password, and stored `realm` does not match the given `realm`, cannot authenticate [stored:"%s", given:"%s"]',this.credentials.realm,this.realm),!1}if(t.qop)if(t.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(t.qop.indexOf("auth-int")>-1))return l('authenticate() | challenge without Digest qop different than "auth" or "auth-int", authentication aborted'),!1;this.qop="auth-int"}else this.qop=null;return this.method=e.method,this.uri=e.ruri,this.cnonce=i.createRandomToken(12),this.nc+=1,r=Number(this.nc).toString(16),this.ncHex="00000000".substr(0,8-r.length)+r,4294967296===this.nc&&(this.nc=1,this.ncHex="00000001"),this.credentials.password?this.ha1=i.calculateMD5(this.credentials.username+":"+this.realm+":"+this.credentials.password):this.ha1=this.credentials.ha1,"auth"===this.qop?(n=i.calculateMD5(this.method+":"+this.uri),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+n)):"auth-int"===this.qop?(n=i.calculateMD5(this.method+":"+this.uri+":"+i.calculateMD5(this.body?this.body:"")),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+n)):null===this.qop&&(n=i.calculateMD5(this.method+":"+this.uri),this.response=i.calculateMD5(this.ha1+":"+this.nonce+":"+n)),s("authenticate() | response generated"),!0},r.prototype.toString=function(){var e=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return e.push("algorithm="+this.algorithm),e.push('username="'+this.credentials.username+'"'),e.push('realm="'+this.realm+'"'),e.push('nonce="'+this.nonce+'"'),e.push('uri="'+this.uri+'"'),e.push('response="'+this.response+'"'),this.opaque&&e.push('opaque="'+this.opaque+'"'),this.qop&&(e.push("qop="+this.qop),e.push('cnonce="'+this.cnonce+'"'),e.push("nc="+this.ncHex)),"Digest "+e.join(", ")}},{"./Utils":25,debug:33}],5:[function(e,t,n){var r={ConfigurationError:function(){var e=function(e,t){this.code=1,this.name="CONFIGURATION_ERROR",this.parameter=e,this.value=t,this.message=this.value?"Invalid value "+JSON.stringify(this.value)+' for parameter "'+this.parameter+'"':"Missing parameter: "+this.parameter};return e.prototype=new Error,e}(),InvalidStateError:function(){var e=function(e){this.code=2,this.name="INVALID_STATE_ERROR",this.status=e,this.message="Invalid status: "+e};return e.prototype=new Error,e}(),NotSupportedError:function(){var e=function(e){this.code=3,this.name="NOT_SUPPORTED_ERROR",this.message=e};return e.prototype=new Error,e}(),NotReadyError:function(){var e=function(e){this.code=4,this.name="NOT_READY_ERROR",this.message=e};return e.prototype=new Error,e}()};t.exports=r},{}],6:[function(e,t,n){t.exports=function(){function t(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var n={parse:function(n,r){function s(e){Cr>_r||(_r>Cr&&(Cr=_r,Sr=[]),Sr.push(e))}function l(){var e;return"\r\n"===n.substr(_r,2)?(e="\r\n",_r+=2):(e=null,0===vr&&s('"\\r\\n"')),e}function i(){var e;return/^[0-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[0-9]")),e}function o(){var e;return/^[a-zA-Z]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-zA-Z]")),e}function u(){var e;return/^[0-9a-fA-F]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[0-9a-fA-F]")),e}function a(){var e;return e=d(),null===e&&(e=p()),e}function c(){var e;return/^[\0-\xFF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\0-\\xFF]")),e}function h(){var e;return/^["]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s('["]')),e}function d(){var e;return 32===n.charCodeAt(_r)?(e=" ",_r++):(e=null,0===vr&&s('" "')),e}function p(){var e;return 9===n.charCodeAt(_r)?(e="	",_r++):(e=null,0===vr&&s('"\\t"')),e}function f(){var e;return/^[a-zA-Z0-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-zA-Z0-9]")),e}function m(){var e;return 59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","'))))))))))),e}function g(){var e;return e=f(),null===e&&(e=T()),e}function T(){var e;return 45===n.charCodeAt(_r)?(e="-",_r++):(e=null,0===vr&&s('"-"')),null===e&&(95===n.charCodeAt(_r)?(e="_",_r++):(e=null,0===vr&&s('"_"')),null===e&&(46===n.charCodeAt(_r)?(e=".",_r++):(e=null,0===vr&&s('"."')),null===e&&(33===n.charCodeAt(_r)?(e="!",_r++):(e=null,0===vr&&s('"!"')),null===e&&(126===n.charCodeAt(_r)?(e="~",_r++):(e=null,0===vr&&s('"~"')),null===e&&(42===n.charCodeAt(_r)?(e="*",_r++):(e=null,0===vr&&s('"*"')),null===e&&(39===n.charCodeAt(_r)?(e="'",_r++):(e=null,0===vr&&s('"\'"')),null===e&&(40===n.charCodeAt(_r)?(e="(",_r++):(e=null,0===vr&&s('"("')),null===e&&(41===n.charCodeAt(_r)?(e=")",_r++):(e=null,0===vr&&s('")"')))))))))),e}function _(){var e,t,r,l,i;return l=_r,i=_r,37===n.charCodeAt(_r)?(e="%",_r++):(e=null,0===vr&&s('"%"')),null!==e?(t=u(),null!==t?(r=u(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){return t.join("")}(l,e)),null===e&&(_r=l),e}function v(){var e,t,n,r,s,i;for(r=_r,s=_r,i=_r,e=[],t=a();null!==t;)e.push(t),t=a();if(null!==e?(t=l(),null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),e=null!==e?e:"",null!==e){if(n=a(),null!==n)for(t=[];null!==n;)t.push(n),n=a();else t=null;null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return null!==e&&(e=function(e){return" "}(r)),null===e&&(_r=r),e}function C(){var e;return e=v(),e=null!==e?e:""}function S(){var e,t,r,l,i;for(l=_r,i=_r,e=[],t=d(),null===t&&(t=p());null!==t;)e.push(t),t=d(),null===t&&(t=p());return null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return":"}(l)),null===e&&(_r=l),e}function E(){var e,t,r,s,l,i,o;if(l=_r,i=_r,t=A(),null!==t)for(e=[];null!==t;)e.push(t),t=A();else e=null;if(null!==e){for(t=[],o=_r,r=[],s=v();null!==s;)r.push(s),s=v();for(null!==r?(s=A(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==r;){for(t.push(r),o=_r,r=[],s=v();null!==s;)r.push(s),s=v();null!==r?(s=A(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o)}null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r,e)}(l)),null===e&&(_r=l),e}function A(){var e;return/^[!-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[!-~]")),null===e&&(e=y()),e}function y(){var e;return/^[\x80-\uFFFF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\x80-\\uFFFF]")),e}function R(){var e;return/^[\x80-\xBF]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\x80-\\xBF]")),e}function b(){var e;return e=i(),null===e&&(/^[a-f]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[a-f]"))),e}function I(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"'))))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function w(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"'))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function N(){var e;return 40===n.charCodeAt(_r)?(e="(",_r++):(e=null,0===vr&&s('"("')),null===e&&(41===n.charCodeAt(_r)?(e=")",_r++):(e=null,0===vr&&s('")"')),null===e&&(60===n.charCodeAt(_r)?(e="<",_r++):(e=null,0===vr&&s('"<"')),null===e&&(62===n.charCodeAt(_r)?(e=">",_r++):(e=null,0===vr&&s('">"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(92===n.charCodeAt(_r)?(e="\\",_r++):(e=null,0===vr&&s('"\\\\"')),null===e&&(e=h(),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(123===n.charCodeAt(_r)?(e="{",_r++):(e=null,0===vr&&s('"{"')),null===e&&(125===n.charCodeAt(_r)?(e="}",_r++):(e=null,0===vr&&s('"}"')),null===e&&(e=d(),null===e&&(e=p())))))))))))))))))),e}function D(){var e,t,r;if(r=_r,t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')),null===t&&(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null===t&&(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null===t&&(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null===t&&(62===n.charCodeAt(_r)?(t=">",_r++):(t=null,0===vr&&s('">"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(92===n.charCodeAt(_r)?(t="\\",_r++):(t=null,0===vr&&s('"\\\\"')),null===t&&(t=h(),null===t&&(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null===t&&(91===n.charCodeAt(_r)?(t="[",_r++):(t=null,0===vr&&s('"["')),null===t&&(93===n.charCodeAt(_r)?(t="]",_r++):(t=null,0===vr&&s('"]"')),null===t&&(63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null===t&&(123===n.charCodeAt(_r)?(t="{",_r++):(t=null,0===vr&&s('"{"')),null===t&&(125===n.charCodeAt(_r)?(t="}",_r++):(t=null,0===vr&&s('"}"'))))))))))))))))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=f(),null===t&&(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null===t&&(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null===t&&(33===n.charCodeAt(_r)?(t="!",_r++):(t=null,0===vr&&s('"!"')),null===t&&(37===n.charCodeAt(_r)?(t="%",_r++):(t=null,0===vr&&s('"%"')),null===t&&(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null===t&&(95===n.charCodeAt(_r)?(t="_",_r++):(t=null,0===vr&&s('"_"')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(96===n.charCodeAt(_r)?(t="`",_r++):(t=null,0===vr&&s('"`"')),null===t&&(39===n.charCodeAt(_r)?(t="'",_r++):(t=null,0===vr&&s('"\'"')),null===t&&(126===n.charCodeAt(_r)?(t="~",_r++):(t=null,0===vr&&s('"~"')),null===t&&(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null===t&&(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null===t&&(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null===t&&(62===n.charCodeAt(_r)?(t=">",_r++):(t=null,0===vr&&s('">"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(92===n.charCodeAt(_r)?(t="\\",_r++):(t=null,0===vr&&s('"\\\\"')),null===t&&(t=h(),null===t&&(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null===t&&(91===n.charCodeAt(_r)?(t="[",_r++):(t=null,0===vr&&s('"["')),null===t&&(93===n.charCodeAt(_r)?(t="]",_r++):(t=null,0===vr&&s('"]"')),null===t&&(63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null===t&&(123===n.charCodeAt(_r)?(t="{",_r++):(t=null,0===vr&&s('"{"')),null===t&&(125===n.charCodeAt(_r)?(t="}",_r++):(t=null,0===vr&&s('"}"')))))))))))))))))))))))));else e=null;return null!==e&&(e=function(e){return n.substring(_r,e)}(r)),null===e&&(_r=r),e}function O(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(42===n.charCodeAt(_r)?(t="*",_r++):(t=null,0===vr&&s('"*"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"*"}(l)),null===e&&(_r=l),e}function x(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"/"}(l)),null===e&&(_r=l),e}function U(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"="}(l)),null===e&&(_r=l),e}function M(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(40===n.charCodeAt(_r)?(t="(",_r++):(t=null,0===vr&&s('"("')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return"("}(l)),null===e&&(_r=l),e}function P(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(41===n.charCodeAt(_r)?(t=")",_r++):(t=null,0===vr&&s('")"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return")"}(l)),null===e&&(_r=l),e}function q(){var e,t,r,l;return r=_r,l=_r,62===n.charCodeAt(_r)?(e=">",_r++):(e=null,0===vr&&s('">"')),null!==e?(t=C(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e){return">"}(r)),null===e&&(_r=r),e}function L(){var e,t,r,l;return r=_r,l=_r,e=C(),null!==e?(60===n.charCodeAt(_r)?(t="<",_r++):(t=null,0===vr&&s('"<"')),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e){return"<"}(r)),null===e&&(_r=r),e}function k(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return","}(l)),null===e&&(_r=l),e}function H(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return";"}(l)),null===e&&(_r=l),e}function F(){var e,t,r,l,i;return l=_r,i=_r,e=C(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=C(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return":"}(l)),null===e&&(_r=l),e}function G(){var e,t,n,r;return n=_r,r=_r,e=C(),null!==e?(t=h(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),null!==e&&(e=function(e){return'"'}(n)),null===e&&(_r=n),e}function j(){var e,t,n,r;return n=_r,r=_r,e=h(),null!==e?(t=C(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),null!==e&&(e=function(e){return'"'}(n)),null===e&&(_r=n),e}function W(){var e,t,n,r;if(r=_r,e=M(),null!==e){for(t=[],n=B(),null===n&&(n=J(),null===n&&(n=W()));null!==n;)t.push(n),n=B(),null===n&&(n=J(),null===n&&(n=W()));null!==t?(n=P(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)}else e=null,_r=r;return e}function B(){var e;return/^[!-']/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[!-']")),null===e&&(/^[*-[]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[*-[]")),null===e&&(/^[\]-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\]-~]")),null===e&&(e=y(),null===e&&(e=v())))),e}function z(){var e,t,r,s,l,i;if(l=_r,i=_r,e=C(),null!==e)if(t=h(),null!==t){for(r=[],s=Y(),null===s&&(s=J());null!==s;)r.push(s),s=Y(),null===s&&(s=J());null!==r?(s=h(),null!==s?e=[e,t,r,s]:(e=null,_r=i)):(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r,e)}(l)),null===e&&(_r=l),e}function V(){var e,t,r,s,l,i;if(l=_r,i=_r,e=C(),null!==e)if(t=h(),null!==t){for(r=[],s=Y(),null===s&&(s=J());null!==s;)r.push(s),s=Y(),null===s&&(s=J());null!==r?(s=h(),null!==s?e=[e,t,r,s]:(e=null,_r=i)):(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;return null!==e&&(e=function(e){return n.substring(_r-1,e+1)}(l)),null===e&&(_r=l),e}function Y(){var e;return e=v(),null===e&&(33===n.charCodeAt(_r)?(e="!",_r++):(e=null,0===vr&&s('"!"')),null===e&&(/^[#-[]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[#-[]")),null===e&&(/^[\]-~]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[\\]-~]")),null===e&&(e=y())))),e}function J(){var e,t,r;return r=_r,92===n.charCodeAt(_r)?(e="\\",_r++):(e=null,0===vr&&s('"\\\\"')),null!==e?(/^[\0-\t]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\0-\\t]")),null===t&&(/^[\x0B-\f]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\x0B-\\f]")),null===t&&(/^[\x0E-]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[\\x0E-]")))),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function K(){var e,t,r,l,i,o;return i=_r,o=_r,e=X(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=ee(),r=null!==r?r:"",null!==r?(l=se(),null!==l?e=[e,t,r,l]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e){try{yr.uri=new Er(yr.scheme,yr.user,yr.host,yr.port),delete yr.scheme,delete yr.user,delete yr.host,delete yr.host_type,delete yr.port}catch(t){yr=-1}}(i)),null===e&&(_r=i),e}function $(){var e,t,l,i,o,u,a,c;return a=_r,c=_r,e=X(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(l=ee(),l=null!==l?l:"",null!==l?(i=se(),null!==i?(o=ge(),null!==o?(u=Ne(),u=null!==u?u:"",null!==u?e=[e,t,l,i,o,u]:(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c),null!==e&&(e=function(e){try{yr.uri=new Er(yr.scheme,yr.user,yr.host,yr.port,yr.uri_params,yr.uri_headers),delete yr.scheme,delete yr.user,delete yr.host,delete yr.host_type,delete yr.port,delete yr.uri_params,"SIP_URI"===r&&(yr=yr.uri)}catch(t){yr=-1}}(a)),null===e&&(_r=a),e}function X(){var e;return e=Q(),null===e&&(e=Z()),e}function Q(){var e,t;return t=_r,"sips"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"sips"')),null!==e&&(e=function(e,t){yr.scheme=t.toLowerCase()}(t,e)),null===e&&(_r=t),e}function Z(){var e,t;return t=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"sip"')),null!==e&&(e=function(e,t){yr.scheme=t.toLowerCase()}(t,e)),null===e&&(_r=t),e}function ee(){var e,t,r,l,i,o;return l=_r,i=_r,e=te(),null!==e?(o=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=re(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?(64===n.charCodeAt(_r)?(r="@",
_r++):(r=null,0===vr&&s('"@"')),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.user=decodeURIComponent(n.substring(_r-1,e))}(l)),null===e&&(_r=l),e}function te(){var e,t;if(t=g(),null===t&&(t=_(),null===t&&(t=ne())),null!==t)for(e=[];null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(t=ne()));else e=null;return e}function ne(){var e;return 38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"'))))))))),e}function re(){var e,t,r;for(r=_r,e=[],t=g(),null===t&&(t=_(),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","'))))))));null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","'))))))));return null!==e&&(e=function(e){yr.password=n.substring(_r,e)}(r)),null===e&&(_r=r),e}function se(){var e,t,r,l,i;return l=_r,e=le(),null!==e?(i=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=me(),null!==r?t=[t,r]:(t=null,_r=i)):(t=null,_r=i),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e}function le(){var e,t;return t=_r,e=ie(),null===e&&(e=pe(),null===e&&(e=ae())),null!==e&&(e=function(e){return yr.host=n.substring(_r,e).toLowerCase(),yr.host}(t)),null===e&&(_r=t),e}function ie(){var e,t,r,l,i,o;for(l=_r,i=_r,e=[],o=_r,t=oe(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o);null!==t;)e.push(t),o=_r,t=oe(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o);return null!==e?(t=ue(),null!==t?(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),r=null!==r?r:"",null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return yr.host_type="domain",n.substring(_r,e)}(l)),null===e&&(_r=l),e}function oe(){var e,t,r,l;if(l=_r,e=f(),null!==e){for(t=[],r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==r;)t.push(r),r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return e}function ue(){var e,t,r,l;if(l=_r,e=o(),null!==e){for(t=[],r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==r;)t.push(r),r=f(),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(95===n.charCodeAt(_r)?(r="_",_r++):(r=null,0===vr&&s('"_"'))));null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return e}function ae(){var e,t,r,l,i;return l=_r,i=_r,91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null!==e?(t=ce(),null!==t?(93===n.charCodeAt(_r)?(r="]",_r++):(r=null,0===vr&&s('"]"')),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){return yr.host_type="IPv6",n.substring(_r,e)}(l)),null===e&&(_r=l),e}function ce(){var e,t,r,l,i,o,u,a,c,h,d,p,f,m,g,T;return m=_r,g=_r,e=he(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?(58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=he(),null!==c?(58===n.charCodeAt(_r)?(h=":",_r++):(h=null,0===vr&&s('":"')),null!==h?(d=he(),null!==d?(58===n.charCodeAt(_r)?(p=":",_r++):(p=null,0===vr&&s('":"')),null!==p?(f=de(),null!==f?e=[e,t,r,l,i,o,u,a,c,h,d,p,f]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=he(),null!==h?(58===n.charCodeAt(_r)?(d=":",_r++):(d=null,0===vr&&s('":"')),null!==d?(p=de(),null!==p?e=[e,t,r,l,i,o,u,a,c,h,d,p]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=de(),null!==h?e=[e,t,r,l,i,o,u,a,c,h]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=de(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=de(),null!==o?e=[e,t,r,l,i,o]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?(58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=de(),null!==l?e=[e,t,r,l]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=de(),null!==t?e=[e,t]:(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,"::"===n.substr(_r,2)?(e="::",_r+=2):(e=null,0===vr&&s('"::"')),null!==e?(t=he(),null!==t?e=[e,t]:(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?("::"===n.substr(_r,2)?(t="::",_r+=2):(t=null,0===vr&&s('"::"')),null!==t?(r=he(),null!==r?(58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=he(),null!==c?(58===n.charCodeAt(_r)?(h=":",_r++):(h=null,0===vr&&s('":"')),null!==h?(d=de(),null!==d?e=[e,t,r,l,i,o,u,a,c,h,d]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?("::"===n.substr(_r,2)?(r="::",_r+=2):(r=null,0===vr&&s('"::"')),null!==r?(l=he(),null!==l?(58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?(58===n.charCodeAt(_r)?(c=":",_r++):(c=null,0===vr&&s('":"')),null!==c?(h=de(),null!==h?e=[e,t,r,l,i,o,u,a,c,h]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?("::"===n.substr(_r,2)?(l="::",_r+=2):(l=null,0===vr&&s('"::"')),null!==l?(i=he(),null!==i?(58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?(58===n.charCodeAt(_r)?(a=":",_r++):(a=null,0===vr&&s('":"')),null!==a?(c=de(),null!==c?e=[e,t,r,l,i,o,u,a,c]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?("::"===n.substr(_r,2)?(i="::",_r+=2):(i=null,0===vr&&s('"::"')),null!==i?(o=he(),null!==o?(58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=de(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?("::"===n.substr(_r,2)?(o="::",_r+=2):(o=null,0===vr&&s('"::"')),null!==o?(u=de(),null!==u?e=[e,t,r,l,i,o,u]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?(T=_r,58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?o=[o,u]:(o=null,_r=T)):(o=null,_r=T),o=null!==o?o:"",null!==o?("::"===n.substr(_r,2)?(u="::",_r+=2):(u=null,0===vr&&s('"::"')),null!==u?(a=he(),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g),null===e&&(g=_r,e=he(),null!==e?(T=_r,58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?t=[t,r]:(t=null,_r=T)):(t=null,_r=T),t=null!==t?t:"",null!==t?(T=_r,58===n.charCodeAt(_r)?(r=":",_r++):(r=null,0===vr&&s('":"')),null!==r?(l=he(),null!==l?r=[r,l]:(r=null,_r=T)):(r=null,_r=T),r=null!==r?r:"",null!==r?(T=_r,58===n.charCodeAt(_r)?(l=":",_r++):(l=null,0===vr&&s('":"')),null!==l?(i=he(),null!==i?l=[l,i]:(l=null,_r=T)):(l=null,_r=T),l=null!==l?l:"",null!==l?(T=_r,58===n.charCodeAt(_r)?(i=":",_r++):(i=null,0===vr&&s('":"')),null!==i?(o=he(),null!==o?i=[i,o]:(i=null,_r=T)):(i=null,_r=T),i=null!==i?i:"",null!==i?(T=_r,58===n.charCodeAt(_r)?(o=":",_r++):(o=null,0===vr&&s('":"')),null!==o?(u=he(),null!==u?o=[o,u]:(o=null,_r=T)):(o=null,_r=T),o=null!==o?o:"",null!==o?(T=_r,58===n.charCodeAt(_r)?(u=":",_r++):(u=null,0===vr&&s('":"')),null!==u?(a=he(),null!==a?u=[u,a]:(u=null,_r=T)):(u=null,_r=T),u=null!==u?u:"",null!==u?("::"===n.substr(_r,2)?(a="::",_r+=2):(a=null,0===vr&&s('"::"')),null!==a?e=[e,t,r,l,i,o,u,a]:(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g)):(e=null,_r=g))))))))))))))),null!==e&&(e=function(e){return yr.host_type="IPv6",n.substring(_r,e)}(m)),null===e&&(_r=m),e}function he(){var e,t,n,r,s;return s=_r,e=u(),null!==e?(t=u(),t=null!==t?t:"",null!==t?(n=u(),n=null!==n?n:"",null!==n?(r=u(),r=null!==r?r:"",null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function de(){var e,t,r,l;return l=_r,e=he(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=he(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(e=pe()),e}function pe(){var e,t,r,l,i,o,u,a,c;return a=_r,c=_r,e=fe(),null!==e?(46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null!==t?(r=fe(),null!==r?(46===n.charCodeAt(_r)?(l=".",_r++):(l=null,0===vr&&s('"."')),null!==l?(i=fe(),null!==i?(46===n.charCodeAt(_r)?(o=".",_r++):(o=null,0===vr&&s('"."')),null!==o?(u=fe(),null!==u?e=[e,t,r,l,i,o,u]:(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c)):(e=null,_r=c),null!==e&&(e=function(e){return yr.host_type="IPv4",n.substring(_r,e)}(a)),null===e&&(_r=a),e}function fe(){var e,t,r,l;return l=_r,"25"===n.substr(_r,2)?(e="25",_r+=2):(e=null,0===vr&&s('"25"')),null!==e?(/^[0-5]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[0-5]")),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,50===n.charCodeAt(_r)?(e="2",_r++):(e=null,0===vr&&s('"2"')),null!==e?(/^[0-4]/.test(n.charAt(_r))?(t=n.charAt(_r),_r++):(t=null,0===vr&&s("[0-4]")),null!==t?(r=i(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,49===n.charCodeAt(_r)?(e="1",_r++):(e=null,0===vr&&s('"1"')),null!==e?(t=i(),null!==t?(r=i(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),null===e&&(l=_r,/^[1-9]/.test(n.charAt(_r))?(e=n.charAt(_r),_r++):(e=null,0===vr&&s("[1-9]")),null!==e?(t=i(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null===e&&(e=i())))),e}function me(){var e,t,n,r,s,l,o;return l=_r,o=_r,e=i(),e=null!==e?e:"",null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?(r=i(),r=null!==r?r:"",null!==r?(s=i(),s=null!==s?s:"",null!==s?e=[e,t,n,r,s]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e,t){return t=parseInt(t.join("")),yr.port=t,t}(l,e)),null===e&&(_r=l),e}function ge(){var e,t,r,l;for(e=[],l=_r,59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=Te(),null!==r?t=[t,r]:(t=null,_r=l)):(t=null,_r=l);null!==t;)e.push(t),l=_r,59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null!==t?(r=Te(),null!==r?t=[t,r]:(t=null,_r=l)):(t=null,_r=l);return e}function Te(){var e;return e=_e(),null===e&&(e=ve(),null===e&&(e=Ce(),null===e&&(e=Se(),null===e&&(e=Ee(),null===e&&(e=Ae(),null===e&&(e=ye())))))),e}function _e(){var e,t,r,l;return r=_r,l=_r,"transport="===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"transport="')),null!==e?("udp"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"udp"')),null===t&&("tcp"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"tcp"')),null===t&&("sctp"===n.substr(_r,4).toLowerCase()?(t=n.substr(_r,4),_r+=4):(t=null,0===vr&&s('"sctp"')),null===t&&("tls"===n.substr(_r,3).toLowerCase()?(t=n.substr(_r,3),_r+=3):(t=null,0===vr&&s('"tls"')),null===t&&(t=I())))),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.transport=t.toLowerCase()}(r,e[1])),null===e&&(_r=r),e}function ve(){var e,t,r,l;return r=_r,l=_r,"user="===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"user="')),null!==e?("phone"===n.substr(_r,5).toLowerCase()?(t=n.substr(_r,5),_r+=5):(t=null,0===vr&&s('"phone"')),null===t&&("ip"===n.substr(_r,2).toLowerCase()?(t=n.substr(_r,2),_r+=2):(t=null,0===vr&&s('"ip"')),null===t&&(t=I())),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.user=t.toLowerCase()}(r,e[1])),null===e&&(_r=r),e}function Ce(){var e,t,r,l;return r=_r,l=_r,"method="===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"method="')),null!==e?(t=at(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.method=t}(r,e[1])),null===e&&(_r=r),e}function Se(){var e,t,r,l;return r=_r,l=_r,"ttl="===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"ttl="')),null!==e?(t=Jn(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.ttl=t}(r,e[1])),null===e&&(_r=r),e}function Ee(){var e,t,r,l;return r=_r,l=_r,"maddr="===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"maddr="')),null!==e?(t=le(),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),null!==e&&(e=function(e,t){yr.uri_params||(yr.uri_params={}),yr.uri_params.maddr=t}(r,e[1])),null===e&&(_r=r),e}function Ae(){var e,t,r,l,i,o;return l=_r,i=_r,"lr"===n.substr(_r,2).toLowerCase()?(e=n.substr(_r,2),_r+=2):(e=null,0===vr&&s('"lr"')),null!==e?(o=_r,61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=I(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.uri_params||(yr.uri_params={}),yr.uri_params.lr=void 0}(l)),null===e&&(_r=l),e}function ye(){var e,t,r,l,i,o;return l=_r,i=_r,e=Re(),null!==e?(o=_r,61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=be(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t,n){yr.uri_params||(yr.uri_params={}),n="undefined"==typeof n?void 0:n[1],yr.uri_params[t.toLowerCase()]=n}(l,e[0],e[1])),null===e&&(_r=l),e}function Re(){var e,t,n;if(n=_r,t=Ie(),null!==t)for(e=[];null!==t;)e.push(t),t=Ie();else e=null;return null!==e&&(e=function(e,t){return t.join("")}(n,e)),null===e&&(_r=n),e}function be(){var e,t,n;if(n=_r,t=Ie(),null!==t)for(e=[];null!==t;)e.push(t),t=Ie();else e=null;return null!==e&&(e=function(e,t){return t.join("")}(n,e)),null===e&&(_r=n),e}function Ie(){var e;return e=we(),null===e&&(e=g(),null===e&&(e=_())),e}function we(){var e;return 91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')))))))),e}function Ne(){var e,t,r,l,i,o,u;if(o=_r,63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null!==e)if(t=De(),null!==t){for(r=[],u=_r,38===n.charCodeAt(_r)?(l="&",_r++):(l=null,0===vr&&s('"&"')),null!==l?(i=De(),null!==i?l=[l,i]:(l=null,_r=u)):(l=null,_r=u);null!==l;)r.push(l),u=_r,38===n.charCodeAt(_r)?(l="&",_r++):(l=null,0===vr&&s('"&"')),null!==l?(i=De(),null!==i?l=[l,i]:(l=null,_r=u)):(l=null,_r=u);null!==r?e=[e,t,r]:(e=null,_r=o)}else e=null,_r=o;else e=null,_r=o;return e}function De(){var e,t,r,l,i;return l=_r,i=_r,e=Oe(),null!==e?(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null!==t?(r=xe(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t,n){t=t.join("").toLowerCase(),n=n.join(""),yr.uri_headers||(yr.uri_headers={}),yr.uri_headers[t]?yr.uri_headers[t].push(n):yr.uri_headers[t]=[n]}(l,e[0],e[2])),null===e&&(_r=l),e}function Oe(){var e,t;if(t=Ue(),null===t&&(t=g(),null===t&&(t=_())),null!==t)for(e=[];null!==t;)e.push(t),t=Ue(),null===t&&(t=g(),null===t&&(t=_()));else e=null;return e}function xe(){var e,t;for(e=[],t=Ue(),null===t&&(t=g(),null===t&&(t=_()));null!==t;)e.push(t),t=Ue(),null===t&&(t=g(),null===t&&(t=_()));return e}function Ue(){var e;return 91===n.charCodeAt(_r)?(e="[",_r++):(e=null,0===vr&&s('"["')),null===e&&(93===n.charCodeAt(_r)?(e="]",_r++):(e=null,0===vr&&s('"]"')),null===e&&(47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')))))))),e}function Me(){var e;return e=ct(),null===e&&(e=Pe()),e}function Pe(){var e,t,n,r,s,l;return l=_r,e=at(),null!==e?(t=d(),null!==t?(n=qe(),null!==n?(r=d(),null!==r?(s=Ze(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function qe(){var e;return e=$(),null===e&&(e=Le()),e}function Le(){var e,t,r,l;return l=_r,e=Je(),null!==e?(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null!==t?(r=ke(),null===r&&(r=Ge()),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function ke(){var e,t,r,l,i;return l=_r,e=He(),null===e&&(e=Fe()),null!==e?(i=_r,63===n.charCodeAt(_r)?(t="?",_r++):(t=null,0===vr&&s('"?"')),null!==t?(r=Qe(),null!==r?t=[t,r]:(t=null,_r=i)):(t=null,_r=i),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e}function He(){var e,t,r,l;return l=_r,"//"===n.substr(_r,2)?(e="//",_r+=2):(e=null,0===vr&&s('"//"')),null!==e?(t=Ke(),null!==t?(r=Fe(),r=null!==r?r:"",null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Fe(){var e,t,r;return r=_r,47===n.charCodeAt(_r)?(e="/",_r++):(e=null,0===vr&&s('"/"')),null!==e?(t=Be(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Ge(){var e,t,n,r;if(r=_r,e=We(),null!==e){for(t=[],n=je();null!==n;)t.push(n),n=je();null!==t?e=[e,t]:(e=null,_r=r)}else e=null,_r=r;return e}function je(){var e;return e=m(),null===e&&(e=g(),null===e&&(e=_())),e}function We(){var e;return e=g(),null===e&&(e=_(),null===e&&(59===n.charCodeAt(_r)?(e=";",_r++):(e=null,0===vr&&s('";"')),null===e&&(63===n.charCodeAt(_r)?(e="?",_r++):(e=null,0===vr&&s('"?"')),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')))))))))))),e}function Be(){var e,t,r,l,i,o;if(i=_r,e=ze(),null!==e){for(t=[],o=_r,47===n.charCodeAt(_r)?(r="/",_r++):(r=null,0===vr&&s('"/"')),null!==r?(l=ze(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,47===n.charCodeAt(_r)?(r="/",_r++):(r=null,0===vr&&s('"/"')),null!==r?(l=ze(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function ze(){var e,t,r,l,i,o;for(i=_r,e=[],t=Ye();null!==t;)e.push(t),t=Ye();if(null!==e){for(t=[],o=_r,59===n.charCodeAt(_r)?(r=";",_r++):(r=null,0===vr&&s('";"')),null!==r?(l=Ve(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,59===n.charCodeAt(_r)?(r=";",_r++):(r=null,0===vr&&s('";"')),null!==r?(l=Ve(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function Ve(){var e,t;for(e=[],t=Ye();null!==t;)e.push(t),t=Ye();return e}function Ye(){var e;return e=g(),null===e&&(e=_(),null===e&&(58===n.charCodeAt(_r)?(e=":",_r++):(e=null,0===vr&&s('":"')),null===e&&(64===n.charCodeAt(_r)?(e="@",_r++):(e=null,0===vr&&s('"@"')),null===e&&(38===n.charCodeAt(_r)?(e="&",_r++):(e=null,0===vr&&s('"&"')),null===e&&(61===n.charCodeAt(_r)?(e="=",_r++):(e=null,0===vr&&s('"="')),null===e&&(43===n.charCodeAt(_r)?(e="+",_r++):(e=null,0===vr&&s('"+"')),null===e&&(36===n.charCodeAt(_r)?(e="$",_r++):(e=null,0===vr&&s('"$"')),null===e&&(44===n.charCodeAt(_r)?(e=",",_r++):(e=null,0===vr&&s('","')))))))))),e}function Je(){var e,t,r,l,u;if(l=_r,u=_r,e=o(),null!==e){for(t=[],r=o(),null===r&&(r=i(),null===r&&(43===n.charCodeAt(_r)?(r="+",_r++):(r=null,0===vr&&s('"+"')),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."'))))));null!==r;)t.push(r),r=o(),null===r&&(r=i(),null===r&&(43===n.charCodeAt(_r)?(r="+",_r++):(r=null,0===vr&&s('"+"')),null===r&&(45===n.charCodeAt(_r)?(r="-",_r++):(r=null,0===vr&&s('"-"')),null===r&&(46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."'))))));null!==t?e=[e,t]:(e=null,_r=u)}else e=null,_r=u;return null!==e&&(e=function(e){yr.scheme=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function Ke(){var e;return e=$e(),null===e&&(e=Xe()),e}function $e(){var e,t,r,l;return r=_r,l=_r,e=ee(),null!==e?(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?e=[e,t]:(e=null,_r=l)):(e=null,_r=l),e=null!==e?e:"",null!==e?(t=se(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e=null!==e?e:""}function Xe(){var e,t;if(t=g(),null===t&&(t=_(),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null===t&&(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"'))))))))))),null!==t)for(e=[];null!==t;)e.push(t),t=g(),null===t&&(t=_(),null===t&&(36===n.charCodeAt(_r)?(t="$",_r++):(t=null,0===vr&&s('"$"')),null===t&&(44===n.charCodeAt(_r)?(t=",",_r++):(t=null,0===vr&&s('","')),null===t&&(59===n.charCodeAt(_r)?(t=";",_r++):(t=null,0===vr&&s('";"')),null===t&&(58===n.charCodeAt(_r)?(t=":",_r++):(t=null,0===vr&&s('":"')),null===t&&(64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null===t&&(38===n.charCodeAt(_r)?(t="&",_r++):(t=null,0===vr&&s('"&"')),null===t&&(61===n.charCodeAt(_r)?(t="=",_r++):(t=null,0===vr&&s('"="')),null===t&&(43===n.charCodeAt(_r)?(t="+",_r++):(t=null,0===vr&&s('"+"')))))))))));else e=null;return e}function Qe(){var e,t;for(e=[],t=je();null!==t;)e.push(t),t=je();return e}function Ze(){var e,t,r,l,o,u,a,c;if(a=_r,c=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null!==e)if(47===n.charCodeAt(_r)?(t="/",_r++):(t=null,0===vr&&s('"/"')),null!==t){if(l=i(),null!==l)for(r=[];null!==l;)r.push(l),l=i();else r=null;if(null!==r)if(46===n.charCodeAt(_r)?(l=".",_r++):(l=null,0===vr&&s('"."')),null!==l){if(u=i(),null!==u)for(o=[];null!==u;)o.push(u),u=i();else o=null;null!==o?e=[e,t,r,l,o]:(e=null,_r=c)}else e=null,_r=c;else e=null,_r=c}else e=null,_r=c;else e=null,_r=c;return null!==e&&(e=function(e){yr.sip_version=n.substring(_r,e)}(a)),null===e&&(_r=a),e}function et(){var e;return"INVITE"===n.substr(_r,6)?(e="INVITE",_r+=6):(e=null,0===vr&&s('"INVITE"')),e}function tt(){var e;return"ACK"===n.substr(_r,3)?(e="ACK",_r+=3):(e=null,0===vr&&s('"ACK"')),e}function nt(){var e;return"OPTIONS"===n.substr(_r,7)?(e="OPTIONS",_r+=7):(e=null,0===vr&&s('"OPTIONS"')),e}function rt(){var e;return"BYE"===n.substr(_r,3)?(e="BYE",_r+=3):(e=null,0===vr&&s('"BYE"')),e}function st(){var e;return"CANCEL"===n.substr(_r,6)?(e="CANCEL",_r+=6):(e=null,0===vr&&s('"CANCEL"')),e}function lt(){var e;return"REGISTER"===n.substr(_r,8)?(e="REGISTER",_r+=8):(e=null,0===vr&&s('"REGISTER"')),e}function it(){var e;return"SUBSCRIBE"===n.substr(_r,9)?(e="SUBSCRIBE",_r+=9):(e=null,0===vr&&s('"SUBSCRIBE"')),e}function ot(){var e;return"NOTIFY"===n.substr(_r,6)?(e="NOTIFY",_r+=6):(e=null,0===vr&&s('"NOTIFY"')),e}function ut(){var e;return"REFER"===n.substr(_r,5)?(e="REFER",_r+=5):(e=null,0===vr&&s('"REFER"')),e}function at(){var e,t;return t=_r,e=et(),null===e&&(e=tt(),null===e&&(e=nt(),null===e&&(e=rt(),null===e&&(e=st(),null===e&&(e=lt(),null===e&&(e=it(),null===e&&(e=ot(),null===e&&(e=ut(),null===e&&(e=I()))))))))),null!==e&&(e=function(e){return yr.method=n.substring(_r,e),yr.method}(t)),null===e&&(_r=t),e}function ct(){var e,t,n,r,s,l;return l=_r,e=Ze(),null!==e?(t=d(),null!==t?(n=ht(),null!==n?(r=d(),null!==r?(s=pt(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function ht(){var e,t;return t=_r,e=dt(),null!==e&&(e=function(e,t){yr.status_code=parseInt(t.join(""))}(t,e)),null===e&&(_r=t),e}function dt(){var e,t,n,r;return r=_r,e=i(),null!==e?(t=i(),null!==t?(n=i(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function pt(){var e,t,r;for(r=_r,e=[],t=m(),null===t&&(t=g(),null===t&&(t=_(),null===t&&(t=y(),null===t&&(t=R(),null===t&&(t=d(),null===t&&(t=p()))))));null!==t;)e.push(t),t=m(),null===t&&(t=g(),null===t&&(t=_(),null===t&&(t=y(),null===t&&(t=R(),null===t&&(t=d(),null===t&&(t=p()))))));return null!==e&&(e=function(e){yr.reason_phrase=n.substring(_r,e)}(r)),null===e&&(_r=r),e}function ft(){var e,t,n,r,s,l;if(s=_r,e=Yt(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Yt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Yt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function mt(){var e,t,r,l,i,o;return l=_r,i=_r,e=D(),null!==e?(o=_r,64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?(r=D(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function gt(){var e,t,n,r,s,l,i;if(s=_r,e=O(),null===e)if(l=_r,e=Tt(),null!==e){for(t=[],i=_r,n=k(),null!==n?(r=Tt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=k(),null!==n?(r=Tt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,
_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t,n;for(n=yr.multi_header.length,t=0;n>t;t++)if(null===yr.multi_header[t].parsed){yr=null;break}yr=null!==yr?yr.multi_header:-1}(s)),null===e&&(_r=s),e}function Tt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Ct(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Ct(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t;yr.multi_header||(yr.multi_header=[]);try{t=new Ar(yr.uri,yr.display_name,yr.params),delete yr.uri,delete yr.display_name,delete yr.params}catch(n){t=null}yr.multi_header.push({possition:_r,offset:e,parsed:t})}(s)),null===e&&(_r=s),e}function _t(){var e,t,n,r,s;return s=_r,e=vt(),e=null!==e?e:"",null!==e?(t=L(),null!==t?(n=$(),null!==n?(r=q(),null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function vt(){var e,t,r,s,l,i,o;if(l=_r,i=_r,e=I(),null!==e){for(t=[],o=_r,r=v(),null!==r?(s=I(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,r=v(),null!==r?(s=I(),null!==s?r=[r,s]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return null===e&&(e=z()),null!==e&&(e=function(e,t){t=n.substring(_r,e).trim(),'"'===t[0]&&(t=t.substring(1,t.length-1)),yr.display_name=t}(l,e)),null===e&&(_r=l),e}function Ct(){var e;return e=St(),null===e&&(e=Et(),null===e&&(e=Rt())),e}function St(){var e,t,r,l,i;return l=_r,i=_r,"q"===n.substr(_r,1).toLowerCase()?(e=n.substr(_r,1),_r++):(e=null,0===vr&&s('"q"')),null!==e?(t=U(),null!==t?(r=yt(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.q=t}(l,e[2])),null===e&&(_r=l),e}function Et(){var e,t,r,l,i;return l=_r,i=_r,"expires"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"expires"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.params||(yr.params={}),yr.params.expires=t}(l,e[2])),null===e&&(_r=l),e}function At(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){return parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function yt(){var e,t,r,l,o,u,a,c;return u=_r,a=_r,48===n.charCodeAt(_r)?(e="0",_r++):(e=null,0===vr&&s('"0"')),null!==e?(c=_r,46===n.charCodeAt(_r)?(t=".",_r++):(t=null,0===vr&&s('"."')),null!==t?(r=i(),r=null!==r?r:"",null!==r?(l=i(),l=null!==l?l:"",null!==l?(o=i(),o=null!==o?o:"",null!==o?t=[t,r,l,o]:(t=null,_r=c)):(t=null,_r=c)):(t=null,_r=c)):(t=null,_r=c),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=a)):(e=null,_r=a),null!==e&&(e=function(e){return parseFloat(n.substring(_r,e))}(u)),null===e&&(_r=u),e}function Rt(){var e,t,n,r,s,l;return r=_r,s=_r,e=I(),null!==e?(l=_r,t=U(),null!==t?(n=bt(),null!==n?t=[t,n]:(t=null,_r=l)):(t=null,_r=l),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=s)):(e=null,_r=s),null!==e&&(e=function(e,t,n){yr.params||(yr.params={}),n="undefined"==typeof n?void 0:n[1],yr.params[t.toLowerCase()]=n}(r,e[0],e[1])),null===e&&(_r=r),e}function bt(){var e;return e=I(),null===e&&(e=le(),null===e&&(e=z())),e}function It(){var e,t,n,r,s,l;if(s=_r,e=wt(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Nt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Nt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function wt(){var e;return"render"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"render"')),null===e&&("session"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"session"')),null===e&&("icon"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"icon"')),null===e&&("alert"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"alert"')),null===e&&(e=I())))),e}function Nt(){var e;return e=Dt(),null===e&&(e=Rt()),e}function Dt(){var e,t,r,l;return l=_r,"handling"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"handling"')),null!==e?(t=U(),null!==t?("optional"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"optional"')),null===r&&("required"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"required"')),null===r&&(r=I())),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Ot(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function xt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function Ut(){var e,t;return t=_r,e=Mt(),null!==e&&(e=function(e){yr=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function Mt(){var e,t,n,r,s,l,i,o;if(i=_r,e=Pt(),null!==e)if(t=x(),null!==t)if(n=Ft(),null!==n){for(r=[],o=_r,s=H(),null!==s?(l=Gt(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=H(),null!==s?(l=Gt(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function Pt(){var e;return e=qt(),null===e&&(e=Lt()),e}function qt(){var e;return"text"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"text"')),null===e&&("image"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"image"')),null===e&&("audio"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"audio"')),null===e&&("video"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"video"')),null===e&&("application"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"application"')),null===e&&(e=kt()))))),e}function Lt(){var e;return"message"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"message"')),null===e&&("multipart"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"multipart"')),null===e&&(e=kt())),e}function kt(){var e;return e=I(),null===e&&(e=Ht()),e}function Ht(){var e,t,r;return r=_r,"x-"===n.substr(_r,2).toLowerCase()?(e=n.substr(_r,2),_r+=2):(e=null,0===vr&&s('"x-"')),null!==e?(t=I(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Ft(){var e;return e=kt(),null===e&&(e=I()),e}function Gt(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=U(),null!==t?(n=jt(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function jt(){var e;return e=I(),null===e&&(e=z()),e}function Wt(){var e,t,n,r;return r=_r,e=Bt(),null!==e?(t=v(),null!==t?(n=at(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function Bt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr.value=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function zt(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr=t}(t,e)),null===e&&(_r=t),e}function Vt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=Yt(),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e,t){yr.event=t.join("").toLowerCase()}(s,e[0])),null===e&&(_r=s),e}function Yt(){var e,t,r,l,i,o;if(i=_r,e=w(),null!==e){for(t=[],o=_r,46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?(l=w(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==r;)t.push(r),o=_r,46===n.charCodeAt(_r)?(r=".",_r++):(r=null,0===vr&&s('"."')),null!==r?(l=w(),null!==l?r=[r,l]:(r=null,_r=o)):(r=null,_r=o);null!==t?e=[e,t]:(e=null,_r=i)}else e=null,_r=i;return e}function Jt(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Kt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Kt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t=yr.tag;try{yr=new Ar(yr.uri,yr.display_name,yr.params),t&&yr.setParam("tag",t)}catch(n){yr=-1}}(s)),null===e&&(_r=s),e}function Kt(){var e;return e=$t(),null===e&&(e=Rt()),e}function $t(){var e,t,r,l,i;return l=_r,i=_r,"tag"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.tag=t}(l,e[2])),null===e&&(_r=l),e}function Xt(){var e,t,n;if(n=_r,t=i(),null!==t)for(e=[];null!==t;)e.push(t),t=i();else e=null;return null!==e&&(e=function(e,t){yr=parseInt(t.join(""))}(n,e)),null===e&&(_r=n),e}function Qt(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr=t}(t,e)),null===e&&(_r=t),e}function Zt(){var e,t,n,r,s,l,i,o,u,a;for(o=_r,u=_r,e=[],t=vt();null!==t;)e.push(t),t=vt();if(null!==e)if(t=L(),null!==t)if(n=$(),null!==n)if(r=q(),null!==r){for(s=[],a=_r,l=H(),null!==l?(i=Rt(),null!==i?l=[l,i]:(l=null,_r=a)):(l=null,_r=a);null!==l;)s.push(l),a=_r,l=H(),null!==l?(i=Rt(),null!==i?l=[l,i]:(l=null,_r=a)):(l=null,_r=a);null!==s?e=[e,t,n,r,s]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;return null!==e&&(e=function(e){try{yr=new Ar(yr.uri,yr.display_name,yr.params)}catch(t){yr=-1}}(o)),null===e&&(_r=o),e}function en(){var e;return e=tn()}function tn(){var e,t,r,l,i,o,u,a;if(u=_r,"digest"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"Digest"')),null!==e)if(t=v(),null!==t)if(r=sn(),null!==r){for(l=[],a=_r,i=k(),null!==i?(o=sn(),null!==o?i=[i,o]:(i=null,_r=a)):(i=null,_r=a);null!==i;)l.push(i),a=_r,i=k(),null!==i?(o=sn(),null!==o?i=[i,o]:(i=null,_r=a)):(i=null,_r=a);null!==l?e=[e,t,r,l]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;else e=null,_r=u;return null===e&&(e=nn()),e}function nn(){var e,t,n,r,s,l,i,o;if(i=_r,e=I(),null!==e)if(t=v(),null!==t)if(n=rn(),null!==n){for(r=[],o=_r,s=k(),null!==s?(l=rn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=k(),null!==s?(l=rn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function rn(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=U(),null!==t?(n=I(),null===n&&(n=z()),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function sn(){var e;return e=ln(),null===e&&(e=un(),null===e&&(e=cn(),null===e&&(e=dn(),null===e&&(e=pn(),null===e&&(e=fn(),null===e&&(e=mn(),null===e&&(e=rn()))))))),e}function ln(){var e,t,r,l;return l=_r,"realm"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"realm"')),null!==e?(t=U(),null!==t?(r=on(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function on(){var e,t;return t=_r,e=V(),null!==e&&(e=function(e,t){yr.realm=t}(t,e)),null===e&&(_r=t),e}function un(){var e,t,r,l,i,o,u,a,c;if(a=_r,"domain"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"domain"')),null!==e)if(t=U(),null!==t)if(r=G(),null!==r)if(l=an(),null!==l){if(i=[],c=_r,u=d(),null!==u)for(o=[];null!==u;)o.push(u),u=d();else o=null;for(null!==o?(u=an(),null!==u?o=[o,u]:(o=null,_r=c)):(o=null,_r=c);null!==o;){if(i.push(o),c=_r,u=d(),null!==u)for(o=[];null!==u;)o.push(u),u=d();else o=null;null!==o?(u=an(),null!==u?o=[o,u]:(o=null,_r=c)):(o=null,_r=c)}null!==i?(o=j(),null!==o?e=[e,t,r,l,i,o]:(e=null,_r=a)):(e=null,_r=a)}else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;return e}function an(){var e;return e=Le(),null===e&&(e=Fe()),e}function cn(){var e,t,r,l;return l=_r,"nonce"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"nonce"')),null!==e?(t=U(),null!==t?(r=hn(),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function hn(){var e,t;return t=_r,e=V(),null!==e&&(e=function(e,t){yr.nonce=t}(t,e)),null===e&&(_r=t),e}function dn(){var e,t,r,l,i;return l=_r,i=_r,"opaque"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"opaque"')),null!==e?(t=U(),null!==t?(r=V(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.opaque=t}(l,e[2])),null===e&&(_r=l),e}function pn(){var e,t,r,l,i;return l=_r,"stale"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"stale"')),null!==e?(t=U(),null!==t?(i=_r,"true"===n.substr(_r,4).toLowerCase()?(r=n.substr(_r,4),_r+=4):(r=null,0===vr&&s('"true"')),null!==r&&(r=function(e){yr.stale=!0}(i)),null===r&&(_r=i),null===r&&(i=_r,"false"===n.substr(_r,5).toLowerCase()?(r=n.substr(_r,5),_r+=5):(r=null,0===vr&&s('"false"')),null!==r&&(r=function(e){yr.stale=!1}(i)),null===r&&(_r=i)),null!==r?e=[e,t,r]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function fn(){var e,t,r,l,i;return l=_r,i=_r,"algorithm"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"algorithm"')),null!==e?(t=U(),null!==t?("md5"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"MD5"')),null===r&&("md5-sess"===n.substr(_r,8).toLowerCase()?(r=n.substr(_r,8),_r+=8):(r=null,0===vr&&s('"MD5-sess"')),null===r&&(r=I())),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.algorithm=t.toUpperCase()}(l,e[2])),null===e&&(_r=l),e}function mn(){var e,t,r,l,i,o,u,a,c,h;if(a=_r,"qop"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"qop"')),null!==e)if(t=U(),null!==t)if(r=G(),null!==r){if(c=_r,l=gn(),null!==l){for(i=[],h=_r,44===n.charCodeAt(_r)?(o=",",_r++):(o=null,0===vr&&s('","')),null!==o?(u=gn(),null!==u?o=[o,u]:(o=null,_r=h)):(o=null,_r=h);null!==o;)i.push(o),h=_r,44===n.charCodeAt(_r)?(o=",",_r++):(o=null,0===vr&&s('","')),null!==o?(u=gn(),null!==u?o=[o,u]:(o=null,_r=h)):(o=null,_r=h);null!==i?l=[l,i]:(l=null,_r=c)}else l=null,_r=c;null!==l?(i=j(),null!==i?e=[e,t,r,l,i]:(e=null,_r=a)):(e=null,_r=a)}else e=null,_r=a;else e=null,_r=a;else e=null,_r=a;return e}function gn(){var e,t;return t=_r,"auth-int"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"auth-int"')),null===e&&("auth"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"auth"')),null===e&&(e=I())),null!==e&&(e=function(e,t){yr.qop||(yr.qop=[]),yr.qop.push(t.toLowerCase())}(t,e)),null===e&&(_r=t),e}function Tn(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function _n(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=vn(),null!==e){for(t=[],i=_r,n=k(),null!==n?(r=vn(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=k(),null!==n?(r=vn(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t,n;for(n=yr.multi_header.length,t=0;n>t;t++)if(null===yr.multi_header[t].parsed){yr=null;break}yr=null!==yr?yr.multi_header:-1}(s)),null===e&&(_r=s),e}function vn(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=_t(),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t;yr.multi_header||(yr.multi_header=[]);try{t=new Ar(yr.uri,yr.display_name,yr.params),delete yr.uri,delete yr.display_name,delete yr.params}catch(n){t=null}yr.multi_header.push({possition:_r,offset:e,parsed:t})}(s)),null===e&&(_r=s),e}function Cn(){var e,t,r,l,i,o,u;if(i=_r,o=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null===e&&(e=I()),null!==e){for(t=[],u=_r,r=H(),null!==r?(l=Sn(),null!==l?r=[r,l]:(r=null,_r=u)):(r=null,_r=u);null!==r;)t.push(r),u=_r,r=H(),null!==r?(l=Sn(),null!==l?r=[r,l]:(r=null,_r=u)):(r=null,_r=u);null!==t?e=[e,t]:(e=null,_r=o)}else e=null,_r=o;return null!==e&&(e=function(e,t){if(yr.protocol=t.toLowerCase(),yr.params||(yr.params={}),yr.params.text&&'"'===yr.params.text[0]){var n=yr.params.text;yr.text=n.substring(1,n.length-1),delete yr.params.text}}(i,e[0])),null===e&&(_r=i),e}function Sn(){var e;return e=En(),null===e&&(e=Rt()),e}function En(){var e,t,r,l,o,u;if(o=_r,u=_r,"cause"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"cause"')),null!==e)if(t=U(),null!==t){if(l=i(),null!==l)for(r=[];null!==l;)r.push(l),l=i();else r=null;null!==r?e=[e,t,r]:(e=null,_r=u)}else e=null,_r=u;else e=null,_r=u;return null!==e&&(e=function(e,t){yr.cause=parseInt(t.join(""))}(o,e[2])),null===e&&(_r=o),e}function An(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function yn(){var e,t,n,r,s,l;if(s=_r,e=Rn(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Rn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Rn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Rn(){var e,t,n,r,s,l;if(s=_r,e=_t(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function bn(){var e,t,n,r,s,l;if(s=_r,e=In(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=wn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=wn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function In(){var e,t;return t=_r,"active"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"active"')),null===e&&("pending"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"pending"')),null===e&&("terminated"===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"terminated"')),null===e&&(e=I()))),null!==e&&(e=function(e){yr.state=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function wn(){var e,t,r,l,i;return l=_r,i=_r,"reason"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"reason"')),null!==e?(t=U(),null!==t?(r=Nn(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.reason=t)}(l,e[2])),null===e&&(_r=l),null===e&&(l=_r,i=_r,"expires"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"expires"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.expires=t)}(l,e[2])),null===e&&(_r=l),null===e&&(l=_r,i=_r,"retry_after"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"retry_after"')),null!==e?(t=U(),null!==t?(r=At(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){"undefined"!=typeof t&&(yr.retry_after=t)}(l,e[2])),null===e&&(_r=l),null===e&&(e=Rt()))),e}function Nn(){var e;return"deactivated"===n.substr(_r,11).toLowerCase()?(e=n.substr(_r,11),_r+=11):(e=null,0===vr&&s('"deactivated"')),null===e&&("probation"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"probation"')),null===e&&("rejected"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"rejected"')),null===e&&("timeout"===n.substr(_r,7).toLowerCase()?(e=n.substr(_r,7),_r+=7):(e=null,0===vr&&s('"timeout"')),null===e&&("giveup"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"giveup"')),null===e&&("noresource"===n.substr(_r,10).toLowerCase()?(e=n.substr(_r,10),_r+=10):(e=null,0===vr&&s('"noresource"')),null===e&&("invariant"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"invariant"')),null===e&&(e=I()))))))),e}function Dn(){var e;return e=E(),e=null!==e?e:""}function On(){var e,t,n,r,s,l;if(s=_r,e=I(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=I(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e=null!==e?e:""}function xn(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Un(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Un(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){var t=yr.tag;try{yr=new Ar(yr.uri,yr.display_name,yr.params),t&&yr.setParam("tag",t)}catch(n){yr=-1}}(s)),null===e&&(_r=s),e}function Un(){var e;return e=$t(),null===e&&(e=Rt()),e}function Mn(){var e,t,n,r,s,l;if(s=_r,e=Pn(),null!==e){for(t=[],l=_r,n=k(),null!==n?(r=Pn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=k(),null!==n?(r=Pn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Pn(){var e,t,n,r,s,l,i,o;if(i=_r,e=jn(),null!==e)if(t=v(),null!==t)if(n=zn(),null!==n){for(r=[],o=_r,s=H(),null!==s?(l=qn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==s;)r.push(s),o=_r,s=H(),null!==s?(l=qn(),null!==l?s=[s,l]:(s=null,_r=o)):(s=null,_r=o);null!==r?e=[e,t,n,r]:(e=null,_r=i)}else e=null,_r=i;else e=null,_r=i;else e=null,_r=i;return e}function qn(){var e;return e=Ln(),null===e&&(e=kn(),null===e&&(e=Hn(),null===e&&(e=Fn(),null===e&&(e=Gn(),null===e&&(e=Rt()))))),e}function Ln(){var e,t,r,l,i;return l=_r,i=_r,"ttl"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"ttl"')),null!==e?(t=U(),null!==t?(r=Jn(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.ttl=t}(l,e[2])),null===e&&(_r=l),e}function kn(){var e,t,r,l,i;return l=_r,i=_r,"maddr"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"maddr"')),null!==e?(t=U(),null!==t?(r=le(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.maddr=t}(l,e[2])),null===e&&(_r=l),e}function Hn(){var e,t,r,l,i;return l=_r,i=_r,"received"===n.substr(_r,8).toLowerCase()?(e=n.substr(_r,8),_r+=8):(e=null,0===vr&&s('"received"')),null!==e?(t=U(),null!==t?(r=pe(),null===r&&(r=ce()),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.received=t}(l,e[2])),null===e&&(_r=l),e}function Fn(){var e,t,r,l,i;return l=_r,i=_r,"branch"===n.substr(_r,6).toLowerCase()?(e=n.substr(_r,6),_r+=6):(e=null,0===vr&&s('"branch"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.branch=t}(l,e[2])),null===e&&(_r=l),e}function Gn(){var e,t,r,l,o,u,a;if(o=_r,u=_r,"rport"===n.substr(_r,5).toLowerCase()?(e=n.substr(_r,5),_r+=5):(e=null,0===vr&&s('"rport"')),null!==e){if(a=_r,t=U(),null!==t){for(r=[],l=i();null!==l;)r.push(l),l=i();null!==r?t=[t,r]:(t=null,_r=a)}else t=null,_r=a;t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=u)}else e=null,_r=u;return null!==e&&(e=function(e){"undefined"!=typeof response_port&&(yr.rport=response_port.join(""))}(o)),null===e&&(_r=o),e}function jn(){var e,t,n,r,s,l;return l=_r,e=Wn(),null!==e?(t=x(),null!==t?(n=I(),null!==n?(r=x(),null!==r?(s=Bn(),null!==s?e=[e,t,n,r,s]:(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l)):(e=null,_r=l),e}function Wn(){var e,t;return t=_r,"sip"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"SIP"')),null===e&&(e=I()),null!==e&&(e=function(e,t){yr.protocol=t}(t,e)),null===e&&(_r=t),e}function Bn(){var e,t;return t=_r,"udp"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"UDP"')),null===e&&("tcp"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"TCP"')),null===e&&("tls"===n.substr(_r,3).toLowerCase()?(e=n.substr(_r,3),_r+=3):(e=null,0===vr&&s('"TLS"')),null===e&&("sctp"===n.substr(_r,4).toLowerCase()?(e=n.substr(_r,4),_r+=4):(e=null,0===vr&&s('"SCTP"')),null===e&&(e=I())))),null!==e&&(e=function(e,t){yr.transport=t}(t,e)),null===e&&(_r=t),e}function zn(){var e,t,n,r,s;return r=_r,e=Vn(),null!==e?(s=_r,t=F(),null!==t?(n=Yn(),null!==n?t=[t,n]:(t=null,_r=s)):(t=null,_r=s),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function Vn(){var e,t;return t=_r,e=pe(),null===e&&(e=ae(),null===e&&(e=ie())),null!==e&&(e=function(e){yr.host=n.substring(_r,e)}(t)),null===e&&(_r=t),e}function Yn(){var e,t,n,r,s,l,o;return l=_r,o=_r,e=i(),e=null!==e?e:"",null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?(r=i(),r=null!==r?r:"",null!==r?(s=i(),s=null!==s?s:"",null!==s?e=[e,t,n,r,s]:(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o)):(e=null,_r=o),null!==e&&(e=function(e,t){yr.port=parseInt(t.join(""))}(l,e)),null===e&&(_r=l),e}function Jn(){var e,t,n,r,s;return r=_r,s=_r,e=i(),null!==e?(t=i(),t=null!==t?t:"",null!==t?(n=i(),n=null!==n?n:"",null!==n?e=[e,t,n]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),null!==e&&(e=function(e,t){return parseInt(t.join(""))}(r,e)),null===e&&(_r=r),e}function Kn(){var e;return e=tn()}function $n(){var e,t,n,r,s,l;if(s=_r,e=Xn(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=Qn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=Qn(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function Xn(){var e,t;return t=_r,e=At(),null!==e&&(e=function(e,t){yr.expires=t}(t,e)),null===e&&(_r=t),e}function Qn(){var e;return e=Zn(),null===e&&(e=Rt()),e}function Zn(){var e,t,r,l,i;return l=_r,i=_r,"refresher"===n.substr(_r,9).toLowerCase()?(e=n.substr(_r,9),_r+=9):(e=null,0===vr&&s('"refresher"')),null!==e?(t=U(),null!==t?("uac"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"uac"')),null===r&&("uas"===n.substr(_r,3).toLowerCase()?(r=n.substr(_r,3),_r+=3):(r=null,0===vr&&s('"uas"'))),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.refresher=t.toLowerCase()}(l,e[2])),null===e&&(_r=l),e}function er(){var e,t,n,r;return r=_r,e=I(),null!==e?(t=S(),null!==t?(n=tr(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function tr(){var e,t;for(e=[],t=A(),null===t&&(t=R(),null===t&&(t=v()));null!==t;)e.push(t),t=A(),null===t&&(t=R(),null===t&&(t=v()));return e}function nr(){var e,t;for(e=[],t=c();null!==t;)e.push(t),t=c();return e}function rr(){var e,t,r;return r=_r,"uuid:"===n.substr(_r,5)?(e="uuid:",_r+=5):(e=null,0===vr&&s('"uuid:"')),null!==e?(t=sr(),null!==t?e=[e,t]:(e=null,_r=r)):(e=null,_r=r),e}function sr(){var e,t,r,l,i,o,u,a,c,h,d;return h=_r,d=_r,e=ir(),null!==e?(45===n.charCodeAt(_r)?(t="-",_r++):(t=null,0===vr&&s('"-"')),null!==t?(r=lr(),null!==r?(45===n.charCodeAt(_r)?(l="-",_r++):(l=null,0===vr&&s('"-"')),null!==l?(i=lr(),null!==i?(45===n.charCodeAt(_r)?(o="-",_r++):(o=null,0===vr&&s('"-"')),null!==o?(u=lr(),null!==u?(45===n.charCodeAt(_r)?(a="-",_r++):(a=null,0===vr&&s('"-"')),null!==a?(c=or(),null!==c?e=[e,t,r,l,i,o,u,a,c]:(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d)):(e=null,_r=d),null!==e&&(e=function(e,t){yr=n.substring(_r+5,e)}(h,e[0])),null===e&&(_r=h),e}function lr(){var e,t,n,r,s;return s=_r,e=u(),null!==e?(t=u(),null!==t?(n=u(),null!==n?(r=u(),null!==r?e=[e,t,n,r]:(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s)):(e=null,_r=s),e}function ir(){var e,t,n;return n=_r,e=lr(),null!==e?(t=lr(),null!==t?e=[e,t]:(e=null,_r=n)):(e=null,_r=n),e}function or(){var e,t,n,r;return r=_r,e=lr(),null!==e?(t=lr(),null!==t?(n=lr(),null!==n?e=[e,t,n]:(e=null,_r=r)):(e=null,_r=r)):(e=null,_r=r),e}function ur(){var e,t,n,r,s,l,i;if(s=_r,l=_r,e=K(),null===e&&(e=_t()),null!==e){for(t=[],i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==n;)t.push(n),i=_r,n=H(),null!==n?(r=Rt(),null!==r?n=[n,r]:(n=null,_r=i)):(n=null,_r=i);null!==t?e=[e,t]:(e=null,_r=l)}else e=null,_r=l;return null!==e&&(e=function(e){try{yr=new Ar(yr.uri,yr.display_name,yr.params)}catch(t){yr=-1}}(s)),null===e&&(_r=s),e}function ar(){var e,t,n,r,s,l;if(s=_r,e=cr(),null!==e){for(t=[],l=_r,n=H(),null!==n?(r=hr(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==n;)t.push(n),l=_r,n=H(),null!==n?(r=hr(),null!==r?n=[n,r]:(n=null,_r=l)):(n=null,_r=l);null!==t?e=[e,t]:(e=null,_r=s)}else e=null,_r=s;return e}function cr(){var e,t,r,l,i,o;return l=_r,i=_r,e=D(),null!==e?(o=_r,64===n.charCodeAt(_r)?(t="@",_r++):(t=null,0===vr&&s('"@"')),null!==t?(r=D(),null!==r?t=[t,r]:(t=null,_r=o)):(t=null,_r=o),t=null!==t?t:"",null!==t?e=[e,t]:(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e){yr.call_id=n.substring(_r,e)}(l)),null===e&&(_r=l),e}function hr(){var e;return e=dr(),null===e&&(e=pr(),null===e&&(e=fr(),null===e&&(e=Rt()))),e}function dr(){var e,t,r,l,i;return l=_r,i=_r,"to-tag"===n.substr(_r,6)?(e="to-tag",_r+=6):(e=null,0===vr&&s('"to-tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.to_tag=t}(l,e[2])),null===e&&(_r=l),e}function pr(){var e,t,r,l,i;return l=_r,i=_r,"from-tag"===n.substr(_r,8)?(e="from-tag",_r+=8):(e=null,0===vr&&s('"from-tag"')),null!==e?(t=U(),null!==t?(r=I(),null!==r?e=[e,t,r]:(e=null,_r=i)):(e=null,_r=i)):(e=null,_r=i),null!==e&&(e=function(e,t){yr.from_tag=t}(l,e[2])),null===e&&(_r=l),e}function fr(){var e,t;return t=_r,"early-only"===n.substr(_r,10)?(e="early-only",_r+=10):(e=null,0===vr&&s('"early-only"')),null!==e&&(e=function(e){yr.early_only=!0}(t)),null===e&&(_r=t),e}function mr(e){e.sort();for(var t=null,n=[],r=0;r<e.length;r++)e[r]!==t&&(n.push(e[r]),t=e[r]);return n}function gr(){for(var e=1,t=1,r=!1,s=0;s<Math.max(_r,Cr);s++){var l=n.charAt(s);"\n"===l?(r||e++,t=1,r=!1):"\r"===l||"\u2028"===l||"\u2029"===l?(e++,t=1,r=!0):(t++,r=!1)}return{line:e,column:t}}var Tr={CRLF:l,DIGIT:i,ALPHA:o,HEXDIG:u,WSP:a,OCTET:c,DQUOTE:h,SP:d,HTAB:p,alphanum:f,reserved:m,unreserved:g,mark:T,escaped:_,LWS:v,SWS:C,HCOLON:S,TEXT_UTF8_TRIM:E,TEXT_UTF8char:A,UTF8_NONASCII:y,UTF8_CONT:R,LHEX:b,token:I,token_nodot:w,separators:N,word:D,STAR:O,SLASH:x,EQUAL:U,LPAREN:M,RPAREN:P,RAQUOT:q,LAQUOT:L,COMMA:k,SEMI:H,COLON:F,LDQUOT:G,RDQUOT:j,comment:W,ctext:B,quoted_string:z,quoted_string_clean:V,qdtext:Y,quoted_pair:J,SIP_URI_noparams:K,SIP_URI:$,uri_scheme:X,uri_scheme_sips:Q,uri_scheme_sip:Z,userinfo:ee,user:te,user_unreserved:ne,password:re,hostport:se,host:le,hostname:ie,domainlabel:oe,toplabel:ue,IPv6reference:ae,IPv6address:ce,h16:he,ls32:de,IPv4address:pe,dec_octet:fe,port:me,uri_parameters:ge,uri_parameter:Te,transport_param:_e,user_param:ve,method_param:Ce,ttl_param:Se,maddr_param:Ee,lr_param:Ae,other_param:ye,pname:Re,pvalue:be,paramchar:Ie,param_unreserved:we,headers:Ne,header:De,hname:Oe,hvalue:xe,hnv_unreserved:Ue,Request_Response:Me,Request_Line:Pe,Request_URI:qe,absoluteURI:Le,hier_part:ke,net_path:He,abs_path:Fe,opaque_part:Ge,uric:je,uric_no_slash:We,path_segments:Be,segment:ze,param:Ve,pchar:Ye,scheme:Je,authority:Ke,srvr:$e,reg_name:Xe,query:Qe,SIP_Version:Ze,INVITEm:et,ACKm:tt,OPTIONSm:nt,BYEm:rt,CANCELm:st,REGISTERm:lt,SUBSCRIBEm:it,NOTIFYm:ot,REFERm:ut,Method:at,Status_Line:ct,Status_Code:ht,extension_code:dt,Reason_Phrase:pt,
Allow_Events:ft,Call_ID:mt,Contact:gt,contact_param:Tt,name_addr:_t,display_name:vt,contact_params:Ct,c_p_q:St,c_p_expires:Et,delta_seconds:At,qvalue:yt,generic_param:Rt,gen_value:bt,Content_Disposition:It,disp_type:wt,disp_param:Nt,handling_param:Dt,Content_Encoding:Ot,Content_Length:xt,Content_Type:Ut,media_type:Mt,m_type:Pt,discrete_type:qt,composite_type:Lt,extension_token:kt,x_token:Ht,m_subtype:Ft,m_parameter:Gt,m_value:jt,CSeq:Wt,CSeq_value:Bt,Expires:zt,Event:Vt,event_type:Yt,From:Jt,from_param:Kt,tag_param:$t,Max_Forwards:Xt,Min_Expires:Qt,Name_Addr_Header:Zt,Proxy_Authenticate:en,challenge:tn,other_challenge:nn,auth_param:rn,digest_cln:sn,realm:ln,realm_value:on,domain:un,URI:an,nonce:cn,nonce_value:hn,opaque:dn,stale:pn,algorithm:fn,qop_options:mn,qop_value:gn,Proxy_Require:Tn,Record_Route:_n,rec_route:vn,Reason:Cn,reason_param:Sn,reason_cause:En,Require:An,Route:yn,route_param:Rn,Subscription_State:bn,substate_value:In,subexp_params:wn,event_reason_value:Nn,Subject:Dn,Supported:On,To:xn,to_param:Un,Via:Mn,via_param:Pn,via_params:qn,via_ttl:Ln,via_maddr:kn,via_received:Hn,via_branch:Fn,response_port:Gn,sent_protocol:jn,protocol_name:Wn,transport:Bn,sent_by:zn,via_host:Vn,via_port:Yn,ttl:Jn,WWW_Authenticate:Kn,Session_Expires:$n,s_e_expires:Xn,s_e_params:Qn,s_e_refresher:Zn,extension_header:er,header_value:tr,message_body:nr,uuid_URI:rr,uuid:sr,hex4:lr,hex8:ir,hex12:or,Refer_To:ur,Replaces:ar,call_id:cr,replaces_param:hr,to_tag:dr,from_tag:pr,early_flag:fr};if(void 0!==r){if(void 0===Tr[r])throw new Error("Invalid rule name: "+t(r)+".")}else r="CRLF";var _r=0,vr=0,Cr=0,Sr=[],Er=e("./URI"),Ar=e("./NameAddrHeader"),yr={},Rr=Tr[r]();if(null===Rr||_r!==n.length){var br=Math.max(_r,Cr),Ir=br<n.length?n.charAt(br):null,wr=gr();return new this.SyntaxError(mr(Sr),Ir,br,wr.line,wr.column),-1}return yr},toSource:function(){return this._source}};return n.SyntaxError=function(e,n,r,s,l){function i(e,n){var r,s;switch(e.length){case 0:r="end of input";break;case 1:r=e[0];break;default:r=e.slice(0,e.length-1).join(", ")+" or "+e[e.length-1]}return s=n?t(n):"end of input","Expected "+r+" but "+s+" found."}this.name="SyntaxError",this.expected=e,this.found=n,this.message=i(e,n),this.offset=r,this.line=s,this.column=l},n.SyntaxError.prototype=Error.prototype,n}()},{"./NameAddrHeader":9,"./URI":24}],7:[function(e,t,n){var r=e("debug")("JsSIP"),s=e("../package.json");r("version %s",s.version);var l=e("rtcninja"),i=e("./Constants"),o=e("./Exceptions"),u=e("./Utils"),a=e("./UA"),c=e("./URI"),h=e("./NameAddrHeader"),d=e("./Grammar"),p=e("./Socket"),f=e("./WebSocketInterface"),m=t.exports={C:i,Exceptions:o,Utils:u,UA:a,URI:c,NameAddrHeader:h,Socket:p,WebSocketInterface:f,Grammar:d,debug:e("debug"),rtcninja:l};Object.defineProperties(m,{name:{get:function(){return s.title}},version:{get:function(){return s.version}}})},{"../package.json":47,"./Constants":1,"./Exceptions":5,"./Grammar":6,"./NameAddrHeader":9,"./Socket":19,"./UA":23,"./URI":24,"./Utils":25,"./WebSocketInterface":26,debug:33,rtcninja:38}],8:[function(e,t,n){function r(e){this.ua=e,this.data={},l.EventEmitter.call(this)}t.exports=r;var s=e("util"),l=e("events"),i=e("./Constants"),o=e("./SIPMessage"),u=e("./Utils"),a=e("./RequestSender"),c=e("./Transactions"),h=e("./Exceptions");s.inherits(r,l.EventEmitter),r.prototype.send=function(e,t,n){var r,s,l,u,c,h=e;if(void 0===e||void 0===t)throw new TypeError("Not enough arguments");if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+h);n=n||{},c=n.extraHeaders&&n.extraHeaders.slice()||[],u=n.eventHandlers||{},l=n.contentType||"text/plain",this.content_type=l;for(s in u)this.on(s,u[s]);this.closed=!1,this.ua.applicants[this]=this,c.push("Content-Type: "+l),this.request=new o.OutgoingRequest(i.MESSAGE,e,this.ua,null,c),t?(this.request.body=t,this.content=t):this.content=null,r=new a(this,this.ua),this.newMessage("local",this.request),r.send()},r.prototype.receiveResponse=function(e){var t;if(!this.closed)switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):delete this.ua.applicants[this],this.emit("succeeded",{originator:"remote",response:e});break;default:delete this.ua.applicants[this],t=u.sipErrorCause(e.status_code),this.emit("failed",{originator:"remote",response:e,cause:t})}},r.prototype.onRequestTimeout=function(){this.closed||this.emit("failed",{originator:"system",cause:i.causes.REQUEST_TIMEOUT})},r.prototype.onTransportError=function(){this.closed||this.emit("failed",{originator:"system",cause:i.causes.CONNECTION_ERROR})},r.prototype.close=function(){this.closed=!0,delete this.ua.applicants[this]},r.prototype.init_incoming=function(e){var t;this.request=e,this.content_type=e.getHeader("Content-Type"),e.body?this.content=e.body:this.content=null,this.newMessage("remote",e),t=this.ua.transactions.nist[e.via_branch],!t||t.state!==c.C.STATUS_TRYING&&t.state!==c.C.STATUS_PROCEEDING||e.reply(200)},r.prototype.accept=function(e){e=e||{};var t=e.extraHeaders&&e.extraHeaders.slice()||[],n=e.body;if("incoming"!==this.direction)throw new h.NotSupportedError('"accept" not supported for outgoing Message');this.request.reply(200,null,t,n)},r.prototype.reject=function(e){e=e||{};var t=e.status_code||480,n=e.reason_phrase,r=e.extraHeaders&&e.extraHeaders.slice()||[],s=e.body;if("incoming"!==this.direction)throw new h.NotSupportedError('"reject" not supported for outgoing Message');if(300>t||t>=700)throw new TypeError("Invalid status_code: "+t);this.request.reply(t,n,r,s)},r.prototype.newMessage=function(e,t){"remote"===e?(this.direction="incoming",this.local_identity=t.to,this.remote_identity=t.from):"local"===e&&(this.direction="outgoing",this.local_identity=t.from,this.remote_identity=t.to),this.ua.newMessage({originator:e,message:this,request:t})}},{"./Constants":1,"./Exceptions":5,"./RequestSender":17,"./SIPMessage":18,"./Transactions":21,"./Utils":25,events:28,util:32}],9:[function(e,t,n){function r(e,t,n){var r;if(!(e&&e instanceof s))throw new TypeError('missing or invalid "uri" parameter');this.uri=e,this.parameters={};for(r in n)this.setParam(r,n[r]);Object.defineProperties(this,{display_name:{get:function(){return t},set:function(e){t=0===e?"0":e}}})}t.exports=r;var s=e("./URI"),l=e("./Grammar");r.prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]="undefined"==typeof t||null===t?null:t.toString())},getParam:function(e){return e?this.parameters[e.toLowerCase()]:void 0},hasParam:function(e){return e?this.parameters.hasOwnProperty(e.toLowerCase())&&!0||!1:void 0},deleteParam:function(e){var t;return e=e.toLowerCase(),this.parameters.hasOwnProperty(e)?(t=this.parameters[e],delete this.parameters[e],t):void 0},clearParams:function(){this.parameters={}},clone:function(){return new r(this.uri.clone(),this.display_name,JSON.parse(JSON.stringify(this.parameters)))},toString:function(){var e,t;e=this.display_name||0===this.display_name?'"'+this.display_name+'" ':"",e+="<"+this.uri.toString()+">";for(t in this.parameters)e+=";"+t,null!==this.parameters[t]&&(e+="="+this.parameters[t]);return e}},r.parse=function(e){return e=l.parse(e,"Name_Addr_Header"),-1!==e?e:void 0}},{"./Grammar":6,"./URI":24}],10:[function(e,t,n){function r(e,t){var n=t,r=0,s=0;if(e.substring(n,n+2).match(/(^\r\n)/))return-2;for(;0===r;){if(s=e.indexOf("\r\n",n),-1===s)return s;!e.substring(s+2,s+4).match(/(^\r\n)/)&&e.charAt(s+2).match(/(^\s+)/)?n=s+2:r=s}return r}function s(e,t,n,r){var s,l,i,a,c=t.indexOf(":",n),h=t.substring(n,c).trim(),d=t.substring(c+1,r).trim();switch(h.toLowerCase()){case"via":case"v":e.addHeader("via",d),1===e.getHeaders("via").length?(a=e.parseHeader("Via"),a&&(e.via=a,e.via_branch=a.branch)):a=0;break;case"from":case"f":e.setHeader("from",d),a=e.parseHeader("from"),a&&(e.from=a,e.from_tag=a.getParam("tag"));break;case"to":case"t":e.setHeader("to",d),a=e.parseHeader("to"),a&&(e.to=a,e.to_tag=a.getParam("tag"));break;case"record-route":for(a=o.parse(d,"Record_Route"),-1===a&&(a=void 0),i=a.length,l=0;i>l;l++)s=a[l],e.addHeader("record-route",d.substring(s.possition,s.offset)),e.headers["Record-Route"][e.getHeaders("record-route").length-1].parsed=s.parsed;break;case"call-id":case"i":e.setHeader("call-id",d),a=e.parseHeader("call-id"),a&&(e.call_id=d);break;case"contact":case"m":for(a=o.parse(d,"Contact"),-1===a&&(a=void 0),i=a.length,l=0;i>l;l++)s=a[l],e.addHeader("contact",d.substring(s.possition,s.offset)),e.headers.Contact[e.getHeaders("contact").length-1].parsed=s.parsed;break;case"content-length":case"l":e.setHeader("content-length",d),a=e.parseHeader("content-length");break;case"content-type":case"c":e.setHeader("content-type",d),a=e.parseHeader("content-type");break;case"cseq":e.setHeader("cseq",d),a=e.parseHeader("cseq"),a&&(e.cseq=a.value),e instanceof u.IncomingResponse&&(e.method=a.method);break;case"max-forwards":e.setHeader("max-forwards",d),a=e.parseHeader("max-forwards");break;case"www-authenticate":e.setHeader("www-authenticate",d),a=e.parseHeader("www-authenticate");break;case"proxy-authenticate":e.setHeader("proxy-authenticate",d),a=e.parseHeader("proxy-authenticate");break;case"session-expires":case"x":e.setHeader("session-expires",d),a=e.parseHeader("session-expires"),a&&(e.session_expires=a.expires,e.session_expires_refresher=a.refresher);break;case"refer-to":case"r":e.setHeader("refer-to",d),a=e.parseHeader("refer-to"),a&&(e.refer_to=a);break;case"replaces":e.setHeader("replaces",d),a=e.parseHeader("replaces"),a&&(e.replaces=a);break;case"event":case"o":e.setHeader("event",d),a=e.parseHeader("event"),a&&(e.event=a);break;default:e.setHeader(h,d),a=0}return void 0===a?{error:'error parsing header "'+h+'"'}:!0}var l={};t.exports=l;var i=e("debug")("JsSIP:ERROR:Parser");i.log=console.warn.bind(console);var o=e("./Grammar"),u=e("./SIPMessage");l.parseMessage=function(e,t){var n,l,a,c,h,d=0,p=e.indexOf("\r\n");if(-1===p)return void i("parseMessage() | no CRLF found, not a SIP message");if(l=e.substring(0,p),h=o.parse(l,"Request_Response"),-1===h)return void i('parseMessage() | error parsing first line of SIP message: "'+l+'"');for(h.status_code?(n=new u.IncomingResponse,n.status_code=h.status_code,n.reason_phrase=h.reason_phrase):(n=new u.IncomingRequest(t),n.method=h.method,n.ruri=h.uri),n.data=e,d=p+2;;){if(p=r(e,d),-2===p){c=d+2;break}if(-1===p)return void i("parseMessage() | malformed message");if(h=s(n,e,d,p),h!==!0)return void i("parseMessage() |",h.error);d=p+2}return n.hasHeader("content-length")?(a=n.getHeader("content-length"),n.body=e.substr(c,a)):n.body=e.substring(c),n}},{"./Grammar":6,"./SIPMessage":18,debug:33}],11:[function(e,t,n){function r(e){G("new"),this.ua=e,this.status=k.STATUS_NULL,this.dialog=null,this.earlyDialogs={},this.connection=null,this.is_confirmed=!1,this.late_sdp=!1,this.rtcOfferConstraints=null,this.rtcAnswerConstraints=null,this.localMediaStream=null,this.localMediaStreamLocallyGenerated=!1,this.rtcReady=!0,this.timers={ackTimer:null,expiresTimer:null,invite2xxTimer:null,userNoAnswerTimer:null},this.direction=null,this.local_identity=null,this.remote_identity=null,this.start_time=null,this.end_time=null,this.tones=null,this.audioMuted=!1,this.videoMuted=!1,this.localHold=!1,this.remoteHold=!1,this.sessionTimers={enabled:this.ua.configuration.session_timers,defaultExpires:z.SESSION_EXPIRES,currentExpires:null,running:!1,refresher:!1,timer:null},this.referSubscribers={},this.data={},F.EventEmitter.call(this)}function s(e,t){var n=this,r=K.T1;this.timers.invite2xxTimer=setTimeout(function s(){n.status===k.STATUS_WAITING_FOR_ACK&&(e.reply(200,null,["Contact: "+n.contact],t),r<K.T2&&(r=2*r,r>K.T2&&(r=K.T2)),n.timers.invite2xxTimer=setTimeout(s,r))},r)}function l(){var e=this;this.timers.ackTimer=setTimeout(function(){e.status===k.STATUS_WAITING_FOR_ACK&&(G("no ACK received, terminating the session"),clearTimeout(e.timers.invite2xxTimer),v.call(e,z.BYE),x.call(e,"remote",null,z.causes.NO_ACK))},K.TIMER_H)}function i(e,t){var n=this;this.connection=new W.RTCPeerConnection(e,t),this.connection.onaddstream=function(e,t){n.emit("addstream",{stream:t})},this.connection.onremovestream=function(e,t){n.emit("removestream",{stream:t})},this.connection.oniceconnectionstatechange=function(e,t){n.emit("iceconnectionstatechange",{state:t}),"failed"===t&&n.terminate({cause:z.causes.RTP_TIMEOUT,status_code:200,reason_phrase:z.causes.RTP_TIMEOUT})}}function o(e,t,n,r){function s(r){i.onicecandidate=function(n,r){if(!r){if(i.onicecandidate=null,l.rtcReady=!0,t){var s={originator:"local",type:e,sdp:i.localDescription.sdp};l.emit("sdp",s),t(s.sdp)}t=null}},i.setLocalDescription(r,function(){if("complete"===i.iceGatheringState){if(l.rtcReady=!0,t){var n={originator:"local",type:e,sdp:i.localDescription.sdp};l.emit("sdp",n),t(n.sdp)}t=null}},function(e){l.rtcReady=!0,n&&n(e)})}G("createLocalDescription()");var l=this,i=this.connection;if(this.rtcReady=!1,"offer"===e)i.createOffer(s,function(e){l.rtcReady=!0,n&&n(e)},r);else{if("answer"!==e)throw new Error('createLocalDescription() | type must be "offer" or "answer", but "'+e+'" was given');i.createAnswer(s,function(e){l.rtcReady=!0,n&&n(e)},r)}}function u(e,t,n){var r,s,l="UAS"===t?e.to_tag:e.from_tag,i="UAS"===t?e.from_tag:e.to_tag,o=e.call_id+l+i;return s=this.earlyDialogs[o],n?s?!0:(s=new X(this,e,t,X.C.STATUS_EARLY),s.error?(G(s.error),U.call(this,"remote",e,z.causes.INTERNAL_ERROR),!1):(this.earlyDialogs[o]=s,!0)):(this.from_tag=e.from_tag,this.to_tag=e.to_tag,s?(s.update(e,t),this.dialog=s,delete this.earlyDialogs[o],!0):(r=new X(this,e,t),r.error?(G(r.error),U.call(this,"remote",e,z.causes.INTERNAL_ERROR),!1):(this.dialog=r,!0)))}function a(e){function t(t){t=t||{},f=!0;var n=t.status_code||403,r=t.reason_phrase||"",s=t.extraHeaders&&t.extraHeaders.slice()||[];if(this.status!==k.STATUS_CONFIRMED)return!1;if(300>n||n>=700)throw new TypeError("Invalid status_code: "+n);e.reply(n,r,s)}function n(){r(function(t){var n=["Contact: "+h.contact];E.call(h,e,n),h.late_sdp&&(t=C.call(h,t)),e.reply(200,null,n,t,function(){h.status=k.STATUS_WAITING_FOR_ACK,s.call(h,e,t),l.call(h)}),"function"==typeof m.callback&&m.callback()},function(){e.reply(500)})}function r(e,t){h.late_sdp?o.call(h,"offer",e,t,h.rtcOfferConstraints):(h.remoteHold===!0&&p===!1?(h.remoteHold=!1,P.call(h,"remote")):h.remoteHold===!1&&p===!0&&(h.remoteHold=!0,M.call(h,"remote")),o.call(h,"answer",e,t,h.rtcAnswerConstraints))}G("receiveReinvite()");var i,u,a,c,h=this,d=e.getHeader("Content-Type"),p=!1,f=!1,m={request:e,callback:void 0,reject:t.bind(this)};if(this.emit("reinvite",m),!f)if(e.body){if(this.late_sdp=!1,"application/sdp"!==d)return G("invalid Content-Type"),void e.reply(415);for(i=e.parseSDP(),u=0;u<i.media.length;u++)if(c=i.media[u],-1!==re.indexOf(c.type)){if(a=c.direction||i.direction||"sendrecv","sendonly"!==a&&"inactive"!==a){p=!1;break}p=!0}var g={originator:"remote",type:"offer",sdp:e.body};this.emit("sdp",g),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:g.sdp}),n,function(){e.reply(488)})}else this.late_sdp=!0,n()}function c(e){function t(t){t=t||{},a=!0;var n=t.status_code||403,r=t.reason_phrase||"",s=t.extraHeaders&&t.extraHeaders.slice()||[];if(this.status!==k.STATUS_CONFIRMED)return!1;if(300>n||n>=700)throw new TypeError("Invalid status_code: "+n);e.reply(n,r,s)}G("receiveUpdate()");var n,r,s,l,i=this,u=e.getHeader("Content-Type"),a=!1,c=!1,h={request:e,callback:void 0,reject:t.bind(this)};if(this.emit("update",h),!a){if(!e.body){var d=[];return E.call(this,e,d),void e.reply(200,null,d)}if("application/sdp"!==u)return G("invalid Content-Type"),void e.reply(415);for(n=e.parseSDP(),r=0;r<n.media.length;r++)if(l=n.media[r],-1!==re.indexOf(l.type)){if(s=l.direction||n.direction||"sendrecv","sendonly"!==s&&"inactive"!==s){c=!1;break}c=!0}var p={originator:"remote",type:"offer",sdp:e.body};this.emit("sdp",p),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:p.sdp}),function(){i.remoteHold===!0&&c===!1?(i.remoteHold=!1,P.call(i,"remote")):i.remoteHold===!1&&c===!0&&(i.remoteHold=!0,M.call(i,"remote")),o.call(i,"answer",function(t){var n=["Contact: "+i.contact];E.call(i,e,n),e.reply(200,null,n,t),"function"==typeof h.callback&&h.callback()},function(){e.reply(500)})},function(){e.reply(488)},this.rtcAnswerConstraints)}}function h(e){function t(t,n){var l,i;return n=n||{},t="function"==typeof t?t:null,this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:(l=new r(this.ua),l.on("progress",function(e){s.notify(e.response.status_code,e.response.reason_phrase)}),l.on("accepted",function(e){s.notify(e.response.status_code,e.response.reason_phrase)}),l.on("failed",function(e){e.message?s.notify(e.message.status_code,e.message.reason_phrase):s.notify(487,e.cause)}),e.refer_to.uri.hasHeader("replaces")&&(i=decodeURIComponent(e.refer_to.uri.getHeader("replaces")),n.extraHeaders=n.extraHeaders||[],n.extraHeaders.push("Replaces: "+i)),void l.connect(e.refer_to.uri.toAor(),n,t))}function n(){s.notify(603)}G("receiveRefer()");var s,l=this;return void 0===typeof e.refer_to?(G("no Refer-To header field present in REFER"),void e.reply(400)):e.refer_to.uri.scheme!==z.SIP?(G("Refer-To header field points to a non-SIP URI scheme"),void e.reply(416)):(e.reply(202),s=new te(this,e.cseq),void this.emit("refer",{request:e,accept:function(e,n){t.call(l,e,n)},reject:function(){n.call(l)}}))}function d(e){switch(G("receiveNotify()"),void 0===typeof e.event&&e.reply(400),e.event.event){case"refer":var t=e.event.params.id,n=this.referSubscribers[t];if(!n)return void e.reply(481,"Subscription does not exist");n.receiveNotify(e),e.reply(200);break;default:e.reply(489)}}function p(e){function t(t){var n;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:(n=new r(this.ua),n.on("confirmed",function(){s.terminate()}),void n.init_incoming(e,t))}function n(){G("Replaced INVITE rejected by the user"),e.reply(486)}G("receiveReplaces()");var s=this;this.emit("replaces",{request:e,accept:function(e){t.call(s,e)},reject:function(){n.call(s)}})}function f(e,t,n){function r(e){u.status!==k.STATUS_TERMINATED&&(u.localMediaStream=e,e&&u.connection.addStream(e),u.emit("peerconnection",{peerconnection:u.connection}),w.call(u,u.request),o.call(u,"offer",l,i,t))}function s(){u.status!==k.STATUS_TERMINATED&&U.call(u,"local",null,z.causes.USER_DENIED_MEDIA_ACCESS)}function l(e){u.isCanceled||u.status===k.STATUS_TERMINATED||(u.request.body=e,u.status=k.STATUS_INVITE_SENT,u.emit("sending",{request:u.request}),a.send())}function i(){u.status!==k.STATUS_TERMINATED&&U.call(u,"system",null,z.causes.WEBRTC_ERROR)}var u=this,a=new Q(u,this.ua);this.receiveResponse=function(e){m.call(u,e)},n?setTimeout(function(){r(n)}):e.audio||e.video?(this.localMediaStreamLocallyGenerated=!0,W.getUserMedia(e,r,s)):r(null)}function m(e){G("receiveInviteResponse()");var t,n,r,s=this;if(this.dialog&&e.status_code>=200&&e.status_code<=299)return this.dialog.id.call_id===e.call_id&&this.dialog.id.local_tag===e.from_tag&&this.dialog.id.remote_tag===e.to_tag?void v.call(this,z.ACK):(n=new X(this,e,"UAC"),void 0!==n.error?void G(n.error):(n.sendRequest({owner:{status:k.STATUS_TERMINATED},onRequestTimeout:function(){},onTransportError:function(){},onDialogError:function(){},receiveResponse:function(){}},z.ACK),void n.sendRequest({owner:{status:k.STATUS_TERMINATED},onRequestTimeout:function(){},onTransportError:function(){},onDialogError:function(){},receiveResponse:function(){}},z.BYE)));if(this.isCanceled)return this.isCanceled=!1,void(e.status_code>=100&&e.status_code<200?this.request.cancel(this.cancelReason):e.status_code>=200&&e.status_code<299&&_.call(this,e));if(this.status===k.STATUS_INVITE_SENT||this.status===k.STATUS_1XX_RECEIVED)switch(!0){case/^100$/.test(e.status_code):this.status=k.STATUS_1XX_RECEIVED;break;case/^1[0-9]{2}$/.test(e.status_code):if(!e.to_tag){G("1xx response received without to tag");break}if(e.hasHeader("contact")&&!u.call(this,e,"UAC",!0))break;if(this.status=k.STATUS_1XX_RECEIVED,N.call(this,"remote",e),!e.body)break;r={originator:"remote",type:"pranswer",sdp:e.body},this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"pranswer",sdp:r.sdp}),null,null);break;case/^2[0-9]{2}$/.test(e.status_code):if(this.status=k.STATUS_CONFIRMED,!e.body){_.call(this,e,400,z.causes.MISSING_SDP),U.call(this,"remote",e,z.causes.BAD_MEDIA_DESCRIPTION);break}if(!u.call(this,e,"UAC"))break;r={originator:"remote",type:"answer",sdp:e.body},this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:r.sdp}),function(){A.call(s,e),D.call(s,"remote",e),v.call(s,z.ACK),O.call(s,"local",null)},function(){_.call(s,e,488,"Not Acceptable Here"),U.call(s,"remote",e,z.causes.BAD_MEDIA_DESCRIPTION)});break;default:t=J.sipErrorCause(e.status_code),U.call(this,"remote",e,t)}}function g(e){function t(e){if(r.status!==k.STATUS_TERMINATED&&(v.call(r,z.ACK),!u)){if(A.call(r,e),!e.body)return void n();if("application/sdp"!==e.getHeader("Content-Type"))return void n();var t={originator:"remote",type:"answer",sdp:e.body};r.emit("sdp",t),r.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:t.sdp}),function(){l.succeeded&&l.succeeded(e)},function(){n()})}}function n(e){l.failed&&l.failed(e)}G("sendReinvite()"),e=e||{};var r=this,s=e.extraHeaders||[],l=e.eventHandlers||{},i=e.rtcOfferConstraints||this.rtcOfferConstraints||null,u=!1;s.push("Contact: "+this.contact),s.push("Content-Type: application/sdp"),this.sessionTimers.running&&s.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+(this.sessionTimers.refresher?"uac":"uas")),o.call(this,"offer",function(e){e=C.call(r,e);var l=new Z(r,z.INVITE);l.send({extraHeaders:s,body:e,eventHandlers:{onSuccessResponse:function(e){t(e),u=!0},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})},function(){n()},i)}function T(e){function t(e){if(r.status!==k.STATUS_TERMINATED&&!a)if(A.call(r,e),u){if(!e.body)return void n();if("application/sdp"!==e.getHeader("Content-Type"))return void n();var t={originator:"remote",type:"answer",sdp:e.body};r.emit("sdp",t),r.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:t.sdp}),function(){l.succeeded&&l.succeeded(e)},function(){n()})}else l.succeeded&&l.succeeded(e)}function n(e){l.failed&&l.failed(e)}G("sendUpdate()"),e=e||{};var r=this,s=e.extraHeaders||[],l=e.eventHandlers||{},i=e.rtcOfferConstraints||this.rtcOfferConstraints||null,u=e.sdpOffer||!1,a=!1;if(s.push("Contact: "+this.contact),this.sessionTimers.running&&s.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+(this.sessionTimers.refresher?"uac":"uas")),u)s.push("Content-Type: application/sdp"),o.call(this,"offer",function(e){e=C.call(r,e);var l=new Z(r,z.UPDATE);l.send({extraHeaders:s,body:e,eventHandlers:{onSuccessResponse:function(e){t(e),a=!0},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})},function(){n()},i);else{var c=new Z(r,z.UPDATE);c.send({extraHeaders:s,eventHandlers:{onSuccessResponse:function(e){t(e)},onErrorResponse:function(e){n(e)},onTransportError:function(){r.onTransportError()},onRequestTimeout:function(){r.onRequestTimeout()},onDialogError:function(){r.onDialogError()}}})}}function _(e,t,n){G("acceptAndTerminate()");var r=[];t&&(n=n||z.REASON_PHRASE[t]||"",r.push("Reason: SIP ;cause="+t+'; text="'+n+'"')),(this.dialog||u.call(this,e,"UAC"))&&(v.call(this,z.ACK),v.call(this,z.BYE,{extraHeaders:r})),this.status=k.STATUS_TERMINATED}function v(e,t){G("sendRequest()");var n=new Z(this,e);n.send(t)}function C(e){var t,n,r;if(!this.localHold&&!this.remoteHold)return e;if(e=B.parse(e),this.localHold&&!this.remoteHold)for(G("mangleOffer() | me on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction?"sendrecv"===r.direction?r.direction="sendonly":"recvonly"===r.direction&&(r.direction="inactive"):r.direction="sendonly");else if(this.localHold&&this.remoteHold)for(G("mangleOffer() | both on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction="inactive");else if(this.remoteHold)for(G("mangleOffer() | remote on hold, mangling offer"),n=e.media.length,t=0;n>t;t++)r=e.media[t],-1!==re.indexOf(r.type)&&(r.direction?"sendrecv"===r.direction?r.direction="recvonly":"recvonly"===r.direction&&(r.direction="inactive"):r.direction="recvonly");return B.write(e)}function S(){var e=!0,t=!0;(this.localHold||this.remoteHold)&&(e=!1,t=!1),this.audioMuted&&(e=!1),this.videoMuted&&(t=!1),R.call(this,!e),b.call(this,!t)}function E(e,t){if(this.sessionTimers.enabled){var n;e.session_expires&&e.session_expires>=z.MIN_SESSION_EXPIRES?(this.sessionTimers.currentExpires=e.session_expires,n=e.session_expires_refresher||"uas"):(this.sessionTimers.currentExpires=this.sessionTimers.defaultExpires,n="uas"),t.push("Session-Expires: "+this.sessionTimers.currentExpires+";refresher="+n),this.sessionTimers.refresher="uas"===n,y.call(this)}}function A(e){if(this.sessionTimers.enabled){var t;e.session_expires&&e.session_expires>=z.MIN_SESSION_EXPIRES?(this.sessionTimers.currentExpires=e.session_expires,t=e.session_expires_refresher||"uac"):(this.sessionTimers.currentExpires=this.sessionTimers.defaultExpires,t="uac"),this.sessionTimers.refresher="uac"===t,y.call(this)}}function y(){var e=this,t=this.sessionTimers.currentExpires;this.sessionTimers.running=!0,clearTimeout(this.sessionTimers.timer),this.sessionTimers.refresher?this.sessionTimers.timer=setTimeout(function(){e.status!==k.STATUS_TERMINATED&&(G("runSessionTimer() | sending session refresh request"),T.call(e,{eventHandlers:{succeeded:function(t){A.call(e,t)}}}))},500*t):this.sessionTimers.timer=setTimeout(function(){e.status!==k.STATUS_TERMINATED&&(j("runSessionTimer() | timer expired, terminating the session"),e.terminate({cause:z.causes.REQUEST_TIMEOUT,status_code:408,reason_phrase:"Session Timer Expired"}))},1100*t)}function R(e){var t,n,r,s,l,i=this.connection.getLocalStreams();for(r=i.length,t=0;r>t;t++)for(l=i[t].getAudioTracks(),s=l.length,n=0;s>n;n++)l[n].enabled=!e}function b(e){var t,n,r,s,l,i=this.connection.getLocalStreams();for(r=i.length,t=0;r>t;t++)for(l=i[t].getVideoTracks(),s=l.length,n=0;s>n;n++)l[n].enabled=!e}function I(e,t){G("newRTCSession"),this.ua.newRTCSession({originator:e,session:this,request:t})}function w(e){G("session connecting"),this.emit("connecting",{request:e})}function N(e,t){G("session progress"),this.emit("progress",{originator:e,response:t||null})}function D(e,t){G("session accepted"),this.start_time=new Date,this.emit("accepted",{originator:e,response:t||null})}function O(e,t){G("session confirmed"),this.is_confirmed=!0,this.emit("confirmed",{originator:e,ack:t||null})}function x(e,t,n){G("session ended"),this.end_time=new Date,this.close(),this.emit("ended",{originator:e,message:t||null,cause:n})}function U(e,t,n){G("session failed"),this.close(),this.emit("failed",{originator:e,message:t||null,cause:n})}function M(e){G("session onhold"),S.call(this),this.emit("hold",{originator:e})}function P(e){G("session onunhold"),S.call(this),this.emit("unhold",{originator:e})}function q(e){G("session onmute"),S.call(this),this.emit("muted",{audio:e.audio,video:e.video})}function L(e){G("session onunmute"),S.call(this),this.emit("unmuted",{audio:e.audio,video:e.video})}t.exports=r;var k={STATUS_NULL:0,STATUS_INVITE_SENT:1,STATUS_1XX_RECEIVED:2,STATUS_INVITE_RECEIVED:3,STATUS_WAITING_FOR_ANSWER:4,STATUS_ANSWERED:5,STATUS_WAITING_FOR_ACK:6,STATUS_CANCELED:7,STATUS_TERMINATED:8,STATUS_CONFIRMED:9};r.C=k;var H=e("util"),F=e("events"),G=e("debug")("JsSIP:RTCSession"),j=e("debug")("JsSIP:ERROR:RTCSession");j.log=console.warn.bind(console);var W=e("rtcninja"),B=e("sdp-transform"),z=e("./Constants"),V=e("./Exceptions"),Y=e("./Transactions"),J=e("./Utils"),K=e("./Timers"),$=e("./SIPMessage"),X=e("./Dialog"),Q=e("./RequestSender"),Z=e("./RTCSession/Request"),ee=e("./RTCSession/DTMF"),te=e("./RTCSession/ReferNotifier"),ne=e("./RTCSession/ReferSubscriber"),re=["audio","video"];H.inherits(r,F.EventEmitter),r.prototype.isInProgress=function(){switch(this.status){case k.STATUS_NULL:case k.STATUS_INVITE_SENT:case k.STATUS_1XX_RECEIVED:case k.STATUS_INVITE_RECEIVED:case k.STATUS_WAITING_FOR_ANSWER:return!0;default:return!1}},r.prototype.isEstablished=function(){switch(this.status){case k.STATUS_ANSWERED:case k.STATUS_WAITING_FOR_ACK:case k.STATUS_CONFIRMED:return!0;default:return!1}},r.prototype.isEnded=function(){switch(this.status){case k.STATUS_CANCELED:case k.STATUS_TERMINATED:return!0;default:return!1}},r.prototype.isMuted=function(){return{audio:this.audioMuted,video:this.videoMuted}},r.prototype.isOnHold=function(){return{local:this.localHold,remote:this.remoteHold}},r.prototype.isReadyToReOffer=function(){return this.rtcReady?this.dialog?this.dialog.uac_pending_reply===!0||this.dialog.uas_pending_reply===!0?(G("isReadyToReOffer() | there is another INVITE/UPDATE transaction in progress"),!1):!0:(G("isReadyToReOffer() | session not established yet"),!1):(G("isReadyToReOffer() | internal WebRTC status not ready"),!1)},r.prototype.connect=function(e,t,n){G("connect()"),t=t||{};var r,s,l=e,o=t.eventHandlers||{},u=t.extraHeaders&&t.extraHeaders.slice()||[],a=t.mediaConstraints||{audio:!0,video:!0},c=t.mediaStream||null,h=t.pcConfig||{iceServers:[]},d=t.rtcConstraints||null,p=t.rtcOfferConstraints||null;if(this.rtcOfferConstraints=p,this.rtcAnswerConstraints=t.rtcAnswerConstraints||null,this.sessionTimers.enabled&&J.isDecimal(t.sessionTimersExpires)&&(t.sessionTimersExpires>=z.MIN_SESSION_EXPIRES?this.sessionTimers.defaultExpires=t.sessionTimersExpires:this.sessionTimers.defaultExpires=z.SESSION_EXPIRES),this.data=t.data||this.data,void 0===e)throw new TypeError("Not enough arguments");if(!W.hasWebRTC())throw new V.NotSupportedError("WebRTC not supported");if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+l);if(this.status!==k.STATUS_NULL)throw new V.InvalidStateError(this.status);for(r in o)this.on(r,o[r]);this.from_tag=J.newTag(),this.anonymous=t.anonymous||!1,this.isCanceled=!1,s={from_tag:this.from_tag},this.contact=this.ua.contact.toString({anonymous:this.anonymous,outbound:!0}),this.anonymous&&(s.from_display_name="Anonymous",s.from_uri="sip:anonymous@anonymous.invalid",u.push("P-Preferred-Identity: "+this.ua.configuration.uri.toString()),u.push("Privacy: id")),u.push("Contact: "+this.contact),u.push("Content-Type: application/sdp"),this.sessionTimers.enabled&&u.push("Session-Expires: "+this.sessionTimers.defaultExpires),this.request=new $.OutgoingRequest(z.INVITE,e,this.ua,s,u),this.id=this.request.call_id+this.from_tag,i.call(this,h,d),this.ua.sessions[this.id]=this,this.direction="outgoing",this.local_identity=this.request.from,this.remote_identity=this.request.to,n?n(this):I.call(this,"local",this.request),f.call(this,a,p,c)},r.prototype.init_incoming=function(e,t){G("init_incoming()");var n,r=this,s=e.getHeader("Content-Type");return e.body&&"application/sdp"!==s?void e.reply(415):(this.status=k.STATUS_INVITE_RECEIVED,this.from_tag=e.from_tag,this.id=e.call_id+this.from_tag,this.request=e,this.contact=this.ua.contact.toString(),this.ua.sessions[this.id]=this,e.hasHeader("expires")&&(n=1e3*e.getHeader("expires")),e.to_tag=J.newTag(),u.call(this,e,"UAS",!0)?(e.body?this.late_sdp=!1:this.late_sdp=!0,this.status=k.STATUS_WAITING_FOR_ANSWER,this.timers.userNoAnswerTimer=setTimeout(function(){e.reply(408),U.call(r,"local",null,z.causes.NO_ANSWER)},this.ua.configuration.no_answer_timeout),n&&(this.timers.expiresTimer=setTimeout(function(){r.status===k.STATUS_WAITING_FOR_ANSWER&&(e.reply(487),U.call(r,"system",null,z.causes.EXPIRES));
},n)),this.direction="incoming",this.local_identity=e.to,this.remote_identity=e.from,t?t(this):I.call(this,"remote",e),void(this.status!==k.STATUS_TERMINATED&&(e.reply(180,null,["Contact: "+r.contact]),N.call(r,"local",null)))):void e.reply(500,"Missing Contact header field"))},r.prototype.answer=function(e){function t(e){if(v.status!==k.STATUS_TERMINATED)if(v.localMediaStream=e,e&&v.connection.addStream(e),v.request.body||v.emit("peerconnection",{peerconnection:v.connection}),v.late_sdp)r();else{var t={originator:"remote",type:"offer",sdp:C.body};v.emit("sdp",t),v.connection.setRemoteDescription(new W.RTCSessionDescription({type:"offer",sdp:t.sdp}),r,function(){C.reply(488),U.call(v,"system",null,z.causes.WEBRTC_ERROR)})}}function n(){v.status!==k.STATUS_TERMINATED&&(C.reply(480),U.call(v,"local",null,z.causes.USER_DENIED_MEDIA_ACCESS))}function r(){w.call(v,C),v.late_sdp?o.call(v,"offer",a,c,v.rtcOfferConstraints):o.call(v,"answer",a,c,I)}function a(e){function t(){v.status=k.STATUS_WAITING_FOR_ACK,s.call(v,C,e),l.call(v),D.call(v,"local")}function n(){U.call(v,"system",null,z.causes.CONNECTION_ERROR)}v.status!==k.STATUS_TERMINATED&&(E.call(v,C,S),C.reply(200,null,S,e,t,n))}function c(){v.status!==k.STATUS_TERMINATED&&(C.reply(500),U.call(v,"system",null,z.causes.WEBRTC_ERROR))}G("answer()"),e=e||{};var h,d,p,f,m=!1,g=!1,T=!1,_=!1,v=this,C=this.request,S=e.extraHeaders&&e.extraHeaders.slice()||[],A=e.mediaConstraints||{},y=e.mediaStream||null,R=e.pcConfig||{iceServers:[]},b=e.rtcConstraints||null,I=e.rtcAnswerConstraints||null;if(this.rtcAnswerConstraints=I,this.rtcOfferConstraints=e.rtcOfferConstraints||null,this.sessionTimers.enabled&&J.isDecimal(e.sessionTimersExpires)&&(e.sessionTimersExpires>=z.MIN_SESSION_EXPIRES?this.sessionTimers.defaultExpires=e.sessionTimersExpires:this.sessionTimers.defaultExpires=z.SESSION_EXPIRES),this.data=e.data||this.data,"incoming"!==this.direction)throw new V.NotSupportedError('"answer" not supported for outgoing RTCSession');if(this.status!==k.STATUS_WAITING_FOR_ANSWER)throw new V.InvalidStateError(this.status);if(this.status=k.STATUS_ANSWERED,!u.call(this,C,"UAS"))return void C.reply(500,"Error creating dialog");for(clearTimeout(this.timers.userNoAnswerTimer),S.unshift("Contact: "+v.contact),p=C.parseSDP(),Array.isArray(p.media)||(p.media=[p.media]),h=p.media.length;h--;){var N=p.media[h];"audio"===N.type&&(m=!0,N.direction&&"sendrecv"!==N.direction||(T=!0)),"video"===N.type&&(g=!0,N.direction&&"sendrecv"!==N.direction||(_=!0))}if(y&&A.audio===!1)for(f=y.getAudioTracks(),d=f.length,h=0;d>h;h++)y.removeTrack(f[h]);if(y&&A.video===!1)for(f=y.getVideoTracks(),d=f.length,h=0;d>h;h++)y.removeTrack(f[h]);y||void 0!==A.audio||(A.audio=T),y||void 0!==A.video||(A.video=_),y||m||(A.audio=!1),y||g||(A.video=!1),i.call(this,R,b),y?t(y):A.audio||A.video?(v.localMediaStreamLocallyGenerated=!0,W.getUserMedia(A,t,n)):t(null)},r.prototype.terminate=function(e){G("terminate()"),e=e||{};var t,n,r=e.cause||z.causes.BYE,s=e.status_code,l=e.reason_phrase,i=e.extraHeaders&&e.extraHeaders.slice()||[],o=e.body,u=this;if(this.status===k.STATUS_TERMINATED)throw new V.InvalidStateError(this.status);switch(this.status){case k.STATUS_NULL:case k.STATUS_INVITE_SENT:case k.STATUS_1XX_RECEIVED:if(G("canceling sesssion"),s&&(200>s||s>=700))throw new TypeError("Invalid status_code: "+s);s&&(l=l||z.REASON_PHRASE[s]||"",t="SIP ;cause="+s+' ;text="'+l+'"'),this.status===k.STATUS_NULL?(this.isCanceled=!0,this.cancelReason=t):this.status===k.STATUS_INVITE_SENT?(this.isCanceled=!0,this.cancelReason=t):this.status===k.STATUS_1XX_RECEIVED&&this.request.cancel(t),this.status=k.STATUS_CANCELED,U.call(this,"local",null,z.causes.CANCELED);break;case k.STATUS_WAITING_FOR_ANSWER:case k.STATUS_ANSWERED:if(G("rejecting session"),s=s||480,300>s||s>=700)throw new TypeError("Invalid status_code: "+s);this.request.reply(s,l,i,o),U.call(this,"local",null,z.causes.REJECTED);break;case k.STATUS_WAITING_FOR_ACK:case k.STATUS_CONFIRMED:if(G("terminating session"),l=e.reason_phrase||z.REASON_PHRASE[s]||"",s&&(200>s||s>=700))throw new TypeError("Invalid status_code: "+s);s&&i.push("Reason: SIP ;cause="+s+'; text="'+l+'"'),this.status===k.STATUS_WAITING_FOR_ACK&&"incoming"===this.direction&&this.request.server_transaction.state!==Y.C.STATUS_TERMINATED?(n=this.dialog,this.receiveRequest=function(e){e.method===z.ACK&&(v.call(this,z.BYE,{extraHeaders:i,body:o}),n.terminate())},this.request.server_transaction.on("stateChanged",function(){this.state===Y.C.STATUS_TERMINATED&&(v.call(u,z.BYE,{extraHeaders:i,body:o}),n.terminate())}),x.call(this,"local",null,r),this.dialog=n,this.ua.dialogs[n.id.toString()]=n):(v.call(this,z.BYE,{extraHeaders:i,body:o}),x.call(this,"local",null,r))}},r.prototype.close=function(){G("close()");var e;if(this.status!==k.STATUS_TERMINATED){if(this.connection)try{this.connection.close()}catch(t){j("close() | error closing the RTCPeerConnection: %o",t)}this.localMediaStream&&this.localMediaStreamLocallyGenerated&&(G("close() | closing local MediaStream"),W.closeMediaStream(this.localMediaStream));for(e in this.timers)clearTimeout(this.timers[e]);clearTimeout(this.sessionTimers.timer),this.dialog&&(this.dialog.terminate(),delete this.dialog);for(e in this.earlyDialogs)this.earlyDialogs[e].terminate(),delete this.earlyDialogs[e];this.status=k.STATUS_TERMINATED,delete this.ua.sessions[this.id]}},r.prototype.sendDTMF=function(e,t){function n(){var e,o;if(i.status===k.STATUS_TERMINATED||!i.tones||l>=i.tones.length)return void(i.tones=null);if(e=i.tones[l],l+=1,","===e)o=2e3;else{var u=new ee(i);t.eventHandlers={failed:function(){i.tones=null}},u.send(e,t),o=r+s}setTimeout(n,o)}G("sendDTMF() | tones: %s",e);var r,s,l=0,i=this;if(t=t||{},r=t.duration||null,s=t.interToneGap||null,void 0===e)throw new TypeError("Not enough arguments");if(this.status!==k.STATUS_CONFIRMED&&this.status!==k.STATUS_WAITING_FOR_ACK)throw new V.InvalidStateError(this.status);if("number"==typeof e&&(e=e.toString()),!e||"string"!=typeof e||!e.match(/^[0-9A-D#*,]+$/i))throw new TypeError("Invalid tones: "+e);if(r&&!J.isDecimal(r))throw new TypeError("Invalid tone duration: "+r);if(r?r<ee.C.MIN_DURATION?(G('"duration" value is lower than the minimum allowed, setting it to '+ee.C.MIN_DURATION+" milliseconds"),r=ee.C.MIN_DURATION):r>ee.C.MAX_DURATION?(G('"duration" value is greater than the maximum allowed, setting it to '+ee.C.MAX_DURATION+" milliseconds"),r=ee.C.MAX_DURATION):r=Math.abs(r):r=ee.C.DEFAULT_DURATION,t.duration=r,s&&!J.isDecimal(s))throw new TypeError("Invalid interToneGap: "+s);return s?s<ee.C.MIN_INTER_TONE_GAP?(G('"interToneGap" value is lower than the minimum allowed, setting it to '+ee.C.MIN_INTER_TONE_GAP+" milliseconds"),s=ee.C.MIN_INTER_TONE_GAP):s=Math.abs(s):s=ee.C.DEFAULT_INTER_TONE_GAP,this.tones?void(this.tones+=e):(this.tones=e,void n())},r.prototype.mute=function(e){G("mute()"),e=e||{audio:!0,video:!1};var t=!1,n=!1;this.audioMuted===!1&&e.audio&&(t=!0,this.audioMuted=!0,R.call(this,!0)),this.videoMuted===!1&&e.video&&(n=!0,this.videoMuted=!0,b.call(this,!0)),t!==!0&&n!==!0||q.call(this,{audio:t,video:n})},r.prototype.unmute=function(e){G("unmute()"),e=e||{audio:!0,video:!0};var t=!1,n=!1;this.audioMuted===!0&&e.audio&&(t=!0,this.audioMuted=!1,this.localHold===!1&&R.call(this,!1)),this.videoMuted===!0&&e.video&&(n=!0,this.videoMuted=!1,this.localHold===!1&&b.call(this,!1)),t!==!0&&n!==!0||L.call(this,{audio:t,video:n})},r.prototype.hold=function(e,t){G("hold()"),e=e||{};var n,r=this;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.localHold===!0?!1:this.isReadyToReOffer()?(this.localHold=!0,M.call(this,"local"),n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Hold Failed"})}},e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.unhold=function(e,t){G("unhold()"),e=e||{};var n,r=this;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.localHold===!1?!1:this.isReadyToReOffer()?(this.localHold=!1,P.call(this,"local"),n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Unhold Failed"})}},e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.renegotiate=function(e,t){G("renegotiate()"),e=e||{};var n,r=this,s=e.rtcOfferConstraints||null;return this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED?!1:this.isReadyToReOffer()?(n={succeeded:function(){t&&t()},failed:function(){r.terminate({cause:z.causes.WEBRTC_ERROR,status_code:500,reason_phrase:"Media Renegotiation Failed"})}},S.call(this),e.useUpdate?T.call(this,{sdpOffer:!0,eventHandlers:n,rtcOfferConstraints:s,extraHeaders:e.extraHeaders}):g.call(this,{eventHandlers:n,rtcOfferConstraints:s,extraHeaders:e.extraHeaders}),!0):!1},r.prototype.refer=function(e,t){G("refer()");var n,r,s=this,l=e;if(this.status!==k.STATUS_WAITING_FOR_ACK&&this.status!==k.STATUS_CONFIRMED)return!1;if(e=this.ua.normalizeTarget(e),!e)throw new TypeError("Invalid target: "+l);return n=new ne(this),n.sendRefer(e,t),r=n.outgoingRequest.cseq,this.referSubscribers[r]=n,n.on("requestFailed",function(){delete s.referSubscribers[r]}),n.on("accepted",function(){delete s.referSubscribers[r]}),n.on("failed",function(){delete s.referSubscribers[r]}),n},r.prototype.receiveRequest=function(e){G("receiveRequest()");var t,n=this;if(e.method===z.CANCEL)this.status!==k.STATUS_WAITING_FOR_ANSWER&&this.status!==k.STATUS_ANSWERED||(this.status=k.STATUS_CANCELED,this.request.reply(487),U.call(this,"remote",e,z.causes.CANCELED));else switch(e.method){case z.ACK:if(this.status!==k.STATUS_WAITING_FOR_ACK)return;if(this.status=k.STATUS_CONFIRMED,clearTimeout(this.timers.ackTimer),clearTimeout(this.timers.invite2xxTimer),this.late_sdp){if(!e.body){this.terminate({cause:z.causes.MISSING_SDP,status_code:400});break}var r={originator:"remote",type:"answer",sdp:e.body};this.emit("sdp",r),this.connection.setRemoteDescription(new W.RTCSessionDescription({type:"answer",sdp:r.sdp}),function(){n.is_confirmed||O.call(n,"remote",e)},function(){n.terminate({cause:z.causes.BAD_MEDIA_DESCRIPTION,status_code:488})})}else this.is_confirmed||O.call(this,"remote",e);break;case z.BYE:this.status===k.STATUS_CONFIRMED?(e.reply(200),x.call(this,"remote",e,z.causes.BYE)):this.status===k.STATUS_INVITE_RECEIVED?(e.reply(200),this.request.reply(487,"BYE Received"),x.call(this,"remote",e,z.causes.BYE)):e.reply(403,"Wrong Status");break;case z.INVITE:this.status===k.STATUS_CONFIRMED?e.hasHeader("replaces")?p.call(this,e):a.call(this,e):e.reply(403,"Wrong Status");break;case z.INFO:this.status===k.STATUS_CONFIRMED||this.status===k.STATUS_WAITING_FOR_ACK||this.status===k.STATUS_INVITE_RECEIVED?(t=e.getHeader("content-type"),t&&t.match(/^application\/dtmf-relay/i)?new ee(this).init_incoming(e):e.reply(415)):e.reply(403,"Wrong Status");break;case z.UPDATE:this.status===k.STATUS_CONFIRMED?c.call(this,e):e.reply(403,"Wrong Status");break;case z.REFER:this.status===k.STATUS_CONFIRMED?h.call(this,e):e.reply(403,"Wrong Status");break;case z.NOTIFY:this.status===k.STATUS_CONFIRMED?d.call(this,e):e.reply(403,"Wrong Status");break;default:e.reply(501)}},r.prototype.onTransportError=function(){j("onTransportError()"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:z.causes.CONNECTION_ERROR,cause:z.causes.CONNECTION_ERROR})},r.prototype.onRequestTimeout=function(){G("onRequestTimeout"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:408,reason_phrase:z.causes.REQUEST_TIMEOUT,cause:z.causes.REQUEST_TIMEOUT})},r.prototype.onDialogError=function(){j("onDialogError()"),this.status!==k.STATUS_TERMINATED&&this.terminate({status_code:500,reason_phrase:z.causes.DIALOG_ERROR,cause:z.causes.DIALOG_ERROR})},r.prototype.newDTMF=function(e){G("newDTMF()"),this.emit("newDTMF",e)},r.prototype.resetLocalMedia=function(){G("resetLocalMedia()"),this.localHold=!1,this.audioMuted=!1,this.videoMuted=!1,S.call(this)}},{"./Constants":1,"./Dialog":2,"./Exceptions":5,"./RTCSession/DTMF":12,"./RTCSession/ReferNotifier":13,"./RTCSession/ReferSubscriber":14,"./RTCSession/Request":15,"./RequestSender":17,"./SIPMessage":18,"./Timers":20,"./Transactions":21,"./Utils":25,debug:33,events:28,rtcninja:38,"sdp-transform":44,util:32}],12:[function(e,t,n){function r(e){this.owner=e,this.direction=null,this.tone=null,this.duration=null}t.exports=r;var s={MIN_DURATION:70,MAX_DURATION:6e3,DEFAULT_DURATION:100,MIN_INTER_TONE_GAP:50,DEFAULT_INTER_TONE_GAP:500};r.C=s;var l=e("debug")("JsSIP:RTCSession:DTMF"),i=e("debug")("JsSIP:ERROR:RTCSession:DTMF");i.log=console.warn.bind(console);var o=e("../Constants"),u=e("../Exceptions"),a=e("../RTCSession");r.prototype.send=function(e,t){var n,r;if(void 0===e)throw new TypeError("Not enough arguments");if(this.direction="outgoing",this.owner.status!==a.C.STATUS_CONFIRMED&&this.owner.status!==a.C.STATUS_WAITING_FOR_ACK)throw new u.InvalidStateError(this.owner.status);if(t=t||{},n=t.extraHeaders?t.extraHeaders.slice():[],this.eventHandlers=t.eventHandlers||{},"string"==typeof e)e=e.toUpperCase();else{if("number"!=typeof e)throw new TypeError("Invalid tone: "+e);e=e.toString()}if(!e.match(/^[0-9A-D#*]$/))throw new TypeError("Invalid tone: "+e);this.tone=e,this.duration=t.duration,n.push("Content-Type: application/dtmf-relay"),r="Signal="+this.tone+"\r\n",r+="Duration="+this.duration,this.owner.newDTMF({originator:"local",dtmf:this,request:this.request}),this.owner.dialog.sendRequest(this,o.INFO,{extraHeaders:n,body:r})},r.prototype.receiveResponse=function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):l("onSuccessResponse"),this.eventHandlers.onSuccessResponse&&this.eventHandlers.onSuccessResponse(e);break;default:this.eventHandlers.onErrorResponse&&this.eventHandlers.onErrorResponse(e)}},r.prototype.onRequestTimeout=function(){i("onRequestTimeout"),this.eventHandlers.onRequestTimeout&&this.eventHandlers.onRequestTimeout()},r.prototype.onTransportError=function(){i("onTransportError"),this.eventHandlers.onTransportError&&this.eventHandlers.onTransportError()},r.prototype.onDialogError=function(){i("onDialogError"),this.eventHandlers.onDialogError&&this.eventHandlers.onDialogError()},r.prototype.init_incoming=function(e){var t,n=/^(Signal\s*?=\s*?)([0-9A-D#*]{1})(\s)?.*/,r=/^(Duration\s?=\s?)([0-9]{1,4})(\s)?.*/;this.direction="incoming",this.request=e,e.reply(200),e.body&&(t=e.body.split("\n"),t.length>=1&&n.test(t[0])&&(this.tone=t[0].replace(n,"$2")),t.length>=2&&r.test(t[1])&&(this.duration=parseInt(t[1].replace(r,"$2"),10))),this.duration||(this.duration=s.DEFAULT_DURATION),this.tone?this.owner.newDTMF({originator:"remote",dtmf:this,request:e}):l("invalid INFO DTMF received, discarded")}},{"../Constants":1,"../Exceptions":5,"../RTCSession":11,debug:33}],13:[function(e,t,n){function r(e,t,n){this.session=e,this.id=t,this.expires=n||s.expires,this.active=!0,this.notify(100)}t.exports=r;var s={event_type:"refer",body_type:"message/sipfrag;version=2.0",expires:300},l=e("debug")("JsSIP:RTCSession:ReferNotifier"),i=e("../Constants"),o=e("./Request");r.prototype.notify=function(e,t){l("notify()");var n,r=this;if(this.active!==!1){t=t||i.REASON_PHRASE[e]||"",n=e>=200?"terminated;reason=noresource":"active;expires="+this.expires;var u=new o(this.session,i.NOTIFY);u.send({extraHeaders:["Event: "+s.event_type+";id="+r.id,"Subscription-State: "+n,"Content-Type: "+s.body_type],body:"SIP/2.0 "+e+" "+t,eventHandlers:{onErrorResponse:function(){r.active=!1}}})}}},{"../Constants":1,"./Request":15,debug:33}],14:[function(e,t,n){function r(e){this.session=e,this.timer=null,this.outgoingRequest=null,o.EventEmitter.call(this)}function s(){console.log("removeSubscriber()"),clearTimeout(this.timer),this.session.referSubscriber=null}t.exports=r;var l={expires:120},i=e("util"),o=e("events"),u=e("debug")("JsSIP:RTCSession:ReferSubscriber"),a=e("../Constants"),c=e("../Grammar"),h=e("./Request");i.inherits(r,o.EventEmitter),r.prototype.sendRefer=function(e,t){u("sendRefer()");var n,r,i,o=null,c=this;t=t||{},n=t.extraHeaders?t.extraHeaders.slice():[],r=t.eventHandlers||{};for(var d in r)this.on(d,r[d]);t.replaces&&(o=t.replaces.request.call_id,o+=";to-tag="+t.replaces.to_tag,o+=";from-tag="+t.replaces.from_tag,o=encodeURIComponent(o)),i="Refer-To: <"+e+(o?"?Replaces="+o:"")+">",n.push(i);var p=new h(this.session,a.REFER);this.timer=setTimeout(function(){s.call(c)},1e3*l.expires),p.send({extraHeaders:n,eventHandlers:{onSuccessResponse:function(e){c.emit("requestSucceeded",{response:e})},onErrorResponse:function(e){c.emit("requestFailed",{response:e,cause:a.causes.REJECTED})},onTransportError:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.CONNECTION_ERROR})},onRequestTimeout:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.REQUEST_TIMEOUT})},onDialogError:function(){s.call(c),c.emit("requestFailed",{response:null,cause:a.causes.DIALOG_ERROR})}}}),this.outgoingRequest=p.outgoingRequest},r.prototype.receiveNotify=function(e){u("receiveNotify()");var t;if(e.body){if(t=c.parse(e.body,"Status_Line"),-1===t)return void u('receiveNotify() | error parsing NOTIFY body: "'+e.body+'"');switch(!0){case/^100$/.test(t.status_code):this.emit("trying",{request:e,status_line:t});break;case/^1[0-9]{2}$/.test(t.status_code):this.emit("progress",{request:e,status_line:t});break;case/^2[0-9]{2}$/.test(t.status_code):s.call(this),this.emit("accepted",{request:e,status_line:t});break;default:s.call(this),this.emit("failed",{request:e,status_line:t})}}}},{"../Constants":1,"../Grammar":6,"./Request":15,debug:33,events:28,util:32}],15:[function(e,t,n){function r(e,t){if(s("new | %s",t),this.session=e,this.method=t,this.outgoingRequest=null,this.session.status!==u.C.STATUS_1XX_RECEIVED&&this.session.status!==u.C.STATUS_WAITING_FOR_ANSWER&&this.session.status!==u.C.STATUS_WAITING_FOR_ACK&&this.session.status!==u.C.STATUS_CONFIRMED&&this.session.status!==u.C.STATUS_TERMINATED)throw new o.InvalidStateError(this.session.status);if(this.session.status===u.C.STATUS_TERMINATED&&t!==i.BYE)throw new o.InvalidStateError(this.session.status)}t.exports=r;var s=e("debug")("JsSIP:RTCSession:Request"),l=e("debug")("JsSIP:ERROR:RTCSession:Request");l.log=console.warn.bind(console);var i=e("../Constants"),o=e("../Exceptions"),u=e("../RTCSession");r.prototype.send=function(e){e=e||{};var t=e.extraHeaders&&e.extraHeaders.slice()||[],n=e.body||null;this.eventHandlers=e.eventHandlers||{},this.outgoingRequest=this.session.dialog.sendRequest(this,this.method,{extraHeaders:t,body:n})},r.prototype.receiveResponse=function(e){switch(!0){case/^1[0-9]{2}$/.test(e.status_code):s("onProgressResponse"),this.eventHandlers.onProgressResponse&&this.eventHandlers.onProgressResponse(e);break;case/^2[0-9]{2}$/.test(e.status_code):s("onSuccessResponse"),this.eventHandlers.onSuccessResponse&&this.eventHandlers.onSuccessResponse(e);break;default:s("onErrorResponse"),this.eventHandlers.onErrorResponse&&this.eventHandlers.onErrorResponse(e)}},r.prototype.onRequestTimeout=function(){l("onRequestTimeout"),this.eventHandlers.onRequestTimeout&&this.eventHandlers.onRequestTimeout()},r.prototype.onTransportError=function(){l("onTransportError"),this.eventHandlers.onTransportError&&this.eventHandlers.onTransportError()},r.prototype.onDialogError=function(){l("onDialogError"),this.eventHandlers.onDialogError&&this.eventHandlers.onDialogError()}},{"../Constants":1,"../Exceptions":5,"../RTCSession":11,debug:33}],16:[function(e,t,n){function r(e,t){var n=1;this.ua=e,this.transport=t,this.registrar=e.configuration.registrar_server,this.expires=e.configuration.register_expires,this.call_id=l.createRandomToken(22),this.cseq=0,this.to_uri=e.configuration.uri,this.registrationTimer=null,this.registered=!1,this.contact=this.ua.contact.toString(),this.contact+=";+sip.ice",this.extraHeaders=[],this.extraContactParams="",n&&(this.contact+=";reg-id="+n,this.contact+=';+sip.instance="<urn:uuid:'+this.ua.configuration.instance_id+'>"')}t.exports=r;var s=e("debug")("JsSIP:Registrator"),l=e("./Utils"),i=e("./Constants"),o=e("./SIPMessage"),u=e("./RequestSender");r.prototype={setExtraHeaders:function(e){Array.isArray(e)||(e=[]),this.extraHeaders=e.slice()},setExtraContactParams:function(e){e instanceof Object||(e={}),this.extraContactParams="";for(var t in e){var n=e[t];this.extraContactParams+=";"+t,n&&(this.extraContactParams+="="+n)}},register:function(){var e,t,n,r=this;n=this.extraHeaders.slice(),n.push("Contact: "+this.contact+";expires="+this.expires+this.extraContactParams),n.push("Expires: "+this.expires),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},n),e=new u(this,this.ua),this.receiveResponse=function(e){var n,o,u=e.getHeaders("contact").length;if(e.cseq===this.cseq)switch(null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):if(e.hasHeader("expires")&&(o=e.getHeader("expires")),!u){s("no Contact header in response to REGISTER, response ignored");break}for(;u--;){if(n=e.parseHeader("contact",u),n.uri.user===this.ua.contact.uri.user){o=n.getParam("expires");break}n=null}if(!n){s("no Contact header pointing to us, response ignored");break}o||(o=this.expires),this.registrationTimer=setTimeout(function(){r.registrationTimer=null,r.register()},1e3*o-3e3),n.hasParam("temp-gruu")&&(this.ua.contact.temp_gruu=n.getParam("temp-gruu").replace(/"/g,"")),n.hasParam("pub-gruu")&&(this.ua.contact.pub_gruu=n.getParam("pub-gruu").replace(/"/g,"")),this.registered||(this.registered=!0,this.ua.registered({response:e}));break;case/^423$/.test(e.status_code):e.hasHeader("min-expires")?(this.expires=e.getHeader("min-expires"),this.register()):(s("423 response received for REGISTER without Min-Expires"),this.registrationFailure(e,i.causes.SIP_FAILURE_CODE));break;default:t=l.sipErrorCause(e.status_code),this.registrationFailure(e,t)}},this.onRequestTimeout=function(){this.registrationFailure(null,i.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.registrationFailure(null,i.causes.CONNECTION_ERROR)},e.send()},unregister:function(e){var t;if(!this.registered)return void s("already unregistered");e=e||{},this.registered=!1,null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),t=this.extraHeaders.slice(),e.all?(t.push("Contact: *"+this.extraContactParams),t.push("Expires: 0"),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},t)):(t.push("Contact: "+this.contact+";expires=0"+this.extraContactParams),t.push("Expires: 0"),this.request=new o.OutgoingRequest(i.REGISTER,this.registrar,this.ua,{to_uri:this.to_uri,call_id:this.call_id,cseq:this.cseq+=1},t));var n=new u(this,this.ua);this.receiveResponse=function(e){var t;switch(!0){case/^1[0-9]{2}$/.test(e.status_code):break;case/^2[0-9]{2}$/.test(e.status_code):this.unregistered(e);break;default:t=l.sipErrorCause(e.status_code),this.unregistered(e,t)}},this.onRequestTimeout=function(){this.unregistered(null,i.causes.REQUEST_TIMEOUT)},this.onTransportError=function(){this.unregistered(null,i.causes.CONNECTION_ERROR)},n.send()},registrationFailure:function(e,t){this.ua.registrationFailed({response:e||null,cause:t}),this.registered&&(this.registered=!1,this.ua.unregistered({response:e||null,cause:t}))},unregistered:function(e,t){this.registered=!1,this.ua.unregistered({response:e||null,cause:t||null})},onTransportClosed:function(){null!==this.registrationTimer&&(clearTimeout(this.registrationTimer),this.registrationTimer=null),this.registered&&(this.registered=!1,this.ua.unregistered({}))},close:function(){this.registered&&this.unregister()}}},{"./Constants":1,"./RequestSender":17,"./SIPMessage":18,"./Utils":25,debug:33}],17:[function(e,t,n){function r(e,t){this.ua=t,this.applicant=e,this.method=e.request.method,this.request=e.request,this.auth=null,this.challenged=!1,this.staled=!1,t.status!==i.C.STATUS_USER_CLOSED||this.method===l.BYE&&this.method===l.ACK||this.onTransportError()}t.exports=r;var s=e("debug")("JsSIP:RequestSender"),l=e("./Constants"),i=e("./UA"),o=e("./DigestAuthentication"),u=e("./Transactions");r.prototype={send:function(){switch(this.method){case"INVITE":this.clientTransaction=new u.InviteClientTransaction(this,this.request,this.ua.transport);break;case"ACK":this.clientTransaction=new u.AckClientTransaction(this,this.request,this.ua.transport);break;default:this.clientTransaction=new u.NonInviteClientTransaction(this,this.request,this.ua.transport)}this.clientTransaction.send()},onRequestTimeout:function(){this.applicant.onRequestTimeout()},onTransportError:function(){this.applicant.onTransportError()},receiveResponse:function(e){var t,n,r,i=e.status_code;if(401!==i&&407!==i||null===this.ua.configuration.password&&null===this.ua.configuration.ha1)this.applicant.receiveResponse(e);else{if(401===e.status_code?(n=e.parseHeader("www-authenticate"),r="authorization"):(n=e.parseHeader("proxy-authenticate"),r="proxy-authorization"),!n)return s(e.status_code+" with wrong or missing challenge, cannot authenticate"),void this.applicant.receiveResponse(e);if(!this.challenged||!this.staled&&n.stale===!0){if(this.auth||(this.auth=new o({username:this.ua.configuration.authorization_user,password:this.ua.configuration.password,realm:this.ua.configuration.realm,ha1:this.ua.configuration.ha1})),!this.auth.authenticate(this.request,n))return void this.applicant.receiveResponse(e);this.challenged=!0,this.ua.set("realm",this.auth.get("realm")),this.ua.set("ha1",this.auth.get("ha1")),n.stale&&(this.staled=!0),t=e.method===l.REGISTER?this.applicant.cseq+=1:this.request.dialog?this.request.dialog.local_seqnum+=1:this.request.cseq+1,this.request=this.request.clone(),this.request.cseq=t,this.request.setHeader("cseq",t+" "+this.method),this.request.setHeader(r,this.auth.toString()),this.send()}else this.applicant.receiveResponse(e)}}}},{"./Constants":1,"./DigestAuthentication":4,"./Transactions":21,"./UA":23,debug:33}],18:[function(e,t,n){function r(e,t,n,r,s,l){var i,o,u,d;return r=r||{},e&&t&&n?(this.ua=n,this.headers={},this.method=e,this.ruri=t,this.body=l,this.extraHeaders=s&&s.slice()||[],r.route_set?this.setHeader("route",r.route_set):n.configuration.use_preloaded_route&&this.setHeader("route","<"+n.transport.sip_uri+";lr>"),this.setHeader("via",""),this.setHeader("max-forwards",a.MAX_FORWARDS),i=r.to_display_name||0===r.to_display_name?'"'+r.to_display_name+'" ':"",i+="<"+(r.to_uri||t)+">",i+=r.to_tag?";tag="+r.to_tag:"",this.to=new h.parse(i),this.setHeader("to",i),o=r.from_display_name||0===r.from_display_name?'"'+r.from_display_name+'" ':n.configuration.display_name?'"'+n.configuration.display_name+'" ':"",o+="<"+(r.from_uri||n.configuration.uri)+">;tag=",o+=r.from_tag||c.newTag(),this.from=new h.parse(o),this.setHeader("from",o),u=r.call_id||n.configuration.jssip_id+c.createRandomToken(15),this.call_id=u,this.setHeader("call-id",u),d=r.cseq||Math.floor(1e4*Math.random()),this.cseq=d,void this.setHeader("cseq",d+" "+e)):null}function s(){this.data=null,this.headers=null,this.method=null,this.via=null,this.via_branch=null,this.call_id=null,this.cseq=null,this.from=null,this.from_tag=null,this.to=null,this.to_tag=null,this.body=null,this.sdp=null}function l(e){this.ua=e,this.headers={},this.ruri=null,this.transport=null,this.server_transaction=null}function i(){this.headers={},this.status_code=null,this.reason_phrase=null}t.exports={OutgoingRequest:r,IncomingRequest:l,IncomingResponse:i};var o=e("debug")("JsSIP:SIPMessage"),u=e("sdp-transform"),a=e("./Constants"),c=e("./Utils"),h=e("./NameAddrHeader"),d=e("./Grammar");r.prototype={setHeader:function(e,t){var n,r;for(n=new RegExp("^\\s*"+e+"\\s*:","i"),r=0;r<this.extraHeaders.length;r++)n.test(this.extraHeaders[r])&&this.extraHeaders.splice(r,1);this.headers[c.headerize(e)]=Array.isArray(t)?t:[t]},getHeader:function(e){var t,n,r=this.extraHeaders.length,s=this.headers[c.headerize(e)];if(s){if(s[0])return s[0]}else for(t=new RegExp("^\\s*"+e+"\\s*:","i"),n=0;r>n;n++)if(s=this.extraHeaders[n],t.test(s))return s.substring(s.indexOf(":")+1).trim()},getHeaders:function(e){var t,n,r,s=this.headers[c.headerize(e)],l=[];if(s){for(n=s.length,t=0;n>t;t++)l.push(s[t]);return l}for(n=this.extraHeaders.length,r=new RegExp("^\\s*"+e+"\\s*:","i"),t=0;n>t;t++)s=this.extraHeaders[t],r.test(s)&&l.push(s.substring(s.indexOf(":")+1).trim());return l},hasHeader:function(e){var t,n,r=this.extraHeaders.length;if(this.headers[c.headerize(e)])return!0;for(t=new RegExp("^\\s*"+e+"\\s*:","i"),n=0;r>n;n++)if(t.test(this.extraHeaders[n]))return!0;return!1},parseSDP:function(e){return!e&&this.sdp?this.sdp:(this.sdp=u.parse(this.body||""),this.sdp)},toString:function(){var e,t,n,r="",s=[];r+=this.method+" "+this.ruri+" SIP/2.0\r\n";for(e in this.headers)for(t=this.headers[e].length,n=0;t>n;n++)r+=e+": "+this.headers[e][n]+"\r\n";for(t=this.extraHeaders.length,n=0;t>n;n++)r+=this.extraHeaders[n].trim()+"\r\n";switch(this.method){case a.REGISTER:s.push("path","gruu");break;case a.INVITE:this.ua.configuration.session_timers&&s.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&s.push("gruu"),s.push("ice","replaces");break;case a.UPDATE:this.ua.configuration.session_timers&&s.push("timer"),s.push("ice")}return s.push("outbound"),r+="Allow: "+a.ALLOWED_METHODS+"\r\n",r+="Supported: "+s+"\r\n",r+="User-Agent: "+a.USER_AGENT+"\r\n",this.body?(t=c.str_utf8_length(this.body),r+="Content-Length: "+t+"\r\n\r\n",r+=this.body):r+="Content-Length: 0\r\n\r\n",r},clone:function(){var e=new r(this.method,this.ruri,this.ua);return Object.keys(this.headers).forEach(function(t){e.headers[t]=this.headers[t].slice()},this),e.body=this.body,e.extraHeaders=this.extraHeaders&&this.extraHeaders.slice()||[],e.to=this.to,e.from=this.from,e.call_id=this.call_id,e.cseq=this.cseq,e}},s.prototype={addHeader:function(e,t){var n={raw:t};e=c.headerize(e),this.headers[e]?this.headers[e].push(n):this.headers[e]=[n]},getHeader:function(e){var t=this.headers[c.headerize(e)];if(t)return t[0]?t[0].raw:void 0},getHeaders:function(e){var t,n,r=this.headers[c.headerize(e)],s=[];if(!r)return[];for(n=r.length,t=0;n>t;t++)s.push(r[t].raw);return s},hasHeader:function(e){return!!this.headers[c.headerize(e)]},parseHeader:function(e,t){var n,r,s;return e=c.headerize(e),t=t||0,this.headers[e]?t>=this.headers[e].length?void o('not so many "'+e+'" headers present'):(n=this.headers[e][t],r=n.raw,n.parsed?n.parsed:(s=d.parse(r,e.replace(/-/g,"_")),-1===s?(this.headers[e].splice(t,1),void o('error parsing "'+e+'" header field with value "'+r+'"')):(n.parsed=s,s))):void o('header "'+e+'" not present')},s:function(e,t){return this.parseHeader(e,t)},setHeader:function(e,t){var n={raw:t};this.headers[c.headerize(e)]=[n]},parseSDP:function(e){return!e&&this.sdp?this.sdp:(this.sdp=u.parse(this.body||""),this.sdp)},toString:function(){return this.data}},l.prototype=new s,l.prototype.reply=function(e,t,n,r,s,l){var i,o,u,h,d,p=[],f=this.getHeader("To"),m=0,g=0;if(e=e||null,t=t||null,!e||100>e||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);if(t=t||a.REASON_PHRASE[e]||"",n=n&&n.slice()||[],d="SIP/2.0 "+e+" "+t+"\r\n",this.method===a.INVITE&&e>100&&200>=e)for(i=this.getHeaders("record-route"),u=i.length,m;u>m;m++)d+="Record-Route: "+i[m]+"\r\n";for(o=this.getHeaders("via"),u=o.length,g;u>g;g++)d+="Via: "+o[g]+"\r\n";for(!this.to_tag&&e>100?f+=";tag="+c.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(f+=";tag="+this.to_tag),
d+="To: "+f+"\r\n",d+="From: "+this.getHeader("From")+"\r\n",d+="Call-ID: "+this.call_id+"\r\n",d+="CSeq: "+this.cseq+" "+this.method+"\r\n",u=n.length,h=0;u>h;h++)d+=n[h].trim()+"\r\n";switch(this.method){case a.INVITE:this.ua.configuration.session_timers&&p.push("timer"),(this.ua.contact.pub_gruu||this.ua.contact.temp_gruu)&&p.push("gruu"),p.push("ice","replaces");break;case a.UPDATE:this.ua.configuration.session_timers&&p.push("timer"),r&&p.push("ice"),p.push("replaces")}p.push("outbound"),this.method===a.OPTIONS?(d+="Allow: "+a.ALLOWED_METHODS+"\r\n",d+="Accept: "+a.ACCEPTED_BODY_TYPES+"\r\n"):405===e?d+="Allow: "+a.ALLOWED_METHODS+"\r\n":415===e&&(d+="Accept: "+a.ACCEPTED_BODY_TYPES+"\r\n"),d+="Supported: "+p+"\r\n",r?(u=c.str_utf8_length(r),d+="Content-Type: application/sdp\r\n",d+="Content-Length: "+u+"\r\n\r\n",d+=r):d+="Content-Length: 0\r\n\r\n",this.server_transaction.receiveResponse(e,d,s,l)},l.prototype.reply_sl=function(e,t){var n,r,s=0,l=this.getHeaders("via"),i=l.length;if(e=e||null,t=t||null,!e||100>e||e>699)throw new TypeError("Invalid status_code: "+e);if(t&&"string"!=typeof t&&!(t instanceof String))throw new TypeError("Invalid reason_phrase: "+t);for(t=t||a.REASON_PHRASE[e]||"",r="SIP/2.0 "+e+" "+t+"\r\n",s;i>s;s++)r+="Via: "+l[s]+"\r\n";n=this.getHeader("To"),!this.to_tag&&e>100?n+=";tag="+c.newTag():this.to_tag&&!this.s("to").hasParam("tag")&&(n+=";tag="+this.to_tag),r+="To: "+n+"\r\n",r+="From: "+this.getHeader("From")+"\r\n",r+="Call-ID: "+this.call_id+"\r\n",r+="CSeq: "+this.cseq+" "+this.method+"\r\n",r+="Content-Length: 0\r\n\r\n",this.transport.send(r)},i.prototype=new s},{"./Constants":1,"./Grammar":6,"./NameAddrHeader":9,"./Utils":25,debug:33,"sdp-transform":44}],19:[function(e,t,n){function r(){}t.exports=r;var s=e("./Utils"),l=e("./Grammar"),i=e("debug")("JsSIP:ERROR:Socket");r.isSocket=function(e){if("undefined"==typeof e)return i("undefined JsSIP.Socket instance"),!1;try{if(!s.isString(e.url))throw i("missing or invalid JsSIP.Socket url property"),new Error;if(!s.isString(e.via_transport))throw i("missing or invalid JsSIP.Socket via_transport property"),new Error;if(-1===l.parse(e.sip_uri,"SIP_URI"))throw i("missing or invalid JsSIP.Socket sip_uri property"),new Error}catch(t){return!1}try{["connect","disconnect","send"].forEach(function(t){if(!s.isFunction(e[t]))throw i("missing or invalid JsSIP.Socket method: "+t),new Error})}catch(t){return!1}return!0}},{"./Grammar":6,"./Utils":25,debug:33}],20:[function(e,t,n){var r=500,s=4e3,l=5e3,i={T1:r,T2:s,T4:l,TIMER_B:64*r,TIMER_D:0*r,TIMER_F:64*r,TIMER_H:64*r,TIMER_I:0*r,TIMER_J:0*r,TIMER_K:0*l,TIMER_L:64*r,TIMER_M:64*r,PROVISIONAL_RESPONSE_INTERVAL:6e4};t.exports=i},{}],21:[function(e,t,n){function r(e,t,n){var r;this.type=a.NON_INVITE_CLIENT,this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),this.request_sender.ua.newTransaction(this),h.EventEmitter.call(this)}function s(e,t,n){var r,s=this;this.type=a.INVITE_CLIENT,this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),this.request_sender.ua.newTransaction(this),this.request.cancel=function(e){s.cancel_request(s,e)},h.EventEmitter.call(this)}function l(e,t,n){var r;this.transport=n,this.id="z9hG4bK"+Math.floor(1e7*Math.random()),this.request_sender=e,this.request=t,r="SIP/2.0/"+n.via_transport,r+=" "+e.ua.configuration.via_host+";branch="+this.id,this.request.setHeader("via",r),h.EventEmitter.call(this)}function i(e,t){this.type=a.NON_INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.state=a.STATUS_TRYING,t.newTransaction(this),h.EventEmitter.call(this)}function o(e,t){this.type=a.INVITE_SERVER,this.id=e.via_branch,this.request=e,this.transport=e.transport,this.ua=t,this.last_response="",e.server_transaction=this,this.state=a.STATUS_PROCEEDING,t.newTransaction(this),this.resendProvisionalTimer=null,e.reply(100),h.EventEmitter.call(this)}function u(e,t){var n;switch(t.method){case T.INVITE:if(n=e.transactions.ist[t.via_branch]){switch(n.state){case a.STATUS_PROCEEDING:n.transport.send(n.last_response);break;case a.STATUS_ACCEPTED:}return!0}break;case T.ACK:if(n=e.transactions.ist[t.via_branch],!n)return!1;if(n.state===a.STATUS_ACCEPTED)return!1;if(n.state===a.STATUS_COMPLETED)return n.state=a.STATUS_CONFIRMED,n.I=setTimeout(function(){n.timer_I()},_.TIMER_I),!0;break;case T.CANCEL:return n=e.transactions.ist[t.via_branch],n?(t.reply_sl(200),n.state!==a.STATUS_PROCEEDING):(t.reply_sl(481),!0);default:if(n=e.transactions.nist[t.via_branch]){switch(n.state){case a.STATUS_TRYING:break;case a.STATUS_PROCEEDING:case a.STATUS_COMPLETED:n.transport.send(n.last_response)}return!0}}}t.exports={C:null,NonInviteClientTransaction:r,InviteClientTransaction:s,AckClientTransaction:l,NonInviteServerTransaction:i,InviteServerTransaction:o,checkTransaction:u};var a={STATUS_TRYING:1,STATUS_PROCEEDING:2,STATUS_CALLING:3,STATUS_ACCEPTED:4,STATUS_COMPLETED:5,STATUS_TERMINATED:6,STATUS_CONFIRMED:7,NON_INVITE_CLIENT:"nict",NON_INVITE_SERVER:"nist",INVITE_CLIENT:"ict",INVITE_SERVER:"ist"};t.exports.C=a;var c=e("util"),h=e("events"),d=e("debug")("JsSIP:NonInviteClientTransaction"),p=e("debug")("JsSIP:InviteClientTransaction"),f=e("debug")("JsSIP:AckClientTransaction"),m=e("debug")("JsSIP:NonInviteServerTransaction"),g=e("debug")("JsSIP:InviteServerTransaction"),T=e("./Constants"),_=e("./Timers");c.inherits(r,h.EventEmitter),r.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},r.prototype.send=function(){var e=this;this.stateChanged(a.STATUS_TRYING),this.F=setTimeout(function(){e.timer_F()},_.TIMER_F),this.transport.send(this.request)||this.onTransportError()},r.prototype.onTransportError=function(){d("transport error occurred, deleting transaction "+this.id),clearTimeout(this.F),clearTimeout(this.K),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onTransportError()},r.prototype.timer_F=function(){d("Timer F expired for transaction "+this.id),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout()},r.prototype.timer_K=function(){this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},r.prototype.receiveResponse=function(e){var t=this,n=e.status_code;if(200>n)switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_PROCEEDING),this.request_sender.receiveResponse(e)}else switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),clearTimeout(this.F),408===n?this.request_sender.onRequestTimeout():this.request_sender.receiveResponse(e),this.K=setTimeout(function(){t.timer_K()},_.TIMER_K);break;case a.STATUS_COMPLETED:}},c.inherits(s,h.EventEmitter),s.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},s.prototype.send=function(){var e=this;this.stateChanged(a.STATUS_CALLING),this.B=setTimeout(function(){e.timer_B()},_.TIMER_B),this.transport.send(this.request)||this.onTransportError()},s.prototype.onTransportError=function(){clearTimeout(this.B),clearTimeout(this.D),clearTimeout(this.M),this.state!==a.STATUS_ACCEPTED&&(p("transport error occurred, deleting transaction "+this.id),this.request_sender.onTransportError()),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},s.prototype.timer_M=function(){p("Timer M expired for transaction "+this.id),this.state===a.STATUS_ACCEPTED&&(clearTimeout(this.B),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this))},s.prototype.timer_B=function(){p("Timer B expired for transaction "+this.id),this.state===a.STATUS_CALLING&&(this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this),this.request_sender.onRequestTimeout())},s.prototype.timer_D=function(){p("Timer D expired for transaction "+this.id),clearTimeout(this.B),this.stateChanged(a.STATUS_TERMINATED),this.request_sender.ua.destroyTransaction(this)},s.prototype.sendACK=function(e){var t=this;this.ack="ACK "+this.request.ruri+" SIP/2.0\r\n",this.ack+="Via: "+this.request.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.ack+="Route: "+this.request.headers.Route.toString()+"\r\n"),this.ack+="To: "+e.getHeader("to")+"\r\n",this.ack+="From: "+this.request.headers.From.toString()+"\r\n",this.ack+="Call-ID: "+this.request.headers["Call-ID"].toString()+"\r\n",this.ack+="CSeq: "+this.request.headers.CSeq.toString().split(" ")[0],this.ack+=" ACK\r\n",this.ack+="Content-Length: 0\r\n\r\n",this.D=setTimeout(function(){t.timer_D()},_.TIMER_D),this.transport.send(this.ack)},s.prototype.cancel_request=function(e,t){var n=e.request;this.cancel=T.CANCEL+" "+n.ruri+" SIP/2.0\r\n",this.cancel+="Via: "+n.headers.Via.toString()+"\r\n",this.request.headers.Route&&(this.cancel+="Route: "+n.headers.Route.toString()+"\r\n"),this.cancel+="To: "+n.headers.To.toString()+"\r\n",this.cancel+="From: "+n.headers.From.toString()+"\r\n",this.cancel+="Call-ID: "+n.headers["Call-ID"].toString()+"\r\n",this.cancel+="CSeq: "+n.headers.CSeq.toString().split(" ")[0]+" CANCEL\r\n",t&&(this.cancel+="Reason: "+t+"\r\n"),this.cancel+="Content-Length: 0\r\n\r\n",this.state===a.STATUS_PROCEEDING&&this.transport.send(this.cancel)},s.prototype.receiveResponse=function(e){var t=this,n=e.status_code;if(n>=100&&199>=n)switch(this.state){case a.STATUS_CALLING:this.stateChanged(a.STATUS_PROCEEDING),this.request_sender.receiveResponse(e);break;case a.STATUS_PROCEEDING:this.request_sender.receiveResponse(e)}else if(n>=200&&299>=n)switch(this.state){case a.STATUS_CALLING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_ACCEPTED),this.M=setTimeout(function(){t.timer_M()},_.TIMER_M),this.request_sender.receiveResponse(e);break;case a.STATUS_ACCEPTED:this.request_sender.receiveResponse(e)}else if(n>=300&&699>=n)switch(this.state){case a.STATUS_CALLING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),this.sendACK(e),this.request_sender.receiveResponse(e);break;case a.STATUS_COMPLETED:this.sendACK(e)}},c.inherits(l,h.EventEmitter),l.prototype.send=function(){this.transport.send(this.request)||this.onTransportError()},l.prototype.onTransportError=function(){f("transport error occurred for transaction "+this.id),this.request_sender.onTransportError()},c.inherits(i,h.EventEmitter),i.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},i.prototype.timer_J=function(){m("Timer J expired for transaction "+this.id),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this)},i.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,m("transport error occurred, deleting transaction "+this.id),clearTimeout(this.J),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},i.prototype.receiveResponse=function(e,t,n,r){var s=this;if(100===e)switch(this.state){case a.STATUS_TRYING:this.stateChanged(a.STATUS_PROCEEDING),this.transport.send(t)||this.onTransportError();break;case a.STATUS_PROCEEDING:this.last_response=t,this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=200&&699>=e)switch(this.state){case a.STATUS_TRYING:case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_COMPLETED),this.last_response=t,this.J=setTimeout(function(){s.timer_J()},_.TIMER_J),this.transport.send(t)?n&&n():(this.onTransportError(),r&&r());break;case a.STATUS_COMPLETED:}},c.inherits(o,h.EventEmitter),o.prototype.stateChanged=function(e){this.state=e,this.emit("stateChanged")},o.prototype.timer_H=function(){g("Timer H expired for transaction "+this.id),this.state===a.STATUS_COMPLETED&&g("ACK not received, dialog will be terminated"),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this)},o.prototype.timer_I=function(){this.stateChanged(a.STATUS_TERMINATED)},o.prototype.timer_L=function(){g("Timer L expired for transaction "+this.id),this.state===a.STATUS_ACCEPTED&&(this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},o.prototype.onTransportError=function(){this.transportError||(this.transportError=!0,g("transport error occurred, deleting transaction "+this.id),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),clearTimeout(this.L),clearTimeout(this.H),clearTimeout(this.I),this.stateChanged(a.STATUS_TERMINATED),this.ua.destroyTransaction(this))},o.prototype.resend_provisional=function(){this.transport.send(this.last_response)||this.onTransportError()},o.prototype.receiveResponse=function(e,t,n,r){var s=this;if(e>=100&&199>=e)switch(this.state){case a.STATUS_PROCEEDING:this.transport.send(t)||this.onTransportError(),this.last_response=t}if(e>100&&199>=e&&this.state===a.STATUS_PROCEEDING)null===this.resendProvisionalTimer&&(this.resendProvisionalTimer=setInterval(function(){s.resend_provisional()},_.PROVISIONAL_RESPONSE_INTERVAL));else if(e>=200&&299>=e)switch(this.state){case a.STATUS_PROCEEDING:this.stateChanged(a.STATUS_ACCEPTED),this.last_response=t,this.L=setTimeout(function(){s.timer_L()},_.TIMER_L),null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null);case a.STATUS_ACCEPTED:this.transport.send(t)?n&&n():(this.onTransportError(),r&&r())}else if(e>=300&&699>=e)switch(this.state){case a.STATUS_PROCEEDING:null!==this.resendProvisionalTimer&&(clearInterval(this.resendProvisionalTimer),this.resendProvisionalTimer=null),this.transport.send(t)?(this.stateChanged(a.STATUS_COMPLETED),this.H=setTimeout(function(){s.timer_H()},_.TIMER_H),n&&n()):(this.onTransportError(),r&&r())}}},{"./Constants":1,"./Timers":20,debug:33,events:28,util:32}],22:[function(e,t,n){function r(e,t){if(c("new()"),this.status=d.STATUS_DISCONNECTED,this.socket=null,this.sockets=[],this.recovery_options=t||d.recovery_options,this.recover_attempts=0,this.recovery_timer=null,this.close_requested=!1,"undefined"==typeof e)throw new TypeError("Invalid argument. undefined 'sockets' argument");e instanceof Array||(e=[e]),e.forEach(function(e){if(!a.isSocket(e.socket))throw new TypeError("Invalid argument. invalid 'JsSIP.Socket' instance");if(e.weight&&!Number(e.weight))throw new TypeError("Invalid argument. 'weight' attribute is not a number");this.sockets.push({socket:e.socket,weight:e.weight||0,status:d.SOCKET_STATUS_READY})},this),Object.defineProperties(this,{via_transport:{get:function(){return this.socket.via_transport}},url:{get:function(){return this.socket.url}},sip_uri:{get:function(){return this.socket.sip_uri}}}),u.call(this)}function s(){this.recover_attempts=0,this.status=d.STATUS_CONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.onconnect({socket:this})}function l(e,t,n){this.status=d.STATUS_DISCONNECTED,this.ondisconnect({socket:this.socket,error:e,code:t,reason:n}),this.close_requested||(e&&(this.socket.status=d.SOCKET_STATUS_ERROR),o.call(this,e))}function i(e){if("\r\n"===e)return void c("received message with CRLF Keep Alive response");if("string"!=typeof e){try{e=String.fromCharCode.apply(null,new Uint8Array(e))}catch(t){return void c("received binary message failed to be converted into string, message discarded")}c("received binary message:\n\n"+e+"\n")}else c("received text message:\n\n"+e+"\n");this.ondata({transport:this,message:e})}function o(){var e,t=this;this.recover_attempts+=1,e=Math.floor(Math.random()*Math.pow(2,this.recover_attempts)+1),e<this.recovery_options.min_interval?e=this.recovery_options.min_interval:e>this.recovery_options.max_interval&&(e=this.recovery_options.max_interval),c("reconnection attempt: "+this.recover_attempts+". next connection attempt in "+e+" seconds"),this.recovery_timer=setTimeout(function(){t.close_requested||t.isConnected()||t.isConnecting()||(u.call(t),t.connect())},1e3*e)}function u(){var e=[];if(this.sockets.forEach(function(t){t.status!==d.SOCKET_STATUS_ERROR&&(0===e.length?e.push(t):t.weight>e[0].weight?e=[t]:t.weight===e[0].weight&&e.push(t))}),0===e.length)return this.sockets.forEach(function(e){e.status=d.SOCKET_STATUS_READY}),void u.call(this);var t=Math.floor(Math.random()*e.length);this.socket=e[t].socket}t.exports=r;var a=e("./Socket"),c=e("debug")("JsSIP:Transport"),h=e("debug")("JsSIP:ERROR:Transport"),d={STATUS_CONNECTED:0,STATUS_CONNECTING:1,STATUS_DISCONNECTED:2,SOCKET_STATUS_READY:0,SOCKET_STATUS_ERROR:1,recovery_options:{min_interval:2,max_interval:30}};r.prototype.connect=function(){return c("connect()"),this.isConnected()?void c("Transport is already connected"):this.isConnecting()?void c("Transport is connecting"):(this.close_requested=!1,this.status=d.STATUS_CONNECTING,this.onconnecting({socket:this.socket,attempts:this.recover_attempts}),void(this.close_requested||(this.socket.onconnect=s.bind(this),this.socket.ondisconnect=l.bind(this),this.socket.ondata=i.bind(this),this.socket.connect())))},r.prototype.disconnect=function(){c("close()"),this.close_requested=!0,this.recover_attempts=0,this.status=d.STATUS_DISCONNECTED,null!==this.recovery_timer&&(clearTimeout(this.recovery_timer),this.recovery_timer=null),this.socket.onconnect=function(){},this.socket.ondisconnect=function(){},this.socket.ondata=function(){},this.socket.disconnect(),this.ondisconnect()},r.prototype.send=function(e){if(c("send()"),!this.isConnected())return h("unable to send message, transport is not connected"),!1;var t=e.toString();return c("sending message:\n\n"+t+"\n"),this.socket.send(t)},r.prototype.isConnected=function(){return this.status===d.STATUS_CONNECTED},r.prototype.isConnecting=function(){return this.status===d.STATUS_CONNECTING}},{"./Socket":19,debug:33}],23:[function(e,t,n){function r(e){if(this.cache={credentials:{}},this.configuration={},this.dynConfiguration={},this.dialogs={},this.applicants={},this.sessions={},this.transport=null,this.contact=null,this.status=u.STATUS_INIT,this.error=null,this.transactions={nist:{},nict:{},ist:{},ict:{}},this.data={},Object.defineProperties(this,{transactionsCount:{get:function(){var e,t=["nist","nict","ist","ict"],n=0;for(e in t)n+=Object.keys(this.transactions[t[e]]).length;return n}},nictTransactionsCount:{get:function(){return Object.keys(this.transactions.nict).length}},nistTransactionsCount:{get:function(){return Object.keys(this.transactions.nist).length}},ictTransactionsCount:{get:function(){return Object.keys(this.transactions.ict).length}},istTransactionsCount:{get:function(){return Object.keys(this.transactions.ist).length}}}),void 0===e)throw new TypeError("Not enough arguments");try{this.loadConfig(e)}catch(t){throw this.status=u.STATUS_NOT_READY,this.error=u.CONFIGURATION_ERROR,t}this._registrator=new m(this),c.EventEmitter.call(this),p.called||p()}function s(e){this.emit("connecting",e)}function l(e){this.status!==u.STATUS_USER_CLOSED&&(this.status=u.STATUS_READY,this.error=null,this.emit("connected",e),this.dynConfiguration.register&&this._registrator.register())}function i(e){var t,n,r,s=["nict","ict","nist","ist"];for(r=s.length,t=0;r>t;t++)for(n in this.transactions[s[t]])this.transactions[s[t]][n].onTransportError();this.emit("disconnected",e),this._registrator.onTransportClosed(),this.status!==u.STATUS_USER_CLOSED&&(this.status=u.STATUS_NOT_READY,this.error=u.NETWORK_ERROR)}function o(e){var t,n=e.transport,s=e.message;if(s=b.parseMessage(s,this),s&&!(this.status===r.C.STATUS_USER_CLOSED&&s instanceof I.IncomingRequest)&&w(s,this,n))if(s instanceof I.IncomingRequest)s.transport=n,this.receiveRequest(s);else if(s instanceof I.IncomingResponse)switch(s.method){case f.INVITE:t=this.transactions.ict[s.via_branch],t&&t.receiveResponse(s);break;case f.ACK:break;default:t=this.transactions.nict[s.via_branch],t&&t.receiveResponse(s)}}t.exports=r;var u={STATUS_INIT:0,STATUS_READY:1,STATUS_USER_CLOSED:2,STATUS_NOT_READY:3,CONFIGURATION_ERROR:1,NETWORK_ERROR:2};r.C=u;var a=e("util"),c=e("events"),h=e("debug")("JsSIP:UA"),d=e("debug")("JsSIP:ERROR:UA");d.log=console.warn.bind(console);var p=e("rtcninja"),f=e("./Constants"),m=e("./Registrator"),g=e("./RTCSession"),T=e("./Message"),_=e("./Transactions"),v=e("./Transport"),C=e("./WebSocketInterface"),S=e("./Socket"),E=e("./Utils"),A=e("./Exceptions"),y=e("./URI"),R=e("./Grammar"),b=e("./Parser"),I=e("./SIPMessage"),w=e("./sanityCheck");a.inherits(r,c.EventEmitter),r.prototype.start=function(){function e(){h("restarting UA"),t.status=u.STATUS_READY,t.transport.connect()}h("start()");var t=this;this.status===u.STATUS_INIT?this.transport.connect():this.status===u.STATUS_USER_CLOSED?this.isConnected()?this.once("disconnected",e):e():h(this.status===u.STATUS_READY?"UA is in READY status, not restarted":"ERROR: connection is down, Auto-Recovery system is trying to reconnect"),this.dynConfiguration.register=this.configuration.register},r.prototype.register=function(){h("register()"),this.dynConfiguration.register=!0,this._registrator.register()},r.prototype.unregister=function(e){h("unregister()"),this.dynConfiguration.register=!1,this._registrator.unregister(e)},r.prototype.registrator=function(){return this._registrator},r.prototype.isRegistered=function(){return!!this._registrator.registered},r.prototype.isConnected=function(){return this.transport.isConnected()},r.prototype.call=function(e,t){h("call()");var n;return n=new g(this),n.connect(e,t),n},r.prototype.sendMessage=function(e,t,n){h("sendMessage()");var r;return r=new T(this),r.send(e,t,n),r},r.prototype.terminateSessions=function(e){h("terminateSessions()");for(var t in this.sessions)this.sessions[t].isEnded()||this.sessions[t].terminate(e)},r.prototype.stop=function(){h("stop()");var e,t,n,r=this;if(this.dynConfiguration={},this.status===u.STATUS_USER_CLOSED)return void h("UA already closed");this._registrator.close(),n=Object.keys(this.sessions).length;for(e in this.sessions){h("closing session "+e);try{this.sessions[e].terminate()}catch(s){}}for(t in this.applicants)try{this.applicants[t].close()}catch(s){}this.status=u.STATUS_USER_CLOSED,0===this.nistTransactionsCount&&0===this.nictTransactionsCount&&0===this.ictTransactionsCount&&0===this.istTransactionsCount&&0===n?r.transport.disconnect():setTimeout(function(){r.transport.disconnect()},2e3)},r.prototype.normalizeTarget=function(e){return E.normalizeTarget(e,this.configuration.hostport_params)},r.prototype.get=function(e){switch(e){case"realm":return this.configuration.realm;case"ha1":return this.configuration.ha1;default:return void d('get() | cannot get "%s" parameter in runtime',e)}return!0},r.prototype.set=function(e,t){switch(e){case"password":this.configuration.password=String(t);break;case"realm":this.configuration.realm=String(t);break;case"ha1":this.configuration.ha1=String(t),this.configuration.password=null;break;case"display_name":if(-1===R.parse('"'+t+'"',"display_name"))return d('set() | wrong "display_name"'),!1;this.configuration.display_name=t;break;default:return d('set() | cannot set "%s" parameter in runtime',e),!1}return!0},r.prototype.newTransaction=function(e){this.transactions[e.type][e.id]=e,this.emit("newTransaction",{transaction:e})},r.prototype.destroyTransaction=function(e){delete this.transactions[e.type][e.id],this.emit("transactionDestroyed",{transaction:e})},r.prototype.newMessage=function(e){this.emit("newMessage",e)},r.prototype.newRTCSession=function(e){this.emit("newRTCSession",e)},r.prototype.registered=function(e){this.emit("registered",e)},r.prototype.unregistered=function(e){this.emit("unregistered",e)},r.prototype.registrationFailed=function(e){this.emit("registrationFailed",e)},r.prototype.receiveRequest=function(e){var t,n,r,s,l=e.method;if(e.ruri.user!==this.configuration.uri.user&&e.ruri.user!==this.contact.uri.user)return h("Request-URI does not point to us"),void(e.method!==f.ACK&&e.reply_sl(404));if(e.ruri.scheme===f.SIPS)return void e.reply_sl(416);if(!_.checkTransaction(this,e)){if(l===f.INVITE?new _.InviteServerTransaction(e,this):l!==f.ACK&&l!==f.CANCEL&&new _.NonInviteServerTransaction(e,this),l===f.OPTIONS)e.reply(200);else if(l===f.MESSAGE){if(0===this.listeners("newMessage").length)return void e.reply(405);r=new T(this),r.init_incoming(e)}else if(l===f.INVITE&&!e.to_tag&&0===this.listeners("newRTCSession").length)return void e.reply(405);if(e.to_tag)t=this.findDialog(e.call_id,e.from_tag,e.to_tag),t?t.receiveRequest(e):l===f.NOTIFY?(n=this.findSession(e),n?n.receiveRequest(e):(h("received NOTIFY request for a non existent subscription"),e.reply(481,"Subscription does not exist"))):l!==f.ACK&&e.reply(481);else switch(l){case f.INVITE:p.hasWebRTC()?e.hasHeader("replaces")?(s=e.replaces,t=this.findDialog(s.call_id,s.from_tag,s.to_tag),t?(n=t.owner,n.isEnded()?e.reply(603):n.receiveRequest(e)):e.reply(481)):(n=new g(this),n.init_incoming(e)):(h("INVITE received but WebRTC is not supported"),e.reply(488));break;case f.BYE:e.reply(481);break;case f.CANCEL:n=this.findSession(e),n?n.receiveRequest(e):h("received CANCEL request for a non existent session");break;case f.ACK:break;default:e.reply(405)}}},r.prototype.findSession=function(e){var t=e.call_id+e.from_tag,n=this.sessions[t],r=e.call_id+e.to_tag,s=this.sessions[r];return n?n:s?s:null},r.prototype.findDialog=function(e,t,n){var r=e+t+n,s=this.dialogs[r];return s?s:(r=e+n+t,s=this.dialogs[r],s?s:null)},r.prototype.loadConfig=function(e){var t,n,u,a,c,p={via_host:E.createRandomToken(12)+".invalid",contact_uri:null,password:null,realm:null,ha1:null,register_expires:600,register:!0,registrar_server:null,use_preloaded_route:!1,no_answer_timeout:60,session_timers:!0};for(t in r.configuration_check.mandatory){if(!e.hasOwnProperty(t))throw new A.ConfigurationError(t);if(n=e[t],u=r.configuration_check.mandatory[t].call(this,n),void 0===u)throw new A.ConfigurationError(t,n);p[t]=u}for(t in r.configuration_check.optional)if(e.hasOwnProperty(t)){if(n=e[t],E.isEmpty(n))continue;if(u=r.configuration_check.optional[t].call(this,n,e),void 0===u)throw new A.ConfigurationError(t,n);p[t]=u}0===p.display_name&&(p.display_name="0"),p.instance_id||(p.instance_id=E.newUUID()),p.jssip_id=E.createRandomToken(5),a=p.uri.clone(),a.user=null,p.hostport_params=a.toString().replace(/^sip:/i,"");var f=[];if(p.ws_servers&&Array.isArray(p.ws_servers)&&(f=f.concat(p.ws_servers)),p.sockets&&Array.isArray(p.sockets)&&(f=f.concat(p.sockets)),0===f.length)throw new A.ConfigurationError("sockets");try{this.transport=new v(f,{max_interval:p.connection_recovery_max_interval,min_interval:p.connection_recovery_min_interval}),this.transport.onconnecting=s.bind(this),this.transport.onconnect=l.bind(this),this.transport.ondisconnect=i.bind(this),this.transport.ondata=o.bind(this),delete p.connection_recovery_max_interval,delete p.connection_recovery_min_interval,delete p.ws_servers,delete p.sockets}catch(m){throw d(m),new A.ConfigurationError("sockets",f)}p.authorization_user||(p.authorization_user=p.uri.user),p.registrar_server||(c=p.uri.clone(),c.user=null,c.clearParams(),c.clearHeaders(),p.registrar_server=c),p.no_answer_timeout=1e3*p.no_answer_timeout,p.contact_uri?p.via_host=p.contact_uri.host:p.contact_uri=new y("sip",E.createRandomToken(8),p.via_host,null,{transport:"ws"}),this.contact={pub_gruu:null,temp_gruu:null,uri:p.contact_uri,toString:function(e){e=e||{};var t=e.anonymous||null,n=e.outbound||null,r="<";return r+=t?this.temp_gruu||"sip:anonymous@anonymous.invalid;transport=ws":this.pub_gruu||this.uri.toString(),!n||(t?this.temp_gruu:this.pub_gruu)||(r+=";ob"),r+=">"}};for(t in p)r.configuration_skeleton[t].value=p[t];Object.defineProperties(this.configuration,r.configuration_skeleton);for(t in p)r.configuration_skeleton[t].value="";h("configuration parameters after validation:");for(t in p)switch(t){case"uri":case"registrar_server":h("- "+t+": "+p[t]);break;case"password":case"ha1":h("- "+t+": NOT SHOWN");break;default:h("- "+t+": "+JSON.stringify(p[t]))}},r.configuration_skeleton=function(){var e,t,n,r={},s=["jssip_id","hostport_params","uri","authorization_user","contact_uri","display_name","instance_id","no_answer_timeout","session_timers","password","realm","ha1","register_expires","registrar_server","sockets","use_preloaded_route","ws_servers","via_core_value","via_host"],l=["password","realm","ha1","display_name"];for(e in s)t=s[e],n=-1!==l.indexOf(t),r[t]={value:"",writable:n,configurable:!1};return r.register={value:"",writable:!0,configurable:!1},r}(),r.configuration_check={mandatory:{uri:function(e){var t;return/^sip:/i.test(e)||(e=f.SIP+":"+e),t=y.parse(e),t&&t.user?t:void 0}},optional:{authorization_user:function(e){return-1===R.parse('"'+e+'"',"quoted_string")?void 0:e},connection_recovery_max_interval:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},connection_recovery_min_interval:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},contact_uri:function(e){if("string"==typeof e){var t=R.parse(e,"SIP_URI");if(-1!==t)return t}},display_name:function(e){return-1===R.parse('"'+e+'"',"display_name")?void 0:e},instance_id:function(e){return/^uuid:/i.test(e)&&(e=e.substr(5)),-1===R.parse(e,"uuid")?void 0:e},no_answer_timeout:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},session_timers:function(e){return"boolean"==typeof e?e:void 0},password:function(e){return String(e)},realm:function(e){return String(e)},ha1:function(e){return String(e)},register:function(e){return"boolean"==typeof e?e:void 0},register_expires:function(e){var t;return E.isDecimal(e)&&(t=Number(e),t>0)?t:void 0},registrar_server:function(e){var t;return/^sip:/i.test(e)||(e=f.SIP+":"+e),t=y.parse(e),t?t.user?void 0:t:void 0},sockets:function(e){var t,n;if(S.isSocket(e))e=[{socket:e}];else{if(!Array.isArray(e)||!e.length)return;for(n=e.length,t=0;n>t;t++)S.isSocket(e[t])&&(e[t]={socket:e[t]})}return e},use_preloaded_route:function(e){return"boolean"==typeof e?e:void 0},ws_servers:function(e){var t,n,r=[];if("string"==typeof e)e=[{ws_uri:e}];else{if(!Array.isArray(e)||!e.length)return;for(n=e.length,t=0;n>t;t++)"string"==typeof e[t]&&(e[t]={ws_uri:e[t]})}for(n=e.length,t=0;n>t;t++)try{r.push({socket:new C(e[t].ws_uri),weight:e[t].weight||0})}catch(s){return void d(s)}return r}}}},{"./Constants":1,"./Exceptions":5,"./Grammar":6,"./Message":8,"./Parser":10,"./RTCSession":11,"./Registrator":16,"./SIPMessage":18,"./Socket":19,"./Transactions":21,"./Transport":22,"./URI":24,"./Utils":25,"./WebSocketInterface":26,"./sanityCheck":27,debug:33,events:28,rtcninja:38,util:32}],24:[function(e,t,n){function r(e,t,n,r,l,i){var o,u;if(!n)throw new TypeError('missing or invalid "host" parameter');e=e||s.SIP,this.parameters={},this.headers={};for(o in l)this.setParam(o,l[o]);for(u in i)this.setHeader(u,i[u]);Object.defineProperties(this,{scheme:{get:function(){return e},set:function(t){e=t.toLowerCase()}},user:{get:function(){return t},set:function(e){t=e}},host:{get:function(){return n},set:function(e){n=e.toLowerCase()}},port:{get:function(){return r},set:function(e){r=0===e?e:parseInt(e,10)||null}}})}t.exports=r;var s=e("./Constants"),l=e("./Utils"),i=e("./Grammar");r.prototype={setParam:function(e,t){e&&(this.parameters[e.toLowerCase()]="undefined"==typeof t||null===t?null:t.toString())},getParam:function(e){return e?this.parameters[e.toLowerCase()]:void 0},hasParam:function(e){return e?this.parameters.hasOwnProperty(e.toLowerCase())&&!0||!1:void 0},deleteParam:function(e){var t;return e=e.toLowerCase(),this.parameters.hasOwnProperty(e)?(t=this.parameters[e],delete this.parameters[e],t):void 0},clearParams:function(){this.parameters={}},setHeader:function(e,t){this.headers[l.headerize(e)]=Array.isArray(t)?t:[t]},getHeader:function(e){return e?this.headers[l.headerize(e)]:void 0;
},hasHeader:function(e){return e?this.headers.hasOwnProperty(l.headerize(e))&&!0||!1:void 0},deleteHeader:function(e){var t;return e=l.headerize(e),this.headers.hasOwnProperty(e)?(t=this.headers[e],delete this.headers[e],t):void 0},clearHeaders:function(){this.headers={}},clone:function(){return new r(this.scheme,this.user,this.host,this.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))},toString:function(){var e,t,n,r,s=[];r=this.scheme+":",this.user&&(r+=l.escapeUser(this.user)+"@"),r+=this.host,(this.port||0===this.port)&&(r+=":"+this.port);for(t in this.parameters)r+=";"+t,null!==this.parameters[t]&&(r+="="+this.parameters[t]);for(e in this.headers)for(n=0;n<this.headers[e].length;n++)s.push(e+"="+this.headers[e][n]);return s.length>0&&(r+="?"+s.join("&")),r},toAor:function(e){var t;return t=this.scheme+":",this.user&&(t+=l.escapeUser(this.user)+"@"),t+=this.host,e&&(this.port||0===this.port)&&(t+=":"+this.port),t}},r.parse=function(e){return e=i.parse(e,"SIP_URI"),-1!==e?e:void 0}},{"./Constants":1,"./Grammar":6,"./Utils":25}],25:[function(e,t,n){var r={};t.exports=r;var s=e("./Constants"),l=e("./URI"),i=e("./Grammar");r.str_utf8_length=function(e){return unescape(encodeURIComponent(e)).length},r.isFunction=function(e){return void 0!==e?"[object Function]"===Object.prototype.toString.call(e):!1},r.isString=function(e){return void 0!==e?"[object String]"===Object.prototype.toString.call(e):!1},r.isDecimal=function(e){return!isNaN(e)&&parseFloat(e)===parseInt(e,10)},r.isEmpty=function(e){return null===e||""===e||void 0===e||Array.isArray(e)&&0===e.length||"number"==typeof e&&isNaN(e)?!0:void 0},r.hasMethods=function(e){for(var t,n=1;t=arguments[n++];)if(this.isFunction(e[t]))return!1;return!0},r.createRandomToken=function(e,t){var n,r,s="";for(t=t||32,n=0;e>n;n++)r=Math.random()*t|0,s+=r.toString(t);return s},r.newTag=function(){return r.createRandomToken(10)},r.newUUID=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});return e},r.hostType=function(e){return e?(e=i.parse(e,"host"),-1!==e?e.host_type:void 0):void 0},r.normalizeTarget=function(e,t){var n,i,o,u;if(e){if(e instanceof l)return e;if("string"==typeof e){switch(i=e.split("@"),i.length){case 1:if(!t)return;o=e,u=t;break;case 2:o=i[0],u=i[1];break;default:o=i.slice(0,i.length-1).join("@"),u=i[i.length-1]}return o=o.replace(/^(sips?|tel):/i,""),/^[\-\.\(\)]*\+?[0-9\-\.\(\)]+$/.test(o)&&(o=o.replace(/[\-\.\(\)]/g,"")),e=s.SIP+":"+r.escapeUser(o)+"@"+u,(n=l.parse(e))?n:void 0}}else;},r.escapeUser=function(e){return encodeURIComponent(decodeURIComponent(e)).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")},r.headerize=function(e){var t,n={"Call-Id":"Call-ID",Cseq:"CSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),s="",l=r.length;for(t=0;l>t;t++)0!==t&&(s+="-"),s+=r[t].charAt(0).toUpperCase()+r[t].substring(1);return n[s]&&(s=n[s]),s},r.sipErrorCause=function(e){var t;for(t in s.SIP_ERROR_CAUSES)if(-1!==s.SIP_ERROR_CAUSES[t].indexOf(e))return s.causes[t];return s.causes.SIP_FAILURE_CODE},r.getRandomTestNetIP=function(){function e(e,t){return Math.floor(Math.random()*(t-e+1)+e)}return"192.0.2."+e(1,254)},r.calculateMD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,s,l,i;return s=2147483648&e,l=2147483648&t,n=1073741824&e,r=1073741824&t,i=(1073741823&e)+(1073741823&t),n&r?2147483648^i^s^l:n|r?1073741824&i?3221225472^i^s^l:1073741824^i^s^l:i^s^l}function r(e,t,n){return e&t|~e&n}function s(e,t,n){return e&n|t&~n}function l(e,t,n){return e^t^n}function i(e,t,n){return t^(e|~n)}function o(e,s,l,i,o,u,a){return e=n(e,n(n(r(s,l,i),o),a)),n(t(e,u),s)}function u(e,r,l,i,o,u,a){return e=n(e,n(n(s(r,l,i),o),a)),n(t(e,u),r)}function a(e,r,s,i,o,u,a){return e=n(e,n(n(l(r,s,i),o),a)),n(t(e,u),r)}function c(e,r,s,l,o,u,a){return e=n(e,n(n(i(r,s,l),o),a)),n(t(e,u),r)}function h(e){for(var t,n=e.length,r=n+8,s=(r-r%64)/64,l=16*(s+1),i=new Array(l-1),o=0,u=0;n>u;)t=(u-u%4)/4,o=u%4*8,i[t]=i[t]|e.charCodeAt(u)<<o,u++;return t=(u-u%4)/4,o=u%4*8,i[t]=i[t]|128<<o,i[l-2]=n<<3,i[l-1]=n>>>29,i}function d(e){var t,n,r="",s="";for(n=0;3>=n;n++)t=e>>>8*n&255,s="0"+t.toString(16),r+=s.substr(s.length-2,2);return r}function p(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}var f,m,g,T,_,v,C,S,E,A=[],y=7,R=12,b=17,I=22,w=5,N=9,D=14,O=20,x=4,U=11,M=16,P=23,q=6,L=10,k=15,H=21;for(e=p(e),A=h(e),v=1732584193,C=4023233417,S=2562383102,E=271733878,f=0;f<A.length;f+=16)m=v,g=C,T=S,_=E,v=o(v,C,S,E,A[f+0],y,3614090360),E=o(E,v,C,S,A[f+1],R,3905402710),S=o(S,E,v,C,A[f+2],b,606105819),C=o(C,S,E,v,A[f+3],I,3250441966),v=o(v,C,S,E,A[f+4],y,4118548399),E=o(E,v,C,S,A[f+5],R,1200080426),S=o(S,E,v,C,A[f+6],b,2821735955),C=o(C,S,E,v,A[f+7],I,4249261313),v=o(v,C,S,E,A[f+8],y,1770035416),E=o(E,v,C,S,A[f+9],R,2336552879),S=o(S,E,v,C,A[f+10],b,4294925233),C=o(C,S,E,v,A[f+11],I,2304563134),v=o(v,C,S,E,A[f+12],y,1804603682),E=o(E,v,C,S,A[f+13],R,4254626195),S=o(S,E,v,C,A[f+14],b,2792965006),C=o(C,S,E,v,A[f+15],I,1236535329),v=u(v,C,S,E,A[f+1],w,4129170786),E=u(E,v,C,S,A[f+6],N,3225465664),S=u(S,E,v,C,A[f+11],D,643717713),C=u(C,S,E,v,A[f+0],O,3921069994),v=u(v,C,S,E,A[f+5],w,3593408605),E=u(E,v,C,S,A[f+10],N,38016083),S=u(S,E,v,C,A[f+15],D,3634488961),C=u(C,S,E,v,A[f+4],O,3889429448),v=u(v,C,S,E,A[f+9],w,568446438),E=u(E,v,C,S,A[f+14],N,3275163606),S=u(S,E,v,C,A[f+3],D,4107603335),C=u(C,S,E,v,A[f+8],O,1163531501),v=u(v,C,S,E,A[f+13],w,2850285829),E=u(E,v,C,S,A[f+2],N,4243563512),S=u(S,E,v,C,A[f+7],D,1735328473),C=u(C,S,E,v,A[f+12],O,2368359562),v=a(v,C,S,E,A[f+5],x,4294588738),E=a(E,v,C,S,A[f+8],U,2272392833),S=a(S,E,v,C,A[f+11],M,1839030562),C=a(C,S,E,v,A[f+14],P,4259657740),v=a(v,C,S,E,A[f+1],x,2763975236),E=a(E,v,C,S,A[f+4],U,1272893353),S=a(S,E,v,C,A[f+7],M,4139469664),C=a(C,S,E,v,A[f+10],P,3200236656),v=a(v,C,S,E,A[f+13],x,681279174),E=a(E,v,C,S,A[f+0],U,3936430074),S=a(S,E,v,C,A[f+3],M,3572445317),C=a(C,S,E,v,A[f+6],P,76029189),v=a(v,C,S,E,A[f+9],x,3654602809),E=a(E,v,C,S,A[f+12],U,3873151461),S=a(S,E,v,C,A[f+15],M,530742520),C=a(C,S,E,v,A[f+2],P,3299628645),v=c(v,C,S,E,A[f+0],q,4096336452),E=c(E,v,C,S,A[f+7],L,1126891415),S=c(S,E,v,C,A[f+14],k,2878612391),C=c(C,S,E,v,A[f+5],H,4237533241),v=c(v,C,S,E,A[f+12],q,1700485571),E=c(E,v,C,S,A[f+3],L,2399980690),S=c(S,E,v,C,A[f+10],k,4293915773),C=c(C,S,E,v,A[f+1],H,2240044497),v=c(v,C,S,E,A[f+8],q,1873313359),E=c(E,v,C,S,A[f+15],L,4264355552),S=c(S,E,v,C,A[f+6],k,2734768916),C=c(C,S,E,v,A[f+13],H,1309151649),v=c(v,C,S,E,A[f+4],q,4149444226),E=c(E,v,C,S,A[f+11],L,3174756917),S=c(S,E,v,C,A[f+2],k,718787259),C=c(C,S,E,v,A[f+9],H,3951481745),v=n(v,m),C=n(C,g),S=n(S,T),E=n(E,_);var F=d(v)+d(C)+d(S)+d(E);return F.toLowerCase()}},{"./Constants":1,"./Grammar":6,"./URI":24}],26:[function(e,t,n){function r(e){a("new()");var t=null,n=null;this.ws=null,Object.defineProperties(this,{via_transport:{get:function(){return n},set:function(e){n=e.toUpperCase()}},sip_uri:{get:function(){return t}},url:{get:function(){return e}}});var r=u.parse(e,"absoluteURI");if(-1===r)throw c("invalid WebSocket URI: "+e),new TypeError("Invalid argument: "+e);if("wss"!==r.scheme&&"ws"!==r.scheme)throw c("invalid WebSocket URI scheme: "+r.scheme),new TypeError("Invalid argument: "+e);t="sip:"+r.host+(r.port?":"+r.port:"")+";transport=ws",this.via_transport=r.scheme}function s(){a("WebSocket "+this.url+" connected"),this.onconnect()}function l(e){a("WebSocket "+this.url+" closed"),e.wasClean===!1&&a("WebSocket abrupt disconnection"),this.ondisconnect(e.wasClean,e.code,e.reason)}function i(e){a("received WebSocket message"),this.ondata(e.data)}function o(e){c("WebSocket "+this.url+" error: "+e)}t.exports=r;var u=e("./Grammar"),a=e("debug")("JsSIP:WebSocketInterface"),c=e("debug")("JsSIP:ERROR:WebSocketInterface");r.prototype.connect=function(){if(a("connect()"),this.isConnected())return void a("WebSocket "+this.url+" is already connected");if(this.isConnecting())return void a("WebSocket "+this.url+" is connecting");this.ws&&this.ws.close(),a("connecting to WebSocket "+this.url);try{this.ws=new WebSocket(this.url,"sip"),this.ws.binaryType="arraybuffer",this.ws.onopen=s.bind(this),this.ws.onclose=l.bind(this),this.ws.onmessage=i.bind(this),this.ws.onerror=o.bind(this)}catch(e){o.call(this,e)}},r.prototype.disconnect=function(){a("disconnect()"),this.ws&&(this.ws.close(),this.ws=null)},r.prototype.send=function(e){return a("send()"),this.isConnected()?(this.ws.send(e),!0):(c("unable to send message, WebSocket is not open"),!1)},r.prototype.isConnected=function(){return this.ws&&this.ws.readyState===this.ws.OPEN},r.prototype.isConnecting=function(){return this.ws&&this.ws.readyState===this.ws.CONNECTING}},{"./Grammar":6,debug:33}],27:[function(e,t,n){function r(e,t,n){var r,s;for(d=e,p=t,f=n,r=S.length;r--;)if(s=S[r](d),s===!1)return!1;if(d instanceof T.IncomingRequest){for(r=v.length;r--;)if(s=v[r](d),s===!1)return!1}else if(d instanceof T.IncomingResponse)for(r=C.length;r--;)if(s=C[r](d),s===!1)return!1;return!0}function s(){return"sip"!==d.s("to").uri.scheme?(h(416),!1):void 0}function l(){return d.to_tag||d.call_id.substr(0,5)!==p.configuration.jssip_id?void 0:(h(482),!1)}function i(){var e=_.str_utf8_length(d.body),t=d.getHeader("content-length");return t>e?(h(400),!1):void 0}function o(){var e,t,n=d.from_tag,r=d.call_id,s=d.cseq;if(!d.to_tag)if(d.method===g.INVITE){if(p.transactions.ist[d.via_branch])return!1;for(t in p.transactions.ist)if(e=p.transactions.ist[t],e.request.from_tag===n&&e.request.call_id===r&&e.request.cseq===s)return h(482),!1}else{if(p.transactions.nist[d.via_branch])return!1;for(t in p.transactions.nist)if(e=p.transactions.nist[t],e.request.from_tag===n&&e.request.call_id===r&&e.request.cseq===s)return h(482),!1}}function u(){return d.getHeaders("via").length>1?(m("more than one Via header field present in the response, dropping the response"),!1):void 0}function a(){var e=_.str_utf8_length(d.body),t=d.getHeader("content-length");return t>e?(m("message body length is lower than the value in Content-Length header field, dropping the response"),!1):void 0}function c(){for(var e=["from","to","call_id","cseq","via"],t=e.length;t--;)if(!d.hasHeader(e[t]))return m("missing mandatory header field : "+e[t]+", dropping the response"),!1}function h(e){var t,n="SIP/2.0 "+e+" "+g.REASON_PHRASE[e]+"\r\n",r=d.getHeaders("via"),s=r.length,l=0;for(l;s>l;l++)n+="Via: "+r[l]+"\r\n";t=d.getHeader("To"),d.to_tag||(t+=";tag="+_.newTag()),n+="To: "+t+"\r\n",n+="From: "+d.getHeader("From")+"\r\n",n+="Call-ID: "+d.call_id+"\r\n",n+="CSeq: "+d.cseq+" "+d.method+"\r\n",n+="\r\n",f.send(n)}t.exports=r;var d,p,f,m=e("debug")("JsSIP:sanityCheck"),g=e("./Constants"),T=e("./SIPMessage"),_=e("./Utils"),v=[],C=[],S=[];v.push(s),v.push(l),v.push(i),v.push(o),C.push(u),C.push(a),S.push(c)},{"./Constants":1,"./SIPMessage":18,"./Utils":25,debug:33}],28:[function(e,t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function l(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!l(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,n,r,l,u,a;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),n.apply(this,l)}else if(i(n))for(l=Array.prototype.slice.call(arguments,1),a=n.slice(),r=a.length,u=0;r>u;u++)a[u].apply(this,l);return!0},r.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(n=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},r.prototype.removeListener=function(e,t){var n,r,l,o;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],l=n.length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(o=l;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=o;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],s(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],29:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],30:[function(e,t,n){function r(){c&&o&&(c=!1,o.length?a=o.concat(a):h=-1,a.length&&s())}function s(){if(!c){var e=setTimeout(r);c=!0;for(var t=a.length;t;){for(o=a,a=[];++h<t;)o&&o[h].run();h=-1,t=a.length}o=null,c=!1,clearTimeout(e)}}function l(e,t){this.fun=e,this.array=t}function i(){}var o,u=t.exports={},a=[],c=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];a.push(new l(e,t)),1!==a.length||c||setTimeout(s,0)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=i,u.addListener=i,u.once=i,u.off=i,u.removeListener=i,u.removeAllListeners=i,u.emit=i,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],31:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],32:[function(e,t,n){(function(t,r){function s(e,t){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),m(t)?r.showHidden=t:t&&n._extend(r,t),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),u(r,e,r.depth)}function l(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function i(e,t){return e}function o(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&b(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var s=t.inspect(r,e);return v(s)||(s=u(e,s,r)),s}var l=a(e,t);if(l)return l;var i=Object.keys(t),m=o(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),R(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return c(t);if(0===i.length){if(b(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(y(t))return e.stylize(Date.prototype.toString.call(t),"date");if(R(t))return c(t)}var T="",_=!1,C=["{","}"];if(f(t)&&(_=!0,C=["[","]"]),b(t)){var S=t.name?": "+t.name:"";T=" [Function"+S+"]"}if(E(t)&&(T=" "+RegExp.prototype.toString.call(t)),y(t)&&(T=" "+Date.prototype.toUTCString.call(t)),R(t)&&(T=" "+c(t)),0===i.length&&(!_||0==t.length))return C[0]+T+C[1];if(0>r)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var A;return A=_?h(e,t,r,m,i):i.map(function(n){return d(e,t,r,m,n,_)}),e.seen.pop(),p(A,T,C)}function a(e,t){if(S(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return _(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,s){for(var l=[],i=0,o=t.length;o>i;++i)O(t,String(i))?l.push(d(e,t,n,r,String(i),!0)):l.push("");return s.forEach(function(s){s.match(/^\d+$/)||l.push(d(e,t,n,r,s,!0))}),l}function d(e,t,n,r,s,l){var i,o,a;if(a=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]},a.get?o=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(o=e.stylize("[Setter]","special")),O(r,s)||(i="["+s+"]"),o||(e.seen.indexOf(a.value)<0?(o=g(n)?u(e,a.value,null):u(e,a.value,n-1),o.indexOf("\n")>-1&&(o=l?o.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+o.split("\n").map(function(e){return"   "+e}).join("\n"))):o=e.stylize("[Circular]","special")),S(i)){if(l&&s.match(/^\d+$/))return o;i=JSON.stringify(""+s),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+o}function p(e,t,n){var r=0,s=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return s>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function f(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function g(e){return null===e}function T(e){return null==e}function _(e){return"number"==typeof e}function v(e){return"string"==typeof e}function C(e){return"symbol"==typeof e}function S(e){return void 0===e}function E(e){return A(e)&&"[object RegExp]"===w(e)}function A(e){return"object"==typeof e&&null!==e}function y(e){return A(e)&&"[object Date]"===w(e)}function R(e){return A(e)&&("[object Error]"===w(e)||e instanceof Error)}function b(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function w(e){return Object.prototype.toString.call(e)}function N(e){return 10>e?"0"+e.toString(10):e.toString(10)}function D(){var e=new Date,t=[N(e.getHours()),N(e.getMinutes()),N(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var x=/%[sdj%]/g;n.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,l=r.length,i=String(e).replace(x,function(e){if("%%"===e)return"%";if(n>=l)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),o=r[n];l>n;o=r[++n])i+=g(o)||!A(o)?" "+o:" "+s(o);return i},n.deprecate=function(e,s){function l(){if(!i){if(t.throwDeprecation)throw new Error(s);t.traceDeprecation?console.trace(s):console.error(s),i=!0}return e.apply(this,arguments)}if(S(r.process))return function(){return n.deprecate(e,s).apply(this,arguments)};if(t.noDeprecation===!0)return e;var i=!1;return l};var U,M={};n.debuglog=function(e){if(S(U)&&(U=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!M[e])if(new RegExp("\\b"+e+"\\b","i").test(U)){var r=t.pid;M[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else M[e]=function(){};return M[e]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=f,n.isBoolean=m,n.isNull=g,n.isNullOrUndefined=T,n.isNumber=_,n.isString=v,n.isSymbol=C,n.isUndefined=S,n.isRegExp=E,n.isObject=A,n.isDate=y,n.isError=R,n.isFunction=b,n.isPrimitive=I,n.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",D(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!A(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":31,_process:30,inherits:29}],33:[function(e,t,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function s(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var s=0,l=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(s++,"%c"===e&&(l=s))}),e.splice(l,0,r),e}function l(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function o(){var e;try{e=n.storage.debug}catch(t){}return e}function u(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=l,n.formatArgs=s,n.save=i,n.load=o,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(o())},{"./debug":34}],34:[function(e,t,n){function r(){return n.colors[c++%n.colors.length]}function s(e){function t(){}function s(){var e=s,t=+new Date,l=t-(a||t);e.diff=l,e.prev=a,e.curr=t,a=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());var i=Array.prototype.slice.call(arguments);i[0]=n.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var o=0;i[0]=i[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;o++;var s=n.formatters[r];if("function"==typeof s){var l=i[o];t=s.call(e,l),i.splice(o,1),o--}return t}),"function"==typeof n.formatArgs&&(i=n.formatArgs.apply(e,i));var u=s.log||n.log||console.log.bind(console);u.apply(e,i)}t.enabled=!1,s.enabled=!0;var l=n.enabled(e)?s:t;return l.namespace=e,l}function l(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,s=0;r>s;s++)t[s]&&(e=t[s].replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function i(){n.enable("")}function o(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=s,n.coerce=u,n.disable=i,n.enable=l,n.enabled=o,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var a,c=0},{ms:35}],35:[function(e,t,n){function r(e){if(e=""+e,!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function s(e){return e>=c?Math.round(e/c)+"d":e>=a?Math.round(e/a)+"h":e>=u?Math.round(e/u)+"m":e>=o?Math.round(e/o)+"s":e+"ms"}function l(e){return i(e,c,"day")||i(e,a,"hour")||i(e,u,"minute")||i(e,o,"second")||e+" ms"}function i(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var o=1e3,u=60*o,a=60*u,c=24*a,h=365.25*c;t.exports=function(e,t){return t=t||{},"string"==typeof e?r(e):t["long"]?l(e):s(e)}},{}],36:[function(e,t,n){(function(n){"use strict";function r(e){function t(e){return function(){throw new Error("rtcninja: WebRTC not supported, missing "+e+" [browser: "+i.name+" "+i.version+"]")}}if(v&&i.chrome&&_>=32||i.android&&i.chrome&&_>=39||v&&i.opera&&_>=27||i.android&&i.opera&&_>=24||i.android&&i.webkit&&!i.chrome&&_>=37||l.webkitGetUserMedia&&s.webkitRTCPeerConnection)C=!0,a=l.webkitGetUserMedia.bind(l),c=s.webkitRTCPeerConnection,h=s.RTCSessionDescription,d=s.RTCIceCandidate,p=s.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=function(e,t){return e.src=URL.createObjectURL(t),e},g=!0,T=!1;else if(v&&i.firefox&&_>=22||i.android&&i.firefox&&_>=33||l.mozGetUserMedia&&s.mozRTCPeerConnection)C=!0,a=l.mozGetUserMedia.bind(l),c=s.mozRTCPeerConnection,h=s.mozRTCSessionDescription,d=s.mozRTCIceCandidate,p=s.MediaStreamTrack,m=function(e,t){return e.src=URL.createObjectURL(t),e},g=!1,T=!1;else if(e.plugin&&"function"==typeof e.plugin.isRequired&&e.plugin.isRequired()&&"function"==typeof e.plugin.isInstalled&&e.plugin.isInstalled()){var n=e.plugin["interface"];C=!0,a=n.getUserMedia,c=n.RTCPeerConnection,h=n.RTCSessionDescription,d=n.RTCIceCandidate,p=n.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=n.attachMediaStream,g=n.canRenegotiate,T=!0}else l.getUserMedia&&s.RTCPeerConnection&&(C=!0,a=l.getUserMedia.bind(l),c=s.RTCPeerConnection,h=s.RTCSessionDescription,d=s.RTCIceCandidate,p=s.MediaStreamTrack,p&&p.getSources?f=p.getSources.bind(p):l.getMediaDevices&&(f=l.getMediaDevices.bind(l)),m=s.attachMediaStream||function(e,t){return e.src=URL.createObjectURL(t),e},g=!0,T=!1);return r.hasWebRTC=function(){return C},a?r.getUserMedia=function(e,t,n){o("getUserMedia() | constraints: %o",e);try{a(e,function(e){o("getUserMedia() | success"),t&&t(e)},function(e){o("getUserMedia() | error:",e),n&&n(e)})}catch(r){u("getUserMedia() | error:",r),n&&n(r)}}:r.getUserMedia=function(e,n,r){u("getUserMedia() | WebRTC not supported"),r?r(new Error("rtcninja: WebRTC not supported, missing getUserMedia [browser: "+i.name+" "+i.version+"]")):t("getUserMedia")},r.RTCPeerConnection=c||t("RTCPeerConnection"),r.RTCSessionDescription=h||t("RTCSessionDescription"),r.RTCIceCandidate=d||t("RTCIceCandidate"),r.MediaStreamTrack=p||t("MediaStreamTrack"),r.getMediaDevices=f,r.attachMediaStream=m||t("attachMediaStream"),r.canRenegotiate=g,r.closeMediaStream=function(e){if(e)try{o("closeMediaStream() | calling stop() on all the MediaStreamTrack");var t,n,r;if(e.getTracks)for(t=e.getTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop();else{for(t=e.getAudioTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop();for(t=e.getVideoTracks(),n=0,r=t.length;r>n;n+=1)t[n].stop()}}catch(s){"function"!=typeof e.stop&&"object"!=typeof e.stop||(o("closeMediaStream() | calling stop() on the MediaStream"),e.stop())}},r.fixPeerConnectionConfig=function(e){var t,n,r,s,l;for(Array.isArray(e.iceServers)||(e.iceServers=[]),t=0,n=e.iceServers.length;n>t;t+=1)r=e.iceServers[t],s=r.hasOwnProperty("urls"),l=r.hasOwnProperty("url"),"object"==typeof r&&(s&&!l?r.url=Array.isArray(r.urls)?r.urls[0]:r.urls:!s&&l&&(r.urls=Array.isArray(r.url)?r.url.slice():r.url),l&&Array.isArray(r.url)&&(r.url=r.url[0]))},r.fixRTCOfferOptions=function(e){e=e||{},T?(e.hasOwnProperty("offerToReceiveAudio")&&(e.mandatory=e.mandatory||{},e.mandatory.OfferToReceiveAudio=!!e.offerToReceiveAudio),e.hasOwnProperty("offerToReceiveVideo")&&(e.mandatory=e.mandatory||{},e.mandatory.OfferToReceiveVideo=!!e.offerToReceiveVideo)):(e.mandatory&&e.mandatory.hasOwnProperty("OfferToReceiveAudio")&&(e.offerToReceiveAudio=e.mandatory.OfferToReceiveAudio?1:0),e.mandatory&&e.mandatory.hasOwnProperty("OfferToReceiveVideo")&&(e.offerToReceiveVideo=e.mandatory.OfferToReceiveVideo?1:0),delete e.mandatory)},r}t.exports=r;var s,l,i=e("bowser"),o=e("debug")("rtcninja:Adapter"),u=e("debug")("rtcninja:ERROR:Adapter"),a=null,c=null,h=null,d=null,p=null,f=null,m=null,g=!1,T=!1,_=Number(i.version)||0,v=!(i.mobile||i.tablet&&!(i.msie&&_>=10)),C=!1;u.log=console.warn.bind(console),s=n.window||n,l=s.navigator||{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bowser:40,debug:33}],37:[function(e,t,n){"use strict";function r(e,t){h("new | [pcConfig:%o, pcConstraints:%o]",e,t),s.call(this,e),this.pcConstraints=t,this.ourLocalDescription=null,this.ourSignalingState=null,this.ourIceConnectionState=null,this.ourIceGatheringState=null,this.timerGatheringTimeout=null,this.timerGatheringTimeoutAfterRelay=null,this.ignoreIceGathering=!1,this.closed=!1,o.call(this),a.call(this)}function s(e){this.pcConfig=c(!0,e),p.fixPeerConnectionConfig(this.pcConfig),this.options={iceTransportsRelay:"relay"===this.pcConfig.iceTransports,iceTransportsNone:"none"===this.pcConfig.iceTransports,gatheringTimeout:this.pcConfig.gatheringTimeout,gatheringTimeoutAfterRelay:this.pcConfig.gatheringTimeoutAfterRelay},delete this.pcConfig.gatheringTimeout,delete this.pcConfig.gatheringTimeoutAfterRelay,h("setConfigurationAndOptions | processed pcConfig: %o",this.pcConfig)}function l(){return this.closed||this.pc&&"closed"===this.pc.iceConnectionState}function i(){var e=this,t=this.pc;t.onnegotiationneeded=function(t){l.call(e)||(h("onnegotiationneeded()"),e.onnegotiationneeded&&e.onnegotiationneeded(t))},t.onicecandidate=function(t){var n,r,s;if(!l.call(e)&&!e.ignoreIceGathering&&!e.options.iceTransportsNone)if(n=t.candidate){if(r=f.REGEXP_RELAY_CANDIDATE.test(n.candidate),e.options.iceTransportsRelay&&!r)return;r&&!e.timerGatheringTimeoutAfterRelay&&"number"==typeof e.options.gatheringTimeoutAfterRelay&&(h("onicecandidate() | first relay candidate found, ending gathering in %d ms",e.options.gatheringTimeoutAfterRelay),
e.timerGatheringTimeoutAfterRelay=setTimeout(function(){l.call(e)||(h("forced end of candidates after timeout"),delete e.timerGatheringTimeoutAfterRelay,clearTimeout(e.timerGatheringTimeout),delete e.timerGatheringTimeout,e.ignoreIceGathering=!0,e.onicecandidate&&e.onicecandidate({candidate:null},null))},e.options.gatheringTimeoutAfterRelay)),s=new p.RTCIceCandidate({sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,candidate:n.candidate}),null===m.normalizeCandidate&&(f.REGEXP_NORMALIZED_CANDIDATE.test(n.candidate)?m.normalizeCandidate=!1:(h('onicecandidate() | normalizing ICE candidates syntax (remove "a=" and "\\r\\n")'),m.normalizeCandidate=!0)),m.normalizeCandidate&&(s.candidate=n.candidate.replace(f.REGEXP_FIX_CANDIDATE,"")),h("onicecandidate() | m%d(%s) %s",s.sdpMLineIndex,s.sdpMid||"no mid",s.candidate),e.onicecandidate&&e.onicecandidate(t,s)}else h("onicecandidate() | end of candidates"),clearTimeout(e.timerGatheringTimeout),delete e.timerGatheringTimeout,clearTimeout(e.timerGatheringTimeoutAfterRelay),delete e.timerGatheringTimeoutAfterRelay,e.onicecandidate&&e.onicecandidate(t,null)},t.onaddstream=function(t){l.call(e)||(h("onaddstream() | stream: %o",t.stream),e.onaddstream&&e.onaddstream(t,t.stream))},t.onremovestream=function(t){l.call(e)||(h("onremovestream() | stream: %o",t.stream),e.onremovestream&&e.onremovestream(t,t.stream))},t.ondatachannel=function(t){l.call(e)||(h("ondatachannel() | datachannel: %o",t.channel),e.ondatachannel&&e.ondatachannel(t,t.channel))},t.onsignalingstatechange=function(n){t.signalingState!==e.ourSignalingState&&(h("onsignalingstatechange() | signalingState: %s",t.signalingState),e.ourSignalingState=t.signalingState,e.onsignalingstatechange&&e.onsignalingstatechange(n,t.signalingState))},t.oniceconnectionstatechange=function(n){t.iceConnectionState!==e.ourIceConnectionState&&(h("oniceconnectionstatechange() | iceConnectionState: %s",t.iceConnectionState),e.ourIceConnectionState=t.iceConnectionState,e.oniceconnectionstatechange&&e.oniceconnectionstatechange(n,t.iceConnectionState))},t.onicegatheringstatechange=function(n){l.call(e)||t.iceGatheringState!==e.ourIceGatheringState&&(h("onicegatheringstatechange() | iceGatheringState: %s",t.iceGatheringState),e.ourIceGatheringState=t.iceGatheringState,e.onicegatheringstatechange&&e.onicegatheringstatechange(n,t.iceGatheringState))},t.onidentityresult=function(t){l.call(e)||(h("onidentityresult()"),e.onidentityresult&&e.onidentityresult(t))},t.onpeeridentity=function(t){l.call(e)||(h("onpeeridentity()"),e.onpeeridentity&&e.onpeeridentity(t))},t.onidpassertionerror=function(t){l.call(e)||(h("onidpassertionerror()"),e.onidpassertionerror&&e.onidpassertionerror(t))},t.onidpvalidationerror=function(t){l.call(e)||(h("onidpvalidationerror()"),e.onidpvalidationerror&&e.onidpvalidationerror(t))}}function o(){this.pcConstraints?this.pc=new p.RTCPeerConnection(this.pcConfig,this.pcConstraints):this.pc=new p.RTCPeerConnection(this.pcConfig),i.call(this)}function u(){var e=this.pc,t=this.options,n=null;return e.localDescription?(t.iceTransportsRelay?n=e.localDescription.sdp.replace(f.REGEXP_SDP_NON_RELAY_CANDIDATES,""):t.iceTransportsNone&&(n=e.localDescription.sdp.replace(f.REGEXP_SDP_CANDIDATES,"")),this.ourLocalDescription=new p.RTCSessionDescription({type:e.localDescription.type,sdp:n||e.localDescription.sdp}),this.ourLocalDescription):(this.ourLocalDescription=null,null)}function a(){var e=this;Object.defineProperties(this,{peerConnection:{get:function(){return e.pc}},signalingState:{get:function(){return e.pc.signalingState}},iceConnectionState:{get:function(){return e.pc.iceConnectionState}},iceGatheringState:{get:function(){return e.pc.iceGatheringState}},localDescription:{get:function(){return u.call(e)}},remoteDescription:{get:function(){return e.pc.remoteDescription}},peerIdentity:{get:function(){return e.pc.peerIdentity}}})}t.exports=r;var c=e("merge"),h=e("debug")("rtcninja:RTCPeerConnection"),d=e("debug")("rtcninja:ERROR:RTCPeerConnection"),p=e("./Adapter"),f={REGEXP_NORMALIZED_CANDIDATE:new RegExp(/^candidate:/i),REGEXP_FIX_CANDIDATE:new RegExp(/(^a=|\r|\n)/gi),REGEXP_RELAY_CANDIDATE:new RegExp(/ relay /i),REGEXP_SDP_CANDIDATES:new RegExp(/^a=candidate:.*\r\n/gim),REGEXP_SDP_NON_RELAY_CANDIDATES:new RegExp(/^a=candidate:(.(?!relay ))*\r\n/gim)},m={normalizeCandidate:null};d.log=console.warn.bind(console),r.prototype.createOffer=function(e,t,n){h("createOffer()");var r=this;p.fixRTCOfferOptions(n),this.pc.createOffer(function(t){l.call(r)||(h("createOffer() | success"),e&&e(t))},function(e){l.call(r)||(d("createOffer() | error:",e),t&&t(e))},n)},r.prototype.createAnswer=function(e,t,n){h("createAnswer()");var r=this;this.pc.createAnswer(function(t){l.call(r)||(h("createAnswer() | success"),e&&e(t))},function(e){l.call(r)||(d("createAnswer() | error:",e),t&&t(e))},n)},r.prototype.setLocalDescription=function(e,t,n){function r(){"number"==typeof s.options.gatheringTimeout&&"complete"!==s.pc.iceGatheringState&&(h("setLocalDescription() | ending gathering in %d ms (gatheringTimeout option)",s.options.gatheringTimeout),s.timerGatheringTimeout=setTimeout(function(){l.call(s)||(h("forced end of candidates after gatheringTimeout timeout"),delete s.timerGatheringTimeout,clearTimeout(s.timerGatheringTimeoutAfterRelay),delete s.timerGatheringTimeoutAfterRelay,s.ignoreIceGathering=!0,s.onicecandidate&&s.onicecandidate({candidate:null},null))},s.options.gatheringTimeout))}h("setLocalDescription()");var s=this;this.pc.setLocalDescription(e,function(){l.call(s)||(h("setLocalDescription() | success"),clearTimeout(s.timerGatheringTimeout),delete s.timerGatheringTimeout,clearTimeout(s.timerGatheringTimeoutAfterRelay),delete s.timerGatheringTimeoutAfterRelay,r(),t&&t())},function(e){l.call(s)||(d("setLocalDescription() | error:",e),n&&n(e))}),this.ignoreIceGathering=!1},r.prototype.setRemoteDescription=function(e,t,n){h("setRemoteDescription()");var r=this;this.pc.setRemoteDescription(e,function(){l.call(r)||(h("setRemoteDescription() | success"),t&&t())},function(e){l.call(r)||(d("setRemoteDescription() | error:",e),n&&n(e))})},r.prototype.updateIce=function(e){h("updateIce() | pcConfig: %o",e),s.call(this,e),this.pc.updateIce(this.pcConfig),this.ignoreIceGathering=!1},r.prototype.addIceCandidate=function(e,t,n){h("addIceCandidate() | candidate: %o",e);var r=this;this.pc.addIceCandidate(e,function(){l.call(r)||(h("addIceCandidate() | success"),t&&t())},function(e){l.call(r)||(d("addIceCandidate() | error:",e),n&&n(e))})},r.prototype.getConfiguration=function(){return h("getConfiguration()"),this.pc.getConfiguration()},r.prototype.getLocalStreams=function(){return h("getLocalStreams()"),this.pc.getLocalStreams()},r.prototype.getRemoteStreams=function(){return h("getRemoteStreams()"),this.pc.getRemoteStreams()},r.prototype.getStreamById=function(e){return h("getStreamById() | streamId: %s",e),this.pc.getStreamById(e)},r.prototype.addStream=function(e){h("addStream() | stream: %s",e),this.pc.addStream(e)},r.prototype.removeStream=function(e){h("removeStream() | stream: %o",e),this.pc.removeStream(e)},r.prototype.close=function(){h("close()"),this.closed=!0,clearTimeout(this.timerGatheringTimeout),delete this.timerGatheringTimeout,clearTimeout(this.timerGatheringTimeoutAfterRelay),delete this.timerGatheringTimeoutAfterRelay,this.pc.close()},r.prototype.createDataChannel=function(){return h("createDataChannel()"),this.pc.createDataChannel.apply(this.pc,arguments)},r.prototype.createDTMFSender=function(e){return h("createDTMFSender()"),this.pc.createDTMFSender(e)},r.prototype.getStats=function(){return h("getStats()"),this.pc.getStats.apply(this.pc,arguments)},r.prototype.setIdentityProvider=function(){return h("setIdentityProvider()"),this.pc.setIdentityProvider.apply(this.pc,arguments)},r.prototype.getIdentityAssertion=function(){return h("getIdentityAssertion()"),this.pc.getIdentityAssertion()},r.prototype.reset=function(e){h("reset() | pcConfig: %o",e);var t=this.pc;t.onnegotiationneeded=null,t.onicecandidate=null,t.onaddstream=null,t.onremovestream=null,t.ondatachannel=null,t.onsignalingstatechange=null,t.oniceconnectionstatechange=null,t.onicegatheringstatechange=null,t.onidentityresult=null,t.onpeeridentity=null,t.onidpassertionerror=null,t.onidpvalidationerror=null,clearTimeout(this.timerGatheringTimeout),delete this.timerGatheringTimeout,clearTimeout(this.timerGatheringTimeoutAfterRelay),delete this.timerGatheringTimeoutAfterRelay,h("reset() | closing current peerConnection"),t.close(),s.call(this,e),o.call(this)}},{"./Adapter":36,debug:33,merge:41}],38:[function(e,t,n){"use strict";function r(e){var t=u(e||{});return c=!0,r.RTCPeerConnection=a,r.getUserMedia=t.getUserMedia,r.RTCSessionDescription=t.RTCSessionDescription,r.RTCIceCandidate=t.RTCIceCandidate,r.MediaStreamTrack=t.MediaStreamTrack,r.getMediaDevices=t.getMediaDevices,r.attachMediaStream=t.attachMediaStream,r.closeMediaStream=t.closeMediaStream,r.canRenegotiate=t.canRenegotiate,t.hasWebRTC()?(l("WebRTC supported"),!0):(i("WebRTC not supported"),!1)}t.exports=r;var s=e("bowser"),l=e("debug")("rtcninja"),i=e("debug")("rtcninja:ERROR"),o=e("./version"),u=e("./Adapter"),a=e("./RTCPeerConnection"),c=!1;i.log=console.warn.bind(console),l("version %s",o),l("detected browser: %s %s [mobile:%s, tablet:%s, android:%s, ios:%s]",s.name,s.version,!!s.mobile,!!s.tablet,!!s.android,!!s.ios),r.hasWebRTC=function(){return c||r(),u.hasWebRTC()},Object.defineProperty(r,"version",{get:function(){return o}}),Object.defineProperty(r,"called",{get:function(){return c}}),r.debug=e("debug"),r.browser=s},{"./Adapter":36,"./RTCPeerConnection":37,"./version":39,bowser:40,debug:33}],39:[function(e,t,n){"use strict";t.exports=e("../package.json").version},{"../package.json":42}],40:[function(t,n,r){!function(t,r){"undefined"!=typeof n&&n.exports?n.exports=r():"function"==typeof e&&e.amd?e(r):this[t]=r()}("bowser",function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function r(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var s,l=n(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),o=!i&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),a=!u&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),h=/silk/i.test(e),d=/sailfish/i.test(e),p=/tizen/i.test(e),f=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),g=!m&&/windows/i.test(e),T=!l&&!h&&/macintosh/i.test(e),_=!o&&!d&&!p&&!f&&/linux/i.test(e),v=n(/edge\/(\d+(\.\d+)?)/i),C=n(/version\/(\d+(\.\d+)?)/i),S=/tablet/i.test(e),E=!S&&/[^-]mobi/i.test(e),A=/xbox/i.test(e);/opera|opr|opios/i.test(e)?s={name:"Opera",opera:t,version:C||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?s={name:"Opera Coast",coast:t,version:C||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?s={name:"Yandex Browser",yandexbrowser:t,version:C||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?s={name:"UC Browser",ucbrowser:t,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?s={name:"Maxthon",maxthon:t,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?s={name:"Epiphany",epiphany:t,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?s={name:"Puffin",puffin:t,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?s={name:"Sleipnir",sleipnir:t,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?s={name:"K-Meleon",kMeleon:t,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(s={name:"Windows Phone",windowsphone:t},v?(s.msedge=t,s.version=v):(s.msie=t,s.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?s={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?s={name:"Chrome",chromeos:t,chromeBook:t,chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?s={name:"Microsoft Edge",msedge:t,version:v}:/vivaldi/i.test(e)?s={name:"Vivaldi",vivaldi:t,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||C}:d?s={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?s={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(s={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(s.firefoxos=t)):h?s={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?s={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?s={name:"SlimerJS",slimer:t,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?s={name:"BlackBerry",blackberry:t,version:C||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(s={name:"WebOS",webos:t,version:C||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(s.touchpad=t)):/bada/i.test(e)?s={name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:p?s={name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||C}:/qupzilla/i.test(e)?s={name:"QupZilla",qupzilla:t,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||C}:/chromium/i.test(e)?s={name:"Chromium",chromium:t,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||C}:/chrome|crios|crmo/i.test(e)?s={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?s={name:"Android",version:C}:/safari|applewebkit/i.test(e)?(s={name:"Safari",safari:t},C&&(s.version=C)):l?(s={name:"iphone"==l?"iPhone":"ipad"==l?"iPad":"iPod"},C&&(s.version=C)):s=/googlebot/i.test(e)?{name:"Googlebot",googlebot:t,version:n(/googlebot\/(\d+(\.\d+))/i)||C}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!s.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(s.name=s.name||"Blink",s.blink=t):(s.name=s.name||"Webkit",s.webkit=t),!s.version&&C&&(s.version=C)):!s.opera&&/gecko\//i.test(e)&&(s.name=s.name||"Gecko",s.gecko=t,s.version=s.version||n(/gecko\/(\d+(\.\d+)?)/i)),s.msedge||!o&&!s.silk?l?(s[l]=t,s.ios=t):T?s.mac=t:A?s.xbox=t:g?s.windows=t:_&&(s.linux=t):s.android=t;var y="";s.windowsphone?y=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):l?(y=n(/os (\d+([_\s]\d+)*) like mac os x/i),y=y.replace(/[_\s]/g,".")):o?y=n(/android[ \/-](\d+(\.\d+)*)/i):s.webos?y=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):s.blackberry?y=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):s.bada?y=n(/bada\/(\d+(\.\d+)*)/i):s.tizen&&(y=n(/tizen[\/\s](\d+(\.\d+)*)/i)),y&&(s.osversion=y);var R=y.split(".")[0];return S||a||"ipad"==l||o&&(3==R||R>=4&&!E)||s.silk?s.tablet=t:(E||"iphone"==l||"ipod"==l||o||u||s.blackberry||s.webos||s.bada)&&(s.mobile=t),s.msedge||s.msie&&s.version>=10||s.yandexbrowser&&s.version>=15||s.vivaldi&&s.version>=1||s.chrome&&s.version>=20||s.firefox&&s.version>=20||s.safari&&s.version>=6||s.opera&&s.version>=10||s.ios&&s.osversion&&s.osversion.split(".")[0]>=6||s.blackberry&&s.version>=10.1?s.a=t:s.msie&&s.version<10||s.chrome&&s.version<20||s.firefox&&s.version<20||s.safari&&s.version<6||s.opera&&s.version<10||s.ios&&s.osversion&&s.osversion.split(".")[0]<6?s.c=t:s.x=t,s}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in n)return!0}return!1},n._detect=e,n})},{}],41:[function(e,t,n){!function(e){function n(e,t){if("object"!==s(e))return t;for(var r in t)"object"===s(e[r])&&"object"===s(t[r])?e[r]=n(e[r],t[r]):e[r]=t[r];return e}function r(e,t,r){var i=r[0],o=r.length;(e||"object"!==s(i))&&(i={});for(var u=0;o>u;++u){var a=r[u],c=s(a);if("object"===c)for(var h in a){var d=e?l.clone(a[h]):a[h];t?i[h]=n(i[h],d):i[h]=d}}return i}function s(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var l=function(e){return r(e===!0,!1,arguments)},i="merge";l.recursive=function(e){return r(e===!0,!0,arguments)},l.clone=function(e){var t,n,r=e,i=s(e);if("array"===i)for(r=[],n=e.length,t=0;n>t;++t)r[t]=l.clone(e[t]);else if("object"===i){r={};for(t in e)r[t]=l.clone(e[t])}return r},e?t.exports=l:window[i]=l}("object"==typeof t&&t&&"object"==typeof t.exports&&t.exports)},{}],42:[function(e,t,n){t.exports={name:"rtcninja",version:"0.6.7",description:"WebRTC API wrapper to deal with different browsers",author:{name:"Iñaki Baz Castillo",email:"inaki.baz@eface2face.com",url:"http://eface2face.com"},contributors:[{name:"Jesús Pérez",email:"jesus.perez@eface2face.com"}],license:"MIT",main:"lib/rtcninja.js",homepage:"https://github.com/eface2face/rtcninja.js",repository:{type:"git",url:"git+https://github.com/eface2face/rtcninja.js.git"},keywords:["webrtc"],engines:{node:">=0.10.32"},dependencies:{bowser:"^1.2.0",debug:"^2.2.0",merge:"^1.2.0"},devDependencies:{browserify:"^13.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-expect-file":"0.0.7","gulp-filelog":"^0.4.1","gulp-header":"^1.8.2","gulp-jscs":"^3.0.2","gulp-jscs-stylish":"^1.4.0","gulp-jshint":"^2.0.1","gulp-rename":"^1.2.2","gulp-uglify":"^1.5.3","jshint-stylish":"^2.2.0","vinyl-source-stream":"^1.1.0"},readme:'# rtcninja.js <img src="http://www.pubnub.com/blog/wp-content/uploads/2014/01/google-webrtc-logo.png" height="30" width="30">\n\nWebRTC API wrapper to deal with different browsers transparently, [eventually](http://iswebrtcreadyyet.com/) this library shouldn\'t be needed. We only have to wait until W3C group in charge [finishes the specification](https://tools.ietf.org/wg/rtcweb/) and the different browsers implement it correctly :sweat_smile:.\n\n<img src="http://images4.fanpop.com/image/photos/21800000/browser-fight-google-chrome-21865454-600-531.jpg" height="250" width="250">\n\nSupported environments:\n* [Google Chrome](https://www.google.com/chrome/browser/desktop/index.html) (desktop & mobile)\n* [Google Canary](https://www.google.com/chrome/browser/canary.html) (desktop & mobile)\n* [Mozilla Firefox](https://www.mozilla.org/en-GB/firefox/new) (desktop & mobile)\n* [Firefox Nigthly](https://nightly.mozilla.org/) (desktop & mobile)\n* [Opera](http://www.opera.com/)\n* [Vivaldi](https://vivaldi.com/)\n* [CrossWalk](https://crosswalk-project.org/)\n* [Cordova](http://cordova.apache.org/): iOS support, you only have to use our plugin [following these steps](https://github.com/eface2face/cordova-plugin-iosrtc#usage).\n* [NW.js](https://github.com/nwjs/nw.js/)\n* [Electron](https://github.com/atom/electron)\n\n\n## Installation\n\n### **npm**:\n\n```bash\n$ npm install rtcninja\n```\n\nand then:\n\n```javascript\nvar rtcninja = require(\'rtcninja\');\n```\n\n### **bower**:\n\n```bash\n$ bower install rtcninja\n```\n\n\n## Browserified library\n\nTake a browserified version of the library from the `dist/` folder:\n\n* `dist/rtcninja.js`: The uncompressed version.\n* `dist/rtcninja.min.js`: The compressed production-ready version.\n\nThey expose the global `window.rtcninja` module.\n\n\n## Usage\n\nIn the [examples](./examples/) folder we provide a complete one.\n\n```javascript\n// Must first call it.\nrtcninja();\n\n// Then check.\nif (rtcninja.hasWebRTC()) {\n    // Do something.\n}\nelse {\n    // Do something.\n}\n```\n\n\n## Documentation\n\nYou can read the full [API documentation](docs/index.md) in the docs folder.\n\n\n## Issues\n\nhttps://github.com/eface2face/rtcninja.js/issues\n\n\n## Developer guide\n\n* Create a branch with a name including your user and a meaningful word about the fix/feature you\'re going to implement, ie: "jesusprubio/fixstuff"\n* Use [GitHub pull requests](https://help.github.com/articles/using-pull-requests).\n* Conventions:\n * We use [JSHint](http://jshint.com/) and [Crockford\'s Styleguide](http://javascript.crockford.com/code.html).\n * Please run `grunt lint` to be sure your code fits with them.\n\n\n### Debugging\n\nThe library includes the Node [debug](https://github.com/visionmedia/debug) module. In order to enable debugging:\n\nIn Node set the `DEBUG=rtcninja*` environment variable before running the application, or set it at the top of the script:\n\n```javascript\nprocess.env.DEBUG = \'rtcninja*\';\n```\n\nIn the browser run `rtcninja.debug.enable(\'rtcninja*\');` and reload the page. Note that the debugging settings are stored into the browser LocalStorage. To disable it run `rtcninja.debug.disable(\'rtcninja*\');`.\n\n\n## Copyright & License\n\n* eFace2Face Inc.\n* [MIT](./LICENSE)\n',readmeFilename:"README.md",gitHead:"d36b02d0503ca152771692935a4096130f28dc5d",bugs:{url:"https://github.com/eface2face/rtcninja.js/issues"},_id:"rtcninja@0.6.7",scripts:{},_shasum:"f7c8855f2c0e41ae08c638375bad1dc977369ec2",_from:"rtcninja@>=0.6.7 <0.7.0"}},{}],43:[function(e,t,n){var r=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{push:"invalid",names:["value"]}]};Object.keys(r).forEach(function(e){var t=r[e];t.forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],44:[function(e,t,n){var r=e("./parser"),s=e("./writer");n.write=s,n.parse=r.parse,n.parseFmtpConfig=r.parseFmtpConfig,n.parsePayloads=r.parsePayloads,n.parseRemoteCandidates=r.parseRemoteCandidates},{"./parser":45,"./writer":46}],45:[function(e,t,n){var r=function(e){return String(Number(e))===e?Number(e):e},s=function(e,t,n,s){if(s&&!n)t[s]=r(e[1]);else for(var l=0;l<n.length;l+=1)null!=e[l+1]&&(t[n[l]]=r(e[l+1]))},l=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var l=e.push?{}:r?t[e.name]:t;s(n.match(e.reg),l,e.names,e.name),e.push&&t[e.push].push(l)},i=e("./grammar"),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);n.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach(function(e){var t=e[0],s=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var o=0;o<(i[t]||[]).length;o+=1){var u=i[t][o];if(u.reg.test(s))return l(u,r,s)}}),t.media=n,t};var u=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length&&(e[n[0]]=r(n[1])),e};n.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(u,{})},n.parsePayloads=function(e){return e.split(" ").map(Number)},n.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),s=0;s<n.length;s+=3)t.push({component:n[s],ip:n[s+1],port:n[s+2]});return t}},{"./grammar":43}],46:[function(e,t,n){var r=e("./grammar"),s=/%[sdv%]/g,l=function(e){var t=1,n=arguments,r=n.length;return e.replace(s,function(e){if(t>=r)return e;var s=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},i=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,s=[e+"="+r];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?s.push(n[t.name][o]):s.push(n[t.names[i]])}else s.push(n[t.name]);return l.apply(null,s)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],u=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||o,s=t.innerOrder||u,l=[];return n.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?l.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){l.push(i(t,n,e))})})}),e.media.forEach(function(e){l.push(i("m",r.m[0],e)),s.forEach(function(t){r[t].forEach(function(n){n.name in e&&null!=e[n.name]?l.push(i(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){l.push(i(t,n,e))})})})}),l.join("\r\n")+"\r\n"}},{"./grammar":43}],47:[function(e,t,n){t.exports={name:"jssip",title:"JsSIP",description:"the Javascript SIP library",version:"2.0.1",homepage:"http://jssip.net",author:"José Luis Millán <jmillan@aliax.net> (https://github.com/jmillan)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (https://github.com/ibc)","Saúl Ibarra Corretgé <saghul@gmail.com> (https://github.com/saghul)"],main:"lib/JsSIP.js",keywords:["sip","websocket","webrtc","node","browser","library"],license:"MIT",repository:{type:"git",url:"https://github.com/versatica/JsSIP.git"},bugs:{url:"https://github.com/versatica/JsSIP/issues"},dependencies:{debug:"^2.2.0",rtcninja:"^0.6.7","sdp-transform":"^1.6.2"},devDependencies:{browserify:"^13.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-expect-file":"0.0.7","gulp-header":"^1.8.2","gulp-jshint":"^2.0.1","gulp-nodeunit-runner":"^0.2.2","gulp-rename":"^1.2.2","gulp-uglify":"^1.5.3","gulp-util":"^3.0.7",jshint:"^2.9.2","jshint-stylish":"^2.2.0",pegjs:"0.7.0","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"},scripts:{test:"gulp test"}}},{}]},{},[7])(7)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],111:[function(require,module,exports){
var _template = require('lodash/string/template');
var _forEach = require('lodash/collection/forEach');
var _assign = require('lodash/object/assign');
var _merge = require('lodash/object/merge');
var _isEqual = require('lodash/lang/isEqual');
var _trim = require('lodash/string/trim');
var _throttle = require('lodash/function/throttle');
var _debounce = require('lodash/function/debounce');

function debounce(func, wait, immediate) {
	var timeout;
	return function() {
		var context = this, args = arguments;
		var later = function() {
			timeout = null;
			if (!immediate) func.apply(context, args);
		};
		var callNow = immediate && !timeout;
		clearTimeout(timeout);
		timeout = setTimeout(later, wait);
		if (callNow) func.apply(context, args);
	};
}

module.exports = {
	template: _template,
	forEach: _forEach,
	assign: _assign,
	merge: _merge,
	isEqual: _isEqual,
	trim: _trim,
	throttle: _throttle,
	debounce: debounce
};
},{"lodash/collection/forEach":12,"lodash/function/debounce":14,"lodash/function/throttle":16,"lodash/lang/isEqual":64,"lodash/object/assign":72,"lodash/object/merge":75,"lodash/string/template":77,"lodash/string/trim":79}],112:[function(require,module,exports){
var widget = require('./widget.js');
var api = require('./core.js');

module.exports = widget.module;

},{"./core.js":109,"./widget.js":116}],113:[function(require,module,exports){
var url = require('url');
var http = require('http');
var cache = {};

function post(postUrl, data, cb){

	// console.log('post request: ', postUrl, data);

	var urlObj = url.parse(postUrl),
		
	json = JSON.stringify(data),

	body = '',

	options = {
		method: 'POST',
		protocol: urlObj.protocol || window.location.protocol,
		hostname: urlObj.hostname,
		port: urlObj.port,
		path: urlObj.path,
		'Content-type': 'application/json; charset=UTF-8',
		'Content-length': json.length
	},

	req = http.request(options, function (res){
		res.setEncoding('utf8');
		res.on('data', function (chunk) {
			body += chunk;
		});
		res.on('end', function() {
			// console.log(body);
			if(body === '{}') {
				// body = JSON.parse({result: 'OK'});
				body = "{result: 'OK'}";
			}
			
			body = JSON.parse(body);

			if(body.error) {
				cb(body.error);
			} else {
				cb(null, res, body);
			}
		});
	});

	req.on('error', function (err){
		cb(err);
	});

	req.write(json);
	req.end();
}

function get(selector, postUrl, cb){

	var body = '';

	if(selector && cache[selector]) {
		return cb(null, cache[selector]);
	}

	http.get(postUrl, function (res) {
		res.setEncoding('utf8');
		res.on('data', function (chunk) {
			body += chunk;
		});
		res.on('end', function() {
			if(selector) cache[selector] = body;
			cb(null, body);
		});
	}).on('error', function(err) {
		cb(err);
	});
}

module.exports = {
	post: post,
	get: get
};

},{"http":99,"url":104}],114:[function(require,module,exports){
(function (global){
var storage = global.localStorage;
var session = global.sessionStorage;
var prefix = 'swc';
var delimiter = '.';

module.exports = {

	get: function(key, location) {
		if(location === 'session') {
			return JSON.parse(session.getItem(prefix+delimiter+key));
		} else {
			return JSON.parse(storage.getItem(prefix+delimiter+key));
		}
	},

	set: function(key, value, location) {
		if(location === 'session') {
			session.setItem(prefix+delimiter+key, JSON.stringify(value));
		} else {
			storage.setItem(prefix+delimiter+key, JSON.stringify(value));
		}
		return value;
	},

	remove: function(key, location) {
		if(location === 'session') {
			session.removeItem(prefix+delimiter+key);
		} else {
			storage.removeItem(prefix+delimiter+key);
		}
	}

};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],115:[function(require,module,exports){
var events = {},
JsSIP = require('./jssip.min.js'),
// JsSIP = global.JsSIP,
options,
sipClient,
sipSession,
sipCallEvents;

function isWebrtcSupported(){
	var RTC = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection,
		userMeida = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia,
		ice = window.mozRTCIceCandidate || window.RTCIceCandidate;

	return !!RTC && !!userMeida && !!ice;
}

function initJsSIPEvents(){
	sipClient.on('connected', function(e){ console.log('sip connected event: ', e); });
	sipClient.on('disconnected', function(e){ console.log('sip disconnected event: ', e); });
	sipClient.on('newMessage', function(e){ console.log('sip newMessage event: ', e); });
	sipClient.on('newRTCSession', function(e){
		console.log('sip newRTCSession event: ', e);
		events.emit('webrtc/newRTCSession', e);
		// if(e.session.direction === 'outgoing')
		// 	events.emit('webrtc/outgoingCall', e);
		// else
		// 	events.emit('webrtc/incomingCall', e);
		
			sipSession = e.session;
	});
	sipClient.on('registered', function(e){ console.log('sip registered event: ', e); });
	sipClient.on('unregistered', function(e){ console.log('sip unregistered event: ', e); });
	sipClient.on('registrationFailed', function(e){ console.log('sip registrationFailed event: ', e); });

	sipCallEvents = {
		progress: function(e){
			console.log('call progress event: ', e);
			events.emit('webrtc/progress', e);
		},
		failed: function(e){
			console.log('call failed event:', e);
			events.emit('webrtc/failed', e);
		},
		ended: function(e){
			console.log('call ended event: ', e);
			events.emit('webrtc/ended', e);
		},
		confirmed: function(e){
			console.log('call confirmed event: ', e);
			events.emit('webrtc/confirmed', e);
		},
		addstream: function(e){
			console.log('call addstream event: ', e);
			events.emit('webrtc/addstream', e);
			var stream = e.stream;
			options.audioRemote = JsSIP.rtcninja.attachMediaStream(options.audioRemote, stream);
		}
		// sdp: function(e){
		// 	console.log('sdp: ', e);
		// }
	};
}

function isEstablished(){
	return sipSession.isEstablished();
}

function isInProgress(){
	return sipSession.isInProgress();
}

function isEnded(){
	return sipSession.isEnded();
}

function unregister(){
	sipClient.stop();
}

function audiocall(number){
	sipSession = sipClient.call(number, {
		eventHandlers: sipCallEvents,
		mediaConstraints: { audio: true, video: false }
	});
}

function terminate(){
	sipSession.terminate({
		status_code: 200
	});
	// sipClient.terminateSessions();
}

function answer(){
	console.log('answer: ',sipClient);
	sipSession.answer();
}

function hold(){
	console.log('hold: ', sipSession.isOnHold());
	if(sipSession && sipSession.isOnHold().local) {
		sipSession.unhold();
	} else {
		sipSession.hold();
	}
}

function createRemoteAudio(){
	var el = document.createElement('audio');
	el.setAttribute('autoplay', 'autoplay');
	document.body.appendChild(el);
	return el;
}

function init(opts){
	console.log('Initiating WebRTC module:', opts);
	options = opts;

	// !!get rid of this!!
	events.emit = opts.emit;
	events.on = opts.on;
	// !!get rid of this!!

	options.audioRemote = createRemoteAudio();
	sipClient = new JsSIP.UA(options.sip);
	initJsSIPEvents();
	sipClient.start();
	// return sipClient;
}

module.exports = {
	lib: JsSIP,
	init: init,
	unregister: unregister,
	audiocall: audiocall,
	terminate: terminate,
	answer: answer,
	hold: hold,
	isInProgress: isInProgress,
	isEstablished: isEstablished,
	isEnded: isEnded,
	isSupported: isWebrtcSupported
};
},{"./jssip.min.js":110}],116:[function(require,module,exports){
(function (global){
var domify = require('domify');
var api = require('./core');
var request = require('./request');
var _ = require('./lodash');
var frases = require('../translations.json');
var cobrowsing = require('./cobrowsing');
var WebRTC = require('./webrtc');
var serverUrl = {};
var forms;

// Widget initiation options
var defaults = {
	// prefix for CSS classes and ids. 
	// Change it only if the default prefix 
	// matches with existed classes or ids on the website
	prefix: 'swc',
	// whether or not to ask user 
	// to introduce him self before the chat session
	intro: false,
	// whether or not to add widget to the webpage
	widget: true,
	title: '',
	lang: 'en',
	langFromUrl: false,
	position: 'right',
	hideOfflineButton: false,
	offer: false,
	styles: {
		primary: {
			backgroundColor: '#555555',
			color: '#FFFFFF'
		},
		intro: {
			backgroundImage: "images/bgr-02.jpg"
		},
		sendmail: {
			backgroundImage: "images/bgr-01.jpg"
		},
		closeChat: {
			backgroundImage: "images/bgr-02.jpg"
		}
	},
	buttonStyles: {
		online: {
			backgroundColor: 'rgba(175,229,255,0.8)',
			color: ''
		},
		offline: {
			backgroundColor: 'rgba(241,241,241,0.8)',
			color: ''
		},
		timeout: {
			backgroundColor: 'rgba(241,241,241,0.8)',
			color: ''
		},
		notified: {
			backgroundColor: 'rgba(253,250,129,0.8)',
			color: ''
		},
		color: '#777'
	},
	widgetWindowOptions: 'left=10,top=10,width=350,height=550,resizable,location,toolbar',
	// absolute path to the wchat folder
	path: '/ipcc/webchat/',
	// in seconds
	checkStatusTimeout: 30,
	// in seconds
	getMessagesTimeout: 1,
	// displayed in the email template
	host: window.location.host,
	// webrtc options
	webrtc: {
		sip: {},
		hotline: ''
	},
},

// Current widget state
widgetState = {
	initiated: false,
	active: false,
	state: '', // "online" | "offline" | "timeout",
	share: false
},
dialog = [],

// available dialog languages
langs = [],
currLang = '',
messagesTimeout,
chatTimeout,
// Container for messages
messagesCont,
// Widget dom element
widget,

// Widget in a separate window
widgetWindow,
// Widget panes elements
panes,
agentIsTypingTimeout,
userIsTypingTimeout,
timerUpdateInterval;

function Widget(options){

	_.merge(defaults, options || {});
	// _.assign(defaults, options || {});

	serverUrl = require('url').parse(defaults.server, true);

	api = new api(options)
	.on('session/create', onSessionSuccess)
	.on('session/continue', onSessionSuccess)
	.on('session/join', onSessionJoin);
	// .on('chat/languages', onNewLanguages);
	
	if(defaults.widget) {
		api.on('chat/start', startChat)
		.on('chat/close', onChatClose)
		.on('chat/timeout', onChatTimeout)
		.on('message/new', newMessage)
		.on('message/typing', onAgentTyping)
		.on('form/submit', onFormSubmit)
		.on('form/reject', closeForm)
		.on('widget/load', onWidgetLoad);
		// .on('widget/init', onWidgetInit);
		// .on('widget/statechange', changeWgState);
	}

	if(defaults.webrtc.sip.ws_servers !== undefined && WebRTC.isSupported()) {

		api.on('webrtc/newRTCSession', function(){
			initCallState('newRTCSession');
		});
		api.on('webrtc/progress', function(e){
			if(e.response.status_code === 180) {
				initCallState('ringing');
			} else {
				initCallState('confirmed');
			}
		});
		api.on('webrtc/addstream', function(){
			initCallState('connected');
		});
		api.on('webrtc/ended', function(){
			initCallState('ended');
		});
		api.on('webrtc/failed', function(e){
			if(e.cause === 'Canceled'){
				initCallState('canceled');
			} else {
				initCallState('failed');
			}
		});

		initWebrtcModule({
			sip: defaults.webrtc.sip,
			emit: publicApi.emit,
			on: publicApi.on
		});
	}
		
	setSessionTimeoutHandler();
	addWidgetStyles();

	// load forms
	request.get('forms_json', defaults.server+defaults.path+'forms.json', function (err, result){
		if(err) return api.emit('Error', err);
		forms = JSON.parse(result).forms;
	});

	request.get('forms_tmp', defaults.server+defaults.path+'partials/forms.html', function (err, template){
		if(err) return api.emit('Error', err);
	});

	return publicApi;
}

var publicApi = {

	initModule: initModule,
	initWidgetState: initWidgetState,
	openWidget: openWidget,
	initChat: initChat,
	getWidgetElement: getWidgetElement,
	isWebrtcSupported: WebRTC.isSupported,
	getEntity: function(){ return api.getState('entity', 'session'); },
	on: function(evt, listener) {
		api.on(evt, listener);
		return this;
	},
	emit: function (evt, listener){
		api.emit(evt, listener);
		return this;
	},
	/**
	 * Set default user credentials.
	 * If "intro" is false, than dialog will start with these credentials.
	 * NOTE: Must be called before initModule method
	 * 
	 * @param {Object} params - User credentials, i.e. "uname", "lang", "phone", "subject"
	 */
	setDefaultCredentials: function(params) {
		defaults.credentials = params;
		return this;
	}
};

function initModule(){
	api.initModule();
	return publicApi;
}

function initWebrtcModule(opts){
	console.log('initWebrtcModule: ', opts);
	WebRTC.init(opts);
}

// Session is either created or continues
function onSessionSuccess(){
	// console.log('Session success!');

	// set current user language
	currLang = detectLanguage();
	setSessionTimeoutHandler();

	// If page loaded and "widget" property is set - load widget
	if(defaults.widget && !widgetState.initiated && isBrowserSupported()) {
		loadWidget();
	}

	// If timeout was occured, init chat after a session is created
	if(hasWgState('timeout')) {
		removeWgState('timeout');
		getLanguages();
	}

	// if window is not a opened window
	if(!defaults.external) {
		api.updateUrl(window.location.href);

		initCobrowsingModule({
			url: window.location.href,
			entity: api.getState('entity', 'session'),
			widget: '#'+defaults.prefix+'-wg-cont'
		});
	}
		
}

// send shared event to the user's browser
function onSessionJoin(params){
	// console.log('onSessionJoin: ', params);
	initCobrowsingModule({ url: params.url, entity: api.getState('entity', 'session') });
}

function loadWidget(cb){
	// console.log('load widget!');
	var compiled;
	request.get('widget_tmp', defaults.server+defaults.path+'widget.html', function (err, body){
		if(err) return;
		compiled = compileTemplate(body, {
			defaults: defaults,
			languages: langs,
			translations: frases,
			currLang: currLang || defaults.lang,
			// frases: frases[currLang] || defaults.lang,
			credentials: api.getState('credentials', 'session') || {},
			_: _
		});

		// Widget variable assignment
		widget = domify(compiled);
		// document.body.insertBefore(widget, document.body.firstChild);
		document.body.appendChild(widget);
		api.emit('widget/load', widget);

	});
}

function onWidgetLoad(widget){
	// console.log('widget loaded!');
	api.once('chat/languages', initWidget);
	getLanguages();
	// initWidget();
}

function initCobrowsingModule(params){
	// init cobrowsing module only on main window
	if(defaults.external) return;

	api.on('cobrowsing/init', function(){
		if(api.getState('shared', 'session') || params.entity === 'agent') cobrowsing.share();
		// cobrowsing.emitEvents();
	});
	api.on('cobrowsing/event', function(params){
		api.updateEvents(params.events, function(err, result){
			if(err) return;
			cobrowsing.updateEvents(result);
		});
	});

	api.on('cobrowsing/shared', function(){
		if(!api.getState('shared', 'session') && params.entity === 'user') {
			api.saveState('shared', true, 'session');
			api.switchShareState(true, params.url);
		}
		api.updateEvents([{ entity: params.entity, url: params.url, shared: true }], function(err, result){
			// if(err) return;
			result.historyEvents = true;
			// console.log('cobrowsing update: ', result);
			cobrowsing.updateEvents(result);
		});
	});

	api.on('cobrowsing/unshared', function(params){
		api.saveState('shared', false, 'session');
		api.updateEvents([{ entity: params.entity, url: params.url, shared: false }], function(err, resul){
			// if(err) return;
			if(params.entity === 'user') api.switchShareState(false, window.location.href);
			else cobrowsing.unshareAll();
		});
	});
	
	cobrowsing.init({ widget: params.widget, entity: params.entity, emit: publicApi.emit, path: (defaults.server+defaults.path) });
}

function getWidgetElement(){
	return widget;
}

function getLanguages(){
	api.getLanguages(function (err, body){
		if(err) return;
		if(body) onNewLanguages(body.result);
		setTimeout(getLanguages, defaults.checkStatusTimeout*1000);
	});
}

function onNewLanguages(languages){
	// console.log('languages: ', languages);
	var state = languages.length ? 'online' : 'offline',
	options = '', selected;

	// if(hasWgState(state)) return;
	if(widgetState.state === state) return;
	
	langs = languages;

	if(widget && defaults.intro.length) {
		// Add languages to the template
		langs.forEach(function(lang) {
			if(frases[lang] && frases[lang].lang) {
				selected = lang === currLang ? 'selected' : '';
				options += '<option value="'+lang+'" '+selected+' >'+frases[lang].lang+'</option>';
			}
		});
		global[defaults.prefix+'IntroForm'].lang.innerHTML = options;
	}

	changeWgState({ state: state });
	api.emit('chat/languages', languages);
}

function initWidget(){
	// console.log('Init widget!');
	widgetState.initiated = true;

	setListeners(widget);
	changeWgState({ state: widgetState.state });

	if(defaults.hideOfflineButton) {
		addWgState('no-button');
	}

	if(defaults.offer) {
		setOffer();
	}

	// if chat started
	if(api.getState('chat') === true) {
		requestChat(api.getState('credentials', 'session') || {});
		showWidget();
		// initChat();
	}

	// if webrtc supported by the browser and ws_servers parameter is set - change button icon
	if(WebRTC && WebRTC.isSupported() && defaults.webrtc.sip.ws_servers) {
		addWgState('webrtc-enabled');
	}

	// Widget is initiated
	api.emit('widget/init');
}

function setOffer() {
	setTimeout(function() {
		showOffer({
			from: defaults.offer.from || frases[currLang].default_title,
			time: Date.now(),
			text: defaults.offer.text || frases[currLang].default_offer
		});
	}, defaults.offer.inSeconds ? defaults.offer.inSeconds*1000 : 30000);
}

function showOffer(message) {
	// Return if user already interact with the widget
	if(widgetState.state !== 'online' || api.getState('interacted', 'session')) return;
	newMessage({ messages: [message] });
}

function initChat(){
	showWidget();

	// // if chat already started and widget was minimized - just show the widget
	if(api.getState('chat', 'cache')) return;

	if(!langs.length) {
		switchPane('sendemail');
	} else if(defaults.intro.length) {
		if(api.getState('chat')) {
			requestChat(api.getState('credentials', 'session'));
		} else {
			switchPane('credentials');
		}
	} else {
		requestChat({ lang: currLang });
	}
}

function requestChat(credentials){
	if(!credentials.uname) credentials.uname = api.getState('sid').split('_')[0];
	
	// Save user language based on preferable dialog language
	if(credentials.lang && credentials.lang !== currLang ) {
		api.saveState('lang', credentials.lang);
	}
	if(!credentials.lang) {
		credentials.lang = currLang;
	}
	
	// Save credentials for current session
	// It will be removed on session timeout
	api.saveState('credentials', credentials, 'session');

	api.chatRequest(credentials);
}

function startChat(params){
	switchPane('messages');
	api.saveState('chat', true);
	if(params.timeout) {
		// console.log('chat timeout: ', params.timeout);
		chatTimeout = api.setChatTimeout(params.timeout);
	}
	getMessages();
	addWgState('chat');
}

function getMessages(){
	// console.log('get messages!');
	api.getMessages(function() {
		if(api.getState('chat')) {
			messagesTimeout = setTimeout(getMessages, defaults.getMessagesTimeout*1000);
		}
	});
}

function sendMessage(message){
	api.sendMessage(message);
	if(chatTimeout) clearTimeout(chatTimeout);
}

function newMessage(result){
	// console.log('new messages arrived!', result);

	var str,
		els = [],
		text,
		compiled,
		defaultUname = false,
		credentials = api.getState('credentials', 'session') || {},
		aname = api.getState('aname', 'session'),
		uname = credentials.uname ? credentials.uname : '';

	if(uname === api.getState('sid').split('_')[0]) {
		defaultUname = true;
	}

	result.messages.forEach(function(message, index) {
		
		message.entity = message.from === uname ? 'user' : 'agent';
		message.from = (message.entity === 'user' && defaultUname) ? frases[currLang].default_user_name : message.from;
		message.time = message.time ? parseTime(message.time) : parseTime(Date.now());

		text = parseMessage(message.text, message.file, message.entity);

		if(text.type === 'form') {
			request.get('forms_tmp', defaults.server+defaults.path+'partials/forms.html', function (err, template){
				if(err) return cb(err);

				compiled = compileTemplate(template, {
					defaults: defaults,
					message: message,
					form: text.content,
					credentials: credentials,
					frases: frases[(currLang || defaults.lang)],
					_: _
				});
				if(global[text.content.name]) closeForm(text.content.name);
				messagesCont.insertAdjacentHTML('beforeend', '<li>'+compiled+'</li>');
				messagesCont.scrollTop = messagesCont.scrollHeight;
			});
		} else {
			message.text = text.content;
			compiled = compileTemplate(messageTemplate(), message);
			messagesCont.insertAdjacentHTML('beforeend', '<li>'+compiled+'</li>');

			if(index === result.messages.length-1) {
				onLastMessage(compiled);
			}

			// Need for sending dialog to email
			dialog.push(compiled);
		}

		// Save agent name
		if(message.entity === 'agent' && aname !== message.from) {
			api.saveState('aname', message.from, 'session');
		}

	});

	messagesCont.scrollTop = messagesCont.scrollHeight;
}

/**
 * Visual notification about a new message fomr agent.
 * It is also used for offer notification
 * 
 * @param  {String} message - New message content 
 */
function onLastMessage(message){
	var lastMsg;
	if(!widgetState.active) {
		lastMsg = document.getElementById(defaults.prefix+'-lastmsg');

		PrefixedEvent(lastMsg, 'animationend', ["webkit", "moz", "MS", "o", ""], function(e) {
			btn.children[0].style.height = e.target.scrollHeight + 'px';
		});

		lastMsg.innerHTML = message;
		// changeWgState({ state: 'notified' });
		addWgState('notified');
		setButtonStyle('notified');
	}
}

function compileEmail(content, cb) {
	var compiled;
	request.get('email_tmp', defaults.server+defaults.path+'partials/email.html', function (err, body){
		if(err) return cb(err);

		compiled = compileTemplate(body, {
			defaults: defaults,
			content: content,
			frases: frases[(currLang || defaults.lang)],
			_: _
		});

		if(cb) return cb(null, compiled);
	});
}

function sendDialog(params){
	var dialogStr = params.text.join('');
	compileEmail(dialogStr, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
	});
}

function sendComplain(params){
	var body = [];
	// TODO: explain...
	var complain = compileTemplate(messageTemplate(), {
		from: frases[currLang].email_subjects.complain+' '+params.email,
		text: params.text,
		entity: '',
		time: ''
	});

	body = body.concat(
		complain,
		'<br><p class="h1">'+frases[currLang].email_subjects.dialog+' '+defaults.host+'</p><br>',
		dialog
	).reduce(function(prev, curr) {
		return prev.concat(curr);
	});

	compileEmail(body, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
	});
}

function sendRequest(params, cb) {
	// TODO: explain...
	var msg = compileTemplate(messageTemplate(), {
		from: frases[currLang].email_subjects.request+' '+params.uname+' ('+params.email+')',
		text: params.text,
		entity: '',
		time: ''
	});

	compileEmail(msg, function(err, result) {
		if(err) return;
		params.text = result;
		api.sendEmail(params);
		if(cb) cb();
	});
}

function submitSendMailForm(form, data) {
	var params = {},
		file;

	if(!data.email) {
		alert(frases[currLang].required_error.email);
		return;
	}

	data.subject = frases[currLang].email_subjects.request+' '+data.email;

	if(data.file) {
		file = getFileContent(form.file, function(err, result) {
			if(!err) {
				data.filename = result.filename;
				data.filedata = result.filedata;
			} else {
				console.warn('File was not sent');
			}
			delete data.file;
			sendRequest(data, function() {
				form.reset();
				closeWidget();
			});
		});
	} else {
		sendRequest(data, function() {
			form.reset();
			closeWidget();
		});
	}
}

function submitCloseChatForm(form, data){
	var rating = (data && data.rating) ? parseInt(data.rating, 10) : null;
	if(data && data.sendDialog) {
		if(!data.email) {
			alert(frases[currLang].required_error.email);
			return;
		}
		// console.log('send dialog');
		sendDialog({
			to: data.email,
			subject: frases[currLang].email_subjects.dialog+' '+defaults.host,
			text: dialog // global variable
		});
	}
	if(data && data.text) {
		if(!data.email) {
			alert(frases[currLang].required_error.email);
			return;
		} else {
			// console.log('send complain!');
			sendComplain({
				email: data.email,
				subject: frases[currLang].email_subjects.complain+' '+data.email,
				text: data.text
			});
		}
	}
	if(chatTimeout) clearTimeout(chatTimeout);
	if(form) form.reset();
	
	closeChat(rating);
	closeWidget();
}

function closeChat(rating) {
	api.saveState('chat', false);
	api.closeChat(rating);
	removeWgState('chat');
}

function onChatClose(){
	if(api.getState('shared', 'session')) cobrowsing.unshare();
}

function onChatTimeout(){
	// console.log('chat timeout!');
	switchPane('closechat');
	closeChat();
}

function onAgentTyping(opts){
	// console.log('Agent is typing!');
	if(!agentIsTypingTimeout) {
		addWgState('agent-typing');
	}
	clearTimeout(agentIsTypingTimeout);
	agentIsTypingTimeout = setTimeout(function() {
		agentIsTypingTimeout = null;
		removeWgState('agent-typing');
		// console.log('agent is not typing anymore!');
	}, 5000);
}

function setSessionTimeoutHandler(){
	if(api.listenerCount('session/timeout') >= 1) return;
	api.once('session/timeout', function (params){
		// console.log('Session timeout!', params);

		if(api.getState('chat') === true) {
			closeChat();
		}
		if(widget) {
			// addWgState('timeout');
			closeWidget();
		}
		changeWgState({ state: 'timeout' });
		// widgetState.state = 'timeout';
		// addWgState('timeout');
		setButtonStyle('timeout');
		api.removeState('sid');

		if(params && params.method === 'updateEvents') {
			initModule();
		}
	});
}

function initCall(){
	switchPane('callAgent');
	WebRTC.audiocall('sip:'+defaults.webrtc.hotline+'@'+serverUrl.host);
}

function initCallState(state){
	console.log('initCallState: ', state);

	var spinner = document.getElementById(defaults.prefix+'-call-spinner'),
		info = document.getElementById(defaults.prefix+'-call-info'),
		textState = document.getElementById(defaults.prefix+'-call-state'),
		timer = document.getElementById(defaults.prefix+'-call-timer'),
		tryAgain = document.getElementById(defaults.prefix+'-tryagain-btn');

	if(state === 'newRTCSession') {
		initCallState('oncall');

	} else if(state === 'confirmed') {
		textState.innerText = frases[currLang].call_pane.calling_agent;
		info.classList.remove(defaults.prefix+'-hidden');
		spinner.classList.add(defaults.prefix+'-hidden');
		tryAgain.classList.add(defaults.prefix+'-hidden');

	} else if(state === 'ringing') {
		setTimer(timer, 'init', 0);
		timer.classList.remove(defaults.prefix+'-hidden');
	} else if(state === 'connected') {
		textState.innerText = frases[currLang].call_pane.connected_with_agent;
		setTimer(timer, 'start', 0);

	} else if(state === 'ended') {
		textState.innerText = frases[currLang].call_pane.call_ended;
		setTimer(timer, 'stop');
		initCallState('oncallend');
		
	} else if(state === 'failed' || state === 'canceled') {
		if(state === 'failed') {
			textState.innerText = frases[currLang].call_pane.call_failed;
		} else {
			textState.innerText = frases[currLang].call_pane.call_canceled;
		}
		info.classList.remove(defaults.prefix+'-hidden');
		spinner.classList.add(defaults.prefix+'-hidden');
		timer.classList.add(defaults.prefix+'-hidden');
		tryAgain.classList.remove(defaults.prefix+'-hidden');
		initCallState('oncallend');

	} else if(state === 'oncall') {
		window.onbeforeunload = function(){
			return 'Your connection is in progress. Do you realy want to close it?';
		};
		api.saveState('call', true, 'cache');
		addWgState('webrtc-call');

	} else if(state === 'oncallend') {
		window.onbeforeunload = null;
		api.saveState('call', false, 'cache');
		removeWgState('webrtc-call');

	} else if('init') {
		info.classList.add(defaults.prefix+'-hidden');
		spinner.classList.remove(defaults.prefix+'-hidden');
		tryAgain.classList.add(defaults.prefix+'-hidden');
	}
}

function setTimer(timer, state, seconds){
	var time = seconds;
	if(state === 'start') {
		timerUpdateInterval = setInterval(function(){
			time = time+1;
			timer.textContent = convertTime(time);
		}, 1000);
	} else if(state === 'stop') {
		clearInterval(timerUpdateInterval);
	} else if(state === 'init') {
		timer.textContent = convertTime(0);
	}
}

function endCall(){
	console.log('endCall: ', WebRTC.isEstablished(), WebRTC.isInProgress(), WebRTC.isEnded());
	if(WebRTC.isEstablished() || WebRTC.isInProgress()) {
		WebRTC.terminate();
	} else {
		closeWidget();
		initCallState('init');
	}
}

/**
 * Open web chat widget in a new window
 */
function openWidget(){
	// console.log('open widget!');
	var url = defaults.server+defaults.path+'window.html',
		optsEncoded = '';
	
	if(!widgetWindow || widgetWindow.closed) {

		widgetWindow = window.open('', 'wchat', defaults.widgetWindowOptions);
		widgetWindow.sessionStorage.setItem('wchat_options', JSON.stringify(defaults));

		constructWindow(widgetWindow);
		
		widgetWindow.onbeforeunload = function(){
			//close chat if user close the widget window
			//without ending a dialog
			if(api.getState('chat', 'storage')) closeChat();
		};
	}
	if(widgetWindow.focus) widgetWindow.focus();
}

function constructWindow(windowObject){
	var loader,
	script,
	link,
	charset,
	viewport,
	title;

	viewport = document.createElement('meta');
	viewport.name = 'viewport';
	viewport.content = 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0';

	charset = document.createElement('meta');
	charset.setAttribute('charset', 'utf-8');

	title = document.createElement('title');
	title.textContent = frases[currLang].default_title;

	loader = document.createElement('script');
	loader.src = defaults.server+defaults.path+'loader.js';

	script = document.createElement('script');
	script.src = defaults.server+defaults.path+'wchat.min.js';
	script.charset = 'UTF-8';

	link = document.createElement('link');
	link.rel = 'stylesheet';
	link.href = defaults.server+defaults.path+'main.css';

	windowObject.document.body.id = 'swc-wg-window';
	windowObject.document.body.style = 'margin:0;';
	windowObject.document.head.appendChild(viewport);
	windowObject.document.head.appendChild(charset);
	windowObject.document.head.appendChild(title);
	windowObject.document.head.appendChild(link);
	windowObject.document.head.appendChild(script);
	windowObject.document.body.appendChild(loader);
}

/**
 * Set Widget event listeners
 * @param {DOMElement} widget - Widget HTML element
 */
function setListeners(widget){
	// var sendMsgBtn = document.getElementById(defaults.prefix+'-send-message'),
	var fileSelect = document.getElementById(defaults.prefix+'-file-select'),
		textField = document.getElementById(defaults.prefix+'-message-text');

	btn = document.getElementById(defaults.prefix+'-btn-cont');
	panes = [].slice.call(widget.querySelectorAll('.'+defaults.prefix+'-wg-pane'));
	messagesCont = document.getElementById(defaults.prefix+'-messages-cont');

	addEvent(btn, 'click', btnClickHandler);
	addEvent(widget, 'click', wgClickHandler);
	addEvent(widget, 'submit', wgSubmitHandler);
	// addEvent(sendMsgBtn, 'click', wgSendMessage);
	addEvent(fileSelect, 'change', wgSendFile);
	addEvent(textField, 'keypress', wgTypingHandler);
}

/********************************
 * Widget event handlers *
 ********************************/

function wgClickHandler(e){
	var targ = e.target,
		handler,
		pane,
		href,
		dataHref;

	if(targ.parentNode.tagName === 'A' || targ.parentNode.tagName === 'BUTTON')
		targ = targ.parentNode;
	
	handler = targ.getAttribute('data-'+defaults.prefix+'-handler');
	dataHref = targ.getAttribute('data-'+defaults.prefix+'-link');

	if(handler === 'closeWidget') {
		closeWidget();
	} else if(handler === 'finish') {
		if(api.getState('chat')) switchPane('closechat');
		else closeWidget();
	} else if(handler === 'sendMessage') {
		wgSendMessage();
	} else if(handler === 'openWindow') {
		openWidget();
	} else if(handler === 'rejectForm') {
		api.emit('form/reject', targ.parentNode.name);
	} else if(handler === 'initCall') {
		initCall();
	} else if(handler === 'initChat') {
		initChat();
	} else if(handler === 'endCall') {
		endCall();
	}

	if(targ.tagName === 'A') {
		href = targ.href;

		if(dataHref) {
			api.linkFollowed(dataHref);
		} else if(href.indexOf('#') !== -1) {
			e.preventDefault();
			pane = href.substring(targ.href.indexOf('#')+1);
			if(pane) switchPane(pane);
		}
	}
}

function btnClickHandler(e){
	e.preventDefault();
	var targ = e.target,
		currTarg = e.currentTarget;

	// If element is interacted, then no notifications of a new message 
	// will occur during current browser session
	if(!api.getState('interacted', 'session')) {
		api.saveState('interacted', true, 'session');
	}

	// remove notification of a new message
	if(targ.id === defaults.prefix+'-unnotify-btn') {
		removeWgState('notified');
		// reset button height
		resetStyles(btn.children[0]);
		setButtonStyle(widgetState.state);
		return;
	}

	if(currTarg.id === defaults.prefix+'-btn-cont') {
		initWidgetState();
	}
}

function initWidgetState(){
	// If timeout is occured, init session first
	if(hasWgState('timeout')) {
		initModule();
	} else if(api.getState('chat', 'cache')){
		showWidget();
	// } else if(defaults.webrtc.sip.ws_servers !== undefined && defaults.webrtc.sip.uri !== undefined){
	} else if(defaults.webrtc.sip.ws_servers && WebRTC.isSupported()){
		// if call is in progress - just show the widget
		if(api.getState('call', 'cache')) {
			showWidget();
		} else {
			switchPane('chooseConnection');
		}
	} else {
		initChat();
	}
}

function wgSendMessage(){
	var msg,
		textarea = document.getElementById(defaults.prefix+'-message-text');

	msg = _.trim(textarea.value);
	if(msg) {
		sendMessage(msg);
		textarea.value = '';
		removeWgState('type-extend');
	}
	if(!api.getState('chat')) {
		initChat();
	}
}

function wgTypingHandler(e){
	var targ = e.target;
	if(e.keyCode === 10 || e.keyCode === 13) {
		e.preventDefault();
		wgSendMessage();
	} else {
		if(!userIsTypingTimeout) {
			userIsTypingTimeout = setTimeout(function() {
				userIsTypingTimeout = null;
				api.userIsTyping();
			}, 1000);
		}
	}

	if(targ.value.length >= 80 && !hasWgState('type-extend'))
		addWgState('type-extend');
	if(targ.value.length < 80 && hasWgState('type-extend'))
		removeWgState('type-extend');
}

function wgSubmitHandler(e){
	var targ = e.target;
	e.preventDefault();
	if(targ.tagName === 'FORM')
		api.emit('form/submit', targ);
}

function wgSendFile(e){
	var targ = e.target;
	var file = getFileContent(targ, function(err, result) {
		if(err) {
			alert('File was not sent');
		} else {
			api.sendMessage(result.filedata, result.filename);
		}
	});
}

/********************************
 * Widget elements manipulation *
 ********************************/

function switchPane(pane){
	// var paneId = defaults.prefix+'-'+pane+'-pane';
	var attr = 'data-'+defaults.prefix+'-pane';
	// console.log('switchPane panes:', panes, 'pane: ', pane);
	panes.forEach(function(item){
		if(item.getAttribute(attr) === pane) {
			item.classList.add('active');
		} else {
			item.classList.remove('active');
		}
	});

	if(!widgetState.active) showWidget();
}

function changeWgState(params){
	if(!widget || widgetState.state === params.state) return;
	if(params.state === 'offline') {
		removeWgState('online');
	} else if(params.state === 'online') {
		removeWgState('offline');
		
	}

	widgetState.state = params.state;
	addWgState(params.state);
	// api.emit('widget/statechange', { state: params.state });
	setButtonStyle(params.state);
}

// TODO: This is not a good solution or maybe not a good implementation
function setButtonStyle(state) {
	// console.log('setButtonStyle: ', state);
	if(!widget || defaults.buttonStyles[state] === undefined) return;
	var wgBtn = widget.querySelector('.'+defaults.prefix+'-wg-btn'),
		btnIcon = widget.querySelector('.'+defaults.prefix+'-btn-icon');

	wgBtn.style.backgroundColor = defaults.buttonStyles[state].backgroundColor;
	btnIcon.style.color = defaults.buttonStyles[state].color || defaults.buttonStyles.color;
}

function addWgState(state){
	if(widget) widget.classList.add(state);
}

function hasWgState(state){
	if(widget) return widget.classList.contains(state);
	else return false;
}

function removeWgState(state){
	if(widget) widget.classList.remove(state);
}

function showWidget(){
	widgetState.active = true;
	addWgState('active');
	removeWgState('notified');

	// reset button height
	resetStyles(btn.children[0]);
	setButtonStyle(widgetState.state);

	messagesCont.scrollTop = messagesCont.scrollHeight;
}

function closeWidget(){
	if(window.opener) {
		window.close();
	} else {
		widgetState.active = false;
		removeWgState('active');
	}
}

function onFormSubmit(form){
	var formData = getFormData(form);
	// console.log('onFormSubmit: ', form, formData);
	if(form.getAttribute('data-validate-form')) {
		var valid = validateForm(form);
		if(!valid) return;
		// console.log('onFormSubmit valid: ', valid);
	}
	if(form.id === defaults.prefix+'-closechat-form') {
		submitCloseChatForm(form, formData);
	} else if(form.id === defaults.prefix+'-sendmail-form') {
		submitSendMailForm(form, formData);
	} else if(form.id === defaults.prefix+'-intro-form') {
		requestChat(formData);
	} else if(form.id === defaults.prefix+'-call-btn-form'){
		initCall();
	} else if(form.id === defaults.prefix+'-chat-btn-form'){
		initChat();
	} else {
		closeForm(form.name, true);
	}

}

function closeForm(name, submit){
	var form = global[name];
	if(!form) return false;
	if(submit) {
		form.outerHTML = '<p class="'+defaults.prefix+'-text-center">'+
							'<i class="'+defaults.prefix+'-text-success '+defaults.prefix+'-icon-check"></i>'+
							'<span> '+frases[currLang].form_submitted+'</span>'+
						'</p>';
	} else {
		form.outerHTML = '<p class="'+defaults.prefix+'-text-center">'+
							'<i class="'+defaults.prefix+'-text-danger '+defaults.prefix+'-icon-remove"></i>'+
							'<span> '+frases[currLang].form_canceled+'</span>'+
						'</p>';
	}
}

function getFileContent(element, cb){
	var files = element.files,
		file,
		reader;

	if(!files.length) return;
	if(!global.FileReader) {
		if(cb) cb('OBSOLETE_BROWSER');
		return;
	}

	file = files[0];

	reader = new FileReader();
	reader.onload = function(event) {
		if(cb) cb(null, { filedata: event.target.result, filename: file.name });
	};
	reader.onerror = function(event) {
		api.emit('Error', event.target.error);
		if(cb) cb(event.target.error);
	};
	reader.readAsDataURL(file);
}

function messageTemplate(){
	var str = '<div class="'+defaults.prefix+'-message '+defaults.prefix+'-<%=entity %>-msg">' +
					'<span class="'+defaults.prefix+'-message-from"><%=from %></span>' +
					'<span class="'+defaults.prefix+'-message-time"> <%= time %></span>' +
					'<br>' +
					'<p class="'+defaults.prefix+'-message-content" <% if(entity === "user") { %> style="border-color:'+defaults.styles.primary.backgroundColor+'" <% } %>><%=text %></p>' +
				'</div>';
				// '</li>';
	return str;
}

// function agentIsTypingTemplate(){
// 	var str = '<div id="'+defaults.prefix+'-agent-typing" class="'+defaults.prefix+'-agent-typing">' +
// 					'<span><%=aname %></span>' +
// 					'<span> <%= text %></span>' +
// 				'</div>';
// 	return str;
// }

function compileTemplate(template, data){
	var compiled = _.template(template);
	return compiled(data);
}

/********************************
 * Helper functions *
 ********************************/

function detectLanguage(){
	var storageLang = api.getState('lang'),
		availableLangs = [],
		lang,
		path;

	if(storageLang) {
		lang = storageLang;
	} else {

		// list available languages by translations keys
		for(var key in frases) {
			availableLangs.push(key);
		}

		if(defaults.langFromUrl) {
			global.location.pathname
			.split('/')
			.forEach(function(item) {
				if(availableLangs.indexOf(item) !== -1) {
					lang = item;
				}
			});
		}

		if(!lang) {
			lang = defaults.lang || (navigator.language || navigator.userLanguage).split('-')[0];
			if(availableLangs.indexOf(lang) === -1) lang = 'en';
		}
	}

	// console.log('detected lang: ', lang);

	return lang;
}

function browserIsObsolete() {
	console.warn('Your browser is obsolete!');
}

function parseTime(ts) {
	var date = new Date(ts),
		hours = date.getHours(),
		minutes = date.getMinutes(),
		time = (hours < 10 ? '0'+hours : hours) + ':' + (minutes < 10 ? '0'+minutes : minutes);

	return time;
}

function parseMessage(text, file, entity){
	var filename, form;
	if(file) {
		filename = text.substring(text.indexOf('_')+1);
		if(isImage(file)) {
			return {
				type: 'image',
				content: '<a href="'+api.options.server+'/ipcc/'+text+'" download="'+filename+'">' +
						'<img src="'+api.options.server+'/ipcc/'+text+'" alt="file preview" />' +
					'</a>'
			};
		} else {
			return {
				type: 'file',
				content: '<a href="'+api.options.server+'/ipcc/'+text+'" download="'+filename+'">'+filename+'</a>'
			};
		}
	} else if(entity === 'agent' && new RegExp('^{.+}$').test(text)) {
		forms.forEach(function(item) {
			if(item.name === text.substring(1, text.length-1)) {
				form = item;
			}
		});

		return {
			type: form ? 'form' : 'text',
			content: form ? form : text
		};
	} else {
		return {
			type: 'text',
			content: text.split(" ").map(convertLinks).join(" ")
		};
	}
}

function convertLinks(text){
	var leftovers = 0;
	var href = text;
	if(isLink(text)){

		while(!(href.charAt(href.length-1).match(/[a-z0-9\/]/i))){
			href = href.slice(0,-1);
			leftovers += 1;
		}
		return '<a href="'+href+'" target="_blank" data-'+defaults.prefix+'-link="'+href+'">'+href+'</a>' + text.substr(text.length - leftovers);
	} else {
		return text;
	}
}

function isLink(text){
	var pattern = new RegExp('^http:\/\/|^https:\/\/');
	return pattern.test(text);
}

function isImage(filename){
	var regex = new RegExp('png|PNG|jpg|JPG|JPEG|jpeg|gif|GIF');
	var ext = filename.substring(filename.lastIndexOf('.')+1);
	return regex.test(ext);
}

function getFormData(form){
	var formData = {};
	[].slice.call(form.elements).forEach(function(el) {
		if(el.type === 'checkbox') formData[el.name] = el.checked;
		else {
			if(el.value) formData[el.name] = el.value;
		}
	});
	return formData;
}

function validateForm(form){
	var valid = true;
	[].slice.call(form.elements).every(function(el) {
		// console.log('validateForm el:', el, el.hasAttribute('required'), el.value, el.type);
		if(el.hasAttribute('required') && (el.value === "" || el.value === null)) {
			alert(frases[currLang].required_error[el.type] || frases[currLang].required_error.fields);
			valid = false;
			return false;
		} else {
			return true;
		}
	});
	// console.log('validateForm valid: ', valid);
	return valid;
}

function resetStyles(element){
	element.removeAttribute('style');
}

function addWidgetStyles(){
	
	var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.href = defaults.server+defaults.path+'main.css';

	document.head.appendChild(link);
}

function PrefixedEvent(element, type, pfx, callback) {
	for (var p = 0; p < pfx.length; p++) {
		if (!pfx[p]) type = type.toLowerCase();
		element.addEventListener(pfx[p]+type, callback, false);
	}
}

function convertTime(seconds){
	var minutes = Math.floor(seconds / 60),
		secsRemain = seconds % 60,
		str = (minutes > 9 ? minutes : '0' + minutes) + ':' + (secsRemain > 9 ? secsRemain : '0' + secsRemain);
	return str;
}

function isBrowserSupported() {
	return document.body.classList !== undefined;
}

function addEvent(obj, evType, fn) {
  if (obj.addEventListener) obj.addEventListener(evType, fn, false);
  else if (obj.attachEvent) obj.attachEvent("on"+evType, fn);
}
function removeEvent(obj, evType, fn) {
  if (obj.removeEventListener) obj.removeEventListener(evType, fn, false);
  else if (obj.detachEvent) obj.detachEvent("on"+evType, fn);
}

module.exports = {
	module: Widget,
	api: publicApi
};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../translations.json":117,"./cobrowsing":108,"./core":109,"./lodash":111,"./request":113,"./webrtc":115,"domify":6,"url":104}],117:[function(require,module,exports){
module.exports={
    "en": {
		"lang": "English",
		"default_user_name": "You",
		"default_title": "Live chat",
		"default_offer": "Welcome, need some help?",
		"greets": "Greetings!",
		"cancel": "Cancel",
		"close": "Close",
		"finish": "Finish",
		"back": "Back",
		"send": "Send",
		"send_message_button": "Send message",
		"start_dialog_button": "Start dialog",
		"finish_dialog_button": "Finish dialog",
		"choose_dialog_lang": "Choose dialog language",
		"intro_message": "Please, introduce yourself",
		"offline_message": "We are offline now, please leave us a message, we'll contact you shortly",
		"send_message_header": "Send a message",
		"close_chat_header": "Thank you for reaching us!",
		"send_dialog_label": "Send dialog to your email?",
		"rate_agent": "Rate agent service",
		"rates": {
			"excellent": "Excellent",
			"good": "Good",
			"fair": "Fair",
			"bad": "Bad"
		},
		"email_subjects": {
			"dialog": "Your dialog on",
			"complain": "Dialog comment from",
			"request": "New message from"
		},
		"required_error": {
			"fields": "Please fill in all required fields",
			"email": "Please fill in your email",
			"tel": "Please fill in your telephone number"
		},
		"form_submitted": "Form sent, thank you!",
		"form_canceled": "Form cancelled",
		"pholder": {
			"uname": "Your name",
			"email": "Your email",
			"phone": "Your phone",
			"subject": "Dialog's subject",
			"message": "Your message here...",
			"comment": "Please, leave your comment here..."
		},
		"init_pane": {
			"choose_conn_type": "Please, choose a connection type",
			"call_agent_btn": "Call agent",
			"chat_agent_btn": "Start chat"
		},
		"call_pane": {
			"confirm_access": "Please, confirm access to microphone",
			"calling_agent": "Calling Agent",
			"connected_with_agent": "Connected with Agent",
			"call_ended": "Call ended",
			"call_failed": "Call failed \n Please, try again later",
			"call_canceled": "Call canceled",
			"end_call": "End call",
			"try_again": "Try again"
		}
    },
    "uk": {
    	"lang": "Українська",
    	"default_user_name": "Ви",
    	"default_title": "Онлайн чат",
    	"default_offer": "Ласкаво просимо, потрібна допомога?",
    	"greets": "Вітаємо!",
		"cancel": "Відміна",
		"close": "Закрити",
		"finish": "Завершити",
		"back": "Назад",
		"send": "Відправити",
		"send_message_button": "Відправити",
    	"start_dialog_button": "Розпочати діалог",
    	"finish_dialog_button": "Закінчити діалог",
		"choose_dialog_lang": "Оберіть мову діалогу",
		"intro_message": "Будь-ласка, заповніть необхідні поля",
		"offline_message": "Наразі ми оффлайн, будь ласка, залиште нам повідомлення, ми зв'яжемося з Вами найближчим часом",
		"send_message_header": "Відправити повідомлення",
		"close_chat_header": "Дякуємо, що звернулися до нас!",
		"send_dialog_label": "Відправити діалог на ваш email?",
		"rate_agent": "Оцінити роботу оператора",
		"rates": {
			"excellent": "Відмінно",
			"good": "Добре",
			"fair": "Задовільно",
			"bad": "Погано"
		},
		"email_subjects": {
			"dialog": "Ваш діалог на",
			"complain": "Коментар до діалогу від",
			"request": "Нове повідомлення від"
		},
		"required_error": {
			"fields": "Будь-ласка, заповніть всі необхідні поля",
			"email": "Будь-ласка, введіть свою електронну адресу",
			"tel": "Будь-ласка, введіть свій номер телефону"
		},
		"form_submitted": "Форма відправлена, дякуємо!",
		"form_canceled": "Форма відхилена",
		"pholder": {
			"uname": "Ваше ім'я",
			"email": "Ваша електронна адреса",
			"phone": "Ваш телефон",
			"subject": "Тема діалогу",
			"message": "Ваше повідомлення тут...",
			"comment": "Будь-ласка, залиште тут свій коментар..."
		},
		"init_pane": {
			"choose_conn_type": "Будь-ласка, виберіть тип з'єднання",
			"call_agent_btn": "Виклик агента",
			"chat_agent_btn": "Почати чат"
		},
		"call_pane": {
			"confirm_access": "Будь-ласка, підтвердіть доступ до мікрофона",
			"calling_agent": "Йде виклик",
			"connected_with_agent": "Виклик з'єднаний",
			"call_ended": "Виклик завершено",
			"call_failed": "Збій виклику \n Будь-ласка спробуйте пізніше",
			"call_canceled": "Виклик скасований",
			"end_call": "Завершити виклик",
			"try_again": "Спробувати ще раз"
		}
    },
    "ru": {
    	"lang": "Русский",
    	"default_user_name": "Вы",
		"default_title": "Онлайн чат",
		"default_offer": "Добро пожаловать, нужна помощь?",
    	"greets": "Приветствуем!",
		"cancel": "Отмена",
		"close": "Закрыть",
		"finish": "Завершить",
		"back": "Назад",
		"send": "Отправить",
		"send_message_button": "Отправить",
    	"start_dialog_button": "Начать диалог",
    	"finish_dialog_button": "Завершить диалог",
		"choose_dialog_lang": "Выберите язык диалога",
		"intro_message": "Пожалуйста, звполните необходимые поля",
		"offline_message": "Сейчас мы оффлайн, пожалуйста, оставьте нам сообщение, мы свяжемся с Вами в ближайшее время",
		"send_message_header": "Отправить сообщение",
		"close_chat_header": "Спасибо, что обратились к нам!",
		"send_dialog_label": "Отправить диалог на ваш email?",
		"rate_agent": "Оценить работу оператора",
		"rates": {
			"excellent": "Отлично",
			"good": "Хорошо",
			"fair": "Нормально",
			"bad": "Плохо"
		},
		"email_subjects": {
			"dialog": "Ваш диалог на",
			"complain": "Комментарий к диалогу от",
			"request": "Новое сообщение от"
		},
		"required_error": {
			"fields": "Пожалуйста, заполните все необходимые поля",
			"email": "Пожалуйста, введите свой электронный адрес",
			"tel": "Пожалуйста, введите свой номер телефона"
		},
		"form_submitted": "Форма отправлена, спасибо!",
		"form_canceled": "Форма отклонена",
		"pholder": {
			"uname": "Ваше имя",
			"email": "Ваш электронный адрес",
			"phone": "Ваш телефон",
			"subject": "Тема диалога",
			"message": "Ваше сообщение здесь...",
			"comment": "Пожалуйста, оставьте здесь свой комментарий..."
		},
		"init_pane": {
			"choose_conn_type": "Пожалуйста, выберите способ соединения",
			"call_agent_btn": "Вызов агента",
			"chat_agent_btn": "Начать чат"
		},
		"call_pane": {
			"confirm_access": "Пожалуйста, подтвердите доступ к микрофону",
			"calling_agent": "Идет вызов",
			"connected_with_agent": "Вызов соединен",
			"call_ended": "Вызов завешен",
			"call_failed": "Сбой вызова \n Пожалуйста, попробуйте позже",
			"call_canceled": "Вызов отменен",
			"end_call": "Заверший вызов",
			"try_again": "Попробовать еще раз"
		}
    }
};

},{}]},{},[112])(112)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYi9iNjQuanMiLCJub2RlX21vZHVsZXMvYnJvd3Nlci1yZXNvbHZlL2VtcHR5LmpzIiwibm9kZV9tb2R1bGVzL2J1ZmZlci9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9idWlsdGluLXN0YXR1cy1jb2Rlcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL2NvcmUtdXRpbC1pcy9saWIvdXRpbC5qcyIsIm5vZGVfbW9kdWxlcy9kb21pZnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyIsIm5vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvaXMtYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2NvbGxlY3Rpb24vZm9yRWFjaC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvZGF0ZS9ub3cuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2Z1bmN0aW9uL2RlYm91bmNlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9mdW5jdGlvbi9yZXN0UGFyYW0uanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2Z1bmN0aW9uL3Rocm90dGxlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9hcnJheUNvcHkuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2FycmF5RWFjaC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYXJyYXlTb21lLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9hc3NpZ25Pd25EZWZhdWx0cy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYXNzaWduV2l0aC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZUFzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZUNvcHkuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VFYWNoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlRm9yLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlRm9ySW4uanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VGb3JPd24uanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VJc0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlSXNFcXVhbERlZXAuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VNZXJnZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZU1lcmdlRGVlcC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvYmFzZVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9iYXNlVG9TdHJpbmcuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2Jhc2VWYWx1ZXMuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2JpbmRDYWxsYmFjay5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvY2hhcnNMZWZ0SW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NoYXJzUmlnaHRJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvY3JlYXRlQXNzaWduZXIuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2NyZWF0ZUJhc2VFYWNoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9jcmVhdGVCYXNlRm9yLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9jcmVhdGVGb3JFYWNoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9lcXVhbEFycmF5cy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvZXF1YWxCeVRhZy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvZXF1YWxPYmplY3RzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9lc2NhcGVIdG1sQ2hhci5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvZXNjYXBlU3RyaW5nQ2hhci5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvZ2V0TGVuZ3RoLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9nZXROYXRpdmUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2lzQXJyYXlMaWtlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9pc0luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC9pc0l0ZXJhdGVlQ2FsbC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvaXNMZW5ndGguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL2lzT2JqZWN0TGlrZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvaXNTcGFjZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvcmVFc2NhcGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL3JlRXZhbHVhdGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL3JlSW50ZXJwb2xhdGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2ludGVybmFsL3NoaW1LZXlzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9pbnRlcm5hbC90b09iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvdHJpbW1lZExlZnRJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvaW50ZXJuYWwvdHJpbW1lZFJpZ2h0SW5kZXguanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNBcmd1bWVudHMuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNBcnJheS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL2lzRXJyb3IuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL2xhbmcvaXNGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc05hdGl2ZS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc09iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy9pc1BsYWluT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9sYW5nL2lzVHlwZWRBcnJheS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvbGFuZy90b1BsYWluT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9vYmplY3QvYXNzaWduLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9vYmplY3Qva2V5cy5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvb2JqZWN0L2tleXNJbi5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvb2JqZWN0L21lcmdlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9zdHJpbmcvZXNjYXBlLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9zdHJpbmcvdGVtcGxhdGUuanMiLCJub2RlX21vZHVsZXMvbG9kYXNoL3N0cmluZy90ZW1wbGF0ZVNldHRpbmdzLmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC9zdHJpbmcvdHJpbS5qcyIsIm5vZGVfbW9kdWxlcy9sb2Rhc2gvdXRpbGl0eS9hdHRlbXB0LmpzIiwibm9kZV9tb2R1bGVzL2xvZGFzaC91dGlsaXR5L2lkZW50aXR5LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MtbmV4dGljay1hcmdzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9wdW55Y29kZS9wdW55Y29kZS5qcyIsIm5vZGVfbW9kdWxlcy9xdWVyeXN0cmluZy1lczMvZGVjb2RlLmpzIiwibm9kZV9tb2R1bGVzL3F1ZXJ5c3RyaW5nLWVzMy9lbmNvZGUuanMiLCJub2RlX21vZHVsZXMvcXVlcnlzdHJpbmctZXMzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9kdXBsZXguanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3JlYWRhYmxlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMiLCJub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL3RyYW5zZm9ybS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vd3JpdGFibGUuanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWJyb3dzZXJpZnkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWh0dHAvaW5kZXguanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWh0dHAvbGliL2NhcGFiaWxpdHkuanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWh0dHAvbGliL3JlcXVlc3QuanMiLCJub2RlX21vZHVsZXMvc3RyZWFtLWh0dHAvbGliL3Jlc3BvbnNlLmpzIiwibm9kZV9tb2R1bGVzL3N0cmluZ19kZWNvZGVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3VybC91cmwuanMiLCJub2RlX21vZHVsZXMvdXJsL3V0aWwuanMiLCJub2RlX21vZHVsZXMvdXRpbC1kZXByZWNhdGUvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy94dGVuZC9pbW11dGFibGUuanMiLCJzb3VyY2Uvc2NyaXB0cy9jb2Jyb3dzaW5nLmpzIiwic291cmNlL3NjcmlwdHMvY29yZS5qcyIsInNvdXJjZS9zY3JpcHRzL2pzc2lwLm1pbi5qcyIsInNvdXJjZS9zY3JpcHRzL2xvZGFzaC5qcyIsInNvdXJjZS9zY3JpcHRzL21haW4uanMiLCJzb3VyY2Uvc2NyaXB0cy9yZXF1ZXN0LmpzIiwic291cmNlL3NjcmlwdHMvc3RvcmFnZS5qcyIsInNvdXJjZS9zY3JpcHRzL3dlYnJ0Yy5qcyIsInNvdXJjZS9zY3JpcHRzL3dpZGdldC5qcyIsInNvdXJjZS90cmFuc2xhdGlvbnMuanNvbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUhBOzs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN4Z0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzNHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNsaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDNzhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDck1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvZ0JBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTs7QUNEQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDblJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM1S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1dEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDemlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzlJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQzM0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsInZhciBsb29rdXAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cbjsoZnVuY3Rpb24gKGV4cG9ydHMpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG4gIHZhciBBcnIgPSAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKVxuICAgID8gVWludDhBcnJheVxuICAgIDogQXJyYXlcblxuXHR2YXIgUExVUyAgID0gJysnLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIICA9ICcvJy5jaGFyQ29kZUF0KDApXG5cdHZhciBOVU1CRVIgPSAnMCcuY2hhckNvZGVBdCgwKVxuXHR2YXIgTE9XRVIgID0gJ2EnLmNoYXJDb2RlQXQoMClcblx0dmFyIFVQUEVSICA9ICdBJy5jaGFyQ29kZUF0KDApXG5cdHZhciBQTFVTX1VSTF9TQUZFID0gJy0nLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIX1VSTF9TQUZFID0gJ18nLmNoYXJDb2RlQXQoMClcblxuXHRmdW5jdGlvbiBkZWNvZGUgKGVsdCkge1xuXHRcdHZhciBjb2RlID0gZWx0LmNoYXJDb2RlQXQoMClcblx0XHRpZiAoY29kZSA9PT0gUExVUyB8fFxuXHRcdCAgICBjb2RlID09PSBQTFVTX1VSTF9TQUZFKVxuXHRcdFx0cmV0dXJuIDYyIC8vICcrJ1xuXHRcdGlmIChjb2RlID09PSBTTEFTSCB8fFxuXHRcdCAgICBjb2RlID09PSBTTEFTSF9VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MyAvLyAnLydcblx0XHRpZiAoY29kZSA8IE5VTUJFUilcblx0XHRcdHJldHVybiAtMSAvL25vIG1hdGNoXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIgKyAxMClcblx0XHRcdHJldHVybiBjb2RlIC0gTlVNQkVSICsgMjYgKyAyNlxuXHRcdGlmIChjb2RlIDwgVVBQRVIgKyAyNilcblx0XHRcdHJldHVybiBjb2RlIC0gVVBQRVJcblx0XHRpZiAoY29kZSA8IExPV0VSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIExPV0VSICsgMjZcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NFRvQnl0ZUFycmF5IChiNjQpIHtcblx0XHR2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuXG5cdFx0aWYgKGI2NC5sZW5ndGggJSA0ID4gMCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Jylcblx0XHR9XG5cblx0XHQvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuXHRcdC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcblx0XHQvLyByZXByZXNlbnQgb25lIGJ5dGVcblx0XHQvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcblx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG5cdFx0dmFyIGxlbiA9IGI2NC5sZW5ndGhcblx0XHRwbGFjZUhvbGRlcnMgPSAnPScgPT09IGI2NC5jaGFyQXQobGVuIC0gMikgPyAyIDogJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDEpID8gMSA6IDBcblxuXHRcdC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuXHRcdGFyciA9IG5ldyBBcnIoYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG5cdFx0Ly8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuXHRcdGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gYjY0Lmxlbmd0aCAtIDQgOiBiNjQubGVuZ3RoXG5cblx0XHR2YXIgTCA9IDBcblxuXHRcdGZ1bmN0aW9uIHB1c2ggKHYpIHtcblx0XHRcdGFycltMKytdID0gdlxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTgpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgMTIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPDwgNikgfCBkZWNvZGUoYjY0LmNoYXJBdChpICsgMykpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDAwMCkgPj4gMTYpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDApID4+IDgpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0aWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpID4+IDQpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTApIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgNCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA+PiAyKVxuXHRcdFx0cHVzaCgodG1wID4+IDgpICYgMHhGRilcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9XG5cblx0XHRyZXR1cm4gYXJyXG5cdH1cblxuXHRmdW5jdGlvbiB1aW50OFRvQmFzZTY0ICh1aW50OCkge1xuXHRcdHZhciBpLFxuXHRcdFx0ZXh0cmFCeXRlcyA9IHVpbnQ4Lmxlbmd0aCAlIDMsIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG5cdFx0XHRvdXRwdXQgPSBcIlwiLFxuXHRcdFx0dGVtcCwgbGVuZ3RoXG5cblx0XHRmdW5jdGlvbiBlbmNvZGUgKG51bSkge1xuXHRcdFx0cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG5cdFx0XHRyZXR1cm4gZW5jb2RlKG51bSA+PiAxOCAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiAxMiAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiA2ICYgMHgzRikgKyBlbmNvZGUobnVtICYgMHgzRilcblx0XHR9XG5cblx0XHQvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG5cdFx0Zm9yIChpID0gMCwgbGVuZ3RoID0gdWludDgubGVuZ3RoIC0gZXh0cmFCeXRlczsgaSA8IGxlbmd0aDsgaSArPSAzKSB7XG5cdFx0XHR0ZW1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuXHRcdFx0b3V0cHV0ICs9IHRyaXBsZXRUb0Jhc2U2NCh0ZW1wKVxuXHRcdH1cblxuXHRcdC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcblx0XHRzd2l0Y2ggKGV4dHJhQnl0ZXMpIHtcblx0XHRcdGNhc2UgMTpcblx0XHRcdFx0dGVtcCA9IHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAyKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9ICc9PSdcblx0XHRcdFx0YnJlYWtcblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0dGVtcCA9ICh1aW50OFt1aW50OC5sZW5ndGggLSAyXSA8PCA4KSArICh1aW50OFt1aW50OC5sZW5ndGggLSAxXSlcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDEwKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wID4+IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCAyKSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPSdcblx0XHRcdFx0YnJlYWtcblx0XHR9XG5cblx0XHRyZXR1cm4gb3V0cHV0XG5cdH1cblxuXHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gYjY0VG9CeXRlQXJyYXlcblx0ZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gdWludDhUb0Jhc2U2NFxufSh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyAodGhpcy5iYXNlNjRqcyA9IHt9KSA6IGV4cG9ydHMpKVxuIiwiIiwiLyohXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbnZhciByb290UGFyZW50ID0ge31cblxuLyoqXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxuICogICA9PT0gdHJ1ZSAgICBVc2UgVWludDhBcnJheSBpbXBsZW1lbnRhdGlvbiAoZmFzdGVzdClcbiAqICAgPT09IGZhbHNlICAgVXNlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiAobW9zdCBjb21wYXRpYmxlLCBldmVuIElFNilcbiAqXG4gKiBCcm93c2VycyB0aGF0IHN1cHBvcnQgdHlwZWQgYXJyYXlzIGFyZSBJRSAxMCssIEZpcmVmb3ggNCssIENocm9tZSA3KywgU2FmYXJpIDUuMSssXG4gKiBPcGVyYSAxMS42KywgaU9TIDQuMisuXG4gKlxuICogRHVlIHRvIHZhcmlvdXMgYnJvd3NlciBidWdzLCBzb21ldGltZXMgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiB3aWxsIGJlIHVzZWQgZXZlblxuICogd2hlbiB0aGUgYnJvd3NlciBzdXBwb3J0cyB0eXBlZCBhcnJheXMuXG4gKlxuICogTm90ZTpcbiAqXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxuICogICAgIFNlZTogaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njk1NDM4LlxuICpcbiAqICAgLSBTYWZhcmkgNS03IGxhY2tzIHN1cHBvcnQgZm9yIGNoYW5naW5nIHRoZSBgT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvcmAgcHJvcGVydHlcbiAqICAgICBvbiBvYmplY3RzLlxuICpcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxuICpcbiAqICAgLSBJRTEwIGhhcyBhIGJyb2tlbiBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgYXJyYXlzIG9mXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXG5cbiAqIFdlIGRldGVjdCB0aGVzZSBidWdneSBicm93c2VycyBhbmQgc2V0IGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGAgdG8gYGZhbHNlYCBzbyB0aGV5XG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqL1xuQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgPSBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVCAhPT0gdW5kZWZpbmVkXG4gID8gZ2xvYmFsLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgOiB0eXBlZEFycmF5U3VwcG9ydCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgZnVuY3Rpb24gQmFyICgpIHt9XG4gIHRyeSB7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KDEpXG4gICAgYXJyLmZvbyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDQyIH1cbiAgICBhcnIuY29uc3RydWN0b3IgPSBCYXJcbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICBhcnIuY29uc3RydWN0b3IgPT09IEJhciAmJiAvLyBjb25zdHJ1Y3RvciBjYW4gYmUgc2V0XG4gICAgICAgIHR5cGVvZiBhcnIuc3ViYXJyYXkgPT09ICdmdW5jdGlvbicgJiYgLy8gY2hyb21lIDktMTAgbGFjayBgc3ViYXJyYXlgXG4gICAgICAgIGFyci5zdWJhcnJheSgxLCAxKS5ieXRlTGVuZ3RoID09PSAwIC8vIGllMTAgaGFzIGJyb2tlbiBgc3ViYXJyYXlgXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5mdW5jdGlvbiBrTWF4TGVuZ3RoICgpIHtcbiAgcmV0dXJuIEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUXG4gICAgPyAweDdmZmZmZmZmXG4gICAgOiAweDNmZmZmZmZmXG59XG5cbi8qKlxuICogQ2xhc3M6IEJ1ZmZlclxuICogPT09PT09PT09PT09PVxuICpcbiAqIFRoZSBCdWZmZXIgY29uc3RydWN0b3IgcmV0dXJucyBpbnN0YW5jZXMgb2YgYFVpbnQ4QXJyYXlgIHRoYXQgYXJlIGF1Z21lbnRlZFxuICogd2l0aCBmdW5jdGlvbiBwcm9wZXJ0aWVzIGZvciBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgQVBJIGZ1bmN0aW9ucy4gV2UgdXNlXG4gKiBgVWludDhBcnJheWAgc28gdGhhdCBzcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdCByZXR1cm5zXG4gKiBhIHNpbmdsZSBvY3RldC5cbiAqXG4gKiBCeSBhdWdtZW50aW5nIHRoZSBpbnN0YW5jZXMsIHdlIGNhbiBhdm9pZCBtb2RpZnlpbmcgdGhlIGBVaW50OEFycmF5YFxuICogcHJvdG90eXBlLlxuICovXG5mdW5jdGlvbiBCdWZmZXIgKGFyZykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgIC8vIEF2b2lkIGdvaW5nIHRocm91Z2ggYW4gQXJndW1lbnRzQWRhcHRvclRyYW1wb2xpbmUgaW4gdGhlIGNvbW1vbiBjYXNlLlxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgcmV0dXJuIG5ldyBCdWZmZXIoYXJnLCBhcmd1bWVudHNbMV0pXG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoYXJnKVxuICB9XG5cbiAgdGhpcy5sZW5ndGggPSAwXG4gIHRoaXMucGFyZW50ID0gdW5kZWZpbmVkXG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBmcm9tTnVtYmVyKHRoaXMsIGFyZylcbiAgfVxuXG4gIC8vIFNsaWdodGx5IGxlc3MgY29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBmcm9tU3RyaW5nKHRoaXMsIGFyZywgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBhcmd1bWVudHNbMV0gOiAndXRmOCcpXG4gIH1cblxuICAvLyBVbnVzdWFsLlxuICByZXR1cm4gZnJvbU9iamVjdCh0aGlzLCBhcmcpXG59XG5cbmZ1bmN0aW9uIGZyb21OdW1iZXIgKHRoYXQsIGxlbmd0aCkge1xuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGxlbmd0aCkgfCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdGhhdFtpXSA9IDBcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyAodGhhdCwgc3RyaW5nLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgLy8gQXNzdW1wdGlvbjogYnl0ZUxlbmd0aCgpIHJldHVybiB2YWx1ZSBpcyBhbHdheXMgPCBrTWF4TGVuZ3RoLlxuICB2YXIgbGVuZ3RoID0gYnl0ZUxlbmd0aChzdHJpbmcsIGVuY29kaW5nKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblxuICB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iamVjdCkpIHJldHVybiBmcm9tQnVmZmVyKHRoYXQsIG9iamVjdClcblxuICBpZiAoaXNBcnJheShvYmplY3QpKSByZXR1cm4gZnJvbUFycmF5KHRoYXQsIG9iamVjdClcblxuICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdtdXN0IHN0YXJ0IHdpdGggbnVtYmVyLCBidWZmZXIsIGFycmF5IG9yIHN0cmluZycpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChvYmplY3QuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBmcm9tVHlwZWRBcnJheSh0aGF0LCBvYmplY3QpXG4gICAgfVxuICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCBvYmplY3QpXG4gICAgfVxuICB9XG5cbiAgaWYgKG9iamVjdC5sZW5ndGgpIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iamVjdClcblxuICByZXR1cm4gZnJvbUpzb25PYmplY3QodGhhdCwgb2JqZWN0KVxufVxuXG5mdW5jdGlvbiBmcm9tQnVmZmVyICh0aGF0LCBidWZmZXIpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYnVmZmVyLmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGJ1ZmZlci5jb3B5KHRoYXQsIDAsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5ICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuLy8gRHVwbGljYXRlIG9mIGZyb21BcnJheSgpIHRvIGtlZXAgZnJvbUFycmF5KCkgbW9ub21vcnBoaWMuXG5mdW5jdGlvbiBmcm9tVHlwZWRBcnJheSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgLy8gVHJ1bmNhdGluZyB0aGUgZWxlbWVudHMgaXMgcHJvYmFibHkgbm90IHdoYXQgcGVvcGxlIGV4cGVjdCBmcm9tIHR5cGVkXG4gIC8vIGFycmF5cyB3aXRoIEJZVEVTX1BFUl9FTEVNRU5UID4gMSBidXQgaXQncyBjb21wYXRpYmxlIHdpdGggdGhlIGJlaGF2aW9yXG4gIC8vIG9mIHRoZSBvbGQgQnVmZmVyIGNvbnN0cnVjdG9yLlxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSkge1xuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICBhcnJheS5ieXRlTGVuZ3RoXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShhcnJheSkpXG4gIH0gZWxzZSB7XG4gICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xuICAgIHRoYXQgPSBmcm9tVHlwZWRBcnJheSh0aGF0LCBuZXcgVWludDhBcnJheShhcnJheSkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5TGlrZSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8vIERlc2VyaWFsaXplIHsgdHlwZTogJ0J1ZmZlcicsIGRhdGE6IFsxLDIsMywuLi5dIH0gaW50byBhIEJ1ZmZlciBvYmplY3QuXG4vLyBSZXR1cm5zIGEgemVyby1sZW5ndGggYnVmZmVyIGZvciBpbnB1dHMgdGhhdCBkb24ndCBjb25mb3JtIHRvIHRoZSBzcGVjLlxuZnVuY3Rpb24gZnJvbUpzb25PYmplY3QgKHRoYXQsIG9iamVjdCkge1xuICB2YXIgYXJyYXlcbiAgdmFyIGxlbmd0aCA9IDBcblxuICBpZiAob2JqZWN0LnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqZWN0LmRhdGEpKSB7XG4gICAgYXJyYXkgPSBvYmplY3QuZGF0YVxuICAgIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgfVxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG5pZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuICBCdWZmZXIuX19wcm90b19fID0gVWludDhBcnJheVxufVxuXG5mdW5jdGlvbiBhbGxvY2F0ZSAodGhhdCwgbGVuZ3RoKSB7XG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxuICAgIHRoYXQgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkobGVuZ3RoKSlcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcbiAgICB0aGF0Ll9pc0J1ZmZlciA9IHRydWVcbiAgfVxuXG4gIHZhciBmcm9tUG9vbCA9IGxlbmd0aCAhPT0gMCAmJiBsZW5ndGggPD0gQnVmZmVyLnBvb2xTaXplID4+PiAxXG4gIGlmIChmcm9tUG9vbCkgdGhhdC5wYXJlbnQgPSByb290UGFyZW50XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XG4gIC8vIE5vdGU6IGNhbm5vdCB1c2UgYGxlbmd0aCA8IGtNYXhMZW5ndGhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChzdWJqZWN0LCBlbmNvZGluZykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU2xvd0J1ZmZlcikpIHJldHVybiBuZXcgU2xvd0J1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcblxuICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdWJqZWN0LCBlbmNvZGluZylcbiAgZGVsZXRlIGJ1Zi5wYXJlbnRcbiAgcmV0dXJuIGJ1ZlxufVxuXG5CdWZmZXIuaXNCdWZmZXIgPSBmdW5jdGlvbiBpc0J1ZmZlciAoYikge1xuICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxufVxuXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYSkgfHwgIUJ1ZmZlci5pc0J1ZmZlcihiKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGEgPT09IGIpIHJldHVybiAwXG5cbiAgdmFyIHggPSBhLmxlbmd0aFxuICB2YXIgeSA9IGIubGVuZ3RoXG5cbiAgdmFyIGkgPSAwXG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuICB3aGlsZSAoaSA8IGxlbikge1xuICAgIGlmIChhW2ldICE9PSBiW2ldKSBicmVha1xuXG4gICAgKytpXG4gIH1cblxuICBpZiAoaSAhPT0gbGVuKSB7XG4gICAgeCA9IGFbaV1cbiAgICB5ID0gYltpXVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XG4gIHN3aXRjaCAoU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpcbiAgICBjYXNlICd1dGY4JzpcbiAgICBjYXNlICd1dGYtOCc6XG4gICAgY2FzZSAnYXNjaWknOlxuICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICBjYXNlICdyYXcnOlxuICAgIGNhc2UgJ3VjczInOlxuICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2VcbiAgfVxufVxuXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcbiAgaWYgKCFpc0FycmF5KGxpc3QpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0IGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycy4nKVxuXG4gIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKDApXG4gIH1cblxuICB2YXIgaVxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBsZW5ndGggPSAwXG4gICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxlbmd0aCArPSBsaXN0W2ldLmxlbmd0aFxuICAgIH1cbiAgfVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IGxpc3RbaV1cbiAgICBpdGVtLmNvcHkoYnVmLCBwb3MpXG4gICAgcG9zICs9IGl0ZW0ubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykgc3RyaW5nID0gJycgKyBzdHJpbmdcblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgIC8vIERlcHJlY2F0ZWRcbiAgICAgIGNhc2UgJ3Jhdyc6XG4gICAgICBjYXNlICdyYXdzJzpcbiAgICAgICAgcmV0dXJuIGxlblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbi8vIHByZS1zZXQgZm9yIHZhbHVlcyB0aGF0IG1heSBleGlzdCBpbiB0aGUgZnV0dXJlXG5CdWZmZXIucHJvdG90eXBlLmxlbmd0aCA9IHVuZGVmaW5lZFxuQnVmZmVyLnByb3RvdHlwZS5wYXJlbnQgPSB1bmRlZmluZWRcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIHN0YXJ0ID0gc3RhcnQgfCAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA9PT0gSW5maW5pdHkgPyB0aGlzLmxlbmd0aCA6IGVuZCB8IDBcblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJydcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIDBcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCkge1xuICBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIGJ5dGVPZmZzZXQgPj49IDBcblxuICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAtMVxuICBpZiAoYnl0ZU9mZnNldCA+PSB0aGlzLmxlbmd0aCkgcmV0dXJuIC0xXG5cbiAgLy8gTmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBNYXRoLm1heCh0aGlzLmxlbmd0aCArIGJ5dGVPZmZzZXQsIDApXG5cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHJldHVybiAtMSAvLyBzcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZyBhbHdheXMgZmFpbHNcbiAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCBbIHZhbCBdLCBieXRlT2Zmc2V0KVxuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCkge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKHZhciBpID0gMDsgYnl0ZU9mZnNldCArIGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhcnJbYnl0ZU9mZnNldCArIGldID09PSB2YWxbZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXhdKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsLmxlbmd0aCkgcmV0dXJuIGJ5dGVPZmZzZXQgKyBmb3VuZEluZGV4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG4vLyBgZ2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAob2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy5yZWFkVUludDgob2Zmc2V0KVxufVxuXG4vLyBgc2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCAodiwgb2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy53cml0ZVVJbnQ4KHYsIG9mZnNldClcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdmFyIHN3YXAgPSBlbmNvZGluZ1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgb2Zmc2V0ID0gbGVuZ3RoIHwgMFxuICAgIGxlbmd0aCA9IHN3YXBcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gYmluYXJ5V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gQnVmZmVyLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aCkgbmV3QnVmLnBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXNcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksIHRhcmdldFN0YXJ0KVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gIGlmICghdmFsdWUpIHZhbHVlID0gMFxuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQpIGVuZCA9IHRoaXMubGVuZ3RoXG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIDwgc3RhcnQnKVxuXG4gIC8vIEZpbGwgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3N0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCBvdXQgb2YgYm91bmRzJylcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSB2YWx1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSB1dGY4VG9CeXRlcyh2YWx1ZS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB0aGlzW2ldID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5QnVmZmVyYCB3aXRoIHRoZSAqY29waWVkKiBtZW1vcnkgb2YgdGhlIGJ1ZmZlciBpbnN0YW5jZS5cbiAqIEFkZGVkIGluIE5vZGUgMC4xMi4gT25seSBhdmFpbGFibGUgaW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IEFycmF5QnVmZmVyLlxuICovXG5CdWZmZXIucHJvdG90eXBlLnRvQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiB0b0FycmF5QnVmZmVyICgpIHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBidWZbaV0gPSB0aGlzW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gIH1cbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgQlAgPSBCdWZmZXIucHJvdG90eXBlXG5cbi8qKlxuICogQXVnbWVudCBhIFVpbnQ4QXJyYXkgKmluc3RhbmNlKiAobm90IHRoZSBVaW50OEFycmF5IGNsYXNzISkgd2l0aCBCdWZmZXIgbWV0aG9kc1xuICovXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiBfYXVnbWVudCAoYXJyKSB7XG4gIGFyci5jb25zdHJ1Y3RvciA9IEJ1ZmZlclxuICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXG4gIC8vIHNhdmUgcmVmZXJlbmNlIHRvIG9yaWdpbmFsIFVpbnQ4QXJyYXkgc2V0IG1ldGhvZCBiZWZvcmUgb3ZlcndyaXRpbmdcbiAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBhcnIuZ2V0ID0gQlAuZ2V0XG4gIGFyci5zZXQgPSBCUC5zZXRcblxuICBhcnIud3JpdGUgPSBCUC53cml0ZVxuICBhcnIudG9TdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9Mb2NhbGVTdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9KU09OID0gQlAudG9KU09OXG4gIGFyci5lcXVhbHMgPSBCUC5lcXVhbHNcbiAgYXJyLmNvbXBhcmUgPSBCUC5jb21wYXJlXG4gIGFyci5pbmRleE9mID0gQlAuaW5kZXhPZlxuICBhcnIuY29weSA9IEJQLmNvcHlcbiAgYXJyLnNsaWNlID0gQlAuc2xpY2VcbiAgYXJyLnJlYWRVSW50TEUgPSBCUC5yZWFkVUludExFXG4gIGFyci5yZWFkVUludEJFID0gQlAucmVhZFVJbnRCRVxuICBhcnIucmVhZFVJbnQ4ID0gQlAucmVhZFVJbnQ4XG4gIGFyci5yZWFkVUludDE2TEUgPSBCUC5yZWFkVUludDE2TEVcbiAgYXJyLnJlYWRVSW50MTZCRSA9IEJQLnJlYWRVSW50MTZCRVxuICBhcnIucmVhZFVJbnQzMkxFID0gQlAucmVhZFVJbnQzMkxFXG4gIGFyci5yZWFkVUludDMyQkUgPSBCUC5yZWFkVUludDMyQkVcbiAgYXJyLnJlYWRJbnRMRSA9IEJQLnJlYWRJbnRMRVxuICBhcnIucmVhZEludEJFID0gQlAucmVhZEludEJFXG4gIGFyci5yZWFkSW50OCA9IEJQLnJlYWRJbnQ4XG4gIGFyci5yZWFkSW50MTZMRSA9IEJQLnJlYWRJbnQxNkxFXG4gIGFyci5yZWFkSW50MTZCRSA9IEJQLnJlYWRJbnQxNkJFXG4gIGFyci5yZWFkSW50MzJMRSA9IEJQLnJlYWRJbnQzMkxFXG4gIGFyci5yZWFkSW50MzJCRSA9IEJQLnJlYWRJbnQzMkJFXG4gIGFyci5yZWFkRmxvYXRMRSA9IEJQLnJlYWRGbG9hdExFXG4gIGFyci5yZWFkRmxvYXRCRSA9IEJQLnJlYWRGbG9hdEJFXG4gIGFyci5yZWFkRG91YmxlTEUgPSBCUC5yZWFkRG91YmxlTEVcbiAgYXJyLnJlYWREb3VibGVCRSA9IEJQLnJlYWREb3VibGVCRVxuICBhcnIud3JpdGVVSW50OCA9IEJQLndyaXRlVUludDhcbiAgYXJyLndyaXRlVUludExFID0gQlAud3JpdGVVSW50TEVcbiAgYXJyLndyaXRlVUludEJFID0gQlAud3JpdGVVSW50QkVcbiAgYXJyLndyaXRlVUludDE2TEUgPSBCUC53cml0ZVVJbnQxNkxFXG4gIGFyci53cml0ZVVJbnQxNkJFID0gQlAud3JpdGVVSW50MTZCRVxuICBhcnIud3JpdGVVSW50MzJMRSA9IEJQLndyaXRlVUludDMyTEVcbiAgYXJyLndyaXRlVUludDMyQkUgPSBCUC53cml0ZVVJbnQzMkJFXG4gIGFyci53cml0ZUludExFID0gQlAud3JpdGVJbnRMRVxuICBhcnIud3JpdGVJbnRCRSA9IEJQLndyaXRlSW50QkVcbiAgYXJyLndyaXRlSW50OCA9IEJQLndyaXRlSW50OFxuICBhcnIud3JpdGVJbnQxNkxFID0gQlAud3JpdGVJbnQxNkxFXG4gIGFyci53cml0ZUludDE2QkUgPSBCUC53cml0ZUludDE2QkVcbiAgYXJyLndyaXRlSW50MzJMRSA9IEJQLndyaXRlSW50MzJMRVxuICBhcnIud3JpdGVJbnQzMkJFID0gQlAud3JpdGVJbnQzMkJFXG4gIGFyci53cml0ZUZsb2F0TEUgPSBCUC53cml0ZUZsb2F0TEVcbiAgYXJyLndyaXRlRmxvYXRCRSA9IEJQLndyaXRlRmxvYXRCRVxuICBhcnIud3JpdGVEb3VibGVMRSA9IEJQLndyaXRlRG91YmxlTEVcbiAgYXJyLndyaXRlRG91YmxlQkUgPSBCUC53cml0ZURvdWJsZUJFXG4gIGFyci5maWxsID0gQlAuZmlsbFxuICBhcnIuaW5zcGVjdCA9IEJQLmluc3BlY3RcbiAgYXJyLnRvQXJyYXlCdWZmZXIgPSBCUC50b0FycmF5QnVmZmVyXG5cbiAgcmV0dXJuIGFyclxufVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0ge1xuICBcIjEwMFwiOiBcIkNvbnRpbnVlXCIsXG4gIFwiMTAxXCI6IFwiU3dpdGNoaW5nIFByb3RvY29sc1wiLFxuICBcIjEwMlwiOiBcIlByb2Nlc3NpbmdcIixcbiAgXCIyMDBcIjogXCJPS1wiLFxuICBcIjIwMVwiOiBcIkNyZWF0ZWRcIixcbiAgXCIyMDJcIjogXCJBY2NlcHRlZFwiLFxuICBcIjIwM1wiOiBcIk5vbi1BdXRob3JpdGF0aXZlIEluZm9ybWF0aW9uXCIsXG4gIFwiMjA0XCI6IFwiTm8gQ29udGVudFwiLFxuICBcIjIwNVwiOiBcIlJlc2V0IENvbnRlbnRcIixcbiAgXCIyMDZcIjogXCJQYXJ0aWFsIENvbnRlbnRcIixcbiAgXCIyMDdcIjogXCJNdWx0aS1TdGF0dXNcIixcbiAgXCIzMDBcIjogXCJNdWx0aXBsZSBDaG9pY2VzXCIsXG4gIFwiMzAxXCI6IFwiTW92ZWQgUGVybWFuZW50bHlcIixcbiAgXCIzMDJcIjogXCJNb3ZlZCBUZW1wb3JhcmlseVwiLFxuICBcIjMwM1wiOiBcIlNlZSBPdGhlclwiLFxuICBcIjMwNFwiOiBcIk5vdCBNb2RpZmllZFwiLFxuICBcIjMwNVwiOiBcIlVzZSBQcm94eVwiLFxuICBcIjMwN1wiOiBcIlRlbXBvcmFyeSBSZWRpcmVjdFwiLFxuICBcIjMwOFwiOiBcIlBlcm1hbmVudCBSZWRpcmVjdFwiLFxuICBcIjQwMFwiOiBcIkJhZCBSZXF1ZXN0XCIsXG4gIFwiNDAxXCI6IFwiVW5hdXRob3JpemVkXCIsXG4gIFwiNDAyXCI6IFwiUGF5bWVudCBSZXF1aXJlZFwiLFxuICBcIjQwM1wiOiBcIkZvcmJpZGRlblwiLFxuICBcIjQwNFwiOiBcIk5vdCBGb3VuZFwiLFxuICBcIjQwNVwiOiBcIk1ldGhvZCBOb3QgQWxsb3dlZFwiLFxuICBcIjQwNlwiOiBcIk5vdCBBY2NlcHRhYmxlXCIsXG4gIFwiNDA3XCI6IFwiUHJveHkgQXV0aGVudGljYXRpb24gUmVxdWlyZWRcIixcbiAgXCI0MDhcIjogXCJSZXF1ZXN0IFRpbWUtb3V0XCIsXG4gIFwiNDA5XCI6IFwiQ29uZmxpY3RcIixcbiAgXCI0MTBcIjogXCJHb25lXCIsXG4gIFwiNDExXCI6IFwiTGVuZ3RoIFJlcXVpcmVkXCIsXG4gIFwiNDEyXCI6IFwiUHJlY29uZGl0aW9uIEZhaWxlZFwiLFxuICBcIjQxM1wiOiBcIlJlcXVlc3QgRW50aXR5IFRvbyBMYXJnZVwiLFxuICBcIjQxNFwiOiBcIlJlcXVlc3QtVVJJIFRvbyBMYXJnZVwiLFxuICBcIjQxNVwiOiBcIlVuc3VwcG9ydGVkIE1lZGlhIFR5cGVcIixcbiAgXCI0MTZcIjogXCJSZXF1ZXN0ZWQgUmFuZ2UgTm90IFNhdGlzZmlhYmxlXCIsXG4gIFwiNDE3XCI6IFwiRXhwZWN0YXRpb24gRmFpbGVkXCIsXG4gIFwiNDE4XCI6IFwiSSdtIGEgdGVhcG90XCIsXG4gIFwiNDIyXCI6IFwiVW5wcm9jZXNzYWJsZSBFbnRpdHlcIixcbiAgXCI0MjNcIjogXCJMb2NrZWRcIixcbiAgXCI0MjRcIjogXCJGYWlsZWQgRGVwZW5kZW5jeVwiLFxuICBcIjQyNVwiOiBcIlVub3JkZXJlZCBDb2xsZWN0aW9uXCIsXG4gIFwiNDI2XCI6IFwiVXBncmFkZSBSZXF1aXJlZFwiLFxuICBcIjQyOFwiOiBcIlByZWNvbmRpdGlvbiBSZXF1aXJlZFwiLFxuICBcIjQyOVwiOiBcIlRvbyBNYW55IFJlcXVlc3RzXCIsXG4gIFwiNDMxXCI6IFwiUmVxdWVzdCBIZWFkZXIgRmllbGRzIFRvbyBMYXJnZVwiLFxuICBcIjUwMFwiOiBcIkludGVybmFsIFNlcnZlciBFcnJvclwiLFxuICBcIjUwMVwiOiBcIk5vdCBJbXBsZW1lbnRlZFwiLFxuICBcIjUwMlwiOiBcIkJhZCBHYXRld2F5XCIsXG4gIFwiNTAzXCI6IFwiU2VydmljZSBVbmF2YWlsYWJsZVwiLFxuICBcIjUwNFwiOiBcIkdhdGV3YXkgVGltZS1vdXRcIixcbiAgXCI1MDVcIjogXCJIVFRQIFZlcnNpb24gTm90IFN1cHBvcnRlZFwiLFxuICBcIjUwNlwiOiBcIlZhcmlhbnQgQWxzbyBOZWdvdGlhdGVzXCIsXG4gIFwiNTA3XCI6IFwiSW5zdWZmaWNpZW50IFN0b3JhZ2VcIixcbiAgXCI1MDlcIjogXCJCYW5kd2lkdGggTGltaXQgRXhjZWVkZWRcIixcbiAgXCI1MTBcIjogXCJOb3QgRXh0ZW5kZWRcIixcbiAgXCI1MTFcIjogXCJOZXR3b3JrIEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkXCJcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBOT1RFOiBUaGVzZSB0eXBlIGNoZWNraW5nIGZ1bmN0aW9ucyBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBgaW5zdGFuY2VvZmBcbi8vIGJlY2F1c2UgaXQgaXMgZnJhZ2lsZSBhbmQgY2FuIGJlIGVhc2lseSBmYWtlZCB3aXRoIGBPYmplY3QuY3JlYXRlKClgLlxuXG5mdW5jdGlvbiBpc0FycmF5KGFyZykge1xuICBpZiAoQXJyYXkuaXNBcnJheSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KGFyZyk7XG4gIH1cbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnYm9vbGVhbic7XG59XG5leHBvcnRzLmlzQm9vbGVhbiA9IGlzQm9vbGVhbjtcblxuZnVuY3Rpb24gaXNOdWxsKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGwgPSBpc051bGw7XG5cbmZ1bmN0aW9uIGlzTnVsbE9yVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09IG51bGw7XG59XG5leHBvcnRzLmlzTnVsbE9yVW5kZWZpbmVkID0gaXNOdWxsT3JVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzTnVtYmVyKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ251bWJlcic7XG59XG5leHBvcnRzLmlzTnVtYmVyID0gaXNOdW1iZXI7XG5cbmZ1bmN0aW9uIGlzU3RyaW5nKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N0cmluZyc7XG59XG5leHBvcnRzLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbmZ1bmN0aW9uIGlzU3ltYm9sKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCc7XG59XG5leHBvcnRzLmlzU3ltYm9sID0gaXNTeW1ib2w7XG5cbmZ1bmN0aW9uIGlzVW5kZWZpbmVkKGFyZykge1xuICByZXR1cm4gYXJnID09PSB2b2lkIDA7XG59XG5leHBvcnRzLmlzVW5kZWZpbmVkID0gaXNVbmRlZmluZWQ7XG5cbmZ1bmN0aW9uIGlzUmVnRXhwKHJlKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhyZSkgPT09ICdbb2JqZWN0IFJlZ0V4cF0nO1xufVxuZXhwb3J0cy5pc1JlZ0V4cCA9IGlzUmVnRXhwO1xuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNPYmplY3QgPSBpc09iamVjdDtcblxuZnVuY3Rpb24gaXNEYXRlKGQpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nKGQpID09PSAnW29iamVjdCBEYXRlXSc7XG59XG5leHBvcnRzLmlzRGF0ZSA9IGlzRGF0ZTtcblxuZnVuY3Rpb24gaXNFcnJvcihlKSB7XG4gIHJldHVybiAob2JqZWN0VG9TdHJpbmcoZSkgPT09ICdbb2JqZWN0IEVycm9yXScgfHwgZSBpbnN0YW5jZW9mIEVycm9yKTtcbn1cbmV4cG9ydHMuaXNFcnJvciA9IGlzRXJyb3I7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuZXhwb3J0cy5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcblxuZnVuY3Rpb24gaXNQcmltaXRpdmUoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IG51bGwgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdib29sZWFuJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3ltYm9sJyB8fCAgLy8gRVM2IHN5bWJvbFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3VuZGVmaW5lZCc7XG59XG5leHBvcnRzLmlzUHJpbWl0aXZlID0gaXNQcmltaXRpdmU7XG5cbmV4cG9ydHMuaXNCdWZmZXIgPSBCdWZmZXIuaXNCdWZmZXI7XG5cbmZ1bmN0aW9uIG9iamVjdFRvU3RyaW5nKG8pIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKTtcbn1cbiIsIlxuLyoqXG4gKiBFeHBvc2UgYHBhcnNlYC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlO1xuXG4vKipcbiAqIFRlc3RzIGZvciBicm93c2VyIHN1cHBvcnQuXG4gKi9cblxudmFyIGlubmVySFRNTEJ1ZyA9IGZhbHNlO1xudmFyIGJ1Z1Rlc3REaXY7XG5pZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICBidWdUZXN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIC8vIFNldHVwXG4gIGJ1Z1Rlc3REaXYuaW5uZXJIVE1MID0gJyAgPGxpbmsvPjx0YWJsZT48L3RhYmxlPjxhIGhyZWY9XCIvYVwiPmE8L2E+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiLz4nO1xuICAvLyBNYWtlIHN1cmUgdGhhdCBsaW5rIGVsZW1lbnRzIGdldCBzZXJpYWxpemVkIGNvcnJlY3RseSBieSBpbm5lckhUTUxcbiAgLy8gVGhpcyByZXF1aXJlcyBhIHdyYXBwZXIgZWxlbWVudCBpbiBJRVxuICBpbm5lckhUTUxCdWcgPSAhYnVnVGVzdERpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGluaycpLmxlbmd0aDtcbiAgYnVnVGVzdERpdiA9IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBXcmFwIG1hcCBmcm9tIGpxdWVyeS5cbiAqL1xuXG52YXIgbWFwID0ge1xuICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J10sXG4gIC8vIGZvciBzY3JpcHQvbGluay9zdHlsZSB0YWdzIHRvIHdvcmsgaW4gSUU2LTgsIHlvdSBoYXZlIHRvIHdyYXBcbiAgLy8gaW4gYSBkaXYgd2l0aCBhIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlciBpbiBmcm9udCwgaGEhXG4gIF9kZWZhdWx0OiBpbm5lckhUTUxCdWcgPyBbMSwgJ1g8ZGl2PicsICc8L2Rpdj4nXSA6IFswLCAnJywgJyddXG59O1xuXG5tYXAudGQgPVxubWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbm1hcC5vcHRpb24gPVxubWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cbm1hcC50aGVhZCA9XG5tYXAudGJvZHkgPVxubWFwLmNvbGdyb3VwID1cbm1hcC5jYXB0aW9uID1cbm1hcC50Zm9vdCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xuXG5tYXAucG9seWxpbmUgPVxubWFwLmVsbGlwc2UgPVxubWFwLnBvbHlnb24gPVxubWFwLmNpcmNsZSA9XG5tYXAudGV4dCA9XG5tYXAubGluZSA9XG5tYXAucGF0aCA9XG5tYXAucmVjdCA9XG5tYXAuZyA9IFsxLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmVyc2lvbj1cIjEuMVwiPicsJzwvc3ZnPiddO1xuXG4vKipcbiAqIFBhcnNlIGBodG1sYCBhbmQgcmV0dXJuIGEgRE9NIE5vZGUgaW5zdGFuY2UsIHdoaWNoIGNvdWxkIGJlIGEgVGV4dE5vZGUsXG4gKiBIVE1MIERPTSBOb2RlIG9mIHNvbWUga2luZCAoPGRpdj4gZm9yIGV4YW1wbGUpLCBvciBhIERvY3VtZW50RnJhZ21lbnRcbiAqIGluc3RhbmNlLCBkZXBlbmRpbmcgb24gdGhlIGNvbnRlbnRzIG9mIHRoZSBgaHRtbGAgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBodG1sIC0gSFRNTCBzdHJpbmcgdG8gXCJkb21pZnlcIlxuICogQHBhcmFtIHtEb2N1bWVudH0gZG9jIC0gVGhlIGBkb2N1bWVudGAgaW5zdGFuY2UgdG8gY3JlYXRlIHRoZSBOb2RlIGZvclxuICogQHJldHVybiB7RE9NTm9kZX0gdGhlIFRleHROb2RlLCBET00gTm9kZSwgb3IgRG9jdW1lbnRGcmFnbWVudCBpbnN0YW5jZVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gcGFyc2UoaHRtbCwgZG9jKSB7XG4gIGlmICgnc3RyaW5nJyAhPSB0eXBlb2YgaHRtbCkgdGhyb3cgbmV3IFR5cGVFcnJvcignU3RyaW5nIGV4cGVjdGVkJyk7XG5cbiAgLy8gZGVmYXVsdCB0byB0aGUgZ2xvYmFsIGBkb2N1bWVudGAgb2JqZWN0XG4gIGlmICghZG9jKSBkb2MgPSBkb2N1bWVudDtcblxuICAvLyB0YWcgbmFtZVxuICB2YXIgbSA9IC88KFtcXHc6XSspLy5leGVjKGh0bWwpO1xuICBpZiAoIW0pIHJldHVybiBkb2MuY3JlYXRlVGV4dE5vZGUoaHRtbCk7XG5cbiAgaHRtbCA9IGh0bWwucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpOyAvLyBSZW1vdmUgbGVhZGluZy90cmFpbGluZyB3aGl0ZXNwYWNlXG5cbiAgdmFyIHRhZyA9IG1bMV07XG5cbiAgLy8gYm9keSBzdXBwb3J0XG4gIGlmICh0YWcgPT0gJ2JvZHknKSB7XG4gICAgdmFyIGVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2h0bWwnKTtcbiAgICBlbC5pbm5lckhUTUwgPSBodG1sO1xuICAgIHJldHVybiBlbC5yZW1vdmVDaGlsZChlbC5sYXN0Q2hpbGQpO1xuICB9XG5cbiAgLy8gd3JhcCBtYXBcbiAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuX2RlZmF1bHQ7XG4gIHZhciBkZXB0aCA9IHdyYXBbMF07XG4gIHZhciBwcmVmaXggPSB3cmFwWzFdO1xuICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcbiAgdmFyIGVsID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBlbC5pbm5lckhUTUwgPSBwcmVmaXggKyBodG1sICsgc3VmZml4O1xuICB3aGlsZSAoZGVwdGgtLSkgZWwgPSBlbC5sYXN0Q2hpbGQ7XG5cbiAgLy8gb25lIGVsZW1lbnRcbiAgaWYgKGVsLmZpcnN0Q2hpbGQgPT0gZWwubGFzdENoaWxkKSB7XG4gICAgcmV0dXJuIGVsLnJlbW92ZUNoaWxkKGVsLmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgLy8gc2V2ZXJhbCBlbGVtZW50c1xuICB2YXIgZnJhZ21lbnQgPSBkb2MuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB3aGlsZSAoZWwuZmlyc3RDaGlsZCkge1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGVsLnJlbW92ZUNoaWxkKGVsLmZpcnN0Q2hpbGQpKTtcbiAgfVxuXG4gIHJldHVybiBmcmFnbWVudDtcbn1cbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIHRoaXMuX2V2ZW50cyA9IHRoaXMuX2V2ZW50cyB8fCB7fTtcbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gdGhpcy5fbWF4TGlzdGVuZXJzIHx8IHVuZGVmaW5lZDtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxuRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24obikge1xuICBpZiAoIWlzTnVtYmVyKG4pIHx8IG4gPCAwIHx8IGlzTmFOKG4pKVxuICAgIHRocm93IFR5cGVFcnJvcignbiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24odHlwZSkge1xuICB2YXIgZXIsIGhhbmRsZXIsIGxlbiwgYXJncywgaSwgbGlzdGVuZXJzO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzKVxuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXG4gIC8vIElmIHRoZXJlIGlzIG5vICdlcnJvcicgZXZlbnQgbGlzdGVuZXIgdGhlbiB0aHJvdy5cbiAgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICBpZiAoIXRoaXMuX2V2ZW50cy5lcnJvciB8fFxuICAgICAgICAoaXNPYmplY3QodGhpcy5fZXZlbnRzLmVycm9yKSAmJiAhdGhpcy5fZXZlbnRzLmVycm9yLmxlbmd0aCkpIHtcbiAgICAgIGVyID0gYXJndW1lbnRzWzFdO1xuICAgICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gICAgICB9XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ1VuY2F1Z2h0LCB1bnNwZWNpZmllZCBcImVycm9yXCIgZXZlbnQuJyk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlciA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcblxuICBpZiAoaXNVbmRlZmluZWQoaGFuZGxlcikpXG4gICAgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGhhbmRsZXIpKSB7XG4gICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAvLyBmYXN0IGNhc2VzXG4gICAgICBjYXNlIDE6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6XG4gICAgICAgIGhhbmRsZXIuY2FsbCh0aGlzLCBhcmd1bWVudHNbMV0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzpcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICAvLyBzbG93ZXJcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICBoYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdChoYW5kbGVyKSkge1xuICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIGxpc3RlbmVycyA9IGhhbmRsZXIuc2xpY2UoKTtcbiAgICBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKylcbiAgICAgIGxpc3RlbmVyc1tpXS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBtO1xuXG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICB0aGlzLl9ldmVudHMgPSB7fTtcblxuICAvLyBUbyBhdm9pZCByZWN1cnNpb24gaW4gdGhlIGNhc2UgdGhhdCB0eXBlID09PSBcIm5ld0xpc3RlbmVyXCIhIEJlZm9yZVxuICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gIGlmICh0aGlzLl9ldmVudHMubmV3TGlzdGVuZXIpXG4gICAgdGhpcy5lbWl0KCduZXdMaXN0ZW5lcicsIHR5cGUsXG4gICAgICAgICAgICAgIGlzRnVuY3Rpb24obGlzdGVuZXIubGlzdGVuZXIpID9cbiAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgaWYgKCF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgdGhpcy5fZXZlbnRzW3R5cGVdID0gbGlzdGVuZXI7XG4gIGVsc2UgaWYgKGlzT2JqZWN0KHRoaXMuX2V2ZW50c1t0eXBlXSkpXG4gICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5wdXNoKGxpc3RlbmVyKTtcbiAgZWxzZVxuICAgIC8vIEFkZGluZyB0aGUgc2Vjb25kIGVsZW1lbnQsIG5lZWQgdG8gY2hhbmdlIHRvIGFycmF5LlxuICAgIHRoaXMuX2V2ZW50c1t0eXBlXSA9IFt0aGlzLl9ldmVudHNbdHlwZV0sIGxpc3RlbmVyXTtcblxuICAvLyBDaGVjayBmb3IgbGlzdGVuZXIgbGVha1xuICBpZiAoaXNPYmplY3QodGhpcy5fZXZlbnRzW3R5cGVdKSAmJiAhdGhpcy5fZXZlbnRzW3R5cGVdLndhcm5lZCkge1xuICAgIGlmICghaXNVbmRlZmluZWQodGhpcy5fbWF4TGlzdGVuZXJzKSkge1xuICAgICAgbSA9IHRoaXMuX21heExpc3RlbmVycztcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IEV2ZW50RW1pdHRlci5kZWZhdWx0TWF4TGlzdGVuZXJzO1xuICAgIH1cblxuICAgIGlmIChtICYmIG0gPiAwICYmIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGggPiBtKSB7XG4gICAgICB0aGlzLl9ldmVudHNbdHlwZV0ud2FybmVkID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJyhub2RlKSB3YXJuaW5nOiBwb3NzaWJsZSBFdmVudEVtaXR0ZXIgbWVtb3J5ICcgK1xuICAgICAgICAgICAgICAgICAgICAnbGVhayBkZXRlY3RlZC4gJWQgbGlzdGVuZXJzIGFkZGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgJ1VzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LicsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50c1t0eXBlXS5sZW5ndGgpO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLnRyYWNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWQgaW4gSUUgMTBcbiAgICAgICAgY29uc29sZS50cmFjZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICghaXNGdW5jdGlvbihsaXN0ZW5lcikpXG4gICAgdGhyb3cgVHlwZUVycm9yKCdsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblxuICB2YXIgZmlyZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBnKCkge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgZyk7XG5cbiAgICBpZiAoIWZpcmVkKSB7XG4gICAgICBmaXJlZCA9IHRydWU7XG4gICAgICBsaXN0ZW5lci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfVxuXG4gIGcubGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgdGhpcy5vbih0eXBlLCBnKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZmYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGxpc3QsIHBvc2l0aW9uLCBsZW5ndGgsIGk7XG5cbiAgaWYgKCFpc0Z1bmN0aW9uKGxpc3RlbmVyKSlcbiAgICB0aHJvdyBUeXBlRXJyb3IoJ2xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuXG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0dXJuIHRoaXM7XG5cbiAgbGlzdCA9IHRoaXMuX2V2ZW50c1t0eXBlXTtcbiAgbGVuZ3RoID0gbGlzdC5sZW5ndGg7XG4gIHBvc2l0aW9uID0gLTE7XG5cbiAgaWYgKGxpc3QgPT09IGxpc3RlbmVyIHx8XG4gICAgICAoaXNGdW5jdGlvbihsaXN0Lmxpc3RlbmVyKSAmJiBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICh0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdGVuZXIpO1xuXG4gIH0gZWxzZSBpZiAoaXNPYmplY3QobGlzdCkpIHtcbiAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSA+IDA7KSB7XG4gICAgICBpZiAobGlzdFtpXSA9PT0gbGlzdGVuZXIgfHxcbiAgICAgICAgICAobGlzdFtpXS5saXN0ZW5lciAmJiBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikpIHtcbiAgICAgICAgcG9zaXRpb24gPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxpc3QubGVuZ3RoID0gMDtcbiAgICAgIGRlbGV0ZSB0aGlzLl9ldmVudHNbdHlwZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpc3Quc3BsaWNlKHBvc2l0aW9uLCAxKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciBrZXksIGxpc3RlbmVycztcblxuICBpZiAoIXRoaXMuX2V2ZW50cylcbiAgICByZXR1cm4gdGhpcztcblxuICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gIGlmICghdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICBlbHNlIGlmICh0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZW1pdCByZW1vdmVMaXN0ZW5lciBmb3IgYWxsIGxpc3RlbmVycyBvbiBhbGwgZXZlbnRzXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgZm9yIChrZXkgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICBpZiAoa2V5ID09PSAncmVtb3ZlTGlzdGVuZXInKSBjb250aW51ZTtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgfVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCdyZW1vdmVMaXN0ZW5lcicpO1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIGlmIChpc0Z1bmN0aW9uKGxpc3RlbmVycykpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gIH0gZWxzZSBpZiAobGlzdGVuZXJzKSB7XG4gICAgLy8gTElGTyBvcmRlclxuICAgIHdoaWxlIChsaXN0ZW5lcnMubGVuZ3RoKVxuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbbGlzdGVuZXJzLmxlbmd0aCAtIDFdKTtcbiAgfVxuICBkZWxldGUgdGhpcy5fZXZlbnRzW3R5cGVdO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHZhciByZXQ7XG4gIGlmICghdGhpcy5fZXZlbnRzIHx8ICF0aGlzLl9ldmVudHNbdHlwZV0pXG4gICAgcmV0ID0gW107XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24odGhpcy5fZXZlbnRzW3R5cGVdKSlcbiAgICByZXQgPSBbdGhpcy5fZXZlbnRzW3R5cGVdXTtcbiAgZWxzZVxuICAgIHJldCA9IHRoaXMuX2V2ZW50c1t0eXBlXS5zbGljZSgpO1xuICByZXR1cm4gcmV0O1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24odHlwZSkge1xuICBpZiAodGhpcy5fZXZlbnRzKSB7XG4gICAgdmFyIGV2bGlzdGVuZXIgPSB0aGlzLl9ldmVudHNbdHlwZV07XG5cbiAgICBpZiAoaXNGdW5jdGlvbihldmxpc3RlbmVyKSlcbiAgICAgIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKGV2bGlzdGVuZXIpXG4gICAgICByZXR1cm4gZXZsaXN0ZW5lci5sZW5ndGg7XG4gIH1cbiAgcmV0dXJuIDA7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJDb3VudCh0eXBlKTtcbn07XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdvYmplY3QnICYmIGFyZyAhPT0gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNVbmRlZmluZWQoYXJnKSB7XG4gIHJldHVybiBhcmcgPT09IHZvaWQgMDtcbn1cbiIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IGUgKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuICBlID4+PSAoLW5CaXRzKVxuICBuQml0cyArPSBtTGVuXG4gIGZvciAoOyBuQml0cyA+IDA7IG0gPSBtICogMjU2ICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IG5CeXRlcyAqIDggLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKHZhbHVlICogYyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSBlICsgZUJpYXNcbiAgICB9IGVsc2Uge1xuICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gMFxuICAgIH1cbiAgfVxuXG4gIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cbiAgZSA9IChlIDw8IG1MZW4pIHwgbVxuICBlTGVuICs9IG1MZW5cbiAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXG4gIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxufVxuIiwiaWYgKHR5cGVvZiBPYmplY3QuY3JlYXRlID09PSAnZnVuY3Rpb24nKSB7XG4gIC8vIGltcGxlbWVudGF0aW9uIGZyb20gc3RhbmRhcmQgbm9kZS5qcyAndXRpbCcgbW9kdWxlXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgdmFsdWU6IGN0b3IsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59IGVsc2Uge1xuICAvLyBvbGQgc2Nob29sIHNoaW0gZm9yIG9sZCBicm93c2Vyc1xuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgdmFyIFRlbXBDdG9yID0gZnVuY3Rpb24gKCkge31cbiAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgY3Rvci5wcm90b3R5cGUgPSBuZXcgVGVtcEN0b3IoKVxuICAgIGN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY3RvclxuICB9XG59XG4iLCIvKipcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaXMgQnVmZmVyXG4gKlxuICogQXV0aG9yOiAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBMaWNlbnNlOiAgTUlUXG4gKlxuICogYG5wbSBpbnN0YWxsIGlzLWJ1ZmZlcmBcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuICEhKG9iaiAhPSBudWxsICYmXG4gICAgKG9iai5faXNCdWZmZXIgfHwgLy8gRm9yIFNhZmFyaSA1LTcgKG1pc3NpbmcgT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvcilcbiAgICAgIChvYmouY29uc3RydWN0b3IgJiZcbiAgICAgIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiZcbiAgICAgIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopKVxuICAgICkpXG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG4iLCJ2YXIgYXJyYXlFYWNoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYXJyYXlFYWNoJyksXG4gICAgYmFzZUVhY2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlRWFjaCcpLFxuICAgIGNyZWF0ZUZvckVhY2ggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9jcmVhdGVGb3JFYWNoJyk7XG5cbi8qKlxuICogSXRlcmF0ZXMgb3ZlciBlbGVtZW50cyBvZiBgY29sbGVjdGlvbmAgaW52b2tpbmcgYGl0ZXJhdGVlYCBmb3IgZWFjaCBlbGVtZW50LlxuICogVGhlIGBpdGVyYXRlZWAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdGhyZWUgYXJndW1lbnRzOlxuICogKHZhbHVlLCBpbmRleHxrZXksIGNvbGxlY3Rpb24pLiBJdGVyYXRlZSBmdW5jdGlvbnMgbWF5IGV4aXQgaXRlcmF0aW9uIGVhcmx5XG4gKiBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuICpcbiAqICoqTm90ZToqKiBBcyB3aXRoIG90aGVyIFwiQ29sbGVjdGlvbnNcIiBtZXRob2RzLCBvYmplY3RzIHdpdGggYSBcImxlbmd0aFwiIHByb3BlcnR5XG4gKiBhcmUgaXRlcmF0ZWQgbGlrZSBhcnJheXMuIFRvIGF2b2lkIHRoaXMgYmVoYXZpb3IgYF8uZm9ySW5gIG9yIGBfLmZvck93bmBcbiAqIG1heSBiZSB1c2VkIGZvciBvYmplY3QgaXRlcmF0aW9uLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAYWxpYXMgZWFjaFxuICogQGNhdGVnb3J5IENvbGxlY3Rpb25cbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fHN0cmluZ30gY29sbGVjdGlvbiBUaGUgY29sbGVjdGlvbiB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaXRlcmF0ZWU9Xy5pZGVudGl0eV0gVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgaXRlcmF0ZWVgLlxuICogQHJldHVybnMge0FycmF5fE9iamVjdHxzdHJpbmd9IFJldHVybnMgYGNvbGxlY3Rpb25gLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfKFsxLCAyXSkuZm9yRWFjaChmdW5jdGlvbihuKSB7XG4gKiAgIGNvbnNvbGUubG9nKG4pO1xuICogfSkudmFsdWUoKTtcbiAqIC8vID0+IGxvZ3MgZWFjaCB2YWx1ZSBmcm9tIGxlZnQgdG8gcmlnaHQgYW5kIHJldHVybnMgdGhlIGFycmF5XG4gKlxuICogXy5mb3JFYWNoKHsgJ2EnOiAxLCAnYic6IDIgfSwgZnVuY3Rpb24obiwga2V5KSB7XG4gKiAgIGNvbnNvbGUubG9nKG4sIGtleSk7XG4gKiB9KTtcbiAqIC8vID0+IGxvZ3MgZWFjaCB2YWx1ZS1rZXkgcGFpciBhbmQgcmV0dXJucyB0aGUgb2JqZWN0IChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKi9cbnZhciBmb3JFYWNoID0gY3JlYXRlRm9yRWFjaChhcnJheUVhY2gsIGJhc2VFYWNoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmb3JFYWNoO1xuIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2dldE5hdGl2ZScpO1xuXG4vKiBOYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU5vdyA9IGdldE5hdGl2ZShEYXRlLCAnbm93Jyk7XG5cbi8qKlxuICogR2V0cyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgVW5peCBlcG9jaFxuICogKDEgSmFudWFyeSAxOTcwIDAwOjAwOjAwIFVUQykuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gbG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgZnVuY3Rpb24gdG8gYmUgaW52b2tlZFxuICovXG52YXIgbm93ID0gbmF0aXZlTm93IHx8IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5vdztcbiIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2xhbmcvaXNPYmplY3QnKSxcbiAgICBub3cgPSByZXF1aXJlKCcuLi9kYXRlL25vdycpO1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBpbnZvY2F0aW9ucy4gUHJvdmlkZSBhbiBvcHRpb25zIG9iamVjdCB0byBpbmRpY2F0ZSB0aGF0IGBmdW5jYFxuICogc2hvdWxkIGJlIGludm9rZWQgb24gdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICogU3Vic2VxdWVudCBjYWxscyB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0XG4gKiBgZnVuY2AgaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzIGludm9rZWRcbiAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gaXNcbiAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cbiAqXG4gKiBTZWUgW0RhdmlkIENvcmJhY2hvJ3MgYXJ0aWNsZV0oaHR0cDovL2RydXBhbG1vdGlvbi5jb20vYXJ0aWNsZS9kZWJvdW5jZS1hbmQtdGhyb3R0bGUtdmlzdWFsLWV4cGxhbmF0aW9uKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2FpdD0wXSBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXSBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nXG4gKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5tYXhXYWl0XSBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlXG4gKiAgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy50cmFpbGluZz10cnVlXSBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZ1xuICogIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIGF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXhcbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gaW52b2tlIGBzZW5kTWFpbGAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxsc1xuICogalF1ZXJ5KCcjcG9zdGJveCcpLm9uKCdjbGljaycsIF8uZGVib3VuY2Uoc2VuZE1haWwsIDMwMCwge1xuICogICAnbGVhZGluZyc6IHRydWUsXG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gZW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxsc1xuICogdmFyIHNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZSgnL3N0cmVhbScpO1xuICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBfLmRlYm91bmNlKGJhdGNoTG9nLCAyNTAsIHtcbiAqICAgJ21heFdhaXQnOiAxMDAwXG4gKiB9KSk7XG4gKlxuICogLy8gY2FuY2VsIGEgZGVib3VuY2VkIGNhbGxcbiAqIHZhciB0b2RvQ2hhbmdlcyA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDEwMDApO1xuICogT2JqZWN0Lm9ic2VydmUobW9kZWxzLnRvZG8sIHRvZG9DaGFuZ2VzKTtcbiAqXG4gKiBPYmplY3Qub2JzZXJ2ZShtb2RlbHMsIGZ1bmN0aW9uKGNoYW5nZXMpIHtcbiAqICAgaWYgKF8uZmluZChjaGFuZ2VzLCB7ICd1c2VyJzogJ3RvZG8nLCAndHlwZSc6ICdkZWxldGUnfSkpIHtcbiAqICAgICB0b2RvQ2hhbmdlcy5jYW5jZWwoKTtcbiAqICAgfVxuICogfSwgWydkZWxldGUnXSk7XG4gKlxuICogLy8gLi4uYXQgc29tZSBwb2ludCBgbW9kZWxzLnRvZG9gIGlzIGNoYW5nZWRcbiAqIG1vZGVscy50b2RvLmNvbXBsZXRlZCA9IHRydWU7XG4gKlxuICogLy8gLi4uYmVmb3JlIDEgc2Vjb25kIGhhcyBwYXNzZWQgYG1vZGVscy50b2RvYCBpcyBkZWxldGVkXG4gKiAvLyB3aGljaCBjYW5jZWxzIHRoZSBkZWJvdW5jZWQgYHRvZG9DaGFuZ2VzYCBjYWxsXG4gKiBkZWxldGUgbW9kZWxzLnRvZG87XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGFyZ3MsXG4gICAgICBtYXhUaW1lb3V0SWQsXG4gICAgICByZXN1bHQsXG4gICAgICBzdGFtcCxcbiAgICAgIHRoaXNBcmcsXG4gICAgICB0aW1lb3V0SWQsXG4gICAgICB0cmFpbGluZ0NhbGwsXG4gICAgICBsYXN0Q2FsbGVkID0gMCxcbiAgICAgIG1heFdhaXQgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gd2FpdCA8IDAgPyAwIDogKCt3YWl0IHx8IDApO1xuICBpZiAob3B0aW9ucyA9PT0gdHJ1ZSkge1xuICAgIHZhciBsZWFkaW5nID0gdHJ1ZTtcbiAgICB0cmFpbGluZyA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heFdhaXQgPSAnbWF4V2FpdCcgaW4gb3B0aW9ucyAmJiBuYXRpdmVNYXgoK29wdGlvbnMubWF4V2FpdCB8fCAwLCB3YWl0KTtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGlmICh0aW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgIH1cbiAgICBpZiAobWF4VGltZW91dElkKSB7XG4gICAgICBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTtcbiAgICB9XG4gICAgbGFzdENhbGxlZCA9IDA7XG4gICAgbWF4VGltZW91dElkID0gdGltZW91dElkID0gdHJhaWxpbmdDYWxsID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tcGxldGUoaXNDYWxsZWQsIGlkKSB7XG4gICAgaWYgKGlkKSB7XG4gICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgIH1cbiAgICBtYXhUaW1lb3V0SWQgPSB0aW1lb3V0SWQgPSB0cmFpbGluZ0NhbGwgPSB1bmRlZmluZWQ7XG4gICAgaWYgKGlzQ2FsbGVkKSB7XG4gICAgICBsYXN0Q2FsbGVkID0gbm93KCk7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0SWQgJiYgIW1heFRpbWVvdXRJZCkge1xuICAgICAgICBhcmdzID0gdGhpc0FyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkZWxheWVkKCkge1xuICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdygpIC0gc3RhbXApO1xuICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XG4gICAgICBjb21wbGV0ZSh0cmFpbGluZ0NhbGwsIG1heFRpbWVvdXRJZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZGVsYXllZCwgcmVtYWluaW5nKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYXhEZWxheWVkKCkge1xuICAgIGNvbXBsZXRlKHRyYWlsaW5nLCB0aW1lb3V0SWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgc3RhbXAgPSBub3coKTtcbiAgICB0aGlzQXJnID0gdGhpcztcbiAgICB0cmFpbGluZ0NhbGwgPSB0cmFpbGluZyAmJiAodGltZW91dElkIHx8ICFsZWFkaW5nKTtcblxuICAgIGlmIChtYXhXYWl0ID09PSBmYWxzZSkge1xuICAgICAgdmFyIGxlYWRpbmdDYWxsID0gbGVhZGluZyAmJiAhdGltZW91dElkO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIW1heFRpbWVvdXRJZCAmJiAhbGVhZGluZykge1xuICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XG4gICAgICB9XG4gICAgICB2YXIgcmVtYWluaW5nID0gbWF4V2FpdCAtIChzdGFtcCAtIGxhc3RDYWxsZWQpLFxuICAgICAgICAgIGlzQ2FsbGVkID0gcmVtYWluaW5nIDw9IDAgfHwgcmVtYWluaW5nID4gbWF4V2FpdDtcblxuICAgICAgaWYgKGlzQ2FsbGVkKSB7XG4gICAgICAgIGlmIChtYXhUaW1lb3V0SWQpIHtcbiAgICAgICAgICBtYXhUaW1lb3V0SWQgPSBjbGVhclRpbWVvdXQobWF4VGltZW91dElkKTtcbiAgICAgICAgfVxuICAgICAgICBsYXN0Q2FsbGVkID0gc3RhbXA7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICghbWF4VGltZW91dElkKSB7XG4gICAgICAgIG1heFRpbWVvdXRJZCA9IHNldFRpbWVvdXQobWF4RGVsYXllZCwgcmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQ2FsbGVkICYmIHRpbWVvdXRJZCkge1xuICAgICAgdGltZW91dElkID0gY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCF0aW1lb3V0SWQgJiYgd2FpdCAhPT0gbWF4V2FpdCkge1xuICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChkZWxheWVkLCB3YWl0KTtcbiAgICB9XG4gICAgaWYgKGxlYWRpbmdDYWxsKSB7XG4gICAgICBpc0NhbGxlZCA9IHRydWU7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICAgIH1cbiAgICBpZiAoaXNDYWxsZWQgJiYgIXRpbWVvdXRJZCAmJiAhbWF4VGltZW91dElkKSB7XG4gICAgICBhcmdzID0gdGhpc0FyZyA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuIiwiLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlXG4gKiBjcmVhdGVkIGZ1bmN0aW9uIGFuZCBhcmd1bWVudHMgZnJvbSBgc3RhcnRgIGFuZCBiZXlvbmQgcHJvdmlkZWQgYXMgYW4gYXJyYXkuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uIHRoZSBbcmVzdCBwYXJhbWV0ZXJdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9GdW5jdGlvbnMvcmVzdF9wYXJhbWV0ZXJzKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhcHBseSBhIHJlc3QgcGFyYW1ldGVyIHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBzYXkgPSBfLnJlc3RQYXJhbShmdW5jdGlvbih3aGF0LCBuYW1lcykge1xuICogICByZXR1cm4gd2hhdCArICcgJyArIF8uaW5pdGlhbChuYW1lcykuam9pbignLCAnKSArXG4gKiAgICAgKF8uc2l6ZShuYW1lcykgPiAxID8gJywgJiAnIDogJycpICsgXy5sYXN0KG5hbWVzKTtcbiAqIH0pO1xuICpcbiAqIHNheSgnaGVsbG8nLCAnZnJlZCcsICdiYXJuZXknLCAncGViYmxlcycpO1xuICogLy8gPT4gJ2hlbGxvIGZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuICovXG5mdW5jdGlvbiByZXN0UGFyYW0oZnVuYywgc3RhcnQpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgc3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQgPT09IHVuZGVmaW5lZCA/IChmdW5jLmxlbmd0aCAtIDEpIDogKCtzdGFydCB8fCAwKSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gc3RhcnQsIDApLFxuICAgICAgICByZXN0ID0gQXJyYXkobGVuZ3RoKTtcblxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICByZXN0W2luZGV4XSA9IGFyZ3Nbc3RhcnQgKyBpbmRleF07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RhcnQpIHtcbiAgICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCByZXN0KTtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmdzWzBdLCByZXN0KTtcbiAgICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmdzWzBdLCBhcmdzWzFdLCByZXN0KTtcbiAgICB9XG4gICAgdmFyIG90aGVyQXJncyA9IEFycmF5KHN0YXJ0ICsgMSk7XG4gICAgaW5kZXggPSAtMTtcbiAgICB3aGlsZSAoKytpbmRleCA8IHN0YXJ0KSB7XG4gICAgICBvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07XG4gICAgfVxuICAgIG90aGVyQXJnc1tzdGFydF0gPSByZXN0O1xuICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIG90aGVyQXJncyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcmVzdFBhcmFtO1xuIiwidmFyIGRlYm91bmNlID0gcmVxdWlyZSgnLi9kZWJvdW5jZScpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpO1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgdGhyb3R0bGVkIGZ1bmN0aW9uIHRoYXQgb25seSBpbnZva2VzIGBmdW5jYCBhdCBtb3N0IG9uY2UgcGVyXG4gKiBldmVyeSBgd2FpdGAgbWlsbGlzZWNvbmRzLiBUaGUgdGhyb3R0bGVkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYFxuICogbWV0aG9kIHRvIGNhbmNlbCBkZWxheWVkIGludm9jYXRpb25zLiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlXG4gKiB0aGF0IGBmdW5jYCBzaG91bGQgYmUgaW52b2tlZCBvbiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGVcbiAqIGB3YWl0YCB0aW1lb3V0LiBTdWJzZXF1ZW50IGNhbGxzIHRvIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gcmV0dXJuIHRoZVxuICogcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBjYWxsLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXMgaW52b2tlZFxuICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgdGhlIHRocm90dGxlZCBmdW5jdGlvbiBpc1xuICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwOi8vZHJ1cGFsbW90aW9uLmNvbS9hcnRpY2xlL2RlYm91bmNlLWFuZC10aHJvdHRsZS12aXN1YWwtZXhwbGFuYXRpb24pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLnRocm90dGxlYCBhbmQgYF8uZGVib3VuY2VgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHRocm90dGxlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIHRocm90dGxlIGludm9jYXRpb25zIHRvLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9dHJ1ZV0gU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZ1xuICogIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdIFNwZWNpZnkgaW52b2tpbmcgb24gdGhlIHRyYWlsaW5nXG4gKiAgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHRocm90dGxlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gYXZvaWQgZXhjZXNzaXZlbHkgdXBkYXRpbmcgdGhlIHBvc2l0aW9uIHdoaWxlIHNjcm9sbGluZ1xuICogalF1ZXJ5KHdpbmRvdykub24oJ3Njcm9sbCcsIF8udGhyb3R0bGUodXBkYXRlUG9zaXRpb24sIDEwMCkpO1xuICpcbiAqIC8vIGludm9rZSBgcmVuZXdUb2tlbmAgd2hlbiB0aGUgY2xpY2sgZXZlbnQgaXMgZmlyZWQsIGJ1dCBub3QgbW9yZSB0aGFuIG9uY2UgZXZlcnkgNSBtaW51dGVzXG4gKiBqUXVlcnkoJy5pbnRlcmFjdGl2ZScpLm9uKCdjbGljaycsIF8udGhyb3R0bGUocmVuZXdUb2tlbiwgMzAwMDAwLCB7XG4gKiAgICd0cmFpbGluZyc6IGZhbHNlXG4gKiB9KSk7XG4gKlxuICogLy8gY2FuY2VsIGEgdHJhaWxpbmcgdGhyb3R0bGVkIGNhbGxcbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIHRocm90dGxlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiB0aHJvdHRsZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsZWFkaW5nID0gdHJ1ZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICBpZiAob3B0aW9ucyA9PT0gZmFsc2UpIHtcbiAgICBsZWFkaW5nID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gJ2xlYWRpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMubGVhZGluZyA6IGxlYWRpbmc7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuICByZXR1cm4gZGVib3VuY2UoZnVuYywgd2FpdCwgeyAnbGVhZGluZyc6IGxlYWRpbmcsICdtYXhXYWl0JzogK3dhaXQsICd0cmFpbGluZyc6IHRyYWlsaW5nIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRocm90dGxlO1xuIiwiLyoqXG4gKiBDb3BpZXMgdGhlIHZhbHVlcyBvZiBgc291cmNlYCB0byBgYXJyYXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBzb3VyY2UgVGhlIGFycmF5IHRvIGNvcHkgdmFsdWVzIGZyb20uXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJyYXk9W11dIFRoZSBhcnJheSB0byBjb3B5IHZhbHVlcyB0by5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyBgYXJyYXlgLlxuICovXG5mdW5jdGlvbiBhcnJheUNvcHkoc291cmNlLCBhcnJheSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHNvdXJjZS5sZW5ndGg7XG5cbiAgYXJyYXkgfHwgKGFycmF5ID0gQXJyYXkobGVuZ3RoKSk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgYXJyYXlbaW5kZXhdID0gc291cmNlW2luZGV4XTtcbiAgfVxuICByZXR1cm4gYXJyYXk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJyYXlDb3B5O1xuIiwiLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uZm9yRWFjaGAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlFYWNoKGFycmF5LCBpdGVyYXRlZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGlmIChpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkgPT09IGZhbHNlKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFycmF5RWFjaDtcbiIsIi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnNvbWVgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBjYWxsYmFja1xuICogc2hvcnRoYW5kcyBhbmQgYHRoaXNgIGJpbmRpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJyYXlTb21lO1xuIiwiLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVXNlZCBieSBgXy50ZW1wbGF0ZWAgdG8gY3VzdG9taXplIGl0cyBgXy5hc3NpZ25gIHVzZS5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBsaWtlIGBhc3NpZ25EZWZhdWx0c2AgZXhjZXB0IHRoYXQgaXQgaWdub3Jlc1xuICogaW5oZXJpdGVkIHByb3BlcnR5IHZhbHVlcyB3aGVuIGNoZWNraW5nIGlmIGEgcHJvcGVydHkgaXMgYHVuZGVmaW5lZGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gb2JqZWN0VmFsdWUgVGhlIGRlc3RpbmF0aW9uIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZS5cbiAqIEBwYXJhbSB7Kn0gc291cmNlVmFsdWUgVGhlIHNvdXJjZSBvYmplY3QgcHJvcGVydHkgdmFsdWUuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgYXNzb2NpYXRlZCB3aXRoIHRoZSBvYmplY3QgYW5kIHNvdXJjZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgdmFsdWUgdG8gYXNzaWduIHRvIHRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbk93bkRlZmF1bHRzKG9iamVjdFZhbHVlLCBzb3VyY2VWYWx1ZSwga2V5LCBvYmplY3QpIHtcbiAgcmV0dXJuIChvYmplY3RWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSlcbiAgICA/IHNvdXJjZVZhbHVlXG4gICAgOiBvYmplY3RWYWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ25Pd25EZWZhdWx0cztcbiIsInZhciBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uYXNzaWduYCBmb3IgY3VzdG9taXppbmcgYXNzaWduZWQgdmFsdWVzIHdpdGhvdXRcbiAqIHN1cHBvcnQgZm9yIGFyZ3VtZW50IGp1Z2dsaW5nLCBtdWx0aXBsZSBzb3VyY2VzLCBhbmQgYHRoaXNgIGJpbmRpbmcgYGN1c3RvbWl6ZXJgXG4gKiBmdW5jdGlvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIGRlc3RpbmF0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgYXNzaWduZWQgdmFsdWVzLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduV2l0aChvYmplY3QsIHNvdXJjZSwgY3VzdG9taXplcikge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHByb3BzID0ga2V5cyhzb3VyY2UpLFxuICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHByb3BzW2luZGV4XSxcbiAgICAgICAgdmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplcih2YWx1ZSwgc291cmNlW2tleV0sIGtleSwgb2JqZWN0LCBzb3VyY2UpO1xuXG4gICAgaWYgKChyZXN1bHQgPT09IHJlc3VsdCA/IChyZXN1bHQgIT09IHZhbHVlKSA6ICh2YWx1ZSA9PT0gdmFsdWUpKSB8fFxuICAgICAgICAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSkge1xuICAgICAgb2JqZWN0W2tleV0gPSByZXN1bHQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXNzaWduV2l0aDtcbiIsInZhciBiYXNlQ29weSA9IHJlcXVpcmUoJy4vYmFzZUNvcHknKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5hc3NpZ25gIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXJndW1lbnQganVnZ2xpbmcsXG4gKiBtdWx0aXBsZSBzb3VyY2VzLCBhbmQgYGN1c3RvbWl6ZXJgIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VBc3NpZ24ob2JqZWN0LCBzb3VyY2UpIHtcbiAgcmV0dXJuIHNvdXJjZSA9PSBudWxsXG4gICAgPyBvYmplY3RcbiAgICA6IGJhc2VDb3B5KHNvdXJjZSwga2V5cyhzb3VyY2UpLCBvYmplY3QpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VBc3NpZ247XG4iLCIvKipcbiAqIENvcGllcyBwcm9wZXJ0aWVzIG9mIGBzb3VyY2VgIHRvIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb20uXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gY29weS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0PXt9XSBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0by5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VDb3B5KHNvdXJjZSwgcHJvcHMsIG9iamVjdCkge1xuICBvYmplY3QgfHwgKG9iamVjdCA9IHt9KTtcblxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgb2JqZWN0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgfVxuICByZXR1cm4gb2JqZWN0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VDb3B5O1xuIiwidmFyIGJhc2VGb3JPd24gPSByZXF1aXJlKCcuL2Jhc2VGb3JPd24nKSxcbiAgICBjcmVhdGVCYXNlRWFjaCA9IHJlcXVpcmUoJy4vY3JlYXRlQmFzZUVhY2gnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5mb3JFYWNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheXxPYmplY3R8c3RyaW5nfSBjb2xsZWN0aW9uIFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl8T2JqZWN0fHN0cmluZ30gUmV0dXJucyBgY29sbGVjdGlvbmAuXG4gKi9cbnZhciBiYXNlRWFjaCA9IGNyZWF0ZUJhc2VFYWNoKGJhc2VGb3JPd24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VFYWNoO1xuIiwidmFyIGNyZWF0ZUJhc2VGb3IgPSByZXF1aXJlKCcuL2NyZWF0ZUJhc2VGb3InKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgYmFzZUZvckluYCBhbmQgYGJhc2VGb3JPd25gIHdoaWNoIGl0ZXJhdGVzXG4gKiBvdmVyIGBvYmplY3RgIHByb3BlcnRpZXMgcmV0dXJuZWQgYnkgYGtleXNGdW5jYCBpbnZva2luZyBgaXRlcmF0ZWVgIGZvclxuICogZWFjaCBwcm9wZXJ0eS4gSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5XG4gKiByZXR1cm5pbmcgYGZhbHNlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlzRnVuYyBUaGUgZnVuY3Rpb24gdG8gZ2V0IHRoZSBrZXlzIG9mIGBvYmplY3RgLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqL1xudmFyIGJhc2VGb3IgPSBjcmVhdGVCYXNlRm9yKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUZvcjtcbiIsInZhciBiYXNlRm9yID0gcmVxdWlyZSgnLi9iYXNlRm9yJyksXG4gICAga2V5c0luID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXNJbicpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZvckluYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBiYXNlRm9ySW4ob2JqZWN0LCBpdGVyYXRlZSkge1xuICByZXR1cm4gYmFzZUZvcihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzSW4pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VGb3JJbjtcbiIsInZhciBiYXNlRm9yID0gcmVxdWlyZSgnLi9iYXNlRm9yJyksXG4gICAga2V5cyA9IHJlcXVpcmUoJy4uL29iamVjdC9rZXlzJyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9yT3duYCB3aXRob3V0IHN1cHBvcnQgZm9yIGNhbGxiYWNrXG4gKiBzaG9ydGhhbmRzIGFuZCBgdGhpc2AgYmluZGluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBiYXNlRm9yT3duKG9iamVjdCwgaXRlcmF0ZWUpIHtcbiAgcmV0dXJuIGJhc2VGb3Iob2JqZWN0LCBpdGVyYXRlZSwga2V5cyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUZvck93bjtcbiIsInZhciBiYXNlSXNFcXVhbERlZXAgPSByZXF1aXJlKCcuL2Jhc2VJc0VxdWFsRGVlcCcpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2l0aG91dCBzdXBwb3J0IGZvciBgdGhpc2AgYmluZGluZ1xuICogYGN1c3RvbWl6ZXJgIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpbmcgdmFsdWVzLlxuICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0JdIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICBpZiAodmFsdWUgPT09IG90aGVyKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKHZhbHVlID09IG51bGwgfHwgb3RoZXIgPT0gbnVsbCB8fCAoIWlzT2JqZWN0KHZhbHVlKSAmJiAhaXNPYmplY3RMaWtlKG90aGVyKSkpIHtcbiAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjtcbiAgfVxuICByZXR1cm4gYmFzZUlzRXF1YWxEZWVwKHZhbHVlLCBvdGhlciwgYmFzZUlzRXF1YWwsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNFcXVhbDtcbiIsInZhciBlcXVhbEFycmF5cyA9IHJlcXVpcmUoJy4vZXF1YWxBcnJheXMnKSxcbiAgICBlcXVhbEJ5VGFnID0gcmVxdWlyZSgnLi9lcXVhbEJ5VGFnJyksXG4gICAgZXF1YWxPYmplY3RzID0gcmVxdWlyZSgnLi9lcXVhbE9iamVjdHMnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc0FycmF5JyksXG4gICAgaXNUeXBlZEFycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc1R5cGVkQXJyYXknKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBvYmplY3RzLlxuICogQHBhcmFtIHtib29sZWFufSBbaXNMb29zZV0gU3BlY2lmeSBwZXJmb3JtaW5nIHBhcnRpYWwgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgb2JqZWN0cy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0I9W11dIFRyYWNrcyB0cmF2ZXJzZWQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIHZhciBvYmpJc0FyciA9IGlzQXJyYXkob2JqZWN0KSxcbiAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG4gICAgICBvYmpUYWcgPSBhcnJheVRhZyxcbiAgICAgIG90aFRhZyA9IGFycmF5VGFnO1xuXG4gIGlmICghb2JqSXNBcnIpIHtcbiAgICBvYmpUYWcgPSBvYmpUb1N0cmluZy5jYWxsKG9iamVjdCk7XG4gICAgaWYgKG9ialRhZyA9PSBhcmdzVGFnKSB7XG4gICAgICBvYmpUYWcgPSBvYmplY3RUYWc7XG4gICAgfSBlbHNlIGlmIChvYmpUYWcgIT0gb2JqZWN0VGFnKSB7XG4gICAgICBvYmpJc0FyciA9IGlzVHlwZWRBcnJheShvYmplY3QpO1xuICAgIH1cbiAgfVxuICBpZiAoIW90aElzQXJyKSB7XG4gICAgb3RoVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvdGhlcik7XG4gICAgaWYgKG90aFRhZyA9PSBhcmdzVGFnKSB7XG4gICAgICBvdGhUYWcgPSBvYmplY3RUYWc7XG4gICAgfSBlbHNlIGlmIChvdGhUYWcgIT0gb2JqZWN0VGFnKSB7XG4gICAgICBvdGhJc0FyciA9IGlzVHlwZWRBcnJheShvdGhlcik7XG4gICAgfVxuICB9XG4gIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcsXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcsXG4gICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG4gIGlmIChpc1NhbWVUYWcgJiYgIShvYmpJc0FyciB8fCBvYmpJc09iaikpIHtcbiAgICByZXR1cm4gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcpO1xuICB9XG4gIGlmICghaXNMb29zZSkge1xuICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcbiAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsIG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlciwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgIH1cbiAgfVxuICBpZiAoIWlzU2FtZVRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIC8vIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGRldGVjdGluZyBjaXJjdWxhciByZWZlcmVuY2VzIHNlZSBodHRwczovL2VzNS5naXRodWIuaW8vI0pPLlxuICBzdGFja0EgfHwgKHN0YWNrQSA9IFtdKTtcbiAgc3RhY2tCIHx8IChzdGFja0IgPSBbXSk7XG5cbiAgdmFyIGxlbmd0aCA9IHN0YWNrQS5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChzdGFja0FbbGVuZ3RoXSA9PSBvYmplY3QpIHtcbiAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXSA9PSBvdGhlcjtcbiAgICB9XG4gIH1cbiAgLy8gQWRkIGBvYmplY3RgIGFuZCBgb3RoZXJgIHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgc3RhY2tBLnB1c2gob2JqZWN0KTtcbiAgc3RhY2tCLnB1c2gob3RoZXIpO1xuXG4gIHZhciByZXN1bHQgPSAob2JqSXNBcnIgPyBlcXVhbEFycmF5cyA6IGVxdWFsT2JqZWN0cykob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG5cbiAgc3RhY2tBLnBvcCgpO1xuICBzdGFja0IucG9wKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNFcXVhbERlZXA7XG4iLCJ2YXIgYXJyYXlFYWNoID0gcmVxdWlyZSgnLi9hcnJheUVhY2gnKSxcbiAgICBiYXNlTWVyZ2VEZWVwID0gcmVxdWlyZSgnLi9iYXNlTWVyZ2VEZWVwJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4uL2xhbmcvaXNBcnJheScpLFxuICAgIGlzQXJyYXlMaWtlID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZScpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyksXG4gICAgaXNUeXBlZEFycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc1R5cGVkQXJyYXknKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXMnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tZXJnZWAgd2l0aG91dCBzdXBwb3J0IGZvciBhcmd1bWVudCBqdWdnbGluZyxcbiAqIG11bHRpcGxlIHNvdXJjZXMsIGFuZCBgdGhpc2AgYmluZGluZyBgY3VzdG9taXplcmAgZnVuY3Rpb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgbWVyZ2VkIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0E9W11dIFRyYWNrcyB0cmF2ZXJzZWQgc291cmNlIG9iamVjdHMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tCPVtdXSBBc3NvY2lhdGVzIHZhbHVlcyB3aXRoIHNvdXJjZSBjb3VudGVycGFydHMuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBiYXNlTWVyZ2Uob2JqZWN0LCBzb3VyY2UsIGN1c3RvbWl6ZXIsIHN0YWNrQSwgc3RhY2tCKSB7XG4gIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cbiAgdmFyIGlzU3JjQXJyID0gaXNBcnJheUxpa2Uoc291cmNlKSAmJiAoaXNBcnJheShzb3VyY2UpIHx8IGlzVHlwZWRBcnJheShzb3VyY2UpKSxcbiAgICAgIHByb3BzID0gaXNTcmNBcnIgPyB1bmRlZmluZWQgOiBrZXlzKHNvdXJjZSk7XG5cbiAgYXJyYXlFYWNoKHByb3BzIHx8IHNvdXJjZSwgZnVuY3Rpb24oc3JjVmFsdWUsIGtleSkge1xuICAgIGlmIChwcm9wcykge1xuICAgICAga2V5ID0gc3JjVmFsdWU7XG4gICAgICBzcmNWYWx1ZSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgICBpZiAoaXNPYmplY3RMaWtlKHNyY1ZhbHVlKSkge1xuICAgICAgc3RhY2tBIHx8IChzdGFja0EgPSBbXSk7XG4gICAgICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcbiAgICAgIGJhc2VNZXJnZURlZXAob2JqZWN0LCBzb3VyY2UsIGtleSwgYmFzZU1lcmdlLCBjdXN0b21pemVyLCBzdGFja0EsIHN0YWNrQik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFyIHZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIodmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpc0NvbW1vbiA9IHJlc3VsdCA9PT0gdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoaXNDb21tb24pIHtcbiAgICAgICAgcmVzdWx0ID0gc3JjVmFsdWU7XG4gICAgICB9XG4gICAgICBpZiAoKHJlc3VsdCAhPT0gdW5kZWZpbmVkIHx8IChpc1NyY0FyciAmJiAhKGtleSBpbiBvYmplY3QpKSkgJiZcbiAgICAgICAgICAoaXNDb21tb24gfHwgKHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlc3VsdCAhPT0gdmFsdWUpIDogKHZhbHVlID09PSB2YWx1ZSkpKSkge1xuICAgICAgICBvYmplY3Rba2V5XSA9IHJlc3VsdDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb2JqZWN0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VNZXJnZTtcbiIsInZhciBhcnJheUNvcHkgPSByZXF1aXJlKCcuL2FycmF5Q29weScpLFxuICAgIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnLi4vbGFuZy9pc0FyZ3VtZW50cycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJyYXknKSxcbiAgICBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2UnKSxcbiAgICBpc1BsYWluT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc1BsYWluT2JqZWN0JyksXG4gICAgaXNUeXBlZEFycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc1R5cGVkQXJyYXknKSxcbiAgICB0b1BsYWluT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy90b1BsYWluT2JqZWN0Jyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlTWVyZ2VgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAqIGRlZXAgbWVyZ2VzIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG4gKiByZWZlcmVuY2VzIHRvIGJlIG1lcmdlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gbWVyZ2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBtZXJnZUZ1bmMgVGhlIGZ1bmN0aW9uIHRvIG1lcmdlIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIG1lcmdlZCB2YWx1ZXMuXG4gKiBAcGFyYW0ge0FycmF5fSBbc3RhY2tBPVtdXSBUcmFja3MgdHJhdmVyc2VkIHNvdXJjZSBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQj1bXV0gQXNzb2NpYXRlcyB2YWx1ZXMgd2l0aCBzb3VyY2UgY291bnRlcnBhcnRzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VNZXJnZURlZXAob2JqZWN0LCBzb3VyY2UsIGtleSwgbWVyZ2VGdW5jLCBjdXN0b21pemVyLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aCxcbiAgICAgIHNyY1ZhbHVlID0gc291cmNlW2tleV07XG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKHN0YWNrQVtsZW5ndGhdID09IHNyY1ZhbHVlKSB7XG4gICAgICBvYmplY3Rba2V5XSA9IHN0YWNrQltsZW5ndGhdO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuICB2YXIgdmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKHZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSkgOiB1bmRlZmluZWQsXG4gICAgICBpc0NvbW1vbiA9IHJlc3VsdCA9PT0gdW5kZWZpbmVkO1xuXG4gIGlmIChpc0NvbW1vbikge1xuICAgIHJlc3VsdCA9IHNyY1ZhbHVlO1xuICAgIGlmIChpc0FycmF5TGlrZShzcmNWYWx1ZSkgJiYgKGlzQXJyYXkoc3JjVmFsdWUpIHx8IGlzVHlwZWRBcnJheShzcmNWYWx1ZSkpKSB7XG4gICAgICByZXN1bHQgPSBpc0FycmF5KHZhbHVlKVxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogKGlzQXJyYXlMaWtlKHZhbHVlKSA/IGFycmF5Q29weSh2YWx1ZSkgOiBbXSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGlzUGxhaW5PYmplY3Qoc3JjVmFsdWUpIHx8IGlzQXJndW1lbnRzKHNyY1ZhbHVlKSkge1xuICAgICAgcmVzdWx0ID0gaXNBcmd1bWVudHModmFsdWUpXG4gICAgICAgID8gdG9QbGFpbk9iamVjdCh2YWx1ZSlcbiAgICAgICAgOiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkgPyB2YWx1ZSA6IHt9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpc0NvbW1vbiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICAvLyBBZGQgdGhlIHNvdXJjZSB2YWx1ZSB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMgYW5kIGFzc29jaWF0ZVxuICAvLyBpdCB3aXRoIGl0cyBtZXJnZWQgdmFsdWUuXG4gIHN0YWNrQS5wdXNoKHNyY1ZhbHVlKTtcbiAgc3RhY2tCLnB1c2gocmVzdWx0KTtcblxuICBpZiAoaXNDb21tb24pIHtcbiAgICAvLyBSZWN1cnNpdmVseSBtZXJnZSBvYmplY3RzIGFuZCBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBvYmplY3Rba2V5XSA9IG1lcmdlRnVuYyhyZXN1bHQsIHNyY1ZhbHVlLCBjdXN0b21pemVyLCBzdGFja0EsIHN0YWNrQik7XG4gIH0gZWxzZSBpZiAocmVzdWx0ID09PSByZXN1bHQgPyAocmVzdWx0ICE9PSB2YWx1ZSkgOiAodmFsdWUgPT09IHZhbHVlKSkge1xuICAgIG9iamVjdFtrZXldID0gcmVzdWx0O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU1lcmdlRGVlcDtcbiIsIi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVByb3BlcnR5O1xuIiwiLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGlmIGl0J3Mgbm90IG9uZS4gQW4gZW1wdHkgc3RyaW5nIGlzIHJldHVybmVkXG4gKiBmb3IgYG51bGxgIG9yIGB1bmRlZmluZWRgIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiAodmFsdWUgKyAnJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVRvU3RyaW5nO1xuIiwiLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy52YWx1ZXNgIGFuZCBgXy52YWx1ZXNJbmAgd2hpY2ggY3JlYXRlcyBhblxuICogYXJyYXkgb2YgYG9iamVjdGAgcHJvcGVydHkgdmFsdWVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3BlcnR5IG5hbWVzXG4gKiBvZiBgcHJvcHNgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fSBwcm9wcyBUaGUgcHJvcGVydHkgbmFtZXMgdG8gZ2V0IHZhbHVlcyBmb3IuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VWYWx1ZXMob2JqZWN0LCBwcm9wcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICByZXN1bHRbaW5kZXhdID0gb2JqZWN0W3Byb3BzW2luZGV4XV07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlVmFsdWVzO1xuIiwidmFyIGlkZW50aXR5ID0gcmVxdWlyZSgnLi4vdXRpbGl0eS9pZGVudGl0eScpO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUNhbGxiYWNrYCB3aGljaCBvbmx5IHN1cHBvcnRzIGB0aGlzYCBiaW5kaW5nXG4gKiBhbmQgc3BlY2lmeWluZyB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYmluZC5cbiAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuICogQHBhcmFtIHtudW1iZXJ9IFthcmdDb3VudF0gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJvdmlkZSB0byBgZnVuY2AuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGNhbGxiYWNrLlxuICovXG5mdW5jdGlvbiBiaW5kQ2FsbGJhY2soZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gaWRlbnRpdHk7XG4gIH1cbiAgaWYgKHRoaXNBcmcgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBmdW5jO1xuICB9XG4gIHN3aXRjaCAoYXJnQ291bnQpIHtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCB2YWx1ZSk7XG4gICAgfTtcbiAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICB9O1xuICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgfTtcbiAgICBjYXNlIDU6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgb3RoZXIsIGtleSwgb2JqZWN0LCBzb3VyY2UpIHtcbiAgICAgIHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgdmFsdWUsIG90aGVyLCBrZXksIG9iamVjdCwgc291cmNlKTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJpbmRDYWxsYmFjaztcbiIsIi8qKlxuICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbUxlZnRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGNoYXJhY3RlclxuICogb2YgYHN0cmluZ2AgdGhhdCBpcyBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hhcnMgVGhlIGNoYXJhY3RlcnMgdG8gZmluZC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBjaGFyYWN0ZXIgbm90IGZvdW5kIGluIGBjaGFyc2AuXG4gKi9cbmZ1bmN0aW9uIGNoYXJzTGVmdEluZGV4KHN0cmluZywgY2hhcnMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIGNoYXJzLmluZGV4T2Yoc3RyaW5nLmNoYXJBdChpbmRleCkpID4gLTEpIHt9XG4gIHJldHVybiBpbmRleDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjaGFyc0xlZnRJbmRleDtcbiIsIi8qKlxuICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbVJpZ2h0YCB0byBnZXQgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGNoYXJhY3RlclxuICogb2YgYHN0cmluZ2AgdGhhdCBpcyBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGluc3BlY3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hhcnMgVGhlIGNoYXJhY3RlcnMgdG8gZmluZC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IGNoYXJhY3RlciBub3QgZm91bmQgaW4gYGNoYXJzYC5cbiAqL1xuZnVuY3Rpb24gY2hhcnNSaWdodEluZGV4KHN0cmluZywgY2hhcnMpIHtcbiAgdmFyIGluZGV4ID0gc3RyaW5nLmxlbmd0aDtcblxuICB3aGlsZSAoaW5kZXgtLSAmJiBjaGFycy5pbmRleE9mKHN0cmluZy5jaGFyQXQoaW5kZXgpKSA+IC0xKSB7fVxuICByZXR1cm4gaW5kZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2hhcnNSaWdodEluZGV4O1xuIiwidmFyIGJpbmRDYWxsYmFjayA9IHJlcXVpcmUoJy4vYmluZENhbGxiYWNrJyksXG4gICAgaXNJdGVyYXRlZUNhbGwgPSByZXF1aXJlKCcuL2lzSXRlcmF0ZWVDYWxsJyksXG4gICAgcmVzdFBhcmFtID0gcmVxdWlyZSgnLi4vZnVuY3Rpb24vcmVzdFBhcmFtJyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGBfLmFzc2lnbmAsIGBfLmRlZmF1bHRzYCwgb3IgYF8ubWVyZ2VgIGZ1bmN0aW9uLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhc3NpZ25lciBUaGUgZnVuY3Rpb24gdG8gYXNzaWduIHZhbHVlcy5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFzc2lnbmVyIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVBc3NpZ25lcihhc3NpZ25lcikge1xuICByZXR1cm4gcmVzdFBhcmFtKGZ1bmN0aW9uKG9iamVjdCwgc291cmNlcykge1xuICAgIHZhciBpbmRleCA9IC0xLFxuICAgICAgICBsZW5ndGggPSBvYmplY3QgPT0gbnVsbCA/IDAgOiBzb3VyY2VzLmxlbmd0aCxcbiAgICAgICAgY3VzdG9taXplciA9IGxlbmd0aCA+IDIgPyBzb3VyY2VzW2xlbmd0aCAtIDJdIDogdW5kZWZpbmVkLFxuICAgICAgICBndWFyZCA9IGxlbmd0aCA+IDIgPyBzb3VyY2VzWzJdIDogdW5kZWZpbmVkLFxuICAgICAgICB0aGlzQXJnID0gbGVuZ3RoID4gMSA/IHNvdXJjZXNbbGVuZ3RoIC0gMV0gOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAodHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY3VzdG9taXplciA9IGJpbmRDYWxsYmFjayhjdXN0b21pemVyLCB0aGlzQXJnLCA1KTtcbiAgICAgIGxlbmd0aCAtPSAyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXN0b21pemVyID0gdHlwZW9mIHRoaXNBcmcgPT0gJ2Z1bmN0aW9uJyA/IHRoaXNBcmcgOiB1bmRlZmluZWQ7XG4gICAgICBsZW5ndGggLT0gKGN1c3RvbWl6ZXIgPyAxIDogMCk7XG4gICAgfVxuICAgIGlmIChndWFyZCAmJiBpc0l0ZXJhdGVlQ2FsbChzb3VyY2VzWzBdLCBzb3VyY2VzWzFdLCBndWFyZCkpIHtcbiAgICAgIGN1c3RvbWl6ZXIgPSBsZW5ndGggPCAzID8gdW5kZWZpbmVkIDogY3VzdG9taXplcjtcbiAgICAgIGxlbmd0aCA9IDE7XG4gICAgfVxuICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICB2YXIgc291cmNlID0gc291cmNlc1tpbmRleF07XG4gICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgIGFzc2lnbmVyKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQXNzaWduZXI7XG4iLCJ2YXIgZ2V0TGVuZ3RoID0gcmVxdWlyZSgnLi9nZXRMZW5ndGgnKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKSxcbiAgICB0b09iamVjdCA9IHJlcXVpcmUoJy4vdG9PYmplY3QnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgYGJhc2VFYWNoYCBvciBgYmFzZUVhY2hSaWdodGAgZnVuY3Rpb24uXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYSBjb2xsZWN0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBjcmVhdGVCYXNlRWFjaChlYWNoRnVuYywgZnJvbVJpZ2h0KSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSkge1xuICAgIHZhciBsZW5ndGggPSBjb2xsZWN0aW9uID8gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pIDogMDtcbiAgICBpZiAoIWlzTGVuZ3RoKGxlbmd0aCkpIHtcbiAgICAgIHJldHVybiBlYWNoRnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSk7XG4gICAgfVxuICAgIHZhciBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xLFxuICAgICAgICBpdGVyYWJsZSA9IHRvT2JqZWN0KGNvbGxlY3Rpb24pO1xuXG4gICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgIGlmIChpdGVyYXRlZShpdGVyYWJsZVtpbmRleF0sIGluZGV4LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjcmVhdGVCYXNlRWFjaDtcbiIsInZhciB0b09iamVjdCA9IHJlcXVpcmUoJy4vdG9PYmplY3QnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgYmFzZSBmdW5jdGlvbiBmb3IgYF8uZm9ySW5gIG9yIGBfLmZvckluUmlnaHRgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGJhc2UgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJhc2VGb3IoZnJvbVJpZ2h0KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QsIGl0ZXJhdGVlLCBrZXlzRnVuYykge1xuICAgIHZhciBpdGVyYWJsZSA9IHRvT2JqZWN0KG9iamVjdCksXG4gICAgICAgIHByb3BzID0ga2V5c0Z1bmMob2JqZWN0KSxcbiAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoLFxuICAgICAgICBpbmRleCA9IGZyb21SaWdodCA/IGxlbmd0aCA6IC0xO1xuXG4gICAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgICBpZiAoaXRlcmF0ZWUoaXRlcmFibGVba2V5XSwga2V5LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqZWN0O1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyZWF0ZUJhc2VGb3I7XG4iLCJ2YXIgYmluZENhbGxiYWNrID0gcmVxdWlyZSgnLi9iaW5kQ2FsbGJhY2snKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi4vbGFuZy9pc0FycmF5Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIGZvciBgXy5mb3JFYWNoYCBvciBgXy5mb3JFYWNoUmlnaHRgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhcnJheUZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGl0ZXJhdGUgb3ZlciBhbiBhcnJheS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVhY2hGdW5jIFRoZSBmdW5jdGlvbiB0byBpdGVyYXRlIG92ZXIgYSBjb2xsZWN0aW9uLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZWFjaCBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlRm9yRWFjaChhcnJheUZ1bmMsIGVhY2hGdW5jKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xsZWN0aW9uLCBpdGVyYXRlZSwgdGhpc0FyZykge1xuICAgIHJldHVybiAodHlwZW9mIGl0ZXJhdGVlID09ICdmdW5jdGlvbicgJiYgdGhpc0FyZyA9PT0gdW5kZWZpbmVkICYmIGlzQXJyYXkoY29sbGVjdGlvbikpXG4gICAgICA/IGFycmF5RnVuYyhjb2xsZWN0aW9uLCBpdGVyYXRlZSlcbiAgICAgIDogZWFjaEZ1bmMoY29sbGVjdGlvbiwgYmluZENhbGxiYWNrKGl0ZXJhdGVlLCB0aGlzQXJnLCAzKSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlRm9yRWFjaDtcbiIsInZhciBhcnJheVNvbWUgPSByZXF1aXJlKCcuL2FycmF5U29tZScpO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fSBvdGhlciBUaGUgb3RoZXIgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyBhcnJheXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cbiAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc0xvb3NlICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF0sXG4gICAgICAgIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKGlzTG9vc2UgPyBvdGhWYWx1ZSA6IGFyclZhbHVlLCBpc0xvb3NlID8gYXJyVmFsdWUgOiBvdGhWYWx1ZSwgaW5kZXgpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmIChpc0xvb3NlKSB7XG4gICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuICAgICAgICAgIH0pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCEoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXF1YWxBcnJheXM7XG4iLCIvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJztcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG4gKiB0aGUgc2FtZSBgdG9TdHJpbmdUYWdgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2ZcbiAqIGBCb29sZWFuYCwgYERhdGVgLCBgRXJyb3JgLCBgTnVtYmVyYCwgYFJlZ0V4cGAsIG9yIGBTdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcpIHtcbiAgc3dpdGNoICh0YWcpIHtcbiAgICBjYXNlIGJvb2xUYWc6XG4gICAgY2FzZSBkYXRlVGFnOlxuICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kIGJvb2xlYW5zXG4gICAgICAvLyB0byBgMWAgb3IgYDBgIHRyZWF0aW5nIGludmFsaWQgZGF0ZXMgY29lcmNlZCB0byBgTmFOYCBhcyBub3QgZXF1YWwuXG4gICAgICByZXR1cm4gK29iamVjdCA9PSArb3RoZXI7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblxuICAgIGNhc2UgbnVtYmVyVGFnOlxuICAgICAgLy8gVHJlYXQgYE5hTmAgdnMuIGBOYU5gIGFzIGVxdWFsLlxuICAgICAgcmV0dXJuIChvYmplY3QgIT0gK29iamVjdClcbiAgICAgICAgPyBvdGhlciAhPSArb3RoZXJcbiAgICAgICAgOiBvYmplY3QgPT0gK290aGVyO1xuXG4gICAgY2FzZSByZWdleHBUYWc6XG4gICAgY2FzZSBzdHJpbmdUYWc6XG4gICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzIHByaW1pdGl2ZXMgYW5kIHN0cmluZ1xuICAgICAgLy8gb2JqZWN0cyBhcyBlcXVhbC4gU2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jeDE1LjEwLjYuNCBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVxdWFsQnlUYWc7XG4iLCJ2YXIga2V5cyA9IHJlcXVpcmUoJy4uL29iamVjdC9rZXlzJyk7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3Igb2JqZWN0cyB3aXRoIHN1cHBvcnQgZm9yXG4gKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmluZyB2YWx1ZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtpc0xvb3NlXSBTcGVjaWZ5IHBlcmZvcm1pbmcgcGFydGlhbCBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7QXJyYXl9IFtzdGFja0FdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBvYmplY3RzLlxuICogQHBhcmFtIHtBcnJheX0gW3N0YWNrQl0gVHJhY2tzIHRyYXZlcnNlZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgdmFyIG9ialByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcbiAgICAgIG90aExlbmd0aCA9IG90aFByb3BzLmxlbmd0aDtcblxuICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNMb29zZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG4gIHdoaWxlIChpbmRleC0tKSB7XG4gICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICBpZiAoIShpc0xvb3NlID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwga2V5KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgdmFyIHNraXBDdG9yID0gaXNMb29zZTtcbiAgd2hpbGUgKCsraW5kZXggPCBvYmpMZW5ndGgpIHtcbiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJba2V5XSxcbiAgICAgICAgcmVzdWx0ID0gY3VzdG9taXplciA/IGN1c3RvbWl6ZXIoaXNMb29zZSA/IG90aFZhbHVlIDogb2JqVmFsdWUsIGlzTG9vc2U/IG9ialZhbHVlIDogb3RoVmFsdWUsIGtleSkgOiB1bmRlZmluZWQ7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZCA/IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKSA6IHJlc3VsdCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09ICdjb25zdHJ1Y3RvcicpO1xuICB9XG4gIGlmICghc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG4gICAgaWYgKG9iakN0b3IgIT0gb3RoQ3RvciAmJlxuICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcbiAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXF1YWxPYmplY3RzO1xuIiwiLyoqIFVzZWQgdG8gbWFwIGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy4gKi9cbnZhciBodG1sRXNjYXBlcyA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjMzk7JyxcbiAgJ2AnOiAnJiM5NjsnXG59O1xuXG4vKipcbiAqIFVzZWQgYnkgYF8uZXNjYXBlYCB0byBjb252ZXJ0IGNoYXJhY3RlcnMgdG8gSFRNTCBlbnRpdGllcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGNociBUaGUgbWF0Y2hlZCBjaGFyYWN0ZXIgdG8gZXNjYXBlLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgZXNjYXBlZCBjaGFyYWN0ZXIuXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZUh0bWxDaGFyKGNocikge1xuICByZXR1cm4gaHRtbEVzY2FwZXNbY2hyXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGVIdG1sQ2hhcjtcbiIsIi8qKiBVc2VkIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzLiAqL1xudmFyIHN0cmluZ0VzY2FwZXMgPSB7XG4gICdcXFxcJzogJ1xcXFwnLFxuICBcIidcIjogXCInXCIsXG4gICdcXG4nOiAnbicsXG4gICdcXHInOiAncicsXG4gICdcXHUyMDI4JzogJ3UyMDI4JyxcbiAgJ1xcdTIwMjknOiAndTIwMjknXG59O1xuXG4vKipcbiAqIFVzZWQgYnkgYF8udGVtcGxhdGVgIHRvIGVzY2FwZSBjaGFyYWN0ZXJzIGZvciBpbmNsdXNpb24gaW4gY29tcGlsZWQgc3RyaW5nIGxpdGVyYWxzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gY2hyIFRoZSBtYXRjaGVkIGNoYXJhY3RlciB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIGNoYXJhY3Rlci5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlU3RyaW5nQ2hhcihjaHIpIHtcbiAgcmV0dXJuICdcXFxcJyArIHN0cmluZ0VzY2FwZXNbY2hyXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGVTdHJpbmdDaGFyO1xuIiwidmFyIGJhc2VQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vYmFzZVByb3BlcnR5Jyk7XG5cbi8qKlxuICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGF2b2lkIGEgW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpXG4gKiB0aGF0IGFmZmVjdHMgU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cbiAqL1xudmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TGVuZ3RoO1xuIiwidmFyIGlzTmF0aXZlID0gcmVxdWlyZSgnLi4vbGFuZy9pc05hdGl2ZScpO1xuXG4vKipcbiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgcmV0dXJuIGlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE5hdGl2ZTtcbiIsInZhciBnZXRMZW5ndGggPSByZXF1aXJlKCcuL2dldExlbmd0aCcpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5TGlrZTtcbiIsIi8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbnZhciByZUlzVWludCA9IC9eXFxkKyQvO1xuXG4vKipcbiAqIFVzZWQgYXMgdGhlIFttYXhpbXVtIGxlbmd0aF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtbnVtYmVyLm1heF9zYWZlX2ludGVnZXIpXG4gKiBvZiBhbiBhcnJheS1saWtlIHZhbHVlLlxuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGluZGV4LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG4gIHZhbHVlID0gKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgPyArdmFsdWUgOiAtMTtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0luZGV4O1xuIiwidmFyIGlzQXJyYXlMaWtlID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZScpLFxuICAgIGlzSW5kZXggPSByZXF1aXJlKCcuL2lzSW5kZXgnKSxcbiAgICBpc09iamVjdCA9IHJlcXVpcmUoJy4uL2xhbmcvaXNPYmplY3QnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHByb3ZpZGVkIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgdmFsdWUgYXJndW1lbnQuXG4gKiBAcGFyYW0geyp9IGluZGV4IFRoZSBwb3RlbnRpYWwgaXRlcmF0ZWUgaW5kZXggb3Iga2V5IGFyZ3VtZW50LlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIHBvdGVudGlhbCBpdGVyYXRlZSBvYmplY3QgYXJndW1lbnQuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFyZ3VtZW50cyBhcmUgZnJvbSBhbiBpdGVyYXRlZSBjYWxsLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSXRlcmF0ZWVDYWxsKHZhbHVlLCBpbmRleCwgb2JqZWN0KSB7XG4gIGlmICghaXNPYmplY3Qob2JqZWN0KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdHlwZSA9IHR5cGVvZiBpbmRleDtcbiAgaWYgKHR5cGUgPT0gJ251bWJlcidcbiAgICAgID8gKGlzQXJyYXlMaWtlKG9iamVjdCkgJiYgaXNJbmRleChpbmRleCwgb2JqZWN0Lmxlbmd0aCkpXG4gICAgICA6ICh0eXBlID09ICdzdHJpbmcnICYmIGluZGV4IGluIG9iamVjdCkpIHtcbiAgICB2YXIgb3RoZXIgPSBvYmplY3RbaW5kZXhdO1xuICAgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyAodmFsdWUgPT09IG90aGVyKSA6IChvdGhlciAhPT0gb3RoZXIpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0l0ZXJhdGVlQ2FsbDtcbiIsIi8qKlxuICogVXNlZCBhcyB0aGUgW21heGltdW0gbGVuZ3RoXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1udW1iZXIubWF4X3NhZmVfaW50ZWdlcilcbiAqIG9mIGFuIGFycmF5LWxpa2UgdmFsdWUuXG4gKi9cbnZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgbGVuZ3RoLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIFtgVG9MZW5ndGhgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b2xlbmd0aCkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDw9IE1BWF9TQUZFX0lOVEVHRVI7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNMZW5ndGg7XG4iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3RMaWtlO1xuIiwiLyoqXG4gKiBVc2VkIGJ5IGB0cmltbWVkTGVmdEluZGV4YCBhbmQgYHRyaW1tZWRSaWdodEluZGV4YCB0byBkZXRlcm1pbmUgaWYgYVxuICogY2hhcmFjdGVyIGNvZGUgaXMgd2hpdGVzcGFjZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IGNoYXJDb2RlIFRoZSBjaGFyYWN0ZXIgY29kZSB0byBpbnNwZWN0LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBjaGFyQ29kZWAgaXMgd2hpdGVzcGFjZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc1NwYWNlKGNoYXJDb2RlKSB7XG4gIHJldHVybiAoKGNoYXJDb2RlIDw9IDE2MCAmJiAoY2hhckNvZGUgPj0gOSAmJiBjaGFyQ29kZSA8PSAxMykgfHwgY2hhckNvZGUgPT0gMzIgfHwgY2hhckNvZGUgPT0gMTYwKSB8fCBjaGFyQ29kZSA9PSA1NzYwIHx8IGNoYXJDb2RlID09IDYxNTggfHxcbiAgICAoY2hhckNvZGUgPj0gODE5MiAmJiAoY2hhckNvZGUgPD0gODIwMiB8fCBjaGFyQ29kZSA9PSA4MjMyIHx8IGNoYXJDb2RlID09IDgyMzMgfHwgY2hhckNvZGUgPT0gODIzOSB8fCBjaGFyQ29kZSA9PSA4Mjg3IHx8IGNoYXJDb2RlID09IDEyMjg4IHx8IGNoYXJDb2RlID09IDY1Mjc5KSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3BhY2U7XG4iLCIvKiogVXNlZCB0byBtYXRjaCB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLiAqL1xudmFyIHJlRXNjYXBlID0gLzwlLShbXFxzXFxTXSs/KSU+L2c7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVFc2NhcGU7XG4iLCIvKiogVXNlZCB0byBtYXRjaCB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLiAqL1xudmFyIHJlRXZhbHVhdGUgPSAvPCUoW1xcc1xcU10rPyklPi9nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlRXZhbHVhdGU7XG4iLCIvKiogVXNlZCB0byBtYXRjaCB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLiAqL1xudmFyIHJlSW50ZXJwb2xhdGUgPSAvPCU9KFtcXHNcXFNdKz8pJT4vZztcblxubW9kdWxlLmV4cG9ydHMgPSByZUludGVycG9sYXRlO1xuIiwidmFyIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnLi4vbGFuZy9pc0FyZ3VtZW50cycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJyYXknKSxcbiAgICBpc0luZGV4ID0gcmVxdWlyZSgnLi9pc0luZGV4JyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyksXG4gICAga2V5c0luID0gcmVxdWlyZSgnLi4vb2JqZWN0L2tleXNJbicpO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBBIGZhbGxiYWNrIGltcGxlbWVudGF0aW9uIG9mIGBPYmplY3Qua2V5c2Agd2hpY2ggY3JlYXRlcyBhbiBhcnJheSBvZiB0aGVcbiAqIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBzaGltS2V5cyhvYmplY3QpIHtcbiAgdmFyIHByb3BzID0ga2V5c0luKG9iamVjdCksXG4gICAgICBwcm9wc0xlbmd0aCA9IHByb3BzLmxlbmd0aCxcbiAgICAgIGxlbmd0aCA9IHByb3BzTGVuZ3RoICYmIG9iamVjdC5sZW5ndGg7XG5cbiAgdmFyIGFsbG93SW5kZXhlcyA9ICEhbGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiZcbiAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xuXG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gW107XG5cbiAgd2hpbGUgKCsraW5kZXggPCBwcm9wc0xlbmd0aCkge1xuICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF07XG4gICAgaWYgKChhbGxvd0luZGV4ZXMgJiYgaXNJbmRleChrZXksIGxlbmd0aCkpIHx8IGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNoaW1LZXlzO1xuIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gb2JqZWN0IGlmIGl0J3Mgbm90IG9uZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gdG9PYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0KHZhbHVlKSA/IHZhbHVlIDogT2JqZWN0KHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b09iamVjdDtcbiIsInZhciBpc1NwYWNlID0gcmVxdWlyZSgnLi9pc1NwYWNlJyk7XG5cbi8qKlxuICogVXNlZCBieSBgXy50cmltYCBhbmQgYF8udHJpbUxlZnRgIHRvIGdldCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IG5vbi13aGl0ZXNwYWNlXG4gKiBjaGFyYWN0ZXIgb2YgYHN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBpbnNwZWN0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAqL1xuZnVuY3Rpb24gdHJpbW1lZExlZnRJbmRleChzdHJpbmcpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoICYmIGlzU3BhY2Uoc3RyaW5nLmNoYXJDb2RlQXQoaW5kZXgpKSkge31cbiAgcmV0dXJuIGluZGV4O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRyaW1tZWRMZWZ0SW5kZXg7XG4iLCJ2YXIgaXNTcGFjZSA9IHJlcXVpcmUoJy4vaXNTcGFjZScpO1xuXG4vKipcbiAqIFVzZWQgYnkgYF8udHJpbWAgYW5kIGBfLnRyaW1SaWdodGAgdG8gZ2V0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBub24td2hpdGVzcGFjZVxuICogY2hhcmFjdGVyIG9mIGBzdHJpbmdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBsYXN0IG5vbi13aGl0ZXNwYWNlIGNoYXJhY3Rlci5cbiAqL1xuZnVuY3Rpb24gdHJpbW1lZFJpZ2h0SW5kZXgoc3RyaW5nKSB7XG4gIHZhciBpbmRleCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgd2hpbGUgKGluZGV4LS0gJiYgaXNTcGFjZShzdHJpbmcuY2hhckNvZGVBdChpbmRleCkpKSB7fVxuICByZXR1cm4gaW5kZXg7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdHJpbW1lZFJpZ2h0SW5kZXg7XG4iLCJ2YXIgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc0FycmF5TGlrZScpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBwcm9wZXJ0eUlzRW51bWVyYWJsZSA9IG9iamVjdFByb3RvLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKSAmJlxuICAgIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJiAhcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJndW1lbnRzO1xuIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2dldE5hdGl2ZScpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNMZW5ndGgnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qIE5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlSXNBcnJheSA9IGdldE5hdGl2ZShBcnJheSwgJ2lzQXJyYXknKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG52YXIgaXNBcnJheSA9IG5hdGl2ZUlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcnJheVRhZztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcnJheTtcbiIsInZhciBiYXNlSXNFcXVhbCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VJc0VxdWFsJyksXG4gICAgYmluZENhbGxiYWNrID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmluZENhbGxiYWNrJyk7XG5cbi8qKlxuICogUGVyZm9ybXMgYSBkZWVwIGNvbXBhcmlzb24gYmV0d2VlbiB0d28gdmFsdWVzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZVxuICogZXF1aXZhbGVudC4gSWYgYGN1c3RvbWl6ZXJgIGlzIHByb3ZpZGVkIGl0J3MgaW52b2tlZCB0byBjb21wYXJlIHZhbHVlcy5cbiAqIElmIGBjdXN0b21pemVyYCByZXR1cm5zIGB1bmRlZmluZWRgIGNvbXBhcmlzb25zIGFyZSBoYW5kbGVkIGJ5IHRoZSBtZXRob2RcbiAqIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggdXAgdG9cbiAqIHRocmVlIGFyZ3VtZW50czogKHZhbHVlLCBvdGhlciBbLCBpbmRleHxrZXldKS5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2Qgc3VwcG9ydHMgY29tcGFyaW5nIGFycmF5cywgYm9vbGVhbnMsIGBEYXRlYCBvYmplY3RzLFxuICogbnVtYmVycywgYE9iamVjdGAgb2JqZWN0cywgcmVnZXhlcywgYW5kIHN0cmluZ3MuIE9iamVjdHMgYXJlIGNvbXBhcmVkIGJ5XG4gKiB0aGVpciBvd24sIG5vdCBpbmhlcml0ZWQsIGVudW1lcmFibGUgcHJvcGVydGllcy4gRnVuY3Rpb25zIGFuZCBET00gbm9kZXNcbiAqIGFyZSAqKm5vdCoqIHN1cHBvcnRlZC4gUHJvdmlkZSBhIGN1c3RvbWl6ZXIgZnVuY3Rpb24gdG8gZXh0ZW5kIHN1cHBvcnRcbiAqIGZvciBjb21wYXJpbmcgb3RoZXIgdmFsdWVzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAYWxpYXMgZXFcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIHZhbHVlIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHsqfSBbdGhpc0FyZ10gVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBjdXN0b21pemVyYC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKiB2YXIgb3RoZXIgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogb2JqZWN0ID09IG90aGVyO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzRXF1YWwob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gKiB2YXIgYXJyYXkgPSBbJ2hlbGxvJywgJ2dvb2RieWUnXTtcbiAqIHZhciBvdGhlciA9IFsnaGknLCAnZ29vZGJ5ZSddO1xuICpcbiAqIF8uaXNFcXVhbChhcnJheSwgb3RoZXIsIGZ1bmN0aW9uKHZhbHVlLCBvdGhlcikge1xuICogICBpZiAoXy5ldmVyeShbdmFsdWUsIG90aGVyXSwgUmVnRXhwLnByb3RvdHlwZS50ZXN0LCAvXmgoPzppfGVsbG8pJC8pKSB7XG4gKiAgICAgcmV0dXJuIHRydWU7XG4gKiAgIH1cbiAqIH0pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgdGhpc0FyZykge1xuICBjdXN0b21pemVyID0gdHlwZW9mIGN1c3RvbWl6ZXIgPT0gJ2Z1bmN0aW9uJyA/IGJpbmRDYWxsYmFjayhjdXN0b21pemVyLCB0aGlzQXJnLCAzKSA6IHVuZGVmaW5lZDtcbiAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIgPyBjdXN0b21pemVyKHZhbHVlLCBvdGhlcikgOiB1bmRlZmluZWQ7XG4gIHJldHVybiAgcmVzdWx0ID09PSB1bmRlZmluZWQgPyBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIpIDogISFyZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNFcXVhbDtcbiIsInZhciBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYW4gYEVycm9yYCwgYEV2YWxFcnJvcmAsIGBSYW5nZUVycm9yYCwgYFJlZmVyZW5jZUVycm9yYCxcbiAqIGBTeW50YXhFcnJvcmAsIGBUeXBlRXJyb3JgLCBvciBgVVJJRXJyb3JgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gZXJyb3Igb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNFcnJvcihuZXcgRXJyb3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNFcnJvcihFcnJvcik7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Vycm9yKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIHR5cGVvZiB2YWx1ZS5tZXNzYWdlID09ICdzdHJpbmcnICYmIG9ialRvU3RyaW5nLmNhbGwodmFsdWUpID09IGVycm9yVGFnO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzRXJyb3I7XG4iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0Jyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBGdW5jdGlvbmAgb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpIHdoaWNoIHJldHVybiAnZnVuY3Rpb24nIGZvciByZWdleGVzXG4gIC8vIGFuZCBTYWZhcmkgOCB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBjb25zdHJ1Y3RvcnMuXG4gIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gZnVuY1RhZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0Z1bmN0aW9uO1xuIiwidmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCcuL2lzRnVuY3Rpb24nKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc09iamVjdExpa2UnKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkgPiA1KS4gKi9cbnZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZuVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmblRvU3RyaW5nLmNhbGwoaGFzT3duUHJvcGVydHkpLnJlcGxhY2UoL1tcXFxcXiQuKis/KClbXFxde318XS9nLCAnXFxcXCQmJylcbiAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG4pO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIG5hdGl2ZSBmdW5jdGlvbiwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTmF0aXZlKEFycmF5LnByb3RvdHlwZS5wdXNoKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTmF0aXZlKF8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGlzRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgcmV0dXJuIHJlSXNOYXRpdmUudGVzdChmblRvU3RyaW5nLmNhbGwodmFsdWUpKTtcbiAgfVxuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiByZUlzSG9zdEN0b3IudGVzdCh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNOYXRpdmU7XG4iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZSBbbGFuZ3VhZ2UgdHlwZV0oaHR0cHM6Ly9lczUuZ2l0aHViLmlvLyN4OCkgb2YgYE9iamVjdGAuXG4gKiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3Qoe30pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgLy8gU2VlIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvdjgvaXNzdWVzL2RldGFpbD9pZD0yMjkxIGZvciBtb3JlIGRldGFpbHMuXG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzT2JqZWN0O1xuIiwidmFyIGJhc2VGb3JJbiA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VGb3JJbicpLFxuICAgIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnLi9pc0FyZ3VtZW50cycpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8qKiBVc2VkIGZvciBuYXRpdmUgbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmpUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCB0aGF0IGlzLCBhbiBvYmplY3QgY3JlYXRlZCBieSB0aGVcbiAqIGBPYmplY3RgIGNvbnN0cnVjdG9yIG9yIG9uZSB3aXRoIGEgYFtbUHJvdG90eXBlXV1gIG9mIGBudWxsYC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgYXNzdW1lcyBvYmplY3RzIGNyZWF0ZWQgYnkgdGhlIGBPYmplY3RgIGNvbnN0cnVjdG9yXG4gKiBoYXZlIG5vIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcGxhaW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqIH1cbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QobmV3IEZvbyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNQbGFpbk9iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoeyAneCc6IDAsICd5JzogMCB9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzUGxhaW5PYmplY3QoT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gKiAvLyA9PiB0cnVlXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgdmFyIEN0b3I7XG5cbiAgLy8gRXhpdCBlYXJseSBmb3Igbm9uIGBPYmplY3RgIG9iamVjdHMuXG4gIGlmICghKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gb2JqZWN0VGFnICYmICFpc0FyZ3VtZW50cyh2YWx1ZSkpIHx8XG4gICAgICAoIWhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjb25zdHJ1Y3RvcicpICYmIChDdG9yID0gdmFsdWUuY29uc3RydWN0b3IsIHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgIShDdG9yIGluc3RhbmNlb2YgQ3RvcikpKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBJRSA8IDkgaXRlcmF0ZXMgaW5oZXJpdGVkIHByb3BlcnRpZXMgYmVmb3JlIG93biBwcm9wZXJ0aWVzLiBJZiB0aGUgZmlyc3RcbiAgLy8gaXRlcmF0ZWQgcHJvcGVydHkgaXMgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnR5IHRoZW4gdGhlcmUgYXJlIG5vIGluaGVyaXRlZFxuICAvLyBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gIHZhciByZXN1bHQ7XG4gIC8vIEluIG1vc3QgZW52aXJvbm1lbnRzIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzIGFyZSBpdGVyYXRlZCBiZWZvcmVcbiAgLy8gaXRzIGluaGVyaXRlZCBwcm9wZXJ0aWVzLiBJZiB0aGUgbGFzdCBpdGVyYXRlZCBwcm9wZXJ0eSBpcyBhbiBvYmplY3Qnc1xuICAvLyBvd24gcHJvcGVydHkgdGhlbiB0aGVyZSBhcmUgbm8gaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydGllcy5cbiAgYmFzZUZvckluKHZhbHVlLCBmdW5jdGlvbihzdWJWYWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0ID0ga2V5O1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdCA9PT0gdW5kZWZpbmVkIHx8IGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIHJlc3VsdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNQbGFpbk9iamVjdDtcbiIsInZhciBpc0xlbmd0aCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzTGVuZ3RoJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG4gICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcbiAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG4gICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG4gICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG4gICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG4gICAgd2Vha01hcFRhZyA9ICdbb2JqZWN0IFdlYWtNYXBdJztcblxudmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcbiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxuLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xudmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG50eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbnR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cbnR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cbnR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID0gdHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID1cbnR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID0gdHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9XG50eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID0gdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID0gdHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID0gdHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxuLyoqIFVzZWQgZm9yIG5hdGl2ZSBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZSBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9ialRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkoW10pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmpUb1N0cmluZy5jYWxsKHZhbHVlKV07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNUeXBlZEFycmF5O1xuIiwidmFyIGJhc2VDb3B5ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZUNvcHknKSxcbiAgICBrZXlzSW4gPSByZXF1aXJlKCcuLi9vYmplY3Qva2V5c0luJyk7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIHBsYWluIG9iamVjdCBmbGF0dGVuaW5nIGluaGVyaXRlZCBlbnVtZXJhYmxlXG4gKiBwcm9wZXJ0aWVzIG9mIGB2YWx1ZWAgdG8gb3duIHByb3BlcnRpZXMgb2YgdGhlIHBsYWluIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgcGxhaW4gb2JqZWN0LlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmFzc2lnbih7ICdhJzogMSB9LCBuZXcgRm9vKTtcbiAqIC8vID0+IHsgJ2EnOiAxLCAnYic6IDIgfVxuICpcbiAqIF8uYXNzaWduKHsgJ2EnOiAxIH0sIF8udG9QbGFpbk9iamVjdChuZXcgRm9vKSk7XG4gKiAvLyA9PiB7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDMgfVxuICovXG5mdW5jdGlvbiB0b1BsYWluT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiBiYXNlQ29weSh2YWx1ZSwga2V5c0luKHZhbHVlKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9QbGFpbk9iamVjdDtcbiIsInZhciBhc3NpZ25XaXRoID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYXNzaWduV2l0aCcpLFxuICAgIGJhc2VBc3NpZ24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlQXNzaWduJyksXG4gICAgY3JlYXRlQXNzaWduZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9jcmVhdGVBc3NpZ25lcicpO1xuXG4vKipcbiAqIEFzc2lnbnMgb3duIGVudW1lcmFibGUgcHJvcGVydGllcyBvZiBzb3VyY2Ugb2JqZWN0KHMpIHRvIHRoZSBkZXN0aW5hdGlvblxuICogb2JqZWN0LiBTdWJzZXF1ZW50IHNvdXJjZXMgb3ZlcndyaXRlIHByb3BlcnR5IGFzc2lnbm1lbnRzIG9mIHByZXZpb3VzIHNvdXJjZXMuXG4gKiBJZiBgY3VzdG9taXplcmAgaXMgcHJvdmlkZWQgaXQncyBpbnZva2VkIHRvIHByb2R1Y2UgdGhlIGFzc2lnbmVkIHZhbHVlcy5cbiAqIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkIHdpdGggZml2ZSBhcmd1bWVudHM6XG4gKiAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKS5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgbXV0YXRlcyBgb2JqZWN0YCBhbmQgaXMgYmFzZWQgb25cbiAqIFtgT2JqZWN0LmFzc2lnbmBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5hc3NpZ24pLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAYWxpYXMgZXh0ZW5kXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBkZXN0aW5hdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gW3NvdXJjZXNdIFRoZSBzb3VyY2Ugb2JqZWN0cy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGFzc2lnbmVkIHZhbHVlcy5cbiAqIEBwYXJhbSB7Kn0gW3RoaXNBcmddIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgY3VzdG9taXplcmAuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmFzc2lnbih7ICd1c2VyJzogJ2Jhcm5leScgfSwgeyAnYWdlJzogNDAgfSwgeyAndXNlcic6ICdmcmVkJyB9KTtcbiAqIC8vID0+IHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9XG4gKlxuICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gKiB2YXIgZGVmYXVsdHMgPSBfLnBhcnRpYWxSaWdodChfLmFzc2lnbiwgZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gKiAgIHJldHVybiBfLmlzVW5kZWZpbmVkKHZhbHVlKSA/IG90aGVyIDogdmFsdWU7XG4gKiB9KTtcbiAqXG4gKiBkZWZhdWx0cyh7ICd1c2VyJzogJ2Jhcm5leScgfSwgeyAnYWdlJzogMzYgfSwgeyAndXNlcic6ICdmcmVkJyB9KTtcbiAqIC8vID0+IHsgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH1cbiAqL1xudmFyIGFzc2lnbiA9IGNyZWF0ZUFzc2lnbmVyKGZ1bmN0aW9uKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKSB7XG4gIHJldHVybiBjdXN0b21pemVyXG4gICAgPyBhc3NpZ25XaXRoKG9iamVjdCwgc291cmNlLCBjdXN0b21pemVyKVxuICAgIDogYmFzZUFzc2lnbihvYmplY3QsIHNvdXJjZSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBhc3NpZ247XG4iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZ2V0TmF0aXZlJyksXG4gICAgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc0FycmF5TGlrZScpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpLFxuICAgIHNoaW1LZXlzID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvc2hpbUtleXMnKTtcblxuLyogTmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVLZXlzID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2tleXMnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5rZXlzKVxuICogZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqIEBleGFtcGxlXG4gKlxuICogZnVuY3Rpb24gRm9vKCkge1xuICogICB0aGlzLmEgPSAxO1xuICogICB0aGlzLmIgPSAyO1xuICogfVxuICpcbiAqIEZvby5wcm90b3R5cGUuYyA9IDM7XG4gKlxuICogXy5rZXlzKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICpcbiAqIF8ua2V5cygnaGknKTtcbiAqIC8vID0+IFsnMCcsICcxJ11cbiAqL1xudmFyIGtleXMgPSAhbmF0aXZlS2V5cyA/IHNoaW1LZXlzIDogZnVuY3Rpb24ob2JqZWN0KSB7XG4gIHZhciBDdG9yID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3QuY29uc3RydWN0b3I7XG4gIGlmICgodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSA9PT0gb2JqZWN0KSB8fFxuICAgICAgKHR5cGVvZiBvYmplY3QgIT0gJ2Z1bmN0aW9uJyAmJiBpc0FycmF5TGlrZShvYmplY3QpKSkge1xuICAgIHJldHVybiBzaGltS2V5cyhvYmplY3QpO1xuICB9XG4gIHJldHVybiBpc09iamVjdChvYmplY3QpID8gbmF0aXZlS2V5cyhvYmplY3QpIDogW107XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGtleXM7XG4iLCJ2YXIgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuLi9sYW5nL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4uL2xhbmcvaXNBcnJheScpLFxuICAgIGlzSW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc0luZGV4JyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9pc0xlbmd0aCcpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi4vbGFuZy9pc09iamVjdCcpO1xuXG4vKiogVXNlZCBmb3IgbmF0aXZlIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXNJbihuZXcgRm9vKTtcbiAqIC8vID0+IFsnYScsICdiJywgJ2MnXSAoaXRlcmF0aW9uIG9yZGVyIGlzIG5vdCBndWFyYW50ZWVkKVxuICovXG5mdW5jdGlvbiBrZXlzSW4ob2JqZWN0KSB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcbiAgfVxuICB2YXIgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDtcbiAgbGVuZ3RoID0gKGxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmXG4gICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKSAmJiBsZW5ndGgpIHx8IDA7XG5cbiAgdmFyIEN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICBpbmRleCA9IC0xLFxuICAgICAgaXNQcm90byA9IHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUgPT09IG9iamVjdCxcbiAgICAgIHJlc3VsdCA9IEFycmF5KGxlbmd0aCksXG4gICAgICBza2lwSW5kZXhlcyA9IGxlbmd0aCA+IDA7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICByZXN1bHRbaW5kZXhdID0gKGluZGV4ICsgJycpO1xuICB9XG4gIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoIShza2lwSW5kZXhlcyAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSkgJiZcbiAgICAgICAgIShrZXkgPT0gJ2NvbnN0cnVjdG9yJyAmJiAoaXNQcm90byB8fCAhaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpKSkge1xuICAgICAgcmVzdWx0LnB1c2goa2V5KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBrZXlzSW47XG4iLCJ2YXIgYmFzZU1lcmdlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZU1lcmdlJyksXG4gICAgY3JlYXRlQXNzaWduZXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9jcmVhdGVBc3NpZ25lcicpO1xuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IG1lcmdlcyBvd24gZW51bWVyYWJsZSBwcm9wZXJ0aWVzIG9mIHRoZSBzb3VyY2Ugb2JqZWN0KHMpLCB0aGF0XG4gKiBkb24ndCByZXNvbHZlIHRvIGB1bmRlZmluZWRgIGludG8gdGhlIGRlc3RpbmF0aW9uIG9iamVjdC4gU3Vic2VxdWVudCBzb3VyY2VzXG4gKiBvdmVyd3JpdGUgcHJvcGVydHkgYXNzaWdubWVudHMgb2YgcHJldmlvdXMgc291cmNlcy4gSWYgYGN1c3RvbWl6ZXJgIGlzXG4gKiBwcm92aWRlZCBpdCdzIGludm9rZWQgdG8gcHJvZHVjZSB0aGUgbWVyZ2VkIHZhbHVlcyBvZiB0aGUgZGVzdGluYXRpb24gYW5kXG4gKiBzb3VyY2UgcHJvcGVydGllcy4gSWYgYGN1c3RvbWl6ZXJgIHJldHVybnMgYHVuZGVmaW5lZGAgbWVyZ2luZyBpcyBoYW5kbGVkXG4gKiBieSB0aGUgbWV0aG9kIGluc3RlYWQuIFRoZSBgY3VzdG9taXplcmAgaXMgYm91bmQgdG8gYHRoaXNBcmdgIGFuZCBpbnZva2VkXG4gKiB3aXRoIGZpdmUgYXJndW1lbnRzOiAob2JqZWN0VmFsdWUsIHNvdXJjZVZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgZGVzdGluYXRpb24gb2JqZWN0LlxuICogQHBhcmFtIHsuLi5PYmplY3R9IFtzb3VyY2VzXSBUaGUgc291cmNlIG9iamVjdHMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBhc3NpZ25lZCB2YWx1ZXMuXG4gKiBAcGFyYW0geyp9IFt0aGlzQXJnXSBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGN1c3RvbWl6ZXJgLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyBgb2JqZWN0YC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIHVzZXJzID0ge1xuICogICAnZGF0YSc6IFt7ICd1c2VyJzogJ2Jhcm5leScgfSwgeyAndXNlcic6ICdmcmVkJyB9XVxuICogfTtcbiAqXG4gKiB2YXIgYWdlcyA9IHtcbiAqICAgJ2RhdGEnOiBbeyAnYWdlJzogMzYgfSwgeyAnYWdlJzogNDAgfV1cbiAqIH07XG4gKlxuICogXy5tZXJnZSh1c2VycywgYWdlcyk7XG4gKiAvLyA9PiB7ICdkYXRhJzogW3sgJ3VzZXInOiAnYmFybmV5JywgJ2FnZSc6IDM2IH0sIHsgJ3VzZXInOiAnZnJlZCcsICdhZ2UnOiA0MCB9XSB9XG4gKlxuICogLy8gdXNpbmcgYSBjdXN0b21pemVyIGNhbGxiYWNrXG4gKiB2YXIgb2JqZWN0ID0ge1xuICogICAnZnJ1aXRzJzogWydhcHBsZSddLFxuICogICAndmVnZXRhYmxlcyc6IFsnYmVldCddXG4gKiB9O1xuICpcbiAqIHZhciBvdGhlciA9IHtcbiAqICAgJ2ZydWl0cyc6IFsnYmFuYW5hJ10sXG4gKiAgICd2ZWdldGFibGVzJzogWydjYXJyb3QnXVxuICogfTtcbiAqXG4gKiBfLm1lcmdlKG9iamVjdCwgb3RoZXIsIGZ1bmN0aW9uKGEsIGIpIHtcbiAqICAgaWYgKF8uaXNBcnJheShhKSkge1xuICogICAgIHJldHVybiBhLmNvbmNhdChiKTtcbiAqICAgfVxuICogfSk7XG4gKiAvLyA9PiB7ICdmcnVpdHMnOiBbJ2FwcGxlJywgJ2JhbmFuYSddLCAndmVnZXRhYmxlcyc6IFsnYmVldCcsICdjYXJyb3QnXSB9XG4gKi9cbnZhciBtZXJnZSA9IGNyZWF0ZUFzc2lnbmVyKGJhc2VNZXJnZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gbWVyZ2U7XG4iLCJ2YXIgYmFzZVRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZVRvU3RyaW5nJyksXG4gICAgZXNjYXBlSHRtbENoYXIgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9lc2NhcGVIdG1sQ2hhcicpO1xuXG4vKiogVXNlZCB0byBtYXRjaCBIVE1MIGVudGl0aWVzIGFuZCBIVE1MIGNoYXJhY3RlcnMuICovXG52YXIgcmVVbmVzY2FwZWRIdG1sID0gL1smPD5cIidgXS9nLFxuICAgIHJlSGFzVW5lc2NhcGVkSHRtbCA9IFJlZ0V4cChyZVVuZXNjYXBlZEh0bWwuc291cmNlKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgY2hhcmFjdGVycyBcIiZcIiwgXCI8XCIsIFwiPlwiLCAnXCInLCBcIidcIiwgYW5kIFwiXFxgXCIsIGluIGBzdHJpbmdgIHRvXG4gKiB0aGVpciBjb3JyZXNwb25kaW5nIEhUTUwgZW50aXRpZXMuXG4gKlxuICogKipOb3RlOioqIE5vIG90aGVyIGNoYXJhY3RlcnMgYXJlIGVzY2FwZWQuIFRvIGVzY2FwZSBhZGRpdGlvbmFsIGNoYXJhY3RlcnNcbiAqIHVzZSBhIHRoaXJkLXBhcnR5IGxpYnJhcnkgbGlrZSBbX2hlX10oaHR0cHM6Ly9tdGhzLmJlL2hlKS5cbiAqXG4gKiBUaG91Z2ggdGhlIFwiPlwiIGNoYXJhY3RlciBpcyBlc2NhcGVkIGZvciBzeW1tZXRyeSwgY2hhcmFjdGVycyBsaWtlXG4gKiBcIj5cIiBhbmQgXCIvXCIgZG9uJ3QgbmVlZCBlc2NhcGluZyBpbiBIVE1MIGFuZCBoYXZlIG5vIHNwZWNpYWwgbWVhbmluZ1xuICogdW5sZXNzIHRoZXkncmUgcGFydCBvZiBhIHRhZyBvciB1bnF1b3RlZCBhdHRyaWJ1dGUgdmFsdWUuXG4gKiBTZWUgW01hdGhpYXMgQnluZW5zJ3MgYXJ0aWNsZV0oaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2FtYmlndW91cy1hbXBlcnNhbmRzKVxuICogKHVuZGVyIFwic2VtaS1yZWxhdGVkIGZ1biBmYWN0XCIpIGZvciBtb3JlIGRldGFpbHMuXG4gKlxuICogQmFja3RpY2tzIGFyZSBlc2NhcGVkIGJlY2F1c2UgaW4gSW50ZXJuZXQgRXhwbG9yZXIgPCA5LCB0aGV5IGNhbiBicmVhayBvdXRcbiAqIG9mIGF0dHJpYnV0ZSB2YWx1ZXMgb3IgSFRNTCBjb21tZW50cy4gU2VlIFsjNTldKGh0dHBzOi8vaHRtbDVzZWMub3JnLyM1OSksXG4gKiBbIzEwMl0oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEwMiksIFsjMTA4XShodHRwczovL2h0bWw1c2VjLm9yZy8jMTA4KSwgYW5kXG4gKiBbIzEzM10oaHR0cHM6Ly9odG1sNXNlYy5vcmcvIzEzMykgb2YgdGhlIFtIVE1MNSBTZWN1cml0eSBDaGVhdHNoZWV0XShodHRwczovL2h0bWw1c2VjLm9yZy8pXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIFdoZW4gd29ya2luZyB3aXRoIEhUTUwgeW91IHNob3VsZCBhbHdheXMgW3F1b3RlIGF0dHJpYnV0ZSB2YWx1ZXNdKGh0dHA6Ly93b25rby5jb20vcG9zdC9odG1sLWVzY2FwaW5nKVxuICogdG8gcmVkdWNlIFhTUyB2ZWN0b3JzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHN0cmluZyB0byBlc2NhcGUuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBlc2NhcGVkIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5lc2NhcGUoJ2ZyZWQsIGJhcm5leSwgJiBwZWJibGVzJyk7XG4gKiAvLyA9PiAnZnJlZCwgYmFybmV5LCAmYW1wOyBwZWJibGVzJ1xuICovXG5mdW5jdGlvbiBlc2NhcGUoc3RyaW5nKSB7XG4gIC8vIFJlc2V0IGBsYXN0SW5kZXhgIGJlY2F1c2UgaW4gSUUgPCA5IGBTdHJpbmcjcmVwbGFjZWAgZG9lcyBub3QuXG4gIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICByZXR1cm4gKHN0cmluZyAmJiByZUhhc1VuZXNjYXBlZEh0bWwudGVzdChzdHJpbmcpKVxuICAgID8gc3RyaW5nLnJlcGxhY2UocmVVbmVzY2FwZWRIdG1sLCBlc2NhcGVIdG1sQ2hhcilcbiAgICA6IHN0cmluZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlc2NhcGU7XG4iLCJ2YXIgYXNzaWduT3duRGVmYXVsdHMgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9hc3NpZ25Pd25EZWZhdWx0cycpLFxuICAgIGFzc2lnbldpdGggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9hc3NpZ25XaXRoJyksXG4gICAgYXR0ZW1wdCA9IHJlcXVpcmUoJy4uL3V0aWxpdHkvYXR0ZW1wdCcpLFxuICAgIGJhc2VBc3NpZ24gPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9iYXNlQXNzaWduJyksXG4gICAgYmFzZVRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZVRvU3RyaW5nJyksXG4gICAgYmFzZVZhbHVlcyA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2Jhc2VWYWx1ZXMnKSxcbiAgICBlc2NhcGVTdHJpbmdDaGFyID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvZXNjYXBlU3RyaW5nQ2hhcicpLFxuICAgIGlzRXJyb3IgPSByZXF1aXJlKCcuLi9sYW5nL2lzRXJyb3InKSxcbiAgICBpc0l0ZXJhdGVlQ2FsbCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2lzSXRlcmF0ZWVDYWxsJyksXG4gICAga2V5cyA9IHJlcXVpcmUoJy4uL29iamVjdC9rZXlzJyksXG4gICAgcmVJbnRlcnBvbGF0ZSA9IHJlcXVpcmUoJy4uL2ludGVybmFsL3JlSW50ZXJwb2xhdGUnKSxcbiAgICB0ZW1wbGF0ZVNldHRpbmdzID0gcmVxdWlyZSgnLi90ZW1wbGF0ZVNldHRpbmdzJyk7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGVtcHR5IHN0cmluZyBsaXRlcmFscyBpbiBjb21waWxlZCB0ZW1wbGF0ZSBzb3VyY2UuICovXG52YXIgcmVFbXB0eVN0cmluZ0xlYWRpbmcgPSAvXFxiX19wIFxcKz0gJyc7L2csXG4gICAgcmVFbXB0eVN0cmluZ01pZGRsZSA9IC9cXGIoX19wIFxcKz0pICcnIFxcKy9nLFxuICAgIHJlRW1wdHlTdHJpbmdUcmFpbGluZyA9IC8oX19lXFwoLio/XFwpfFxcYl9fdFxcKSkgXFwrXFxuJyc7L2c7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIFtFUyB0ZW1wbGF0ZSBkZWxpbWl0ZXJzXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10ZW1wbGF0ZS1saXRlcmFsLWxleGljYWwtY29tcG9uZW50cykuICovXG52YXIgcmVFc1RlbXBsYXRlID0gL1xcJFxceyhbXlxcXFx9XSooPzpcXFxcLlteXFxcXH1dKikqKVxcfS9nO1xuXG4vKiogVXNlZCB0byBlbnN1cmUgY2FwdHVyaW5nIG9yZGVyIG9mIHRlbXBsYXRlIGRlbGltaXRlcnMuICovXG52YXIgcmVOb01hdGNoID0gLygkXikvO1xuXG4vKiogVXNlZCB0byBtYXRjaCB1bmVzY2FwZWQgY2hhcmFjdGVycyBpbiBjb21waWxlZCBzdHJpbmcgbGl0ZXJhbHMuICovXG52YXIgcmVVbmVzY2FwZWRTdHJpbmcgPSAvWydcXG5cXHJcXHUyMDI4XFx1MjAyOVxcXFxdL2c7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNvbXBpbGVkIHRlbXBsYXRlIGZ1bmN0aW9uIHRoYXQgY2FuIGludGVycG9sYXRlIGRhdGEgcHJvcGVydGllc1xuICogaW4gXCJpbnRlcnBvbGF0ZVwiIGRlbGltaXRlcnMsIEhUTUwtZXNjYXBlIGludGVycG9sYXRlZCBkYXRhIHByb3BlcnRpZXMgaW5cbiAqIFwiZXNjYXBlXCIgZGVsaW1pdGVycywgYW5kIGV4ZWN1dGUgSmF2YVNjcmlwdCBpbiBcImV2YWx1YXRlXCIgZGVsaW1pdGVycy4gRGF0YVxuICogcHJvcGVydGllcyBtYXkgYmUgYWNjZXNzZWQgYXMgZnJlZSB2YXJpYWJsZXMgaW4gdGhlIHRlbXBsYXRlLiBJZiBhIHNldHRpbmdcbiAqIG9iamVjdCBpcyBwcm92aWRlZCBpdCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYF8udGVtcGxhdGVTZXR0aW5nc2AgdmFsdWVzLlxuICpcbiAqICoqTm90ZToqKiBJbiB0aGUgZGV2ZWxvcG1lbnQgYnVpbGQgYF8udGVtcGxhdGVgIHV0aWxpemVzXG4gKiBbc291cmNlVVJMc10oaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvZGV2ZWxvcGVydG9vbHMvc291cmNlbWFwcy8jdG9jLXNvdXJjZXVybClcbiAqIGZvciBlYXNpZXIgZGVidWdnaW5nLlxuICpcbiAqIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHByZWNvbXBpbGluZyB0ZW1wbGF0ZXMgc2VlXG4gKiBbbG9kYXNoJ3MgY3VzdG9tIGJ1aWxkcyBkb2N1bWVudGF0aW9uXShodHRwczovL2xvZGFzaC5jb20vY3VzdG9tLWJ1aWxkcykuXG4gKlxuICogRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gQ2hyb21lIGV4dGVuc2lvbiBzYW5kYm94ZXMgc2VlXG4gKiBbQ2hyb21lJ3MgZXh0ZW5zaW9ucyBkb2N1bWVudGF0aW9uXShodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2V4dGVuc2lvbnMvc2FuZGJveGluZ0V2YWwpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgU3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZz0nJ10gVGhlIHRlbXBsYXRlIHN0cmluZy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVGhlIG9wdGlvbnMgb2JqZWN0LlxuICogQHBhcmFtIHtSZWdFeHB9IFtvcHRpb25zLmVzY2FwZV0gVGhlIEhUTUwgXCJlc2NhcGVcIiBkZWxpbWl0ZXIuXG4gKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuZXZhbHVhdGVdIFRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zLmltcG9ydHNdIEFuIG9iamVjdCB0byBpbXBvcnQgaW50byB0aGUgdGVtcGxhdGUgYXMgZnJlZSB2YXJpYWJsZXMuXG4gKiBAcGFyYW0ge1JlZ0V4cH0gW29wdGlvbnMuaW50ZXJwb2xhdGVdIFRoZSBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyLlxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRpb25zLnNvdXJjZVVSTF0gVGhlIHNvdXJjZVVSTCBvZiB0aGUgdGVtcGxhdGUncyBjb21waWxlZCBzb3VyY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMudmFyaWFibGVdIFRoZSBkYXRhIG9iamVjdCB2YXJpYWJsZSBuYW1lLlxuICogQHBhcmFtLSB7T2JqZWN0fSBbb3RoZXJPcHRpb25zXSBFbmFibGVzIHRoZSBsZWdhY3kgYG9wdGlvbnNgIHBhcmFtIHNpZ25hdHVyZS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgY29tcGlsZWQgdGVtcGxhdGUgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIC8vIHVzaW5nIHRoZSBcImludGVycG9sYXRlXCIgZGVsaW1pdGVyIHRvIGNyZWF0ZSBhIGNvbXBpbGVkIHRlbXBsYXRlXG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyA8JT0gdXNlciAlPiEnKTtcbiAqIGNvbXBpbGVkKHsgJ3VzZXInOiAnZnJlZCcgfSk7XG4gKiAvLyA9PiAnaGVsbG8gZnJlZCEnXG4gKlxuICogLy8gdXNpbmcgdGhlIEhUTUwgXCJlc2NhcGVcIiBkZWxpbWl0ZXIgdG8gZXNjYXBlIGRhdGEgcHJvcGVydHkgdmFsdWVzXG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCc8Yj48JS0gdmFsdWUgJT48L2I+Jyk7XG4gKiBjb21waWxlZCh7ICd2YWx1ZSc6ICc8c2NyaXB0PicgfSk7XG4gKiAvLyA9PiAnPGI+Jmx0O3NjcmlwdCZndDs8L2I+J1xuICpcbiAqIC8vIHVzaW5nIHRoZSBcImV2YWx1YXRlXCIgZGVsaW1pdGVyIHRvIGV4ZWN1dGUgSmF2YVNjcmlwdCBhbmQgZ2VuZXJhdGUgSFRNTFxuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPCUgXy5mb3JFYWNoKHVzZXJzLCBmdW5jdGlvbih1c2VyKSB7ICU+PGxpPjwlLSB1c2VyICU+PC9saT48JSB9KTsgJT4nKTtcbiAqIGNvbXBpbGVkKHsgJ3VzZXJzJzogWydmcmVkJywgJ2Jhcm5leSddIH0pO1xuICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXG4gKlxuICogLy8gdXNpbmcgdGhlIGludGVybmFsIGBwcmludGAgZnVuY3Rpb24gaW4gXCJldmFsdWF0ZVwiIGRlbGltaXRlcnNcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJzwlIHByaW50KFwiaGVsbG8gXCIgKyB1c2VyKTsgJT4hJyk7XG4gKiBjb21waWxlZCh7ICd1c2VyJzogJ2Jhcm5leScgfSk7XG4gKiAvLyA9PiAnaGVsbG8gYmFybmV5ISdcbiAqXG4gKiAvLyB1c2luZyB0aGUgRVMgZGVsaW1pdGVyIGFzIGFuIGFsdGVybmF0aXZlIHRvIHRoZSBkZWZhdWx0IFwiaW50ZXJwb2xhdGVcIiBkZWxpbWl0ZXJcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hlbGxvICR7IHVzZXIgfSEnKTtcbiAqIGNvbXBpbGVkKHsgJ3VzZXInOiAncGViYmxlcycgfSk7XG4gKiAvLyA9PiAnaGVsbG8gcGViYmxlcyEnXG4gKlxuICogLy8gdXNpbmcgY3VzdG9tIHRlbXBsYXRlIGRlbGltaXRlcnNcbiAqIF8udGVtcGxhdGVTZXR0aW5ncy5pbnRlcnBvbGF0ZSA9IC97eyhbXFxzXFxTXSs/KX19L2c7XG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyB7eyB1c2VyIH19IScpO1xuICogY29tcGlsZWQoeyAndXNlcic6ICdtdXN0YWNoZScgfSk7XG4gKiAvLyA9PiAnaGVsbG8gbXVzdGFjaGUhJ1xuICpcbiAqIC8vIHVzaW5nIGJhY2tzbGFzaGVzIHRvIHRyZWF0IGRlbGltaXRlcnMgYXMgcGxhaW4gdGV4dFxuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSgnPCU9IFwiXFxcXDwlLSB2YWx1ZSAlXFxcXD5cIiAlPicpO1xuICogY29tcGlsZWQoeyAndmFsdWUnOiAnaWdub3JlZCcgfSk7XG4gKiAvLyA9PiAnPCUtIHZhbHVlICU+J1xuICpcbiAqIC8vIHVzaW5nIHRoZSBgaW1wb3J0c2Agb3B0aW9uIHRvIGltcG9ydCBgalF1ZXJ5YCBhcyBganFgXG4gKiB2YXIgdGV4dCA9ICc8JSBqcS5lYWNoKHVzZXJzLCBmdW5jdGlvbih1c2VyKSB7ICU+PGxpPjwlLSB1c2VyICU+PC9saT48JSB9KTsgJT4nO1xuICogdmFyIGNvbXBpbGVkID0gXy50ZW1wbGF0ZSh0ZXh0LCB7ICdpbXBvcnRzJzogeyAnanEnOiBqUXVlcnkgfSB9KTtcbiAqIGNvbXBpbGVkKHsgJ3VzZXJzJzogWydmcmVkJywgJ2Jhcm5leSddIH0pO1xuICogLy8gPT4gJzxsaT5mcmVkPC9saT48bGk+YmFybmV5PC9saT4nXG4gKlxuICogLy8gdXNpbmcgdGhlIGBzb3VyY2VVUkxgIG9wdGlvbiB0byBzcGVjaWZ5IGEgY3VzdG9tIHNvdXJjZVVSTCBmb3IgdGhlIHRlbXBsYXRlXG4gKiB2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKCdoZWxsbyA8JT0gdXNlciAlPiEnLCB7ICdzb3VyY2VVUkwnOiAnL2Jhc2ljL2dyZWV0aW5nLmpzdCcgfSk7XG4gKiBjb21waWxlZChkYXRhKTtcbiAqIC8vID0+IGZpbmQgdGhlIHNvdXJjZSBvZiBcImdyZWV0aW5nLmpzdFwiIHVuZGVyIHRoZSBTb3VyY2VzIHRhYiBvciBSZXNvdXJjZXMgcGFuZWwgb2YgdGhlIHdlYiBpbnNwZWN0b3JcbiAqXG4gKiAvLyB1c2luZyB0aGUgYHZhcmlhYmxlYCBvcHRpb24gdG8gZW5zdXJlIGEgd2l0aC1zdGF0ZW1lbnQgaXNuJ3QgdXNlZCBpbiB0aGUgY29tcGlsZWQgdGVtcGxhdGVcbiAqIHZhciBjb21waWxlZCA9IF8udGVtcGxhdGUoJ2hpIDwlPSBkYXRhLnVzZXIgJT4hJywgeyAndmFyaWFibGUnOiAnZGF0YScgfSk7XG4gKiBjb21waWxlZC5zb3VyY2U7XG4gKiAvLyA9PiBmdW5jdGlvbihkYXRhKSB7XG4gKiAvLyAgIHZhciBfX3QsIF9fcCA9ICcnO1xuICogLy8gICBfX3AgKz0gJ2hpICcgKyAoKF9fdCA9ICggZGF0YS51c2VyICkpID09IG51bGwgPyAnJyA6IF9fdCkgKyAnISc7XG4gKiAvLyAgIHJldHVybiBfX3A7XG4gKiAvLyB9XG4gKlxuICogLy8gdXNpbmcgdGhlIGBzb3VyY2VgIHByb3BlcnR5IHRvIGlubGluZSBjb21waWxlZCB0ZW1wbGF0ZXMgZm9yIG1lYW5pbmdmdWxcbiAqIC8vIGxpbmUgbnVtYmVycyBpbiBlcnJvciBtZXNzYWdlcyBhbmQgYSBzdGFjayB0cmFjZVxuICogZnMud3JpdGVGaWxlU3luYyhwYXRoLmpvaW4oY3dkLCAnanN0LmpzJyksICdcXFxuICogICB2YXIgSlNUID0ge1xcXG4gKiAgICAgXCJtYWluXCI6ICcgKyBfLnRlbXBsYXRlKG1haW5UZXh0KS5zb3VyY2UgKyAnXFxcbiAqICAgfTtcXFxuICogJyk7XG4gKi9cbmZ1bmN0aW9uIHRlbXBsYXRlKHN0cmluZywgb3B0aW9ucywgb3RoZXJPcHRpb25zKSB7XG4gIC8vIEJhc2VkIG9uIEpvaG4gUmVzaWcncyBgdG1wbGAgaW1wbGVtZW50YXRpb24gKGh0dHA6Ly9lam9obi5vcmcvYmxvZy9qYXZhc2NyaXB0LW1pY3JvLXRlbXBsYXRpbmcvKVxuICAvLyBhbmQgTGF1cmEgRG9rdG9yb3ZhJ3MgZG9ULmpzIChodHRwczovL2dpdGh1Yi5jb20vb2xhZG8vZG9UKS5cbiAgdmFyIHNldHRpbmdzID0gdGVtcGxhdGVTZXR0aW5ncy5pbXBvcnRzLl8udGVtcGxhdGVTZXR0aW5ncyB8fCB0ZW1wbGF0ZVNldHRpbmdzO1xuXG4gIGlmIChvdGhlck9wdGlvbnMgJiYgaXNJdGVyYXRlZUNhbGwoc3RyaW5nLCBvcHRpb25zLCBvdGhlck9wdGlvbnMpKSB7XG4gICAgb3B0aW9ucyA9IG90aGVyT3B0aW9ucyA9IHVuZGVmaW5lZDtcbiAgfVxuICBzdHJpbmcgPSBiYXNlVG9TdHJpbmcoc3RyaW5nKTtcbiAgb3B0aW9ucyA9IGFzc2lnbldpdGgoYmFzZUFzc2lnbih7fSwgb3RoZXJPcHRpb25zIHx8IG9wdGlvbnMpLCBzZXR0aW5ncywgYXNzaWduT3duRGVmYXVsdHMpO1xuXG4gIHZhciBpbXBvcnRzID0gYXNzaWduV2l0aChiYXNlQXNzaWduKHt9LCBvcHRpb25zLmltcG9ydHMpLCBzZXR0aW5ncy5pbXBvcnRzLCBhc3NpZ25Pd25EZWZhdWx0cyksXG4gICAgICBpbXBvcnRzS2V5cyA9IGtleXMoaW1wb3J0cyksXG4gICAgICBpbXBvcnRzVmFsdWVzID0gYmFzZVZhbHVlcyhpbXBvcnRzLCBpbXBvcnRzS2V5cyk7XG5cbiAgdmFyIGlzRXNjYXBpbmcsXG4gICAgICBpc0V2YWx1YXRpbmcsXG4gICAgICBpbmRleCA9IDAsXG4gICAgICBpbnRlcnBvbGF0ZSA9IG9wdGlvbnMuaW50ZXJwb2xhdGUgfHwgcmVOb01hdGNoLFxuICAgICAgc291cmNlID0gXCJfX3AgKz0gJ1wiO1xuXG4gIC8vIENvbXBpbGUgdGhlIHJlZ2V4cCB0byBtYXRjaCBlYWNoIGRlbGltaXRlci5cbiAgdmFyIHJlRGVsaW1pdGVycyA9IFJlZ0V4cChcbiAgICAob3B0aW9ucy5lc2NhcGUgfHwgcmVOb01hdGNoKS5zb3VyY2UgKyAnfCcgK1xuICAgIGludGVycG9sYXRlLnNvdXJjZSArICd8JyArXG4gICAgKGludGVycG9sYXRlID09PSByZUludGVycG9sYXRlID8gcmVFc1RlbXBsYXRlIDogcmVOb01hdGNoKS5zb3VyY2UgKyAnfCcgK1xuICAgIChvcHRpb25zLmV2YWx1YXRlIHx8IHJlTm9NYXRjaCkuc291cmNlICsgJ3wkJ1xuICAsICdnJyk7XG5cbiAgLy8gVXNlIGEgc291cmNlVVJMIGZvciBlYXNpZXIgZGVidWdnaW5nLlxuICB2YXIgc291cmNlVVJMID0gJ3NvdXJjZVVSTCcgaW4gb3B0aW9ucyA/ICcvLyMgc291cmNlVVJMPScgKyBvcHRpb25zLnNvdXJjZVVSTCArICdcXG4nIDogJyc7XG5cbiAgc3RyaW5nLnJlcGxhY2UocmVEZWxpbWl0ZXJzLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlVmFsdWUsIGludGVycG9sYXRlVmFsdWUsIGVzVGVtcGxhdGVWYWx1ZSwgZXZhbHVhdGVWYWx1ZSwgb2Zmc2V0KSB7XG4gICAgaW50ZXJwb2xhdGVWYWx1ZSB8fCAoaW50ZXJwb2xhdGVWYWx1ZSA9IGVzVGVtcGxhdGVWYWx1ZSk7XG5cbiAgICAvLyBFc2NhcGUgY2hhcmFjdGVycyB0aGF0IGNhbid0IGJlIGluY2x1ZGVkIGluIHN0cmluZyBsaXRlcmFscy5cbiAgICBzb3VyY2UgKz0gc3RyaW5nLnNsaWNlKGluZGV4LCBvZmZzZXQpLnJlcGxhY2UocmVVbmVzY2FwZWRTdHJpbmcsIGVzY2FwZVN0cmluZ0NoYXIpO1xuXG4gICAgLy8gUmVwbGFjZSBkZWxpbWl0ZXJzIHdpdGggc25pcHBldHMuXG4gICAgaWYgKGVzY2FwZVZhbHVlKSB7XG4gICAgICBpc0VzY2FwaW5nID0gdHJ1ZTtcbiAgICAgIHNvdXJjZSArPSBcIicgK1xcbl9fZShcIiArIGVzY2FwZVZhbHVlICsgXCIpICtcXG4nXCI7XG4gICAgfVxuICAgIGlmIChldmFsdWF0ZVZhbHVlKSB7XG4gICAgICBpc0V2YWx1YXRpbmcgPSB0cnVlO1xuICAgICAgc291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlVmFsdWUgKyBcIjtcXG5fX3AgKz0gJ1wiO1xuICAgIH1cbiAgICBpZiAoaW50ZXJwb2xhdGVWYWx1ZSkge1xuICAgICAgc291cmNlICs9IFwiJyArXFxuKChfX3QgPSAoXCIgKyBpbnRlcnBvbGF0ZVZhbHVlICsgXCIpKSA9PSBudWxsID8gJycgOiBfX3QpICtcXG4nXCI7XG4gICAgfVxuICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXG4gICAgLy8gVGhlIEpTIGVuZ2luZSBlbWJlZGRlZCBpbiBBZG9iZSBwcm9kdWN0cyByZXF1aXJlcyByZXR1cm5pbmcgdGhlIGBtYXRjaGBcbiAgICAvLyBzdHJpbmcgaW4gb3JkZXIgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBgb2Zmc2V0YCB2YWx1ZS5cbiAgICByZXR1cm4gbWF0Y2g7XG4gIH0pO1xuXG4gIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cbiAgLy8gSWYgYHZhcmlhYmxlYCBpcyBub3Qgc3BlY2lmaWVkIHdyYXAgYSB3aXRoLXN0YXRlbWVudCBhcm91bmQgdGhlIGdlbmVyYXRlZFxuICAvLyBjb2RlIHRvIGFkZCB0aGUgZGF0YSBvYmplY3QgdG8gdGhlIHRvcCBvZiB0aGUgc2NvcGUgY2hhaW4uXG4gIHZhciB2YXJpYWJsZSA9IG9wdGlvbnMudmFyaWFibGU7XG4gIGlmICghdmFyaWFibGUpIHtcbiAgICBzb3VyY2UgPSAnd2l0aCAob2JqKSB7XFxuJyArIHNvdXJjZSArICdcXG59XFxuJztcbiAgfVxuICAvLyBDbGVhbnVwIGNvZGUgYnkgc3RyaXBwaW5nIGVtcHR5IHN0cmluZ3MuXG4gIHNvdXJjZSA9IChpc0V2YWx1YXRpbmcgPyBzb3VyY2UucmVwbGFjZShyZUVtcHR5U3RyaW5nTGVhZGluZywgJycpIDogc291cmNlKVxuICAgIC5yZXBsYWNlKHJlRW1wdHlTdHJpbmdNaWRkbGUsICckMScpXG4gICAgLnJlcGxhY2UocmVFbXB0eVN0cmluZ1RyYWlsaW5nLCAnJDE7Jyk7XG5cbiAgLy8gRnJhbWUgY29kZSBhcyB0aGUgZnVuY3Rpb24gYm9keS5cbiAgc291cmNlID0gJ2Z1bmN0aW9uKCcgKyAodmFyaWFibGUgfHwgJ29iaicpICsgJykge1xcbicgK1xuICAgICh2YXJpYWJsZVxuICAgICAgPyAnJ1xuICAgICAgOiAnb2JqIHx8IChvYmogPSB7fSk7XFxuJ1xuICAgICkgK1xuICAgIFwidmFyIF9fdCwgX19wID0gJydcIiArXG4gICAgKGlzRXNjYXBpbmdcbiAgICAgICA/ICcsIF9fZSA9IF8uZXNjYXBlJ1xuICAgICAgIDogJydcbiAgICApICtcbiAgICAoaXNFdmFsdWF0aW5nXG4gICAgICA/ICcsIF9faiA9IEFycmF5LnByb3RvdHlwZS5qb2luO1xcbicgK1xuICAgICAgICBcImZ1bmN0aW9uIHByaW50KCkgeyBfX3AgKz0gX19qLmNhbGwoYXJndW1lbnRzLCAnJykgfVxcblwiXG4gICAgICA6ICc7XFxuJ1xuICAgICkgK1xuICAgIHNvdXJjZSArXG4gICAgJ3JldHVybiBfX3BcXG59JztcblxuICB2YXIgcmVzdWx0ID0gYXR0ZW1wdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gRnVuY3Rpb24oaW1wb3J0c0tleXMsIHNvdXJjZVVSTCArICdyZXR1cm4gJyArIHNvdXJjZSkuYXBwbHkodW5kZWZpbmVkLCBpbXBvcnRzVmFsdWVzKTtcbiAgfSk7XG5cbiAgLy8gUHJvdmlkZSB0aGUgY29tcGlsZWQgZnVuY3Rpb24ncyBzb3VyY2UgYnkgaXRzIGB0b1N0cmluZ2AgbWV0aG9kIG9yXG4gIC8vIHRoZSBgc291cmNlYCBwcm9wZXJ0eSBhcyBhIGNvbnZlbmllbmNlIGZvciBpbmxpbmluZyBjb21waWxlZCB0ZW1wbGF0ZXMuXG4gIHJlc3VsdC5zb3VyY2UgPSBzb3VyY2U7XG4gIGlmIChpc0Vycm9yKHJlc3VsdCkpIHtcbiAgICB0aHJvdyByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0ZW1wbGF0ZTtcbiIsInZhciBlc2NhcGUgPSByZXF1aXJlKCcuL2VzY2FwZScpLFxuICAgIHJlRXNjYXBlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcmVFc2NhcGUnKSxcbiAgICByZUV2YWx1YXRlID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvcmVFdmFsdWF0ZScpLFxuICAgIHJlSW50ZXJwb2xhdGUgPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9yZUludGVycG9sYXRlJyk7XG5cbi8qKlxuICogQnkgZGVmYXVsdCwgdGhlIHRlbXBsYXRlIGRlbGltaXRlcnMgdXNlZCBieSBsb2Rhc2ggYXJlIGxpa2UgdGhvc2UgaW5cbiAqIGVtYmVkZGVkIFJ1YnkgKEVSQikuIENoYW5nZSB0aGUgZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZVxuICogYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHR5cGUgT2JqZWN0XG4gKi9cbnZhciB0ZW1wbGF0ZVNldHRpbmdzID0ge1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGRldGVjdCBgZGF0YWAgcHJvcGVydHkgdmFsdWVzIHRvIGJlIEhUTUwtZXNjYXBlZC5cbiAgICpcbiAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgKiBAdHlwZSBSZWdFeHBcbiAgICovXG4gICdlc2NhcGUnOiByZUVzY2FwZSxcblxuICAvKipcbiAgICogVXNlZCB0byBkZXRlY3QgY29kZSB0byBiZSBldmFsdWF0ZWQuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICogQHR5cGUgUmVnRXhwXG4gICAqL1xuICAnZXZhbHVhdGUnOiByZUV2YWx1YXRlLFxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGRldGVjdCBgZGF0YWAgcHJvcGVydHkgdmFsdWVzIHRvIGluamVjdC5cbiAgICpcbiAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgKiBAdHlwZSBSZWdFeHBcbiAgICovXG4gICdpbnRlcnBvbGF0ZSc6IHJlSW50ZXJwb2xhdGUsXG5cbiAgLyoqXG4gICAqIFVzZWQgdG8gcmVmZXJlbmNlIHRoZSBkYXRhIG9iamVjdCBpbiB0aGUgdGVtcGxhdGUgdGV4dC5cbiAgICpcbiAgICogQG1lbWJlck9mIF8udGVtcGxhdGVTZXR0aW5nc1xuICAgKiBAdHlwZSBzdHJpbmdcbiAgICovXG4gICd2YXJpYWJsZSc6ICcnLFxuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGltcG9ydCB2YXJpYWJsZXMgaW50byB0aGUgY29tcGlsZWQgdGVtcGxhdGUuXG4gICAqXG4gICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3NcbiAgICogQHR5cGUgT2JqZWN0XG4gICAqL1xuICAnaW1wb3J0cyc6IHtcblxuICAgIC8qKlxuICAgICAqIEEgcmVmZXJlbmNlIHRvIHRoZSBgbG9kYXNoYCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBtZW1iZXJPZiBfLnRlbXBsYXRlU2V0dGluZ3MuaW1wb3J0c1xuICAgICAqIEB0eXBlIEZ1bmN0aW9uXG4gICAgICovXG4gICAgJ18nOiB7ICdlc2NhcGUnOiBlc2NhcGUgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHRlbXBsYXRlU2V0dGluZ3M7XG4iLCJ2YXIgYmFzZVRvU3RyaW5nID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvYmFzZVRvU3RyaW5nJyksXG4gICAgY2hhcnNMZWZ0SW5kZXggPSByZXF1aXJlKCcuLi9pbnRlcm5hbC9jaGFyc0xlZnRJbmRleCcpLFxuICAgIGNoYXJzUmlnaHRJbmRleCA9IHJlcXVpcmUoJy4uL2ludGVybmFsL2NoYXJzUmlnaHRJbmRleCcpLFxuICAgIGlzSXRlcmF0ZWVDYWxsID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvaXNJdGVyYXRlZUNhbGwnKSxcbiAgICB0cmltbWVkTGVmdEluZGV4ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvdHJpbW1lZExlZnRJbmRleCcpLFxuICAgIHRyaW1tZWRSaWdodEluZGV4ID0gcmVxdWlyZSgnLi4vaW50ZXJuYWwvdHJpbW1lZFJpZ2h0SW5kZXgnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2Ugb3Igc3BlY2lmaWVkIGNoYXJhY3RlcnMgZnJvbSBgc3RyaW5nYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IFtzdHJpbmc9JyddIFRoZSBzdHJpbmcgdG8gdHJpbS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY2hhcnM9d2hpdGVzcGFjZV0gVGhlIGNoYXJhY3RlcnMgdG8gdHJpbS5cbiAqIEBwYXJhbS0ge09iamVjdH0gW2d1YXJkXSBFbmFibGVzIHVzZSBhcyBhIGNhbGxiYWNrIGZvciBmdW5jdGlvbnMgbGlrZSBgXy5tYXBgLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgdHJpbW1lZCBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udHJpbSgnICBhYmMgICcpO1xuICogLy8gPT4gJ2FiYydcbiAqXG4gKiBfLnRyaW0oJy1fLWFiYy1fLScsICdfLScpO1xuICogLy8gPT4gJ2FiYydcbiAqXG4gKiBfLm1hcChbJyAgZm9vICAnLCAnICBiYXIgICddLCBfLnRyaW0pO1xuICogLy8gPT4gWydmb28nLCAnYmFyJ11cbiAqL1xuZnVuY3Rpb24gdHJpbShzdHJpbmcsIGNoYXJzLCBndWFyZCkge1xuICB2YXIgdmFsdWUgPSBzdHJpbmc7XG4gIHN0cmluZyA9IGJhc2VUb1N0cmluZyhzdHJpbmcpO1xuICBpZiAoIXN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH1cbiAgaWYgKGd1YXJkID8gaXNJdGVyYXRlZUNhbGwodmFsdWUsIGNoYXJzLCBndWFyZCkgOiBjaGFycyA9PSBudWxsKSB7XG4gICAgcmV0dXJuIHN0cmluZy5zbGljZSh0cmltbWVkTGVmdEluZGV4KHN0cmluZyksIHRyaW1tZWRSaWdodEluZGV4KHN0cmluZykgKyAxKTtcbiAgfVxuICBjaGFycyA9IChjaGFycyArICcnKTtcbiAgcmV0dXJuIHN0cmluZy5zbGljZShjaGFyc0xlZnRJbmRleChzdHJpbmcsIGNoYXJzKSwgY2hhcnNSaWdodEluZGV4KHN0cmluZywgY2hhcnMpICsgMSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdHJpbTtcbiIsInZhciBpc0Vycm9yID0gcmVxdWlyZSgnLi4vbGFuZy9pc0Vycm9yJyksXG4gICAgcmVzdFBhcmFtID0gcmVxdWlyZSgnLi4vZnVuY3Rpb24vcmVzdFBhcmFtJyk7XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gaW52b2tlIGBmdW5jYCwgcmV0dXJuaW5nIGVpdGhlciB0aGUgcmVzdWx0IG9yIHRoZSBjYXVnaHQgZXJyb3JcbiAqIG9iamVjdC4gQW55IGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCdzIGludm9rZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBVdGlsaXR5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBhdHRlbXB0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGBmdW5jYCByZXN1bHQgb3IgZXJyb3Igb2JqZWN0LlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBhdm9pZCB0aHJvd2luZyBlcnJvcnMgZm9yIGludmFsaWQgc2VsZWN0b3JzXG4gKiB2YXIgZWxlbWVudHMgPSBfLmF0dGVtcHQoZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAqICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICogfSwgJz5fPicpO1xuICpcbiAqIGlmIChfLmlzRXJyb3IoZWxlbWVudHMpKSB7XG4gKiAgIGVsZW1lbnRzID0gW107XG4gKiB9XG4gKi9cbnZhciBhdHRlbXB0ID0gcmVzdFBhcmFtKGZ1bmN0aW9uKGZ1bmMsIGFyZ3MpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICB9IGNhdGNoKGUpIHtcbiAgICByZXR1cm4gaXNFcnJvcihlKSA/IGUgOiBuZXcgRXJyb3IoZSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGF0dGVtcHQ7XG4iLCIvKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IHByb3ZpZGVkIHRvIGl0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgVXRpbGl0eVxuICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICpcbiAqIF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0O1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaWRlbnRpdHk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmlmICghcHJvY2Vzcy52ZXJzaW9uIHx8XG4gICAgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YwLicpID09PSAwIHx8XG4gICAgcHJvY2Vzcy52ZXJzaW9uLmluZGV4T2YoJ3YxLicpID09PSAwICYmIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MS44LicpICE9PSAwKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gbmV4dFRpY2s7XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHByb2Nlc3MubmV4dFRpY2s7XG59XG5cbmZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XG4gIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgdmFyIGkgPSAwO1xuICB3aGlsZSAoaSA8IGFyZ3MubGVuZ3RoKSB7XG4gICAgYXJnc1tpKytdID0gYXJndW1lbnRzW2ldO1xuICB9XG4gIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrKCkge1xuICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9KTtcbn1cbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxuXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBzZXRUaW1lb3V0KGRyYWluUXVldWUsIDApO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLyohIGh0dHBzOi8vbXRocy5iZS9wdW55Y29kZSB2MS4zLjIgYnkgQG1hdGhpYXMgKi9cbjsoZnVuY3Rpb24ocm9vdCkge1xuXG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZXMgKi9cblx0dmFyIGZyZWVFeHBvcnRzID0gdHlwZW9mIGV4cG9ydHMgPT0gJ29iamVjdCcgJiYgZXhwb3J0cyAmJlxuXHRcdCFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cdHZhciBmcmVlTW9kdWxlID0gdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiZcblx0XHQhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZTtcblx0dmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbDtcblx0aWYgKFxuXHRcdGZyZWVHbG9iYWwuZ2xvYmFsID09PSBmcmVlR2xvYmFsIHx8XG5cdFx0ZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwgfHxcblx0XHRmcmVlR2xvYmFsLnNlbGYgPT09IGZyZWVHbG9iYWxcblx0KSB7XG5cdFx0cm9vdCA9IGZyZWVHbG9iYWw7XG5cdH1cblxuXHQvKipcblx0ICogVGhlIGBwdW55Y29kZWAgb2JqZWN0LlxuXHQgKiBAbmFtZSBwdW55Y29kZVxuXHQgKiBAdHlwZSBPYmplY3Rcblx0ICovXG5cdHZhciBwdW55Y29kZSxcblxuXHQvKiogSGlnaGVzdCBwb3NpdGl2ZSBzaWduZWQgMzItYml0IGZsb2F0IHZhbHVlICovXG5cdG1heEludCA9IDIxNDc0ODM2NDcsIC8vIGFrYS4gMHg3RkZGRkZGRiBvciAyXjMxLTFcblxuXHQvKiogQm9vdHN0cmluZyBwYXJhbWV0ZXJzICovXG5cdGJhc2UgPSAzNixcblx0dE1pbiA9IDEsXG5cdHRNYXggPSAyNixcblx0c2tldyA9IDM4LFxuXHRkYW1wID0gNzAwLFxuXHRpbml0aWFsQmlhcyA9IDcyLFxuXHRpbml0aWFsTiA9IDEyOCwgLy8gMHg4MFxuXHRkZWxpbWl0ZXIgPSAnLScsIC8vICdcXHgyRCdcblxuXHQvKiogUmVndWxhciBleHByZXNzaW9ucyAqL1xuXHRyZWdleFB1bnljb2RlID0gL154bi0tLyxcblx0cmVnZXhOb25BU0NJSSA9IC9bXlxceDIwLVxceDdFXS8sIC8vIHVucHJpbnRhYmxlIEFTQ0lJIGNoYXJzICsgbm9uLUFTQ0lJIGNoYXJzXG5cdHJlZ2V4U2VwYXJhdG9ycyA9IC9bXFx4MkVcXHUzMDAyXFx1RkYwRVxcdUZGNjFdL2csIC8vIFJGQyAzNDkwIHNlcGFyYXRvcnNcblxuXHQvKiogRXJyb3IgbWVzc2FnZXMgKi9cblx0ZXJyb3JzID0ge1xuXHRcdCdvdmVyZmxvdyc6ICdPdmVyZmxvdzogaW5wdXQgbmVlZHMgd2lkZXIgaW50ZWdlcnMgdG8gcHJvY2VzcycsXG5cdFx0J25vdC1iYXNpYyc6ICdJbGxlZ2FsIGlucHV0ID49IDB4ODAgKG5vdCBhIGJhc2ljIGNvZGUgcG9pbnQpJyxcblx0XHQnaW52YWxpZC1pbnB1dCc6ICdJbnZhbGlkIGlucHV0J1xuXHR9LFxuXG5cdC8qKiBDb252ZW5pZW5jZSBzaG9ydGN1dHMgKi9cblx0YmFzZU1pbnVzVE1pbiA9IGJhc2UgLSB0TWluLFxuXHRmbG9vciA9IE1hdGguZmxvb3IsXG5cdHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUsXG5cblx0LyoqIFRlbXBvcmFyeSB2YXJpYWJsZSAqL1xuXHRrZXk7XG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0LyoqXG5cdCAqIEEgZ2VuZXJpYyBlcnJvciB1dGlsaXR5IGZ1bmN0aW9uLlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBUaGUgZXJyb3IgdHlwZS5cblx0ICogQHJldHVybnMge0Vycm9yfSBUaHJvd3MgYSBgUmFuZ2VFcnJvcmAgd2l0aCB0aGUgYXBwbGljYWJsZSBlcnJvciBtZXNzYWdlLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXJyb3IodHlwZSkge1xuXHRcdHRocm93IFJhbmdlRXJyb3IoZXJyb3JzW3R5cGVdKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBIGdlbmVyaWMgYEFycmF5I21hcGAgdXRpbGl0eSBmdW5jdGlvbi5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5IGFycmF5XG5cdCAqIGl0ZW0uXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gQSBuZXcgYXJyYXkgb2YgdmFsdWVzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcChhcnJheSwgZm4pIHtcblx0XHR2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHR3aGlsZSAobGVuZ3RoLS0pIHtcblx0XHRcdHJlc3VsdFtsZW5ndGhdID0gZm4oYXJyYXlbbGVuZ3RoXSk7XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cblxuXHQvKipcblx0ICogQSBzaW1wbGUgYEFycmF5I21hcGAtbGlrZSB3cmFwcGVyIHRvIHdvcmsgd2l0aCBkb21haW4gbmFtZSBzdHJpbmdzIG9yIGVtYWlsXG5cdCAqIGFkZHJlc3Nlcy5cblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRvbWFpbiBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRoYXQgZ2V0cyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAqIGNoYXJhY3Rlci5cblx0ICogQHJldHVybnMge0FycmF5fSBBIG5ldyBzdHJpbmcgb2YgY2hhcmFjdGVycyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tcblx0ICogZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBEb21haW4oc3RyaW5nLCBmbikge1xuXHRcdHZhciBwYXJ0cyA9IHN0cmluZy5zcGxpdCgnQCcpO1xuXHRcdHZhciByZXN1bHQgPSAnJztcblx0XHRpZiAocGFydHMubGVuZ3RoID4gMSkge1xuXHRcdFx0Ly8gSW4gZW1haWwgYWRkcmVzc2VzLCBvbmx5IHRoZSBkb21haW4gbmFtZSBzaG91bGQgYmUgcHVueWNvZGVkLiBMZWF2ZVxuXHRcdFx0Ly8gdGhlIGxvY2FsIHBhcnQgKGkuZS4gZXZlcnl0aGluZyB1cCB0byBgQGApIGludGFjdC5cblx0XHRcdHJlc3VsdCA9IHBhcnRzWzBdICsgJ0AnO1xuXHRcdFx0c3RyaW5nID0gcGFydHNbMV07XG5cdFx0fVxuXHRcdC8vIEF2b2lkIGBzcGxpdChyZWdleClgIGZvciBJRTggY29tcGF0aWJpbGl0eS4gU2VlICMxNy5cblx0XHRzdHJpbmcgPSBzdHJpbmcucmVwbGFjZShyZWdleFNlcGFyYXRvcnMsICdcXHgyRScpO1xuXHRcdHZhciBsYWJlbHMgPSBzdHJpbmcuc3BsaXQoJy4nKTtcblx0XHR2YXIgZW5jb2RlZCA9IG1hcChsYWJlbHMsIGZuKS5qb2luKCcuJyk7XG5cdFx0cmV0dXJuIHJlc3VsdCArIGVuY29kZWQ7XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBudW1lcmljIGNvZGUgcG9pbnRzIG9mIGVhY2ggVW5pY29kZVxuXHQgKiBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZy4gV2hpbGUgSmF2YVNjcmlwdCB1c2VzIFVDUy0yIGludGVybmFsbHksXG5cdCAqIHRoaXMgZnVuY3Rpb24gd2lsbCBjb252ZXJ0IGEgcGFpciBvZiBzdXJyb2dhdGUgaGFsdmVzIChlYWNoIG9mIHdoaWNoXG5cdCAqIFVDUy0yIGV4cG9zZXMgYXMgc2VwYXJhdGUgY2hhcmFjdGVycykgaW50byBhIHNpbmdsZSBjb2RlIHBvaW50LFxuXHQgKiBtYXRjaGluZyBVVEYtMTYuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZW5jb2RlYFxuXHQgKiBAc2VlIDxodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZz5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlLnVjczJcblx0ICogQG5hbWUgZGVjb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIFVuaWNvZGUgaW5wdXQgc3RyaW5nIChVQ1MtMikuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gVGhlIG5ldyBhcnJheSBvZiBjb2RlIHBvaW50cy5cblx0ICovXG5cdGZ1bmN0aW9uIHVjczJkZWNvZGUoc3RyaW5nKSB7XG5cdFx0dmFyIG91dHB1dCA9IFtdLFxuXHRcdCAgICBjb3VudGVyID0gMCxcblx0XHQgICAgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aCxcblx0XHQgICAgdmFsdWUsXG5cdFx0ICAgIGV4dHJhO1xuXHRcdHdoaWxlIChjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHR2YWx1ZSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRpZiAodmFsdWUgPj0gMHhEODAwICYmIHZhbHVlIDw9IDB4REJGRiAmJiBjb3VudGVyIDwgbGVuZ3RoKSB7XG5cdFx0XHRcdC8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlclxuXHRcdFx0XHRleHRyYSA9IHN0cmluZy5jaGFyQ29kZUF0KGNvdW50ZXIrKyk7XG5cdFx0XHRcdGlmICgoZXh0cmEgJiAweEZDMDApID09IDB4REMwMCkgeyAvLyBsb3cgc3Vycm9nYXRlXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goKCh2YWx1ZSAmIDB4M0ZGKSA8PCAxMCkgKyAoZXh0cmEgJiAweDNGRikgKyAweDEwMDAwKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyB1bm1hdGNoZWQgc3Vycm9nYXRlOyBvbmx5IGFwcGVuZCB0aGlzIGNvZGUgdW5pdCwgaW4gY2FzZSB0aGUgbmV4dFxuXHRcdFx0XHRcdC8vIGNvZGUgdW5pdCBpcyB0aGUgaGlnaCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpclxuXHRcdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRjb3VudGVyLS07XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHZhbHVlKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG91dHB1dDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RyaW5nIGJhc2VkIG9uIGFuIGFycmF5IG9mIG51bWVyaWMgY29kZSBwb2ludHMuXG5cdCAqIEBzZWUgYHB1bnljb2RlLnVjczIuZGVjb2RlYFxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGUudWNzMlxuXHQgKiBAbmFtZSBlbmNvZGVcblx0ICogQHBhcmFtIHtBcnJheX0gY29kZVBvaW50cyBUaGUgYXJyYXkgb2YgbnVtZXJpYyBjb2RlIHBvaW50cy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIG5ldyBVbmljb2RlIHN0cmluZyAoVUNTLTIpLlxuXHQgKi9cblx0ZnVuY3Rpb24gdWNzMmVuY29kZShhcnJheSkge1xuXHRcdHJldHVybiBtYXAoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHR2YXIgb3V0cHV0ID0gJyc7XG5cdFx0XHRpZiAodmFsdWUgPiAweEZGRkYpIHtcblx0XHRcdFx0dmFsdWUgLT0gMHgxMDAwMDtcblx0XHRcdFx0b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG5cdFx0XHRcdHZhbHVlID0gMHhEQzAwIHwgdmFsdWUgJiAweDNGRjtcblx0XHRcdH1cblx0XHRcdG91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO1xuXHRcdFx0cmV0dXJuIG91dHB1dDtcblx0XHR9KS5qb2luKCcnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIGJhc2ljIGNvZGUgcG9pbnQgaW50byBhIGRpZ2l0L2ludGVnZXIuXG5cdCAqIEBzZWUgYGRpZ2l0VG9CYXNpYygpYFxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge051bWJlcn0gY29kZVBvaW50IFRoZSBiYXNpYyBudW1lcmljIGNvZGUgcG9pbnQgdmFsdWUuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBudW1lcmljIHZhbHVlIG9mIGEgYmFzaWMgY29kZSBwb2ludCAoZm9yIHVzZSBpblxuXHQgKiByZXByZXNlbnRpbmcgaW50ZWdlcnMpIGluIHRoZSByYW5nZSBgMGAgdG8gYGJhc2UgLSAxYCwgb3IgYGJhc2VgIGlmXG5cdCAqIHRoZSBjb2RlIHBvaW50IGRvZXMgbm90IHJlcHJlc2VudCBhIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzaWNUb0RpZ2l0KGNvZGVQb2ludCkge1xuXHRcdGlmIChjb2RlUG9pbnQgLSA0OCA8IDEwKSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gMjI7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA2NSA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gNjU7XG5cdFx0fVxuXHRcdGlmIChjb2RlUG9pbnQgLSA5NyA8IDI2KSB7XG5cdFx0XHRyZXR1cm4gY29kZVBvaW50IC0gOTc7XG5cdFx0fVxuXHRcdHJldHVybiBiYXNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgZGlnaXQvaW50ZWdlciBpbnRvIGEgYmFzaWMgY29kZSBwb2ludC5cblx0ICogQHNlZSBgYmFzaWNUb0RpZ2l0KClgXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaWdpdCBUaGUgbnVtZXJpYyB2YWx1ZSBvZiBhIGJhc2ljIGNvZGUgcG9pbnQuXG5cdCAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBiYXNpYyBjb2RlIHBvaW50IHdob3NlIHZhbHVlICh3aGVuIHVzZWQgZm9yXG5cdCAqIHJlcHJlc2VudGluZyBpbnRlZ2VycykgaXMgYGRpZ2l0YCwgd2hpY2ggbmVlZHMgdG8gYmUgaW4gdGhlIHJhbmdlXG5cdCAqIGAwYCB0byBgYmFzZSAtIDFgLiBJZiBgZmxhZ2AgaXMgbm9uLXplcm8sIHRoZSB1cHBlcmNhc2UgZm9ybSBpc1xuXHQgKiB1c2VkOyBlbHNlLCB0aGUgbG93ZXJjYXNlIGZvcm0gaXMgdXNlZC4gVGhlIGJlaGF2aW9yIGlzIHVuZGVmaW5lZFxuXHQgKiBpZiBgZmxhZ2AgaXMgbm9uLXplcm8gYW5kIGBkaWdpdGAgaGFzIG5vIHVwcGVyY2FzZSBmb3JtLlxuXHQgKi9cblx0ZnVuY3Rpb24gZGlnaXRUb0Jhc2ljKGRpZ2l0LCBmbGFnKSB7XG5cdFx0Ly8gIDAuLjI1IG1hcCB0byBBU0NJSSBhLi56IG9yIEEuLlpcblx0XHQvLyAyNi4uMzUgbWFwIHRvIEFTQ0lJIDAuLjlcblx0XHRyZXR1cm4gZGlnaXQgKyAyMiArIDc1ICogKGRpZ2l0IDwgMjYpIC0gKChmbGFnICE9IDApIDw8IDUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEJpYXMgYWRhcHRhdGlvbiBmdW5jdGlvbiBhcyBwZXIgc2VjdGlvbiAzLjQgb2YgUkZDIDM0OTIuXG5cdCAqIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM0OTIjc2VjdGlvbi0zLjRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIGFkYXB0KGRlbHRhLCBudW1Qb2ludHMsIGZpcnN0VGltZSkge1xuXHRcdHZhciBrID0gMDtcblx0XHRkZWx0YSA9IGZpcnN0VGltZSA/IGZsb29yKGRlbHRhIC8gZGFtcCkgOiBkZWx0YSA+PiAxO1xuXHRcdGRlbHRhICs9IGZsb29yKGRlbHRhIC8gbnVtUG9pbnRzKTtcblx0XHRmb3IgKC8qIG5vIGluaXRpYWxpemF0aW9uICovOyBkZWx0YSA+IGJhc2VNaW51c1RNaW4gKiB0TWF4ID4+IDE7IGsgKz0gYmFzZSkge1xuXHRcdFx0ZGVsdGEgPSBmbG9vcihkZWx0YSAvIGJhc2VNaW51c1RNaW4pO1xuXHRcdH1cblx0XHRyZXR1cm4gZmxvb3IoayArIChiYXNlTWludXNUTWluICsgMSkgKiBkZWx0YSAvIChkZWx0YSArIHNrZXcpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFB1bnljb2RlIHN0cmluZyBvZiBBU0NJSS1vbmx5IHN5bWJvbHMgdG8gYSBzdHJpbmcgb2YgVW5pY29kZVxuXHQgKiBzeW1ib2xzLlxuXHQgKiBAbWVtYmVyT2YgcHVueWNvZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlucHV0IFRoZSBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgcmVzdWx0aW5nIHN0cmluZyBvZiBVbmljb2RlIHN5bWJvbHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWNvZGUoaW5wdXQpIHtcblx0XHQvLyBEb24ndCB1c2UgVUNTLTJcblx0XHR2YXIgb3V0cHV0ID0gW10sXG5cdFx0ICAgIGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxuXHRcdCAgICBvdXQsXG5cdFx0ICAgIGkgPSAwLFxuXHRcdCAgICBuID0gaW5pdGlhbE4sXG5cdFx0ICAgIGJpYXMgPSBpbml0aWFsQmlhcyxcblx0XHQgICAgYmFzaWMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIGluZGV4LFxuXHRcdCAgICBvbGRpLFxuXHRcdCAgICB3LFxuXHRcdCAgICBrLFxuXHRcdCAgICBkaWdpdCxcblx0XHQgICAgdCxcblx0XHQgICAgLyoqIENhY2hlZCBjYWxjdWxhdGlvbiByZXN1bHRzICovXG5cdFx0ICAgIGJhc2VNaW51c1Q7XG5cblx0XHQvLyBIYW5kbGUgdGhlIGJhc2ljIGNvZGUgcG9pbnRzOiBsZXQgYGJhc2ljYCBiZSB0aGUgbnVtYmVyIG9mIGlucHV0IGNvZGVcblx0XHQvLyBwb2ludHMgYmVmb3JlIHRoZSBsYXN0IGRlbGltaXRlciwgb3IgYDBgIGlmIHRoZXJlIGlzIG5vbmUsIHRoZW4gY29weVxuXHRcdC8vIHRoZSBmaXJzdCBiYXNpYyBjb2RlIHBvaW50cyB0byB0aGUgb3V0cHV0LlxuXG5cdFx0YmFzaWMgPSBpbnB1dC5sYXN0SW5kZXhPZihkZWxpbWl0ZXIpO1xuXHRcdGlmIChiYXNpYyA8IDApIHtcblx0XHRcdGJhc2ljID0gMDtcblx0XHR9XG5cblx0XHRmb3IgKGogPSAwOyBqIDwgYmFzaWM7ICsraikge1xuXHRcdFx0Ly8gaWYgaXQncyBub3QgYSBiYXNpYyBjb2RlIHBvaW50XG5cdFx0XHRpZiAoaW5wdXQuY2hhckNvZGVBdChqKSA+PSAweDgwKSB7XG5cdFx0XHRcdGVycm9yKCdub3QtYmFzaWMnKTtcblx0XHRcdH1cblx0XHRcdG91dHB1dC5wdXNoKGlucHV0LmNoYXJDb2RlQXQoaikpO1xuXHRcdH1cblxuXHRcdC8vIE1haW4gZGVjb2RpbmcgbG9vcDogc3RhcnQganVzdCBhZnRlciB0aGUgbGFzdCBkZWxpbWl0ZXIgaWYgYW55IGJhc2ljIGNvZGVcblx0XHQvLyBwb2ludHMgd2VyZSBjb3BpZWQ7IHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb3RoZXJ3aXNlLlxuXG5cdFx0Zm9yIChpbmRleCA9IGJhc2ljID4gMCA/IGJhc2ljICsgMSA6IDA7IGluZGV4IDwgaW5wdXRMZW5ndGg7IC8qIG5vIGZpbmFsIGV4cHJlc3Npb24gKi8pIHtcblxuXHRcdFx0Ly8gYGluZGV4YCBpcyB0aGUgaW5kZXggb2YgdGhlIG5leHQgY2hhcmFjdGVyIHRvIGJlIGNvbnN1bWVkLlxuXHRcdFx0Ly8gRGVjb2RlIGEgZ2VuZXJhbGl6ZWQgdmFyaWFibGUtbGVuZ3RoIGludGVnZXIgaW50byBgZGVsdGFgLFxuXHRcdFx0Ly8gd2hpY2ggZ2V0cyBhZGRlZCB0byBgaWAuIFRoZSBvdmVyZmxvdyBjaGVja2luZyBpcyBlYXNpZXJcblx0XHRcdC8vIGlmIHdlIGluY3JlYXNlIGBpYCBhcyB3ZSBnbywgdGhlbiBzdWJ0cmFjdCBvZmYgaXRzIHN0YXJ0aW5nXG5cdFx0XHQvLyB2YWx1ZSBhdCB0aGUgZW5kIHRvIG9idGFpbiBgZGVsdGFgLlxuXHRcdFx0Zm9yIChvbGRpID0gaSwgdyA9IDEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXG5cdFx0XHRcdGlmIChpbmRleCA+PSBpbnB1dExlbmd0aCkge1xuXHRcdFx0XHRcdGVycm9yKCdpbnZhbGlkLWlucHV0Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkaWdpdCA9IGJhc2ljVG9EaWdpdChpbnB1dC5jaGFyQ29kZUF0KGluZGV4KyspKTtcblxuXHRcdFx0XHRpZiAoZGlnaXQgPj0gYmFzZSB8fCBkaWdpdCA+IGZsb29yKChtYXhJbnQgLSBpKSAvIHcpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpICs9IGRpZ2l0ICogdztcblx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cblx0XHRcdFx0aWYgKGRpZ2l0IDwgdCkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0YmFzZU1pbnVzVCA9IGJhc2UgLSB0O1xuXHRcdFx0XHRpZiAodyA+IGZsb29yKG1heEludCAvIGJhc2VNaW51c1QpKSB7XG5cdFx0XHRcdFx0ZXJyb3IoJ292ZXJmbG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR3ICo9IGJhc2VNaW51c1Q7XG5cblx0XHRcdH1cblxuXHRcdFx0b3V0ID0gb3V0cHV0Lmxlbmd0aCArIDE7XG5cdFx0XHRiaWFzID0gYWRhcHQoaSAtIG9sZGksIG91dCwgb2xkaSA9PSAwKTtcblxuXHRcdFx0Ly8gYGlgIHdhcyBzdXBwb3NlZCB0byB3cmFwIGFyb3VuZCBmcm9tIGBvdXRgIHRvIGAwYCxcblx0XHRcdC8vIGluY3JlbWVudGluZyBgbmAgZWFjaCB0aW1lLCBzbyB3ZSdsbCBmaXggdGhhdCBub3c6XG5cdFx0XHRpZiAoZmxvb3IoaSAvIG91dCkgPiBtYXhJbnQgLSBuKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRuICs9IGZsb29yKGkgLyBvdXQpO1xuXHRcdFx0aSAlPSBvdXQ7XG5cblx0XHRcdC8vIEluc2VydCBgbmAgYXQgcG9zaXRpb24gYGlgIG9mIHRoZSBvdXRwdXRcblx0XHRcdG91dHB1dC5zcGxpY2UoaSsrLCAwLCBuKTtcblxuXHRcdH1cblxuXHRcdHJldHVybiB1Y3MyZW5jb2RlKG91dHB1dCk7XG5cdH1cblxuXHQvKipcblx0ICogQ29udmVydHMgYSBzdHJpbmcgb2YgVW5pY29kZSBzeW1ib2xzIChlLmcuIGEgZG9tYWluIG5hbWUgbGFiZWwpIHRvIGFcblx0ICogUHVueWNvZGUgc3RyaW5nIG9mIEFTQ0lJLW9ubHkgc3ltYm9scy5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgc3RyaW5nIG9mIFVuaWNvZGUgc3ltYm9scy5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIHJlc3VsdGluZyBQdW55Y29kZSBzdHJpbmcgb2YgQVNDSUktb25seSBzeW1ib2xzLlxuXHQgKi9cblx0ZnVuY3Rpb24gZW5jb2RlKGlucHV0KSB7XG5cdFx0dmFyIG4sXG5cdFx0ICAgIGRlbHRhLFxuXHRcdCAgICBoYW5kbGVkQ1BDb3VudCxcblx0XHQgICAgYmFzaWNMZW5ndGgsXG5cdFx0ICAgIGJpYXMsXG5cdFx0ICAgIGosXG5cdFx0ICAgIG0sXG5cdFx0ICAgIHEsXG5cdFx0ICAgIGssXG5cdFx0ICAgIHQsXG5cdFx0ICAgIGN1cnJlbnRWYWx1ZSxcblx0XHQgICAgb3V0cHV0ID0gW10sXG5cdFx0ICAgIC8qKiBgaW5wdXRMZW5ndGhgIHdpbGwgaG9sZCB0aGUgbnVtYmVyIG9mIGNvZGUgcG9pbnRzIGluIGBpbnB1dGAuICovXG5cdFx0ICAgIGlucHV0TGVuZ3RoLFxuXHRcdCAgICAvKiogQ2FjaGVkIGNhbGN1bGF0aW9uIHJlc3VsdHMgKi9cblx0XHQgICAgaGFuZGxlZENQQ291bnRQbHVzT25lLFxuXHRcdCAgICBiYXNlTWludXNULFxuXHRcdCAgICBxTWludXNUO1xuXG5cdFx0Ly8gQ29udmVydCB0aGUgaW5wdXQgaW4gVUNTLTIgdG8gVW5pY29kZVxuXHRcdGlucHV0ID0gdWNzMmRlY29kZShpbnB1dCk7XG5cblx0XHQvLyBDYWNoZSB0aGUgbGVuZ3RoXG5cdFx0aW5wdXRMZW5ndGggPSBpbnB1dC5sZW5ndGg7XG5cblx0XHQvLyBJbml0aWFsaXplIHRoZSBzdGF0ZVxuXHRcdG4gPSBpbml0aWFsTjtcblx0XHRkZWx0YSA9IDA7XG5cdFx0YmlhcyA9IGluaXRpYWxCaWFzO1xuXG5cdFx0Ly8gSGFuZGxlIHRoZSBiYXNpYyBjb2RlIHBvaW50c1xuXHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRjdXJyZW50VmFsdWUgPSBpbnB1dFtqXTtcblx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCAweDgwKSB7XG5cdFx0XHRcdG91dHB1dC5wdXNoKHN0cmluZ0Zyb21DaGFyQ29kZShjdXJyZW50VmFsdWUpKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRoYW5kbGVkQ1BDb3VudCA9IGJhc2ljTGVuZ3RoID0gb3V0cHV0Lmxlbmd0aDtcblxuXHRcdC8vIGBoYW5kbGVkQ1BDb3VudGAgaXMgdGhlIG51bWJlciBvZiBjb2RlIHBvaW50cyB0aGF0IGhhdmUgYmVlbiBoYW5kbGVkO1xuXHRcdC8vIGBiYXNpY0xlbmd0aGAgaXMgdGhlIG51bWJlciBvZiBiYXNpYyBjb2RlIHBvaW50cy5cblxuXHRcdC8vIEZpbmlzaCB0aGUgYmFzaWMgc3RyaW5nIC0gaWYgaXQgaXMgbm90IGVtcHR5IC0gd2l0aCBhIGRlbGltaXRlclxuXHRcdGlmIChiYXNpY0xlbmd0aCkge1xuXHRcdFx0b3V0cHV0LnB1c2goZGVsaW1pdGVyKTtcblx0XHR9XG5cblx0XHQvLyBNYWluIGVuY29kaW5nIGxvb3A6XG5cdFx0d2hpbGUgKGhhbmRsZWRDUENvdW50IDwgaW5wdXRMZW5ndGgpIHtcblxuXHRcdFx0Ly8gQWxsIG5vbi1iYXNpYyBjb2RlIHBvaW50cyA8IG4gaGF2ZSBiZWVuIGhhbmRsZWQgYWxyZWFkeS4gRmluZCB0aGUgbmV4dFxuXHRcdFx0Ly8gbGFyZ2VyIG9uZTpcblx0XHRcdGZvciAobSA9IG1heEludCwgaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXHRcdFx0XHRpZiAoY3VycmVudFZhbHVlID49IG4gJiYgY3VycmVudFZhbHVlIDwgbSkge1xuXHRcdFx0XHRcdG0gPSBjdXJyZW50VmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gSW5jcmVhc2UgYGRlbHRhYCBlbm91Z2ggdG8gYWR2YW5jZSB0aGUgZGVjb2RlcidzIDxuLGk+IHN0YXRlIHRvIDxtLDA+LFxuXHRcdFx0Ly8gYnV0IGd1YXJkIGFnYWluc3Qgb3ZlcmZsb3dcblx0XHRcdGhhbmRsZWRDUENvdW50UGx1c09uZSA9IGhhbmRsZWRDUENvdW50ICsgMTtcblx0XHRcdGlmIChtIC0gbiA+IGZsb29yKChtYXhJbnQgLSBkZWx0YSkgLyBoYW5kbGVkQ1BDb3VudFBsdXNPbmUpKSB7XG5cdFx0XHRcdGVycm9yKCdvdmVyZmxvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWx0YSArPSAobSAtIG4pICogaGFuZGxlZENQQ291bnRQbHVzT25lO1xuXHRcdFx0biA9IG07XG5cblx0XHRcdGZvciAoaiA9IDA7IGogPCBpbnB1dExlbmd0aDsgKytqKSB7XG5cdFx0XHRcdGN1cnJlbnRWYWx1ZSA9IGlucHV0W2pdO1xuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPCBuICYmICsrZGVsdGEgPiBtYXhJbnQpIHtcblx0XHRcdFx0XHRlcnJvcignb3ZlcmZsb3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChjdXJyZW50VmFsdWUgPT0gbikge1xuXHRcdFx0XHRcdC8vIFJlcHJlc2VudCBkZWx0YSBhcyBhIGdlbmVyYWxpemVkIHZhcmlhYmxlLWxlbmd0aCBpbnRlZ2VyXG5cdFx0XHRcdFx0Zm9yIChxID0gZGVsdGEsIGsgPSBiYXNlOyAvKiBubyBjb25kaXRpb24gKi87IGsgKz0gYmFzZSkge1xuXHRcdFx0XHRcdFx0dCA9IGsgPD0gYmlhcyA/IHRNaW4gOiAoayA+PSBiaWFzICsgdE1heCA/IHRNYXggOiBrIC0gYmlhcyk7XG5cdFx0XHRcdFx0XHRpZiAocSA8IHQpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRxTWludXNUID0gcSAtIHQ7XG5cdFx0XHRcdFx0XHRiYXNlTWludXNUID0gYmFzZSAtIHQ7XG5cdFx0XHRcdFx0XHRvdXRwdXQucHVzaChcblx0XHRcdFx0XHRcdFx0c3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyh0ICsgcU1pbnVzVCAlIGJhc2VNaW51c1QsIDApKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdHEgPSBmbG9vcihxTWludXNUIC8gYmFzZU1pbnVzVCk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0b3V0cHV0LnB1c2goc3RyaW5nRnJvbUNoYXJDb2RlKGRpZ2l0VG9CYXNpYyhxLCAwKSkpO1xuXHRcdFx0XHRcdGJpYXMgPSBhZGFwdChkZWx0YSwgaGFuZGxlZENQQ291bnRQbHVzT25lLCBoYW5kbGVkQ1BDb3VudCA9PSBiYXNpY0xlbmd0aCk7XG5cdFx0XHRcdFx0ZGVsdGEgPSAwO1xuXHRcdFx0XHRcdCsraGFuZGxlZENQQ291bnQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0KytkZWx0YTtcblx0XHRcdCsrbjtcblxuXHRcdH1cblx0XHRyZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGEgUHVueWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3Ncblx0ICogdG8gVW5pY29kZS4gT25seSB0aGUgUHVueWNvZGVkIHBhcnRzIG9mIHRoZSBpbnB1dCB3aWxsIGJlIGNvbnZlcnRlZCwgaS5lLlxuXHQgKiBpdCBkb2Vzbid0IG1hdHRlciBpZiB5b3UgY2FsbCBpdCBvbiBhIHN0cmluZyB0aGF0IGhhcyBhbHJlYWR5IGJlZW5cblx0ICogY29udmVydGVkIHRvIFVuaWNvZGUuXG5cdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaW5wdXQgVGhlIFB1bnljb2RlZCBkb21haW4gbmFtZSBvciBlbWFpbCBhZGRyZXNzIHRvXG5cdCAqIGNvbnZlcnQgdG8gVW5pY29kZS5cblx0ICogQHJldHVybnMge1N0cmluZ30gVGhlIFVuaWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIFB1bnljb2RlXG5cdCAqIHN0cmluZy5cblx0ICovXG5cdGZ1bmN0aW9uIHRvVW5pY29kZShpbnB1dCkge1xuXHRcdHJldHVybiBtYXBEb21haW4oaW5wdXQsIGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdFx0cmV0dXJuIHJlZ2V4UHVueWNvZGUudGVzdChzdHJpbmcpXG5cdFx0XHRcdD8gZGVjb2RlKHN0cmluZy5zbGljZSg0KS50b0xvd2VyQ2FzZSgpKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBhIFVuaWNvZGUgc3RyaW5nIHJlcHJlc2VudGluZyBhIGRvbWFpbiBuYW1lIG9yIGFuIGVtYWlsIGFkZHJlc3MgdG9cblx0ICogUHVueWNvZGUuIE9ubHkgdGhlIG5vbi1BU0NJSSBwYXJ0cyBvZiB0aGUgZG9tYWluIG5hbWUgd2lsbCBiZSBjb252ZXJ0ZWQsXG5cdCAqIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWYgeW91IGNhbGwgaXQgd2l0aCBhIGRvbWFpbiB0aGF0J3MgYWxyZWFkeSBpblxuXHQgKiBBU0NJSS5cblx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpbnB1dCBUaGUgZG9tYWluIG5hbWUgb3IgZW1haWwgYWRkcmVzcyB0byBjb252ZXJ0LCBhcyBhXG5cdCAqIFVuaWNvZGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgUHVueWNvZGUgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIGRvbWFpbiBuYW1lIG9yXG5cdCAqIGVtYWlsIGFkZHJlc3MuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0FTQ0lJKGlucHV0KSB7XG5cdFx0cmV0dXJuIG1hcERvbWFpbihpbnB1dCwgZnVuY3Rpb24oc3RyaW5nKSB7XG5cdFx0XHRyZXR1cm4gcmVnZXhOb25BU0NJSS50ZXN0KHN0cmluZylcblx0XHRcdFx0PyAneG4tLScgKyBlbmNvZGUoc3RyaW5nKVxuXHRcdFx0XHQ6IHN0cmluZztcblx0XHR9KTtcblx0fVxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdC8qKiBEZWZpbmUgdGhlIHB1YmxpYyBBUEkgKi9cblx0cHVueWNvZGUgPSB7XG5cdFx0LyoqXG5cdFx0ICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IFB1bnljb2RlLmpzIHZlcnNpb24gbnVtYmVyLlxuXHRcdCAqIEBtZW1iZXJPZiBwdW55Y29kZVxuXHRcdCAqIEB0eXBlIFN0cmluZ1xuXHRcdCAqL1xuXHRcdCd2ZXJzaW9uJzogJzEuMy4yJyxcblx0XHQvKipcblx0XHQgKiBBbiBvYmplY3Qgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGZyb20gSmF2YVNjcmlwdCdzIGludGVybmFsIGNoYXJhY3RlclxuXHRcdCAqIHJlcHJlc2VudGF0aW9uIChVQ1MtMikgdG8gVW5pY29kZSBjb2RlIHBvaW50cywgYW5kIGJhY2suXG5cdFx0ICogQHNlZSA8aHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2Rpbmc+XG5cdFx0ICogQG1lbWJlck9mIHB1bnljb2RlXG5cdFx0ICogQHR5cGUgT2JqZWN0XG5cdFx0ICovXG5cdFx0J3VjczInOiB7XG5cdFx0XHQnZGVjb2RlJzogdWNzMmRlY29kZSxcblx0XHRcdCdlbmNvZGUnOiB1Y3MyZW5jb2RlXG5cdFx0fSxcblx0XHQnZGVjb2RlJzogZGVjb2RlLFxuXHRcdCdlbmNvZGUnOiBlbmNvZGUsXG5cdFx0J3RvQVNDSUknOiB0b0FTQ0lJLFxuXHRcdCd0b1VuaWNvZGUnOiB0b1VuaWNvZGVcblx0fTtcblxuXHQvKiogRXhwb3NlIGBwdW55Y29kZWAgKi9cblx0Ly8gU29tZSBBTUQgYnVpbGQgb3B0aW1pemVycywgbGlrZSByLmpzLCBjaGVjayBmb3Igc3BlY2lmaWMgY29uZGl0aW9uIHBhdHRlcm5zXG5cdC8vIGxpa2UgdGhlIGZvbGxvd2luZzpcblx0aWYgKFxuXHRcdHR5cGVvZiBkZWZpbmUgPT0gJ2Z1bmN0aW9uJyAmJlxuXHRcdHR5cGVvZiBkZWZpbmUuYW1kID09ICdvYmplY3QnICYmXG5cdFx0ZGVmaW5lLmFtZFxuXHQpIHtcblx0XHRkZWZpbmUoJ3B1bnljb2RlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gcHVueWNvZGU7XG5cdFx0fSk7XG5cdH0gZWxzZSBpZiAoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSkge1xuXHRcdGlmIChtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cykgeyAvLyBpbiBOb2RlLmpzIG9yIFJpbmdvSlMgdjAuOC4wK1xuXHRcdFx0ZnJlZU1vZHVsZS5leHBvcnRzID0gcHVueWNvZGU7XG5cdFx0fSBlbHNlIHsgLy8gaW4gTmFyd2hhbCBvciBSaW5nb0pTIHYwLjcuMC1cblx0XHRcdGZvciAoa2V5IGluIHB1bnljb2RlKSB7XG5cdFx0XHRcdHB1bnljb2RlLmhhc093blByb3BlcnR5KGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSBwdW55Y29kZVtrZXldKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSB7IC8vIGluIFJoaW5vIG9yIGEgd2ViIGJyb3dzZXJcblx0XHRyb290LnB1bnljb2RlID0gcHVueWNvZGU7XG5cdH1cblxufSh0aGlzKSk7XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyBJZiBvYmouaGFzT3duUHJvcGVydHkgaGFzIGJlZW4gb3ZlcnJpZGRlbiwgdGhlbiBjYWxsaW5nXG4vLyBvYmouaGFzT3duUHJvcGVydHkocHJvcCkgd2lsbCBicmVhay5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2pveWVudC9ub2RlL2lzc3Vlcy8xNzA3XG5mdW5jdGlvbiBoYXNPd25Qcm9wZXJ0eShvYmosIHByb3ApIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHFzLCBzZXAsIGVxLCBvcHRpb25zKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICB2YXIgb2JqID0ge307XG5cbiAgaWYgKHR5cGVvZiBxcyAhPT0gJ3N0cmluZycgfHwgcXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHZhciByZWdleHAgPSAvXFwrL2c7XG4gIHFzID0gcXMuc3BsaXQoc2VwKTtcblxuICB2YXIgbWF4S2V5cyA9IDEwMDA7XG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLm1heEtleXMgPT09ICdudW1iZXInKSB7XG4gICAgbWF4S2V5cyA9IG9wdGlvbnMubWF4S2V5cztcbiAgfVxuXG4gIHZhciBsZW4gPSBxcy5sZW5ndGg7XG4gIC8vIG1heEtleXMgPD0gMCBtZWFucyB0aGF0IHdlIHNob3VsZCBub3QgbGltaXQga2V5cyBjb3VudFxuICBpZiAobWF4S2V5cyA+IDAgJiYgbGVuID4gbWF4S2V5cykge1xuICAgIGxlbiA9IG1heEtleXM7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIHggPSBxc1tpXS5yZXBsYWNlKHJlZ2V4cCwgJyUyMCcpLFxuICAgICAgICBpZHggPSB4LmluZGV4T2YoZXEpLFxuICAgICAgICBrc3RyLCB2c3RyLCBrLCB2O1xuXG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICBrc3RyID0geC5zdWJzdHIoMCwgaWR4KTtcbiAgICAgIHZzdHIgPSB4LnN1YnN0cihpZHggKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAga3N0ciA9IHg7XG4gICAgICB2c3RyID0gJyc7XG4gICAgfVxuXG4gICAgayA9IGRlY29kZVVSSUNvbXBvbmVudChrc3RyKTtcbiAgICB2ID0gZGVjb2RlVVJJQ29tcG9uZW50KHZzdHIpO1xuXG4gICAgaWYgKCFoYXNPd25Qcm9wZXJ0eShvYmosIGspKSB7XG4gICAgICBvYmpba10gPSB2O1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheShvYmpba10pKSB7XG4gICAgICBvYmpba10ucHVzaCh2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqW2tdID0gW29ialtrXSwgdl07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoeHMpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHN0cmluZ2lmeVByaW1pdGl2ZSA9IGZ1bmN0aW9uKHYpIHtcbiAgc3dpdGNoICh0eXBlb2Ygdikge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gdjtcblxuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuIHYgPyAndHJ1ZScgOiAnZmFsc2UnO1xuXG4gICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgIHJldHVybiBpc0Zpbml0ZSh2KSA/IHYgOiAnJztcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gJyc7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLCBzZXAsIGVxLCBuYW1lKSB7XG4gIHNlcCA9IHNlcCB8fCAnJic7XG4gIGVxID0gZXEgfHwgJz0nO1xuICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgb2JqID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIG1hcChvYmplY3RLZXlzKG9iaiksIGZ1bmN0aW9uKGspIHtcbiAgICAgIHZhciBrcyA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUoaykpICsgZXE7XG4gICAgICBpZiAoaXNBcnJheShvYmpba10pKSB7XG4gICAgICAgIHJldHVybiBtYXAob2JqW2tdLCBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgcmV0dXJuIGtzICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZSh2KSk7XG4gICAgICAgIH0pLmpvaW4oc2VwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBrcyArIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUob2JqW2tdKSk7XG4gICAgICB9XG4gICAgfSkuam9pbihzZXApO1xuXG4gIH1cblxuICBpZiAoIW5hbWUpIHJldHVybiAnJztcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmdpZnlQcmltaXRpdmUobmFtZSkpICsgZXEgK1xuICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHN0cmluZ2lmeVByaW1pdGl2ZShvYmopKTtcbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoeHMpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4cykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5mdW5jdGlvbiBtYXAgKHhzLCBmKSB7XG4gIGlmICh4cy5tYXApIHJldHVybiB4cy5tYXAoZik7XG4gIHZhciByZXMgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgIHJlcy5wdXNoKGYoeHNbaV0sIGkpKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHJlcyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHJlcy5wdXNoKGtleSk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuZGVjb2RlID0gZXhwb3J0cy5wYXJzZSA9IHJlcXVpcmUoJy4vZGVjb2RlJyk7XG5leHBvcnRzLmVuY29kZSA9IGV4cG9ydHMuc3RyaW5naWZ5ID0gcmVxdWlyZSgnLi9lbmNvZGUnKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vbGliL19zdHJlYW1fZHVwbGV4LmpzXCIpXG4iLCIvLyBhIGR1cGxleCBzdHJlYW0gaXMganVzdCBhIHN0cmVhbSB0aGF0IGlzIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLlxuLy8gU2luY2UgSlMgZG9lc24ndCBoYXZlIG11bHRpcGxlIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UsIHRoaXMgY2xhc3Ncbi8vIHByb3RvdHlwYWxseSBpbmhlcml0cyBmcm9tIFJlYWRhYmxlLCBhbmQgdGhlbiBwYXJhc2l0aWNhbGx5IGZyb21cbi8vIFdyaXRhYmxlLlxuXG4ndXNlIHN0cmljdCc7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gIHJldHVybiBrZXlzO1xufVxuLyo8L3JlcGxhY2VtZW50PiovXG5cblxubW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgUmVhZGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fcmVhZGFibGUnKTtcbnZhciBXcml0YWJsZSA9IHJlcXVpcmUoJy4vX3N0cmVhbV93cml0YWJsZScpO1xuXG51dGlsLmluaGVyaXRzKER1cGxleCwgUmVhZGFibGUpO1xuXG52YXIga2V5cyA9IG9iamVjdEtleXMoV3JpdGFibGUucHJvdG90eXBlKTtcbmZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykge1xuICB2YXIgbWV0aG9kID0ga2V5c1t2XTtcbiAgaWYgKCFEdXBsZXgucHJvdG90eXBlW21ldGhvZF0pXG4gICAgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG59XG5cbmZ1bmN0aW9uIER1cGxleChvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKVxuICAgIHJldHVybiBuZXcgRHVwbGV4KG9wdGlvbnMpO1xuXG4gIFJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gIFdyaXRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7XG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWFkYWJsZSA9PT0gZmFsc2UpXG4gICAgdGhpcy5yZWFkYWJsZSA9IGZhbHNlO1xuXG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMud3JpdGFibGUgPT09IGZhbHNlKVxuICAgIHRoaXMud3JpdGFibGUgPSBmYWxzZTtcblxuICB0aGlzLmFsbG93SGFsZk9wZW4gPSB0cnVlO1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93SGFsZk9wZW4gPT09IGZhbHNlKVxuICAgIHRoaXMuYWxsb3dIYWxmT3BlbiA9IGZhbHNlO1xuXG4gIHRoaXMub25jZSgnZW5kJywgb25lbmQpO1xufVxuXG4vLyB0aGUgbm8taGFsZi1vcGVuIGVuZm9yY2VyXG5mdW5jdGlvbiBvbmVuZCgpIHtcbiAgLy8gaWYgd2UgYWxsb3cgaGFsZi1vcGVuIHN0YXRlLCBvciBpZiB0aGUgd3JpdGFibGUgc2lkZSBlbmRlZCxcbiAgLy8gdGhlbiB3ZSdyZSBvay5cbiAgaWYgKHRoaXMuYWxsb3dIYWxmT3BlbiB8fCB0aGlzLl93cml0YWJsZVN0YXRlLmVuZGVkKVxuICAgIHJldHVybjtcblxuICAvLyBubyBtb3JlIGRhdGEgY2FuIGJlIHdyaXR0ZW4uXG4gIC8vIEJ1dCBhbGxvdyBtb3JlIHdyaXRlcyB0byBoYXBwZW4gaW4gdGhpcyB0aWNrLlxuICBwcm9jZXNzTmV4dFRpY2sob25FbmROVCwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIG9uRW5kTlQoc2VsZikge1xuICBzZWxmLmVuZCgpO1xufVxuXG5mdW5jdGlvbiBmb3JFYWNoICh4cywgZikge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGYoeHNbaV0sIGkpO1xuICB9XG59XG4iLCIvLyBhIHBhc3N0aHJvdWdoIHN0cmVhbS5cbi8vIGJhc2ljYWxseSBqdXN0IHRoZSBtb3N0IG1pbmltYWwgc29ydCBvZiBUcmFuc2Zvcm0gc3RyZWFtLlxuLy8gRXZlcnkgd3JpdHRlbiBjaHVuayBnZXRzIG91dHB1dCBhcy1pcy5cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBhc3NUaHJvdWdoO1xuXG52YXIgVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9fc3RyZWFtX3RyYW5zZm9ybScpO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnV0aWwuaW5oZXJpdHMoUGFzc1Rocm91Z2gsIFRyYW5zZm9ybSk7XG5cbmZ1bmN0aW9uIFBhc3NUaHJvdWdoKG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFBhc3NUaHJvdWdoKSlcbiAgICByZXR1cm4gbmV3IFBhc3NUaHJvdWdoKG9wdGlvbnMpO1xuXG4gIFRyYW5zZm9ybS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufVxuXG5QYXNzVGhyb3VnaC5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgY2IobnVsbCwgY2h1bmspO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFkYWJsZTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBwcm9jZXNzTmV4dFRpY2sgPSByZXF1aXJlKCdwcm9jZXNzLW5leHRpY2stYXJncycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuUmVhZGFibGUuUmVhZGFibGVTdGF0ZSA9IFJlYWRhYmxlU3RhdGU7XG5cbnZhciBFRSA9IHJlcXVpcmUoJ2V2ZW50cycpO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIEVFbGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDtcbn07XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgU3RyZWFtO1xuKGZ1bmN0aW9uICgpe3RyeXtcbiAgU3RyZWFtID0gcmVxdWlyZSgnc3QnICsgJ3JlYW0nKTtcbn1jYXRjaChfKXt9ZmluYWxseXtcbiAgaWYgKCFTdHJlYW0pXG4gICAgU3RyZWFtID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xufX0oKSlcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGRlYnVnVXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbnZhciBkZWJ1ZztcbmlmIChkZWJ1Z1V0aWwgJiYgZGVidWdVdGlsLmRlYnVnbG9nKSB7XG4gIGRlYnVnID0gZGVidWdVdGlsLmRlYnVnbG9nKCdzdHJlYW0nKTtcbn0gZWxzZSB7XG4gIGRlYnVnID0gZnVuY3Rpb24gKCkge307XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIFN0cmluZ0RlY29kZXI7XG5cbnV0aWwuaW5oZXJpdHMoUmVhZGFibGUsIFN0cmVhbSk7XG5cbmZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIHZhciBEdXBsZXggPSByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnLiBVc2VkIHRvIG1ha2UgcmVhZChuKSBpZ25vcmUgbiBhbmQgdG9cbiAgLy8gbWFrZSBhbGwgdGhlIGJ1ZmZlciBtZXJnaW5nIGFuZCBsZW5ndGggY2hlY2tzIGdvIGF3YXlcbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cbiAgaWYgKHN0cmVhbSBpbnN0YW5jZW9mIER1cGxleClcbiAgICB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggaXQgc3RvcHMgY2FsbGluZyBfcmVhZCgpIHRvIGZpbGwgdGhlIGJ1ZmZlclxuICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIFwiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlclwiXG4gIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IChod20gfHwgaHdtID09PSAwKSA/IGh3bSA6IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+fnRoaXMuaGlnaFdhdGVyTWFyaztcblxuICB0aGlzLmJ1ZmZlciA9IFtdO1xuICB0aGlzLmxlbmd0aCA9IDA7XG4gIHRoaXMucGlwZXMgPSBudWxsO1xuICB0aGlzLnBpcGVzQ291bnQgPSAwO1xuICB0aGlzLmZsb3dpbmcgPSBudWxsO1xuICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlO1xuICB0aGlzLnJlYWRpbmcgPSBmYWxzZTtcblxuICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSxcbiAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnlcbiAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgXCJsYXRlclwiIHNob3VsZCBnZW5lcmFsbHkgYWxzb1xuICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC5cbiAgdGhpcy5zeW5jID0gdHJ1ZTtcblxuICAvLyB3aGVuZXZlciB3ZSByZXR1cm4gbnVsbCwgdGhlbiB3ZSBzZXQgYSBmbGFnIHRvIHNheVxuICAvLyB0aGF0IHdlJ3JlIGF3YWl0aW5nIGEgJ3JlYWRhYmxlJyBldmVudCBlbWlzc2lvbi5cbiAgdGhpcy5uZWVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgdGhpcy5yZWFkYWJsZUxpc3RlbmluZyA9IGZhbHNlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIHdoZW4gcGlwaW5nLCB3ZSBvbmx5IGNhcmUgYWJvdXQgJ3JlYWRhYmxlJyBldmVudHMgdGhhdCBoYXBwZW5cbiAgLy8gYWZ0ZXIgcmVhZCgpaW5nIGFsbCB0aGUgYnl0ZXMgYW5kIG5vdCBnZXR0aW5nIGFueSBwdXNoYmFjay5cbiAgdGhpcy5yYW5PdXQgPSBmYWxzZTtcblxuICAvLyB0aGUgbnVtYmVyIG9mIHdyaXRlcnMgdGhhdCBhcmUgYXdhaXRpbmcgYSBkcmFpbiBldmVudCBpbiAucGlwZSgpc1xuICB0aGlzLmF3YWl0RHJhaW4gPSAwO1xuXG4gIC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWRcbiAgdGhpcy5yZWFkaW5nTW9yZSA9IGZhbHNlO1xuXG4gIHRoaXMuZGVjb2RlciA9IG51bGw7XG4gIHRoaXMuZW5jb2RpbmcgPSBudWxsO1xuICBpZiAob3B0aW9ucy5lbmNvZGluZykge1xuICAgIGlmICghU3RyaW5nRGVjb2RlcilcbiAgICAgIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTdHJpbmdEZWNvZGVyKG9wdGlvbnMuZW5jb2RpbmcpO1xuICAgIHRoaXMuZW5jb2RpbmcgPSBvcHRpb25zLmVuY29kaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlKG9wdGlvbnMpIHtcbiAgdmFyIER1cGxleCA9IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUmVhZGFibGUpKVxuICAgIHJldHVybiBuZXcgUmVhZGFibGUob3B0aW9ucyk7XG5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIGxlZ2FjeVxuICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5yZWFkID09PSAnZnVuY3Rpb24nKVxuICAgIHRoaXMuX3JlYWQgPSBvcHRpb25zLnJlYWQ7XG5cbiAgU3RyZWFtLmNhbGwodGhpcyk7XG59XG5cbi8vIE1hbnVhbGx5IHNob3ZlIHNvbWV0aGluZyBpbnRvIHRoZSByZWFkKCkgYnVmZmVyLlxuLy8gVGhpcyByZXR1cm5zIHRydWUgaWYgdGhlIGhpZ2hXYXRlck1hcmsgaGFzIG5vdCBiZWVuIGhpdCB5ZXQsXG4vLyBzaW1pbGFyIHRvIGhvdyBXcml0YWJsZS53cml0ZSgpIHJldHVybnMgdHJ1ZSBpZiB5b3Ugc2hvdWxkXG4vLyB3cml0ZSgpIHNvbWUgbW9yZS5cblJlYWRhYmxlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcbiAgICBpZiAoZW5jb2RpbmcgIT09IHN0YXRlLmVuY29kaW5nKSB7XG4gICAgICBjaHVuayA9IG5ldyBCdWZmZXIoY2h1bmssIGVuY29kaW5nKTtcbiAgICAgIGVuY29kaW5nID0gJyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgZmFsc2UpO1xufTtcblxuLy8gVW5zaGlmdCBzaG91bGQgKmFsd2F5cyogYmUgc29tZXRoaW5nIGRpcmVjdGx5IG91dCBvZiByZWFkKClcblJlYWRhYmxlLnByb3RvdHlwZS51bnNoaWZ0ID0gZnVuY3Rpb24oY2h1bmspIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgc3RhdGUsIGNodW5rLCAnJywgdHJ1ZSk7XG59O1xuXG5SZWFkYWJsZS5wcm90b3R5cGUuaXNQYXVzZWQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZmxvd2luZyA9PT0gZmFsc2U7XG59O1xuXG5mdW5jdGlvbiByZWFkYWJsZUFkZENodW5rKHN0cmVhbSwgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgYWRkVG9Gcm9udCkge1xuICB2YXIgZXIgPSBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKTtcbiAgaWYgKGVyKSB7XG4gICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9IGVsc2UgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSk7XG4gIH0gZWxzZSBpZiAoc3RhdGUub2JqZWN0TW9kZSB8fCBjaHVuayAmJiBjaHVuay5sZW5ndGggPiAwKSB7XG4gICAgaWYgKHN0YXRlLmVuZGVkICYmICFhZGRUb0Zyb250KSB7XG4gICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnB1c2goKSBhZnRlciBFT0YnKTtcbiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGUpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUuZW5kRW1pdHRlZCAmJiBhZGRUb0Zyb250KSB7XG4gICAgICB2YXIgZSA9IG5ldyBFcnJvcignc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKTtcbiAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhYWRkVG9Gcm9udCAmJiAhZW5jb2RpbmcpXG4gICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG5cbiAgICAgIGlmICghYWRkVG9Gcm9udClcbiAgICAgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuXG4gICAgICAvLyBpZiB3ZSB3YW50IHRoZSBkYXRhIG5vdywganVzdCBlbWl0IGl0LlxuICAgICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoID09PSAwICYmICFzdGF0ZS5zeW5jKSB7XG4gICAgICAgIHN0cmVhbS5lbWl0KCdkYXRhJywgY2h1bmspO1xuICAgICAgICBzdHJlYW0ucmVhZCgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgYnVmZmVyIGluZm8uXG4gICAgICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICAgICAgaWYgKGFkZFRvRnJvbnQpXG4gICAgICAgICAgc3RhdGUuYnVmZmVyLnVuc2hpZnQoY2h1bmspO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuXG4gICAgICAgIGlmIChzdGF0ZS5uZWVkUmVhZGFibGUpXG4gICAgICAgICAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG4gICAgICB9XG5cbiAgICAgIG1heWJlUmVhZE1vcmUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKCFhZGRUb0Zyb250KSB7XG4gICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIG5lZWRNb3JlRGF0YShzdGF0ZSk7XG59XG5cblxuLy8gaWYgaXQncyBwYXN0IHRoZSBoaWdoIHdhdGVyIG1hcmssIHdlIGNhbiBwdXNoIGluIHNvbWUgbW9yZS5cbi8vIEFsc28sIGlmIHdlIGhhdmUgbm8gZGF0YSB5ZXQsIHdlIGNhbiBzdGFuZCBzb21lXG4vLyBtb3JlIGJ5dGVzLiAgVGhpcyBpcyB0byB3b3JrIGFyb3VuZCBjYXNlcyB3aGVyZSBod209MCxcbi8vIHN1Y2ggYXMgdGhlIHJlcGwuICBBbHNvLCBpZiB0aGUgcHVzaCgpIHRyaWdnZXJlZCBhXG4vLyByZWFkYWJsZSBldmVudCwgYW5kIHRoZSB1c2VyIGNhbGxlZCByZWFkKGxhcmdlTnVtYmVyKSBzdWNoIHRoYXRcbi8vIG5lZWRSZWFkYWJsZSB3YXMgc2V0LCB0aGVuIHdlIG91Z2h0IHRvIHB1c2ggbW9yZSwgc28gdGhhdCBhbm90aGVyXG4vLyAncmVhZGFibGUnIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkLlxuZnVuY3Rpb24gbmVlZE1vcmVEYXRhKHN0YXRlKSB7XG4gIHJldHVybiAhc3RhdGUuZW5kZWQgJiZcbiAgICAgICAgIChzdGF0ZS5uZWVkUmVhZGFibGUgfHxcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8XG4gICAgICAgICAgc3RhdGUubGVuZ3RoID09PSAwKTtcbn1cblxuLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG5SZWFkYWJsZS5wcm90b3R5cGUuc2V0RW5jb2RpbmcgPSBmdW5jdGlvbihlbmMpIHtcbiAgaWYgKCFTdHJpbmdEZWNvZGVyKVxuICAgIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIERvbid0IHJhaXNlIHRoZSBod20gPiA4TUJcbnZhciBNQVhfSFdNID0gMHg4MDAwMDA7XG5mdW5jdGlvbiBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKSB7XG4gIGlmIChuID49IE1BWF9IV00pIHtcbiAgICBuID0gTUFYX0hXTTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgdGhlIG5leHQgaGlnaGVzdCBwb3dlciBvZiAyXG4gICAgbi0tO1xuICAgIG4gfD0gbiA+Pj4gMTtcbiAgICBuIHw9IG4gPj4+IDI7XG4gICAgbiB8PSBuID4+PiA0O1xuICAgIG4gfD0gbiA+Pj4gODtcbiAgICBuIHw9IG4gPj4+IDE2O1xuICAgIG4rKztcbiAgfVxuICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gaG93TXVjaFRvUmVhZChuLCBzdGF0ZSkge1xuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKVxuICAgIHJldHVybiAwO1xuXG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKVxuICAgIHJldHVybiBuID09PSAwID8gMCA6IDE7XG5cbiAgaWYgKG4gPT09IG51bGwgfHwgaXNOYU4obikpIHtcbiAgICAvLyBvbmx5IGZsb3cgb25lIGJ1ZmZlciBhdCBhIHRpbWVcbiAgICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5idWZmZXIubGVuZ3RoKVxuICAgICAgcmV0dXJuIHN0YXRlLmJ1ZmZlclswXS5sZW5ndGg7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIHN0YXRlLmxlbmd0aDtcbiAgfVxuXG4gIGlmIChuIDw9IDApXG4gICAgcmV0dXJuIDA7XG5cbiAgLy8gSWYgd2UncmUgYXNraW5nIGZvciBtb3JlIHRoYW4gdGhlIHRhcmdldCBidWZmZXIgbGV2ZWwsXG4gIC8vIHRoZW4gcmFpc2UgdGhlIHdhdGVyIG1hcmsuICBCdW1wIHVwIHRvIHRoZSBuZXh0IGhpZ2hlc3RcbiAgLy8gcG93ZXIgb2YgMiwgdG8gcHJldmVudCBpbmNyZWFzaW5nIGl0IGV4Y2Vzc2l2ZWx5IGluIHRpbnlcbiAgLy8gYW1vdW50cy5cbiAgaWYgKG4gPiBzdGF0ZS5oaWdoV2F0ZXJNYXJrKVxuICAgIHN0YXRlLmhpZ2hXYXRlck1hcmsgPSBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKTtcblxuICAvLyBkb24ndCBoYXZlIHRoYXQgbXVjaC4gIHJldHVybiBudWxsLCB1bmxlc3Mgd2UndmUgZW5kZWQuXG4gIGlmIChuID4gc3RhdGUubGVuZ3RoKSB7XG4gICAgaWYgKCFzdGF0ZS5lbmRlZCkge1xuICAgICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICAgIHJldHVybiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3RhdGUubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuO1xufVxuXG4vLyB5b3UgY2FuIG92ZXJyaWRlIGVpdGhlciB0aGlzIG1ldGhvZCwgb3IgdGhlIGFzeW5jIF9yZWFkKG4pIGJlbG93LlxuUmVhZGFibGUucHJvdG90eXBlLnJlYWQgPSBmdW5jdGlvbihuKSB7XG4gIGRlYnVnKCdyZWFkJywgbik7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBuT3JpZyA9IG47XG5cbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuID4gMClcbiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcblxuICAvLyBpZiB3ZSdyZSBkb2luZyByZWFkKDApIHRvIHRyaWdnZXIgYSByZWFkYWJsZSBldmVudCwgYnV0IHdlXG4gIC8vIGFscmVhZHkgaGF2ZSBhIGJ1bmNoIG9mIGRhdGEgaW4gdGhlIGJ1ZmZlciwgdGhlbiBqdXN0IHRyaWdnZXJcbiAgLy8gdGhlICdyZWFkYWJsZScgZXZlbnQgYW5kIG1vdmUgb24uXG4gIGlmIChuID09PSAwICYmXG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgJiZcbiAgICAgIChzdGF0ZS5sZW5ndGggPj0gc3RhdGUuaGlnaFdhdGVyTWFyayB8fCBzdGF0ZS5lbmRlZCkpIHtcbiAgICBkZWJ1ZygncmVhZDogZW1pdFJlYWRhYmxlJywgc3RhdGUubGVuZ3RoLCBzdGF0ZS5lbmRlZCk7XG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5lbmRlZClcbiAgICAgIGVuZFJlYWRhYmxlKHRoaXMpO1xuICAgIGVsc2VcbiAgICAgIGVtaXRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTtcblxuICAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuXG4gIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7XG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMClcbiAgICAgIGVuZFJlYWRhYmxlKHRoaXMpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gQWxsIHRoZSBhY3R1YWwgY2h1bmsgZ2VuZXJhdGlvbiBsb2dpYyBuZWVkcyB0byBiZVxuICAvLyAqYmVsb3cqIHRoZSBjYWxsIHRvIF9yZWFkLiAgVGhlIHJlYXNvbiBpcyB0aGF0IGluIGNlcnRhaW5cbiAgLy8gc3ludGhldGljIHN0cmVhbSBjYXNlcywgc3VjaCBhcyBwYXNzdGhyb3VnaCBzdHJlYW1zLCBfcmVhZFxuICAvLyBtYXkgYmUgYSBjb21wbGV0ZWx5IHN5bmNocm9ub3VzIG9wZXJhdGlvbiB3aGljaCBtYXkgY2hhbmdlXG4gIC8vIHRoZSBzdGF0ZSBvZiB0aGUgcmVhZCBidWZmZXIsIHByb3ZpZGluZyBlbm91Z2ggZGF0YSB3aGVuXG4gIC8vIGJlZm9yZSB0aGVyZSB3YXMgKm5vdCogZW5vdWdoLlxuICAvL1xuICAvLyBTbywgdGhlIHN0ZXBzIGFyZTpcbiAgLy8gMS4gRmlndXJlIG91dCB3aGF0IHRoZSBzdGF0ZSBvZiB0aGluZ3Mgd2lsbCBiZSBhZnRlciB3ZSBkb1xuICAvLyBhIHJlYWQgZnJvbSB0aGUgYnVmZmVyLlxuICAvL1xuICAvLyAyLiBJZiB0aGF0IHJlc3VsdGluZyBzdGF0ZSB3aWxsIHRyaWdnZXIgYSBfcmVhZCwgdGhlbiBjYWxsIF9yZWFkLlxuICAvLyBOb3RlIHRoYXQgdGhpcyBtYXkgYmUgYXN5bmNocm9ub3VzLCBvciBzeW5jaHJvbm91cy4gIFllcywgaXQgaXNcbiAgLy8gZGVlcGx5IHVnbHkgdG8gd3JpdGUgQVBJcyB0aGlzIHdheSwgYnV0IHRoYXQgc3RpbGwgZG9lc24ndCBtZWFuXG4gIC8vIHRoYXQgdGhlIFJlYWRhYmxlIGNsYXNzIHNob3VsZCBiZWhhdmUgaW1wcm9wZXJseSwgYXMgc3RyZWFtcyBhcmVcbiAgLy8gZGVzaWduZWQgdG8gYmUgc3luYy9hc3luYyBhZ25vc3RpYy5cbiAgLy8gVGFrZSBub3RlIGlmIHRoZSBfcmVhZCBjYWxsIGlzIHN5bmMgb3IgYXN5bmMgKGllLCBpZiB0aGUgcmVhZCBjYWxsXG4gIC8vIGhhcyByZXR1cm5lZCB5ZXQpLCBzbyB0aGF0IHdlIGtub3cgd2hldGhlciBvciBub3QgaXQncyBzYWZlIHRvIGVtaXRcbiAgLy8gJ3JlYWRhYmxlJyBldGMuXG4gIC8vXG4gIC8vIDMuIEFjdHVhbGx5IHB1bGwgdGhlIHJlcXVlc3RlZCBjaHVua3Mgb3V0IG9mIHRoZSBidWZmZXIgYW5kIHJldHVybi5cblxuICAvLyBpZiB3ZSBuZWVkIGEgcmVhZGFibGUgZXZlbnQsIHRoZW4gd2UgbmVlZCB0byBkbyBzb21lIHJlYWRpbmcuXG4gIHZhciBkb1JlYWQgPSBzdGF0ZS5uZWVkUmVhZGFibGU7XG4gIGRlYnVnKCduZWVkIHJlYWRhYmxlJywgZG9SZWFkKTtcblxuICAvLyBpZiB3ZSBjdXJyZW50bHkgaGF2ZSBsZXNzIHRoYW4gdGhlIGhpZ2hXYXRlck1hcmssIHRoZW4gYWxzbyByZWFkIHNvbWVcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCB8fCBzdGF0ZS5sZW5ndGggLSBuIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykge1xuICAgIGRvUmVhZCA9IHRydWU7XG4gICAgZGVidWcoJ2xlbmd0aCBsZXNzIHRoYW4gd2F0ZXJtYXJrJywgZG9SZWFkKTtcbiAgfVxuXG4gIC8vIGhvd2V2ZXIsIGlmIHdlJ3ZlIGVuZGVkLCB0aGVuIHRoZXJlJ3Mgbm8gcG9pbnQsIGFuZCBpZiB3ZSdyZSBhbHJlYWR5XG4gIC8vIHJlYWRpbmcsIHRoZW4gaXQncyB1bm5lY2Vzc2FyeS5cbiAgaWYgKHN0YXRlLmVuZGVkIHx8IHN0YXRlLnJlYWRpbmcpIHtcbiAgICBkb1JlYWQgPSBmYWxzZTtcbiAgICBkZWJ1ZygncmVhZGluZyBvciBlbmRlZCcsIGRvUmVhZCk7XG4gIH1cblxuICBpZiAoZG9SZWFkKSB7XG4gICAgZGVidWcoJ2RvIHJlYWQnKTtcbiAgICBzdGF0ZS5yZWFkaW5nID0gdHJ1ZTtcbiAgICBzdGF0ZS5zeW5jID0gdHJ1ZTtcbiAgICAvLyBpZiB0aGUgbGVuZ3RoIGlzIGN1cnJlbnRseSB6ZXJvLCB0aGVuIHdlICpuZWVkKiBhIHJlYWRhYmxlIGV2ZW50LlxuICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApXG4gICAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIC8vIGNhbGwgaW50ZXJuYWwgcmVhZCBtZXRob2RcbiAgICB0aGlzLl9yZWFkKHN0YXRlLmhpZ2hXYXRlck1hcmspO1xuICAgIHN0YXRlLnN5bmMgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIElmIF9yZWFkIHB1c2hlZCBkYXRhIHN5bmNocm9ub3VzbHksIHRoZW4gYHJlYWRpbmdgIHdpbGwgYmUgZmFsc2UsXG4gIC8vIGFuZCB3ZSBuZWVkIHRvIHJlLWV2YWx1YXRlIGhvdyBtdWNoIGRhdGEgd2UgY2FuIHJldHVybiB0byB0aGUgdXNlci5cbiAgaWYgKGRvUmVhZCAmJiAhc3RhdGUucmVhZGluZylcbiAgICBuID0gaG93TXVjaFRvUmVhZChuT3JpZywgc3RhdGUpO1xuXG4gIHZhciByZXQ7XG4gIGlmIChuID4gMClcbiAgICByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7XG4gIGVsc2VcbiAgICByZXQgPSBudWxsO1xuXG4gIGlmIChyZXQgPT09IG51bGwpIHtcbiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIG4gPSAwO1xuICB9XG5cbiAgc3RhdGUubGVuZ3RoIC09IG47XG5cbiAgLy8gSWYgd2UgaGF2ZSBub3RoaW5nIGluIHRoZSBidWZmZXIsIHRoZW4gd2Ugd2FudCB0byBrbm93XG4gIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci5cbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiAhc3RhdGUuZW5kZWQpXG4gICAgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcblxuICAvLyBJZiB3ZSB0cmllZCB0byByZWFkKCkgcGFzdCB0aGUgRU9GLCB0aGVuIGVtaXQgZW5kIG9uIHRoZSBuZXh0IHRpY2suXG4gIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApXG4gICAgZW5kUmVhZGFibGUodGhpcyk7XG5cbiAgaWYgKHJldCAhPT0gbnVsbClcbiAgICB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpO1xuXG4gIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBjaHVua0ludmFsaWQoc3RhdGUsIGNodW5rKSB7XG4gIHZhciBlciA9IG51bGw7XG4gIGlmICghKEJ1ZmZlci5pc0J1ZmZlcihjaHVuaykpICYmXG4gICAgICB0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmXG4gICAgICBjaHVuayAhPT0gbnVsbCAmJlxuICAgICAgY2h1bmsgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICByZXR1cm4gZXI7XG59XG5cblxuZnVuY3Rpb24gb25Fb2ZDaHVuayhzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5lbmRlZCkgcmV0dXJuO1xuICBpZiAoc3RhdGUuZGVjb2Rlcikge1xuICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuICAgICAgc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuICAgICAgc3RhdGUubGVuZ3RoICs9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuICAgIH1cbiAgfVxuICBzdGF0ZS5lbmRlZCA9IHRydWU7XG5cbiAgLy8gZW1pdCAncmVhZGFibGUnIG5vdyB0byBtYWtlIHN1cmUgaXQgZ2V0cyBwaWNrZWQgdXAuXG4gIGVtaXRSZWFkYWJsZShzdHJlYW0pO1xufVxuXG4vLyBEb24ndCBlbWl0IHJlYWRhYmxlIHJpZ2h0IGF3YXkgaW4gc3luYyBtb2RlLCBiZWNhdXNlIHRoaXMgY2FuIHRyaWdnZXJcbi8vIGFub3RoZXIgcmVhZCgpIGNhbGwgPT4gc3RhY2sgb3ZlcmZsb3cuICBUaGlzIHdheSwgaXQgbWlnaHQgdHJpZ2dlclxuLy8gYSBuZXh0VGljayByZWN1cnNpb24gd2FybmluZywgYnV0IHRoYXQncyBub3Qgc28gYmFkLlxuZnVuY3Rpb24gZW1pdFJlYWRhYmxlKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIHN0YXRlLm5lZWRSZWFkYWJsZSA9IGZhbHNlO1xuICBpZiAoIXN0YXRlLmVtaXR0ZWRSZWFkYWJsZSkge1xuICAgIGRlYnVnKCdlbWl0UmVhZGFibGUnLCBzdGF0ZS5mbG93aW5nKTtcbiAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSB0cnVlO1xuICAgIGlmIChzdGF0ZS5zeW5jKVxuICAgICAgcHJvY2Vzc05leHRUaWNrKGVtaXRSZWFkYWJsZV8sIHN0cmVhbSk7XG4gICAgZWxzZVxuICAgICAgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG4gIGRlYnVnKCdlbWl0IHJlYWRhYmxlJyk7XG4gIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpO1xuICBmbG93KHN0cmVhbSk7XG59XG5cblxuLy8gYXQgdGhpcyBwb2ludCwgdGhlIHVzZXIgaGFzIHByZXN1bWFibHkgc2VlbiB0aGUgJ3JlYWRhYmxlJyBldmVudCxcbi8vIGFuZCBjYWxsZWQgcmVhZCgpIHRvIGNvbnN1bWUgc29tZSBkYXRhLiAgdGhhdCBtYXkgaGF2ZSB0cmlnZ2VyZWRcbi8vIGluIHR1cm4gYW5vdGhlciBfcmVhZChuKSBjYWxsLCBpbiB3aGljaCBjYXNlIHJlYWRpbmcgPSB0cnVlIGlmXG4vLyBpdCdzIGluIHByb2dyZXNzLlxuLy8gSG93ZXZlciwgaWYgd2UncmUgbm90IGVuZGVkLCBvciByZWFkaW5nLCBhbmQgdGhlIGxlbmd0aCA8IGh3bSxcbi8vIHRoZW4gZ28gYWhlYWQgYW5kIHRyeSB0byByZWFkIHNvbWUgbW9yZSBwcmVlbXB0aXZlbHkuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nTW9yZSkge1xuICAgIHN0YXRlLnJlYWRpbmdNb3JlID0gdHJ1ZTtcbiAgICBwcm9jZXNzTmV4dFRpY2sobWF5YmVSZWFkTW9yZV8sIHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1heWJlUmVhZE1vcmVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgd2hpbGUgKCFzdGF0ZS5yZWFkaW5nICYmICFzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5lbmRlZCAmJlxuICAgICAgICAgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykge1xuICAgIGRlYnVnKCdtYXliZVJlYWRNb3JlIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aClcbiAgICAgIC8vIGRpZG4ndCBnZXQgYW55IGRhdGEsIHN0b3Agc3Bpbm5pbmcuXG4gICAgICBicmVhaztcbiAgICBlbHNlXG4gICAgICBsZW4gPSBzdGF0ZS5sZW5ndGg7XG4gIH1cbiAgc3RhdGUucmVhZGluZ01vcmUgPSBmYWxzZTtcbn1cblxuLy8gYWJzdHJhY3QgbWV0aG9kLiAgdG8gYmUgb3ZlcnJpZGRlbiBpbiBzcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBjbGFzc2VzLlxuLy8gY2FsbCBjYihlciwgZGF0YSkgd2hlcmUgZGF0YSBpcyA8PSBuIGluIGxlbmd0aC5cbi8vIGZvciB2aXJ0dWFsIChub24tc3RyaW5nLCBub24tYnVmZmVyKSBzdHJlYW1zLCBcImxlbmd0aFwiIGlzIHNvbWV3aGF0XG4vLyBhcmJpdHJhcnksIGFuZCBwZXJoYXBzIG5vdCB2ZXJ5IG1lYW5pbmdmdWwuXG5SZWFkYWJsZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbihuKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpKTtcbn07XG5cblJlYWRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oZGVzdCwgcGlwZU9wdHMpIHtcbiAgdmFyIHNyYyA9IHRoaXM7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7XG4gICAgY2FzZSAwOlxuICAgICAgc3RhdGUucGlwZXMgPSBkZXN0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHN0YXRlLnBpcGVzLnB1c2goZGVzdCk7XG4gICAgICBicmVhaztcbiAgfVxuICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7XG4gIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7XG5cbiAgdmFyIGRvRW5kID0gKCFwaXBlT3B0cyB8fCBwaXBlT3B0cy5lbmQgIT09IGZhbHNlKSAmJlxuICAgICAgICAgICAgICBkZXN0ICE9PSBwcm9jZXNzLnN0ZG91dCAmJlxuICAgICAgICAgICAgICBkZXN0ICE9PSBwcm9jZXNzLnN0ZGVycjtcblxuICB2YXIgZW5kRm4gPSBkb0VuZCA/IG9uZW5kIDogY2xlYW51cDtcbiAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpXG4gICAgcHJvY2Vzc05leHRUaWNrKGVuZEZuKTtcbiAgZWxzZVxuICAgIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG5cbiAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpO1xuICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSkge1xuICAgIGRlYnVnKCdvbnVucGlwZScpO1xuICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7XG4gICAgICBjbGVhbnVwKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25lbmQoKSB7XG4gICAgZGVidWcoJ29uZW5kJyk7XG4gICAgZGVzdC5lbmQoKTtcbiAgfVxuXG4gIC8vIHdoZW4gdGhlIGRlc3QgZHJhaW5zLCBpdCByZWR1Y2VzIHRoZSBhd2FpdERyYWluIGNvdW50ZXJcbiAgLy8gb24gdGhlIHNvdXJjZS4gIFRoaXMgd291bGQgYmUgbW9yZSBlbGVnYW50IHdpdGggYSAub25jZSgpXG4gIC8vIGhhbmRsZXIgaW4gZmxvdygpLCBidXQgYWRkaW5nIGFuZCByZW1vdmluZyByZXBlYXRlZGx5IGlzXG4gIC8vIHRvbyBzbG93LlxuICB2YXIgb25kcmFpbiA9IHBpcGVPbkRyYWluKHNyYyk7XG4gIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG5cbiAgdmFyIGNsZWFuZWRVcCA9IGZhbHNlO1xuICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgIGRlYnVnKCdjbGVhbnVwJyk7XG4gICAgLy8gY2xlYW51cCBldmVudCBoYW5kbGVycyBvbmNlIHRoZSBwaXBlIGlzIGJyb2tlblxuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCd1bnBpcGUnLCBvbnVucGlwZSk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBvbmVuZCk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuXG4gICAgY2xlYW5lZFVwID0gdHJ1ZTtcblxuICAgIC8vIGlmIHRoZSByZWFkZXIgaXMgd2FpdGluZyBmb3IgYSBkcmFpbiBldmVudCBmcm9tIHRoaXNcbiAgICAvLyBzcGVjaWZpYyB3cml0ZXIsIHRoZW4gaXQgd291bGQgY2F1c2UgaXQgdG8gbmV2ZXIgc3RhcnRcbiAgICAvLyBmbG93aW5nIGFnYWluLlxuICAgIC8vIFNvLCBpZiB0aGlzIGlzIGF3YWl0aW5nIGEgZHJhaW4sIHRoZW4gd2UganVzdCBjYWxsIGl0IG5vdy5cbiAgICAvLyBJZiB3ZSBkb24ndCBrbm93LCB0aGVuIGFzc3VtZSB0aGF0IHdlIGFyZSB3YWl0aW5nIGZvciBvbmUuXG4gICAgaWYgKHN0YXRlLmF3YWl0RHJhaW4gJiZcbiAgICAgICAgKCFkZXN0Ll93cml0YWJsZVN0YXRlIHx8IGRlc3QuX3dyaXRhYmxlU3RhdGUubmVlZERyYWluKSlcbiAgICAgIG9uZHJhaW4oKTtcbiAgfVxuXG4gIHNyYy5vbignZGF0YScsIG9uZGF0YSk7XG4gIGZ1bmN0aW9uIG9uZGF0YShjaHVuaykge1xuICAgIGRlYnVnKCdvbmRhdGEnKTtcbiAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7XG4gICAgaWYgKGZhbHNlID09PSByZXQpIHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIHVucGlwZWQgZHVyaW5nIGBkZXN0LndyaXRlKClgLCBpdCBpcyBwb3NzaWJsZVxuICAgICAgLy8gdG8gZ2V0IHN0dWNrIGluIGEgcGVybWFuZW50bHkgcGF1c2VkIHN0YXRlIGlmIHRoYXQgd3JpdGVcbiAgICAgIC8vIGFsc28gcmV0dXJuZWQgZmFsc2UuXG4gICAgICBpZiAoc3RhdGUucGlwZXNDb3VudCA9PT0gMSAmJlxuICAgICAgICAgIHN0YXRlLnBpcGVzWzBdID09PSBkZXN0ICYmXG4gICAgICAgICAgc3JjLmxpc3RlbmVyQ291bnQoJ2RhdGEnKSA9PT0gMSAmJlxuICAgICAgICAgICFjbGVhbmVkVXApIHtcbiAgICAgICAgZGVidWcoJ2ZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZScsIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKTtcbiAgICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKztcbiAgICAgIH1cbiAgICAgIHNyYy5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBkZXN0IGhhcyBhbiBlcnJvciwgdGhlbiBzdG9wIHBpcGluZyBpbnRvIGl0LlxuICAvLyBob3dldmVyLCBkb24ndCBzdXBwcmVzcyB0aGUgdGhyb3dpbmcgYmVoYXZpb3IgZm9yIHRoaXMuXG4gIGZ1bmN0aW9uIG9uZXJyb3IoZXIpIHtcbiAgICBkZWJ1Zygnb25lcnJvcicsIGVyKTtcbiAgICB1bnBpcGUoKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGlmIChFRWxpc3RlbmVyQ291bnQoZGVzdCwgJ2Vycm9yJykgPT09IDApXG4gICAgICBkZXN0LmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9XG4gIC8vIFRoaXMgaXMgYSBicnV0YWxseSB1Z2x5IGhhY2sgdG8gbWFrZSBzdXJlIHRoYXQgb3VyIGVycm9yIGhhbmRsZXJcbiAgLy8gaXMgYXR0YWNoZWQgYmVmb3JlIGFueSB1c2VybGFuZCBvbmVzLiAgTkVWRVIgRE8gVEhJUy5cbiAgaWYgKCFkZXN0Ll9ldmVudHMgfHwgIWRlc3QuX2V2ZW50cy5lcnJvcilcbiAgICBkZXN0Lm9uKCdlcnJvcicsIG9uZXJyb3IpO1xuICBlbHNlIGlmIChpc0FycmF5KGRlc3QuX2V2ZW50cy5lcnJvcikpXG4gICAgZGVzdC5fZXZlbnRzLmVycm9yLnVuc2hpZnQob25lcnJvcik7XG4gIGVsc2VcbiAgICBkZXN0Ll9ldmVudHMuZXJyb3IgPSBbb25lcnJvciwgZGVzdC5fZXZlbnRzLmVycm9yXTtcblxuXG4gIC8vIEJvdGggY2xvc2UgYW5kIGZpbmlzaCBzaG91bGQgdHJpZ2dlciB1bnBpcGUsIGJ1dCBvbmx5IG9uY2UuXG4gIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZmluaXNoJywgb25maW5pc2gpO1xuICAgIHVucGlwZSgpO1xuICB9XG4gIGRlc3Qub25jZSgnY2xvc2UnLCBvbmNsb3NlKTtcbiAgZnVuY3Rpb24gb25maW5pc2goKSB7XG4gICAgZGVidWcoJ29uZmluaXNoJyk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcbiAgICB1bnBpcGUoKTtcbiAgfVxuICBkZXN0Lm9uY2UoJ2ZpbmlzaCcsIG9uZmluaXNoKTtcblxuICBmdW5jdGlvbiB1bnBpcGUoKSB7XG4gICAgZGVidWcoJ3VucGlwZScpO1xuICAgIHNyYy51bnBpcGUoZGVzdCk7XG4gIH1cblxuICAvLyB0ZWxsIHRoZSBkZXN0IHRoYXQgaXQncyBiZWluZyBwaXBlZCB0b1xuICBkZXN0LmVtaXQoJ3BpcGUnLCBzcmMpO1xuXG4gIC8vIHN0YXJ0IHRoZSBmbG93IGlmIGl0IGhhc24ndCBiZWVuIHN0YXJ0ZWQgYWxyZWFkeS5cbiAgaWYgKCFzdGF0ZS5mbG93aW5nKSB7XG4gICAgZGVidWcoJ3BpcGUgcmVzdW1lJyk7XG4gICAgc3JjLnJlc3VtZSgpO1xuICB9XG5cbiAgcmV0dXJuIGRlc3Q7XG59O1xuXG5mdW5jdGlvbiBwaXBlT25EcmFpbihzcmMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTtcbiAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbilcbiAgICAgIHN0YXRlLmF3YWl0RHJhaW4tLTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbiA9PT0gMCAmJiBFRWxpc3RlbmVyQ291bnQoc3JjLCAnZGF0YScpKSB7XG4gICAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTtcbiAgICAgIGZsb3coc3JjKTtcbiAgICB9XG4gIH07XG59XG5cblxuUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uKGRlc3QpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcblxuICAvLyBpZiB3ZSdyZSBub3QgcGlwaW5nIGFueXdoZXJlLCB0aGVuIGRvIG5vdGhpbmcuXG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAwKVxuICAgIHJldHVybiB0aGlzO1xuXG4gIC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS5cbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHtcbiAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS5cbiAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcylcbiAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgaWYgKCFkZXN0KVxuICAgICAgZGVzdCA9IHN0YXRlLnBpcGVzO1xuXG4gICAgLy8gZ290IGEgbWF0Y2guXG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICBpZiAoZGVzdClcbiAgICAgIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBzbG93IGNhc2UuIG11bHRpcGxlIHBpcGUgZGVzdGluYXRpb25zLlxuXG4gIGlmICghZGVzdCkge1xuICAgIC8vIHJlbW92ZSBhbGwuXG4gICAgdmFyIGRlc3RzID0gc3RhdGUucGlwZXM7XG4gICAgdmFyIGxlbiA9IHN0YXRlLnBpcGVzQ291bnQ7XG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspXG4gICAgICBkZXN0c1tpXS5lbWl0KCd1bnBpcGUnLCB0aGlzKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuXG4gIHZhciBpID0gaW5kZXhPZihzdGF0ZS5waXBlcywgZGVzdCk7XG4gIGlmIChpID09PSAtMSlcbiAgICByZXR1cm4gdGhpcztcblxuICBzdGF0ZS5waXBlcy5zcGxpY2UoaSwgMSk7XG4gIHN0YXRlLnBpcGVzQ291bnQgLT0gMTtcbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpXG4gICAgc3RhdGUucGlwZXMgPSBzdGF0ZS5waXBlc1swXTtcblxuICBkZXN0LmVtaXQoJ3VucGlwZScsIHRoaXMpO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gc2V0IHVwIGRhdGEgZXZlbnRzIGlmIHRoZXkgYXJlIGFza2VkIGZvclxuLy8gRW5zdXJlIHJlYWRhYmxlIGxpc3RlbmVycyBldmVudHVhbGx5IGdldCBzb21ldGhpbmdcblJlYWRhYmxlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKGV2LCBmbikge1xuICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7XG5cbiAgLy8gSWYgbGlzdGVuaW5nIHRvIGRhdGEsIGFuZCBpdCBoYXMgbm90IGV4cGxpY2l0bHkgYmVlbiBwYXVzZWQsXG4gIC8vIHRoZW4gY2FsbCByZXN1bWUgdG8gc3RhcnQgdGhlIGZsb3cgb2YgZGF0YSBvbiB0aGUgbmV4dCB0aWNrLlxuICBpZiAoZXYgPT09ICdkYXRhJyAmJiBmYWxzZSAhPT0gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKSB7XG4gICAgdGhpcy5yZXN1bWUoKTtcbiAgfVxuXG4gIGlmIChldiA9PT0gJ3JlYWRhYmxlJyAmJiB0aGlzLnJlYWRhYmxlKSB7XG4gICAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgICBpZiAoIXN0YXRlLnJlYWRhYmxlTGlzdGVuaW5nKSB7XG4gICAgICBzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZyA9IHRydWU7XG4gICAgICBzdGF0ZS5lbWl0dGVkUmVhZGFibGUgPSBmYWxzZTtcbiAgICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICAgICAgcHJvY2Vzc05leHRUaWNrKG5SZWFkaW5nTmV4dFRpY2ssIHRoaXMpO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMsIHN0YXRlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzO1xufTtcblJlYWRhYmxlLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IFJlYWRhYmxlLnByb3RvdHlwZS5vbjtcblxuZnVuY3Rpb24gblJlYWRpbmdOZXh0VGljayhzZWxmKSB7XG4gIGRlYnVnKCdyZWFkYWJsZSBuZXh0dGljayByZWFkIDAnKTtcbiAgc2VsZi5yZWFkKDApO1xufVxuXG4vLyBwYXVzZSgpIGFuZCByZXN1bWUoKSBhcmUgcmVtbmFudHMgb2YgdGhlIGxlZ2FjeSByZWFkYWJsZSBzdHJlYW0gQVBJXG4vLyBJZiB0aGUgdXNlciB1c2VzIHRoZW0sIHRoZW4gc3dpdGNoIGludG8gb2xkIG1vZGUuXG5SZWFkYWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIGlmICghc3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdyZXN1bWUnKTtcbiAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTtcbiAgICByZXN1bWUodGhpcywgc3RhdGUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZXN1bWVTY2hlZHVsZWQpIHtcbiAgICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSB0cnVlO1xuICAgIHByb2Nlc3NOZXh0VGljayhyZXN1bWVfLCBzdHJlYW0sIHN0YXRlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTtcbiAgICBzdHJlYW0ucmVhZCgwKTtcbiAgfVxuXG4gIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuICBzdHJlYW0uZW1pdCgncmVzdW1lJyk7XG4gIGZsb3coc3RyZWFtKTtcbiAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgIXN0YXRlLnJlYWRpbmcpXG4gICAgc3RyZWFtLnJlYWQoMCk7XG59XG5cblJlYWRhYmxlLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICBkZWJ1ZygnY2FsbCBwYXVzZSBmbG93aW5nPSVqJywgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKTtcbiAgaWYgKGZhbHNlICE9PSB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGF1c2UnKTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBmbG93KHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIGRlYnVnKCdmbG93Jywgc3RhdGUuZmxvd2luZyk7XG4gIGlmIChzdGF0ZS5mbG93aW5nKSB7XG4gICAgZG8ge1xuICAgICAgdmFyIGNodW5rID0gc3RyZWFtLnJlYWQoKTtcbiAgICB9IHdoaWxlIChudWxsICE9PSBjaHVuayAmJiBzdGF0ZS5mbG93aW5nKTtcbiAgfVxufVxuXG4vLyB3cmFwIGFuIG9sZC1zdHlsZSBzdHJlYW0gYXMgdGhlIGFzeW5jIGRhdGEgc291cmNlLlxuLy8gVGhpcyBpcyAqbm90KiBwYXJ0IG9mIHRoZSByZWFkYWJsZSBzdHJlYW0gaW50ZXJmYWNlLlxuLy8gSXQgaXMgYW4gdWdseSB1bmZvcnR1bmF0ZSBtZXNzIG9mIGhpc3RvcnkuXG5SZWFkYWJsZS5wcm90b3R5cGUud3JhcCA9IGZ1bmN0aW9uKHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSB0aGlzLl9yZWFkYWJsZVN0YXRlO1xuICB2YXIgcGF1c2VkID0gZmFsc2U7XG5cbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uKCkge1xuICAgIGRlYnVnKCd3cmFwcGVkIGVuZCcpO1xuICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFzdGF0ZS5lbmRlZCkge1xuICAgICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICAgIGlmIChjaHVuayAmJiBjaHVuay5sZW5ndGgpXG4gICAgICAgIHNlbGYucHVzaChjaHVuayk7XG4gICAgfVxuXG4gICAgc2VsZi5wdXNoKG51bGwpO1xuICB9KTtcblxuICBzdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbihjaHVuaykge1xuICAgIGRlYnVnKCd3cmFwcGVkIGRhdGEnKTtcbiAgICBpZiAoc3RhdGUuZGVjb2RlcilcbiAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG5cbiAgICAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGVcbiAgICBpZiAoc3RhdGUub2JqZWN0TW9kZSAmJiAoY2h1bmsgPT09IG51bGwgfHwgY2h1bmsgPT09IHVuZGVmaW5lZCkpXG4gICAgICByZXR1cm47XG4gICAgZWxzZSBpZiAoIXN0YXRlLm9iamVjdE1vZGUgJiYgKCFjaHVuayB8fCAhY2h1bmsubGVuZ3RoKSlcbiAgICAgIHJldHVybjtcblxuICAgIHZhciByZXQgPSBzZWxmLnB1c2goY2h1bmspO1xuICAgIGlmICghcmV0KSB7XG4gICAgICBwYXVzZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLnBhdXNlKCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBwcm94eSBhbGwgdGhlIG90aGVyIG1ldGhvZHMuXG4gIC8vIGltcG9ydGFudCB3aGVuIHdyYXBwaW5nIGZpbHRlcnMgYW5kIGR1cGxleGVzLlxuICBmb3IgKHZhciBpIGluIHN0cmVhbSkge1xuICAgIGlmICh0aGlzW2ldID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHN0cmVhbVtpXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpc1tpXSA9IGZ1bmN0aW9uKG1ldGhvZCkgeyByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7XG4gICAgICB9OyB9KGkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy5cbiAgdmFyIGV2ZW50cyA9IFsnZXJyb3InLCAnY2xvc2UnLCAnZGVzdHJveScsICdwYXVzZScsICdyZXN1bWUnXTtcbiAgZm9yRWFjaChldmVudHMsIGZ1bmN0aW9uKGV2KSB7XG4gICAgc3RyZWFtLm9uKGV2LCBzZWxmLmVtaXQuYmluZChzZWxmLCBldikpO1xuICB9KTtcblxuICAvLyB3aGVuIHdlIHRyeSB0byBjb25zdW1lIHNvbWUgbW9yZSBieXRlcywgc2ltcGx5IHVucGF1c2UgdGhlXG4gIC8vIHVuZGVybHlpbmcgc3RyZWFtLlxuICBzZWxmLl9yZWFkID0gZnVuY3Rpb24obikge1xuICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7XG4gICAgaWYgKHBhdXNlZCkge1xuICAgICAgcGF1c2VkID0gZmFsc2U7XG4gICAgICBzdHJlYW0ucmVzdW1lKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBzZWxmO1xufTtcblxuXG4vLyBleHBvc2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzIG9ubHkuXG5SZWFkYWJsZS5fZnJvbUxpc3QgPSBmcm9tTGlzdDtcblxuLy8gUGx1Y2sgb2ZmIG4gYnl0ZXMgZnJvbSBhbiBhcnJheSBvZiBidWZmZXJzLlxuLy8gTGVuZ3RoIGlzIHRoZSBjb21iaW5lZCBsZW5ndGhzIG9mIGFsbCB0aGUgYnVmZmVycyBpbiB0aGUgbGlzdC5cbmZ1bmN0aW9uIGZyb21MaXN0KG4sIHN0YXRlKSB7XG4gIHZhciBsaXN0ID0gc3RhdGUuYnVmZmVyO1xuICB2YXIgbGVuZ3RoID0gc3RhdGUubGVuZ3RoO1xuICB2YXIgc3RyaW5nTW9kZSA9ICEhc3RhdGUuZGVjb2RlcjtcbiAgdmFyIG9iamVjdE1vZGUgPSAhIXN0YXRlLm9iamVjdE1vZGU7XG4gIHZhciByZXQ7XG5cbiAgLy8gbm90aGluZyBpbiB0aGUgbGlzdCwgZGVmaW5pdGVseSBlbXB0eS5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKVxuICAgIHJldHVybiBudWxsO1xuXG4gIGlmIChsZW5ndGggPT09IDApXG4gICAgcmV0ID0gbnVsbDtcbiAgZWxzZSBpZiAob2JqZWN0TW9kZSlcbiAgICByZXQgPSBsaXN0LnNoaWZ0KCk7XG4gIGVsc2UgaWYgKCFuIHx8IG4gPj0gbGVuZ3RoKSB7XG4gICAgLy8gcmVhZCBpdCBhbGwsIHRydW5jYXRlIHRoZSBhcnJheS5cbiAgICBpZiAoc3RyaW5nTW9kZSlcbiAgICAgIHJldCA9IGxpc3Quam9pbignJyk7XG4gICAgZWxzZSBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICByZXQgPSBsaXN0WzBdO1xuICAgIGVsc2VcbiAgICAgIHJldCA9IEJ1ZmZlci5jb25jYXQobGlzdCwgbGVuZ3RoKTtcbiAgICBsaXN0Lmxlbmd0aCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gcmVhZCBqdXN0IHNvbWUgb2YgaXQuXG4gICAgaWYgKG4gPCBsaXN0WzBdLmxlbmd0aCkge1xuICAgICAgLy8ganVzdCB0YWtlIGEgcGFydCBvZiB0aGUgZmlyc3QgbGlzdCBpdGVtLlxuICAgICAgLy8gc2xpY2UgaXMgdGhlIHNhbWUgZm9yIGJ1ZmZlcnMgYW5kIHN0cmluZ3MuXG4gICAgICB2YXIgYnVmID0gbGlzdFswXTtcbiAgICAgIHJldCA9IGJ1Zi5zbGljZSgwLCBuKTtcbiAgICAgIGxpc3RbMF0gPSBidWYuc2xpY2Uobik7XG4gICAgfSBlbHNlIGlmIChuID09PSBsaXN0WzBdLmxlbmd0aCkge1xuICAgICAgLy8gZmlyc3QgbGlzdCBpcyBhIHBlcmZlY3QgbWF0Y2hcbiAgICAgIHJldCA9IGxpc3Quc2hpZnQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29tcGxleCBjYXNlLlxuICAgICAgLy8gd2UgaGF2ZSBlbm91Z2ggdG8gY292ZXIgaXQsIGJ1dCBpdCBzcGFucyBwYXN0IHRoZSBmaXJzdCBidWZmZXIuXG4gICAgICBpZiAoc3RyaW5nTW9kZSlcbiAgICAgICAgcmV0ID0gJyc7XG4gICAgICBlbHNlXG4gICAgICAgIHJldCA9IG5ldyBCdWZmZXIobik7XG5cbiAgICAgIHZhciBjID0gMDtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGlzdC5sZW5ndGg7IGkgPCBsICYmIGMgPCBuOyBpKyspIHtcbiAgICAgICAgdmFyIGJ1ZiA9IGxpc3RbMF07XG4gICAgICAgIHZhciBjcHkgPSBNYXRoLm1pbihuIC0gYywgYnVmLmxlbmd0aCk7XG5cbiAgICAgICAgaWYgKHN0cmluZ01vZGUpXG4gICAgICAgICAgcmV0ICs9IGJ1Zi5zbGljZSgwLCBjcHkpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgYnVmLmNvcHkocmV0LCBjLCAwLCBjcHkpO1xuXG4gICAgICAgIGlmIChjcHkgPCBidWYubGVuZ3RoKVxuICAgICAgICAgIGxpc3RbMF0gPSBidWYuc2xpY2UoY3B5KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcblxuICAgICAgICBjICs9IGNweTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZShzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXG4gIC8vIElmIHdlIGdldCBoZXJlIGJlZm9yZSBjb25zdW1pbmcgYWxsIHRoZSBieXRlcywgdGhlbiB0aGF0IGlzIGFcbiAgLy8gYnVnIGluIG5vZGUuICBTaG91bGQgbmV2ZXIgaGFwcGVuLlxuICBpZiAoc3RhdGUubGVuZ3RoID4gMClcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2VuZFJlYWRhYmxlIGNhbGxlZCBvbiBub24tZW1wdHkgc3RyZWFtJyk7XG5cbiAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkKSB7XG4gICAgc3RhdGUuZW5kZWQgPSB0cnVlO1xuICAgIHByb2Nlc3NOZXh0VGljayhlbmRSZWFkYWJsZU5ULCBzdGF0ZSwgc3RyZWFtKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZU5UKHN0YXRlLCBzdHJlYW0pIHtcbiAgLy8gQ2hlY2sgdGhhdCB3ZSBkaWRuJ3QgZ2V0IG9uZSBsYXN0IHVuc2hpZnQuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCAmJiBzdGF0ZS5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZS5lbmRFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0ucmVhZGFibGUgPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZW5kJyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9yRWFjaCAoeHMsIGYpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmKHhzW2ldLCBpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpbmRleE9mICh4cywgeCkge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHhzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGlmICh4c1tpXSA9PT0geCkgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuIiwiLy8gYSB0cmFuc2Zvcm0gc3RyZWFtIGlzIGEgcmVhZGFibGUvd3JpdGFibGUgc3RyZWFtIHdoZXJlIHlvdSBkb1xuLy8gc29tZXRoaW5nIHdpdGggdGhlIGRhdGEuICBTb21ldGltZXMgaXQncyBjYWxsZWQgYSBcImZpbHRlclwiLFxuLy8gYnV0IHRoYXQncyBub3QgYSBncmVhdCBuYW1lIGZvciBpdCwgc2luY2UgdGhhdCBpbXBsaWVzIGEgdGhpbmcgd2hlcmVcbi8vIHNvbWUgYml0cyBwYXNzIHRocm91Z2gsIGFuZCBvdGhlcnMgYXJlIHNpbXBseSBpZ25vcmVkLiAgKFRoYXQgd291bGRcbi8vIGJlIGEgdmFsaWQgZXhhbXBsZSBvZiBhIHRyYW5zZm9ybSwgb2YgY291cnNlLilcbi8vXG4vLyBXaGlsZSB0aGUgb3V0cHV0IGlzIGNhdXNhbGx5IHJlbGF0ZWQgdG8gdGhlIGlucHV0LCBpdCdzIG5vdCBhXG4vLyBuZWNlc3NhcmlseSBzeW1tZXRyaWMgb3Igc3luY2hyb25vdXMgdHJhbnNmb3JtYXRpb24uICBGb3IgZXhhbXBsZSxcbi8vIGEgemxpYiBzdHJlYW0gbWlnaHQgdGFrZSBtdWx0aXBsZSBwbGFpbi10ZXh0IHdyaXRlcygpLCBhbmQgdGhlblxuLy8gZW1pdCBhIHNpbmdsZSBjb21wcmVzc2VkIGNodW5rIHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLlxuLy9cbi8vIEhlcmUncyBob3cgdGhpcyB3b3Jrczpcbi8vXG4vLyBUaGUgVHJhbnNmb3JtIHN0cmVhbSBoYXMgYWxsIHRoZSBhc3BlY3RzIG9mIHRoZSByZWFkYWJsZSBhbmQgd3JpdGFibGVcbi8vIHN0cmVhbSBjbGFzc2VzLiAgV2hlbiB5b3Ugd3JpdGUoY2h1bmspLCB0aGF0IGNhbGxzIF93cml0ZShjaHVuayxjYilcbi8vIGludGVybmFsbHksIGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYSBsb3Qgb2YgcGVuZGluZyB3cml0ZXNcbi8vIGJ1ZmZlcmVkIHVwLiAgV2hlbiB5b3UgY2FsbCByZWFkKCksIHRoYXQgY2FsbHMgX3JlYWQobikgdW50aWxcbi8vIHRoZXJlJ3MgZW5vdWdoIHBlbmRpbmcgcmVhZGFibGUgZGF0YSBidWZmZXJlZCB1cC5cbi8vXG4vLyBJbiBhIHRyYW5zZm9ybSBzdHJlYW0sIHRoZSB3cml0dGVuIGRhdGEgaXMgcGxhY2VkIGluIGEgYnVmZmVyLiAgV2hlblxuLy8gX3JlYWQobikgaXMgY2FsbGVkLCBpdCB0cmFuc2Zvcm1zIHRoZSBxdWV1ZWQgdXAgZGF0YSwgY2FsbGluZyB0aGVcbi8vIGJ1ZmZlcmVkIF93cml0ZSBjYidzIGFzIGl0IGNvbnN1bWVzIGNodW5rcy4gIElmIGNvbnN1bWluZyBhIHNpbmdsZVxuLy8gd3JpdHRlbiBjaHVuayB3b3VsZCByZXN1bHQgaW4gbXVsdGlwbGUgb3V0cHV0IGNodW5rcywgdGhlbiB0aGUgZmlyc3Rcbi8vIG91dHB1dHRlZCBiaXQgY2FsbHMgdGhlIHJlYWRjYiwgYW5kIHN1YnNlcXVlbnQgY2h1bmtzIGp1c3QgZ28gaW50b1xuLy8gdGhlIHJlYWQgYnVmZmVyLCBhbmQgd2lsbCBjYXVzZSBpdCB0byBlbWl0ICdyZWFkYWJsZScgaWYgbmVjZXNzYXJ5LlxuLy9cbi8vIFRoaXMgd2F5LCBiYWNrLXByZXNzdXJlIGlzIGFjdHVhbGx5IGRldGVybWluZWQgYnkgdGhlIHJlYWRpbmcgc2lkZSxcbi8vIHNpbmNlIF9yZWFkIGhhcyB0byBiZSBjYWxsZWQgdG8gc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBjaHVuay4gIEhvd2V2ZXIsXG4vLyBhIHBhdGhvbG9naWNhbCBpbmZsYXRlIHR5cGUgb2YgdHJhbnNmb3JtIGNhbiBjYXVzZSBleGNlc3NpdmUgYnVmZmVyaW5nXG4vLyBoZXJlLiAgRm9yIGV4YW1wbGUsIGltYWdpbmUgYSBzdHJlYW0gd2hlcmUgZXZlcnkgYnl0ZSBvZiBpbnB1dCBpc1xuLy8gaW50ZXJwcmV0ZWQgYXMgYW4gaW50ZWdlciBmcm9tIDAtMjU1LCBhbmQgdGhlbiByZXN1bHRzIGluIHRoYXQgbWFueVxuLy8gYnl0ZXMgb2Ygb3V0cHV0LiAgV3JpdGluZyB0aGUgNCBieXRlcyB7ZmYsZmYsZmYsZmZ9IHdvdWxkIHJlc3VsdCBpblxuLy8gMWtiIG9mIGRhdGEgYmVpbmcgb3V0cHV0LiAgSW4gdGhpcyBjYXNlLCB5b3UgY291bGQgd3JpdGUgYSB2ZXJ5IHNtYWxsXG4vLyBhbW91bnQgb2YgaW5wdXQsIGFuZCBlbmQgdXAgd2l0aCBhIHZlcnkgbGFyZ2UgYW1vdW50IG9mIG91dHB1dC4gIEluXG4vLyBzdWNoIGEgcGF0aG9sb2dpY2FsIGluZmxhdGluZyBtZWNoYW5pc20sIHRoZXJlJ2QgYmUgbm8gd2F5IHRvIHRlbGxcbi8vIHRoZSBzeXN0ZW0gdG8gc3RvcCBkb2luZyB0aGUgdHJhbnNmb3JtLiAgQSBzaW5nbGUgNE1CIHdyaXRlIGNvdWxkXG4vLyBjYXVzZSB0aGUgc3lzdGVtIHRvIHJ1biBvdXQgb2YgbWVtb3J5LlxuLy9cbi8vIEhvd2V2ZXIsIGV2ZW4gaW4gc3VjaCBhIHBhdGhvbG9naWNhbCBjYXNlLCBvbmx5IGEgc2luZ2xlIHdyaXR0ZW4gY2h1bmtcbi8vIHdvdWxkIGJlIGNvbnN1bWVkLCBhbmQgdGhlbiB0aGUgcmVzdCB3b3VsZCB3YWl0ICh1bi10cmFuc2Zvcm1lZCkgdW50aWxcbi8vIHRoZSByZXN1bHRzIG9mIHRoZSBwcmV2aW91cyB0cmFuc2Zvcm1lZCBjaHVuayB3ZXJlIGNvbnN1bWVkLlxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNmb3JtO1xuXG52YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnV0aWwuaW5oZXJpdHMoVHJhbnNmb3JtLCBEdXBsZXgpO1xuXG5cbmZ1bmN0aW9uIFRyYW5zZm9ybVN0YXRlKHN0cmVhbSkge1xuICB0aGlzLmFmdGVyVHJhbnNmb3JtID0gZnVuY3Rpb24oZXIsIGRhdGEpIHtcbiAgICByZXR1cm4gYWZ0ZXJUcmFuc2Zvcm0oc3RyZWFtLCBlciwgZGF0YSk7XG4gIH07XG5cbiAgdGhpcy5uZWVkVHJhbnNmb3JtID0gZmFsc2U7XG4gIHRoaXMudHJhbnNmb3JtaW5nID0gZmFsc2U7XG4gIHRoaXMud3JpdGVjYiA9IG51bGw7XG4gIHRoaXMud3JpdGVjaHVuayA9IG51bGw7XG59XG5cbmZ1bmN0aW9uIGFmdGVyVHJhbnNmb3JtKHN0cmVhbSwgZXIsIGRhdGEpIHtcbiAgdmFyIHRzID0gc3RyZWFtLl90cmFuc2Zvcm1TdGF0ZTtcbiAgdHMudHJhbnNmb3JtaW5nID0gZmFsc2U7XG5cbiAgdmFyIGNiID0gdHMud3JpdGVjYjtcblxuICBpZiAoIWNiKVxuICAgIHJldHVybiBzdHJlYW0uZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ25vIHdyaXRlY2IgaW4gVHJhbnNmb3JtIGNsYXNzJykpO1xuXG4gIHRzLndyaXRlY2h1bmsgPSBudWxsO1xuICB0cy53cml0ZWNiID0gbnVsbDtcblxuICBpZiAoZGF0YSAhPT0gbnVsbCAmJiBkYXRhICE9PSB1bmRlZmluZWQpXG4gICAgc3RyZWFtLnB1c2goZGF0YSk7XG5cbiAgaWYgKGNiKVxuICAgIGNiKGVyKTtcblxuICB2YXIgcnMgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIHJzLnJlYWRpbmcgPSBmYWxzZTtcbiAgaWYgKHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgc3RyZWFtLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59XG5cblxuZnVuY3Rpb24gVHJhbnNmb3JtKG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFRyYW5zZm9ybSkpXG4gICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm0ob3B0aW9ucyk7XG5cbiAgRHVwbGV4LmNhbGwodGhpcywgb3B0aW9ucyk7XG5cbiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSBuZXcgVHJhbnNmb3JtU3RhdGUodGhpcyk7XG5cbiAgLy8gd2hlbiB0aGUgd3JpdGFibGUgc2lkZSBmaW5pc2hlcywgdGhlbiBmbHVzaCBvdXQgYW55dGhpbmcgcmVtYWluaW5nLlxuICB2YXIgc3RyZWFtID0gdGhpcztcblxuICAvLyBzdGFydCBvdXQgYXNraW5nIGZvciBhIHJlYWRhYmxlIGV2ZW50IG9uY2UgZGF0YSBpcyB0cmFuc2Zvcm1lZC5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXG4gIC8vIHdlIGhhdmUgaW1wbGVtZW50ZWQgdGhlIF9yZWFkIG1ldGhvZCwgYW5kIGRvbmUgdGhlIG90aGVyIHRoaW5nc1xuICAvLyB0aGF0IFJlYWRhYmxlIHdhbnRzIGJlZm9yZSB0aGUgZmlyc3QgX3JlYWQgY2FsbCwgc28gdW5zZXQgdGhlXG4gIC8vIHN5bmMgZ3VhcmQgZmxhZy5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZS5zeW5jID0gZmFsc2U7XG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudHJhbnNmb3JtID09PSAnZnVuY3Rpb24nKVxuICAgICAgdGhpcy5fdHJhbnNmb3JtID0gb3B0aW9ucy50cmFuc2Zvcm07XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZmx1c2ggPT09ICdmdW5jdGlvbicpXG4gICAgICB0aGlzLl9mbHVzaCA9IG9wdGlvbnMuZmx1c2g7XG4gIH1cblxuICB0aGlzLm9uY2UoJ3ByZWZpbmlzaCcsIGZ1bmN0aW9uKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fZmx1c2ggPT09ICdmdW5jdGlvbicpXG4gICAgICB0aGlzLl9mbHVzaChmdW5jdGlvbihlcikge1xuICAgICAgICBkb25lKHN0cmVhbSwgZXIpO1xuICAgICAgfSk7XG4gICAgZWxzZVxuICAgICAgZG9uZShzdHJlYW0pO1xuICB9KTtcbn1cblxuVHJhbnNmb3JtLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nKSB7XG4gIHRoaXMuX3RyYW5zZm9ybVN0YXRlLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7XG59O1xuXG4vLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiFcbi8vIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gaW4gaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vICdjaHVuaycgaXMgYW4gaW5wdXQgY2h1bmsuXG4vL1xuLy8gQ2FsbCBgcHVzaChuZXdDaHVuaylgIHRvIHBhc3MgYWxvbmcgdHJhbnNmb3JtZWQgb3V0cHV0XG4vLyB0byB0aGUgcmVhZGFibGUgc2lkZS4gIFlvdSBtYXkgY2FsbCAncHVzaCcgemVybyBvciBtb3JlIHRpbWVzLlxuLy9cbi8vIENhbGwgYGNiKGVycilgIHdoZW4geW91IGFyZSBkb25lIHdpdGggdGhpcyBjaHVuay4gIElmIHlvdSBwYXNzXG4vLyBhbiBlcnJvciwgdGhlbiB0aGF0J2xsIHB1dCB0aGUgaHVydCBvbiB0aGUgd2hvbGUgb3BlcmF0aW9uLiAgSWYgeW91XG4vLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpO1xufTtcblxuVHJhbnNmb3JtLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuICB0cy53cml0ZWNiID0gY2I7XG4gIHRzLndyaXRlY2h1bmsgPSBjaHVuaztcbiAgdHMud3JpdGVlbmNvZGluZyA9IGVuY29kaW5nO1xuICBpZiAoIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHZhciBycyA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKHRzLm5lZWRUcmFuc2Zvcm0gfHxcbiAgICAgICAgcnMubmVlZFJlYWRhYmxlIHx8XG4gICAgICAgIHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspXG4gICAgICB0aGlzLl9yZWFkKHJzLmhpZ2hXYXRlck1hcmspO1xuICB9XG59O1xuXG4vLyBEb2Vzbid0IG1hdHRlciB3aGF0IHRoZSBhcmdzIGFyZSBoZXJlLlxuLy8gX3RyYW5zZm9ybSBkb2VzIGFsbCB0aGUgd29yay5cbi8vIFRoYXQgd2UgZ290IGhlcmUgbWVhbnMgdGhhdCB0aGUgcmVhZGFibGUgc2lkZSB3YW50cyBtb3JlIGRhdGEuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl9yZWFkID0gZnVuY3Rpb24obikge1xuICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcblxuICBpZiAodHMud3JpdGVjaHVuayAhPT0gbnVsbCAmJiB0cy53cml0ZWNiICYmICF0cy50cmFuc2Zvcm1pbmcpIHtcbiAgICB0cy50cmFuc2Zvcm1pbmcgPSB0cnVlO1xuICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gbWFyayB0aGF0IHdlIG5lZWQgYSB0cmFuc2Zvcm0sIHNvIHRoYXQgYW55IGRhdGEgdGhhdCBjb21lcyBpblxuICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LlxuICAgIHRzLm5lZWRUcmFuc2Zvcm0gPSB0cnVlO1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIGRvbmUoc3RyZWFtLCBlcikge1xuICBpZiAoZXIpXG4gICAgcmV0dXJuIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcblxuICAvLyBpZiB0aGVyZSdzIG5vdGhpbmcgaW4gdGhlIHdyaXRlIGJ1ZmZlciwgdGhlbiB0aGF0IG1lYW5zXG4gIC8vIHRoYXQgbm90aGluZyBtb3JlIHdpbGwgZXZlciBiZSBwcm92aWRlZFxuICB2YXIgd3MgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7XG4gIHZhciB0cyA9IHN0cmVhbS5fdHJhbnNmb3JtU3RhdGU7XG5cbiAgaWYgKHdzLmxlbmd0aClcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMCcpO1xuXG4gIGlmICh0cy50cmFuc2Zvcm1pbmcpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdjYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nJyk7XG5cbiAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpO1xufVxuIiwiLy8gQSBiaXQgc2ltcGxlciB0aGFuIHJlYWRhYmxlIHN0cmVhbXMuXG4vLyBJbXBsZW1lbnQgYW4gYXN5bmMgLl93cml0ZShjaHVuaywgZW5jb2RpbmcsIGNiKSwgYW5kIGl0J2xsIGhhbmRsZSBhbGxcbi8vIHRoZSBkcmFpbiBldmVudCBlbWlzc2lvbiBhbmQgYnVmZmVyaW5nLlxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gV3JpdGFibGU7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgcHJvY2Vzc05leHRUaWNrID0gcmVxdWlyZSgncHJvY2Vzcy1uZXh0aWNrLWFyZ3MnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJykuQnVmZmVyO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbldyaXRhYmxlLldyaXRhYmxlU3RhdGUgPSBXcml0YWJsZVN0YXRlO1xuXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGludGVybmFsVXRpbCA9IHtcbiAgZGVwcmVjYXRlOiByZXF1aXJlKCd1dGlsLWRlcHJlY2F0ZScpXG59O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cblxuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIFN0cmVhbTtcbihmdW5jdGlvbiAoKXt0cnl7XG4gIFN0cmVhbSA9IHJlcXVpcmUoJ3N0JyArICdyZWFtJyk7XG59Y2F0Y2goXyl7fWZpbmFsbHl7XG4gIGlmICghU3RyZWFtKVxuICAgIFN0cmVhbSA9IHJlcXVpcmUoJ2V2ZW50cycpLkV2ZW50RW1pdHRlcjtcbn19KCkpXG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ2J1ZmZlcicpLkJ1ZmZlcjtcblxudXRpbC5pbmhlcml0cyhXcml0YWJsZSwgU3RyZWFtKTtcblxuZnVuY3Rpb24gbm9wKCkge31cblxuZnVuY3Rpb24gV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aGlzLmNodW5rID0gY2h1bms7XG4gIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgdGhpcy5jYWxsYmFjayA9IGNiO1xuICB0aGlzLm5leHQgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIC8vIG9iamVjdCBzdHJlYW0gZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIG9yIG5vdCB0aGlzIHN0cmVhbVxuICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuXG4gIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXG4gIGlmIChzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXgpXG4gICAgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7XG5cbiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZVxuICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIHRoYXQgd2UgYWx3YXlzIHJldHVybiBmYWxzZSBpZlxuICAvLyB0aGUgZW50aXJlIGJ1ZmZlciBpcyBub3QgZmx1c2hlZCBpbW1lZGlhdGVseSBvbiB3cml0ZSgpXG4gIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7XG4gIHZhciBkZWZhdWx0SHdtID0gdGhpcy5vYmplY3RNb2RlID8gMTYgOiAxNiAqIDEwMjQ7XG4gIHRoaXMuaGlnaFdhdGVyTWFyayA9IChod20gfHwgaHdtID09PSAwKSA/IGh3bSA6IGRlZmF1bHRId207XG5cbiAgLy8gY2FzdCB0byBpbnRzLlxuICB0aGlzLmhpZ2hXYXRlck1hcmsgPSB+fnRoaXMuaGlnaFdhdGVyTWFyaztcblxuICB0aGlzLm5lZWREcmFpbiA9IGZhbHNlO1xuICAvLyBhdCB0aGUgc3RhcnQgb2YgY2FsbGluZyBlbmQoKVxuICB0aGlzLmVuZGluZyA9IGZhbHNlO1xuICAvLyB3aGVuIGVuZCgpIGhhcyBiZWVuIGNhbGxlZCwgYW5kIHJldHVybmVkXG4gIHRoaXMuZW5kZWQgPSBmYWxzZTtcbiAgLy8gd2hlbiAnZmluaXNoJyBpcyBlbWl0dGVkXG4gIHRoaXMuZmluaXNoZWQgPSBmYWxzZTtcblxuICAvLyBzaG91bGQgd2UgZGVjb2RlIHN0cmluZ3MgaW50byBidWZmZXJzIGJlZm9yZSBwYXNzaW5nIHRvIF93cml0ZT9cbiAgLy8gdGhpcyBpcyBoZXJlIHNvIHRoYXQgc29tZSBub2RlLWNvcmUgc3RyZWFtcyBjYW4gb3B0aW1pemUgc3RyaW5nXG4gIC8vIGhhbmRsaW5nIGF0IGEgbG93ZXIgbGV2ZWwuXG4gIHZhciBub0RlY29kZSA9IG9wdGlvbnMuZGVjb2RlU3RyaW5ncyA9PT0gZmFsc2U7XG4gIHRoaXMuZGVjb2RlU3RyaW5ncyA9ICFub0RlY29kZTtcblxuICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG4gIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JztcblxuICAvLyBub3QgYW4gYWN0dWFsIGJ1ZmZlciB3ZSBrZWVwIHRyYWNrIG9mLCBidXQgYSBtZWFzdXJlbWVudFxuICAvLyBvZiBob3cgbXVjaCB3ZSdyZSB3YWl0aW5nIHRvIGdldCBwdXNoZWQgdG8gc29tZSB1bmRlcmx5aW5nXG4gIC8vIHNvY2tldCBvciBmaWxlLlxuICB0aGlzLmxlbmd0aCA9IDA7XG5cbiAgLy8gYSBmbGFnIHRvIHNlZSB3aGVuIHdlJ3JlIGluIHRoZSBtaWRkbGUgb2YgYSB3cml0ZS5cbiAgdGhpcy53cml0aW5nID0gZmFsc2U7XG5cbiAgLy8gd2hlbiB0cnVlIGFsbCB3cml0ZXMgd2lsbCBiZSBidWZmZXJlZCB1bnRpbCAudW5jb3JrKCkgY2FsbFxuICB0aGlzLmNvcmtlZCA9IDA7XG5cbiAgLy8gYSBmbGFnIHRvIGJlIGFibGUgdG8gdGVsbCBpZiB0aGUgb253cml0ZSBjYiBpcyBjYWxsZWQgaW1tZWRpYXRlbHksXG4gIC8vIG9yIG9uIGEgbGF0ZXIgdGljay4gIFdlIHNldCB0aGlzIHRvIHRydWUgYXQgZmlyc3QsIGJlY2F1c2UgYW55XG4gIC8vIGFjdGlvbnMgdGhhdCBzaG91bGRuJ3QgaGFwcGVuIHVudGlsIFwibGF0ZXJcIiBzaG91bGQgZ2VuZXJhbGx5IGFsc29cbiAgLy8gbm90IGhhcHBlbiBiZWZvcmUgdGhlIGZpcnN0IHdyaXRlIGNhbGwuXG4gIHRoaXMuc3luYyA9IHRydWU7XG5cbiAgLy8gYSBmbGFnIHRvIGtub3cgaWYgd2UncmUgcHJvY2Vzc2luZyBwcmV2aW91c2x5IGJ1ZmZlcmVkIGl0ZW1zLCB3aGljaFxuICAvLyBtYXkgY2FsbCB0aGUgX3dyaXRlKCkgY2FsbGJhY2sgaW4gdGhlIHNhbWUgdGljaywgc28gdGhhdCB3ZSBkb24ndFxuICAvLyBlbmQgdXAgaW4gYW4gb3ZlcmxhcHBlZCBvbndyaXRlIHNpdHVhdGlvbi5cbiAgdGhpcy5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7XG5cbiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQncyBwYXNzZWQgdG8gX3dyaXRlKGNodW5rLGNiKVxuICB0aGlzLm9ud3JpdGUgPSBmdW5jdGlvbihlcikge1xuICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7XG4gIH07XG5cbiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQgdGhlIHVzZXIgc3VwcGxpZXMgdG8gd3JpdGUoY2h1bmssZW5jb2RpbmcsY2IpXG4gIHRoaXMud3JpdGVjYiA9IG51bGw7XG5cbiAgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLlxuICB0aGlzLndyaXRlbGVuID0gMDtcblxuICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gIHRoaXMubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG5cbiAgLy8gbnVtYmVyIG9mIHBlbmRpbmcgdXNlci1zdXBwbGllZCB3cml0ZSBjYWxsYmFja3NcbiAgLy8gdGhpcyBtdXN0IGJlIDAgYmVmb3JlICdmaW5pc2gnIGNhbiBiZSBlbWl0dGVkXG4gIHRoaXMucGVuZGluZ2NiID0gMDtcblxuICAvLyBlbWl0IHByZWZpbmlzaCBpZiB0aGUgb25seSB0aGluZyB3ZSdyZSB3YWl0aW5nIGZvciBpcyBfd3JpdGUgY2JzXG4gIC8vIFRoaXMgaXMgcmVsZXZhbnQgZm9yIHN5bmNocm9ub3VzIFRyYW5zZm9ybSBzdHJlYW1zXG4gIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTtcblxuICAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpblxuICB0aGlzLmVycm9yRW1pdHRlZCA9IGZhbHNlO1xufVxuXG5Xcml0YWJsZVN0YXRlLnByb3RvdHlwZS5nZXRCdWZmZXIgPSBmdW5jdGlvbiB3cml0YWJsZVN0YXRlR2V0QnVmZmVyKCkge1xuICB2YXIgY3VycmVudCA9IHRoaXMuYnVmZmVyZWRSZXF1ZXN0O1xuICB2YXIgb3V0ID0gW107XG4gIHdoaWxlIChjdXJyZW50KSB7XG4gICAgb3V0LnB1c2goY3VycmVudCk7XG4gICAgY3VycmVudCA9IGN1cnJlbnQubmV4dDtcbiAgfVxuICByZXR1cm4gb3V0O1xufTtcblxuKGZ1bmN0aW9uICgpe3RyeSB7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGVTdGF0ZS5wcm90b3R5cGUsICdidWZmZXInLCB7XG4gIGdldDogaW50ZXJuYWxVdGlsLmRlcHJlY2F0ZShmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRCdWZmZXIoKTtcbiAgfSwgJ193cml0YWJsZVN0YXRlLmJ1ZmZlciBpcyBkZXByZWNhdGVkLiBVc2UgX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyICcgK1xuICAgICAnaW5zdGVhZC4nKVxufSk7XG59Y2F0Y2goXyl7fX0oKSk7XG5cblxuZnVuY3Rpb24gV3JpdGFibGUob3B0aW9ucykge1xuICB2YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIC8vIFdyaXRhYmxlIGN0b3IgaXMgYXBwbGllZCB0byBEdXBsZXhlcywgdGhvdWdoIHRoZXkncmUgbm90XG4gIC8vIGluc3RhbmNlb2YgV3JpdGFibGUsIHRoZXkncmUgaW5zdGFuY2VvZiBSZWFkYWJsZS5cbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFdyaXRhYmxlKSAmJiAhKHRoaXMgaW5zdGFuY2VvZiBEdXBsZXgpKVxuICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7XG5cbiAgdGhpcy5fd3JpdGFibGVTdGF0ZSA9IG5ldyBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIGxlZ2FjeS5cbiAgdGhpcy53cml0YWJsZSA9IHRydWU7XG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGUgPT09ICdmdW5jdGlvbicpXG4gICAgICB0aGlzLl93cml0ZSA9IG9wdGlvbnMud3JpdGU7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMud3JpdGV2ID09PSAnZnVuY3Rpb24nKVxuICAgICAgdGhpcy5fd3JpdGV2ID0gb3B0aW9ucy53cml0ZXY7XG4gIH1cblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuLy8gT3RoZXJ3aXNlIHBlb3BsZSBjYW4gcGlwZSBXcml0YWJsZSBzdHJlYW1zLCB3aGljaCBpcyBqdXN0IHdyb25nLlxuV3JpdGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignQ2Fubm90IHBpcGUuIE5vdCByZWFkYWJsZS4nKSk7XG59O1xuXG5cbmZ1bmN0aW9uIHdyaXRlQWZ0ZXJFbmQoc3RyZWFtLCBjYikge1xuICB2YXIgZXIgPSBuZXcgRXJyb3IoJ3dyaXRlIGFmdGVyIGVuZCcpO1xuICAvLyBUT0RPOiBkZWZlciBlcnJvciBldmVudHMgY29uc2lzdGVudGx5IGV2ZXJ5d2hlcmUsIG5vdCBqdXN0IHRoZSBjYlxuICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gIHByb2Nlc3NOZXh0VGljayhjYiwgZXIpO1xufVxuXG4vLyBJZiB3ZSBnZXQgc29tZXRoaW5nIHRoYXQgaXMgbm90IGEgYnVmZmVyLCBzdHJpbmcsIG51bGwsIG9yIHVuZGVmaW5lZCxcbi8vIGFuZCB3ZSdyZSBub3QgaW4gb2JqZWN0TW9kZSwgdGhlbiB0aGF0J3MgYW4gZXJyb3IuXG4vLyBPdGhlcndpc2Ugc3RyZWFtIGNodW5rcyBhcmUgYWxsIGNvbnNpZGVyZWQgdG8gYmUgb2YgbGVuZ3RoPTEsIGFuZCB0aGVcbi8vIHdhdGVybWFya3MgZGV0ZXJtaW5lIGhvdyBtYW55IG9iamVjdHMgdG8ga2VlcCBpbiB0aGUgYnVmZmVyLCByYXRoZXIgdGhhblxuLy8gaG93IG1hbnkgYnl0ZXMgb3IgY2hhcmFjdGVycy5cbmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7XG4gIHZhciB2YWxpZCA9IHRydWU7XG5cbiAgaWYgKCEoQnVmZmVyLmlzQnVmZmVyKGNodW5rKSkgJiZcbiAgICAgIHR5cGVvZiBjaHVuayAhPT0gJ3N0cmluZycgJiZcbiAgICAgIGNodW5rICE9PSBudWxsICYmXG4gICAgICBjaHVuayAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAhc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIHZhciBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgcHJvY2Vzc05leHRUaWNrKGNiLCBlcik7XG4gICAgdmFsaWQgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gdmFsaWQ7XG59XG5cbldyaXRhYmxlLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcbiAgdmFyIHJldCA9IGZhbHNlO1xuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKVxuICAgIGVuY29kaW5nID0gJ2J1ZmZlcic7XG4gIGVsc2UgaWYgKCFlbmNvZGluZylcbiAgICBlbmNvZGluZyA9IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcblxuICBpZiAodHlwZW9mIGNiICE9PSAnZnVuY3Rpb24nKVxuICAgIGNiID0gbm9wO1xuXG4gIGlmIChzdGF0ZS5lbmRlZClcbiAgICB3cml0ZUFmdGVyRW5kKHRoaXMsIGNiKTtcbiAgZWxzZSBpZiAodmFsaWRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGNiKSkge1xuICAgIHN0YXRlLnBlbmRpbmdjYisrO1xuICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5jb3JrID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cbiAgc3RhdGUuY29ya2VkKys7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUudW5jb3JrID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cbiAgaWYgKHN0YXRlLmNvcmtlZCkge1xuICAgIHN0YXRlLmNvcmtlZC0tO1xuXG4gICAgaWYgKCFzdGF0ZS53cml0aW5nICYmXG4gICAgICAgICFzdGF0ZS5jb3JrZWQgJiZcbiAgICAgICAgIXN0YXRlLmZpbmlzaGVkICYmXG4gICAgICAgICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmXG4gICAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdClcbiAgICAgIGNsZWFyQnVmZmVyKHRoaXMsIHN0YXRlKTtcbiAgfVxufTtcblxuV3JpdGFibGUucHJvdG90eXBlLnNldERlZmF1bHRFbmNvZGluZyA9IGZ1bmN0aW9uIHNldERlZmF1bHRFbmNvZGluZyhlbmNvZGluZykge1xuICAvLyBub2RlOjpQYXJzZUVuY29kaW5nKCkgcmVxdWlyZXMgbG93ZXIgY2FzZS5cbiAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpXG4gICAgZW5jb2RpbmcgPSBlbmNvZGluZy50b0xvd2VyQ2FzZSgpO1xuICBpZiAoIShbJ2hleCcsICd1dGY4JywgJ3V0Zi04JywgJ2FzY2lpJywgJ2JpbmFyeScsICdiYXNlNjQnLFxuJ3VjczInLCAndWNzLTInLCd1dGYxNmxlJywgJ3V0Zi0xNmxlJywgJ3JhdyddXG4uaW5kZXhPZigoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKSkgPiAtMSkpXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTtcbiAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZWZhdWx0RW5jb2RpbmcgPSBlbmNvZGluZztcbn07XG5cbmZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHtcbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmXG4gICAgICBzdGF0ZS5kZWNvZGVTdHJpbmdzICE9PSBmYWxzZSAmJlxuICAgICAgdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJykge1xuICAgIGNodW5rID0gbmV3IEJ1ZmZlcihjaHVuaywgZW5jb2RpbmcpO1xuICB9XG4gIHJldHVybiBjaHVuaztcbn1cblxuLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzXG4vLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZVxuLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy5cbmZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpO1xuXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoY2h1bmspKVxuICAgIGVuY29kaW5nID0gJ2J1ZmZlcic7XG4gIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblxuICBzdGF0ZS5sZW5ndGggKz0gbGVuO1xuXG4gIHZhciByZXQgPSBzdGF0ZS5sZW5ndGggPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICAvLyB3ZSBtdXN0IGVuc3VyZSB0aGF0IHByZXZpb3VzIG5lZWREcmFpbiB3aWxsIG5vdCBiZSByZXNldCB0byBmYWxzZS5cbiAgaWYgKCFyZXQpXG4gICAgc3RhdGUubmVlZERyYWluID0gdHJ1ZTtcblxuICBpZiAoc3RhdGUud3JpdGluZyB8fCBzdGF0ZS5jb3JrZWQpIHtcbiAgICB2YXIgbGFzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG5ldyBXcml0ZVJlcShjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgICBpZiAobGFzdCkge1xuICAgICAgbGFzdC5uZXh0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgd3JpdGV2LCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgc3RhdGUud3JpdGVsZW4gPSBsZW47XG4gIHN0YXRlLndyaXRlY2IgPSBjYjtcbiAgc3RhdGUud3JpdGluZyA9IHRydWU7XG4gIHN0YXRlLnN5bmMgPSB0cnVlO1xuICBpZiAod3JpdGV2KVxuICAgIHN0cmVhbS5fd3JpdGV2KGNodW5rLCBzdGF0ZS5vbndyaXRlKTtcbiAgZWxzZVxuICAgIHN0cmVhbS5fd3JpdGUoY2h1bmssIGVuY29kaW5nLCBzdGF0ZS5vbndyaXRlKTtcbiAgc3RhdGUuc3luYyA9IGZhbHNlO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKSB7XG4gIC0tc3RhdGUucGVuZGluZ2NiO1xuICBpZiAoc3luYylcbiAgICBwcm9jZXNzTmV4dFRpY2soY2IsIGVyKTtcbiAgZWxzZVxuICAgIGNiKGVyKTtcblxuICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xufVxuXG5mdW5jdGlvbiBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpIHtcbiAgc3RhdGUud3JpdGluZyA9IGZhbHNlO1xuICBzdGF0ZS53cml0ZWNiID0gbnVsbDtcbiAgc3RhdGUubGVuZ3RoIC09IHN0YXRlLndyaXRlbGVuO1xuICBzdGF0ZS53cml0ZWxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGUoc3RyZWFtLCBlcikge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7XG4gIHZhciBzeW5jID0gc3RhdGUuc3luYztcbiAgdmFyIGNiID0gc3RhdGUud3JpdGVjYjtcblxuICBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpO1xuXG4gIGlmIChlcilcbiAgICBvbndyaXRlRXJyb3Ioc3RyZWFtLCBzdGF0ZSwgc3luYywgZXIsIGNiKTtcbiAgZWxzZSB7XG4gICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXRcbiAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKTtcblxuICAgIGlmICghZmluaXNoZWQgJiZcbiAgICAgICAgIXN0YXRlLmNvcmtlZCAmJlxuICAgICAgICAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJlxuICAgICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpIHtcbiAgICAgIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cblxuICAgIGlmIChzeW5jKSB7XG4gICAgICBwcm9jZXNzTmV4dFRpY2soYWZ0ZXJXcml0ZSwgc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBhZnRlcldyaXRlKHN0cmVhbSwgc3RhdGUsIGZpbmlzaGVkLCBjYikge1xuICBpZiAoIWZpbmlzaGVkKVxuICAgIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlKTtcbiAgc3RhdGUucGVuZGluZ2NiLS07XG4gIGNiKCk7XG4gIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xufVxuXG4vLyBNdXN0IGZvcmNlIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBvbiBuZXh0VGljaywgc28gdGhhdCB3ZSBkb24ndFxuLy8gZW1pdCAnZHJhaW4nIGJlZm9yZSB0aGUgd3JpdGUoKSBjb25zdW1lciBnZXRzIHRoZSAnZmFsc2UnIHJldHVyblxuLy8gdmFsdWUsIGFuZCBoYXMgYSBjaGFuY2UgdG8gYXR0YWNoIGEgJ2RyYWluJyBsaXN0ZW5lci5cbmZ1bmN0aW9uIG9ud3JpdGVEcmFpbihzdHJlYW0sIHN0YXRlKSB7XG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUubmVlZERyYWluKSB7XG4gICAgc3RhdGUubmVlZERyYWluID0gZmFsc2U7XG4gICAgc3RyZWFtLmVtaXQoJ2RyYWluJyk7XG4gIH1cbn1cblxuXG4vLyBpZiB0aGVyZSdzIHNvbWV0aGluZyBpbiB0aGUgYnVmZmVyIHdhaXRpbmcsIHRoZW4gcHJvY2VzcyBpdFxuZnVuY3Rpb24gY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSkge1xuICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTtcbiAgdmFyIGVudHJ5ID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0O1xuXG4gIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7XG4gICAgLy8gRmFzdCBjYXNlLCB3cml0ZSBldmVyeXRoaW5nIHVzaW5nIF93cml0ZXYoKVxuICAgIHZhciBidWZmZXIgPSBbXTtcbiAgICB2YXIgY2JzID0gW107XG4gICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICBjYnMucHVzaChlbnRyeS5jYWxsYmFjayk7XG4gICAgICBidWZmZXIucHVzaChlbnRyeSk7XG4gICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gICAgfVxuXG4gICAgLy8gY291bnQgdGhlIG9uZSB3ZSBhcmUgYWRkaW5nLCBhcyB3ZWxsLlxuICAgIC8vIFRPRE8oaXNhYWNzKSBjbGVhbiB0aGlzIHVwXG4gICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCB0cnVlLCBzdGF0ZS5sZW5ndGgsIGJ1ZmZlciwgJycsIGZ1bmN0aW9uKGVycikge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgICAgIGNic1tpXShlcnIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gQ2xlYXIgYnVmZmVyXG4gIH0gZWxzZSB7XG4gICAgLy8gU2xvdyBjYXNlLCB3cml0ZSBjaHVua3Mgb25lLWJ5LW9uZVxuICAgIHdoaWxlIChlbnRyeSkge1xuICAgICAgdmFyIGNodW5rID0gZW50cnkuY2h1bms7XG4gICAgICB2YXIgZW5jb2RpbmcgPSBlbnRyeS5lbmNvZGluZztcbiAgICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrO1xuICAgICAgdmFyIGxlbiA9IHN0YXRlLm9iamVjdE1vZGUgPyAxIDogY2h1bmsubGVuZ3RoO1xuXG4gICAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIGZhbHNlLCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpO1xuICAgICAgZW50cnkgPSBlbnRyeS5uZXh0O1xuICAgICAgLy8gaWYgd2UgZGlkbid0IGNhbGwgdGhlIG9ud3JpdGUgaW1tZWRpYXRlbHksIHRoZW5cbiAgICAgIC8vIGl0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byB3YWl0IHVudGlsIGl0IGRvZXMuXG4gICAgICAvLyBhbHNvLCB0aGF0IG1lYW5zIHRoYXQgdGhlIGNodW5rIGFuZCBjYiBhcmUgY3VycmVudGx5XG4gICAgICAvLyBiZWluZyBwcm9jZXNzZWQsIHNvIG1vdmUgdGhlIGJ1ZmZlciBjb3VudGVyIHBhc3QgdGhlbS5cbiAgICAgIGlmIChzdGF0ZS53cml0aW5nKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlbnRyeSA9PT0gbnVsbClcbiAgICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICB9XG4gIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9IGVudHJ5O1xuICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7XG59XG5cbldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbihjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG5ldyBFcnJvcignbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuV3JpdGFibGUucHJvdG90eXBlLl93cml0ZXYgPSBudWxsO1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB2YXIgc3RhdGUgPSB0aGlzLl93cml0YWJsZVN0YXRlO1xuXG4gIGlmICh0eXBlb2YgY2h1bmsgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGNodW5rO1xuICAgIGNodW5rID0gbnVsbDtcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBlbmNvZGluZztcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH1cblxuICBpZiAoY2h1bmsgIT09IG51bGwgJiYgY2h1bmsgIT09IHVuZGVmaW5lZClcbiAgICB0aGlzLndyaXRlKGNodW5rLCBlbmNvZGluZyk7XG5cbiAgLy8gLmVuZCgpIGZ1bGx5IHVuY29ya3NcbiAgaWYgKHN0YXRlLmNvcmtlZCkge1xuICAgIHN0YXRlLmNvcmtlZCA9IDE7XG4gICAgdGhpcy51bmNvcmsoKTtcbiAgfVxuXG4gIC8vIGlnbm9yZSB1bm5lY2Vzc2FyeSBlbmQoKSBjYWxscy5cbiAgaWYgKCFzdGF0ZS5lbmRpbmcgJiYgIXN0YXRlLmZpbmlzaGVkKVxuICAgIGVuZFdyaXRhYmxlKHRoaXMsIHN0YXRlLCBjYik7XG59O1xuXG5cbmZ1bmN0aW9uIG5lZWRGaW5pc2goc3RhdGUpIHtcbiAgcmV0dXJuIChzdGF0ZS5lbmRpbmcgJiZcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggPT09IDAgJiZcbiAgICAgICAgICBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPT09IG51bGwgJiZcbiAgICAgICAgICAhc3RhdGUuZmluaXNoZWQgJiZcbiAgICAgICAgICAhc3RhdGUud3JpdGluZyk7XG59XG5cbmZ1bmN0aW9uIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucHJlZmluaXNoZWQpIHtcbiAgICBzdGF0ZS5wcmVmaW5pc2hlZCA9IHRydWU7XG4gICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIG5lZWQgPSBuZWVkRmluaXNoKHN0YXRlKTtcbiAgaWYgKG5lZWQpIHtcbiAgICBpZiAoc3RhdGUucGVuZGluZ2NiID09PSAwKSB7XG4gICAgICBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSk7XG4gICAgICBzdGF0ZS5maW5pc2hlZCA9IHRydWU7XG4gICAgICBzdHJlYW0uZW1pdCgnZmluaXNoJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByZWZpbmlzaChzdHJlYW0sIHN0YXRlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5lZWQ7XG59XG5cbmZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUsIGNiKSB7XG4gIHN0YXRlLmVuZGluZyA9IHRydWU7XG4gIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICBpZiAoY2IpIHtcbiAgICBpZiAoc3RhdGUuZmluaXNoZWQpXG4gICAgICBwcm9jZXNzTmV4dFRpY2soY2IpO1xuICAgIGVsc2VcbiAgICAgIHN0cmVhbS5vbmNlKCdmaW5pc2gnLCBjYik7XG4gIH1cbiAgc3RhdGUuZW5kZWQgPSB0cnVlO1xufVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9saWIvX3N0cmVhbV9wYXNzdGhyb3VnaC5qc1wiKVxuIiwidmFyIFN0cmVhbSA9IChmdW5jdGlvbiAoKXtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcmVxdWlyZSgnc3QnICsgJ3JlYW0nKTsgLy8gaGFjayB0byBmaXggYSBjaXJjdWxhciBkZXBlbmRlbmN5IGlzc3VlIHdoZW4gdXNlZCB3aXRoIGJyb3dzZXJpZnlcbiAgfSBjYXRjaChfKXt9XG59KCkpO1xuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcycpO1xuZXhwb3J0cy5TdHJlYW0gPSBTdHJlYW0gfHwgZXhwb3J0cztcbmV4cG9ydHMuUmVhZGFibGUgPSBleHBvcnRzO1xuZXhwb3J0cy5Xcml0YWJsZSA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fd3JpdGFibGUuanMnKTtcbmV4cG9ydHMuRHVwbGV4ID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9kdXBsZXguanMnKTtcbmV4cG9ydHMuVHJhbnNmb3JtID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMnKTtcbmV4cG9ydHMuUGFzc1Rocm91Z2ggPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzJyk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qc1wiKVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9saWIvX3N0cmVhbV93cml0YWJsZS5qc1wiKVxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbm1vZHVsZS5leHBvcnRzID0gU3RyZWFtO1xuXG52YXIgRUUgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuXG5pbmhlcml0cyhTdHJlYW0sIEVFKTtcblN0cmVhbS5SZWFkYWJsZSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9yZWFkYWJsZS5qcycpO1xuU3RyZWFtLldyaXRhYmxlID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL3dyaXRhYmxlLmpzJyk7XG5TdHJlYW0uRHVwbGV4ID0gcmVxdWlyZSgncmVhZGFibGUtc3RyZWFtL2R1cGxleC5qcycpO1xuU3RyZWFtLlRyYW5zZm9ybSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS90cmFuc2Zvcm0uanMnKTtcblN0cmVhbS5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcycpO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjQueFxuU3RyZWFtLlN0cmVhbSA9IFN0cmVhbTtcblxuXG5cbi8vIG9sZC1zdHlsZSBzdHJlYW1zLiAgTm90ZSB0aGF0IHRoZSBwaXBlIG1ldGhvZCAodGhlIG9ubHkgcmVsZXZhbnRcbi8vIHBhcnQgb2YgdGhpcyBjbGFzcykgaXMgb3ZlcnJpZGRlbiBpbiB0aGUgUmVhZGFibGUgY2xhc3MuXG5cbmZ1bmN0aW9uIFN0cmVhbSgpIHtcbiAgRUUuY2FsbCh0aGlzKTtcbn1cblxuU3RyZWFtLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24oZGVzdCwgb3B0aW9ucykge1xuICB2YXIgc291cmNlID0gdGhpcztcblxuICBmdW5jdGlvbiBvbmRhdGEoY2h1bmspIHtcbiAgICBpZiAoZGVzdC53cml0YWJsZSkge1xuICAgICAgaWYgKGZhbHNlID09PSBkZXN0LndyaXRlKGNodW5rKSAmJiBzb3VyY2UucGF1c2UpIHtcbiAgICAgICAgc291cmNlLnBhdXNlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc291cmNlLm9uKCdkYXRhJywgb25kYXRhKTtcblxuICBmdW5jdGlvbiBvbmRyYWluKCkge1xuICAgIGlmIChzb3VyY2UucmVhZGFibGUgJiYgc291cmNlLnJlc3VtZSkge1xuICAgICAgc291cmNlLnJlc3VtZSgpO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Qub24oJ2RyYWluJywgb25kcmFpbik7XG5cbiAgLy8gSWYgdGhlICdlbmQnIG9wdGlvbiBpcyBub3Qgc3VwcGxpZWQsIGRlc3QuZW5kKCkgd2lsbCBiZSBjYWxsZWQgd2hlblxuICAvLyBzb3VyY2UgZ2V0cyB0aGUgJ2VuZCcgb3IgJ2Nsb3NlJyBldmVudHMuICBPbmx5IGRlc3QuZW5kKCkgb25jZS5cbiAgaWYgKCFkZXN0Ll9pc1N0ZGlvICYmICghb3B0aW9ucyB8fCBvcHRpb25zLmVuZCAhPT0gZmFsc2UpKSB7XG4gICAgc291cmNlLm9uKCdlbmQnLCBvbmVuZCk7XG4gICAgc291cmNlLm9uKCdjbG9zZScsIG9uY2xvc2UpO1xuICB9XG5cbiAgdmFyIGRpZE9uRW5kID0gZmFsc2U7XG4gIGZ1bmN0aW9uIG9uZW5kKCkge1xuICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuO1xuICAgIGRpZE9uRW5kID0gdHJ1ZTtcblxuICAgIGRlc3QuZW5kKCk7XG4gIH1cblxuXG4gIGZ1bmN0aW9uIG9uY2xvc2UoKSB7XG4gICAgaWYgKGRpZE9uRW5kKSByZXR1cm47XG4gICAgZGlkT25FbmQgPSB0cnVlO1xuXG4gICAgaWYgKHR5cGVvZiBkZXN0LmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIGRlc3QuZGVzdHJveSgpO1xuICB9XG5cbiAgLy8gZG9uJ3QgbGVhdmUgZGFuZ2xpbmcgcGlwZXMgd2hlbiB0aGVyZSBhcmUgZXJyb3JzLlxuICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7XG4gICAgY2xlYW51cCgpO1xuICAgIGlmIChFRS5saXN0ZW5lckNvdW50KHRoaXMsICdlcnJvcicpID09PSAwKSB7XG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkIHN0cmVhbSBlcnJvciBpbiBwaXBlLlxuICAgIH1cbiAgfVxuXG4gIHNvdXJjZS5vbignZXJyb3InLCBvbmVycm9yKTtcbiAgZGVzdC5vbignZXJyb3InLCBvbmVycm9yKTtcblxuICAvLyByZW1vdmUgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMgdGhhdCB3ZXJlIGFkZGVkLlxuICBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZGF0YScsIG9uZGF0YSk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTtcblxuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgb25lbmQpO1xuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcblxuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuXG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdlbmQnLCBjbGVhbnVwKTtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgY2xlYW51cCk7XG5cbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApO1xuICB9XG5cbiAgc291cmNlLm9uKCdlbmQnLCBjbGVhbnVwKTtcbiAgc291cmNlLm9uKCdjbG9zZScsIGNsZWFudXApO1xuXG4gIGRlc3Qub24oJ2Nsb3NlJywgY2xlYW51cCk7XG5cbiAgZGVzdC5lbWl0KCdwaXBlJywgc291cmNlKTtcblxuICAvLyBBbGxvdyBmb3IgdW5peC1saWtlIHVzYWdlOiBBLnBpcGUoQikucGlwZShDKVxuICByZXR1cm4gZGVzdDtcbn07XG4iLCJ2YXIgQ2xpZW50UmVxdWVzdCA9IHJlcXVpcmUoJy4vbGliL3JlcXVlc3QnKVxudmFyIGV4dGVuZCA9IHJlcXVpcmUoJ3h0ZW5kJylcbnZhciBzdGF0dXNDb2RlcyA9IHJlcXVpcmUoJ2J1aWx0aW4tc3RhdHVzLWNvZGVzJylcbnZhciB1cmwgPSByZXF1aXJlKCd1cmwnKVxuXG52YXIgaHR0cCA9IGV4cG9ydHNcblxuaHR0cC5yZXF1ZXN0ID0gZnVuY3Rpb24gKG9wdHMsIGNiKSB7XG5cdGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpXG5cdFx0b3B0cyA9IHVybC5wYXJzZShvcHRzKVxuXHRlbHNlXG5cdFx0b3B0cyA9IGV4dGVuZChvcHRzKVxuXG5cdHZhciBwcm90b2NvbCA9IG9wdHMucHJvdG9jb2wgfHwgJydcblx0dmFyIGhvc3QgPSBvcHRzLmhvc3RuYW1lIHx8IG9wdHMuaG9zdFxuXHR2YXIgcG9ydCA9IG9wdHMucG9ydFxuXHR2YXIgcGF0aCA9IG9wdHMucGF0aCB8fCAnLydcblxuXHQvLyBOZWNlc3NhcnkgZm9yIElQdjYgYWRkcmVzc2VzXG5cdGlmIChob3N0ICYmIGhvc3QuaW5kZXhPZignOicpICE9PSAtMSlcblx0XHRob3N0ID0gJ1snICsgaG9zdCArICddJ1xuXG5cdC8vIFRoaXMgbWF5IGJlIGEgcmVsYXRpdmUgdXJsLiBUaGUgYnJvd3NlciBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gaW50ZXJwcmV0IGl0IGNvcnJlY3RseS5cblx0b3B0cy51cmwgPSAoaG9zdCA/IChwcm90b2NvbCArICcvLycgKyBob3N0KSA6ICcnKSArIChwb3J0ID8gJzonICsgcG9ydCA6ICcnKSArIHBhdGhcblx0b3B0cy5tZXRob2QgPSAob3B0cy5tZXRob2QgfHwgJ0dFVCcpLnRvVXBwZXJDYXNlKClcblx0b3B0cy5oZWFkZXJzID0gb3B0cy5oZWFkZXJzIHx8IHt9XG5cblx0Ly8gQWxzbyB2YWxpZCBvcHRzLmF1dGgsIG9wdHMubW9kZVxuXG5cdHZhciByZXEgPSBuZXcgQ2xpZW50UmVxdWVzdChvcHRzKVxuXHRpZiAoY2IpXG5cdFx0cmVxLm9uKCdyZXNwb25zZScsIGNiKVxuXHRyZXR1cm4gcmVxXG59XG5cbmh0dHAuZ2V0ID0gZnVuY3Rpb24gZ2V0IChvcHRzLCBjYikge1xuXHR2YXIgcmVxID0gaHR0cC5yZXF1ZXN0KG9wdHMsIGNiKVxuXHRyZXEuZW5kKClcblx0cmV0dXJuIHJlcVxufVxuXG5odHRwLkFnZW50ID0gZnVuY3Rpb24gKCkge31cbmh0dHAuQWdlbnQuZGVmYXVsdE1heFNvY2tldHMgPSA0XG5cbmh0dHAuU1RBVFVTX0NPREVTID0gc3RhdHVzQ29kZXNcblxuaHR0cC5NRVRIT0RTID0gW1xuXHQnQ0hFQ0tPVVQnLFxuXHQnQ09OTkVDVCcsXG5cdCdDT1BZJyxcblx0J0RFTEVURScsXG5cdCdHRVQnLFxuXHQnSEVBRCcsXG5cdCdMT0NLJyxcblx0J00tU0VBUkNIJyxcblx0J01FUkdFJyxcblx0J01LQUNUSVZJVFknLFxuXHQnTUtDT0wnLFxuXHQnTU9WRScsXG5cdCdOT1RJRlknLFxuXHQnT1BUSU9OUycsXG5cdCdQQVRDSCcsXG5cdCdQT1NUJyxcblx0J1BST1BGSU5EJyxcblx0J1BST1BQQVRDSCcsXG5cdCdQVVJHRScsXG5cdCdQVVQnLFxuXHQnUkVQT1JUJyxcblx0J1NFQVJDSCcsXG5cdCdTVUJTQ1JJQkUnLFxuXHQnVFJBQ0UnLFxuXHQnVU5MT0NLJyxcblx0J1VOU1VCU0NSSUJFJ1xuXSIsImV4cG9ydHMuZmV0Y2ggPSBpc0Z1bmN0aW9uKGdsb2JhbC5mZXRjaCkgJiYgaXNGdW5jdGlvbihnbG9iYWwuUmVhZGFibGVCeXRlU3RyZWFtKVxuXG5leHBvcnRzLmJsb2JDb25zdHJ1Y3RvciA9IGZhbHNlXG50cnkge1xuXHRuZXcgQmxvYihbbmV3IEFycmF5QnVmZmVyKDEpXSlcblx0ZXhwb3J0cy5ibG9iQ29uc3RydWN0b3IgPSB0cnVlXG59IGNhdGNoIChlKSB7fVxuXG52YXIgeGhyID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpXG4vLyBJZiBsb2NhdGlvbi5ob3N0IGlzIGVtcHR5LCBlLmcuIGlmIHRoaXMgcGFnZS93b3JrZXIgd2FzIGxvYWRlZFxuLy8gZnJvbSBhIEJsb2IsIHRoZW4gdXNlIGV4YW1wbGUuY29tIHRvIGF2b2lkIGFuIGVycm9yXG54aHIub3BlbignR0VUJywgZ2xvYmFsLmxvY2F0aW9uLmhvc3QgPyAnLycgOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScpXG5cbmZ1bmN0aW9uIGNoZWNrVHlwZVN1cHBvcnQgKHR5cGUpIHtcblx0dHJ5IHtcblx0XHR4aHIucmVzcG9uc2VUeXBlID0gdHlwZVxuXHRcdHJldHVybiB4aHIucmVzcG9uc2VUeXBlID09PSB0eXBlXG5cdH0gY2F0Y2ggKGUpIHt9XG5cdHJldHVybiBmYWxzZVxufVxuXG4vLyBGb3Igc29tZSBzdHJhbmdlIHJlYXNvbiwgU2FmYXJpIDcuMCByZXBvcnRzIHR5cGVvZiBnbG9iYWwuQXJyYXlCdWZmZXIgPT09ICdvYmplY3QnLlxuLy8gU2FmYXJpIDcuMSBhcHBlYXJzIHRvIGhhdmUgZml4ZWQgdGhpcyBidWcuXG52YXIgaGF2ZUFycmF5QnVmZmVyID0gdHlwZW9mIGdsb2JhbC5BcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCdcbnZhciBoYXZlU2xpY2UgPSBoYXZlQXJyYXlCdWZmZXIgJiYgaXNGdW5jdGlvbihnbG9iYWwuQXJyYXlCdWZmZXIucHJvdG90eXBlLnNsaWNlKVxuXG5leHBvcnRzLmFycmF5YnVmZmVyID0gaGF2ZUFycmF5QnVmZmVyICYmIGNoZWNrVHlwZVN1cHBvcnQoJ2FycmF5YnVmZmVyJylcbi8vIFRoZXNlIG5leHQgdHdvIHRlc3RzIHVuYXZvaWRhYmx5IHNob3cgd2FybmluZ3MgaW4gQ2hyb21lLiBTaW5jZSBmZXRjaCB3aWxsIGFsd2F5c1xuLy8gYmUgdXNlZCBpZiBpdCdzIGF2YWlsYWJsZSwganVzdCByZXR1cm4gZmFsc2UgZm9yIHRoZXNlIHRvIGF2b2lkIHRoZSB3YXJuaW5ncy5cbmV4cG9ydHMubXNzdHJlYW0gPSAhZXhwb3J0cy5mZXRjaCAmJiBoYXZlU2xpY2UgJiYgY2hlY2tUeXBlU3VwcG9ydCgnbXMtc3RyZWFtJylcbmV4cG9ydHMubW96Y2h1bmtlZGFycmF5YnVmZmVyID0gIWV4cG9ydHMuZmV0Y2ggJiYgaGF2ZUFycmF5QnVmZmVyICYmXG5cdGNoZWNrVHlwZVN1cHBvcnQoJ21vei1jaHVua2VkLWFycmF5YnVmZmVyJylcbmV4cG9ydHMub3ZlcnJpZGVNaW1lVHlwZSA9IGlzRnVuY3Rpb24oeGhyLm92ZXJyaWRlTWltZVR5cGUpXG5leHBvcnRzLnZiQXJyYXkgPSBpc0Z1bmN0aW9uKGdsb2JhbC5WQkFycmF5KVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uICh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nXG59XG5cbnhociA9IG51bGwgLy8gSGVscCBnY1xuIiwiLy8gdmFyIEJhc2U2NCA9IHJlcXVpcmUoJ0Jhc2U2NCcpXG52YXIgY2FwYWJpbGl0eSA9IHJlcXVpcmUoJy4vY2FwYWJpbGl0eScpXG52YXIgaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpXG52YXIgcmVzcG9uc2UgPSByZXF1aXJlKCcuL3Jlc3BvbnNlJylcbnZhciBzdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKVxuXG52YXIgSW5jb21pbmdNZXNzYWdlID0gcmVzcG9uc2UuSW5jb21pbmdNZXNzYWdlXG52YXIgclN0YXRlcyA9IHJlc3BvbnNlLnJlYWR5U3RhdGVzXG5cbmZ1bmN0aW9uIGRlY2lkZU1vZGUgKHByZWZlckJpbmFyeSkge1xuXHRpZiAoY2FwYWJpbGl0eS5mZXRjaCkge1xuXHRcdHJldHVybiAnZmV0Y2gnXG5cdH0gZWxzZSBpZiAoY2FwYWJpbGl0eS5tb3pjaHVua2VkYXJyYXlidWZmZXIpIHtcblx0XHRyZXR1cm4gJ21vei1jaHVua2VkLWFycmF5YnVmZmVyJ1xuXHR9IGVsc2UgaWYgKGNhcGFiaWxpdHkubXNzdHJlYW0pIHtcblx0XHRyZXR1cm4gJ21zLXN0cmVhbSdcblx0fSBlbHNlIGlmIChjYXBhYmlsaXR5LmFycmF5YnVmZmVyICYmIHByZWZlckJpbmFyeSkge1xuXHRcdHJldHVybiAnYXJyYXlidWZmZXInXG5cdH0gZWxzZSBpZiAoY2FwYWJpbGl0eS52YkFycmF5ICYmIHByZWZlckJpbmFyeSkge1xuXHRcdHJldHVybiAndGV4dDp2YmFycmF5J1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiAndGV4dCdcblx0fVxufVxuXG52YXIgQ2xpZW50UmVxdWVzdCA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9wdHMpIHtcblx0dmFyIHNlbGYgPSB0aGlzXG5cdHN0cmVhbS5Xcml0YWJsZS5jYWxsKHNlbGYpXG5cblx0c2VsZi5fb3B0cyA9IG9wdHNcblx0c2VsZi5fYm9keSA9IFtdXG5cdHNlbGYuX2hlYWRlcnMgPSB7fVxuXHRpZiAob3B0cy5hdXRoKVxuXHRcdHNlbGYuc2V0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgJ0Jhc2ljICcgKyBuZXcgQnVmZmVyKG9wdHMuYXV0aCkudG9TdHJpbmcoJ2Jhc2U2NCcpKVxuXHRPYmplY3Qua2V5cyhvcHRzLmhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRzZWxmLnNldEhlYWRlcihuYW1lLCBvcHRzLmhlYWRlcnNbbmFtZV0pXG5cdH0pXG5cblx0dmFyIHByZWZlckJpbmFyeVxuXHRpZiAob3B0cy5tb2RlID09PSAncHJlZmVyLXN0cmVhbWluZycpIHtcblx0XHQvLyBJZiBzdHJlYW1pbmcgaXMgYSBoaWdoIHByaW9yaXR5IGJ1dCBiaW5hcnkgY29tcGF0aWJpbGl0eSBhbmRcblx0XHQvLyB0aGUgYWNjdXJhY3kgb2YgdGhlICdjb250ZW50LXR5cGUnIGhlYWRlciBhcmVuJ3Rcblx0XHRwcmVmZXJCaW5hcnkgPSBmYWxzZVxuXHR9IGVsc2UgaWYgKG9wdHMubW9kZSA9PT0gJ2FsbG93LXdyb25nLWNvbnRlbnQtdHlwZScpIHtcblx0XHQvLyBJZiBzdHJlYW1pbmcgaXMgbW9yZSBpbXBvcnRhbnQgdGhhbiBwcmVzZXJ2aW5nIHRoZSAnY29udGVudC10eXBlJyBoZWFkZXJcblx0XHRwcmVmZXJCaW5hcnkgPSAhY2FwYWJpbGl0eS5vdmVycmlkZU1pbWVUeXBlXG5cdH0gZWxzZSBpZiAoIW9wdHMubW9kZSB8fCBvcHRzLm1vZGUgPT09ICdkZWZhdWx0JyB8fCBvcHRzLm1vZGUgPT09ICdwcmVmZXItZmFzdCcpIHtcblx0XHQvLyBVc2UgYmluYXJ5IGlmIHRleHQgc3RyZWFtaW5nIG1heSBjb3JydXB0IGRhdGEgb3IgdGhlIGNvbnRlbnQtdHlwZSBoZWFkZXIsIG9yIGZvciBzcGVlZFxuXHRcdHByZWZlckJpbmFyeSA9IHRydWVcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdmFsdWUgZm9yIG9wdHMubW9kZScpXG5cdH1cblx0c2VsZi5fbW9kZSA9IGRlY2lkZU1vZGUocHJlZmVyQmluYXJ5KVxuXG5cdHNlbGYub24oJ2ZpbmlzaCcsIGZ1bmN0aW9uICgpIHtcblx0XHRzZWxmLl9vbkZpbmlzaCgpXG5cdH0pXG59XG5cbmluaGVyaXRzKENsaWVudFJlcXVlc3QsIHN0cmVhbS5Xcml0YWJsZSlcblxuQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuc2V0SGVhZGVyID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG5cdHZhciBzZWxmID0gdGhpc1xuXHR2YXIgbG93ZXJOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpXG5cdC8vIFRoaXMgY2hlY2sgaXMgbm90IG5lY2Vzc2FyeSwgYnV0IGl0IHByZXZlbnRzIHdhcm5pbmdzIGZyb20gYnJvd3NlcnMgYWJvdXQgc2V0dGluZyB1bnNhZmVcblx0Ly8gaGVhZGVycy4gVG8gYmUgaG9uZXN0IEknbSBub3QgZW50aXJlbHkgc3VyZSBoaWRpbmcgdGhlc2Ugd2FybmluZ3MgaXMgYSBnb29kIHRoaW5nLCBidXRcblx0Ly8gaHR0cC1icm93c2VyaWZ5IGRpZCBpdCwgc28gSSB3aWxsIHRvby5cblx0aWYgKHVuc2FmZUhlYWRlcnMuaW5kZXhPZihsb3dlck5hbWUpICE9PSAtMSlcblx0XHRyZXR1cm5cblxuXHRzZWxmLl9oZWFkZXJzW2xvd2VyTmFtZV0gPSB7XG5cdFx0bmFtZTogbmFtZSxcblx0XHR2YWx1ZTogdmFsdWVcblx0fVxufVxuXG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5nZXRIZWFkZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuXHR2YXIgc2VsZiA9IHRoaXNcblx0cmV0dXJuIHNlbGYuX2hlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXS52YWx1ZVxufVxuXG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5yZW1vdmVIZWFkZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuXHR2YXIgc2VsZiA9IHRoaXNcblx0ZGVsZXRlIHNlbGYuX2hlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXVxufVxuXG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5fb25GaW5pc2ggPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBzZWxmID0gdGhpc1xuXG5cdGlmIChzZWxmLl9kZXN0cm95ZWQpXG5cdFx0cmV0dXJuXG5cdHZhciBvcHRzID0gc2VsZi5fb3B0c1xuXG5cdHZhciBoZWFkZXJzT2JqID0gc2VsZi5faGVhZGVyc1xuXHR2YXIgYm9keVxuXHRpZiAob3B0cy5tZXRob2QgPT09ICdQT1NUJyB8fCBvcHRzLm1ldGhvZCA9PT0gJ1BVVCcgfHwgb3B0cy5tZXRob2QgPT09ICdQQVRDSCcpIHtcblx0XHRpZiAoY2FwYWJpbGl0eS5ibG9iQ29uc3RydWN0b3IpIHtcblx0XHRcdGJvZHkgPSBuZXcgZ2xvYmFsLkJsb2Ioc2VsZi5fYm9keS5tYXAoZnVuY3Rpb24gKGJ1ZmZlcikge1xuXHRcdFx0XHRyZXR1cm4gYnVmZmVyLnRvQXJyYXlCdWZmZXIoKVxuXHRcdFx0fSksIHtcblx0XHRcdFx0dHlwZTogKGhlYWRlcnNPYmpbJ2NvbnRlbnQtdHlwZSddIHx8IHt9KS52YWx1ZSB8fCAnJ1xuXHRcdFx0fSlcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gZ2V0IHV0Zjggc3RyaW5nXG5cdFx0XHRib2R5ID0gQnVmZmVyLmNvbmNhdChzZWxmLl9ib2R5KS50b1N0cmluZygpXG5cdFx0fVxuXHR9XG5cblx0aWYgKHNlbGYuX21vZGUgPT09ICdmZXRjaCcpIHtcblx0XHR2YXIgaGVhZGVycyA9IE9iamVjdC5rZXlzKGhlYWRlcnNPYmopLm1hcChmdW5jdGlvbiAobmFtZSkge1xuXHRcdFx0cmV0dXJuIFtoZWFkZXJzT2JqW25hbWVdLm5hbWUsIGhlYWRlcnNPYmpbbmFtZV0udmFsdWVdXG5cdFx0fSlcblxuXHRcdGdsb2JhbC5mZXRjaChzZWxmLl9vcHRzLnVybCwge1xuXHRcdFx0bWV0aG9kOiBzZWxmLl9vcHRzLm1ldGhvZCxcblx0XHRcdGhlYWRlcnM6IGhlYWRlcnMsXG5cdFx0XHRib2R5OiBib2R5LFxuXHRcdFx0bW9kZTogJ2NvcnMnLFxuXHRcdFx0Y3JlZGVudGlhbHM6IG9wdHMud2l0aENyZWRlbnRpYWxzID8gJ2luY2x1ZGUnIDogJ3NhbWUtb3JpZ2luJ1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cdFx0XHRzZWxmLl9mZXRjaFJlc3BvbnNlID0gcmVzcG9uc2Vcblx0XHRcdHNlbGYuX2Nvbm5lY3QoKVxuXHRcdH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0XHRcdHNlbGYuZW1pdCgnZXJyb3InLCByZWFzb24pXG5cdFx0fSlcblx0fSBlbHNlIHtcblx0XHR2YXIgeGhyID0gc2VsZi5feGhyID0gbmV3IGdsb2JhbC5YTUxIdHRwUmVxdWVzdCgpXG5cdFx0dHJ5IHtcblx0XHRcdHhoci5vcGVuKHNlbGYuX29wdHMubWV0aG9kLCBzZWxmLl9vcHRzLnVybCwgdHJ1ZSlcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRzZWxmLmVtaXQoJ2Vycm9yJywgZXJyKVxuXHRcdFx0fSlcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdC8vIENhbid0IHNldCByZXNwb25zZVR5cGUgb24gcmVhbGx5IG9sZCBicm93c2Vyc1xuXHRcdGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIpXG5cdFx0XHR4aHIucmVzcG9uc2VUeXBlID0gc2VsZi5fbW9kZS5zcGxpdCgnOicpWzBdXG5cblx0XHRpZiAoJ3dpdGhDcmVkZW50aWFscycgaW4geGhyKVxuXHRcdFx0eGhyLndpdGhDcmVkZW50aWFscyA9ICEhb3B0cy53aXRoQ3JlZGVudGlhbHNcblxuXHRcdGlmIChzZWxmLl9tb2RlID09PSAndGV4dCcgJiYgJ292ZXJyaWRlTWltZVR5cGUnIGluIHhocilcblx0XHRcdHhoci5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkJylcblxuXHRcdE9iamVjdC5rZXlzKGhlYWRlcnNPYmopLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcblx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlcnNPYmpbbmFtZV0ubmFtZSwgaGVhZGVyc09ialtuYW1lXS52YWx1ZSlcblx0XHR9KVxuXG5cdFx0c2VsZi5fcmVzcG9uc2UgPSBudWxsXG5cdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHN3aXRjaCAoeGhyLnJlYWR5U3RhdGUpIHtcblx0XHRcdFx0Y2FzZSByU3RhdGVzLkxPQURJTkc6XG5cdFx0XHRcdGNhc2UgclN0YXRlcy5ET05FOlxuXHRcdFx0XHRcdHNlbGYuX29uWEhSUHJvZ3Jlc3MoKVxuXHRcdFx0XHRcdGJyZWFrXG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIE5lY2Vzc2FyeSBmb3Igc3RyZWFtaW5nIGluIEZpcmVmb3gsIHNpbmNlIHhoci5yZXNwb25zZSBpcyBPTkxZIGRlZmluZWRcblx0XHQvLyBpbiBvbnByb2dyZXNzLCBub3QgaW4gb25yZWFkeXN0YXRlY2hhbmdlIHdpdGggeGhyLnJlYWR5U3RhdGUgPSAzXG5cdFx0aWYgKHNlbGYuX21vZGUgPT09ICdtb3otY2h1bmtlZC1hcnJheWJ1ZmZlcicpIHtcblx0XHRcdHhoci5vbnByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRzZWxmLl9vblhIUlByb2dyZXNzKClcblx0XHRcdH1cblx0XHR9XG5cblx0XHR4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmIChzZWxmLl9kZXN0cm95ZWQpXG5cdFx0XHRcdHJldHVyblxuXHRcdFx0c2VsZi5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignWEhSIGVycm9yJykpXG5cdFx0fVxuXG5cdFx0dHJ5IHtcblx0XHRcdHhoci5zZW5kKGJvZHkpXG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0c2VsZi5lbWl0KCdlcnJvcicsIGVycilcblx0XHRcdH0pXG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdH1cbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgeGhyLnN0YXR1cyBpcyByZWFkYWJsZS4gRXZlbiB0aG91Z2ggdGhlIHNwZWMgc2F5cyBpdCBzaG91bGRcbiAqIGJlIGF2YWlsYWJsZSBpbiByZWFkeVN0YXRlIDMsIGFjY2Vzc2luZyBpdCB0aHJvd3MgYW4gZXhjZXB0aW9uIGluIElFOFxuICovXG5mdW5jdGlvbiBzdGF0dXNWYWxpZCAoeGhyKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuICh4aHIuc3RhdHVzICE9PSBudWxsKVxuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlXG5cdH1cbn1cblxuQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuX29uWEhSUHJvZ3Jlc3MgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBzZWxmID0gdGhpc1xuXG5cdGlmICghc3RhdHVzVmFsaWQoc2VsZi5feGhyKSB8fCBzZWxmLl9kZXN0cm95ZWQpXG5cdFx0cmV0dXJuXG5cblx0aWYgKCFzZWxmLl9yZXNwb25zZSlcblx0XHRzZWxmLl9jb25uZWN0KClcblxuXHRzZWxmLl9yZXNwb25zZS5fb25YSFJQcm9ncmVzcygpXG59XG5cbkNsaWVudFJlcXVlc3QucHJvdG90eXBlLl9jb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgc2VsZiA9IHRoaXNcblxuXHRpZiAoc2VsZi5fZGVzdHJveWVkKVxuXHRcdHJldHVyblxuXG5cdHNlbGYuX3Jlc3BvbnNlID0gbmV3IEluY29taW5nTWVzc2FnZShzZWxmLl94aHIsIHNlbGYuX2ZldGNoUmVzcG9uc2UsIHNlbGYuX21vZGUpXG5cdHNlbGYuZW1pdCgncmVzcG9uc2UnLCBzZWxmLl9yZXNwb25zZSlcbn1cblxuQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuX3dyaXRlID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcblx0dmFyIHNlbGYgPSB0aGlzXG5cblx0c2VsZi5fYm9keS5wdXNoKGNodW5rKVxuXHRjYigpXG59XG5cbkNsaWVudFJlcXVlc3QucHJvdG90eXBlLmFib3J0ID0gQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIHNlbGYgPSB0aGlzXG5cdHNlbGYuX2Rlc3Ryb3llZCA9IHRydWVcblx0aWYgKHNlbGYuX3Jlc3BvbnNlKVxuXHRcdHNlbGYuX3Jlc3BvbnNlLl9kZXN0cm95ZWQgPSB0cnVlXG5cdGlmIChzZWxmLl94aHIpXG5cdFx0c2VsZi5feGhyLmFib3J0KClcblx0Ly8gQ3VycmVudGx5LCB0aGVyZSBpc24ndCBhIHdheSB0byB0cnVseSBhYm9ydCBhIGZldGNoLlxuXHQvLyBJZiB5b3UgbGlrZSBiaWtlc2hlZGRpbmcsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2hhdHdnL2ZldGNoL2lzc3Vlcy8yN1xufVxuXG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoZGF0YSwgZW5jb2RpbmcsIGNiKSB7XG5cdHZhciBzZWxmID0gdGhpc1xuXHRpZiAodHlwZW9mIGRhdGEgPT09ICdmdW5jdGlvbicpIHtcblx0XHRjYiA9IGRhdGFcblx0XHRkYXRhID0gdW5kZWZpbmVkXG5cdH1cblxuXHRzdHJlYW0uV3JpdGFibGUucHJvdG90eXBlLmVuZC5jYWxsKHNlbGYsIGRhdGEsIGVuY29kaW5nLCBjYilcbn1cblxuQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuZmx1c2hIZWFkZXJzID0gZnVuY3Rpb24gKCkge31cbkNsaWVudFJlcXVlc3QucHJvdG90eXBlLnNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7fVxuQ2xpZW50UmVxdWVzdC5wcm90b3R5cGUuc2V0Tm9EZWxheSA9IGZ1bmN0aW9uICgpIHt9XG5DbGllbnRSZXF1ZXN0LnByb3RvdHlwZS5zZXRTb2NrZXRLZWVwQWxpdmUgPSBmdW5jdGlvbiAoKSB7fVxuXG4vLyBUYWtlbiBmcm9tIGh0dHA6Ly93d3cudzMub3JnL1RSL1hNTEh0dHBSZXF1ZXN0LyN0aGUtc2V0cmVxdWVzdGhlYWRlciUyOCUyOS1tZXRob2RcbnZhciB1bnNhZmVIZWFkZXJzID0gW1xuXHQnYWNjZXB0LWNoYXJzZXQnLFxuXHQnYWNjZXB0LWVuY29kaW5nJyxcblx0J2FjY2Vzcy1jb250cm9sLXJlcXVlc3QtaGVhZGVycycsXG5cdCdhY2Nlc3MtY29udHJvbC1yZXF1ZXN0LW1ldGhvZCcsXG5cdCdjb25uZWN0aW9uJyxcblx0J2NvbnRlbnQtbGVuZ3RoJyxcblx0J2Nvb2tpZScsXG5cdCdjb29raWUyJyxcblx0J2RhdGUnLFxuXHQnZG50Jyxcblx0J2V4cGVjdCcsXG5cdCdob3N0Jyxcblx0J2tlZXAtYWxpdmUnLFxuXHQnb3JpZ2luJyxcblx0J3JlZmVyZXInLFxuXHQndGUnLFxuXHQndHJhaWxlcicsXG5cdCd0cmFuc2Zlci1lbmNvZGluZycsXG5cdCd1cGdyYWRlJyxcblx0J3VzZXItYWdlbnQnLFxuXHQndmlhJ1xuXVxuIiwidmFyIGNhcGFiaWxpdHkgPSByZXF1aXJlKCcuL2NhcGFiaWxpdHknKVxudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKVxudmFyIHN0cmVhbSA9IHJlcXVpcmUoJ3N0cmVhbScpXG5cbnZhciByU3RhdGVzID0gZXhwb3J0cy5yZWFkeVN0YXRlcyA9IHtcblx0VU5TRU5UOiAwLFxuXHRPUEVORUQ6IDEsXG5cdEhFQURFUlNfUkVDRUlWRUQ6IDIsXG5cdExPQURJTkc6IDMsXG5cdERPTkU6IDRcbn1cblxudmFyIEluY29taW5nTWVzc2FnZSA9IGV4cG9ydHMuSW5jb21pbmdNZXNzYWdlID0gZnVuY3Rpb24gKHhociwgcmVzcG9uc2UsIG1vZGUpIHtcblx0dmFyIHNlbGYgPSB0aGlzXG5cdHN0cmVhbS5SZWFkYWJsZS5jYWxsKHNlbGYpXG5cblx0c2VsZi5fbW9kZSA9IG1vZGVcblx0c2VsZi5oZWFkZXJzID0ge31cblx0c2VsZi5yYXdIZWFkZXJzID0gW11cblx0c2VsZi50cmFpbGVycyA9IHt9XG5cdHNlbGYucmF3VHJhaWxlcnMgPSBbXVxuXG5cdC8vIEZha2UgdGhlICdjbG9zZScgZXZlbnQsIGJ1dCBvbmx5IG9uY2UgJ2VuZCcgZmlyZXNcblx0c2VsZi5vbignZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdC8vIFRoZSBuZXh0VGljayBpcyBuZWNlc3NhcnkgdG8gcHJldmVudCB0aGUgJ3JlcXVlc3QnIG1vZHVsZSBmcm9tIGNhdXNpbmcgYW4gaW5maW5pdGUgbG9vcFxuXHRcdHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0c2VsZi5lbWl0KCdjbG9zZScpXG5cdFx0fSlcblx0fSlcblxuXHRpZiAobW9kZSA9PT0gJ2ZldGNoJykge1xuXHRcdHNlbGYuX2ZldGNoUmVzcG9uc2UgPSByZXNwb25zZVxuXG5cdFx0c2VsZi5zdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzXG5cdFx0c2VsZi5zdGF0dXNNZXNzYWdlID0gcmVzcG9uc2Uuc3RhdHVzVGV4dFxuXHRcdC8vIGJhY2t3YXJkcyBjb21wYXRpYmxlIHZlcnNpb24gb2YgZm9yICg8aXRlbT4gb2YgPGl0ZXJhYmxlPik6XG5cdFx0Ly8gZm9yICh2YXIgPGl0ZW0+LF9pLF9pdCA9IDxpdGVyYWJsZT5bU3ltYm9sLml0ZXJhdG9yXSgpOyA8aXRlbT4gPSAoX2kgPSBfaXQubmV4dCgpKS52YWx1ZSwhX2kuZG9uZTspXG5cdFx0Zm9yICh2YXIgaGVhZGVyLCBfaSwgX2l0ID0gcmVzcG9uc2UuaGVhZGVyc1tTeW1ib2wuaXRlcmF0b3JdKCk7IGhlYWRlciA9IChfaSA9IF9pdC5uZXh0KCkpLnZhbHVlLCAhX2kuZG9uZTspIHtcblx0XHRcdHNlbGYuaGVhZGVyc1toZWFkZXJbMF0udG9Mb3dlckNhc2UoKV0gPSBoZWFkZXJbMV1cblx0XHRcdHNlbGYucmF3SGVhZGVycy5wdXNoKGhlYWRlclswXSwgaGVhZGVyWzFdKVxuXHRcdH1cblxuXHRcdC8vIFRPRE86IHRoaXMgZG9lc24ndCByZXNwZWN0IGJhY2twcmVzc3VyZS4gT25jZSBXcml0YWJsZVN0cmVhbSBpcyBhdmFpbGFibGUsIHRoaXMgY2FuIGJlIGZpeGVkXG5cdFx0dmFyIHJlYWRlciA9IHJlc3BvbnNlLmJvZHkuZ2V0UmVhZGVyKClcblx0XHRmdW5jdGlvbiByZWFkICgpIHtcblx0XHRcdHJlYWRlci5yZWFkKCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG5cdFx0XHRcdGlmIChzZWxmLl9kZXN0cm95ZWQpXG5cdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdGlmIChyZXN1bHQuZG9uZSkge1xuXHRcdFx0XHRcdHNlbGYucHVzaChudWxsKVxuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHR9XG5cdFx0XHRcdHNlbGYucHVzaChuZXcgQnVmZmVyKHJlc3VsdC52YWx1ZSkpXG5cdFx0XHRcdHJlYWQoKVxuXHRcdFx0fSlcblx0XHR9XG5cdFx0cmVhZCgpXG5cblx0fSBlbHNlIHtcblx0XHRzZWxmLl94aHIgPSB4aHJcblx0XHRzZWxmLl9wb3MgPSAwXG5cblx0XHRzZWxmLnN0YXR1c0NvZGUgPSB4aHIuc3RhdHVzXG5cdFx0c2VsZi5zdGF0dXNNZXNzYWdlID0geGhyLnN0YXR1c1RleHRcblx0XHR2YXIgaGVhZGVycyA9IHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKS5zcGxpdCgvXFxyP1xcbi8pXG5cdFx0aGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoZWFkZXIpIHtcblx0XHRcdHZhciBtYXRjaGVzID0gaGVhZGVyLm1hdGNoKC9eKFteOl0rKTpcXHMqKC4qKS8pXG5cdFx0XHRpZiAobWF0Y2hlcykge1xuXHRcdFx0XHR2YXIga2V5ID0gbWF0Y2hlc1sxXS50b0xvd2VyQ2FzZSgpXG5cdFx0XHRcdGlmIChzZWxmLmhlYWRlcnNba2V5XSAhPT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRcdHNlbGYuaGVhZGVyc1trZXldICs9ICcsICcgKyBtYXRjaGVzWzJdXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRzZWxmLmhlYWRlcnNba2V5XSA9IG1hdGNoZXNbMl1cblx0XHRcdFx0c2VsZi5yYXdIZWFkZXJzLnB1c2gobWF0Y2hlc1sxXSwgbWF0Y2hlc1syXSlcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0c2VsZi5fY2hhcnNldCA9ICd4LXVzZXItZGVmaW5lZCdcblx0XHRpZiAoIWNhcGFiaWxpdHkub3ZlcnJpZGVNaW1lVHlwZSkge1xuXHRcdFx0dmFyIG1pbWVUeXBlID0gc2VsZi5yYXdIZWFkZXJzWydtaW1lLXR5cGUnXVxuXHRcdFx0aWYgKG1pbWVUeXBlKSB7XG5cdFx0XHRcdHZhciBjaGFyc2V0TWF0Y2ggPSBtaW1lVHlwZS5tYXRjaCgvO1xccypjaGFyc2V0PShbXjtdKSg7fCQpLylcblx0XHRcdFx0aWYgKGNoYXJzZXRNYXRjaCkge1xuXHRcdFx0XHRcdHNlbGYuX2NoYXJzZXQgPSBjaGFyc2V0TWF0Y2hbMV0udG9Mb3dlckNhc2UoKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoIXNlbGYuX2NoYXJzZXQpXG5cdFx0XHRcdHNlbGYuX2NoYXJzZXQgPSAndXRmLTgnIC8vIGJlc3QgZ3Vlc3Ncblx0XHR9XG5cdH1cbn1cblxuaW5oZXJpdHMoSW5jb21pbmdNZXNzYWdlLCBzdHJlYW0uUmVhZGFibGUpXG5cbkluY29taW5nTWVzc2FnZS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAoKSB7fVxuXG5JbmNvbWluZ01lc3NhZ2UucHJvdG90eXBlLl9vblhIUlByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuXHR2YXIgc2VsZiA9IHRoaXNcblxuXHR2YXIgeGhyID0gc2VsZi5feGhyXG5cblx0dmFyIHJlc3BvbnNlID0gbnVsbFxuXHRzd2l0Y2ggKHNlbGYuX21vZGUpIHtcblx0XHRjYXNlICd0ZXh0OnZiYXJyYXknOiAvLyBGb3IgSUU5XG5cdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgIT09IHJTdGF0ZXMuRE9ORSlcblx0XHRcdFx0YnJlYWtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIFRoaXMgZmFpbHMgaW4gSUU4XG5cdFx0XHRcdHJlc3BvbnNlID0gbmV3IGdsb2JhbC5WQkFycmF5KHhoci5yZXNwb25zZUJvZHkpLnRvQXJyYXkoKVxuXHRcdFx0fSBjYXRjaCAoZSkge31cblx0XHRcdGlmIChyZXNwb25zZSAhPT0gbnVsbCkge1xuXHRcdFx0XHRzZWxmLnB1c2gobmV3IEJ1ZmZlcihyZXNwb25zZSkpXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHR9XG5cdFx0XHQvLyBGYWxscyB0aHJvdWdoIGluIElFOFx0XG5cdFx0Y2FzZSAndGV4dCc6XG5cdFx0XHR0cnkgeyAvLyBUaGlzIHdpbGwgZmFpbCB3aGVuIHJlYWR5U3RhdGUgPSAzIGluIElFOS4gU3dpdGNoIG1vZGUgYW5kIHdhaXQgZm9yIHJlYWR5U3RhdGUgPSA0XG5cdFx0XHRcdHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dFxuXHRcdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0XHRzZWxmLl9tb2RlID0gJ3RleHQ6dmJhcnJheSdcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHRcdGlmIChyZXNwb25zZS5sZW5ndGggPiBzZWxmLl9wb3MpIHtcblx0XHRcdFx0dmFyIG5ld0RhdGEgPSByZXNwb25zZS5zdWJzdHIoc2VsZi5fcG9zKVxuXHRcdFx0XHRpZiAoc2VsZi5fY2hhcnNldCA9PT0gJ3gtdXNlci1kZWZpbmVkJykge1xuXHRcdFx0XHRcdHZhciBidWZmZXIgPSBuZXcgQnVmZmVyKG5ld0RhdGEubGVuZ3RoKVxuXHRcdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbmV3RGF0YS5sZW5ndGg7IGkrKylcblx0XHRcdFx0XHRcdGJ1ZmZlcltpXSA9IG5ld0RhdGEuY2hhckNvZGVBdChpKSAmIDB4ZmZcblxuXHRcdFx0XHRcdHNlbGYucHVzaChidWZmZXIpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c2VsZi5wdXNoKG5ld0RhdGEsIHNlbGYuX2NoYXJzZXQpXG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5fcG9zID0gcmVzcG9uc2UubGVuZ3RoXG5cdFx0XHR9XG5cdFx0XHRicmVha1xuXHRcdGNhc2UgJ2FycmF5YnVmZmVyJzpcblx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gclN0YXRlcy5ET05FKVxuXHRcdFx0XHRicmVha1xuXHRcdFx0cmVzcG9uc2UgPSB4aHIucmVzcG9uc2Vcblx0XHRcdHNlbGYucHVzaChuZXcgQnVmZmVyKG5ldyBVaW50OEFycmF5KHJlc3BvbnNlKSkpXG5cdFx0XHRicmVha1xuXHRcdGNhc2UgJ21vei1jaHVua2VkLWFycmF5YnVmZmVyJzogLy8gdGFrZSB3aG9sZVxuXHRcdFx0cmVzcG9uc2UgPSB4aHIucmVzcG9uc2Vcblx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSAhPT0gclN0YXRlcy5MT0FESU5HIHx8ICFyZXNwb25zZSlcblx0XHRcdFx0YnJlYWtcblx0XHRcdHNlbGYucHVzaChuZXcgQnVmZmVyKG5ldyBVaW50OEFycmF5KHJlc3BvbnNlKSkpXG5cdFx0XHRicmVha1xuXHRcdGNhc2UgJ21zLXN0cmVhbSc6XG5cdFx0XHRyZXNwb25zZSA9IHhoci5yZXNwb25zZVxuXHRcdFx0aWYgKHhoci5yZWFkeVN0YXRlICE9PSByU3RhdGVzLkxPQURJTkcpXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHR2YXIgcmVhZGVyID0gbmV3IGdsb2JhbC5NU1N0cmVhbVJlYWRlcigpXG5cdFx0XHRyZWFkZXIub25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0aWYgKHJlYWRlci5yZXN1bHQuYnl0ZUxlbmd0aCA+IHNlbGYuX3Bvcykge1xuXHRcdFx0XHRcdHNlbGYucHVzaChuZXcgQnVmZmVyKG5ldyBVaW50OEFycmF5KHJlYWRlci5yZXN1bHQuc2xpY2Uoc2VsZi5fcG9zKSkpKVxuXHRcdFx0XHRcdHNlbGYuX3BvcyA9IHJlYWRlci5yZXN1bHQuYnl0ZUxlbmd0aFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRzZWxmLnB1c2gobnVsbClcblx0XHRcdH1cblx0XHRcdC8vIHJlYWRlci5vbmVycm9yID0gPz8/IC8vIFRPRE86IHRoaXNcblx0XHRcdHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihyZXNwb25zZSlcblx0XHRcdGJyZWFrXG5cdH1cblxuXHQvLyBUaGUgbXMtc3RyZWFtIGNhc2UgaGFuZGxlcyBlbmQgc2VwYXJhdGVseSBpbiByZWFkZXIub25sb2FkKClcblx0aWYgKHNlbGYuX3hoci5yZWFkeVN0YXRlID09PSByU3RhdGVzLkRPTkUgJiYgc2VsZi5fbW9kZSAhPT0gJ21zLXN0cmVhbScpIHtcblx0XHRzZWxmLnB1c2gobnVsbClcblx0fVxufVxuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciBCdWZmZXIgPSByZXF1aXJlKCdidWZmZXInKS5CdWZmZXI7XG5cbnZhciBpc0J1ZmZlckVuY29kaW5nID0gQnVmZmVyLmlzRW5jb2RpbmdcbiAgfHwgZnVuY3Rpb24oZW5jb2RpbmcpIHtcbiAgICAgICBzd2l0Y2ggKGVuY29kaW5nICYmIGVuY29kaW5nLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgIGNhc2UgJ2hleCc6IGNhc2UgJ3V0ZjgnOiBjYXNlICd1dGYtOCc6IGNhc2UgJ2FzY2lpJzogY2FzZSAnYmluYXJ5JzogY2FzZSAnYmFzZTY0JzogY2FzZSAndWNzMic6IGNhc2UgJ3Vjcy0yJzogY2FzZSAndXRmMTZsZSc6IGNhc2UgJ3V0Zi0xNmxlJzogY2FzZSAncmF3JzogcmV0dXJuIHRydWU7XG4gICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XG4gICAgICAgfVxuICAgICB9XG5cblxuZnVuY3Rpb24gYXNzZXJ0RW5jb2RpbmcoZW5jb2RpbmcpIHtcbiAgaWYgKGVuY29kaW5nICYmICFpc0J1ZmZlckVuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKTtcbiAgfVxufVxuXG4vLyBTdHJpbmdEZWNvZGVyIHByb3ZpZGVzIGFuIGludGVyZmFjZSBmb3IgZWZmaWNpZW50bHkgc3BsaXR0aW5nIGEgc2VyaWVzIG9mXG4vLyBidWZmZXJzIGludG8gYSBzZXJpZXMgb2YgSlMgc3RyaW5ncyB3aXRob3V0IGJyZWFraW5nIGFwYXJ0IG11bHRpLWJ5dGVcbi8vIGNoYXJhY3RlcnMuIENFU1UtOCBpcyBoYW5kbGVkIGFzIHBhcnQgb2YgdGhlIFVURi04IGVuY29kaW5nLlxuLy9cbi8vIEBUT0RPIEhhbmRsaW5nIGFsbCBlbmNvZGluZ3MgaW5zaWRlIGEgc2luZ2xlIG9iamVjdCBtYWtlcyBpdCB2ZXJ5IGRpZmZpY3VsdFxuLy8gdG8gcmVhc29uIGFib3V0IHRoaXMgY29kZSwgc28gaXQgc2hvdWxkIGJlIHNwbGl0IHVwIGluIHRoZSBmdXR1cmUuXG4vLyBAVE9ETyBUaGVyZSBzaG91bGQgYmUgYSB1dGY4LXN0cmljdCBlbmNvZGluZyB0aGF0IHJlamVjdHMgaW52YWxpZCBVVEYtOCBjb2RlXG4vLyBwb2ludHMgYXMgdXNlZCBieSBDRVNVLTguXG52YXIgU3RyaW5nRGVjb2RlciA9IGV4cG9ydHMuU3RyaW5nRGVjb2RlciA9IGZ1bmN0aW9uKGVuY29kaW5nKSB7XG4gIHRoaXMuZW5jb2RpbmcgPSAoZW5jb2RpbmcgfHwgJ3V0ZjgnKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1stX10vLCAnJyk7XG4gIGFzc2VydEVuY29kaW5nKGVuY29kaW5nKTtcbiAgc3dpdGNoICh0aGlzLmVuY29kaW5nKSB7XG4gICAgY2FzZSAndXRmOCc6XG4gICAgICAvLyBDRVNVLTggcmVwcmVzZW50cyBlYWNoIG9mIFN1cnJvZ2F0ZSBQYWlyIGJ5IDMtYnl0ZXNcbiAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDM7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd1Y3MyJzpcbiAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIC8vIFVURi0xNiByZXByZXNlbnRzIGVhY2ggb2YgU3Vycm9nYXRlIFBhaXIgYnkgMi1ieXRlc1xuICAgICAgdGhpcy5zdXJyb2dhdGVTaXplID0gMjtcbiAgICAgIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIgPSB1dGYxNkRldGVjdEluY29tcGxldGVDaGFyO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgIC8vIEJhc2UtNjQgc3RvcmVzIDMgYnl0ZXMgaW4gNCBjaGFycywgYW5kIHBhZHMgdGhlIHJlbWFpbmRlci5cbiAgICAgIHRoaXMuc3Vycm9nYXRlU2l6ZSA9IDM7XG4gICAgICB0aGlzLmRldGVjdEluY29tcGxldGVDaGFyID0gYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXI7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhpcy53cml0ZSA9IHBhc3NUaHJvdWdoV3JpdGU7XG4gICAgICByZXR1cm47XG4gIH1cblxuICAvLyBFbm91Z2ggc3BhY2UgdG8gc3RvcmUgYWxsIGJ5dGVzIG9mIGEgc2luZ2xlIGNoYXJhY3Rlci4gVVRGLTggbmVlZHMgNFxuICAvLyBieXRlcywgYnV0IENFU1UtOCBtYXkgcmVxdWlyZSB1cCB0byA2ICgzIGJ5dGVzIHBlciBzdXJyb2dhdGUpLlxuICB0aGlzLmNoYXJCdWZmZXIgPSBuZXcgQnVmZmVyKDYpO1xuICAvLyBOdW1iZXIgb2YgYnl0ZXMgcmVjZWl2ZWQgZm9yIHRoZSBjdXJyZW50IGluY29tcGxldGUgbXVsdGktYnl0ZSBjaGFyYWN0ZXIuXG4gIHRoaXMuY2hhclJlY2VpdmVkID0gMDtcbiAgLy8gTnVtYmVyIG9mIGJ5dGVzIGV4cGVjdGVkIGZvciB0aGUgY3VycmVudCBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgY2hhcmFjdGVyLlxuICB0aGlzLmNoYXJMZW5ndGggPSAwO1xufTtcblxuXG4vLyB3cml0ZSBkZWNvZGVzIHRoZSBnaXZlbiBidWZmZXIgYW5kIHJldHVybnMgaXQgYXMgSlMgc3RyaW5nIHRoYXQgaXNcbi8vIGd1YXJhbnRlZWQgdG8gbm90IGNvbnRhaW4gYW55IHBhcnRpYWwgbXVsdGktYnl0ZSBjaGFyYWN0ZXJzLiBBbnkgcGFydGlhbFxuLy8gY2hhcmFjdGVyIGZvdW5kIGF0IHRoZSBlbmQgb2YgdGhlIGJ1ZmZlciBpcyBidWZmZXJlZCB1cCwgYW5kIHdpbGwgYmVcbi8vIHJldHVybmVkIHdoZW4gY2FsbGluZyB3cml0ZSBhZ2FpbiB3aXRoIHRoZSByZW1haW5pbmcgYnl0ZXMuXG4vL1xuLy8gTm90ZTogQ29udmVydGluZyBhIEJ1ZmZlciBjb250YWluaW5nIGFuIG9ycGhhbiBzdXJyb2dhdGUgdG8gYSBTdHJpbmdcbi8vIGN1cnJlbnRseSB3b3JrcywgYnV0IGNvbnZlcnRpbmcgYSBTdHJpbmcgdG8gYSBCdWZmZXIgKHZpYSBgbmV3IEJ1ZmZlcmAsIG9yXG4vLyBCdWZmZXIjd3JpdGUpIHdpbGwgcmVwbGFjZSBpbmNvbXBsZXRlIHN1cnJvZ2F0ZXMgd2l0aCB0aGUgdW5pY29kZVxuLy8gcmVwbGFjZW1lbnQgY2hhcmFjdGVyLiBTZWUgaHR0cHM6Ly9jb2RlcmV2aWV3LmNocm9taXVtLm9yZy8xMjExNzMwMDkvIC5cblN0cmluZ0RlY29kZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gIHZhciBjaGFyU3RyID0gJyc7XG4gIC8vIGlmIG91ciBsYXN0IHdyaXRlIGVuZGVkIHdpdGggYW4gaW5jb21wbGV0ZSBtdWx0aWJ5dGUgY2hhcmFjdGVyXG4gIHdoaWxlICh0aGlzLmNoYXJMZW5ndGgpIHtcbiAgICAvLyBkZXRlcm1pbmUgaG93IG1hbnkgcmVtYWluaW5nIGJ5dGVzIHRoaXMgYnVmZmVyIGhhcyB0byBvZmZlciBmb3IgdGhpcyBjaGFyXG4gICAgdmFyIGF2YWlsYWJsZSA9IChidWZmZXIubGVuZ3RoID49IHRoaXMuY2hhckxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkKSA/XG4gICAgICAgIHRoaXMuY2hhckxlbmd0aCAtIHRoaXMuY2hhclJlY2VpdmVkIDpcbiAgICAgICAgYnVmZmVyLmxlbmd0aDtcblxuICAgIC8vIGFkZCB0aGUgbmV3IGJ5dGVzIHRvIHRoZSBjaGFyIGJ1ZmZlclxuICAgIGJ1ZmZlci5jb3B5KHRoaXMuY2hhckJ1ZmZlciwgdGhpcy5jaGFyUmVjZWl2ZWQsIDAsIGF2YWlsYWJsZSk7XG4gICAgdGhpcy5jaGFyUmVjZWl2ZWQgKz0gYXZhaWxhYmxlO1xuXG4gICAgaWYgKHRoaXMuY2hhclJlY2VpdmVkIDwgdGhpcy5jaGFyTGVuZ3RoKSB7XG4gICAgICAvLyBzdGlsbCBub3QgZW5vdWdoIGNoYXJzIGluIHRoaXMgYnVmZmVyPyB3YWl0IGZvciBtb3JlIC4uLlxuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIHJlbW92ZSBieXRlcyBiZWxvbmdpbmcgdG8gdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGZyb20gdGhlIGJ1ZmZlclxuICAgIGJ1ZmZlciA9IGJ1ZmZlci5zbGljZShhdmFpbGFibGUsIGJ1ZmZlci5sZW5ndGgpO1xuXG4gICAgLy8gZ2V0IHRoZSBjaGFyYWN0ZXIgdGhhdCB3YXMgc3BsaXRcbiAgICBjaGFyU3RyID0gdGhpcy5jaGFyQnVmZmVyLnNsaWNlKDAsIHRoaXMuY2hhckxlbmd0aCkudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7XG5cbiAgICAvLyBDRVNVLTg6IGxlYWQgc3Vycm9nYXRlIChEODAwLURCRkYpIGlzIGFsc28gdGhlIGluY29tcGxldGUgY2hhcmFjdGVyXG4gICAgdmFyIGNoYXJDb2RlID0gY2hhclN0ci5jaGFyQ29kZUF0KGNoYXJTdHIubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGNoYXJDb2RlID49IDB4RDgwMCAmJiBjaGFyQ29kZSA8PSAweERCRkYpIHtcbiAgICAgIHRoaXMuY2hhckxlbmd0aCArPSB0aGlzLnN1cnJvZ2F0ZVNpemU7XG4gICAgICBjaGFyU3RyID0gJyc7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdGhpcy5jaGFyUmVjZWl2ZWQgPSB0aGlzLmNoYXJMZW5ndGggPSAwO1xuXG4gICAgLy8gaWYgdGhlcmUgYXJlIG5vIG1vcmUgYnl0ZXMgaW4gdGhpcyBidWZmZXIsIGp1c3QgZW1pdCBvdXIgY2hhclxuICAgIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gY2hhclN0cjtcbiAgICB9XG4gICAgYnJlYWs7XG4gIH1cblxuICAvLyBkZXRlcm1pbmUgYW5kIHNldCBjaGFyTGVuZ3RoIC8gY2hhclJlY2VpdmVkXG4gIHRoaXMuZGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKTtcblxuICB2YXIgZW5kID0gYnVmZmVyLmxlbmd0aDtcbiAgaWYgKHRoaXMuY2hhckxlbmd0aCkge1xuICAgIC8vIGJ1ZmZlciB0aGUgaW5jb21wbGV0ZSBjaGFyYWN0ZXIgYnl0ZXMgd2UgZ290XG4gICAgYnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCAwLCBidWZmZXIubGVuZ3RoIC0gdGhpcy5jaGFyUmVjZWl2ZWQsIGVuZCk7XG4gICAgZW5kIC09IHRoaXMuY2hhclJlY2VpdmVkO1xuICB9XG5cbiAgY2hhclN0ciArPSBidWZmZXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgMCwgZW5kKTtcblxuICB2YXIgZW5kID0gY2hhclN0ci5sZW5ndGggLSAxO1xuICB2YXIgY2hhckNvZGUgPSBjaGFyU3RyLmNoYXJDb2RlQXQoZW5kKTtcbiAgLy8gQ0VTVS04OiBsZWFkIHN1cnJvZ2F0ZSAoRDgwMC1EQkZGKSBpcyBhbHNvIHRoZSBpbmNvbXBsZXRlIGNoYXJhY3RlclxuICBpZiAoY2hhckNvZGUgPj0gMHhEODAwICYmIGNoYXJDb2RlIDw9IDB4REJGRikge1xuICAgIHZhciBzaXplID0gdGhpcy5zdXJyb2dhdGVTaXplO1xuICAgIHRoaXMuY2hhckxlbmd0aCArPSBzaXplO1xuICAgIHRoaXMuY2hhclJlY2VpdmVkICs9IHNpemU7XG4gICAgdGhpcy5jaGFyQnVmZmVyLmNvcHkodGhpcy5jaGFyQnVmZmVyLCBzaXplLCAwLCBzaXplKTtcbiAgICBidWZmZXIuY29weSh0aGlzLmNoYXJCdWZmZXIsIDAsIDAsIHNpemUpO1xuICAgIHJldHVybiBjaGFyU3RyLnN1YnN0cmluZygwLCBlbmQpO1xuICB9XG5cbiAgLy8gb3IganVzdCBlbWl0IHRoZSBjaGFyU3RyXG4gIHJldHVybiBjaGFyU3RyO1xufTtcblxuLy8gZGV0ZWN0SW5jb21wbGV0ZUNoYXIgZGV0ZXJtaW5lcyBpZiB0aGVyZSBpcyBhbiBpbmNvbXBsZXRlIFVURi04IGNoYXJhY3RlciBhdFxuLy8gdGhlIGVuZCBvZiB0aGUgZ2l2ZW4gYnVmZmVyLiBJZiBzbywgaXQgc2V0cyB0aGlzLmNoYXJMZW5ndGggdG8gdGhlIGJ5dGVcbi8vIGxlbmd0aCB0aGF0IGNoYXJhY3RlciwgYW5kIHNldHMgdGhpcy5jaGFyUmVjZWl2ZWQgdG8gdGhlIG51bWJlciBvZiBieXRlc1xuLy8gdGhhdCBhcmUgYXZhaWxhYmxlIGZvciB0aGlzIGNoYXJhY3Rlci5cblN0cmluZ0RlY29kZXIucHJvdG90eXBlLmRldGVjdEluY29tcGxldGVDaGFyID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gIC8vIGRldGVybWluZSBob3cgbWFueSBieXRlcyB3ZSBoYXZlIHRvIGNoZWNrIGF0IHRoZSBlbmQgb2YgdGhpcyBidWZmZXJcbiAgdmFyIGkgPSAoYnVmZmVyLmxlbmd0aCA+PSAzKSA/IDMgOiBidWZmZXIubGVuZ3RoO1xuXG4gIC8vIEZpZ3VyZSBvdXQgaWYgb25lIG9mIHRoZSBsYXN0IGkgYnl0ZXMgb2Ygb3VyIGJ1ZmZlciBhbm5vdW5jZXMgYW5cbiAgLy8gaW5jb21wbGV0ZSBjaGFyLlxuICBmb3IgKDsgaSA+IDA7IGktLSkge1xuICAgIHZhciBjID0gYnVmZmVyW2J1ZmZlci5sZW5ndGggLSBpXTtcblxuICAgIC8vIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi04I0Rlc2NyaXB0aW9uXG5cbiAgICAvLyAxMTBYWFhYWFxuICAgIGlmIChpID09IDEgJiYgYyA+PiA1ID09IDB4MDYpIHtcbiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDI7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyAxMTEwWFhYWFxuICAgIGlmIChpIDw9IDIgJiYgYyA+PiA0ID09IDB4MEUpIHtcbiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDM7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyAxMTExMFhYWFxuICAgIGlmIChpIDw9IDMgJiYgYyA+PiAzID09IDB4MUUpIHtcbiAgICAgIHRoaXMuY2hhckxlbmd0aCA9IDQ7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBpO1xufTtcblxuU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gIHZhciByZXMgPSAnJztcbiAgaWYgKGJ1ZmZlciAmJiBidWZmZXIubGVuZ3RoKVxuICAgIHJlcyA9IHRoaXMud3JpdGUoYnVmZmVyKTtcblxuICBpZiAodGhpcy5jaGFyUmVjZWl2ZWQpIHtcbiAgICB2YXIgY3IgPSB0aGlzLmNoYXJSZWNlaXZlZDtcbiAgICB2YXIgYnVmID0gdGhpcy5jaGFyQnVmZmVyO1xuICAgIHZhciBlbmMgPSB0aGlzLmVuY29kaW5nO1xuICAgIHJlcyArPSBidWYuc2xpY2UoMCwgY3IpLnRvU3RyaW5nKGVuYyk7XG4gIH1cblxuICByZXR1cm4gcmVzO1xufTtcblxuZnVuY3Rpb24gcGFzc1Rocm91Z2hXcml0ZShidWZmZXIpIHtcbiAgcmV0dXJuIGJ1ZmZlci50b1N0cmluZyh0aGlzLmVuY29kaW5nKTtcbn1cblxuZnVuY3Rpb24gdXRmMTZEZXRlY3RJbmNvbXBsZXRlQ2hhcihidWZmZXIpIHtcbiAgdGhpcy5jaGFyUmVjZWl2ZWQgPSBidWZmZXIubGVuZ3RoICUgMjtcbiAgdGhpcy5jaGFyTGVuZ3RoID0gdGhpcy5jaGFyUmVjZWl2ZWQgPyAyIDogMDtcbn1cblxuZnVuY3Rpb24gYmFzZTY0RGV0ZWN0SW5jb21wbGV0ZUNoYXIoYnVmZmVyKSB7XG4gIHRoaXMuY2hhclJlY2VpdmVkID0gYnVmZmVyLmxlbmd0aCAlIDM7XG4gIHRoaXMuY2hhckxlbmd0aCA9IHRoaXMuY2hhclJlY2VpdmVkID8gMyA6IDA7XG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgcHVueWNvZGUgPSByZXF1aXJlKCdwdW55Y29kZScpO1xudmFyIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuZXhwb3J0cy5wYXJzZSA9IHVybFBhcnNlO1xuZXhwb3J0cy5yZXNvbHZlID0gdXJsUmVzb2x2ZTtcbmV4cG9ydHMucmVzb2x2ZU9iamVjdCA9IHVybFJlc29sdmVPYmplY3Q7XG5leHBvcnRzLmZvcm1hdCA9IHVybEZvcm1hdDtcblxuZXhwb3J0cy5VcmwgPSBVcmw7XG5cbmZ1bmN0aW9uIFVybCgpIHtcbiAgdGhpcy5wcm90b2NvbCA9IG51bGw7XG4gIHRoaXMuc2xhc2hlcyA9IG51bGw7XG4gIHRoaXMuYXV0aCA9IG51bGw7XG4gIHRoaXMuaG9zdCA9IG51bGw7XG4gIHRoaXMucG9ydCA9IG51bGw7XG4gIHRoaXMuaG9zdG5hbWUgPSBudWxsO1xuICB0aGlzLmhhc2ggPSBudWxsO1xuICB0aGlzLnNlYXJjaCA9IG51bGw7XG4gIHRoaXMucXVlcnkgPSBudWxsO1xuICB0aGlzLnBhdGhuYW1lID0gbnVsbDtcbiAgdGhpcy5wYXRoID0gbnVsbDtcbiAgdGhpcy5ocmVmID0gbnVsbDtcbn1cblxuLy8gUmVmZXJlbmNlOiBSRkMgMzk4NiwgUkZDIDE4MDgsIFJGQyAyMzk2XG5cbi8vIGRlZmluZSB0aGVzZSBoZXJlIHNvIGF0IGxlYXN0IHRoZXkgb25seSBoYXZlIHRvIGJlXG4vLyBjb21waWxlZCBvbmNlIG9uIHRoZSBmaXJzdCBtb2R1bGUgbG9hZC5cbnZhciBwcm90b2NvbFBhdHRlcm4gPSAvXihbYS16MC05ListXSs6KS9pLFxuICAgIHBvcnRQYXR0ZXJuID0gLzpbMC05XSokLyxcblxuICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgYSBzaW1wbGUgcGF0aCBVUkxcbiAgICBzaW1wbGVQYXRoUGF0dGVybiA9IC9eKFxcL1xcLz8oPyFcXC8pW15cXD9cXHNdKikoXFw/W15cXHNdKik/JC8sXG5cbiAgICAvLyBSRkMgMjM5NjogY2hhcmFjdGVycyByZXNlcnZlZCBmb3IgZGVsaW1pdGluZyBVUkxzLlxuICAgIC8vIFdlIGFjdHVhbGx5IGp1c3QgYXV0by1lc2NhcGUgdGhlc2UuXG4gICAgZGVsaW1zID0gWyc8JywgJz4nLCAnXCInLCAnYCcsICcgJywgJ1xccicsICdcXG4nLCAnXFx0J10sXG5cbiAgICAvLyBSRkMgMjM5NjogY2hhcmFjdGVycyBub3QgYWxsb3dlZCBmb3IgdmFyaW91cyByZWFzb25zLlxuICAgIHVud2lzZSA9IFsneycsICd9JywgJ3wnLCAnXFxcXCcsICdeJywgJ2AnXS5jb25jYXQoZGVsaW1zKSxcblxuICAgIC8vIEFsbG93ZWQgYnkgUkZDcywgYnV0IGNhdXNlIG9mIFhTUyBhdHRhY2tzLiAgQWx3YXlzIGVzY2FwZSB0aGVzZS5cbiAgICBhdXRvRXNjYXBlID0gWydcXCcnXS5jb25jYXQodW53aXNlKSxcbiAgICAvLyBDaGFyYWN0ZXJzIHRoYXQgYXJlIG5ldmVyIGV2ZXIgYWxsb3dlZCBpbiBhIGhvc3RuYW1lLlxuICAgIC8vIE5vdGUgdGhhdCBhbnkgaW52YWxpZCBjaGFycyBhcmUgYWxzbyBoYW5kbGVkLCBidXQgdGhlc2VcbiAgICAvLyBhcmUgdGhlIG9uZXMgdGhhdCBhcmUgKmV4cGVjdGVkKiB0byBiZSBzZWVuLCBzbyB3ZSBmYXN0LXBhdGhcbiAgICAvLyB0aGVtLlxuICAgIG5vbkhvc3RDaGFycyA9IFsnJScsICcvJywgJz8nLCAnOycsICcjJ10uY29uY2F0KGF1dG9Fc2NhcGUpLFxuICAgIGhvc3RFbmRpbmdDaGFycyA9IFsnLycsICc/JywgJyMnXSxcbiAgICBob3N0bmFtZU1heExlbiA9IDI1NSxcbiAgICBob3N0bmFtZVBhcnRQYXR0ZXJuID0gL15bK2EtejAtOUEtWl8tXXswLDYzfSQvLFxuICAgIGhvc3RuYW1lUGFydFN0YXJ0ID0gL14oWythLXowLTlBLVpfLV17MCw2M30pKC4qKSQvLFxuICAgIC8vIHByb3RvY29scyB0aGF0IGNhbiBhbGxvdyBcInVuc2FmZVwiIGFuZCBcInVud2lzZVwiIGNoYXJzLlxuICAgIHVuc2FmZVByb3RvY29sID0ge1xuICAgICAgJ2phdmFzY3JpcHQnOiB0cnVlLFxuICAgICAgJ2phdmFzY3JpcHQ6JzogdHJ1ZVxuICAgIH0sXG4gICAgLy8gcHJvdG9jb2xzIHRoYXQgbmV2ZXIgaGF2ZSBhIGhvc3RuYW1lLlxuICAgIGhvc3RsZXNzUHJvdG9jb2wgPSB7XG4gICAgICAnamF2YXNjcmlwdCc6IHRydWUsXG4gICAgICAnamF2YXNjcmlwdDonOiB0cnVlXG4gICAgfSxcbiAgICAvLyBwcm90b2NvbHMgdGhhdCBhbHdheXMgY29udGFpbiBhIC8vIGJpdC5cbiAgICBzbGFzaGVkUHJvdG9jb2wgPSB7XG4gICAgICAnaHR0cCc6IHRydWUsXG4gICAgICAnaHR0cHMnOiB0cnVlLFxuICAgICAgJ2Z0cCc6IHRydWUsXG4gICAgICAnZ29waGVyJzogdHJ1ZSxcbiAgICAgICdmaWxlJzogdHJ1ZSxcbiAgICAgICdodHRwOic6IHRydWUsXG4gICAgICAnaHR0cHM6JzogdHJ1ZSxcbiAgICAgICdmdHA6JzogdHJ1ZSxcbiAgICAgICdnb3BoZXI6JzogdHJ1ZSxcbiAgICAgICdmaWxlOic6IHRydWVcbiAgICB9LFxuICAgIHF1ZXJ5c3RyaW5nID0gcmVxdWlyZSgncXVlcnlzdHJpbmcnKTtcblxuZnVuY3Rpb24gdXJsUGFyc2UodXJsLCBwYXJzZVF1ZXJ5U3RyaW5nLCBzbGFzaGVzRGVub3RlSG9zdCkge1xuICBpZiAodXJsICYmIHV0aWwuaXNPYmplY3QodXJsKSAmJiB1cmwgaW5zdGFuY2VvZiBVcmwpIHJldHVybiB1cmw7XG5cbiAgdmFyIHUgPSBuZXcgVXJsO1xuICB1LnBhcnNlKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpO1xuICByZXR1cm4gdTtcbn1cblxuVXJsLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKHVybCwgcGFyc2VRdWVyeVN0cmluZywgc2xhc2hlc0Rlbm90ZUhvc3QpIHtcbiAgaWYgKCF1dGlsLmlzU3RyaW5nKHVybCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUGFyYW1ldGVyICd1cmwnIG11c3QgYmUgYSBzdHJpbmcsIG5vdCBcIiArIHR5cGVvZiB1cmwpO1xuICB9XG5cbiAgLy8gQ29weSBjaHJvbWUsIElFLCBvcGVyYSBiYWNrc2xhc2gtaGFuZGxpbmcgYmVoYXZpb3IuXG4gIC8vIEJhY2sgc2xhc2hlcyBiZWZvcmUgdGhlIHF1ZXJ5IHN0cmluZyBnZXQgY29udmVydGVkIHRvIGZvcndhcmQgc2xhc2hlc1xuICAvLyBTZWU6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0yNTkxNlxuICB2YXIgcXVlcnlJbmRleCA9IHVybC5pbmRleE9mKCc/JyksXG4gICAgICBzcGxpdHRlciA9XG4gICAgICAgICAgKHF1ZXJ5SW5kZXggIT09IC0xICYmIHF1ZXJ5SW5kZXggPCB1cmwuaW5kZXhPZignIycpKSA/ICc/JyA6ICcjJyxcbiAgICAgIHVTcGxpdCA9IHVybC5zcGxpdChzcGxpdHRlciksXG4gICAgICBzbGFzaFJlZ2V4ID0gL1xcXFwvZztcbiAgdVNwbGl0WzBdID0gdVNwbGl0WzBdLnJlcGxhY2Uoc2xhc2hSZWdleCwgJy8nKTtcbiAgdXJsID0gdVNwbGl0LmpvaW4oc3BsaXR0ZXIpO1xuXG4gIHZhciByZXN0ID0gdXJsO1xuXG4gIC8vIHRyaW0gYmVmb3JlIHByb2NlZWRpbmcuXG4gIC8vIFRoaXMgaXMgdG8gc3VwcG9ydCBwYXJzZSBzdHVmZiBsaWtlIFwiICBodHRwOi8vZm9vLmNvbSAgXFxuXCJcbiAgcmVzdCA9IHJlc3QudHJpbSgpO1xuXG4gIGlmICghc2xhc2hlc0Rlbm90ZUhvc3QgJiYgdXJsLnNwbGl0KCcjJykubGVuZ3RoID09PSAxKSB7XG4gICAgLy8gVHJ5IGZhc3QgcGF0aCByZWdleHBcbiAgICB2YXIgc2ltcGxlUGF0aCA9IHNpbXBsZVBhdGhQYXR0ZXJuLmV4ZWMocmVzdCk7XG4gICAgaWYgKHNpbXBsZVBhdGgpIHtcbiAgICAgIHRoaXMucGF0aCA9IHJlc3Q7XG4gICAgICB0aGlzLmhyZWYgPSByZXN0O1xuICAgICAgdGhpcy5wYXRobmFtZSA9IHNpbXBsZVBhdGhbMV07XG4gICAgICBpZiAoc2ltcGxlUGF0aFsyXSkge1xuICAgICAgICB0aGlzLnNlYXJjaCA9IHNpbXBsZVBhdGhbMl07XG4gICAgICAgIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5xdWVyeSA9IHF1ZXJ5c3RyaW5nLnBhcnNlKHRoaXMuc2VhcmNoLnN1YnN0cigxKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5xdWVyeSA9IHRoaXMuc2VhcmNoLnN1YnN0cigxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoID0gJyc7XG4gICAgICAgIHRoaXMucXVlcnkgPSB7fTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxuXG4gIHZhciBwcm90byA9IHByb3RvY29sUGF0dGVybi5leGVjKHJlc3QpO1xuICBpZiAocHJvdG8pIHtcbiAgICBwcm90byA9IHByb3RvWzBdO1xuICAgIHZhciBsb3dlclByb3RvID0gcHJvdG8udG9Mb3dlckNhc2UoKTtcbiAgICB0aGlzLnByb3RvY29sID0gbG93ZXJQcm90bztcbiAgICByZXN0ID0gcmVzdC5zdWJzdHIocHJvdG8ubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIGZpZ3VyZSBvdXQgaWYgaXQncyBnb3QgYSBob3N0XG4gIC8vIHVzZXJAc2VydmVyIGlzICphbHdheXMqIGludGVycHJldGVkIGFzIGEgaG9zdG5hbWUsIGFuZCB1cmxcbiAgLy8gcmVzb2x1dGlvbiB3aWxsIHRyZWF0IC8vZm9vL2JhciBhcyBob3N0PWZvbyxwYXRoPWJhciBiZWNhdXNlIHRoYXQnc1xuICAvLyBob3cgdGhlIGJyb3dzZXIgcmVzb2x2ZXMgcmVsYXRpdmUgVVJMcy5cbiAgaWYgKHNsYXNoZXNEZW5vdGVIb3N0IHx8IHByb3RvIHx8IHJlc3QubWF0Y2goL15cXC9cXC9bXkBcXC9dK0BbXkBcXC9dKy8pKSB7XG4gICAgdmFyIHNsYXNoZXMgPSByZXN0LnN1YnN0cigwLCAyKSA9PT0gJy8vJztcbiAgICBpZiAoc2xhc2hlcyAmJiAhKHByb3RvICYmIGhvc3RsZXNzUHJvdG9jb2xbcHJvdG9dKSkge1xuICAgICAgcmVzdCA9IHJlc3Quc3Vic3RyKDIpO1xuICAgICAgdGhpcy5zbGFzaGVzID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWhvc3RsZXNzUHJvdG9jb2xbcHJvdG9dICYmXG4gICAgICAoc2xhc2hlcyB8fCAocHJvdG8gJiYgIXNsYXNoZWRQcm90b2NvbFtwcm90b10pKSkge1xuXG4gICAgLy8gdGhlcmUncyBhIGhvc3RuYW1lLlxuICAgIC8vIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiAvLCA/LCA7LCBvciAjIGVuZHMgdGhlIGhvc3QuXG4gICAgLy9cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBAIGluIHRoZSBob3N0bmFtZSwgdGhlbiBub24taG9zdCBjaGFycyAqYXJlKiBhbGxvd2VkXG4gICAgLy8gdG8gdGhlIGxlZnQgb2YgdGhlIGxhc3QgQCBzaWduLCB1bmxlc3Mgc29tZSBob3N0LWVuZGluZyBjaGFyYWN0ZXJcbiAgICAvLyBjb21lcyAqYmVmb3JlKiB0aGUgQC1zaWduLlxuICAgIC8vIFVSTHMgYXJlIG9ibm94aW91cy5cbiAgICAvL1xuICAgIC8vIGV4OlxuICAgIC8vIGh0dHA6Ly9hQGJAYy8gPT4gdXNlcjphQGIgaG9zdDpjXG4gICAgLy8gaHR0cDovL2FAYj9AYyA9PiB1c2VyOmEgaG9zdDpjIHBhdGg6Lz9AY1xuXG4gICAgLy8gdjAuMTIgVE9ETyhpc2FhY3MpOiBUaGlzIGlzIG5vdCBxdWl0ZSBob3cgQ2hyb21lIGRvZXMgdGhpbmdzLlxuICAgIC8vIFJldmlldyBvdXIgdGVzdCBjYXNlIGFnYWluc3QgYnJvd3NlcnMgbW9yZSBjb21wcmVoZW5zaXZlbHkuXG5cbiAgICAvLyBmaW5kIHRoZSBmaXJzdCBpbnN0YW5jZSBvZiBhbnkgaG9zdEVuZGluZ0NoYXJzXG4gICAgdmFyIGhvc3RFbmQgPSAtMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhvc3RFbmRpbmdDaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGhlYyA9IHJlc3QuaW5kZXhPZihob3N0RW5kaW5nQ2hhcnNbaV0pO1xuICAgICAgaWYgKGhlYyAhPT0gLTEgJiYgKGhvc3RFbmQgPT09IC0xIHx8IGhlYyA8IGhvc3RFbmQpKVxuICAgICAgICBob3N0RW5kID0gaGVjO1xuICAgIH1cblxuICAgIC8vIGF0IHRoaXMgcG9pbnQsIGVpdGhlciB3ZSBoYXZlIGFuIGV4cGxpY2l0IHBvaW50IHdoZXJlIHRoZVxuICAgIC8vIGF1dGggcG9ydGlvbiBjYW5ub3QgZ28gcGFzdCwgb3IgdGhlIGxhc3QgQCBjaGFyIGlzIHRoZSBkZWNpZGVyLlxuICAgIHZhciBhdXRoLCBhdFNpZ247XG4gICAgaWYgKGhvc3RFbmQgPT09IC0xKSB7XG4gICAgICAvLyBhdFNpZ24gY2FuIGJlIGFueXdoZXJlLlxuICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBhdFNpZ24gbXVzdCBiZSBpbiBhdXRoIHBvcnRpb24uXG4gICAgICAvLyBodHRwOi8vYUBiL2NAZCA9PiBob3N0OmIgYXV0aDphIHBhdGg6L2NAZFxuICAgICAgYXRTaWduID0gcmVzdC5sYXN0SW5kZXhPZignQCcsIGhvc3RFbmQpO1xuICAgIH1cblxuICAgIC8vIE5vdyB3ZSBoYXZlIGEgcG9ydGlvbiB3aGljaCBpcyBkZWZpbml0ZWx5IHRoZSBhdXRoLlxuICAgIC8vIFB1bGwgdGhhdCBvZmYuXG4gICAgaWYgKGF0U2lnbiAhPT0gLTEpIHtcbiAgICAgIGF1dGggPSByZXN0LnNsaWNlKDAsIGF0U2lnbik7XG4gICAgICByZXN0ID0gcmVzdC5zbGljZShhdFNpZ24gKyAxKTtcbiAgICAgIHRoaXMuYXV0aCA9IGRlY29kZVVSSUNvbXBvbmVudChhdXRoKTtcbiAgICB9XG5cbiAgICAvLyB0aGUgaG9zdCBpcyB0aGUgcmVtYWluaW5nIHRvIHRoZSBsZWZ0IG9mIHRoZSBmaXJzdCBub24taG9zdCBjaGFyXG4gICAgaG9zdEVuZCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9uSG9zdENoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaGVjID0gcmVzdC5pbmRleE9mKG5vbkhvc3RDaGFyc1tpXSk7XG4gICAgICBpZiAoaGVjICE9PSAtMSAmJiAoaG9zdEVuZCA9PT0gLTEgfHwgaGVjIDwgaG9zdEVuZCkpXG4gICAgICAgIGhvc3RFbmQgPSBoZWM7XG4gICAgfVxuICAgIC8vIGlmIHdlIHN0aWxsIGhhdmUgbm90IGhpdCBpdCwgdGhlbiB0aGUgZW50aXJlIHRoaW5nIGlzIGEgaG9zdC5cbiAgICBpZiAoaG9zdEVuZCA9PT0gLTEpXG4gICAgICBob3N0RW5kID0gcmVzdC5sZW5ndGg7XG5cbiAgICB0aGlzLmhvc3QgPSByZXN0LnNsaWNlKDAsIGhvc3RFbmQpO1xuICAgIHJlc3QgPSByZXN0LnNsaWNlKGhvc3RFbmQpO1xuXG4gICAgLy8gcHVsbCBvdXQgcG9ydC5cbiAgICB0aGlzLnBhcnNlSG9zdCgpO1xuXG4gICAgLy8gd2UndmUgaW5kaWNhdGVkIHRoYXQgdGhlcmUgaXMgYSBob3N0bmFtZSxcbiAgICAvLyBzbyBldmVuIGlmIGl0J3MgZW1wdHksIGl0IGhhcyB0byBiZSBwcmVzZW50LlxuICAgIHRoaXMuaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lIHx8ICcnO1xuXG4gICAgLy8gaWYgaG9zdG5hbWUgYmVnaW5zIHdpdGggWyBhbmQgZW5kcyB3aXRoIF1cbiAgICAvLyBhc3N1bWUgdGhhdCBpdCdzIGFuIElQdjYgYWRkcmVzcy5cbiAgICB2YXIgaXB2Nkhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZVswXSA9PT0gJ1snICYmXG4gICAgICAgIHRoaXMuaG9zdG5hbWVbdGhpcy5ob3N0bmFtZS5sZW5ndGggLSAxXSA9PT0gJ10nO1xuXG4gICAgLy8gdmFsaWRhdGUgYSBsaXR0bGUuXG4gICAgaWYgKCFpcHY2SG9zdG5hbWUpIHtcbiAgICAgIHZhciBob3N0cGFydHMgPSB0aGlzLmhvc3RuYW1lLnNwbGl0KC9cXC4vKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gaG9zdHBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgcGFydCA9IGhvc3RwYXJ0c1tpXTtcbiAgICAgICAgaWYgKCFwYXJ0KSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFwYXJ0Lm1hdGNoKGhvc3RuYW1lUGFydFBhdHRlcm4pKSB7XG4gICAgICAgICAgdmFyIG5ld3BhcnQgPSAnJztcbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgayA9IHBhcnQubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgICBpZiAocGFydC5jaGFyQ29kZUF0KGopID4gMTI3KSB7XG4gICAgICAgICAgICAgIC8vIHdlIHJlcGxhY2Ugbm9uLUFTQ0lJIGNoYXIgd2l0aCBhIHRlbXBvcmFyeSBwbGFjZWhvbGRlclxuICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRoaXMgdG8gbWFrZSBzdXJlIHNpemUgb2YgaG9zdG5hbWUgaXMgbm90XG4gICAgICAgICAgICAgIC8vIGJyb2tlbiBieSByZXBsYWNpbmcgbm9uLUFTQ0lJIGJ5IG5vdGhpbmdcbiAgICAgICAgICAgICAgbmV3cGFydCArPSAneCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBuZXdwYXJ0ICs9IHBhcnRbal07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHdlIHRlc3QgYWdhaW4gd2l0aCBBU0NJSSBjaGFyIG9ubHlcbiAgICAgICAgICBpZiAoIW5ld3BhcnQubWF0Y2goaG9zdG5hbWVQYXJ0UGF0dGVybikpIHtcbiAgICAgICAgICAgIHZhciB2YWxpZFBhcnRzID0gaG9zdHBhcnRzLnNsaWNlKDAsIGkpO1xuICAgICAgICAgICAgdmFyIG5vdEhvc3QgPSBob3N0cGFydHMuc2xpY2UoaSArIDEpO1xuICAgICAgICAgICAgdmFyIGJpdCA9IHBhcnQubWF0Y2goaG9zdG5hbWVQYXJ0U3RhcnQpO1xuICAgICAgICAgICAgaWYgKGJpdCkge1xuICAgICAgICAgICAgICB2YWxpZFBhcnRzLnB1c2goYml0WzFdKTtcbiAgICAgICAgICAgICAgbm90SG9zdC51bnNoaWZ0KGJpdFsyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm90SG9zdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmVzdCA9ICcvJyArIG5vdEhvc3Quam9pbignLicpICsgcmVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaG9zdG5hbWUgPSB2YWxpZFBhcnRzLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmhvc3RuYW1lLmxlbmd0aCA+IGhvc3RuYW1lTWF4TGVuKSB7XG4gICAgICB0aGlzLmhvc3RuYW1lID0gJyc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGhvc3RuYW1lcyBhcmUgYWx3YXlzIGxvd2VyIGNhc2UuXG4gICAgICB0aGlzLmhvc3RuYW1lID0gdGhpcy5ob3N0bmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGlmICghaXB2Nkhvc3RuYW1lKSB7XG4gICAgICAvLyBJRE5BIFN1cHBvcnQ6IFJldHVybnMgYSBwdW55Y29kZWQgcmVwcmVzZW50YXRpb24gb2YgXCJkb21haW5cIi5cbiAgICAgIC8vIEl0IG9ubHkgY29udmVydHMgcGFydHMgb2YgdGhlIGRvbWFpbiBuYW1lIHRoYXRcbiAgICAgIC8vIGhhdmUgbm9uLUFTQ0lJIGNoYXJhY3RlcnMsIGkuZS4gaXQgZG9lc24ndCBtYXR0ZXIgaWZcbiAgICAgIC8vIHlvdSBjYWxsIGl0IHdpdGggYSBkb21haW4gdGhhdCBhbHJlYWR5IGlzIEFTQ0lJLW9ubHkuXG4gICAgICB0aGlzLmhvc3RuYW1lID0gcHVueWNvZGUudG9BU0NJSSh0aGlzLmhvc3RuYW1lKTtcbiAgICB9XG5cbiAgICB2YXIgcCA9IHRoaXMucG9ydCA/ICc6JyArIHRoaXMucG9ydCA6ICcnO1xuICAgIHZhciBoID0gdGhpcy5ob3N0bmFtZSB8fCAnJztcbiAgICB0aGlzLmhvc3QgPSBoICsgcDtcbiAgICB0aGlzLmhyZWYgKz0gdGhpcy5ob3N0O1xuXG4gICAgLy8gc3RyaXAgWyBhbmQgXSBmcm9tIHRoZSBob3N0bmFtZVxuICAgIC8vIHRoZSBob3N0IGZpZWxkIHN0aWxsIHJldGFpbnMgdGhlbSwgdGhvdWdoXG4gICAgaWYgKGlwdjZIb3N0bmFtZSkge1xuICAgICAgdGhpcy5ob3N0bmFtZSA9IHRoaXMuaG9zdG5hbWUuc3Vic3RyKDEsIHRoaXMuaG9zdG5hbWUubGVuZ3RoIC0gMik7XG4gICAgICBpZiAocmVzdFswXSAhPT0gJy8nKSB7XG4gICAgICAgIHJlc3QgPSAnLycgKyByZXN0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIG5vdyByZXN0IGlzIHNldCB0byB0aGUgcG9zdC1ob3N0IHN0dWZmLlxuICAvLyBjaG9wIG9mZiBhbnkgZGVsaW0gY2hhcnMuXG4gIGlmICghdW5zYWZlUHJvdG9jb2xbbG93ZXJQcm90b10pIHtcblxuICAgIC8vIEZpcnN0LCBtYWtlIDEwMCUgc3VyZSB0aGF0IGFueSBcImF1dG9Fc2NhcGVcIiBjaGFycyBnZXRcbiAgICAvLyBlc2NhcGVkLCBldmVuIGlmIGVuY29kZVVSSUNvbXBvbmVudCBkb2Vzbid0IHRoaW5rIHRoZXlcbiAgICAvLyBuZWVkIHRvIGJlLlxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXV0b0VzY2FwZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBhZSA9IGF1dG9Fc2NhcGVbaV07XG4gICAgICBpZiAocmVzdC5pbmRleE9mKGFlKSA9PT0gLTEpXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgdmFyIGVzYyA9IGVuY29kZVVSSUNvbXBvbmVudChhZSk7XG4gICAgICBpZiAoZXNjID09PSBhZSkge1xuICAgICAgICBlc2MgPSBlc2NhcGUoYWUpO1xuICAgICAgfVxuICAgICAgcmVzdCA9IHJlc3Quc3BsaXQoYWUpLmpvaW4oZXNjKTtcbiAgICB9XG4gIH1cblxuXG4gIC8vIGNob3Agb2ZmIGZyb20gdGhlIHRhaWwgZmlyc3QuXG4gIHZhciBoYXNoID0gcmVzdC5pbmRleE9mKCcjJyk7XG4gIGlmIChoYXNoICE9PSAtMSkge1xuICAgIC8vIGdvdCBhIGZyYWdtZW50IHN0cmluZy5cbiAgICB0aGlzLmhhc2ggPSByZXN0LnN1YnN0cihoYXNoKTtcbiAgICByZXN0ID0gcmVzdC5zbGljZSgwLCBoYXNoKTtcbiAgfVxuICB2YXIgcW0gPSByZXN0LmluZGV4T2YoJz8nKTtcbiAgaWYgKHFtICE9PSAtMSkge1xuICAgIHRoaXMuc2VhcmNoID0gcmVzdC5zdWJzdHIocW0pO1xuICAgIHRoaXMucXVlcnkgPSByZXN0LnN1YnN0cihxbSArIDEpO1xuICAgIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnlzdHJpbmcucGFyc2UodGhpcy5xdWVyeSk7XG4gICAgfVxuICAgIHJlc3QgPSByZXN0LnNsaWNlKDAsIHFtKTtcbiAgfSBlbHNlIGlmIChwYXJzZVF1ZXJ5U3RyaW5nKSB7XG4gICAgLy8gbm8gcXVlcnkgc3RyaW5nLCBidXQgcGFyc2VRdWVyeVN0cmluZyBzdGlsbCByZXF1ZXN0ZWRcbiAgICB0aGlzLnNlYXJjaCA9ICcnO1xuICAgIHRoaXMucXVlcnkgPSB7fTtcbiAgfVxuICBpZiAocmVzdCkgdGhpcy5wYXRobmFtZSA9IHJlc3Q7XG4gIGlmIChzbGFzaGVkUHJvdG9jb2xbbG93ZXJQcm90b10gJiZcbiAgICAgIHRoaXMuaG9zdG5hbWUgJiYgIXRoaXMucGF0aG5hbWUpIHtcbiAgICB0aGlzLnBhdGhuYW1lID0gJy8nO1xuICB9XG5cbiAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICBpZiAodGhpcy5wYXRobmFtZSB8fCB0aGlzLnNlYXJjaCkge1xuICAgIHZhciBwID0gdGhpcy5wYXRobmFtZSB8fCAnJztcbiAgICB2YXIgcyA9IHRoaXMuc2VhcmNoIHx8ICcnO1xuICAgIHRoaXMucGF0aCA9IHAgKyBzO1xuICB9XG5cbiAgLy8gZmluYWxseSwgcmVjb25zdHJ1Y3QgdGhlIGhyZWYgYmFzZWQgb24gd2hhdCBoYXMgYmVlbiB2YWxpZGF0ZWQuXG4gIHRoaXMuaHJlZiA9IHRoaXMuZm9ybWF0KCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gZm9ybWF0IGEgcGFyc2VkIG9iamVjdCBpbnRvIGEgdXJsIHN0cmluZ1xuZnVuY3Rpb24gdXJsRm9ybWF0KG9iaikge1xuICAvLyBlbnN1cmUgaXQncyBhbiBvYmplY3QsIGFuZCBub3QgYSBzdHJpbmcgdXJsLlxuICAvLyBJZiBpdCdzIGFuIG9iaiwgdGhpcyBpcyBhIG5vLW9wLlxuICAvLyB0aGlzIHdheSwgeW91IGNhbiBjYWxsIHVybF9mb3JtYXQoKSBvbiBzdHJpbmdzXG4gIC8vIHRvIGNsZWFuIHVwIHBvdGVudGlhbGx5IHdvbmt5IHVybHMuXG4gIGlmICh1dGlsLmlzU3RyaW5nKG9iaikpIG9iaiA9IHVybFBhcnNlKG9iaik7XG4gIGlmICghKG9iaiBpbnN0YW5jZW9mIFVybCkpIHJldHVybiBVcmwucHJvdG90eXBlLmZvcm1hdC5jYWxsKG9iaik7XG4gIHJldHVybiBvYmouZm9ybWF0KCk7XG59XG5cblVybC5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhdXRoID0gdGhpcy5hdXRoIHx8ICcnO1xuICBpZiAoYXV0aCkge1xuICAgIGF1dGggPSBlbmNvZGVVUklDb21wb25lbnQoYXV0aCk7XG4gICAgYXV0aCA9IGF1dGgucmVwbGFjZSgvJTNBL2ksICc6Jyk7XG4gICAgYXV0aCArPSAnQCc7XG4gIH1cblxuICB2YXIgcHJvdG9jb2wgPSB0aGlzLnByb3RvY29sIHx8ICcnLFxuICAgICAgcGF0aG5hbWUgPSB0aGlzLnBhdGhuYW1lIHx8ICcnLFxuICAgICAgaGFzaCA9IHRoaXMuaGFzaCB8fCAnJyxcbiAgICAgIGhvc3QgPSBmYWxzZSxcbiAgICAgIHF1ZXJ5ID0gJyc7XG5cbiAgaWYgKHRoaXMuaG9zdCkge1xuICAgIGhvc3QgPSBhdXRoICsgdGhpcy5ob3N0O1xuICB9IGVsc2UgaWYgKHRoaXMuaG9zdG5hbWUpIHtcbiAgICBob3N0ID0gYXV0aCArICh0aGlzLmhvc3RuYW1lLmluZGV4T2YoJzonKSA9PT0gLTEgP1xuICAgICAgICB0aGlzLmhvc3RuYW1lIDpcbiAgICAgICAgJ1snICsgdGhpcy5ob3N0bmFtZSArICddJyk7XG4gICAgaWYgKHRoaXMucG9ydCkge1xuICAgICAgaG9zdCArPSAnOicgKyB0aGlzLnBvcnQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMucXVlcnkgJiZcbiAgICAgIHV0aWwuaXNPYmplY3QodGhpcy5xdWVyeSkgJiZcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMucXVlcnkpLmxlbmd0aCkge1xuICAgIHF1ZXJ5ID0gcXVlcnlzdHJpbmcuc3RyaW5naWZ5KHRoaXMucXVlcnkpO1xuICB9XG5cbiAgdmFyIHNlYXJjaCA9IHRoaXMuc2VhcmNoIHx8IChxdWVyeSAmJiAoJz8nICsgcXVlcnkpKSB8fCAnJztcblxuICBpZiAocHJvdG9jb2wgJiYgcHJvdG9jb2wuc3Vic3RyKC0xKSAhPT0gJzonKSBwcm90b2NvbCArPSAnOic7XG5cbiAgLy8gb25seSB0aGUgc2xhc2hlZFByb3RvY29scyBnZXQgdGhlIC8vLiAgTm90IG1haWx0bzosIHhtcHA6LCBldGMuXG4gIC8vIHVubGVzcyB0aGV5IGhhZCB0aGVtIHRvIGJlZ2luIHdpdGguXG4gIGlmICh0aGlzLnNsYXNoZXMgfHxcbiAgICAgICghcHJvdG9jb2wgfHwgc2xhc2hlZFByb3RvY29sW3Byb3RvY29sXSkgJiYgaG9zdCAhPT0gZmFsc2UpIHtcbiAgICBob3N0ID0gJy8vJyArIChob3N0IHx8ICcnKTtcbiAgICBpZiAocGF0aG5hbWUgJiYgcGF0aG5hbWUuY2hhckF0KDApICE9PSAnLycpIHBhdGhuYW1lID0gJy8nICsgcGF0aG5hbWU7XG4gIH0gZWxzZSBpZiAoIWhvc3QpIHtcbiAgICBob3N0ID0gJyc7XG4gIH1cblxuICBpZiAoaGFzaCAmJiBoYXNoLmNoYXJBdCgwKSAhPT0gJyMnKSBoYXNoID0gJyMnICsgaGFzaDtcbiAgaWYgKHNlYXJjaCAmJiBzZWFyY2guY2hhckF0KDApICE9PSAnPycpIHNlYXJjaCA9ICc/JyArIHNlYXJjaDtcblxuICBwYXRobmFtZSA9IHBhdGhuYW1lLnJlcGxhY2UoL1s/I10vZywgZnVuY3Rpb24obWF0Y2gpIHtcbiAgICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KG1hdGNoKTtcbiAgfSk7XG4gIHNlYXJjaCA9IHNlYXJjaC5yZXBsYWNlKCcjJywgJyUyMycpO1xuXG4gIHJldHVybiBwcm90b2NvbCArIGhvc3QgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XG59O1xuXG5mdW5jdGlvbiB1cmxSZXNvbHZlKHNvdXJjZSwgcmVsYXRpdmUpIHtcbiAgcmV0dXJuIHVybFBhcnNlKHNvdXJjZSwgZmFsc2UsIHRydWUpLnJlc29sdmUocmVsYXRpdmUpO1xufVxuXG5VcmwucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbihyZWxhdGl2ZSkge1xuICByZXR1cm4gdGhpcy5yZXNvbHZlT2JqZWN0KHVybFBhcnNlKHJlbGF0aXZlLCBmYWxzZSwgdHJ1ZSkpLmZvcm1hdCgpO1xufTtcblxuZnVuY3Rpb24gdXJsUmVzb2x2ZU9iamVjdChzb3VyY2UsIHJlbGF0aXZlKSB7XG4gIGlmICghc291cmNlKSByZXR1cm4gcmVsYXRpdmU7XG4gIHJldHVybiB1cmxQYXJzZShzb3VyY2UsIGZhbHNlLCB0cnVlKS5yZXNvbHZlT2JqZWN0KHJlbGF0aXZlKTtcbn1cblxuVXJsLnByb3RvdHlwZS5yZXNvbHZlT2JqZWN0ID0gZnVuY3Rpb24ocmVsYXRpdmUpIHtcbiAgaWYgKHV0aWwuaXNTdHJpbmcocmVsYXRpdmUpKSB7XG4gICAgdmFyIHJlbCA9IG5ldyBVcmwoKTtcbiAgICByZWwucGFyc2UocmVsYXRpdmUsIGZhbHNlLCB0cnVlKTtcbiAgICByZWxhdGl2ZSA9IHJlbDtcbiAgfVxuXG4gIHZhciByZXN1bHQgPSBuZXcgVXJsKCk7XG4gIHZhciB0a2V5cyA9IE9iamVjdC5rZXlzKHRoaXMpO1xuICBmb3IgKHZhciB0ayA9IDA7IHRrIDwgdGtleXMubGVuZ3RoOyB0aysrKSB7XG4gICAgdmFyIHRrZXkgPSB0a2V5c1t0a107XG4gICAgcmVzdWx0W3RrZXldID0gdGhpc1t0a2V5XTtcbiAgfVxuXG4gIC8vIGhhc2ggaXMgYWx3YXlzIG92ZXJyaWRkZW4sIG5vIG1hdHRlciB3aGF0LlxuICAvLyBldmVuIGhyZWY9XCJcIiB3aWxsIHJlbW92ZSBpdC5cbiAgcmVzdWx0Lmhhc2ggPSByZWxhdGl2ZS5oYXNoO1xuXG4gIC8vIGlmIHRoZSByZWxhdGl2ZSB1cmwgaXMgZW1wdHksIHRoZW4gdGhlcmUncyBub3RoaW5nIGxlZnQgdG8gZG8gaGVyZS5cbiAgaWYgKHJlbGF0aXZlLmhyZWYgPT09ICcnKSB7XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIGhyZWZzIGxpa2UgLy9mb28vYmFyIGFsd2F5cyBjdXQgdG8gdGhlIHByb3RvY29sLlxuICBpZiAocmVsYXRpdmUuc2xhc2hlcyAmJiAhcmVsYXRpdmUucHJvdG9jb2wpIHtcbiAgICAvLyB0YWtlIGV2ZXJ5dGhpbmcgZXhjZXB0IHRoZSBwcm90b2NvbCBmcm9tIHJlbGF0aXZlXG4gICAgdmFyIHJrZXlzID0gT2JqZWN0LmtleXMocmVsYXRpdmUpO1xuICAgIGZvciAodmFyIHJrID0gMDsgcmsgPCBya2V5cy5sZW5ndGg7IHJrKyspIHtcbiAgICAgIHZhciBya2V5ID0gcmtleXNbcmtdO1xuICAgICAgaWYgKHJrZXkgIT09ICdwcm90b2NvbCcpXG4gICAgICAgIHJlc3VsdFtya2V5XSA9IHJlbGF0aXZlW3JrZXldO1xuICAgIH1cblxuICAgIC8vdXJsUGFyc2UgYXBwZW5kcyB0cmFpbGluZyAvIHRvIHVybHMgbGlrZSBodHRwOi8vd3d3LmV4YW1wbGUuY29tXG4gICAgaWYgKHNsYXNoZWRQcm90b2NvbFtyZXN1bHQucHJvdG9jb2xdICYmXG4gICAgICAgIHJlc3VsdC5ob3N0bmFtZSAmJiAhcmVzdWx0LnBhdGhuYW1lKSB7XG4gICAgICByZXN1bHQucGF0aCA9IHJlc3VsdC5wYXRobmFtZSA9ICcvJztcbiAgICB9XG5cbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgaWYgKHJlbGF0aXZlLnByb3RvY29sICYmIHJlbGF0aXZlLnByb3RvY29sICE9PSByZXN1bHQucHJvdG9jb2wpIHtcbiAgICAvLyBpZiBpdCdzIGEga25vd24gdXJsIHByb3RvY29sLCB0aGVuIGNoYW5naW5nXG4gICAgLy8gdGhlIHByb3RvY29sIGRvZXMgd2VpcmQgdGhpbmdzXG4gICAgLy8gZmlyc3QsIGlmIGl0J3Mgbm90IGZpbGU6LCB0aGVuIHdlIE1VU1QgaGF2ZSBhIGhvc3QsXG4gICAgLy8gYW5kIGlmIHRoZXJlIHdhcyBhIHBhdGhcbiAgICAvLyB0byBiZWdpbiB3aXRoLCB0aGVuIHdlIE1VU1QgaGF2ZSBhIHBhdGguXG4gICAgLy8gaWYgaXQgaXMgZmlsZTosIHRoZW4gdGhlIGhvc3QgaXMgZHJvcHBlZCxcbiAgICAvLyBiZWNhdXNlIHRoYXQncyBrbm93biB0byBiZSBob3N0bGVzcy5cbiAgICAvLyBhbnl0aGluZyBlbHNlIGlzIGFzc3VtZWQgdG8gYmUgYWJzb2x1dGUuXG4gICAgaWYgKCFzbGFzaGVkUHJvdG9jb2xbcmVsYXRpdmUucHJvdG9jb2xdKSB7XG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHJlbGF0aXZlKTtcbiAgICAgIGZvciAodmFyIHYgPSAwOyB2IDwga2V5cy5sZW5ndGg7IHYrKykge1xuICAgICAgICB2YXIgayA9IGtleXNbdl07XG4gICAgICAgIHJlc3VsdFtrXSA9IHJlbGF0aXZlW2tdO1xuICAgICAgfVxuICAgICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHJlc3VsdC5wcm90b2NvbCA9IHJlbGF0aXZlLnByb3RvY29sO1xuICAgIGlmICghcmVsYXRpdmUuaG9zdCAmJiAhaG9zdGxlc3NQcm90b2NvbFtyZWxhdGl2ZS5wcm90b2NvbF0pIHtcbiAgICAgIHZhciByZWxQYXRoID0gKHJlbGF0aXZlLnBhdGhuYW1lIHx8ICcnKS5zcGxpdCgnLycpO1xuICAgICAgd2hpbGUgKHJlbFBhdGgubGVuZ3RoICYmICEocmVsYXRpdmUuaG9zdCA9IHJlbFBhdGguc2hpZnQoKSkpO1xuICAgICAgaWYgKCFyZWxhdGl2ZS5ob3N0KSByZWxhdGl2ZS5ob3N0ID0gJyc7XG4gICAgICBpZiAoIXJlbGF0aXZlLmhvc3RuYW1lKSByZWxhdGl2ZS5ob3N0bmFtZSA9ICcnO1xuICAgICAgaWYgKHJlbFBhdGhbMF0gIT09ICcnKSByZWxQYXRoLnVuc2hpZnQoJycpO1xuICAgICAgaWYgKHJlbFBhdGgubGVuZ3RoIDwgMikgcmVsUGF0aC51bnNoaWZ0KCcnKTtcbiAgICAgIHJlc3VsdC5wYXRobmFtZSA9IHJlbFBhdGguam9pbignLycpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucGF0aG5hbWUgPSByZWxhdGl2ZS5wYXRobmFtZTtcbiAgICB9XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgICByZXN1bHQuaG9zdCA9IHJlbGF0aXZlLmhvc3QgfHwgJyc7XG4gICAgcmVzdWx0LmF1dGggPSByZWxhdGl2ZS5hdXRoO1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9IHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3Q7XG4gICAgcmVzdWx0LnBvcnQgPSByZWxhdGl2ZS5wb3J0O1xuICAgIC8vIHRvIHN1cHBvcnQgaHR0cC5yZXF1ZXN0XG4gICAgaWYgKHJlc3VsdC5wYXRobmFtZSB8fCByZXN1bHQuc2VhcmNoKSB7XG4gICAgICB2YXIgcCA9IHJlc3VsdC5wYXRobmFtZSB8fCAnJztcbiAgICAgIHZhciBzID0gcmVzdWx0LnNlYXJjaCB8fCAnJztcbiAgICAgIHJlc3VsdC5wYXRoID0gcCArIHM7XG4gICAgfVxuICAgIHJlc3VsdC5zbGFzaGVzID0gcmVzdWx0LnNsYXNoZXMgfHwgcmVsYXRpdmUuc2xhc2hlcztcbiAgICByZXN1bHQuaHJlZiA9IHJlc3VsdC5mb3JtYXQoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgdmFyIGlzU291cmNlQWJzID0gKHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpLFxuICAgICAgaXNSZWxBYnMgPSAoXG4gICAgICAgICAgcmVsYXRpdmUuaG9zdCB8fFxuICAgICAgICAgIHJlbGF0aXZlLnBhdGhuYW1lICYmIHJlbGF0aXZlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nXG4gICAgICApLFxuICAgICAgbXVzdEVuZEFicyA9IChpc1JlbEFicyB8fCBpc1NvdXJjZUFicyB8fFxuICAgICAgICAgICAgICAgICAgICAocmVzdWx0Lmhvc3QgJiYgcmVsYXRpdmUucGF0aG5hbWUpKSxcbiAgICAgIHJlbW92ZUFsbERvdHMgPSBtdXN0RW5kQWJzLFxuICAgICAgc3JjUGF0aCA9IHJlc3VsdC5wYXRobmFtZSAmJiByZXN1bHQucGF0aG5hbWUuc3BsaXQoJy8nKSB8fCBbXSxcbiAgICAgIHJlbFBhdGggPSByZWxhdGl2ZS5wYXRobmFtZSAmJiByZWxhdGl2ZS5wYXRobmFtZS5zcGxpdCgnLycpIHx8IFtdLFxuICAgICAgcHN5Y2hvdGljID0gcmVzdWx0LnByb3RvY29sICYmICFzbGFzaGVkUHJvdG9jb2xbcmVzdWx0LnByb3RvY29sXTtcblxuICAvLyBpZiB0aGUgdXJsIGlzIGEgbm9uLXNsYXNoZWQgdXJsLCB0aGVuIHJlbGF0aXZlXG4gIC8vIGxpbmtzIGxpa2UgLi4vLi4gc2hvdWxkIGJlIGFibGVcbiAgLy8gdG8gY3Jhd2wgdXAgdG8gdGhlIGhvc3RuYW1lLCBhcyB3ZWxsLiAgVGhpcyBpcyBzdHJhbmdlLlxuICAvLyByZXN1bHQucHJvdG9jb2wgaGFzIGFscmVhZHkgYmVlbiBzZXQgYnkgbm93LlxuICAvLyBMYXRlciBvbiwgcHV0IHRoZSBmaXJzdCBwYXRoIHBhcnQgaW50byB0aGUgaG9zdCBmaWVsZC5cbiAgaWYgKHBzeWNob3RpYykge1xuICAgIHJlc3VsdC5ob3N0bmFtZSA9ICcnO1xuICAgIHJlc3VsdC5wb3J0ID0gbnVsbDtcbiAgICBpZiAocmVzdWx0Lmhvc3QpIHtcbiAgICAgIGlmIChzcmNQYXRoWzBdID09PSAnJykgc3JjUGF0aFswXSA9IHJlc3VsdC5ob3N0O1xuICAgICAgZWxzZSBzcmNQYXRoLnVuc2hpZnQocmVzdWx0Lmhvc3QpO1xuICAgIH1cbiAgICByZXN1bHQuaG9zdCA9ICcnO1xuICAgIGlmIChyZWxhdGl2ZS5wcm90b2NvbCkge1xuICAgICAgcmVsYXRpdmUuaG9zdG5hbWUgPSBudWxsO1xuICAgICAgcmVsYXRpdmUucG9ydCA9IG51bGw7XG4gICAgICBpZiAocmVsYXRpdmUuaG9zdCkge1xuICAgICAgICBpZiAocmVsUGF0aFswXSA9PT0gJycpIHJlbFBhdGhbMF0gPSByZWxhdGl2ZS5ob3N0O1xuICAgICAgICBlbHNlIHJlbFBhdGgudW5zaGlmdChyZWxhdGl2ZS5ob3N0KTtcbiAgICAgIH1cbiAgICAgIHJlbGF0aXZlLmhvc3QgPSBudWxsO1xuICAgIH1cbiAgICBtdXN0RW5kQWJzID0gbXVzdEVuZEFicyAmJiAocmVsUGF0aFswXSA9PT0gJycgfHwgc3JjUGF0aFswXSA9PT0gJycpO1xuICB9XG5cbiAgaWYgKGlzUmVsQWJzKSB7XG4gICAgLy8gaXQncyBhYnNvbHV0ZS5cbiAgICByZXN1bHQuaG9zdCA9IChyZWxhdGl2ZS5ob3N0IHx8IHJlbGF0aXZlLmhvc3QgPT09ICcnKSA/XG4gICAgICAgICAgICAgICAgICByZWxhdGl2ZS5ob3N0IDogcmVzdWx0Lmhvc3Q7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gKHJlbGF0aXZlLmhvc3RuYW1lIHx8IHJlbGF0aXZlLmhvc3RuYW1lID09PSAnJykgP1xuICAgICAgICAgICAgICAgICAgICAgIHJlbGF0aXZlLmhvc3RuYW1lIDogcmVzdWx0Lmhvc3RuYW1lO1xuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gICAgc3JjUGF0aCA9IHJlbFBhdGg7XG4gICAgLy8gZmFsbCB0aHJvdWdoIHRvIHRoZSBkb3QtaGFuZGxpbmcgYmVsb3cuXG4gIH0gZWxzZSBpZiAocmVsUGF0aC5sZW5ndGgpIHtcbiAgICAvLyBpdCdzIHJlbGF0aXZlXG4gICAgLy8gdGhyb3cgYXdheSB0aGUgZXhpc3RpbmcgZmlsZSwgYW5kIHRha2UgdGhlIG5ldyBwYXRoIGluc3RlYWQuXG4gICAgaWYgKCFzcmNQYXRoKSBzcmNQYXRoID0gW107XG4gICAgc3JjUGF0aC5wb3AoKTtcbiAgICBzcmNQYXRoID0gc3JjUGF0aC5jb25jYXQocmVsUGF0aCk7XG4gICAgcmVzdWx0LnNlYXJjaCA9IHJlbGF0aXZlLnNlYXJjaDtcbiAgICByZXN1bHQucXVlcnkgPSByZWxhdGl2ZS5xdWVyeTtcbiAgfSBlbHNlIGlmICghdXRpbC5pc051bGxPclVuZGVmaW5lZChyZWxhdGl2ZS5zZWFyY2gpKSB7XG4gICAgLy8ganVzdCBwdWxsIG91dCB0aGUgc2VhcmNoLlxuICAgIC8vIGxpa2UgaHJlZj0nP2ZvbycuXG4gICAgLy8gUHV0IHRoaXMgYWZ0ZXIgdGhlIG90aGVyIHR3byBjYXNlcyBiZWNhdXNlIGl0IHNpbXBsaWZpZXMgdGhlIGJvb2xlYW5zXG4gICAgaWYgKHBzeWNob3RpYykge1xuICAgICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBzcmNQYXRoLnNoaWZ0KCk7XG4gICAgICAvL29jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG4gICAgICAvL3RoaXMgZXNwZWNpYWxseSBoYXBwZW5zIGluIGNhc2VzIGxpa2VcbiAgICAgIC8vdXJsLnJlc29sdmVPYmplY3QoJ21haWx0bzpsb2NhbDFAZG9tYWluMScsICdsb2NhbDJAZG9tYWluMicpXG4gICAgICB2YXIgYXV0aEluSG9zdCA9IHJlc3VsdC5ob3N0ICYmIHJlc3VsdC5ob3N0LmluZGV4T2YoJ0AnKSA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuaG9zdC5zcGxpdCgnQCcpIDogZmFsc2U7XG4gICAgICBpZiAoYXV0aEluSG9zdCkge1xuICAgICAgICByZXN1bHQuYXV0aCA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgICAgcmVzdWx0Lmhvc3QgPSByZXN1bHQuaG9zdG5hbWUgPSBhdXRoSW5Ib3N0LnNoaWZ0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC5zZWFyY2ggPSByZWxhdGl2ZS5zZWFyY2g7XG4gICAgcmVzdWx0LnF1ZXJ5ID0gcmVsYXRpdmUucXVlcnk7XG4gICAgLy90byBzdXBwb3J0IGh0dHAucmVxdWVzdFxuICAgIGlmICghdXRpbC5pc051bGwocmVzdWx0LnBhdGhuYW1lKSB8fCAhdXRpbC5pc051bGwocmVzdWx0LnNlYXJjaCkpIHtcbiAgICAgIHJlc3VsdC5wYXRoID0gKHJlc3VsdC5wYXRobmFtZSA/IHJlc3VsdC5wYXRobmFtZSA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgIChyZXN1bHQuc2VhcmNoID8gcmVzdWx0LnNlYXJjaCA6ICcnKTtcbiAgICB9XG4gICAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmICghc3JjUGF0aC5sZW5ndGgpIHtcbiAgICAvLyBubyBwYXRoIGF0IGFsbC4gIGVhc3kuXG4gICAgLy8gd2UndmUgYWxyZWFkeSBoYW5kbGVkIHRoZSBvdGhlciBzdHVmZiBhYm92ZS5cbiAgICByZXN1bHQucGF0aG5hbWUgPSBudWxsO1xuICAgIC8vdG8gc3VwcG9ydCBodHRwLnJlcXVlc3RcbiAgICBpZiAocmVzdWx0LnNlYXJjaCkge1xuICAgICAgcmVzdWx0LnBhdGggPSAnLycgKyByZXN1bHQuc2VhcmNoO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQucGF0aCA9IG51bGw7XG4gICAgfVxuICAgIHJlc3VsdC5ocmVmID0gcmVzdWx0LmZvcm1hdCgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBpZiBhIHVybCBFTkRzIGluIC4gb3IgLi4sIHRoZW4gaXQgbXVzdCBnZXQgYSB0cmFpbGluZyBzbGFzaC5cbiAgLy8gaG93ZXZlciwgaWYgaXQgZW5kcyBpbiBhbnl0aGluZyBlbHNlIG5vbi1zbGFzaHksXG4gIC8vIHRoZW4gaXQgbXVzdCBOT1QgZ2V0IGEgdHJhaWxpbmcgc2xhc2guXG4gIHZhciBsYXN0ID0gc3JjUGF0aC5zbGljZSgtMSlbMF07XG4gIHZhciBoYXNUcmFpbGluZ1NsYXNoID0gKFxuICAgICAgKHJlc3VsdC5ob3N0IHx8IHJlbGF0aXZlLmhvc3QgfHwgc3JjUGF0aC5sZW5ndGggPiAxKSAmJlxuICAgICAgKGxhc3QgPT09ICcuJyB8fCBsYXN0ID09PSAnLi4nKSB8fCBsYXN0ID09PSAnJyk7XG5cbiAgLy8gc3RyaXAgc2luZ2xlIGRvdHMsIHJlc29sdmUgZG91YmxlIGRvdHMgdG8gcGFyZW50IGRpclxuICAvLyBpZiB0aGUgcGF0aCB0cmllcyB0byBnbyBhYm92ZSB0aGUgcm9vdCwgYHVwYCBlbmRzIHVwID4gMFxuICB2YXIgdXAgPSAwO1xuICBmb3IgKHZhciBpID0gc3JjUGF0aC5sZW5ndGg7IGkgPj0gMDsgaS0tKSB7XG4gICAgbGFzdCA9IHNyY1BhdGhbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgfSBlbHNlIGlmIChsYXN0ID09PSAnLi4nKSB7XG4gICAgICBzcmNQYXRoLnNwbGljZShpLCAxKTtcbiAgICAgIHVwKys7XG4gICAgfSBlbHNlIGlmICh1cCkge1xuICAgICAgc3JjUGF0aC5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKCFtdXN0RW5kQWJzICYmICFyZW1vdmVBbGxEb3RzKSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBzcmNQYXRoLnVuc2hpZnQoJy4uJyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKG11c3RFbmRBYnMgJiYgc3JjUGF0aFswXSAhPT0gJycgJiZcbiAgICAgICghc3JjUGF0aFswXSB8fCBzcmNQYXRoWzBdLmNoYXJBdCgwKSAhPT0gJy8nKSkge1xuICAgIHNyY1BhdGgudW5zaGlmdCgnJyk7XG4gIH1cblxuICBpZiAoaGFzVHJhaWxpbmdTbGFzaCAmJiAoc3JjUGF0aC5qb2luKCcvJykuc3Vic3RyKC0xKSAhPT0gJy8nKSkge1xuICAgIHNyY1BhdGgucHVzaCgnJyk7XG4gIH1cblxuICB2YXIgaXNBYnNvbHV0ZSA9IHNyY1BhdGhbMF0gPT09ICcnIHx8XG4gICAgICAoc3JjUGF0aFswXSAmJiBzcmNQYXRoWzBdLmNoYXJBdCgwKSA9PT0gJy8nKTtcblxuICAvLyBwdXQgdGhlIGhvc3QgYmFja1xuICBpZiAocHN5Y2hvdGljKSB7XG4gICAgcmVzdWx0Lmhvc3RuYW1lID0gcmVzdWx0Lmhvc3QgPSBpc0Fic29sdXRlID8gJycgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjUGF0aC5sZW5ndGggPyBzcmNQYXRoLnNoaWZ0KCkgOiAnJztcbiAgICAvL29jY2F0aW9uYWx5IHRoZSBhdXRoIGNhbiBnZXQgc3R1Y2sgb25seSBpbiBob3N0XG4gICAgLy90aGlzIGVzcGVjaWFsbHkgaGFwcGVucyBpbiBjYXNlcyBsaWtlXG4gICAgLy91cmwucmVzb2x2ZU9iamVjdCgnbWFpbHRvOmxvY2FsMUBkb21haW4xJywgJ2xvY2FsMkBkb21haW4yJylcbiAgICB2YXIgYXV0aEluSG9zdCA9IHJlc3VsdC5ob3N0ICYmIHJlc3VsdC5ob3N0LmluZGV4T2YoJ0AnKSA+IDAgP1xuICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lmhvc3Quc3BsaXQoJ0AnKSA6IGZhbHNlO1xuICAgIGlmIChhdXRoSW5Ib3N0KSB7XG4gICAgICByZXN1bHQuYXV0aCA9IGF1dGhJbkhvc3Quc2hpZnQoKTtcbiAgICAgIHJlc3VsdC5ob3N0ID0gcmVzdWx0Lmhvc3RuYW1lID0gYXV0aEluSG9zdC5zaGlmdCgpO1xuICAgIH1cbiAgfVxuXG4gIG11c3RFbmRBYnMgPSBtdXN0RW5kQWJzIHx8IChyZXN1bHQuaG9zdCAmJiBzcmNQYXRoLmxlbmd0aCk7XG5cbiAgaWYgKG11c3RFbmRBYnMgJiYgIWlzQWJzb2x1dGUpIHtcbiAgICBzcmNQYXRoLnVuc2hpZnQoJycpO1xuICB9XG5cbiAgaWYgKCFzcmNQYXRoLmxlbmd0aCkge1xuICAgIHJlc3VsdC5wYXRobmFtZSA9IG51bGw7XG4gICAgcmVzdWx0LnBhdGggPSBudWxsO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdC5wYXRobmFtZSA9IHNyY1BhdGguam9pbignLycpO1xuICB9XG5cbiAgLy90byBzdXBwb3J0IHJlcXVlc3QuaHR0cFxuICBpZiAoIXV0aWwuaXNOdWxsKHJlc3VsdC5wYXRobmFtZSkgfHwgIXV0aWwuaXNOdWxsKHJlc3VsdC5zZWFyY2gpKSB7XG4gICAgcmVzdWx0LnBhdGggPSAocmVzdWx0LnBhdGhuYW1lID8gcmVzdWx0LnBhdGhuYW1lIDogJycpICtcbiAgICAgICAgICAgICAgICAgIChyZXN1bHQuc2VhcmNoID8gcmVzdWx0LnNlYXJjaCA6ICcnKTtcbiAgfVxuICByZXN1bHQuYXV0aCA9IHJlbGF0aXZlLmF1dGggfHwgcmVzdWx0LmF1dGg7XG4gIHJlc3VsdC5zbGFzaGVzID0gcmVzdWx0LnNsYXNoZXMgfHwgcmVsYXRpdmUuc2xhc2hlcztcbiAgcmVzdWx0LmhyZWYgPSByZXN1bHQuZm9ybWF0KCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5VcmwucHJvdG90eXBlLnBhcnNlSG9zdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaG9zdCA9IHRoaXMuaG9zdDtcbiAgdmFyIHBvcnQgPSBwb3J0UGF0dGVybi5leGVjKGhvc3QpO1xuICBpZiAocG9ydCkge1xuICAgIHBvcnQgPSBwb3J0WzBdO1xuICAgIGlmIChwb3J0ICE9PSAnOicpIHtcbiAgICAgIHRoaXMucG9ydCA9IHBvcnQuc3Vic3RyKDEpO1xuICAgIH1cbiAgICBob3N0ID0gaG9zdC5zdWJzdHIoMCwgaG9zdC5sZW5ndGggLSBwb3J0Lmxlbmd0aCk7XG4gIH1cbiAgaWYgKGhvc3QpIHRoaXMuaG9zdG5hbWUgPSBob3N0O1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzU3RyaW5nOiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gdHlwZW9mKGFyZykgPT09ICdzdHJpbmcnO1xuICB9LFxuICBpc09iamVjdDogZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIHR5cGVvZihhcmcpID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG4gIH0sXG4gIGlzTnVsbDogZnVuY3Rpb24oYXJnKSB7XG4gICAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbiAgfSxcbiAgaXNOdWxsT3JVbmRlZmluZWQ6IGZ1bmN0aW9uKGFyZykge1xuICAgIHJldHVybiBhcmcgPT0gbnVsbDtcbiAgfVxufTtcbiIsIlxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlcHJlY2F0ZTtcblxuLyoqXG4gKiBNYXJrIHRoYXQgYSBtZXRob2Qgc2hvdWxkIG5vdCBiZSB1c2VkLlxuICogUmV0dXJucyBhIG1vZGlmaWVkIGZ1bmN0aW9uIHdoaWNoIHdhcm5zIG9uY2UgYnkgZGVmYXVsdC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLm5vRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gaXQgaXMgYSBuby1vcC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRocm93RGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgdGhyb3cgYW4gRXJyb3Igd2hlbiBpbnZva2VkLlxuICpcbiAqIElmIGBsb2NhbFN0b3JhZ2UudHJhY2VEZXByZWNhdGlvbiA9IHRydWVgIGlzIHNldCwgdGhlbiBkZXByZWNhdGVkIGZ1bmN0aW9uc1xuICogd2lsbCBpbnZva2UgYGNvbnNvbGUudHJhY2UoKWAgaW5zdGVhZCBvZiBgY29uc29sZS5lcnJvcigpYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiAtIHRoZSBmdW5jdGlvbiB0byBkZXByZWNhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBtc2cgLSB0aGUgc3RyaW5nIHRvIHByaW50IHRvIHRoZSBjb25zb2xlIHdoZW4gYGZuYCBpcyBpbnZva2VkXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IGEgbmV3IFwiZGVwcmVjYXRlZFwiIHZlcnNpb24gb2YgYGZuYFxuICogQGFwaSBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBkZXByZWNhdGUgKGZuLCBtc2cpIHtcbiAgaWYgKGNvbmZpZygnbm9EZXByZWNhdGlvbicpKSB7XG4gICAgcmV0dXJuIGZuO1xuICB9XG5cbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBkZXByZWNhdGVkKCkge1xuICAgIGlmICghd2FybmVkKSB7XG4gICAgICBpZiAoY29uZmlnKCd0aHJvd0RlcHJlY2F0aW9uJykpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKGNvbmZpZygndHJhY2VEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIGNvbnNvbGUudHJhY2UobXNnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihtc2cpO1xuICAgICAgfVxuICAgICAgd2FybmVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH1cblxuICByZXR1cm4gZGVwcmVjYXRlZDtcbn1cblxuLyoqXG4gKiBDaGVja3MgYGxvY2FsU3RvcmFnZWAgZm9yIGJvb2xlYW4gdmFsdWVzIGZvciB0aGUgZ2l2ZW4gYG5hbWVgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGNvbmZpZyAobmFtZSkge1xuICAvLyBhY2Nlc3NpbmcgZ2xvYmFsLmxvY2FsU3RvcmFnZSBjYW4gdHJpZ2dlciBhIERPTUV4Y2VwdGlvbiBpbiBzYW5kYm94ZWQgaWZyYW1lc1xuICB0cnkge1xuICAgIGlmICghZ2xvYmFsLmxvY2FsU3RvcmFnZSkgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChfKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWwgPSBnbG9iYWwubG9jYWxTdG9yYWdlW25hbWVdO1xuICBpZiAobnVsbCA9PSB2YWwpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcbn1cbiIsIm1vZHVsZS5leHBvcnRzID0gZXh0ZW5kXG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIGV4dGVuZCgpIHtcbiAgICB2YXIgdGFyZ2V0ID0ge31cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV1cblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0XG59XG4iLCJ2YXIgXyA9IHJlcXVpcmUoJy4vbG9kYXNoJyk7XG52YXIgcmVtb3RlRXZlbnRzID0gW107XG52YXIgbG9jYWxFdmVudHMgPSBbXTtcbnZhciBpbml0aWF0ZWQgPSBmYWxzZTtcbnZhciBzaGFyZWQgPSBmYWxzZTtcbnZhciBjdXJzb3IgPSBudWxsO1xudmFyIHdpZGdldDtcbnZhciBlbnRpdHkgPSAnJztcbnZhciBlbWl0O1xudmFyIHBhdGggPSAnJztcbnZhciBldmVudFRpbWVzdGFtcCA9IDA7XG52YXIgdXBkYXRlSW50ZXJ2YWwgPSBudWxsO1xudmFyIHVwZGF0ZUludGVydmFsVmFsdWUgPSA1MDAwO1xudmFyIHVwZGF0ZVN0YXRlSW50ZXJ2YWwgPSBudWxsO1xudmFyIGNoZWNrRXZlcnkgPSBfLmRlYm91bmNlKHVuc2hhcmVCcm93c2VyLCAzMDAwMCk7XG52YXIgY3Vyc29yWCA9IDAsIGN1cnNvclkgPSAwO1xudmFyIHJlcXVlc3RBRjtcblxuZnVuY3Rpb24gaW5pdChvcHRpb25zKXtcblx0aWYoaW5pdGlhdGVkKSByZXR1cm4gY29uc29sZS5pbmZvKCdDb2Jyb3dzaW5nIGFscmVhZHkgaW5pdGlhdGVkJyk7XG5cblx0YWRkRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ2tleWRvd24nLCBldmVudHNIYW5kbGVyKTtcblx0YWRkRXZlbnQoZG9jdW1lbnQsICdrZXlwcmVzcycsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ21vdXNldXAnLCBldmVudHNIYW5kbGVyKTtcblx0YWRkRXZlbnQoZG9jdW1lbnQsICdjbGljaycsIGV2ZW50c0hhbmRsZXIpO1xuXHRhZGRFdmVudChkb2N1bWVudCwgJ2NoYW5nZScsIGV2ZW50c0hhbmRsZXIpO1xuXG5cdHdpZGdldCA9ICh0eXBlb2Ygb3B0aW9ucy53aWRnZXQgPT09ICdzdHJpbmcnKSA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iob3B0aW9ucy53aWRnZXQpIDogb3B0aW9ucy53aWRnZXQ7XG5cdGVudGl0eSA9IG9wdGlvbnMuZW50aXR5O1xuXHRlbWl0ID0gb3B0aW9ucy5lbWl0O1xuXHRwYXRoID0gb3B0aW9ucy5wYXRoO1xuXG5cdGluaXRpYXRlZCA9IHRydWU7XG5cdHVwZGF0ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoZW1pdEV2ZW50cywgdXBkYXRlSW50ZXJ2YWxWYWx1ZSk7XG5cblx0Y29uc29sZS5sb2coJ2NvYnJvd3NpbmcgbW9kdWxlIGluaXRpYXRlZCB3aXRoIHBhcmFtZXRlcnM6ICcsIG9wdGlvbnMpO1xuXHRlbWl0KCdjb2Jyb3dzaW5nL2luaXQnKTtcbn1cblxuZnVuY3Rpb24gc2hhcmVCcm93c2VyKCl7XG4gICAgaWYoc2hhcmVkKSByZXR1cm4gY29uc29sZS5pbmZvKCdCcm93c2VyIGFscmVhZHkgc2hhcmVkJyk7XG4gICAgYWRkRXZlbnQoZG9jdW1lbnQsICdzY3JvbGwnLCBldmVudHNIYW5kbGVyKTtcbiAgICBhZGRFdmVudChkb2N1bWVudCwgJ3NlbGVjdCcsIGV2ZW50c0hhbmRsZXIpO1xuICAgIGFkZEV2ZW50KGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgZXZlbnRzSGFuZGxlcik7XG5cbiAgICAvLyBhZGRFdmVudChkb2N1bWVudCwgJ21vdXNlb3ZlcicsIGV2ZW50c0hhbmRsZXIpO1xuICAgIC8vIGFkZEV2ZW50KGRvY3VtZW50LCAnbW91c2VvdXQnLCBldmVudHNIYW5kbGVyKTtcbiAgICBcbiAgICBjcmVhdGVSZW1vdGVDdXJzb3IoKTtcbiAgICBzaGFyZWQgPSB0cnVlO1xuICAgIHVwZGF0ZVN0YXRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh1cGRhdGVTdGF0ZSwgdXBkYXRlSW50ZXJ2YWxWYWx1ZSk7XG4gICAgY2xlYXJJbnRlcnZhbCh1cGRhdGVJbnRlcnZhbCk7XG5cbiAgICBjb25zb2xlLmxvZygnYnJvd3NlciBzaGFyZWQnKTtcbiAgICBlbWl0KCdjb2Jyb3dzaW5nL3NoYXJlZCcsIHsgZW50aXR5OiBlbnRpdHkgfSk7XG59XG5cbmZ1bmN0aW9uIHVuc2hhcmVCcm93c2VyKCl7XG5cdGlmKCFzaGFyZWQpIHJldHVybiBjb25zb2xlLmluZm8oJ0Jyb3dzZXIgYWxyZWFkeSB1bnNoYXJlZCcpO1xuXG4gICAgcmVtb3ZlRXZlbnQoZG9jdW1lbnQsICdzY3JvbGwnLCBldmVudHNIYW5kbGVyKTtcbiAgICByZW1vdmVFdmVudChkb2N1bWVudCwgJ3NlbGVjdCcsIGV2ZW50c0hhbmRsZXIpO1xuICAgIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgZXZlbnRzSGFuZGxlcik7XG5cbiAgICAvLyByZW1vdmVFdmVudChkb2N1bWVudCwgJ21vdXNlb3ZlcicsIGV2ZW50c0hhbmRsZXIpO1xuICAgIC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnbW91c2VvdXQnLCBldmVudHNIYW5kbGVyKTtcbiAgICBcbiAgICByZW1vdmVSZW1vdGVDdXJzb3IoKTtcbiAgICBzaGFyZWQgPSBmYWxzZTtcbiAgICB1cGRhdGVJbnRlcnZhbCA9IHNldEludGVydmFsKGVtaXRFdmVudHMsIHVwZGF0ZUludGVydmFsVmFsdWUpO1xuICAgIGNsZWFySW50ZXJ2YWwodXBkYXRlU3RhdGVJbnRlcnZhbCk7XG5cblx0ZW1pdCgnY29icm93c2luZy91bnNoYXJlZCcsIHsgZW50aXR5OiBlbnRpdHkgfSk7XG4gICAgY29uc29sZS5sb2coJ2Jyb3dzZXIgdW5zaGFyZWQnKTtcbn1cblxuZnVuY3Rpb24gdW5zaGFyZUFsbCgpe1xuXHQvLyByZW1vdmVFdmVudChkb2N1bWVudCwgJ2tleXVwJywgZXZlbnRzSGFuZGxlcik7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIGV2ZW50c0hhbmRsZXIpO1xuXHQvLyByZW1vdmVFdmVudChkb2N1bWVudCwgJ2tleXByZXNzJywgZXZlbnRzSGFuZGxlcik7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnbW91c2V1cCcsIGV2ZW50c0hhbmRsZXIpO1xuXHQvLyByZW1vdmVFdmVudChkb2N1bWVudCwgJ2NsaWNrJywgZXZlbnRzSGFuZGxlcik7XG5cdC8vIHJlbW92ZUV2ZW50KGRvY3VtZW50LCAnY2hhbmdlJywgZXZlbnRzSGFuZGxlcik7XG5cdGNsZWFySW50ZXJ2YWwodXBkYXRlSW50ZXJ2YWwpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSZW1vdGVDdXJzb3IoKXtcblx0dmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXHRpZighY3Vyc29yKSB7XG5cdFx0Y3Vyc29yPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcblx0XHRjdXJzb3IuY2xhc3NOYW1lID0gJ3djLXJtdC1wdHInO1xuXHRcdGN1cnNvci5zZXRBdHRyaWJ1dGUoJ3NyYycsIHBhdGgrJ2ltYWdlcy9wb2ludGVyLnBuZycpO1xuXHRcdGN1cnNvci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG5cdFx0aWYoYm9keS5maXJzdENoaWxkKSB7XG5cdFx0XHRib2R5Lmluc2VydEJlZm9yZShjdXJzb3IsIGJvZHkuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGJvZHkuYXBwZW5kQ2hpbGQoY3Vyc29yKTtcblx0XG5cdFx0fVxuXHRcdHJlZHJhd0N1cnNvcigpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHJlZHJhd0N1cnNvcigpe1xuXHRjdXJzb3Iuc3R5bGUubGVmdCA9IGN1cnNvclg7XG5cdGN1cnNvci5zdHlsZS50b3AgPSBjdXJzb3JZO1xuXHRyZXF1ZXN0QUYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHJlZHJhd0N1cnNvcik7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVJlbW90ZUN1cnNvcigpe1xuXHRpZighY3Vyc29yKSByZXR1cm47XG5cdGNhbmNlbEFuaW1hdGlvbkZyYW1lKHJlcXVlc3RBRik7XG5cdGN1cnNvci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGN1cnNvcik7XG5cdGN1cnNvciA9IG51bGw7XG59XG5cbi8vZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI4OTcxNTUvZ2V0LWN1cnNvci1wb3NpdGlvbi1pbi1jaGFyYWN0ZXJzLXdpdGhpbi1hLXRleHQtaW5wdXQtZmllbGRcbmZ1bmN0aW9uIGdldENhcmV0UG9zaXRpb24gKG9GaWVsZCkge1xuICAvLyBJbml0aWFsaXplXG5cdHZhciBpQ2FyZXRQb3MgPSAwO1xuXG4gIC8vIElFIFN1cHBvcnRcbiAgICBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7XG5cbiAgICAvLyBTZXQgZm9jdXMgb24gdGhlIGVsZW1lbnRcbiAgICAgICAgb0ZpZWxkLmZvY3VzICgpO1xuXG4gICAgLy8gVG8gZ2V0IGN1cnNvciBwb3NpdGlvbiwgZ2V0IGVtcHR5IHNlbGVjdGlvbiByYW5nZVxuICAgICAgICB2YXIgb1NlbCA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSAoKTtcblxuICAgIC8vIE1vdmUgc2VsZWN0aW9uIHN0YXJ0IHRvIDAgcG9zaXRpb25cbiAgICAgICAgb1NlbC5tb3ZlU3RhcnQgKCdjaGFyYWN0ZXInLCAtb0ZpZWxkLnZhbHVlLmxlbmd0aCk7XG5cbiAgICAvLyBUaGUgY2FyZXQgcG9zaXRpb24gaXMgc2VsZWN0aW9uIGxlbmd0aFxuICAgICAgICBpQ2FyZXRQb3MgPSBvU2VsLnRleHQubGVuZ3RoO1xuICAgIH1cbiAgICBlbHNlIGlmKG9GaWVsZC50eXBlICYmIChvRmllbGQudHlwZSA9PT0gJ2VtYWlsJyB8fCBvRmllbGQudHlwZSA9PT0gJ251bWJlcicpKXtcbiAgICAgICAgaUNhcmV0UG9zID0gbnVsbDtcbiAgICB9XG4gIC8vIEZpcmVmb3ggc3VwcG9ydFxuICAgIGVsc2UgaWYgKG9GaWVsZC5zZWxlY3Rpb25TdGFydCB8fCBvRmllbGQuc2VsZWN0aW9uU3RhcnQgPT0gJzAnKXtcbiAgICAgICAgaUNhcmV0UG9zID0gb0ZpZWxkLnNlbGVjdGlvblN0YXJ0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaUNhcmV0UG9zID0gbnVsbDtcbiAgICB9XG5cdC8vIFJldHVybiByZXN1bHRzXG5cdHJldHVybiAoaUNhcmV0UG9zKTtcbn1cblxuZnVuY3Rpb24gZW1pdEV2ZW50cygpe1xuXHRlbWl0KCdjb2Jyb3dzaW5nL2V2ZW50JywgeyBlbnRpdHk6IGVudGl0eSwgZXZlbnRzOiBsb2NhbEV2ZW50cyB9KTtcblx0bG9jYWxFdmVudHMgPSBbXTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlU3RhdGUoKXtcblx0bG9jYWxFdmVudHMucHVzaCh7IHNoYXJlZDogdHJ1ZSwgZW50aXR5OiBlbnRpdHkgfSk7XG59XG5cbmZ1bmN0aW9uIGV2ZW50c0hhbmRsZXIoZXZ0KXtcblx0dmFyIGUgPSBldnQgfHwgd2luZG93LmV2ZW50LFxuXHRcdGV0eXBlID0gZS50eXBlLFxuXHRcdHRhcmcgPSBlLnRhcmdldCxcblx0XHRub2RlTmFtZSA9IHRhcmcubm9kZU5hbWUsXG5cdFx0ZGIgPSBkb2N1bWVudC5ib2R5LFxuXHRcdHBhcmFtcyA9IHt9LFxuXHRcdG5vZGVJbmRleCA9IG51bGwsXG5cdFx0bm9kZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YXJnLm5vZGVOYW1lKSxcblx0XHRzY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLFxuXHRcdHNjcm9sbExlZnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQsXG5cdFx0aSA9IDA7XG5cblx0Ly8gaWYgdGhlIHRhcmdldCBpcyB0ZXh0IG5vZGUsIGdldCBwYXJlbnQgbm9kZVxuXHRpZih0YXJnLm5vZGVUeXBlID09PSAzKSB0YXJnID0gdGFyZy5wYXJlbnROb2RlO1xuXG5cdC8vIHJldHVybiBpZiB0aGUgdGFyZ2V0IG5vZGUgaXMgdGhlIGRlc2NlbmRhbnQgb2Ygd2lkZ2V0IGVsZW1lbnRcblx0aWYoZW50aXR5ID09PSAndXNlcicgJiYgaXNEZXNjZW5kYW50KHdpZGdldCwgdGFyZykpIHJldHVybjtcblxuXHRmb3IoaT0wOyBpIDwgcmVtb3RlRXZlbnRzLmxlbmd0aDsgaSsrKXtcblx0XHRpZihyZW1vdGVFdmVudHNbaV0uZXZlbnQgPT0gZXR5cGUpe1xuXHRcdFx0cmVtb3RlRXZlbnRzLnNwbGljZShpLCAxKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdH1cblxuXHQvLyBnZXQgdGhlIGluZGV4IG9mIHRhcmdldCBub2RlXG5cdGZvcihpPTA7IGk8bm9kZXMubGVuZ3RoOyBpKyspe1xuXHRcdGlmKG5vZGVzW2ldID09IHRhcmcpIG5vZGVJbmRleCA9IGk7XG5cdH1cblxuXHQvLyBldmVudCB0eXBlXG5cdHBhcmFtcy5ldmVudCA9IGV0eXBlO1xuXHQvLyBlbnRpdHlcblx0cGFyYW1zLmVudGl0eSA9IGVudGl0eTtcblx0Ly8gdGFyZ2V0IG5vZGVcblx0cGFyYW1zLnRuID0gbm9kZU5hbWU7XG5cdC8vIGluZGV4IG9mIHRoZSB0YXJnZXQgbm9kZVxuXHRwYXJhbXMudG5pID0gbm9kZUluZGV4O1xuXHQvLyBsYXlvdXQgd2lkdGggb2YgdGhlIGRvY3VtZW50LmJvZHlcblx0cGFyYW1zLncgPSBkYi5vZmZzZXRXaWR0aDtcblx0Ly8gbGF5b3V0IGhlaWdodCBvZiB0aGUgZG9jdW1lbnQuYm9keVxuXHRwYXJhbXMuaCA9IGRiLm9mZnNldEhlaWdodDtcblx0cGFyYW1zLnN4ID0gc2Nyb2xsTGVmdDtcblx0cGFyYW1zLnN5ID0gc2Nyb2xsVG9wO1xuXG5cdGlmKGV0eXBlID09PSAnbW91c2Vtb3ZlJyB8fCBldHlwZSA9PT0gJ21vdXNlb3ZlcicgfHwgZXR5cGUgPT09ICdtb3VzZW91dCcpIHtcblx0XHR2YXIgeCA9IGUucGFnZVggfHwgZS5jbGllbnRYICsgc2Nyb2xsVG9wO1xuXHRcdHZhciB5ID0gZS5wYWdlWSB8fCBlLmNsaWVudFkgKyBzY3JvbGxMZWZ0O1xuXG5cdFx0Ly8gY3Vyc29yIGhvcmlzb250YWwgcG9zdGlvblxuXHRcdHBhcmFtcy54ID0geDtcblx0XHQvLyBjdXJzb3IgdmVydGljYWwgcG9zaXRpb25cblx0XHRwYXJhbXMueSA9IHk7XG5cblx0XHQvLyBmb3IoaT0wOyBpIDwgbG9jYWxFdmVudHMubGVuZ3RoOyBpKyspIHtcblx0XHQvLyBcdGlmKGxvY2FsRXZlbnRzW2ldLmluZGV4T2YoZXR5cGUpICE9IC0xKSB7XG5cdFx0Ly8gXHRcdGxvY2FsRXZlbnRzLnNwbGljZShpLCAxKTtcblx0XHQvLyBcdFx0YnJlYWs7XG5cdFx0Ly8gXHR9XG5cdFx0Ly8gfVxuXHR9IGVsc2UgaWYoZXR5cGUgPT09ICdzY3JvbGwnKSB7XG5cdFx0Ly8gZm9yKGk9MDsgaSA8IGxvY2FsRXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0Ly8gXHRpZihsb2NhbEV2ZW50c1tpXS5pbmRleE9mKCdzY3JvbGwnKSAhPSAtMSkge1xuXHRcdC8vIFx0XHRsb2NhbEV2ZW50cy5zcGxpY2UoaSwgMSk7XG5cdFx0Ly8gXHRcdGJyZWFrO1xuXHRcdC8vIFx0fVxuXHRcdC8vIH1cblx0XHRcblx0XHQvLyB2YXIgc3QgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcblx0XHQvLyB2YXIgc2wgPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQ7XG5cblx0fSBlbHNlIGlmKGV0eXBlID09ICdrZXl1cCcgfHwgZXR5cGUgPT0gJ2tleWRvd24nIHx8IGV0eXBlID09ICdrZXlwcmVzcycpIHtcblx0XHR2YXIgY29kZSA9IGUuY2hhckNvZGUgfHwgZS5rZXlDb2RlIHx8IGUud2hpY2g7XG5cdFx0dmFyIGMgPSBnZXRDYXJldFBvc2l0aW9uKHRhcmcpO1xuXG5cdFx0aWYobm9kZU5hbWUgPT09ICdJTlBVVCcgJiYgdGFyZy50eXBlID09PSAncGFzc3dvcmQnKSByZXR1cm47XG5cblx0XHRpZihldHlwZSA9PSAna2V5dXAnKSB7XG5cdFx0XHRpZigoYyA9PT0gbnVsbCkgfHwgKGNvZGUgPT0gODYgJiYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkpKSkge1xuXHRcdFx0XHR2YXIgdHZhbHVlID0gdGFyZy52YWx1ZTtcblx0XHRcdFx0aWYodHZhbHVlKSB7XG5cdFx0XHRcdFx0dHZhbHVlID0gdHZhbHVlLnJlcGxhY2UoL1xcbi9nLCAnPGJyPicpO1xuXHRcdFx0XHRcdC8vIHRoZSB2YWx1ZSBhdHRyaWJ1dGUgb2YgdGhlIHRhcmdldCBub2RlLCBpZiBleGlzdHNcblx0XHRcdFx0XHRwYXJhbXMudmFsdWUgPSB0dmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9IGVsc2UgaWYoZXR5cGUgPT0gJ2tleWRvd24nKSB7XG5cdFx0XHRpZihjICE9PSBudWxsICYmIChjb2RlID09IDggfHwgY29kZSA9PSA0NiB8fCBjb2RlID09IDE5MCkpIHtcblx0XHRcdFx0aWYoIXRhcmcudmFsdWUpIHJldHVybjtcblx0XHRcdFx0Ly8gY2FyZXQgcG9zaXRpb25cblx0XHRcdFx0cGFyYW1zLnBvcyA9IGM7XG5cdFx0XHRcdC8vIGNoYXIgY29kZVxuXHRcdFx0XHRwYXJhbXMuY29kZSA9IGNvZGU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmKGV0eXBlID09PSAna2V5cHJlc3MnKSB7XG5cdFx0XHRpZihjICE9PSBudWxsICYmIGNvZGUgIT0gOCAmJiBjb2RlICE9IDQ2KSB7XG5cdFx0XHRcdC8vIGNhcmV0IHBvc2l0aW9uXG5cdFx0XHRcdHBhcmFtcy5wb3MgPSBjO1xuXHRcdFx0XHQvLyBjaGFyIGNvZGVcblx0XHRcdFx0cGFyYW1zLmNvZGUgPSBjb2RlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmKGV0eXBlID09PSAnY2hhbmdlJykge1xuXHRcdGlmKG5vZGVOYW1lID09PSAnSU5QVVQnICYmIHRhcmcudHlwZSA9PT0gJ3Bhc3N3b3JkJykgcmV0dXJuO1xuXHRcdHBhcmFtcy52YWx1ZSA9IHRhcmcudmFsdWU7XG5cblx0fSBlbHNlIGlmKGV0eXBlID09ICdtb3VzZXVwJyB8fCBldHlwZSA9PSAnc2VsZWN0Jyl7XG5cdFx0dmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKSB8fCBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS50ZXh0LFxuXHRcdFx0c28gPSBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LFxuXHRcdFx0ZW8gPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQsXG5cdFx0XHRhbmNob3JQYXJlbnROb2RlSW5kZXggPSAwLFxuXHRcdFx0YW5jaG9yUGFyZW50Tm9kZU5hbWUgPSAnJyxcblx0XHRcdGFuY2hvck5vZGVJbmRleCA9IDAsXG5cdFx0XHRhbmNob3JQYXJlbnQgPSAnJyxcblx0XHRcdGZvY3VzUGFyZW50Tm9kZUluZGV4ID0gMCxcblx0XHRcdGZvY3VzUGFyZW50Tm9kZU5hbWUgPSAnJyxcblx0XHRcdGZvY3VzTm9kZUluZGV4ID0gMCxcblx0XHRcdGZvY3VzUGFyZW50ID0gJycsXG5cdFx0XHRyZXZlcnNlID0gZmFsc2U7XG5cblx0XHRpZihzZWxlY3Rpb24uYW5jaG9yTm9kZSAhPT0gbnVsbCkge1xuXHRcdFx0YW5jaG9yUGFyZW50ID0gc2VsZWN0aW9uLmFuY2hvck5vZGUucGFyZW50Tm9kZTtcblxuXHRcdFx0Zm9yKGk9MDsgaTxhbmNob3JQYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdGlmKGFuY2hvclBhcmVudC5jaGlsZE5vZGVzW2ldID09IHNlbGVjdGlvbi5hbmNob3JOb2RlKSBhbmNob3JOb2RlSW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRhbmNob3JQYXJlbnROb2RlTmFtZSA9IGFuY2hvclBhcmVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0bm9kZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShhbmNob3JQYXJlbnROb2RlTmFtZSk7XG5cdFx0XHRmb3IoaT0wO2k8bm9kZXMubGVuZ3RoO2krKykge1xuXHRcdFx0XHRpZihub2Rlc1tpXSA9PT0gYW5jaG9yUGFyZW50KSBhbmNob3JQYXJlbnROb2RlSW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb2N1c1BhcmVudCA9IHNlbGVjdGlvbi5mb2N1c05vZGUucGFyZW50Tm9kZTtcblx0XHRcdGZvcihpPTA7IGk8Zm9jdXNQYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKSB7XG5cdFx0XHRcdGlmKGZvY3VzUGFyZW50LmNoaWxkTm9kZXNbaV0gPT0gc2VsZWN0aW9uLmZvY3VzTm9kZSkgZm9jdXNOb2RlSW5kZXggPSBpO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRmb2N1c1BhcmVudE5vZGVOYW1lID0gZm9jdXNQYXJlbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdG5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZm9jdXNQYXJlbnROb2RlTmFtZSk7XG5cdFx0XHRmb3IoaT0wO2k8bm9kZXMubGVuZ3RoO2krKykge1xuXHRcdFx0XHRpZihub2Rlc1tpXSA9PT0gZm9jdXNQYXJlbnQpIGZvY3VzUGFyZW50Tm9kZUluZGV4ID0gaTtcblx0XHRcdH1cblx0XHRcdFxuXG5cdFx0XHRpZihhbmNob3JQYXJlbnROb2RlTmFtZSA9PT0gZm9jdXNQYXJlbnROb2RlTmFtZSAmJlxuXHRcdFx0XHRhbmNob3JQYXJlbnROb2RlSW5kZXggPT09IGZvY3VzUGFyZW50Tm9kZUluZGV4ICYmXG5cdFx0XHRcdFx0YW5jaG9yTm9kZUluZGV4ID09PSBmb2N1c05vZGVJbmRleCAmJlxuXHRcdFx0XHRcdFx0c28gPiBlbylcblx0XHRcdFx0XHRcdFx0cmV2ZXJzZSA9IHRydWU7XG5cblx0XHRcdC8vIG5hbWUgb2YgdGhlIHRhcmdldCBub2RlIHdoZXJlIHNlbGVjdGlvbiBzdGFydGVkXG5cdFx0XHRwYXJhbXMuc24gPSBhbmNob3JQYXJlbnROb2RlTmFtZTtcblx0XHRcdHBhcmFtcy5zbmkgPSBhbmNob3JQYXJlbnROb2RlSW5kZXg7XG5cdFx0XHRwYXJhbXMuc2NoaSA9IGFuY2hvck5vZGVJbmRleDtcblx0XHRcdC8vIG5hbWUgb2YgdGhlIHRhcmdldCBub2RlIHdoZXJlIHNlbGVjdGlvbiBlbmRlZFxuXHRcdFx0cGFyYW1zLmVuID0gZm9jdXNQYXJlbnROb2RlTmFtZTtcblx0XHRcdHBhcmFtcy5lbmkgPSBmb2N1c1BhcmVudE5vZGVJbmRleDtcblx0XHRcdHBhcmFtcy5lY2hpID0gZm9jdXNOb2RlSW5kZXg7XG5cdFx0XHRwYXJhbXMuc28gPSByZXZlcnNlID8gZW8gOiBzbztcblx0XHRcdHBhcmFtcy5lbyA9IHJldmVyc2UgPyBzbyA6IGVvO1xuXHRcdH1cblx0fSBlbHNlIGlmKGV0eXBlID09ICdjbGljaycpIHtcblx0XHRwYXJhbXMuc2N4ID0gZS5zY3JlZW5YO1xuXHRcdHBhcmFtcy5zY3kgPSBlLnNjcmVlblk7XG5cdH1cblxuXHQvLyBjb25zb2xlLmxvZygnZXZlbnRzSGFuZGxlcjogJywgcGFyYW1zKTtcblx0bG9jYWxFdmVudHMucHVzaChwYXJhbXMpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVFdmVudHMocmVzdWx0KXtcblx0dmFyIG1haW5FbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdHRhcmdldCxcblx0XHRldnQgPSB7fTtcblxuXHRpZihyZXN1bHQuZXZlbnRzICYmIHJlc3VsdC5ldmVudHMubGVuZ3RoKSB7XG5cblx0XHQvLyBjaGVjayBmb3Igc2Nyb2xsVG9wL0xlZnQuIFxuXHRcdC8vIElFIGFuZCBGaXJlZm94IGFsd2F5cyByZXR1cm4gMCBmcm9tIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wL0xlZnQsIFxuXHRcdC8vIHdoaWxlIG90aGVyIGJyb3dzZXJzIHJldHVybiAwIGZyb20gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50XG5cdFx0bWFpbkVsZW1lbnQgPSAoJ0FjdGl2ZVhPYmplY3QnIGluIHdpbmRvdyB8fCB0eXBlb2YgSW5zdGFsbFRyaWdnZXIgIT09ICd1bmRlZmluZWQnKSA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IGRvY3VtZW50LmJvZHk7XG5cblx0XHRmb3IodmFyIGk9MDsgaTxyZXN1bHQuZXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRldnQgPSByZXN1bHQuZXZlbnRzW2ldO1xuXG5cdFx0XHQvLyBpZihldnQuc2hhcmVkICE9PSB1bmRlZmluZWQpIGNvbnNvbGUubG9nKCdzaGFyZWQgZXZlbnRzJywgZXZlbnRUaW1lc3RhbXAsIGV2dCwgcmVzdWx0LmluaXQpO1xuXHRcdFx0aWYoZXZ0LnRpbWVzdGFtcCA8IGV2ZW50VGltZXN0YW1wKSBjb250aW51ZTtcblx0XHRcdGlmKGV2dC5lbnRpdHkgPT09IGVudGl0eSkgY29udGludWU7XG5cdFx0XHRcdFx0XG5cdFx0XHRpZihldnQuc2hhcmVkICE9PSB1bmRlZmluZWQpe1xuXHRcdFx0XHRpZihldnQuc2hhcmVkKXtcblx0XHRcdFx0XHRjaGVja0V2ZXJ5KCk7XG5cdFx0XHRcdFx0c2hhcmVCcm93c2VyKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYoIXJlc3VsdC5oaXN0b3J5RXZlbnRzKSB1bnNoYXJlQnJvd3NlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihldnQudXJsKSB7XG5cdFx0XHRcdGlmKCFyZXN1bHQuaGlzdG9yeUV2ZW50cykge1xuXHRcdFx0XHRcdHZhciB1cmwgPSBldnQudXJsO1xuXHRcdFx0XHRcdHZhciBkb2NVcmwgPSBkb2N1bWVudC5VUkw7XG5cdFx0XHRcdFx0aWYoZG9jVXJsLmluZGV4T2YoJ2NoYXRTZXNzaW9uSWQnKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRcdGRvY1VybCA9IGRvY1VybC5zdWJzdHIoMCwgZG9jVXJsLmluZGV4T2YoJ2NoYXRTZXNzaW9uSWQnKS0xKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYodXJsICE9IGRvY1VybCkgY2hhbmdlVVJMKHVybCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKGV2dC53KXtcblx0XHRcdFx0aWYoZXZ0LmVudGl0eSA9PT0gJ3VzZXInKSB7XG5cdFx0XHRcdFx0dmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXHRcdFx0XHRcdHZhciBpbm5lclcgPSBib2R5Lm9mZnNldFdpZHRoO1xuXHRcdFx0XHRcdGlmKGlubmVyVyAhPT0gZXZ0LncpIHtcblx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHkuc3R5bGUud2lkdGggPSBldnQudyArICdweCc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZihldnQuZXZlbnQgPT09ICdtb3VzZW1vdmUnKSB7XG5cdFx0XHRcdGlmKGN1cnNvcikge1xuXHRcdFx0XHRcdGN1cnNvclggPSBldnQueCArICdweCc7XG5cdFx0XHRcdFx0Y3Vyc29yWSA9IGV2dC55ICsgJ3B4Jztcblx0XHRcdFx0XHQvLyBjdXJzb3Iuc3R5bGUubGVmdCA9IGV2dC54ICsgJ3B4Jztcblx0XHRcdFx0XHQvLyBjdXJzb3Iuc3R5bGUudG9wID0gZXZ0LnkgKyAncHgnO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYoZXZ0LmV2ZW50ID09PSAnc2Nyb2xsJykge1xuXHRcdFx0XHRpZihldnQudG4gIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGlmKGV2dC50biA9PT0gJyNkb2N1bWVudCcpIHRhcmdldCA9IG1haW5FbGVtZW50O1xuXHRcdFx0XHRcdGVsc2UgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZXZ0LnRuKVtldnQudG5pXTtcblx0XHRcdFx0XHRpZih0YXJnZXQpe1xuXHRcdFx0XHRcdFx0dGFyZ2V0LnNjcm9sbFRvcCA9IGV2dC5zeTtcblx0XHRcdFx0XHRcdHRhcmdldC5zY3JvbGxMZWZ0ID0gZXZ0LnN4O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKGV2dC5ldmVudCA9PT0gJ21vdXNldXAnIHx8IGV2dC5ldmVudCA9PT0gJ3NlbGVjdCcpe1xuXHRcdFx0XHRpZihldnQuc24pIHtcblx0XHRcdFx0XHR2YXIgc3RhcnROb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZXZ0LnNuKVtldnQuc25pXTtcblx0XHRcdFx0XHR2YXIgZW5kTm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGV2dC5lbilbZXZ0LmVuaV07XG5cdFx0XHRcdFx0aWYoZG9jdW1lbnQuY3JlYXRlUmFuZ2UgJiYgc3RhcnROb2RlICE9PSB1bmRlZmluZWQgJiYgZW5kTm9kZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0XHR2YXIgcm5nID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcblx0XHRcdFx0XHRcdHJuZy5zZXRTdGFydChzdGFydE5vZGUuY2hpbGROb2Rlc1tldnQuc2NoaV0sIGV2dC5zbyk7XG5cdFx0XHRcdFx0XHRybmcuc2V0RW5kKGVuZE5vZGUuY2hpbGROb2Rlc1tldnQuZWNoaV0sIGV2dC5lbyk7XG5cdFx0XHRcdFx0XHR2YXIgc2VsID0gd2luZG93LmdldFNlbGVjdGlvbigpO1xuXHRcdFx0XHRcdFx0c2VsLnJlbW92ZUFsbFJhbmdlcygpO1xuXHRcdFx0XHRcdFx0c2VsLmFkZFJhbmdlKHJuZyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYoZXZ0LmV2ZW50ID09PSAna2V5dXAnIHx8IGV2dC5ldmVudCA9PT0gJ2tleWRvd24nIHx8IGV2dC5ldmVudCA9PT0gJ2tleXByZXNzJykge1xuXHRcdFx0XHRpZihldnQudG4gIT09IHVuZGVmaW5lZCAmJiBldnQudG5pICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdFx0XHR0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShldnQudG4pW2V2dC50bmldO1xuXHRcdFx0XHRcdGlmKHRhcmdldCl7XG5cdFx0XHRcdFx0XHR2YXIgb3V0cHV0O1xuXHRcdFx0XHRcdFx0dmFyIGEgPSB0YXJnZXQudmFsdWU7XG5cdFx0XHRcdFx0XHRpZihldnQuY29kZSA9PSA4KSB7XG5cdFx0XHRcdFx0XHRcdGlmKGV2dC5wb3MgPT0gYS5sZW5ndGgtMSkgb3V0cHV0ID0gYS5zdWJzdHIoMCwgZXZ0LnBvcy0xKTtcblx0XHRcdFx0XHRcdFx0ZWxzZSBpZihldnQucG9zID09PSAwKSByZXR1cm47XG5cdFx0XHRcdFx0XHRcdGVsc2Ugb3V0cHV0ID0gYS5zdWJzdHIoMCwgZXZ0LnBvcy0xKSArIGEuc3Vic3RyKGV2dC5wb3MpO1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQudmFsdWUgPSBvdXRwdXQ7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoZXZ0LmNvZGUgPT0gNDYpIHtcblx0XHRcdFx0XHRcdFx0b3V0cHV0ID0gYS5zdWJzdHIoMCwgZXZ0LnBvcykgKyBhLnN1YnN0cihldnQucG9zKzEpO1xuXHRcdFx0XHRcdFx0XHR0YXJnZXQudmFsdWUgPSBvdXRwdXQ7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYoZXZ0LmNvZGUgPT0gMTkwKSB7XG5cdFx0XHRcdFx0XHRcdG91dHB1dCA9IGEuc3Vic3RyKDAsIGV2dC5wb3MpICsgJy4nICsgYS5zdWJzdHIoZXZ0LnBvcyk7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC52YWx1ZSA9IG91dHB1dDtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZihldnQudmFsdWUgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdHZhbHVlID0gZXZ0LnZhbHVlO1xuXHRcdFx0XHRcdFx0XHR0dmFsdWUgPSB0dmFsdWUucmVwbGFjZSgvPGJyPi9nLCAnXFxuJyk7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC52YWx1ZSA9IHR2YWx1ZTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHZhciBjID0gU3RyaW5nLmZyb21DaGFyQ29kZShldnQuY29kZSk7XG5cdFx0XHRcdFx0XHRcdGlmKGEpIG91dHB1dCA9IGEuc3Vic3RyKDAsIGV2dC5wb3MpICsgYyArIGEuc3Vic3RyKGV2dC5wb3MpO1xuXHRcdFx0XHRcdFx0XHRlbHNlIG91dHB1dCA9IGM7XG5cdFx0XHRcdFx0XHRcdHRhcmdldC52YWx1ZSA9IG91dHB1dDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZihldnQuZXZlbnQgPT09ICdjaGFuZ2UnKSB7XG5cdFx0XHRcdHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGV2dC50bilbZXZ0LnRuaV07XG5cdFx0XHRcdHRhcmdldC52YWx1ZSA9IGV2dC52YWx1ZTtcblx0XHRcdH0gZWxzZSBpZihldnQuZXZlbnQgPT09ICdjbGljaycpe1xuXHRcdFx0XHQvLyB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShldnQudG4udG9Mb3dlckNhc2UoKSk7XG5cdFx0XHRcdHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKGV2dC50bilbZXZ0LnRuaV07XG5cdFx0XHRcdGlmKHRhcmdldCkgdGFyZ2V0LmNsaWNrKCk7XG5cdFx0XHRcdC8vIGVsZW1lbnRzW2V2dC50bmldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd5ZWxsb3cnO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoZXZ0LnRuKVtldnQudG5pXTtcblx0XHRcdFx0aWYodGFyZ2V0KSB7XG5cdFx0XHRcdFx0dmFyIGV2dE9wdHMgPSBtb3VzZUV2ZW50KGV2dC5ldmVudCwgZXZ0LngsIGV2dC55LCBldnQueCwgZXZ0LnkpO1xuXHRcdFx0XHRcdGRpc3BhdGNoRXZlbnQodGFyZ2V0LCBldnRPcHRzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZihldnQuZXZlbnQgPT09ICdjbGljaycgfHwgZXZ0LmV2ZW50ID09PSAnc2Nyb2xsJykgcmVtb3RlRXZlbnRzLnB1c2goZXZ0KTtcblx0XHR9XG5cdH1cblxuXHRpZihyZXN1bHQudGltZXN0YW1wKSBldmVudFRpbWVzdGFtcCA9IHJlc3VsdC50aW1lc3RhbXA7XG5cdGlmKHNoYXJlZCkgZW1pdEV2ZW50cygpO1xufVxuXG5mdW5jdGlvbiBtb3VzZUV2ZW50KHR5cGUsIHN4LCBzeSwgY3gsIGN5KSB7XG5cdHZhciBldnQ7XG5cdHZhciBlID0ge1xuXHRcdGJ1YmJsZXM6IHRydWUsXG5cdFx0Y2FuY2VsYWJsZTogKHR5cGUgIT0gXCJtb3VzZW1vdmVcIiksXG5cdFx0dmlldzogd2luZG93LFxuXHRcdGRldGFpbDogMCxcblx0XHRzY3JlZW5YOiBzeCxcblx0XHRzY3JlZW5ZOiBzeSxcblx0XHRjbGllbnRYOiBjeCxcblx0XHRjbGllbnRZOiBjeSxcblx0XHRjdHJsS2V5OiBmYWxzZSxcblx0XHRhbHRLZXk6IGZhbHNlLFxuXHRcdHNoaWZ0S2V5OiBmYWxzZSxcblx0XHRtZXRhS2V5OiBmYWxzZSxcblx0XHRidXR0b246IDAsXG5cdFx0cmVsYXRlZFRhcmdldDogdW5kZWZpbmVkXG5cdH07XG5cdGlmICh0eXBlb2YoIGRvY3VtZW50LmNyZWF0ZUV2ZW50ICkgPT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0ZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcblx0XHRldnQuaW5pdE1vdXNlRXZlbnQoXG5cdFx0XHR0eXBlLFxuXHRcdFx0ZS5idWJibGVzLFxuXHRcdFx0ZS5jYW5jZWxhYmxlLFxuXHRcdFx0ZS52aWV3LFxuXHRcdFx0ZS5kZXRhaWwsXG5cdFx0XHRlLnNjcmVlblgsXG5cdFx0XHRlLnNjcmVlblksXG5cdFx0XHRlLmNsaWVudFgsXG5cdFx0XHRlLmNsaWVudFksXG5cdFx0XHRlLmN0cmxLZXksXG5cdFx0XHRlLmFsdEtleSxcblx0XHRcdGUuc2hpZnRLZXksXG5cdFx0XHRlLm1ldGFLZXksXG5cdFx0XHRlLmJ1dHRvbixcblx0XHRcdGRvY3VtZW50LmJvZHkucGFyZW50Tm9kZVxuXHRcdCk7XG5cdH0gZWxzZSBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QpIHtcblx0XHRldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuXHRcdGZvciAodmFyIHByb3AgaW4gZSkge1xuXHRcdFx0ZXZ0W3Byb3BdID0gZVtwcm9wXTtcblx0XHR9XG5cdFx0ZXZ0LmJ1dHRvbiA9IHsgMDoxLCAxOjQsIDI6MiB9W2V2dC5idXR0b25dIHx8IGV2dC5idXR0b247XG5cdH1cblx0cmV0dXJuIGV2dDtcbn1cbmZ1bmN0aW9uIGRpc3BhdGNoRXZlbnQgKGVsLCBldnQpIHtcblx0aWYgKGVsLmRpc3BhdGNoRXZlbnQpIHtcblx0XHRlbC5kaXNwYXRjaEV2ZW50KGV2dCk7XG5cdH0gZWxzZSBpZiAoZWwuZmlyZUV2ZW50KSB7XG5cdFx0ZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBldnQpO1xuXHR9XG5cdHJldHVybiBldnQ7XG59XG5cbmZ1bmN0aW9uIGNoYW5nZVVSTCh1cmwpIHtcbiAgICB2YXIgZG9jVXJsID0gZG9jdW1lbnQuVVJMO1xuICAgIGlmIChkb2NVcmwgIT09IHVybCkge1xuXHRcdGRvY3VtZW50LmxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0Rlc2NlbmRhbnQocGFyZW50LCBjaGlsZCkge1xuICAgICB2YXIgbm9kZSA9IGNoaWxkLnBhcmVudE5vZGU7XG4gICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcbiAgICAgICAgIGlmIChub2RlID09IHBhcmVudCkgcmV0dXJuIHRydWU7XG4gICAgICAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICB9XG4gICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnQob2JqLCBldlR5cGUsIGZuKSB7XG4gIGlmIChvYmouYWRkRXZlbnRMaXN0ZW5lcikgb2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZUeXBlLCBmbiwgZmFsc2UpO1xuICBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIG9iai5hdHRhY2hFdmVudChcIm9uXCIrZXZUeXBlLCBmbik7XG59XG5mdW5jdGlvbiByZW1vdmVFdmVudChvYmosIGV2VHlwZSwgZm4pIHtcbiAgaWYgKG9iai5yZW1vdmVFdmVudExpc3RlbmVyKSBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcihldlR5cGUsIGZuLCBmYWxzZSk7XG4gIGVsc2UgaWYgKG9iai5kZXRhY2hFdmVudCkgb2JqLmRldGFjaEV2ZW50KFwib25cIitldlR5cGUsIGZuKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdGluaXQ6IGluaXQsXG5cdHNoYXJlOiBzaGFyZUJyb3dzZXIsXG5cdHVuc2hhcmU6IHVuc2hhcmVCcm93c2VyLFxuXHR1bnNoYXJlQWxsOiB1bnNoYXJlQWxsLFxuXHRlbWl0RXZlbnRzOiBlbWl0RXZlbnRzLFxuXHR1cGRhdGVFdmVudHM6IHVwZGF0ZUV2ZW50c1xufTsiLCJcbnZhciBFdmVudEVtaXR0ZXIgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG52YXIgc3RvcmFnZSA9IHJlcXVpcmUoJy4vc3RvcmFnZScpO1xudmFyIHJlcXVlc3QgPSByZXF1aXJlKCcuL3JlcXVlc3QnKTtcbnZhciB1cmwgPSByZXF1aXJlKCd1cmwnKS5wYXJzZShkb2N1bWVudC5VUkwsIHRydWUpO1xudmFyIF8gPSByZXF1aXJlKCcuL2xvZGFzaCcpO1xudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuLyoqXG4gKiBDb3JlIG1vZHVsZSBpbXBsZW1lbnRzIG1haW4gaW50ZXJuYWwgZnVuY3Rpb25hbGl0eVxuICogXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9wdGlvbnMgSW5zdGFudGlhdGlvbiBvcHRpb25zIHRoYXQgb3ZlcnJpZGVzIG1vZHVsZSBkZWZhdWx0c1xuICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgIFJldHVybiBwdWJsaWMgQVBJXG4gKi9cblxudmFyIGRlZmF1bHRzID0ge1xuXHQvLyBJUENDIHNlcnZlciBJUCBhZGRyZXNzL2RvbWFpbiBuYW1lIGFuZCBwb3J0IG51bWJlci5cblx0Ly8gZXguOiBcImh0dHA6Ly8xOTIuMTY4LjEuMTAwOjg4ODBcIlxuXHRzZXJ2ZXI6ICcnLFxuXHQvLyBBYnNvbHV0ZSBwYXRoIHRvIHRoZSB3ZWJjaGF0IGZvbGRlciBvbiB0aGUgd2ViIHNlcnZlclxuXHQvLyB3aGVyZSB0aGUgd2Vic2l0ZSBpcyBsb2NhdGVkXG5cdHBhdGg6ICcvd2NoYXQvJ1xufTtcblxuaW5oZXJpdHMoV2NoYXRBUEksIEV2ZW50RW1pdHRlcik7XG5cbm1vZHVsZS5leHBvcnRzID0gV2NoYXRBUEk7XG5cbmZ1bmN0aW9uIFdjaGF0QVBJKG9wdGlvbnMpe1xuXG5cdC8vIGV4dGVuZCBkZWZhdWx0IG9wdGlvbnNcblx0Ly8gd2l0aCBwcm92aWRlZCBvYmplY3Rcblx0dGhpcy5vcHRpb25zID0gXy5hc3NpZ24oZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXG5cdHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwgPSB0aGlzLm9wdGlvbnMuc2VydmVyICsgJy9pcGNjLyQkJCc7XG5cblx0Ly8gQ3VycmVudCBzZXNzaW9uIHN0YXRlIG9iamVjdFxuXHR0aGlzLnNlc3Npb24gPSB7XG5cdFx0c2lkOiBudWxsLFxuXHRcdGV2ZW50VGltZXN0YW1wOiAwLFxuXHRcdG1zZ1RpbWVzdGFtcDogMCxcblx0XHRlbnRpdHk6IHVuZGVmaW5lZCxcblx0XHRjaGF0OiBudWxsXG5cdH07XG5cblx0dGhpcy5vbignc2Vzc2lvbi9jcmVhdGUnLCBmdW5jdGlvbiAocmVzdWx0KXtcblx0XHR0aGlzLnNlc3Npb24uc2lkID0gcmVzdWx0LnNpZDtcblx0XHQvLyB0aGlzLnVwZGF0ZVVybCh1cmwuaHJlZik7XG5cdH0pO1xuXHR0aGlzLm9uKCdzZXNzaW9uL2NvbnRpbnVlJywgZnVuY3Rpb24gKHJlc3VsdCl7XG5cdFx0Ly8gdGhpcy51cGRhdGVVcmwodXJsLmhyZWYpO1xuXHR9KTtcblxuXHR0aGlzLm9uKCdFcnJvcicsIGZ1bmN0aW9uIChlcnIsIHBhcmFtcyl7XG5cdFx0Y29uc29sZS5sb2coJ0VSUk9SOiAnLCBlcnIsIHBhcmFtcyk7XG5cdFx0aWYoZXJyLmNvZGUgPT09IDQwNCkge1xuXHRcdFx0dGhpcy5zZXNzaW9uVGltZW91dChwYXJhbXMpO1xuXHRcdH1cblx0XHRjb25zb2xlLmVycm9yKGVyciwgcGFyYW1zKTtcblx0fSk7XG5cblx0cmV0dXJuIHRoaXM7XG5cbn1cblxuLyoqXG4gKiBNb2R1bGUgaW5pdGlhdGlvblxuICogRW1pdHMgbW9kdWxlL3N0YXJ0IGV2ZW50IGlmIG1vZHVsZSBzdGFydGVkXG4gKi9cbldjaGF0QVBJLnByb3RvdHlwZS5pbml0TW9kdWxlID0gZnVuY3Rpb24oKXtcblx0dmFyIGVudGl0eSA9IHRoaXMuZ2V0U3RhdGUoJ2VudGl0eScsICdzZXNzaW9uJyksXG5cdFx0c2lkID0gdGhpcy5nZXRTdGF0ZSgnc2lkJyk7XG5cblx0Ly8gQSBjaGF0U2Vzc2lvbklkIHBhcmFtZXRlciBpbiB0aGUgdXJsIHF1ZXJ5IFxuXHQvLyBpbmRpY2F0ZXMgdGhhdCB0aGUgd2ViIHBhZ2Ugd2FzIG9wZW5lZCBieSBhZ2VudC5cblx0Ly8gSW4gdGhhdCBjYXNlIGFnZW50IHNob3VsZCBqb2luIHRoZSBzZXNzaW9uLlxuXHRpZih1cmwuaHJlZi5pbmRleE9mKCdjaGF0U2Vzc2lvbklkJykgIT09IC0xKSB7XG5cdFx0c2lkID0gZ2V0U2lkRnJvbVVybCh1cmwuaHJlZik7XG5cdFx0dGhpcy5zYXZlU3RhdGUoJ2VudGl0eScsICdhZ2VudCcsICdzZXNzaW9uJyk7XG5cdFx0dGhpcy5zYXZlU3RhdGUoJ3NpZCcsIHNpZCk7XG5cdFx0dGhpcy5qb2luU2Vzc2lvbihzaWQpO1xuXHR9IGVsc2UgaWYoZW50aXR5ID09PSAnYWdlbnQnICYmIHNpZCkgeyAvLyBJbiBjYXNlIHRoZSBjb2Jyb3dzaW5nIHNlc3Npb24gaXMgYWN0aXZlXG5cdFx0dGhpcy5qb2luU2Vzc2lvbihzaWQsIHVybC5ocmVmKTtcblx0fSBlbHNlIHtcblxuXHRcdC8vIEluIGNhc2UgYSBzZXNzaW9uIGlzIGFscmVhZHkgaW5pdGlhdGVkIFxuXHRcdC8vIGFuZCBzdG9yYWdlIGNvbnRhaW5lcyBzaWQgcGFyYW1ldGVyXG5cdFx0aWYoc2lkKSB7XG5cdFx0XHR0aGlzLnVwZGF0ZUV2ZW50cyhbeyBlbnRpdHk6IGVudGl0eSwgdXJsOiB1cmwuaHJlZiB9XSwgZnVuY3Rpb24gKGVyciwgcmVzdWx0KXtcblx0XHRcdFx0aWYoZXJyKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuc2F2ZVN0YXRlKCdzaWQnLCBzaWQpO1xuXHRcdFx0XHR0aGlzLmVtaXQoJ3Nlc3Npb24vY29udGludWUnLCB7IGVudGl0eTogZW50aXR5IH0pO1xuXHRcdFx0fS5iaW5kKHRoaXMpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zYXZlU3RhdGUoJ2VudGl0eScsICd1c2VyJywgJ3Nlc3Npb24nKTtcblx0XHRcdC8vIENyZWF0ZSBuZXcgc2Vzc2lvblxuXHRcdFx0dGhpcy5jcmVhdGVTZXNzaW9uKHVybC5ocmVmKTtcblx0XHR9XG5cdH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIHNlc3Npb25cbiAqIEVtaXRzIHNlc3Npb24vY3JlYXRlIGV2ZW50XG4gKiBpZiBpbml0aWF0aW9uIGlzIHN1Y2Nlc3NmdWxcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdXJsIEN1cnJlbnQgZnVsbCBVUkxcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmNyZWF0ZVNlc3Npb24gPSBmdW5jdGlvbihwYWdlVXJsKXtcblx0Ly8gY29uc29sZS5sb2coJ2NyZWF0ZVNlc3Npb24sICcrdGhpcy5vcHRpb25zLnNlcnZlclVybCk7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG5cdFx0bWV0aG9kOiAnY3JlYXRlU2Vzc2lvbicsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHR1cmw6IChwYWdlVXJsIHx8IHVybC5ocmVmKVxuXHRcdH1cblx0fSwgZnVuY3Rpb24gKGVyciwgcmVzLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuc2F2ZVN0YXRlKCdzaWQnLCBib2R5LnJlc3VsdC5zaWQpO1xuXHRcdHRoaXMuZW1pdCgnc2Vzc2lvbi9jcmVhdGUnLCBib2R5LnJlc3VsdCk7XG5cdH0uYmluZCh0aGlzKSk7XG59O1xuXG5XY2hhdEFQSS5wcm90b3R5cGUuam9pblNlc3Npb24gPSBmdW5jdGlvbihzaWQsIHVybCl7XG5cdC8vIHRoaXMuc2F2ZVN0YXRlKCdzaGFyZWQnLCB0cnVlLCAnc2Vzc2lvbicpO1xuXHR0aGlzLmVtaXQoJ3Nlc3Npb24vam9pbicsIHsgc2lkOiBzaWQsIHVybDogdXJsIH0pO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLnVwZGF0ZUV2ZW50cyA9IGZ1bmN0aW9uKGV2ZW50cywgY2Ipe1xuXHR2YXIgcGFyYW1zID0ge1xuXHRcdG1ldGhvZDogJ3VwZGF0ZUV2ZW50cycsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHRoaXMuZ2V0U3RhdGUoJ3NpZCcpLFxuXHRcdFx0dGltZXN0YW1wOiB0aGlzLmdldFN0YXRlKCdldmVudFRpbWVzdGFtcCcsICdjYWNoZScpLFxuXHRcdFx0ZXZlbnRzOiBldmVudHNcblx0XHR9XG5cdH07XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCBwYXJhbXMsIGZ1bmN0aW9uIChlcnIsIHJlcywgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCBwYXJhbXMpO1xuXHRcdFx0cmV0dXJuIGNiKGVycik7IC8vIFRPRE86IGhhbmRsZSBlcnJvclxuXHRcdH1cblxuXHRcdGlmKGJvZHkucmVzdWx0LnRpbWVzdGFtcCA+IHRoaXMuZ2V0U3RhdGUoJ2V2ZW50VGltZXN0YW1wJywgJ2NhY2hlJykpIHtcblx0XHRcdHRoaXMuc2F2ZVN0YXRlKCdldmVudFRpbWVzdGFtcCcsIGJvZHkucmVzdWx0LnRpbWVzdGFtcCwgJ2NhY2hlJyk7XG5cdFx0XHRpZihjYikgY2IobnVsbCwgYm9keS5yZXN1bHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZihjYikgY2IobnVsbCwgeyBldmVudHM6IFtdIH0pO1xuXHRcdH1cblx0XHRcdFxuXG5cdH0uYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIEdldCBhdmFpbGFibGUgZGlhbG9nIGxhbmd1YWdlc1xuICogSWYgbGFuZ3VhZ2VzIGFyZSBub3QgYXZhaWxhYmxlLCBcbiAqIHRoZW4gZWl0aGVyIHRoZXJlIGFyZSBubyBhdmFpbGFibGUgYWdlbnRzIG9yXG4gKiBsYW5ndWFnZXMgd2VyZW4ndCBzZXQgYnkgYWRtaW5pc3RyYXRvclxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuZ2V0TGFuZ3VhZ2VzID0gZnVuY3Rpb24oY2Ipe1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ2dldExhbmd1YWdlcycsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHRoaXMuZ2V0U3RhdGUoJ3NpZCcpXG5cdFx0fVxuXHR9LCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVycik7XG5cdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHR9XG5cblx0XHRjYihudWxsLCBib2R5KTtcblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbi8qKlxuICogUmVxdWVzdCBjaGF0IHNlc3Npb25cbiAqIFxuICogQHBhcmFtICB7T2JqZWN0fSBwYXJhbXMgLSB1c2VyIHBhcmFtZXRlcnMgKG5hbWUsIHBob25lLCBldGMuKVxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuY2hhdFJlcXVlc3QgPSBmdW5jdGlvbihwYXJhbXMsIGNiKXtcblx0cGFyYW1zLnNpZCA9IHRoaXMuZ2V0U3RhdGUoJ3NpZCcpO1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ2NoYXRSZXF1ZXN0Jyxcblx0XHRwYXJhbXM6IHBhcmFtc1xuXHR9LCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVycik7XG5cdFx0XHRpZihjYikgY2IoZXJyKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLmVtaXQoJ2NoYXQvc3RhcnQnLCBib2R5LnJlc3VsdCk7XG5cdFx0aWYoY2IpIGNiKG51bGwsIGJvZHkpO1xuXHR9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBHZXQgZGlhbG9nIG1lc3NhZ2VzXG4gKiBcbiAqIEBwYXJhbSAge051bWJlcn0gdGltZXN0YW1wIEdldCBtZXNzYWdlcyBzaW5jZSBwcm92aWRlZCB0aW1lc3RhbXBcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmdldE1lc3NhZ2VzID0gZnVuY3Rpb24oY2Ipe1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ2dldE1lc3NhZ2VzJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5nZXRTdGF0ZSgnc2lkJyksXG5cdFx0XHR0aW1lc3RhbXA6IHRoaXMuZ2V0U3RhdGUoJ21zZ1RpbWVzdGFtcCcpXG5cdFx0fVxuXHR9LCBmdW5jdGlvbiAoZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVycik7XG5cdFx0XHRyZXR1cm4gY2IoZXJyKTtcblx0XHR9XG5cblx0XHRpZihib2R5LnJlc3VsdC5tZXNzYWdlcykge1xuXHRcdFx0dGhpcy5lbWl0KCdtZXNzYWdlL25ldycsIGJvZHkucmVzdWx0KTtcblx0XHR9IGVsc2UgaWYoYm9keS5yZXN1bHQudHlwaW5nKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ21lc3NhZ2UvdHlwaW5nJywgYm9keS5yZXN1bHQpO1xuXHRcdH1cblx0XHR0aGlzLnNhdmVTdGF0ZSgnbXNnVGltZXN0YW1wJywgYm9keS5yZXN1bHQudGltZXN0YW1wKTtcblx0XHRpZihjYikgY2IobnVsbCwgYm9keS5yZXN1bHQpO1xuXHR9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBTZW5kIG1lc3NhZ2UgdG8gdGhlIGFnZW50XG4gKiBcbiAqIEBwYXJhbSAge1N0cmluZ30gdGV4dCAtIG1lc3NhZ2UgY29udGVudCBpbiBjYXNlIG9mIHJlZ3VsYXIgbWVzc2FnZSBcbiAqIG9yIGRhdGFVUkwgaW4gY2FzZSBvZiBmaWxlIHRyYW5zZmVyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGZpbGUgLSAoT3B0aW9uYWwpIGZpbGUgbmFtZVxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbih0ZXh0LCBmaWxlKXtcblx0dmFyIHBhcmFtcyA9IHtcblx0XHRzaWQ6IHRoaXMuZ2V0U3RhdGUoJ3NpZCcpLFxuXHRcdHRleHQ6IHRleHRcblx0fTtcblx0aWYoZmlsZSkgcGFyYW1zLmZpbGUgPSBmaWxlO1xuXHRyZXF1ZXN0LnBvc3QodGhpcy5vcHRpb25zLnNlcnZlclVybCwge1xuXHRcdG1ldGhvZDogJ3NldE1lc3NhZ2UnLFxuXHRcdHBhcmFtczogcGFyYW1zXG5cdH0sIGZ1bmN0aW9uKGVyciwgcmVzLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIpO1xuXHRcdFx0cmV0dXJuIGNiKGVycik7XG5cdFx0fVxuXHR9KTtcbn07XG5cbi8qKlxuICogQ2xvc2UgY3VycmVudCBjaGF0IHNlc3Npb25cbiAqIFxuICogQHBhcmFtICB7TnVtYmVyfSByYXRpbmcgU2VydmljZSByYXRpbmdcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmNsb3NlQ2hhdCA9IGZ1bmN0aW9uKHJhdGluZyl7XG5cdHZhciByZXFQYXJhbXMgPSB7XG5cdFx0bWV0aG9kOiAnY2xvc2VDaGF0Jyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5nZXRTdGF0ZSgnc2lkJylcblx0XHR9XG5cdH07XG5cdGlmKHJhdGluZykgcmVxUGFyYW1zLnBhcmFtcy5yYXRpbmcgPSByYXRpbmc7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCByZXFQYXJhbXMsIGZ1bmN0aW9uIChlcnIsIHJlcywgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyLCByZXFQYXJhbXMpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHR0aGlzLnNhdmVTdGF0ZSgnY2hhdCcsIGZhbHNlKTtcblx0XHR0aGlzLmVtaXQoJ2NoYXQvY2xvc2UnLCB7IHJhdGluZzogcmF0aW5nIH0pO1xuXHR9LmJpbmQodGhpcykpO1xufTtcblxuLyoqXG4gKiBTZW5kIGRpYWxvZyBlaXRoZXIgdG8gdGhlIHNwZWNpZmllZCBlbWFpbCBhZGRyZXNzIChpZiBwYXJhbWV0ZXIgXCJ0b1wiIGhhcyBwYXNzZWQpXG4gKiBvciB0byBjYWxsIGNlbnRlciBhZG1pbmlzdHJhdG9yIChpZiBwYXJhbWV0ZXIgXCJlbWFpbFwiIGhhcyBwYXNzZWQpXG4gKlxuICogRWl0aGVyXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHRvXHRcdFx0RGVzdGluYXRpb24gZW1haWwgYWRkcmVzc1xuICpcbiAqIE9yXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGVtYWlsXHRcdFNlbmRlciBlbWFpbCBhZGRyZXNzXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHVuYW1lXHRcdFNlbmRlciBuYW1lXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGZpbGVuYW1lXHRBdHRhY2htZW50IGZpbGVuYW1lXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGZpbGVkYXRhXHRBdHRhY2htZW50IGZpbGUgVVJMXG4gKlxuICogQm90aFxuICogQHBhcmFtICB7U3RyaW5nfSB0ZXh0XHRcdEVtYWlsIGJvZHlcbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLnNlbmRFbWFpbCA9IGZ1bmN0aW9uKHBhcmFtcywgY2Ipe1xuXHRwYXJhbXMuc2lkID0gdGhpcy5nZXRTdGF0ZSgnc2lkJyk7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG5cdFx0bWV0aG9kOiAnc2VuZE1haWwnLFxuXHRcdHBhcmFtczogcGFyYW1zXG5cdH0sIGZ1bmN0aW9uIChlcnIsIHJlcywgYm9keSl7XG5cdFx0aWYoZXJyKSB7XG5cdFx0XHR0aGlzLmVtaXQoJ0Vycm9yJywgZXJyKTtcblx0XHRcdGlmKGNiKSBjYihlcnIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuZW1pdCgnY2hhdC9zZW5kJywgcGFyYW1zKTtcblx0XHRpZihjYikgY2IobnVsbCwgYm9keSk7XG5cdH0uYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIERpc2pvaW4gY3VycmVudCBhY3RpdmUgc2Vzc2lvblxuICogRW1pdHMgc2Vzc2lvbi9kaXNqb2luIGV2ZW50XG4gKiBpZiByZXF1ZXN0IGlzIGZ1bGZpbGxlZFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzaWQgSUQgb2YgYWN0aXZlIHNlc3Npb25cbiAqL1xuV2NoYXRBUEkucHJvdG90eXBlLmRpc2pvaW5TZXNzaW9uID0gZnVuY3Rpb24oc2lkKXtcblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIHtcblx0XHRtZXRob2Q6ICdkaXNqb2luU2Vzc2lvbicsXG5cdFx0cGFyYW1zOiB7XG5cdFx0XHRzaWQ6IHNpZFxuXHRcdH1cblx0fSwgZnVuY3Rpb24gKGVyciwgcmVzLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMuZW1pdCgnc2Vzc2lvbi9kaXNqb2luJyk7XG5cdH0uYmluZCh0aGlzKSk7XG59O1xuXG4vKipcbiAqIEluZm9ybXMgdGhlIHNlcnZlciB0aGF0IHRoZSBjb2Jyb3dzaW5nIGZlYXR1cmUgaXMgdHVybmVkIG9uIG9yIG9mZlxuICogQHBhcmFtICB7Qm9vbGVhbn0gc3RhdGUgUmVwcmVzZW50cyB0aGUgc3RhdGUgb2YgY29icm93c2luZyBmZWF0dXJlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHVybCAgIFVybCB3aGVyZSB0aGUgZmVhdHVyZSdzIHN0YXRlIGlzIGNoYW5nZWRcbiAqIEByZXR1cm4gbm9uZVxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuc3dpdGNoU2hhcmVTdGF0ZSA9IGZ1bmN0aW9uKHN0YXRlLCB1cmwpe1xuXHR2YXIgbWV0aG9kID0gc3RhdGUgPyAnc2hhcmVPcGVuZWQnIDogJ3NoYXJlQ2xvc2VkJztcblx0cmVxdWVzdC5wb3N0KHRoaXMub3B0aW9ucy5zZXJ2ZXJVcmwsIHtcblx0XHRtZXRob2Q6IG1ldGhvZCxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5nZXRTdGF0ZSgnc2lkJyksXG5cdFx0XHR1cmw6IHVybFxuXHRcdH1cblx0fSwgZnVuY3Rpb24oZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVycik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLnNldENoYXRUaW1lb3V0ID0gZnVuY3Rpb24odGltZW91dCl7XG5cdHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpe1xuXHRcdHRoaXMuZW1pdCgnY2hhdC90aW1lb3V0Jyk7XG5cdH0uYmluZCh0aGlzKSwgdGltZW91dCoxMDAwKTtcbn07XG5cbldjaGF0QVBJLnByb3RvdHlwZS51c2VySXNUeXBpbmcgPSBmdW5jdGlvbigpe1xuXHQvLyBjb25zb2xlLmxvZygndXNlciBpcyB0eXBpbmchJyk7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG5cdFx0bWV0aG9kOiAndHlwaW5nJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5nZXRTdGF0ZSgnc2lkJylcblx0XHR9XG5cdH0sIGZ1bmN0aW9uIChlcnIpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVycik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLnVwZGF0ZVVybCA9IGZ1bmN0aW9uKHVybCl7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG5cdFx0bWV0aG9kOiAndXBkYXRlVXJsJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5nZXRTdGF0ZSgnc2lkJyksXG5cdFx0XHR1cmw6IHVybFxuXHRcdH1cblx0fSwgZnVuY3Rpb24oZXJyLCByZXMsIGJvZHkpe1xuXHRcdGlmKGVycikge1xuXHRcdFx0dGhpcy5lbWl0KCdFcnJvcicsIGVycik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHR9LmJpbmQodGhpcykpO1xufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLmxpbmtGb2xsb3dlZCA9IGZ1bmN0aW9uKHVybCl7XG5cdHJlcXVlc3QucG9zdCh0aGlzLm9wdGlvbnMuc2VydmVyVXJsLCB7XG5cdFx0bWV0aG9kOiAnbGlua0ZvbGxvd2VkJyxcblx0XHRwYXJhbXM6IHtcblx0XHRcdHNpZDogdGhpcy5nZXRTdGF0ZSgnc2lkJyksXG5cdFx0XHR1cmw6IHVybFxuXHRcdH1cblx0fSwgZnVuY3Rpb24gKGVyciwgcmVzLCBib2R5KXtcblx0XHRpZihlcnIpIHtcblx0XHRcdHRoaXMuZW1pdCgnRXJyb3InLCBlcnIpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0fS5iaW5kKHRoaXMpKTtcbn07XG5cbldjaGF0QVBJLnByb3RvdHlwZS5zYXZlU3RhdGUgPSBmdW5jdGlvbihrZXksIHZhbHVlLCBsb2NhdGlvbil7XG5cdHRoaXMuc2Vzc2lvbltrZXldID0gdmFsdWU7XG5cdGlmKGxvY2F0aW9uICE9PSAnY2FjaGUnKSB7XG5cdFx0c3RvcmFnZS5zZXQoa2V5LCB2YWx1ZSwgbG9jYXRpb24pO1xuXHR9XG5cdHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogR2V0IHNhdmVkIHByb3BlcnR5IGZyb20gbG9jYWxTdG9yYWdlIG9yIGZyb20gc2Vzc2lvbiBjYWNoZVxuICogQHBhcmFtICB7U3RyaW5nfSBrZXkgICAgICAtIGl0ZW0ga2V5IGluIHN0b3JhZ2UgbWVtb3J5XG4gKiBAcGFyYW0gIHtbdHlwZV19IGxvY2F0aW9uIC0gZnJvbSB3aGVyZSB0byByZXRyaWV2ZSBpdGVtLiBcbiAqIENvdWxkIGJlIGVpdGhlciBcInN0b3JhZ2VcIiAtIGZyb20gbG9jYWxTdG9yYWdlLCBvciBcImNhY2hlXCIgLSBmcm9tIHNlc3Npb24gY2FjaGVcbiAqIEByZXR1cm4ge1N0cmluZ3xPYmplY3R8RnVuY3Rpb259ICAgICAgICAgIC0gaXRlbSB2YWx1ZVxuICovXG5XY2hhdEFQSS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbihrZXksIGxvY2F0aW9uKXtcblx0aWYoIWxvY2F0aW9uKSB7XG5cdFx0cmV0dXJuICh0aGlzLnNlc3Npb25ba2V5XSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc2Vzc2lvbltrZXldICE9PSBudWxsKSA/IHRoaXMuc2Vzc2lvbltrZXldIDogc3RvcmFnZS5nZXQoa2V5KTtcblx0fSBlbHNlIGlmKGxvY2F0aW9uID09PSAnY2FjaGUnKSB7XG5cdFx0cmV0dXJuIHRoaXMuc2Vzc2lvbltrZXldO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiBzdG9yYWdlLmdldChrZXksIGxvY2F0aW9uKTtcblx0fVxufTtcblxuV2NoYXRBUEkucHJvdG90eXBlLnJlbW92ZVN0YXRlID0gZnVuY3Rpb24oa2V5LCBsb2NhdGlvbikge1xuXHRkZWxldGUgdGhpcy5zZXNzaW9uW2tleV07XG5cdHN0b3JhZ2UucmVtb3ZlKGtleSk7XG59O1xuXG5XY2hhdEFQSS5wcm90b3R5cGUuc2Vzc2lvblRpbWVvdXQgPSBmdW5jdGlvbihwYXJhbXMpe1xuXHQvLyBjb25zb2xlLmxvZygnc2Vzc2lvblRpbWVvdXQgcGFyYW1zOiAnLCBwYXJhbXMpO1xuXHR0aGlzLmVtaXQoJ3Nlc3Npb24vdGltZW91dCcsIHBhcmFtcyk7XG59O1xuXG5mdW5jdGlvbiBnZXRTaWRGcm9tVXJsKHVybCl7XG5cdHZhciBzdWJzdHIgPSB1cmwuc3Vic3RyaW5nKHVybC5pbmRleE9mKCdjaGF0U2Vzc2lvbklkPScpKTtcblx0c3Vic3RyID0gc3Vic3RyLnN1YnN0cmluZyhzdWJzdHIuaW5kZXhPZignPScpKzEpO1xuXHRyZXR1cm4gc3Vic3RyO1xufVxuIiwiLypcbiAqIEpzU0lQIHYyLjAuMVxuICogdGhlIEphdmFzY3JpcHQgU0lQIGxpYnJhcnlcbiAqIENvcHlyaWdodDogMjAxMi0yMDE2IEpvc8OpIEx1aXMgTWlsbMOhbiA8am1pbGxhbkBhbGlheC5uZXQ+IChodHRwczovL2dpdGh1Yi5jb20vam1pbGxhbilcbiAqIEhvbWVwYWdlOiBodHRwOi8vanNzaXAubmV0XG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuXG4hZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciB0O3Q9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjp0aGlzLHQuSnNTSVA9ZSgpfX0oZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gZnVuY3Rpb24gdChlLG4scil7ZnVuY3Rpb24gcyhpLG8pe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighbyYmdSlyZXR1cm4gdShpLCEwKTtpZihsKXJldHVybiBsKGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIGM9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKGMuZXhwb3J0cyxmdW5jdGlvbih0KXt2YXIgbj1lW2ldWzFdW3RdO3JldHVybiBzKG4/bjp0KX0sYyxjLmV4cG9ydHMsdCxlLG4scil9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIGw9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTxyLmxlbmd0aDtpKyspcyhyW2ldKTtyZXR1cm4gc30oezE6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj1lKFwiLi4vcGFja2FnZS5qc29uXCIpLHM9e1VTRVJfQUdFTlQ6ci50aXRsZStcIiBcIityLnZlcnNpb24sU0lQOlwic2lwXCIsU0lQUzpcInNpcHNcIixjYXVzZXM6e0NPTk5FQ1RJT05fRVJST1I6XCJDb25uZWN0aW9uIEVycm9yXCIsUkVRVUVTVF9USU1FT1VUOlwiUmVxdWVzdCBUaW1lb3V0XCIsU0lQX0ZBSUxVUkVfQ09ERTpcIlNJUCBGYWlsdXJlIENvZGVcIixJTlRFUk5BTF9FUlJPUjpcIkludGVybmFsIEVycm9yXCIsQlVTWTpcIkJ1c3lcIixSRUpFQ1RFRDpcIlJlamVjdGVkXCIsUkVESVJFQ1RFRDpcIlJlZGlyZWN0ZWRcIixVTkFWQUlMQUJMRTpcIlVuYXZhaWxhYmxlXCIsTk9UX0ZPVU5EOlwiTm90IEZvdW5kXCIsQUREUkVTU19JTkNPTVBMRVRFOlwiQWRkcmVzcyBJbmNvbXBsZXRlXCIsSU5DT01QQVRJQkxFX1NEUDpcIkluY29tcGF0aWJsZSBTRFBcIixNSVNTSU5HX1NEUDpcIk1pc3NpbmcgU0RQXCIsQVVUSEVOVElDQVRJT05fRVJST1I6XCJBdXRoZW50aWNhdGlvbiBFcnJvclwiLEJZRTpcIlRlcm1pbmF0ZWRcIixXRUJSVENfRVJST1I6XCJXZWJSVEMgRXJyb3JcIixDQU5DRUxFRDpcIkNhbmNlbGVkXCIsTk9fQU5TV0VSOlwiTm8gQW5zd2VyXCIsRVhQSVJFUzpcIkV4cGlyZXNcIixOT19BQ0s6XCJObyBBQ0tcIixESUFMT0dfRVJST1I6XCJEaWFsb2cgRXJyb3JcIixVU0VSX0RFTklFRF9NRURJQV9BQ0NFU1M6XCJVc2VyIERlbmllZCBNZWRpYSBBY2Nlc3NcIixCQURfTUVESUFfREVTQ1JJUFRJT046XCJCYWQgTWVkaWEgRGVzY3JpcHRpb25cIixSVFBfVElNRU9VVDpcIlJUUCBUaW1lb3V0XCJ9LFNJUF9FUlJPUl9DQVVTRVM6e1JFRElSRUNURUQ6WzMwMCwzMDEsMzAyLDMwNSwzODBdLEJVU1k6WzQ4Niw2MDBdLFJFSkVDVEVEOls0MDMsNjAzXSxOT1RfRk9VTkQ6WzQwNCw2MDRdLFVOQVZBSUxBQkxFOls0ODAsNDEwLDQwOCw0MzBdLEFERFJFU1NfSU5DT01QTEVURTpbNDg0LDQyNF0sSU5DT01QQVRJQkxFX1NEUDpbNDg4LDYwNl0sQVVUSEVOVElDQVRJT05fRVJST1I6WzQwMSw0MDddfSxBQ0s6XCJBQ0tcIixCWUU6XCJCWUVcIixDQU5DRUw6XCJDQU5DRUxcIixJTkZPOlwiSU5GT1wiLElOVklURTpcIklOVklURVwiLE1FU1NBR0U6XCJNRVNTQUdFXCIsTk9USUZZOlwiTk9USUZZXCIsT1BUSU9OUzpcIk9QVElPTlNcIixSRUdJU1RFUjpcIlJFR0lTVEVSXCIsUkVGRVI6XCJSRUZFUlwiLFVQREFURTpcIlVQREFURVwiLFNVQlNDUklCRTpcIlNVQlNDUklCRVwiLFJFQVNPTl9QSFJBU0U6ezEwMDpcIlRyeWluZ1wiLDE4MDpcIlJpbmdpbmdcIiwxODE6XCJDYWxsIElzIEJlaW5nIEZvcndhcmRlZFwiLDE4MjpcIlF1ZXVlZFwiLDE4MzpcIlNlc3Npb24gUHJvZ3Jlc3NcIiwxOTk6XCJFYXJseSBEaWFsb2cgVGVybWluYXRlZFwiLDIwMDpcIk9LXCIsMjAyOlwiQWNjZXB0ZWRcIiwyMDQ6XCJObyBOb3RpZmljYXRpb25cIiwzMDA6XCJNdWx0aXBsZSBDaG9pY2VzXCIsMzAxOlwiTW92ZWQgUGVybWFuZW50bHlcIiwzMDI6XCJNb3ZlZCBUZW1wb3JhcmlseVwiLDMwNTpcIlVzZSBQcm94eVwiLDM4MDpcIkFsdGVybmF0aXZlIFNlcnZpY2VcIiw0MDA6XCJCYWQgUmVxdWVzdFwiLDQwMTpcIlVuYXV0aG9yaXplZFwiLDQwMjpcIlBheW1lbnQgUmVxdWlyZWRcIiw0MDM6XCJGb3JiaWRkZW5cIiw0MDQ6XCJOb3QgRm91bmRcIiw0MDU6XCJNZXRob2QgTm90IEFsbG93ZWRcIiw0MDY6XCJOb3QgQWNjZXB0YWJsZVwiLDQwNzpcIlByb3h5IEF1dGhlbnRpY2F0aW9uIFJlcXVpcmVkXCIsNDA4OlwiUmVxdWVzdCBUaW1lb3V0XCIsNDEwOlwiR29uZVwiLDQxMjpcIkNvbmRpdGlvbmFsIFJlcXVlc3QgRmFpbGVkXCIsNDEzOlwiUmVxdWVzdCBFbnRpdHkgVG9vIExhcmdlXCIsNDE0OlwiUmVxdWVzdC1VUkkgVG9vIExvbmdcIiw0MTU6XCJVbnN1cHBvcnRlZCBNZWRpYSBUeXBlXCIsNDE2OlwiVW5zdXBwb3J0ZWQgVVJJIFNjaGVtZVwiLDQxNzpcIlVua25vd24gUmVzb3VyY2UtUHJpb3JpdHlcIiw0MjA6XCJCYWQgRXh0ZW5zaW9uXCIsNDIxOlwiRXh0ZW5zaW9uIFJlcXVpcmVkXCIsNDIyOlwiU2Vzc2lvbiBJbnRlcnZhbCBUb28gU21hbGxcIiw0MjM6XCJJbnRlcnZhbCBUb28gQnJpZWZcIiw0MjQ6XCJCYWQgTG9jYXRpb24gSW5mb3JtYXRpb25cIiw0Mjg6XCJVc2UgSWRlbnRpdHkgSGVhZGVyXCIsNDI5OlwiUHJvdmlkZSBSZWZlcnJlciBJZGVudGl0eVwiLDQzMDpcIkZsb3cgRmFpbGVkXCIsNDMzOlwiQW5vbnltaXR5IERpc2FsbG93ZWRcIiw0MzY6XCJCYWQgSWRlbnRpdHktSW5mb1wiLDQzNzpcIlVuc3VwcG9ydGVkIENlcnRpZmljYXRlXCIsNDM4OlwiSW52YWxpZCBJZGVudGl0eSBIZWFkZXJcIiw0Mzk6XCJGaXJzdCBIb3AgTGFja3MgT3V0Ym91bmQgU3VwcG9ydFwiLDQ0MDpcIk1heC1CcmVhZHRoIEV4Y2VlZGVkXCIsNDY5OlwiQmFkIEluZm8gUGFja2FnZVwiLDQ3MDpcIkNvbnNlbnQgTmVlZGVkXCIsNDc4OlwiVW5yZXNvbHZhYmxlIERlc3RpbmF0aW9uXCIsNDgwOlwiVGVtcG9yYXJpbHkgVW5hdmFpbGFibGVcIiw0ODE6XCJDYWxsL1RyYW5zYWN0aW9uIERvZXMgTm90IEV4aXN0XCIsNDgyOlwiTG9vcCBEZXRlY3RlZFwiLDQ4MzpcIlRvbyBNYW55IEhvcHNcIiw0ODQ6XCJBZGRyZXNzIEluY29tcGxldGVcIiw0ODU6XCJBbWJpZ3VvdXNcIiw0ODY6XCJCdXN5IEhlcmVcIiw0ODc6XCJSZXF1ZXN0IFRlcm1pbmF0ZWRcIiw0ODg6XCJOb3QgQWNjZXB0YWJsZSBIZXJlXCIsNDg5OlwiQmFkIEV2ZW50XCIsNDkxOlwiUmVxdWVzdCBQZW5kaW5nXCIsNDkzOlwiVW5kZWNpcGhlcmFibGVcIiw0OTQ6XCJTZWN1cml0eSBBZ3JlZW1lbnQgUmVxdWlyZWRcIiw1MDA6XCJKc1NJUCBJbnRlcm5hbCBFcnJvclwiLDUwMTpcIk5vdCBJbXBsZW1lbnRlZFwiLDUwMjpcIkJhZCBHYXRld2F5XCIsNTAzOlwiU2VydmljZSBVbmF2YWlsYWJsZVwiLDUwNDpcIlNlcnZlciBUaW1lLW91dFwiLDUwNTpcIlZlcnNpb24gTm90IFN1cHBvcnRlZFwiLDUxMzpcIk1lc3NhZ2UgVG9vIExhcmdlXCIsNTgwOlwiUHJlY29uZGl0aW9uIEZhaWx1cmVcIiw2MDA6XCJCdXN5IEV2ZXJ5d2hlcmVcIiw2MDM6XCJEZWNsaW5lXCIsNjA0OlwiRG9lcyBOb3QgRXhpc3QgQW55d2hlcmVcIiw2MDY6XCJOb3QgQWNjZXB0YWJsZVwifSxBTExPV0VEX01FVEhPRFM6XCJJTlZJVEUsQUNLLENBTkNFTCxCWUUsVVBEQVRFLE1FU1NBR0UsT1BUSU9OUyxSRUZFUixJTkZPXCIsQUNDRVBURURfQk9EWV9UWVBFUzpcImFwcGxpY2F0aW9uL3NkcCwgYXBwbGljYXRpb24vZHRtZi1yZWxheVwiLE1BWF9GT1JXQVJEUzo2OSxTRVNTSU9OX0VYUElSRVM6OTAsTUlOX1NFU1NJT05fRVhQSVJFUzo2MH07dC5leHBvcnRzPXN9LHtcIi4uL3BhY2thZ2UuanNvblwiOjQ3fV0sMjpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4scil7dmFyIG87cmV0dXJuIHRoaXMudWFjX3BlbmRpbmdfcmVwbHk9ITEsdGhpcy51YXNfcGVuZGluZ19yZXBseT0hMSx0Lmhhc0hlYWRlcihcImNvbnRhY3RcIik/KHI9dCBpbnN0YW5jZW9mIGkuSW5jb21pbmdSZXNwb25zZT90LnN0YXR1c19jb2RlPDIwMD9zLlNUQVRVU19FQVJMWTpzLlNUQVRVU19DT05GSVJNRUQ6cnx8cy5TVEFUVVNfQ09ORklSTUVELG89dC5wYXJzZUhlYWRlcihcImNvbnRhY3RcIiksXCJVQVNcIj09PW4/KHRoaXMuaWQ9e2NhbGxfaWQ6dC5jYWxsX2lkLGxvY2FsX3RhZzp0LnRvX3RhZyxyZW1vdGVfdGFnOnQuZnJvbV90YWcsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYWxsX2lkK3RoaXMubG9jYWxfdGFnK3RoaXMucmVtb3RlX3RhZ319LHRoaXMuc3RhdGU9cix0aGlzLnJlbW90ZV9zZXFudW09dC5jc2VxLHRoaXMubG9jYWxfdXJpPXQucGFyc2VIZWFkZXIoXCJ0b1wiKS51cmksdGhpcy5yZW1vdGVfdXJpPXQucGFyc2VIZWFkZXIoXCJmcm9tXCIpLnVyaSx0aGlzLnJlbW90ZV90YXJnZXQ9by51cmksdGhpcy5yb3V0ZV9zZXQ9dC5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpKTpcIlVBQ1wiPT09biYmKHRoaXMuaWQ9e2NhbGxfaWQ6dC5jYWxsX2lkLGxvY2FsX3RhZzp0LmZyb21fdGFnLHJlbW90ZV90YWc6dC50b190YWcsdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYWxsX2lkK3RoaXMubG9jYWxfdGFnK3RoaXMucmVtb3RlX3RhZ319LHRoaXMuc3RhdGU9cix0aGlzLmxvY2FsX3NlcW51bT10LmNzZXEsdGhpcy5sb2NhbF91cmk9dC5wYXJzZUhlYWRlcihcImZyb21cIikudXJpLHRoaXMucmVtb3RlX3VyaT10LnBhcnNlSGVhZGVyKFwidG9cIikudXJpLHRoaXMucmVtb3RlX3RhcmdldD1vLnVyaSx0aGlzLnJvdXRlX3NldD10LmdldEhlYWRlcnMoXCJyZWNvcmQtcm91dGVcIikucmV2ZXJzZSgpKSx0aGlzLm93bmVyPWUsZS51YS5kaWFsb2dzW3RoaXMuaWQudG9TdHJpbmcoKV09dGhpcyx2b2lkIGwoXCJuZXcgXCIrbitcIiBkaWFsb2cgY3JlYXRlZCB3aXRoIHN0YXR1cyBcIisodGhpcy5zdGF0ZT09PXMuU1RBVFVTX0VBUkxZP1wiRUFSTFlcIjpcIkNPTkZJUk1FRFwiKSkpOntlcnJvcjpcInVuYWJsZSB0byBjcmVhdGUgYSBEaWFsb2cgd2l0aG91dCBDb250YWN0IGhlYWRlciBmaWVsZFwifX10LmV4cG9ydHM9cjt2YXIgcz17U1RBVFVTX0VBUkxZOjEsU1RBVFVTX0NPTkZJUk1FRDoyfTtyLkM9czt2YXIgbD1lKFwiZGVidWdcIikoXCJKc1NJUDpEaWFsb2dcIiksaT1lKFwiLi9TSVBNZXNzYWdlXCIpLG89ZShcIi4vQ29uc3RhbnRzXCIpLHU9ZShcIi4vVHJhbnNhY3Rpb25zXCIpLGE9ZShcIi4vRGlhbG9nL1JlcXVlc3RTZW5kZXJcIik7ci5wcm90b3R5cGU9e3VwZGF0ZTpmdW5jdGlvbihlLHQpe3RoaXMuc3RhdGU9cy5TVEFUVVNfQ09ORklSTUVELGwoXCJkaWFsb2cgXCIrdGhpcy5pZC50b1N0cmluZygpK1wiICBjaGFuZ2VkIHRvIENPTkZJUk1FRCBzdGF0ZVwiKSxcIlVBQ1wiPT09dCYmKHRoaXMucm91dGVfc2V0PWUuZ2V0SGVhZGVycyhcInJlY29yZC1yb3V0ZVwiKS5yZXZlcnNlKCkpfSx0ZXJtaW5hdGU6ZnVuY3Rpb24oKXtsKFwiZGlhbG9nIFwiK3RoaXMuaWQudG9TdHJpbmcoKStcIiBkZWxldGVkXCIpLGRlbGV0ZSB0aGlzLm93bmVyLnVhLmRpYWxvZ3NbdGhpcy5pZC50b1N0cmluZygpXX0sY3JlYXRlUmVxdWVzdDpmdW5jdGlvbihlLHQsbil7dmFyIHIscztyZXR1cm4gdD10JiZ0LnNsaWNlKCl8fFtdLHRoaXMubG9jYWxfc2VxbnVtfHwodGhpcy5sb2NhbF9zZXFudW09TWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSkpLHI9ZT09PW8uQ0FOQ0VMfHxlPT09by5BQ0s/dGhpcy5sb2NhbF9zZXFudW06dGhpcy5sb2NhbF9zZXFudW0rPTEscz1uZXcgaS5PdXRnb2luZ1JlcXVlc3QoZSx0aGlzLnJlbW90ZV90YXJnZXQsdGhpcy5vd25lci51YSx7Y3NlcTpyLGNhbGxfaWQ6dGhpcy5pZC5jYWxsX2lkLGZyb21fdXJpOnRoaXMubG9jYWxfdXJpLGZyb21fdGFnOnRoaXMuaWQubG9jYWxfdGFnLHRvX3VyaTp0aGlzLnJlbW90ZV91cmksdG9fdGFnOnRoaXMuaWQucmVtb3RlX3RhZyxyb3V0ZV9zZXQ6dGhpcy5yb3V0ZV9zZXR9LHQsbikscy5kaWFsb2c9dGhpcyxzfSxjaGVja0luRGlhbG9nUmVxdWVzdDpmdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMucmVtb3RlX3NlcW51bSl7aWYoZS5jc2VxPHRoaXMucmVtb3RlX3NlcW51bSlyZXR1cm4gZS5tZXRob2QhPT1vLkFDSyYmZS5yZXBseSg1MDApLCExO2UuY3NlcT50aGlzLnJlbW90ZV9zZXFudW0mJih0aGlzLnJlbW90ZV9zZXFudW09ZS5jc2VxKX1lbHNlIHRoaXMucmVtb3RlX3NlcW51bT1lLmNzZXE7aWYoZS5tZXRob2Q9PT1vLklOVklURXx8ZS5tZXRob2Q9PT1vLlVQREFURSYmZS5ib2R5KXtpZih0aGlzLnVhY19wZW5kaW5nX3JlcGx5PT09ITApZS5yZXBseSg0OTEpO2Vsc2V7aWYodGhpcy51YXNfcGVuZGluZ19yZXBseT09PSEwKXt2YXIgbj0oMTAqTWF0aC5yYW5kb20oKXwwKSsxO3JldHVybiBlLnJlcGx5KDUwMCxudWxsLFtcIlJldHJ5LUFmdGVyOlwiK25dKSwhMX10aGlzLnVhc19wZW5kaW5nX3JlcGx5PSEwLGUuc2VydmVyX3RyYW5zYWN0aW9uLm9uKFwic3RhdGVDaGFuZ2VkXCIsZnVuY3Rpb24gcigpe3RoaXMuc3RhdGUhPT11LkMuU1RBVFVTX0FDQ0VQVEVEJiZ0aGlzLnN0YXRlIT09dS5DLlNUQVRVU19DT01QTEVURUQmJnRoaXMuc3RhdGUhPT11LkMuU1RBVFVTX1RFUk1JTkFURUR8fChlLnNlcnZlcl90cmFuc2FjdGlvbi5yZW1vdmVMaXN0ZW5lcihcInN0YXRlQ2hhbmdlZFwiLHIpLHQudWFzX3BlbmRpbmdfcmVwbHk9ITEpfSl9ZS5oYXNIZWFkZXIoXCJjb250YWN0XCIpJiZlLnNlcnZlcl90cmFuc2FjdGlvbi5vbihcInN0YXRlQ2hhbmdlZFwiLGZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT09PXUuQy5TVEFUVVNfQUNDRVBURUQmJih0LnJlbW90ZV90YXJnZXQ9ZS5wYXJzZUhlYWRlcihcImNvbnRhY3RcIikudXJpKX0pfWVsc2UgZS5tZXRob2Q9PT1vLk5PVElGWSYmZS5oYXNIZWFkZXIoXCJjb250YWN0XCIpJiZlLnNlcnZlcl90cmFuc2FjdGlvbi5vbihcInN0YXRlQ2hhbmdlZFwiLGZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT09PXUuQy5TVEFUVVNfQ09NUExFVEVEJiYodC5yZW1vdGVfdGFyZ2V0PWUucGFyc2VIZWFkZXIoXCJjb250YWN0XCIpLnVyaSl9KTtyZXR1cm4hMH0sc2VuZFJlcXVlc3Q6ZnVuY3Rpb24oZSx0LG4pe249bnx8e307dmFyIHI9bi5leHRyYUhlYWRlcnMmJm4uZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLHM9bi5ib2R5fHxudWxsLGw9dGhpcy5jcmVhdGVSZXF1ZXN0KHQscixzKSxpPW5ldyBhKHRoaXMsZSxsKTtyZXR1cm4gaS5zZW5kKCksbH0scmVjZWl2ZVJlcXVlc3Q6ZnVuY3Rpb24oZSl7dGhpcy5jaGVja0luRGlhbG9nUmVxdWVzdChlKSYmdGhpcy5vd25lci5yZWNlaXZlUmVxdWVzdChlKX19fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL0RpYWxvZy9SZXF1ZXN0U2VuZGVyXCI6MyxcIi4vU0lQTWVzc2FnZVwiOjE4LFwiLi9UcmFuc2FjdGlvbnNcIjoyMSxkZWJ1ZzozM31dLDM6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCxuKXt0aGlzLmRpYWxvZz1lLHRoaXMuYXBwbGljYW50PXQsdGhpcy5yZXF1ZXN0PW4sdGhpcy5yZWF0dGVtcHQ9ITEsdGhpcy5yZWF0dGVtcHRUaW1lcj1udWxsfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCIuLi9Db25zdGFudHNcIiksbD1lKFwiLi4vVHJhbnNhY3Rpb25zXCIpLGk9ZShcIi4uL1JUQ1Nlc3Npb25cIiksbz1lKFwiLi4vUmVxdWVzdFNlbmRlclwiKTtyLnByb3RvdHlwZT17c2VuZDpmdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1uZXcgbyh0aGlzLHRoaXMuZGlhbG9nLm93bmVyLnVhKTt0LnNlbmQoKSwodGhpcy5yZXF1ZXN0Lm1ldGhvZD09PXMuSU5WSVRFfHx0aGlzLnJlcXVlc3QubWV0aG9kPT09cy5VUERBVEUmJnRoaXMucmVxdWVzdC5ib2R5KSYmdC5jbGllbnRUcmFuc2FjdGlvbi5zdGF0ZSE9PWwuQy5TVEFUVVNfVEVSTUlOQVRFRCYmKHRoaXMuZGlhbG9nLnVhY19wZW5kaW5nX3JlcGx5PSEwLHQuY2xpZW50VHJhbnNhY3Rpb24ub24oXCJzdGF0ZUNoYW5nZWRcIixmdW5jdGlvbiBuKCl7dGhpcy5zdGF0ZSE9PWwuQy5TVEFUVVNfQUNDRVBURUQmJnRoaXMuc3RhdGUhPT1sLkMuU1RBVFVTX0NPTVBMRVRFRCYmdGhpcy5zdGF0ZSE9PWwuQy5TVEFUVVNfVEVSTUlOQVRFRHx8KHQuY2xpZW50VHJhbnNhY3Rpb24ucmVtb3ZlTGlzdGVuZXIoXCJzdGF0ZUNoYW5nZWRcIixuKSxlLmRpYWxvZy51YWNfcGVuZGluZ19yZXBseT0hMSl9KSl9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXt0aGlzLmFwcGxpY2FudC5vblJlcXVlc3RUaW1lb3V0KCl9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXt0aGlzLmFwcGxpY2FudC5vblRyYW5zcG9ydEVycm9yKCl9LHJlY2VpdmVSZXNwb25zZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzOzQwOD09PWUuc3RhdHVzX2NvZGV8fDQ4MT09PWUuc3RhdHVzX2NvZGU/dGhpcy5hcHBsaWNhbnQub25EaWFsb2dFcnJvcihlKTplLm1ldGhvZD09PXMuSU5WSVRFJiY0OTE9PT1lLnN0YXR1c19jb2RlP3RoaXMucmVhdHRlbXB0P3RoaXMuYXBwbGljYW50LnJlY2VpdmVSZXNwb25zZShlKToodGhpcy5yZXF1ZXN0LmNzZXEudmFsdWU9dGhpcy5kaWFsb2cubG9jYWxfc2VxbnVtKz0xLHRoaXMucmVhdHRlbXB0VGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3QuYXBwbGljYW50Lm93bmVyLnN0YXR1cyE9PWkuQy5TVEFUVVNfVEVSTUlOQVRFRCYmKHQucmVhdHRlbXB0PSEwLHQucmVxdWVzdF9zZW5kZXIuc2VuZCgpKX0sMWUzKSk6dGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKGUpfX19LHtcIi4uL0NvbnN0YW50c1wiOjEsXCIuLi9SVENTZXNzaW9uXCI6MTEsXCIuLi9SZXF1ZXN0U2VuZGVyXCI6MTcsXCIuLi9UcmFuc2FjdGlvbnNcIjoyMX1dLDQ6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe3RoaXMuY3JlZGVudGlhbHM9ZSx0aGlzLmNub25jZT1udWxsLHRoaXMubmM9MCx0aGlzLm5jSGV4PVwiMDAwMDAwMDBcIix0aGlzLmFsZ29yaXRobT1udWxsLHRoaXMucmVhbG09bnVsbCx0aGlzLm5vbmNlPW51bGwsdGhpcy5vcGFxdWU9bnVsbCx0aGlzLnN0YWxlPW51bGwsdGhpcy5xb3A9bnVsbCx0aGlzLm1ldGhvZD1udWxsLHRoaXMudXJpPW51bGwsdGhpcy5oYTE9bnVsbCx0aGlzLnJlc3BvbnNlPW51bGx9dC5leHBvcnRzPXI7dmFyIHM9ZShcImRlYnVnXCIpKFwiSnNTSVA6RGlnZXN0QXV0aGVudGljYXRpb25cIiksbD1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpEaWdlc3RBdXRoZW50aWNhdGlvblwiKTtsLmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKTt2YXIgaT1lKFwiLi9VdGlsc1wiKTtyLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2VcInJlYWxtXCI6cmV0dXJuIHRoaXMucmVhbG07Y2FzZVwiaGExXCI6cmV0dXJuIHRoaXMuaGExO2RlZmF1bHQ6cmV0dXJuIHZvaWQgbCgnZ2V0KCkgfCBjYW5ub3QgZ2V0IFwiJXNcIiBwYXJhbWV0ZXInLGUpfX0sci5wcm90b3R5cGUuYXV0aGVudGljYXRlPWZ1bmN0aW9uKGUsdCl7dmFyIG4scjtpZih0aGlzLmFsZ29yaXRobT10LmFsZ29yaXRobSx0aGlzLnJlYWxtPXQucmVhbG0sdGhpcy5ub25jZT10Lm5vbmNlLHRoaXMub3BhcXVlPXQub3BhcXVlLHRoaXMuc3RhbGU9dC5zdGFsZSx0aGlzLmFsZ29yaXRobSl7aWYoXCJNRDVcIiE9PXRoaXMuYWxnb3JpdGhtKXJldHVybiBsKCdhdXRoZW50aWNhdGUoKSB8IGNoYWxsZW5nZSB3aXRoIERpZ2VzdCBhbGdvcml0aG0gZGlmZmVyZW50IHRoYW4gXCJNRDVcIiwgYXV0aGVudGljYXRpb24gYWJvcnRlZCcpLCExfWVsc2UgdGhpcy5hbGdvcml0aG09XCJNRDVcIjtpZighdGhpcy5ub25jZSlyZXR1cm4gbChcImF1dGhlbnRpY2F0ZSgpIHwgY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IG5vbmNlLCBhdXRoZW50aWNhdGlvbiBhYm9ydGVkXCIpLCExO2lmKCF0aGlzLnJlYWxtKXJldHVybiBsKFwiYXV0aGVudGljYXRlKCkgfCBjaGFsbGVuZ2Ugd2l0aG91dCBEaWdlc3QgcmVhbG0sIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWRcIiksITE7aWYoIXRoaXMuY3JlZGVudGlhbHMucGFzc3dvcmQpe2lmKCF0aGlzLmNyZWRlbnRpYWxzLmhhMSlyZXR1cm4gbChcImF1dGhlbnRpY2F0ZSgpIHwgbm8gcGxhaW4gU0lQIHBhc3N3b3JkIG5vciBoYTEgcHJvdmlkZWQsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWRcIiksITE7aWYodGhpcy5jcmVkZW50aWFscy5yZWFsbSE9PXRoaXMucmVhbG0pcmV0dXJuIGwoJ2F1dGhlbnRpY2F0ZSgpIHwgbm8gcGxhaW4gU0lQIHBhc3N3b3JkLCBhbmQgc3RvcmVkIGByZWFsbWAgZG9lcyBub3QgbWF0Y2ggdGhlIGdpdmVuIGByZWFsbWAsIGNhbm5vdCBhdXRoZW50aWNhdGUgW3N0b3JlZDpcIiVzXCIsIGdpdmVuOlwiJXNcIl0nLHRoaXMuY3JlZGVudGlhbHMucmVhbG0sdGhpcy5yZWFsbSksITF9aWYodC5xb3ApaWYodC5xb3AuaW5kZXhPZihcImF1dGhcIik+LTEpdGhpcy5xb3A9XCJhdXRoXCI7ZWxzZXtpZighKHQucW9wLmluZGV4T2YoXCJhdXRoLWludFwiKT4tMSkpcmV0dXJuIGwoJ2F1dGhlbnRpY2F0ZSgpIHwgY2hhbGxlbmdlIHdpdGhvdXQgRGlnZXN0IHFvcCBkaWZmZXJlbnQgdGhhbiBcImF1dGhcIiBvciBcImF1dGgtaW50XCIsIGF1dGhlbnRpY2F0aW9uIGFib3J0ZWQnKSwhMTt0aGlzLnFvcD1cImF1dGgtaW50XCJ9ZWxzZSB0aGlzLnFvcD1udWxsO3JldHVybiB0aGlzLm1ldGhvZD1lLm1ldGhvZCx0aGlzLnVyaT1lLnJ1cmksdGhpcy5jbm9uY2U9aS5jcmVhdGVSYW5kb21Ub2tlbigxMiksdGhpcy5uYys9MSxyPU51bWJlcih0aGlzLm5jKS50b1N0cmluZygxNiksdGhpcy5uY0hleD1cIjAwMDAwMDAwXCIuc3Vic3RyKDAsOC1yLmxlbmd0aCkrciw0Mjk0OTY3Mjk2PT09dGhpcy5uYyYmKHRoaXMubmM9MSx0aGlzLm5jSGV4PVwiMDAwMDAwMDFcIiksdGhpcy5jcmVkZW50aWFscy5wYXNzd29yZD90aGlzLmhhMT1pLmNhbGN1bGF0ZU1ENSh0aGlzLmNyZWRlbnRpYWxzLnVzZXJuYW1lK1wiOlwiK3RoaXMucmVhbG0rXCI6XCIrdGhpcy5jcmVkZW50aWFscy5wYXNzd29yZCk6dGhpcy5oYTE9dGhpcy5jcmVkZW50aWFscy5oYTEsXCJhdXRoXCI9PT10aGlzLnFvcD8obj1pLmNhbGN1bGF0ZU1ENSh0aGlzLm1ldGhvZCtcIjpcIit0aGlzLnVyaSksdGhpcy5yZXNwb25zZT1pLmNhbGN1bGF0ZU1ENSh0aGlzLmhhMStcIjpcIit0aGlzLm5vbmNlK1wiOlwiK3RoaXMubmNIZXgrXCI6XCIrdGhpcy5jbm9uY2UrXCI6YXV0aDpcIituKSk6XCJhdXRoLWludFwiPT09dGhpcy5xb3A/KG49aS5jYWxjdWxhdGVNRDUodGhpcy5tZXRob2QrXCI6XCIrdGhpcy51cmkrXCI6XCIraS5jYWxjdWxhdGVNRDUodGhpcy5ib2R5P3RoaXMuYm9keTpcIlwiKSksdGhpcy5yZXNwb25zZT1pLmNhbGN1bGF0ZU1ENSh0aGlzLmhhMStcIjpcIit0aGlzLm5vbmNlK1wiOlwiK3RoaXMubmNIZXgrXCI6XCIrdGhpcy5jbm9uY2UrXCI6YXV0aC1pbnQ6XCIrbikpOm51bGw9PT10aGlzLnFvcCYmKG49aS5jYWxjdWxhdGVNRDUodGhpcy5tZXRob2QrXCI6XCIrdGhpcy51cmkpLHRoaXMucmVzcG9uc2U9aS5jYWxjdWxhdGVNRDUodGhpcy5oYTErXCI6XCIrdGhpcy5ub25jZStcIjpcIituKSkscyhcImF1dGhlbnRpY2F0ZSgpIHwgcmVzcG9uc2UgZ2VuZXJhdGVkXCIpLCEwfSxyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBlPVtdO2lmKCF0aGlzLnJlc3BvbnNlKXRocm93IG5ldyBFcnJvcihcInJlc3BvbnNlIGZpZWxkIGRvZXMgbm90IGV4aXN0LCBjYW5ub3QgZ2VuZXJhdGUgQXV0aG9yaXphdGlvbiBoZWFkZXJcIik7cmV0dXJuIGUucHVzaChcImFsZ29yaXRobT1cIit0aGlzLmFsZ29yaXRobSksZS5wdXNoKCd1c2VybmFtZT1cIicrdGhpcy5jcmVkZW50aWFscy51c2VybmFtZSsnXCInKSxlLnB1c2goJ3JlYWxtPVwiJyt0aGlzLnJlYWxtKydcIicpLGUucHVzaCgnbm9uY2U9XCInK3RoaXMubm9uY2UrJ1wiJyksZS5wdXNoKCd1cmk9XCInK3RoaXMudXJpKydcIicpLGUucHVzaCgncmVzcG9uc2U9XCInK3RoaXMucmVzcG9uc2UrJ1wiJyksdGhpcy5vcGFxdWUmJmUucHVzaCgnb3BhcXVlPVwiJyt0aGlzLm9wYXF1ZSsnXCInKSx0aGlzLnFvcCYmKGUucHVzaChcInFvcD1cIit0aGlzLnFvcCksZS5wdXNoKCdjbm9uY2U9XCInK3RoaXMuY25vbmNlKydcIicpLGUucHVzaChcIm5jPVwiK3RoaXMubmNIZXgpKSxcIkRpZ2VzdCBcIitlLmpvaW4oXCIsIFwiKX19LHtcIi4vVXRpbHNcIjoyNSxkZWJ1ZzozM31dLDU6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj17Q29uZmlndXJhdGlvbkVycm9yOmZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSx0KXt0aGlzLmNvZGU9MSx0aGlzLm5hbWU9XCJDT05GSUdVUkFUSU9OX0VSUk9SXCIsdGhpcy5wYXJhbWV0ZXI9ZSx0aGlzLnZhbHVlPXQsdGhpcy5tZXNzYWdlPXRoaXMudmFsdWU/XCJJbnZhbGlkIHZhbHVlIFwiK0pTT04uc3RyaW5naWZ5KHRoaXMudmFsdWUpKycgZm9yIHBhcmFtZXRlciBcIicrdGhpcy5wYXJhbWV0ZXIrJ1wiJzpcIk1pc3NpbmcgcGFyYW1ldGVyOiBcIit0aGlzLnBhcmFtZXRlcn07cmV0dXJuIGUucHJvdG90eXBlPW5ldyBFcnJvcixlfSgpLEludmFsaWRTdGF0ZUVycm9yOmZ1bmN0aW9uKCl7dmFyIGU9ZnVuY3Rpb24oZSl7dGhpcy5jb2RlPTIsdGhpcy5uYW1lPVwiSU5WQUxJRF9TVEFURV9FUlJPUlwiLHRoaXMuc3RhdHVzPWUsdGhpcy5tZXNzYWdlPVwiSW52YWxpZCBzdGF0dXM6IFwiK2V9O3JldHVybiBlLnByb3RvdHlwZT1uZXcgRXJyb3IsZX0oKSxOb3RTdXBwb3J0ZWRFcnJvcjpmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKGUpe3RoaXMuY29kZT0zLHRoaXMubmFtZT1cIk5PVF9TVVBQT1JURURfRVJST1JcIix0aGlzLm1lc3NhZ2U9ZX07cmV0dXJuIGUucHJvdG90eXBlPW5ldyBFcnJvcixlfSgpLE5vdFJlYWR5RXJyb3I6ZnVuY3Rpb24oKXt2YXIgZT1mdW5jdGlvbihlKXt0aGlzLmNvZGU9NCx0aGlzLm5hbWU9XCJOT1RfUkVBRFlfRVJST1JcIix0aGlzLm1lc3NhZ2U9ZX07cmV0dXJuIGUucHJvdG90eXBlPW5ldyBFcnJvcixlfSgpfTt0LmV4cG9ydHM9cn0se31dLDY6W2Z1bmN0aW9uKGUsdCxuKXt0LmV4cG9ydHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3JldHVybidcIicrZS5yZXBsYWNlKC9cXFxcL2csXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9cIi9nLCdcXFxcXCInKS5yZXBsYWNlKC9cXHgwOC9nLFwiXFxcXGJcIikucmVwbGFjZSgvXFx0L2csXCJcXFxcdFwiKS5yZXBsYWNlKC9cXG4vZyxcIlxcXFxuXCIpLnJlcGxhY2UoL1xcZi9nLFwiXFxcXGZcIikucmVwbGFjZSgvXFxyL2csXCJcXFxcclwiKS5yZXBsYWNlKC9bXFx4MDAtXFx4MDdcXHgwQlxceDBFLVxceDFGXFx4ODAtXFx1RkZGRl0vZyxlc2NhcGUpKydcIid9dmFyIG49e3BhcnNlOmZ1bmN0aW9uKG4scil7ZnVuY3Rpb24gcyhlKXtDcj5fcnx8KF9yPkNyJiYoQ3I9X3IsU3I9W10pLFNyLnB1c2goZSkpfWZ1bmN0aW9uIGwoKXt2YXIgZTtyZXR1cm5cIlxcclxcblwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCJcXHJcXG5cIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiXFxcXHJcXFxcblwiJykpLGV9ZnVuY3Rpb24gaSgpe3ZhciBlO3JldHVybi9eWzAtOV0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbMC05XVwiKSksZX1mdW5jdGlvbiBvKCl7dmFyIGU7cmV0dXJuL15bYS16QS1aXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlthLXpBLVpdXCIpKSxlfWZ1bmN0aW9uIHUoKXt2YXIgZTtyZXR1cm4vXlswLTlhLWZBLUZdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiWzAtOWEtZkEtRl1cIikpLGV9ZnVuY3Rpb24gYSgpe3ZhciBlO3JldHVybiBlPWQoKSxudWxsPT09ZSYmKGU9cCgpKSxlfWZ1bmN0aW9uIGMoKXt2YXIgZTtyZXR1cm4vXltcXDAtXFx4RkZdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiW1xcXFwwLVxcXFx4RkZdXCIpKSxlfWZ1bmN0aW9uIGgoKXt2YXIgZTtyZXR1cm4vXltcIl0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1tcIl0nKSksZX1mdW5jdGlvbiBkKCl7dmFyIGU7cmV0dXJuIDMyPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiBcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIgXCInKSksZX1mdW5jdGlvbiBwKCl7dmFyIGU7cmV0dXJuIDk9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiXHRcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJcXFxcdFwiJykpLGV9ZnVuY3Rpb24gZigpe3ZhciBlO3JldHVybi9eW2EtekEtWjAtOV0vLnRlc3Qobi5jaGFyQXQoX3IpKT8oZT1uLmNoYXJBdChfciksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoXCJbYS16QS1aMC05XVwiKSksZX1mdW5jdGlvbiBtKCl7dmFyIGU7cmV0dXJuIDU5PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjtcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbD09PWUmJig0Nz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIvXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGw9PT1lJiYoNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiP1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsPT09ZSYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjpcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PWUmJig2ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCJAXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGw9PT1lJiYoMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09ZSYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PWUmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIrXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT1lJiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSxudWxsPT09ZSYmKDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIixcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIsXCInKSkpKSkpKSkpKSksZX1mdW5jdGlvbiBnKCl7dmFyIGU7cmV0dXJuIGU9ZigpLG51bGw9PT1lJiYoZT1UKCkpLGV9ZnVuY3Rpb24gVCgpe3ZhciBlO3JldHVybiA0NT09PW4uY2hhckNvZGVBdChfcik/KGU9XCItXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT1lJiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiX1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSxudWxsPT09ZSYmKDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIi5cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbD09PWUmJigzMz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIhXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiIVwiJykpLG51bGw9PT1lJiYoMTI2PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIn5cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJ+XCInKSksbnVsbD09PWUmJig0Mj09PW4uY2hhckNvZGVBdChfcik/KGU9XCIqXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiKlwiJykpLG51bGw9PT1lJiYoMzk9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJ1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIlxcJ1wiJykpLG51bGw9PT1lJiYoNDA9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiKFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIihcIicpKSxudWxsPT09ZSYmKDQxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIilcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIpXCInKSkpKSkpKSkpKSxlfWZ1bmN0aW9uIF8oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsMzc9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiVcIicpKSxudWxsIT09ZT8odD11KCksbnVsbCE9PXQ/KHI9dSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3JldHVybiB0LmpvaW4oXCJcIil9KGwsZSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiB2KCl7dmFyIGUsdCxuLHIscyxpO2ZvcihyPV9yLHM9X3IsaT1fcixlPVtdLHQ9YSgpO251bGwhPT10OyllLnB1c2godCksdD1hKCk7aWYobnVsbCE9PWU/KHQ9bCgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxlPW51bGwhPT1lP2U6XCJcIixudWxsIT09ZSl7aWYobj1hKCksbnVsbCE9PW4pZm9yKHQ9W107bnVsbCE9PW47KXQucHVzaChuKSxuPWEoKTtlbHNlIHQ9bnVsbDtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiIFwifShyKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIEMoKXt2YXIgZTtyZXR1cm4gZT12KCksZT1udWxsIT09ZT9lOlwiXCJ9ZnVuY3Rpb24gUygpe3ZhciBlLHQscixsLGk7Zm9yKGw9X3IsaT1fcixlPVtdLHQ9ZCgpLG51bGw9PT10JiYodD1wKCkpO251bGwhPT10OyllLnB1c2godCksdD1kKCksbnVsbD09PXQmJih0PXAoKSk7cmV0dXJuIG51bGwhPT1lPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCI6XCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gRSgpe3ZhciBlLHQscixzLGwsaSxvO2lmKGw9X3IsaT1fcix0PUEoKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9QSgpO2Vsc2UgZT1udWxsO2lmKG51bGwhPT1lKXtmb3IodD1bXSxvPV9yLHI9W10scz12KCk7bnVsbCE9PXM7KXIucHVzaChzKSxzPXYoKTtmb3IobnVsbCE9PXI/KHM9QSgpLG51bGwhPT1zP3I9W3Isc106KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09cjspe2Zvcih0LnB1c2gociksbz1fcixyPVtdLHM9digpO251bGwhPT1zOylyLnB1c2gocykscz12KCk7bnVsbCE9PXI/KHM9QSgpLG51bGwhPT1zP3I9W3Isc106KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKX1udWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiBuLnN1YnN0cmluZyhfcixlKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBBKCl7dmFyIGU7cmV0dXJuL15bIS1+XS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlshLX5dXCIpKSxudWxsPT09ZSYmKGU9eSgpKSxlfWZ1bmN0aW9uIHkoKXt2YXIgZTtyZXR1cm4vXltcXHg4MC1cXHVGRkZGXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIltcXFxceDgwLVxcXFx1RkZGRl1cIikpLGV9ZnVuY3Rpb24gUigpe3ZhciBlO3JldHVybi9eW1xceDgwLVxceEJGXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIltcXFxceDgwLVxcXFx4QkZdXCIpKSxlfWZ1bmN0aW9uIGIoKXt2YXIgZTtyZXR1cm4gZT1pKCksbnVsbD09PWUmJigvXlthLWZdLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiW2EtZl1cIikpKSxlfWZ1bmN0aW9uIEkoKXt2YXIgZSx0LHI7aWYocj1fcix0PWYoKSxudWxsPT09dCYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXQmJig0Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIuXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGw9PT10JiYoMzM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiIVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiFcIicpKSxudWxsPT09dCYmKDM3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiVcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIlXCInKSksbnVsbD09PXQmJig0Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIqXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKlwiJykpLG51bGw9PT10JiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiX1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXQmJig5Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJgXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiYFwiJykpLG51bGw9PT10JiYoMzk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJ1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIlxcJ1wiJykpLG51bGw9PT10JiYoMTI2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIn5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ+XCInKSkpKSkpKSkpKSkpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1mKCksbnVsbD09PXQmJig0NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCItXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT10JiYoNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsPT09dCYmKDMzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiFcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIhXCInKSksbnVsbD09PXQmJigzNz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIlXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJVwiJykpLG51bGw9PT10JiYoNDI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIipcIicpKSxudWxsPT09dCYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIl9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJfXCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT10JiYoOTY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiYFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcImBcIicpKSxudWxsPT09dCYmKDM5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIidcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJcXCdcIicpKSxudWxsPT09dCYmKDEyNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ+XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiflwiJykpKSkpKSkpKSkpKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiBuLnN1YnN0cmluZyhfcixlKX0ocikpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiB3KCl7dmFyIGUsdCxyO2lmKHI9X3IsdD1mKCksbnVsbD09PXQmJig0NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCItXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT10JiYoMzM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiIVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiFcIicpKSxudWxsPT09dCYmKDM3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiVcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIlXCInKSksbnVsbD09PXQmJig0Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIqXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKlwiJykpLG51bGw9PT10JiYoOTU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiX1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIl9cIicpKSxudWxsPT09dCYmKDQzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIitcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIrXCInKSksbnVsbD09PXQmJig5Nj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJgXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiYFwiJykpLG51bGw9PT10JiYoMzk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJ1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIlxcJ1wiJykpLG51bGw9PT10JiYoMTI2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIn5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ+XCInKSkpKSkpKSkpKSksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWYoKSxudWxsPT09dCYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXQmJigzMz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIhXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiIVwiJykpLG51bGw9PT10JiYoMzc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiVcIicpKSxudWxsPT09dCYmKDQyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIipcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIqXCInKSksbnVsbD09PXQmJig5NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJfXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09dCYmKDk2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cImBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJgXCInKSksbnVsbD09PXQmJigzOT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCInXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXFwnXCInKSksbnVsbD09PXQmJigxMjY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiflwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIn5cIicpKSkpKSkpKSkpKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiBuLnN1YnN0cmluZyhfcixlKX0ocikpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBOKCl7dmFyIGU7cmV0dXJuIDQwPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIihcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIoXCInKSksbnVsbD09PWUmJig0MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCIpXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiKVwiJykpLG51bGw9PT1lJiYoNjA9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiPFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjxcIicpKSxudWxsPT09ZSYmKDYyPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj5cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI+XCInKSksbnVsbD09PWUmJig2ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCJAXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGw9PT1lJiYoNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiLFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIixcIicpKSxudWxsPT09ZSYmKDU5PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjtcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbD09PWUmJig1OD09PW4uY2hhckNvZGVBdChfcik/KGU9XCI6XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT1lJiYoOTI9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiXFxcXFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIlxcXFxcXFxcXCInKSksbnVsbD09PWUmJihlPWgoKSxudWxsPT09ZSYmKDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIi9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbD09PWUmJig5MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCJbXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiW1wiJykpLG51bGw9PT1lJiYoOTM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiXVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIl1cIicpKSxudWxsPT09ZSYmKDYzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbD09PWUmJig2MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI9XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT1lJiYoMTIzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIntcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJ7XCInKSksbnVsbD09PWUmJigxMjU9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwifVwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIn1cIicpKSxudWxsPT09ZSYmKGU9ZCgpLG51bGw9PT1lJiYoZT1wKCkpKSkpKSkpKSkpKSkpKSkpKSksZX1mdW5jdGlvbiBEKCl7dmFyIGUsdCxyO2lmKHI9X3IsdD1mKCksbnVsbD09PXQmJig0NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCItXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGw9PT10JiYoNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsPT09dCYmKDMzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiFcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIhXCInKSksbnVsbD09PXQmJigzNz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIlXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiJVwiJykpLG51bGw9PT10JiYoNDI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIipcIicpKSxudWxsPT09dCYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIl9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJfXCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT10JiYoOTY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiYFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcImBcIicpKSxudWxsPT09dCYmKDM5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIidcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJcXCdcIicpKSxudWxsPT09dCYmKDEyNj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ+XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiflwiJykpLG51bGw9PT10JiYoNDA9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIihcIicpKSxudWxsPT09dCYmKDQxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIilcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIpXCInKSksbnVsbD09PXQmJig2MD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI8XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPFwiJykpLG51bGw9PT10JiYoNjI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj5cIicpKSxudWxsPT09dCYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PXQmJig5Mj09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJcXFxcXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXFxcXFxcXFxcIicpKSxudWxsPT09dCYmKHQ9aCgpLG51bGw9PT10JiYoNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiL1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsPT09dCYmKDkxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIltcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJbXCInKSksbnVsbD09PXQmJig5Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJdXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXVwiJykpLG51bGw9PT10JiYoNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiP1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsPT09dCYmKDEyMz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ7XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wie1wiJykpLG51bGw9PT10JiYoMTI1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIn1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJ9XCInKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9ZigpLG51bGw9PT10JiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09dCYmKDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbD09PXQmJigzMz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIhXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiIVwiJykpLG51bGw9PT10JiYoMzc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiVcIicpKSxudWxsPT09dCYmKDQyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIipcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIqXCInKSksbnVsbD09PXQmJig5NT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJfXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiX1wiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09dCYmKDk2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cImBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJgXCInKSksbnVsbD09PXQmJigzOT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCInXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiXFwnXCInKSksbnVsbD09PXQmJigxMjY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiflwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIn5cIicpKSxudWxsPT09dCYmKDQwPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIihcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIoXCInKSksbnVsbD09PXQmJig0MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIpXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiKVwiJykpLG51bGw9PT10JiYoNjA9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjxcIicpKSxudWxsPT09dCYmKDYyPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI+XCInKSksbnVsbD09PXQmJig1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT10JiYoOTI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiXFxcXFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIlxcXFxcXFxcXCInKSksbnVsbD09PXQmJih0PWgoKSxudWxsPT09dCYmKDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbD09PXQmJig5MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJbXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiW1wiJykpLG51bGw9PT10JiYoOTM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiXVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIl1cIicpKSxudWxsPT09dCYmKDYzPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbD09PXQmJigxMjM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwie1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIntcIicpKSxudWxsPT09dCYmKDEyNT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJ9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wifVwiJykpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4gbi5zdWJzdHJpbmcoX3IsZSl9KHIpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gTygpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZT8oNDI9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIipcIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiKlwifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIHgoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWU/KDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi9cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIi9cIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBVKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9QygpLG51bGwhPT1lPyg2MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCI9XCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gTSgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZT8oNDA9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiKFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIihcIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiKFwifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIFAoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWU/KDQxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIilcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIpXCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIilcIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBxKCl7dmFyIGUsdCxyLGw7cmV0dXJuIHI9X3IsbD1fciw2Mj09PW4uY2hhckNvZGVBdChfcik/KGU9XCI+XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiPlwiJykpLG51bGwhPT1lPyh0PUMoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiPlwifShyKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIEwoKXt2YXIgZSx0LHIsbDtyZXR1cm4gcj1fcixsPV9yLGU9QygpLG51bGwhPT1lPyg2MD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI8XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPFwiJykpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCI8XCJ9KHIpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gaygpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZT8oNDQ9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLFwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIixcIicpKSxudWxsIT09dD8ocj1DKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVyblwiLFwifShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEgoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1DKCksbnVsbCE9PWU/KDU5PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjtcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI7XCInKSksbnVsbCE9PXQ/KHI9QygpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm5cIjtcIn0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBGKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLGU9QygpLG51bGwhPT1lPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPUMoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuXCI6XCJ9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gRygpe3ZhciBlLHQsbixyO3JldHVybiBuPV9yLHI9X3IsZT1DKCksbnVsbCE9PWU/KHQ9aCgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuJ1wiJ30obikpLG51bGw9PT1lJiYoX3I9biksZX1mdW5jdGlvbiBqKCl7dmFyIGUsdCxuLHI7cmV0dXJuIG49X3Iscj1fcixlPWgoKSxudWxsIT09ZT8odD1DKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4nXCInfShuKSksbnVsbD09PWUmJihfcj1uKSxlfWZ1bmN0aW9uIFcoKXt2YXIgZSx0LG4scjtpZihyPV9yLGU9TSgpLG51bGwhPT1lKXtmb3IodD1bXSxuPUIoKSxudWxsPT09biYmKG49SigpLG51bGw9PT1uJiYobj1XKCkpKTtudWxsIT09bjspdC5wdXNoKG4pLG49QigpLG51bGw9PT1uJiYobj1KKCksbnVsbD09PW4mJihuPVcoKSkpO251bGwhPT10PyhuPVAoKSxudWxsIT09bj9lPVtlLHQsbl06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKX1lbHNlIGU9bnVsbCxfcj1yO3JldHVybiBlfWZ1bmN0aW9uIEIoKXt2YXIgZTtyZXR1cm4vXlshLSddLy50ZXN0KG4uY2hhckF0KF9yKSk/KGU9bi5jaGFyQXQoX3IpLF9yKyspOihlPW51bGwsMD09PXZyJiZzKFwiWyEtJ11cIikpLG51bGw9PT1lJiYoL15bKi1bXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlsqLVtdXCIpKSxudWxsPT09ZSYmKC9eW1xcXS1+XS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIltcXFxcXS1+XVwiKSksbnVsbD09PWUmJihlPXkoKSxudWxsPT09ZSYmKGU9digpKSkpKSxlfWZ1bmN0aW9uIHooKXt2YXIgZSx0LHIscyxsLGk7aWYobD1fcixpPV9yLGU9QygpLG51bGwhPT1lKWlmKHQ9aCgpLG51bGwhPT10KXtmb3Iocj1bXSxzPVkoKSxudWxsPT09cyYmKHM9SigpKTtudWxsIT09czspci5wdXNoKHMpLHM9WSgpLG51bGw9PT1zJiYocz1KKCkpO251bGwhPT1yPyhzPWgoKSxudWxsIT09cz9lPVtlLHQscixzXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiBuLnN1YnN0cmluZyhfcixlKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBWKCl7dmFyIGUsdCxyLHMsbCxpO2lmKGw9X3IsaT1fcixlPUMoKSxudWxsIT09ZSlpZih0PWgoKSxudWxsIT09dCl7Zm9yKHI9W10scz1ZKCksbnVsbD09PXMmJihzPUooKSk7bnVsbCE9PXM7KXIucHVzaChzKSxzPVkoKSxudWxsPT09cyYmKHM9SigpKTtudWxsIT09cj8ocz1oKCksbnVsbCE9PXM/ZT1bZSx0LHIsc106KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO2Vsc2UgZT1udWxsLF9yPWk7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4gbi5zdWJzdHJpbmcoX3ItMSxlKzEpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIFkoKXt2YXIgZTtyZXR1cm4gZT12KCksbnVsbD09PWUmJigzMz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIhXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiIVwiJykpLG51bGw9PT1lJiYoL15bIy1bXS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlsjLVtdXCIpKSxudWxsPT09ZSYmKC9eW1xcXS1+XS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIltcXFxcXS1+XVwiKSksbnVsbD09PWUmJihlPXkoKSkpKSksZX1mdW5jdGlvbiBKKCl7dmFyIGUsdCxyO3JldHVybiByPV9yLDkyPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIlxcXFxcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJcXFxcXFxcXFwiJykpLG51bGwhPT1lPygvXltcXDAtXFx0XS8udGVzdChuLmNoYXJBdChfcikpPyh0PW4uY2hhckF0KF9yKSxfcisrKToodD1udWxsLDA9PT12ciYmcyhcIltcXFxcMC1cXFxcdF1cIikpLG51bGw9PT10JiYoL15bXFx4MEItXFxmXS8udGVzdChuLmNoYXJBdChfcikpPyh0PW4uY2hhckF0KF9yKSxfcisrKToodD1udWxsLDA9PT12ciYmcyhcIltcXFxceDBCLVxcXFxmXVwiKSksbnVsbD09PXQmJigvXltcXHgwRS1/XS8udGVzdChuLmNoYXJBdChfcikpPyh0PW4uY2hhckF0KF9yKSxfcisrKToodD1udWxsLDA9PT12ciYmcyhcIltcXFxceDBFLX9dXCIpKSkpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIEsoKXt2YXIgZSx0LHIsbCxpLG87cmV0dXJuIGk9X3Isbz1fcixlPVgoKSxudWxsIT09ZT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1lZSgpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhsPXNlKCksbnVsbCE9PWw/ZT1bZSx0LHIsbF06KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSk6KGU9bnVsbCxfcj1vKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dHJ5e3lyLnVyaT1uZXcgRXIoeXIuc2NoZW1lLHlyLnVzZXIseXIuaG9zdCx5ci5wb3J0KSxkZWxldGUgeXIuc2NoZW1lLGRlbGV0ZSB5ci51c2VyLGRlbGV0ZSB5ci5ob3N0LGRlbGV0ZSB5ci5ob3N0X3R5cGUsZGVsZXRlIHlyLnBvcnR9Y2F0Y2godCl7eXI9LTF9fShpKSksbnVsbD09PWUmJihfcj1pKSxlfWZ1bmN0aW9uICQoKXt2YXIgZSx0LGwsaSxvLHUsYSxjO3JldHVybiBhPV9yLGM9X3IsZT1YKCksbnVsbCE9PWU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KGw9ZWUoKSxsPW51bGwhPT1sP2w6XCJcIixudWxsIT09bD8oaT1zZSgpLG51bGwhPT1pPyhvPWdlKCksbnVsbCE9PW8/KHU9TmUoKSx1PW51bGwhPT11P3U6XCJcIixudWxsIT09dT9lPVtlLHQsbCxpLG8sdV06KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSk6KGU9bnVsbCxfcj1jKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dHJ5e3lyLnVyaT1uZXcgRXIoeXIuc2NoZW1lLHlyLnVzZXIseXIuaG9zdCx5ci5wb3J0LHlyLnVyaV9wYXJhbXMseXIudXJpX2hlYWRlcnMpLGRlbGV0ZSB5ci5zY2hlbWUsZGVsZXRlIHlyLnVzZXIsZGVsZXRlIHlyLmhvc3QsZGVsZXRlIHlyLmhvc3RfdHlwZSxkZWxldGUgeXIucG9ydCxkZWxldGUgeXIudXJpX3BhcmFtcyxcIlNJUF9VUklcIj09PXImJih5cj15ci51cmkpfWNhdGNoKHQpe3lyPS0xfX0oYSkpLG51bGw9PT1lJiYoX3I9YSksZX1mdW5jdGlvbiBYKCl7dmFyIGU7cmV0dXJuIGU9USgpLG51bGw9PT1lJiYoZT1aKCkpLGV9ZnVuY3Rpb24gUSgpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsXCJzaXBzXCI9PT1uLnN1YnN0cihfciw0KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDQpLF9yKz00KTooZT1udWxsLDA9PT12ciYmcygnXCJzaXBzXCInKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuc2NoZW1lPXQudG9Mb3dlckNhc2UoKX0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIFooKXt2YXIgZSx0O3JldHVybiB0PV9yLFwic2lwXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJzaXBcIicpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5zY2hlbWU9dC50b0xvd2VyQ2FzZSgpfSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gZWUoKXt2YXIgZSx0LHIsbCxpLG87cmV0dXJuIGw9X3IsaT1fcixlPXRlKCksbnVsbCE9PWU/KG89X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1yZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1vKSk6KHQ9bnVsbCxfcj1vKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8oNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiQFwiLFxuX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci51c2VyPWRlY29kZVVSSUNvbXBvbmVudChuLnN1YnN0cmluZyhfci0xLGUpKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiB0ZSgpe3ZhciBlLHQ7aWYodD1nKCksbnVsbD09PXQmJih0PV8oKSxudWxsPT09dCYmKHQ9bmUoKSkpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1nKCksbnVsbD09PXQmJih0PV8oKSxudWxsPT09dCYmKHQ9bmUoKSkpO2Vsc2UgZT1udWxsO3JldHVybiBlfWZ1bmN0aW9uIG5lKCl7dmFyIGU7cmV0dXJuIDM4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiZcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PWUmJig2MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI9XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT1lJiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiK1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09ZSYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiRcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIkXCInKSksbnVsbD09PWUmJig0ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCIsXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpLG51bGw9PT1lJiYoNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiO1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsPT09ZSYmKDYzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbD09PWUmJig0Nz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIvXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpKSkpKSkpKSxlfWZ1bmN0aW9uIHJlKCl7dmFyIGUsdCxyO2ZvcihyPV9yLGU9W10sdD1nKCksbnVsbD09PXQmJih0PV8oKSxudWxsPT09dCYmKDM4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiZcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PXQmJig2MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09dCYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiRcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIkXCInKSksbnVsbD09PXQmJig0ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIsXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpKSkpKSkpO251bGwhPT10OyllLnB1c2godCksdD1nKCksbnVsbD09PXQmJih0PV8oKSxudWxsPT09dCYmKDM4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiZcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PXQmJig2MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT10JiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiK1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09dCYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiRcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIkXCInKSksbnVsbD09PXQmJig0ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIsXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpKSkpKSkpO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIucGFzc3dvcmQ9bi5zdWJzdHJpbmcoX3IsZSl9KHIpKSxudWxsPT09ZSYmKF9yPXIpLGV9ZnVuY3Rpb24gc2UoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGU9bGUoKSxudWxsIT09ZT8oaT1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPW1lKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPWkpKToodD1udWxsLF9yPWkpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIGxlKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPWllKCksbnVsbD09PWUmJihlPXBlKCksbnVsbD09PWUmJihlPWFlKCkpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHlyLmhvc3Q9bi5zdWJzdHJpbmcoX3IsZSkudG9Mb3dlckNhc2UoKSx5ci5ob3N0fSh0KSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIGllKCl7dmFyIGUsdCxyLGwsaSxvO2ZvcihsPV9yLGk9X3IsZT1bXSxvPV9yLHQ9b2UoKSxudWxsIT09dD8oNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bykpOih0PW51bGwsX3I9byk7bnVsbCE9PXQ7KWUucHVzaCh0KSxvPV9yLHQ9b2UoKSxudWxsIT09dD8oNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bykpOih0PW51bGwsX3I9byk7cmV0dXJuIG51bGwhPT1lPyh0PXVlKCksbnVsbCE9PXQ/KDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi5cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIuXCInKSkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiB5ci5ob3N0X3R5cGU9XCJkb21haW5cIixuLnN1YnN0cmluZyhfcixlKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBvZSgpe3ZhciBlLHQscixsO2lmKGw9X3IsZT1mKCksbnVsbCE9PWUpe2Zvcih0PVtdLHI9ZigpLG51bGw9PT1yJiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLVwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09ciYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIl9cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCJfXCInKSkpKTtudWxsIT09cjspdC5wdXNoKHIpLHI9ZigpLG51bGw9PT1yJiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLVwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09ciYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIl9cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCJfXCInKSkpKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gZX1mdW5jdGlvbiB1ZSgpe3ZhciBlLHQscixsO2lmKGw9X3IsZT1vKCksbnVsbCE9PWUpe2Zvcih0PVtdLHI9ZigpLG51bGw9PT1yJiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLVwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09ciYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIl9cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCJfXCInKSkpKTtudWxsIT09cjspdC5wdXNoKHIpLHI9ZigpLG51bGw9PT1yJiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLVwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09ciYmKDk1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIl9cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCJfXCInKSkpKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gZX1mdW5jdGlvbiBhZSgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fciw5MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCJbXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiW1wiJykpLG51bGwhPT1lPyh0PWNlKCksbnVsbCE9PXQ/KDkzPT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIl1cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCJdXCInKSksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiB5ci5ob3N0X3R5cGU9XCJJUHY2XCIsbi5zdWJzdHJpbmcoX3IsZSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gY2UoKXt2YXIgZSx0LHIsbCxpLG8sdSxhLGMsaCxkLHAsZixtLGcsVDtyZXR1cm4gbT1fcixnPV9yLGU9aGUoKSxudWxsIT09ZT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGw9XCI6XCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1sPyhpPWhlKCksbnVsbCE9PWk/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIjpcIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PW8/KHU9aGUoKSxudWxsIT09dT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhhPVwiOlwiLF9yKyspOihhPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09YT8oYz1oZSgpLG51bGwhPT1jPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGg9XCI6XCIsX3IrKyk6KGg9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1oPyhkPWhlKCksbnVsbCE9PWQ/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocD1cIjpcIixfcisrKToocD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXA/KGY9ZGUoKSxudWxsIT09Zj9lPVtlLHQscixsLGksbyx1LGEsYyxoLGQscCxmXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIjo6XCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWU/KHQ9aGUoKSxudWxsIT09dD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGk9XCI6XCIsX3IrKyk6KGk9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1pPyhvPWhlKCksbnVsbCE9PW8/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odT1cIjpcIixfcisrKToodT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXU/KGE9aGUoKSxudWxsIT09YT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhjPVwiOlwiLF9yKyspOihjPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09Yz8oaD1oZSgpLG51bGwhPT1oPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGQ9XCI6XCIsX3IrKyk6KGQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1kPyhwPWRlKCksbnVsbCE9PXA/ZT1bZSx0LHIsbCxpLG8sdSxhLGMsaCxkLHBdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiOjpcIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09ZT8odD1oZSgpLG51bGwhPT10Pyg1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaT1cIjpcIixfcisrKTooaT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWk/KG89aGUoKSxudWxsIT09bz8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh1PVwiOlwiLF9yKyspOih1PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dT8oYT1oZSgpLG51bGwhPT1hPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGM9XCI6XCIsX3IrKyk6KGM9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1jPyhoPWRlKCksbnVsbCE9PWg/ZT1bZSx0LHIsbCxpLG8sdSxhLGMsaF06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCI6OlwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1lPyh0PWhlKCksbnVsbCE9PXQ/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhpPVwiOlwiLF9yKyspOihpPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aT8obz1oZSgpLG51bGwhPT1vPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHU9XCI6XCIsX3IrKyk6KHU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT11PyhhPWRlKCksbnVsbCE9PWE/ZT1bZSx0LHIsbCxpLG8sdSxhXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIjo6XCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWU/KHQ9aGUoKSxudWxsIT09dD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiOlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09cj8obD1oZSgpLG51bGwhPT1sPyg1OD09PW4uY2hhckNvZGVBdChfcik/KGk9XCI6XCIsX3IrKyk6KGk9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1pPyhvPWRlKCksbnVsbCE9PW8/ZT1bZSx0LHIsbCxpLG9dOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLFwiOjpcIj09PW4uc3Vic3RyKF9yLDIpPyhlPVwiOjpcIixfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wiOjpcIicpKSxudWxsIT09ZT8odD1oZSgpLG51bGwhPT10Pyg1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWRlKCksbnVsbCE9PWw/ZT1bZSx0LHIsbF06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSxudWxsPT09ZSYmKGc9X3IsXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCI6OlwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1lPyh0PWRlKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8oZT1cIjo6XCIsX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWU/KHQ9aGUoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLGU9aGUoKSxudWxsIT09ZT8oXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KHQ9XCI6OlwiLF9yKz0yKToodD1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIjpcIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWw/KGk9aGUoKSxudWxsIT09aT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiOlwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bz8odT1oZSgpLG51bGwhPT11Pyg1OD09PW4uY2hhckNvZGVBdChfcik/KGE9XCI6XCIsX3IrKyk6KGE9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1hPyhjPWhlKCksbnVsbCE9PWM/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oaD1cIjpcIixfcisrKTooaD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWg/KGQ9ZGUoKSxudWxsIT09ZD9lPVtlLHQscixsLGksbyx1LGEsYyxoLGRdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLGU9aGUoKSxudWxsIT09ZT8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPVQpKToodD1udWxsLF9yPVQpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8ocj1cIjo6XCIsX3IrPTIpOihyPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhpPVwiOlwiLF9yKyspOihpPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aT8obz1oZSgpLG51bGwhPT1vPyg1OD09PW4uY2hhckNvZGVBdChfcik/KHU9XCI6XCIsX3IrKyk6KHU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT11PyhhPWhlKCksbnVsbCE9PWE/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oYz1cIjpcIixfcisrKTooYz1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWM/KGg9ZGUoKSxudWxsIT09aD9lPVtlLHQscixsLGksbyx1LGEsYyxoXTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixlPWhlKCksbnVsbCE9PWU/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1UKSk6KHQ9bnVsbCxfcj1UKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPVQpKToocj1udWxsLF9yPVQpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8obD1cIjo6XCIsX3IrPTIpOihsPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PWw/KGk9aGUoKSxudWxsIT09aT8oNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhvPVwiOlwiLF9yKyspOihvPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bz8odT1oZSgpLG51bGwhPT11Pyg1OD09PW4uY2hhckNvZGVBdChfcik/KGE9XCI6XCIsX3IrKyk6KGE9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1hPyhjPWRlKCksbnVsbCE9PWM/ZT1bZSx0LHIsbCxpLG8sdSxhLGNdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLGU9aGUoKSxudWxsIT09ZT8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPVQpKToodD1udWxsLF9yPVQpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9VCkpOihyPW51bGwsX3I9VCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiOlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bD8oaT1oZSgpLG51bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj1UKSk6KGw9bnVsbCxfcj1UKSxsPW51bGwhPT1sP2w6XCJcIixudWxsIT09bD8oXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGk9XCI6OlwiLF9yKz0yKTooaT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1pPyhvPWhlKCksbnVsbCE9PW8/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odT1cIjpcIixfcisrKToodT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXU/KGE9ZGUoKSxudWxsIT09YT9lPVtlLHQscixsLGksbyx1LGFdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLGU9aGUoKSxudWxsIT09ZT8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPVQpKToodD1udWxsLF9yPVQpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9VCkpOihyPW51bGwsX3I9VCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiOlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bD8oaT1oZSgpLG51bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj1UKSk6KGw9bnVsbCxfcj1UKSxsPW51bGwhPT1sP2w6XCJcIixudWxsIT09bD8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KGk9XCI6XCIsX3IrKyk6KGk9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1pPyhvPWhlKCksbnVsbCE9PW8/aT1baSxvXTooaT1udWxsLF9yPVQpKTooaT1udWxsLF9yPVQpLGk9bnVsbCE9PWk/aTpcIlwiLG51bGwhPT1pPyhcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8obz1cIjo6XCIsX3IrPTIpOihvPW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PW8/KHU9ZGUoKSxudWxsIT09dT9lPVtlLHQscixsLGksbyx1XTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpKTooZT1udWxsLF9yPWcpLG51bGw9PT1lJiYoZz1fcixlPWhlKCksbnVsbCE9PWU/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiOlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dD8ocj1oZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1UKSk6KHQ9bnVsbCxfcj1UKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHI9XCI6XCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1yPyhsPWhlKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPVQpKToocj1udWxsLF9yPVQpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obD1cIjpcIixfcisrKToobD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PWw/KGk9aGUoKSxudWxsIT09aT9sPVtsLGldOihsPW51bGwsX3I9VCkpOihsPW51bGwsX3I9VCksbD1udWxsIT09bD9sOlwiXCIsbnVsbCE9PWw/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhpPVwiOlwiLF9yKyspOihpPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09aT8obz1oZSgpLG51bGwhPT1vP2k9W2ksb106KGk9bnVsbCxfcj1UKSk6KGk9bnVsbCxfcj1UKSxpPW51bGwhPT1pP2k6XCJcIixudWxsIT09aT8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KG89XCI6XCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1vPyh1PWhlKCksbnVsbCE9PXU/bz1bbyx1XToobz1udWxsLF9yPVQpKToobz1udWxsLF9yPVQpLG89bnVsbCE9PW8/bzpcIlwiLG51bGwhPT1vPyhcIjo6XCI9PT1uLnN1YnN0cihfciwyKT8odT1cIjo6XCIsX3IrPTIpOih1PW51bGwsMD09PXZyJiZzKCdcIjo6XCInKSksbnVsbCE9PXU/KGE9aGUoKSxudWxsIT09YT9lPVtlLHQscixsLGksbyx1LGFdOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZykpOihlPW51bGwsX3I9ZyksbnVsbD09PWUmJihnPV9yLGU9aGUoKSxudWxsIT09ZT8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI6XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT10PyhyPWhlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPVQpKToodD1udWxsLF9yPVQpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10PyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIjpcIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXI/KGw9aGUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9VCkpOihyPW51bGwsX3I9VCkscj1udWxsIT09cj9yOlwiXCIsbnVsbCE9PXI/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiOlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09bD8oaT1oZSgpLG51bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj1UKSk6KGw9bnVsbCxfcj1UKSxsPW51bGwhPT1sP2w6XCJcIixudWxsIT09bD8oVD1fciw1OD09PW4uY2hhckNvZGVBdChfcik/KGk9XCI6XCIsX3IrKyk6KGk9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGwhPT1pPyhvPWhlKCksbnVsbCE9PW8/aT1baSxvXTooaT1udWxsLF9yPVQpKTooaT1udWxsLF9yPVQpLGk9bnVsbCE9PWk/aTpcIlwiLG51bGwhPT1pPyhUPV9yLDU4PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIjpcIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PW8/KHU9aGUoKSxudWxsIT09dT9vPVtvLHVdOihvPW51bGwsX3I9VCkpOihvPW51bGwsX3I9VCksbz1udWxsIT09bz9vOlwiXCIsbnVsbCE9PW8/KFQ9X3IsNTg9PT1uLmNoYXJDb2RlQXQoX3IpPyh1PVwiOlwiLF9yKyspOih1PW51bGwsMD09PXZyJiZzKCdcIjpcIicpKSxudWxsIT09dT8oYT1oZSgpLG51bGwhPT1hP3U9W3UsYV06KHU9bnVsbCxfcj1UKSk6KHU9bnVsbCxfcj1UKSx1PW51bGwhPT11P3U6XCJcIixudWxsIT09dT8oXCI6OlwiPT09bi5zdWJzdHIoX3IsMik/KGE9XCI6OlwiLF9yKz0yKTooYT1udWxsLDA9PT12ciYmcygnXCI6OlwiJykpLG51bGwhPT1hP2U9W2UsdCxyLGwsaSxvLHUsYV06KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSk6KGU9bnVsbCxfcj1nKSkpKSkpKSkpKSkpKSkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4geXIuaG9zdF90eXBlPVwiSVB2NlwiLG4uc3Vic3RyaW5nKF9yLGUpfShtKSksbnVsbD09PWUmJihfcj1tKSxlfWZ1bmN0aW9uIGhlKCl7dmFyIGUsdCxuLHIscztyZXR1cm4gcz1fcixlPXUoKSxudWxsIT09ZT8odD11KCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KG49dSgpLG49bnVsbCE9PW4/bjpcIlwiLG51bGwhPT1uPyhyPXUoKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj9lPVtlLHQsbixyXTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpLGV9ZnVuY3Rpb24gZGUoKXt2YXIgZSx0LHIsbDtyZXR1cm4gbD1fcixlPWhlKCksbnVsbCE9PWU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9aGUoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsPT09ZSYmKGU9cGUoKSksZX1mdW5jdGlvbiBwZSgpe3ZhciBlLHQscixsLGksbyx1LGEsYztyZXR1cm4gYT1fcixjPV9yLGU9ZmUoKSxudWxsIT09ZT8oNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiLlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09dD8ocj1mZSgpLG51bGwhPT1yPyg0Nj09PW4uY2hhckNvZGVBdChfcik/KGw9XCIuXCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT1sPyhpPWZlKCksbnVsbCE9PWk/KDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIi5cIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PW8/KHU9ZmUoKSxudWxsIT09dT9lPVtlLHQscixsLGksbyx1XTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpKTooZT1udWxsLF9yPWMpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4geXIuaG9zdF90eXBlPVwiSVB2NFwiLG4uc3Vic3RyaW5nKF9yLGUpfShhKSksbnVsbD09PWUmJihfcj1hKSxlfWZ1bmN0aW9uIGZlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIGw9X3IsXCIyNVwiPT09bi5zdWJzdHIoX3IsMik/KGU9XCIyNVwiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCIyNVwiJykpLG51bGwhPT1lPygvXlswLTVdLy50ZXN0KG4uY2hhckF0KF9yKSk/KHQ9bi5jaGFyQXQoX3IpLF9yKyspOih0PW51bGwsMD09PXZyJiZzKFwiWzAtNV1cIikpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsPT09ZSYmKGw9X3IsNTA9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiMlwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjJcIicpKSxudWxsIT09ZT8oL15bMC00XS8udGVzdChuLmNoYXJBdChfcikpPyh0PW4uY2hhckF0KF9yKSxfcisrKToodD1udWxsLDA9PT12ciYmcyhcIlswLTRdXCIpKSxudWxsIT09dD8ocj1pKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbD09PWUmJihsPV9yLDQ5PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjFcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIxXCInKSksbnVsbCE9PWU/KHQ9aSgpLG51bGwhPT10PyhyPWkoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsPT09ZSYmKGw9X3IsL15bMS05XS8udGVzdChuLmNoYXJBdChfcikpPyhlPW4uY2hhckF0KF9yKSxfcisrKTooZT1udWxsLDA9PT12ciYmcyhcIlsxLTldXCIpKSxudWxsIT09ZT8odD1pKCksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGw9PT1lJiYoZT1pKCkpKSkpLGV9ZnVuY3Rpb24gbWUoKXt2YXIgZSx0LG4scixzLGwsbztyZXR1cm4gbD1fcixvPV9yLGU9aSgpLGU9bnVsbCE9PWU/ZTpcIlwiLG51bGwhPT1lPyh0PWkoKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8obj1pKCksbj1udWxsIT09bj9uOlwiXCIsbnVsbCE9PW4/KHI9aSgpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhzPWkoKSxzPW51bGwhPT1zP3M6XCJcIixudWxsIT09cz9lPVtlLHQsbixyLHNdOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9bykpOihlPW51bGwsX3I9byksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9cGFyc2VJbnQodC5qb2luKFwiXCIpKSx5ci5wb3J0PXQsdH0obCxlKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIGdlKCl7dmFyIGUsdCxyLGw7Zm9yKGU9W10sbD1fciw1OT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI7XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGwhPT10PyhyPVRlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPWwpKToodD1udWxsLF9yPWwpO251bGwhPT10OyllLnB1c2godCksbD1fciw1OT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI7XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiO1wiJykpLG51bGwhPT10PyhyPVRlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPWwpKToodD1udWxsLF9yPWwpO3JldHVybiBlfWZ1bmN0aW9uIFRlKCl7dmFyIGU7cmV0dXJuIGU9X2UoKSxudWxsPT09ZSYmKGU9dmUoKSxudWxsPT09ZSYmKGU9Q2UoKSxudWxsPT09ZSYmKGU9U2UoKSxudWxsPT09ZSYmKGU9RWUoKSxudWxsPT09ZSYmKGU9QWUoKSxudWxsPT09ZSYmKGU9eWUoKSkpKSkpKSxlfWZ1bmN0aW9uIF9lKCl7dmFyIGUsdCxyLGw7cmV0dXJuIHI9X3IsbD1fcixcInRyYW5zcG9ydD1cIj09PW4uc3Vic3RyKF9yLDEwKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDEwKSxfcis9MTApOihlPW51bGwsMD09PXZyJiZzKCdcInRyYW5zcG9ydD1cIicpKSxudWxsIT09ZT8oXCJ1ZHBcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KHQ9bi5zdWJzdHIoX3IsMyksX3IrPTMpOih0PW51bGwsMD09PXZyJiZzKCdcInVkcFwiJykpLG51bGw9PT10JiYoXCJ0Y3BcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KHQ9bi5zdWJzdHIoX3IsMyksX3IrPTMpOih0PW51bGwsMD09PXZyJiZzKCdcInRjcFwiJykpLG51bGw9PT10JiYoXCJzY3RwXCI9PT1uLnN1YnN0cihfciw0KS50b0xvd2VyQ2FzZSgpPyh0PW4uc3Vic3RyKF9yLDQpLF9yKz00KToodD1udWxsLDA9PT12ciYmcygnXCJzY3RwXCInKSksbnVsbD09PXQmJihcInRsc1wiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8odD1uLnN1YnN0cihfciwzKSxfcis9Myk6KHQ9bnVsbCwwPT09dnImJnMoJ1widGxzXCInKSksbnVsbD09PXQmJih0PUkoKSkpKSksbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnVyaV9wYXJhbXN8fCh5ci51cmlfcGFyYW1zPXt9KSx5ci51cmlfcGFyYW1zLnRyYW5zcG9ydD10LnRvTG93ZXJDYXNlKCl9KHIsZVsxXSkpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiB2ZSgpe3ZhciBlLHQscixsO3JldHVybiByPV9yLGw9X3IsXCJ1c2VyPVwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1widXNlcj1cIicpKSxudWxsIT09ZT8oXCJwaG9uZVwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8odD1uLnN1YnN0cihfciw1KSxfcis9NSk6KHQ9bnVsbCwwPT09dnImJnMoJ1wicGhvbmVcIicpKSxudWxsPT09dCYmKFwiaXBcIj09PW4uc3Vic3RyKF9yLDIpLnRvTG93ZXJDYXNlKCk/KHQ9bi5zdWJzdHIoX3IsMiksX3IrPTIpOih0PW51bGwsMD09PXZyJiZzKCdcImlwXCInKSksbnVsbD09PXQmJih0PUkoKSkpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci51cmlfcGFyYW1zfHwoeXIudXJpX3BhcmFtcz17fSkseXIudXJpX3BhcmFtcy51c2VyPXQudG9Mb3dlckNhc2UoKX0ocixlWzFdKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIENlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIHI9X3IsbD1fcixcIm1ldGhvZD1cIj09PW4uc3Vic3RyKF9yLDcpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNyksX3IrPTcpOihlPW51bGwsMD09PXZyJiZzKCdcIm1ldGhvZD1cIicpKSxudWxsIT09ZT8odD1hdCgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci51cmlfcGFyYW1zfHwoeXIudXJpX3BhcmFtcz17fSkseXIudXJpX3BhcmFtcy5tZXRob2Q9dH0ocixlWzFdKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIFNlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIHI9X3IsbD1fcixcInR0bD1cIj09PW4uc3Vic3RyKF9yLDQpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNCksX3IrPTQpOihlPW51bGwsMD09PXZyJiZzKCdcInR0bD1cIicpKSxudWxsIT09ZT8odD1KbigpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5wYXJhbXN8fCh5ci5wYXJhbXM9e30pLHlyLnBhcmFtcy50dGw9dH0ocixlWzFdKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIEVlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIHI9X3IsbD1fcixcIm1hZGRyPVwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wibWFkZHI9XCInKSksbnVsbCE9PWU/KHQ9bGUoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudXJpX3BhcmFtc3x8KHlyLnVyaV9wYXJhbXM9e30pLHlyLnVyaV9wYXJhbXMubWFkZHI9dH0ocixlWzFdKSksbnVsbD09PWUmJihfcj1yKSxlfWZ1bmN0aW9uIEFlKCl7dmFyIGUsdCxyLGwsaSxvO3JldHVybiBsPV9yLGk9X3IsXCJsclwiPT09bi5zdWJzdHIoX3IsMikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwyKSxfcis9Mik6KGU9bnVsbCwwPT09dnImJnMoJ1wibHJcIicpKSxudWxsIT09ZT8obz1fciw2MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGwhPT10PyhyPUkoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bykpOih0PW51bGwsX3I9byksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci51cmlfcGFyYW1zfHwoeXIudXJpX3BhcmFtcz17fSkseXIudXJpX3BhcmFtcy5scj12b2lkIDB9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24geWUoKXt2YXIgZSx0LHIsbCxpLG87cmV0dXJuIGw9X3IsaT1fcixlPVJlKCksbnVsbCE9PWU/KG89X3IsNjE9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiPVwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIj1cIicpKSxudWxsIT09dD8ocj1iZSgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1vKSk6KHQ9bnVsbCxfcj1vKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCxuKXt5ci51cmlfcGFyYW1zfHwoeXIudXJpX3BhcmFtcz17fSksbj1cInVuZGVmaW5lZFwiPT10eXBlb2Ygbj92b2lkIDA6blsxXSx5ci51cmlfcGFyYW1zW3QudG9Mb3dlckNhc2UoKV09bn0obCxlWzBdLGVbMV0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gUmUoKXt2YXIgZSx0LG47aWYobj1fcix0PUllKCksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PUllKCk7ZWxzZSBlPW51bGw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3JldHVybiB0LmpvaW4oXCJcIil9KG4sZSkpLG51bGw9PT1lJiYoX3I9biksZX1mdW5jdGlvbiBiZSgpe3ZhciBlLHQsbjtpZihuPV9yLHQ9SWUoKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9SWUoKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuam9pbihcIlwiKX0obixlKSksbnVsbD09PWUmJihfcj1uKSxlfWZ1bmN0aW9uIEllKCl7dmFyIGU7cmV0dXJuIGU9d2UoKSxudWxsPT09ZSYmKGU9ZygpLG51bGw9PT1lJiYoZT1fKCkpKSxlfWZ1bmN0aW9uIHdlKCl7dmFyIGU7cmV0dXJuIDkxPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIltcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJbXCInKSksbnVsbD09PWUmJig5Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCJdXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiXVwiJykpLG51bGw9PT1lJiYoNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiL1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsPT09ZSYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjpcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PWUmJigzOD09PW4uY2hhckNvZGVBdChfcik/KGU9XCImXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiJlwiJykpLG51bGw9PT1lJiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiK1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09ZSYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiRcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIkXCInKSkpKSkpKSksZX1mdW5jdGlvbiBOZSgpe3ZhciBlLHQscixsLGksbyx1O2lmKG89X3IsNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiP1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsIT09ZSlpZih0PURlKCksbnVsbCE9PXQpe2ZvcihyPVtdLHU9X3IsMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiJlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsIT09bD8oaT1EZSgpLG51bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj11KSk6KGw9bnVsbCxfcj11KTtudWxsIT09bDspci5wdXNoKGwpLHU9X3IsMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiJlwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsIT09bD8oaT1EZSgpLG51bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj11KSk6KGw9bnVsbCxfcj11KTtudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1vKX1lbHNlIGU9bnVsbCxfcj1vO2Vsc2UgZT1udWxsLF9yPW87cmV0dXJuIGV9ZnVuY3Rpb24gRGUoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsZT1PZSgpLG51bGwhPT1lPyg2MT09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI9XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGwhPT10PyhyPXhlKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCxuKXt0PXQuam9pbihcIlwiKS50b0xvd2VyQ2FzZSgpLG49bi5qb2luKFwiXCIpLHlyLnVyaV9oZWFkZXJzfHwoeXIudXJpX2hlYWRlcnM9e30pLHlyLnVyaV9oZWFkZXJzW3RdP3lyLnVyaV9oZWFkZXJzW3RdLnB1c2gobik6eXIudXJpX2hlYWRlcnNbdF09W25dfShsLGVbMF0sZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBPZSgpe3ZhciBlLHQ7aWYodD1VZSgpLG51bGw9PT10JiYodD1nKCksbnVsbD09PXQmJih0PV8oKSkpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1VZSgpLG51bGw9PT10JiYodD1nKCksbnVsbD09PXQmJih0PV8oKSkpO2Vsc2UgZT1udWxsO3JldHVybiBlfWZ1bmN0aW9uIHhlKCl7dmFyIGUsdDtmb3IoZT1bXSx0PVVlKCksbnVsbD09PXQmJih0PWcoKSxudWxsPT09dCYmKHQ9XygpKSk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PVVlKCksbnVsbD09PXQmJih0PWcoKSxudWxsPT09dCYmKHQ9XygpKSk7cmV0dXJuIGV9ZnVuY3Rpb24gVWUoKXt2YXIgZTtyZXR1cm4gOTE9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiW1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIltcIicpKSxudWxsPT09ZSYmKDkzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIl1cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCJdXCInKSksbnVsbD09PWUmJig0Nz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIvXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiL1wiJykpLG51bGw9PT1lJiYoNjM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiP1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIj9cIicpKSxudWxsPT09ZSYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIjpcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PWUmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KGU9XCIrXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT1lJiYoMzY9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiJFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIiRcIicpKSkpKSkpKSxlfWZ1bmN0aW9uIE1lKCl7dmFyIGU7cmV0dXJuIGU9Y3QoKSxudWxsPT09ZSYmKGU9UGUoKSksZX1mdW5jdGlvbiBQZSgpe3ZhciBlLHQsbixyLHMsbDtyZXR1cm4gbD1fcixlPWF0KCksbnVsbCE9PWU/KHQ9ZCgpLG51bGwhPT10PyhuPXFlKCksbnVsbCE9PW4/KHI9ZCgpLG51bGwhPT1yPyhzPVplKCksbnVsbCE9PXM/ZT1bZSx0LG4scixzXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gcWUoKXt2YXIgZTtyZXR1cm4gZT0kKCksbnVsbD09PWUmJihlPUxlKCkpLGV9ZnVuY3Rpb24gTGUoKXt2YXIgZSx0LHIsbDtyZXR1cm4gbD1fcixlPUplKCksbnVsbCE9PWU/KDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbCE9PXQ/KHI9a2UoKSxudWxsPT09ciYmKHI9R2UoKSksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBrZSgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsZT1IZSgpLG51bGw9PT1lJiYoZT1GZSgpKSxudWxsIT09ZT8oaT1fciw2Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCI/XCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiP1wiJykpLG51bGwhPT10PyhyPVFlKCksbnVsbCE9PXI/dD1bdCxyXToodD1udWxsLF9yPWkpKToodD1udWxsLF9yPWkpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIEhlKCl7dmFyIGUsdCxyLGw7cmV0dXJuIGw9X3IsXCIvL1wiPT09bi5zdWJzdHIoX3IsMik/KGU9XCIvL1wiLF9yKz0yKTooZT1udWxsLDA9PT12ciYmcygnXCIvL1wiJykpLG51bGwhPT1lPyh0PUtlKCksbnVsbCE9PXQ/KHI9RmUoKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIEZlKCl7dmFyIGUsdCxyO3JldHVybiByPV9yLDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIi9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbCE9PWU/KHQ9QmUoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBHZSgpe3ZhciBlLHQsbixyO2lmKHI9X3IsZT1XZSgpLG51bGwhPT1lKXtmb3IodD1bXSxuPWplKCk7bnVsbCE9PW47KXQucHVzaChuKSxuPWplKCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpfWVsc2UgZT1udWxsLF9yPXI7cmV0dXJuIGV9ZnVuY3Rpb24gamUoKXt2YXIgZTtyZXR1cm4gZT1tKCksbnVsbD09PWUmJihlPWcoKSxudWxsPT09ZSYmKGU9XygpKSksZX1mdW5jdGlvbiBXZSgpe3ZhciBlO3JldHVybiBlPWcoKSxudWxsPT09ZSYmKGU9XygpLG51bGw9PT1lJiYoNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiO1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsPT09ZSYmKDYzPT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIj9cIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCI/XCInKSksbnVsbD09PWUmJig1OD09PW4uY2hhckNvZGVBdChfcik/KGU9XCI6XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT1lJiYoNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiQFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsPT09ZSYmKDM4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiZcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PWUmJig2MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI9XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT1lJiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiK1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09ZSYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiRcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIkXCInKSksbnVsbD09PWUmJig0ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCIsXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpKSkpKSkpKSkpKSxlfWZ1bmN0aW9uIEJlKCl7dmFyIGUsdCxyLGwsaSxvO2lmKGk9X3IsZT16ZSgpLG51bGwhPT1lKXtmb3IodD1bXSxvPV9yLDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi9cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbCE9PXI/KGw9emUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXI7KXQucHVzaChyKSxvPV9yLDQ3PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi9cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIvXCInKSksbnVsbCE9PXI/KGw9emUoKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9bykpOihyPW51bGwsX3I9byk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7cmV0dXJuIGV9ZnVuY3Rpb24gemUoKXt2YXIgZSx0LHIsbCxpLG87Zm9yKGk9X3IsZT1bXSx0PVllKCk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PVllKCk7aWYobnVsbCE9PWUpe2Zvcih0PVtdLG89X3IsNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiO1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsIT09cj8obD1WZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09cjspdC5wdXNoKHIpLG89X3IsNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiO1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsIT09cj8obD1WZSgpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gZX1mdW5jdGlvbiBWZSgpe3ZhciBlLHQ7Zm9yKGU9W10sdD1ZZSgpO251bGwhPT10OyllLnB1c2godCksdD1ZZSgpO3JldHVybiBlfWZ1bmN0aW9uIFllKCl7dmFyIGU7cmV0dXJuIGU9ZygpLG51bGw9PT1lJiYoZT1fKCksbnVsbD09PWUmJig1OD09PW4uY2hhckNvZGVBdChfcik/KGU9XCI6XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiOlwiJykpLG51bGw9PT1lJiYoNjQ9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiQFwiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIkBcIicpKSxudWxsPT09ZSYmKDM4PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiZcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCImXCInKSksbnVsbD09PWUmJig2MT09PW4uY2hhckNvZGVBdChfcik/KGU9XCI9XCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiPVwiJykpLG51bGw9PT1lJiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyhlPVwiK1wiLF9yKyspOihlPW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09ZSYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8oZT1cIiRcIixfcisrKTooZT1udWxsLDA9PT12ciYmcygnXCIkXCInKSksbnVsbD09PWUmJig0ND09PW4uY2hhckNvZGVBdChfcik/KGU9XCIsXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpKSkpKSkpKSksZX1mdW5jdGlvbiBKZSgpe3ZhciBlLHQscixsLHU7aWYobD1fcix1PV9yLGU9bygpLG51bGwhPT1lKXtmb3IodD1bXSxyPW8oKSxudWxsPT09ciYmKHI9aSgpLG51bGw9PT1yJiYoNDM9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiK1wiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIitcIicpKSxudWxsPT09ciYmKDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi1cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbD09PXImJig0Nj09PW4uY2hhckNvZGVBdChfcik/KHI9XCIuXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpKSkpKTtudWxsIT09cjspdC5wdXNoKHIpLHI9bygpLG51bGw9PT1yJiYocj1pKCksbnVsbD09PXImJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHI9XCIrXCIsX3IrKyk6KHI9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpLG51bGw9PT1yJiYoNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLVwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsPT09ciYmKDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi5cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIuXCInKSkpKSkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj11KX1lbHNlIGU9bnVsbCxfcj11O3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIuc2NoZW1lPW4uc3Vic3RyaW5nKF9yLGUpfShsKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEtlKCl7dmFyIGU7cmV0dXJuIGU9JGUoKSxudWxsPT09ZSYmKGU9WGUoKSksZX1mdW5jdGlvbiAkZSgpe3ZhciBlLHQscixsO3JldHVybiByPV9yLGw9X3IsZT1lZSgpLG51bGwhPT1lPyg2ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJAXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlPW51bGwhPT1lP2U6XCJcIixudWxsIT09ZT8odD1zZSgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlPW51bGwhPT1lP2U6XCJcIn1mdW5jdGlvbiBYZSgpe3ZhciBlLHQ7aWYodD1nKCksbnVsbD09PXQmJih0PV8oKSxudWxsPT09dCYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiRcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIkXCInKSksbnVsbD09PXQmJig0ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIsXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpLG51bGw9PT10JiYoNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiO1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsPT09dCYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PXQmJig2ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJAXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGw9PT10JiYoMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09dCYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpKSkpKSkpKSkpLG51bGwhPT10KWZvcihlPVtdO251bGwhPT10OyllLnB1c2godCksdD1nKCksbnVsbD09PXQmJih0PV8oKSxudWxsPT09dCYmKDM2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIiRcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIkXCInKSksbnVsbD09PXQmJig0ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIsXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiLFwiJykpLG51bGw9PT10JiYoNTk9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiO1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIjtcIicpKSxudWxsPT09dCYmKDU4PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIjpcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI6XCInKSksbnVsbD09PXQmJig2ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJAXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGw9PT10JiYoMzg9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiJlwiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIiZcIicpKSxudWxsPT09dCYmKDYxPT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIj1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCI9XCInKSksbnVsbD09PXQmJig0Mz09PW4uY2hhckNvZGVBdChfcik/KHQ9XCIrXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiK1wiJykpKSkpKSkpKSkpO2Vsc2UgZT1udWxsO3JldHVybiBlfWZ1bmN0aW9uIFFlKCl7dmFyIGUsdDtmb3IoZT1bXSx0PWplKCk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWplKCk7cmV0dXJuIGV9ZnVuY3Rpb24gWmUoKXt2YXIgZSx0LHIsbCxvLHUsYSxjO2lmKGE9X3IsYz1fcixcInNpcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wiU0lQXCInKSksbnVsbCE9PWUpaWYoNDc9PT1uLmNoYXJDb2RlQXQoX3IpPyh0PVwiL1wiLF9yKyspOih0PW51bGwsMD09PXZyJiZzKCdcIi9cIicpKSxudWxsIT09dCl7aWYobD1pKCksbnVsbCE9PWwpZm9yKHI9W107bnVsbCE9PWw7KXIucHVzaChsKSxsPWkoKTtlbHNlIHI9bnVsbDtpZihudWxsIT09cilpZig0Nj09PW4uY2hhckNvZGVBdChfcik/KGw9XCIuXCIsX3IrKyk6KGw9bnVsbCwwPT09dnImJnMoJ1wiLlwiJykpLG51bGwhPT1sKXtpZih1PWkoKSxudWxsIT09dSlmb3Iobz1bXTtudWxsIT09dTspby5wdXNoKHUpLHU9aSgpO2Vsc2Ugbz1udWxsO251bGwhPT1vP2U9W2UsdCxyLGwsb106KGU9bnVsbCxfcj1jKX1lbHNlIGU9bnVsbCxfcj1jO2Vsc2UgZT1udWxsLF9yPWN9ZWxzZSBlPW51bGwsX3I9YztlbHNlIGU9bnVsbCxfcj1jO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIuc2lwX3ZlcnNpb249bi5zdWJzdHJpbmcoX3IsZSl9KGEpKSxudWxsPT09ZSYmKF9yPWEpLGV9ZnVuY3Rpb24gZXQoKXt2YXIgZTtyZXR1cm5cIklOVklURVwiPT09bi5zdWJzdHIoX3IsNik/KGU9XCJJTlZJVEVcIixfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wiSU5WSVRFXCInKSksZX1mdW5jdGlvbiB0dCgpe3ZhciBlO3JldHVyblwiQUNLXCI9PT1uLnN1YnN0cihfciwzKT8oZT1cIkFDS1wiLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJBQ0tcIicpKSxlfWZ1bmN0aW9uIG50KCl7dmFyIGU7cmV0dXJuXCJPUFRJT05TXCI9PT1uLnN1YnN0cihfciw3KT8oZT1cIk9QVElPTlNcIixfcis9Nyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiT1BUSU9OU1wiJykpLGV9ZnVuY3Rpb24gcnQoKXt2YXIgZTtyZXR1cm5cIkJZRVwiPT09bi5zdWJzdHIoX3IsMyk/KGU9XCJCWUVcIixfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wiQllFXCInKSksZX1mdW5jdGlvbiBzdCgpe3ZhciBlO3JldHVyblwiQ0FOQ0VMXCI9PT1uLnN1YnN0cihfciw2KT8oZT1cIkNBTkNFTFwiLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJDQU5DRUxcIicpKSxlfWZ1bmN0aW9uIGx0KCl7dmFyIGU7cmV0dXJuXCJSRUdJU1RFUlwiPT09bi5zdWJzdHIoX3IsOCk/KGU9XCJSRUdJU1RFUlwiLF9yKz04KTooZT1udWxsLDA9PT12ciYmcygnXCJSRUdJU1RFUlwiJykpLGV9ZnVuY3Rpb24gaXQoKXt2YXIgZTtyZXR1cm5cIlNVQlNDUklCRVwiPT09bi5zdWJzdHIoX3IsOSk/KGU9XCJTVUJTQ1JJQkVcIixfcis9OSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiU1VCU0NSSUJFXCInKSksZX1mdW5jdGlvbiBvdCgpe3ZhciBlO3JldHVyblwiTk9USUZZXCI9PT1uLnN1YnN0cihfciw2KT8oZT1cIk5PVElGWVwiLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJOT1RJRllcIicpKSxlfWZ1bmN0aW9uIHV0KCl7dmFyIGU7cmV0dXJuXCJSRUZFUlwiPT09bi5zdWJzdHIoX3IsNSk/KGU9XCJSRUZFUlwiLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJSRUZFUlwiJykpLGV9ZnVuY3Rpb24gYXQoKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9ZXQoKSxudWxsPT09ZSYmKGU9dHQoKSxudWxsPT09ZSYmKGU9bnQoKSxudWxsPT09ZSYmKGU9cnQoKSxudWxsPT09ZSYmKGU9c3QoKSxudWxsPT09ZSYmKGU9bHQoKSxudWxsPT09ZSYmKGU9aXQoKSxudWxsPT09ZSYmKGU9b3QoKSxudWxsPT09ZSYmKGU9dXQoKSxudWxsPT09ZSYmKGU9SSgpKSkpKSkpKSkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXtyZXR1cm4geXIubWV0aG9kPW4uc3Vic3RyaW5nKF9yLGUpLHlyLm1ldGhvZH0odCkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBjdCgpe3ZhciBlLHQsbixyLHMsbDtyZXR1cm4gbD1fcixlPVplKCksbnVsbCE9PWU/KHQ9ZCgpLG51bGwhPT10PyhuPWh0KCksbnVsbCE9PW4/KHI9ZCgpLG51bGwhPT1yPyhzPXB0KCksbnVsbCE9PXM/ZT1bZSx0LG4scixzXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gaHQoKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9ZHQoKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5zdGF0dXNfY29kZT1wYXJzZUludCh0LmpvaW4oXCJcIikpfSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gZHQoKXt2YXIgZSx0LG4scjtyZXR1cm4gcj1fcixlPWkoKSxudWxsIT09ZT8odD1pKCksbnVsbCE9PXQ/KG49aSgpLG51bGwhPT1uP2U9W2UsdCxuXTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gcHQoKXt2YXIgZSx0LHI7Zm9yKHI9X3IsZT1bXSx0PW0oKSxudWxsPT09dCYmKHQ9ZygpLG51bGw9PT10JiYodD1fKCksbnVsbD09PXQmJih0PXkoKSxudWxsPT09dCYmKHQ9UigpLG51bGw9PT10JiYodD1kKCksbnVsbD09PXQmJih0PXAoKSkpKSkpKTtudWxsIT09dDspZS5wdXNoKHQpLHQ9bSgpLG51bGw9PT10JiYodD1nKCksbnVsbD09PXQmJih0PV8oKSxudWxsPT09dCYmKHQ9eSgpLG51bGw9PT10JiYodD1SKCksbnVsbD09PXQmJih0PWQoKSxudWxsPT09dCYmKHQ9cCgpKSkpKSkpO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIucmVhc29uX3BocmFzZT1uLnN1YnN0cmluZyhfcixlKX0ocikpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBmdCgpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9WXQoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPWsoKSxudWxsIT09bj8ocj1ZdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9WXQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gbXQoKXt2YXIgZSx0LHIsbCxpLG87cmV0dXJuIGw9X3IsaT1fcixlPUQoKSxudWxsIT09ZT8obz1fciw2ND09PW4uY2hhckNvZGVBdChfcik/KHQ9XCJAXCIsX3IrKyk6KHQ9bnVsbCwwPT09dnImJnMoJ1wiQFwiJykpLG51bGwhPT10PyhyPUQoKSxudWxsIT09cj90PVt0LHJdOih0PW51bGwsX3I9bykpOih0PW51bGwsX3I9byksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5cj1uLnN1YnN0cmluZyhfcixlKX0obCkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBndCgpe3ZhciBlLHQsbixyLHMsbCxpO2lmKHM9X3IsZT1PKCksbnVsbD09PWUpaWYobD1fcixlPVR0KCksbnVsbCE9PWUpe2Zvcih0PVtdLGk9X3Isbj1rKCksbnVsbCE9PW4/KHI9VHQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PW47KXQucHVzaChuKSxpPV9yLG49aygpLG51bGwhPT1uPyhyPVR0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxcbl9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt2YXIgdCxuO2ZvcihuPXlyLm11bHRpX2hlYWRlci5sZW5ndGgsdD0wO24+dDt0KyspaWYobnVsbD09PXlyLm11bHRpX2hlYWRlclt0XS5wYXJzZWQpe3lyPW51bGw7YnJlYWt9eXI9bnVsbCE9PXlyP3lyLm11bHRpX2hlYWRlcjotMX0ocykpLG51bGw9PT1lJiYoX3I9cyksZX1mdW5jdGlvbiBUdCgpe3ZhciBlLHQsbixyLHMsbCxpO2lmKHM9X3IsbD1fcixlPUsoKSxudWxsPT09ZSYmKGU9X3QoKSksbnVsbCE9PWUpe2Zvcih0PVtdLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9Q3QoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PW47KXQucHVzaChuKSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPUN0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dmFyIHQ7eXIubXVsdGlfaGVhZGVyfHwoeXIubXVsdGlfaGVhZGVyPVtdKTt0cnl7dD1uZXcgQXIoeXIudXJpLHlyLmRpc3BsYXlfbmFtZSx5ci5wYXJhbXMpLGRlbGV0ZSB5ci51cmksZGVsZXRlIHlyLmRpc3BsYXlfbmFtZSxkZWxldGUgeXIucGFyYW1zfWNhdGNoKG4pe3Q9bnVsbH15ci5tdWx0aV9oZWFkZXIucHVzaCh7cG9zc2l0aW9uOl9yLG9mZnNldDplLHBhcnNlZDp0fSl9KHMpKSxudWxsPT09ZSYmKF9yPXMpLGV9ZnVuY3Rpb24gX3QoKXt2YXIgZSx0LG4scixzO3JldHVybiBzPV9yLGU9dnQoKSxlPW51bGwhPT1lP2U6XCJcIixudWxsIT09ZT8odD1MKCksbnVsbCE9PXQ/KG49JCgpLG51bGwhPT1uPyhyPXEoKSxudWxsIT09cj9lPVtlLHQsbixyXTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpKTooZT1udWxsLF9yPXMpLGV9ZnVuY3Rpb24gdnQoKXt2YXIgZSx0LHIscyxsLGksbztpZihsPV9yLGk9X3IsZT1JKCksbnVsbCE9PWUpe2Zvcih0PVtdLG89X3Iscj12KCksbnVsbCE9PXI/KHM9SSgpLG51bGwhPT1zP3I9W3Isc106KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09cjspdC5wdXNoKHIpLG89X3Iscj12KCksbnVsbCE9PXI/KHM9SSgpLG51bGwhPT1zP3I9W3Isc106KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gbnVsbD09PWUmJihlPXooKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7dD1uLnN1YnN0cmluZyhfcixlKS50cmltKCksJ1wiJz09PXRbMF0mJih0PXQuc3Vic3RyaW5nKDEsdC5sZW5ndGgtMSkpLHlyLmRpc3BsYXlfbmFtZT10fShsLGUpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gQ3QoKXt2YXIgZTtyZXR1cm4gZT1TdCgpLG51bGw9PT1lJiYoZT1FdCgpLG51bGw9PT1lJiYoZT1SdCgpKSksZX1mdW5jdGlvbiBTdCgpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcInFcIj09PW4uc3Vic3RyKF9yLDEpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMSksX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wicVwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj15dCgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnBhcmFtc3x8KHlyLnBhcmFtcz17fSkseXIucGFyYW1zLnE9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEV0KCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwiZXhwaXJlc1wiPT09bi5zdWJzdHIoX3IsNykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw3KSxfcis9Nyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiZXhwaXJlc1wiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1BdCgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnBhcmFtc3x8KHlyLnBhcmFtcz17fSkseXIucGFyYW1zLmV4cGlyZXM9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEF0KCl7dmFyIGUsdCxuO2lmKG49X3IsdD1pKCksbnVsbCE9PXQpZm9yKGU9W107bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWkoKTtlbHNlIGU9bnVsbDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHBhcnNlSW50KHQuam9pbihcIlwiKSl9KG4sZSkpLG51bGw9PT1lJiYoX3I9biksZX1mdW5jdGlvbiB5dCgpe3ZhciBlLHQscixsLG8sdSxhLGM7cmV0dXJuIHU9X3IsYT1fciw0OD09PW4uY2hhckNvZGVBdChfcik/KGU9XCIwXCIsX3IrKyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiMFwiJykpLG51bGwhPT1lPyhjPV9yLDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi5cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PXQ/KHI9aSgpLHI9bnVsbCE9PXI/cjpcIlwiLG51bGwhPT1yPyhsPWkoKSxsPW51bGwhPT1sP2w6XCJcIixudWxsIT09bD8obz1pKCksbz1udWxsIT09bz9vOlwiXCIsbnVsbCE9PW8/dD1bdCxyLGwsb106KHQ9bnVsbCxfcj1jKSk6KHQ9bnVsbCxfcj1jKSk6KHQ9bnVsbCxfcj1jKSk6KHQ9bnVsbCxfcj1jKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9YSkpOihlPW51bGwsX3I9YSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUZsb2F0KG4uc3Vic3RyaW5nKF9yLGUpKX0odSkpLG51bGw9PT1lJiYoX3I9dSksZX1mdW5jdGlvbiBSdCgpe3ZhciBlLHQsbixyLHMsbDtyZXR1cm4gcj1fcixzPV9yLGU9SSgpLG51bGwhPT1lPyhsPV9yLHQ9VSgpLG51bGwhPT10PyhuPWJ0KCksbnVsbCE9PW4/dD1bdCxuXToodD1udWxsLF9yPWwpKToodD1udWxsLF9yPWwpLHQ9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKSk6KGU9bnVsbCxfcj1zKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0LG4pe3lyLnBhcmFtc3x8KHlyLnBhcmFtcz17fSksbj1cInVuZGVmaW5lZFwiPT10eXBlb2Ygbj92b2lkIDA6blsxXSx5ci5wYXJhbXNbdC50b0xvd2VyQ2FzZSgpXT1ufShyLGVbMF0sZVsxXSkpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBidCgpe3ZhciBlO3JldHVybiBlPUkoKSxudWxsPT09ZSYmKGU9bGUoKSxudWxsPT09ZSYmKGU9eigpKSksZX1mdW5jdGlvbiBJdCgpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9d3QoKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPUgoKSxudWxsIT09bj8ocj1OdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9TnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gd3QoKXt2YXIgZTtyZXR1cm5cInJlbmRlclwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wicmVuZGVyXCInKSksbnVsbD09PWUmJihcInNlc3Npb25cIj09PW4uc3Vic3RyKF9yLDcpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNyksX3IrPTcpOihlPW51bGwsMD09PXZyJiZzKCdcInNlc3Npb25cIicpKSxudWxsPT09ZSYmKFwiaWNvblwiPT09bi5zdWJzdHIoX3IsNCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw0KSxfcis9NCk6KGU9bnVsbCwwPT09dnImJnMoJ1wiaWNvblwiJykpLG51bGw9PT1lJiYoXCJhbGVydFwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiYWxlcnRcIicpKSxudWxsPT09ZSYmKGU9SSgpKSkpKSxlfWZ1bmN0aW9uIE50KCl7dmFyIGU7cmV0dXJuIGU9RHQoKSxudWxsPT09ZSYmKGU9UnQoKSksZX1mdW5jdGlvbiBEdCgpe3ZhciBlLHQscixsO3JldHVybiBsPV9yLFwiaGFuZGxpbmdcIj09PW4uc3Vic3RyKF9yLDgpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOCksX3IrPTgpOihlPW51bGwsMD09PXZyJiZzKCdcImhhbmRsaW5nXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhcIm9wdGlvbmFsXCI9PT1uLnN1YnN0cihfciw4KS50b0xvd2VyQ2FzZSgpPyhyPW4uc3Vic3RyKF9yLDgpLF9yKz04KToocj1udWxsLDA9PT12ciYmcygnXCJvcHRpb25hbFwiJykpLG51bGw9PT1yJiYoXCJyZXF1aXJlZFwiPT09bi5zdWJzdHIoX3IsOCkudG9Mb3dlckNhc2UoKT8ocj1uLnN1YnN0cihfciw4KSxfcis9OCk6KHI9bnVsbCwwPT09dnImJnMoJ1wicmVxdWlyZWRcIicpKSxudWxsPT09ciYmKHI9SSgpKSksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBPdCgpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9SSgpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49aygpLG51bGwhPT1uPyhyPUkoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49aygpLG51bGwhPT1uPyhyPUkoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24geHQoKXt2YXIgZSx0LG47aWYobj1fcix0PWkoKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9aSgpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5cj1wYXJzZUludCh0LmpvaW4oXCJcIikpfShuLGUpKSxudWxsPT09ZSYmKF9yPW4pLGV9ZnVuY3Rpb24gVXQoKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9TXQoKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXI9bi5zdWJzdHJpbmcoX3IsZSl9KHQpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gTXQoKXt2YXIgZSx0LG4scixzLGwsaSxvO2lmKGk9X3IsZT1QdCgpLG51bGwhPT1lKWlmKHQ9eCgpLG51bGwhPT10KWlmKG49RnQoKSxudWxsIT09bil7Zm9yKHI9W10sbz1fcixzPUgoKSxudWxsIT09cz8obD1HdCgpLG51bGwhPT1sP3M9W3MsbF06KHM9bnVsbCxfcj1vKSk6KHM9bnVsbCxfcj1vKTtudWxsIT09czspci5wdXNoKHMpLG89X3Iscz1IKCksbnVsbCE9PXM/KGw9R3QoKSxudWxsIT09bD9zPVtzLGxdOihzPW51bGwsX3I9bykpOihzPW51bGwsX3I9byk7bnVsbCE9PXI/ZT1bZSx0LG4scl06KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO2Vsc2UgZT1udWxsLF9yPWk7ZWxzZSBlPW51bGwsX3I9aTtyZXR1cm4gZX1mdW5jdGlvbiBQdCgpe3ZhciBlO3JldHVybiBlPXF0KCksbnVsbD09PWUmJihlPUx0KCkpLGV9ZnVuY3Rpb24gcXQoKXt2YXIgZTtyZXR1cm5cInRleHRcIj09PW4uc3Vic3RyKF9yLDQpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNCksX3IrPTQpOihlPW51bGwsMD09PXZyJiZzKCdcInRleHRcIicpKSxudWxsPT09ZSYmKFwiaW1hZ2VcIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcImltYWdlXCInKSksbnVsbD09PWUmJihcImF1ZGlvXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJhdWRpb1wiJykpLG51bGw9PT1lJiYoXCJ2aWRlb1wiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1widmlkZW9cIicpKSxudWxsPT09ZSYmKFwiYXBwbGljYXRpb25cIj09PW4uc3Vic3RyKF9yLDExKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDExKSxfcis9MTEpOihlPW51bGwsMD09PXZyJiZzKCdcImFwcGxpY2F0aW9uXCInKSksbnVsbD09PWUmJihlPWt0KCkpKSkpKSxlfWZ1bmN0aW9uIEx0KCl7dmFyIGU7cmV0dXJuXCJtZXNzYWdlXCI9PT1uLnN1YnN0cihfciw3KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDcpLF9yKz03KTooZT1udWxsLDA9PT12ciYmcygnXCJtZXNzYWdlXCInKSksbnVsbD09PWUmJihcIm11bHRpcGFydFwiPT09bi5zdWJzdHIoX3IsOSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw5KSxfcis9OSk6KGU9bnVsbCwwPT09dnImJnMoJ1wibXVsdGlwYXJ0XCInKSksbnVsbD09PWUmJihlPWt0KCkpKSxlfWZ1bmN0aW9uIGt0KCl7dmFyIGU7cmV0dXJuIGU9SSgpLG51bGw9PT1lJiYoZT1IdCgpKSxlfWZ1bmN0aW9uIEh0KCl7dmFyIGUsdCxyO3JldHVybiByPV9yLFwieC1cIj09PW4uc3Vic3RyKF9yLDIpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsMiksX3IrPTIpOihlPW51bGwsMD09PXZyJiZzKCdcIngtXCInKSksbnVsbCE9PWU/KHQ9SSgpLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIEZ0KCl7dmFyIGU7cmV0dXJuIGU9a3QoKSxudWxsPT09ZSYmKGU9SSgpKSxlfWZ1bmN0aW9uIEd0KCl7dmFyIGUsdCxuLHI7cmV0dXJuIHI9X3IsZT1JKCksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhuPWp0KCksbnVsbCE9PW4/ZT1bZSx0LG5dOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBqdCgpe3ZhciBlO3JldHVybiBlPUkoKSxudWxsPT09ZSYmKGU9eigpKSxlfWZ1bmN0aW9uIFd0KCl7dmFyIGUsdCxuLHI7cmV0dXJuIHI9X3IsZT1CdCgpLG51bGwhPT1lPyh0PXYoKSxudWxsIT09dD8obj1hdCgpLG51bGwhPT1uP2U9W2UsdCxuXTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gQnQoKXt2YXIgZSx0LG47aWYobj1fcix0PWkoKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9aSgpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci52YWx1ZT1wYXJzZUludCh0LmpvaW4oXCJcIikpfShuLGUpKSxudWxsPT09ZSYmKF9yPW4pLGV9ZnVuY3Rpb24genQoKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9QXQoKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5cj10fSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gVnQoKXt2YXIgZSx0LG4scixzLGwsaTtpZihzPV9yLGw9X3IsZT1ZdCgpLG51bGwhPT1lKXtmb3IodD1bXSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPVJ0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT1uOyl0LnB1c2gobiksaT1fcixuPUgoKSxudWxsIT09bj8ocj1SdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuZXZlbnQ9dC5qb2luKFwiXCIpLnRvTG93ZXJDYXNlKCl9KHMsZVswXSkpLG51bGw9PT1lJiYoX3I9cyksZX1mdW5jdGlvbiBZdCgpe3ZhciBlLHQscixsLGksbztpZihpPV9yLGU9dygpLG51bGwhPT1lKXtmb3IodD1bXSxvPV9yLDQ2PT09bi5jaGFyQ29kZUF0KF9yKT8ocj1cIi5cIixfcisrKToocj1udWxsLDA9PT12ciYmcygnXCIuXCInKSksbnVsbCE9PXI/KGw9dygpLG51bGwhPT1sP3I9W3IsbF06KHI9bnVsbCxfcj1vKSk6KHI9bnVsbCxfcj1vKTtudWxsIT09cjspdC5wdXNoKHIpLG89X3IsNDY9PT1uLmNoYXJDb2RlQXQoX3IpPyhyPVwiLlwiLF9yKyspOihyPW51bGwsMD09PXZyJiZzKCdcIi5cIicpKSxudWxsIT09cj8obD13KCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPW8pKToocj1udWxsLF9yPW8pO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1pKX1lbHNlIGU9bnVsbCxfcj1pO3JldHVybiBlfWZ1bmN0aW9uIEp0KCl7dmFyIGUsdCxuLHIscyxsLGk7aWYocz1fcixsPV9yLGU9SygpLG51bGw9PT1lJiYoZT1fdCgpKSxudWxsIT09ZSl7Zm9yKHQ9W10saT1fcixuPUgoKSxudWxsIT09bj8ocj1LdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09bjspdC5wdXNoKG4pLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9S3QoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt2YXIgdD15ci50YWc7dHJ5e3lyPW5ldyBBcih5ci51cmkseXIuZGlzcGxheV9uYW1lLHlyLnBhcmFtcyksdCYmeXIuc2V0UGFyYW0oXCJ0YWdcIix0KX1jYXRjaChuKXt5cj0tMX19KHMpKSxudWxsPT09ZSYmKF9yPXMpLGV9ZnVuY3Rpb24gS3QoKXt2YXIgZTtyZXR1cm4gZT0kdCgpLG51bGw9PT1lJiYoZT1SdCgpKSxlfWZ1bmN0aW9uICR0KCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwidGFnXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDMpLF9yKz0zKTooZT1udWxsLDA9PT12ciYmcygnXCJ0YWdcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KHI9SSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnRhZz10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gWHQoKXt2YXIgZSx0LG47aWYobj1fcix0PWkoKSxudWxsIT09dClmb3IoZT1bXTtudWxsIT09dDspZS5wdXNoKHQpLHQ9aSgpO2Vsc2UgZT1udWxsO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5cj1wYXJzZUludCh0LmpvaW4oXCJcIikpfShuLGUpKSxudWxsPT09ZSYmKF9yPW4pLGV9ZnVuY3Rpb24gUXQoKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9QXQoKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5cj10fSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gWnQoKXt2YXIgZSx0LG4scixzLGwsaSxvLHUsYTtmb3Iobz1fcix1PV9yLGU9W10sdD12dCgpO251bGwhPT10OyllLnB1c2godCksdD12dCgpO2lmKG51bGwhPT1lKWlmKHQ9TCgpLG51bGwhPT10KWlmKG49JCgpLG51bGwhPT1uKWlmKHI9cSgpLG51bGwhPT1yKXtmb3Iocz1bXSxhPV9yLGw9SCgpLG51bGwhPT1sPyhpPVJ0KCksbnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPWEpKToobD1udWxsLF9yPWEpO251bGwhPT1sOylzLnB1c2gobCksYT1fcixsPUgoKSxudWxsIT09bD8oaT1SdCgpLG51bGwhPT1pP2w9W2wsaV06KGw9bnVsbCxfcj1hKSk6KGw9bnVsbCxfcj1hKTtudWxsIT09cz9lPVtlLHQsbixyLHNdOihlPW51bGwsX3I9dSl9ZWxzZSBlPW51bGwsX3I9dTtlbHNlIGU9bnVsbCxfcj11O2Vsc2UgZT1udWxsLF9yPXU7ZWxzZSBlPW51bGwsX3I9dTtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3RyeXt5cj1uZXcgQXIoeXIudXJpLHlyLmRpc3BsYXlfbmFtZSx5ci5wYXJhbXMpfWNhdGNoKHQpe3lyPS0xfX0obykpLG51bGw9PT1lJiYoX3I9byksZX1mdW5jdGlvbiBlbigpe3ZhciBlO3JldHVybiBlPXRuKCl9ZnVuY3Rpb24gdG4oKXt2YXIgZSx0LHIsbCxpLG8sdSxhO2lmKHU9X3IsXCJkaWdlc3RcIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcIkRpZ2VzdFwiJykpLG51bGwhPT1lKWlmKHQ9digpLG51bGwhPT10KWlmKHI9c24oKSxudWxsIT09cil7Zm9yKGw9W10sYT1fcixpPWsoKSxudWxsIT09aT8obz1zbigpLG51bGwhPT1vP2k9W2ksb106KGk9bnVsbCxfcj1hKSk6KGk9bnVsbCxfcj1hKTtudWxsIT09aTspbC5wdXNoKGkpLGE9X3IsaT1rKCksbnVsbCE9PWk/KG89c24oKSxudWxsIT09bz9pPVtpLG9dOihpPW51bGwsX3I9YSkpOihpPW51bGwsX3I9YSk7bnVsbCE9PWw/ZT1bZSx0LHIsbF06KGU9bnVsbCxfcj11KX1lbHNlIGU9bnVsbCxfcj11O2Vsc2UgZT1udWxsLF9yPXU7ZWxzZSBlPW51bGwsX3I9dTtyZXR1cm4gbnVsbD09PWUmJihlPW5uKCkpLGV9ZnVuY3Rpb24gbm4oKXt2YXIgZSx0LG4scixzLGwsaSxvO2lmKGk9X3IsZT1JKCksbnVsbCE9PWUpaWYodD12KCksbnVsbCE9PXQpaWYobj1ybigpLG51bGwhPT1uKXtmb3Iocj1bXSxvPV9yLHM9aygpLG51bGwhPT1zPyhsPXJuKCksbnVsbCE9PWw/cz1bcyxsXToocz1udWxsLF9yPW8pKToocz1udWxsLF9yPW8pO251bGwhPT1zOylyLnB1c2gocyksbz1fcixzPWsoKSxudWxsIT09cz8obD1ybigpLG51bGwhPT1sP3M9W3MsbF06KHM9bnVsbCxfcj1vKSk6KHM9bnVsbCxfcj1vKTtudWxsIT09cj9lPVtlLHQsbixyXTooZT1udWxsLF9yPWkpfWVsc2UgZT1udWxsLF9yPWk7ZWxzZSBlPW51bGwsX3I9aTtlbHNlIGU9bnVsbCxfcj1pO3JldHVybiBlfWZ1bmN0aW9uIHJuKCl7dmFyIGUsdCxuLHI7cmV0dXJuIHI9X3IsZT1JKCksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhuPUkoKSxudWxsPT09biYmKG49eigpKSxudWxsIT09bj9lPVtlLHQsbl06KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSk6KGU9bnVsbCxfcj1yKSxlfWZ1bmN0aW9uIHNuKCl7dmFyIGU7cmV0dXJuIGU9bG4oKSxudWxsPT09ZSYmKGU9dW4oKSxudWxsPT09ZSYmKGU9Y24oKSxudWxsPT09ZSYmKGU9ZG4oKSxudWxsPT09ZSYmKGU9cG4oKSxudWxsPT09ZSYmKGU9Zm4oKSxudWxsPT09ZSYmKGU9bW4oKSxudWxsPT09ZSYmKGU9cm4oKSkpKSkpKSksZX1mdW5jdGlvbiBsbigpe3ZhciBlLHQscixsO3JldHVybiBsPV9yLFwicmVhbG1cIj09PW4uc3Vic3RyKF9yLDUpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNSksX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcInJlYWxtXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPW9uKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCkpOihlPW51bGwsX3I9bCksZX1mdW5jdGlvbiBvbigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsZT1WKCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucmVhbG09dH0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIHVuKCl7dmFyIGUsdCxyLGwsaSxvLHUsYSxjO2lmKGE9X3IsXCJkb21haW5cIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcImRvbWFpblwiJykpLG51bGwhPT1lKWlmKHQ9VSgpLG51bGwhPT10KWlmKHI9RygpLG51bGwhPT1yKWlmKGw9YW4oKSxudWxsIT09bCl7aWYoaT1bXSxjPV9yLHU9ZCgpLG51bGwhPT11KWZvcihvPVtdO251bGwhPT11OylvLnB1c2godSksdT1kKCk7ZWxzZSBvPW51bGw7Zm9yKG51bGwhPT1vPyh1PWFuKCksbnVsbCE9PXU/bz1bbyx1XToobz1udWxsLF9yPWMpKToobz1udWxsLF9yPWMpO251bGwhPT1vOyl7aWYoaS5wdXNoKG8pLGM9X3IsdT1kKCksbnVsbCE9PXUpZm9yKG89W107bnVsbCE9PXU7KW8ucHVzaCh1KSx1PWQoKTtlbHNlIG89bnVsbDtudWxsIT09bz8odT1hbigpLG51bGwhPT11P289W28sdV06KG89bnVsbCxfcj1jKSk6KG89bnVsbCxfcj1jKX1udWxsIT09aT8obz1qKCksbnVsbCE9PW8/ZT1bZSx0LHIsbCxpLG9dOihlPW51bGwsX3I9YSkpOihlPW51bGwsX3I9YSl9ZWxzZSBlPW51bGwsX3I9YTtlbHNlIGU9bnVsbCxfcj1hO2Vsc2UgZT1udWxsLF9yPWE7ZWxzZSBlPW51bGwsX3I9YTtyZXR1cm4gZX1mdW5jdGlvbiBhbigpe3ZhciBlO3JldHVybiBlPUxlKCksbnVsbD09PWUmJihlPUZlKCkpLGV9ZnVuY3Rpb24gY24oKXt2YXIgZSx0LHIsbDtyZXR1cm4gbD1fcixcIm5vbmNlXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJub25jZVwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1obigpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gaG4oKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9VigpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLm5vbmNlPXR9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBkbigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcIm9wYXF1ZVwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wib3BhcXVlXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPVYoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5vcGFxdWU9dH0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIHBuKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixcInN0YWxlXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJzdGFsZVwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8oaT1fcixcInRydWVcIj09PW4uc3Vic3RyKF9yLDQpLnRvTG93ZXJDYXNlKCk/KHI9bi5zdWJzdHIoX3IsNCksX3IrPTQpOihyPW51bGwsMD09PXZyJiZzKCdcInRydWVcIicpKSxudWxsIT09ciYmKHI9ZnVuY3Rpb24oZSl7eXIuc3RhbGU9ITB9KGkpKSxudWxsPT09ciYmKF9yPWkpLG51bGw9PT1yJiYoaT1fcixcImZhbHNlXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhyPW4uc3Vic3RyKF9yLDUpLF9yKz01KToocj1udWxsLDA9PT12ciYmcygnXCJmYWxzZVwiJykpLG51bGwhPT1yJiYocj1mdW5jdGlvbihlKXt5ci5zdGFsZT0hMX0oaSkpLG51bGw9PT1yJiYoX3I9aSkpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpKTooZT1udWxsLF9yPWwpLGV9ZnVuY3Rpb24gZm4oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJhbGdvcml0aG1cIj09PW4uc3Vic3RyKF9yLDkpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsOSksX3IrPTkpOihlPW51bGwsMD09PXZyJiZzKCdcImFsZ29yaXRobVwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8oXCJtZDVcIj09PW4uc3Vic3RyKF9yLDMpLnRvTG93ZXJDYXNlKCk/KHI9bi5zdWJzdHIoX3IsMyksX3IrPTMpOihyPW51bGwsMD09PXZyJiZzKCdcIk1ENVwiJykpLG51bGw9PT1yJiYoXCJtZDUtc2Vzc1wiPT09bi5zdWJzdHIoX3IsOCkudG9Mb3dlckNhc2UoKT8ocj1uLnN1YnN0cihfciw4KSxfcis9OCk6KHI9bnVsbCwwPT09dnImJnMoJ1wiTUQ1LXNlc3NcIicpKSxudWxsPT09ciYmKHI9SSgpKSksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuYWxnb3JpdGhtPXQudG9VcHBlckNhc2UoKX0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIG1uKCl7dmFyIGUsdCxyLGwsaSxvLHUsYSxjLGg7aWYoYT1fcixcInFvcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wicW9wXCInKSksbnVsbCE9PWUpaWYodD1VKCksbnVsbCE9PXQpaWYocj1HKCksbnVsbCE9PXIpe2lmKGM9X3IsbD1nbigpLG51bGwhPT1sKXtmb3IoaT1bXSxoPV9yLDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIixcIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCIsXCInKSksbnVsbCE9PW8/KHU9Z24oKSxudWxsIT09dT9vPVtvLHVdOihvPW51bGwsX3I9aCkpOihvPW51bGwsX3I9aCk7bnVsbCE9PW87KWkucHVzaChvKSxoPV9yLDQ0PT09bi5jaGFyQ29kZUF0KF9yKT8obz1cIixcIixfcisrKToobz1udWxsLDA9PT12ciYmcygnXCIsXCInKSksbnVsbCE9PW8/KHU9Z24oKSxudWxsIT09dT9vPVtvLHVdOihvPW51bGwsX3I9aCkpOihvPW51bGwsX3I9aCk7bnVsbCE9PWk/bD1bbCxpXToobD1udWxsLF9yPWMpfWVsc2UgbD1udWxsLF9yPWM7bnVsbCE9PWw/KGk9aigpLG51bGwhPT1pP2U9W2UsdCxyLGwsaV06KGU9bnVsbCxfcj1hKSk6KGU9bnVsbCxfcj1hKX1lbHNlIGU9bnVsbCxfcj1hO2Vsc2UgZT1udWxsLF9yPWE7ZWxzZSBlPW51bGwsX3I9YTtyZXR1cm4gZX1mdW5jdGlvbiBnbigpe3ZhciBlLHQ7cmV0dXJuIHQ9X3IsXCJhdXRoLWludFwiPT09bi5zdWJzdHIoX3IsOCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw4KSxfcis9OCk6KGU9bnVsbCwwPT09dnImJnMoJ1wiYXV0aC1pbnRcIicpKSxudWxsPT09ZSYmKFwiYXV0aFwiPT09bi5zdWJzdHIoX3IsNCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw0KSxfcis9NCk6KGU9bnVsbCwwPT09dnImJnMoJ1wiYXV0aFwiJykpLG51bGw9PT1lJiYoZT1JKCkpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5xb3B8fCh5ci5xb3A9W10pLHlyLnFvcC5wdXNoKHQudG9Mb3dlckNhc2UoKSl9KHQsZSkpLG51bGw9PT1lJiYoX3I9dCksZX1mdW5jdGlvbiBUbigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9SSgpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49aygpLG51bGwhPT1uPyhyPUkoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49aygpLG51bGwhPT1uPyhyPUkoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gX24oKXt2YXIgZSx0LG4scixzLGwsaTtpZihzPV9yLGw9X3IsZT12bigpLG51bGwhPT1lKXtmb3IodD1bXSxpPV9yLG49aygpLG51bGwhPT1uPyhyPXZuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT1uOyl0LnB1c2gobiksaT1fcixuPWsoKSxudWxsIT09bj8ocj12bigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3ZhciB0LG47Zm9yKG49eXIubXVsdGlfaGVhZGVyLmxlbmd0aCx0PTA7bj50O3QrKylpZihudWxsPT09eXIubXVsdGlfaGVhZGVyW3RdLnBhcnNlZCl7eXI9bnVsbDticmVha315cj1udWxsIT09eXI/eXIubXVsdGlfaGVhZGVyOi0xfShzKSksbnVsbD09PWUmJihfcj1zKSxlfWZ1bmN0aW9uIHZuKCl7dmFyIGUsdCxuLHIscyxsLGk7aWYocz1fcixsPV9yLGU9X3QoKSxudWxsIT09ZSl7Zm9yKHQ9W10saT1fcixuPUgoKSxudWxsIT09bj8ocj1SdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09bjspdC5wdXNoKG4pLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9UnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPWwpfWVsc2UgZT1udWxsLF9yPWw7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt2YXIgdDt5ci5tdWx0aV9oZWFkZXJ8fCh5ci5tdWx0aV9oZWFkZXI9W10pO3RyeXt0PW5ldyBBcih5ci51cmkseXIuZGlzcGxheV9uYW1lLHlyLnBhcmFtcyksZGVsZXRlIHlyLnVyaSxkZWxldGUgeXIuZGlzcGxheV9uYW1lLGRlbGV0ZSB5ci5wYXJhbXN9Y2F0Y2gobil7dD1udWxsfXlyLm11bHRpX2hlYWRlci5wdXNoKHtwb3NzaXRpb246X3Isb2Zmc2V0OmUscGFyc2VkOnR9KX0ocykpLG51bGw9PT1lJiYoX3I9cyksZX1mdW5jdGlvbiBDbigpe3ZhciBlLHQscixsLGksbyx1O2lmKGk9X3Isbz1fcixcInNpcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wiU0lQXCInKSksbnVsbD09PWUmJihlPUkoKSksbnVsbCE9PWUpe2Zvcih0PVtdLHU9X3Iscj1IKCksbnVsbCE9PXI/KGw9U24oKSxudWxsIT09bD9yPVtyLGxdOihyPW51bGwsX3I9dSkpOihyPW51bGwsX3I9dSk7bnVsbCE9PXI7KXQucHVzaChyKSx1PV9yLHI9SCgpLG51bGwhPT1yPyhsPVNuKCksbnVsbCE9PWw/cj1bcixsXToocj1udWxsLF9yPXUpKToocj1udWxsLF9yPXUpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1vKX1lbHNlIGU9bnVsbCxfcj1vO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXtpZih5ci5wcm90b2NvbD10LnRvTG93ZXJDYXNlKCkseXIucGFyYW1zfHwoeXIucGFyYW1zPXt9KSx5ci5wYXJhbXMudGV4dCYmJ1wiJz09PXlyLnBhcmFtcy50ZXh0WzBdKXt2YXIgbj15ci5wYXJhbXMudGV4dDt5ci50ZXh0PW4uc3Vic3RyaW5nKDEsbi5sZW5ndGgtMSksZGVsZXRlIHlyLnBhcmFtcy50ZXh0fX0oaSxlWzBdKSksbnVsbD09PWUmJihfcj1pKSxlfWZ1bmN0aW9uIFNuKCl7dmFyIGU7cmV0dXJuIGU9RW4oKSxudWxsPT09ZSYmKGU9UnQoKSksZX1mdW5jdGlvbiBFbigpe3ZhciBlLHQscixsLG8sdTtpZihvPV9yLHU9X3IsXCJjYXVzZVwiPT09bi5zdWJzdHIoX3IsNSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw1KSxfcis9NSk6KGU9bnVsbCwwPT09dnImJnMoJ1wiY2F1c2VcIicpKSxudWxsIT09ZSlpZih0PVUoKSxudWxsIT09dCl7aWYobD1pKCksbnVsbCE9PWwpZm9yKHI9W107bnVsbCE9PWw7KXIucHVzaChsKSxsPWkoKTtlbHNlIHI9bnVsbDtudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj11KX1lbHNlIGU9bnVsbCxfcj11O2Vsc2UgZT1udWxsLF9yPXU7cmV0dXJuIG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLmNhdXNlPXBhcnNlSW50KHQuam9pbihcIlwiKSl9KG8sZVsyXSkpLG51bGw9PT1lJiYoX3I9byksZX1mdW5jdGlvbiBBbigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9SSgpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49aygpLG51bGwhPT1uPyhyPUkoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49aygpLG51bGwhPT1uPyhyPUkoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24geW4oKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPVJuKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9Um4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49aygpLG51bGwhPT1uPyhyPVJuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIFJuKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1fdCgpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPVJ0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPUgoKSxudWxsIT09bj8ocj1SdCgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiBibigpe3ZhciBlLHQsbixyLHMsbDtpZihzPV9yLGU9SW4oKSxudWxsIT09ZSl7Zm9yKHQ9W10sbD1fcixuPUgoKSxudWxsIT09bj8ocj13bigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9d24oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXMpfWVsc2UgZT1udWxsLF9yPXM7cmV0dXJuIGV9ZnVuY3Rpb24gSW4oKXt2YXIgZSx0O3JldHVybiB0PV9yLFwiYWN0aXZlXCI9PT1uLnN1YnN0cihfciw2KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDYpLF9yKz02KTooZT1udWxsLDA9PT12ciYmcygnXCJhY3RpdmVcIicpKSxudWxsPT09ZSYmKFwicGVuZGluZ1wiPT09bi5zdWJzdHIoX3IsNykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw3KSxfcis9Nyk6KGU9bnVsbCwwPT09dnImJnMoJ1wicGVuZGluZ1wiJykpLG51bGw9PT1lJiYoXCJ0ZXJtaW5hdGVkXCI9PT1uLnN1YnN0cihfciwxMCkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwxMCksX3IrPTEwKTooZT1udWxsLDA9PT12ciYmcygnXCJ0ZXJtaW5hdGVkXCInKSksbnVsbD09PWUmJihlPUkoKSkpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7eXIuc3RhdGU9bi5zdWJzdHJpbmcoX3IsZSl9KHQpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gd24oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJyZWFzb25cIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcInJlYXNvblwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1ObigpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiB0JiYoeXIucmVhc29uPXQpfShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLG51bGw9PT1lJiYobD1fcixpPV9yLFwiZXhwaXJlc1wiPT09bi5zdWJzdHIoX3IsNykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw3KSxfcis9Nyk6KGU9bnVsbCwwPT09dnImJnMoJ1wiZXhwaXJlc1wiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1BdCgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiB0JiYoeXIuZXhwaXJlcz10KX0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxudWxsPT09ZSYmKGw9X3IsaT1fcixcInJldHJ5X2FmdGVyXCI9PT1uLnN1YnN0cihfciwxMSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwxMSksX3IrPTExKTooZT1udWxsLDA9PT12ciYmcygnXCJyZXRyeV9hZnRlclwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1BdCgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe1widW5kZWZpbmVkXCIhPXR5cGVvZiB0JiYoeXIucmV0cnlfYWZ0ZXI9dCl9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksbnVsbD09PWUmJihlPVJ0KCkpKSksZX1mdW5jdGlvbiBObigpe3ZhciBlO3JldHVyblwiZGVhY3RpdmF0ZWRcIj09PW4uc3Vic3RyKF9yLDExKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDExKSxfcis9MTEpOihlPW51bGwsMD09PXZyJiZzKCdcImRlYWN0aXZhdGVkXCInKSksbnVsbD09PWUmJihcInByb2JhdGlvblwiPT09bi5zdWJzdHIoX3IsOSkudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw5KSxfcis9OSk6KGU9bnVsbCwwPT09dnImJnMoJ1wicHJvYmF0aW9uXCInKSksbnVsbD09PWUmJihcInJlamVjdGVkXCI9PT1uLnN1YnN0cihfciw4KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDgpLF9yKz04KTooZT1udWxsLDA9PT12ciYmcygnXCJyZWplY3RlZFwiJykpLG51bGw9PT1lJiYoXCJ0aW1lb3V0XCI9PT1uLnN1YnN0cihfciw3KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDcpLF9yKz03KTooZT1udWxsLDA9PT12ciYmcygnXCJ0aW1lb3V0XCInKSksbnVsbD09PWUmJihcImdpdmV1cFwiPT09bi5zdWJzdHIoX3IsNikudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciw2KSxfcis9Nik6KGU9bnVsbCwwPT09dnImJnMoJ1wiZ2l2ZXVwXCInKSksbnVsbD09PWUmJihcIm5vcmVzb3VyY2VcIj09PW4uc3Vic3RyKF9yLDEwKS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDEwKSxfcis9MTApOihlPW51bGwsMD09PXZyJiZzKCdcIm5vcmVzb3VyY2VcIicpKSxudWxsPT09ZSYmKFwiaW52YXJpYW50XCI9PT1uLnN1YnN0cihfciw5KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDkpLF9yKz05KTooZT1udWxsLDA9PT12ciYmcygnXCJpbnZhcmlhbnRcIicpKSxudWxsPT09ZSYmKGU9SSgpKSkpKSkpKSxlfWZ1bmN0aW9uIERuKCl7dmFyIGU7cmV0dXJuIGU9RSgpLGU9bnVsbCE9PWU/ZTpcIlwifWZ1bmN0aW9uIE9uKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1JKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9SSgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09bjspdC5wdXNoKG4pLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9SSgpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZT1udWxsIT09ZT9lOlwiXCJ9ZnVuY3Rpb24geG4oKXt2YXIgZSx0LG4scixzLGwsaTtpZihzPV9yLGw9X3IsZT1LKCksbnVsbD09PWUmJihlPV90KCkpLG51bGwhPT1lKXtmb3IodD1bXSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPVVuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT1uOyl0LnB1c2gobiksaT1fcixuPUgoKSxudWxsIT09bj8ocj1VbigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1pKSk6KG49bnVsbCxfcj1pKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bCl9ZWxzZSBlPW51bGwsX3I9bDtyZXR1cm4gbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3ZhciB0PXlyLnRhZzt0cnl7eXI9bmV3IEFyKHlyLnVyaSx5ci5kaXNwbGF5X25hbWUseXIucGFyYW1zKSx0JiZ5ci5zZXRQYXJhbShcInRhZ1wiLHQpfWNhdGNoKG4pe3lyPS0xfX0ocykpLG51bGw9PT1lJiYoX3I9cyksZX1mdW5jdGlvbiBVbigpe3ZhciBlO3JldHVybiBlPSR0KCksbnVsbD09PWUmJihlPVJ0KCkpLGV9ZnVuY3Rpb24gTW4oKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPVBuKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1rKCksbnVsbCE9PW4/KHI9UG4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49aygpLG51bGwhPT1uPyhyPVBuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIFBuKCl7dmFyIGUsdCxuLHIscyxsLGksbztpZihpPV9yLGU9am4oKSxudWxsIT09ZSlpZih0PXYoKSxudWxsIT09dClpZihuPXpuKCksbnVsbCE9PW4pe2ZvcihyPVtdLG89X3Iscz1IKCksbnVsbCE9PXM/KGw9cW4oKSxudWxsIT09bD9zPVtzLGxdOihzPW51bGwsX3I9bykpOihzPW51bGwsX3I9byk7bnVsbCE9PXM7KXIucHVzaChzKSxvPV9yLHM9SCgpLG51bGwhPT1zPyhsPXFuKCksbnVsbCE9PWw/cz1bcyxsXToocz1udWxsLF9yPW8pKToocz1udWxsLF9yPW8pO251bGwhPT1yP2U9W2UsdCxuLHJdOihlPW51bGwsX3I9aSl9ZWxzZSBlPW51bGwsX3I9aTtlbHNlIGU9bnVsbCxfcj1pO2Vsc2UgZT1udWxsLF9yPWk7cmV0dXJuIGV9ZnVuY3Rpb24gcW4oKXt2YXIgZTtyZXR1cm4gZT1MbigpLG51bGw9PT1lJiYoZT1rbigpLG51bGw9PT1lJiYoZT1IbigpLG51bGw9PT1lJiYoZT1GbigpLG51bGw9PT1lJiYoZT1HbigpLG51bGw9PT1lJiYoZT1SdCgpKSkpKSksZX1mdW5jdGlvbiBMbigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcInR0bFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1widHRsXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPUpuKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudHRsPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBrbigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcIm1hZGRyXCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJtYWRkclwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1sZSgpLG51bGwhPT1yP2U9W2UsdCxyXTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpKTooZT1udWxsLF9yPWkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLm1hZGRyPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBIbigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcInJlY2VpdmVkXCI9PT1uLnN1YnN0cihfciw4KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDgpLF9yKz04KTooZT1udWxsLDA9PT12ciYmcygnXCJyZWNlaXZlZFwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1wZSgpLG51bGw9PT1yJiYocj1jZSgpKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5yZWNlaXZlZD10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gRm4oKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJicmFuY2hcIj09PW4uc3Vic3RyKF9yLDYpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNiksX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcImJyYW5jaFwiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1JKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuYnJhbmNoPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBHbigpe3ZhciBlLHQscixsLG8sdSxhO2lmKG89X3IsdT1fcixcInJwb3J0XCI9PT1uLnN1YnN0cihfciw1KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDUpLF9yKz01KTooZT1udWxsLDA9PT12ciYmcygnXCJycG9ydFwiJykpLG51bGwhPT1lKXtpZihhPV9yLHQ9VSgpLG51bGwhPT10KXtmb3Iocj1bXSxsPWkoKTtudWxsIT09bDspci5wdXNoKGwpLGw9aSgpO251bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1hKX1lbHNlIHQ9bnVsbCxfcj1hO3Q9bnVsbCE9PXQ/dDpcIlwiLG51bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj11KX1lbHNlIGU9bnVsbCxfcj11O3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHJlc3BvbnNlX3BvcnQmJih5ci5ycG9ydD1yZXNwb25zZV9wb3J0LmpvaW4oXCJcIikpfShvKSksbnVsbD09PWUmJihfcj1vKSxlfWZ1bmN0aW9uIGpuKCl7dmFyIGUsdCxuLHIscyxsO3JldHVybiBsPV9yLGU9V24oKSxudWxsIT09ZT8odD14KCksbnVsbCE9PXQ/KG49SSgpLG51bGwhPT1uPyhyPXgoKSxudWxsIT09cj8ocz1CbigpLG51bGwhPT1zP2U9W2UsdCxuLHIsc106KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSk6KGU9bnVsbCxfcj1sKSxlfWZ1bmN0aW9uIFduKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixcInNpcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wiU0lQXCInKSksbnVsbD09PWUmJihlPUkoKSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucHJvdG9jb2w9dH0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIEJuKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixcInVkcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wiVURQXCInKSksbnVsbD09PWUmJihcInRjcFwiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wiVENQXCInKSksbnVsbD09PWUmJihcInRsc1wiPT09bi5zdWJzdHIoX3IsMykudG9Mb3dlckNhc2UoKT8oZT1uLnN1YnN0cihfciwzKSxfcis9Myk6KGU9bnVsbCwwPT09dnImJnMoJ1wiVExTXCInKSksbnVsbD09PWUmJihcInNjdHBcIj09PW4uc3Vic3RyKF9yLDQpLnRvTG93ZXJDYXNlKCk/KGU9bi5zdWJzdHIoX3IsNCksX3IrPTQpOihlPW51bGwsMD09PXZyJiZzKCdcIlNDVFBcIicpKSxudWxsPT09ZSYmKGU9SSgpKSkpKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci50cmFuc3BvcnQ9dH0odCxlKSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIHpuKCl7dmFyIGUsdCxuLHIscztyZXR1cm4gcj1fcixlPVZuKCksbnVsbCE9PWU/KHM9X3IsdD1GKCksbnVsbCE9PXQ/KG49WW4oKSxudWxsIT09bj90PVt0LG5dOih0PW51bGwsX3I9cykpOih0PW51bGwsX3I9cyksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/ZT1bZSx0XTooZT1udWxsLF9yPXIpKTooZT1udWxsLF9yPXIpLGV9ZnVuY3Rpb24gVm4oKXt2YXIgZSx0O3JldHVybiB0PV9yLGU9cGUoKSxudWxsPT09ZSYmKGU9YWUoKSxudWxsPT09ZSYmKGU9aWUoKSkpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci5ob3N0PW4uc3Vic3RyaW5nKF9yLGUpfSh0KSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIFluKCl7dmFyIGUsdCxuLHIscyxsLG87cmV0dXJuIGw9X3Isbz1fcixlPWkoKSxlPW51bGwhPT1lP2U6XCJcIixudWxsIT09ZT8odD1pKCksdD1udWxsIT09dD90OlwiXCIsbnVsbCE9PXQ/KG49aSgpLG49bnVsbCE9PW4/bjpcIlwiLG51bGwhPT1uPyhyPWkoKSxyPW51bGwhPT1yP3I6XCJcIixudWxsIT09cj8ocz1pKCkscz1udWxsIT09cz9zOlwiXCIsbnVsbCE9PXM/ZT1bZSx0LG4scixzXTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pKTooZT1udWxsLF9yPW8pLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlLHQpe3lyLnBvcnQ9cGFyc2VJbnQodC5qb2luKFwiXCIpKX0obCxlKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIEpuKCl7dmFyIGUsdCxuLHIscztyZXR1cm4gcj1fcixzPV9yLGU9aSgpLG51bGwhPT1lPyh0PWkoKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD8obj1pKCksbj1udWxsIT09bj9uOlwiXCIsbnVsbCE9PW4/ZT1bZSx0LG5dOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cyksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHBhcnNlSW50KHQuam9pbihcIlwiKSl9KHIsZSkpLG51bGw9PT1lJiYoX3I9ciksZX1mdW5jdGlvbiBLbigpe3ZhciBlO3JldHVybiBlPXRuKCl9ZnVuY3Rpb24gJG4oKXt2YXIgZSx0LG4scixzLGw7aWYocz1fcixlPVhuKCksbnVsbCE9PWUpe2Zvcih0PVtdLGw9X3Isbj1IKCksbnVsbCE9PW4/KHI9UW4oKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9bCkpOihuPW51bGwsX3I9bCk7bnVsbCE9PW47KXQucHVzaChuKSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPVFuKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1zKX1lbHNlIGU9bnVsbCxfcj1zO3JldHVybiBlfWZ1bmN0aW9uIFhuKCl7dmFyIGUsdDtyZXR1cm4gdD1fcixlPUF0KCksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIuZXhwaXJlcz10fSh0LGUpKSxudWxsPT09ZSYmKF9yPXQpLGV9ZnVuY3Rpb24gUW4oKXt2YXIgZTtyZXR1cm4gZT1abigpLG51bGw9PT1lJiYoZT1SdCgpKSxlfWZ1bmN0aW9uIFpuKCl7dmFyIGUsdCxyLGwsaTtyZXR1cm4gbD1fcixpPV9yLFwicmVmcmVzaGVyXCI9PT1uLnN1YnN0cihfciw5KS50b0xvd2VyQ2FzZSgpPyhlPW4uc3Vic3RyKF9yLDkpLF9yKz05KTooZT1udWxsLDA9PT12ciYmcygnXCJyZWZyZXNoZXJcIicpKSxudWxsIT09ZT8odD1VKCksbnVsbCE9PXQ/KFwidWFjXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhyPW4uc3Vic3RyKF9yLDMpLF9yKz0zKToocj1udWxsLDA9PT12ciYmcygnXCJ1YWNcIicpKSxudWxsPT09ciYmKFwidWFzXCI9PT1uLnN1YnN0cihfciwzKS50b0xvd2VyQ2FzZSgpPyhyPW4uc3Vic3RyKF9yLDMpLF9yKz0zKToocj1udWxsLDA9PT12ciYmcygnXCJ1YXNcIicpKSksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIucmVmcmVzaGVyPXQudG9Mb3dlckNhc2UoKX0obCxlWzJdKSksbnVsbD09PWUmJihfcj1sKSxlfWZ1bmN0aW9uIGVyKCl7dmFyIGUsdCxuLHI7cmV0dXJuIHI9X3IsZT1JKCksbnVsbCE9PWU/KHQ9UygpLG51bGwhPT10PyhuPXRyKCksbnVsbCE9PW4/ZT1bZSx0LG5dOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiB0cigpe3ZhciBlLHQ7Zm9yKGU9W10sdD1BKCksbnVsbD09PXQmJih0PVIoKSxudWxsPT09dCYmKHQ9digpKSk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PUEoKSxudWxsPT09dCYmKHQ9UigpLG51bGw9PT10JiYodD12KCkpKTtyZXR1cm4gZX1mdW5jdGlvbiBucigpe3ZhciBlLHQ7Zm9yKGU9W10sdD1jKCk7bnVsbCE9PXQ7KWUucHVzaCh0KSx0PWMoKTtyZXR1cm4gZX1mdW5jdGlvbiBycigpe3ZhciBlLHQscjtyZXR1cm4gcj1fcixcInV1aWQ6XCI9PT1uLnN1YnN0cihfciw1KT8oZT1cInV1aWQ6XCIsX3IrPTUpOihlPW51bGwsMD09PXZyJiZzKCdcInV1aWQ6XCInKSksbnVsbCE9PWU/KHQ9c3IoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiBzcigpe3ZhciBlLHQscixsLGksbyx1LGEsYyxoLGQ7cmV0dXJuIGg9X3IsZD1fcixlPWlyKCksbnVsbCE9PWU/KDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIi1cIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbCE9PXQ/KHI9bHIoKSxudWxsIT09cj8oNDU9PT1uLmNoYXJDb2RlQXQoX3IpPyhsPVwiLVwiLF9yKyspOihsPW51bGwsMD09PXZyJiZzKCdcIi1cIicpKSxudWxsIT09bD8oaT1scigpLG51bGwhPT1pPyg0NT09PW4uY2hhckNvZGVBdChfcik/KG89XCItXCIsX3IrKyk6KG89bnVsbCwwPT09dnImJnMoJ1wiLVwiJykpLG51bGwhPT1vPyh1PWxyKCksbnVsbCE9PXU/KDQ1PT09bi5jaGFyQ29kZUF0KF9yKT8oYT1cIi1cIixfcisrKTooYT1udWxsLDA9PT12ciYmcygnXCItXCInKSksbnVsbCE9PWE/KGM9b3IoKSxudWxsIT09Yz9lPVtlLHQscixsLGksbyx1LGEsY106KGU9bnVsbCxfcj1kKSk6KGU9bnVsbCxfcj1kKSk6KGU9bnVsbCxfcj1kKSk6KGU9bnVsbCxfcj1kKSk6KGU9bnVsbCxfcj1kKSk6KGU9bnVsbCxfcj1kKSk6KGU9bnVsbCxfcj1kKSk6KGU9bnVsbCxfcj1kKSk6KGU9bnVsbCxfcj1kKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5cj1uLnN1YnN0cmluZyhfcis1LGUpfShoLGVbMF0pKSxudWxsPT09ZSYmKF9yPWgpLGV9ZnVuY3Rpb24gbHIoKXt2YXIgZSx0LG4scixzO3JldHVybiBzPV9yLGU9dSgpLG51bGwhPT1lPyh0PXUoKSxudWxsIT09dD8obj11KCksbnVsbCE9PW4/KHI9dSgpLG51bGwhPT1yP2U9W2UsdCxuLHJdOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cykpOihlPW51bGwsX3I9cyksZX1mdW5jdGlvbiBpcigpe3ZhciBlLHQsbjtyZXR1cm4gbj1fcixlPWxyKCksbnVsbCE9PWU/KHQ9bHIoKSxudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9bikpOihlPW51bGwsX3I9biksZX1mdW5jdGlvbiBvcigpe3ZhciBlLHQsbixyO3JldHVybiByPV9yLGU9bHIoKSxudWxsIT09ZT8odD1scigpLG51bGwhPT10PyhuPWxyKCksbnVsbCE9PW4/ZT1bZSx0LG5dOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9cikpOihlPW51bGwsX3I9ciksZX1mdW5jdGlvbiB1cigpe3ZhciBlLHQsbixyLHMsbCxpO2lmKHM9X3IsbD1fcixlPUsoKSxudWxsPT09ZSYmKGU9X3QoKSksbnVsbCE9PWUpe2Zvcih0PVtdLGk9X3Isbj1IKCksbnVsbCE9PW4/KHI9UnQoKSxudWxsIT09cj9uPVtuLHJdOihuPW51bGwsX3I9aSkpOihuPW51bGwsX3I9aSk7bnVsbCE9PW47KXQucHVzaChuKSxpPV9yLG49SCgpLG51bGwhPT1uPyhyPVJ0KCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWkpKToobj1udWxsLF9yPWkpO251bGwhPT10P2U9W2UsdF06KGU9bnVsbCxfcj1sKX1lbHNlIGU9bnVsbCxfcj1sO3JldHVybiBudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSl7dHJ5e3lyPW5ldyBBcih5ci51cmkseXIuZGlzcGxheV9uYW1lLHlyLnBhcmFtcyl9Y2F0Y2godCl7eXI9LTF9fShzKSksbnVsbD09PWUmJihfcj1zKSxlfWZ1bmN0aW9uIGFyKCl7dmFyIGUsdCxuLHIscyxsO2lmKHM9X3IsZT1jcigpLG51bGwhPT1lKXtmb3IodD1bXSxsPV9yLG49SCgpLG51bGwhPT1uPyhyPWhyKCksbnVsbCE9PXI/bj1bbixyXToobj1udWxsLF9yPWwpKToobj1udWxsLF9yPWwpO251bGwhPT1uOyl0LnB1c2gobiksbD1fcixuPUgoKSxudWxsIT09bj8ocj1ocigpLG51bGwhPT1yP249W24scl06KG49bnVsbCxfcj1sKSk6KG49bnVsbCxfcj1sKTtudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9cyl9ZWxzZSBlPW51bGwsX3I9cztyZXR1cm4gZX1mdW5jdGlvbiBjcigpe3ZhciBlLHQscixsLGksbztyZXR1cm4gbD1fcixpPV9yLGU9RCgpLG51bGwhPT1lPyhvPV9yLDY0PT09bi5jaGFyQ29kZUF0KF9yKT8odD1cIkBcIixfcisrKToodD1udWxsLDA9PT12ciYmcygnXCJAXCInKSksbnVsbCE9PXQ/KHI9RCgpLG51bGwhPT1yP3Q9W3Qscl06KHQ9bnVsbCxfcj1vKSk6KHQ9bnVsbCxfcj1vKSx0PW51bGwhPT10P3Q6XCJcIixudWxsIT09dD9lPVtlLHRdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUpe3lyLmNhbGxfaWQ9bi5zdWJzdHJpbmcoX3IsZSl9KGwpKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gaHIoKXt2YXIgZTtyZXR1cm4gZT1kcigpLG51bGw9PT1lJiYoZT1wcigpLG51bGw9PT1lJiYoZT1mcigpLG51bGw9PT1lJiYoZT1SdCgpKSkpLGV9ZnVuY3Rpb24gZHIoKXt2YXIgZSx0LHIsbCxpO3JldHVybiBsPV9yLGk9X3IsXCJ0by10YWdcIj09PW4uc3Vic3RyKF9yLDYpPyhlPVwidG8tdGFnXCIsX3IrPTYpOihlPW51bGwsMD09PXZyJiZzKCdcInRvLXRhZ1wiJykpLG51bGwhPT1lPyh0PVUoKSxudWxsIT09dD8ocj1JKCksbnVsbCE9PXI/ZT1bZSx0LHJdOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSkpOihlPW51bGwsX3I9aSksbnVsbCE9PWUmJihlPWZ1bmN0aW9uKGUsdCl7eXIudG9fdGFnPXR9KGwsZVsyXSkpLG51bGw9PT1lJiYoX3I9bCksZX1mdW5jdGlvbiBwcigpe3ZhciBlLHQscixsLGk7cmV0dXJuIGw9X3IsaT1fcixcImZyb20tdGFnXCI9PT1uLnN1YnN0cihfciw4KT8oZT1cImZyb20tdGFnXCIsX3IrPTgpOihlPW51bGwsMD09PXZyJiZzKCdcImZyb20tdGFnXCInKSksbnVsbCE9PWU/KHQ9VSgpLG51bGwhPT10PyhyPUkoKSxudWxsIT09cj9lPVtlLHQscl06KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSk6KGU9bnVsbCxfcj1pKSxudWxsIT09ZSYmKGU9ZnVuY3Rpb24oZSx0KXt5ci5mcm9tX3RhZz10fShsLGVbMl0pKSxudWxsPT09ZSYmKF9yPWwpLGV9ZnVuY3Rpb24gZnIoKXt2YXIgZSx0O3JldHVybiB0PV9yLFwiZWFybHktb25seVwiPT09bi5zdWJzdHIoX3IsMTApPyhlPVwiZWFybHktb25seVwiLF9yKz0xMCk6KGU9bnVsbCwwPT09dnImJnMoJ1wiZWFybHktb25seVwiJykpLG51bGwhPT1lJiYoZT1mdW5jdGlvbihlKXt5ci5lYXJseV9vbmx5PSEwfSh0KSksbnVsbD09PWUmJihfcj10KSxlfWZ1bmN0aW9uIG1yKGUpe2Uuc29ydCgpO2Zvcih2YXIgdD1udWxsLG49W10scj0wO3I8ZS5sZW5ndGg7cisrKWVbcl0hPT10JiYobi5wdXNoKGVbcl0pLHQ9ZVtyXSk7cmV0dXJuIG59ZnVuY3Rpb24gZ3IoKXtmb3IodmFyIGU9MSx0PTEscj0hMSxzPTA7czxNYXRoLm1heChfcixDcik7cysrKXt2YXIgbD1uLmNoYXJBdChzKTtcIlxcblwiPT09bD8ocnx8ZSsrLHQ9MSxyPSExKTpcIlxcclwiPT09bHx8XCJcXHUyMDI4XCI9PT1sfHxcIlxcdTIwMjlcIj09PWw/KGUrKyx0PTEscj0hMCk6KHQrKyxyPSExKX1yZXR1cm57bGluZTplLGNvbHVtbjp0fX12YXIgVHI9e0NSTEY6bCxESUdJVDppLEFMUEhBOm8sSEVYRElHOnUsV1NQOmEsT0NURVQ6YyxEUVVPVEU6aCxTUDpkLEhUQUI6cCxhbHBoYW51bTpmLHJlc2VydmVkOm0sdW5yZXNlcnZlZDpnLG1hcms6VCxlc2NhcGVkOl8sTFdTOnYsU1dTOkMsSENPTE9OOlMsVEVYVF9VVEY4X1RSSU06RSxURVhUX1VURjhjaGFyOkEsVVRGOF9OT05BU0NJSTp5LFVURjhfQ09OVDpSLExIRVg6Yix0b2tlbjpJLHRva2VuX25vZG90Oncsc2VwYXJhdG9yczpOLHdvcmQ6RCxTVEFSOk8sU0xBU0g6eCxFUVVBTDpVLExQQVJFTjpNLFJQQVJFTjpQLFJBUVVPVDpxLExBUVVPVDpMLENPTU1BOmssU0VNSTpILENPTE9OOkYsTERRVU9UOkcsUkRRVU9UOmosY29tbWVudDpXLGN0ZXh0OkIscXVvdGVkX3N0cmluZzp6LHF1b3RlZF9zdHJpbmdfY2xlYW46VixxZHRleHQ6WSxxdW90ZWRfcGFpcjpKLFNJUF9VUklfbm9wYXJhbXM6SyxTSVBfVVJJOiQsdXJpX3NjaGVtZTpYLHVyaV9zY2hlbWVfc2lwczpRLHVyaV9zY2hlbWVfc2lwOlosdXNlcmluZm86ZWUsdXNlcjp0ZSx1c2VyX3VucmVzZXJ2ZWQ6bmUscGFzc3dvcmQ6cmUsaG9zdHBvcnQ6c2UsaG9zdDpsZSxob3N0bmFtZTppZSxkb21haW5sYWJlbDpvZSx0b3BsYWJlbDp1ZSxJUHY2cmVmZXJlbmNlOmFlLElQdjZhZGRyZXNzOmNlLGgxNjpoZSxsczMyOmRlLElQdjRhZGRyZXNzOnBlLGRlY19vY3RldDpmZSxwb3J0Om1lLHVyaV9wYXJhbWV0ZXJzOmdlLHVyaV9wYXJhbWV0ZXI6VGUsdHJhbnNwb3J0X3BhcmFtOl9lLHVzZXJfcGFyYW06dmUsbWV0aG9kX3BhcmFtOkNlLHR0bF9wYXJhbTpTZSxtYWRkcl9wYXJhbTpFZSxscl9wYXJhbTpBZSxvdGhlcl9wYXJhbTp5ZSxwbmFtZTpSZSxwdmFsdWU6YmUscGFyYW1jaGFyOkllLHBhcmFtX3VucmVzZXJ2ZWQ6d2UsaGVhZGVyczpOZSxoZWFkZXI6RGUsaG5hbWU6T2UsaHZhbHVlOnhlLGhudl91bnJlc2VydmVkOlVlLFJlcXVlc3RfUmVzcG9uc2U6TWUsUmVxdWVzdF9MaW5lOlBlLFJlcXVlc3RfVVJJOnFlLGFic29sdXRlVVJJOkxlLGhpZXJfcGFydDprZSxuZXRfcGF0aDpIZSxhYnNfcGF0aDpGZSxvcGFxdWVfcGFydDpHZSx1cmljOmplLHVyaWNfbm9fc2xhc2g6V2UscGF0aF9zZWdtZW50czpCZSxzZWdtZW50OnplLHBhcmFtOlZlLHBjaGFyOlllLHNjaGVtZTpKZSxhdXRob3JpdHk6S2Usc3J2cjokZSxyZWdfbmFtZTpYZSxxdWVyeTpRZSxTSVBfVmVyc2lvbjpaZSxJTlZJVEVtOmV0LEFDS206dHQsT1BUSU9OU206bnQsQllFbTpydCxDQU5DRUxtOnN0LFJFR0lTVEVSbTpsdCxTVUJTQ1JJQkVtOml0LE5PVElGWW06b3QsUkVGRVJtOnV0LE1ldGhvZDphdCxTdGF0dXNfTGluZTpjdCxTdGF0dXNfQ29kZTpodCxleHRlbnNpb25fY29kZTpkdCxSZWFzb25fUGhyYXNlOnB0LFxuQWxsb3dfRXZlbnRzOmZ0LENhbGxfSUQ6bXQsQ29udGFjdDpndCxjb250YWN0X3BhcmFtOlR0LG5hbWVfYWRkcjpfdCxkaXNwbGF5X25hbWU6dnQsY29udGFjdF9wYXJhbXM6Q3QsY19wX3E6U3QsY19wX2V4cGlyZXM6RXQsZGVsdGFfc2Vjb25kczpBdCxxdmFsdWU6eXQsZ2VuZXJpY19wYXJhbTpSdCxnZW5fdmFsdWU6YnQsQ29udGVudF9EaXNwb3NpdGlvbjpJdCxkaXNwX3R5cGU6d3QsZGlzcF9wYXJhbTpOdCxoYW5kbGluZ19wYXJhbTpEdCxDb250ZW50X0VuY29kaW5nOk90LENvbnRlbnRfTGVuZ3RoOnh0LENvbnRlbnRfVHlwZTpVdCxtZWRpYV90eXBlOk10LG1fdHlwZTpQdCxkaXNjcmV0ZV90eXBlOnF0LGNvbXBvc2l0ZV90eXBlOkx0LGV4dGVuc2lvbl90b2tlbjprdCx4X3Rva2VuOkh0LG1fc3VidHlwZTpGdCxtX3BhcmFtZXRlcjpHdCxtX3ZhbHVlOmp0LENTZXE6V3QsQ1NlcV92YWx1ZTpCdCxFeHBpcmVzOnp0LEV2ZW50OlZ0LGV2ZW50X3R5cGU6WXQsRnJvbTpKdCxmcm9tX3BhcmFtOkt0LHRhZ19wYXJhbTokdCxNYXhfRm9yd2FyZHM6WHQsTWluX0V4cGlyZXM6UXQsTmFtZV9BZGRyX0hlYWRlcjpadCxQcm94eV9BdXRoZW50aWNhdGU6ZW4sY2hhbGxlbmdlOnRuLG90aGVyX2NoYWxsZW5nZTpubixhdXRoX3BhcmFtOnJuLGRpZ2VzdF9jbG46c24scmVhbG06bG4scmVhbG1fdmFsdWU6b24sZG9tYWluOnVuLFVSSTphbixub25jZTpjbixub25jZV92YWx1ZTpobixvcGFxdWU6ZG4sc3RhbGU6cG4sYWxnb3JpdGhtOmZuLHFvcF9vcHRpb25zOm1uLHFvcF92YWx1ZTpnbixQcm94eV9SZXF1aXJlOlRuLFJlY29yZF9Sb3V0ZTpfbixyZWNfcm91dGU6dm4sUmVhc29uOkNuLHJlYXNvbl9wYXJhbTpTbixyZWFzb25fY2F1c2U6RW4sUmVxdWlyZTpBbixSb3V0ZTp5bixyb3V0ZV9wYXJhbTpSbixTdWJzY3JpcHRpb25fU3RhdGU6Ym4sc3Vic3RhdGVfdmFsdWU6SW4sc3ViZXhwX3BhcmFtczp3bixldmVudF9yZWFzb25fdmFsdWU6Tm4sU3ViamVjdDpEbixTdXBwb3J0ZWQ6T24sVG86eG4sdG9fcGFyYW06VW4sVmlhOk1uLHZpYV9wYXJhbTpQbix2aWFfcGFyYW1zOnFuLHZpYV90dGw6TG4sdmlhX21hZGRyOmtuLHZpYV9yZWNlaXZlZDpIbix2aWFfYnJhbmNoOkZuLHJlc3BvbnNlX3BvcnQ6R24sc2VudF9wcm90b2NvbDpqbixwcm90b2NvbF9uYW1lOlduLHRyYW5zcG9ydDpCbixzZW50X2J5OnpuLHZpYV9ob3N0OlZuLHZpYV9wb3J0OlluLHR0bDpKbixXV1dfQXV0aGVudGljYXRlOktuLFNlc3Npb25fRXhwaXJlczokbixzX2VfZXhwaXJlczpYbixzX2VfcGFyYW1zOlFuLHNfZV9yZWZyZXNoZXI6Wm4sZXh0ZW5zaW9uX2hlYWRlcjplcixoZWFkZXJfdmFsdWU6dHIsbWVzc2FnZV9ib2R5Om5yLHV1aWRfVVJJOnJyLHV1aWQ6c3IsaGV4NDpscixoZXg4OmlyLGhleDEyOm9yLFJlZmVyX1RvOnVyLFJlcGxhY2VzOmFyLGNhbGxfaWQ6Y3IscmVwbGFjZXNfcGFyYW06aHIsdG9fdGFnOmRyLGZyb21fdGFnOnByLGVhcmx5X2ZsYWc6ZnJ9O2lmKHZvaWQgMCE9PXIpe2lmKHZvaWQgMD09PVRyW3JdKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcnVsZSBuYW1lOiBcIit0KHIpK1wiLlwiKX1lbHNlIHI9XCJDUkxGXCI7dmFyIF9yPTAsdnI9MCxDcj0wLFNyPVtdLEVyPWUoXCIuL1VSSVwiKSxBcj1lKFwiLi9OYW1lQWRkckhlYWRlclwiKSx5cj17fSxScj1UcltyXSgpO2lmKG51bGw9PT1Scnx8X3IhPT1uLmxlbmd0aCl7dmFyIGJyPU1hdGgubWF4KF9yLENyKSxJcj1icjxuLmxlbmd0aD9uLmNoYXJBdChicik6bnVsbCx3cj1ncigpO3JldHVybiBuZXcgdGhpcy5TeW50YXhFcnJvcihtcihTciksSXIsYnIsd3IubGluZSx3ci5jb2x1bW4pLC0xfXJldHVybiB5cn0sdG9Tb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlfX07cmV0dXJuIG4uU3ludGF4RXJyb3I9ZnVuY3Rpb24oZSxuLHIscyxsKXtmdW5jdGlvbiBpKGUsbil7dmFyIHIscztzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgMDpyPVwiZW5kIG9mIGlucHV0XCI7YnJlYWs7Y2FzZSAxOnI9ZVswXTticmVhaztkZWZhdWx0OnI9ZS5zbGljZSgwLGUubGVuZ3RoLTEpLmpvaW4oXCIsIFwiKStcIiBvciBcIitlW2UubGVuZ3RoLTFdfXJldHVybiBzPW4/dChuKTpcImVuZCBvZiBpbnB1dFwiLFwiRXhwZWN0ZWQgXCIrcitcIiBidXQgXCIrcytcIiBmb3VuZC5cIn10aGlzLm5hbWU9XCJTeW50YXhFcnJvclwiLHRoaXMuZXhwZWN0ZWQ9ZSx0aGlzLmZvdW5kPW4sdGhpcy5tZXNzYWdlPWkoZSxuKSx0aGlzLm9mZnNldD1yLHRoaXMubGluZT1zLHRoaXMuY29sdW1uPWx9LG4uU3ludGF4RXJyb3IucHJvdG90eXBlPUVycm9yLnByb3RvdHlwZSxufSgpfSx7XCIuL05hbWVBZGRySGVhZGVyXCI6OSxcIi4vVVJJXCI6MjR9XSw3OltmdW5jdGlvbihlLHQsbil7dmFyIHI9ZShcImRlYnVnXCIpKFwiSnNTSVBcIikscz1lKFwiLi4vcGFja2FnZS5qc29uXCIpO3IoXCJ2ZXJzaW9uICVzXCIscy52ZXJzaW9uKTt2YXIgbD1lKFwicnRjbmluamFcIiksaT1lKFwiLi9Db25zdGFudHNcIiksbz1lKFwiLi9FeGNlcHRpb25zXCIpLHU9ZShcIi4vVXRpbHNcIiksYT1lKFwiLi9VQVwiKSxjPWUoXCIuL1VSSVwiKSxoPWUoXCIuL05hbWVBZGRySGVhZGVyXCIpLGQ9ZShcIi4vR3JhbW1hclwiKSxwPWUoXCIuL1NvY2tldFwiKSxmPWUoXCIuL1dlYlNvY2tldEludGVyZmFjZVwiKSxtPXQuZXhwb3J0cz17QzppLEV4Y2VwdGlvbnM6byxVdGlsczp1LFVBOmEsVVJJOmMsTmFtZUFkZHJIZWFkZXI6aCxTb2NrZXQ6cCxXZWJTb2NrZXRJbnRlcmZhY2U6ZixHcmFtbWFyOmQsZGVidWc6ZShcImRlYnVnXCIpLHJ0Y25pbmphOmx9O09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG0se25hbWU6e2dldDpmdW5jdGlvbigpe3JldHVybiBzLnRpdGxlfX0sdmVyc2lvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMudmVyc2lvbn19fSl9LHtcIi4uL3BhY2thZ2UuanNvblwiOjQ3LFwiLi9Db25zdGFudHNcIjoxLFwiLi9FeGNlcHRpb25zXCI6NSxcIi4vR3JhbW1hclwiOjYsXCIuL05hbWVBZGRySGVhZGVyXCI6OSxcIi4vU29ja2V0XCI6MTksXCIuL1VBXCI6MjMsXCIuL1VSSVwiOjI0LFwiLi9VdGlsc1wiOjI1LFwiLi9XZWJTb2NrZXRJbnRlcmZhY2VcIjoyNixkZWJ1ZzozMyxydGNuaW5qYTozOH1dLDg6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe3RoaXMudWE9ZSx0aGlzLmRhdGE9e30sbC5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKX10LmV4cG9ydHM9cjt2YXIgcz1lKFwidXRpbFwiKSxsPWUoXCJldmVudHNcIiksaT1lKFwiLi9Db25zdGFudHNcIiksbz1lKFwiLi9TSVBNZXNzYWdlXCIpLHU9ZShcIi4vVXRpbHNcIiksYT1lKFwiLi9SZXF1ZXN0U2VuZGVyXCIpLGM9ZShcIi4vVHJhbnNhY3Rpb25zXCIpLGg9ZShcIi4vRXhjZXB0aW9uc1wiKTtzLmluaGVyaXRzKHIsbC5FdmVudEVtaXR0ZXIpLHIucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByLHMsbCx1LGMsaD1lO2lmKHZvaWQgMD09PWV8fHZvaWQgMD09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBlbm91Z2ggYXJndW1lbnRzXCIpO2lmKGU9dGhpcy51YS5ub3JtYWxpemVUYXJnZXQoZSksIWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdGFyZ2V0OiBcIitoKTtuPW58fHt9LGM9bi5leHRyYUhlYWRlcnMmJm4uZXh0cmFIZWFkZXJzLnNsaWNlKCl8fFtdLHU9bi5ldmVudEhhbmRsZXJzfHx7fSxsPW4uY29udGVudFR5cGV8fFwidGV4dC9wbGFpblwiLHRoaXMuY29udGVudF90eXBlPWw7Zm9yKHMgaW4gdSl0aGlzLm9uKHMsdVtzXSk7dGhpcy5jbG9zZWQ9ITEsdGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdPXRoaXMsYy5wdXNoKFwiQ29udGVudC1UeXBlOiBcIitsKSx0aGlzLnJlcXVlc3Q9bmV3IG8uT3V0Z29pbmdSZXF1ZXN0KGkuTUVTU0FHRSxlLHRoaXMudWEsbnVsbCxjKSx0Pyh0aGlzLnJlcXVlc3QuYm9keT10LHRoaXMuY29udGVudD10KTp0aGlzLmNvbnRlbnQ9bnVsbCxyPW5ldyBhKHRoaXMsdGhpcy51YSksdGhpcy5uZXdNZXNzYWdlKFwibG9jYWxcIix0aGlzLnJlcXVlc3QpLHIuc2VuZCgpfSxyLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoIXRoaXMuY2xvc2VkKXN3aXRjaCghMCl7Y2FzZS9eMVswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTpicmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmRlbGV0ZSB0aGlzLnVhLmFwcGxpY2FudHNbdGhpc10sdGhpcy5lbWl0KFwic3VjY2VlZGVkXCIse29yaWdpbmF0b3I6XCJyZW1vdGVcIixyZXNwb25zZTplfSk7YnJlYWs7ZGVmYXVsdDpkZWxldGUgdGhpcy51YS5hcHBsaWNhbnRzW3RoaXNdLHQ9dS5zaXBFcnJvckNhdXNlKGUuc3RhdHVzX2NvZGUpLHRoaXMuZW1pdChcImZhaWxlZFwiLHtvcmlnaW5hdG9yOlwicmVtb3RlXCIscmVzcG9uc2U6ZSxjYXVzZTp0fSl9fSxyLnByb3RvdHlwZS5vblJlcXVlc3RUaW1lb3V0PWZ1bmN0aW9uKCl7dGhpcy5jbG9zZWR8fHRoaXMuZW1pdChcImZhaWxlZFwiLHtvcmlnaW5hdG9yOlwic3lzdGVtXCIsY2F1c2U6aS5jYXVzZXMuUkVRVUVTVF9USU1FT1VUfSl9LHIucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXt0aGlzLmNsb3NlZHx8dGhpcy5lbWl0KFwiZmFpbGVkXCIse29yaWdpbmF0b3I6XCJzeXN0ZW1cIixjYXVzZTppLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SfSl9LHIucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5jbG9zZWQ9ITAsZGVsZXRlIHRoaXMudWEuYXBwbGljYW50c1t0aGlzXX0sci5wcm90b3R5cGUuaW5pdF9pbmNvbWluZz1mdW5jdGlvbihlKXt2YXIgdDt0aGlzLnJlcXVlc3Q9ZSx0aGlzLmNvbnRlbnRfdHlwZT1lLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSxlLmJvZHk/dGhpcy5jb250ZW50PWUuYm9keTp0aGlzLmNvbnRlbnQ9bnVsbCx0aGlzLm5ld01lc3NhZ2UoXCJyZW1vdGVcIixlKSx0PXRoaXMudWEudHJhbnNhY3Rpb25zLm5pc3RbZS52aWFfYnJhbmNoXSwhdHx8dC5zdGF0ZSE9PWMuQy5TVEFUVVNfVFJZSU5HJiZ0LnN0YXRlIT09Yy5DLlNUQVRVU19QUk9DRUVESU5HfHxlLnJlcGx5KDIwMCl9LHIucHJvdG90eXBlLmFjY2VwdD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciB0PWUuZXh0cmFIZWFkZXJzJiZlLmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSxuPWUuYm9keTtpZihcImluY29taW5nXCIhPT10aGlzLmRpcmVjdGlvbil0aHJvdyBuZXcgaC5Ob3RTdXBwb3J0ZWRFcnJvcignXCJhY2NlcHRcIiBub3Qgc3VwcG9ydGVkIGZvciBvdXRnb2luZyBNZXNzYWdlJyk7dGhpcy5yZXF1ZXN0LnJlcGx5KDIwMCxudWxsLHQsbil9LHIucHJvdG90eXBlLnJlamVjdD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciB0PWUuc3RhdHVzX2NvZGV8fDQ4MCxuPWUucmVhc29uX3BocmFzZSxyPWUuZXh0cmFIZWFkZXJzJiZlLmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSxzPWUuYm9keTtpZihcImluY29taW5nXCIhPT10aGlzLmRpcmVjdGlvbil0aHJvdyBuZXcgaC5Ob3RTdXBwb3J0ZWRFcnJvcignXCJyZWplY3RcIiBub3Qgc3VwcG9ydGVkIGZvciBvdXRnb2luZyBNZXNzYWdlJyk7aWYoMzAwPnR8fHQ+PTcwMCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrdCk7dGhpcy5yZXF1ZXN0LnJlcGx5KHQsbixyLHMpfSxyLnByb3RvdHlwZS5uZXdNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7XCJyZW1vdGVcIj09PWU/KHRoaXMuZGlyZWN0aW9uPVwiaW5jb21pbmdcIix0aGlzLmxvY2FsX2lkZW50aXR5PXQudG8sdGhpcy5yZW1vdGVfaWRlbnRpdHk9dC5mcm9tKTpcImxvY2FsXCI9PT1lJiYodGhpcy5kaXJlY3Rpb249XCJvdXRnb2luZ1wiLHRoaXMubG9jYWxfaWRlbnRpdHk9dC5mcm9tLHRoaXMucmVtb3RlX2lkZW50aXR5PXQudG8pLHRoaXMudWEubmV3TWVzc2FnZSh7b3JpZ2luYXRvcjplLG1lc3NhZ2U6dGhpcyxyZXF1ZXN0OnR9KX19LHtcIi4vQ29uc3RhbnRzXCI6MSxcIi4vRXhjZXB0aW9uc1wiOjUsXCIuL1JlcXVlc3RTZW5kZXJcIjoxNyxcIi4vU0lQTWVzc2FnZVwiOjE4LFwiLi9UcmFuc2FjdGlvbnNcIjoyMSxcIi4vVXRpbHNcIjoyNSxldmVudHM6MjgsdXRpbDozMn1dLDk6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCxuKXt2YXIgcjtpZighKGUmJmUgaW5zdGFuY2VvZiBzKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdtaXNzaW5nIG9yIGludmFsaWQgXCJ1cmlcIiBwYXJhbWV0ZXInKTt0aGlzLnVyaT1lLHRoaXMucGFyYW1ldGVycz17fTtmb3IociBpbiBuKXRoaXMuc2V0UGFyYW0ocixuW3JdKTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtkaXNwbGF5X25hbWU6e2dldDpmdW5jdGlvbigpe3JldHVybiB0fSxzZXQ6ZnVuY3Rpb24oZSl7dD0wPT09ZT9cIjBcIjplfX19KX10LmV4cG9ydHM9cjt2YXIgcz1lKFwiLi9VUklcIiksbD1lKFwiLi9HcmFtbWFyXCIpO3IucHJvdG90eXBlPXtzZXRQYXJhbTpmdW5jdGlvbihlLHQpe2UmJih0aGlzLnBhcmFtZXRlcnNbZS50b0xvd2VyQ2FzZSgpXT1cInVuZGVmaW5lZFwiPT10eXBlb2YgdHx8bnVsbD09PXQ/bnVsbDp0LnRvU3RyaW5nKCkpfSxnZXRQYXJhbTpmdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLnBhcmFtZXRlcnNbZS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9LGhhc1BhcmFtOmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShlLnRvTG93ZXJDYXNlKCkpJiYhMHx8ITE6dm9pZCAwfSxkZWxldGVQYXJhbTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZT1lLnRvTG93ZXJDYXNlKCksdGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGUpPyh0PXRoaXMucGFyYW1ldGVyc1tlXSxkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW2VdLHQpOnZvaWQgMH0sY2xlYXJQYXJhbXM6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtZXRlcnM9e319LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyByKHRoaXMudXJpLmNsb25lKCksdGhpcy5kaXNwbGF5X25hbWUsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnBhcmFtZXRlcnMpKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGUsdDtlPXRoaXMuZGlzcGxheV9uYW1lfHwwPT09dGhpcy5kaXNwbGF5X25hbWU/J1wiJyt0aGlzLmRpc3BsYXlfbmFtZSsnXCIgJzpcIlwiLGUrPVwiPFwiK3RoaXMudXJpLnRvU3RyaW5nKCkrXCI+XCI7Zm9yKHQgaW4gdGhpcy5wYXJhbWV0ZXJzKWUrPVwiO1wiK3QsbnVsbCE9PXRoaXMucGFyYW1ldGVyc1t0XSYmKGUrPVwiPVwiK3RoaXMucGFyYW1ldGVyc1t0XSk7cmV0dXJuIGV9fSxyLnBhcnNlPWZ1bmN0aW9uKGUpe3JldHVybiBlPWwucGFyc2UoZSxcIk5hbWVfQWRkcl9IZWFkZXJcIiksLTEhPT1lP2U6dm9pZCAwfX0se1wiLi9HcmFtbWFyXCI6NixcIi4vVVJJXCI6MjR9XSwxMDpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0KXt2YXIgbj10LHI9MCxzPTA7aWYoZS5zdWJzdHJpbmcobixuKzIpLm1hdGNoKC8oXlxcclxcbikvKSlyZXR1cm4tMjtmb3IoOzA9PT1yOyl7aWYocz1lLmluZGV4T2YoXCJcXHJcXG5cIixuKSwtMT09PXMpcmV0dXJuIHM7IWUuc3Vic3RyaW5nKHMrMixzKzQpLm1hdGNoKC8oXlxcclxcbikvKSYmZS5jaGFyQXQocysyKS5tYXRjaCgvKF5cXHMrKS8pP249cysyOnI9c31yZXR1cm4gcn1mdW5jdGlvbiBzKGUsdCxuLHIpe3ZhciBzLGwsaSxhLGM9dC5pbmRleE9mKFwiOlwiLG4pLGg9dC5zdWJzdHJpbmcobixjKS50cmltKCksZD10LnN1YnN0cmluZyhjKzEscikudHJpbSgpO3N3aXRjaChoLnRvTG93ZXJDYXNlKCkpe2Nhc2VcInZpYVwiOmNhc2VcInZcIjplLmFkZEhlYWRlcihcInZpYVwiLGQpLDE9PT1lLmdldEhlYWRlcnMoXCJ2aWFcIikubGVuZ3RoPyhhPWUucGFyc2VIZWFkZXIoXCJWaWFcIiksYSYmKGUudmlhPWEsZS52aWFfYnJhbmNoPWEuYnJhbmNoKSk6YT0wO2JyZWFrO2Nhc2VcImZyb21cIjpjYXNlXCJmXCI6ZS5zZXRIZWFkZXIoXCJmcm9tXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwiZnJvbVwiKSxhJiYoZS5mcm9tPWEsZS5mcm9tX3RhZz1hLmdldFBhcmFtKFwidGFnXCIpKTticmVhaztjYXNlXCJ0b1wiOmNhc2VcInRcIjplLnNldEhlYWRlcihcInRvXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwidG9cIiksYSYmKGUudG89YSxlLnRvX3RhZz1hLmdldFBhcmFtKFwidGFnXCIpKTticmVhaztjYXNlXCJyZWNvcmQtcm91dGVcIjpmb3IoYT1vLnBhcnNlKGQsXCJSZWNvcmRfUm91dGVcIiksLTE9PT1hJiYoYT12b2lkIDApLGk9YS5sZW5ndGgsbD0wO2k+bDtsKyspcz1hW2xdLGUuYWRkSGVhZGVyKFwicmVjb3JkLXJvdXRlXCIsZC5zdWJzdHJpbmcocy5wb3NzaXRpb24scy5vZmZzZXQpKSxlLmhlYWRlcnNbXCJSZWNvcmQtUm91dGVcIl1bZS5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLmxlbmd0aC0xXS5wYXJzZWQ9cy5wYXJzZWQ7YnJlYWs7Y2FzZVwiY2FsbC1pZFwiOmNhc2VcImlcIjplLnNldEhlYWRlcihcImNhbGwtaWRcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJjYWxsLWlkXCIpLGEmJihlLmNhbGxfaWQ9ZCk7YnJlYWs7Y2FzZVwiY29udGFjdFwiOmNhc2VcIm1cIjpmb3IoYT1vLnBhcnNlKGQsXCJDb250YWN0XCIpLC0xPT09YSYmKGE9dm9pZCAwKSxpPWEubGVuZ3RoLGw9MDtpPmw7bCsrKXM9YVtsXSxlLmFkZEhlYWRlcihcImNvbnRhY3RcIixkLnN1YnN0cmluZyhzLnBvc3NpdGlvbixzLm9mZnNldCkpLGUuaGVhZGVycy5Db250YWN0W2UuZ2V0SGVhZGVycyhcImNvbnRhY3RcIikubGVuZ3RoLTFdLnBhcnNlZD1zLnBhcnNlZDticmVhaztjYXNlXCJjb250ZW50LWxlbmd0aFwiOmNhc2VcImxcIjplLnNldEhlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwiY29udGVudC1sZW5ndGhcIik7YnJlYWs7Y2FzZVwiY29udGVudC10eXBlXCI6Y2FzZVwiY1wiOmUuc2V0SGVhZGVyKFwiY29udGVudC10eXBlXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwiY29udGVudC10eXBlXCIpO2JyZWFrO2Nhc2VcImNzZXFcIjplLnNldEhlYWRlcihcImNzZXFcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJjc2VxXCIpLGEmJihlLmNzZXE9YS52YWx1ZSksZSBpbnN0YW5jZW9mIHUuSW5jb21pbmdSZXNwb25zZSYmKGUubWV0aG9kPWEubWV0aG9kKTticmVhaztjYXNlXCJtYXgtZm9yd2FyZHNcIjplLnNldEhlYWRlcihcIm1heC1mb3J3YXJkc1wiLGQpLGE9ZS5wYXJzZUhlYWRlcihcIm1heC1mb3J3YXJkc1wiKTticmVhaztjYXNlXCJ3d3ctYXV0aGVudGljYXRlXCI6ZS5zZXRIZWFkZXIoXCJ3d3ctYXV0aGVudGljYXRlXCIsZCksYT1lLnBhcnNlSGVhZGVyKFwid3d3LWF1dGhlbnRpY2F0ZVwiKTticmVhaztjYXNlXCJwcm94eS1hdXRoZW50aWNhdGVcIjplLnNldEhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiLGQpLGE9ZS5wYXJzZUhlYWRlcihcInByb3h5LWF1dGhlbnRpY2F0ZVwiKTticmVhaztjYXNlXCJzZXNzaW9uLWV4cGlyZXNcIjpjYXNlXCJ4XCI6ZS5zZXRIZWFkZXIoXCJzZXNzaW9uLWV4cGlyZXNcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJzZXNzaW9uLWV4cGlyZXNcIiksYSYmKGUuc2Vzc2lvbl9leHBpcmVzPWEuZXhwaXJlcyxlLnNlc3Npb25fZXhwaXJlc19yZWZyZXNoZXI9YS5yZWZyZXNoZXIpO2JyZWFrO2Nhc2VcInJlZmVyLXRvXCI6Y2FzZVwiclwiOmUuc2V0SGVhZGVyKFwicmVmZXItdG9cIixkKSxhPWUucGFyc2VIZWFkZXIoXCJyZWZlci10b1wiKSxhJiYoZS5yZWZlcl90bz1hKTticmVhaztjYXNlXCJyZXBsYWNlc1wiOmUuc2V0SGVhZGVyKFwicmVwbGFjZXNcIixkKSxhPWUucGFyc2VIZWFkZXIoXCJyZXBsYWNlc1wiKSxhJiYoZS5yZXBsYWNlcz1hKTticmVhaztjYXNlXCJldmVudFwiOmNhc2VcIm9cIjplLnNldEhlYWRlcihcImV2ZW50XCIsZCksYT1lLnBhcnNlSGVhZGVyKFwiZXZlbnRcIiksYSYmKGUuZXZlbnQ9YSk7YnJlYWs7ZGVmYXVsdDplLnNldEhlYWRlcihoLGQpLGE9MH1yZXR1cm4gdm9pZCAwPT09YT97ZXJyb3I6J2Vycm9yIHBhcnNpbmcgaGVhZGVyIFwiJytoKydcIid9OiEwfXZhciBsPXt9O3QuZXhwb3J0cz1sO3ZhciBpPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOlBhcnNlclwiKTtpLmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKTt2YXIgbz1lKFwiLi9HcmFtbWFyXCIpLHU9ZShcIi4vU0lQTWVzc2FnZVwiKTtsLnBhcnNlTWVzc2FnZT1mdW5jdGlvbihlLHQpe3ZhciBuLGwsYSxjLGgsZD0wLHA9ZS5pbmRleE9mKFwiXFxyXFxuXCIpO2lmKC0xPT09cClyZXR1cm4gdm9pZCBpKFwicGFyc2VNZXNzYWdlKCkgfCBubyBDUkxGIGZvdW5kLCBub3QgYSBTSVAgbWVzc2FnZVwiKTtpZihsPWUuc3Vic3RyaW5nKDAscCksaD1vLnBhcnNlKGwsXCJSZXF1ZXN0X1Jlc3BvbnNlXCIpLC0xPT09aClyZXR1cm4gdm9pZCBpKCdwYXJzZU1lc3NhZ2UoKSB8IGVycm9yIHBhcnNpbmcgZmlyc3QgbGluZSBvZiBTSVAgbWVzc2FnZTogXCInK2wrJ1wiJyk7Zm9yKGguc3RhdHVzX2NvZGU/KG49bmV3IHUuSW5jb21pbmdSZXNwb25zZSxuLnN0YXR1c19jb2RlPWguc3RhdHVzX2NvZGUsbi5yZWFzb25fcGhyYXNlPWgucmVhc29uX3BocmFzZSk6KG49bmV3IHUuSW5jb21pbmdSZXF1ZXN0KHQpLG4ubWV0aG9kPWgubWV0aG9kLG4ucnVyaT1oLnVyaSksbi5kYXRhPWUsZD1wKzI7Oyl7aWYocD1yKGUsZCksLTI9PT1wKXtjPWQrMjticmVha31pZigtMT09PXApcmV0dXJuIHZvaWQgaShcInBhcnNlTWVzc2FnZSgpIHwgbWFsZm9ybWVkIG1lc3NhZ2VcIik7aWYoaD1zKG4sZSxkLHApLGghPT0hMClyZXR1cm4gdm9pZCBpKFwicGFyc2VNZXNzYWdlKCkgfFwiLGguZXJyb3IpO2Q9cCsyfXJldHVybiBuLmhhc0hlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIpPyhhPW4uZ2V0SGVhZGVyKFwiY29udGVudC1sZW5ndGhcIiksbi5ib2R5PWUuc3Vic3RyKGMsYSkpOm4uYm9keT1lLnN1YnN0cmluZyhjKSxufX0se1wiLi9HcmFtbWFyXCI6NixcIi4vU0lQTWVzc2FnZVwiOjE4LGRlYnVnOjMzfV0sMTE6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUpe0coXCJuZXdcIiksdGhpcy51YT1lLHRoaXMuc3RhdHVzPWsuU1RBVFVTX05VTEwsdGhpcy5kaWFsb2c9bnVsbCx0aGlzLmVhcmx5RGlhbG9ncz17fSx0aGlzLmNvbm5lY3Rpb249bnVsbCx0aGlzLmlzX2NvbmZpcm1lZD0hMSx0aGlzLmxhdGVfc2RwPSExLHRoaXMucnRjT2ZmZXJDb25zdHJhaW50cz1udWxsLHRoaXMucnRjQW5zd2VyQ29uc3RyYWludHM9bnVsbCx0aGlzLmxvY2FsTWVkaWFTdHJlYW09bnVsbCx0aGlzLmxvY2FsTWVkaWFTdHJlYW1Mb2NhbGx5R2VuZXJhdGVkPSExLHRoaXMucnRjUmVhZHk9ITAsdGhpcy50aW1lcnM9e2Fja1RpbWVyOm51bGwsZXhwaXJlc1RpbWVyOm51bGwsaW52aXRlMnh4VGltZXI6bnVsbCx1c2VyTm9BbnN3ZXJUaW1lcjpudWxsfSx0aGlzLmRpcmVjdGlvbj1udWxsLHRoaXMubG9jYWxfaWRlbnRpdHk9bnVsbCx0aGlzLnJlbW90ZV9pZGVudGl0eT1udWxsLHRoaXMuc3RhcnRfdGltZT1udWxsLHRoaXMuZW5kX3RpbWU9bnVsbCx0aGlzLnRvbmVzPW51bGwsdGhpcy5hdWRpb011dGVkPSExLHRoaXMudmlkZW9NdXRlZD0hMSx0aGlzLmxvY2FsSG9sZD0hMSx0aGlzLnJlbW90ZUhvbGQ9ITEsdGhpcy5zZXNzaW9uVGltZXJzPXtlbmFibGVkOnRoaXMudWEuY29uZmlndXJhdGlvbi5zZXNzaW9uX3RpbWVycyxkZWZhdWx0RXhwaXJlczp6LlNFU1NJT05fRVhQSVJFUyxjdXJyZW50RXhwaXJlczpudWxsLHJ1bm5pbmc6ITEscmVmcmVzaGVyOiExLHRpbWVyOm51bGx9LHRoaXMucmVmZXJTdWJzY3JpYmVycz17fSx0aGlzLmRhdGE9e30sRi5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKX1mdW5jdGlvbiBzKGUsdCl7dmFyIG49dGhpcyxyPUsuVDE7dGhpcy50aW1lcnMuaW52aXRlMnh4VGltZXI9c2V0VGltZW91dChmdW5jdGlvbiBzKCl7bi5zdGF0dXM9PT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJihlLnJlcGx5KDIwMCxudWxsLFtcIkNvbnRhY3Q6IFwiK24uY29udGFjdF0sdCkscjxLLlQyJiYocj0yKnIscj5LLlQyJiYocj1LLlQyKSksbi50aW1lcnMuaW52aXRlMnh4VGltZXI9c2V0VGltZW91dChzLHIpKX0scil9ZnVuY3Rpb24gbCgpe3ZhciBlPXRoaXM7dGhpcy50aW1lcnMuYWNrVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2Uuc3RhdHVzPT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiYoRyhcIm5vIEFDSyByZWNlaXZlZCwgdGVybWluYXRpbmcgdGhlIHNlc3Npb25cIiksY2xlYXJUaW1lb3V0KGUudGltZXJzLmludml0ZTJ4eFRpbWVyKSx2LmNhbGwoZSx6LkJZRSkseC5jYWxsKGUsXCJyZW1vdGVcIixudWxsLHouY2F1c2VzLk5PX0FDSykpfSxLLlRJTUVSX0gpfWZ1bmN0aW9uIGkoZSx0KXt2YXIgbj10aGlzO3RoaXMuY29ubmVjdGlvbj1uZXcgVy5SVENQZWVyQ29ubmVjdGlvbihlLHQpLHRoaXMuY29ubmVjdGlvbi5vbmFkZHN0cmVhbT1mdW5jdGlvbihlLHQpe24uZW1pdChcImFkZHN0cmVhbVwiLHtzdHJlYW06dH0pfSx0aGlzLmNvbm5lY3Rpb24ub25yZW1vdmVzdHJlYW09ZnVuY3Rpb24oZSx0KXtuLmVtaXQoXCJyZW1vdmVzdHJlYW1cIix7c3RyZWFtOnR9KX0sdGhpcy5jb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKGUsdCl7bi5lbWl0KFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIse3N0YXRlOnR9KSxcImZhaWxlZFwiPT09dCYmbi50ZXJtaW5hdGUoe2NhdXNlOnouY2F1c2VzLlJUUF9USU1FT1VULHN0YXR1c19jb2RlOjIwMCxyZWFzb25fcGhyYXNlOnouY2F1c2VzLlJUUF9USU1FT1VUfSl9fWZ1bmN0aW9uIG8oZSx0LG4scil7ZnVuY3Rpb24gcyhyKXtpLm9uaWNlY2FuZGlkYXRlPWZ1bmN0aW9uKG4scil7aWYoIXIpe2lmKGkub25pY2VjYW5kaWRhdGU9bnVsbCxsLnJ0Y1JlYWR5PSEwLHQpe3ZhciBzPXtvcmlnaW5hdG9yOlwibG9jYWxcIix0eXBlOmUsc2RwOmkubG9jYWxEZXNjcmlwdGlvbi5zZHB9O2wuZW1pdChcInNkcFwiLHMpLHQocy5zZHApfXQ9bnVsbH19LGkuc2V0TG9jYWxEZXNjcmlwdGlvbihyLGZ1bmN0aW9uKCl7aWYoXCJjb21wbGV0ZVwiPT09aS5pY2VHYXRoZXJpbmdTdGF0ZSl7aWYobC5ydGNSZWFkeT0hMCx0KXt2YXIgbj17b3JpZ2luYXRvcjpcImxvY2FsXCIsdHlwZTplLHNkcDppLmxvY2FsRGVzY3JpcHRpb24uc2RwfTtsLmVtaXQoXCJzZHBcIixuKSx0KG4uc2RwKX10PW51bGx9fSxmdW5jdGlvbihlKXtsLnJ0Y1JlYWR5PSEwLG4mJm4oZSl9KX1HKFwiY3JlYXRlTG9jYWxEZXNjcmlwdGlvbigpXCIpO3ZhciBsPXRoaXMsaT10aGlzLmNvbm5lY3Rpb247aWYodGhpcy5ydGNSZWFkeT0hMSxcIm9mZmVyXCI9PT1lKWkuY3JlYXRlT2ZmZXIocyxmdW5jdGlvbihlKXtsLnJ0Y1JlYWR5PSEwLG4mJm4oZSl9LHIpO2Vsc2V7aWYoXCJhbnN3ZXJcIiE9PWUpdGhyb3cgbmV3IEVycm9yKCdjcmVhdGVMb2NhbERlc2NyaXB0aW9uKCkgfCB0eXBlIG11c3QgYmUgXCJvZmZlclwiIG9yIFwiYW5zd2VyXCIsIGJ1dCBcIicrZSsnXCIgd2FzIGdpdmVuJyk7aS5jcmVhdGVBbnN3ZXIocyxmdW5jdGlvbihlKXtsLnJ0Y1JlYWR5PSEwLG4mJm4oZSl9LHIpfX1mdW5jdGlvbiB1KGUsdCxuKXt2YXIgcixzLGw9XCJVQVNcIj09PXQ/ZS50b190YWc6ZS5mcm9tX3RhZyxpPVwiVUFTXCI9PT10P2UuZnJvbV90YWc6ZS50b190YWcsbz1lLmNhbGxfaWQrbCtpO3JldHVybiBzPXRoaXMuZWFybHlEaWFsb2dzW29dLG4/cz8hMDoocz1uZXcgWCh0aGlzLGUsdCxYLkMuU1RBVFVTX0VBUkxZKSxzLmVycm9yPyhHKHMuZXJyb3IpLFUuY2FsbCh0aGlzLFwicmVtb3RlXCIsZSx6LmNhdXNlcy5JTlRFUk5BTF9FUlJPUiksITEpOih0aGlzLmVhcmx5RGlhbG9nc1tvXT1zLCEwKSk6KHRoaXMuZnJvbV90YWc9ZS5mcm9tX3RhZyx0aGlzLnRvX3RhZz1lLnRvX3RhZyxzPyhzLnVwZGF0ZShlLHQpLHRoaXMuZGlhbG9nPXMsZGVsZXRlIHRoaXMuZWFybHlEaWFsb2dzW29dLCEwKToocj1uZXcgWCh0aGlzLGUsdCksci5lcnJvcj8oRyhyLmVycm9yKSxVLmNhbGwodGhpcyxcInJlbW90ZVwiLGUsei5jYXVzZXMuSU5URVJOQUxfRVJST1IpLCExKToodGhpcy5kaWFsb2c9ciwhMCkpKX1mdW5jdGlvbiBhKGUpe2Z1bmN0aW9uIHQodCl7dD10fHx7fSxmPSEwO3ZhciBuPXQuc3RhdHVzX2NvZGV8fDQwMyxyPXQucmVhc29uX3BocmFzZXx8XCJcIixzPXQuZXh0cmFIZWFkZXJzJiZ0LmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXTtpZih0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRClyZXR1cm4hMTtpZigzMDA+bnx8bj49NzAwKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIituKTtlLnJlcGx5KG4scixzKX1mdW5jdGlvbiBuKCl7cihmdW5jdGlvbih0KXt2YXIgbj1bXCJDb250YWN0OiBcIitoLmNvbnRhY3RdO0UuY2FsbChoLGUsbiksaC5sYXRlX3NkcCYmKHQ9Qy5jYWxsKGgsdCkpLGUucmVwbHkoMjAwLG51bGwsbix0LGZ1bmN0aW9uKCl7aC5zdGF0dXM9ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLLHMuY2FsbChoLGUsdCksbC5jYWxsKGgpfSksXCJmdW5jdGlvblwiPT10eXBlb2YgbS5jYWxsYmFjayYmbS5jYWxsYmFjaygpfSxmdW5jdGlvbigpe2UucmVwbHkoNTAwKX0pfWZ1bmN0aW9uIHIoZSx0KXtoLmxhdGVfc2RwP28uY2FsbChoLFwib2ZmZXJcIixlLHQsaC5ydGNPZmZlckNvbnN0cmFpbnRzKTooaC5yZW1vdGVIb2xkPT09ITAmJnA9PT0hMT8oaC5yZW1vdGVIb2xkPSExLFAuY2FsbChoLFwicmVtb3RlXCIpKTpoLnJlbW90ZUhvbGQ9PT0hMSYmcD09PSEwJiYoaC5yZW1vdGVIb2xkPSEwLE0uY2FsbChoLFwicmVtb3RlXCIpKSxvLmNhbGwoaCxcImFuc3dlclwiLGUsdCxoLnJ0Y0Fuc3dlckNvbnN0cmFpbnRzKSl9RyhcInJlY2VpdmVSZWludml0ZSgpXCIpO3ZhciBpLHUsYSxjLGg9dGhpcyxkPWUuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpLHA9ITEsZj0hMSxtPXtyZXF1ZXN0OmUsY2FsbGJhY2s6dm9pZCAwLHJlamVjdDp0LmJpbmQodGhpcyl9O2lmKHRoaXMuZW1pdChcInJlaW52aXRlXCIsbSksIWYpaWYoZS5ib2R5KXtpZih0aGlzLmxhdGVfc2RwPSExLFwiYXBwbGljYXRpb24vc2RwXCIhPT1kKXJldHVybiBHKFwiaW52YWxpZCBDb250ZW50LVR5cGVcIiksdm9pZCBlLnJlcGx5KDQxNSk7Zm9yKGk9ZS5wYXJzZVNEUCgpLHU9MDt1PGkubWVkaWEubGVuZ3RoO3UrKylpZihjPWkubWVkaWFbdV0sLTEhPT1yZS5pbmRleE9mKGMudHlwZSkpe2lmKGE9Yy5kaXJlY3Rpb258fGkuZGlyZWN0aW9ufHxcInNlbmRyZWN2XCIsXCJzZW5kb25seVwiIT09YSYmXCJpbmFjdGl2ZVwiIT09YSl7cD0hMTticmVha31wPSEwfXZhciBnPXtvcmlnaW5hdG9yOlwicmVtb3RlXCIsdHlwZTpcIm9mZmVyXCIsc2RwOmUuYm9keX07dGhpcy5lbWl0KFwic2RwXCIsZyksdGhpcy5jb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBXLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcIm9mZmVyXCIsc2RwOmcuc2RwfSksbixmdW5jdGlvbigpe2UucmVwbHkoNDg4KX0pfWVsc2UgdGhpcy5sYXRlX3NkcD0hMCxuKCl9ZnVuY3Rpb24gYyhlKXtmdW5jdGlvbiB0KHQpe3Q9dHx8e30sYT0hMDt2YXIgbj10LnN0YXR1c19jb2RlfHw0MDMscj10LnJlYXNvbl9waHJhc2V8fFwiXCIscz10LmV4dHJhSGVhZGVycyYmdC5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W107aWYodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQpcmV0dXJuITE7aWYoMzAwPm58fG4+PTcwMCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrbik7ZS5yZXBseShuLHIscyl9RyhcInJlY2VpdmVVcGRhdGUoKVwiKTt2YXIgbixyLHMsbCxpPXRoaXMsdT1lLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSxhPSExLGM9ITEsaD17cmVxdWVzdDplLGNhbGxiYWNrOnZvaWQgMCxyZWplY3Q6dC5iaW5kKHRoaXMpfTtpZih0aGlzLmVtaXQoXCJ1cGRhdGVcIixoKSwhYSl7aWYoIWUuYm9keSl7dmFyIGQ9W107cmV0dXJuIEUuY2FsbCh0aGlzLGUsZCksdm9pZCBlLnJlcGx5KDIwMCxudWxsLGQpfWlmKFwiYXBwbGljYXRpb24vc2RwXCIhPT11KXJldHVybiBHKFwiaW52YWxpZCBDb250ZW50LVR5cGVcIiksdm9pZCBlLnJlcGx5KDQxNSk7Zm9yKG49ZS5wYXJzZVNEUCgpLHI9MDtyPG4ubWVkaWEubGVuZ3RoO3IrKylpZihsPW4ubWVkaWFbcl0sLTEhPT1yZS5pbmRleE9mKGwudHlwZSkpe2lmKHM9bC5kaXJlY3Rpb258fG4uZGlyZWN0aW9ufHxcInNlbmRyZWN2XCIsXCJzZW5kb25seVwiIT09cyYmXCJpbmFjdGl2ZVwiIT09cyl7Yz0hMTticmVha31jPSEwfXZhciBwPXtvcmlnaW5hdG9yOlwicmVtb3RlXCIsdHlwZTpcIm9mZmVyXCIsc2RwOmUuYm9keX07dGhpcy5lbWl0KFwic2RwXCIscCksdGhpcy5jb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBXLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcIm9mZmVyXCIsc2RwOnAuc2RwfSksZnVuY3Rpb24oKXtpLnJlbW90ZUhvbGQ9PT0hMCYmYz09PSExPyhpLnJlbW90ZUhvbGQ9ITEsUC5jYWxsKGksXCJyZW1vdGVcIikpOmkucmVtb3RlSG9sZD09PSExJiZjPT09ITAmJihpLnJlbW90ZUhvbGQ9ITAsTS5jYWxsKGksXCJyZW1vdGVcIikpLG8uY2FsbChpLFwiYW5zd2VyXCIsZnVuY3Rpb24odCl7dmFyIG49W1wiQ29udGFjdDogXCIraS5jb250YWN0XTtFLmNhbGwoaSxlLG4pLGUucmVwbHkoMjAwLG51bGwsbix0KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBoLmNhbGxiYWNrJiZoLmNhbGxiYWNrKCl9LGZ1bmN0aW9uKCl7ZS5yZXBseSg1MDApfSl9LGZ1bmN0aW9uKCl7ZS5yZXBseSg0ODgpfSx0aGlzLnJ0Y0Fuc3dlckNvbnN0cmFpbnRzKX19ZnVuY3Rpb24gaChlKXtmdW5jdGlvbiB0KHQsbil7dmFyIGwsaTtyZXR1cm4gbj1ufHx7fSx0PVwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpudWxsLHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZ0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRD8hMToobD1uZXcgcih0aGlzLnVhKSxsLm9uKFwicHJvZ3Jlc3NcIixmdW5jdGlvbihlKXtzLm5vdGlmeShlLnJlc3BvbnNlLnN0YXR1c19jb2RlLGUucmVzcG9uc2UucmVhc29uX3BocmFzZSl9KSxsLm9uKFwiYWNjZXB0ZWRcIixmdW5jdGlvbihlKXtzLm5vdGlmeShlLnJlc3BvbnNlLnN0YXR1c19jb2RlLGUucmVzcG9uc2UucmVhc29uX3BocmFzZSl9KSxsLm9uKFwiZmFpbGVkXCIsZnVuY3Rpb24oZSl7ZS5tZXNzYWdlP3Mubm90aWZ5KGUubWVzc2FnZS5zdGF0dXNfY29kZSxlLm1lc3NhZ2UucmVhc29uX3BocmFzZSk6cy5ub3RpZnkoNDg3LGUuY2F1c2UpfSksZS5yZWZlcl90by51cmkuaGFzSGVhZGVyKFwicmVwbGFjZXNcIikmJihpPWRlY29kZVVSSUNvbXBvbmVudChlLnJlZmVyX3RvLnVyaS5nZXRIZWFkZXIoXCJyZXBsYWNlc1wiKSksbi5leHRyYUhlYWRlcnM9bi5leHRyYUhlYWRlcnN8fFtdLG4uZXh0cmFIZWFkZXJzLnB1c2goXCJSZXBsYWNlczogXCIraSkpLHZvaWQgbC5jb25uZWN0KGUucmVmZXJfdG8udXJpLnRvQW9yKCksbix0KSl9ZnVuY3Rpb24gbigpe3Mubm90aWZ5KDYwMyl9RyhcInJlY2VpdmVSZWZlcigpXCIpO3ZhciBzLGw9dGhpcztyZXR1cm4gdm9pZCAwPT09dHlwZW9mIGUucmVmZXJfdG8/KEcoXCJubyBSZWZlci1UbyBoZWFkZXIgZmllbGQgcHJlc2VudCBpbiBSRUZFUlwiKSx2b2lkIGUucmVwbHkoNDAwKSk6ZS5yZWZlcl90by51cmkuc2NoZW1lIT09ei5TSVA/KEcoXCJSZWZlci1UbyBoZWFkZXIgZmllbGQgcG9pbnRzIHRvIGEgbm9uLVNJUCBVUkkgc2NoZW1lXCIpLHZvaWQgZS5yZXBseSg0MTYpKTooZS5yZXBseSgyMDIpLHM9bmV3IHRlKHRoaXMsZS5jc2VxKSx2b2lkIHRoaXMuZW1pdChcInJlZmVyXCIse3JlcXVlc3Q6ZSxhY2NlcHQ6ZnVuY3Rpb24oZSxuKXt0LmNhbGwobCxlLG4pfSxyZWplY3Q6ZnVuY3Rpb24oKXtuLmNhbGwobCl9fSkpfWZ1bmN0aW9uIGQoZSl7c3dpdGNoKEcoXCJyZWNlaXZlTm90aWZ5KClcIiksdm9pZCAwPT09dHlwZW9mIGUuZXZlbnQmJmUucmVwbHkoNDAwKSxlLmV2ZW50LmV2ZW50KXtjYXNlXCJyZWZlclwiOnZhciB0PWUuZXZlbnQucGFyYW1zLmlkLG49dGhpcy5yZWZlclN1YnNjcmliZXJzW3RdO2lmKCFuKXJldHVybiB2b2lkIGUucmVwbHkoNDgxLFwiU3Vic2NyaXB0aW9uIGRvZXMgbm90IGV4aXN0XCIpO24ucmVjZWl2ZU5vdGlmeShlKSxlLnJlcGx5KDIwMCk7YnJlYWs7ZGVmYXVsdDplLnJlcGx5KDQ4OSl9fWZ1bmN0aW9uIHAoZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbjtyZXR1cm4gdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJnRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEPyExOihuPW5ldyByKHRoaXMudWEpLG4ub24oXCJjb25maXJtZWRcIixmdW5jdGlvbigpe3MudGVybWluYXRlKCl9KSx2b2lkIG4uaW5pdF9pbmNvbWluZyhlLHQpKX1mdW5jdGlvbiBuKCl7RyhcIlJlcGxhY2VkIElOVklURSByZWplY3RlZCBieSB0aGUgdXNlclwiKSxlLnJlcGx5KDQ4Nil9RyhcInJlY2VpdmVSZXBsYWNlcygpXCIpO3ZhciBzPXRoaXM7dGhpcy5lbWl0KFwicmVwbGFjZXNcIix7cmVxdWVzdDplLGFjY2VwdDpmdW5jdGlvbihlKXt0LmNhbGwocyxlKX0scmVqZWN0OmZ1bmN0aW9uKCl7bi5jYWxsKHMpfX0pfWZ1bmN0aW9uIGYoZSx0LG4pe2Z1bmN0aW9uIHIoZSl7dS5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYodS5sb2NhbE1lZGlhU3RyZWFtPWUsZSYmdS5jb25uZWN0aW9uLmFkZFN0cmVhbShlKSx1LmVtaXQoXCJwZWVyY29ubmVjdGlvblwiLHtwZWVyY29ubmVjdGlvbjp1LmNvbm5lY3Rpb259KSx3LmNhbGwodSx1LnJlcXVlc3QpLG8uY2FsbCh1LFwib2ZmZXJcIixsLGksdCkpfWZ1bmN0aW9uIHMoKXt1LnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJlUuY2FsbCh1LFwibG9jYWxcIixudWxsLHouY2F1c2VzLlVTRVJfREVOSUVEX01FRElBX0FDQ0VTUyl9ZnVuY3Rpb24gbChlKXt1LmlzQ2FuY2VsZWR8fHUuc3RhdHVzPT09ay5TVEFUVVNfVEVSTUlOQVRFRHx8KHUucmVxdWVzdC5ib2R5PWUsdS5zdGF0dXM9ay5TVEFUVVNfSU5WSVRFX1NFTlQsdS5lbWl0KFwic2VuZGluZ1wiLHtyZXF1ZXN0OnUucmVxdWVzdH0pLGEuc2VuZCgpKX1mdW5jdGlvbiBpKCl7dS5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiZVLmNhbGwodSxcInN5c3RlbVwiLG51bGwsei5jYXVzZXMuV0VCUlRDX0VSUk9SKX12YXIgdT10aGlzLGE9bmV3IFEodSx0aGlzLnVhKTt0aGlzLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlKXttLmNhbGwodSxlKX0sbj9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cihuKX0pOmUuYXVkaW98fGUudmlkZW8/KHRoaXMubG9jYWxNZWRpYVN0cmVhbUxvY2FsbHlHZW5lcmF0ZWQ9ITAsVy5nZXRVc2VyTWVkaWEoZSxyLHMpKTpyKG51bGwpfWZ1bmN0aW9uIG0oZSl7RyhcInJlY2VpdmVJbnZpdGVSZXNwb25zZSgpXCIpO3ZhciB0LG4scixzPXRoaXM7aWYodGhpcy5kaWFsb2cmJmUuc3RhdHVzX2NvZGU+PTIwMCYmZS5zdGF0dXNfY29kZTw9Mjk5KXJldHVybiB0aGlzLmRpYWxvZy5pZC5jYWxsX2lkPT09ZS5jYWxsX2lkJiZ0aGlzLmRpYWxvZy5pZC5sb2NhbF90YWc9PT1lLmZyb21fdGFnJiZ0aGlzLmRpYWxvZy5pZC5yZW1vdGVfdGFnPT09ZS50b190YWc/dm9pZCB2LmNhbGwodGhpcyx6LkFDSyk6KG49bmV3IFgodGhpcyxlLFwiVUFDXCIpLHZvaWQgMCE9PW4uZXJyb3I/dm9pZCBHKG4uZXJyb3IpOihuLnNlbmRSZXF1ZXN0KHtvd25lcjp7c3RhdHVzOmsuU1RBVFVTX1RFUk1JTkFURUR9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXt9LG9uVHJhbnNwb3J0RXJyb3I6ZnVuY3Rpb24oKXt9LG9uRGlhbG9nRXJyb3I6ZnVuY3Rpb24oKXt9LHJlY2VpdmVSZXNwb25zZTpmdW5jdGlvbigpe319LHouQUNLKSx2b2lkIG4uc2VuZFJlcXVlc3Qoe293bmVyOntzdGF0dXM6ay5TVEFUVVNfVEVSTUlOQVRFRH0sb25SZXF1ZXN0VGltZW91dDpmdW5jdGlvbigpe30sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe30sb25EaWFsb2dFcnJvcjpmdW5jdGlvbigpe30scmVjZWl2ZVJlc3BvbnNlOmZ1bmN0aW9uKCl7fX0sei5CWUUpKSk7aWYodGhpcy5pc0NhbmNlbGVkKXJldHVybiB0aGlzLmlzQ2FuY2VsZWQ9ITEsdm9pZChlLnN0YXR1c19jb2RlPj0xMDAmJmUuc3RhdHVzX2NvZGU8MjAwP3RoaXMucmVxdWVzdC5jYW5jZWwodGhpcy5jYW5jZWxSZWFzb24pOmUuc3RhdHVzX2NvZGU+PTIwMCYmZS5zdGF0dXNfY29kZTwyOTkmJl8uY2FsbCh0aGlzLGUpKTtpZih0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0lOVklURV9TRU5UfHx0aGlzLnN0YXR1cz09PWsuU1RBVFVTXzFYWF9SRUNFSVZFRClzd2l0Y2goITApe2Nhc2UvXjEwMCQvLnRlc3QoZS5zdGF0dXNfY29kZSk6dGhpcy5zdGF0dXM9ay5TVEFUVVNfMVhYX1JFQ0VJVkVEO2JyZWFrO2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6aWYoIWUudG9fdGFnKXtHKFwiMXh4IHJlc3BvbnNlIHJlY2VpdmVkIHdpdGhvdXQgdG8gdGFnXCIpO2JyZWFrfWlmKGUuaGFzSGVhZGVyKFwiY29udGFjdFwiKSYmIXUuY2FsbCh0aGlzLGUsXCJVQUNcIiwhMCkpYnJlYWs7aWYodGhpcy5zdGF0dXM9ay5TVEFUVVNfMVhYX1JFQ0VJVkVELE4uY2FsbCh0aGlzLFwicmVtb3RlXCIsZSksIWUuYm9keSlicmVhaztyPXtvcmlnaW5hdG9yOlwicmVtb3RlXCIsdHlwZTpcInByYW5zd2VyXCIsc2RwOmUuYm9keX0sdGhpcy5lbWl0KFwic2RwXCIsciksdGhpcy5jb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBXLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcInByYW5zd2VyXCIsc2RwOnIuc2RwfSksbnVsbCxudWxsKTticmVhaztjYXNlL14yWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmlmKHRoaXMuc3RhdHVzPWsuU1RBVFVTX0NPTkZJUk1FRCwhZS5ib2R5KXtfLmNhbGwodGhpcyxlLDQwMCx6LmNhdXNlcy5NSVNTSU5HX1NEUCksVS5jYWxsKHRoaXMsXCJyZW1vdGVcIixlLHouY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTik7YnJlYWt9aWYoIXUuY2FsbCh0aGlzLGUsXCJVQUNcIikpYnJlYWs7cj17b3JpZ2luYXRvcjpcInJlbW90ZVwiLHR5cGU6XCJhbnN3ZXJcIixzZHA6ZS5ib2R5fSx0aGlzLmVtaXQoXCJzZHBcIixyKSx0aGlzLmNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFcuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwiYW5zd2VyXCIsc2RwOnIuc2RwfSksZnVuY3Rpb24oKXtBLmNhbGwocyxlKSxELmNhbGwocyxcInJlbW90ZVwiLGUpLHYuY2FsbChzLHouQUNLKSxPLmNhbGwocyxcImxvY2FsXCIsbnVsbCl9LGZ1bmN0aW9uKCl7Xy5jYWxsKHMsZSw0ODgsXCJOb3QgQWNjZXB0YWJsZSBIZXJlXCIpLFUuY2FsbChzLFwicmVtb3RlXCIsZSx6LmNhdXNlcy5CQURfTUVESUFfREVTQ1JJUFRJT04pfSk7YnJlYWs7ZGVmYXVsdDp0PUouc2lwRXJyb3JDYXVzZShlLnN0YXR1c19jb2RlKSxVLmNhbGwodGhpcyxcInJlbW90ZVwiLGUsdCl9fWZ1bmN0aW9uIGcoZSl7ZnVuY3Rpb24gdChlKXtpZihyLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJih2LmNhbGwocix6LkFDSyksIXUpKXtpZihBLmNhbGwocixlKSwhZS5ib2R5KXJldHVybiB2b2lkIG4oKTtpZihcImFwcGxpY2F0aW9uL3NkcFwiIT09ZS5nZXRIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpcmV0dXJuIHZvaWQgbigpO3ZhciB0PXtvcmlnaW5hdG9yOlwicmVtb3RlXCIsdHlwZTpcImFuc3dlclwiLHNkcDplLmJvZHl9O3IuZW1pdChcInNkcFwiLHQpLHIuY29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgVy5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6dC5zZHB9KSxmdW5jdGlvbigpe2wuc3VjY2VlZGVkJiZsLnN1Y2NlZWRlZChlKX0sZnVuY3Rpb24oKXtuKCl9KX19ZnVuY3Rpb24gbihlKXtsLmZhaWxlZCYmbC5mYWlsZWQoZSl9RyhcInNlbmRSZWludml0ZSgpXCIpLGU9ZXx8e307dmFyIHI9dGhpcyxzPWUuZXh0cmFIZWFkZXJzfHxbXSxsPWUuZXZlbnRIYW5kbGVyc3x8e30saT1lLnJ0Y09mZmVyQ29uc3RyYWludHN8fHRoaXMucnRjT2ZmZXJDb25zdHJhaW50c3x8bnVsbCx1PSExO3MucHVzaChcIkNvbnRhY3Q6IFwiK3RoaXMuY29udGFjdCkscy5wdXNoKFwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9zZHBcIiksdGhpcy5zZXNzaW9uVGltZXJzLnJ1bm5pbmcmJnMucHVzaChcIlNlc3Npb24tRXhwaXJlczogXCIrdGhpcy5zZXNzaW9uVGltZXJzLmN1cnJlbnRFeHBpcmVzK1wiO3JlZnJlc2hlcj1cIisodGhpcy5zZXNzaW9uVGltZXJzLnJlZnJlc2hlcj9cInVhY1wiOlwidWFzXCIpKSxvLmNhbGwodGhpcyxcIm9mZmVyXCIsZnVuY3Rpb24oZSl7ZT1DLmNhbGwocixlKTt2YXIgbD1uZXcgWihyLHouSU5WSVRFKTtsLnNlbmQoe2V4dHJhSGVhZGVyczpzLGJvZHk6ZSxldmVudEhhbmRsZXJzOntvblN1Y2Nlc3NSZXNwb25zZTpmdW5jdGlvbihlKXt0KGUpLHU9ITB9LG9uRXJyb3JSZXNwb25zZTpmdW5jdGlvbihlKXtuKGUpfSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7ci5vblRyYW5zcG9ydEVycm9yKCl9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXtyLm9uUmVxdWVzdFRpbWVvdXQoKX0sb25EaWFsb2dFcnJvcjpmdW5jdGlvbigpe3Iub25EaWFsb2dFcnJvcigpfX19KX0sZnVuY3Rpb24oKXtuKCl9LGkpfWZ1bmN0aW9uIFQoZSl7ZnVuY3Rpb24gdChlKXtpZihyLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJiFhKWlmKEEuY2FsbChyLGUpLHUpe2lmKCFlLmJvZHkpcmV0dXJuIHZvaWQgbigpO2lmKFwiYXBwbGljYXRpb24vc2RwXCIhPT1lLmdldEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSlyZXR1cm4gdm9pZCBuKCk7dmFyIHQ9e29yaWdpbmF0b3I6XCJyZW1vdGVcIix0eXBlOlwiYW5zd2VyXCIsc2RwOmUuYm9keX07ci5lbWl0KFwic2RwXCIsdCksci5jb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBXLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcImFuc3dlclwiLHNkcDp0LnNkcH0pLGZ1bmN0aW9uKCl7bC5zdWNjZWVkZWQmJmwuc3VjY2VlZGVkKGUpfSxmdW5jdGlvbigpe24oKX0pfWVsc2UgbC5zdWNjZWVkZWQmJmwuc3VjY2VlZGVkKGUpfWZ1bmN0aW9uIG4oZSl7bC5mYWlsZWQmJmwuZmFpbGVkKGUpfUcoXCJzZW5kVXBkYXRlKClcIiksZT1lfHx7fTt2YXIgcj10aGlzLHM9ZS5leHRyYUhlYWRlcnN8fFtdLGw9ZS5ldmVudEhhbmRsZXJzfHx7fSxpPWUucnRjT2ZmZXJDb25zdHJhaW50c3x8dGhpcy5ydGNPZmZlckNvbnN0cmFpbnRzfHxudWxsLHU9ZS5zZHBPZmZlcnx8ITEsYT0hMTtpZihzLnB1c2goXCJDb250YWN0OiBcIit0aGlzLmNvbnRhY3QpLHRoaXMuc2Vzc2lvblRpbWVycy5ydW5uaW5nJiZzLnB1c2goXCJTZXNzaW9uLUV4cGlyZXM6IFwiK3RoaXMuc2Vzc2lvblRpbWVycy5jdXJyZW50RXhwaXJlcytcIjtyZWZyZXNoZXI9XCIrKHRoaXMuc2Vzc2lvblRpbWVycy5yZWZyZXNoZXI/XCJ1YWNcIjpcInVhc1wiKSksdSlzLnB1c2goXCJDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcFwiKSxvLmNhbGwodGhpcyxcIm9mZmVyXCIsZnVuY3Rpb24oZSl7ZT1DLmNhbGwocixlKTt2YXIgbD1uZXcgWihyLHouVVBEQVRFKTtsLnNlbmQoe2V4dHJhSGVhZGVyczpzLGJvZHk6ZSxldmVudEhhbmRsZXJzOntvblN1Y2Nlc3NSZXNwb25zZTpmdW5jdGlvbihlKXt0KGUpLGE9ITB9LG9uRXJyb3JSZXNwb25zZTpmdW5jdGlvbihlKXtuKGUpfSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7ci5vblRyYW5zcG9ydEVycm9yKCl9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXtyLm9uUmVxdWVzdFRpbWVvdXQoKX0sb25EaWFsb2dFcnJvcjpmdW5jdGlvbigpe3Iub25EaWFsb2dFcnJvcigpfX19KX0sZnVuY3Rpb24oKXtuKCl9LGkpO2Vsc2V7dmFyIGM9bmV3IFoocix6LlVQREFURSk7Yy5zZW5kKHtleHRyYUhlYWRlcnM6cyxldmVudEhhbmRsZXJzOntvblN1Y2Nlc3NSZXNwb25zZTpmdW5jdGlvbihlKXt0KGUpfSxvbkVycm9yUmVzcG9uc2U6ZnVuY3Rpb24oZSl7bihlKX0sb25UcmFuc3BvcnRFcnJvcjpmdW5jdGlvbigpe3Iub25UcmFuc3BvcnRFcnJvcigpfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7ci5vblJlcXVlc3RUaW1lb3V0KCl9LG9uRGlhbG9nRXJyb3I6ZnVuY3Rpb24oKXtyLm9uRGlhbG9nRXJyb3IoKX19fSl9fWZ1bmN0aW9uIF8oZSx0LG4pe0coXCJhY2NlcHRBbmRUZXJtaW5hdGUoKVwiKTt2YXIgcj1bXTt0JiYobj1ufHx6LlJFQVNPTl9QSFJBU0VbdF18fFwiXCIsci5wdXNoKFwiUmVhc29uOiBTSVAgO2NhdXNlPVwiK3QrJzsgdGV4dD1cIicrbisnXCInKSksKHRoaXMuZGlhbG9nfHx1LmNhbGwodGhpcyxlLFwiVUFDXCIpKSYmKHYuY2FsbCh0aGlzLHouQUNLKSx2LmNhbGwodGhpcyx6LkJZRSx7ZXh0cmFIZWFkZXJzOnJ9KSksdGhpcy5zdGF0dXM9ay5TVEFUVVNfVEVSTUlOQVRFRH1mdW5jdGlvbiB2KGUsdCl7RyhcInNlbmRSZXF1ZXN0KClcIik7dmFyIG49bmV3IFoodGhpcyxlKTtuLnNlbmQodCl9ZnVuY3Rpb24gQyhlKXt2YXIgdCxuLHI7aWYoIXRoaXMubG9jYWxIb2xkJiYhdGhpcy5yZW1vdGVIb2xkKXJldHVybiBlO2lmKGU9Qi5wYXJzZShlKSx0aGlzLmxvY2FsSG9sZCYmIXRoaXMucmVtb3RlSG9sZClmb3IoRyhcIm1hbmdsZU9mZmVyKCkgfCBtZSBvbiBob2xkLCBtYW5nbGluZyBvZmZlclwiKSxuPWUubWVkaWEubGVuZ3RoLHQ9MDtuPnQ7dCsrKXI9ZS5tZWRpYVt0XSwtMSE9PXJlLmluZGV4T2Yoci50eXBlKSYmKHIuZGlyZWN0aW9uP1wic2VuZHJlY3ZcIj09PXIuZGlyZWN0aW9uP3IuZGlyZWN0aW9uPVwic2VuZG9ubHlcIjpcInJlY3Zvbmx5XCI9PT1yLmRpcmVjdGlvbiYmKHIuZGlyZWN0aW9uPVwiaW5hY3RpdmVcIik6ci5kaXJlY3Rpb249XCJzZW5kb25seVwiKTtlbHNlIGlmKHRoaXMubG9jYWxIb2xkJiZ0aGlzLnJlbW90ZUhvbGQpZm9yKEcoXCJtYW5nbGVPZmZlcigpIHwgYm90aCBvbiBob2xkLCBtYW5nbGluZyBvZmZlclwiKSxuPWUubWVkaWEubGVuZ3RoLHQ9MDtuPnQ7dCsrKXI9ZS5tZWRpYVt0XSwtMSE9PXJlLmluZGV4T2Yoci50eXBlKSYmKHIuZGlyZWN0aW9uPVwiaW5hY3RpdmVcIik7ZWxzZSBpZih0aGlzLnJlbW90ZUhvbGQpZm9yKEcoXCJtYW5nbGVPZmZlcigpIHwgcmVtb3RlIG9uIGhvbGQsIG1hbmdsaW5nIG9mZmVyXCIpLG49ZS5tZWRpYS5sZW5ndGgsdD0wO24+dDt0Kyspcj1lLm1lZGlhW3RdLC0xIT09cmUuaW5kZXhPZihyLnR5cGUpJiYoci5kaXJlY3Rpb24/XCJzZW5kcmVjdlwiPT09ci5kaXJlY3Rpb24/ci5kaXJlY3Rpb249XCJyZWN2b25seVwiOlwicmVjdm9ubHlcIj09PXIuZGlyZWN0aW9uJiYoci5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTpyLmRpcmVjdGlvbj1cInJlY3Zvbmx5XCIpO3JldHVybiBCLndyaXRlKGUpfWZ1bmN0aW9uIFMoKXt2YXIgZT0hMCx0PSEwOyh0aGlzLmxvY2FsSG9sZHx8dGhpcy5yZW1vdGVIb2xkKSYmKGU9ITEsdD0hMSksdGhpcy5hdWRpb011dGVkJiYoZT0hMSksdGhpcy52aWRlb011dGVkJiYodD0hMSksUi5jYWxsKHRoaXMsIWUpLGIuY2FsbCh0aGlzLCF0KX1mdW5jdGlvbiBFKGUsdCl7aWYodGhpcy5zZXNzaW9uVGltZXJzLmVuYWJsZWQpe3ZhciBuO2Uuc2Vzc2lvbl9leHBpcmVzJiZlLnNlc3Npb25fZXhwaXJlcz49ei5NSU5fU0VTU0lPTl9FWFBJUkVTPyh0aGlzLnNlc3Npb25UaW1lcnMuY3VycmVudEV4cGlyZXM9ZS5zZXNzaW9uX2V4cGlyZXMsbj1lLnNlc3Npb25fZXhwaXJlc19yZWZyZXNoZXJ8fFwidWFzXCIpOih0aGlzLnNlc3Npb25UaW1lcnMuY3VycmVudEV4cGlyZXM9dGhpcy5zZXNzaW9uVGltZXJzLmRlZmF1bHRFeHBpcmVzLG49XCJ1YXNcIiksdC5wdXNoKFwiU2Vzc2lvbi1FeHBpcmVzOiBcIit0aGlzLnNlc3Npb25UaW1lcnMuY3VycmVudEV4cGlyZXMrXCI7cmVmcmVzaGVyPVwiK24pLHRoaXMuc2Vzc2lvblRpbWVycy5yZWZyZXNoZXI9XCJ1YXNcIj09PW4seS5jYWxsKHRoaXMpfX1mdW5jdGlvbiBBKGUpe2lmKHRoaXMuc2Vzc2lvblRpbWVycy5lbmFibGVkKXt2YXIgdDtlLnNlc3Npb25fZXhwaXJlcyYmZS5zZXNzaW9uX2V4cGlyZXM+PXouTUlOX1NFU1NJT05fRVhQSVJFUz8odGhpcy5zZXNzaW9uVGltZXJzLmN1cnJlbnRFeHBpcmVzPWUuc2Vzc2lvbl9leHBpcmVzLHQ9ZS5zZXNzaW9uX2V4cGlyZXNfcmVmcmVzaGVyfHxcInVhY1wiKToodGhpcy5zZXNzaW9uVGltZXJzLmN1cnJlbnRFeHBpcmVzPXRoaXMuc2Vzc2lvblRpbWVycy5kZWZhdWx0RXhwaXJlcyx0PVwidWFjXCIpLHRoaXMuc2Vzc2lvblRpbWVycy5yZWZyZXNoZXI9XCJ1YWNcIj09PXQseS5jYWxsKHRoaXMpfX1mdW5jdGlvbiB5KCl7dmFyIGU9dGhpcyx0PXRoaXMuc2Vzc2lvblRpbWVycy5jdXJyZW50RXhwaXJlczt0aGlzLnNlc3Npb25UaW1lcnMucnVubmluZz0hMCxjbGVhclRpbWVvdXQodGhpcy5zZXNzaW9uVGltZXJzLnRpbWVyKSx0aGlzLnNlc3Npb25UaW1lcnMucmVmcmVzaGVyP3RoaXMuc2Vzc2lvblRpbWVycy50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYoRyhcInJ1blNlc3Npb25UaW1lcigpIHwgc2VuZGluZyBzZXNzaW9uIHJlZnJlc2ggcmVxdWVzdFwiKSxULmNhbGwoZSx7ZXZlbnRIYW5kbGVyczp7c3VjY2VlZGVkOmZ1bmN0aW9uKHQpe0EuY2FsbChlLHQpfX19KSl9LDUwMCp0KTp0aGlzLnNlc3Npb25UaW1lcnMudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2Uuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmKGooXCJydW5TZXNzaW9uVGltZXIoKSB8IHRpbWVyIGV4cGlyZWQsIHRlcm1pbmF0aW5nIHRoZSBzZXNzaW9uXCIpLGUudGVybWluYXRlKHtjYXVzZTp6LmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQsc3RhdHVzX2NvZGU6NDA4LHJlYXNvbl9waHJhc2U6XCJTZXNzaW9uIFRpbWVyIEV4cGlyZWRcIn0pKX0sMTEwMCp0KX1mdW5jdGlvbiBSKGUpe3ZhciB0LG4scixzLGwsaT10aGlzLmNvbm5lY3Rpb24uZ2V0TG9jYWxTdHJlYW1zKCk7Zm9yKHI9aS5sZW5ndGgsdD0wO3I+dDt0KyspZm9yKGw9aVt0XS5nZXRBdWRpb1RyYWNrcygpLHM9bC5sZW5ndGgsbj0wO3M+bjtuKyspbFtuXS5lbmFibGVkPSFlfWZ1bmN0aW9uIGIoZSl7dmFyIHQsbixyLHMsbCxpPXRoaXMuY29ubmVjdGlvbi5nZXRMb2NhbFN0cmVhbXMoKTtmb3Iocj1pLmxlbmd0aCx0PTA7cj50O3QrKylmb3IobD1pW3RdLmdldFZpZGVvVHJhY2tzKCkscz1sLmxlbmd0aCxuPTA7cz5uO24rKylsW25dLmVuYWJsZWQ9IWV9ZnVuY3Rpb24gSShlLHQpe0coXCJuZXdSVENTZXNzaW9uXCIpLHRoaXMudWEubmV3UlRDU2Vzc2lvbih7b3JpZ2luYXRvcjplLHNlc3Npb246dGhpcyxyZXF1ZXN0OnR9KX1mdW5jdGlvbiB3KGUpe0coXCJzZXNzaW9uIGNvbm5lY3RpbmdcIiksdGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiLHtyZXF1ZXN0OmV9KX1mdW5jdGlvbiBOKGUsdCl7RyhcInNlc3Npb24gcHJvZ3Jlc3NcIiksdGhpcy5lbWl0KFwicHJvZ3Jlc3NcIix7b3JpZ2luYXRvcjplLHJlc3BvbnNlOnR8fG51bGx9KX1mdW5jdGlvbiBEKGUsdCl7RyhcInNlc3Npb24gYWNjZXB0ZWRcIiksdGhpcy5zdGFydF90aW1lPW5ldyBEYXRlLHRoaXMuZW1pdChcImFjY2VwdGVkXCIse29yaWdpbmF0b3I6ZSxyZXNwb25zZTp0fHxudWxsfSl9ZnVuY3Rpb24gTyhlLHQpe0coXCJzZXNzaW9uIGNvbmZpcm1lZFwiKSx0aGlzLmlzX2NvbmZpcm1lZD0hMCx0aGlzLmVtaXQoXCJjb25maXJtZWRcIix7b3JpZ2luYXRvcjplLGFjazp0fHxudWxsfSl9ZnVuY3Rpb24geChlLHQsbil7RyhcInNlc3Npb24gZW5kZWRcIiksdGhpcy5lbmRfdGltZT1uZXcgRGF0ZSx0aGlzLmNsb3NlKCksdGhpcy5lbWl0KFwiZW5kZWRcIix7b3JpZ2luYXRvcjplLG1lc3NhZ2U6dHx8bnVsbCxjYXVzZTpufSl9ZnVuY3Rpb24gVShlLHQsbil7RyhcInNlc3Npb24gZmFpbGVkXCIpLHRoaXMuY2xvc2UoKSx0aGlzLmVtaXQoXCJmYWlsZWRcIix7b3JpZ2luYXRvcjplLG1lc3NhZ2U6dHx8bnVsbCxjYXVzZTpufSl9ZnVuY3Rpb24gTShlKXtHKFwic2Vzc2lvbiBvbmhvbGRcIiksUy5jYWxsKHRoaXMpLHRoaXMuZW1pdChcImhvbGRcIix7b3JpZ2luYXRvcjplfSl9ZnVuY3Rpb24gUChlKXtHKFwic2Vzc2lvbiBvbnVuaG9sZFwiKSxTLmNhbGwodGhpcyksdGhpcy5lbWl0KFwidW5ob2xkXCIse29yaWdpbmF0b3I6ZX0pfWZ1bmN0aW9uIHEoZSl7RyhcInNlc3Npb24gb25tdXRlXCIpLFMuY2FsbCh0aGlzKSx0aGlzLmVtaXQoXCJtdXRlZFwiLHthdWRpbzplLmF1ZGlvLHZpZGVvOmUudmlkZW99KX1mdW5jdGlvbiBMKGUpe0coXCJzZXNzaW9uIG9udW5tdXRlXCIpLFMuY2FsbCh0aGlzKSx0aGlzLmVtaXQoXCJ1bm11dGVkXCIse2F1ZGlvOmUuYXVkaW8sdmlkZW86ZS52aWRlb30pfXQuZXhwb3J0cz1yO3ZhciBrPXtTVEFUVVNfTlVMTDowLFNUQVRVU19JTlZJVEVfU0VOVDoxLFNUQVRVU18xWFhfUkVDRUlWRUQ6MixTVEFUVVNfSU5WSVRFX1JFQ0VJVkVEOjMsU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUjo0LFNUQVRVU19BTlNXRVJFRDo1LFNUQVRVU19XQUlUSU5HX0ZPUl9BQ0s6NixTVEFUVVNfQ0FOQ0VMRUQ6NyxTVEFUVVNfVEVSTUlOQVRFRDo4LFNUQVRVU19DT05GSVJNRUQ6OX07ci5DPWs7dmFyIEg9ZShcInV0aWxcIiksRj1lKFwiZXZlbnRzXCIpLEc9ZShcImRlYnVnXCIpKFwiSnNTSVA6UlRDU2Vzc2lvblwiKSxqPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOlJUQ1Nlc3Npb25cIik7ai5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7dmFyIFc9ZShcInJ0Y25pbmphXCIpLEI9ZShcInNkcC10cmFuc2Zvcm1cIiksej1lKFwiLi9Db25zdGFudHNcIiksVj1lKFwiLi9FeGNlcHRpb25zXCIpLFk9ZShcIi4vVHJhbnNhY3Rpb25zXCIpLEo9ZShcIi4vVXRpbHNcIiksSz1lKFwiLi9UaW1lcnNcIiksJD1lKFwiLi9TSVBNZXNzYWdlXCIpLFg9ZShcIi4vRGlhbG9nXCIpLFE9ZShcIi4vUmVxdWVzdFNlbmRlclwiKSxaPWUoXCIuL1JUQ1Nlc3Npb24vUmVxdWVzdFwiKSxlZT1lKFwiLi9SVENTZXNzaW9uL0RUTUZcIiksdGU9ZShcIi4vUlRDU2Vzc2lvbi9SZWZlck5vdGlmaWVyXCIpLG5lPWUoXCIuL1JUQ1Nlc3Npb24vUmVmZXJTdWJzY3JpYmVyXCIpLHJlPVtcImF1ZGlvXCIsXCJ2aWRlb1wiXTtILmluaGVyaXRzKHIsRi5FdmVudEVtaXR0ZXIpLHIucHJvdG90eXBlLmlzSW5Qcm9ncmVzcz1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLnN0YXR1cyl7Y2FzZSBrLlNUQVRVU19OVUxMOmNhc2Ugay5TVEFUVVNfSU5WSVRFX1NFTlQ6Y2FzZSBrLlNUQVRVU18xWFhfUkVDRUlWRUQ6Y2FzZSBrLlNUQVRVU19JTlZJVEVfUkVDRUlWRUQ6Y2FzZSBrLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVI6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LHIucHJvdG90eXBlLmlzRXN0YWJsaXNoZWQ9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5zdGF0dXMpe2Nhc2Ugay5TVEFUVVNfQU5TV0VSRUQ6Y2FzZSBrLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0s6Y2FzZSBrLlNUQVRVU19DT05GSVJNRUQ6cmV0dXJuITA7ZGVmYXVsdDpyZXR1cm4hMX19LHIucHJvdG90eXBlLmlzRW5kZWQ9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5zdGF0dXMpe2Nhc2Ugay5TVEFUVVNfQ0FOQ0VMRUQ6Y2FzZSBrLlNUQVRVU19URVJNSU5BVEVEOnJldHVybiEwO2RlZmF1bHQ6cmV0dXJuITF9fSxyLnByb3RvdHlwZS5pc011dGVkPWZ1bmN0aW9uKCl7cmV0dXJue2F1ZGlvOnRoaXMuYXVkaW9NdXRlZCx2aWRlbzp0aGlzLnZpZGVvTXV0ZWR9fSxyLnByb3RvdHlwZS5pc09uSG9sZD1mdW5jdGlvbigpe3JldHVybntsb2NhbDp0aGlzLmxvY2FsSG9sZCxyZW1vdGU6dGhpcy5yZW1vdGVIb2xkfX0sci5wcm90b3R5cGUuaXNSZWFkeVRvUmVPZmZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJ0Y1JlYWR5P3RoaXMuZGlhbG9nP3RoaXMuZGlhbG9nLnVhY19wZW5kaW5nX3JlcGx5PT09ITB8fHRoaXMuZGlhbG9nLnVhc19wZW5kaW5nX3JlcGx5PT09ITA/KEcoXCJpc1JlYWR5VG9SZU9mZmVyKCkgfCB0aGVyZSBpcyBhbm90aGVyIElOVklURS9VUERBVEUgdHJhbnNhY3Rpb24gaW4gcHJvZ3Jlc3NcIiksITEpOiEwOihHKFwiaXNSZWFkeVRvUmVPZmZlcigpIHwgc2Vzc2lvbiBub3QgZXN0YWJsaXNoZWQgeWV0XCIpLCExKTooRyhcImlzUmVhZHlUb1JlT2ZmZXIoKSB8IGludGVybmFsIFdlYlJUQyBzdGF0dXMgbm90IHJlYWR5XCIpLCExKX0sci5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLHQsbil7RyhcImNvbm5lY3QoKVwiKSx0PXR8fHt9O3ZhciByLHMsbD1lLG89dC5ldmVudEhhbmRsZXJzfHx7fSx1PXQuZXh0cmFIZWFkZXJzJiZ0LmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSxhPXQubWVkaWFDb25zdHJhaW50c3x8e2F1ZGlvOiEwLHZpZGVvOiEwfSxjPXQubWVkaWFTdHJlYW18fG51bGwsaD10LnBjQ29uZmlnfHx7aWNlU2VydmVyczpbXX0sZD10LnJ0Y0NvbnN0cmFpbnRzfHxudWxsLHA9dC5ydGNPZmZlckNvbnN0cmFpbnRzfHxudWxsO2lmKHRoaXMucnRjT2ZmZXJDb25zdHJhaW50cz1wLHRoaXMucnRjQW5zd2VyQ29uc3RyYWludHM9dC5ydGNBbnN3ZXJDb25zdHJhaW50c3x8bnVsbCx0aGlzLnNlc3Npb25UaW1lcnMuZW5hYmxlZCYmSi5pc0RlY2ltYWwodC5zZXNzaW9uVGltZXJzRXhwaXJlcykmJih0LnNlc3Npb25UaW1lcnNFeHBpcmVzPj16Lk1JTl9TRVNTSU9OX0VYUElSRVM/dGhpcy5zZXNzaW9uVGltZXJzLmRlZmF1bHRFeHBpcmVzPXQuc2Vzc2lvblRpbWVyc0V4cGlyZXM6dGhpcy5zZXNzaW9uVGltZXJzLmRlZmF1bHRFeHBpcmVzPXouU0VTU0lPTl9FWFBJUkVTKSx0aGlzLmRhdGE9dC5kYXRhfHx0aGlzLmRhdGEsdm9pZCAwPT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGVub3VnaCBhcmd1bWVudHNcIik7aWYoIVcuaGFzV2ViUlRDKCkpdGhyb3cgbmV3IFYuTm90U3VwcG9ydGVkRXJyb3IoXCJXZWJSVEMgbm90IHN1cHBvcnRlZFwiKTtpZihlPXRoaXMudWEubm9ybWFsaXplVGFyZ2V0KGUpLCFlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRhcmdldDogXCIrbCk7aWYodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19OVUxMKXRocm93IG5ldyBWLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTtmb3IociBpbiBvKXRoaXMub24ocixvW3JdKTt0aGlzLmZyb21fdGFnPUoubmV3VGFnKCksdGhpcy5hbm9ueW1vdXM9dC5hbm9ueW1vdXN8fCExLHRoaXMuaXNDYW5jZWxlZD0hMSxzPXtmcm9tX3RhZzp0aGlzLmZyb21fdGFnfSx0aGlzLmNvbnRhY3Q9dGhpcy51YS5jb250YWN0LnRvU3RyaW5nKHthbm9ueW1vdXM6dGhpcy5hbm9ueW1vdXMsb3V0Ym91bmQ6ITB9KSx0aGlzLmFub255bW91cyYmKHMuZnJvbV9kaXNwbGF5X25hbWU9XCJBbm9ueW1vdXNcIixzLmZyb21fdXJpPVwic2lwOmFub255bW91c0Bhbm9ueW1vdXMuaW52YWxpZFwiLHUucHVzaChcIlAtUHJlZmVycmVkLUlkZW50aXR5OiBcIit0aGlzLnVhLmNvbmZpZ3VyYXRpb24udXJpLnRvU3RyaW5nKCkpLHUucHVzaChcIlByaXZhY3k6IGlkXCIpKSx1LnB1c2goXCJDb250YWN0OiBcIit0aGlzLmNvbnRhY3QpLHUucHVzaChcIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vc2RwXCIpLHRoaXMuc2Vzc2lvblRpbWVycy5lbmFibGVkJiZ1LnB1c2goXCJTZXNzaW9uLUV4cGlyZXM6IFwiK3RoaXMuc2Vzc2lvblRpbWVycy5kZWZhdWx0RXhwaXJlcyksdGhpcy5yZXF1ZXN0PW5ldyAkLk91dGdvaW5nUmVxdWVzdCh6LklOVklURSxlLHRoaXMudWEscyx1KSx0aGlzLmlkPXRoaXMucmVxdWVzdC5jYWxsX2lkK3RoaXMuZnJvbV90YWcsaS5jYWxsKHRoaXMsaCxkKSx0aGlzLnVhLnNlc3Npb25zW3RoaXMuaWRdPXRoaXMsdGhpcy5kaXJlY3Rpb249XCJvdXRnb2luZ1wiLHRoaXMubG9jYWxfaWRlbnRpdHk9dGhpcy5yZXF1ZXN0LmZyb20sdGhpcy5yZW1vdGVfaWRlbnRpdHk9dGhpcy5yZXF1ZXN0LnRvLG4/bih0aGlzKTpJLmNhbGwodGhpcyxcImxvY2FsXCIsdGhpcy5yZXF1ZXN0KSxmLmNhbGwodGhpcyxhLHAsYyl9LHIucHJvdG90eXBlLmluaXRfaW5jb21pbmc9ZnVuY3Rpb24oZSx0KXtHKFwiaW5pdF9pbmNvbWluZygpXCIpO3ZhciBuLHI9dGhpcyxzPWUuZ2V0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO3JldHVybiBlLmJvZHkmJlwiYXBwbGljYXRpb24vc2RwXCIhPT1zP3ZvaWQgZS5yZXBseSg0MTUpOih0aGlzLnN0YXR1cz1rLlNUQVRVU19JTlZJVEVfUkVDRUlWRUQsdGhpcy5mcm9tX3RhZz1lLmZyb21fdGFnLHRoaXMuaWQ9ZS5jYWxsX2lkK3RoaXMuZnJvbV90YWcsdGhpcy5yZXF1ZXN0PWUsdGhpcy5jb250YWN0PXRoaXMudWEuY29udGFjdC50b1N0cmluZygpLHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF09dGhpcyxlLmhhc0hlYWRlcihcImV4cGlyZXNcIikmJihuPTFlMyplLmdldEhlYWRlcihcImV4cGlyZXNcIikpLGUudG9fdGFnPUoubmV3VGFnKCksdS5jYWxsKHRoaXMsZSxcIlVBU1wiLCEwKT8oZS5ib2R5P3RoaXMubGF0ZV9zZHA9ITE6dGhpcy5sYXRlX3NkcD0hMCx0aGlzLnN0YXR1cz1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVIsdGhpcy50aW1lcnMudXNlck5vQW5zd2VyVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2UucmVwbHkoNDA4KSxVLmNhbGwocixcImxvY2FsXCIsbnVsbCx6LmNhdXNlcy5OT19BTlNXRVIpfSx0aGlzLnVhLmNvbmZpZ3VyYXRpb24ubm9fYW5zd2VyX3RpbWVvdXQpLG4mJih0aGlzLnRpbWVycy5leHBpcmVzVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3Iuc3RhdHVzPT09ay5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSJiYoZS5yZXBseSg0ODcpLFUuY2FsbChyLFwic3lzdGVtXCIsbnVsbCx6LmNhdXNlcy5FWFBJUkVTKSk7XG59LG4pKSx0aGlzLmRpcmVjdGlvbj1cImluY29taW5nXCIsdGhpcy5sb2NhbF9pZGVudGl0eT1lLnRvLHRoaXMucmVtb3RlX2lkZW50aXR5PWUuZnJvbSx0P3QodGhpcyk6SS5jYWxsKHRoaXMsXCJyZW1vdGVcIixlKSx2b2lkKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmKGUucmVwbHkoMTgwLG51bGwsW1wiQ29udGFjdDogXCIrci5jb250YWN0XSksTi5jYWxsKHIsXCJsb2NhbFwiLG51bGwpKSkpOnZvaWQgZS5yZXBseSg1MDAsXCJNaXNzaW5nIENvbnRhY3QgaGVhZGVyIGZpZWxkXCIpKX0sci5wcm90b3R5cGUuYW5zd2VyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7aWYodi5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEKWlmKHYubG9jYWxNZWRpYVN0cmVhbT1lLGUmJnYuY29ubmVjdGlvbi5hZGRTdHJlYW0oZSksdi5yZXF1ZXN0LmJvZHl8fHYuZW1pdChcInBlZXJjb25uZWN0aW9uXCIse3BlZXJjb25uZWN0aW9uOnYuY29ubmVjdGlvbn0pLHYubGF0ZV9zZHApcigpO2Vsc2V7dmFyIHQ9e29yaWdpbmF0b3I6XCJyZW1vdGVcIix0eXBlOlwib2ZmZXJcIixzZHA6Qy5ib2R5fTt2LmVtaXQoXCJzZHBcIix0KSx2LmNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFcuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwib2ZmZXJcIixzZHA6dC5zZHB9KSxyLGZ1bmN0aW9uKCl7Qy5yZXBseSg0ODgpLFUuY2FsbCh2LFwic3lzdGVtXCIsbnVsbCx6LmNhdXNlcy5XRUJSVENfRVJST1IpfSl9fWZ1bmN0aW9uIG4oKXt2LnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJihDLnJlcGx5KDQ4MCksVS5jYWxsKHYsXCJsb2NhbFwiLG51bGwsei5jYXVzZXMuVVNFUl9ERU5JRURfTUVESUFfQUNDRVNTKSl9ZnVuY3Rpb24gcigpe3cuY2FsbCh2LEMpLHYubGF0ZV9zZHA/by5jYWxsKHYsXCJvZmZlclwiLGEsYyx2LnJ0Y09mZmVyQ29uc3RyYWludHMpOm8uY2FsbCh2LFwiYW5zd2VyXCIsYSxjLEkpfWZ1bmN0aW9uIGEoZSl7ZnVuY3Rpb24gdCgpe3Yuc3RhdHVzPWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyxzLmNhbGwodixDLGUpLGwuY2FsbCh2KSxELmNhbGwodixcImxvY2FsXCIpfWZ1bmN0aW9uIG4oKXtVLmNhbGwodixcInN5c3RlbVwiLG51bGwsei5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUil9di5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYoRS5jYWxsKHYsQyxTKSxDLnJlcGx5KDIwMCxudWxsLFMsZSx0LG4pKX1mdW5jdGlvbiBjKCl7di5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiYoQy5yZXBseSg1MDApLFUuY2FsbCh2LFwic3lzdGVtXCIsbnVsbCx6LmNhdXNlcy5XRUJSVENfRVJST1IpKX1HKFwiYW5zd2VyKClcIiksZT1lfHx7fTt2YXIgaCxkLHAsZixtPSExLGc9ITEsVD0hMSxfPSExLHY9dGhpcyxDPXRoaXMucmVxdWVzdCxTPWUuZXh0cmFIZWFkZXJzJiZlLmV4dHJhSGVhZGVycy5zbGljZSgpfHxbXSxBPWUubWVkaWFDb25zdHJhaW50c3x8e30seT1lLm1lZGlhU3RyZWFtfHxudWxsLFI9ZS5wY0NvbmZpZ3x8e2ljZVNlcnZlcnM6W119LGI9ZS5ydGNDb25zdHJhaW50c3x8bnVsbCxJPWUucnRjQW5zd2VyQ29uc3RyYWludHN8fG51bGw7aWYodGhpcy5ydGNBbnN3ZXJDb25zdHJhaW50cz1JLHRoaXMucnRjT2ZmZXJDb25zdHJhaW50cz1lLnJ0Y09mZmVyQ29uc3RyYWludHN8fG51bGwsdGhpcy5zZXNzaW9uVGltZXJzLmVuYWJsZWQmJkouaXNEZWNpbWFsKGUuc2Vzc2lvblRpbWVyc0V4cGlyZXMpJiYoZS5zZXNzaW9uVGltZXJzRXhwaXJlcz49ei5NSU5fU0VTU0lPTl9FWFBJUkVTP3RoaXMuc2Vzc2lvblRpbWVycy5kZWZhdWx0RXhwaXJlcz1lLnNlc3Npb25UaW1lcnNFeHBpcmVzOnRoaXMuc2Vzc2lvblRpbWVycy5kZWZhdWx0RXhwaXJlcz16LlNFU1NJT05fRVhQSVJFUyksdGhpcy5kYXRhPWUuZGF0YXx8dGhpcy5kYXRhLFwiaW5jb21pbmdcIiE9PXRoaXMuZGlyZWN0aW9uKXRocm93IG5ldyBWLk5vdFN1cHBvcnRlZEVycm9yKCdcImFuc3dlclwiIG5vdCBzdXBwb3J0ZWQgZm9yIG91dGdvaW5nIFJUQ1Nlc3Npb24nKTtpZih0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FOU1dFUil0aHJvdyBuZXcgVi5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7aWYodGhpcy5zdGF0dXM9ay5TVEFUVVNfQU5TV0VSRUQsIXUuY2FsbCh0aGlzLEMsXCJVQVNcIikpcmV0dXJuIHZvaWQgQy5yZXBseSg1MDAsXCJFcnJvciBjcmVhdGluZyBkaWFsb2dcIik7Zm9yKGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy51c2VyTm9BbnN3ZXJUaW1lciksUy51bnNoaWZ0KFwiQ29udGFjdDogXCIrdi5jb250YWN0KSxwPUMucGFyc2VTRFAoKSxBcnJheS5pc0FycmF5KHAubWVkaWEpfHwocC5tZWRpYT1bcC5tZWRpYV0pLGg9cC5tZWRpYS5sZW5ndGg7aC0tOyl7dmFyIE49cC5tZWRpYVtoXTtcImF1ZGlvXCI9PT1OLnR5cGUmJihtPSEwLE4uZGlyZWN0aW9uJiZcInNlbmRyZWN2XCIhPT1OLmRpcmVjdGlvbnx8KFQ9ITApKSxcInZpZGVvXCI9PT1OLnR5cGUmJihnPSEwLE4uZGlyZWN0aW9uJiZcInNlbmRyZWN2XCIhPT1OLmRpcmVjdGlvbnx8KF89ITApKX1pZih5JiZBLmF1ZGlvPT09ITEpZm9yKGY9eS5nZXRBdWRpb1RyYWNrcygpLGQ9Zi5sZW5ndGgsaD0wO2Q+aDtoKyspeS5yZW1vdmVUcmFjayhmW2hdKTtpZih5JiZBLnZpZGVvPT09ITEpZm9yKGY9eS5nZXRWaWRlb1RyYWNrcygpLGQ9Zi5sZW5ndGgsaD0wO2Q+aDtoKyspeS5yZW1vdmVUcmFjayhmW2hdKTt5fHx2b2lkIDAhPT1BLmF1ZGlvfHwoQS5hdWRpbz1UKSx5fHx2b2lkIDAhPT1BLnZpZGVvfHwoQS52aWRlbz1fKSx5fHxtfHwoQS5hdWRpbz0hMSkseXx8Z3x8KEEudmlkZW89ITEpLGkuY2FsbCh0aGlzLFIsYikseT90KHkpOkEuYXVkaW98fEEudmlkZW8/KHYubG9jYWxNZWRpYVN0cmVhbUxvY2FsbHlHZW5lcmF0ZWQ9ITAsVy5nZXRVc2VyTWVkaWEoQSx0LG4pKTp0KG51bGwpfSxyLnByb3RvdHlwZS50ZXJtaW5hdGU9ZnVuY3Rpb24oZSl7RyhcInRlcm1pbmF0ZSgpXCIpLGU9ZXx8e307dmFyIHQsbixyPWUuY2F1c2V8fHouY2F1c2VzLkJZRSxzPWUuc3RhdHVzX2NvZGUsbD1lLnJlYXNvbl9waHJhc2UsaT1lLmV4dHJhSGVhZGVycyYmZS5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10sbz1lLmJvZHksdT10aGlzO2lmKHRoaXMuc3RhdHVzPT09ay5TVEFUVVNfVEVSTUlOQVRFRCl0aHJvdyBuZXcgVi5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnN0YXR1cyk7c3dpdGNoKHRoaXMuc3RhdHVzKXtjYXNlIGsuU1RBVFVTX05VTEw6Y2FzZSBrLlNUQVRVU19JTlZJVEVfU0VOVDpjYXNlIGsuU1RBVFVTXzFYWF9SRUNFSVZFRDppZihHKFwiY2FuY2VsaW5nIHNlc3NzaW9uXCIpLHMmJigyMDA+c3x8cz49NzAwKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrcyk7cyYmKGw9bHx8ei5SRUFTT05fUEhSQVNFW3NdfHxcIlwiLHQ9XCJTSVAgO2NhdXNlPVwiK3MrJyA7dGV4dD1cIicrbCsnXCInKSx0aGlzLnN0YXR1cz09PWsuU1RBVFVTX05VTEw/KHRoaXMuaXNDYW5jZWxlZD0hMCx0aGlzLmNhbmNlbFJlYXNvbj10KTp0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0lOVklURV9TRU5UPyh0aGlzLmlzQ2FuY2VsZWQ9ITAsdGhpcy5jYW5jZWxSZWFzb249dCk6dGhpcy5zdGF0dXM9PT1rLlNUQVRVU18xWFhfUkVDRUlWRUQmJnRoaXMucmVxdWVzdC5jYW5jZWwodCksdGhpcy5zdGF0dXM9ay5TVEFUVVNfQ0FOQ0VMRUQsVS5jYWxsKHRoaXMsXCJsb2NhbFwiLG51bGwsei5jYXVzZXMuQ0FOQ0VMRUQpO2JyZWFrO2Nhc2Ugay5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSOmNhc2Ugay5TVEFUVVNfQU5TV0VSRUQ6aWYoRyhcInJlamVjdGluZyBzZXNzaW9uXCIpLHM9c3x8NDgwLDMwMD5zfHxzPj03MDApdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzX2NvZGU6IFwiK3MpO3RoaXMucmVxdWVzdC5yZXBseShzLGwsaSxvKSxVLmNhbGwodGhpcyxcImxvY2FsXCIsbnVsbCx6LmNhdXNlcy5SRUpFQ1RFRCk7YnJlYWs7Y2FzZSBrLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0s6Y2FzZSBrLlNUQVRVU19DT05GSVJNRUQ6aWYoRyhcInRlcm1pbmF0aW5nIHNlc3Npb25cIiksbD1lLnJlYXNvbl9waHJhc2V8fHouUkVBU09OX1BIUkFTRVtzXXx8XCJcIixzJiYoMjAwPnN8fHM+PTcwMCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgc3RhdHVzX2NvZGU6IFwiK3MpO3MmJmkucHVzaChcIlJlYXNvbjogU0lQIDtjYXVzZT1cIitzKyc7IHRleHQ9XCInK2wrJ1wiJyksdGhpcy5zdGF0dXM9PT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJlwiaW5jb21pbmdcIj09PXRoaXMuZGlyZWN0aW9uJiZ0aGlzLnJlcXVlc3Quc2VydmVyX3RyYW5zYWN0aW9uLnN0YXRlIT09WS5DLlNUQVRVU19URVJNSU5BVEVEPyhuPXRoaXMuZGlhbG9nLHRoaXMucmVjZWl2ZVJlcXVlc3Q9ZnVuY3Rpb24oZSl7ZS5tZXRob2Q9PT16LkFDSyYmKHYuY2FsbCh0aGlzLHouQllFLHtleHRyYUhlYWRlcnM6aSxib2R5Om99KSxuLnRlcm1pbmF0ZSgpKX0sdGhpcy5yZXF1ZXN0LnNlcnZlcl90cmFuc2FjdGlvbi5vbihcInN0YXRlQ2hhbmdlZFwiLGZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT09PVkuQy5TVEFUVVNfVEVSTUlOQVRFRCYmKHYuY2FsbCh1LHouQllFLHtleHRyYUhlYWRlcnM6aSxib2R5Om99KSxuLnRlcm1pbmF0ZSgpKX0pLHguY2FsbCh0aGlzLFwibG9jYWxcIixudWxsLHIpLHRoaXMuZGlhbG9nPW4sdGhpcy51YS5kaWFsb2dzW24uaWQudG9TdHJpbmcoKV09bik6KHYuY2FsbCh0aGlzLHouQllFLHtleHRyYUhlYWRlcnM6aSxib2R5Om99KSx4LmNhbGwodGhpcyxcImxvY2FsXCIsbnVsbCxyKSl9fSxyLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0coXCJjbG9zZSgpXCIpO3ZhciBlO2lmKHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCl7aWYodGhpcy5jb25uZWN0aW9uKXRyeXt0aGlzLmNvbm5lY3Rpb24uY2xvc2UoKX1jYXRjaCh0KXtqKFwiY2xvc2UoKSB8IGVycm9yIGNsb3NpbmcgdGhlIFJUQ1BlZXJDb25uZWN0aW9uOiAlb1wiLHQpfXRoaXMubG9jYWxNZWRpYVN0cmVhbSYmdGhpcy5sb2NhbE1lZGlhU3RyZWFtTG9jYWxseUdlbmVyYXRlZCYmKEcoXCJjbG9zZSgpIHwgY2xvc2luZyBsb2NhbCBNZWRpYVN0cmVhbVwiKSxXLmNsb3NlTWVkaWFTdHJlYW0odGhpcy5sb2NhbE1lZGlhU3RyZWFtKSk7Zm9yKGUgaW4gdGhpcy50aW1lcnMpY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzW2VdKTtjbGVhclRpbWVvdXQodGhpcy5zZXNzaW9uVGltZXJzLnRpbWVyKSx0aGlzLmRpYWxvZyYmKHRoaXMuZGlhbG9nLnRlcm1pbmF0ZSgpLGRlbGV0ZSB0aGlzLmRpYWxvZyk7Zm9yKGUgaW4gdGhpcy5lYXJseURpYWxvZ3MpdGhpcy5lYXJseURpYWxvZ3NbZV0udGVybWluYXRlKCksZGVsZXRlIHRoaXMuZWFybHlEaWFsb2dzW2VdO3RoaXMuc3RhdHVzPWsuU1RBVFVTX1RFUk1JTkFURUQsZGVsZXRlIHRoaXMudWEuc2Vzc2lvbnNbdGhpcy5pZF19fSxyLnByb3RvdHlwZS5zZW5kRFRNRj1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oKXt2YXIgZSxvO2lmKGkuc3RhdHVzPT09ay5TVEFUVVNfVEVSTUlOQVRFRHx8IWkudG9uZXN8fGw+PWkudG9uZXMubGVuZ3RoKXJldHVybiB2b2lkKGkudG9uZXM9bnVsbCk7aWYoZT1pLnRvbmVzW2xdLGwrPTEsXCIsXCI9PT1lKW89MmUzO2Vsc2V7dmFyIHU9bmV3IGVlKGkpO3QuZXZlbnRIYW5kbGVycz17ZmFpbGVkOmZ1bmN0aW9uKCl7aS50b25lcz1udWxsfX0sdS5zZW5kKGUsdCksbz1yK3N9c2V0VGltZW91dChuLG8pfUcoXCJzZW5kRFRNRigpIHwgdG9uZXM6ICVzXCIsZSk7dmFyIHIscyxsPTAsaT10aGlzO2lmKHQ9dHx8e30scj10LmR1cmF0aW9ufHxudWxsLHM9dC5pbnRlclRvbmVHYXB8fG51bGwsdm9pZCAwPT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm90IGVub3VnaCBhcmd1bWVudHNcIik7aWYodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQmJnRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLKXRocm93IG5ldyBWLkludmFsaWRTdGF0ZUVycm9yKHRoaXMuc3RhdHVzKTtpZihcIm51bWJlclwiPT10eXBlb2YgZSYmKGU9ZS50b1N0cmluZygpKSwhZXx8XCJzdHJpbmdcIiE9dHlwZW9mIGV8fCFlLm1hdGNoKC9eWzAtOUEtRCMqLF0rJC9pKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0b25lczogXCIrZSk7aWYociYmIUouaXNEZWNpbWFsKHIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRvbmUgZHVyYXRpb246IFwiK3IpO2lmKHI/cjxlZS5DLk1JTl9EVVJBVElPTj8oRygnXCJkdXJhdGlvblwiIHZhbHVlIGlzIGxvd2VyIHRoYW4gdGhlIG1pbmltdW0gYWxsb3dlZCwgc2V0dGluZyBpdCB0byAnK2VlLkMuTUlOX0RVUkFUSU9OK1wiIG1pbGxpc2Vjb25kc1wiKSxyPWVlLkMuTUlOX0RVUkFUSU9OKTpyPmVlLkMuTUFYX0RVUkFUSU9OPyhHKCdcImR1cmF0aW9uXCIgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHRoZSBtYXhpbXVtIGFsbG93ZWQsIHNldHRpbmcgaXQgdG8gJytlZS5DLk1BWF9EVVJBVElPTitcIiBtaWxsaXNlY29uZHNcIikscj1lZS5DLk1BWF9EVVJBVElPTik6cj1NYXRoLmFicyhyKTpyPWVlLkMuREVGQVVMVF9EVVJBVElPTix0LmR1cmF0aW9uPXIscyYmIUouaXNEZWNpbWFsKHMpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGludGVyVG9uZUdhcDogXCIrcyk7cmV0dXJuIHM/czxlZS5DLk1JTl9JTlRFUl9UT05FX0dBUD8oRygnXCJpbnRlclRvbmVHYXBcIiB2YWx1ZSBpcyBsb3dlciB0aGFuIHRoZSBtaW5pbXVtIGFsbG93ZWQsIHNldHRpbmcgaXQgdG8gJytlZS5DLk1JTl9JTlRFUl9UT05FX0dBUCtcIiBtaWxsaXNlY29uZHNcIikscz1lZS5DLk1JTl9JTlRFUl9UT05FX0dBUCk6cz1NYXRoLmFicyhzKTpzPWVlLkMuREVGQVVMVF9JTlRFUl9UT05FX0dBUCx0aGlzLnRvbmVzP3ZvaWQodGhpcy50b25lcys9ZSk6KHRoaXMudG9uZXM9ZSx2b2lkIG4oKSl9LHIucHJvdG90eXBlLm11dGU9ZnVuY3Rpb24oZSl7RyhcIm11dGUoKVwiKSxlPWV8fHthdWRpbzohMCx2aWRlbzohMX07dmFyIHQ9ITEsbj0hMTt0aGlzLmF1ZGlvTXV0ZWQ9PT0hMSYmZS5hdWRpbyYmKHQ9ITAsdGhpcy5hdWRpb011dGVkPSEwLFIuY2FsbCh0aGlzLCEwKSksdGhpcy52aWRlb011dGVkPT09ITEmJmUudmlkZW8mJihuPSEwLHRoaXMudmlkZW9NdXRlZD0hMCxiLmNhbGwodGhpcywhMCkpLHQhPT0hMCYmbiE9PSEwfHxxLmNhbGwodGhpcyx7YXVkaW86dCx2aWRlbzpufSl9LHIucHJvdG90eXBlLnVubXV0ZT1mdW5jdGlvbihlKXtHKFwidW5tdXRlKClcIiksZT1lfHx7YXVkaW86ITAsdmlkZW86ITB9O3ZhciB0PSExLG49ITE7dGhpcy5hdWRpb011dGVkPT09ITAmJmUuYXVkaW8mJih0PSEwLHRoaXMuYXVkaW9NdXRlZD0hMSx0aGlzLmxvY2FsSG9sZD09PSExJiZSLmNhbGwodGhpcywhMSkpLHRoaXMudmlkZW9NdXRlZD09PSEwJiZlLnZpZGVvJiYobj0hMCx0aGlzLnZpZGVvTXV0ZWQ9ITEsdGhpcy5sb2NhbEhvbGQ9PT0hMSYmYi5jYWxsKHRoaXMsITEpKSx0IT09ITAmJm4hPT0hMHx8TC5jYWxsKHRoaXMse2F1ZGlvOnQsdmlkZW86bn0pfSxyLnByb3RvdHlwZS5ob2xkPWZ1bmN0aW9uKGUsdCl7RyhcImhvbGQoKVwiKSxlPWV8fHt9O3ZhciBuLHI9dGhpcztyZXR1cm4gdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJnRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEPyExOnRoaXMubG9jYWxIb2xkPT09ITA/ITE6dGhpcy5pc1JlYWR5VG9SZU9mZmVyKCk/KHRoaXMubG9jYWxIb2xkPSEwLE0uY2FsbCh0aGlzLFwibG9jYWxcIiksbj17c3VjY2VlZGVkOmZ1bmN0aW9uKCl7dCYmdCgpfSxmYWlsZWQ6ZnVuY3Rpb24oKXtyLnRlcm1pbmF0ZSh7Y2F1c2U6ei5jYXVzZXMuV0VCUlRDX0VSUk9SLHN0YXR1c19jb2RlOjUwMCxyZWFzb25fcGhyYXNlOlwiSG9sZCBGYWlsZWRcIn0pfX0sZS51c2VVcGRhdGU/VC5jYWxsKHRoaXMse3NkcE9mZmVyOiEwLGV2ZW50SGFuZGxlcnM6bixleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnN9KTpnLmNhbGwodGhpcyx7ZXZlbnRIYW5kbGVyczpuLGV4dHJhSGVhZGVyczplLmV4dHJhSGVhZGVyc30pLCEwKTohMX0sci5wcm90b3R5cGUudW5ob2xkPWZ1bmN0aW9uKGUsdCl7RyhcInVuaG9sZCgpXCIpLGU9ZXx8e307dmFyIG4scj10aGlzO3JldHVybiB0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSyYmdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19DT05GSVJNRUQ/ITE6dGhpcy5sb2NhbEhvbGQ9PT0hMT8hMTp0aGlzLmlzUmVhZHlUb1JlT2ZmZXIoKT8odGhpcy5sb2NhbEhvbGQ9ITEsUC5jYWxsKHRoaXMsXCJsb2NhbFwiKSxuPXtzdWNjZWVkZWQ6ZnVuY3Rpb24oKXt0JiZ0KCl9LGZhaWxlZDpmdW5jdGlvbigpe3IudGVybWluYXRlKHtjYXVzZTp6LmNhdXNlcy5XRUJSVENfRVJST1Isc3RhdHVzX2NvZGU6NTAwLHJlYXNvbl9waHJhc2U6XCJVbmhvbGQgRmFpbGVkXCJ9KX19LGUudXNlVXBkYXRlP1QuY2FsbCh0aGlzLHtzZHBPZmZlcjohMCxldmVudEhhbmRsZXJzOm4sZXh0cmFIZWFkZXJzOmUuZXh0cmFIZWFkZXJzfSk6Zy5jYWxsKHRoaXMse2V2ZW50SGFuZGxlcnM6bixleHRyYUhlYWRlcnM6ZS5leHRyYUhlYWRlcnN9KSwhMCk6ITF9LHIucHJvdG90eXBlLnJlbmVnb3RpYXRlPWZ1bmN0aW9uKGUsdCl7RyhcInJlbmVnb3RpYXRlKClcIiksZT1lfHx7fTt2YXIgbixyPXRoaXMscz1lLnJ0Y09mZmVyQ29uc3RyYWludHN8fG51bGw7cmV0dXJuIHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfV0FJVElOR19GT1JfQUNLJiZ0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX0NPTkZJUk1FRD8hMTp0aGlzLmlzUmVhZHlUb1JlT2ZmZXIoKT8obj17c3VjY2VlZGVkOmZ1bmN0aW9uKCl7dCYmdCgpfSxmYWlsZWQ6ZnVuY3Rpb24oKXtyLnRlcm1pbmF0ZSh7Y2F1c2U6ei5jYXVzZXMuV0VCUlRDX0VSUk9SLHN0YXR1c19jb2RlOjUwMCxyZWFzb25fcGhyYXNlOlwiTWVkaWEgUmVuZWdvdGlhdGlvbiBGYWlsZWRcIn0pfX0sUy5jYWxsKHRoaXMpLGUudXNlVXBkYXRlP1QuY2FsbCh0aGlzLHtzZHBPZmZlcjohMCxldmVudEhhbmRsZXJzOm4scnRjT2ZmZXJDb25zdHJhaW50czpzLGV4dHJhSGVhZGVyczplLmV4dHJhSGVhZGVyc30pOmcuY2FsbCh0aGlzLHtldmVudEhhbmRsZXJzOm4scnRjT2ZmZXJDb25zdHJhaW50czpzLGV4dHJhSGVhZGVyczplLmV4dHJhSGVhZGVyc30pLCEwKTohMX0sci5wcm90b3R5cGUucmVmZXI9ZnVuY3Rpb24oZSx0KXtHKFwicmVmZXIoKVwiKTt2YXIgbixyLHM9dGhpcyxsPWU7aWYodGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJnRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQ09ORklSTUVEKXJldHVybiExO2lmKGU9dGhpcy51YS5ub3JtYWxpemVUYXJnZXQoZSksIWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdGFyZ2V0OiBcIitsKTtyZXR1cm4gbj1uZXcgbmUodGhpcyksbi5zZW5kUmVmZXIoZSx0KSxyPW4ub3V0Z29pbmdSZXF1ZXN0LmNzZXEsdGhpcy5yZWZlclN1YnNjcmliZXJzW3JdPW4sbi5vbihcInJlcXVlc3RGYWlsZWRcIixmdW5jdGlvbigpe2RlbGV0ZSBzLnJlZmVyU3Vic2NyaWJlcnNbcl19KSxuLm9uKFwiYWNjZXB0ZWRcIixmdW5jdGlvbigpe2RlbGV0ZSBzLnJlZmVyU3Vic2NyaWJlcnNbcl19KSxuLm9uKFwiZmFpbGVkXCIsZnVuY3Rpb24oKXtkZWxldGUgcy5yZWZlclN1YnNjcmliZXJzW3JdfSksbn0sci5wcm90b3R5cGUucmVjZWl2ZVJlcXVlc3Q9ZnVuY3Rpb24oZSl7RyhcInJlY2VpdmVSZXF1ZXN0KClcIik7dmFyIHQsbj10aGlzO2lmKGUubWV0aG9kPT09ei5DQU5DRUwpdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BTlNXRVImJnRoaXMuc3RhdHVzIT09ay5TVEFUVVNfQU5TV0VSRUR8fCh0aGlzLnN0YXR1cz1rLlNUQVRVU19DQU5DRUxFRCx0aGlzLnJlcXVlc3QucmVwbHkoNDg3KSxVLmNhbGwodGhpcyxcInJlbW90ZVwiLGUsei5jYXVzZXMuQ0FOQ0VMRUQpKTtlbHNlIHN3aXRjaChlLm1ldGhvZCl7Y2FzZSB6LkFDSzppZih0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1dBSVRJTkdfRk9SX0FDSylyZXR1cm47aWYodGhpcy5zdGF0dXM9ay5TVEFUVVNfQ09ORklSTUVELGNsZWFyVGltZW91dCh0aGlzLnRpbWVycy5hY2tUaW1lciksY2xlYXJUaW1lb3V0KHRoaXMudGltZXJzLmludml0ZTJ4eFRpbWVyKSx0aGlzLmxhdGVfc2RwKXtpZighZS5ib2R5KXt0aGlzLnRlcm1pbmF0ZSh7Y2F1c2U6ei5jYXVzZXMuTUlTU0lOR19TRFAsc3RhdHVzX2NvZGU6NDAwfSk7YnJlYWt9dmFyIHI9e29yaWdpbmF0b3I6XCJyZW1vdGVcIix0eXBlOlwiYW5zd2VyXCIsc2RwOmUuYm9keX07dGhpcy5lbWl0KFwic2RwXCIsciksdGhpcy5jb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBXLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcImFuc3dlclwiLHNkcDpyLnNkcH0pLGZ1bmN0aW9uKCl7bi5pc19jb25maXJtZWR8fE8uY2FsbChuLFwicmVtb3RlXCIsZSl9LGZ1bmN0aW9uKCl7bi50ZXJtaW5hdGUoe2NhdXNlOnouY2F1c2VzLkJBRF9NRURJQV9ERVNDUklQVElPTixzdGF0dXNfY29kZTo0ODh9KX0pfWVsc2UgdGhpcy5pc19jb25maXJtZWR8fE8uY2FsbCh0aGlzLFwicmVtb3RlXCIsZSk7YnJlYWs7Y2FzZSB6LkJZRTp0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0NPTkZJUk1FRD8oZS5yZXBseSgyMDApLHguY2FsbCh0aGlzLFwicmVtb3RlXCIsZSx6LmNhdXNlcy5CWUUpKTp0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0lOVklURV9SRUNFSVZFRD8oZS5yZXBseSgyMDApLHRoaXMucmVxdWVzdC5yZXBseSg0ODcsXCJCWUUgUmVjZWl2ZWRcIikseC5jYWxsKHRoaXMsXCJyZW1vdGVcIixlLHouY2F1c2VzLkJZRSkpOmUucmVwbHkoNDAzLFwiV3JvbmcgU3RhdHVzXCIpO2JyZWFrO2Nhc2Ugei5JTlZJVEU6dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19DT05GSVJNRUQ/ZS5oYXNIZWFkZXIoXCJyZXBsYWNlc1wiKT9wLmNhbGwodGhpcyxlKTphLmNhbGwodGhpcyxlKTplLnJlcGx5KDQwMyxcIldyb25nIFN0YXR1c1wiKTticmVhaztjYXNlIHouSU5GTzp0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0NPTkZJUk1FRHx8dGhpcy5zdGF0dXM9PT1rLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0t8fHRoaXMuc3RhdHVzPT09ay5TVEFUVVNfSU5WSVRFX1JFQ0VJVkVEPyh0PWUuZ2V0SGVhZGVyKFwiY29udGVudC10eXBlXCIpLHQmJnQubWF0Y2goL15hcHBsaWNhdGlvblxcL2R0bWYtcmVsYXkvaSk/bmV3IGVlKHRoaXMpLmluaXRfaW5jb21pbmcoZSk6ZS5yZXBseSg0MTUpKTplLnJlcGx5KDQwMyxcIldyb25nIFN0YXR1c1wiKTticmVhaztjYXNlIHouVVBEQVRFOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfQ09ORklSTUVEP2MuY2FsbCh0aGlzLGUpOmUucmVwbHkoNDAzLFwiV3JvbmcgU3RhdHVzXCIpO2JyZWFrO2Nhc2Ugei5SRUZFUjp0aGlzLnN0YXR1cz09PWsuU1RBVFVTX0NPTkZJUk1FRD9oLmNhbGwodGhpcyxlKTplLnJlcGx5KDQwMyxcIldyb25nIFN0YXR1c1wiKTticmVhaztjYXNlIHouTk9USUZZOnRoaXMuc3RhdHVzPT09ay5TVEFUVVNfQ09ORklSTUVEP2QuY2FsbCh0aGlzLGUpOmUucmVwbHkoNDAzLFwiV3JvbmcgU3RhdHVzXCIpO2JyZWFrO2RlZmF1bHQ6ZS5yZXBseSg1MDEpfX0sci5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe2ooXCJvblRyYW5zcG9ydEVycm9yKClcIiksdGhpcy5zdGF0dXMhPT1rLlNUQVRVU19URVJNSU5BVEVEJiZ0aGlzLnRlcm1pbmF0ZSh7c3RhdHVzX2NvZGU6NTAwLHJlYXNvbl9waHJhc2U6ei5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUixjYXVzZTp6LmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SfSl9LHIucHJvdG90eXBlLm9uUmVxdWVzdFRpbWVvdXQ9ZnVuY3Rpb24oKXtHKFwib25SZXF1ZXN0VGltZW91dFwiKSx0aGlzLnN0YXR1cyE9PWsuU1RBVFVTX1RFUk1JTkFURUQmJnRoaXMudGVybWluYXRlKHtzdGF0dXNfY29kZTo0MDgscmVhc29uX3BocmFzZTp6LmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQsY2F1c2U6ei5jYXVzZXMuUkVRVUVTVF9USU1FT1VUfSl9LHIucHJvdG90eXBlLm9uRGlhbG9nRXJyb3I9ZnVuY3Rpb24oKXtqKFwib25EaWFsb2dFcnJvcigpXCIpLHRoaXMuc3RhdHVzIT09ay5TVEFUVVNfVEVSTUlOQVRFRCYmdGhpcy50ZXJtaW5hdGUoe3N0YXR1c19jb2RlOjUwMCxyZWFzb25fcGhyYXNlOnouY2F1c2VzLkRJQUxPR19FUlJPUixjYXVzZTp6LmNhdXNlcy5ESUFMT0dfRVJST1J9KX0sci5wcm90b3R5cGUubmV3RFRNRj1mdW5jdGlvbihlKXtHKFwibmV3RFRNRigpXCIpLHRoaXMuZW1pdChcIm5ld0RUTUZcIixlKX0sci5wcm90b3R5cGUucmVzZXRMb2NhbE1lZGlhPWZ1bmN0aW9uKCl7RyhcInJlc2V0TG9jYWxNZWRpYSgpXCIpLHRoaXMubG9jYWxIb2xkPSExLHRoaXMuYXVkaW9NdXRlZD0hMSx0aGlzLnZpZGVvTXV0ZWQ9ITEsUy5jYWxsKHRoaXMpfX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9EaWFsb2dcIjoyLFwiLi9FeGNlcHRpb25zXCI6NSxcIi4vUlRDU2Vzc2lvbi9EVE1GXCI6MTIsXCIuL1JUQ1Nlc3Npb24vUmVmZXJOb3RpZmllclwiOjEzLFwiLi9SVENTZXNzaW9uL1JlZmVyU3Vic2NyaWJlclwiOjE0LFwiLi9SVENTZXNzaW9uL1JlcXVlc3RcIjoxNSxcIi4vUmVxdWVzdFNlbmRlclwiOjE3LFwiLi9TSVBNZXNzYWdlXCI6MTgsXCIuL1RpbWVyc1wiOjIwLFwiLi9UcmFuc2FjdGlvbnNcIjoyMSxcIi4vVXRpbHNcIjoyNSxkZWJ1ZzozMyxldmVudHM6MjgscnRjbmluamE6MzgsXCJzZHAtdHJhbnNmb3JtXCI6NDQsdXRpbDozMn1dLDEyOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXt0aGlzLm93bmVyPWUsdGhpcy5kaXJlY3Rpb249bnVsbCx0aGlzLnRvbmU9bnVsbCx0aGlzLmR1cmF0aW9uPW51bGx9dC5leHBvcnRzPXI7dmFyIHM9e01JTl9EVVJBVElPTjo3MCxNQVhfRFVSQVRJT046NmUzLERFRkFVTFRfRFVSQVRJT046MTAwLE1JTl9JTlRFUl9UT05FX0dBUDo1MCxERUZBVUxUX0lOVEVSX1RPTkVfR0FQOjUwMH07ci5DPXM7dmFyIGw9ZShcImRlYnVnXCIpKFwiSnNTSVA6UlRDU2Vzc2lvbjpEVE1GXCIpLGk9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6UlRDU2Vzc2lvbjpEVE1GXCIpO2kubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO3ZhciBvPWUoXCIuLi9Db25zdGFudHNcIiksdT1lKFwiLi4vRXhjZXB0aW9uc1wiKSxhPWUoXCIuLi9SVENTZXNzaW9uXCIpO3IucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixyO2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBlbm91Z2ggYXJndW1lbnRzXCIpO2lmKHRoaXMuZGlyZWN0aW9uPVwib3V0Z29pbmdcIix0aGlzLm93bmVyLnN0YXR1cyE9PWEuQy5TVEFUVVNfQ09ORklSTUVEJiZ0aGlzLm93bmVyLnN0YXR1cyE9PWEuQy5TVEFUVVNfV0FJVElOR19GT1JfQUNLKXRocm93IG5ldyB1LkludmFsaWRTdGF0ZUVycm9yKHRoaXMub3duZXIuc3RhdHVzKTtpZih0PXR8fHt9LG49dC5leHRyYUhlYWRlcnM/dC5leHRyYUhlYWRlcnMuc2xpY2UoKTpbXSx0aGlzLmV2ZW50SGFuZGxlcnM9dC5ldmVudEhhbmRsZXJzfHx7fSxcInN0cmluZ1wiPT10eXBlb2YgZSllPWUudG9VcHBlckNhc2UoKTtlbHNle2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHRvbmU6IFwiK2UpO2U9ZS50b1N0cmluZygpfWlmKCFlLm1hdGNoKC9eWzAtOUEtRCMqXSQvKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB0b25lOiBcIitlKTt0aGlzLnRvbmU9ZSx0aGlzLmR1cmF0aW9uPXQuZHVyYXRpb24sbi5wdXNoKFwiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9kdG1mLXJlbGF5XCIpLHI9XCJTaWduYWw9XCIrdGhpcy50b25lK1wiXFxyXFxuXCIscis9XCJEdXJhdGlvbj1cIit0aGlzLmR1cmF0aW9uLHRoaXMub3duZXIubmV3RFRNRih7b3JpZ2luYXRvcjpcImxvY2FsXCIsZHRtZjp0aGlzLHJlcXVlc3Q6dGhpcy5yZXF1ZXN0fSksdGhpcy5vd25lci5kaWFsb2cuc2VuZFJlcXVlc3QodGhpcyxvLklORk8se2V4dHJhSGVhZGVyczpuLGJvZHk6cn0pfSxyLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7c3dpdGNoKCEwKXtjYXNlL14xWzAtOV17Mn0kLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmJyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6bChcIm9uU3VjY2Vzc1Jlc3BvbnNlXCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vblN1Y2Nlc3NSZXNwb25zZSYmdGhpcy5ldmVudEhhbmRsZXJzLm9uU3VjY2Vzc1Jlc3BvbnNlKGUpO2JyZWFrO2RlZmF1bHQ6dGhpcy5ldmVudEhhbmRsZXJzLm9uRXJyb3JSZXNwb25zZSYmdGhpcy5ldmVudEhhbmRsZXJzLm9uRXJyb3JSZXNwb25zZShlKX19LHIucHJvdG90eXBlLm9uUmVxdWVzdFRpbWVvdXQ9ZnVuY3Rpb24oKXtpKFwib25SZXF1ZXN0VGltZW91dFwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25SZXF1ZXN0VGltZW91dCYmdGhpcy5ldmVudEhhbmRsZXJzLm9uUmVxdWVzdFRpbWVvdXQoKX0sci5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe2koXCJvblRyYW5zcG9ydEVycm9yXCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vblRyYW5zcG9ydEVycm9yJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25UcmFuc3BvcnRFcnJvcigpfSxyLnByb3RvdHlwZS5vbkRpYWxvZ0Vycm9yPWZ1bmN0aW9uKCl7aShcIm9uRGlhbG9nRXJyb3JcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uRGlhbG9nRXJyb3ImJnRoaXMuZXZlbnRIYW5kbGVycy5vbkRpYWxvZ0Vycm9yKCl9LHIucHJvdG90eXBlLmluaXRfaW5jb21pbmc9ZnVuY3Rpb24oZSl7dmFyIHQsbj0vXihTaWduYWxcXHMqPz1cXHMqPykoWzAtOUEtRCMqXXsxfSkoXFxzKT8uKi8scj0vXihEdXJhdGlvblxccz89XFxzPykoWzAtOV17MSw0fSkoXFxzKT8uKi87dGhpcy5kaXJlY3Rpb249XCJpbmNvbWluZ1wiLHRoaXMucmVxdWVzdD1lLGUucmVwbHkoMjAwKSxlLmJvZHkmJih0PWUuYm9keS5zcGxpdChcIlxcblwiKSx0Lmxlbmd0aD49MSYmbi50ZXN0KHRbMF0pJiYodGhpcy50b25lPXRbMF0ucmVwbGFjZShuLFwiJDJcIikpLHQubGVuZ3RoPj0yJiZyLnRlc3QodFsxXSkmJih0aGlzLmR1cmF0aW9uPXBhcnNlSW50KHRbMV0ucmVwbGFjZShyLFwiJDJcIiksMTApKSksdGhpcy5kdXJhdGlvbnx8KHRoaXMuZHVyYXRpb249cy5ERUZBVUxUX0RVUkFUSU9OKSx0aGlzLnRvbmU/dGhpcy5vd25lci5uZXdEVE1GKHtvcmlnaW5hdG9yOlwicmVtb3RlXCIsZHRtZjp0aGlzLHJlcXVlc3Q6ZX0pOmwoXCJpbnZhbGlkIElORk8gRFRNRiByZWNlaXZlZCwgZGlzY2FyZGVkXCIpfX0se1wiLi4vQ29uc3RhbnRzXCI6MSxcIi4uL0V4Y2VwdGlvbnNcIjo1LFwiLi4vUlRDU2Vzc2lvblwiOjExLGRlYnVnOjMzfV0sMTM6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCxuKXt0aGlzLnNlc3Npb249ZSx0aGlzLmlkPXQsdGhpcy5leHBpcmVzPW58fHMuZXhwaXJlcyx0aGlzLmFjdGl2ZT0hMCx0aGlzLm5vdGlmeSgxMDApfXQuZXhwb3J0cz1yO3ZhciBzPXtldmVudF90eXBlOlwicmVmZXJcIixib2R5X3R5cGU6XCJtZXNzYWdlL3NpcGZyYWc7dmVyc2lvbj0yLjBcIixleHBpcmVzOjMwMH0sbD1lKFwiZGVidWdcIikoXCJKc1NJUDpSVENTZXNzaW9uOlJlZmVyTm90aWZpZXJcIiksaT1lKFwiLi4vQ29uc3RhbnRzXCIpLG89ZShcIi4vUmVxdWVzdFwiKTtyLnByb3RvdHlwZS5ub3RpZnk9ZnVuY3Rpb24oZSx0KXtsKFwibm90aWZ5KClcIik7dmFyIG4scj10aGlzO2lmKHRoaXMuYWN0aXZlIT09ITEpe3Q9dHx8aS5SRUFTT05fUEhSQVNFW2VdfHxcIlwiLG49ZT49MjAwP1widGVybWluYXRlZDtyZWFzb249bm9yZXNvdXJjZVwiOlwiYWN0aXZlO2V4cGlyZXM9XCIrdGhpcy5leHBpcmVzO3ZhciB1PW5ldyBvKHRoaXMuc2Vzc2lvbixpLk5PVElGWSk7dS5zZW5kKHtleHRyYUhlYWRlcnM6W1wiRXZlbnQ6IFwiK3MuZXZlbnRfdHlwZStcIjtpZD1cIityLmlkLFwiU3Vic2NyaXB0aW9uLVN0YXRlOiBcIituLFwiQ29udGVudC1UeXBlOiBcIitzLmJvZHlfdHlwZV0sYm9keTpcIlNJUC8yLjAgXCIrZStcIiBcIit0LGV2ZW50SGFuZGxlcnM6e29uRXJyb3JSZXNwb25zZTpmdW5jdGlvbigpe3IuYWN0aXZlPSExfX19KX19fSx7XCIuLi9Db25zdGFudHNcIjoxLFwiLi9SZXF1ZXN0XCI6MTUsZGVidWc6MzN9XSwxNDpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7dGhpcy5zZXNzaW9uPWUsdGhpcy50aW1lcj1udWxsLHRoaXMub3V0Z29pbmdSZXF1ZXN0PW51bGwsby5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKX1mdW5jdGlvbiBzKCl7Y29uc29sZS5sb2coXCJyZW1vdmVTdWJzY3JpYmVyKClcIiksY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpLHRoaXMuc2Vzc2lvbi5yZWZlclN1YnNjcmliZXI9bnVsbH10LmV4cG9ydHM9cjt2YXIgbD17ZXhwaXJlczoxMjB9LGk9ZShcInV0aWxcIiksbz1lKFwiZXZlbnRzXCIpLHU9ZShcImRlYnVnXCIpKFwiSnNTSVA6UlRDU2Vzc2lvbjpSZWZlclN1YnNjcmliZXJcIiksYT1lKFwiLi4vQ29uc3RhbnRzXCIpLGM9ZShcIi4uL0dyYW1tYXJcIiksaD1lKFwiLi9SZXF1ZXN0XCIpO2kuaW5oZXJpdHMocixvLkV2ZW50RW1pdHRlciksci5wcm90b3R5cGUuc2VuZFJlZmVyPWZ1bmN0aW9uKGUsdCl7dShcInNlbmRSZWZlcigpXCIpO3ZhciBuLHIsaSxvPW51bGwsYz10aGlzO3Q9dHx8e30sbj10LmV4dHJhSGVhZGVycz90LmV4dHJhSGVhZGVycy5zbGljZSgpOltdLHI9dC5ldmVudEhhbmRsZXJzfHx7fTtmb3IodmFyIGQgaW4gcil0aGlzLm9uKGQscltkXSk7dC5yZXBsYWNlcyYmKG89dC5yZXBsYWNlcy5yZXF1ZXN0LmNhbGxfaWQsbys9XCI7dG8tdGFnPVwiK3QucmVwbGFjZXMudG9fdGFnLG8rPVwiO2Zyb20tdGFnPVwiK3QucmVwbGFjZXMuZnJvbV90YWcsbz1lbmNvZGVVUklDb21wb25lbnQobykpLGk9XCJSZWZlci1UbzogPFwiK2UrKG8/XCI/UmVwbGFjZXM9XCIrbzpcIlwiKStcIj5cIixuLnB1c2goaSk7dmFyIHA9bmV3IGgodGhpcy5zZXNzaW9uLGEuUkVGRVIpO3RoaXMudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3MuY2FsbChjKX0sMWUzKmwuZXhwaXJlcykscC5zZW5kKHtleHRyYUhlYWRlcnM6bixldmVudEhhbmRsZXJzOntvblN1Y2Nlc3NSZXNwb25zZTpmdW5jdGlvbihlKXtjLmVtaXQoXCJyZXF1ZXN0U3VjY2VlZGVkXCIse3Jlc3BvbnNlOmV9KX0sb25FcnJvclJlc3BvbnNlOmZ1bmN0aW9uKGUpe2MuZW1pdChcInJlcXVlc3RGYWlsZWRcIix7cmVzcG9uc2U6ZSxjYXVzZTphLmNhdXNlcy5SRUpFQ1RFRH0pfSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7cy5jYWxsKGMpLGMuZW1pdChcInJlcXVlc3RGYWlsZWRcIix7cmVzcG9uc2U6bnVsbCxjYXVzZTphLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SfSl9LG9uUmVxdWVzdFRpbWVvdXQ6ZnVuY3Rpb24oKXtzLmNhbGwoYyksYy5lbWl0KFwicmVxdWVzdEZhaWxlZFwiLHtyZXNwb25zZTpudWxsLGNhdXNlOmEuY2F1c2VzLlJFUVVFU1RfVElNRU9VVH0pfSxvbkRpYWxvZ0Vycm9yOmZ1bmN0aW9uKCl7cy5jYWxsKGMpLGMuZW1pdChcInJlcXVlc3RGYWlsZWRcIix7cmVzcG9uc2U6bnVsbCxjYXVzZTphLmNhdXNlcy5ESUFMT0dfRVJST1J9KX19fSksdGhpcy5vdXRnb2luZ1JlcXVlc3Q9cC5vdXRnb2luZ1JlcXVlc3R9LHIucHJvdG90eXBlLnJlY2VpdmVOb3RpZnk9ZnVuY3Rpb24oZSl7dShcInJlY2VpdmVOb3RpZnkoKVwiKTt2YXIgdDtpZihlLmJvZHkpe2lmKHQ9Yy5wYXJzZShlLmJvZHksXCJTdGF0dXNfTGluZVwiKSwtMT09PXQpcmV0dXJuIHZvaWQgdSgncmVjZWl2ZU5vdGlmeSgpIHwgZXJyb3IgcGFyc2luZyBOT1RJRlkgYm9keTogXCInK2UuYm9keSsnXCInKTtzd2l0Y2goITApe2Nhc2UvXjEwMCQvLnRlc3QodC5zdGF0dXNfY29kZSk6dGhpcy5lbWl0KFwidHJ5aW5nXCIse3JlcXVlc3Q6ZSxzdGF0dXNfbGluZTp0fSk7YnJlYWs7Y2FzZS9eMVswLTldezJ9JC8udGVzdCh0LnN0YXR1c19jb2RlKTp0aGlzLmVtaXQoXCJwcm9ncmVzc1wiLHtyZXF1ZXN0OmUsc3RhdHVzX2xpbmU6dH0pO2JyZWFrO2Nhc2UvXjJbMC05XXsyfSQvLnRlc3QodC5zdGF0dXNfY29kZSk6cy5jYWxsKHRoaXMpLHRoaXMuZW1pdChcImFjY2VwdGVkXCIse3JlcXVlc3Q6ZSxzdGF0dXNfbGluZTp0fSk7YnJlYWs7ZGVmYXVsdDpzLmNhbGwodGhpcyksdGhpcy5lbWl0KFwiZmFpbGVkXCIse3JlcXVlc3Q6ZSxzdGF0dXNfbGluZTp0fSl9fX19LHtcIi4uL0NvbnN0YW50c1wiOjEsXCIuLi9HcmFtbWFyXCI6NixcIi4vUmVxdWVzdFwiOjE1LGRlYnVnOjMzLGV2ZW50czoyOCx1dGlsOjMyfV0sMTU6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7aWYocyhcIm5ldyB8ICVzXCIsdCksdGhpcy5zZXNzaW9uPWUsdGhpcy5tZXRob2Q9dCx0aGlzLm91dGdvaW5nUmVxdWVzdD1udWxsLHRoaXMuc2Vzc2lvbi5zdGF0dXMhPT11LkMuU1RBVFVTXzFYWF9SRUNFSVZFRCYmdGhpcy5zZXNzaW9uLnN0YXR1cyE9PXUuQy5TVEFUVVNfV0FJVElOR19GT1JfQU5TV0VSJiZ0aGlzLnNlc3Npb24uc3RhdHVzIT09dS5DLlNUQVRVU19XQUlUSU5HX0ZPUl9BQ0smJnRoaXMuc2Vzc2lvbi5zdGF0dXMhPT11LkMuU1RBVFVTX0NPTkZJUk1FRCYmdGhpcy5zZXNzaW9uLnN0YXR1cyE9PXUuQy5TVEFUVVNfVEVSTUlOQVRFRCl0aHJvdyBuZXcgby5JbnZhbGlkU3RhdGVFcnJvcih0aGlzLnNlc3Npb24uc3RhdHVzKTtpZih0aGlzLnNlc3Npb24uc3RhdHVzPT09dS5DLlNUQVRVU19URVJNSU5BVEVEJiZ0IT09aS5CWUUpdGhyb3cgbmV3IG8uSW52YWxpZFN0YXRlRXJyb3IodGhpcy5zZXNzaW9uLnN0YXR1cyl9dC5leHBvcnRzPXI7dmFyIHM9ZShcImRlYnVnXCIpKFwiSnNTSVA6UlRDU2Vzc2lvbjpSZXF1ZXN0XCIpLGw9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6UlRDU2Vzc2lvbjpSZXF1ZXN0XCIpO2wubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpO3ZhciBpPWUoXCIuLi9Db25zdGFudHNcIiksbz1lKFwiLi4vRXhjZXB0aW9uc1wiKSx1PWUoXCIuLi9SVENTZXNzaW9uXCIpO3IucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSl7ZT1lfHx7fTt2YXIgdD1lLmV4dHJhSGVhZGVycyYmZS5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10sbj1lLmJvZHl8fG51bGw7dGhpcy5ldmVudEhhbmRsZXJzPWUuZXZlbnRIYW5kbGVyc3x8e30sdGhpcy5vdXRnb2luZ1JlcXVlc3Q9dGhpcy5zZXNzaW9uLmRpYWxvZy5zZW5kUmVxdWVzdCh0aGlzLHRoaXMubWV0aG9kLHtleHRyYUhlYWRlcnM6dCxib2R5Om59KX0sci5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUpe3N3aXRjaCghMCl7Y2FzZS9eMVswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTpzKFwib25Qcm9ncmVzc1Jlc3BvbnNlXCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vblByb2dyZXNzUmVzcG9uc2UmJnRoaXMuZXZlbnRIYW5kbGVycy5vblByb2dyZXNzUmVzcG9uc2UoZSk7YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTpzKFwib25TdWNjZXNzUmVzcG9uc2VcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uU3VjY2Vzc1Jlc3BvbnNlJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25TdWNjZXNzUmVzcG9uc2UoZSk7YnJlYWs7ZGVmYXVsdDpzKFwib25FcnJvclJlc3BvbnNlXCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vbkVycm9yUmVzcG9uc2UmJnRoaXMuZXZlbnRIYW5kbGVycy5vbkVycm9yUmVzcG9uc2UoZSl9fSxyLnByb3RvdHlwZS5vblJlcXVlc3RUaW1lb3V0PWZ1bmN0aW9uKCl7bChcIm9uUmVxdWVzdFRpbWVvdXRcIiksdGhpcy5ldmVudEhhbmRsZXJzLm9uUmVxdWVzdFRpbWVvdXQmJnRoaXMuZXZlbnRIYW5kbGVycy5vblJlcXVlc3RUaW1lb3V0KCl9LHIucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXtsKFwib25UcmFuc3BvcnRFcnJvclwiKSx0aGlzLmV2ZW50SGFuZGxlcnMub25UcmFuc3BvcnRFcnJvciYmdGhpcy5ldmVudEhhbmRsZXJzLm9uVHJhbnNwb3J0RXJyb3IoKX0sci5wcm90b3R5cGUub25EaWFsb2dFcnJvcj1mdW5jdGlvbigpe2woXCJvbkRpYWxvZ0Vycm9yXCIpLHRoaXMuZXZlbnRIYW5kbGVycy5vbkRpYWxvZ0Vycm9yJiZ0aGlzLmV2ZW50SGFuZGxlcnMub25EaWFsb2dFcnJvcigpfX0se1wiLi4vQ29uc3RhbnRzXCI6MSxcIi4uL0V4Y2VwdGlvbnNcIjo1LFwiLi4vUlRDU2Vzc2lvblwiOjExLGRlYnVnOjMzfV0sMTY6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7dmFyIG49MTt0aGlzLnVhPWUsdGhpcy50cmFuc3BvcnQ9dCx0aGlzLnJlZ2lzdHJhcj1lLmNvbmZpZ3VyYXRpb24ucmVnaXN0cmFyX3NlcnZlcix0aGlzLmV4cGlyZXM9ZS5jb25maWd1cmF0aW9uLnJlZ2lzdGVyX2V4cGlyZXMsdGhpcy5jYWxsX2lkPWwuY3JlYXRlUmFuZG9tVG9rZW4oMjIpLHRoaXMuY3NlcT0wLHRoaXMudG9fdXJpPWUuY29uZmlndXJhdGlvbi51cmksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1udWxsLHRoaXMucmVnaXN0ZXJlZD0hMSx0aGlzLmNvbnRhY3Q9dGhpcy51YS5jb250YWN0LnRvU3RyaW5nKCksdGhpcy5jb250YWN0Kz1cIjsrc2lwLmljZVwiLHRoaXMuZXh0cmFIZWFkZXJzPVtdLHRoaXMuZXh0cmFDb250YWN0UGFyYW1zPVwiXCIsbiYmKHRoaXMuY29udGFjdCs9XCI7cmVnLWlkPVwiK24sdGhpcy5jb250YWN0Kz0nOytzaXAuaW5zdGFuY2U9XCI8dXJuOnV1aWQ6Jyt0aGlzLnVhLmNvbmZpZ3VyYXRpb24uaW5zdGFuY2VfaWQrJz5cIicpfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlJlZ2lzdHJhdG9yXCIpLGw9ZShcIi4vVXRpbHNcIiksaT1lKFwiLi9Db25zdGFudHNcIiksbz1lKFwiLi9TSVBNZXNzYWdlXCIpLHU9ZShcIi4vUmVxdWVzdFNlbmRlclwiKTtyLnByb3RvdHlwZT17c2V0RXh0cmFIZWFkZXJzOmZ1bmN0aW9uKGUpe0FycmF5LmlzQXJyYXkoZSl8fChlPVtdKSx0aGlzLmV4dHJhSGVhZGVycz1lLnNsaWNlKCl9LHNldEV4dHJhQ29udGFjdFBhcmFtczpmdW5jdGlvbihlKXtlIGluc3RhbmNlb2YgT2JqZWN0fHwoZT17fSksdGhpcy5leHRyYUNvbnRhY3RQYXJhbXM9XCJcIjtmb3IodmFyIHQgaW4gZSl7dmFyIG49ZVt0XTt0aGlzLmV4dHJhQ29udGFjdFBhcmFtcys9XCI7XCIrdCxuJiYodGhpcy5leHRyYUNvbnRhY3RQYXJhbXMrPVwiPVwiK24pfX0scmVnaXN0ZXI6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scj10aGlzO249dGhpcy5leHRyYUhlYWRlcnMuc2xpY2UoKSxuLnB1c2goXCJDb250YWN0OiBcIit0aGlzLmNvbnRhY3QrXCI7ZXhwaXJlcz1cIit0aGlzLmV4cGlyZXMrdGhpcy5leHRyYUNvbnRhY3RQYXJhbXMpLG4ucHVzaChcIkV4cGlyZXM6IFwiK3RoaXMuZXhwaXJlcyksdGhpcy5yZXF1ZXN0PW5ldyBvLk91dGdvaW5nUmVxdWVzdChpLlJFR0lTVEVSLHRoaXMucmVnaXN0cmFyLHRoaXMudWEse3RvX3VyaTp0aGlzLnRvX3VyaSxjYWxsX2lkOnRoaXMuY2FsbF9pZCxjc2VxOnRoaXMuY3NlcSs9MX0sbiksZT1uZXcgdSh0aGlzLHRoaXMudWEpLHRoaXMucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUpe3ZhciBuLG8sdT1lLmdldEhlYWRlcnMoXCJjb250YWN0XCIpLmxlbmd0aDtpZihlLmNzZXE9PT10aGlzLmNzZXEpc3dpdGNoKG51bGwhPT10aGlzLnJlZ2lzdHJhdGlvblRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpLHRoaXMucmVnaXN0cmF0aW9uVGltZXI9bnVsbCksITApe2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTppZihlLmhhc0hlYWRlcihcImV4cGlyZXNcIikmJihvPWUuZ2V0SGVhZGVyKFwiZXhwaXJlc1wiKSksIXUpe3MoXCJubyBDb250YWN0IGhlYWRlciBpbiByZXNwb25zZSB0byBSRUdJU1RFUiwgcmVzcG9uc2UgaWdub3JlZFwiKTticmVha31mb3IoO3UtLTspe2lmKG49ZS5wYXJzZUhlYWRlcihcImNvbnRhY3RcIix1KSxuLnVyaS51c2VyPT09dGhpcy51YS5jb250YWN0LnVyaS51c2VyKXtvPW4uZ2V0UGFyYW0oXCJleHBpcmVzXCIpO2JyZWFrfW49bnVsbH1pZighbil7cyhcIm5vIENvbnRhY3QgaGVhZGVyIHBvaW50aW5nIHRvIHVzLCByZXNwb25zZSBpZ25vcmVkXCIpO2JyZWFrfW98fChvPXRoaXMuZXhwaXJlcyksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ci5yZWdpc3RyYXRpb25UaW1lcj1udWxsLHIucmVnaXN0ZXIoKX0sMWUzKm8tM2UzKSxuLmhhc1BhcmFtKFwidGVtcC1ncnV1XCIpJiYodGhpcy51YS5jb250YWN0LnRlbXBfZ3J1dT1uLmdldFBhcmFtKFwidGVtcC1ncnV1XCIpLnJlcGxhY2UoL1wiL2csXCJcIikpLG4uaGFzUGFyYW0oXCJwdWItZ3J1dVwiKSYmKHRoaXMudWEuY29udGFjdC5wdWJfZ3J1dT1uLmdldFBhcmFtKFwicHViLWdydXVcIikucmVwbGFjZSgvXCIvZyxcIlwiKSksdGhpcy5yZWdpc3RlcmVkfHwodGhpcy5yZWdpc3RlcmVkPSEwLHRoaXMudWEucmVnaXN0ZXJlZCh7cmVzcG9uc2U6ZX0pKTticmVhaztjYXNlL140MjMkLy50ZXN0KGUuc3RhdHVzX2NvZGUpOmUuaGFzSGVhZGVyKFwibWluLWV4cGlyZXNcIik/KHRoaXMuZXhwaXJlcz1lLmdldEhlYWRlcihcIm1pbi1leHBpcmVzXCIpLHRoaXMucmVnaXN0ZXIoKSk6KHMoXCI0MjMgcmVzcG9uc2UgcmVjZWl2ZWQgZm9yIFJFR0lTVEVSIHdpdGhvdXQgTWluLUV4cGlyZXNcIiksdGhpcy5yZWdpc3RyYXRpb25GYWlsdXJlKGUsaS5jYXVzZXMuU0lQX0ZBSUxVUkVfQ09ERSkpO2JyZWFrO2RlZmF1bHQ6dD1sLnNpcEVycm9yQ2F1c2UoZS5zdGF0dXNfY29kZSksdGhpcy5yZWdpc3RyYXRpb25GYWlsdXJlKGUsdCl9fSx0aGlzLm9uUmVxdWVzdFRpbWVvdXQ9ZnVuY3Rpb24oKXt0aGlzLnJlZ2lzdHJhdGlvbkZhaWx1cmUobnVsbCxpLmNhdXNlcy5SRVFVRVNUX1RJTUVPVVQpfSx0aGlzLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXt0aGlzLnJlZ2lzdHJhdGlvbkZhaWx1cmUobnVsbCxpLmNhdXNlcy5DT05ORUNUSU9OX0VSUk9SKX0sZS5zZW5kKCl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoIXRoaXMucmVnaXN0ZXJlZClyZXR1cm4gdm9pZCBzKFwiYWxyZWFkeSB1bnJlZ2lzdGVyZWRcIik7ZT1lfHx7fSx0aGlzLnJlZ2lzdGVyZWQ9ITEsbnVsbCE9PXRoaXMucmVnaXN0cmF0aW9uVGltZXImJihjbGVhclRpbWVvdXQodGhpcy5yZWdpc3RyYXRpb25UaW1lciksdGhpcy5yZWdpc3RyYXRpb25UaW1lcj1udWxsKSx0PXRoaXMuZXh0cmFIZWFkZXJzLnNsaWNlKCksZS5hbGw/KHQucHVzaChcIkNvbnRhY3Q6ICpcIit0aGlzLmV4dHJhQ29udGFjdFBhcmFtcyksdC5wdXNoKFwiRXhwaXJlczogMFwiKSx0aGlzLnJlcXVlc3Q9bmV3IG8uT3V0Z29pbmdSZXF1ZXN0KGkuUkVHSVNURVIsdGhpcy5yZWdpc3RyYXIsdGhpcy51YSx7dG9fdXJpOnRoaXMudG9fdXJpLGNhbGxfaWQ6dGhpcy5jYWxsX2lkLGNzZXE6dGhpcy5jc2VxKz0xfSx0KSk6KHQucHVzaChcIkNvbnRhY3Q6IFwiK3RoaXMuY29udGFjdCtcIjtleHBpcmVzPTBcIit0aGlzLmV4dHJhQ29udGFjdFBhcmFtcyksdC5wdXNoKFwiRXhwaXJlczogMFwiKSx0aGlzLnJlcXVlc3Q9bmV3IG8uT3V0Z29pbmdSZXF1ZXN0KGkuUkVHSVNURVIsdGhpcy5yZWdpc3RyYXIsdGhpcy51YSx7dG9fdXJpOnRoaXMudG9fdXJpLGNhbGxfaWQ6dGhpcy5jYWxsX2lkLGNzZXE6dGhpcy5jc2VxKz0xfSx0KSk7dmFyIG49bmV3IHUodGhpcyx0aGlzLnVhKTt0aGlzLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlKXt2YXIgdDtzd2l0Y2goITApe2Nhc2UvXjFbMC05XXsyfSQvLnRlc3QoZS5zdGF0dXNfY29kZSk6YnJlYWs7Y2FzZS9eMlswLTldezJ9JC8udGVzdChlLnN0YXR1c19jb2RlKTp0aGlzLnVucmVnaXN0ZXJlZChlKTticmVhaztkZWZhdWx0OnQ9bC5zaXBFcnJvckNhdXNlKGUuc3RhdHVzX2NvZGUpLHRoaXMudW5yZWdpc3RlcmVkKGUsdCl9fSx0aGlzLm9uUmVxdWVzdFRpbWVvdXQ9ZnVuY3Rpb24oKXt0aGlzLnVucmVnaXN0ZXJlZChudWxsLGkuY2F1c2VzLlJFUVVFU1RfVElNRU9VVCl9LHRoaXMub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMudW5yZWdpc3RlcmVkKG51bGwsaS5jYXVzZXMuQ09OTkVDVElPTl9FUlJPUil9LG4uc2VuZCgpfSxyZWdpc3RyYXRpb25GYWlsdXJlOmZ1bmN0aW9uKGUsdCl7dGhpcy51YS5yZWdpc3RyYXRpb25GYWlsZWQoe3Jlc3BvbnNlOmV8fG51bGwsY2F1c2U6dH0pLHRoaXMucmVnaXN0ZXJlZCYmKHRoaXMucmVnaXN0ZXJlZD0hMSx0aGlzLnVhLnVucmVnaXN0ZXJlZCh7cmVzcG9uc2U6ZXx8bnVsbCxjYXVzZTp0fSkpfSx1bnJlZ2lzdGVyZWQ6ZnVuY3Rpb24oZSx0KXt0aGlzLnJlZ2lzdGVyZWQ9ITEsdGhpcy51YS51bnJlZ2lzdGVyZWQoe3Jlc3BvbnNlOmV8fG51bGwsY2F1c2U6dHx8bnVsbH0pfSxvblRyYW5zcG9ydENsb3NlZDpmdW5jdGlvbigpe251bGwhPT10aGlzLnJlZ2lzdHJhdGlvblRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMucmVnaXN0cmF0aW9uVGltZXIpLHRoaXMucmVnaXN0cmF0aW9uVGltZXI9bnVsbCksdGhpcy5yZWdpc3RlcmVkJiYodGhpcy5yZWdpc3RlcmVkPSExLHRoaXMudWEudW5yZWdpc3RlcmVkKHt9KSl9LGNsb3NlOmZ1bmN0aW9uKCl7dGhpcy5yZWdpc3RlcmVkJiZ0aGlzLnVucmVnaXN0ZXIoKX19fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL1JlcXVlc3RTZW5kZXJcIjoxNyxcIi4vU0lQTWVzc2FnZVwiOjE4LFwiLi9VdGlsc1wiOjI1LGRlYnVnOjMzfV0sMTc6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCl7dGhpcy51YT10LHRoaXMuYXBwbGljYW50PWUsdGhpcy5tZXRob2Q9ZS5yZXF1ZXN0Lm1ldGhvZCx0aGlzLnJlcXVlc3Q9ZS5yZXF1ZXN0LHRoaXMuYXV0aD1udWxsLHRoaXMuY2hhbGxlbmdlZD0hMSx0aGlzLnN0YWxlZD0hMSx0LnN0YXR1cyE9PWkuQy5TVEFUVVNfVVNFUl9DTE9TRUR8fHRoaXMubWV0aG9kPT09bC5CWUUmJnRoaXMubWV0aG9kPT09bC5BQ0t8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpfXQuZXhwb3J0cz1yO3ZhciBzPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlJlcXVlc3RTZW5kZXJcIiksbD1lKFwiLi9Db25zdGFudHNcIiksaT1lKFwiLi9VQVwiKSxvPWUoXCIuL0RpZ2VzdEF1dGhlbnRpY2F0aW9uXCIpLHU9ZShcIi4vVHJhbnNhY3Rpb25zXCIpO3IucHJvdG90eXBlPXtzZW5kOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMubWV0aG9kKXtjYXNlXCJJTlZJVEVcIjp0aGlzLmNsaWVudFRyYW5zYWN0aW9uPW5ldyB1Lkludml0ZUNsaWVudFRyYW5zYWN0aW9uKHRoaXMsdGhpcy5yZXF1ZXN0LHRoaXMudWEudHJhbnNwb3J0KTticmVhaztjYXNlXCJBQ0tcIjp0aGlzLmNsaWVudFRyYW5zYWN0aW9uPW5ldyB1LkFja0NsaWVudFRyYW5zYWN0aW9uKHRoaXMsdGhpcy5yZXF1ZXN0LHRoaXMudWEudHJhbnNwb3J0KTticmVhaztkZWZhdWx0OnRoaXMuY2xpZW50VHJhbnNhY3Rpb249bmV3IHUuTm9uSW52aXRlQ2xpZW50VHJhbnNhY3Rpb24odGhpcyx0aGlzLnJlcXVlc3QsdGhpcy51YS50cmFuc3BvcnQpfXRoaXMuY2xpZW50VHJhbnNhY3Rpb24uc2VuZCgpfSxvblJlcXVlc3RUaW1lb3V0OmZ1bmN0aW9uKCl7dGhpcy5hcHBsaWNhbnQub25SZXF1ZXN0VGltZW91dCgpfSxvblRyYW5zcG9ydEVycm9yOmZ1bmN0aW9uKCl7dGhpcy5hcHBsaWNhbnQub25UcmFuc3BvcnRFcnJvcigpfSxyZWNlaXZlUmVzcG9uc2U6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGk9ZS5zdGF0dXNfY29kZTtpZig0MDEhPT1pJiY0MDchPT1pfHxudWxsPT09dGhpcy51YS5jb25maWd1cmF0aW9uLnBhc3N3b3JkJiZudWxsPT09dGhpcy51YS5jb25maWd1cmF0aW9uLmhhMSl0aGlzLmFwcGxpY2FudC5yZWNlaXZlUmVzcG9uc2UoZSk7ZWxzZXtpZig0MDE9PT1lLnN0YXR1c19jb2RlPyhuPWUucGFyc2VIZWFkZXIoXCJ3d3ctYXV0aGVudGljYXRlXCIpLHI9XCJhdXRob3JpemF0aW9uXCIpOihuPWUucGFyc2VIZWFkZXIoXCJwcm94eS1hdXRoZW50aWNhdGVcIikscj1cInByb3h5LWF1dGhvcml6YXRpb25cIiksIW4pcmV0dXJuIHMoZS5zdGF0dXNfY29kZStcIiB3aXRoIHdyb25nIG9yIG1pc3NpbmcgY2hhbGxlbmdlLCBjYW5ub3QgYXV0aGVudGljYXRlXCIpLHZvaWQgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKGUpO2lmKCF0aGlzLmNoYWxsZW5nZWR8fCF0aGlzLnN0YWxlZCYmbi5zdGFsZT09PSEwKXtpZih0aGlzLmF1dGh8fCh0aGlzLmF1dGg9bmV3IG8oe3VzZXJuYW1lOnRoaXMudWEuY29uZmlndXJhdGlvbi5hdXRob3JpemF0aW9uX3VzZXIscGFzc3dvcmQ6dGhpcy51YS5jb25maWd1cmF0aW9uLnBhc3N3b3JkLHJlYWxtOnRoaXMudWEuY29uZmlndXJhdGlvbi5yZWFsbSxoYTE6dGhpcy51YS5jb25maWd1cmF0aW9uLmhhMX0pKSwhdGhpcy5hdXRoLmF1dGhlbnRpY2F0ZSh0aGlzLnJlcXVlc3QsbikpcmV0dXJuIHZvaWQgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKGUpO3RoaXMuY2hhbGxlbmdlZD0hMCx0aGlzLnVhLnNldChcInJlYWxtXCIsdGhpcy5hdXRoLmdldChcInJlYWxtXCIpKSx0aGlzLnVhLnNldChcImhhMVwiLHRoaXMuYXV0aC5nZXQoXCJoYTFcIikpLG4uc3RhbGUmJih0aGlzLnN0YWxlZD0hMCksdD1lLm1ldGhvZD09PWwuUkVHSVNURVI/dGhpcy5hcHBsaWNhbnQuY3NlcSs9MTp0aGlzLnJlcXVlc3QuZGlhbG9nP3RoaXMucmVxdWVzdC5kaWFsb2cubG9jYWxfc2VxbnVtKz0xOnRoaXMucmVxdWVzdC5jc2VxKzEsdGhpcy5yZXF1ZXN0PXRoaXMucmVxdWVzdC5jbG9uZSgpLHRoaXMucmVxdWVzdC5jc2VxPXQsdGhpcy5yZXF1ZXN0LnNldEhlYWRlcihcImNzZXFcIix0K1wiIFwiK3RoaXMubWV0aG9kKSx0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKHIsdGhpcy5hdXRoLnRvU3RyaW5nKCkpLHRoaXMuc2VuZCgpfWVsc2UgdGhpcy5hcHBsaWNhbnQucmVjZWl2ZVJlc3BvbnNlKGUpfX19fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL0RpZ2VzdEF1dGhlbnRpY2F0aW9uXCI6NCxcIi4vVHJhbnNhY3Rpb25zXCI6MjEsXCIuL1VBXCI6MjMsZGVidWc6MzN9XSwxODpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4scixzLGwpe3ZhciBpLG8sdSxkO3JldHVybiByPXJ8fHt9LGUmJnQmJm4/KHRoaXMudWE9bix0aGlzLmhlYWRlcnM9e30sdGhpcy5tZXRob2Q9ZSx0aGlzLnJ1cmk9dCx0aGlzLmJvZHk9bCx0aGlzLmV4dHJhSGVhZGVycz1zJiZzLnNsaWNlKCl8fFtdLHIucm91dGVfc2V0P3RoaXMuc2V0SGVhZGVyKFwicm91dGVcIixyLnJvdXRlX3NldCk6bi5jb25maWd1cmF0aW9uLnVzZV9wcmVsb2FkZWRfcm91dGUmJnRoaXMuc2V0SGVhZGVyKFwicm91dGVcIixcIjxcIituLnRyYW5zcG9ydC5zaXBfdXJpK1wiO2xyPlwiKSx0aGlzLnNldEhlYWRlcihcInZpYVwiLFwiXCIpLHRoaXMuc2V0SGVhZGVyKFwibWF4LWZvcndhcmRzXCIsYS5NQVhfRk9SV0FSRFMpLGk9ci50b19kaXNwbGF5X25hbWV8fDA9PT1yLnRvX2Rpc3BsYXlfbmFtZT8nXCInK3IudG9fZGlzcGxheV9uYW1lKydcIiAnOlwiXCIsaSs9XCI8XCIrKHIudG9fdXJpfHx0KStcIj5cIixpKz1yLnRvX3RhZz9cIjt0YWc9XCIrci50b190YWc6XCJcIix0aGlzLnRvPW5ldyBoLnBhcnNlKGkpLHRoaXMuc2V0SGVhZGVyKFwidG9cIixpKSxvPXIuZnJvbV9kaXNwbGF5X25hbWV8fDA9PT1yLmZyb21fZGlzcGxheV9uYW1lPydcIicrci5mcm9tX2Rpc3BsYXlfbmFtZSsnXCIgJzpuLmNvbmZpZ3VyYXRpb24uZGlzcGxheV9uYW1lPydcIicrbi5jb25maWd1cmF0aW9uLmRpc3BsYXlfbmFtZSsnXCIgJzpcIlwiLG8rPVwiPFwiKyhyLmZyb21fdXJpfHxuLmNvbmZpZ3VyYXRpb24udXJpKStcIj47dGFnPVwiLG8rPXIuZnJvbV90YWd8fGMubmV3VGFnKCksdGhpcy5mcm9tPW5ldyBoLnBhcnNlKG8pLHRoaXMuc2V0SGVhZGVyKFwiZnJvbVwiLG8pLHU9ci5jYWxsX2lkfHxuLmNvbmZpZ3VyYXRpb24uanNzaXBfaWQrYy5jcmVhdGVSYW5kb21Ub2tlbigxNSksdGhpcy5jYWxsX2lkPXUsdGhpcy5zZXRIZWFkZXIoXCJjYWxsLWlkXCIsdSksZD1yLmNzZXF8fE1hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpLHRoaXMuY3NlcT1kLHZvaWQgdGhpcy5zZXRIZWFkZXIoXCJjc2VxXCIsZCtcIiBcIitlKSk6bnVsbH1mdW5jdGlvbiBzKCl7dGhpcy5kYXRhPW51bGwsdGhpcy5oZWFkZXJzPW51bGwsdGhpcy5tZXRob2Q9bnVsbCx0aGlzLnZpYT1udWxsLHRoaXMudmlhX2JyYW5jaD1udWxsLHRoaXMuY2FsbF9pZD1udWxsLHRoaXMuY3NlcT1udWxsLHRoaXMuZnJvbT1udWxsLHRoaXMuZnJvbV90YWc9bnVsbCx0aGlzLnRvPW51bGwsdGhpcy50b190YWc9bnVsbCx0aGlzLmJvZHk9bnVsbCx0aGlzLnNkcD1udWxsfWZ1bmN0aW9uIGwoZSl7dGhpcy51YT1lLHRoaXMuaGVhZGVycz17fSx0aGlzLnJ1cmk9bnVsbCx0aGlzLnRyYW5zcG9ydD1udWxsLHRoaXMuc2VydmVyX3RyYW5zYWN0aW9uPW51bGx9ZnVuY3Rpb24gaSgpe3RoaXMuaGVhZGVycz17fSx0aGlzLnN0YXR1c19jb2RlPW51bGwsdGhpcy5yZWFzb25fcGhyYXNlPW51bGx9dC5leHBvcnRzPXtPdXRnb2luZ1JlcXVlc3Q6cixJbmNvbWluZ1JlcXVlc3Q6bCxJbmNvbWluZ1Jlc3BvbnNlOml9O3ZhciBvPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlNJUE1lc3NhZ2VcIiksdT1lKFwic2RwLXRyYW5zZm9ybVwiKSxhPWUoXCIuL0NvbnN0YW50c1wiKSxjPWUoXCIuL1V0aWxzXCIpLGg9ZShcIi4vTmFtZUFkZHJIZWFkZXJcIiksZD1lKFwiLi9HcmFtbWFyXCIpO3IucHJvdG90eXBlPXtzZXRIZWFkZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbixyO2ZvcihuPW5ldyBSZWdFeHAoXCJeXFxcXHMqXCIrZStcIlxcXFxzKjpcIixcImlcIikscj0wO3I8dGhpcy5leHRyYUhlYWRlcnMubGVuZ3RoO3IrKyluLnRlc3QodGhpcy5leHRyYUhlYWRlcnNbcl0pJiZ0aGlzLmV4dHJhSGVhZGVycy5zcGxpY2UociwxKTt0aGlzLmhlYWRlcnNbYy5oZWFkZXJpemUoZSldPUFycmF5LmlzQXJyYXkodCk/dDpbdF19LGdldEhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdCxuLHI9dGhpcy5leHRyYUhlYWRlcnMubGVuZ3RoLHM9dGhpcy5oZWFkZXJzW2MuaGVhZGVyaXplKGUpXTtpZihzKXtpZihzWzBdKXJldHVybiBzWzBdfWVsc2UgZm9yKHQ9bmV3IFJlZ0V4cChcIl5cXFxccypcIitlK1wiXFxcXHMqOlwiLFwiaVwiKSxuPTA7cj5uO24rKylpZihzPXRoaXMuZXh0cmFIZWFkZXJzW25dLHQudGVzdChzKSlyZXR1cm4gcy5zdWJzdHJpbmcocy5pbmRleE9mKFwiOlwiKSsxKS50cmltKCl9LGdldEhlYWRlcnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLHM9dGhpcy5oZWFkZXJzW2MuaGVhZGVyaXplKGUpXSxsPVtdO2lmKHMpe2ZvcihuPXMubGVuZ3RoLHQ9MDtuPnQ7dCsrKWwucHVzaChzW3RdKTtyZXR1cm4gbH1mb3Iobj10aGlzLmV4dHJhSGVhZGVycy5sZW5ndGgscj1uZXcgUmVnRXhwKFwiXlxcXFxzKlwiK2UrXCJcXFxccyo6XCIsXCJpXCIpLHQ9MDtuPnQ7dCsrKXM9dGhpcy5leHRyYUhlYWRlcnNbdF0sci50ZXN0KHMpJiZsLnB1c2gocy5zdWJzdHJpbmcocy5pbmRleE9mKFwiOlwiKSsxKS50cmltKCkpO3JldHVybiBsfSxoYXNIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPXRoaXMuZXh0cmFIZWFkZXJzLmxlbmd0aDtpZih0aGlzLmhlYWRlcnNbYy5oZWFkZXJpemUoZSldKXJldHVybiEwO2Zvcih0PW5ldyBSZWdFeHAoXCJeXFxcXHMqXCIrZStcIlxcXFxzKjpcIixcImlcIiksbj0wO3I+bjtuKyspaWYodC50ZXN0KHRoaXMuZXh0cmFIZWFkZXJzW25dKSlyZXR1cm4hMDtyZXR1cm4hMX0scGFyc2VTRFA6ZnVuY3Rpb24oZSl7cmV0dXJuIWUmJnRoaXMuc2RwP3RoaXMuc2RwOih0aGlzLnNkcD11LnBhcnNlKHRoaXMuYm9keXx8XCJcIiksdGhpcy5zZHApfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBlLHQsbixyPVwiXCIscz1bXTtyKz10aGlzLm1ldGhvZCtcIiBcIit0aGlzLnJ1cmkrXCIgU0lQLzIuMFxcclxcblwiO2ZvcihlIGluIHRoaXMuaGVhZGVycylmb3IodD10aGlzLmhlYWRlcnNbZV0ubGVuZ3RoLG49MDt0Pm47bisrKXIrPWUrXCI6IFwiK3RoaXMuaGVhZGVyc1tlXVtuXStcIlxcclxcblwiO2Zvcih0PXRoaXMuZXh0cmFIZWFkZXJzLmxlbmd0aCxuPTA7dD5uO24rKylyKz10aGlzLmV4dHJhSGVhZGVyc1tuXS50cmltKCkrXCJcXHJcXG5cIjtzd2l0Y2godGhpcy5tZXRob2Qpe2Nhc2UgYS5SRUdJU1RFUjpzLnB1c2goXCJwYXRoXCIsXCJncnV1XCIpO2JyZWFrO2Nhc2UgYS5JTlZJVEU6dGhpcy51YS5jb25maWd1cmF0aW9uLnNlc3Npb25fdGltZXJzJiZzLnB1c2goXCJ0aW1lclwiKSwodGhpcy51YS5jb250YWN0LnB1Yl9ncnV1fHx0aGlzLnVhLmNvbnRhY3QudGVtcF9ncnV1KSYmcy5wdXNoKFwiZ3J1dVwiKSxzLnB1c2goXCJpY2VcIixcInJlcGxhY2VzXCIpO2JyZWFrO2Nhc2UgYS5VUERBVEU6dGhpcy51YS5jb25maWd1cmF0aW9uLnNlc3Npb25fdGltZXJzJiZzLnB1c2goXCJ0aW1lclwiKSxzLnB1c2goXCJpY2VcIil9cmV0dXJuIHMucHVzaChcIm91dGJvdW5kXCIpLHIrPVwiQWxsb3c6IFwiK2EuQUxMT1dFRF9NRVRIT0RTK1wiXFxyXFxuXCIscis9XCJTdXBwb3J0ZWQ6IFwiK3MrXCJcXHJcXG5cIixyKz1cIlVzZXItQWdlbnQ6IFwiK2EuVVNFUl9BR0VOVCtcIlxcclxcblwiLHRoaXMuYm9keT8odD1jLnN0cl91dGY4X2xlbmd0aCh0aGlzLmJvZHkpLHIrPVwiQ29udGVudC1MZW5ndGg6IFwiK3QrXCJcXHJcXG5cXHJcXG5cIixyKz10aGlzLmJvZHkpOnIrPVwiQ29udGVudC1MZW5ndGg6IDBcXHJcXG5cXHJcXG5cIixyfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPW5ldyByKHRoaXMubWV0aG9kLHRoaXMucnVyaSx0aGlzLnVhKTtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5oZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuaGVhZGVyc1t0XT10aGlzLmhlYWRlcnNbdF0uc2xpY2UoKX0sdGhpcyksZS5ib2R5PXRoaXMuYm9keSxlLmV4dHJhSGVhZGVycz10aGlzLmV4dHJhSGVhZGVycyYmdGhpcy5leHRyYUhlYWRlcnMuc2xpY2UoKXx8W10sZS50bz10aGlzLnRvLGUuZnJvbT10aGlzLmZyb20sZS5jYWxsX2lkPXRoaXMuY2FsbF9pZCxlLmNzZXE9dGhpcy5jc2VxLGV9fSxzLnByb3RvdHlwZT17YWRkSGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49e3Jhdzp0fTtlPWMuaGVhZGVyaXplKGUpLHRoaXMuaGVhZGVyc1tlXT90aGlzLmhlYWRlcnNbZV0ucHVzaChuKTp0aGlzLmhlYWRlcnNbZV09W25dfSxnZXRIZWFkZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5oZWFkZXJzW2MuaGVhZGVyaXplKGUpXTtpZih0KXJldHVybiB0WzBdP3RbMF0ucmF3OnZvaWQgMH0sZ2V0SGVhZGVyczpmdW5jdGlvbihlKXt2YXIgdCxuLHI9dGhpcy5oZWFkZXJzW2MuaGVhZGVyaXplKGUpXSxzPVtdO2lmKCFyKXJldHVybltdO2ZvcihuPXIubGVuZ3RoLHQ9MDtuPnQ7dCsrKXMucHVzaChyW3RdLnJhdyk7cmV0dXJuIHN9LGhhc0hlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4hIXRoaXMuaGVhZGVyc1tjLmhlYWRlcml6ZShlKV19LHBhcnNlSGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scixzO3JldHVybiBlPWMuaGVhZGVyaXplKGUpLHQ9dHx8MCx0aGlzLmhlYWRlcnNbZV0/dD49dGhpcy5oZWFkZXJzW2VdLmxlbmd0aD92b2lkIG8oJ25vdCBzbyBtYW55IFwiJytlKydcIiBoZWFkZXJzIHByZXNlbnQnKToobj10aGlzLmhlYWRlcnNbZV1bdF0scj1uLnJhdyxuLnBhcnNlZD9uLnBhcnNlZDoocz1kLnBhcnNlKHIsZS5yZXBsYWNlKC8tL2csXCJfXCIpKSwtMT09PXM/KHRoaXMuaGVhZGVyc1tlXS5zcGxpY2UodCwxKSx2b2lkIG8oJ2Vycm9yIHBhcnNpbmcgXCInK2UrJ1wiIGhlYWRlciBmaWVsZCB3aXRoIHZhbHVlIFwiJytyKydcIicpKToobi5wYXJzZWQ9cyxzKSkpOnZvaWQgbygnaGVhZGVyIFwiJytlKydcIiBub3QgcHJlc2VudCcpfSxzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucGFyc2VIZWFkZXIoZSx0KX0sc2V0SGVhZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49e3Jhdzp0fTt0aGlzLmhlYWRlcnNbYy5oZWFkZXJpemUoZSldPVtuXX0scGFyc2VTRFA6ZnVuY3Rpb24oZSl7cmV0dXJuIWUmJnRoaXMuc2RwP3RoaXMuc2RwOih0aGlzLnNkcD11LnBhcnNlKHRoaXMuYm9keXx8XCJcIiksdGhpcy5zZHApfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9fSxsLnByb3RvdHlwZT1uZXcgcyxsLnByb3RvdHlwZS5yZXBseT1mdW5jdGlvbihlLHQsbixyLHMsbCl7dmFyIGksbyx1LGgsZCxwPVtdLGY9dGhpcy5nZXRIZWFkZXIoXCJUb1wiKSxtPTAsZz0wO2lmKGU9ZXx8bnVsbCx0PXR8fG51bGwsIWV8fDEwMD5lfHxlPjY5OSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBzdGF0dXNfY29kZTogXCIrZSk7aWYodCYmXCJzdHJpbmdcIiE9dHlwZW9mIHQmJiEodCBpbnN0YW5jZW9mIFN0cmluZykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgcmVhc29uX3BocmFzZTogXCIrdCk7aWYodD10fHxhLlJFQVNPTl9QSFJBU0VbZV18fFwiXCIsbj1uJiZuLnNsaWNlKCl8fFtdLGQ9XCJTSVAvMi4wIFwiK2UrXCIgXCIrdCtcIlxcclxcblwiLHRoaXMubWV0aG9kPT09YS5JTlZJVEUmJmU+MTAwJiYyMDA+PWUpZm9yKGk9dGhpcy5nZXRIZWFkZXJzKFwicmVjb3JkLXJvdXRlXCIpLHU9aS5sZW5ndGgsbTt1Pm07bSsrKWQrPVwiUmVjb3JkLVJvdXRlOiBcIitpW21dK1wiXFxyXFxuXCI7Zm9yKG89dGhpcy5nZXRIZWFkZXJzKFwidmlhXCIpLHU9by5sZW5ndGgsZzt1Pmc7ZysrKWQrPVwiVmlhOiBcIitvW2ddK1wiXFxyXFxuXCI7Zm9yKCF0aGlzLnRvX3RhZyYmZT4xMDA/Zis9XCI7dGFnPVwiK2MubmV3VGFnKCk6dGhpcy50b190YWcmJiF0aGlzLnMoXCJ0b1wiKS5oYXNQYXJhbShcInRhZ1wiKSYmKGYrPVwiO3RhZz1cIit0aGlzLnRvX3RhZyksXG5kKz1cIlRvOiBcIitmK1wiXFxyXFxuXCIsZCs9XCJGcm9tOiBcIit0aGlzLmdldEhlYWRlcihcIkZyb21cIikrXCJcXHJcXG5cIixkKz1cIkNhbGwtSUQ6IFwiK3RoaXMuY2FsbF9pZCtcIlxcclxcblwiLGQrPVwiQ1NlcTogXCIrdGhpcy5jc2VxK1wiIFwiK3RoaXMubWV0aG9kK1wiXFxyXFxuXCIsdT1uLmxlbmd0aCxoPTA7dT5oO2grKylkKz1uW2hdLnRyaW0oKStcIlxcclxcblwiO3N3aXRjaCh0aGlzLm1ldGhvZCl7Y2FzZSBhLklOVklURTp0aGlzLnVhLmNvbmZpZ3VyYXRpb24uc2Vzc2lvbl90aW1lcnMmJnAucHVzaChcInRpbWVyXCIpLCh0aGlzLnVhLmNvbnRhY3QucHViX2dydXV8fHRoaXMudWEuY29udGFjdC50ZW1wX2dydXUpJiZwLnB1c2goXCJncnV1XCIpLHAucHVzaChcImljZVwiLFwicmVwbGFjZXNcIik7YnJlYWs7Y2FzZSBhLlVQREFURTp0aGlzLnVhLmNvbmZpZ3VyYXRpb24uc2Vzc2lvbl90aW1lcnMmJnAucHVzaChcInRpbWVyXCIpLHImJnAucHVzaChcImljZVwiKSxwLnB1c2goXCJyZXBsYWNlc1wiKX1wLnB1c2goXCJvdXRib3VuZFwiKSx0aGlzLm1ldGhvZD09PWEuT1BUSU9OUz8oZCs9XCJBbGxvdzogXCIrYS5BTExPV0VEX01FVEhPRFMrXCJcXHJcXG5cIixkKz1cIkFjY2VwdDogXCIrYS5BQ0NFUFRFRF9CT0RZX1RZUEVTK1wiXFxyXFxuXCIpOjQwNT09PWU/ZCs9XCJBbGxvdzogXCIrYS5BTExPV0VEX01FVEhPRFMrXCJcXHJcXG5cIjo0MTU9PT1lJiYoZCs9XCJBY2NlcHQ6IFwiK2EuQUNDRVBURURfQk9EWV9UWVBFUytcIlxcclxcblwiKSxkKz1cIlN1cHBvcnRlZDogXCIrcCtcIlxcclxcblwiLHI/KHU9Yy5zdHJfdXRmOF9sZW5ndGgociksZCs9XCJDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL3NkcFxcclxcblwiLGQrPVwiQ29udGVudC1MZW5ndGg6IFwiK3UrXCJcXHJcXG5cXHJcXG5cIixkKz1yKTpkKz1cIkNvbnRlbnQtTGVuZ3RoOiAwXFxyXFxuXFxyXFxuXCIsdGhpcy5zZXJ2ZXJfdHJhbnNhY3Rpb24ucmVjZWl2ZVJlc3BvbnNlKGUsZCxzLGwpfSxsLnByb3RvdHlwZS5yZXBseV9zbD1mdW5jdGlvbihlLHQpe3ZhciBuLHIscz0wLGw9dGhpcy5nZXRIZWFkZXJzKFwidmlhXCIpLGk9bC5sZW5ndGg7aWYoZT1lfHxudWxsLHQ9dHx8bnVsbCwhZXx8MTAwPmV8fGU+Njk5KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHN0YXR1c19jb2RlOiBcIitlKTtpZih0JiZcInN0cmluZ1wiIT10eXBlb2YgdCYmISh0IGluc3RhbmNlb2YgU3RyaW5nKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCByZWFzb25fcGhyYXNlOiBcIit0KTtmb3IodD10fHxhLlJFQVNPTl9QSFJBU0VbZV18fFwiXCIscj1cIlNJUC8yLjAgXCIrZStcIiBcIit0K1wiXFxyXFxuXCIscztpPnM7cysrKXIrPVwiVmlhOiBcIitsW3NdK1wiXFxyXFxuXCI7bj10aGlzLmdldEhlYWRlcihcIlRvXCIpLCF0aGlzLnRvX3RhZyYmZT4xMDA/bis9XCI7dGFnPVwiK2MubmV3VGFnKCk6dGhpcy50b190YWcmJiF0aGlzLnMoXCJ0b1wiKS5oYXNQYXJhbShcInRhZ1wiKSYmKG4rPVwiO3RhZz1cIit0aGlzLnRvX3RhZykscis9XCJUbzogXCIrbitcIlxcclxcblwiLHIrPVwiRnJvbTogXCIrdGhpcy5nZXRIZWFkZXIoXCJGcm9tXCIpK1wiXFxyXFxuXCIscis9XCJDYWxsLUlEOiBcIit0aGlzLmNhbGxfaWQrXCJcXHJcXG5cIixyKz1cIkNTZXE6IFwiK3RoaXMuY3NlcStcIiBcIit0aGlzLm1ldGhvZCtcIlxcclxcblwiLHIrPVwiQ29udGVudC1MZW5ndGg6IDBcXHJcXG5cXHJcXG5cIix0aGlzLnRyYW5zcG9ydC5zZW5kKHIpfSxpLnByb3RvdHlwZT1uZXcgc30se1wiLi9Db25zdGFudHNcIjoxLFwiLi9HcmFtbWFyXCI6NixcIi4vTmFtZUFkZHJIZWFkZXJcIjo5LFwiLi9VdGlsc1wiOjI1LGRlYnVnOjMzLFwic2RwLXRyYW5zZm9ybVwiOjQ0fV0sMTk6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7fXQuZXhwb3J0cz1yO3ZhciBzPWUoXCIuL1V0aWxzXCIpLGw9ZShcIi4vR3JhbW1hclwiKSxpPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOlNvY2tldFwiKTtyLmlzU29ja2V0PWZ1bmN0aW9uKGUpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlKXJldHVybiBpKFwidW5kZWZpbmVkIEpzU0lQLlNvY2tldCBpbnN0YW5jZVwiKSwhMTt0cnl7aWYoIXMuaXNTdHJpbmcoZS51cmwpKXRocm93IGkoXCJtaXNzaW5nIG9yIGludmFsaWQgSnNTSVAuU29ja2V0IHVybCBwcm9wZXJ0eVwiKSxuZXcgRXJyb3I7aWYoIXMuaXNTdHJpbmcoZS52aWFfdHJhbnNwb3J0KSl0aHJvdyBpKFwibWlzc2luZyBvciBpbnZhbGlkIEpzU0lQLlNvY2tldCB2aWFfdHJhbnNwb3J0IHByb3BlcnR5XCIpLG5ldyBFcnJvcjtpZigtMT09PWwucGFyc2UoZS5zaXBfdXJpLFwiU0lQX1VSSVwiKSl0aHJvdyBpKFwibWlzc2luZyBvciBpbnZhbGlkIEpzU0lQLlNvY2tldCBzaXBfdXJpIHByb3BlcnR5XCIpLG5ldyBFcnJvcn1jYXRjaCh0KXtyZXR1cm4hMX10cnl7W1wiY29ubmVjdFwiLFwiZGlzY29ubmVjdFwiLFwic2VuZFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKCFzLmlzRnVuY3Rpb24oZVt0XSkpdGhyb3cgaShcIm1pc3Npbmcgb3IgaW52YWxpZCBKc1NJUC5Tb2NrZXQgbWV0aG9kOiBcIit0KSxuZXcgRXJyb3J9KX1jYXRjaCh0KXtyZXR1cm4hMX1yZXR1cm4hMH19LHtcIi4vR3JhbW1hclwiOjYsXCIuL1V0aWxzXCI6MjUsZGVidWc6MzN9XSwyMDpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPTUwMCxzPTRlMyxsPTVlMyxpPXtUMTpyLFQyOnMsVDQ6bCxUSU1FUl9COjY0KnIsVElNRVJfRDowKnIsVElNRVJfRjo2NCpyLFRJTUVSX0g6NjQqcixUSU1FUl9JOjAqcixUSU1FUl9KOjAqcixUSU1FUl9LOjAqbCxUSU1FUl9MOjY0KnIsVElNRVJfTTo2NCpyLFBST1ZJU0lPTkFMX1JFU1BPTlNFX0lOVEVSVkFMOjZlNH07dC5leHBvcnRzPWl9LHt9XSwyMTpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSx0LG4pe3ZhciByO3RoaXMudHlwZT1hLk5PTl9JTlZJVEVfQ0xJRU5ULHRoaXMudHJhbnNwb3J0PW4sdGhpcy5pZD1cIno5aEc0YktcIitNYXRoLmZsb29yKDFlNypNYXRoLnJhbmRvbSgpKSx0aGlzLnJlcXVlc3Rfc2VuZGVyPWUsdGhpcy5yZXF1ZXN0PXQscj1cIlNJUC8yLjAvXCIrbi52aWFfdHJhbnNwb3J0LHIrPVwiIFwiK2UudWEuY29uZmlndXJhdGlvbi52aWFfaG9zdCtcIjticmFuY2g9XCIrdGhpcy5pZCx0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKFwidmlhXCIsciksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5uZXdUcmFuc2FjdGlvbih0aGlzKSxoLkV2ZW50RW1pdHRlci5jYWxsKHRoaXMpfWZ1bmN0aW9uIHMoZSx0LG4pe3ZhciByLHM9dGhpczt0aGlzLnR5cGU9YS5JTlZJVEVfQ0xJRU5ULHRoaXMudHJhbnNwb3J0PW4sdGhpcy5pZD1cIno5aEc0YktcIitNYXRoLmZsb29yKDFlNypNYXRoLnJhbmRvbSgpKSx0aGlzLnJlcXVlc3Rfc2VuZGVyPWUsdGhpcy5yZXF1ZXN0PXQscj1cIlNJUC8yLjAvXCIrbi52aWFfdHJhbnNwb3J0LHIrPVwiIFwiK2UudWEuY29uZmlndXJhdGlvbi52aWFfaG9zdCtcIjticmFuY2g9XCIrdGhpcy5pZCx0aGlzLnJlcXVlc3Quc2V0SGVhZGVyKFwidmlhXCIsciksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5uZXdUcmFuc2FjdGlvbih0aGlzKSx0aGlzLnJlcXVlc3QuY2FuY2VsPWZ1bmN0aW9uKGUpe3MuY2FuY2VsX3JlcXVlc3QocyxlKX0saC5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKX1mdW5jdGlvbiBsKGUsdCxuKXt2YXIgcjt0aGlzLnRyYW5zcG9ydD1uLHRoaXMuaWQ9XCJ6OWhHNGJLXCIrTWF0aC5mbG9vcigxZTcqTWF0aC5yYW5kb20oKSksdGhpcy5yZXF1ZXN0X3NlbmRlcj1lLHRoaXMucmVxdWVzdD10LHI9XCJTSVAvMi4wL1wiK24udmlhX3RyYW5zcG9ydCxyKz1cIiBcIitlLnVhLmNvbmZpZ3VyYXRpb24udmlhX2hvc3QrXCI7YnJhbmNoPVwiK3RoaXMuaWQsdGhpcy5yZXF1ZXN0LnNldEhlYWRlcihcInZpYVwiLHIpLGguRXZlbnRFbWl0dGVyLmNhbGwodGhpcyl9ZnVuY3Rpb24gaShlLHQpe3RoaXMudHlwZT1hLk5PTl9JTlZJVEVfU0VSVkVSLHRoaXMuaWQ9ZS52aWFfYnJhbmNoLHRoaXMucmVxdWVzdD1lLHRoaXMudHJhbnNwb3J0PWUudHJhbnNwb3J0LHRoaXMudWE9dCx0aGlzLmxhc3RfcmVzcG9uc2U9XCJcIixlLnNlcnZlcl90cmFuc2FjdGlvbj10aGlzLHRoaXMuc3RhdGU9YS5TVEFUVVNfVFJZSU5HLHQubmV3VHJhbnNhY3Rpb24odGhpcyksaC5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKX1mdW5jdGlvbiBvKGUsdCl7dGhpcy50eXBlPWEuSU5WSVRFX1NFUlZFUix0aGlzLmlkPWUudmlhX2JyYW5jaCx0aGlzLnJlcXVlc3Q9ZSx0aGlzLnRyYW5zcG9ydD1lLnRyYW5zcG9ydCx0aGlzLnVhPXQsdGhpcy5sYXN0X3Jlc3BvbnNlPVwiXCIsZS5zZXJ2ZXJfdHJhbnNhY3Rpb249dGhpcyx0aGlzLnN0YXRlPWEuU1RBVFVTX1BST0NFRURJTkcsdC5uZXdUcmFuc2FjdGlvbih0aGlzKSx0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9bnVsbCxlLnJlcGx5KDEwMCksaC5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKX1mdW5jdGlvbiB1KGUsdCl7dmFyIG47c3dpdGNoKHQubWV0aG9kKXtjYXNlIFQuSU5WSVRFOmlmKG49ZS50cmFuc2FjdGlvbnMuaXN0W3QudmlhX2JyYW5jaF0pe3N3aXRjaChuLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6bi50cmFuc3BvcnQuc2VuZChuLmxhc3RfcmVzcG9uc2UpO2JyZWFrO2Nhc2UgYS5TVEFUVVNfQUNDRVBURUQ6fXJldHVybiEwfWJyZWFrO2Nhc2UgVC5BQ0s6aWYobj1lLnRyYW5zYWN0aW9ucy5pc3RbdC52aWFfYnJhbmNoXSwhbilyZXR1cm4hMTtpZihuLnN0YXRlPT09YS5TVEFUVVNfQUNDRVBURUQpcmV0dXJuITE7aWYobi5zdGF0ZT09PWEuU1RBVFVTX0NPTVBMRVRFRClyZXR1cm4gbi5zdGF0ZT1hLlNUQVRVU19DT05GSVJNRUQsbi5JPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuLnRpbWVyX0koKX0sXy5USU1FUl9JKSwhMDticmVhaztjYXNlIFQuQ0FOQ0VMOnJldHVybiBuPWUudHJhbnNhY3Rpb25zLmlzdFt0LnZpYV9icmFuY2hdLG4/KHQucmVwbHlfc2woMjAwKSxuLnN0YXRlIT09YS5TVEFUVVNfUFJPQ0VFRElORyk6KHQucmVwbHlfc2woNDgxKSwhMCk7ZGVmYXVsdDppZihuPWUudHJhbnNhY3Rpb25zLm5pc3RbdC52aWFfYnJhbmNoXSl7c3dpdGNoKG4uc3RhdGUpe2Nhc2UgYS5TVEFUVVNfVFJZSU5HOmJyZWFrO2Nhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzpjYXNlIGEuU1RBVFVTX0NPTVBMRVRFRDpuLnRyYW5zcG9ydC5zZW5kKG4ubGFzdF9yZXNwb25zZSl9cmV0dXJuITB9fX10LmV4cG9ydHM9e0M6bnVsbCxOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvbjpyLEludml0ZUNsaWVudFRyYW5zYWN0aW9uOnMsQWNrQ2xpZW50VHJhbnNhY3Rpb246bCxOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbjppLEludml0ZVNlcnZlclRyYW5zYWN0aW9uOm8sY2hlY2tUcmFuc2FjdGlvbjp1fTt2YXIgYT17U1RBVFVTX1RSWUlORzoxLFNUQVRVU19QUk9DRUVESU5HOjIsU1RBVFVTX0NBTExJTkc6MyxTVEFUVVNfQUNDRVBURUQ6NCxTVEFUVVNfQ09NUExFVEVEOjUsU1RBVFVTX1RFUk1JTkFURUQ6NixTVEFUVVNfQ09ORklSTUVEOjcsTk9OX0lOVklURV9DTElFTlQ6XCJuaWN0XCIsTk9OX0lOVklURV9TRVJWRVI6XCJuaXN0XCIsSU5WSVRFX0NMSUVOVDpcImljdFwiLElOVklURV9TRVJWRVI6XCJpc3RcIn07dC5leHBvcnRzLkM9YTt2YXIgYz1lKFwidXRpbFwiKSxoPWUoXCJldmVudHNcIiksZD1lKFwiZGVidWdcIikoXCJKc1NJUDpOb25JbnZpdGVDbGllbnRUcmFuc2FjdGlvblwiKSxwPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkludml0ZUNsaWVudFRyYW5zYWN0aW9uXCIpLGY9ZShcImRlYnVnXCIpKFwiSnNTSVA6QWNrQ2xpZW50VHJhbnNhY3Rpb25cIiksbT1lKFwiZGVidWdcIikoXCJKc1NJUDpOb25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvblwiKSxnPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkludml0ZVNlcnZlclRyYW5zYWN0aW9uXCIpLFQ9ZShcIi4vQ29uc3RhbnRzXCIpLF89ZShcIi4vVGltZXJzXCIpO2MuaW5oZXJpdHMocixoLkV2ZW50RW1pdHRlciksci5wcm90b3R5cGUuc3RhdGVDaGFuZ2VkPWZ1bmN0aW9uKGUpe3RoaXMuc3RhdGU9ZSx0aGlzLmVtaXQoXCJzdGF0ZUNoYW5nZWRcIil9LHIucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RSWUlORyksdGhpcy5GPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnRpbWVyX0YoKX0sXy5USU1FUl9GKSx0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMucmVxdWVzdCl8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpfSxyLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7ZChcInRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksY2xlYXJUaW1lb3V0KHRoaXMuRiksY2xlYXJUaW1lb3V0KHRoaXMuSyksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcyksdGhpcy5yZXF1ZXN0X3NlbmRlci5vblRyYW5zcG9ydEVycm9yKCl9LHIucHJvdG90eXBlLnRpbWVyX0Y9ZnVuY3Rpb24oKXtkKFwiVGltZXIgRiBleHBpcmVkIGZvciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uUmVxdWVzdFRpbWVvdXQoKX0sci5wcm90b3R5cGUudGltZXJfSz1mdW5jdGlvbigpe3RoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpfSxyLnByb3RvdHlwZS5yZWNlaXZlUmVzcG9uc2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuc3RhdHVzX2NvZGU7aWYoMjAwPm4pc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfVFJZSU5HOmNhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19QUk9DRUVESU5HKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShlKX1lbHNlIHN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1RSWUlORzpjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfQ09NUExFVEVEKSxjbGVhclRpbWVvdXQodGhpcy5GKSw0MDg9PT1uP3RoaXMucmVxdWVzdF9zZW5kZXIub25SZXF1ZXN0VGltZW91dCgpOnRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKGUpLHRoaXMuSz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC50aW1lcl9LKCl9LF8uVElNRVJfSyk7YnJlYWs7Y2FzZSBhLlNUQVRVU19DT01QTEVURUQ6fX0sYy5pbmhlcml0cyhzLGguRXZlbnRFbWl0dGVyKSxzLnByb3RvdHlwZS5zdGF0ZUNoYW5nZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1lLHRoaXMuZW1pdChcInN0YXRlQ2hhbmdlZFwiKX0scy5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfQ0FMTElORyksdGhpcy5CPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLnRpbWVyX0IoKX0sXy5USU1FUl9CKSx0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMucmVxdWVzdCl8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpfSxzLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHRoaXMuQiksY2xlYXJUaW1lb3V0KHRoaXMuRCksY2xlYXJUaW1lb3V0KHRoaXMuTSksdGhpcy5zdGF0ZSE9PWEuU1RBVFVTX0FDQ0VQVEVEJiYocChcInRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCwgZGVsZXRpbmcgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5yZXF1ZXN0X3NlbmRlci5vblRyYW5zcG9ydEVycm9yKCkpLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMucmVxdWVzdF9zZW5kZXIudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpfSxzLnByb3RvdHlwZS50aW1lcl9NPWZ1bmN0aW9uKCl7cChcIlRpbWVyIE0gZXhwaXJlZCBmb3IgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5zdGF0ZT09PWEuU1RBVFVTX0FDQ0VQVEVEJiYoY2xlYXJUaW1lb3V0KHRoaXMuQiksdGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCksdGhpcy5yZXF1ZXN0X3NlbmRlci51YS5kZXN0cm95VHJhbnNhY3Rpb24odGhpcykpfSxzLnByb3RvdHlwZS50aW1lcl9CPWZ1bmN0aW9uKCl7cChcIlRpbWVyIEIgZXhwaXJlZCBmb3IgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5zdGF0ZT09PWEuU1RBVFVTX0NBTExJTkcmJih0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLm9uUmVxdWVzdFRpbWVvdXQoKSl9LHMucHJvdG90eXBlLnRpbWVyX0Q9ZnVuY3Rpb24oKXtwKFwiVGltZXIgRCBleHBpcmVkIGZvciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSxjbGVhclRpbWVvdXQodGhpcy5CKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKX0scy5wcm90b3R5cGUuc2VuZEFDSz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuYWNrPVwiQUNLIFwiK3RoaXMucmVxdWVzdC5ydXJpK1wiIFNJUC8yLjBcXHJcXG5cIix0aGlzLmFjays9XCJWaWE6IFwiK3RoaXMucmVxdWVzdC5oZWFkZXJzLlZpYS50b1N0cmluZygpK1wiXFxyXFxuXCIsdGhpcy5yZXF1ZXN0LmhlYWRlcnMuUm91dGUmJih0aGlzLmFjays9XCJSb3V0ZTogXCIrdGhpcy5yZXF1ZXN0LmhlYWRlcnMuUm91dGUudG9TdHJpbmcoKStcIlxcclxcblwiKSx0aGlzLmFjays9XCJUbzogXCIrZS5nZXRIZWFkZXIoXCJ0b1wiKStcIlxcclxcblwiLHRoaXMuYWNrKz1cIkZyb206IFwiK3RoaXMucmVxdWVzdC5oZWFkZXJzLkZyb20udG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMuYWNrKz1cIkNhbGwtSUQ6IFwiK3RoaXMucmVxdWVzdC5oZWFkZXJzW1wiQ2FsbC1JRFwiXS50b1N0cmluZygpK1wiXFxyXFxuXCIsdGhpcy5hY2srPVwiQ1NlcTogXCIrdGhpcy5yZXF1ZXN0LmhlYWRlcnMuQ1NlcS50b1N0cmluZygpLnNwbGl0KFwiIFwiKVswXSx0aGlzLmFjays9XCIgQUNLXFxyXFxuXCIsdGhpcy5hY2srPVwiQ29udGVudC1MZW5ndGg6IDBcXHJcXG5cXHJcXG5cIix0aGlzLkQ9c2V0VGltZW91dChmdW5jdGlvbigpe3QudGltZXJfRCgpfSxfLlRJTUVSX0QpLHRoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5hY2spfSxzLnByb3RvdHlwZS5jYW5jZWxfcmVxdWVzdD1mdW5jdGlvbihlLHQpe3ZhciBuPWUucmVxdWVzdDt0aGlzLmNhbmNlbD1ULkNBTkNFTCtcIiBcIituLnJ1cmkrXCIgU0lQLzIuMFxcclxcblwiLHRoaXMuY2FuY2VsKz1cIlZpYTogXCIrbi5oZWFkZXJzLlZpYS50b1N0cmluZygpK1wiXFxyXFxuXCIsdGhpcy5yZXF1ZXN0LmhlYWRlcnMuUm91dGUmJih0aGlzLmNhbmNlbCs9XCJSb3V0ZTogXCIrbi5oZWFkZXJzLlJvdXRlLnRvU3RyaW5nKCkrXCJcXHJcXG5cIiksdGhpcy5jYW5jZWwrPVwiVG86IFwiK24uaGVhZGVycy5Uby50b1N0cmluZygpK1wiXFxyXFxuXCIsdGhpcy5jYW5jZWwrPVwiRnJvbTogXCIrbi5oZWFkZXJzLkZyb20udG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMuY2FuY2VsKz1cIkNhbGwtSUQ6IFwiK24uaGVhZGVyc1tcIkNhbGwtSURcIl0udG9TdHJpbmcoKStcIlxcclxcblwiLHRoaXMuY2FuY2VsKz1cIkNTZXE6IFwiK24uaGVhZGVycy5DU2VxLnRvU3RyaW5nKCkuc3BsaXQoXCIgXCIpWzBdK1wiIENBTkNFTFxcclxcblwiLHQmJih0aGlzLmNhbmNlbCs9XCJSZWFzb246IFwiK3QrXCJcXHJcXG5cIiksdGhpcy5jYW5jZWwrPVwiQ29udGVudC1MZW5ndGg6IDBcXHJcXG5cXHJcXG5cIix0aGlzLnN0YXRlPT09YS5TVEFUVVNfUFJPQ0VFRElORyYmdGhpcy50cmFuc3BvcnQuc2VuZCh0aGlzLmNhbmNlbCl9LHMucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5zdGF0dXNfY29kZTtpZihuPj0xMDAmJjE5OT49bilzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19DQUxMSU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1BST0NFRURJTkcpLHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKGUpO2JyZWFrO2Nhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShlKX1lbHNlIGlmKG4+PTIwMCYmMjk5Pj1uKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX0NBTExJTkc6Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX0FDQ0VQVEVEKSx0aGlzLk09c2V0VGltZW91dChmdW5jdGlvbigpe3QudGltZXJfTSgpfSxfLlRJTUVSX00pLHRoaXMucmVxdWVzdF9zZW5kZXIucmVjZWl2ZVJlc3BvbnNlKGUpO2JyZWFrO2Nhc2UgYS5TVEFUVVNfQUNDRVBURUQ6dGhpcy5yZXF1ZXN0X3NlbmRlci5yZWNlaXZlUmVzcG9uc2UoZSl9ZWxzZSBpZihuPj0zMDAmJjY5OT49bilzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19DQUxMSU5HOmNhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19DT01QTEVURUQpLHRoaXMuc2VuZEFDSyhlKSx0aGlzLnJlcXVlc3Rfc2VuZGVyLnJlY2VpdmVSZXNwb25zZShlKTticmVhaztjYXNlIGEuU1RBVFVTX0NPTVBMRVRFRDp0aGlzLnNlbmRBQ0soZSl9fSxjLmluaGVyaXRzKGwsaC5FdmVudEVtaXR0ZXIpLGwucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zcG9ydC5zZW5kKHRoaXMucmVxdWVzdCl8fHRoaXMub25UcmFuc3BvcnRFcnJvcigpfSxsLnByb3RvdHlwZS5vblRyYW5zcG9ydEVycm9yPWZ1bmN0aW9uKCl7ZihcInRyYW5zcG9ydCBlcnJvciBvY2N1cnJlZCBmb3IgdHJhbnNhY3Rpb24gXCIrdGhpcy5pZCksdGhpcy5yZXF1ZXN0X3NlbmRlci5vblRyYW5zcG9ydEVycm9yKCl9LGMuaW5oZXJpdHMoaSxoLkV2ZW50RW1pdHRlciksaS5wcm90b3R5cGUuc3RhdGVDaGFuZ2VkPWZ1bmN0aW9uKGUpe3RoaXMuc3RhdGU9ZSx0aGlzLmVtaXQoXCJzdGF0ZUNoYW5nZWRcIil9LGkucHJvdG90eXBlLnRpbWVyX0o9ZnVuY3Rpb24oKXttKFwiVGltZXIgSiBleHBpcmVkIGZvciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKX0saS5wcm90b3R5cGUub25UcmFuc3BvcnRFcnJvcj1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0RXJyb3J8fCh0aGlzLnRyYW5zcG9ydEVycm9yPSEwLG0oXCJ0cmFuc3BvcnQgZXJyb3Igb2NjdXJyZWQsIGRlbGV0aW5nIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLGNsZWFyVGltZW91dCh0aGlzLkopLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpKX0saS5wcm90b3R5cGUucmVjZWl2ZVJlc3BvbnNlPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBzPXRoaXM7aWYoMTAwPT09ZSlzd2l0Y2godGhpcy5zdGF0ZSl7Y2FzZSBhLlNUQVRVU19UUllJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfUFJPQ0VFRElORyksdGhpcy50cmFuc3BvcnQuc2VuZCh0KXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCk7YnJlYWs7Y2FzZSBhLlNUQVRVU19QUk9DRUVESU5HOnRoaXMubGFzdF9yZXNwb25zZT10LHRoaXMudHJhbnNwb3J0LnNlbmQodCk/biYmbigpOih0aGlzLm9uVHJhbnNwb3J0RXJyb3IoKSxyJiZyKCkpfWVsc2UgaWYoZT49MjAwJiY2OTk+PWUpc3dpdGNoKHRoaXMuc3RhdGUpe2Nhc2UgYS5TVEFUVVNfVFJZSU5HOmNhc2UgYS5TVEFUVVNfUFJPQ0VFRElORzp0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19DT01QTEVURUQpLHRoaXMubGFzdF9yZXNwb25zZT10LHRoaXMuSj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy50aW1lcl9KKCl9LF8uVElNRVJfSiksdGhpcy50cmFuc3BvcnQuc2VuZCh0KT9uJiZuKCk6KHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHImJnIoKSk7YnJlYWs7Y2FzZSBhLlNUQVRVU19DT01QTEVURUQ6fX0sYy5pbmhlcml0cyhvLGguRXZlbnRFbWl0dGVyKSxvLnByb3RvdHlwZS5zdGF0ZUNoYW5nZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zdGF0ZT1lLHRoaXMuZW1pdChcInN0YXRlQ2hhbmdlZFwiKX0sby5wcm90b3R5cGUudGltZXJfSD1mdW5jdGlvbigpe2coXCJUaW1lciBIIGV4cGlyZWQgZm9yIHRyYW5zYWN0aW9uIFwiK3RoaXMuaWQpLHRoaXMuc3RhdGU9PT1hLlNUQVRVU19DT01QTEVURUQmJmcoXCJBQ0sgbm90IHJlY2VpdmVkLCBkaWFsb2cgd2lsbCBiZSB0ZXJtaW5hdGVkXCIpLHRoaXMuc3RhdGVDaGFuZ2VkKGEuU1RBVFVTX1RFUk1JTkFURUQpLHRoaXMudWEuZGVzdHJveVRyYW5zYWN0aW9uKHRoaXMpfSxvLnByb3RvdHlwZS50aW1lcl9JPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfVEVSTUlOQVRFRCl9LG8ucHJvdG90eXBlLnRpbWVyX0w9ZnVuY3Rpb24oKXtnKFwiVGltZXIgTCBleHBpcmVkIGZvciB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSx0aGlzLnN0YXRlPT09YS5TVEFUVVNfQUNDRVBURUQmJih0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSl9LG8ucHJvdG90eXBlLm9uVHJhbnNwb3J0RXJyb3I9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zcG9ydEVycm9yfHwodGhpcy50cmFuc3BvcnRFcnJvcj0hMCxnKFwidHJhbnNwb3J0IGVycm9yIG9jY3VycmVkLCBkZWxldGluZyB0cmFuc2FjdGlvbiBcIit0aGlzLmlkKSxudWxsIT09dGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXIpLHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lcj1udWxsKSxjbGVhclRpbWVvdXQodGhpcy5MKSxjbGVhclRpbWVvdXQodGhpcy5IKSxjbGVhclRpbWVvdXQodGhpcy5JKSx0aGlzLnN0YXRlQ2hhbmdlZChhLlNUQVRVU19URVJNSU5BVEVEKSx0aGlzLnVhLmRlc3Ryb3lUcmFuc2FjdGlvbih0aGlzKSl9LG8ucHJvdG90eXBlLnJlc2VuZF9wcm92aXNpb25hbD1mdW5jdGlvbigpe3RoaXMudHJhbnNwb3J0LnNlbmQodGhpcy5sYXN0X3Jlc3BvbnNlKXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCl9LG8ucHJvdG90eXBlLnJlY2VpdmVSZXNwb25zZT1mdW5jdGlvbihlLHQsbixyKXt2YXIgcz10aGlzO2lmKGU+PTEwMCYmMTk5Pj1lKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy50cmFuc3BvcnQuc2VuZCh0KXx8dGhpcy5vblRyYW5zcG9ydEVycm9yKCksdGhpcy5sYXN0X3Jlc3BvbnNlPXR9aWYoZT4xMDAmJjE5OT49ZSYmdGhpcy5zdGF0ZT09PWEuU1RBVFVTX1BST0NFRURJTkcpbnVsbD09PXRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciYmKHRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lcj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe3MucmVzZW5kX3Byb3Zpc2lvbmFsKCl9LF8uUFJPVklTSU9OQUxfUkVTUE9OU0VfSU5URVJWQUwpKTtlbHNlIGlmKGU+PTIwMCYmMjk5Pj1lKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6dGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfQUNDRVBURUQpLHRoaXMubGFzdF9yZXNwb25zZT10LHRoaXMuTD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cy50aW1lcl9MKCl9LF8uVElNRVJfTCksbnVsbCE9PXRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciYmKGNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKSx0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9bnVsbCk7Y2FzZSBhLlNUQVRVU19BQ0NFUFRFRDp0aGlzLnRyYW5zcG9ydC5zZW5kKHQpP24mJm4oKToodGhpcy5vblRyYW5zcG9ydEVycm9yKCksciYmcigpKX1lbHNlIGlmKGU+PTMwMCYmNjk5Pj1lKXN3aXRjaCh0aGlzLnN0YXRlKXtjYXNlIGEuU1RBVFVTX1BST0NFRURJTkc6bnVsbCE9PXRoaXMucmVzZW5kUHJvdmlzaW9uYWxUaW1lciYmKGNsZWFySW50ZXJ2YWwodGhpcy5yZXNlbmRQcm92aXNpb25hbFRpbWVyKSx0aGlzLnJlc2VuZFByb3Zpc2lvbmFsVGltZXI9bnVsbCksdGhpcy50cmFuc3BvcnQuc2VuZCh0KT8odGhpcy5zdGF0ZUNoYW5nZWQoYS5TVEFUVVNfQ09NUExFVEVEKSx0aGlzLkg9c2V0VGltZW91dChmdW5jdGlvbigpe3MudGltZXJfSCgpfSxfLlRJTUVSX0gpLG4mJm4oKSk6KHRoaXMub25UcmFuc3BvcnRFcnJvcigpLHImJnIoKSl9fX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9UaW1lcnNcIjoyMCxkZWJ1ZzozMyxldmVudHM6MjgsdXRpbDozMn1dLDIyOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQpe2lmKGMoXCJuZXcoKVwiKSx0aGlzLnN0YXR1cz1kLlNUQVRVU19ESVNDT05ORUNURUQsdGhpcy5zb2NrZXQ9bnVsbCx0aGlzLnNvY2tldHM9W10sdGhpcy5yZWNvdmVyeV9vcHRpb25zPXR8fGQucmVjb3Zlcnlfb3B0aW9ucyx0aGlzLnJlY292ZXJfYXR0ZW1wdHM9MCx0aGlzLnJlY292ZXJ5X3RpbWVyPW51bGwsdGhpcy5jbG9zZV9yZXF1ZXN0ZWQ9ITEsXCJ1bmRlZmluZWRcIj09dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXJndW1lbnQuIHVuZGVmaW5lZCAnc29ja2V0cycgYXJndW1lbnRcIik7ZSBpbnN0YW5jZW9mIEFycmF5fHwoZT1bZV0pLGUuZm9yRWFjaChmdW5jdGlvbihlKXtpZighYS5pc1NvY2tldChlLnNvY2tldCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXJndW1lbnQuIGludmFsaWQgJ0pzU0lQLlNvY2tldCcgaW5zdGFuY2VcIik7aWYoZS53ZWlnaHQmJiFOdW1iZXIoZS53ZWlnaHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50LiAnd2VpZ2h0JyBhdHRyaWJ1dGUgaXMgbm90IGEgbnVtYmVyXCIpO3RoaXMuc29ja2V0cy5wdXNoKHtzb2NrZXQ6ZS5zb2NrZXQsd2VpZ2h0OmUud2VpZ2h0fHwwLHN0YXR1czpkLlNPQ0tFVF9TVEFUVVNfUkVBRFl9KX0sdGhpcyksT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7dmlhX3RyYW5zcG9ydDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc29ja2V0LnZpYV90cmFuc3BvcnR9fSx1cmw6e2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvY2tldC51cmx9fSxzaXBfdXJpOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zb2NrZXQuc2lwX3VyaX19fSksdS5jYWxsKHRoaXMpfWZ1bmN0aW9uIHMoKXt0aGlzLnJlY292ZXJfYXR0ZW1wdHM9MCx0aGlzLnN0YXR1cz1kLlNUQVRVU19DT05ORUNURUQsbnVsbCE9PXRoaXMucmVjb3ZlcnlfdGltZXImJihjbGVhclRpbWVvdXQodGhpcy5yZWNvdmVyeV90aW1lciksdGhpcy5yZWNvdmVyeV90aW1lcj1udWxsKSx0aGlzLm9uY29ubmVjdCh7c29ja2V0OnRoaXN9KX1mdW5jdGlvbiBsKGUsdCxuKXt0aGlzLnN0YXR1cz1kLlNUQVRVU19ESVNDT05ORUNURUQsdGhpcy5vbmRpc2Nvbm5lY3Qoe3NvY2tldDp0aGlzLnNvY2tldCxlcnJvcjplLGNvZGU6dCxyZWFzb246bn0pLHRoaXMuY2xvc2VfcmVxdWVzdGVkfHwoZSYmKHRoaXMuc29ja2V0LnN0YXR1cz1kLlNPQ0tFVF9TVEFUVVNfRVJST1IpLG8uY2FsbCh0aGlzLGUpKX1mdW5jdGlvbiBpKGUpe2lmKFwiXFxyXFxuXCI9PT1lKXJldHVybiB2b2lkIGMoXCJyZWNlaXZlZCBtZXNzYWdlIHdpdGggQ1JMRiBLZWVwIEFsaXZlIHJlc3BvbnNlXCIpO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXt0cnl7ZT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsbmV3IFVpbnQ4QXJyYXkoZSkpfWNhdGNoKHQpe3JldHVybiB2b2lkIGMoXCJyZWNlaXZlZCBiaW5hcnkgbWVzc2FnZSBmYWlsZWQgdG8gYmUgY29udmVydGVkIGludG8gc3RyaW5nLCBtZXNzYWdlIGRpc2NhcmRlZFwiKX1jKFwicmVjZWl2ZWQgYmluYXJ5IG1lc3NhZ2U6XFxuXFxuXCIrZStcIlxcblwiKX1lbHNlIGMoXCJyZWNlaXZlZCB0ZXh0IG1lc3NhZ2U6XFxuXFxuXCIrZStcIlxcblwiKTt0aGlzLm9uZGF0YSh7dHJhbnNwb3J0OnRoaXMsbWVzc2FnZTplfSl9ZnVuY3Rpb24gbygpe3ZhciBlLHQ9dGhpczt0aGlzLnJlY292ZXJfYXR0ZW1wdHMrPTEsZT1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqTWF0aC5wb3coMix0aGlzLnJlY292ZXJfYXR0ZW1wdHMpKzEpLGU8dGhpcy5yZWNvdmVyeV9vcHRpb25zLm1pbl9pbnRlcnZhbD9lPXRoaXMucmVjb3Zlcnlfb3B0aW9ucy5taW5faW50ZXJ2YWw6ZT50aGlzLnJlY292ZXJ5X29wdGlvbnMubWF4X2ludGVydmFsJiYoZT10aGlzLnJlY292ZXJ5X29wdGlvbnMubWF4X2ludGVydmFsKSxjKFwicmVjb25uZWN0aW9uIGF0dGVtcHQ6IFwiK3RoaXMucmVjb3Zlcl9hdHRlbXB0cytcIi4gbmV4dCBjb25uZWN0aW9uIGF0dGVtcHQgaW4gXCIrZStcIiBzZWNvbmRzXCIpLHRoaXMucmVjb3ZlcnlfdGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3QuY2xvc2VfcmVxdWVzdGVkfHx0LmlzQ29ubmVjdGVkKCl8fHQuaXNDb25uZWN0aW5nKCl8fCh1LmNhbGwodCksdC5jb25uZWN0KCkpfSwxZTMqZSl9ZnVuY3Rpb24gdSgpe3ZhciBlPVtdO2lmKHRoaXMuc29ja2V0cy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RhdHVzIT09ZC5TT0NLRVRfU1RBVFVTX0VSUk9SJiYoMD09PWUubGVuZ3RoP2UucHVzaCh0KTp0LndlaWdodD5lWzBdLndlaWdodD9lPVt0XTp0LndlaWdodD09PWVbMF0ud2VpZ2h0JiZlLnB1c2godCkpfSksMD09PWUubGVuZ3RoKXJldHVybiB0aGlzLnNvY2tldHMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0YXR1cz1kLlNPQ0tFVF9TVEFUVVNfUkVBRFl9KSx2b2lkIHUuY2FsbCh0aGlzKTt2YXIgdD1NYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqZS5sZW5ndGgpO3RoaXMuc29ja2V0PWVbdF0uc29ja2V0fXQuZXhwb3J0cz1yO3ZhciBhPWUoXCIuL1NvY2tldFwiKSxjPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOlRyYW5zcG9ydFwiKSxoPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOkVSUk9SOlRyYW5zcG9ydFwiKSxkPXtTVEFUVVNfQ09OTkVDVEVEOjAsU1RBVFVTX0NPTk5FQ1RJTkc6MSxTVEFUVVNfRElTQ09OTkVDVEVEOjIsU09DS0VUX1NUQVRVU19SRUFEWTowLFNPQ0tFVF9TVEFUVVNfRVJST1I6MSxyZWNvdmVyeV9vcHRpb25zOnttaW5faW50ZXJ2YWw6MixtYXhfaW50ZXJ2YWw6MzB9fTtyLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGMoXCJjb25uZWN0KClcIiksdGhpcy5pc0Nvbm5lY3RlZCgpP3ZvaWQgYyhcIlRyYW5zcG9ydCBpcyBhbHJlYWR5IGNvbm5lY3RlZFwiKTp0aGlzLmlzQ29ubmVjdGluZygpP3ZvaWQgYyhcIlRyYW5zcG9ydCBpcyBjb25uZWN0aW5nXCIpOih0aGlzLmNsb3NlX3JlcXVlc3RlZD0hMSx0aGlzLnN0YXR1cz1kLlNUQVRVU19DT05ORUNUSU5HLHRoaXMub25jb25uZWN0aW5nKHtzb2NrZXQ6dGhpcy5zb2NrZXQsYXR0ZW1wdHM6dGhpcy5yZWNvdmVyX2F0dGVtcHRzfSksdm9pZCh0aGlzLmNsb3NlX3JlcXVlc3RlZHx8KHRoaXMuc29ja2V0Lm9uY29ubmVjdD1zLmJpbmQodGhpcyksdGhpcy5zb2NrZXQub25kaXNjb25uZWN0PWwuYmluZCh0aGlzKSx0aGlzLnNvY2tldC5vbmRhdGE9aS5iaW5kKHRoaXMpLHRoaXMuc29ja2V0LmNvbm5lY3QoKSkpKX0sci5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe2MoXCJjbG9zZSgpXCIpLHRoaXMuY2xvc2VfcmVxdWVzdGVkPSEwLHRoaXMucmVjb3Zlcl9hdHRlbXB0cz0wLHRoaXMuc3RhdHVzPWQuU1RBVFVTX0RJU0NPTk5FQ1RFRCxudWxsIT09dGhpcy5yZWNvdmVyeV90aW1lciYmKGNsZWFyVGltZW91dCh0aGlzLnJlY292ZXJ5X3RpbWVyKSx0aGlzLnJlY292ZXJ5X3RpbWVyPW51bGwpLHRoaXMuc29ja2V0Lm9uY29ubmVjdD1mdW5jdGlvbigpe30sdGhpcy5zb2NrZXQub25kaXNjb25uZWN0PWZ1bmN0aW9uKCl7fSx0aGlzLnNvY2tldC5vbmRhdGE9ZnVuY3Rpb24oKXt9LHRoaXMuc29ja2V0LmRpc2Nvbm5lY3QoKSx0aGlzLm9uZGlzY29ubmVjdCgpfSxyLnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUpe2lmKGMoXCJzZW5kKClcIiksIXRoaXMuaXNDb25uZWN0ZWQoKSlyZXR1cm4gaChcInVuYWJsZSB0byBzZW5kIG1lc3NhZ2UsIHRyYW5zcG9ydCBpcyBub3QgY29ubmVjdGVkXCIpLCExO3ZhciB0PWUudG9TdHJpbmcoKTtyZXR1cm4gYyhcInNlbmRpbmcgbWVzc2FnZTpcXG5cXG5cIit0K1wiXFxuXCIpLHRoaXMuc29ja2V0LnNlbmQodCl9LHIucHJvdG90eXBlLmlzQ29ubmVjdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdHVzPT09ZC5TVEFUVVNfQ09OTkVDVEVEfSxyLnByb3RvdHlwZS5pc0Nvbm5lY3Rpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdGF0dXM9PT1kLlNUQVRVU19DT05ORUNUSU5HfX0se1wiLi9Tb2NrZXRcIjoxOSxkZWJ1ZzozM31dLDIzOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXtpZih0aGlzLmNhY2hlPXtjcmVkZW50aWFsczp7fX0sdGhpcy5jb25maWd1cmF0aW9uPXt9LHRoaXMuZHluQ29uZmlndXJhdGlvbj17fSx0aGlzLmRpYWxvZ3M9e30sdGhpcy5hcHBsaWNhbnRzPXt9LHRoaXMuc2Vzc2lvbnM9e30sdGhpcy50cmFuc3BvcnQ9bnVsbCx0aGlzLmNvbnRhY3Q9bnVsbCx0aGlzLnN0YXR1cz11LlNUQVRVU19JTklULHRoaXMuZXJyb3I9bnVsbCx0aGlzLnRyYW5zYWN0aW9ucz17bmlzdDp7fSxuaWN0Ont9LGlzdDp7fSxpY3Q6e319LHRoaXMuZGF0YT17fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHt0cmFuc2FjdGlvbnNDb3VudDp7Z2V0OmZ1bmN0aW9uKCl7dmFyIGUsdD1bXCJuaXN0XCIsXCJuaWN0XCIsXCJpc3RcIixcImljdFwiXSxuPTA7Zm9yKGUgaW4gdCluKz1PYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9uc1t0W2VdXSkubGVuZ3RoO3JldHVybiBufX0sbmljdFRyYW5zYWN0aW9uc0NvdW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnMubmljdCkubGVuZ3RofX0sbmlzdFRyYW5zYWN0aW9uc0NvdW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnMubmlzdCkubGVuZ3RofX0saWN0VHJhbnNhY3Rpb25zQ291bnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLnRyYW5zYWN0aW9ucy5pY3QpLmxlbmd0aH19LGlzdFRyYW5zYWN0aW9uc0NvdW50OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcy50cmFuc2FjdGlvbnMuaXN0KS5sZW5ndGh9fX0pLHZvaWQgMD09PWUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIk5vdCBlbm91Z2ggYXJndW1lbnRzXCIpO3RyeXt0aGlzLmxvYWRDb25maWcoZSl9Y2F0Y2godCl7dGhyb3cgdGhpcy5zdGF0dXM9dS5TVEFUVVNfTk9UX1JFQURZLHRoaXMuZXJyb3I9dS5DT05GSUdVUkFUSU9OX0VSUk9SLHR9dGhpcy5fcmVnaXN0cmF0b3I9bmV3IG0odGhpcyksYy5FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKSxwLmNhbGxlZHx8cCgpfWZ1bmN0aW9uIHMoZSl7dGhpcy5lbWl0KFwiY29ubmVjdGluZ1wiLGUpfWZ1bmN0aW9uIGwoZSl7dGhpcy5zdGF0dXMhPT11LlNUQVRVU19VU0VSX0NMT1NFRCYmKHRoaXMuc3RhdHVzPXUuU1RBVFVTX1JFQURZLHRoaXMuZXJyb3I9bnVsbCx0aGlzLmVtaXQoXCJjb25uZWN0ZWRcIixlKSx0aGlzLmR5bkNvbmZpZ3VyYXRpb24ucmVnaXN0ZXImJnRoaXMuX3JlZ2lzdHJhdG9yLnJlZ2lzdGVyKCkpfWZ1bmN0aW9uIGkoZSl7dmFyIHQsbixyLHM9W1wibmljdFwiLFwiaWN0XCIsXCJuaXN0XCIsXCJpc3RcIl07Zm9yKHI9cy5sZW5ndGgsdD0wO3I+dDt0KyspZm9yKG4gaW4gdGhpcy50cmFuc2FjdGlvbnNbc1t0XV0pdGhpcy50cmFuc2FjdGlvbnNbc1t0XV1bbl0ub25UcmFuc3BvcnRFcnJvcigpO3RoaXMuZW1pdChcImRpc2Nvbm5lY3RlZFwiLGUpLHRoaXMuX3JlZ2lzdHJhdG9yLm9uVHJhbnNwb3J0Q2xvc2VkKCksdGhpcy5zdGF0dXMhPT11LlNUQVRVU19VU0VSX0NMT1NFRCYmKHRoaXMuc3RhdHVzPXUuU1RBVFVTX05PVF9SRUFEWSx0aGlzLmVycm9yPXUuTkVUV09SS19FUlJPUil9ZnVuY3Rpb24gbyhlKXt2YXIgdCxuPWUudHJhbnNwb3J0LHM9ZS5tZXNzYWdlO2lmKHM9Yi5wYXJzZU1lc3NhZ2Uocyx0aGlzKSxzJiYhKHRoaXMuc3RhdHVzPT09ci5DLlNUQVRVU19VU0VSX0NMT1NFRCYmcyBpbnN0YW5jZW9mIEkuSW5jb21pbmdSZXF1ZXN0KSYmdyhzLHRoaXMsbikpaWYocyBpbnN0YW5jZW9mIEkuSW5jb21pbmdSZXF1ZXN0KXMudHJhbnNwb3J0PW4sdGhpcy5yZWNlaXZlUmVxdWVzdChzKTtlbHNlIGlmKHMgaW5zdGFuY2VvZiBJLkluY29taW5nUmVzcG9uc2Upc3dpdGNoKHMubWV0aG9kKXtjYXNlIGYuSU5WSVRFOnQ9dGhpcy50cmFuc2FjdGlvbnMuaWN0W3MudmlhX2JyYW5jaF0sdCYmdC5yZWNlaXZlUmVzcG9uc2Uocyk7YnJlYWs7Y2FzZSBmLkFDSzpicmVhaztkZWZhdWx0OnQ9dGhpcy50cmFuc2FjdGlvbnMubmljdFtzLnZpYV9icmFuY2hdLHQmJnQucmVjZWl2ZVJlc3BvbnNlKHMpfX10LmV4cG9ydHM9cjt2YXIgdT17U1RBVFVTX0lOSVQ6MCxTVEFUVVNfUkVBRFk6MSxTVEFUVVNfVVNFUl9DTE9TRUQ6MixTVEFUVVNfTk9UX1JFQURZOjMsQ09ORklHVVJBVElPTl9FUlJPUjoxLE5FVFdPUktfRVJST1I6Mn07ci5DPXU7dmFyIGE9ZShcInV0aWxcIiksYz1lKFwiZXZlbnRzXCIpLGg9ZShcImRlYnVnXCIpKFwiSnNTSVA6VUFcIiksZD1lKFwiZGVidWdcIikoXCJKc1NJUDpFUlJPUjpVQVwiKTtkLmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKTt2YXIgcD1lKFwicnRjbmluamFcIiksZj1lKFwiLi9Db25zdGFudHNcIiksbT1lKFwiLi9SZWdpc3RyYXRvclwiKSxnPWUoXCIuL1JUQ1Nlc3Npb25cIiksVD1lKFwiLi9NZXNzYWdlXCIpLF89ZShcIi4vVHJhbnNhY3Rpb25zXCIpLHY9ZShcIi4vVHJhbnNwb3J0XCIpLEM9ZShcIi4vV2ViU29ja2V0SW50ZXJmYWNlXCIpLFM9ZShcIi4vU29ja2V0XCIpLEU9ZShcIi4vVXRpbHNcIiksQT1lKFwiLi9FeGNlcHRpb25zXCIpLHk9ZShcIi4vVVJJXCIpLFI9ZShcIi4vR3JhbW1hclwiKSxiPWUoXCIuL1BhcnNlclwiKSxJPWUoXCIuL1NJUE1lc3NhZ2VcIiksdz1lKFwiLi9zYW5pdHlDaGVja1wiKTthLmluaGVyaXRzKHIsYy5FdmVudEVtaXR0ZXIpLHIucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2goXCJyZXN0YXJ0aW5nIFVBXCIpLHQuc3RhdHVzPXUuU1RBVFVTX1JFQURZLHQudHJhbnNwb3J0LmNvbm5lY3QoKX1oKFwic3RhcnQoKVwiKTt2YXIgdD10aGlzO3RoaXMuc3RhdHVzPT09dS5TVEFUVVNfSU5JVD90aGlzLnRyYW5zcG9ydC5jb25uZWN0KCk6dGhpcy5zdGF0dXM9PT11LlNUQVRVU19VU0VSX0NMT1NFRD90aGlzLmlzQ29ubmVjdGVkKCk/dGhpcy5vbmNlKFwiZGlzY29ubmVjdGVkXCIsZSk6ZSgpOmgodGhpcy5zdGF0dXM9PT11LlNUQVRVU19SRUFEWT9cIlVBIGlzIGluIFJFQURZIHN0YXR1cywgbm90IHJlc3RhcnRlZFwiOlwiRVJST1I6IGNvbm5lY3Rpb24gaXMgZG93biwgQXV0by1SZWNvdmVyeSBzeXN0ZW0gaXMgdHJ5aW5nIHRvIHJlY29ubmVjdFwiKSx0aGlzLmR5bkNvbmZpZ3VyYXRpb24ucmVnaXN0ZXI9dGhpcy5jb25maWd1cmF0aW9uLnJlZ2lzdGVyfSxyLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbigpe2goXCJyZWdpc3RlcigpXCIpLHRoaXMuZHluQ29uZmlndXJhdGlvbi5yZWdpc3Rlcj0hMCx0aGlzLl9yZWdpc3RyYXRvci5yZWdpc3RlcigpfSxyLnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe2goXCJ1bnJlZ2lzdGVyKClcIiksdGhpcy5keW5Db25maWd1cmF0aW9uLnJlZ2lzdGVyPSExLHRoaXMuX3JlZ2lzdHJhdG9yLnVucmVnaXN0ZXIoZSl9LHIucHJvdG90eXBlLnJlZ2lzdHJhdG9yPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlZ2lzdHJhdG9yfSxyLnByb3RvdHlwZS5pc1JlZ2lzdGVyZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX3JlZ2lzdHJhdG9yLnJlZ2lzdGVyZWR9LHIucHJvdG90eXBlLmlzQ29ubmVjdGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNwb3J0LmlzQ29ubmVjdGVkKCl9LHIucHJvdG90eXBlLmNhbGw9ZnVuY3Rpb24oZSx0KXtoKFwiY2FsbCgpXCIpO3ZhciBuO3JldHVybiBuPW5ldyBnKHRoaXMpLG4uY29ubmVjdChlLHQpLG59LHIucHJvdG90eXBlLnNlbmRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXtoKFwic2VuZE1lc3NhZ2UoKVwiKTt2YXIgcjtyZXR1cm4gcj1uZXcgVCh0aGlzKSxyLnNlbmQoZSx0LG4pLHJ9LHIucHJvdG90eXBlLnRlcm1pbmF0ZVNlc3Npb25zPWZ1bmN0aW9uKGUpe2goXCJ0ZXJtaW5hdGVTZXNzaW9ucygpXCIpO2Zvcih2YXIgdCBpbiB0aGlzLnNlc3Npb25zKXRoaXMuc2Vzc2lvbnNbdF0uaXNFbmRlZCgpfHx0aGlzLnNlc3Npb25zW3RdLnRlcm1pbmF0ZShlKX0sci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2goXCJzdG9wKClcIik7dmFyIGUsdCxuLHI9dGhpcztpZih0aGlzLmR5bkNvbmZpZ3VyYXRpb249e30sdGhpcy5zdGF0dXM9PT11LlNUQVRVU19VU0VSX0NMT1NFRClyZXR1cm4gdm9pZCBoKFwiVUEgYWxyZWFkeSBjbG9zZWRcIik7dGhpcy5fcmVnaXN0cmF0b3IuY2xvc2UoKSxuPU9iamVjdC5rZXlzKHRoaXMuc2Vzc2lvbnMpLmxlbmd0aDtmb3IoZSBpbiB0aGlzLnNlc3Npb25zKXtoKFwiY2xvc2luZyBzZXNzaW9uIFwiK2UpO3RyeXt0aGlzLnNlc3Npb25zW2VdLnRlcm1pbmF0ZSgpfWNhdGNoKHMpe319Zm9yKHQgaW4gdGhpcy5hcHBsaWNhbnRzKXRyeXt0aGlzLmFwcGxpY2FudHNbdF0uY2xvc2UoKX1jYXRjaChzKXt9dGhpcy5zdGF0dXM9dS5TVEFUVVNfVVNFUl9DTE9TRUQsMD09PXRoaXMubmlzdFRyYW5zYWN0aW9uc0NvdW50JiYwPT09dGhpcy5uaWN0VHJhbnNhY3Rpb25zQ291bnQmJjA9PT10aGlzLmljdFRyYW5zYWN0aW9uc0NvdW50JiYwPT09dGhpcy5pc3RUcmFuc2FjdGlvbnNDb3VudCYmMD09PW4/ci50cmFuc3BvcnQuZGlzY29ubmVjdCgpOnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyLnRyYW5zcG9ydC5kaXNjb25uZWN0KCl9LDJlMyl9LHIucHJvdG90eXBlLm5vcm1hbGl6ZVRhcmdldD1mdW5jdGlvbihlKXtyZXR1cm4gRS5ub3JtYWxpemVUYXJnZXQoZSx0aGlzLmNvbmZpZ3VyYXRpb24uaG9zdHBvcnRfcGFyYW1zKX0sci5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlXCJyZWFsbVwiOnJldHVybiB0aGlzLmNvbmZpZ3VyYXRpb24ucmVhbG07Y2FzZVwiaGExXCI6cmV0dXJuIHRoaXMuY29uZmlndXJhdGlvbi5oYTE7ZGVmYXVsdDpyZXR1cm4gdm9pZCBkKCdnZXQoKSB8IGNhbm5vdCBnZXQgXCIlc1wiIHBhcmFtZXRlciBpbiBydW50aW1lJyxlKX1yZXR1cm4hMH0sci5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7c3dpdGNoKGUpe2Nhc2VcInBhc3N3b3JkXCI6dGhpcy5jb25maWd1cmF0aW9uLnBhc3N3b3JkPVN0cmluZyh0KTticmVhaztjYXNlXCJyZWFsbVwiOnRoaXMuY29uZmlndXJhdGlvbi5yZWFsbT1TdHJpbmcodCk7YnJlYWs7Y2FzZVwiaGExXCI6dGhpcy5jb25maWd1cmF0aW9uLmhhMT1TdHJpbmcodCksdGhpcy5jb25maWd1cmF0aW9uLnBhc3N3b3JkPW51bGw7YnJlYWs7Y2FzZVwiZGlzcGxheV9uYW1lXCI6aWYoLTE9PT1SLnBhcnNlKCdcIicrdCsnXCInLFwiZGlzcGxheV9uYW1lXCIpKXJldHVybiBkKCdzZXQoKSB8IHdyb25nIFwiZGlzcGxheV9uYW1lXCInKSwhMTt0aGlzLmNvbmZpZ3VyYXRpb24uZGlzcGxheV9uYW1lPXQ7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gZCgnc2V0KCkgfCBjYW5ub3Qgc2V0IFwiJXNcIiBwYXJhbWV0ZXIgaW4gcnVudGltZScsZSksITF9cmV0dXJuITB9LHIucHJvdG90eXBlLm5ld1RyYW5zYWN0aW9uPWZ1bmN0aW9uKGUpe3RoaXMudHJhbnNhY3Rpb25zW2UudHlwZV1bZS5pZF09ZSx0aGlzLmVtaXQoXCJuZXdUcmFuc2FjdGlvblwiLHt0cmFuc2FjdGlvbjplfSl9LHIucHJvdG90eXBlLmRlc3Ryb3lUcmFuc2FjdGlvbj1mdW5jdGlvbihlKXtkZWxldGUgdGhpcy50cmFuc2FjdGlvbnNbZS50eXBlXVtlLmlkXSx0aGlzLmVtaXQoXCJ0cmFuc2FjdGlvbkRlc3Ryb3llZFwiLHt0cmFuc2FjdGlvbjplfSl9LHIucHJvdG90eXBlLm5ld01lc3NhZ2U9ZnVuY3Rpb24oZSl7dGhpcy5lbWl0KFwibmV3TWVzc2FnZVwiLGUpfSxyLnByb3RvdHlwZS5uZXdSVENTZXNzaW9uPWZ1bmN0aW9uKGUpe3RoaXMuZW1pdChcIm5ld1JUQ1Nlc3Npb25cIixlKX0sci5wcm90b3R5cGUucmVnaXN0ZXJlZD1mdW5jdGlvbihlKXt0aGlzLmVtaXQoXCJyZWdpc3RlcmVkXCIsZSl9LHIucHJvdG90eXBlLnVucmVnaXN0ZXJlZD1mdW5jdGlvbihlKXt0aGlzLmVtaXQoXCJ1bnJlZ2lzdGVyZWRcIixlKX0sci5wcm90b3R5cGUucmVnaXN0cmF0aW9uRmFpbGVkPWZ1bmN0aW9uKGUpe3RoaXMuZW1pdChcInJlZ2lzdHJhdGlvbkZhaWxlZFwiLGUpfSxyLnByb3RvdHlwZS5yZWNlaXZlUmVxdWVzdD1mdW5jdGlvbihlKXt2YXIgdCxuLHIscyxsPWUubWV0aG9kO2lmKGUucnVyaS51c2VyIT09dGhpcy5jb25maWd1cmF0aW9uLnVyaS51c2VyJiZlLnJ1cmkudXNlciE9PXRoaXMuY29udGFjdC51cmkudXNlcilyZXR1cm4gaChcIlJlcXVlc3QtVVJJIGRvZXMgbm90IHBvaW50IHRvIHVzXCIpLHZvaWQoZS5tZXRob2QhPT1mLkFDSyYmZS5yZXBseV9zbCg0MDQpKTtpZihlLnJ1cmkuc2NoZW1lPT09Zi5TSVBTKXJldHVybiB2b2lkIGUucmVwbHlfc2woNDE2KTtpZighXy5jaGVja1RyYW5zYWN0aW9uKHRoaXMsZSkpe2lmKGw9PT1mLklOVklURT9uZXcgXy5JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbihlLHRoaXMpOmwhPT1mLkFDSyYmbCE9PWYuQ0FOQ0VMJiZuZXcgXy5Ob25JbnZpdGVTZXJ2ZXJUcmFuc2FjdGlvbihlLHRoaXMpLGw9PT1mLk9QVElPTlMpZS5yZXBseSgyMDApO2Vsc2UgaWYobD09PWYuTUVTU0FHRSl7aWYoMD09PXRoaXMubGlzdGVuZXJzKFwibmV3TWVzc2FnZVwiKS5sZW5ndGgpcmV0dXJuIHZvaWQgZS5yZXBseSg0MDUpO3I9bmV3IFQodGhpcyksci5pbml0X2luY29taW5nKGUpfWVsc2UgaWYobD09PWYuSU5WSVRFJiYhZS50b190YWcmJjA9PT10aGlzLmxpc3RlbmVycyhcIm5ld1JUQ1Nlc3Npb25cIikubGVuZ3RoKXJldHVybiB2b2lkIGUucmVwbHkoNDA1KTtpZihlLnRvX3RhZyl0PXRoaXMuZmluZERpYWxvZyhlLmNhbGxfaWQsZS5mcm9tX3RhZyxlLnRvX3RhZyksdD90LnJlY2VpdmVSZXF1ZXN0KGUpOmw9PT1mLk5PVElGWT8obj10aGlzLmZpbmRTZXNzaW9uKGUpLG4/bi5yZWNlaXZlUmVxdWVzdChlKTooaChcInJlY2VpdmVkIE5PVElGWSByZXF1ZXN0IGZvciBhIG5vbiBleGlzdGVudCBzdWJzY3JpcHRpb25cIiksZS5yZXBseSg0ODEsXCJTdWJzY3JpcHRpb24gZG9lcyBub3QgZXhpc3RcIikpKTpsIT09Zi5BQ0smJmUucmVwbHkoNDgxKTtlbHNlIHN3aXRjaChsKXtjYXNlIGYuSU5WSVRFOnAuaGFzV2ViUlRDKCk/ZS5oYXNIZWFkZXIoXCJyZXBsYWNlc1wiKT8ocz1lLnJlcGxhY2VzLHQ9dGhpcy5maW5kRGlhbG9nKHMuY2FsbF9pZCxzLmZyb21fdGFnLHMudG9fdGFnKSx0PyhuPXQub3duZXIsbi5pc0VuZGVkKCk/ZS5yZXBseSg2MDMpOm4ucmVjZWl2ZVJlcXVlc3QoZSkpOmUucmVwbHkoNDgxKSk6KG49bmV3IGcodGhpcyksbi5pbml0X2luY29taW5nKGUpKTooaChcIklOVklURSByZWNlaXZlZCBidXQgV2ViUlRDIGlzIG5vdCBzdXBwb3J0ZWRcIiksZS5yZXBseSg0ODgpKTticmVhaztjYXNlIGYuQllFOmUucmVwbHkoNDgxKTticmVhaztjYXNlIGYuQ0FOQ0VMOm49dGhpcy5maW5kU2Vzc2lvbihlKSxuP24ucmVjZWl2ZVJlcXVlc3QoZSk6aChcInJlY2VpdmVkIENBTkNFTCByZXF1ZXN0IGZvciBhIG5vbiBleGlzdGVudCBzZXNzaW9uXCIpO2JyZWFrO2Nhc2UgZi5BQ0s6YnJlYWs7ZGVmYXVsdDplLnJlcGx5KDQwNSl9fX0sci5wcm90b3R5cGUuZmluZFNlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jYWxsX2lkK2UuZnJvbV90YWcsbj10aGlzLnNlc3Npb25zW3RdLHI9ZS5jYWxsX2lkK2UudG9fdGFnLHM9dGhpcy5zZXNzaW9uc1tyXTtyZXR1cm4gbj9uOnM/czpudWxsfSxyLnByb3RvdHlwZS5maW5kRGlhbG9nPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lK3QrbixzPXRoaXMuZGlhbG9nc1tyXTtyZXR1cm4gcz9zOihyPWUrbit0LHM9dGhpcy5kaWFsb2dzW3JdLHM/czpudWxsKX0sci5wcm90b3R5cGUubG9hZENvbmZpZz1mdW5jdGlvbihlKXt2YXIgdCxuLHUsYSxjLHA9e3ZpYV9ob3N0OkUuY3JlYXRlUmFuZG9tVG9rZW4oMTIpK1wiLmludmFsaWRcIixjb250YWN0X3VyaTpudWxsLHBhc3N3b3JkOm51bGwscmVhbG06bnVsbCxoYTE6bnVsbCxyZWdpc3Rlcl9leHBpcmVzOjYwMCxyZWdpc3RlcjohMCxyZWdpc3RyYXJfc2VydmVyOm51bGwsdXNlX3ByZWxvYWRlZF9yb3V0ZTohMSxub19hbnN3ZXJfdGltZW91dDo2MCxzZXNzaW9uX3RpbWVyczohMH07Zm9yKHQgaW4gci5jb25maWd1cmF0aW9uX2NoZWNrLm1hbmRhdG9yeSl7aWYoIWUuaGFzT3duUHJvcGVydHkodCkpdGhyb3cgbmV3IEEuQ29uZmlndXJhdGlvbkVycm9yKHQpO2lmKG49ZVt0XSx1PXIuY29uZmlndXJhdGlvbl9jaGVjay5tYW5kYXRvcnlbdF0uY2FsbCh0aGlzLG4pLHZvaWQgMD09PXUpdGhyb3cgbmV3IEEuQ29uZmlndXJhdGlvbkVycm9yKHQsbik7cFt0XT11fWZvcih0IGluIHIuY29uZmlndXJhdGlvbl9jaGVjay5vcHRpb25hbClpZihlLmhhc093blByb3BlcnR5KHQpKXtpZihuPWVbdF0sRS5pc0VtcHR5KG4pKWNvbnRpbnVlO2lmKHU9ci5jb25maWd1cmF0aW9uX2NoZWNrLm9wdGlvbmFsW3RdLmNhbGwodGhpcyxuLGUpLHZvaWQgMD09PXUpdGhyb3cgbmV3IEEuQ29uZmlndXJhdGlvbkVycm9yKHQsbik7cFt0XT11fTA9PT1wLmRpc3BsYXlfbmFtZSYmKHAuZGlzcGxheV9uYW1lPVwiMFwiKSxwLmluc3RhbmNlX2lkfHwocC5pbnN0YW5jZV9pZD1FLm5ld1VVSUQoKSkscC5qc3NpcF9pZD1FLmNyZWF0ZVJhbmRvbVRva2VuKDUpLGE9cC51cmkuY2xvbmUoKSxhLnVzZXI9bnVsbCxwLmhvc3Rwb3J0X3BhcmFtcz1hLnRvU3RyaW5nKCkucmVwbGFjZSgvXnNpcDovaSxcIlwiKTt2YXIgZj1bXTtpZihwLndzX3NlcnZlcnMmJkFycmF5LmlzQXJyYXkocC53c19zZXJ2ZXJzKSYmKGY9Zi5jb25jYXQocC53c19zZXJ2ZXJzKSkscC5zb2NrZXRzJiZBcnJheS5pc0FycmF5KHAuc29ja2V0cykmJihmPWYuY29uY2F0KHAuc29ja2V0cykpLDA9PT1mLmxlbmd0aCl0aHJvdyBuZXcgQS5Db25maWd1cmF0aW9uRXJyb3IoXCJzb2NrZXRzXCIpO3RyeXt0aGlzLnRyYW5zcG9ydD1uZXcgdihmLHttYXhfaW50ZXJ2YWw6cC5jb25uZWN0aW9uX3JlY292ZXJ5X21heF9pbnRlcnZhbCxtaW5faW50ZXJ2YWw6cC5jb25uZWN0aW9uX3JlY292ZXJ5X21pbl9pbnRlcnZhbH0pLHRoaXMudHJhbnNwb3J0Lm9uY29ubmVjdGluZz1zLmJpbmQodGhpcyksdGhpcy50cmFuc3BvcnQub25jb25uZWN0PWwuYmluZCh0aGlzKSx0aGlzLnRyYW5zcG9ydC5vbmRpc2Nvbm5lY3Q9aS5iaW5kKHRoaXMpLHRoaXMudHJhbnNwb3J0Lm9uZGF0YT1vLmJpbmQodGhpcyksZGVsZXRlIHAuY29ubmVjdGlvbl9yZWNvdmVyeV9tYXhfaW50ZXJ2YWwsZGVsZXRlIHAuY29ubmVjdGlvbl9yZWNvdmVyeV9taW5faW50ZXJ2YWwsZGVsZXRlIHAud3Nfc2VydmVycyxkZWxldGUgcC5zb2NrZXRzfWNhdGNoKG0pe3Rocm93IGQobSksbmV3IEEuQ29uZmlndXJhdGlvbkVycm9yKFwic29ja2V0c1wiLGYpfXAuYXV0aG9yaXphdGlvbl91c2VyfHwocC5hdXRob3JpemF0aW9uX3VzZXI9cC51cmkudXNlcikscC5yZWdpc3RyYXJfc2VydmVyfHwoYz1wLnVyaS5jbG9uZSgpLGMudXNlcj1udWxsLGMuY2xlYXJQYXJhbXMoKSxjLmNsZWFySGVhZGVycygpLHAucmVnaXN0cmFyX3NlcnZlcj1jKSxwLm5vX2Fuc3dlcl90aW1lb3V0PTFlMypwLm5vX2Fuc3dlcl90aW1lb3V0LHAuY29udGFjdF91cmk/cC52aWFfaG9zdD1wLmNvbnRhY3RfdXJpLmhvc3Q6cC5jb250YWN0X3VyaT1uZXcgeShcInNpcFwiLEUuY3JlYXRlUmFuZG9tVG9rZW4oOCkscC52aWFfaG9zdCxudWxsLHt0cmFuc3BvcnQ6XCJ3c1wifSksdGhpcy5jb250YWN0PXtwdWJfZ3J1dTpudWxsLHRlbXBfZ3J1dTpudWxsLHVyaTpwLmNvbnRhY3RfdXJpLHRvU3RyaW5nOmZ1bmN0aW9uKGUpe2U9ZXx8e307dmFyIHQ9ZS5hbm9ueW1vdXN8fG51bGwsbj1lLm91dGJvdW5kfHxudWxsLHI9XCI8XCI7cmV0dXJuIHIrPXQ/dGhpcy50ZW1wX2dydXV8fFwic2lwOmFub255bW91c0Bhbm9ueW1vdXMuaW52YWxpZDt0cmFuc3BvcnQ9d3NcIjp0aGlzLnB1Yl9ncnV1fHx0aGlzLnVyaS50b1N0cmluZygpLCFufHwodD90aGlzLnRlbXBfZ3J1dTp0aGlzLnB1Yl9ncnV1KXx8KHIrPVwiO29iXCIpLHIrPVwiPlwifX07Zm9yKHQgaW4gcClyLmNvbmZpZ3VyYXRpb25fc2tlbGV0b25bdF0udmFsdWU9cFt0XTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLmNvbmZpZ3VyYXRpb24sci5jb25maWd1cmF0aW9uX3NrZWxldG9uKTtmb3IodCBpbiBwKXIuY29uZmlndXJhdGlvbl9za2VsZXRvblt0XS52YWx1ZT1cIlwiO2goXCJjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMgYWZ0ZXIgdmFsaWRhdGlvbjpcIik7Zm9yKHQgaW4gcClzd2l0Y2godCl7Y2FzZVwidXJpXCI6Y2FzZVwicmVnaXN0cmFyX3NlcnZlclwiOmgoXCItIFwiK3QrXCI6IFwiK3BbdF0pO2JyZWFrO2Nhc2VcInBhc3N3b3JkXCI6Y2FzZVwiaGExXCI6aChcIi0gXCIrdCtcIjogTk9UIFNIT1dOXCIpO2JyZWFrO2RlZmF1bHQ6aChcIi0gXCIrdCtcIjogXCIrSlNPTi5zdHJpbmdpZnkocFt0XSkpfX0sci5jb25maWd1cmF0aW9uX3NrZWxldG9uPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI9e30scz1bXCJqc3NpcF9pZFwiLFwiaG9zdHBvcnRfcGFyYW1zXCIsXCJ1cmlcIixcImF1dGhvcml6YXRpb25fdXNlclwiLFwiY29udGFjdF91cmlcIixcImRpc3BsYXlfbmFtZVwiLFwiaW5zdGFuY2VfaWRcIixcIm5vX2Fuc3dlcl90aW1lb3V0XCIsXCJzZXNzaW9uX3RpbWVyc1wiLFwicGFzc3dvcmRcIixcInJlYWxtXCIsXCJoYTFcIixcInJlZ2lzdGVyX2V4cGlyZXNcIixcInJlZ2lzdHJhcl9zZXJ2ZXJcIixcInNvY2tldHNcIixcInVzZV9wcmVsb2FkZWRfcm91dGVcIixcIndzX3NlcnZlcnNcIixcInZpYV9jb3JlX3ZhbHVlXCIsXCJ2aWFfaG9zdFwiXSxsPVtcInBhc3N3b3JkXCIsXCJyZWFsbVwiLFwiaGExXCIsXCJkaXNwbGF5X25hbWVcIl07Zm9yKGUgaW4gcyl0PXNbZV0sbj0tMSE9PWwuaW5kZXhPZih0KSxyW3RdPXt2YWx1ZTpcIlwiLHdyaXRhYmxlOm4sY29uZmlndXJhYmxlOiExfTtyZXR1cm4gci5yZWdpc3Rlcj17dmFsdWU6XCJcIix3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITF9LHJ9KCksci5jb25maWd1cmF0aW9uX2NoZWNrPXttYW5kYXRvcnk6e3VyaTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4vXnNpcDovaS50ZXN0KGUpfHwoZT1mLlNJUCtcIjpcIitlKSx0PXkucGFyc2UoZSksdCYmdC51c2VyP3Q6dm9pZCAwfX0sb3B0aW9uYWw6e2F1dGhvcml6YXRpb25fdXNlcjpmdW5jdGlvbihlKXtyZXR1cm4tMT09PVIucGFyc2UoJ1wiJytlKydcIicsXCJxdW90ZWRfc3RyaW5nXCIpP3ZvaWQgMDplfSxjb25uZWN0aW9uX3JlY292ZXJ5X21heF9pbnRlcnZhbDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gRS5pc0RlY2ltYWwoZSkmJih0PU51bWJlcihlKSx0PjApP3Q6dm9pZCAwfSxjb25uZWN0aW9uX3JlY292ZXJ5X21pbl9pbnRlcnZhbDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gRS5pc0RlY2ltYWwoZSkmJih0PU51bWJlcihlKSx0PjApP3Q6dm9pZCAwfSxjb250YWN0X3VyaTpmdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7dmFyIHQ9Ui5wYXJzZShlLFwiU0lQX1VSSVwiKTtpZigtMSE9PXQpcmV0dXJuIHR9fSxkaXNwbGF5X25hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuLTE9PT1SLnBhcnNlKCdcIicrZSsnXCInLFwiZGlzcGxheV9uYW1lXCIpP3ZvaWQgMDplfSxpbnN0YW5jZV9pZDpmdW5jdGlvbihlKXtyZXR1cm4vXnV1aWQ6L2kudGVzdChlKSYmKGU9ZS5zdWJzdHIoNSkpLC0xPT09Ui5wYXJzZShlLFwidXVpZFwiKT92b2lkIDA6ZX0sbm9fYW5zd2VyX3RpbWVvdXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIEUuaXNEZWNpbWFsKGUpJiYodD1OdW1iZXIoZSksdD4wKT90OnZvaWQgMH0sc2Vzc2lvbl90aW1lcnM6ZnVuY3Rpb24oZSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlP2U6dm9pZCAwfSxwYXNzd29yZDpmdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nKGUpfSxyZWFsbTpmdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nKGUpfSxoYTE6ZnVuY3Rpb24oZSl7cmV0dXJuIFN0cmluZyhlKX0scmVnaXN0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlP2U6dm9pZCAwfSxyZWdpc3Rlcl9leHBpcmVzOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBFLmlzRGVjaW1hbChlKSYmKHQ9TnVtYmVyKGUpLHQ+MCk/dDp2b2lkIDB9LHJlZ2lzdHJhcl9zZXJ2ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuL15zaXA6L2kudGVzdChlKXx8KGU9Zi5TSVArXCI6XCIrZSksdD15LnBhcnNlKGUpLHQ/dC51c2VyP3ZvaWQgMDp0OnZvaWQgMH0sc29ja2V0czpmdW5jdGlvbihlKXt2YXIgdCxuO2lmKFMuaXNTb2NrZXQoZSkpZT1be3NvY2tldDplfV07ZWxzZXtpZighQXJyYXkuaXNBcnJheShlKXx8IWUubGVuZ3RoKXJldHVybjtmb3Iobj1lLmxlbmd0aCx0PTA7bj50O3QrKylTLmlzU29ja2V0KGVbdF0pJiYoZVt0XT17c29ja2V0OmVbdF19KX1yZXR1cm4gZX0sdXNlX3ByZWxvYWRlZF9yb3V0ZTpmdW5jdGlvbihlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGU/ZTp2b2lkIDB9LHdzX3NlcnZlcnM6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPVtdO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKWU9W3t3c191cmk6ZX1dO2Vsc2V7aWYoIUFycmF5LmlzQXJyYXkoZSl8fCFlLmxlbmd0aClyZXR1cm47Zm9yKG49ZS5sZW5ndGgsdD0wO24+dDt0KyspXCJzdHJpbmdcIj09dHlwZW9mIGVbdF0mJihlW3RdPXt3c191cmk6ZVt0XX0pfWZvcihuPWUubGVuZ3RoLHQ9MDtuPnQ7dCsrKXRyeXtyLnB1c2goe3NvY2tldDpuZXcgQyhlW3RdLndzX3VyaSksd2VpZ2h0OmVbdF0ud2VpZ2h0fHwwfSl9Y2F0Y2gocyl7cmV0dXJuIHZvaWQgZChzKX1yZXR1cm4gcn19fX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9FeGNlcHRpb25zXCI6NSxcIi4vR3JhbW1hclwiOjYsXCIuL01lc3NhZ2VcIjo4LFwiLi9QYXJzZXJcIjoxMCxcIi4vUlRDU2Vzc2lvblwiOjExLFwiLi9SZWdpc3RyYXRvclwiOjE2LFwiLi9TSVBNZXNzYWdlXCI6MTgsXCIuL1NvY2tldFwiOjE5LFwiLi9UcmFuc2FjdGlvbnNcIjoyMSxcIi4vVHJhbnNwb3J0XCI6MjIsXCIuL1VSSVwiOjI0LFwiLi9VdGlsc1wiOjI1LFwiLi9XZWJTb2NrZXRJbnRlcmZhY2VcIjoyNixcIi4vc2FuaXR5Q2hlY2tcIjoyNyxkZWJ1ZzozMyxldmVudHM6MjgscnRjbmluamE6MzgsdXRpbDozMn1dLDI0OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlLHQsbixyLGwsaSl7dmFyIG8sdTtpZighbil0aHJvdyBuZXcgVHlwZUVycm9yKCdtaXNzaW5nIG9yIGludmFsaWQgXCJob3N0XCIgcGFyYW1ldGVyJyk7ZT1lfHxzLlNJUCx0aGlzLnBhcmFtZXRlcnM9e30sdGhpcy5oZWFkZXJzPXt9O2ZvcihvIGluIGwpdGhpcy5zZXRQYXJhbShvLGxbb10pO2Zvcih1IGluIGkpdGhpcy5zZXRIZWFkZXIodSxpW3VdKTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtzY2hlbWU6e2dldDpmdW5jdGlvbigpe3JldHVybiBlfSxzZXQ6ZnVuY3Rpb24odCl7ZT10LnRvTG93ZXJDYXNlKCl9fSx1c2VyOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sc2V0OmZ1bmN0aW9uKGUpe3Q9ZX19LGhvc3Q6e2dldDpmdW5jdGlvbigpe3JldHVybiBufSxzZXQ6ZnVuY3Rpb24oZSl7bj1lLnRvTG93ZXJDYXNlKCl9fSxwb3J0OntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcn0sc2V0OmZ1bmN0aW9uKGUpe3I9MD09PWU/ZTpwYXJzZUludChlLDEwKXx8bnVsbH19fSl9dC5leHBvcnRzPXI7dmFyIHM9ZShcIi4vQ29uc3RhbnRzXCIpLGw9ZShcIi4vVXRpbHNcIiksaT1lKFwiLi9HcmFtbWFyXCIpO3IucHJvdG90eXBlPXtzZXRQYXJhbTpmdW5jdGlvbihlLHQpe2UmJih0aGlzLnBhcmFtZXRlcnNbZS50b0xvd2VyQ2FzZSgpXT1cInVuZGVmaW5lZFwiPT10eXBlb2YgdHx8bnVsbD09PXQ/bnVsbDp0LnRvU3RyaW5nKCkpfSxnZXRQYXJhbTpmdW5jdGlvbihlKXtyZXR1cm4gZT90aGlzLnBhcmFtZXRlcnNbZS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9LGhhc1BhcmFtOmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMucGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShlLnRvTG93ZXJDYXNlKCkpJiYhMHx8ITE6dm9pZCAwfSxkZWxldGVQYXJhbTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZT1lLnRvTG93ZXJDYXNlKCksdGhpcy5wYXJhbWV0ZXJzLmhhc093blByb3BlcnR5KGUpPyh0PXRoaXMucGFyYW1ldGVyc1tlXSxkZWxldGUgdGhpcy5wYXJhbWV0ZXJzW2VdLHQpOnZvaWQgMH0sY2xlYXJQYXJhbXM6ZnVuY3Rpb24oKXt0aGlzLnBhcmFtZXRlcnM9e319LHNldEhlYWRlcjpmdW5jdGlvbihlLHQpe3RoaXMuaGVhZGVyc1tsLmhlYWRlcml6ZShlKV09QXJyYXkuaXNBcnJheSh0KT90Olt0XX0sZ2V0SGVhZGVyOmZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMuaGVhZGVyc1tsLmhlYWRlcml6ZShlKV06dm9pZCAwO1xufSxoYXNIZWFkZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy5oZWFkZXJzLmhhc093blByb3BlcnR5KGwuaGVhZGVyaXplKGUpKSYmITB8fCExOnZvaWQgMH0sZGVsZXRlSGVhZGVyOmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlPWwuaGVhZGVyaXplKGUpLHRoaXMuaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShlKT8odD10aGlzLmhlYWRlcnNbZV0sZGVsZXRlIHRoaXMuaGVhZGVyc1tlXSx0KTp2b2lkIDB9LGNsZWFySGVhZGVyczpmdW5jdGlvbigpe3RoaXMuaGVhZGVycz17fX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHIodGhpcy5zY2hlbWUsdGhpcy51c2VyLHRoaXMuaG9zdCx0aGlzLnBvcnQsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnBhcmFtZXRlcnMpKSxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuaGVhZGVycykpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgZSx0LG4scixzPVtdO3I9dGhpcy5zY2hlbWUrXCI6XCIsdGhpcy51c2VyJiYocis9bC5lc2NhcGVVc2VyKHRoaXMudXNlcikrXCJAXCIpLHIrPXRoaXMuaG9zdCwodGhpcy5wb3J0fHwwPT09dGhpcy5wb3J0KSYmKHIrPVwiOlwiK3RoaXMucG9ydCk7Zm9yKHQgaW4gdGhpcy5wYXJhbWV0ZXJzKXIrPVwiO1wiK3QsbnVsbCE9PXRoaXMucGFyYW1ldGVyc1t0XSYmKHIrPVwiPVwiK3RoaXMucGFyYW1ldGVyc1t0XSk7Zm9yKGUgaW4gdGhpcy5oZWFkZXJzKWZvcihuPTA7bjx0aGlzLmhlYWRlcnNbZV0ubGVuZ3RoO24rKylzLnB1c2goZStcIj1cIit0aGlzLmhlYWRlcnNbZV1bbl0pO3JldHVybiBzLmxlbmd0aD4wJiYocis9XCI/XCIrcy5qb2luKFwiJlwiKSkscn0sdG9Bb3I6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHQ9dGhpcy5zY2hlbWUrXCI6XCIsdGhpcy51c2VyJiYodCs9bC5lc2NhcGVVc2VyKHRoaXMudXNlcikrXCJAXCIpLHQrPXRoaXMuaG9zdCxlJiYodGhpcy5wb3J0fHwwPT09dGhpcy5wb3J0KSYmKHQrPVwiOlwiK3RoaXMucG9ydCksdH19LHIucGFyc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9aS5wYXJzZShlLFwiU0lQX1VSSVwiKSwtMSE9PWU/ZTp2b2lkIDB9fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL0dyYW1tYXJcIjo2LFwiLi9VdGlsc1wiOjI1fV0sMjU6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj17fTt0LmV4cG9ydHM9cjt2YXIgcz1lKFwiLi9Db25zdGFudHNcIiksbD1lKFwiLi9VUklcIiksaT1lKFwiLi9HcmFtbWFyXCIpO3Iuc3RyX3V0ZjhfbGVuZ3RoPWZ1bmN0aW9uKGUpe3JldHVybiB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZSkpLmxlbmd0aH0sci5pc0Z1bmN0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lP1wiW29iamVjdCBGdW5jdGlvbl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKTohMX0sci5pc1N0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZT9cIltvYmplY3QgU3RyaW5nXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpOiExfSxyLmlzRGVjaW1hbD1mdW5jdGlvbihlKXtyZXR1cm4haXNOYU4oZSkmJnBhcnNlRmxvYXQoZSk9PT1wYXJzZUludChlLDEwKX0sci5pc0VtcHR5PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZXx8XCJcIj09PWV8fHZvaWQgMD09PWV8fEFycmF5LmlzQXJyYXkoZSkmJjA9PT1lLmxlbmd0aHx8XCJudW1iZXJcIj09dHlwZW9mIGUmJmlzTmFOKGUpPyEwOnZvaWQgMH0sci5oYXNNZXRob2RzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTE7dD1hcmd1bWVudHNbbisrXTspaWYodGhpcy5pc0Z1bmN0aW9uKGVbdF0pKXJldHVybiExO3JldHVybiEwfSxyLmNyZWF0ZVJhbmRvbVRva2VuPWZ1bmN0aW9uKGUsdCl7dmFyIG4scixzPVwiXCI7Zm9yKHQ9dHx8MzIsbj0wO2U+bjtuKyspcj1NYXRoLnJhbmRvbSgpKnR8MCxzKz1yLnRvU3RyaW5nKHQpO3JldHVybiBzfSxyLm5ld1RhZz1mdW5jdGlvbigpe3JldHVybiByLmNyZWF0ZVJhbmRvbVRva2VuKDEwKX0sci5uZXdVVUlEPWZ1bmN0aW9uKCl7dmFyIGU9XCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csZnVuY3Rpb24oZSl7dmFyIHQ9MTYqTWF0aC5yYW5kb20oKXwwLG49XCJ4XCI9PT1lP3Q6MyZ0fDg7cmV0dXJuIG4udG9TdHJpbmcoMTYpfSk7cmV0dXJuIGV9LHIuaG9zdFR5cGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/KGU9aS5wYXJzZShlLFwiaG9zdFwiKSwtMSE9PWU/ZS5ob3N0X3R5cGU6dm9pZCAwKTp2b2lkIDB9LHIubm9ybWFsaXplVGFyZ2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvLHU7aWYoZSl7aWYoZSBpbnN0YW5jZW9mIGwpcmV0dXJuIGU7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe3N3aXRjaChpPWUuc3BsaXQoXCJAXCIpLGkubGVuZ3RoKXtjYXNlIDE6aWYoIXQpcmV0dXJuO289ZSx1PXQ7YnJlYWs7Y2FzZSAyOm89aVswXSx1PWlbMV07YnJlYWs7ZGVmYXVsdDpvPWkuc2xpY2UoMCxpLmxlbmd0aC0xKS5qb2luKFwiQFwiKSx1PWlbaS5sZW5ndGgtMV19cmV0dXJuIG89by5yZXBsYWNlKC9eKHNpcHM/fHRlbCk6L2ksXCJcIiksL15bXFwtXFwuXFwoXFwpXSpcXCs/WzAtOVxcLVxcLlxcKFxcKV0rJC8udGVzdChvKSYmKG89by5yZXBsYWNlKC9bXFwtXFwuXFwoXFwpXS9nLFwiXCIpKSxlPXMuU0lQK1wiOlwiK3IuZXNjYXBlVXNlcihvKStcIkBcIit1LChuPWwucGFyc2UoZSkpP246dm9pZCAwfX1lbHNlO30sci5lc2NhcGVVc2VyPWZ1bmN0aW9uKGUpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KGUpKS5yZXBsYWNlKC8lM0EvZ2ksXCI6XCIpLnJlcGxhY2UoLyUyQi9naSxcIitcIikucmVwbGFjZSgvJTNGL2dpLFwiP1wiKS5yZXBsYWNlKC8lMkYvZ2ksXCIvXCIpfSxyLmhlYWRlcml6ZT1mdW5jdGlvbihlKXt2YXIgdCxuPXtcIkNhbGwtSWRcIjpcIkNhbGwtSURcIixDc2VxOlwiQ1NlcVwiLFwiV3d3LUF1dGhlbnRpY2F0ZVwiOlwiV1dXLUF1dGhlbnRpY2F0ZVwifSxyPWUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9fL2csXCItXCIpLnNwbGl0KFwiLVwiKSxzPVwiXCIsbD1yLmxlbmd0aDtmb3IodD0wO2w+dDt0KyspMCE9PXQmJihzKz1cIi1cIikscys9clt0XS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStyW3RdLnN1YnN0cmluZygxKTtyZXR1cm4gbltzXSYmKHM9bltzXSksc30sci5zaXBFcnJvckNhdXNlPWZ1bmN0aW9uKGUpe3ZhciB0O2Zvcih0IGluIHMuU0lQX0VSUk9SX0NBVVNFUylpZigtMSE9PXMuU0lQX0VSUk9SX0NBVVNFU1t0XS5pbmRleE9mKGUpKXJldHVybiBzLmNhdXNlc1t0XTtyZXR1cm4gcy5jYXVzZXMuU0lQX0ZBSUxVUkVfQ09ERX0sci5nZXRSYW5kb21UZXN0TmV0SVA9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoodC1lKzEpK2UpfXJldHVyblwiMTkyLjAuMi5cIitlKDEsMjU0KX0sci5jYWxjdWxhdGVNRDU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3JldHVybiBlPDx0fGU+Pj4zMi10fWZ1bmN0aW9uIG4oZSx0KXt2YXIgbixyLHMsbCxpO3JldHVybiBzPTIxNDc0ODM2NDgmZSxsPTIxNDc0ODM2NDgmdCxuPTEwNzM3NDE4MjQmZSxyPTEwNzM3NDE4MjQmdCxpPSgxMDczNzQxODIzJmUpKygxMDczNzQxODIzJnQpLG4mcj8yMTQ3NDgzNjQ4Xmlec15sOm58cj8xMDczNzQxODI0Jmk/MzIyMTIyNTQ3Ml5pXnNebDoxMDczNzQxODI0Xmlec15sOmlec15sfWZ1bmN0aW9uIHIoZSx0LG4pe3JldHVybiBlJnR8fmUmbn1mdW5jdGlvbiBzKGUsdCxuKXtyZXR1cm4gZSZufHQmfm59ZnVuY3Rpb24gbChlLHQsbil7cmV0dXJuIGVedF5ufWZ1bmN0aW9uIGkoZSx0LG4pe3JldHVybiB0XihlfH5uKX1mdW5jdGlvbiBvKGUscyxsLGksbyx1LGEpe3JldHVybiBlPW4oZSxuKG4ocihzLGwsaSksbyksYSkpLG4odChlLHUpLHMpfWZ1bmN0aW9uIHUoZSxyLGwsaSxvLHUsYSl7cmV0dXJuIGU9bihlLG4obihzKHIsbCxpKSxvKSxhKSksbih0KGUsdSkscil9ZnVuY3Rpb24gYShlLHIscyxpLG8sdSxhKXtyZXR1cm4gZT1uKGUsbihuKGwocixzLGkpLG8pLGEpKSxuKHQoZSx1KSxyKX1mdW5jdGlvbiBjKGUscixzLGwsbyx1LGEpe3JldHVybiBlPW4oZSxuKG4oaShyLHMsbCksbyksYSkpLG4odChlLHUpLHIpfWZ1bmN0aW9uIGgoZSl7Zm9yKHZhciB0LG49ZS5sZW5ndGgscj1uKzgscz0oci1yJTY0KS82NCxsPTE2KihzKzEpLGk9bmV3IEFycmF5KGwtMSksbz0wLHU9MDtuPnU7KXQ9KHUtdSU0KS80LG89dSU0KjgsaVt0XT1pW3RdfGUuY2hhckNvZGVBdCh1KTw8byx1Kys7cmV0dXJuIHQ9KHUtdSU0KS80LG89dSU0KjgsaVt0XT1pW3RdfDEyODw8byxpW2wtMl09bjw8MyxpW2wtMV09bj4+PjI5LGl9ZnVuY3Rpb24gZChlKXt2YXIgdCxuLHI9XCJcIixzPVwiXCI7Zm9yKG49MDszPj1uO24rKyl0PWU+Pj44Km4mMjU1LHM9XCIwXCIrdC50b1N0cmluZygxNikscis9cy5zdWJzdHIocy5sZW5ndGgtMiwyKTtyZXR1cm4gcn1mdW5jdGlvbiBwKGUpe2U9ZS5yZXBsYWNlKC9cXHJcXG4vZyxcIlxcblwiKTtmb3IodmFyIHQ9XCJcIixuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciByPWUuY2hhckNvZGVBdChuKTsxMjg+cj90Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHIpOnI+MTI3JiYyMDQ4PnI/KHQrPVN0cmluZy5mcm9tQ2hhckNvZGUocj4+NnwxOTIpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUoNjMmcnwxMjgpKToodCs9U3RyaW5nLmZyb21DaGFyQ29kZShyPj4xMnwyMjQpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUocj4+NiY2M3wxMjgpLHQrPVN0cmluZy5mcm9tQ2hhckNvZGUoNjMmcnwxMjgpKX1yZXR1cm4gdH12YXIgZixtLGcsVCxfLHYsQyxTLEUsQT1bXSx5PTcsUj0xMixiPTE3LEk9MjIsdz01LE49OSxEPTE0LE89MjAseD00LFU9MTEsTT0xNixQPTIzLHE9NixMPTEwLGs9MTUsSD0yMTtmb3IoZT1wKGUpLEE9aChlKSx2PTE3MzI1ODQxOTMsQz00MDIzMjMzNDE3LFM9MjU2MjM4MzEwMixFPTI3MTczMzg3OCxmPTA7ZjxBLmxlbmd0aDtmKz0xNiltPXYsZz1DLFQ9UyxfPUUsdj1vKHYsQyxTLEUsQVtmKzBdLHksMzYxNDA5MDM2MCksRT1vKEUsdixDLFMsQVtmKzFdLFIsMzkwNTQwMjcxMCksUz1vKFMsRSx2LEMsQVtmKzJdLGIsNjA2MTA1ODE5KSxDPW8oQyxTLEUsdixBW2YrM10sSSwzMjUwNDQxOTY2KSx2PW8odixDLFMsRSxBW2YrNF0seSw0MTE4NTQ4Mzk5KSxFPW8oRSx2LEMsUyxBW2YrNV0sUiwxMjAwMDgwNDI2KSxTPW8oUyxFLHYsQyxBW2YrNl0sYiwyODIxNzM1OTU1KSxDPW8oQyxTLEUsdixBW2YrN10sSSw0MjQ5MjYxMzEzKSx2PW8odixDLFMsRSxBW2YrOF0seSwxNzcwMDM1NDE2KSxFPW8oRSx2LEMsUyxBW2YrOV0sUiwyMzM2NTUyODc5KSxTPW8oUyxFLHYsQyxBW2YrMTBdLGIsNDI5NDkyNTIzMyksQz1vKEMsUyxFLHYsQVtmKzExXSxJLDIzMDQ1NjMxMzQpLHY9byh2LEMsUyxFLEFbZisxMl0seSwxODA0NjAzNjgyKSxFPW8oRSx2LEMsUyxBW2YrMTNdLFIsNDI1NDYyNjE5NSksUz1vKFMsRSx2LEMsQVtmKzE0XSxiLDI3OTI5NjUwMDYpLEM9byhDLFMsRSx2LEFbZisxNV0sSSwxMjM2NTM1MzI5KSx2PXUodixDLFMsRSxBW2YrMV0sdyw0MTI5MTcwNzg2KSxFPXUoRSx2LEMsUyxBW2YrNl0sTiwzMjI1NDY1NjY0KSxTPXUoUyxFLHYsQyxBW2YrMTFdLEQsNjQzNzE3NzEzKSxDPXUoQyxTLEUsdixBW2YrMF0sTywzOTIxMDY5OTk0KSx2PXUodixDLFMsRSxBW2YrNV0sdywzNTkzNDA4NjA1KSxFPXUoRSx2LEMsUyxBW2YrMTBdLE4sMzgwMTYwODMpLFM9dShTLEUsdixDLEFbZisxNV0sRCwzNjM0NDg4OTYxKSxDPXUoQyxTLEUsdixBW2YrNF0sTywzODg5NDI5NDQ4KSx2PXUodixDLFMsRSxBW2YrOV0sdyw1Njg0NDY0MzgpLEU9dShFLHYsQyxTLEFbZisxNF0sTiwzMjc1MTYzNjA2KSxTPXUoUyxFLHYsQyxBW2YrM10sRCw0MTA3NjAzMzM1KSxDPXUoQyxTLEUsdixBW2YrOF0sTywxMTYzNTMxNTAxKSx2PXUodixDLFMsRSxBW2YrMTNdLHcsMjg1MDI4NTgyOSksRT11KEUsdixDLFMsQVtmKzJdLE4sNDI0MzU2MzUxMiksUz11KFMsRSx2LEMsQVtmKzddLEQsMTczNTMyODQ3MyksQz11KEMsUyxFLHYsQVtmKzEyXSxPLDIzNjgzNTk1NjIpLHY9YSh2LEMsUyxFLEFbZis1XSx4LDQyOTQ1ODg3MzgpLEU9YShFLHYsQyxTLEFbZis4XSxVLDIyNzIzOTI4MzMpLFM9YShTLEUsdixDLEFbZisxMV0sTSwxODM5MDMwNTYyKSxDPWEoQyxTLEUsdixBW2YrMTRdLFAsNDI1OTY1Nzc0MCksdj1hKHYsQyxTLEUsQVtmKzFdLHgsMjc2Mzk3NTIzNiksRT1hKEUsdixDLFMsQVtmKzRdLFUsMTI3Mjg5MzM1MyksUz1hKFMsRSx2LEMsQVtmKzddLE0sNDEzOTQ2OTY2NCksQz1hKEMsUyxFLHYsQVtmKzEwXSxQLDMyMDAyMzY2NTYpLHY9YSh2LEMsUyxFLEFbZisxM10seCw2ODEyNzkxNzQpLEU9YShFLHYsQyxTLEFbZiswXSxVLDM5MzY0MzAwNzQpLFM9YShTLEUsdixDLEFbZiszXSxNLDM1NzI0NDUzMTcpLEM9YShDLFMsRSx2LEFbZis2XSxQLDc2MDI5MTg5KSx2PWEodixDLFMsRSxBW2YrOV0seCwzNjU0NjAyODA5KSxFPWEoRSx2LEMsUyxBW2YrMTJdLFUsMzg3MzE1MTQ2MSksUz1hKFMsRSx2LEMsQVtmKzE1XSxNLDUzMDc0MjUyMCksQz1hKEMsUyxFLHYsQVtmKzJdLFAsMzI5OTYyODY0NSksdj1jKHYsQyxTLEUsQVtmKzBdLHEsNDA5NjMzNjQ1MiksRT1jKEUsdixDLFMsQVtmKzddLEwsMTEyNjg5MTQxNSksUz1jKFMsRSx2LEMsQVtmKzE0XSxrLDI4Nzg2MTIzOTEpLEM9YyhDLFMsRSx2LEFbZis1XSxILDQyMzc1MzMyNDEpLHY9Yyh2LEMsUyxFLEFbZisxMl0scSwxNzAwNDg1NTcxKSxFPWMoRSx2LEMsUyxBW2YrM10sTCwyMzk5OTgwNjkwKSxTPWMoUyxFLHYsQyxBW2YrMTBdLGssNDI5MzkxNTc3MyksQz1jKEMsUyxFLHYsQVtmKzFdLEgsMjI0MDA0NDQ5Nyksdj1jKHYsQyxTLEUsQVtmKzhdLHEsMTg3MzMxMzM1OSksRT1jKEUsdixDLFMsQVtmKzE1XSxMLDQyNjQzNTU1NTIpLFM9YyhTLEUsdixDLEFbZis2XSxrLDI3MzQ3Njg5MTYpLEM9YyhDLFMsRSx2LEFbZisxM10sSCwxMzA5MTUxNjQ5KSx2PWModixDLFMsRSxBW2YrNF0scSw0MTQ5NDQ0MjI2KSxFPWMoRSx2LEMsUyxBW2YrMTFdLEwsMzE3NDc1NjkxNyksUz1jKFMsRSx2LEMsQVtmKzJdLGssNzE4Nzg3MjU5KSxDPWMoQyxTLEUsdixBW2YrOV0sSCwzOTUxNDgxNzQ1KSx2PW4odixtKSxDPW4oQyxnKSxTPW4oUyxUKSxFPW4oRSxfKTt2YXIgRj1kKHYpK2QoQykrZChTKStkKEUpO3JldHVybiBGLnRvTG93ZXJDYXNlKCl9fSx7XCIuL0NvbnN0YW50c1wiOjEsXCIuL0dyYW1tYXJcIjo2LFwiLi9VUklcIjoyNH1dLDI2OltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcihlKXthKFwibmV3KClcIik7dmFyIHQ9bnVsbCxuPW51bGw7dGhpcy53cz1udWxsLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3ZpYV90cmFuc3BvcnQ6e2dldDpmdW5jdGlvbigpe3JldHVybiBufSxzZXQ6ZnVuY3Rpb24oZSl7bj1lLnRvVXBwZXJDYXNlKCl9fSxzaXBfdXJpOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdH19LHVybDp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGV9fX0pO3ZhciByPXUucGFyc2UoZSxcImFic29sdXRlVVJJXCIpO2lmKC0xPT09cil0aHJvdyBjKFwiaW52YWxpZCBXZWJTb2NrZXQgVVJJOiBcIitlKSxuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhcmd1bWVudDogXCIrZSk7aWYoXCJ3c3NcIiE9PXIuc2NoZW1lJiZcIndzXCIhPT1yLnNjaGVtZSl0aHJvdyBjKFwiaW52YWxpZCBXZWJTb2NrZXQgVVJJIHNjaGVtZTogXCIrci5zY2hlbWUpLG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50OiBcIitlKTt0PVwic2lwOlwiK3IuaG9zdCsoci5wb3J0P1wiOlwiK3IucG9ydDpcIlwiKStcIjt0cmFuc3BvcnQ9d3NcIix0aGlzLnZpYV90cmFuc3BvcnQ9ci5zY2hlbWV9ZnVuY3Rpb24gcygpe2EoXCJXZWJTb2NrZXQgXCIrdGhpcy51cmwrXCIgY29ubmVjdGVkXCIpLHRoaXMub25jb25uZWN0KCl9ZnVuY3Rpb24gbChlKXthKFwiV2ViU29ja2V0IFwiK3RoaXMudXJsK1wiIGNsb3NlZFwiKSxlLndhc0NsZWFuPT09ITEmJmEoXCJXZWJTb2NrZXQgYWJydXB0IGRpc2Nvbm5lY3Rpb25cIiksdGhpcy5vbmRpc2Nvbm5lY3QoZS53YXNDbGVhbixlLmNvZGUsZS5yZWFzb24pfWZ1bmN0aW9uIGkoZSl7YShcInJlY2VpdmVkIFdlYlNvY2tldCBtZXNzYWdlXCIpLHRoaXMub25kYXRhKGUuZGF0YSl9ZnVuY3Rpb24gbyhlKXtjKFwiV2ViU29ja2V0IFwiK3RoaXMudXJsK1wiIGVycm9yOiBcIitlKX10LmV4cG9ydHM9cjt2YXIgdT1lKFwiLi9HcmFtbWFyXCIpLGE9ZShcImRlYnVnXCIpKFwiSnNTSVA6V2ViU29ja2V0SW50ZXJmYWNlXCIpLGM9ZShcImRlYnVnXCIpKFwiSnNTSVA6RVJST1I6V2ViU29ja2V0SW50ZXJmYWNlXCIpO3IucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oKXtpZihhKFwiY29ubmVjdCgpXCIpLHRoaXMuaXNDb25uZWN0ZWQoKSlyZXR1cm4gdm9pZCBhKFwiV2ViU29ja2V0IFwiK3RoaXMudXJsK1wiIGlzIGFscmVhZHkgY29ubmVjdGVkXCIpO2lmKHRoaXMuaXNDb25uZWN0aW5nKCkpcmV0dXJuIHZvaWQgYShcIldlYlNvY2tldCBcIit0aGlzLnVybCtcIiBpcyBjb25uZWN0aW5nXCIpO3RoaXMud3MmJnRoaXMud3MuY2xvc2UoKSxhKFwiY29ubmVjdGluZyB0byBXZWJTb2NrZXQgXCIrdGhpcy51cmwpO3RyeXt0aGlzLndzPW5ldyBXZWJTb2NrZXQodGhpcy51cmwsXCJzaXBcIiksdGhpcy53cy5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIix0aGlzLndzLm9ub3Blbj1zLmJpbmQodGhpcyksdGhpcy53cy5vbmNsb3NlPWwuYmluZCh0aGlzKSx0aGlzLndzLm9ubWVzc2FnZT1pLmJpbmQodGhpcyksdGhpcy53cy5vbmVycm9yPW8uYmluZCh0aGlzKX1jYXRjaChlKXtvLmNhbGwodGhpcyxlKX19LHIucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXthKFwiZGlzY29ubmVjdCgpXCIpLHRoaXMud3MmJih0aGlzLndzLmNsb3NlKCksdGhpcy53cz1udWxsKX0sci5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXtyZXR1cm4gYShcInNlbmQoKVwiKSx0aGlzLmlzQ29ubmVjdGVkKCk/KHRoaXMud3Muc2VuZChlKSwhMCk6KGMoXCJ1bmFibGUgdG8gc2VuZCBtZXNzYWdlLCBXZWJTb2NrZXQgaXMgbm90IG9wZW5cIiksITEpfSxyLnByb3RvdHlwZS5pc0Nvbm5lY3RlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLndzJiZ0aGlzLndzLnJlYWR5U3RhdGU9PT10aGlzLndzLk9QRU59LHIucHJvdG90eXBlLmlzQ29ubmVjdGluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLndzJiZ0aGlzLndzLnJlYWR5U3RhdGU9PT10aGlzLndzLkNPTk5FQ1RJTkd9fSx7XCIuL0dyYW1tYXJcIjo2LGRlYnVnOjMzfV0sMjc6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKGUsdCxuKXt2YXIgcixzO2ZvcihkPWUscD10LGY9bixyPVMubGVuZ3RoO3ItLTspaWYocz1TW3JdKGQpLHM9PT0hMSlyZXR1cm4hMTtpZihkIGluc3RhbmNlb2YgVC5JbmNvbWluZ1JlcXVlc3Qpe2ZvcihyPXYubGVuZ3RoO3ItLTspaWYocz12W3JdKGQpLHM9PT0hMSlyZXR1cm4hMX1lbHNlIGlmKGQgaW5zdGFuY2VvZiBULkluY29taW5nUmVzcG9uc2UpZm9yKHI9Qy5sZW5ndGg7ci0tOylpZihzPUNbcl0oZCkscz09PSExKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHMoKXtyZXR1cm5cInNpcFwiIT09ZC5zKFwidG9cIikudXJpLnNjaGVtZT8oaCg0MTYpLCExKTp2b2lkIDB9ZnVuY3Rpb24gbCgpe3JldHVybiBkLnRvX3RhZ3x8ZC5jYWxsX2lkLnN1YnN0cigwLDUpIT09cC5jb25maWd1cmF0aW9uLmpzc2lwX2lkP3ZvaWQgMDooaCg0ODIpLCExKX1mdW5jdGlvbiBpKCl7dmFyIGU9Xy5zdHJfdXRmOF9sZW5ndGgoZC5ib2R5KSx0PWQuZ2V0SGVhZGVyKFwiY29udGVudC1sZW5ndGhcIik7cmV0dXJuIHQ+ZT8oaCg0MDApLCExKTp2b2lkIDB9ZnVuY3Rpb24gbygpe3ZhciBlLHQsbj1kLmZyb21fdGFnLHI9ZC5jYWxsX2lkLHM9ZC5jc2VxO2lmKCFkLnRvX3RhZylpZihkLm1ldGhvZD09PWcuSU5WSVRFKXtpZihwLnRyYW5zYWN0aW9ucy5pc3RbZC52aWFfYnJhbmNoXSlyZXR1cm4hMTtmb3IodCBpbiBwLnRyYW5zYWN0aW9ucy5pc3QpaWYoZT1wLnRyYW5zYWN0aW9ucy5pc3RbdF0sZS5yZXF1ZXN0LmZyb21fdGFnPT09biYmZS5yZXF1ZXN0LmNhbGxfaWQ9PT1yJiZlLnJlcXVlc3QuY3NlcT09PXMpcmV0dXJuIGgoNDgyKSwhMX1lbHNle2lmKHAudHJhbnNhY3Rpb25zLm5pc3RbZC52aWFfYnJhbmNoXSlyZXR1cm4hMTtmb3IodCBpbiBwLnRyYW5zYWN0aW9ucy5uaXN0KWlmKGU9cC50cmFuc2FjdGlvbnMubmlzdFt0XSxlLnJlcXVlc3QuZnJvbV90YWc9PT1uJiZlLnJlcXVlc3QuY2FsbF9pZD09PXImJmUucmVxdWVzdC5jc2VxPT09cylyZXR1cm4gaCg0ODIpLCExfX1mdW5jdGlvbiB1KCl7cmV0dXJuIGQuZ2V0SGVhZGVycyhcInZpYVwiKS5sZW5ndGg+MT8obShcIm1vcmUgdGhhbiBvbmUgVmlhIGhlYWRlciBmaWVsZCBwcmVzZW50IGluIHRoZSByZXNwb25zZSwgZHJvcHBpbmcgdGhlIHJlc3BvbnNlXCIpLCExKTp2b2lkIDB9ZnVuY3Rpb24gYSgpe3ZhciBlPV8uc3RyX3V0ZjhfbGVuZ3RoKGQuYm9keSksdD1kLmdldEhlYWRlcihcImNvbnRlbnQtbGVuZ3RoXCIpO3JldHVybiB0PmU/KG0oXCJtZXNzYWdlIGJvZHkgbGVuZ3RoIGlzIGxvd2VyIHRoYW4gdGhlIHZhbHVlIGluIENvbnRlbnQtTGVuZ3RoIGhlYWRlciBmaWVsZCwgZHJvcHBpbmcgdGhlIHJlc3BvbnNlXCIpLCExKTp2b2lkIDB9ZnVuY3Rpb24gYygpe2Zvcih2YXIgZT1bXCJmcm9tXCIsXCJ0b1wiLFwiY2FsbF9pZFwiLFwiY3NlcVwiLFwidmlhXCJdLHQ9ZS5sZW5ndGg7dC0tOylpZighZC5oYXNIZWFkZXIoZVt0XSkpcmV0dXJuIG0oXCJtaXNzaW5nIG1hbmRhdG9yeSBoZWFkZXIgZmllbGQgOiBcIitlW3RdK1wiLCBkcm9wcGluZyB0aGUgcmVzcG9uc2VcIiksITF9ZnVuY3Rpb24gaChlKXt2YXIgdCxuPVwiU0lQLzIuMCBcIitlK1wiIFwiK2cuUkVBU09OX1BIUkFTRVtlXStcIlxcclxcblwiLHI9ZC5nZXRIZWFkZXJzKFwidmlhXCIpLHM9ci5sZW5ndGgsbD0wO2ZvcihsO3M+bDtsKyspbis9XCJWaWE6IFwiK3JbbF0rXCJcXHJcXG5cIjt0PWQuZ2V0SGVhZGVyKFwiVG9cIiksZC50b190YWd8fCh0Kz1cIjt0YWc9XCIrXy5uZXdUYWcoKSksbis9XCJUbzogXCIrdCtcIlxcclxcblwiLG4rPVwiRnJvbTogXCIrZC5nZXRIZWFkZXIoXCJGcm9tXCIpK1wiXFxyXFxuXCIsbis9XCJDYWxsLUlEOiBcIitkLmNhbGxfaWQrXCJcXHJcXG5cIixuKz1cIkNTZXE6IFwiK2QuY3NlcStcIiBcIitkLm1ldGhvZCtcIlxcclxcblwiLG4rPVwiXFxyXFxuXCIsZi5zZW5kKG4pfXQuZXhwb3J0cz1yO3ZhciBkLHAsZixtPWUoXCJkZWJ1Z1wiKShcIkpzU0lQOnNhbml0eUNoZWNrXCIpLGc9ZShcIi4vQ29uc3RhbnRzXCIpLFQ9ZShcIi4vU0lQTWVzc2FnZVwiKSxfPWUoXCIuL1V0aWxzXCIpLHY9W10sQz1bXSxTPVtdO3YucHVzaChzKSx2LnB1c2gobCksdi5wdXNoKGkpLHYucHVzaChvKSxDLnB1c2godSksQy5wdXNoKGEpLFMucHVzaChjKX0se1wiLi9Db25zdGFudHNcIjoxLFwiLi9TSVBNZXNzYWdlXCI6MTgsXCIuL1V0aWxzXCI6MjUsZGVidWc6MzN9XSwyODpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoKXt0aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fSx0aGlzLl9tYXhMaXN0ZW5lcnM9dGhpcy5fbWF4TGlzdGVuZXJzfHx2b2lkIDB9ZnVuY3Rpb24gcyhlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIGwoZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9ZnVuY3Rpb24gaShlKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZSYmbnVsbCE9PWV9ZnVuY3Rpb24gbyhlKXtyZXR1cm4gdm9pZCAwPT09ZX10LmV4cG9ydHM9cixyLkV2ZW50RW1pdHRlcj1yLHIucHJvdG90eXBlLl9ldmVudHM9dm9pZCAwLHIucHJvdG90eXBlLl9tYXhMaXN0ZW5lcnM9dm9pZCAwLHIuZGVmYXVsdE1heExpc3RlbmVycz0xMCxyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7aWYoIWwoZSl8fDA+ZXx8aXNOYU4oZSkpdGhyb3cgVHlwZUVycm9yKFwibiBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyXCIpO3JldHVybiB0aGlzLl9tYXhMaXN0ZW5lcnM9ZSx0aGlzfSxyLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUpe3ZhciB0LG4scixsLHUsYTtpZih0aGlzLl9ldmVudHN8fCh0aGlzLl9ldmVudHM9e30pLFwiZXJyb3JcIj09PWUmJighdGhpcy5fZXZlbnRzLmVycm9yfHxpKHRoaXMuX2V2ZW50cy5lcnJvcikmJiF0aGlzLl9ldmVudHMuZXJyb3IubGVuZ3RoKSl7aWYodD1hcmd1bWVudHNbMV0sdCBpbnN0YW5jZW9mIEVycm9yKXRocm93IHQ7dGhyb3cgVHlwZUVycm9yKCdVbmNhdWdodCwgdW5zcGVjaWZpZWQgXCJlcnJvclwiIGV2ZW50LicpfWlmKG49dGhpcy5fZXZlbnRzW2VdLG8obikpcmV0dXJuITE7aWYocyhuKSlzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAxOm4uY2FsbCh0aGlzKTticmVhaztjYXNlIDI6bi5jYWxsKHRoaXMsYXJndW1lbnRzWzFdKTticmVhaztjYXNlIDM6bi5jYWxsKHRoaXMsYXJndW1lbnRzWzFdLGFyZ3VtZW50c1syXSk7YnJlYWs7ZGVmYXVsdDpsPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxuLmFwcGx5KHRoaXMsbCl9ZWxzZSBpZihpKG4pKWZvcihsPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxhPW4uc2xpY2UoKSxyPWEubGVuZ3RoLHU9MDtyPnU7dSsrKWFbdV0uYXBwbHkodGhpcyxsKTtyZXR1cm4hMH0sci5wcm90b3R5cGUuYWRkTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbjtpZighcyh0KSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSksdGhpcy5fZXZlbnRzLm5ld0xpc3RlbmVyJiZ0aGlzLmVtaXQoXCJuZXdMaXN0ZW5lclwiLGUscyh0Lmxpc3RlbmVyKT90Lmxpc3RlbmVyOnQpLHRoaXMuX2V2ZW50c1tlXT9pKHRoaXMuX2V2ZW50c1tlXSk/dGhpcy5fZXZlbnRzW2VdLnB1c2godCk6dGhpcy5fZXZlbnRzW2VdPVt0aGlzLl9ldmVudHNbZV0sdF06dGhpcy5fZXZlbnRzW2VdPXQsaSh0aGlzLl9ldmVudHNbZV0pJiYhdGhpcy5fZXZlbnRzW2VdLndhcm5lZCYmKG49byh0aGlzLl9tYXhMaXN0ZW5lcnMpP3IuZGVmYXVsdE1heExpc3RlbmVyczp0aGlzLl9tYXhMaXN0ZW5lcnMsbiYmbj4wJiZ0aGlzLl9ldmVudHNbZV0ubGVuZ3RoPm4mJih0aGlzLl9ldmVudHNbZV0ud2FybmVkPSEwLGNvbnNvbGUuZXJyb3IoXCIobm9kZSkgd2FybmluZzogcG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAlZCBsaXN0ZW5lcnMgYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvIGluY3JlYXNlIGxpbWl0LlwiLHRoaXMuX2V2ZW50c1tlXS5sZW5ndGgpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUudHJhY2UmJmNvbnNvbGUudHJhY2UoKSkpLHRoaXN9LHIucHJvdG90eXBlLm9uPXIucHJvdG90eXBlLmFkZExpc3RlbmVyLHIucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcihlLG4pLHJ8fChyPSEwLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1pZighcyh0KSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIHI9ITE7cmV0dXJuIG4ubGlzdGVuZXI9dCx0aGlzLm9uKGUsbiksdGhpc30sci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbixyLGwsbztpZighcyh0KSl0aHJvdyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7aWYoIXRoaXMuX2V2ZW50c3x8IXRoaXMuX2V2ZW50c1tlXSlyZXR1cm4gdGhpcztpZihuPXRoaXMuX2V2ZW50c1tlXSxsPW4ubGVuZ3RoLHI9LTEsbj09PXR8fHMobi5saXN0ZW5lcikmJm4ubGlzdGVuZXI9PT10KWRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpcy5fZXZlbnRzLnJlbW92ZUxpc3RlbmVyJiZ0aGlzLmVtaXQoXCJyZW1vdmVMaXN0ZW5lclwiLGUsdCk7ZWxzZSBpZihpKG4pKXtmb3Iobz1sO28tLSA+MDspaWYobltvXT09PXR8fG5bb10ubGlzdGVuZXImJm5bb10ubGlzdGVuZXI9PT10KXtyPW87YnJlYWt9aWYoMD5yKXJldHVybiB0aGlzOzE9PT1uLmxlbmd0aD8obi5sZW5ndGg9MCxkZWxldGUgdGhpcy5fZXZlbnRzW2VdKTpuLnNwbGljZShyLDEpLHRoaXMuX2V2ZW50cy5yZW1vdmVMaXN0ZW5lciYmdGhpcy5lbWl0KFwicmVtb3ZlTGlzdGVuZXJcIixlLHQpfXJldHVybiB0aGlzfSxyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQsbjtpZighdGhpcy5fZXZlbnRzKXJldHVybiB0aGlzO2lmKCF0aGlzLl9ldmVudHMucmVtb3ZlTGlzdGVuZXIpcmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMuX2V2ZW50cz17fTp0aGlzLl9ldmVudHNbZV0mJmRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpcztpZigwPT09YXJndW1lbnRzLmxlbmd0aCl7Zm9yKHQgaW4gdGhpcy5fZXZlbnRzKVwicmVtb3ZlTGlzdGVuZXJcIiE9PXQmJnRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKHQpO3JldHVybiB0aGlzLnJlbW92ZUFsbExpc3RlbmVycyhcInJlbW92ZUxpc3RlbmVyXCIpLHRoaXMuX2V2ZW50cz17fSx0aGlzfWlmKG49dGhpcy5fZXZlbnRzW2VdLHMobikpdGhpcy5yZW1vdmVMaXN0ZW5lcihlLG4pO2Vsc2UgaWYobilmb3IoO24ubGVuZ3RoOyl0aGlzLnJlbW92ZUxpc3RlbmVyKGUsbltuLmxlbmd0aC0xXSk7cmV0dXJuIGRlbGV0ZSB0aGlzLl9ldmVudHNbZV0sdGhpc30sci5wcm90b3R5cGUubGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB0PXRoaXMuX2V2ZW50cyYmdGhpcy5fZXZlbnRzW2VdP3ModGhpcy5fZXZlbnRzW2VdKT9bdGhpcy5fZXZlbnRzW2VdXTp0aGlzLl9ldmVudHNbZV0uc2xpY2UoKTpbXX0sci5wcm90b3R5cGUubGlzdGVuZXJDb3VudD1mdW5jdGlvbihlKXtpZih0aGlzLl9ldmVudHMpe3ZhciB0PXRoaXMuX2V2ZW50c1tlXTtpZihzKHQpKXJldHVybiAxO2lmKHQpcmV0dXJuIHQubGVuZ3RofXJldHVybiAwfSxyLmxpc3RlbmVyQ291bnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5saXN0ZW5lckNvdW50KHQpfX0se31dLDI5OltmdW5jdGlvbihlLHQsbil7XCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmNyZWF0ZT90LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtlLnN1cGVyXz10LGUucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnt2YWx1ZTplLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfX0pfTp0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtlLnN1cGVyXz10O3ZhciBuPWZ1bmN0aW9uKCl7fTtuLnByb3RvdHlwZT10LnByb3RvdHlwZSxlLnByb3RvdHlwZT1uZXcgbixlLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lfX0se31dLDMwOltmdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe2MmJm8mJihjPSExLG8ubGVuZ3RoP2E9by5jb25jYXQoYSk6aD0tMSxhLmxlbmd0aCYmcygpKX1mdW5jdGlvbiBzKCl7aWYoIWMpe3ZhciBlPXNldFRpbWVvdXQocik7Yz0hMDtmb3IodmFyIHQ9YS5sZW5ndGg7dDspe2ZvcihvPWEsYT1bXTsrK2g8dDspbyYmb1toXS5ydW4oKTtoPS0xLHQ9YS5sZW5ndGh9bz1udWxsLGM9ITEsY2xlYXJUaW1lb3V0KGUpfX1mdW5jdGlvbiBsKGUsdCl7dGhpcy5mdW49ZSx0aGlzLmFycmF5PXR9ZnVuY3Rpb24gaSgpe312YXIgbyx1PXQuZXhwb3J0cz17fSxhPVtdLGM9ITEsaD0tMTt1Lm5leHRUaWNrPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoLTEpO2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlmb3IodmFyIG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbi0xXT1hcmd1bWVudHNbbl07YS5wdXNoKG5ldyBsKGUsdCkpLDEhPT1hLmxlbmd0aHx8Y3x8c2V0VGltZW91dChzLDApfSxsLnByb3RvdHlwZS5ydW49ZnVuY3Rpb24oKXt0aGlzLmZ1bi5hcHBseShudWxsLHRoaXMuYXJyYXkpfSx1LnRpdGxlPVwiYnJvd3NlclwiLHUuYnJvd3Nlcj0hMCx1LmVudj17fSx1LmFyZ3Y9W10sdS52ZXJzaW9uPVwiXCIsdS52ZXJzaW9ucz17fSx1Lm9uPWksdS5hZGRMaXN0ZW5lcj1pLHUub25jZT1pLHUub2ZmPWksdS5yZW1vdmVMaXN0ZW5lcj1pLHUucmVtb3ZlQWxsTGlzdGVuZXJzPWksdS5lbWl0PWksdS5iaW5kaW5nPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkXCIpfSx1LmN3ZD1mdW5jdGlvbigpe3JldHVyblwiL1wifSx1LmNoZGlyPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcInByb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZFwiKX0sdS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfX0se31dLDMxOltmdW5jdGlvbihlLHQsbil7dC5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5jb3B5JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmZpbGwmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUucmVhZFVJbnQ4fX0se31dLDMyOltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKHQscil7ZnVuY3Rpb24gcyhlLHQpe3ZhciByPXtzZWVuOltdLHN0eWxpemU6aX07cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+PTMmJihyLmRlcHRoPWFyZ3VtZW50c1syXSksYXJndW1lbnRzLmxlbmd0aD49NCYmKHIuY29sb3JzPWFyZ3VtZW50c1szXSksbSh0KT9yLnNob3dIaWRkZW49dDp0JiZuLl9leHRlbmQocix0KSxTKHIuc2hvd0hpZGRlbikmJihyLnNob3dIaWRkZW49ITEpLFMoci5kZXB0aCkmJihyLmRlcHRoPTIpLFMoci5jb2xvcnMpJiYoci5jb2xvcnM9ITEpLFMoci5jdXN0b21JbnNwZWN0KSYmKHIuY3VzdG9tSW5zcGVjdD0hMCksci5jb2xvcnMmJihyLnN0eWxpemU9bCksdShyLGUsci5kZXB0aCl9ZnVuY3Rpb24gbChlLHQpe3ZhciBuPXMuc3R5bGVzW3RdO3JldHVybiBuP1wiXHUwMDFiW1wiK3MuY29sb3JzW25dWzBdK1wibVwiK2UrXCJcdTAwMWJbXCIrcy5jb2xvcnNbbl1bMV0rXCJtXCI6ZX1mdW5jdGlvbiBpKGUsdCl7cmV0dXJuIGV9ZnVuY3Rpb24gbyhlKXt2YXIgdD17fTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7dFtlXT0hMH0pLHR9ZnVuY3Rpb24gdShlLHQscil7aWYoZS5jdXN0b21JbnNwZWN0JiZ0JiZiKHQuaW5zcGVjdCkmJnQuaW5zcGVjdCE9PW4uaW5zcGVjdCYmKCF0LmNvbnN0cnVjdG9yfHx0LmNvbnN0cnVjdG9yLnByb3RvdHlwZSE9PXQpKXt2YXIgcz10Lmluc3BlY3QocixlKTtyZXR1cm4gdihzKXx8KHM9dShlLHMscikpLHN9dmFyIGw9YShlLHQpO2lmKGwpcmV0dXJuIGw7dmFyIGk9T2JqZWN0LmtleXModCksbT1vKGkpO2lmKGUuc2hvd0hpZGRlbiYmKGk9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModCkpLFIodCkmJihpLmluZGV4T2YoXCJtZXNzYWdlXCIpPj0wfHxpLmluZGV4T2YoXCJkZXNjcmlwdGlvblwiKT49MCkpcmV0dXJuIGModCk7aWYoMD09PWkubGVuZ3RoKXtpZihiKHQpKXt2YXIgZz10Lm5hbWU/XCI6IFwiK3QubmFtZTpcIlwiO3JldHVybiBlLnN0eWxpemUoXCJbRnVuY3Rpb25cIitnK1wiXVwiLFwic3BlY2lhbFwiKX1pZihFKHQpKXJldHVybiBlLnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLFwicmVnZXhwXCIpO2lmKHkodCkpcmV0dXJuIGUuc3R5bGl6ZShEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLFwiZGF0ZVwiKTtpZihSKHQpKXJldHVybiBjKHQpfXZhciBUPVwiXCIsXz0hMSxDPVtcIntcIixcIn1cIl07aWYoZih0KSYmKF89ITAsQz1bXCJbXCIsXCJdXCJdKSxiKHQpKXt2YXIgUz10Lm5hbWU/XCI6IFwiK3QubmFtZTpcIlwiO1Q9XCIgW0Z1bmN0aW9uXCIrUytcIl1cIn1pZihFKHQpJiYoVD1cIiBcIitSZWdFeHAucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpLHkodCkmJihUPVwiIFwiK0RhdGUucHJvdG90eXBlLnRvVVRDU3RyaW5nLmNhbGwodCkpLFIodCkmJihUPVwiIFwiK2ModCkpLDA9PT1pLmxlbmd0aCYmKCFffHwwPT10Lmxlbmd0aCkpcmV0dXJuIENbMF0rVCtDWzFdO2lmKDA+cilyZXR1cm4gRSh0KT9lLnN0eWxpemUoUmVnRXhwLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpLFwicmVnZXhwXCIpOmUuc3R5bGl6ZShcIltPYmplY3RdXCIsXCJzcGVjaWFsXCIpO2Uuc2Vlbi5wdXNoKHQpO3ZhciBBO3JldHVybiBBPV8/aChlLHQscixtLGkpOmkubWFwKGZ1bmN0aW9uKG4pe3JldHVybiBkKGUsdCxyLG0sbixfKX0pLGUuc2Vlbi5wb3AoKSxwKEEsVCxDKX1mdW5jdGlvbiBhKGUsdCl7aWYoUyh0KSlyZXR1cm4gZS5zdHlsaXplKFwidW5kZWZpbmVkXCIsXCJ1bmRlZmluZWRcIik7aWYodih0KSl7dmFyIG49XCInXCIrSlNPTi5zdHJpbmdpZnkodCkucmVwbGFjZSgvXlwifFwiJC9nLFwiXCIpLnJlcGxhY2UoLycvZyxcIlxcXFwnXCIpLnJlcGxhY2UoL1xcXFxcIi9nLCdcIicpK1wiJ1wiO3JldHVybiBlLnN0eWxpemUobixcInN0cmluZ1wiKX1yZXR1cm4gXyh0KT9lLnN0eWxpemUoXCJcIit0LFwibnVtYmVyXCIpOm0odCk/ZS5zdHlsaXplKFwiXCIrdCxcImJvb2xlYW5cIik6Zyh0KT9lLnN0eWxpemUoXCJudWxsXCIsXCJudWxsXCIpOnZvaWQgMH1mdW5jdGlvbiBjKGUpe3JldHVyblwiW1wiK0Vycm9yLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpK1wiXVwifWZ1bmN0aW9uIGgoZSx0LG4scixzKXtmb3IodmFyIGw9W10saT0wLG89dC5sZW5ndGg7bz5pOysraSlPKHQsU3RyaW5nKGkpKT9sLnB1c2goZChlLHQsbixyLFN0cmluZyhpKSwhMCkpOmwucHVzaChcIlwiKTtyZXR1cm4gcy5mb3JFYWNoKGZ1bmN0aW9uKHMpe3MubWF0Y2goL15cXGQrJC8pfHxsLnB1c2goZChlLHQsbixyLHMsITApKX0pLGx9ZnVuY3Rpb24gZChlLHQsbixyLHMsbCl7dmFyIGksbyxhO2lmKGE9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHMpfHx7dmFsdWU6dFtzXX0sYS5nZXQ/bz1hLnNldD9lLnN0eWxpemUoXCJbR2V0dGVyL1NldHRlcl1cIixcInNwZWNpYWxcIik6ZS5zdHlsaXplKFwiW0dldHRlcl1cIixcInNwZWNpYWxcIik6YS5zZXQmJihvPWUuc3R5bGl6ZShcIltTZXR0ZXJdXCIsXCJzcGVjaWFsXCIpKSxPKHIscyl8fChpPVwiW1wiK3MrXCJdXCIpLG98fChlLnNlZW4uaW5kZXhPZihhLnZhbHVlKTwwPyhvPWcobik/dShlLGEudmFsdWUsbnVsbCk6dShlLGEudmFsdWUsbi0xKSxvLmluZGV4T2YoXCJcXG5cIik+LTEmJihvPWw/by5zcGxpdChcIlxcblwiKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuXCIgIFwiK2V9KS5qb2luKFwiXFxuXCIpLnN1YnN0cigyKTpcIlxcblwiK28uc3BsaXQoXCJcXG5cIikubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiICAgXCIrZX0pLmpvaW4oXCJcXG5cIikpKTpvPWUuc3R5bGl6ZShcIltDaXJjdWxhcl1cIixcInNwZWNpYWxcIikpLFMoaSkpe2lmKGwmJnMubWF0Y2goL15cXGQrJC8pKXJldHVybiBvO2k9SlNPTi5zdHJpbmdpZnkoXCJcIitzKSxpLm1hdGNoKC9eXCIoW2EtekEtWl9dW2EtekEtWl8wLTldKilcIiQvKT8oaT1pLnN1YnN0cigxLGkubGVuZ3RoLTIpLGk9ZS5zdHlsaXplKGksXCJuYW1lXCIpKTooaT1pLnJlcGxhY2UoLycvZyxcIlxcXFwnXCIpLnJlcGxhY2UoL1xcXFxcIi9nLCdcIicpLnJlcGxhY2UoLyheXCJ8XCIkKS9nLFwiJ1wiKSxpPWUuc3R5bGl6ZShpLFwic3RyaW5nXCIpKX1yZXR1cm4gaStcIjogXCIrb31mdW5jdGlvbiBwKGUsdCxuKXt2YXIgcj0wLHM9ZS5yZWR1Y2UoZnVuY3Rpb24oZSx0KXtyZXR1cm4gcisrLHQuaW5kZXhPZihcIlxcblwiKT49MCYmcisrLGUrdC5yZXBsYWNlKC9cXHUwMDFiXFxbXFxkXFxkP20vZyxcIlwiKS5sZW5ndGgrMX0sMCk7cmV0dXJuIHM+NjA/blswXSsoXCJcIj09PXQ/XCJcIjp0K1wiXFxuIFwiKStcIiBcIitlLmpvaW4oXCIsXFxuICBcIikrXCIgXCIrblsxXTpuWzBdK3QrXCIgXCIrZS5qb2luKFwiLCBcIikrXCIgXCIrblsxXX1mdW5jdGlvbiBmKGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpfWZ1bmN0aW9uIG0oZSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIGcoZSl7cmV0dXJuIG51bGw9PT1lfWZ1bmN0aW9uIFQoZSl7cmV0dXJuIG51bGw9PWV9ZnVuY3Rpb24gXyhlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZX1mdW5jdGlvbiB2KGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIEMoZSl7cmV0dXJuXCJzeW1ib2xcIj09dHlwZW9mIGV9ZnVuY3Rpb24gUyhlKXtyZXR1cm4gdm9pZCAwPT09ZX1mdW5jdGlvbiBFKGUpe3JldHVybiBBKGUpJiZcIltvYmplY3QgUmVnRXhwXVwiPT09dyhlKX1mdW5jdGlvbiBBKGUpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlJiZudWxsIT09ZX1mdW5jdGlvbiB5KGUpe3JldHVybiBBKGUpJiZcIltvYmplY3QgRGF0ZV1cIj09PXcoZSl9ZnVuY3Rpb24gUihlKXtyZXR1cm4gQShlKSYmKFwiW29iamVjdCBFcnJvcl1cIj09PXcoZSl8fGUgaW5zdGFuY2VvZiBFcnJvcil9ZnVuY3Rpb24gYihlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIEkoZSl7cmV0dXJuIG51bGw9PT1lfHxcImJvb2xlYW5cIj09dHlwZW9mIGV8fFwibnVtYmVyXCI9PXR5cGVvZiBlfHxcInN0cmluZ1wiPT10eXBlb2YgZXx8XCJzeW1ib2xcIj09dHlwZW9mIGV8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiBlfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1mdW5jdGlvbiBOKGUpe3JldHVybiAxMD5lP1wiMFwiK2UudG9TdHJpbmcoMTApOmUudG9TdHJpbmcoMTApfWZ1bmN0aW9uIEQoKXt2YXIgZT1uZXcgRGF0ZSx0PVtOKGUuZ2V0SG91cnMoKSksTihlLmdldE1pbnV0ZXMoKSksTihlLmdldFNlY29uZHMoKSldLmpvaW4oXCI6XCIpO3JldHVybltlLmdldERhdGUoKSxQW2UuZ2V0TW9udGgoKV0sdF0uam9pbihcIiBcIil9ZnVuY3Rpb24gTyhlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX12YXIgeD0vJVtzZGolXS9nO24uZm9ybWF0PWZ1bmN0aW9uKGUpe2lmKCF2KGUpKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdC5wdXNoKHMoYXJndW1lbnRzW25dKSk7cmV0dXJuIHQuam9pbihcIiBcIil9Zm9yKHZhciBuPTEscj1hcmd1bWVudHMsbD1yLmxlbmd0aCxpPVN0cmluZyhlKS5yZXBsYWNlKHgsZnVuY3Rpb24oZSl7aWYoXCIlJVwiPT09ZSlyZXR1cm5cIiVcIjtpZihuPj1sKXJldHVybiBlO3N3aXRjaChlKXtjYXNlXCIlc1wiOnJldHVybiBTdHJpbmcocltuKytdKTtjYXNlXCIlZFwiOnJldHVybiBOdW1iZXIocltuKytdKTtjYXNlXCIlalwiOnRyeXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkocltuKytdKX1jYXRjaCh0KXtyZXR1cm5cIltDaXJjdWxhcl1cIn1kZWZhdWx0OnJldHVybiBlfX0pLG89cltuXTtsPm47bz1yWysrbl0paSs9ZyhvKXx8IUEobyk/XCIgXCIrbzpcIiBcIitzKG8pO3JldHVybiBpfSxuLmRlcHJlY2F0ZT1mdW5jdGlvbihlLHMpe2Z1bmN0aW9uIGwoKXtpZighaSl7aWYodC50aHJvd0RlcHJlY2F0aW9uKXRocm93IG5ldyBFcnJvcihzKTt0LnRyYWNlRGVwcmVjYXRpb24/Y29uc29sZS50cmFjZShzKTpjb25zb2xlLmVycm9yKHMpLGk9ITB9cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfWlmKFMoci5wcm9jZXNzKSlyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5kZXByZWNhdGUoZSxzKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2lmKHQubm9EZXByZWNhdGlvbj09PSEwKXJldHVybiBlO3ZhciBpPSExO3JldHVybiBsfTt2YXIgVSxNPXt9O24uZGVidWdsb2c9ZnVuY3Rpb24oZSl7aWYoUyhVKSYmKFU9dC5lbnYuTk9ERV9ERUJVR3x8XCJcIiksZT1lLnRvVXBwZXJDYXNlKCksIU1bZV0paWYobmV3IFJlZ0V4cChcIlxcXFxiXCIrZStcIlxcXFxiXCIsXCJpXCIpLnRlc3QoVSkpe3ZhciByPXQucGlkO01bZV09ZnVuY3Rpb24oKXt2YXIgdD1uLmZvcm1hdC5hcHBseShuLGFyZ3VtZW50cyk7Y29uc29sZS5lcnJvcihcIiVzICVkOiAlc1wiLGUscix0KX19ZWxzZSBNW2VdPWZ1bmN0aW9uKCl7fTtyZXR1cm4gTVtlXX0sbi5pbnNwZWN0PXMscy5jb2xvcnM9e2JvbGQ6WzEsMjJdLGl0YWxpYzpbMywyM10sdW5kZXJsaW5lOls0LDI0XSxpbnZlcnNlOls3LDI3XSx3aGl0ZTpbMzcsMzldLGdyZXk6WzkwLDM5XSxibGFjazpbMzAsMzldLGJsdWU6WzM0LDM5XSxjeWFuOlszNiwzOV0sZ3JlZW46WzMyLDM5XSxtYWdlbnRhOlszNSwzOV0scmVkOlszMSwzOV0seWVsbG93OlszMywzOV19LHMuc3R5bGVzPXtzcGVjaWFsOlwiY3lhblwiLG51bWJlcjpcInllbGxvd1wiLFwiYm9vbGVhblwiOlwieWVsbG93XCIsdW5kZWZpbmVkOlwiZ3JleVwiLFwibnVsbFwiOlwiYm9sZFwiLHN0cmluZzpcImdyZWVuXCIsZGF0ZTpcIm1hZ2VudGFcIixyZWdleHA6XCJyZWRcIn0sbi5pc0FycmF5PWYsbi5pc0Jvb2xlYW49bSxuLmlzTnVsbD1nLG4uaXNOdWxsT3JVbmRlZmluZWQ9VCxuLmlzTnVtYmVyPV8sbi5pc1N0cmluZz12LG4uaXNTeW1ib2w9QyxuLmlzVW5kZWZpbmVkPVMsbi5pc1JlZ0V4cD1FLG4uaXNPYmplY3Q9QSxuLmlzRGF0ZT15LG4uaXNFcnJvcj1SLG4uaXNGdW5jdGlvbj1iLG4uaXNQcmltaXRpdmU9SSxuLmlzQnVmZmVyPWUoXCIuL3N1cHBvcnQvaXNCdWZmZXJcIik7dmFyIFA9W1wiSmFuXCIsXCJGZWJcIixcIk1hclwiLFwiQXByXCIsXCJNYXlcIixcIkp1blwiLFwiSnVsXCIsXCJBdWdcIixcIlNlcFwiLFwiT2N0XCIsXCJOb3ZcIixcIkRlY1wiXTtuLmxvZz1mdW5jdGlvbigpe2NvbnNvbGUubG9nKFwiJXMgLSAlc1wiLEQoKSxuLmZvcm1hdC5hcHBseShuLGFyZ3VtZW50cykpfSxuLmluaGVyaXRzPWUoXCJpbmhlcml0c1wiKSxuLl9leHRlbmQ9ZnVuY3Rpb24oZSx0KXtpZighdHx8IUEodCkpcmV0dXJuIGU7Zm9yKHZhciBuPU9iamVjdC5rZXlzKHQpLHI9bi5sZW5ndGg7ci0tOyllW25bcl1dPXRbbltyXV07cmV0dXJuIGV9fSkuY2FsbCh0aGlzLGUoXCJfcHJvY2Vzc1wiKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZj9zZWxmOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93Ont9KX0se1wiLi9zdXBwb3J0L2lzQnVmZmVyXCI6MzEsX3Byb2Nlc3M6MzAsaW5oZXJpdHM6Mjl9XSwzMzpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoKXtyZXR1cm5cIldlYmtpdEFwcGVhcmFuY2VcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZXx8d2luZG93LmNvbnNvbGUmJihjb25zb2xlLmZpcmVidWd8fGNvbnNvbGUuZXhjZXB0aW9uJiZjb25zb2xlLnRhYmxlKXx8bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLm1hdGNoKC9maXJlZm94XFwvKFxcZCspLykmJnBhcnNlSW50KFJlZ0V4cC4kMSwxMCk+PTMxfWZ1bmN0aW9uIHMoKXt2YXIgZT1hcmd1bWVudHMsdD10aGlzLnVzZUNvbG9ycztpZihlWzBdPSh0P1wiJWNcIjpcIlwiKSt0aGlzLm5hbWVzcGFjZSsodD9cIiAlY1wiOlwiIFwiKStlWzBdKyh0P1wiJWMgXCI6XCIgXCIpK1wiK1wiK24uaHVtYW5pemUodGhpcy5kaWZmKSwhdClyZXR1cm4gZTt2YXIgcj1cImNvbG9yOiBcIit0aGlzLmNvbG9yO2U9W2VbMF0scixcImNvbG9yOiBpbmhlcml0XCJdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLDEpKTt2YXIgcz0wLGw9MDtyZXR1cm4gZVswXS5yZXBsYWNlKC8lW2EteiVdL2csZnVuY3Rpb24oZSl7XCIlJVwiIT09ZSYmKHMrKyxcIiVjXCI9PT1lJiYobD1zKSl9KSxlLnNwbGljZShsLDAsciksZX1mdW5jdGlvbiBsKCl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGNvbnNvbGUmJmNvbnNvbGUubG9nJiZGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlLmxvZyxjb25zb2xlLGFyZ3VtZW50cyl9ZnVuY3Rpb24gaShlKXt0cnl7bnVsbD09ZT9uLnN0b3JhZ2UucmVtb3ZlSXRlbShcImRlYnVnXCIpOm4uc3RvcmFnZS5kZWJ1Zz1lfWNhdGNoKHQpe319ZnVuY3Rpb24gbygpe3ZhciBlO3RyeXtlPW4uc3RvcmFnZS5kZWJ1Z31jYXRjaCh0KXt9cmV0dXJuIGV9ZnVuY3Rpb24gdSgpe3RyeXtyZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZX1jYXRjaChlKXt9fW49dC5leHBvcnRzPWUoXCIuL2RlYnVnXCIpLG4ubG9nPWwsbi5mb3JtYXRBcmdzPXMsbi5zYXZlPWksbi5sb2FkPW8sbi51c2VDb2xvcnM9cixuLnN0b3JhZ2U9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNocm9tZSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNocm9tZS5zdG9yYWdlP2Nocm9tZS5zdG9yYWdlLmxvY2FsOnUoKSxuLmNvbG9ycz1bXCJsaWdodHNlYWdyZWVuXCIsXCJmb3Jlc3RncmVlblwiLFwiZ29sZGVucm9kXCIsXCJkb2RnZXJibHVlXCIsXCJkYXJrb3JjaGlkXCIsXCJjcmltc29uXCJdLG4uZm9ybWF0dGVycy5qPWZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnN0cmluZ2lmeShlKX0sbi5lbmFibGUobygpKX0se1wiLi9kZWJ1Z1wiOjM0fV0sMzQ6W2Z1bmN0aW9uKGUsdCxuKXtmdW5jdGlvbiByKCl7cmV0dXJuIG4uY29sb3JzW2MrKyVuLmNvbG9ycy5sZW5ndGhdfWZ1bmN0aW9uIHMoZSl7ZnVuY3Rpb24gdCgpe31mdW5jdGlvbiBzKCl7dmFyIGU9cyx0PStuZXcgRGF0ZSxsPXQtKGF8fHQpO2UuZGlmZj1sLGUucHJldj1hLGUuY3Vycj10LGE9dCxudWxsPT1lLnVzZUNvbG9ycyYmKGUudXNlQ29sb3JzPW4udXNlQ29sb3JzKCkpLG51bGw9PWUuY29sb3ImJmUudXNlQ29sb3JzJiYoZS5jb2xvcj1yKCkpO3ZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7aVswXT1uLmNvZXJjZShpWzBdKSxcInN0cmluZ1wiIT10eXBlb2YgaVswXSYmKGk9W1wiJW9cIl0uY29uY2F0KGkpKTt2YXIgbz0wO2lbMF09aVswXS5yZXBsYWNlKC8lKFthLXolXSkvZyxmdW5jdGlvbih0LHIpe2lmKFwiJSVcIj09PXQpcmV0dXJuIHQ7bysrO3ZhciBzPW4uZm9ybWF0dGVyc1tyXTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBzKXt2YXIgbD1pW29dO3Q9cy5jYWxsKGUsbCksaS5zcGxpY2UobywxKSxvLS19cmV0dXJuIHR9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBuLmZvcm1hdEFyZ3MmJihpPW4uZm9ybWF0QXJncy5hcHBseShlLGkpKTt2YXIgdT1zLmxvZ3x8bi5sb2d8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSk7dS5hcHBseShlLGkpfXQuZW5hYmxlZD0hMSxzLmVuYWJsZWQ9ITA7dmFyIGw9bi5lbmFibGVkKGUpP3M6dDtyZXR1cm4gbC5uYW1lc3BhY2U9ZSxsfWZ1bmN0aW9uIGwoZSl7bi5zYXZlKGUpO2Zvcih2YXIgdD0oZXx8XCJcIikuc3BsaXQoL1tcXHMsXSsvKSxyPXQubGVuZ3RoLHM9MDtyPnM7cysrKXRbc10mJihlPXRbc10ucmVwbGFjZSgvXFwqL2csXCIuKj9cIiksXCItXCI9PT1lWzBdP24uc2tpcHMucHVzaChuZXcgUmVnRXhwKFwiXlwiK2Uuc3Vic3RyKDEpK1wiJFwiKSk6bi5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoXCJeXCIrZStcIiRcIikpKX1mdW5jdGlvbiBpKCl7bi5lbmFibGUoXCJcIil9ZnVuY3Rpb24gbyhlKXt2YXIgdCxyO2Zvcih0PTAscj1uLnNraXBzLmxlbmd0aDtyPnQ7dCsrKWlmKG4uc2tpcHNbdF0udGVzdChlKSlyZXR1cm4hMTtmb3IodD0wLHI9bi5uYW1lcy5sZW5ndGg7cj50O3QrKylpZihuLm5hbWVzW3RdLnRlc3QoZSkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gdShlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEVycm9yP2Uuc3RhY2t8fGUubWVzc2FnZTplfW49dC5leHBvcnRzPXMsbi5jb2VyY2U9dSxuLmRpc2FibGU9aSxuLmVuYWJsZT1sLG4uZW5hYmxlZD1vLG4uaHVtYW5pemU9ZShcIm1zXCIpLG4ubmFtZXM9W10sbi5za2lwcz1bXSxuLmZvcm1hdHRlcnM9e307dmFyIGEsYz0wfSx7bXM6MzV9XSwzNTpbZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7aWYoZT1cIlwiK2UsIShlLmxlbmd0aD4xZTQpKXt2YXIgdD0vXigoPzpcXGQrKT9cXC4/XFxkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKGUpO2lmKHQpe3ZhciBuPXBhcnNlRmxvYXQodFsxXSkscj0odFsyXXx8XCJtc1wiKS50b0xvd2VyQ2FzZSgpO3N3aXRjaChyKXtjYXNlXCJ5ZWFyc1wiOmNhc2VcInllYXJcIjpjYXNlXCJ5cnNcIjpjYXNlXCJ5clwiOmNhc2VcInlcIjpyZXR1cm4gbipoO2Nhc2VcImRheXNcIjpjYXNlXCJkYXlcIjpjYXNlXCJkXCI6cmV0dXJuIG4qYztjYXNlXCJob3Vyc1wiOmNhc2VcImhvdXJcIjpjYXNlXCJocnNcIjpjYXNlXCJoclwiOmNhc2VcImhcIjpyZXR1cm4gbiphO2Nhc2VcIm1pbnV0ZXNcIjpjYXNlXCJtaW51dGVcIjpjYXNlXCJtaW5zXCI6Y2FzZVwibWluXCI6Y2FzZVwibVwiOnJldHVybiBuKnU7Y2FzZVwic2Vjb25kc1wiOmNhc2VcInNlY29uZFwiOmNhc2VcInNlY3NcIjpjYXNlXCJzZWNcIjpjYXNlXCJzXCI6cmV0dXJuIG4qbztjYXNlXCJtaWxsaXNlY29uZHNcIjpjYXNlXCJtaWxsaXNlY29uZFwiOmNhc2VcIm1zZWNzXCI6Y2FzZVwibXNlY1wiOmNhc2VcIm1zXCI6cmV0dXJuIG59fX19ZnVuY3Rpb24gcyhlKXtyZXR1cm4gZT49Yz9NYXRoLnJvdW5kKGUvYykrXCJkXCI6ZT49YT9NYXRoLnJvdW5kKGUvYSkrXCJoXCI6ZT49dT9NYXRoLnJvdW5kKGUvdSkrXCJtXCI6ZT49bz9NYXRoLnJvdW5kKGUvbykrXCJzXCI6ZStcIm1zXCJ9ZnVuY3Rpb24gbChlKXtyZXR1cm4gaShlLGMsXCJkYXlcIil8fGkoZSxhLFwiaG91clwiKXx8aShlLHUsXCJtaW51dGVcIil8fGkoZSxvLFwic2Vjb25kXCIpfHxlK1wiIG1zXCJ9ZnVuY3Rpb24gaShlLHQsbil7cmV0dXJuIHQ+ZT92b2lkIDA6MS41KnQ+ZT9NYXRoLmZsb29yKGUvdCkrXCIgXCIrbjpNYXRoLmNlaWwoZS90KStcIiBcIituK1wic1wifXZhciBvPTFlMyx1PTYwKm8sYT02MCp1LGM9MjQqYSxoPTM2NS4yNSpjO3QuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3JldHVybiB0PXR8fHt9LFwic3RyaW5nXCI9PXR5cGVvZiBlP3IoZSk6dFtcImxvbmdcIl0/bChlKTpzKGUpfX0se31dLDM2OltmdW5jdGlvbihlLHQsbil7KGZ1bmN0aW9uKG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJydGNuaW5qYTogV2ViUlRDIG5vdCBzdXBwb3J0ZWQsIG1pc3NpbmcgXCIrZStcIiBbYnJvd3NlcjogXCIraS5uYW1lK1wiIFwiK2kudmVyc2lvbitcIl1cIil9fWlmKHYmJmkuY2hyb21lJiZfPj0zMnx8aS5hbmRyb2lkJiZpLmNocm9tZSYmXz49Mzl8fHYmJmkub3BlcmEmJl8+PTI3fHxpLmFuZHJvaWQmJmkub3BlcmEmJl8+PTI0fHxpLmFuZHJvaWQmJmkud2Via2l0JiYhaS5jaHJvbWUmJl8+PTM3fHxsLndlYmtpdEdldFVzZXJNZWRpYSYmcy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbilDPSEwLGE9bC53ZWJraXRHZXRVc2VyTWVkaWEuYmluZChsKSxjPXMud2Via2l0UlRDUGVlckNvbm5lY3Rpb24saD1zLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbixkPXMuUlRDSWNlQ2FuZGlkYXRlLHA9cy5NZWRpYVN0cmVhbVRyYWNrLHAmJnAuZ2V0U291cmNlcz9mPXAuZ2V0U291cmNlcy5iaW5kKHApOmwuZ2V0TWVkaWFEZXZpY2VzJiYoZj1sLmdldE1lZGlhRGV2aWNlcy5iaW5kKGwpKSxtPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuc3JjPVVSTC5jcmVhdGVPYmplY3RVUkwodCksZX0sZz0hMCxUPSExO2Vsc2UgaWYodiYmaS5maXJlZm94JiZfPj0yMnx8aS5hbmRyb2lkJiZpLmZpcmVmb3gmJl8+PTMzfHxsLm1vekdldFVzZXJNZWRpYSYmcy5tb3pSVENQZWVyQ29ubmVjdGlvbilDPSEwLGE9bC5tb3pHZXRVc2VyTWVkaWEuYmluZChsKSxjPXMubW96UlRDUGVlckNvbm5lY3Rpb24saD1zLm1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbixkPXMubW96UlRDSWNlQ2FuZGlkYXRlLHA9cy5NZWRpYVN0cmVhbVRyYWNrLG09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5zcmM9VVJMLmNyZWF0ZU9iamVjdFVSTCh0KSxlfSxnPSExLFQ9ITE7ZWxzZSBpZihlLnBsdWdpbiYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5wbHVnaW4uaXNSZXF1aXJlZCYmZS5wbHVnaW4uaXNSZXF1aXJlZCgpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnBsdWdpbi5pc0luc3RhbGxlZCYmZS5wbHVnaW4uaXNJbnN0YWxsZWQoKSl7dmFyIG49ZS5wbHVnaW5bXCJpbnRlcmZhY2VcIl07Qz0hMCxhPW4uZ2V0VXNlck1lZGlhLGM9bi5SVENQZWVyQ29ubmVjdGlvbixoPW4uUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLGQ9bi5SVENJY2VDYW5kaWRhdGUscD1uLk1lZGlhU3RyZWFtVHJhY2sscCYmcC5nZXRTb3VyY2VzP2Y9cC5nZXRTb3VyY2VzLmJpbmQocCk6bC5nZXRNZWRpYURldmljZXMmJihmPWwuZ2V0TWVkaWFEZXZpY2VzLmJpbmQobCkpLG09bi5hdHRhY2hNZWRpYVN0cmVhbSxnPW4uY2FuUmVuZWdvdGlhdGUsVD0hMH1lbHNlIGwuZ2V0VXNlck1lZGlhJiZzLlJUQ1BlZXJDb25uZWN0aW9uJiYoQz0hMCxhPWwuZ2V0VXNlck1lZGlhLmJpbmQobCksYz1zLlJUQ1BlZXJDb25uZWN0aW9uLGg9cy5SVENTZXNzaW9uRGVzY3JpcHRpb24sZD1zLlJUQ0ljZUNhbmRpZGF0ZSxwPXMuTWVkaWFTdHJlYW1UcmFjayxwJiZwLmdldFNvdXJjZXM/Zj1wLmdldFNvdXJjZXMuYmluZChwKTpsLmdldE1lZGlhRGV2aWNlcyYmKGY9bC5nZXRNZWRpYURldmljZXMuYmluZChsKSksbT1zLmF0dGFjaE1lZGlhU3RyZWFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBlLnNyYz1VUkwuY3JlYXRlT2JqZWN0VVJMKHQpLGV9LGc9ITAsVD0hMSk7cmV0dXJuIHIuaGFzV2ViUlRDPWZ1bmN0aW9uKCl7cmV0dXJuIEN9LGE/ci5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSx0LG4pe28oXCJnZXRVc2VyTWVkaWEoKSB8IGNvbnN0cmFpbnRzOiAlb1wiLGUpO3RyeXthKGUsZnVuY3Rpb24oZSl7byhcImdldFVzZXJNZWRpYSgpIHwgc3VjY2Vzc1wiKSx0JiZ0KGUpfSxmdW5jdGlvbihlKXtvKFwiZ2V0VXNlck1lZGlhKCkgfCBlcnJvcjpcIixlKSxuJiZuKGUpfSl9Y2F0Y2gocil7dShcImdldFVzZXJNZWRpYSgpIHwgZXJyb3I6XCIsciksbiYmbihyKX19OnIuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUsbixyKXt1KFwiZ2V0VXNlck1lZGlhKCkgfCBXZWJSVEMgbm90IHN1cHBvcnRlZFwiKSxyP3IobmV3IEVycm9yKFwicnRjbmluamE6IFdlYlJUQyBub3Qgc3VwcG9ydGVkLCBtaXNzaW5nIGdldFVzZXJNZWRpYSBbYnJvd3NlcjogXCIraS5uYW1lK1wiIFwiK2kudmVyc2lvbitcIl1cIikpOnQoXCJnZXRVc2VyTWVkaWFcIil9LHIuUlRDUGVlckNvbm5lY3Rpb249Y3x8dChcIlJUQ1BlZXJDb25uZWN0aW9uXCIpLHIuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uPWh8fHQoXCJSVENTZXNzaW9uRGVzY3JpcHRpb25cIiksci5SVENJY2VDYW5kaWRhdGU9ZHx8dChcIlJUQ0ljZUNhbmRpZGF0ZVwiKSxyLk1lZGlhU3RyZWFtVHJhY2s9cHx8dChcIk1lZGlhU3RyZWFtVHJhY2tcIiksci5nZXRNZWRpYURldmljZXM9ZixyLmF0dGFjaE1lZGlhU3RyZWFtPW18fHQoXCJhdHRhY2hNZWRpYVN0cmVhbVwiKSxyLmNhblJlbmVnb3RpYXRlPWcsci5jbG9zZU1lZGlhU3RyZWFtPWZ1bmN0aW9uKGUpe2lmKGUpdHJ5e28oXCJjbG9zZU1lZGlhU3RyZWFtKCkgfCBjYWxsaW5nIHN0b3AoKSBvbiBhbGwgdGhlIE1lZGlhU3RyZWFtVHJhY2tcIik7dmFyIHQsbixyO2lmKGUuZ2V0VHJhY2tzKWZvcih0PWUuZ2V0VHJhY2tzKCksbj0wLHI9dC5sZW5ndGg7cj5uO24rPTEpdFtuXS5zdG9wKCk7ZWxzZXtmb3IodD1lLmdldEF1ZGlvVHJhY2tzKCksbj0wLHI9dC5sZW5ndGg7cj5uO24rPTEpdFtuXS5zdG9wKCk7Zm9yKHQ9ZS5nZXRWaWRlb1RyYWNrcygpLG49MCxyPXQubGVuZ3RoO3I+bjtuKz0xKXRbbl0uc3RvcCgpfX1jYXRjaChzKXtcImZ1bmN0aW9uXCIhPXR5cGVvZiBlLnN0b3AmJlwib2JqZWN0XCIhPXR5cGVvZiBlLnN0b3B8fChvKFwiY2xvc2VNZWRpYVN0cmVhbSgpIHwgY2FsbGluZyBzdG9wKCkgb24gdGhlIE1lZGlhU3RyZWFtXCIpLGUuc3RvcCgpKX19LHIuZml4UGVlckNvbm5lY3Rpb25Db25maWc9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLHMsbDtmb3IoQXJyYXkuaXNBcnJheShlLmljZVNlcnZlcnMpfHwoZS5pY2VTZXJ2ZXJzPVtdKSx0PTAsbj1lLmljZVNlcnZlcnMubGVuZ3RoO24+dDt0Kz0xKXI9ZS5pY2VTZXJ2ZXJzW3RdLHM9ci5oYXNPd25Qcm9wZXJ0eShcInVybHNcIiksbD1yLmhhc093blByb3BlcnR5KFwidXJsXCIpLFwib2JqZWN0XCI9PXR5cGVvZiByJiYocyYmIWw/ci51cmw9QXJyYXkuaXNBcnJheShyLnVybHMpP3IudXJsc1swXTpyLnVybHM6IXMmJmwmJihyLnVybHM9QXJyYXkuaXNBcnJheShyLnVybCk/ci51cmwuc2xpY2UoKTpyLnVybCksbCYmQXJyYXkuaXNBcnJheShyLnVybCkmJihyLnVybD1yLnVybFswXSkpfSxyLmZpeFJUQ09mZmVyT3B0aW9ucz1mdW5jdGlvbihlKXtlPWV8fHt9LFQ/KGUuaGFzT3duUHJvcGVydHkoXCJvZmZlclRvUmVjZWl2ZUF1ZGlvXCIpJiYoZS5tYW5kYXRvcnk9ZS5tYW5kYXRvcnl8fHt9LGUubWFuZGF0b3J5Lk9mZmVyVG9SZWNlaXZlQXVkaW89ISFlLm9mZmVyVG9SZWNlaXZlQXVkaW8pLGUuaGFzT3duUHJvcGVydHkoXCJvZmZlclRvUmVjZWl2ZVZpZGVvXCIpJiYoZS5tYW5kYXRvcnk9ZS5tYW5kYXRvcnl8fHt9LGUubWFuZGF0b3J5Lk9mZmVyVG9SZWNlaXZlVmlkZW89ISFlLm9mZmVyVG9SZWNlaXZlVmlkZW8pKTooZS5tYW5kYXRvcnkmJmUubWFuZGF0b3J5Lmhhc093blByb3BlcnR5KFwiT2ZmZXJUb1JlY2VpdmVBdWRpb1wiKSYmKGUub2ZmZXJUb1JlY2VpdmVBdWRpbz1lLm1hbmRhdG9yeS5PZmZlclRvUmVjZWl2ZUF1ZGlvPzE6MCksZS5tYW5kYXRvcnkmJmUubWFuZGF0b3J5Lmhhc093blByb3BlcnR5KFwiT2ZmZXJUb1JlY2VpdmVWaWRlb1wiKSYmKGUub2ZmZXJUb1JlY2VpdmVWaWRlbz1lLm1hbmRhdG9yeS5PZmZlclRvUmVjZWl2ZVZpZGVvPzE6MCksZGVsZXRlIGUubWFuZGF0b3J5KX0scn10LmV4cG9ydHM9cjt2YXIgcyxsLGk9ZShcImJvd3NlclwiKSxvPWUoXCJkZWJ1Z1wiKShcInJ0Y25pbmphOkFkYXB0ZXJcIiksdT1lKFwiZGVidWdcIikoXCJydGNuaW5qYTpFUlJPUjpBZGFwdGVyXCIpLGE9bnVsbCxjPW51bGwsaD1udWxsLGQ9bnVsbCxwPW51bGwsZj1udWxsLG09bnVsbCxnPSExLFQ9ITEsXz1OdW1iZXIoaS52ZXJzaW9uKXx8MCx2PSEoaS5tb2JpbGV8fGkudGFibGV0JiYhKGkubXNpZSYmXz49MTApKSxDPSExO3UubG9nPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpLHM9bi53aW5kb3d8fG4sbD1zLm5hdmlnYXRvcnx8e319KS5jYWxsKHRoaXMsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGY/c2VsZjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp7fSl9LHtib3dzZXI6NDAsZGVidWc6MzN9XSwzNzpbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSx0KXtoKFwibmV3IHwgW3BjQ29uZmlnOiVvLCBwY0NvbnN0cmFpbnRzOiVvXVwiLGUsdCkscy5jYWxsKHRoaXMsZSksdGhpcy5wY0NvbnN0cmFpbnRzPXQsdGhpcy5vdXJMb2NhbERlc2NyaXB0aW9uPW51bGwsdGhpcy5vdXJTaWduYWxpbmdTdGF0ZT1udWxsLHRoaXMub3VySWNlQ29ubmVjdGlvblN0YXRlPW51bGwsdGhpcy5vdXJJY2VHYXRoZXJpbmdTdGF0ZT1udWxsLHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0PW51bGwsdGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5PW51bGwsdGhpcy5pZ25vcmVJY2VHYXRoZXJpbmc9ITEsdGhpcy5jbG9zZWQ9ITEsby5jYWxsKHRoaXMpLGEuY2FsbCh0aGlzKX1mdW5jdGlvbiBzKGUpe3RoaXMucGNDb25maWc9YyghMCxlKSxwLmZpeFBlZXJDb25uZWN0aW9uQ29uZmlnKHRoaXMucGNDb25maWcpLHRoaXMub3B0aW9ucz17aWNlVHJhbnNwb3J0c1JlbGF5OlwicmVsYXlcIj09PXRoaXMucGNDb25maWcuaWNlVHJhbnNwb3J0cyxpY2VUcmFuc3BvcnRzTm9uZTpcIm5vbmVcIj09PXRoaXMucGNDb25maWcuaWNlVHJhbnNwb3J0cyxnYXRoZXJpbmdUaW1lb3V0OnRoaXMucGNDb25maWcuZ2F0aGVyaW5nVGltZW91dCxnYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheTp0aGlzLnBjQ29uZmlnLmdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5fSxkZWxldGUgdGhpcy5wY0NvbmZpZy5nYXRoZXJpbmdUaW1lb3V0LGRlbGV0ZSB0aGlzLnBjQ29uZmlnLmdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5LGgoXCJzZXRDb25maWd1cmF0aW9uQW5kT3B0aW9ucyB8IHByb2Nlc3NlZCBwY0NvbmZpZzogJW9cIix0aGlzLnBjQ29uZmlnKX1mdW5jdGlvbiBsKCl7cmV0dXJuIHRoaXMuY2xvc2VkfHx0aGlzLnBjJiZcImNsb3NlZFwiPT09dGhpcy5wYy5pY2VDb25uZWN0aW9uU3RhdGV9ZnVuY3Rpb24gaSgpe3ZhciBlPXRoaXMsdD10aGlzLnBjO3Qub25uZWdvdGlhdGlvbm5lZWRlZD1mdW5jdGlvbih0KXtsLmNhbGwoZSl8fChoKFwib25uZWdvdGlhdGlvbm5lZWRlZCgpXCIpLGUub25uZWdvdGlhdGlvbm5lZWRlZCYmZS5vbm5lZ290aWF0aW9ubmVlZGVkKHQpKX0sdC5vbmljZWNhbmRpZGF0ZT1mdW5jdGlvbih0KXt2YXIgbixyLHM7aWYoIWwuY2FsbChlKSYmIWUuaWdub3JlSWNlR2F0aGVyaW5nJiYhZS5vcHRpb25zLmljZVRyYW5zcG9ydHNOb25lKWlmKG49dC5jYW5kaWRhdGUpe2lmKHI9Zi5SRUdFWFBfUkVMQVlfQ0FORElEQVRFLnRlc3Qobi5jYW5kaWRhdGUpLGUub3B0aW9ucy5pY2VUcmFuc3BvcnRzUmVsYXkmJiFyKXJldHVybjtyJiYhZS50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5JiZcIm51bWJlclwiPT10eXBlb2YgZS5vcHRpb25zLmdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5JiYoaChcIm9uaWNlY2FuZGlkYXRlKCkgfCBmaXJzdCByZWxheSBjYW5kaWRhdGUgZm91bmQsIGVuZGluZyBnYXRoZXJpbmcgaW4gJWQgbXNcIixlLm9wdGlvbnMuZ2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkpLFxuZS50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtsLmNhbGwoZSl8fChoKFwiZm9yY2VkIGVuZCBvZiBjYW5kaWRhdGVzIGFmdGVyIHRpbWVvdXRcIiksZGVsZXRlIGUudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSxjbGVhclRpbWVvdXQoZS50aW1lckdhdGhlcmluZ1RpbWVvdXQpLGRlbGV0ZSBlLnRpbWVyR2F0aGVyaW5nVGltZW91dCxlLmlnbm9yZUljZUdhdGhlcmluZz0hMCxlLm9uaWNlY2FuZGlkYXRlJiZlLm9uaWNlY2FuZGlkYXRlKHtjYW5kaWRhdGU6bnVsbH0sbnVsbCkpfSxlLm9wdGlvbnMuZ2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkpKSxzPW5ldyBwLlJUQ0ljZUNhbmRpZGF0ZSh7c2RwTWlkOm4uc2RwTWlkLHNkcE1MaW5lSW5kZXg6bi5zZHBNTGluZUluZGV4LGNhbmRpZGF0ZTpuLmNhbmRpZGF0ZX0pLG51bGw9PT1tLm5vcm1hbGl6ZUNhbmRpZGF0ZSYmKGYuUkVHRVhQX05PUk1BTElaRURfQ0FORElEQVRFLnRlc3Qobi5jYW5kaWRhdGUpP20ubm9ybWFsaXplQ2FuZGlkYXRlPSExOihoKCdvbmljZWNhbmRpZGF0ZSgpIHwgbm9ybWFsaXppbmcgSUNFIGNhbmRpZGF0ZXMgc3ludGF4IChyZW1vdmUgXCJhPVwiIGFuZCBcIlxcXFxyXFxcXG5cIiknKSxtLm5vcm1hbGl6ZUNhbmRpZGF0ZT0hMCkpLG0ubm9ybWFsaXplQ2FuZGlkYXRlJiYocy5jYW5kaWRhdGU9bi5jYW5kaWRhdGUucmVwbGFjZShmLlJFR0VYUF9GSVhfQ0FORElEQVRFLFwiXCIpKSxoKFwib25pY2VjYW5kaWRhdGUoKSB8IG0lZCglcykgJXNcIixzLnNkcE1MaW5lSW5kZXgscy5zZHBNaWR8fFwibm8gbWlkXCIscy5jYW5kaWRhdGUpLGUub25pY2VjYW5kaWRhdGUmJmUub25pY2VjYW5kaWRhdGUodCxzKX1lbHNlIGgoXCJvbmljZWNhbmRpZGF0ZSgpIHwgZW5kIG9mIGNhbmRpZGF0ZXNcIiksY2xlYXJUaW1lb3V0KGUudGltZXJHYXRoZXJpbmdUaW1lb3V0KSxkZWxldGUgZS50aW1lckdhdGhlcmluZ1RpbWVvdXQsY2xlYXJUaW1lb3V0KGUudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSksZGVsZXRlIGUudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSxlLm9uaWNlY2FuZGlkYXRlJiZlLm9uaWNlY2FuZGlkYXRlKHQsbnVsbCl9LHQub25hZGRzdHJlYW09ZnVuY3Rpb24odCl7bC5jYWxsKGUpfHwoaChcIm9uYWRkc3RyZWFtKCkgfCBzdHJlYW06ICVvXCIsdC5zdHJlYW0pLGUub25hZGRzdHJlYW0mJmUub25hZGRzdHJlYW0odCx0LnN0cmVhbSkpfSx0Lm9ucmVtb3Zlc3RyZWFtPWZ1bmN0aW9uKHQpe2wuY2FsbChlKXx8KGgoXCJvbnJlbW92ZXN0cmVhbSgpIHwgc3RyZWFtOiAlb1wiLHQuc3RyZWFtKSxlLm9ucmVtb3Zlc3RyZWFtJiZlLm9ucmVtb3Zlc3RyZWFtKHQsdC5zdHJlYW0pKX0sdC5vbmRhdGFjaGFubmVsPWZ1bmN0aW9uKHQpe2wuY2FsbChlKXx8KGgoXCJvbmRhdGFjaGFubmVsKCkgfCBkYXRhY2hhbm5lbDogJW9cIix0LmNoYW5uZWwpLGUub25kYXRhY2hhbm5lbCYmZS5vbmRhdGFjaGFubmVsKHQsdC5jaGFubmVsKSl9LHQub25zaWduYWxpbmdzdGF0ZWNoYW5nZT1mdW5jdGlvbihuKXt0LnNpZ25hbGluZ1N0YXRlIT09ZS5vdXJTaWduYWxpbmdTdGF0ZSYmKGgoXCJvbnNpZ25hbGluZ3N0YXRlY2hhbmdlKCkgfCBzaWduYWxpbmdTdGF0ZTogJXNcIix0LnNpZ25hbGluZ1N0YXRlKSxlLm91clNpZ25hbGluZ1N0YXRlPXQuc2lnbmFsaW5nU3RhdGUsZS5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlJiZlLm9uc2lnbmFsaW5nc3RhdGVjaGFuZ2Uobix0LnNpZ25hbGluZ1N0YXRlKSl9LHQub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24obil7dC5pY2VDb25uZWN0aW9uU3RhdGUhPT1lLm91ckljZUNvbm5lY3Rpb25TdGF0ZSYmKGgoXCJvbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSgpIHwgaWNlQ29ubmVjdGlvblN0YXRlOiAlc1wiLHQuaWNlQ29ubmVjdGlvblN0YXRlKSxlLm91ckljZUNvbm5lY3Rpb25TdGF0ZT10LmljZUNvbm5lY3Rpb25TdGF0ZSxlLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJiZlLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKG4sdC5pY2VDb25uZWN0aW9uU3RhdGUpKX0sdC5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlPWZ1bmN0aW9uKG4pe2wuY2FsbChlKXx8dC5pY2VHYXRoZXJpbmdTdGF0ZSE9PWUub3VySWNlR2F0aGVyaW5nU3RhdGUmJihoKFwib25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSgpIHwgaWNlR2F0aGVyaW5nU3RhdGU6ICVzXCIsdC5pY2VHYXRoZXJpbmdTdGF0ZSksZS5vdXJJY2VHYXRoZXJpbmdTdGF0ZT10LmljZUdhdGhlcmluZ1N0YXRlLGUub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZSYmZS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlKG4sdC5pY2VHYXRoZXJpbmdTdGF0ZSkpfSx0Lm9uaWRlbnRpdHlyZXN1bHQ9ZnVuY3Rpb24odCl7bC5jYWxsKGUpfHwoaChcIm9uaWRlbnRpdHlyZXN1bHQoKVwiKSxlLm9uaWRlbnRpdHlyZXN1bHQmJmUub25pZGVudGl0eXJlc3VsdCh0KSl9LHQub25wZWVyaWRlbnRpdHk9ZnVuY3Rpb24odCl7bC5jYWxsKGUpfHwoaChcIm9ucGVlcmlkZW50aXR5KClcIiksZS5vbnBlZXJpZGVudGl0eSYmZS5vbnBlZXJpZGVudGl0eSh0KSl9LHQub25pZHBhc3NlcnRpb25lcnJvcj1mdW5jdGlvbih0KXtsLmNhbGwoZSl8fChoKFwib25pZHBhc3NlcnRpb25lcnJvcigpXCIpLGUub25pZHBhc3NlcnRpb25lcnJvciYmZS5vbmlkcGFzc2VydGlvbmVycm9yKHQpKX0sdC5vbmlkcHZhbGlkYXRpb25lcnJvcj1mdW5jdGlvbih0KXtsLmNhbGwoZSl8fChoKFwib25pZHB2YWxpZGF0aW9uZXJyb3IoKVwiKSxlLm9uaWRwdmFsaWRhdGlvbmVycm9yJiZlLm9uaWRwdmFsaWRhdGlvbmVycm9yKHQpKX19ZnVuY3Rpb24gbygpe3RoaXMucGNDb25zdHJhaW50cz90aGlzLnBjPW5ldyBwLlJUQ1BlZXJDb25uZWN0aW9uKHRoaXMucGNDb25maWcsdGhpcy5wY0NvbnN0cmFpbnRzKTp0aGlzLnBjPW5ldyBwLlJUQ1BlZXJDb25uZWN0aW9uKHRoaXMucGNDb25maWcpLGkuY2FsbCh0aGlzKX1mdW5jdGlvbiB1KCl7dmFyIGU9dGhpcy5wYyx0PXRoaXMub3B0aW9ucyxuPW51bGw7cmV0dXJuIGUubG9jYWxEZXNjcmlwdGlvbj8odC5pY2VUcmFuc3BvcnRzUmVsYXk/bj1lLmxvY2FsRGVzY3JpcHRpb24uc2RwLnJlcGxhY2UoZi5SRUdFWFBfU0RQX05PTl9SRUxBWV9DQU5ESURBVEVTLFwiXCIpOnQuaWNlVHJhbnNwb3J0c05vbmUmJihuPWUubG9jYWxEZXNjcmlwdGlvbi5zZHAucmVwbGFjZShmLlJFR0VYUF9TRFBfQ0FORElEQVRFUyxcIlwiKSksdGhpcy5vdXJMb2NhbERlc2NyaXB0aW9uPW5ldyBwLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTplLmxvY2FsRGVzY3JpcHRpb24udHlwZSxzZHA6bnx8ZS5sb2NhbERlc2NyaXB0aW9uLnNkcH0pLHRoaXMub3VyTG9jYWxEZXNjcmlwdGlvbik6KHRoaXMub3VyTG9jYWxEZXNjcmlwdGlvbj1udWxsLG51bGwpfWZ1bmN0aW9uIGEoKXt2YXIgZT10aGlzO09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse3BlZXJDb25uZWN0aW9uOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5wY319LHNpZ25hbGluZ1N0YXRlOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5wYy5zaWduYWxpbmdTdGF0ZX19LGljZUNvbm5lY3Rpb25TdGF0ZTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUucGMuaWNlQ29ubmVjdGlvblN0YXRlfX0saWNlR2F0aGVyaW5nU3RhdGU6e2dldDpmdW5jdGlvbigpe3JldHVybiBlLnBjLmljZUdhdGhlcmluZ1N0YXRlfX0sbG9jYWxEZXNjcmlwdGlvbjp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHUuY2FsbChlKX19LHJlbW90ZURlc2NyaXB0aW9uOntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5wYy5yZW1vdGVEZXNjcmlwdGlvbn19LHBlZXJJZGVudGl0eTp7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGUucGMucGVlcklkZW50aXR5fX19KX10LmV4cG9ydHM9cjt2YXIgYz1lKFwibWVyZ2VcIiksaD1lKFwiZGVidWdcIikoXCJydGNuaW5qYTpSVENQZWVyQ29ubmVjdGlvblwiKSxkPWUoXCJkZWJ1Z1wiKShcInJ0Y25pbmphOkVSUk9SOlJUQ1BlZXJDb25uZWN0aW9uXCIpLHA9ZShcIi4vQWRhcHRlclwiKSxmPXtSRUdFWFBfTk9STUFMSVpFRF9DQU5ESURBVEU6bmV3IFJlZ0V4cCgvXmNhbmRpZGF0ZTovaSksUkVHRVhQX0ZJWF9DQU5ESURBVEU6bmV3IFJlZ0V4cCgvKF5hPXxcXHJ8XFxuKS9naSksUkVHRVhQX1JFTEFZX0NBTkRJREFURTpuZXcgUmVnRXhwKC8gcmVsYXkgL2kpLFJFR0VYUF9TRFBfQ0FORElEQVRFUzpuZXcgUmVnRXhwKC9eYT1jYW5kaWRhdGU6LipcXHJcXG4vZ2ltKSxSRUdFWFBfU0RQX05PTl9SRUxBWV9DQU5ESURBVEVTOm5ldyBSZWdFeHAoL15hPWNhbmRpZGF0ZTooLig/IXJlbGF5ICkpKlxcclxcbi9naW0pfSxtPXtub3JtYWxpemVDYW5kaWRhdGU6bnVsbH07ZC5sb2c9Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSksci5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oZSx0LG4pe2goXCJjcmVhdGVPZmZlcigpXCIpO3ZhciByPXRoaXM7cC5maXhSVENPZmZlck9wdGlvbnMobiksdGhpcy5wYy5jcmVhdGVPZmZlcihmdW5jdGlvbih0KXtsLmNhbGwocil8fChoKFwiY3JlYXRlT2ZmZXIoKSB8IHN1Y2Nlc3NcIiksZSYmZSh0KSl9LGZ1bmN0aW9uKGUpe2wuY2FsbChyKXx8KGQoXCJjcmVhdGVPZmZlcigpIHwgZXJyb3I6XCIsZSksdCYmdChlKSl9LG4pfSxyLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oZSx0LG4pe2goXCJjcmVhdGVBbnN3ZXIoKVwiKTt2YXIgcj10aGlzO3RoaXMucGMuY3JlYXRlQW5zd2VyKGZ1bmN0aW9uKHQpe2wuY2FsbChyKXx8KGgoXCJjcmVhdGVBbnN3ZXIoKSB8IHN1Y2Nlc3NcIiksZSYmZSh0KSl9LGZ1bmN0aW9uKGUpe2wuY2FsbChyKXx8KGQoXCJjcmVhdGVBbnN3ZXIoKSB8IGVycm9yOlwiLGUpLHQmJnQoZSkpfSxuKX0sci5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbj1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gcigpe1wibnVtYmVyXCI9PXR5cGVvZiBzLm9wdGlvbnMuZ2F0aGVyaW5nVGltZW91dCYmXCJjb21wbGV0ZVwiIT09cy5wYy5pY2VHYXRoZXJpbmdTdGF0ZSYmKGgoXCJzZXRMb2NhbERlc2NyaXB0aW9uKCkgfCBlbmRpbmcgZ2F0aGVyaW5nIGluICVkIG1zIChnYXRoZXJpbmdUaW1lb3V0IG9wdGlvbilcIixzLm9wdGlvbnMuZ2F0aGVyaW5nVGltZW91dCkscy50aW1lckdhdGhlcmluZ1RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2wuY2FsbChzKXx8KGgoXCJmb3JjZWQgZW5kIG9mIGNhbmRpZGF0ZXMgYWZ0ZXIgZ2F0aGVyaW5nVGltZW91dCB0aW1lb3V0XCIpLGRlbGV0ZSBzLnRpbWVyR2F0aGVyaW5nVGltZW91dCxjbGVhclRpbWVvdXQocy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5KSxkZWxldGUgcy50aW1lckdhdGhlcmluZ1RpbWVvdXRBZnRlclJlbGF5LHMuaWdub3JlSWNlR2F0aGVyaW5nPSEwLHMub25pY2VjYW5kaWRhdGUmJnMub25pY2VjYW5kaWRhdGUoe2NhbmRpZGF0ZTpudWxsfSxudWxsKSl9LHMub3B0aW9ucy5nYXRoZXJpbmdUaW1lb3V0KSl9aChcInNldExvY2FsRGVzY3JpcHRpb24oKVwiKTt2YXIgcz10aGlzO3RoaXMucGMuc2V0TG9jYWxEZXNjcmlwdGlvbihlLGZ1bmN0aW9uKCl7bC5jYWxsKHMpfHwoaChcInNldExvY2FsRGVzY3JpcHRpb24oKSB8IHN1Y2Nlc3NcIiksY2xlYXJUaW1lb3V0KHMudGltZXJHYXRoZXJpbmdUaW1lb3V0KSxkZWxldGUgcy50aW1lckdhdGhlcmluZ1RpbWVvdXQsY2xlYXJUaW1lb3V0KHMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSksZGVsZXRlIHMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSxyKCksdCYmdCgpKX0sZnVuY3Rpb24oZSl7bC5jYWxsKHMpfHwoZChcInNldExvY2FsRGVzY3JpcHRpb24oKSB8IGVycm9yOlwiLGUpLG4mJm4oZSkpfSksdGhpcy5pZ25vcmVJY2VHYXRoZXJpbmc9ITF9LHIucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKGUsdCxuKXtoKFwic2V0UmVtb3RlRGVzY3JpcHRpb24oKVwiKTt2YXIgcj10aGlzO3RoaXMucGMuc2V0UmVtb3RlRGVzY3JpcHRpb24oZSxmdW5jdGlvbigpe2wuY2FsbChyKXx8KGgoXCJzZXRSZW1vdGVEZXNjcmlwdGlvbigpIHwgc3VjY2Vzc1wiKSx0JiZ0KCkpfSxmdW5jdGlvbihlKXtsLmNhbGwocil8fChkKFwic2V0UmVtb3RlRGVzY3JpcHRpb24oKSB8IGVycm9yOlwiLGUpLG4mJm4oZSkpfSl9LHIucHJvdG90eXBlLnVwZGF0ZUljZT1mdW5jdGlvbihlKXtoKFwidXBkYXRlSWNlKCkgfCBwY0NvbmZpZzogJW9cIixlKSxzLmNhbGwodGhpcyxlKSx0aGlzLnBjLnVwZGF0ZUljZSh0aGlzLnBjQ29uZmlnKSx0aGlzLmlnbm9yZUljZUdhdGhlcmluZz0hMX0sci5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUsdCxuKXtoKFwiYWRkSWNlQ2FuZGlkYXRlKCkgfCBjYW5kaWRhdGU6ICVvXCIsZSk7dmFyIHI9dGhpczt0aGlzLnBjLmFkZEljZUNhbmRpZGF0ZShlLGZ1bmN0aW9uKCl7bC5jYWxsKHIpfHwoaChcImFkZEljZUNhbmRpZGF0ZSgpIHwgc3VjY2Vzc1wiKSx0JiZ0KCkpfSxmdW5jdGlvbihlKXtsLmNhbGwocil8fChkKFwiYWRkSWNlQ2FuZGlkYXRlKCkgfCBlcnJvcjpcIixlKSxuJiZuKGUpKX0pfSxyLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGgoXCJnZXRDb25maWd1cmF0aW9uKClcIiksdGhpcy5wYy5nZXRDb25maWd1cmF0aW9uKCl9LHIucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiBoKFwiZ2V0TG9jYWxTdHJlYW1zKClcIiksdGhpcy5wYy5nZXRMb2NhbFN0cmVhbXMoKX0sci5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiBoKFwiZ2V0UmVtb3RlU3RyZWFtcygpXCIpLHRoaXMucGMuZ2V0UmVtb3RlU3RyZWFtcygpfSxyLnByb3RvdHlwZS5nZXRTdHJlYW1CeUlkPWZ1bmN0aW9uKGUpe3JldHVybiBoKFwiZ2V0U3RyZWFtQnlJZCgpIHwgc3RyZWFtSWQ6ICVzXCIsZSksdGhpcy5wYy5nZXRTdHJlYW1CeUlkKGUpfSxyLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7aChcImFkZFN0cmVhbSgpIHwgc3RyZWFtOiAlc1wiLGUpLHRoaXMucGMuYWRkU3RyZWFtKGUpfSxyLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7aChcInJlbW92ZVN0cmVhbSgpIHwgc3RyZWFtOiAlb1wiLGUpLHRoaXMucGMucmVtb3ZlU3RyZWFtKGUpfSxyLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe2goXCJjbG9zZSgpXCIpLHRoaXMuY2xvc2VkPSEwLGNsZWFyVGltZW91dCh0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dCksZGVsZXRlIHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0LGNsZWFyVGltZW91dCh0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXkpLGRlbGV0ZSB0aGlzLnRpbWVyR2F0aGVyaW5nVGltZW91dEFmdGVyUmVsYXksdGhpcy5wYy5jbG9zZSgpfSxyLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbD1mdW5jdGlvbigpe3JldHVybiBoKFwiY3JlYXRlRGF0YUNoYW5uZWwoKVwiKSx0aGlzLnBjLmNyZWF0ZURhdGFDaGFubmVsLmFwcGx5KHRoaXMucGMsYXJndW1lbnRzKX0sci5wcm90b3R5cGUuY3JlYXRlRFRNRlNlbmRlcj1mdW5jdGlvbihlKXtyZXR1cm4gaChcImNyZWF0ZURUTUZTZW5kZXIoKVwiKSx0aGlzLnBjLmNyZWF0ZURUTUZTZW5kZXIoZSl9LHIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIGgoXCJnZXRTdGF0cygpXCIpLHRoaXMucGMuZ2V0U3RhdHMuYXBwbHkodGhpcy5wYyxhcmd1bWVudHMpfSxyLnByb3RvdHlwZS5zZXRJZGVudGl0eVByb3ZpZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGgoXCJzZXRJZGVudGl0eVByb3ZpZGVyKClcIiksdGhpcy5wYy5zZXRJZGVudGl0eVByb3ZpZGVyLmFwcGx5KHRoaXMucGMsYXJndW1lbnRzKX0sci5wcm90b3R5cGUuZ2V0SWRlbnRpdHlBc3NlcnRpb249ZnVuY3Rpb24oKXtyZXR1cm4gaChcImdldElkZW50aXR5QXNzZXJ0aW9uKClcIiksdGhpcy5wYy5nZXRJZGVudGl0eUFzc2VydGlvbigpfSxyLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbihlKXtoKFwicmVzZXQoKSB8IHBjQ29uZmlnOiAlb1wiLGUpO3ZhciB0PXRoaXMucGM7dC5vbm5lZ290aWF0aW9ubmVlZGVkPW51bGwsdC5vbmljZWNhbmRpZGF0ZT1udWxsLHQub25hZGRzdHJlYW09bnVsbCx0Lm9ucmVtb3Zlc3RyZWFtPW51bGwsdC5vbmRhdGFjaGFubmVsPW51bGwsdC5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlPW51bGwsdC5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1udWxsLHQub25pY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZT1udWxsLHQub25pZGVudGl0eXJlc3VsdD1udWxsLHQub25wZWVyaWRlbnRpdHk9bnVsbCx0Lm9uaWRwYXNzZXJ0aW9uZXJyb3I9bnVsbCx0Lm9uaWRwdmFsaWRhdGlvbmVycm9yPW51bGwsY2xlYXJUaW1lb3V0KHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0KSxkZWxldGUgdGhpcy50aW1lckdhdGhlcmluZ1RpbWVvdXQsY2xlYXJUaW1lb3V0KHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSksZGVsZXRlIHRoaXMudGltZXJHYXRoZXJpbmdUaW1lb3V0QWZ0ZXJSZWxheSxoKFwicmVzZXQoKSB8IGNsb3NpbmcgY3VycmVudCBwZWVyQ29ubmVjdGlvblwiKSx0LmNsb3NlKCkscy5jYWxsKHRoaXMsZSksby5jYWxsKHRoaXMpfX0se1wiLi9BZGFwdGVyXCI6MzYsZGVidWc6MzMsbWVyZ2U6NDF9XSwzODpbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHIoZSl7dmFyIHQ9dShlfHx7fSk7cmV0dXJuIGM9ITAsci5SVENQZWVyQ29ubmVjdGlvbj1hLHIuZ2V0VXNlck1lZGlhPXQuZ2V0VXNlck1lZGlhLHIuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uPXQuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uLHIuUlRDSWNlQ2FuZGlkYXRlPXQuUlRDSWNlQ2FuZGlkYXRlLHIuTWVkaWFTdHJlYW1UcmFjaz10Lk1lZGlhU3RyZWFtVHJhY2ssci5nZXRNZWRpYURldmljZXM9dC5nZXRNZWRpYURldmljZXMsci5hdHRhY2hNZWRpYVN0cmVhbT10LmF0dGFjaE1lZGlhU3RyZWFtLHIuY2xvc2VNZWRpYVN0cmVhbT10LmNsb3NlTWVkaWFTdHJlYW0sci5jYW5SZW5lZ290aWF0ZT10LmNhblJlbmVnb3RpYXRlLHQuaGFzV2ViUlRDKCk/KGwoXCJXZWJSVEMgc3VwcG9ydGVkXCIpLCEwKTooaShcIldlYlJUQyBub3Qgc3VwcG9ydGVkXCIpLCExKX10LmV4cG9ydHM9cjt2YXIgcz1lKFwiYm93c2VyXCIpLGw9ZShcImRlYnVnXCIpKFwicnRjbmluamFcIiksaT1lKFwiZGVidWdcIikoXCJydGNuaW5qYTpFUlJPUlwiKSxvPWUoXCIuL3ZlcnNpb25cIiksdT1lKFwiLi9BZGFwdGVyXCIpLGE9ZShcIi4vUlRDUGVlckNvbm5lY3Rpb25cIiksYz0hMTtpLmxvZz1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKSxsKFwidmVyc2lvbiAlc1wiLG8pLGwoXCJkZXRlY3RlZCBicm93c2VyOiAlcyAlcyBbbW9iaWxlOiVzLCB0YWJsZXQ6JXMsIGFuZHJvaWQ6JXMsIGlvczolc11cIixzLm5hbWUscy52ZXJzaW9uLCEhcy5tb2JpbGUsISFzLnRhYmxldCwhIXMuYW5kcm9pZCwhIXMuaW9zKSxyLmhhc1dlYlJUQz1mdW5jdGlvbigpe3JldHVybiBjfHxyKCksdS5oYXNXZWJSVEMoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCJ2ZXJzaW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBvfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiY2FsbGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBjfX0pLHIuZGVidWc9ZShcImRlYnVnXCIpLHIuYnJvd3Nlcj1zfSx7XCIuL0FkYXB0ZXJcIjozNixcIi4vUlRDUGVlckNvbm5lY3Rpb25cIjozNyxcIi4vdmVyc2lvblwiOjM5LGJvd3Nlcjo0MCxkZWJ1ZzozM31dLDM5OltmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dC5leHBvcnRzPWUoXCIuLi9wYWNrYWdlLmpzb25cIikudmVyc2lvbn0se1wiLi4vcGFja2FnZS5qc29uXCI6NDJ9XSw0MDpbZnVuY3Rpb24odCxuLHIpeyFmdW5jdGlvbih0LHIpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBuJiZuLmV4cG9ydHM/bi5leHBvcnRzPXIoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLmFtZD9lKHIpOnRoaXNbdF09cigpfShcImJvd3NlclwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXtmdW5jdGlvbiBuKHQpe3ZhciBuPWUubWF0Y2godCk7cmV0dXJuIG4mJm4ubGVuZ3RoPjEmJm5bMV18fFwiXCJ9ZnVuY3Rpb24gcih0KXt2YXIgbj1lLm1hdGNoKHQpO3JldHVybiBuJiZuLmxlbmd0aD4xJiZuWzJdfHxcIlwifXZhciBzLGw9bigvKGlwb2R8aXBob25lfGlwYWQpL2kpLnRvTG93ZXJDYXNlKCksaT0vbGlrZSBhbmRyb2lkL2kudGVzdChlKSxvPSFpJiYvYW5kcm9pZC9pLnRlc3QoZSksdT0vbmV4dXNcXHMqWzAtNl1cXHMqL2kudGVzdChlKSxhPSF1JiYvbmV4dXNcXHMqWzAtOV0rL2kudGVzdChlKSxjPS9Dck9TLy50ZXN0KGUpLGg9L3NpbGsvaS50ZXN0KGUpLGQ9L3NhaWxmaXNoL2kudGVzdChlKSxwPS90aXplbi9pLnRlc3QoZSksZj0vKHdlYnxocHcpb3MvaS50ZXN0KGUpLG09L3dpbmRvd3MgcGhvbmUvaS50ZXN0KGUpLGc9IW0mJi93aW5kb3dzL2kudGVzdChlKSxUPSFsJiYhaCYmL21hY2ludG9zaC9pLnRlc3QoZSksXz0hbyYmIWQmJiFwJiYhZiYmL2xpbnV4L2kudGVzdChlKSx2PW4oL2VkZ2VcXC8oXFxkKyhcXC5cXGQrKT8pL2kpLEM9bigvdmVyc2lvblxcLyhcXGQrKFxcLlxcZCspPykvaSksUz0vdGFibGV0L2kudGVzdChlKSxFPSFTJiYvW14tXW1vYmkvaS50ZXN0KGUpLEE9L3hib3gvaS50ZXN0KGUpOy9vcGVyYXxvcHJ8b3Bpb3MvaS50ZXN0KGUpP3M9e25hbWU6XCJPcGVyYVwiLG9wZXJhOnQsdmVyc2lvbjpDfHxuKC8oPzpvcGVyYXxvcHJ8b3Bpb3MpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpfTovY29hc3QvaS50ZXN0KGUpP3M9e25hbWU6XCJPcGVyYSBDb2FzdFwiLGNvYXN0OnQsdmVyc2lvbjpDfHxuKC8oPzpjb2FzdClbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSl9Oi95YWJyb3dzZXIvaS50ZXN0KGUpP3M9e25hbWU6XCJZYW5kZXggQnJvd3NlclwiLHlhbmRleGJyb3dzZXI6dCx2ZXJzaW9uOkN8fG4oLyg/OnlhYnJvd3NlcilbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSl9Oi91Y2Jyb3dzZXIvaS50ZXN0KGUpP3M9e25hbWU6XCJVQyBCcm93c2VyXCIsdWNicm93c2VyOnQsdmVyc2lvbjpuKC8oPzp1Y2Jyb3dzZXIpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSl9Oi9teGlvcy9pLnRlc3QoZSk/cz17bmFtZTpcIk1heHRob25cIixtYXh0aG9uOnQsdmVyc2lvbjpuKC8oPzpteGlvcylbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKX06L2VwaXBoYW55L2kudGVzdChlKT9zPXtuYW1lOlwiRXBpcGhhbnlcIixlcGlwaGFueTp0LHZlcnNpb246bigvKD86ZXBpcGhhbnkpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSl9Oi9wdWZmaW4vaS50ZXN0KGUpP3M9e25hbWU6XCJQdWZmaW5cIixwdWZmaW46dCx2ZXJzaW9uOm4oLyg/OnB1ZmZpbilbXFxzXFwvXShcXGQrKD86XFwuXFxkKyk/KS9pKX06L3NsZWlwbmlyL2kudGVzdChlKT9zPXtuYW1lOlwiU2xlaXBuaXJcIixzbGVpcG5pcjp0LHZlcnNpb246bigvKD86c2xlaXBuaXIpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSl9Oi9rLW1lbGVvbi9pLnRlc3QoZSk/cz17bmFtZTpcIkstTWVsZW9uXCIsa01lbGVvbjp0LHZlcnNpb246bigvKD86ay1tZWxlb24pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSl9Om0/KHM9e25hbWU6XCJXaW5kb3dzIFBob25lXCIsd2luZG93c3Bob25lOnR9LHY/KHMubXNlZGdlPXQscy52ZXJzaW9uPXYpOihzLm1zaWU9dCxzLnZlcnNpb249bigvaWVtb2JpbGVcXC8oXFxkKyhcXC5cXGQrKT8pL2kpKSk6L21zaWV8dHJpZGVudC9pLnRlc3QoZSk/cz17bmFtZTpcIkludGVybmV0IEV4cGxvcmVyXCIsbXNpZTp0LHZlcnNpb246bigvKD86bXNpZSB8cnY6KShcXGQrKFxcLlxcZCspPykvaSl9OmM/cz17bmFtZTpcIkNocm9tZVwiLGNocm9tZW9zOnQsY2hyb21lQm9vazp0LGNocm9tZTp0LHZlcnNpb246bigvKD86Y2hyb21lfGNyaW9zfGNybW8pXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06L2Nocm9tZS4rPyBlZGdlL2kudGVzdChlKT9zPXtuYW1lOlwiTWljcm9zb2Z0IEVkZ2VcIixtc2VkZ2U6dCx2ZXJzaW9uOnZ9Oi92aXZhbGRpL2kudGVzdChlKT9zPXtuYW1lOlwiVml2YWxkaVwiLHZpdmFsZGk6dCx2ZXJzaW9uOm4oL3ZpdmFsZGlcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfHxDfTpkP3M9e25hbWU6XCJTYWlsZmlzaFwiLHNhaWxmaXNoOnQsdmVyc2lvbjpuKC9zYWlsZmlzaFxccz9icm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06L3NlYW1vbmtleVxcLy9pLnRlc3QoZSk/cz17bmFtZTpcIlNlYU1vbmtleVwiLHNlYW1vbmtleTp0LHZlcnNpb246bigvc2VhbW9ua2V5XFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06L2ZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zL2kudGVzdChlKT8ocz17bmFtZTpcIkZpcmVmb3hcIixmaXJlZm94OnQsdmVyc2lvbjpuKC8oPzpmaXJlZm94fGljZXdlYXNlbHxmeGlvcylbIFxcL10oXFxkKyhcXC5cXGQrKT8pL2kpfSwvXFwoKG1vYmlsZXx0YWJsZXQpO1teXFwpXSpydjpbXFxkXFwuXStcXCkvaS50ZXN0KGUpJiYocy5maXJlZm94b3M9dCkpOmg/cz17bmFtZTpcIkFtYXpvbiBTaWxrXCIsc2lsazp0LHZlcnNpb246bigvc2lsa1xcLyhcXGQrKFxcLlxcZCspPykvaSl9Oi9waGFudG9tL2kudGVzdChlKT9zPXtuYW1lOlwiUGhhbnRvbUpTXCIscGhhbnRvbTp0LHZlcnNpb246bigvcGhhbnRvbWpzXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06L3NsaW1lcmpzL2kudGVzdChlKT9zPXtuYW1lOlwiU2xpbWVySlNcIixzbGltZXI6dCx2ZXJzaW9uOm4oL3NsaW1lcmpzXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06L2JsYWNrYmVycnl8XFxiYmJcXGQrL2kudGVzdChlKXx8L3JpbVxcc3RhYmxldC9pLnRlc3QoZSk/cz17bmFtZTpcIkJsYWNrQmVycnlcIixibGFja2JlcnJ5OnQsdmVyc2lvbjpDfHxuKC9ibGFja2JlcnJ5W1xcZF0rXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX06Zj8ocz17bmFtZTpcIldlYk9TXCIsd2Vib3M6dCx2ZXJzaW9uOkN8fG4oL3coPzplYik/b3Nicm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKX0sL3RvdWNocGFkXFwvL2kudGVzdChlKSYmKHMudG91Y2hwYWQ9dCkpOi9iYWRhL2kudGVzdChlKT9zPXtuYW1lOlwiQmFkYVwiLGJhZGE6dCx2ZXJzaW9uOm4oL2RvbGZpblxcLyhcXGQrKFxcLlxcZCspPykvaSl9OnA/cz17bmFtZTpcIlRpemVuXCIsdGl6ZW46dCx2ZXJzaW9uOm4oLyg/OnRpemVuXFxzPyk/YnJvd3NlclxcLyhcXGQrKFxcLlxcZCspPykvaSl8fEN9Oi9xdXB6aWxsYS9pLnRlc3QoZSk/cz17bmFtZTpcIlF1cFppbGxhXCIscXVwemlsbGE6dCx2ZXJzaW9uOm4oLyg/OnF1cHppbGxhKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpfHxDfTovY2hyb21pdW0vaS50ZXN0KGUpP3M9e25hbWU6XCJDaHJvbWl1bVwiLGNocm9taXVtOnQsdmVyc2lvbjpuKC8oPzpjaHJvbWl1bSlbXFxzXFwvXShcXGQrKD86XFwuXFxkKyk/KS9pKXx8Q306L2Nocm9tZXxjcmlvc3xjcm1vL2kudGVzdChlKT9zPXtuYW1lOlwiQ2hyb21lXCIsY2hyb21lOnQsdmVyc2lvbjpuKC8oPzpjaHJvbWV8Y3Jpb3N8Y3JtbylcXC8oXFxkKyhcXC5cXGQrKT8pL2kpfTpvP3M9e25hbWU6XCJBbmRyb2lkXCIsdmVyc2lvbjpDfTovc2FmYXJpfGFwcGxld2Via2l0L2kudGVzdChlKT8ocz17bmFtZTpcIlNhZmFyaVwiLHNhZmFyaTp0fSxDJiYocy52ZXJzaW9uPUMpKTpsPyhzPXtuYW1lOlwiaXBob25lXCI9PWw/XCJpUGhvbmVcIjpcImlwYWRcIj09bD9cImlQYWRcIjpcImlQb2RcIn0sQyYmKHMudmVyc2lvbj1DKSk6cz0vZ29vZ2xlYm90L2kudGVzdChlKT97bmFtZTpcIkdvb2dsZWJvdFwiLGdvb2dsZWJvdDp0LHZlcnNpb246bigvZ29vZ2xlYm90XFwvKFxcZCsoXFwuXFxkKykpL2kpfHxDfTp7bmFtZTpuKC9eKC4qKVxcLyguKikgLyksdmVyc2lvbjpyKC9eKC4qKVxcLyguKikgLyl9LCFzLm1zZWRnZSYmLyhhcHBsZSk/d2Via2l0L2kudGVzdChlKT8oLyhhcHBsZSk/d2Via2l0XFwvNTM3XFwuMzYvaS50ZXN0KGUpPyhzLm5hbWU9cy5uYW1lfHxcIkJsaW5rXCIscy5ibGluaz10KToocy5uYW1lPXMubmFtZXx8XCJXZWJraXRcIixzLndlYmtpdD10KSwhcy52ZXJzaW9uJiZDJiYocy52ZXJzaW9uPUMpKTohcy5vcGVyYSYmL2dlY2tvXFwvL2kudGVzdChlKSYmKHMubmFtZT1zLm5hbWV8fFwiR2Vja29cIixzLmdlY2tvPXQscy52ZXJzaW9uPXMudmVyc2lvbnx8bigvZ2Vja29cXC8oXFxkKyhcXC5cXGQrKT8pL2kpKSxzLm1zZWRnZXx8IW8mJiFzLnNpbGs/bD8oc1tsXT10LHMuaW9zPXQpOlQ/cy5tYWM9dDpBP3MueGJveD10Omc/cy53aW5kb3dzPXQ6XyYmKHMubGludXg9dCk6cy5hbmRyb2lkPXQ7dmFyIHk9XCJcIjtzLndpbmRvd3NwaG9uZT95PW4oL3dpbmRvd3MgcGhvbmUgKD86b3MpP1xccz8oXFxkKyhcXC5cXGQrKSopL2kpOmw/KHk9bigvb3MgKFxcZCsoW19cXHNdXFxkKykqKSBsaWtlIG1hYyBvcyB4L2kpLHk9eS5yZXBsYWNlKC9bX1xcc10vZyxcIi5cIikpOm8/eT1uKC9hbmRyb2lkWyBcXC8tXShcXGQrKFxcLlxcZCspKikvaSk6cy53ZWJvcz95PW4oLyg/OndlYnxocHcpb3NcXC8oXFxkKyhcXC5cXGQrKSopL2kpOnMuYmxhY2tiZXJyeT95PW4oL3JpbVxcc3RhYmxldFxcc29zXFxzKFxcZCsoXFwuXFxkKykqKS9pKTpzLmJhZGE/eT1uKC9iYWRhXFwvKFxcZCsoXFwuXFxkKykqKS9pKTpzLnRpemVuJiYoeT1uKC90aXplbltcXC9cXHNdKFxcZCsoXFwuXFxkKykqKS9pKSkseSYmKHMub3N2ZXJzaW9uPXkpO3ZhciBSPXkuc3BsaXQoXCIuXCIpWzBdO3JldHVybiBTfHxhfHxcImlwYWRcIj09bHx8byYmKDM9PVJ8fFI+PTQmJiFFKXx8cy5zaWxrP3MudGFibGV0PXQ6KEV8fFwiaXBob25lXCI9PWx8fFwiaXBvZFwiPT1sfHxvfHx1fHxzLmJsYWNrYmVycnl8fHMud2Vib3N8fHMuYmFkYSkmJihzLm1vYmlsZT10KSxzLm1zZWRnZXx8cy5tc2llJiZzLnZlcnNpb24+PTEwfHxzLnlhbmRleGJyb3dzZXImJnMudmVyc2lvbj49MTV8fHMudml2YWxkaSYmcy52ZXJzaW9uPj0xfHxzLmNocm9tZSYmcy52ZXJzaW9uPj0yMHx8cy5maXJlZm94JiZzLnZlcnNpb24+PTIwfHxzLnNhZmFyaSYmcy52ZXJzaW9uPj02fHxzLm9wZXJhJiZzLnZlcnNpb24+PTEwfHxzLmlvcyYmcy5vc3ZlcnNpb24mJnMub3N2ZXJzaW9uLnNwbGl0KFwiLlwiKVswXT49Nnx8cy5ibGFja2JlcnJ5JiZzLnZlcnNpb24+PTEwLjE/cy5hPXQ6cy5tc2llJiZzLnZlcnNpb248MTB8fHMuY2hyb21lJiZzLnZlcnNpb248MjB8fHMuZmlyZWZveCYmcy52ZXJzaW9uPDIwfHxzLnNhZmFyaSYmcy52ZXJzaW9uPDZ8fHMub3BlcmEmJnMudmVyc2lvbjwxMHx8cy5pb3MmJnMub3N2ZXJzaW9uJiZzLm9zdmVyc2lvbi5zcGxpdChcIi5cIilbMF08Nj9zLmM9dDpzLng9dCxzfXZhciB0PSEwLG49ZShcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yP25hdmlnYXRvci51c2VyQWdlbnQ6XCJcIik7cmV0dXJuIG4udGVzdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoOysrdCl7dmFyIHI9ZVt0XTtpZihcInN0cmluZ1wiPT10eXBlb2YgciYmciBpbiBuKXJldHVybiEwfXJldHVybiExfSxuLl9kZXRlY3Q9ZSxufSl9LHt9XSw0MTpbZnVuY3Rpb24oZSx0LG4peyFmdW5jdGlvbihlKXtmdW5jdGlvbiBuKGUsdCl7aWYoXCJvYmplY3RcIiE9PXMoZSkpcmV0dXJuIHQ7Zm9yKHZhciByIGluIHQpXCJvYmplY3RcIj09PXMoZVtyXSkmJlwib2JqZWN0XCI9PT1zKHRbcl0pP2Vbcl09bihlW3JdLHRbcl0pOmVbcl09dFtyXTtyZXR1cm4gZX1mdW5jdGlvbiByKGUsdCxyKXt2YXIgaT1yWzBdLG89ci5sZW5ndGg7KGV8fFwib2JqZWN0XCIhPT1zKGkpKSYmKGk9e30pO2Zvcih2YXIgdT0wO28+dTsrK3Upe3ZhciBhPXJbdV0sYz1zKGEpO2lmKFwib2JqZWN0XCI9PT1jKWZvcih2YXIgaCBpbiBhKXt2YXIgZD1lP2wuY2xvbmUoYVtoXSk6YVtoXTt0P2lbaF09bihpW2hdLGQpOmlbaF09ZH19cmV0dXJuIGl9ZnVuY3Rpb24gcyhlKXtyZXR1cm57fS50b1N0cmluZy5jYWxsKGUpLnNsaWNlKDgsLTEpLnRvTG93ZXJDYXNlKCl9dmFyIGw9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZT09PSEwLCExLGFyZ3VtZW50cyl9LGk9XCJtZXJnZVwiO2wucmVjdXJzaXZlPWZ1bmN0aW9uKGUpe3JldHVybiByKGU9PT0hMCwhMCxhcmd1bWVudHMpfSxsLmNsb25lPWZ1bmN0aW9uKGUpe3ZhciB0LG4scj1lLGk9cyhlKTtpZihcImFycmF5XCI9PT1pKWZvcihyPVtdLG49ZS5sZW5ndGgsdD0wO24+dDsrK3Qpclt0XT1sLmNsb25lKGVbdF0pO2Vsc2UgaWYoXCJvYmplY3RcIj09PWkpe3I9e307Zm9yKHQgaW4gZSlyW3RdPWwuY2xvbmUoZVt0XSl9cmV0dXJuIHJ9LGU/dC5leHBvcnRzPWw6d2luZG93W2ldPWx9KFwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0JiZcIm9iamVjdFwiPT10eXBlb2YgdC5leHBvcnRzJiZ0LmV4cG9ydHMpfSx7fV0sNDI6W2Z1bmN0aW9uKGUsdCxuKXt0LmV4cG9ydHM9e25hbWU6XCJydGNuaW5qYVwiLHZlcnNpb246XCIwLjYuN1wiLGRlc2NyaXB0aW9uOlwiV2ViUlRDIEFQSSB3cmFwcGVyIHRvIGRlYWwgd2l0aCBkaWZmZXJlbnQgYnJvd3NlcnNcIixhdXRob3I6e25hbWU6XCJJw7Fha2kgQmF6IENhc3RpbGxvXCIsZW1haWw6XCJpbmFraS5iYXpAZWZhY2UyZmFjZS5jb21cIix1cmw6XCJodHRwOi8vZWZhY2UyZmFjZS5jb21cIn0sY29udHJpYnV0b3JzOlt7bmFtZTpcIkplc8O6cyBQw6lyZXpcIixlbWFpbDpcImplc3VzLnBlcmV6QGVmYWNlMmZhY2UuY29tXCJ9XSxsaWNlbnNlOlwiTUlUXCIsbWFpbjpcImxpYi9ydGNuaW5qYS5qc1wiLGhvbWVwYWdlOlwiaHR0cHM6Ly9naXRodWIuY29tL2VmYWNlMmZhY2UvcnRjbmluamEuanNcIixyZXBvc2l0b3J5Ont0eXBlOlwiZ2l0XCIsdXJsOlwiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9lZmFjZTJmYWNlL3J0Y25pbmphLmpzLmdpdFwifSxrZXl3b3JkczpbXCJ3ZWJydGNcIl0sZW5naW5lczp7bm9kZTpcIj49MC4xMC4zMlwifSxkZXBlbmRlbmNpZXM6e2Jvd3NlcjpcIl4xLjIuMFwiLGRlYnVnOlwiXjIuMi4wXCIsbWVyZ2U6XCJeMS4yLjBcIn0sZGV2RGVwZW5kZW5jaWVzOnticm93c2VyaWZ5OlwiXjEzLjAuMVwiLGd1bHA6XCJnaXQraHR0cHM6Ly9naXRodWIuY29tL2d1bHBqcy9ndWxwLmdpdCM0LjBcIixcImd1bHAtZXhwZWN0LWZpbGVcIjpcIjAuMC43XCIsXCJndWxwLWZpbGVsb2dcIjpcIl4wLjQuMVwiLFwiZ3VscC1oZWFkZXJcIjpcIl4xLjguMlwiLFwiZ3VscC1qc2NzXCI6XCJeMy4wLjJcIixcImd1bHAtanNjcy1zdHlsaXNoXCI6XCJeMS40LjBcIixcImd1bHAtanNoaW50XCI6XCJeMi4wLjFcIixcImd1bHAtcmVuYW1lXCI6XCJeMS4yLjJcIixcImd1bHAtdWdsaWZ5XCI6XCJeMS41LjNcIixcImpzaGludC1zdHlsaXNoXCI6XCJeMi4yLjBcIixcInZpbnlsLXNvdXJjZS1zdHJlYW1cIjpcIl4xLjEuMFwifSxyZWFkbWU6JyMgcnRjbmluamEuanMgPGltZyBzcmM9XCJodHRwOi8vd3d3LnB1Ym51Yi5jb20vYmxvZy93cC1jb250ZW50L3VwbG9hZHMvMjAxNC8wMS9nb29nbGUtd2VicnRjLWxvZ28ucG5nXCIgaGVpZ2h0PVwiMzBcIiB3aWR0aD1cIjMwXCI+XFxuXFxuV2ViUlRDIEFQSSB3cmFwcGVyIHRvIGRlYWwgd2l0aCBkaWZmZXJlbnQgYnJvd3NlcnMgdHJhbnNwYXJlbnRseSwgW2V2ZW50dWFsbHldKGh0dHA6Ly9pc3dlYnJ0Y3JlYWR5eWV0LmNvbS8pIHRoaXMgbGlicmFyeSBzaG91bGRuXFwndCBiZSBuZWVkZWQuIFdlIG9ubHkgaGF2ZSB0byB3YWl0IHVudGlsIFczQyBncm91cCBpbiBjaGFyZ2UgW2ZpbmlzaGVzIHRoZSBzcGVjaWZpY2F0aW9uXShodHRwczovL3Rvb2xzLmlldGYub3JnL3dnL3J0Y3dlYi8pIGFuZCB0aGUgZGlmZmVyZW50IGJyb3dzZXJzIGltcGxlbWVudCBpdCBjb3JyZWN0bHkgOnN3ZWF0X3NtaWxlOi5cXG5cXG48aW1nIHNyYz1cImh0dHA6Ly9pbWFnZXM0LmZhbnBvcC5jb20vaW1hZ2UvcGhvdG9zLzIxODAwMDAwL2Jyb3dzZXItZmlnaHQtZ29vZ2xlLWNocm9tZS0yMTg2NTQ1NC02MDAtNTMxLmpwZ1wiIGhlaWdodD1cIjI1MFwiIHdpZHRoPVwiMjUwXCI+XFxuXFxuU3VwcG9ydGVkIGVudmlyb25tZW50czpcXG4qIFtHb29nbGUgQ2hyb21lXShodHRwczovL3d3dy5nb29nbGUuY29tL2Nocm9tZS9icm93c2VyL2Rlc2t0b3AvaW5kZXguaHRtbCkgKGRlc2t0b3AgJiBtb2JpbGUpXFxuKiBbR29vZ2xlIENhbmFyeV0oaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9jaHJvbWUvYnJvd3Nlci9jYW5hcnkuaHRtbCkgKGRlc2t0b3AgJiBtb2JpbGUpXFxuKiBbTW96aWxsYSBGaXJlZm94XShodHRwczovL3d3dy5tb3ppbGxhLm9yZy9lbi1HQi9maXJlZm94L25ldykgKGRlc2t0b3AgJiBtb2JpbGUpXFxuKiBbRmlyZWZveCBOaWd0aGx5XShodHRwczovL25pZ2h0bHkubW96aWxsYS5vcmcvKSAoZGVza3RvcCAmIG1vYmlsZSlcXG4qIFtPcGVyYV0oaHR0cDovL3d3dy5vcGVyYS5jb20vKVxcbiogW1ZpdmFsZGldKGh0dHBzOi8vdml2YWxkaS5jb20vKVxcbiogW0Nyb3NzV2Fsa10oaHR0cHM6Ly9jcm9zc3dhbGstcHJvamVjdC5vcmcvKVxcbiogW0NvcmRvdmFdKGh0dHA6Ly9jb3Jkb3ZhLmFwYWNoZS5vcmcvKTogaU9TIHN1cHBvcnQsIHlvdSBvbmx5IGhhdmUgdG8gdXNlIG91ciBwbHVnaW4gW2ZvbGxvd2luZyB0aGVzZSBzdGVwc10oaHR0cHM6Ly9naXRodWIuY29tL2VmYWNlMmZhY2UvY29yZG92YS1wbHVnaW4taW9zcnRjI3VzYWdlKS5cXG4qIFtOVy5qc10oaHR0cHM6Ly9naXRodWIuY29tL253anMvbncuanMvKVxcbiogW0VsZWN0cm9uXShodHRwczovL2dpdGh1Yi5jb20vYXRvbS9lbGVjdHJvbilcXG5cXG5cXG4jIyBJbnN0YWxsYXRpb25cXG5cXG4jIyMgKipucG0qKjpcXG5cXG5gYGBiYXNoXFxuJCBucG0gaW5zdGFsbCBydGNuaW5qYVxcbmBgYFxcblxcbmFuZCB0aGVuOlxcblxcbmBgYGphdmFzY3JpcHRcXG52YXIgcnRjbmluamEgPSByZXF1aXJlKFxcJ3J0Y25pbmphXFwnKTtcXG5gYGBcXG5cXG4jIyMgKipib3dlcioqOlxcblxcbmBgYGJhc2hcXG4kIGJvd2VyIGluc3RhbGwgcnRjbmluamFcXG5gYGBcXG5cXG5cXG4jIyBCcm93c2VyaWZpZWQgbGlicmFyeVxcblxcblRha2UgYSBicm93c2VyaWZpZWQgdmVyc2lvbiBvZiB0aGUgbGlicmFyeSBmcm9tIHRoZSBgZGlzdC9gIGZvbGRlcjpcXG5cXG4qIGBkaXN0L3J0Y25pbmphLmpzYDogVGhlIHVuY29tcHJlc3NlZCB2ZXJzaW9uLlxcbiogYGRpc3QvcnRjbmluamEubWluLmpzYDogVGhlIGNvbXByZXNzZWQgcHJvZHVjdGlvbi1yZWFkeSB2ZXJzaW9uLlxcblxcblRoZXkgZXhwb3NlIHRoZSBnbG9iYWwgYHdpbmRvdy5ydGNuaW5qYWAgbW9kdWxlLlxcblxcblxcbiMjIFVzYWdlXFxuXFxuSW4gdGhlIFtleGFtcGxlc10oLi9leGFtcGxlcy8pIGZvbGRlciB3ZSBwcm92aWRlIGEgY29tcGxldGUgb25lLlxcblxcbmBgYGphdmFzY3JpcHRcXG4vLyBNdXN0IGZpcnN0IGNhbGwgaXQuXFxucnRjbmluamEoKTtcXG5cXG4vLyBUaGVuIGNoZWNrLlxcbmlmIChydGNuaW5qYS5oYXNXZWJSVEMoKSkge1xcbiAgICAvLyBEbyBzb21ldGhpbmcuXFxufVxcbmVsc2Uge1xcbiAgICAvLyBEbyBzb21ldGhpbmcuXFxufVxcbmBgYFxcblxcblxcbiMjIERvY3VtZW50YXRpb25cXG5cXG5Zb3UgY2FuIHJlYWQgdGhlIGZ1bGwgW0FQSSBkb2N1bWVudGF0aW9uXShkb2NzL2luZGV4Lm1kKSBpbiB0aGUgZG9jcyBmb2xkZXIuXFxuXFxuXFxuIyMgSXNzdWVzXFxuXFxuaHR0cHM6Ly9naXRodWIuY29tL2VmYWNlMmZhY2UvcnRjbmluamEuanMvaXNzdWVzXFxuXFxuXFxuIyMgRGV2ZWxvcGVyIGd1aWRlXFxuXFxuKiBDcmVhdGUgYSBicmFuY2ggd2l0aCBhIG5hbWUgaW5jbHVkaW5nIHlvdXIgdXNlciBhbmQgYSBtZWFuaW5nZnVsIHdvcmQgYWJvdXQgdGhlIGZpeC9mZWF0dXJlIHlvdVxcJ3JlIGdvaW5nIHRvIGltcGxlbWVudCwgaWU6IFwiamVzdXNwcnViaW8vZml4c3R1ZmZcIlxcbiogVXNlIFtHaXRIdWIgcHVsbCByZXF1ZXN0c10oaHR0cHM6Ly9oZWxwLmdpdGh1Yi5jb20vYXJ0aWNsZXMvdXNpbmctcHVsbC1yZXF1ZXN0cykuXFxuKiBDb252ZW50aW9uczpcXG4gKiBXZSB1c2UgW0pTSGludF0oaHR0cDovL2pzaGludC5jb20vKSBhbmQgW0Nyb2NrZm9yZFxcJ3MgU3R5bGVndWlkZV0oaHR0cDovL2phdmFzY3JpcHQuY3JvY2tmb3JkLmNvbS9jb2RlLmh0bWwpLlxcbiAqIFBsZWFzZSBydW4gYGdydW50IGxpbnRgIHRvIGJlIHN1cmUgeW91ciBjb2RlIGZpdHMgd2l0aCB0aGVtLlxcblxcblxcbiMjIyBEZWJ1Z2dpbmdcXG5cXG5UaGUgbGlicmFyeSBpbmNsdWRlcyB0aGUgTm9kZSBbZGVidWddKGh0dHBzOi8vZ2l0aHViLmNvbS92aXNpb25tZWRpYS9kZWJ1ZykgbW9kdWxlLiBJbiBvcmRlciB0byBlbmFibGUgZGVidWdnaW5nOlxcblxcbkluIE5vZGUgc2V0IHRoZSBgREVCVUc9cnRjbmluamEqYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBiZWZvcmUgcnVubmluZyB0aGUgYXBwbGljYXRpb24sIG9yIHNldCBpdCBhdCB0aGUgdG9wIG9mIHRoZSBzY3JpcHQ6XFxuXFxuYGBgamF2YXNjcmlwdFxcbnByb2Nlc3MuZW52LkRFQlVHID0gXFwncnRjbmluamEqXFwnO1xcbmBgYFxcblxcbkluIHRoZSBicm93c2VyIHJ1biBgcnRjbmluamEuZGVidWcuZW5hYmxlKFxcJ3J0Y25pbmphKlxcJyk7YCBhbmQgcmVsb2FkIHRoZSBwYWdlLiBOb3RlIHRoYXQgdGhlIGRlYnVnZ2luZyBzZXR0aW5ncyBhcmUgc3RvcmVkIGludG8gdGhlIGJyb3dzZXIgTG9jYWxTdG9yYWdlLiBUbyBkaXNhYmxlIGl0IHJ1biBgcnRjbmluamEuZGVidWcuZGlzYWJsZShcXCdydGNuaW5qYSpcXCcpO2AuXFxuXFxuXFxuIyMgQ29weXJpZ2h0ICYgTGljZW5zZVxcblxcbiogZUZhY2UyRmFjZSBJbmMuXFxuKiBbTUlUXSguL0xJQ0VOU0UpXFxuJyxyZWFkbWVGaWxlbmFtZTpcIlJFQURNRS5tZFwiLGdpdEhlYWQ6XCJkMzZiMDJkMDUwM2NhMTUyNzcxNjkyOTM1YTQwOTYxMzBmMjhkYzVkXCIsYnVnczp7dXJsOlwiaHR0cHM6Ly9naXRodWIuY29tL2VmYWNlMmZhY2UvcnRjbmluamEuanMvaXNzdWVzXCJ9LF9pZDpcInJ0Y25pbmphQDAuNi43XCIsc2NyaXB0czp7fSxfc2hhc3VtOlwiZjdjODg1NWYyYzBlNDFhZTA4YzYzODM3NWJhZDFkYzk3NzM2OWVjMlwiLF9mcm9tOlwicnRjbmluamFAPj0wLjYuNyA8MC43LjBcIn19LHt9XSw0MzpbZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQuZXhwb3J0cz17djpbe25hbWU6XCJ2ZXJzaW9uXCIscmVnOi9eKFxcZCopJC99XSxvOlt7bmFtZTpcIm9yaWdpblwiLHJlZzovXihcXFMqKSAoXFxkKikgKFxcZCopIChcXFMqKSBJUChcXGQpIChcXFMqKS8sbmFtZXM6W1widXNlcm5hbWVcIixcInNlc3Npb25JZFwiLFwic2Vzc2lvblZlcnNpb25cIixcIm5ldFR5cGVcIixcImlwVmVyXCIsXCJhZGRyZXNzXCJdLGZvcm1hdDpcIiVzICVzICVkICVzIElQJWQgJXNcIn1dLHM6W3tuYW1lOlwibmFtZVwifV0saTpbe25hbWU6XCJkZXNjcmlwdGlvblwifV0sdTpbe25hbWU6XCJ1cmlcIn1dLGU6W3tuYW1lOlwiZW1haWxcIn1dLHA6W3tuYW1lOlwicGhvbmVcIn1dLHo6W3tuYW1lOlwidGltZXpvbmVzXCJ9XSxyOlt7bmFtZTpcInJlcGVhdHNcIn1dLHQ6W3tuYW1lOlwidGltaW5nXCIscmVnOi9eKFxcZCopIChcXGQqKS8sbmFtZXM6W1wic3RhcnRcIixcInN0b3BcIl0sZm9ybWF0OlwiJWQgJWRcIn1dLGM6W3tuYW1lOlwiY29ubmVjdGlvblwiLHJlZzovXklOIElQKFxcZCkgKFxcUyopLyxuYW1lczpbXCJ2ZXJzaW9uXCIsXCJpcFwiXSxmb3JtYXQ6XCJJTiBJUCVkICVzXCJ9XSxiOlt7cHVzaDpcImJhbmR3aWR0aFwiLHJlZzovXihUSUFTfEFTfENUfFJSfFJTKTooXFxkKikvLG5hbWVzOltcInR5cGVcIixcImxpbWl0XCJdLGZvcm1hdDpcIiVzOiVzXCJ9XSxtOlt7cmVnOi9eKFxcdyopIChcXGQqKSAoW1xcd1xcL10qKSg/OiAoLiopKT8vLG5hbWVzOltcInR5cGVcIixcInBvcnRcIixcInByb3RvY29sXCIsXCJwYXlsb2Fkc1wiXSxmb3JtYXQ6XCIlcyAlZCAlcyAlc1wifV0sYTpbe3B1c2g6XCJydHBcIixyZWc6L15ydHBtYXA6KFxcZCopIChbXFx3XFwtXFwuXSopKD86XFxzKlxcLyhcXGQqKSg/OlxccypcXC8oXFxTKikpPyk/LyxuYW1lczpbXCJwYXlsb2FkXCIsXCJjb2RlY1wiLFwicmF0ZVwiLFwiZW5jb2RpbmdcIl0sZm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmVuY29kaW5nP1wicnRwbWFwOiVkICVzLyVzLyVzXCI6ZS5yYXRlP1wicnRwbWFwOiVkICVzLyVzXCI6XCJydHBtYXA6JWQgJXNcIn19LHtwdXNoOlwiZm10cFwiLHJlZzovXmZtdHA6KFxcZCopIChbXFxTfCBdKikvLG5hbWVzOltcInBheWxvYWRcIixcImNvbmZpZ1wiXSxmb3JtYXQ6XCJmbXRwOiVkICVzXCJ9LHtuYW1lOlwiY29udHJvbFwiLHJlZzovXmNvbnRyb2w6KC4qKS8sZm9ybWF0OlwiY29udHJvbDolc1wifSx7bmFtZTpcInJ0Y3BcIixyZWc6L15ydGNwOihcXGQqKSg/OiAoXFxTKikgSVAoXFxkKSAoXFxTKikpPy8sbmFtZXM6W1wicG9ydFwiLFwibmV0VHlwZVwiLFwiaXBWZXJcIixcImFkZHJlc3NcIl0sZm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lLmFkZHJlc3M/XCJydGNwOiVkICVzIElQJWQgJXNcIjpcInJ0Y3A6JWRcIn19LHtwdXNoOlwicnRjcEZiVHJySW50XCIscmVnOi9ecnRjcC1mYjooXFwqfFxcZCopIHRyci1pbnQgKFxcZCopLyxuYW1lczpbXCJwYXlsb2FkXCIsXCJ2YWx1ZVwiXSxmb3JtYXQ6XCJydGNwLWZiOiVkIHRyci1pbnQgJWRcIn0se3B1c2g6XCJydGNwRmJcIixyZWc6L15ydGNwLWZiOihcXCp8XFxkKikgKFtcXHctX10qKSg/OiAoW1xcdy1fXSopKT8vLG5hbWVzOltcInBheWxvYWRcIixcInR5cGVcIixcInN1YnR5cGVcIl0sZm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lLnN1YnR5cGU/XCJydGNwLWZiOiVzICVzICVzXCI6XCJydGNwLWZiOiVzICVzXCJ9fSx7cHVzaDpcImV4dFwiLHJlZzovXmV4dG1hcDooW1xcd19cXC9dKikgKFxcUyopKD86IChcXFMqKSk/LyxuYW1lczpbXCJ2YWx1ZVwiLFwidXJpXCIsXCJjb25maWdcIl0sZm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lLmNvbmZpZz9cImV4dG1hcDolcyAlcyAlc1wiOlwiZXh0bWFwOiVzICVzXCJ9fSx7cHVzaDpcImNyeXB0b1wiLHJlZzovXmNyeXB0bzooXFxkKikgKFtcXHdfXSopIChcXFMqKSg/OiAoXFxTKikpPy8sbmFtZXM6W1wiaWRcIixcInN1aXRlXCIsXCJjb25maWdcIixcInNlc3Npb25Db25maWdcIl0sZm9ybWF0OmZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lLnNlc3Npb25Db25maWc/XCJjcnlwdG86JWQgJXMgJXMgJXNcIjpcImNyeXB0bzolZCAlcyAlc1wifX0se25hbWU6XCJzZXR1cFwiLHJlZzovXnNldHVwOihcXHcqKS8sZm9ybWF0Olwic2V0dXA6JXNcIn0se25hbWU6XCJtaWRcIixyZWc6L15taWQ6KFteXFxzXSopLyxmb3JtYXQ6XCJtaWQ6JXNcIn0se25hbWU6XCJtc2lkXCIscmVnOi9ebXNpZDooLiopLyxmb3JtYXQ6XCJtc2lkOiVzXCJ9LHtuYW1lOlwicHRpbWVcIixyZWc6L15wdGltZTooXFxkKikvLGZvcm1hdDpcInB0aW1lOiVkXCJ9LHtuYW1lOlwibWF4cHRpbWVcIixyZWc6L15tYXhwdGltZTooXFxkKikvLGZvcm1hdDpcIm1heHB0aW1lOiVkXCJ9LHtuYW1lOlwiZGlyZWN0aW9uXCIscmVnOi9eKHNlbmRyZWN2fHJlY3Zvbmx5fHNlbmRvbmx5fGluYWN0aXZlKS99LHtuYW1lOlwiaWNlbGl0ZVwiLHJlZzovXihpY2UtbGl0ZSkvfSx7bmFtZTpcImljZVVmcmFnXCIscmVnOi9eaWNlLXVmcmFnOihcXFMqKS8sZm9ybWF0OlwiaWNlLXVmcmFnOiVzXCJ9LHtuYW1lOlwiaWNlUHdkXCIscmVnOi9eaWNlLXB3ZDooXFxTKikvLGZvcm1hdDpcImljZS1wd2Q6JXNcIn0se25hbWU6XCJmaW5nZXJwcmludFwiLHJlZzovXmZpbmdlcnByaW50OihcXFMqKSAoXFxTKikvLG5hbWVzOltcInR5cGVcIixcImhhc2hcIl0sZm9ybWF0OlwiZmluZ2VycHJpbnQ6JXMgJXNcIn0se3B1c2g6XCJjYW5kaWRhdGVzXCIscmVnOi9eY2FuZGlkYXRlOihcXFMqKSAoXFxkKikgKFxcUyopIChcXGQqKSAoXFxTKikgKFxcZCopIHR5cCAoXFxTKikoPzogcmFkZHIgKFxcUyopIHJwb3J0IChcXGQqKSk/KD86IHRjcHR5cGUgKFxcUyopKT8oPzogZ2VuZXJhdGlvbiAoXFxkKikpPy8sbmFtZXM6W1wiZm91bmRhdGlvblwiLFwiY29tcG9uZW50XCIsXCJ0cmFuc3BvcnRcIixcInByaW9yaXR5XCIsXCJpcFwiLFwicG9ydFwiLFwidHlwZVwiLFwicmFkZHJcIixcInJwb3J0XCIsXCJ0Y3B0eXBlXCIsXCJnZW5lcmF0aW9uXCJdLGZvcm1hdDpmdW5jdGlvbihlKXt2YXIgdD1cImNhbmRpZGF0ZTolcyAlZCAlcyAlZCAlcyAlZCB0eXAgJXNcIjtyZXR1cm4gdCs9bnVsbCE9ZS5yYWRkcj9cIiByYWRkciAlcyBycG9ydCAlZFwiOlwiJXYldlwiLHQrPW51bGwhPWUudGNwdHlwZT9cIiB0Y3B0eXBlICVzXCI6XCIldlwiLG51bGwhPWUuZ2VuZXJhdGlvbiYmKHQrPVwiIGdlbmVyYXRpb24gJWRcIiksdH19LHtuYW1lOlwiZW5kT2ZDYW5kaWRhdGVzXCIscmVnOi9eKGVuZC1vZi1jYW5kaWRhdGVzKS99LHtuYW1lOlwicmVtb3RlQ2FuZGlkYXRlc1wiLHJlZzovXnJlbW90ZS1jYW5kaWRhdGVzOiguKikvLGZvcm1hdDpcInJlbW90ZS1jYW5kaWRhdGVzOiVzXCJ9LHtuYW1lOlwiaWNlT3B0aW9uc1wiLHJlZzovXmljZS1vcHRpb25zOihcXFMqKS8sZm9ybWF0OlwiaWNlLW9wdGlvbnM6JXNcIn0se3B1c2g6XCJzc3Jjc1wiLHJlZzovXnNzcmM6KFxcZCopIChbXFx3X10qKTooLiopLyxuYW1lczpbXCJpZFwiLFwiYXR0cmlidXRlXCIsXCJ2YWx1ZVwiXSxmb3JtYXQ6XCJzc3JjOiVkICVzOiVzXCJ9LHtwdXNoOlwic3NyY0dyb3Vwc1wiLHJlZzovXnNzcmMtZ3JvdXA6KFxcdyopICguKikvLG5hbWVzOltcInNlbWFudGljc1wiLFwic3NyY3NcIl0sZm9ybWF0Olwic3NyYy1ncm91cDolcyAlc1wifSx7bmFtZTpcIm1zaWRTZW1hbnRpY1wiLHJlZzovXm1zaWQtc2VtYW50aWM6XFxzPyhcXHcqKSAoXFxTKikvLG5hbWVzOltcInNlbWFudGljXCIsXCJ0b2tlblwiXSxmb3JtYXQ6XCJtc2lkLXNlbWFudGljOiAlcyAlc1wifSx7cHVzaDpcImdyb3Vwc1wiLHJlZzovXmdyb3VwOihcXHcqKSAoLiopLyxuYW1lczpbXCJ0eXBlXCIsXCJtaWRzXCJdLGZvcm1hdDpcImdyb3VwOiVzICVzXCJ9LHtuYW1lOlwicnRjcE11eFwiLHJlZzovXihydGNwLW11eCkvfSx7bmFtZTpcInJ0Y3BSc2l6ZVwiLHJlZzovXihydGNwLXJzaXplKS99LHtuYW1lOlwic2N0cG1hcFwiLHJlZzovXnNjdHBtYXA6KFtcXHdfXFwvXSopIChcXFMqKSg/OiAoXFxTKikpPy8sbmFtZXM6W1wic2N0cG1hcE51bWJlclwiLFwiYXBwXCIsXCJtYXhNZXNzYWdlU2l6ZVwiXSxmb3JtYXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWUubWF4TWVzc2FnZVNpemU/XCJzY3RwbWFwOiVzICVzICVzXCI6XCJzY3RwbWFwOiVzICVzXCJ9fSx7cHVzaDpcImludmFsaWRcIixuYW1lczpbXCJ2YWx1ZVwiXX1dfTtPYmplY3Qua2V5cyhyKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXJbZV07dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucmVnfHwoZS5yZWc9LyguKikvKSxlLmZvcm1hdHx8KGUuZm9ybWF0PVwiJXNcIil9KX0pfSx7fV0sNDQ6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcj1lKFwiLi9wYXJzZXJcIikscz1lKFwiLi93cml0ZXJcIik7bi53cml0ZT1zLG4ucGFyc2U9ci5wYXJzZSxuLnBhcnNlRm10cENvbmZpZz1yLnBhcnNlRm10cENvbmZpZyxuLnBhcnNlUGF5bG9hZHM9ci5wYXJzZVBheWxvYWRzLG4ucGFyc2VSZW1vdGVDYW5kaWRhdGVzPXIucGFyc2VSZW1vdGVDYW5kaWRhdGVzfSx7XCIuL3BhcnNlclwiOjQ1LFwiLi93cml0ZXJcIjo0Nn1dLDQ1OltmdW5jdGlvbihlLHQsbil7dmFyIHI9ZnVuY3Rpb24oZSl7cmV0dXJuIFN0cmluZyhOdW1iZXIoZSkpPT09ZT9OdW1iZXIoZSk6ZX0scz1mdW5jdGlvbihlLHQsbixzKXtpZihzJiYhbil0W3NdPXIoZVsxXSk7ZWxzZSBmb3IodmFyIGw9MDtsPG4ubGVuZ3RoO2wrPTEpbnVsbCE9ZVtsKzFdJiYodFtuW2xdXT1yKGVbbCsxXSkpfSxsPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1lLm5hbWUmJmUubmFtZXM7ZS5wdXNoJiYhdFtlLnB1c2hdP3RbZS5wdXNoXT1bXTpyJiYhdFtlLm5hbWVdJiYodFtlLm5hbWVdPXt9KTt2YXIgbD1lLnB1c2g/e306cj90W2UubmFtZV06dDtzKG4ubWF0Y2goZS5yZWcpLGwsZS5uYW1lcyxlLm5hbWUpLGUucHVzaCYmdFtlLnB1c2hdLnB1c2gobCl9LGk9ZShcIi4vZ3JhbW1hclwiKSxvPVJlZ0V4cC5wcm90b3R5cGUudGVzdC5iaW5kKC9eKFthLXpdKT0oLiopLyk7bi5wYXJzZT1mdW5jdGlvbihlKXt2YXIgdD17fSxuPVtdLHI9dDtyZXR1cm4gZS5zcGxpdCgvKFxcclxcbnxcXHJ8XFxuKS8pLmZpbHRlcihvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0scz1lLnNsaWNlKDIpO1wibVwiPT09dCYmKG4ucHVzaCh7cnRwOltdLGZtdHA6W119KSxyPW5bbi5sZW5ndGgtMV0pO2Zvcih2YXIgbz0wO288KGlbdF18fFtdKS5sZW5ndGg7bys9MSl7dmFyIHU9aVt0XVtvXTtpZih1LnJlZy50ZXN0KHMpKXJldHVybiBsKHUscixzKX19KSx0Lm1lZGlhPW4sdH07dmFyIHU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10LnNwbGl0KC89KC4rKS8sMik7cmV0dXJuIDI9PT1uLmxlbmd0aCYmKGVbblswXV09cihuWzFdKSksZX07bi5wYXJzZUZtdHBDb25maWc9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoL1xcO1xccz8vKS5yZWR1Y2UodSx7fSl9LG4ucGFyc2VQYXlsb2Fkcz1mdW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdChcIiBcIikubWFwKE51bWJlcil9LG4ucGFyc2VSZW1vdGVDYW5kaWRhdGVzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPWUuc3BsaXQoXCIgXCIpLm1hcChyKSxzPTA7czxuLmxlbmd0aDtzKz0zKXQucHVzaCh7Y29tcG9uZW50Om5bc10saXA6bltzKzFdLHBvcnQ6bltzKzJdfSk7cmV0dXJuIHR9fSx7XCIuL2dyYW1tYXJcIjo0M31dLDQ2OltmdW5jdGlvbihlLHQsbil7dmFyIHI9ZShcIi4vZ3JhbW1hclwiKSxzPS8lW3NkdiVdL2csbD1mdW5jdGlvbihlKXt2YXIgdD0xLG49YXJndW1lbnRzLHI9bi5sZW5ndGg7cmV0dXJuIGUucmVwbGFjZShzLGZ1bmN0aW9uKGUpe2lmKHQ+PXIpcmV0dXJuIGU7dmFyIHM9blt0XTtzd2l0Y2godCs9MSxlKXtjYXNlXCIlJVwiOnJldHVyblwiJVwiO2Nhc2VcIiVzXCI6cmV0dXJuIFN0cmluZyhzKTtjYXNlXCIlZFwiOnJldHVybiBOdW1iZXIocyk7Y2FzZVwiJXZcIjpyZXR1cm5cIlwifX0pfSxpPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10LmZvcm1hdCBpbnN0YW5jZW9mIEZ1bmN0aW9uP3QuZm9ybWF0KHQucHVzaD9uOm5bdC5uYW1lXSk6dC5mb3JtYXQscz1bZStcIj1cIityXTtpZih0Lm5hbWVzKWZvcih2YXIgaT0wO2k8dC5uYW1lcy5sZW5ndGg7aSs9MSl7dmFyIG89dC5uYW1lc1tpXTt0Lm5hbWU/cy5wdXNoKG5bdC5uYW1lXVtvXSk6cy5wdXNoKG5bdC5uYW1lc1tpXV0pfWVsc2Ugcy5wdXNoKG5bdC5uYW1lXSk7cmV0dXJuIGwuYXBwbHkobnVsbCxzKX0sbz1bXCJ2XCIsXCJvXCIsXCJzXCIsXCJpXCIsXCJ1XCIsXCJlXCIsXCJwXCIsXCJjXCIsXCJiXCIsXCJ0XCIsXCJyXCIsXCJ6XCIsXCJhXCJdLHU9W1wiaVwiLFwiY1wiLFwiYlwiLFwiYVwiXTt0LmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9LG51bGw9PWUudmVyc2lvbiYmKGUudmVyc2lvbj0wKSxudWxsPT1lLm5hbWUmJihlLm5hbWU9XCIgXCIpLGUubWVkaWEuZm9yRWFjaChmdW5jdGlvbihlKXtudWxsPT1lLnBheWxvYWRzJiYoZS5wYXlsb2Fkcz1cIlwiKX0pO3ZhciBuPXQub3V0ZXJPcmRlcnx8byxzPXQuaW5uZXJPcmRlcnx8dSxsPVtdO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24odCl7clt0XS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24ubmFtZSBpbiBlJiZudWxsIT1lW24ubmFtZV0/bC5wdXNoKGkodCxuLGUpKTpuLnB1c2ggaW4gZSYmbnVsbCE9ZVtuLnB1c2hdJiZlW24ucHVzaF0uZm9yRWFjaChmdW5jdGlvbihlKXtsLnB1c2goaSh0LG4sZSkpfSl9KX0pLGUubWVkaWEuZm9yRWFjaChmdW5jdGlvbihlKXtsLnB1c2goaShcIm1cIixyLm1bMF0sZSkpLHMuZm9yRWFjaChmdW5jdGlvbih0KXtyW3RdLmZvckVhY2goZnVuY3Rpb24obil7bi5uYW1lIGluIGUmJm51bGwhPWVbbi5uYW1lXT9sLnB1c2goaSh0LG4sZSkpOm4ucHVzaCBpbiBlJiZudWxsIT1lW24ucHVzaF0mJmVbbi5wdXNoXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2wucHVzaChpKHQsbixlKSl9KX0pfSl9KSxsLmpvaW4oXCJcXHJcXG5cIikrXCJcXHJcXG5cIn19LHtcIi4vZ3JhbW1hclwiOjQzfV0sNDc6W2Z1bmN0aW9uKGUsdCxuKXt0LmV4cG9ydHM9e25hbWU6XCJqc3NpcFwiLHRpdGxlOlwiSnNTSVBcIixkZXNjcmlwdGlvbjpcInRoZSBKYXZhc2NyaXB0IFNJUCBsaWJyYXJ5XCIsdmVyc2lvbjpcIjIuMC4xXCIsaG9tZXBhZ2U6XCJodHRwOi8vanNzaXAubmV0XCIsYXV0aG9yOlwiSm9zw6kgTHVpcyBNaWxsw6FuIDxqbWlsbGFuQGFsaWF4Lm5ldD4gKGh0dHBzOi8vZ2l0aHViLmNvbS9qbWlsbGFuKVwiLGNvbnRyaWJ1dG9yczpbXCJJw7Fha2kgQmF6IENhc3RpbGxvIDxpYmNAYWxpYXgubmV0PiAoaHR0cHM6Ly9naXRodWIuY29tL2liYylcIixcIlNhw7psIEliYXJyYSBDb3JyZXRnw6kgPHNhZ2h1bEBnbWFpbC5jb20+IChodHRwczovL2dpdGh1Yi5jb20vc2FnaHVsKVwiXSxtYWluOlwibGliL0pzU0lQLmpzXCIsa2V5d29yZHM6W1wic2lwXCIsXCJ3ZWJzb2NrZXRcIixcIndlYnJ0Y1wiLFwibm9kZVwiLFwiYnJvd3NlclwiLFwibGlicmFyeVwiXSxsaWNlbnNlOlwiTUlUXCIscmVwb3NpdG9yeTp7dHlwZTpcImdpdFwiLHVybDpcImh0dHBzOi8vZ2l0aHViLmNvbS92ZXJzYXRpY2EvSnNTSVAuZ2l0XCJ9LGJ1Z3M6e3VybDpcImh0dHBzOi8vZ2l0aHViLmNvbS92ZXJzYXRpY2EvSnNTSVAvaXNzdWVzXCJ9LGRlcGVuZGVuY2llczp7ZGVidWc6XCJeMi4yLjBcIixydGNuaW5qYTpcIl4wLjYuN1wiLFwic2RwLXRyYW5zZm9ybVwiOlwiXjEuNi4yXCJ9LGRldkRlcGVuZGVuY2llczp7YnJvd3NlcmlmeTpcIl4xMy4wLjFcIixndWxwOlwiZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9ndWxwanMvZ3VscC5naXQjNC4wXCIsXCJndWxwLWV4cGVjdC1maWxlXCI6XCIwLjAuN1wiLFwiZ3VscC1oZWFkZXJcIjpcIl4xLjguMlwiLFwiZ3VscC1qc2hpbnRcIjpcIl4yLjAuMVwiLFwiZ3VscC1ub2RldW5pdC1ydW5uZXJcIjpcIl4wLjIuMlwiLFwiZ3VscC1yZW5hbWVcIjpcIl4xLjIuMlwiLFwiZ3VscC11Z2xpZnlcIjpcIl4xLjUuM1wiLFwiZ3VscC11dGlsXCI6XCJeMy4wLjdcIixqc2hpbnQ6XCJeMi45LjJcIixcImpzaGludC1zdHlsaXNoXCI6XCJeMi4yLjBcIixwZWdqczpcIjAuNy4wXCIsXCJ2aW55bC1idWZmZXJcIjpcIl4xLjAuMFwiLFwidmlueWwtc291cmNlLXN0cmVhbVwiOlwiXjEuMS4wXCJ9LHNjcmlwdHM6e3Rlc3Q6XCJndWxwIHRlc3RcIn19fSx7fV19LHt9LFs3XSkoNyl9KTsiLCJ2YXIgX3RlbXBsYXRlID0gcmVxdWlyZSgnbG9kYXNoL3N0cmluZy90ZW1wbGF0ZScpO1xudmFyIF9mb3JFYWNoID0gcmVxdWlyZSgnbG9kYXNoL2NvbGxlY3Rpb24vZm9yRWFjaCcpO1xudmFyIF9hc3NpZ24gPSByZXF1aXJlKCdsb2Rhc2gvb2JqZWN0L2Fzc2lnbicpO1xudmFyIF9tZXJnZSA9IHJlcXVpcmUoJ2xvZGFzaC9vYmplY3QvbWVyZ2UnKTtcbnZhciBfaXNFcXVhbCA9IHJlcXVpcmUoJ2xvZGFzaC9sYW5nL2lzRXF1YWwnKTtcbnZhciBfdHJpbSA9IHJlcXVpcmUoJ2xvZGFzaC9zdHJpbmcvdHJpbScpO1xudmFyIF90aHJvdHRsZSA9IHJlcXVpcmUoJ2xvZGFzaC9mdW5jdGlvbi90aHJvdHRsZScpO1xudmFyIF9kZWJvdW5jZSA9IHJlcXVpcmUoJ2xvZGFzaC9mdW5jdGlvbi9kZWJvdW5jZScpO1xuXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcblx0dmFyIHRpbWVvdXQ7XG5cdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XG5cdFx0dmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR0aW1lb3V0ID0gbnVsbDtcblx0XHRcdGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHRcdH07XG5cdFx0dmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG5cdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHRcdHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0XHRpZiAoY2FsbE5vdykgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdHRlbXBsYXRlOiBfdGVtcGxhdGUsXG5cdGZvckVhY2g6IF9mb3JFYWNoLFxuXHRhc3NpZ246IF9hc3NpZ24sXG5cdG1lcmdlOiBfbWVyZ2UsXG5cdGlzRXF1YWw6IF9pc0VxdWFsLFxuXHR0cmltOiBfdHJpbSxcblx0dGhyb3R0bGU6IF90aHJvdHRsZSxcblx0ZGVib3VuY2U6IGRlYm91bmNlXG59OyIsInZhciB3aWRnZXQgPSByZXF1aXJlKCcuL3dpZGdldC5qcycpO1xudmFyIGFwaSA9IHJlcXVpcmUoJy4vY29yZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHdpZGdldC5tb2R1bGU7XG4iLCJ2YXIgdXJsID0gcmVxdWlyZSgndXJsJyk7XG52YXIgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbnZhciBjYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBwb3N0KHBvc3RVcmwsIGRhdGEsIGNiKXtcblxuXHQvLyBjb25zb2xlLmxvZygncG9zdCByZXF1ZXN0OiAnLCBwb3N0VXJsLCBkYXRhKTtcblxuXHR2YXIgdXJsT2JqID0gdXJsLnBhcnNlKHBvc3RVcmwpLFxuXHRcdFxuXHRqc29uID0gSlNPTi5zdHJpbmdpZnkoZGF0YSksXG5cblx0Ym9keSA9ICcnLFxuXG5cdG9wdGlvbnMgPSB7XG5cdFx0bWV0aG9kOiAnUE9TVCcsXG5cdFx0cHJvdG9jb2w6IHVybE9iai5wcm90b2NvbCB8fCB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wsXG5cdFx0aG9zdG5hbWU6IHVybE9iai5ob3N0bmFtZSxcblx0XHRwb3J0OiB1cmxPYmoucG9ydCxcblx0XHRwYXRoOiB1cmxPYmoucGF0aCxcblx0XHQnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnLFxuXHRcdCdDb250ZW50LWxlbmd0aCc6IGpzb24ubGVuZ3RoXG5cdH0sXG5cblx0cmVxID0gaHR0cC5yZXF1ZXN0KG9wdGlvbnMsIGZ1bmN0aW9uIChyZXMpe1xuXHRcdHJlcy5zZXRFbmNvZGluZygndXRmOCcpO1xuXHRcdHJlcy5vbignZGF0YScsIGZ1bmN0aW9uIChjaHVuaykge1xuXHRcdFx0Ym9keSArPSBjaHVuaztcblx0XHR9KTtcblx0XHRyZXMub24oJ2VuZCcsIGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gY29uc29sZS5sb2coYm9keSk7XG5cdFx0XHRpZihib2R5ID09PSAne30nKSB7XG5cdFx0XHRcdC8vIGJvZHkgPSBKU09OLnBhcnNlKHtyZXN1bHQ6ICdPSyd9KTtcblx0XHRcdFx0Ym9keSA9IFwie3Jlc3VsdDogJ09LJ31cIjtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ym9keSA9IEpTT04ucGFyc2UoYm9keSk7XG5cblx0XHRcdGlmKGJvZHkuZXJyb3IpIHtcblx0XHRcdFx0Y2IoYm9keS5lcnJvcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYihudWxsLCByZXMsIGJvZHkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcblxuXHRyZXEub24oJ2Vycm9yJywgZnVuY3Rpb24gKGVycil7XG5cdFx0Y2IoZXJyKTtcblx0fSk7XG5cblx0cmVxLndyaXRlKGpzb24pO1xuXHRyZXEuZW5kKCk7XG59XG5cbmZ1bmN0aW9uIGdldChzZWxlY3RvciwgcG9zdFVybCwgY2Ipe1xuXG5cdHZhciBib2R5ID0gJyc7XG5cblx0aWYoc2VsZWN0b3IgJiYgY2FjaGVbc2VsZWN0b3JdKSB7XG5cdFx0cmV0dXJuIGNiKG51bGwsIGNhY2hlW3NlbGVjdG9yXSk7XG5cdH1cblxuXHRodHRwLmdldChwb3N0VXJsLCBmdW5jdGlvbiAocmVzKSB7XG5cdFx0cmVzLnNldEVuY29kaW5nKCd1dGY4Jyk7XG5cdFx0cmVzLm9uKCdkYXRhJywgZnVuY3Rpb24gKGNodW5rKSB7XG5cdFx0XHRib2R5ICs9IGNodW5rO1xuXHRcdH0pO1xuXHRcdHJlcy5vbignZW5kJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRpZihzZWxlY3RvcikgY2FjaGVbc2VsZWN0b3JdID0gYm9keTtcblx0XHRcdGNiKG51bGwsIGJvZHkpO1xuXHRcdH0pO1xuXHR9KS5vbignZXJyb3InLCBmdW5jdGlvbihlcnIpIHtcblx0XHRjYihlcnIpO1xuXHR9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdHBvc3Q6IHBvc3QsXG5cdGdldDogZ2V0XG59O1xuIiwidmFyIHN0b3JhZ2UgPSBnbG9iYWwubG9jYWxTdG9yYWdlO1xudmFyIHNlc3Npb24gPSBnbG9iYWwuc2Vzc2lvblN0b3JhZ2U7XG52YXIgcHJlZml4ID0gJ3N3Yyc7XG52YXIgZGVsaW1pdGVyID0gJy4nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblxuXHRnZXQ6IGZ1bmN0aW9uKGtleSwgbG9jYXRpb24pIHtcblx0XHRpZihsb2NhdGlvbiA9PT0gJ3Nlc3Npb24nKSB7XG5cdFx0XHRyZXR1cm4gSlNPTi5wYXJzZShzZXNzaW9uLmdldEl0ZW0ocHJlZml4K2RlbGltaXRlcitrZXkpKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIEpTT04ucGFyc2Uoc3RvcmFnZS5nZXRJdGVtKHByZWZpeCtkZWxpbWl0ZXIra2V5KSk7XG5cdFx0fVxuXHR9LFxuXG5cdHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgbG9jYXRpb24pIHtcblx0XHRpZihsb2NhdGlvbiA9PT0gJ3Nlc3Npb24nKSB7XG5cdFx0XHRzZXNzaW9uLnNldEl0ZW0ocHJlZml4K2RlbGltaXRlcitrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0b3JhZ2Uuc2V0SXRlbShwcmVmaXgrZGVsaW1pdGVyK2tleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9LFxuXG5cdHJlbW92ZTogZnVuY3Rpb24oa2V5LCBsb2NhdGlvbikge1xuXHRcdGlmKGxvY2F0aW9uID09PSAnc2Vzc2lvbicpIHtcblx0XHRcdHNlc3Npb24ucmVtb3ZlSXRlbShwcmVmaXgrZGVsaW1pdGVyK2tleSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0b3JhZ2UucmVtb3ZlSXRlbShwcmVmaXgrZGVsaW1pdGVyK2tleSk7XG5cdFx0fVxuXHR9XG5cbn07IiwidmFyIGV2ZW50cyA9IHt9LFxuSnNTSVAgPSByZXF1aXJlKCcuL2pzc2lwLm1pbi5qcycpLFxuLy8gSnNTSVAgPSBnbG9iYWwuSnNTSVAsXG5vcHRpb25zLFxuc2lwQ2xpZW50LFxuc2lwU2Vzc2lvbixcbnNpcENhbGxFdmVudHM7XG5cbmZ1bmN0aW9uIGlzV2VicnRjU3VwcG9ydGVkKCl7XG5cdHZhciBSVEMgPSB3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24gfHwgd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uIHx8IHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbixcblx0XHR1c2VyTWVpZGEgPSBuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWEgfHwgbmF2aWdhdG9yLm1zR2V0VXNlck1lZGlhIHx8IG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEsXG5cdFx0aWNlID0gd2luZG93Lm1velJUQ0ljZUNhbmRpZGF0ZSB8fCB3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlO1xuXG5cdHJldHVybiAhIVJUQyAmJiAhIXVzZXJNZWlkYSAmJiAhIWljZTtcbn1cblxuZnVuY3Rpb24gaW5pdEpzU0lQRXZlbnRzKCl7XG5cdHNpcENsaWVudC5vbignY29ubmVjdGVkJywgZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdzaXAgY29ubmVjdGVkIGV2ZW50OiAnLCBlKTsgfSk7XG5cdHNpcENsaWVudC5vbignZGlzY29ubmVjdGVkJywgZnVuY3Rpb24oZSl7IGNvbnNvbGUubG9nKCdzaXAgZGlzY29ubmVjdGVkIGV2ZW50OiAnLCBlKTsgfSk7XG5cdHNpcENsaWVudC5vbignbmV3TWVzc2FnZScsIGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnc2lwIG5ld01lc3NhZ2UgZXZlbnQ6ICcsIGUpOyB9KTtcblx0c2lwQ2xpZW50Lm9uKCduZXdSVENTZXNzaW9uJywgZnVuY3Rpb24oZSl7XG5cdFx0Y29uc29sZS5sb2coJ3NpcCBuZXdSVENTZXNzaW9uIGV2ZW50OiAnLCBlKTtcblx0XHRldmVudHMuZW1pdCgnd2VicnRjL25ld1JUQ1Nlc3Npb24nLCBlKTtcblx0XHQvLyBpZihlLnNlc3Npb24uZGlyZWN0aW9uID09PSAnb3V0Z29pbmcnKVxuXHRcdC8vIFx0ZXZlbnRzLmVtaXQoJ3dlYnJ0Yy9vdXRnb2luZ0NhbGwnLCBlKTtcblx0XHQvLyBlbHNlXG5cdFx0Ly8gXHRldmVudHMuZW1pdCgnd2VicnRjL2luY29taW5nQ2FsbCcsIGUpO1xuXHRcdFxuXHRcdFx0c2lwU2Vzc2lvbiA9IGUuc2Vzc2lvbjtcblx0fSk7XG5cdHNpcENsaWVudC5vbigncmVnaXN0ZXJlZCcsIGZ1bmN0aW9uKGUpeyBjb25zb2xlLmxvZygnc2lwIHJlZ2lzdGVyZWQgZXZlbnQ6ICcsIGUpOyB9KTtcblx0c2lwQ2xpZW50Lm9uKCd1bnJlZ2lzdGVyZWQnLCBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ3NpcCB1bnJlZ2lzdGVyZWQgZXZlbnQ6ICcsIGUpOyB9KTtcblx0c2lwQ2xpZW50Lm9uKCdyZWdpc3RyYXRpb25GYWlsZWQnLCBmdW5jdGlvbihlKXsgY29uc29sZS5sb2coJ3NpcCByZWdpc3RyYXRpb25GYWlsZWQgZXZlbnQ6ICcsIGUpOyB9KTtcblxuXHRzaXBDYWxsRXZlbnRzID0ge1xuXHRcdHByb2dyZXNzOiBmdW5jdGlvbihlKXtcblx0XHRcdGNvbnNvbGUubG9nKCdjYWxsIHByb2dyZXNzIGV2ZW50OiAnLCBlKTtcblx0XHRcdGV2ZW50cy5lbWl0KCd3ZWJydGMvcHJvZ3Jlc3MnLCBlKTtcblx0XHR9LFxuXHRcdGZhaWxlZDogZnVuY3Rpb24oZSl7XG5cdFx0XHRjb25zb2xlLmxvZygnY2FsbCBmYWlsZWQgZXZlbnQ6JywgZSk7XG5cdFx0XHRldmVudHMuZW1pdCgnd2VicnRjL2ZhaWxlZCcsIGUpO1xuXHRcdH0sXG5cdFx0ZW5kZWQ6IGZ1bmN0aW9uKGUpe1xuXHRcdFx0Y29uc29sZS5sb2coJ2NhbGwgZW5kZWQgZXZlbnQ6ICcsIGUpO1xuXHRcdFx0ZXZlbnRzLmVtaXQoJ3dlYnJ0Yy9lbmRlZCcsIGUpO1xuXHRcdH0sXG5cdFx0Y29uZmlybWVkOiBmdW5jdGlvbihlKXtcblx0XHRcdGNvbnNvbGUubG9nKCdjYWxsIGNvbmZpcm1lZCBldmVudDogJywgZSk7XG5cdFx0XHRldmVudHMuZW1pdCgnd2VicnRjL2NvbmZpcm1lZCcsIGUpO1xuXHRcdH0sXG5cdFx0YWRkc3RyZWFtOiBmdW5jdGlvbihlKXtcblx0XHRcdGNvbnNvbGUubG9nKCdjYWxsIGFkZHN0cmVhbSBldmVudDogJywgZSk7XG5cdFx0XHRldmVudHMuZW1pdCgnd2VicnRjL2FkZHN0cmVhbScsIGUpO1xuXHRcdFx0dmFyIHN0cmVhbSA9IGUuc3RyZWFtO1xuXHRcdFx0b3B0aW9ucy5hdWRpb1JlbW90ZSA9IEpzU0lQLnJ0Y25pbmphLmF0dGFjaE1lZGlhU3RyZWFtKG9wdGlvbnMuYXVkaW9SZW1vdGUsIHN0cmVhbSk7XG5cdFx0fVxuXHRcdC8vIHNkcDogZnVuY3Rpb24oZSl7XG5cdFx0Ly8gXHRjb25zb2xlLmxvZygnc2RwOiAnLCBlKTtcblx0XHQvLyB9XG5cdH07XG59XG5cbmZ1bmN0aW9uIGlzRXN0YWJsaXNoZWQoKXtcblx0cmV0dXJuIHNpcFNlc3Npb24uaXNFc3RhYmxpc2hlZCgpO1xufVxuXG5mdW5jdGlvbiBpc0luUHJvZ3Jlc3MoKXtcblx0cmV0dXJuIHNpcFNlc3Npb24uaXNJblByb2dyZXNzKCk7XG59XG5cbmZ1bmN0aW9uIGlzRW5kZWQoKXtcblx0cmV0dXJuIHNpcFNlc3Npb24uaXNFbmRlZCgpO1xufVxuXG5mdW5jdGlvbiB1bnJlZ2lzdGVyKCl7XG5cdHNpcENsaWVudC5zdG9wKCk7XG59XG5cbmZ1bmN0aW9uIGF1ZGlvY2FsbChudW1iZXIpe1xuXHRzaXBTZXNzaW9uID0gc2lwQ2xpZW50LmNhbGwobnVtYmVyLCB7XG5cdFx0ZXZlbnRIYW5kbGVyczogc2lwQ2FsbEV2ZW50cyxcblx0XHRtZWRpYUNvbnN0cmFpbnRzOiB7IGF1ZGlvOiB0cnVlLCB2aWRlbzogZmFsc2UgfVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gdGVybWluYXRlKCl7XG5cdHNpcFNlc3Npb24udGVybWluYXRlKHtcblx0XHRzdGF0dXNfY29kZTogMjAwXG5cdH0pO1xuXHQvLyBzaXBDbGllbnQudGVybWluYXRlU2Vzc2lvbnMoKTtcbn1cblxuZnVuY3Rpb24gYW5zd2VyKCl7XG5cdGNvbnNvbGUubG9nKCdhbnN3ZXI6ICcsc2lwQ2xpZW50KTtcblx0c2lwU2Vzc2lvbi5hbnN3ZXIoKTtcbn1cblxuZnVuY3Rpb24gaG9sZCgpe1xuXHRjb25zb2xlLmxvZygnaG9sZDogJywgc2lwU2Vzc2lvbi5pc09uSG9sZCgpKTtcblx0aWYoc2lwU2Vzc2lvbiAmJiBzaXBTZXNzaW9uLmlzT25Ib2xkKCkubG9jYWwpIHtcblx0XHRzaXBTZXNzaW9uLnVuaG9sZCgpO1xuXHR9IGVsc2Uge1xuXHRcdHNpcFNlc3Npb24uaG9sZCgpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVJlbW90ZUF1ZGlvKCl7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5cdGVsLnNldEF0dHJpYnV0ZSgnYXV0b3BsYXknLCAnYXV0b3BsYXknKTtcblx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG5cdHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gaW5pdChvcHRzKXtcblx0Y29uc29sZS5sb2coJ0luaXRpYXRpbmcgV2ViUlRDIG1vZHVsZTonLCBvcHRzKTtcblx0b3B0aW9ucyA9IG9wdHM7XG5cblx0Ly8gISFnZXQgcmlkIG9mIHRoaXMhIVxuXHRldmVudHMuZW1pdCA9IG9wdHMuZW1pdDtcblx0ZXZlbnRzLm9uID0gb3B0cy5vbjtcblx0Ly8gISFnZXQgcmlkIG9mIHRoaXMhIVxuXG5cdG9wdGlvbnMuYXVkaW9SZW1vdGUgPSBjcmVhdGVSZW1vdGVBdWRpbygpO1xuXHRzaXBDbGllbnQgPSBuZXcgSnNTSVAuVUEob3B0aW9ucy5zaXApO1xuXHRpbml0SnNTSVBFdmVudHMoKTtcblx0c2lwQ2xpZW50LnN0YXJ0KCk7XG5cdC8vIHJldHVybiBzaXBDbGllbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHRsaWI6IEpzU0lQLFxuXHRpbml0OiBpbml0LFxuXHR1bnJlZ2lzdGVyOiB1bnJlZ2lzdGVyLFxuXHRhdWRpb2NhbGw6IGF1ZGlvY2FsbCxcblx0dGVybWluYXRlOiB0ZXJtaW5hdGUsXG5cdGFuc3dlcjogYW5zd2VyLFxuXHRob2xkOiBob2xkLFxuXHRpc0luUHJvZ3Jlc3M6IGlzSW5Qcm9ncmVzcyxcblx0aXNFc3RhYmxpc2hlZDogaXNFc3RhYmxpc2hlZCxcblx0aXNFbmRlZDogaXNFbmRlZCxcblx0aXNTdXBwb3J0ZWQ6IGlzV2VicnRjU3VwcG9ydGVkXG59OyIsInZhciBkb21pZnkgPSByZXF1aXJlKCdkb21pZnknKTtcbnZhciBhcGkgPSByZXF1aXJlKCcuL2NvcmUnKTtcbnZhciByZXF1ZXN0ID0gcmVxdWlyZSgnLi9yZXF1ZXN0Jyk7XG52YXIgXyA9IHJlcXVpcmUoJy4vbG9kYXNoJyk7XG52YXIgZnJhc2VzID0gcmVxdWlyZSgnLi4vdHJhbnNsYXRpb25zLmpzb24nKTtcbnZhciBjb2Jyb3dzaW5nID0gcmVxdWlyZSgnLi9jb2Jyb3dzaW5nJyk7XG52YXIgV2ViUlRDID0gcmVxdWlyZSgnLi93ZWJydGMnKTtcbnZhciBzZXJ2ZXJVcmwgPSB7fTtcbnZhciBmb3JtcztcblxuLy8gV2lkZ2V0IGluaXRpYXRpb24gb3B0aW9uc1xudmFyIGRlZmF1bHRzID0ge1xuXHQvLyBwcmVmaXggZm9yIENTUyBjbGFzc2VzIGFuZCBpZHMuIFxuXHQvLyBDaGFuZ2UgaXQgb25seSBpZiB0aGUgZGVmYXVsdCBwcmVmaXggXG5cdC8vIG1hdGNoZXMgd2l0aCBleGlzdGVkIGNsYXNzZXMgb3IgaWRzIG9uIHRoZSB3ZWJzaXRlXG5cdHByZWZpeDogJ3N3YycsXG5cdC8vIHdoZXRoZXIgb3Igbm90IHRvIGFzayB1c2VyIFxuXHQvLyB0byBpbnRyb2R1Y2UgaGltIHNlbGYgYmVmb3JlIHRoZSBjaGF0IHNlc3Npb25cblx0aW50cm86IGZhbHNlLFxuXHQvLyB3aGV0aGVyIG9yIG5vdCB0byBhZGQgd2lkZ2V0IHRvIHRoZSB3ZWJwYWdlXG5cdHdpZGdldDogdHJ1ZSxcblx0dGl0bGU6ICcnLFxuXHRsYW5nOiAnZW4nLFxuXHRsYW5nRnJvbVVybDogZmFsc2UsXG5cdHBvc2l0aW9uOiAncmlnaHQnLFxuXHRoaWRlT2ZmbGluZUJ1dHRvbjogZmFsc2UsXG5cdG9mZmVyOiBmYWxzZSxcblx0c3R5bGVzOiB7XG5cdFx0cHJpbWFyeToge1xuXHRcdFx0YmFja2dyb3VuZENvbG9yOiAnIzU1NTU1NScsXG5cdFx0XHRjb2xvcjogJyNGRkZGRkYnXG5cdFx0fSxcblx0XHRpbnRybzoge1xuXHRcdFx0YmFja2dyb3VuZEltYWdlOiBcImltYWdlcy9iZ3ItMDIuanBnXCJcblx0XHR9LFxuXHRcdHNlbmRtYWlsOiB7XG5cdFx0XHRiYWNrZ3JvdW5kSW1hZ2U6IFwiaW1hZ2VzL2Jnci0wMS5qcGdcIlxuXHRcdH0sXG5cdFx0Y2xvc2VDaGF0OiB7XG5cdFx0XHRiYWNrZ3JvdW5kSW1hZ2U6IFwiaW1hZ2VzL2Jnci0wMi5qcGdcIlxuXHRcdH1cblx0fSxcblx0YnV0dG9uU3R5bGVzOiB7XG5cdFx0b25saW5lOiB7XG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDE3NSwyMjksMjU1LDAuOCknLFxuXHRcdFx0Y29sb3I6ICcnXG5cdFx0fSxcblx0XHRvZmZsaW5lOiB7XG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDI0MSwyNDEsMjQxLDAuOCknLFxuXHRcdFx0Y29sb3I6ICcnXG5cdFx0fSxcblx0XHR0aW1lb3V0OiB7XG5cdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDI0MSwyNDEsMjQxLDAuOCknLFxuXHRcdFx0Y29sb3I6ICcnXG5cdFx0fSxcblx0XHRub3RpZmllZDoge1xuXHRcdFx0YmFja2dyb3VuZENvbG9yOiAncmdiYSgyNTMsMjUwLDEyOSwwLjgpJyxcblx0XHRcdGNvbG9yOiAnJ1xuXHRcdH0sXG5cdFx0Y29sb3I6ICcjNzc3J1xuXHR9LFxuXHR3aWRnZXRXaW5kb3dPcHRpb25zOiAnbGVmdD0xMCx0b3A9MTAsd2lkdGg9MzUwLGhlaWdodD01NTAscmVzaXphYmxlLGxvY2F0aW9uLHRvb2xiYXInLFxuXHQvLyBhYnNvbHV0ZSBwYXRoIHRvIHRoZSB3Y2hhdCBmb2xkZXJcblx0cGF0aDogJy9pcGNjL3dlYmNoYXQvJyxcblx0Ly8gaW4gc2Vjb25kc1xuXHRjaGVja1N0YXR1c1RpbWVvdXQ6IDMwLFxuXHQvLyBpbiBzZWNvbmRzXG5cdGdldE1lc3NhZ2VzVGltZW91dDogMSxcblx0Ly8gZGlzcGxheWVkIGluIHRoZSBlbWFpbCB0ZW1wbGF0ZVxuXHRob3N0OiB3aW5kb3cubG9jYXRpb24uaG9zdCxcblx0Ly8gd2VicnRjIG9wdGlvbnNcblx0d2VicnRjOiB7XG5cdFx0c2lwOiB7fSxcblx0XHRob3RsaW5lOiAnJ1xuXHR9LFxufSxcblxuLy8gQ3VycmVudCB3aWRnZXQgc3RhdGVcbndpZGdldFN0YXRlID0ge1xuXHRpbml0aWF0ZWQ6IGZhbHNlLFxuXHRhY3RpdmU6IGZhbHNlLFxuXHRzdGF0ZTogJycsIC8vIFwib25saW5lXCIgfCBcIm9mZmxpbmVcIiB8IFwidGltZW91dFwiLFxuXHRzaGFyZTogZmFsc2Vcbn0sXG5kaWFsb2cgPSBbXSxcblxuLy8gYXZhaWxhYmxlIGRpYWxvZyBsYW5ndWFnZXNcbmxhbmdzID0gW10sXG5jdXJyTGFuZyA9ICcnLFxubWVzc2FnZXNUaW1lb3V0LFxuY2hhdFRpbWVvdXQsXG4vLyBDb250YWluZXIgZm9yIG1lc3NhZ2VzXG5tZXNzYWdlc0NvbnQsXG4vLyBXaWRnZXQgZG9tIGVsZW1lbnRcbndpZGdldCxcblxuLy8gV2lkZ2V0IGluIGEgc2VwYXJhdGUgd2luZG93XG53aWRnZXRXaW5kb3csXG4vLyBXaWRnZXQgcGFuZXMgZWxlbWVudHNcbnBhbmVzLFxuYWdlbnRJc1R5cGluZ1RpbWVvdXQsXG51c2VySXNUeXBpbmdUaW1lb3V0LFxudGltZXJVcGRhdGVJbnRlcnZhbDtcblxuZnVuY3Rpb24gV2lkZ2V0KG9wdGlvbnMpe1xuXG5cdF8ubWVyZ2UoZGVmYXVsdHMsIG9wdGlvbnMgfHwge30pO1xuXHQvLyBfLmFzc2lnbihkZWZhdWx0cywgb3B0aW9ucyB8fCB7fSk7XG5cblx0c2VydmVyVXJsID0gcmVxdWlyZSgndXJsJykucGFyc2UoZGVmYXVsdHMuc2VydmVyLCB0cnVlKTtcblxuXHRhcGkgPSBuZXcgYXBpKG9wdGlvbnMpXG5cdC5vbignc2Vzc2lvbi9jcmVhdGUnLCBvblNlc3Npb25TdWNjZXNzKVxuXHQub24oJ3Nlc3Npb24vY29udGludWUnLCBvblNlc3Npb25TdWNjZXNzKVxuXHQub24oJ3Nlc3Npb24vam9pbicsIG9uU2Vzc2lvbkpvaW4pO1xuXHQvLyAub24oJ2NoYXQvbGFuZ3VhZ2VzJywgb25OZXdMYW5ndWFnZXMpO1xuXHRcblx0aWYoZGVmYXVsdHMud2lkZ2V0KSB7XG5cdFx0YXBpLm9uKCdjaGF0L3N0YXJ0Jywgc3RhcnRDaGF0KVxuXHRcdC5vbignY2hhdC9jbG9zZScsIG9uQ2hhdENsb3NlKVxuXHRcdC5vbignY2hhdC90aW1lb3V0Jywgb25DaGF0VGltZW91dClcblx0XHQub24oJ21lc3NhZ2UvbmV3JywgbmV3TWVzc2FnZSlcblx0XHQub24oJ21lc3NhZ2UvdHlwaW5nJywgb25BZ2VudFR5cGluZylcblx0XHQub24oJ2Zvcm0vc3VibWl0Jywgb25Gb3JtU3VibWl0KVxuXHRcdC5vbignZm9ybS9yZWplY3QnLCBjbG9zZUZvcm0pXG5cdFx0Lm9uKCd3aWRnZXQvbG9hZCcsIG9uV2lkZ2V0TG9hZCk7XG5cdFx0Ly8gLm9uKCd3aWRnZXQvaW5pdCcsIG9uV2lkZ2V0SW5pdCk7XG5cdFx0Ly8gLm9uKCd3aWRnZXQvc3RhdGVjaGFuZ2UnLCBjaGFuZ2VXZ1N0YXRlKTtcblx0fVxuXG5cdGlmKGRlZmF1bHRzLndlYnJ0Yy5zaXAud3Nfc2VydmVycyAhPT0gdW5kZWZpbmVkICYmIFdlYlJUQy5pc1N1cHBvcnRlZCgpKSB7XG5cblx0XHRhcGkub24oJ3dlYnJ0Yy9uZXdSVENTZXNzaW9uJywgZnVuY3Rpb24oKXtcblx0XHRcdGluaXRDYWxsU3RhdGUoJ25ld1JUQ1Nlc3Npb24nKTtcblx0XHR9KTtcblx0XHRhcGkub24oJ3dlYnJ0Yy9wcm9ncmVzcycsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0aWYoZS5yZXNwb25zZS5zdGF0dXNfY29kZSA9PT0gMTgwKSB7XG5cdFx0XHRcdGluaXRDYWxsU3RhdGUoJ3JpbmdpbmcnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGluaXRDYWxsU3RhdGUoJ2NvbmZpcm1lZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGFwaS5vbignd2VicnRjL2FkZHN0cmVhbScsIGZ1bmN0aW9uKCl7XG5cdFx0XHRpbml0Q2FsbFN0YXRlKCdjb25uZWN0ZWQnKTtcblx0XHR9KTtcblx0XHRhcGkub24oJ3dlYnJ0Yy9lbmRlZCcsIGZ1bmN0aW9uKCl7XG5cdFx0XHRpbml0Q2FsbFN0YXRlKCdlbmRlZCcpO1xuXHRcdH0pO1xuXHRcdGFwaS5vbignd2VicnRjL2ZhaWxlZCcsIGZ1bmN0aW9uKGUpe1xuXHRcdFx0aWYoZS5jYXVzZSA9PT0gJ0NhbmNlbGVkJyl7XG5cdFx0XHRcdGluaXRDYWxsU3RhdGUoJ2NhbmNlbGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpbml0Q2FsbFN0YXRlKCdmYWlsZWQnKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGluaXRXZWJydGNNb2R1bGUoe1xuXHRcdFx0c2lwOiBkZWZhdWx0cy53ZWJydGMuc2lwLFxuXHRcdFx0ZW1pdDogcHVibGljQXBpLmVtaXQsXG5cdFx0XHRvbjogcHVibGljQXBpLm9uXG5cdFx0fSk7XG5cdH1cblx0XHRcblx0c2V0U2Vzc2lvblRpbWVvdXRIYW5kbGVyKCk7XG5cdGFkZFdpZGdldFN0eWxlcygpO1xuXG5cdC8vIGxvYWQgZm9ybXNcblx0cmVxdWVzdC5nZXQoJ2Zvcm1zX2pzb24nLCBkZWZhdWx0cy5zZXJ2ZXIrZGVmYXVsdHMucGF0aCsnZm9ybXMuanNvbicsIGZ1bmN0aW9uIChlcnIsIHJlc3VsdCl7XG5cdFx0aWYoZXJyKSByZXR1cm4gYXBpLmVtaXQoJ0Vycm9yJywgZXJyKTtcblx0XHRmb3JtcyA9IEpTT04ucGFyc2UocmVzdWx0KS5mb3Jtcztcblx0fSk7XG5cblx0cmVxdWVzdC5nZXQoJ2Zvcm1zX3RtcCcsIGRlZmF1bHRzLnNlcnZlcitkZWZhdWx0cy5wYXRoKydwYXJ0aWFscy9mb3Jtcy5odG1sJywgZnVuY3Rpb24gKGVyciwgdGVtcGxhdGUpe1xuXHRcdGlmKGVycikgcmV0dXJuIGFwaS5lbWl0KCdFcnJvcicsIGVycik7XG5cdH0pO1xuXG5cdHJldHVybiBwdWJsaWNBcGk7XG59XG5cbnZhciBwdWJsaWNBcGkgPSB7XG5cblx0aW5pdE1vZHVsZTogaW5pdE1vZHVsZSxcblx0aW5pdFdpZGdldFN0YXRlOiBpbml0V2lkZ2V0U3RhdGUsXG5cdG9wZW5XaWRnZXQ6IG9wZW5XaWRnZXQsXG5cdGluaXRDaGF0OiBpbml0Q2hhdCxcblx0Z2V0V2lkZ2V0RWxlbWVudDogZ2V0V2lkZ2V0RWxlbWVudCxcblx0aXNXZWJydGNTdXBwb3J0ZWQ6IFdlYlJUQy5pc1N1cHBvcnRlZCxcblx0Z2V0RW50aXR5OiBmdW5jdGlvbigpeyByZXR1cm4gYXBpLmdldFN0YXRlKCdlbnRpdHknLCAnc2Vzc2lvbicpOyB9LFxuXHRvbjogZnVuY3Rpb24oZXZ0LCBsaXN0ZW5lcikge1xuXHRcdGFwaS5vbihldnQsIGxpc3RlbmVyKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblx0ZW1pdDogZnVuY3Rpb24gKGV2dCwgbGlzdGVuZXIpe1xuXHRcdGFwaS5lbWl0KGV2dCwgbGlzdGVuZXIpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXHQvKipcblx0ICogU2V0IGRlZmF1bHQgdXNlciBjcmVkZW50aWFscy5cblx0ICogSWYgXCJpbnRyb1wiIGlzIGZhbHNlLCB0aGFuIGRpYWxvZyB3aWxsIHN0YXJ0IHdpdGggdGhlc2UgY3JlZGVudGlhbHMuXG5cdCAqIE5PVEU6IE11c3QgYmUgY2FsbGVkIGJlZm9yZSBpbml0TW9kdWxlIG1ldGhvZFxuXHQgKiBcblx0ICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIFVzZXIgY3JlZGVudGlhbHMsIGkuZS4gXCJ1bmFtZVwiLCBcImxhbmdcIiwgXCJwaG9uZVwiLCBcInN1YmplY3RcIlxuXHQgKi9cblx0c2V0RGVmYXVsdENyZWRlbnRpYWxzOiBmdW5jdGlvbihwYXJhbXMpIHtcblx0XHRkZWZhdWx0cy5jcmVkZW50aWFscyA9IHBhcmFtcztcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufTtcblxuZnVuY3Rpb24gaW5pdE1vZHVsZSgpe1xuXHRhcGkuaW5pdE1vZHVsZSgpO1xuXHRyZXR1cm4gcHVibGljQXBpO1xufVxuXG5mdW5jdGlvbiBpbml0V2VicnRjTW9kdWxlKG9wdHMpe1xuXHRjb25zb2xlLmxvZygnaW5pdFdlYnJ0Y01vZHVsZTogJywgb3B0cyk7XG5cdFdlYlJUQy5pbml0KG9wdHMpO1xufVxuXG4vLyBTZXNzaW9uIGlzIGVpdGhlciBjcmVhdGVkIG9yIGNvbnRpbnVlc1xuZnVuY3Rpb24gb25TZXNzaW9uU3VjY2Vzcygpe1xuXHQvLyBjb25zb2xlLmxvZygnU2Vzc2lvbiBzdWNjZXNzIScpO1xuXG5cdC8vIHNldCBjdXJyZW50IHVzZXIgbGFuZ3VhZ2Vcblx0Y3VyckxhbmcgPSBkZXRlY3RMYW5ndWFnZSgpO1xuXHRzZXRTZXNzaW9uVGltZW91dEhhbmRsZXIoKTtcblxuXHQvLyBJZiBwYWdlIGxvYWRlZCBhbmQgXCJ3aWRnZXRcIiBwcm9wZXJ0eSBpcyBzZXQgLSBsb2FkIHdpZGdldFxuXHRpZihkZWZhdWx0cy53aWRnZXQgJiYgIXdpZGdldFN0YXRlLmluaXRpYXRlZCAmJiBpc0Jyb3dzZXJTdXBwb3J0ZWQoKSkge1xuXHRcdGxvYWRXaWRnZXQoKTtcblx0fVxuXG5cdC8vIElmIHRpbWVvdXQgd2FzIG9jY3VyZWQsIGluaXQgY2hhdCBhZnRlciBhIHNlc3Npb24gaXMgY3JlYXRlZFxuXHRpZihoYXNXZ1N0YXRlKCd0aW1lb3V0JykpIHtcblx0XHRyZW1vdmVXZ1N0YXRlKCd0aW1lb3V0Jyk7XG5cdFx0Z2V0TGFuZ3VhZ2VzKCk7XG5cdH1cblxuXHQvLyBpZiB3aW5kb3cgaXMgbm90IGEgb3BlbmVkIHdpbmRvd1xuXHRpZighZGVmYXVsdHMuZXh0ZXJuYWwpIHtcblx0XHRhcGkudXBkYXRlVXJsKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuXHRcdGluaXRDb2Jyb3dzaW5nTW9kdWxlKHtcblx0XHRcdHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsXG5cdFx0XHRlbnRpdHk6IGFwaS5nZXRTdGF0ZSgnZW50aXR5JywgJ3Nlc3Npb24nKSxcblx0XHRcdHdpZGdldDogJyMnK2RlZmF1bHRzLnByZWZpeCsnLXdnLWNvbnQnXG5cdFx0fSk7XG5cdH1cblx0XHRcbn1cblxuLy8gc2VuZCBzaGFyZWQgZXZlbnQgdG8gdGhlIHVzZXIncyBicm93c2VyXG5mdW5jdGlvbiBvblNlc3Npb25Kb2luKHBhcmFtcyl7XG5cdC8vIGNvbnNvbGUubG9nKCdvblNlc3Npb25Kb2luOiAnLCBwYXJhbXMpO1xuXHRpbml0Q29icm93c2luZ01vZHVsZSh7IHVybDogcGFyYW1zLnVybCwgZW50aXR5OiBhcGkuZ2V0U3RhdGUoJ2VudGl0eScsICdzZXNzaW9uJykgfSk7XG59XG5cbmZ1bmN0aW9uIGxvYWRXaWRnZXQoY2Ipe1xuXHQvLyBjb25zb2xlLmxvZygnbG9hZCB3aWRnZXQhJyk7XG5cdHZhciBjb21waWxlZDtcblx0cmVxdWVzdC5nZXQoJ3dpZGdldF90bXAnLCBkZWZhdWx0cy5zZXJ2ZXIrZGVmYXVsdHMucGF0aCsnd2lkZ2V0Lmh0bWwnLCBmdW5jdGlvbiAoZXJyLCBib2R5KXtcblx0XHRpZihlcnIpIHJldHVybjtcblx0XHRjb21waWxlZCA9IGNvbXBpbGVUZW1wbGF0ZShib2R5LCB7XG5cdFx0XHRkZWZhdWx0czogZGVmYXVsdHMsXG5cdFx0XHRsYW5ndWFnZXM6IGxhbmdzLFxuXHRcdFx0dHJhbnNsYXRpb25zOiBmcmFzZXMsXG5cdFx0XHRjdXJyTGFuZzogY3VyckxhbmcgfHwgZGVmYXVsdHMubGFuZyxcblx0XHRcdC8vIGZyYXNlczogZnJhc2VzW2N1cnJMYW5nXSB8fCBkZWZhdWx0cy5sYW5nLFxuXHRcdFx0Y3JlZGVudGlhbHM6IGFwaS5nZXRTdGF0ZSgnY3JlZGVudGlhbHMnLCAnc2Vzc2lvbicpIHx8IHt9LFxuXHRcdFx0XzogX1xuXHRcdH0pO1xuXG5cdFx0Ly8gV2lkZ2V0IHZhcmlhYmxlIGFzc2lnbm1lbnRcblx0XHR3aWRnZXQgPSBkb21pZnkoY29tcGlsZWQpO1xuXHRcdC8vIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKHdpZGdldCwgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcblx0XHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHdpZGdldCk7XG5cdFx0YXBpLmVtaXQoJ3dpZGdldC9sb2FkJywgd2lkZ2V0KTtcblxuXHR9KTtcbn1cblxuZnVuY3Rpb24gb25XaWRnZXRMb2FkKHdpZGdldCl7XG5cdC8vIGNvbnNvbGUubG9nKCd3aWRnZXQgbG9hZGVkIScpO1xuXHRhcGkub25jZSgnY2hhdC9sYW5ndWFnZXMnLCBpbml0V2lkZ2V0KTtcblx0Z2V0TGFuZ3VhZ2VzKCk7XG5cdC8vIGluaXRXaWRnZXQoKTtcbn1cblxuZnVuY3Rpb24gaW5pdENvYnJvd3NpbmdNb2R1bGUocGFyYW1zKXtcblx0Ly8gaW5pdCBjb2Jyb3dzaW5nIG1vZHVsZSBvbmx5IG9uIG1haW4gd2luZG93XG5cdGlmKGRlZmF1bHRzLmV4dGVybmFsKSByZXR1cm47XG5cblx0YXBpLm9uKCdjb2Jyb3dzaW5nL2luaXQnLCBmdW5jdGlvbigpe1xuXHRcdGlmKGFwaS5nZXRTdGF0ZSgnc2hhcmVkJywgJ3Nlc3Npb24nKSB8fCBwYXJhbXMuZW50aXR5ID09PSAnYWdlbnQnKSBjb2Jyb3dzaW5nLnNoYXJlKCk7XG5cdFx0Ly8gY29icm93c2luZy5lbWl0RXZlbnRzKCk7XG5cdH0pO1xuXHRhcGkub24oJ2NvYnJvd3NpbmcvZXZlbnQnLCBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdGFwaS51cGRhdGVFdmVudHMocGFyYW1zLmV2ZW50cywgZnVuY3Rpb24oZXJyLCByZXN1bHQpe1xuXHRcdFx0aWYoZXJyKSByZXR1cm47XG5cdFx0XHRjb2Jyb3dzaW5nLnVwZGF0ZUV2ZW50cyhyZXN1bHQpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHRhcGkub24oJ2NvYnJvd3Npbmcvc2hhcmVkJywgZnVuY3Rpb24oKXtcblx0XHRpZighYXBpLmdldFN0YXRlKCdzaGFyZWQnLCAnc2Vzc2lvbicpICYmIHBhcmFtcy5lbnRpdHkgPT09ICd1c2VyJykge1xuXHRcdFx0YXBpLnNhdmVTdGF0ZSgnc2hhcmVkJywgdHJ1ZSwgJ3Nlc3Npb24nKTtcblx0XHRcdGFwaS5zd2l0Y2hTaGFyZVN0YXRlKHRydWUsIHBhcmFtcy51cmwpO1xuXHRcdH1cblx0XHRhcGkudXBkYXRlRXZlbnRzKFt7IGVudGl0eTogcGFyYW1zLmVudGl0eSwgdXJsOiBwYXJhbXMudXJsLCBzaGFyZWQ6IHRydWUgfV0sIGZ1bmN0aW9uKGVyciwgcmVzdWx0KXtcblx0XHRcdC8vIGlmKGVycikgcmV0dXJuO1xuXHRcdFx0cmVzdWx0Lmhpc3RvcnlFdmVudHMgPSB0cnVlO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coJ2NvYnJvd3NpbmcgdXBkYXRlOiAnLCByZXN1bHQpO1xuXHRcdFx0Y29icm93c2luZy51cGRhdGVFdmVudHMocmVzdWx0KTtcblx0XHR9KTtcblx0fSk7XG5cblx0YXBpLm9uKCdjb2Jyb3dzaW5nL3Vuc2hhcmVkJywgZnVuY3Rpb24ocGFyYW1zKXtcblx0XHRhcGkuc2F2ZVN0YXRlKCdzaGFyZWQnLCBmYWxzZSwgJ3Nlc3Npb24nKTtcblx0XHRhcGkudXBkYXRlRXZlbnRzKFt7IGVudGl0eTogcGFyYW1zLmVudGl0eSwgdXJsOiBwYXJhbXMudXJsLCBzaGFyZWQ6IGZhbHNlIH1dLCBmdW5jdGlvbihlcnIsIHJlc3VsKXtcblx0XHRcdC8vIGlmKGVycikgcmV0dXJuO1xuXHRcdFx0aWYocGFyYW1zLmVudGl0eSA9PT0gJ3VzZXInKSBhcGkuc3dpdGNoU2hhcmVTdGF0ZShmYWxzZSwgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXHRcdFx0ZWxzZSBjb2Jyb3dzaW5nLnVuc2hhcmVBbGwoKTtcblx0XHR9KTtcblx0fSk7XG5cdFxuXHRjb2Jyb3dzaW5nLmluaXQoeyB3aWRnZXQ6IHBhcmFtcy53aWRnZXQsIGVudGl0eTogcGFyYW1zLmVudGl0eSwgZW1pdDogcHVibGljQXBpLmVtaXQsIHBhdGg6IChkZWZhdWx0cy5zZXJ2ZXIrZGVmYXVsdHMucGF0aCkgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFdpZGdldEVsZW1lbnQoKXtcblx0cmV0dXJuIHdpZGdldDtcbn1cblxuZnVuY3Rpb24gZ2V0TGFuZ3VhZ2VzKCl7XG5cdGFwaS5nZXRMYW5ndWFnZXMoZnVuY3Rpb24gKGVyciwgYm9keSl7XG5cdFx0aWYoZXJyKSByZXR1cm47XG5cdFx0aWYoYm9keSkgb25OZXdMYW5ndWFnZXMoYm9keS5yZXN1bHQpO1xuXHRcdHNldFRpbWVvdXQoZ2V0TGFuZ3VhZ2VzLCBkZWZhdWx0cy5jaGVja1N0YXR1c1RpbWVvdXQqMTAwMCk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBvbk5ld0xhbmd1YWdlcyhsYW5ndWFnZXMpe1xuXHQvLyBjb25zb2xlLmxvZygnbGFuZ3VhZ2VzOiAnLCBsYW5ndWFnZXMpO1xuXHR2YXIgc3RhdGUgPSBsYW5ndWFnZXMubGVuZ3RoID8gJ29ubGluZScgOiAnb2ZmbGluZScsXG5cdG9wdGlvbnMgPSAnJywgc2VsZWN0ZWQ7XG5cblx0Ly8gaWYoaGFzV2dTdGF0ZShzdGF0ZSkpIHJldHVybjtcblx0aWYod2lkZ2V0U3RhdGUuc3RhdGUgPT09IHN0YXRlKSByZXR1cm47XG5cdFxuXHRsYW5ncyA9IGxhbmd1YWdlcztcblxuXHRpZih3aWRnZXQgJiYgZGVmYXVsdHMuaW50cm8ubGVuZ3RoKSB7XG5cdFx0Ly8gQWRkIGxhbmd1YWdlcyB0byB0aGUgdGVtcGxhdGVcblx0XHRsYW5ncy5mb3JFYWNoKGZ1bmN0aW9uKGxhbmcpIHtcblx0XHRcdGlmKGZyYXNlc1tsYW5nXSAmJiBmcmFzZXNbbGFuZ10ubGFuZykge1xuXHRcdFx0XHRzZWxlY3RlZCA9IGxhbmcgPT09IGN1cnJMYW5nID8gJ3NlbGVjdGVkJyA6ICcnO1xuXHRcdFx0XHRvcHRpb25zICs9ICc8b3B0aW9uIHZhbHVlPVwiJytsYW5nKydcIiAnK3NlbGVjdGVkKycgPicrZnJhc2VzW2xhbmddLmxhbmcrJzwvb3B0aW9uPic7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Z2xvYmFsW2RlZmF1bHRzLnByZWZpeCsnSW50cm9Gb3JtJ10ubGFuZy5pbm5lckhUTUwgPSBvcHRpb25zO1xuXHR9XG5cblx0Y2hhbmdlV2dTdGF0ZSh7IHN0YXRlOiBzdGF0ZSB9KTtcblx0YXBpLmVtaXQoJ2NoYXQvbGFuZ3VhZ2VzJywgbGFuZ3VhZ2VzKTtcbn1cblxuZnVuY3Rpb24gaW5pdFdpZGdldCgpe1xuXHQvLyBjb25zb2xlLmxvZygnSW5pdCB3aWRnZXQhJyk7XG5cdHdpZGdldFN0YXRlLmluaXRpYXRlZCA9IHRydWU7XG5cblx0c2V0TGlzdGVuZXJzKHdpZGdldCk7XG5cdGNoYW5nZVdnU3RhdGUoeyBzdGF0ZTogd2lkZ2V0U3RhdGUuc3RhdGUgfSk7XG5cblx0aWYoZGVmYXVsdHMuaGlkZU9mZmxpbmVCdXR0b24pIHtcblx0XHRhZGRXZ1N0YXRlKCduby1idXR0b24nKTtcblx0fVxuXG5cdGlmKGRlZmF1bHRzLm9mZmVyKSB7XG5cdFx0c2V0T2ZmZXIoKTtcblx0fVxuXG5cdC8vIGlmIGNoYXQgc3RhcnRlZFxuXHRpZihhcGkuZ2V0U3RhdGUoJ2NoYXQnKSA9PT0gdHJ1ZSkge1xuXHRcdHJlcXVlc3RDaGF0KGFwaS5nZXRTdGF0ZSgnY3JlZGVudGlhbHMnLCAnc2Vzc2lvbicpIHx8IHt9KTtcblx0XHRzaG93V2lkZ2V0KCk7XG5cdFx0Ly8gaW5pdENoYXQoKTtcblx0fVxuXG5cdC8vIGlmIHdlYnJ0YyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXIgYW5kIHdzX3NlcnZlcnMgcGFyYW1ldGVyIGlzIHNldCAtIGNoYW5nZSBidXR0b24gaWNvblxuXHRpZihXZWJSVEMgJiYgV2ViUlRDLmlzU3VwcG9ydGVkKCkgJiYgZGVmYXVsdHMud2VicnRjLnNpcC53c19zZXJ2ZXJzKSB7XG5cdFx0YWRkV2dTdGF0ZSgnd2VicnRjLWVuYWJsZWQnKTtcblx0fVxuXG5cdC8vIFdpZGdldCBpcyBpbml0aWF0ZWRcblx0YXBpLmVtaXQoJ3dpZGdldC9pbml0Jyk7XG59XG5cbmZ1bmN0aW9uIHNldE9mZmVyKCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdHNob3dPZmZlcih7XG5cdFx0XHRmcm9tOiBkZWZhdWx0cy5vZmZlci5mcm9tIHx8IGZyYXNlc1tjdXJyTGFuZ10uZGVmYXVsdF90aXRsZSxcblx0XHRcdHRpbWU6IERhdGUubm93KCksXG5cdFx0XHR0ZXh0OiBkZWZhdWx0cy5vZmZlci50ZXh0IHx8IGZyYXNlc1tjdXJyTGFuZ10uZGVmYXVsdF9vZmZlclxuXHRcdH0pO1xuXHR9LCBkZWZhdWx0cy5vZmZlci5pblNlY29uZHMgPyBkZWZhdWx0cy5vZmZlci5pblNlY29uZHMqMTAwMCA6IDMwMDAwKTtcbn1cblxuZnVuY3Rpb24gc2hvd09mZmVyKG1lc3NhZ2UpIHtcblx0Ly8gUmV0dXJuIGlmIHVzZXIgYWxyZWFkeSBpbnRlcmFjdCB3aXRoIHRoZSB3aWRnZXRcblx0aWYod2lkZ2V0U3RhdGUuc3RhdGUgIT09ICdvbmxpbmUnIHx8IGFwaS5nZXRTdGF0ZSgnaW50ZXJhY3RlZCcsICdzZXNzaW9uJykpIHJldHVybjtcblx0bmV3TWVzc2FnZSh7IG1lc3NhZ2VzOiBbbWVzc2FnZV0gfSk7XG59XG5cbmZ1bmN0aW9uIGluaXRDaGF0KCl7XG5cdHNob3dXaWRnZXQoKTtcblxuXHQvLyAvLyBpZiBjaGF0IGFscmVhZHkgc3RhcnRlZCBhbmQgd2lkZ2V0IHdhcyBtaW5pbWl6ZWQgLSBqdXN0IHNob3cgdGhlIHdpZGdldFxuXHRpZihhcGkuZ2V0U3RhdGUoJ2NoYXQnLCAnY2FjaGUnKSkgcmV0dXJuO1xuXG5cdGlmKCFsYW5ncy5sZW5ndGgpIHtcblx0XHRzd2l0Y2hQYW5lKCdzZW5kZW1haWwnKTtcblx0fSBlbHNlIGlmKGRlZmF1bHRzLmludHJvLmxlbmd0aCkge1xuXHRcdGlmKGFwaS5nZXRTdGF0ZSgnY2hhdCcpKSB7XG5cdFx0XHRyZXF1ZXN0Q2hhdChhcGkuZ2V0U3RhdGUoJ2NyZWRlbnRpYWxzJywgJ3Nlc3Npb24nKSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN3aXRjaFBhbmUoJ2NyZWRlbnRpYWxzJyk7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHJlcXVlc3RDaGF0KHsgbGFuZzogY3VyckxhbmcgfSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVxdWVzdENoYXQoY3JlZGVudGlhbHMpe1xuXHRpZighY3JlZGVudGlhbHMudW5hbWUpIGNyZWRlbnRpYWxzLnVuYW1lID0gYXBpLmdldFN0YXRlKCdzaWQnKS5zcGxpdCgnXycpWzBdO1xuXHRcblx0Ly8gU2F2ZSB1c2VyIGxhbmd1YWdlIGJhc2VkIG9uIHByZWZlcmFibGUgZGlhbG9nIGxhbmd1YWdlXG5cdGlmKGNyZWRlbnRpYWxzLmxhbmcgJiYgY3JlZGVudGlhbHMubGFuZyAhPT0gY3VyckxhbmcgKSB7XG5cdFx0YXBpLnNhdmVTdGF0ZSgnbGFuZycsIGNyZWRlbnRpYWxzLmxhbmcpO1xuXHR9XG5cdGlmKCFjcmVkZW50aWFscy5sYW5nKSB7XG5cdFx0Y3JlZGVudGlhbHMubGFuZyA9IGN1cnJMYW5nO1xuXHR9XG5cdFxuXHQvLyBTYXZlIGNyZWRlbnRpYWxzIGZvciBjdXJyZW50IHNlc3Npb25cblx0Ly8gSXQgd2lsbCBiZSByZW1vdmVkIG9uIHNlc3Npb24gdGltZW91dFxuXHRhcGkuc2F2ZVN0YXRlKCdjcmVkZW50aWFscycsIGNyZWRlbnRpYWxzLCAnc2Vzc2lvbicpO1xuXG5cdGFwaS5jaGF0UmVxdWVzdChjcmVkZW50aWFscyk7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0Q2hhdChwYXJhbXMpe1xuXHRzd2l0Y2hQYW5lKCdtZXNzYWdlcycpO1xuXHRhcGkuc2F2ZVN0YXRlKCdjaGF0JywgdHJ1ZSk7XG5cdGlmKHBhcmFtcy50aW1lb3V0KSB7XG5cdFx0Ly8gY29uc29sZS5sb2coJ2NoYXQgdGltZW91dDogJywgcGFyYW1zLnRpbWVvdXQpO1xuXHRcdGNoYXRUaW1lb3V0ID0gYXBpLnNldENoYXRUaW1lb3V0KHBhcmFtcy50aW1lb3V0KTtcblx0fVxuXHRnZXRNZXNzYWdlcygpO1xuXHRhZGRXZ1N0YXRlKCdjaGF0Jyk7XG59XG5cbmZ1bmN0aW9uIGdldE1lc3NhZ2VzKCl7XG5cdC8vIGNvbnNvbGUubG9nKCdnZXQgbWVzc2FnZXMhJyk7XG5cdGFwaS5nZXRNZXNzYWdlcyhmdW5jdGlvbigpIHtcblx0XHRpZihhcGkuZ2V0U3RhdGUoJ2NoYXQnKSkge1xuXHRcdFx0bWVzc2FnZXNUaW1lb3V0ID0gc2V0VGltZW91dChnZXRNZXNzYWdlcywgZGVmYXVsdHMuZ2V0TWVzc2FnZXNUaW1lb3V0KjEwMDApO1xuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIHNlbmRNZXNzYWdlKG1lc3NhZ2Upe1xuXHRhcGkuc2VuZE1lc3NhZ2UobWVzc2FnZSk7XG5cdGlmKGNoYXRUaW1lb3V0KSBjbGVhclRpbWVvdXQoY2hhdFRpbWVvdXQpO1xufVxuXG5mdW5jdGlvbiBuZXdNZXNzYWdlKHJlc3VsdCl7XG5cdC8vIGNvbnNvbGUubG9nKCduZXcgbWVzc2FnZXMgYXJyaXZlZCEnLCByZXN1bHQpO1xuXG5cdHZhciBzdHIsXG5cdFx0ZWxzID0gW10sXG5cdFx0dGV4dCxcblx0XHRjb21waWxlZCxcblx0XHRkZWZhdWx0VW5hbWUgPSBmYWxzZSxcblx0XHRjcmVkZW50aWFscyA9IGFwaS5nZXRTdGF0ZSgnY3JlZGVudGlhbHMnLCAnc2Vzc2lvbicpIHx8IHt9LFxuXHRcdGFuYW1lID0gYXBpLmdldFN0YXRlKCdhbmFtZScsICdzZXNzaW9uJyksXG5cdFx0dW5hbWUgPSBjcmVkZW50aWFscy51bmFtZSA/IGNyZWRlbnRpYWxzLnVuYW1lIDogJyc7XG5cblx0aWYodW5hbWUgPT09IGFwaS5nZXRTdGF0ZSgnc2lkJykuc3BsaXQoJ18nKVswXSkge1xuXHRcdGRlZmF1bHRVbmFtZSA9IHRydWU7XG5cdH1cblxuXHRyZXN1bHQubWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbihtZXNzYWdlLCBpbmRleCkge1xuXHRcdFxuXHRcdG1lc3NhZ2UuZW50aXR5ID0gbWVzc2FnZS5mcm9tID09PSB1bmFtZSA/ICd1c2VyJyA6ICdhZ2VudCc7XG5cdFx0bWVzc2FnZS5mcm9tID0gKG1lc3NhZ2UuZW50aXR5ID09PSAndXNlcicgJiYgZGVmYXVsdFVuYW1lKSA/IGZyYXNlc1tjdXJyTGFuZ10uZGVmYXVsdF91c2VyX25hbWUgOiBtZXNzYWdlLmZyb207XG5cdFx0bWVzc2FnZS50aW1lID0gbWVzc2FnZS50aW1lID8gcGFyc2VUaW1lKG1lc3NhZ2UudGltZSkgOiBwYXJzZVRpbWUoRGF0ZS5ub3coKSk7XG5cblx0XHR0ZXh0ID0gcGFyc2VNZXNzYWdlKG1lc3NhZ2UudGV4dCwgbWVzc2FnZS5maWxlLCBtZXNzYWdlLmVudGl0eSk7XG5cblx0XHRpZih0ZXh0LnR5cGUgPT09ICdmb3JtJykge1xuXHRcdFx0cmVxdWVzdC5nZXQoJ2Zvcm1zX3RtcCcsIGRlZmF1bHRzLnNlcnZlcitkZWZhdWx0cy5wYXRoKydwYXJ0aWFscy9mb3Jtcy5odG1sJywgZnVuY3Rpb24gKGVyciwgdGVtcGxhdGUpe1xuXHRcdFx0XHRpZihlcnIpIHJldHVybiBjYihlcnIpO1xuXG5cdFx0XHRcdGNvbXBpbGVkID0gY29tcGlsZVRlbXBsYXRlKHRlbXBsYXRlLCB7XG5cdFx0XHRcdFx0ZGVmYXVsdHM6IGRlZmF1bHRzLFxuXHRcdFx0XHRcdG1lc3NhZ2U6IG1lc3NhZ2UsXG5cdFx0XHRcdFx0Zm9ybTogdGV4dC5jb250ZW50LFxuXHRcdFx0XHRcdGNyZWRlbnRpYWxzOiBjcmVkZW50aWFscyxcblx0XHRcdFx0XHRmcmFzZXM6IGZyYXNlc1soY3VyckxhbmcgfHwgZGVmYXVsdHMubGFuZyldLFxuXHRcdFx0XHRcdF86IF9cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmKGdsb2JhbFt0ZXh0LmNvbnRlbnQubmFtZV0pIGNsb3NlRm9ybSh0ZXh0LmNvbnRlbnQubmFtZSk7XG5cdFx0XHRcdG1lc3NhZ2VzQ29udC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsICc8bGk+Jytjb21waWxlZCsnPC9saT4nKTtcblx0XHRcdFx0bWVzc2FnZXNDb250LnNjcm9sbFRvcCA9IG1lc3NhZ2VzQ29udC5zY3JvbGxIZWlnaHQ7XG5cdFx0XHR9KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWVzc2FnZS50ZXh0ID0gdGV4dC5jb250ZW50O1xuXHRcdFx0Y29tcGlsZWQgPSBjb21waWxlVGVtcGxhdGUobWVzc2FnZVRlbXBsYXRlKCksIG1lc3NhZ2UpO1xuXHRcdFx0bWVzc2FnZXNDb250Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgJzxsaT4nK2NvbXBpbGVkKyc8L2xpPicpO1xuXG5cdFx0XHRpZihpbmRleCA9PT0gcmVzdWx0Lm1lc3NhZ2VzLmxlbmd0aC0xKSB7XG5cdFx0XHRcdG9uTGFzdE1lc3NhZ2UoY29tcGlsZWQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBOZWVkIGZvciBzZW5kaW5nIGRpYWxvZyB0byBlbWFpbFxuXHRcdFx0ZGlhbG9nLnB1c2goY29tcGlsZWQpO1xuXHRcdH1cblxuXHRcdC8vIFNhdmUgYWdlbnQgbmFtZVxuXHRcdGlmKG1lc3NhZ2UuZW50aXR5ID09PSAnYWdlbnQnICYmIGFuYW1lICE9PSBtZXNzYWdlLmZyb20pIHtcblx0XHRcdGFwaS5zYXZlU3RhdGUoJ2FuYW1lJywgbWVzc2FnZS5mcm9tLCAnc2Vzc2lvbicpO1xuXHRcdH1cblxuXHR9KTtcblxuXHRtZXNzYWdlc0NvbnQuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250LnNjcm9sbEhlaWdodDtcbn1cblxuLyoqXG4gKiBWaXN1YWwgbm90aWZpY2F0aW9uIGFib3V0IGEgbmV3IG1lc3NhZ2UgZm9tciBhZ2VudC5cbiAqIEl0IGlzIGFsc28gdXNlZCBmb3Igb2ZmZXIgbm90aWZpY2F0aW9uXG4gKiBcbiAqIEBwYXJhbSAge1N0cmluZ30gbWVzc2FnZSAtIE5ldyBtZXNzYWdlIGNvbnRlbnQgXG4gKi9cbmZ1bmN0aW9uIG9uTGFzdE1lc3NhZ2UobWVzc2FnZSl7XG5cdHZhciBsYXN0TXNnO1xuXHRpZighd2lkZ2V0U3RhdGUuYWN0aXZlKSB7XG5cdFx0bGFzdE1zZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLWxhc3Rtc2cnKTtcblxuXHRcdFByZWZpeGVkRXZlbnQobGFzdE1zZywgJ2FuaW1hdGlvbmVuZCcsIFtcIndlYmtpdFwiLCBcIm1velwiLCBcIk1TXCIsIFwib1wiLCBcIlwiXSwgZnVuY3Rpb24oZSkge1xuXHRcdFx0YnRuLmNoaWxkcmVuWzBdLnN0eWxlLmhlaWdodCA9IGUudGFyZ2V0LnNjcm9sbEhlaWdodCArICdweCc7XG5cdFx0fSk7XG5cblx0XHRsYXN0TXNnLmlubmVySFRNTCA9IG1lc3NhZ2U7XG5cdFx0Ly8gY2hhbmdlV2dTdGF0ZSh7IHN0YXRlOiAnbm90aWZpZWQnIH0pO1xuXHRcdGFkZFdnU3RhdGUoJ25vdGlmaWVkJyk7XG5cdFx0c2V0QnV0dG9uU3R5bGUoJ25vdGlmaWVkJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY29tcGlsZUVtYWlsKGNvbnRlbnQsIGNiKSB7XG5cdHZhciBjb21waWxlZDtcblx0cmVxdWVzdC5nZXQoJ2VtYWlsX3RtcCcsIGRlZmF1bHRzLnNlcnZlcitkZWZhdWx0cy5wYXRoKydwYXJ0aWFscy9lbWFpbC5odG1sJywgZnVuY3Rpb24gKGVyciwgYm9keSl7XG5cdFx0aWYoZXJyKSByZXR1cm4gY2IoZXJyKTtcblxuXHRcdGNvbXBpbGVkID0gY29tcGlsZVRlbXBsYXRlKGJvZHksIHtcblx0XHRcdGRlZmF1bHRzOiBkZWZhdWx0cyxcblx0XHRcdGNvbnRlbnQ6IGNvbnRlbnQsXG5cdFx0XHRmcmFzZXM6IGZyYXNlc1soY3VyckxhbmcgfHwgZGVmYXVsdHMubGFuZyldLFxuXHRcdFx0XzogX1xuXHRcdH0pO1xuXG5cdFx0aWYoY2IpIHJldHVybiBjYihudWxsLCBjb21waWxlZCk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBzZW5kRGlhbG9nKHBhcmFtcyl7XG5cdHZhciBkaWFsb2dTdHIgPSBwYXJhbXMudGV4dC5qb2luKCcnKTtcblx0Y29tcGlsZUVtYWlsKGRpYWxvZ1N0ciwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcblx0XHRpZihlcnIpIHJldHVybjtcblx0XHRwYXJhbXMudGV4dCA9IHJlc3VsdDtcblx0XHRhcGkuc2VuZEVtYWlsKHBhcmFtcyk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBzZW5kQ29tcGxhaW4ocGFyYW1zKXtcblx0dmFyIGJvZHkgPSBbXTtcblx0Ly8gVE9ETzogZXhwbGFpbi4uLlxuXHR2YXIgY29tcGxhaW4gPSBjb21waWxlVGVtcGxhdGUobWVzc2FnZVRlbXBsYXRlKCksIHtcblx0XHRmcm9tOiBmcmFzZXNbY3VyckxhbmddLmVtYWlsX3N1YmplY3RzLmNvbXBsYWluKycgJytwYXJhbXMuZW1haWwsXG5cdFx0dGV4dDogcGFyYW1zLnRleHQsXG5cdFx0ZW50aXR5OiAnJyxcblx0XHR0aW1lOiAnJ1xuXHR9KTtcblxuXHRib2R5ID0gYm9keS5jb25jYXQoXG5cdFx0Y29tcGxhaW4sXG5cdFx0Jzxicj48cCBjbGFzcz1cImgxXCI+JytmcmFzZXNbY3VyckxhbmddLmVtYWlsX3N1YmplY3RzLmRpYWxvZysnICcrZGVmYXVsdHMuaG9zdCsnPC9wPjxicj4nLFxuXHRcdGRpYWxvZ1xuXHQpLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XG5cdFx0cmV0dXJuIHByZXYuY29uY2F0KGN1cnIpO1xuXHR9KTtcblxuXHRjb21waWxlRW1haWwoYm9keSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcblx0XHRpZihlcnIpIHJldHVybjtcblx0XHRwYXJhbXMudGV4dCA9IHJlc3VsdDtcblx0XHRhcGkuc2VuZEVtYWlsKHBhcmFtcyk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBzZW5kUmVxdWVzdChwYXJhbXMsIGNiKSB7XG5cdC8vIFRPRE86IGV4cGxhaW4uLi5cblx0dmFyIG1zZyA9IGNvbXBpbGVUZW1wbGF0ZShtZXNzYWdlVGVtcGxhdGUoKSwge1xuXHRcdGZyb206IGZyYXNlc1tjdXJyTGFuZ10uZW1haWxfc3ViamVjdHMucmVxdWVzdCsnICcrcGFyYW1zLnVuYW1lKycgKCcrcGFyYW1zLmVtYWlsKycpJyxcblx0XHR0ZXh0OiBwYXJhbXMudGV4dCxcblx0XHRlbnRpdHk6ICcnLFxuXHRcdHRpbWU6ICcnXG5cdH0pO1xuXG5cdGNvbXBpbGVFbWFpbChtc2csIGZ1bmN0aW9uKGVyciwgcmVzdWx0KSB7XG5cdFx0aWYoZXJyKSByZXR1cm47XG5cdFx0cGFyYW1zLnRleHQgPSByZXN1bHQ7XG5cdFx0YXBpLnNlbmRFbWFpbChwYXJhbXMpO1xuXHRcdGlmKGNiKSBjYigpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gc3VibWl0U2VuZE1haWxGb3JtKGZvcm0sIGRhdGEpIHtcblx0dmFyIHBhcmFtcyA9IHt9LFxuXHRcdGZpbGU7XG5cblx0aWYoIWRhdGEuZW1haWwpIHtcblx0XHRhbGVydChmcmFzZXNbY3VyckxhbmddLnJlcXVpcmVkX2Vycm9yLmVtYWlsKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRkYXRhLnN1YmplY3QgPSBmcmFzZXNbY3VyckxhbmddLmVtYWlsX3N1YmplY3RzLnJlcXVlc3QrJyAnK2RhdGEuZW1haWw7XG5cblx0aWYoZGF0YS5maWxlKSB7XG5cdFx0ZmlsZSA9IGdldEZpbGVDb250ZW50KGZvcm0uZmlsZSwgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcblx0XHRcdGlmKCFlcnIpIHtcblx0XHRcdFx0ZGF0YS5maWxlbmFtZSA9IHJlc3VsdC5maWxlbmFtZTtcblx0XHRcdFx0ZGF0YS5maWxlZGF0YSA9IHJlc3VsdC5maWxlZGF0YTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybignRmlsZSB3YXMgbm90IHNlbnQnKTtcblx0XHRcdH1cblx0XHRcdGRlbGV0ZSBkYXRhLmZpbGU7XG5cdFx0XHRzZW5kUmVxdWVzdChkYXRhLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Zm9ybS5yZXNldCgpO1xuXHRcdFx0XHRjbG9zZVdpZGdldCgpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0gZWxzZSB7XG5cdFx0c2VuZFJlcXVlc3QoZGF0YSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRmb3JtLnJlc2V0KCk7XG5cdFx0XHRjbG9zZVdpZGdldCgpO1xuXHRcdH0pO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHN1Ym1pdENsb3NlQ2hhdEZvcm0oZm9ybSwgZGF0YSl7XG5cdHZhciByYXRpbmcgPSAoZGF0YSAmJiBkYXRhLnJhdGluZykgPyBwYXJzZUludChkYXRhLnJhdGluZywgMTApIDogbnVsbDtcblx0aWYoZGF0YSAmJiBkYXRhLnNlbmREaWFsb2cpIHtcblx0XHRpZighZGF0YS5lbWFpbCkge1xuXHRcdFx0YWxlcnQoZnJhc2VzW2N1cnJMYW5nXS5yZXF1aXJlZF9lcnJvci5lbWFpbCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdC8vIGNvbnNvbGUubG9nKCdzZW5kIGRpYWxvZycpO1xuXHRcdHNlbmREaWFsb2coe1xuXHRcdFx0dG86IGRhdGEuZW1haWwsXG5cdFx0XHRzdWJqZWN0OiBmcmFzZXNbY3VyckxhbmddLmVtYWlsX3N1YmplY3RzLmRpYWxvZysnICcrZGVmYXVsdHMuaG9zdCxcblx0XHRcdHRleHQ6IGRpYWxvZyAvLyBnbG9iYWwgdmFyaWFibGVcblx0XHR9KTtcblx0fVxuXHRpZihkYXRhICYmIGRhdGEudGV4dCkge1xuXHRcdGlmKCFkYXRhLmVtYWlsKSB7XG5cdFx0XHRhbGVydChmcmFzZXNbY3VyckxhbmddLnJlcXVpcmVkX2Vycm9yLmVtYWlsKTtcblx0XHRcdHJldHVybjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gY29uc29sZS5sb2coJ3NlbmQgY29tcGxhaW4hJyk7XG5cdFx0XHRzZW5kQ29tcGxhaW4oe1xuXHRcdFx0XHRlbWFpbDogZGF0YS5lbWFpbCxcblx0XHRcdFx0c3ViamVjdDogZnJhc2VzW2N1cnJMYW5nXS5lbWFpbF9zdWJqZWN0cy5jb21wbGFpbisnICcrZGF0YS5lbWFpbCxcblx0XHRcdFx0dGV4dDogZGF0YS50ZXh0XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0aWYoY2hhdFRpbWVvdXQpIGNsZWFyVGltZW91dChjaGF0VGltZW91dCk7XG5cdGlmKGZvcm0pIGZvcm0ucmVzZXQoKTtcblx0XG5cdGNsb3NlQ2hhdChyYXRpbmcpO1xuXHRjbG9zZVdpZGdldCgpO1xufVxuXG5mdW5jdGlvbiBjbG9zZUNoYXQocmF0aW5nKSB7XG5cdGFwaS5zYXZlU3RhdGUoJ2NoYXQnLCBmYWxzZSk7XG5cdGFwaS5jbG9zZUNoYXQocmF0aW5nKTtcblx0cmVtb3ZlV2dTdGF0ZSgnY2hhdCcpO1xufVxuXG5mdW5jdGlvbiBvbkNoYXRDbG9zZSgpe1xuXHRpZihhcGkuZ2V0U3RhdGUoJ3NoYXJlZCcsICdzZXNzaW9uJykpIGNvYnJvd3NpbmcudW5zaGFyZSgpO1xufVxuXG5mdW5jdGlvbiBvbkNoYXRUaW1lb3V0KCl7XG5cdC8vIGNvbnNvbGUubG9nKCdjaGF0IHRpbWVvdXQhJyk7XG5cdHN3aXRjaFBhbmUoJ2Nsb3NlY2hhdCcpO1xuXHRjbG9zZUNoYXQoKTtcbn1cblxuZnVuY3Rpb24gb25BZ2VudFR5cGluZyhvcHRzKXtcblx0Ly8gY29uc29sZS5sb2coJ0FnZW50IGlzIHR5cGluZyEnKTtcblx0aWYoIWFnZW50SXNUeXBpbmdUaW1lb3V0KSB7XG5cdFx0YWRkV2dTdGF0ZSgnYWdlbnQtdHlwaW5nJyk7XG5cdH1cblx0Y2xlYXJUaW1lb3V0KGFnZW50SXNUeXBpbmdUaW1lb3V0KTtcblx0YWdlbnRJc1R5cGluZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGFnZW50SXNUeXBpbmdUaW1lb3V0ID0gbnVsbDtcblx0XHRyZW1vdmVXZ1N0YXRlKCdhZ2VudC10eXBpbmcnKTtcblx0XHQvLyBjb25zb2xlLmxvZygnYWdlbnQgaXMgbm90IHR5cGluZyBhbnltb3JlIScpO1xuXHR9LCA1MDAwKTtcbn1cblxuZnVuY3Rpb24gc2V0U2Vzc2lvblRpbWVvdXRIYW5kbGVyKCl7XG5cdGlmKGFwaS5saXN0ZW5lckNvdW50KCdzZXNzaW9uL3RpbWVvdXQnKSA+PSAxKSByZXR1cm47XG5cdGFwaS5vbmNlKCdzZXNzaW9uL3RpbWVvdXQnLCBmdW5jdGlvbiAocGFyYW1zKXtcblx0XHQvLyBjb25zb2xlLmxvZygnU2Vzc2lvbiB0aW1lb3V0IScsIHBhcmFtcyk7XG5cblx0XHRpZihhcGkuZ2V0U3RhdGUoJ2NoYXQnKSA9PT0gdHJ1ZSkge1xuXHRcdFx0Y2xvc2VDaGF0KCk7XG5cdFx0fVxuXHRcdGlmKHdpZGdldCkge1xuXHRcdFx0Ly8gYWRkV2dTdGF0ZSgndGltZW91dCcpO1xuXHRcdFx0Y2xvc2VXaWRnZXQoKTtcblx0XHR9XG5cdFx0Y2hhbmdlV2dTdGF0ZSh7IHN0YXRlOiAndGltZW91dCcgfSk7XG5cdFx0Ly8gd2lkZ2V0U3RhdGUuc3RhdGUgPSAndGltZW91dCc7XG5cdFx0Ly8gYWRkV2dTdGF0ZSgndGltZW91dCcpO1xuXHRcdHNldEJ1dHRvblN0eWxlKCd0aW1lb3V0Jyk7XG5cdFx0YXBpLnJlbW92ZVN0YXRlKCdzaWQnKTtcblxuXHRcdGlmKHBhcmFtcyAmJiBwYXJhbXMubWV0aG9kID09PSAndXBkYXRlRXZlbnRzJykge1xuXHRcdFx0aW5pdE1vZHVsZSgpO1xuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIGluaXRDYWxsKCl7XG5cdHN3aXRjaFBhbmUoJ2NhbGxBZ2VudCcpO1xuXHRXZWJSVEMuYXVkaW9jYWxsKCdzaXA6JytkZWZhdWx0cy53ZWJydGMuaG90bGluZSsnQCcrc2VydmVyVXJsLmhvc3QpO1xufVxuXG5mdW5jdGlvbiBpbml0Q2FsbFN0YXRlKHN0YXRlKXtcblx0Y29uc29sZS5sb2coJ2luaXRDYWxsU3RhdGU6ICcsIHN0YXRlKTtcblxuXHR2YXIgc3Bpbm5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLWNhbGwtc3Bpbm5lcicpLFxuXHRcdGluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1jYWxsLWluZm8nKSxcblx0XHR0ZXh0U3RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1jYWxsLXN0YXRlJyksXG5cdFx0dGltZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1jYWxsLXRpbWVyJyksXG5cdFx0dHJ5QWdhaW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy10cnlhZ2Fpbi1idG4nKTtcblxuXHRpZihzdGF0ZSA9PT0gJ25ld1JUQ1Nlc3Npb24nKSB7XG5cdFx0aW5pdENhbGxTdGF0ZSgnb25jYWxsJyk7XG5cblx0fSBlbHNlIGlmKHN0YXRlID09PSAnY29uZmlybWVkJykge1xuXHRcdHRleHRTdGF0ZS5pbm5lclRleHQgPSBmcmFzZXNbY3VyckxhbmddLmNhbGxfcGFuZS5jYWxsaW5nX2FnZW50O1xuXHRcdGluZm8uY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHRzcGlubmVyLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdFx0dHJ5QWdhaW4uY2xhc3NMaXN0LmFkZChkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblxuXHR9IGVsc2UgaWYoc3RhdGUgPT09ICdyaW5naW5nJykge1xuXHRcdHNldFRpbWVyKHRpbWVyLCAnaW5pdCcsIDApO1xuXHRcdHRpbWVyLmNsYXNzTGlzdC5yZW1vdmUoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ2Nvbm5lY3RlZCcpIHtcblx0XHR0ZXh0U3RhdGUuaW5uZXJUZXh0ID0gZnJhc2VzW2N1cnJMYW5nXS5jYWxsX3BhbmUuY29ubmVjdGVkX3dpdGhfYWdlbnQ7XG5cdFx0c2V0VGltZXIodGltZXIsICdzdGFydCcsIDApO1xuXG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ2VuZGVkJykge1xuXHRcdHRleHRTdGF0ZS5pbm5lclRleHQgPSBmcmFzZXNbY3VyckxhbmddLmNhbGxfcGFuZS5jYWxsX2VuZGVkO1xuXHRcdHNldFRpbWVyKHRpbWVyLCAnc3RvcCcpO1xuXHRcdGluaXRDYWxsU3RhdGUoJ29uY2FsbGVuZCcpO1xuXHRcdFxuXHR9IGVsc2UgaWYoc3RhdGUgPT09ICdmYWlsZWQnIHx8IHN0YXRlID09PSAnY2FuY2VsZWQnKSB7XG5cdFx0aWYoc3RhdGUgPT09ICdmYWlsZWQnKSB7XG5cdFx0XHR0ZXh0U3RhdGUuaW5uZXJUZXh0ID0gZnJhc2VzW2N1cnJMYW5nXS5jYWxsX3BhbmUuY2FsbF9mYWlsZWQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRleHRTdGF0ZS5pbm5lclRleHQgPSBmcmFzZXNbY3VyckxhbmddLmNhbGxfcGFuZS5jYWxsX2NhbmNlbGVkO1xuXHRcdH1cblx0XHRpbmZvLmNsYXNzTGlzdC5yZW1vdmUoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdFx0c3Bpbm5lci5jbGFzc0xpc3QuYWRkKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRcdHRpbWVyLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdFx0dHJ5QWdhaW4uY2xhc3NMaXN0LnJlbW92ZShkZWZhdWx0cy5wcmVmaXgrJy1oaWRkZW4nKTtcblx0XHRpbml0Q2FsbFN0YXRlKCdvbmNhbGxlbmQnKTtcblxuXHR9IGVsc2UgaWYoc3RhdGUgPT09ICdvbmNhbGwnKSB7XG5cdFx0d2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24oKXtcblx0XHRcdHJldHVybiAnWW91ciBjb25uZWN0aW9uIGlzIGluIHByb2dyZXNzLiBEbyB5b3UgcmVhbHkgd2FudCB0byBjbG9zZSBpdD8nO1xuXHRcdH07XG5cdFx0YXBpLnNhdmVTdGF0ZSgnY2FsbCcsIHRydWUsICdjYWNoZScpO1xuXHRcdGFkZFdnU3RhdGUoJ3dlYnJ0Yy1jYWxsJyk7XG5cblx0fSBlbHNlIGlmKHN0YXRlID09PSAnb25jYWxsZW5kJykge1xuXHRcdHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IG51bGw7XG5cdFx0YXBpLnNhdmVTdGF0ZSgnY2FsbCcsIGZhbHNlLCAnY2FjaGUnKTtcblx0XHRyZW1vdmVXZ1N0YXRlKCd3ZWJydGMtY2FsbCcpO1xuXG5cdH0gZWxzZSBpZignaW5pdCcpIHtcblx0XHRpbmZvLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdFx0c3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKGRlZmF1bHRzLnByZWZpeCsnLWhpZGRlbicpO1xuXHRcdHRyeUFnYWluLmNsYXNzTGlzdC5hZGQoZGVmYXVsdHMucHJlZml4KyctaGlkZGVuJyk7XG5cdH1cbn1cblxuZnVuY3Rpb24gc2V0VGltZXIodGltZXIsIHN0YXRlLCBzZWNvbmRzKXtcblx0dmFyIHRpbWUgPSBzZWNvbmRzO1xuXHRpZihzdGF0ZSA9PT0gJ3N0YXJ0Jykge1xuXHRcdHRpbWVyVXBkYXRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuXHRcdFx0dGltZSA9IHRpbWUrMTtcblx0XHRcdHRpbWVyLnRleHRDb250ZW50ID0gY29udmVydFRpbWUodGltZSk7XG5cdFx0fSwgMTAwMCk7XG5cdH0gZWxzZSBpZihzdGF0ZSA9PT0gJ3N0b3AnKSB7XG5cdFx0Y2xlYXJJbnRlcnZhbCh0aW1lclVwZGF0ZUludGVydmFsKTtcblx0fSBlbHNlIGlmKHN0YXRlID09PSAnaW5pdCcpIHtcblx0XHR0aW1lci50ZXh0Q29udGVudCA9IGNvbnZlcnRUaW1lKDApO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGVuZENhbGwoKXtcblx0Y29uc29sZS5sb2coJ2VuZENhbGw6ICcsIFdlYlJUQy5pc0VzdGFibGlzaGVkKCksIFdlYlJUQy5pc0luUHJvZ3Jlc3MoKSwgV2ViUlRDLmlzRW5kZWQoKSk7XG5cdGlmKFdlYlJUQy5pc0VzdGFibGlzaGVkKCkgfHwgV2ViUlRDLmlzSW5Qcm9ncmVzcygpKSB7XG5cdFx0V2ViUlRDLnRlcm1pbmF0ZSgpO1xuXHR9IGVsc2Uge1xuXHRcdGNsb3NlV2lkZ2V0KCk7XG5cdFx0aW5pdENhbGxTdGF0ZSgnaW5pdCcpO1xuXHR9XG59XG5cbi8qKlxuICogT3BlbiB3ZWIgY2hhdCB3aWRnZXQgaW4gYSBuZXcgd2luZG93XG4gKi9cbmZ1bmN0aW9uIG9wZW5XaWRnZXQoKXtcblx0Ly8gY29uc29sZS5sb2coJ29wZW4gd2lkZ2V0IScpO1xuXHR2YXIgdXJsID0gZGVmYXVsdHMuc2VydmVyK2RlZmF1bHRzLnBhdGgrJ3dpbmRvdy5odG1sJyxcblx0XHRvcHRzRW5jb2RlZCA9ICcnO1xuXHRcblx0aWYoIXdpZGdldFdpbmRvdyB8fCB3aWRnZXRXaW5kb3cuY2xvc2VkKSB7XG5cblx0XHR3aWRnZXRXaW5kb3cgPSB3aW5kb3cub3BlbignJywgJ3djaGF0JywgZGVmYXVsdHMud2lkZ2V0V2luZG93T3B0aW9ucyk7XG5cdFx0d2lkZ2V0V2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3djaGF0X29wdGlvbnMnLCBKU09OLnN0cmluZ2lmeShkZWZhdWx0cykpO1xuXG5cdFx0Y29uc3RydWN0V2luZG93KHdpZGdldFdpbmRvdyk7XG5cdFx0XG5cdFx0d2lkZ2V0V2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24oKXtcblx0XHRcdC8vY2xvc2UgY2hhdCBpZiB1c2VyIGNsb3NlIHRoZSB3aWRnZXQgd2luZG93XG5cdFx0XHQvL3dpdGhvdXQgZW5kaW5nIGEgZGlhbG9nXG5cdFx0XHRpZihhcGkuZ2V0U3RhdGUoJ2NoYXQnLCAnc3RvcmFnZScpKSBjbG9zZUNoYXQoKTtcblx0XHR9O1xuXHR9XG5cdGlmKHdpZGdldFdpbmRvdy5mb2N1cykgd2lkZ2V0V2luZG93LmZvY3VzKCk7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFdpbmRvdyh3aW5kb3dPYmplY3Qpe1xuXHR2YXIgbG9hZGVyLFxuXHRzY3JpcHQsXG5cdGxpbmssXG5cdGNoYXJzZXQsXG5cdHZpZXdwb3J0LFxuXHR0aXRsZTtcblxuXHR2aWV3cG9ydCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21ldGEnKTtcblx0dmlld3BvcnQubmFtZSA9ICd2aWV3cG9ydCc7XG5cdHZpZXdwb3J0LmNvbnRlbnQgPSAnd2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEsIG1heGltdW0tc2NhbGU9MSwgdXNlci1zY2FsYWJsZT0wJztcblxuXHRjaGFyc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbWV0YScpO1xuXHRjaGFyc2V0LnNldEF0dHJpYnV0ZSgnY2hhcnNldCcsICd1dGYtOCcpO1xuXG5cdHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGl0bGUnKTtcblx0dGl0bGUudGV4dENvbnRlbnQgPSBmcmFzZXNbY3VyckxhbmddLmRlZmF1bHRfdGl0bGU7XG5cblx0bG9hZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cdGxvYWRlci5zcmMgPSBkZWZhdWx0cy5zZXJ2ZXIrZGVmYXVsdHMucGF0aCsnbG9hZGVyLmpzJztcblxuXHRzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblx0c2NyaXB0LnNyYyA9IGRlZmF1bHRzLnNlcnZlcitkZWZhdWx0cy5wYXRoKyd3Y2hhdC5taW4uanMnO1xuXHRzY3JpcHQuY2hhcnNldCA9ICdVVEYtOCc7XG5cblx0bGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcblx0bGluay5yZWwgPSAnc3R5bGVzaGVldCc7XG5cdGxpbmsuaHJlZiA9IGRlZmF1bHRzLnNlcnZlcitkZWZhdWx0cy5wYXRoKydtYWluLmNzcyc7XG5cblx0d2luZG93T2JqZWN0LmRvY3VtZW50LmJvZHkuaWQgPSAnc3djLXdnLXdpbmRvdyc7XG5cdHdpbmRvd09iamVjdC5kb2N1bWVudC5ib2R5LnN0eWxlID0gJ21hcmdpbjowOyc7XG5cdHdpbmRvd09iamVjdC5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHZpZXdwb3J0KTtcblx0d2luZG93T2JqZWN0LmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoY2hhcnNldCk7XG5cdHdpbmRvd09iamVjdC5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRpdGxlKTtcblx0d2luZG93T2JqZWN0LmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG5cdHdpbmRvd09iamVjdC5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG5cdHdpbmRvd09iamVjdC5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxvYWRlcik7XG59XG5cbi8qKlxuICogU2V0IFdpZGdldCBldmVudCBsaXN0ZW5lcnNcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gd2lkZ2V0IC0gV2lkZ2V0IEhUTUwgZWxlbWVudFxuICovXG5mdW5jdGlvbiBzZXRMaXN0ZW5lcnMod2lkZ2V0KXtcblx0Ly8gdmFyIHNlbmRNc2dCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1zZW5kLW1lc3NhZ2UnKSxcblx0dmFyIGZpbGVTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkZWZhdWx0cy5wcmVmaXgrJy1maWxlLXNlbGVjdCcpLFxuXHRcdHRleHRGaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2UtdGV4dCcpO1xuXG5cdGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLWJ0bi1jb250Jyk7XG5cdHBhbmVzID0gW10uc2xpY2UuY2FsbCh3aWRnZXQucXVlcnlTZWxlY3RvckFsbCgnLicrZGVmYXVsdHMucHJlZml4Kyctd2ctcGFuZScpKTtcblx0bWVzc2FnZXNDb250ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZXMtY29udCcpO1xuXG5cdGFkZEV2ZW50KGJ0biwgJ2NsaWNrJywgYnRuQ2xpY2tIYW5kbGVyKTtcblx0YWRkRXZlbnQod2lkZ2V0LCAnY2xpY2snLCB3Z0NsaWNrSGFuZGxlcik7XG5cdGFkZEV2ZW50KHdpZGdldCwgJ3N1Ym1pdCcsIHdnU3VibWl0SGFuZGxlcik7XG5cdC8vIGFkZEV2ZW50KHNlbmRNc2dCdG4sICdjbGljaycsIHdnU2VuZE1lc3NhZ2UpO1xuXHRhZGRFdmVudChmaWxlU2VsZWN0LCAnY2hhbmdlJywgd2dTZW5kRmlsZSk7XG5cdGFkZEV2ZW50KHRleHRGaWVsZCwgJ2tleXByZXNzJywgd2dUeXBpbmdIYW5kbGVyKTtcbn1cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBXaWRnZXQgZXZlbnQgaGFuZGxlcnMgKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5mdW5jdGlvbiB3Z0NsaWNrSGFuZGxlcihlKXtcblx0dmFyIHRhcmcgPSBlLnRhcmdldCxcblx0XHRoYW5kbGVyLFxuXHRcdHBhbmUsXG5cdFx0aHJlZixcblx0XHRkYXRhSHJlZjtcblxuXHRpZih0YXJnLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ0EnIHx8IHRhcmcucGFyZW50Tm9kZS50YWdOYW1lID09PSAnQlVUVE9OJylcblx0XHR0YXJnID0gdGFyZy5wYXJlbnROb2RlO1xuXHRcblx0aGFuZGxlciA9IHRhcmcuZ2V0QXR0cmlidXRlKCdkYXRhLScrZGVmYXVsdHMucHJlZml4KyctaGFuZGxlcicpO1xuXHRkYXRhSHJlZiA9IHRhcmcuZ2V0QXR0cmlidXRlKCdkYXRhLScrZGVmYXVsdHMucHJlZml4KyctbGluaycpO1xuXG5cdGlmKGhhbmRsZXIgPT09ICdjbG9zZVdpZGdldCcpIHtcblx0XHRjbG9zZVdpZGdldCgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ2ZpbmlzaCcpIHtcblx0XHRpZihhcGkuZ2V0U3RhdGUoJ2NoYXQnKSkgc3dpdGNoUGFuZSgnY2xvc2VjaGF0Jyk7XG5cdFx0ZWxzZSBjbG9zZVdpZGdldCgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ3NlbmRNZXNzYWdlJykge1xuXHRcdHdnU2VuZE1lc3NhZ2UoKTtcblx0fSBlbHNlIGlmKGhhbmRsZXIgPT09ICdvcGVuV2luZG93Jykge1xuXHRcdG9wZW5XaWRnZXQoKTtcblx0fSBlbHNlIGlmKGhhbmRsZXIgPT09ICdyZWplY3RGb3JtJykge1xuXHRcdGFwaS5lbWl0KCdmb3JtL3JlamVjdCcsIHRhcmcucGFyZW50Tm9kZS5uYW1lKTtcblx0fSBlbHNlIGlmKGhhbmRsZXIgPT09ICdpbml0Q2FsbCcpIHtcblx0XHRpbml0Q2FsbCgpO1xuXHR9IGVsc2UgaWYoaGFuZGxlciA9PT0gJ2luaXRDaGF0Jykge1xuXHRcdGluaXRDaGF0KCk7XG5cdH0gZWxzZSBpZihoYW5kbGVyID09PSAnZW5kQ2FsbCcpIHtcblx0XHRlbmRDYWxsKCk7XG5cdH1cblxuXHRpZih0YXJnLnRhZ05hbWUgPT09ICdBJykge1xuXHRcdGhyZWYgPSB0YXJnLmhyZWY7XG5cblx0XHRpZihkYXRhSHJlZikge1xuXHRcdFx0YXBpLmxpbmtGb2xsb3dlZChkYXRhSHJlZik7XG5cdFx0fSBlbHNlIGlmKGhyZWYuaW5kZXhPZignIycpICE9PSAtMSkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0cGFuZSA9IGhyZWYuc3Vic3RyaW5nKHRhcmcuaHJlZi5pbmRleE9mKCcjJykrMSk7XG5cdFx0XHRpZihwYW5lKSBzd2l0Y2hQYW5lKHBhbmUpO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBidG5DbGlja0hhbmRsZXIoZSl7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0dmFyIHRhcmcgPSBlLnRhcmdldCxcblx0XHRjdXJyVGFyZyA9IGUuY3VycmVudFRhcmdldDtcblxuXHQvLyBJZiBlbGVtZW50IGlzIGludGVyYWN0ZWQsIHRoZW4gbm8gbm90aWZpY2F0aW9ucyBvZiBhIG5ldyBtZXNzYWdlIFxuXHQvLyB3aWxsIG9jY3VyIGR1cmluZyBjdXJyZW50IGJyb3dzZXIgc2Vzc2lvblxuXHRpZighYXBpLmdldFN0YXRlKCdpbnRlcmFjdGVkJywgJ3Nlc3Npb24nKSkge1xuXHRcdGFwaS5zYXZlU3RhdGUoJ2ludGVyYWN0ZWQnLCB0cnVlLCAnc2Vzc2lvbicpO1xuXHR9XG5cblx0Ly8gcmVtb3ZlIG5vdGlmaWNhdGlvbiBvZiBhIG5ldyBtZXNzYWdlXG5cdGlmKHRhcmcuaWQgPT09IGRlZmF1bHRzLnByZWZpeCsnLXVubm90aWZ5LWJ0bicpIHtcblx0XHRyZW1vdmVXZ1N0YXRlKCdub3RpZmllZCcpO1xuXHRcdC8vIHJlc2V0IGJ1dHRvbiBoZWlnaHRcblx0XHRyZXNldFN0eWxlcyhidG4uY2hpbGRyZW5bMF0pO1xuXHRcdHNldEJ1dHRvblN0eWxlKHdpZGdldFN0YXRlLnN0YXRlKTtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRpZihjdXJyVGFyZy5pZCA9PT0gZGVmYXVsdHMucHJlZml4KyctYnRuLWNvbnQnKSB7XG5cdFx0aW5pdFdpZGdldFN0YXRlKCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gaW5pdFdpZGdldFN0YXRlKCl7XG5cdC8vIElmIHRpbWVvdXQgaXMgb2NjdXJlZCwgaW5pdCBzZXNzaW9uIGZpcnN0XG5cdGlmKGhhc1dnU3RhdGUoJ3RpbWVvdXQnKSkge1xuXHRcdGluaXRNb2R1bGUoKTtcblx0fSBlbHNlIGlmKGFwaS5nZXRTdGF0ZSgnY2hhdCcsICdjYWNoZScpKXtcblx0XHRzaG93V2lkZ2V0KCk7XG5cdC8vIH0gZWxzZSBpZihkZWZhdWx0cy53ZWJydGMuc2lwLndzX3NlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiBkZWZhdWx0cy53ZWJydGMuc2lwLnVyaSAhPT0gdW5kZWZpbmVkKXtcblx0fSBlbHNlIGlmKGRlZmF1bHRzLndlYnJ0Yy5zaXAud3Nfc2VydmVycyAmJiBXZWJSVEMuaXNTdXBwb3J0ZWQoKSl7XG5cdFx0Ly8gaWYgY2FsbCBpcyBpbiBwcm9ncmVzcyAtIGp1c3Qgc2hvdyB0aGUgd2lkZ2V0XG5cdFx0aWYoYXBpLmdldFN0YXRlKCdjYWxsJywgJ2NhY2hlJykpIHtcblx0XHRcdHNob3dXaWRnZXQoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3dpdGNoUGFuZSgnY2hvb3NlQ29ubmVjdGlvbicpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHRpbml0Q2hhdCgpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHdnU2VuZE1lc3NhZ2UoKXtcblx0dmFyIG1zZyxcblx0XHR0ZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2UtdGV4dCcpO1xuXG5cdG1zZyA9IF8udHJpbSh0ZXh0YXJlYS52YWx1ZSk7XG5cdGlmKG1zZykge1xuXHRcdHNlbmRNZXNzYWdlKG1zZyk7XG5cdFx0dGV4dGFyZWEudmFsdWUgPSAnJztcblx0XHRyZW1vdmVXZ1N0YXRlKCd0eXBlLWV4dGVuZCcpO1xuXHR9XG5cdGlmKCFhcGkuZ2V0U3RhdGUoJ2NoYXQnKSkge1xuXHRcdGluaXRDaGF0KCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gd2dUeXBpbmdIYW5kbGVyKGUpe1xuXHR2YXIgdGFyZyA9IGUudGFyZ2V0O1xuXHRpZihlLmtleUNvZGUgPT09IDEwIHx8IGUua2V5Q29kZSA9PT0gMTMpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0d2dTZW5kTWVzc2FnZSgpO1xuXHR9IGVsc2Uge1xuXHRcdGlmKCF1c2VySXNUeXBpbmdUaW1lb3V0KSB7XG5cdFx0XHR1c2VySXNUeXBpbmdUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0dXNlcklzVHlwaW5nVGltZW91dCA9IG51bGw7XG5cdFx0XHRcdGFwaS51c2VySXNUeXBpbmcoKTtcblx0XHRcdH0sIDEwMDApO1xuXHRcdH1cblx0fVxuXG5cdGlmKHRhcmcudmFsdWUubGVuZ3RoID49IDgwICYmICFoYXNXZ1N0YXRlKCd0eXBlLWV4dGVuZCcpKVxuXHRcdGFkZFdnU3RhdGUoJ3R5cGUtZXh0ZW5kJyk7XG5cdGlmKHRhcmcudmFsdWUubGVuZ3RoIDwgODAgJiYgaGFzV2dTdGF0ZSgndHlwZS1leHRlbmQnKSlcblx0XHRyZW1vdmVXZ1N0YXRlKCd0eXBlLWV4dGVuZCcpO1xufVxuXG5mdW5jdGlvbiB3Z1N1Ym1pdEhhbmRsZXIoZSl7XG5cdHZhciB0YXJnID0gZS50YXJnZXQ7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0aWYodGFyZy50YWdOYW1lID09PSAnRk9STScpXG5cdFx0YXBpLmVtaXQoJ2Zvcm0vc3VibWl0JywgdGFyZyk7XG59XG5cbmZ1bmN0aW9uIHdnU2VuZEZpbGUoZSl7XG5cdHZhciB0YXJnID0gZS50YXJnZXQ7XG5cdHZhciBmaWxlID0gZ2V0RmlsZUNvbnRlbnQodGFyZywgZnVuY3Rpb24oZXJyLCByZXN1bHQpIHtcblx0XHRpZihlcnIpIHtcblx0XHRcdGFsZXJ0KCdGaWxlIHdhcyBub3Qgc2VudCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhcGkuc2VuZE1lc3NhZ2UocmVzdWx0LmZpbGVkYXRhLCByZXN1bHQuZmlsZW5hbWUpO1xuXHRcdH1cblx0fSk7XG59XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogV2lkZ2V0IGVsZW1lbnRzIG1hbmlwdWxhdGlvbiAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmZ1bmN0aW9uIHN3aXRjaFBhbmUocGFuZSl7XG5cdC8vIHZhciBwYW5lSWQgPSBkZWZhdWx0cy5wcmVmaXgrJy0nK3BhbmUrJy1wYW5lJztcblx0dmFyIGF0dHIgPSAnZGF0YS0nK2RlZmF1bHRzLnByZWZpeCsnLXBhbmUnO1xuXHQvLyBjb25zb2xlLmxvZygnc3dpdGNoUGFuZSBwYW5lczonLCBwYW5lcywgJ3BhbmU6ICcsIHBhbmUpO1xuXHRwYW5lcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuXHRcdGlmKGl0ZW0uZ2V0QXR0cmlidXRlKGF0dHIpID09PSBwYW5lKSB7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuXHRcdH1cblx0fSk7XG5cblx0aWYoIXdpZGdldFN0YXRlLmFjdGl2ZSkgc2hvd1dpZGdldCgpO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VXZ1N0YXRlKHBhcmFtcyl7XG5cdGlmKCF3aWRnZXQgfHwgd2lkZ2V0U3RhdGUuc3RhdGUgPT09IHBhcmFtcy5zdGF0ZSkgcmV0dXJuO1xuXHRpZihwYXJhbXMuc3RhdGUgPT09ICdvZmZsaW5lJykge1xuXHRcdHJlbW92ZVdnU3RhdGUoJ29ubGluZScpO1xuXHR9IGVsc2UgaWYocGFyYW1zLnN0YXRlID09PSAnb25saW5lJykge1xuXHRcdHJlbW92ZVdnU3RhdGUoJ29mZmxpbmUnKTtcblx0XHRcblx0fVxuXG5cdHdpZGdldFN0YXRlLnN0YXRlID0gcGFyYW1zLnN0YXRlO1xuXHRhZGRXZ1N0YXRlKHBhcmFtcy5zdGF0ZSk7XG5cdC8vIGFwaS5lbWl0KCd3aWRnZXQvc3RhdGVjaGFuZ2UnLCB7IHN0YXRlOiBwYXJhbXMuc3RhdGUgfSk7XG5cdHNldEJ1dHRvblN0eWxlKHBhcmFtcy5zdGF0ZSk7XG59XG5cbi8vIFRPRE86IFRoaXMgaXMgbm90IGEgZ29vZCBzb2x1dGlvbiBvciBtYXliZSBub3QgYSBnb29kIGltcGxlbWVudGF0aW9uXG5mdW5jdGlvbiBzZXRCdXR0b25TdHlsZShzdGF0ZSkge1xuXHQvLyBjb25zb2xlLmxvZygnc2V0QnV0dG9uU3R5bGU6ICcsIHN0YXRlKTtcblx0aWYoIXdpZGdldCB8fCBkZWZhdWx0cy5idXR0b25TdHlsZXNbc3RhdGVdID09PSB1bmRlZmluZWQpIHJldHVybjtcblx0dmFyIHdnQnRuID0gd2lkZ2V0LnF1ZXJ5U2VsZWN0b3IoJy4nK2RlZmF1bHRzLnByZWZpeCsnLXdnLWJ0bicpLFxuXHRcdGJ0bkljb24gPSB3aWRnZXQucXVlcnlTZWxlY3RvcignLicrZGVmYXVsdHMucHJlZml4KyctYnRuLWljb24nKTtcblxuXHR3Z0J0bi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0cy5idXR0b25TdHlsZXNbc3RhdGVdLmJhY2tncm91bmRDb2xvcjtcblx0YnRuSWNvbi5zdHlsZS5jb2xvciA9IGRlZmF1bHRzLmJ1dHRvblN0eWxlc1tzdGF0ZV0uY29sb3IgfHwgZGVmYXVsdHMuYnV0dG9uU3R5bGVzLmNvbG9yO1xufVxuXG5mdW5jdGlvbiBhZGRXZ1N0YXRlKHN0YXRlKXtcblx0aWYod2lkZ2V0KSB3aWRnZXQuY2xhc3NMaXN0LmFkZChzdGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGhhc1dnU3RhdGUoc3RhdGUpe1xuXHRpZih3aWRnZXQpIHJldHVybiB3aWRnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHN0YXRlKTtcblx0ZWxzZSByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVdnU3RhdGUoc3RhdGUpe1xuXHRpZih3aWRnZXQpIHdpZGdldC5jbGFzc0xpc3QucmVtb3ZlKHN0YXRlKTtcbn1cblxuZnVuY3Rpb24gc2hvd1dpZGdldCgpe1xuXHR3aWRnZXRTdGF0ZS5hY3RpdmUgPSB0cnVlO1xuXHRhZGRXZ1N0YXRlKCdhY3RpdmUnKTtcblx0cmVtb3ZlV2dTdGF0ZSgnbm90aWZpZWQnKTtcblxuXHQvLyByZXNldCBidXR0b24gaGVpZ2h0XG5cdHJlc2V0U3R5bGVzKGJ0bi5jaGlsZHJlblswXSk7XG5cdHNldEJ1dHRvblN0eWxlKHdpZGdldFN0YXRlLnN0YXRlKTtcblxuXHRtZXNzYWdlc0NvbnQuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250LnNjcm9sbEhlaWdodDtcbn1cblxuZnVuY3Rpb24gY2xvc2VXaWRnZXQoKXtcblx0aWYod2luZG93Lm9wZW5lcikge1xuXHRcdHdpbmRvdy5jbG9zZSgpO1xuXHR9IGVsc2Uge1xuXHRcdHdpZGdldFN0YXRlLmFjdGl2ZSA9IGZhbHNlO1xuXHRcdHJlbW92ZVdnU3RhdGUoJ2FjdGl2ZScpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIG9uRm9ybVN1Ym1pdChmb3JtKXtcblx0dmFyIGZvcm1EYXRhID0gZ2V0Rm9ybURhdGEoZm9ybSk7XG5cdC8vIGNvbnNvbGUubG9nKCdvbkZvcm1TdWJtaXQ6ICcsIGZvcm0sIGZvcm1EYXRhKTtcblx0aWYoZm9ybS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsaWRhdGUtZm9ybScpKSB7XG5cdFx0dmFyIHZhbGlkID0gdmFsaWRhdGVGb3JtKGZvcm0pO1xuXHRcdGlmKCF2YWxpZCkgcmV0dXJuO1xuXHRcdC8vIGNvbnNvbGUubG9nKCdvbkZvcm1TdWJtaXQgdmFsaWQ6ICcsIHZhbGlkKTtcblx0fVxuXHRpZihmb3JtLmlkID09PSBkZWZhdWx0cy5wcmVmaXgrJy1jbG9zZWNoYXQtZm9ybScpIHtcblx0XHRzdWJtaXRDbG9zZUNoYXRGb3JtKGZvcm0sIGZvcm1EYXRhKTtcblx0fSBlbHNlIGlmKGZvcm0uaWQgPT09IGRlZmF1bHRzLnByZWZpeCsnLXNlbmRtYWlsLWZvcm0nKSB7XG5cdFx0c3VibWl0U2VuZE1haWxGb3JtKGZvcm0sIGZvcm1EYXRhKTtcblx0fSBlbHNlIGlmKGZvcm0uaWQgPT09IGRlZmF1bHRzLnByZWZpeCsnLWludHJvLWZvcm0nKSB7XG5cdFx0cmVxdWVzdENoYXQoZm9ybURhdGEpO1xuXHR9IGVsc2UgaWYoZm9ybS5pZCA9PT0gZGVmYXVsdHMucHJlZml4KyctY2FsbC1idG4tZm9ybScpe1xuXHRcdGluaXRDYWxsKCk7XG5cdH0gZWxzZSBpZihmb3JtLmlkID09PSBkZWZhdWx0cy5wcmVmaXgrJy1jaGF0LWJ0bi1mb3JtJyl7XG5cdFx0aW5pdENoYXQoKTtcblx0fSBlbHNlIHtcblx0XHRjbG9zZUZvcm0oZm9ybS5uYW1lLCB0cnVlKTtcblx0fVxuXG59XG5cbmZ1bmN0aW9uIGNsb3NlRm9ybShuYW1lLCBzdWJtaXQpe1xuXHR2YXIgZm9ybSA9IGdsb2JhbFtuYW1lXTtcblx0aWYoIWZvcm0pIHJldHVybiBmYWxzZTtcblx0aWYoc3VibWl0KSB7XG5cdFx0Zm9ybS5vdXRlckhUTUwgPSAnPHAgY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLXRleHQtY2VudGVyXCI+Jytcblx0XHRcdFx0XHRcdFx0JzxpIGNsYXNzPVwiJytkZWZhdWx0cy5wcmVmaXgrJy10ZXh0LXN1Y2Nlc3MgJytkZWZhdWx0cy5wcmVmaXgrJy1pY29uLWNoZWNrXCI+PC9pPicrXG5cdFx0XHRcdFx0XHRcdCc8c3Bhbj4gJytmcmFzZXNbY3VyckxhbmddLmZvcm1fc3VibWl0dGVkKyc8L3NwYW4+Jytcblx0XHRcdFx0XHRcdCc8L3A+Jztcblx0fSBlbHNlIHtcblx0XHRmb3JtLm91dGVySFRNTCA9ICc8cCBjbGFzcz1cIicrZGVmYXVsdHMucHJlZml4KyctdGV4dC1jZW50ZXJcIj4nK1xuXHRcdFx0XHRcdFx0XHQnPGkgY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLXRleHQtZGFuZ2VyICcrZGVmYXVsdHMucHJlZml4KyctaWNvbi1yZW1vdmVcIj48L2k+Jytcblx0XHRcdFx0XHRcdFx0JzxzcGFuPiAnK2ZyYXNlc1tjdXJyTGFuZ10uZm9ybV9jYW5jZWxlZCsnPC9zcGFuPicrXG5cdFx0XHRcdFx0XHQnPC9wPic7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0RmlsZUNvbnRlbnQoZWxlbWVudCwgY2Ipe1xuXHR2YXIgZmlsZXMgPSBlbGVtZW50LmZpbGVzLFxuXHRcdGZpbGUsXG5cdFx0cmVhZGVyO1xuXG5cdGlmKCFmaWxlcy5sZW5ndGgpIHJldHVybjtcblx0aWYoIWdsb2JhbC5GaWxlUmVhZGVyKSB7XG5cdFx0aWYoY2IpIGNiKCdPQlNPTEVURV9CUk9XU0VSJyk7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0ZmlsZSA9IGZpbGVzWzBdO1xuXG5cdHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cdHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihldmVudCkge1xuXHRcdGlmKGNiKSBjYihudWxsLCB7IGZpbGVkYXRhOiBldmVudC50YXJnZXQucmVzdWx0LCBmaWxlbmFtZTogZmlsZS5uYW1lIH0pO1xuXHR9O1xuXHRyZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0YXBpLmVtaXQoJ0Vycm9yJywgZXZlbnQudGFyZ2V0LmVycm9yKTtcblx0XHRpZihjYikgY2IoZXZlbnQudGFyZ2V0LmVycm9yKTtcblx0fTtcblx0cmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG59XG5cbmZ1bmN0aW9uIG1lc3NhZ2VUZW1wbGF0ZSgpe1xuXHR2YXIgc3RyID0gJzxkaXYgY2xhc3M9XCInK2RlZmF1bHRzLnByZWZpeCsnLW1lc3NhZ2UgJytkZWZhdWx0cy5wcmVmaXgrJy08JT1lbnRpdHkgJT4tbXNnXCI+JyArXG5cdFx0XHRcdFx0JzxzcGFuIGNsYXNzPVwiJytkZWZhdWx0cy5wcmVmaXgrJy1tZXNzYWdlLWZyb21cIj48JT1mcm9tICU+PC9zcGFuPicgK1xuXHRcdFx0XHRcdCc8c3BhbiBjbGFzcz1cIicrZGVmYXVsdHMucHJlZml4KyctbWVzc2FnZS10aW1lXCI+IDwlPSB0aW1lICU+PC9zcGFuPicgK1xuXHRcdFx0XHRcdCc8YnI+JyArXG5cdFx0XHRcdFx0JzxwIGNsYXNzPVwiJytkZWZhdWx0cy5wcmVmaXgrJy1tZXNzYWdlLWNvbnRlbnRcIiA8JSBpZihlbnRpdHkgPT09IFwidXNlclwiKSB7ICU+IHN0eWxlPVwiYm9yZGVyLWNvbG9yOicrZGVmYXVsdHMuc3R5bGVzLnByaW1hcnkuYmFja2dyb3VuZENvbG9yKydcIiA8JSB9ICU+PjwlPXRleHQgJT48L3A+JyArXG5cdFx0XHRcdCc8L2Rpdj4nO1xuXHRcdFx0XHQvLyAnPC9saT4nO1xuXHRyZXR1cm4gc3RyO1xufVxuXG4vLyBmdW5jdGlvbiBhZ2VudElzVHlwaW5nVGVtcGxhdGUoKXtcbi8vIFx0dmFyIHN0ciA9ICc8ZGl2IGlkPVwiJytkZWZhdWx0cy5wcmVmaXgrJy1hZ2VudC10eXBpbmdcIiBjbGFzcz1cIicrZGVmYXVsdHMucHJlZml4KyctYWdlbnQtdHlwaW5nXCI+JyArXG4vLyBcdFx0XHRcdFx0JzxzcGFuPjwlPWFuYW1lICU+PC9zcGFuPicgK1xuLy8gXHRcdFx0XHRcdCc8c3Bhbj4gPCU9IHRleHQgJT48L3NwYW4+JyArXG4vLyBcdFx0XHRcdCc8L2Rpdj4nO1xuLy8gXHRyZXR1cm4gc3RyO1xuLy8gfVxuXG5mdW5jdGlvbiBjb21waWxlVGVtcGxhdGUodGVtcGxhdGUsIGRhdGEpe1xuXHR2YXIgY29tcGlsZWQgPSBfLnRlbXBsYXRlKHRlbXBsYXRlKTtcblx0cmV0dXJuIGNvbXBpbGVkKGRhdGEpO1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIEhlbHBlciBmdW5jdGlvbnMgKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5mdW5jdGlvbiBkZXRlY3RMYW5ndWFnZSgpe1xuXHR2YXIgc3RvcmFnZUxhbmcgPSBhcGkuZ2V0U3RhdGUoJ2xhbmcnKSxcblx0XHRhdmFpbGFibGVMYW5ncyA9IFtdLFxuXHRcdGxhbmcsXG5cdFx0cGF0aDtcblxuXHRpZihzdG9yYWdlTGFuZykge1xuXHRcdGxhbmcgPSBzdG9yYWdlTGFuZztcblx0fSBlbHNlIHtcblxuXHRcdC8vIGxpc3QgYXZhaWxhYmxlIGxhbmd1YWdlcyBieSB0cmFuc2xhdGlvbnMga2V5c1xuXHRcdGZvcih2YXIga2V5IGluIGZyYXNlcykge1xuXHRcdFx0YXZhaWxhYmxlTGFuZ3MucHVzaChrZXkpO1xuXHRcdH1cblxuXHRcdGlmKGRlZmF1bHRzLmxhbmdGcm9tVXJsKSB7XG5cdFx0XHRnbG9iYWwubG9jYXRpb24ucGF0aG5hbWVcblx0XHRcdC5zcGxpdCgnLycpXG5cdFx0XHQuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG5cdFx0XHRcdGlmKGF2YWlsYWJsZUxhbmdzLmluZGV4T2YoaXRlbSkgIT09IC0xKSB7XG5cdFx0XHRcdFx0bGFuZyA9IGl0ZW07XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmKCFsYW5nKSB7XG5cdFx0XHRsYW5nID0gZGVmYXVsdHMubGFuZyB8fCAobmF2aWdhdG9yLmxhbmd1YWdlIHx8IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UpLnNwbGl0KCctJylbMF07XG5cdFx0XHRpZihhdmFpbGFibGVMYW5ncy5pbmRleE9mKGxhbmcpID09PSAtMSkgbGFuZyA9ICdlbic7XG5cdFx0fVxuXHR9XG5cblx0Ly8gY29uc29sZS5sb2coJ2RldGVjdGVkIGxhbmc6ICcsIGxhbmcpO1xuXG5cdHJldHVybiBsYW5nO1xufVxuXG5mdW5jdGlvbiBicm93c2VySXNPYnNvbGV0ZSgpIHtcblx0Y29uc29sZS53YXJuKCdZb3VyIGJyb3dzZXIgaXMgb2Jzb2xldGUhJyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlVGltZSh0cykge1xuXHR2YXIgZGF0ZSA9IG5ldyBEYXRlKHRzKSxcblx0XHRob3VycyA9IGRhdGUuZ2V0SG91cnMoKSxcblx0XHRtaW51dGVzID0gZGF0ZS5nZXRNaW51dGVzKCksXG5cdFx0dGltZSA9IChob3VycyA8IDEwID8gJzAnK2hvdXJzIDogaG91cnMpICsgJzonICsgKG1pbnV0ZXMgPCAxMCA/ICcwJyttaW51dGVzIDogbWludXRlcyk7XG5cblx0cmV0dXJuIHRpbWU7XG59XG5cbmZ1bmN0aW9uIHBhcnNlTWVzc2FnZSh0ZXh0LCBmaWxlLCBlbnRpdHkpe1xuXHR2YXIgZmlsZW5hbWUsIGZvcm07XG5cdGlmKGZpbGUpIHtcblx0XHRmaWxlbmFtZSA9IHRleHQuc3Vic3RyaW5nKHRleHQuaW5kZXhPZignXycpKzEpO1xuXHRcdGlmKGlzSW1hZ2UoZmlsZSkpIHtcblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHR5cGU6ICdpbWFnZScsXG5cdFx0XHRcdGNvbnRlbnQ6ICc8YSBocmVmPVwiJythcGkub3B0aW9ucy5zZXJ2ZXIrJy9pcGNjLycrdGV4dCsnXCIgZG93bmxvYWQ9XCInK2ZpbGVuYW1lKydcIj4nICtcblx0XHRcdFx0XHRcdCc8aW1nIHNyYz1cIicrYXBpLm9wdGlvbnMuc2VydmVyKycvaXBjYy8nK3RleHQrJ1wiIGFsdD1cImZpbGUgcHJldmlld1wiIC8+JyArXG5cdFx0XHRcdFx0JzwvYT4nXG5cdFx0XHR9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiAnZmlsZScsXG5cdFx0XHRcdGNvbnRlbnQ6ICc8YSBocmVmPVwiJythcGkub3B0aW9ucy5zZXJ2ZXIrJy9pcGNjLycrdGV4dCsnXCIgZG93bmxvYWQ9XCInK2ZpbGVuYW1lKydcIj4nK2ZpbGVuYW1lKyc8L2E+J1xuXHRcdFx0fTtcblx0XHR9XG5cdH0gZWxzZSBpZihlbnRpdHkgPT09ICdhZ2VudCcgJiYgbmV3IFJlZ0V4cCgnXnsuK30kJykudGVzdCh0ZXh0KSkge1xuXHRcdGZvcm1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuXHRcdFx0aWYoaXRlbS5uYW1lID09PSB0ZXh0LnN1YnN0cmluZygxLCB0ZXh0Lmxlbmd0aC0xKSkge1xuXHRcdFx0XHRmb3JtID0gaXRlbTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHR0eXBlOiBmb3JtID8gJ2Zvcm0nIDogJ3RleHQnLFxuXHRcdFx0Y29udGVudDogZm9ybSA/IGZvcm0gOiB0ZXh0XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dHlwZTogJ3RleHQnLFxuXHRcdFx0Y29udGVudDogdGV4dC5zcGxpdChcIiBcIikubWFwKGNvbnZlcnRMaW5rcykuam9pbihcIiBcIilcblx0XHR9O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRMaW5rcyh0ZXh0KXtcblx0dmFyIGxlZnRvdmVycyA9IDA7XG5cdHZhciBocmVmID0gdGV4dDtcblx0aWYoaXNMaW5rKHRleHQpKXtcblxuXHRcdHdoaWxlKCEoaHJlZi5jaGFyQXQoaHJlZi5sZW5ndGgtMSkubWF0Y2goL1thLXowLTlcXC9dL2kpKSl7XG5cdFx0XHRocmVmID0gaHJlZi5zbGljZSgwLC0xKTtcblx0XHRcdGxlZnRvdmVycyArPSAxO1xuXHRcdH1cblx0XHRyZXR1cm4gJzxhIGhyZWY9XCInK2hyZWYrJ1wiIHRhcmdldD1cIl9ibGFua1wiIGRhdGEtJytkZWZhdWx0cy5wcmVmaXgrJy1saW5rPVwiJytocmVmKydcIj4nK2hyZWYrJzwvYT4nICsgdGV4dC5zdWJzdHIodGV4dC5sZW5ndGggLSBsZWZ0b3ZlcnMpO1xuXHR9IGVsc2Uge1xuXHRcdHJldHVybiB0ZXh0O1xuXHR9XG59XG5cbmZ1bmN0aW9uIGlzTGluayh0ZXh0KXtcblx0dmFyIHBhdHRlcm4gPSBuZXcgUmVnRXhwKCdeaHR0cDpcXC9cXC98Xmh0dHBzOlxcL1xcLycpO1xuXHRyZXR1cm4gcGF0dGVybi50ZXN0KHRleHQpO1xufVxuXG5mdW5jdGlvbiBpc0ltYWdlKGZpbGVuYW1lKXtcblx0dmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgncG5nfFBOR3xqcGd8SlBHfEpQRUd8anBlZ3xnaWZ8R0lGJyk7XG5cdHZhciBleHQgPSBmaWxlbmFtZS5zdWJzdHJpbmcoZmlsZW5hbWUubGFzdEluZGV4T2YoJy4nKSsxKTtcblx0cmV0dXJuIHJlZ2V4LnRlc3QoZXh0KTtcbn1cblxuZnVuY3Rpb24gZ2V0Rm9ybURhdGEoZm9ybSl7XG5cdHZhciBmb3JtRGF0YSA9IHt9O1xuXHRbXS5zbGljZS5jYWxsKGZvcm0uZWxlbWVudHMpLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcblx0XHRpZihlbC50eXBlID09PSAnY2hlY2tib3gnKSBmb3JtRGF0YVtlbC5uYW1lXSA9IGVsLmNoZWNrZWQ7XG5cdFx0ZWxzZSB7XG5cdFx0XHRpZihlbC52YWx1ZSkgZm9ybURhdGFbZWwubmFtZV0gPSBlbC52YWx1ZTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gZm9ybURhdGE7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRm9ybShmb3JtKXtcblx0dmFyIHZhbGlkID0gdHJ1ZTtcblx0W10uc2xpY2UuY2FsbChmb3JtLmVsZW1lbnRzKS5ldmVyeShmdW5jdGlvbihlbCkge1xuXHRcdC8vIGNvbnNvbGUubG9nKCd2YWxpZGF0ZUZvcm0gZWw6JywgZWwsIGVsLmhhc0F0dHJpYnV0ZSgncmVxdWlyZWQnKSwgZWwudmFsdWUsIGVsLnR5cGUpO1xuXHRcdGlmKGVsLmhhc0F0dHJpYnV0ZSgncmVxdWlyZWQnKSAmJiAoZWwudmFsdWUgPT09IFwiXCIgfHwgZWwudmFsdWUgPT09IG51bGwpKSB7XG5cdFx0XHRhbGVydChmcmFzZXNbY3VyckxhbmddLnJlcXVpcmVkX2Vycm9yW2VsLnR5cGVdIHx8IGZyYXNlc1tjdXJyTGFuZ10ucmVxdWlyZWRfZXJyb3IuZmllbGRzKTtcblx0XHRcdHZhbGlkID0gZmFsc2U7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fSk7XG5cdC8vIGNvbnNvbGUubG9nKCd2YWxpZGF0ZUZvcm0gdmFsaWQ6ICcsIHZhbGlkKTtcblx0cmV0dXJuIHZhbGlkO1xufVxuXG5mdW5jdGlvbiByZXNldFN0eWxlcyhlbGVtZW50KXtcblx0ZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7XG59XG5cbmZ1bmN0aW9uIGFkZFdpZGdldFN0eWxlcygpe1xuXHRcblx0dmFyIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XG5cdFx0bGluay5yZWwgPSAnc3R5bGVzaGVldCc7XG5cdFx0bGluay5ocmVmID0gZGVmYXVsdHMuc2VydmVyK2RlZmF1bHRzLnBhdGgrJ21haW4uY3NzJztcblxuXHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGxpbmspO1xufVxuXG5mdW5jdGlvbiBQcmVmaXhlZEV2ZW50KGVsZW1lbnQsIHR5cGUsIHBmeCwgY2FsbGJhY2spIHtcblx0Zm9yICh2YXIgcCA9IDA7IHAgPCBwZngubGVuZ3RoOyBwKyspIHtcblx0XHRpZiAoIXBmeFtwXSkgdHlwZSA9IHR5cGUudG9Mb3dlckNhc2UoKTtcblx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIocGZ4W3BdK3R5cGUsIGNhbGxiYWNrLCBmYWxzZSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY29udmVydFRpbWUoc2Vjb25kcyl7XG5cdHZhciBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApLFxuXHRcdHNlY3NSZW1haW4gPSBzZWNvbmRzICUgNjAsXG5cdFx0c3RyID0gKG1pbnV0ZXMgPiA5ID8gbWludXRlcyA6ICcwJyArIG1pbnV0ZXMpICsgJzonICsgKHNlY3NSZW1haW4gPiA5ID8gc2Vjc1JlbWFpbiA6ICcwJyArIHNlY3NSZW1haW4pO1xuXHRyZXR1cm4gc3RyO1xufVxuXG5mdW5jdGlvbiBpc0Jyb3dzZXJTdXBwb3J0ZWQoKSB7XG5cdHJldHVybiBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdCAhPT0gdW5kZWZpbmVkO1xufVxuXG5mdW5jdGlvbiBhZGRFdmVudChvYmosIGV2VHlwZSwgZm4pIHtcbiAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSBvYmouYWRkRXZlbnRMaXN0ZW5lcihldlR5cGUsIGZuLCBmYWxzZSk7XG4gIGVsc2UgaWYgKG9iai5hdHRhY2hFdmVudCkgb2JqLmF0dGFjaEV2ZW50KFwib25cIitldlR5cGUsIGZuKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZUV2ZW50KG9iaiwgZXZUeXBlLCBmbikge1xuICBpZiAob2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIpIG9iai5yZW1vdmVFdmVudExpc3RlbmVyKGV2VHlwZSwgZm4sIGZhbHNlKTtcbiAgZWxzZSBpZiAob2JqLmRldGFjaEV2ZW50KSBvYmouZGV0YWNoRXZlbnQoXCJvblwiK2V2VHlwZSwgZm4pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0bW9kdWxlOiBXaWRnZXQsXG5cdGFwaTogcHVibGljQXBpXG59O1xuIiwibW9kdWxlLmV4cG9ydHM9e1xuICAgIFwiZW5cIjoge1xuXHRcdFwibGFuZ1wiOiBcIkVuZ2xpc2hcIixcblx0XHRcImRlZmF1bHRfdXNlcl9uYW1lXCI6IFwiWW91XCIsXG5cdFx0XCJkZWZhdWx0X3RpdGxlXCI6IFwiTGl2ZSBjaGF0XCIsXG5cdFx0XCJkZWZhdWx0X29mZmVyXCI6IFwiV2VsY29tZSwgbmVlZCBzb21lIGhlbHA/XCIsXG5cdFx0XCJncmVldHNcIjogXCJHcmVldGluZ3MhXCIsXG5cdFx0XCJjYW5jZWxcIjogXCJDYW5jZWxcIixcblx0XHRcImNsb3NlXCI6IFwiQ2xvc2VcIixcblx0XHRcImZpbmlzaFwiOiBcIkZpbmlzaFwiLFxuXHRcdFwiYmFja1wiOiBcIkJhY2tcIixcblx0XHRcInNlbmRcIjogXCJTZW5kXCIsXG5cdFx0XCJzZW5kX21lc3NhZ2VfYnV0dG9uXCI6IFwiU2VuZCBtZXNzYWdlXCIsXG5cdFx0XCJzdGFydF9kaWFsb2dfYnV0dG9uXCI6IFwiU3RhcnQgZGlhbG9nXCIsXG5cdFx0XCJmaW5pc2hfZGlhbG9nX2J1dHRvblwiOiBcIkZpbmlzaCBkaWFsb2dcIixcblx0XHRcImNob29zZV9kaWFsb2dfbGFuZ1wiOiBcIkNob29zZSBkaWFsb2cgbGFuZ3VhZ2VcIixcblx0XHRcImludHJvX21lc3NhZ2VcIjogXCJQbGVhc2UsIGludHJvZHVjZSB5b3Vyc2VsZlwiLFxuXHRcdFwib2ZmbGluZV9tZXNzYWdlXCI6IFwiV2UgYXJlIG9mZmxpbmUgbm93LCBwbGVhc2UgbGVhdmUgdXMgYSBtZXNzYWdlLCB3ZSdsbCBjb250YWN0IHlvdSBzaG9ydGx5XCIsXG5cdFx0XCJzZW5kX21lc3NhZ2VfaGVhZGVyXCI6IFwiU2VuZCBhIG1lc3NhZ2VcIixcblx0XHRcImNsb3NlX2NoYXRfaGVhZGVyXCI6IFwiVGhhbmsgeW91IGZvciByZWFjaGluZyB1cyFcIixcblx0XHRcInNlbmRfZGlhbG9nX2xhYmVsXCI6IFwiU2VuZCBkaWFsb2cgdG8geW91ciBlbWFpbD9cIixcblx0XHRcInJhdGVfYWdlbnRcIjogXCJSYXRlIGFnZW50IHNlcnZpY2VcIixcblx0XHRcInJhdGVzXCI6IHtcblx0XHRcdFwiZXhjZWxsZW50XCI6IFwiRXhjZWxsZW50XCIsXG5cdFx0XHRcImdvb2RcIjogXCJHb29kXCIsXG5cdFx0XHRcImZhaXJcIjogXCJGYWlyXCIsXG5cdFx0XHRcImJhZFwiOiBcIkJhZFwiXG5cdFx0fSxcblx0XHRcImVtYWlsX3N1YmplY3RzXCI6IHtcblx0XHRcdFwiZGlhbG9nXCI6IFwiWW91ciBkaWFsb2cgb25cIixcblx0XHRcdFwiY29tcGxhaW5cIjogXCJEaWFsb2cgY29tbWVudCBmcm9tXCIsXG5cdFx0XHRcInJlcXVlc3RcIjogXCJOZXcgbWVzc2FnZSBmcm9tXCJcblx0XHR9LFxuXHRcdFwicmVxdWlyZWRfZXJyb3JcIjoge1xuXHRcdFx0XCJmaWVsZHNcIjogXCJQbGVhc2UgZmlsbCBpbiBhbGwgcmVxdWlyZWQgZmllbGRzXCIsXG5cdFx0XHRcImVtYWlsXCI6IFwiUGxlYXNlIGZpbGwgaW4geW91ciBlbWFpbFwiLFxuXHRcdFx0XCJ0ZWxcIjogXCJQbGVhc2UgZmlsbCBpbiB5b3VyIHRlbGVwaG9uZSBudW1iZXJcIlxuXHRcdH0sXG5cdFx0XCJmb3JtX3N1Ym1pdHRlZFwiOiBcIkZvcm0gc2VudCwgdGhhbmsgeW91IVwiLFxuXHRcdFwiZm9ybV9jYW5jZWxlZFwiOiBcIkZvcm0gY2FuY2VsbGVkXCIsXG5cdFx0XCJwaG9sZGVyXCI6IHtcblx0XHRcdFwidW5hbWVcIjogXCJZb3VyIG5hbWVcIixcblx0XHRcdFwiZW1haWxcIjogXCJZb3VyIGVtYWlsXCIsXG5cdFx0XHRcInBob25lXCI6IFwiWW91ciBwaG9uZVwiLFxuXHRcdFx0XCJzdWJqZWN0XCI6IFwiRGlhbG9nJ3Mgc3ViamVjdFwiLFxuXHRcdFx0XCJtZXNzYWdlXCI6IFwiWW91ciBtZXNzYWdlIGhlcmUuLi5cIixcblx0XHRcdFwiY29tbWVudFwiOiBcIlBsZWFzZSwgbGVhdmUgeW91ciBjb21tZW50IGhlcmUuLi5cIlxuXHRcdH0sXG5cdFx0XCJpbml0X3BhbmVcIjoge1xuXHRcdFx0XCJjaG9vc2VfY29ubl90eXBlXCI6IFwiUGxlYXNlLCBjaG9vc2UgYSBjb25uZWN0aW9uIHR5cGVcIixcblx0XHRcdFwiY2FsbF9hZ2VudF9idG5cIjogXCJDYWxsIGFnZW50XCIsXG5cdFx0XHRcImNoYXRfYWdlbnRfYnRuXCI6IFwiU3RhcnQgY2hhdFwiXG5cdFx0fSxcblx0XHRcImNhbGxfcGFuZVwiOiB7XG5cdFx0XHRcImNvbmZpcm1fYWNjZXNzXCI6IFwiUGxlYXNlLCBjb25maXJtIGFjY2VzcyB0byBtaWNyb3Bob25lXCIsXG5cdFx0XHRcImNhbGxpbmdfYWdlbnRcIjogXCJDYWxsaW5nIEFnZW50XCIsXG5cdFx0XHRcImNvbm5lY3RlZF93aXRoX2FnZW50XCI6IFwiQ29ubmVjdGVkIHdpdGggQWdlbnRcIixcblx0XHRcdFwiY2FsbF9lbmRlZFwiOiBcIkNhbGwgZW5kZWRcIixcblx0XHRcdFwiY2FsbF9mYWlsZWRcIjogXCJDYWxsIGZhaWxlZCBcXG4gUGxlYXNlLCB0cnkgYWdhaW4gbGF0ZXJcIixcblx0XHRcdFwiY2FsbF9jYW5jZWxlZFwiOiBcIkNhbGwgY2FuY2VsZWRcIixcblx0XHRcdFwiZW5kX2NhbGxcIjogXCJFbmQgY2FsbFwiLFxuXHRcdFx0XCJ0cnlfYWdhaW5cIjogXCJUcnkgYWdhaW5cIlxuXHRcdH1cbiAgICB9LFxuICAgIFwidWtcIjoge1xuICAgIFx0XCJsYW5nXCI6IFwi0KPQutGA0LDRl9C90YHRjNC60LBcIixcbiAgICBcdFwiZGVmYXVsdF91c2VyX25hbWVcIjogXCLQktC4XCIsXG4gICAgXHRcImRlZmF1bHRfdGl0bGVcIjogXCLQntC90LvQsNC50L0g0YfQsNGCXCIsXG4gICAgXHRcImRlZmF1bHRfb2ZmZXJcIjogXCLQm9Cw0YHQutCw0LLQviDQv9GA0L7RgdC40LzQviwg0L/QvtGC0YDRltCx0L3QsCDQtNC+0L/QvtC80L7Qs9CwP1wiLFxuICAgIFx0XCJncmVldHNcIjogXCLQktGW0YLQsNGU0LzQviFcIixcblx0XHRcImNhbmNlbFwiOiBcItCS0ZbQtNC80ZbQvdCwXCIsXG5cdFx0XCJjbG9zZVwiOiBcItCX0LDQutGA0LjRgtC4XCIsXG5cdFx0XCJmaW5pc2hcIjogXCLQl9Cw0LLQtdGA0YjQuNGC0LhcIixcblx0XHRcImJhY2tcIjogXCLQndCw0LfQsNC0XCIsXG5cdFx0XCJzZW5kXCI6IFwi0JLRltC00L/RgNCw0LLQuNGC0LhcIixcblx0XHRcInNlbmRfbWVzc2FnZV9idXR0b25cIjogXCLQktGW0LTQv9GA0LDQstC40YLQuFwiLFxuICAgIFx0XCJzdGFydF9kaWFsb2dfYnV0dG9uXCI6IFwi0KDQvtC30L/QvtGH0LDRgtC4INC00ZbQsNC70L7Qs1wiLFxuICAgIFx0XCJmaW5pc2hfZGlhbG9nX2J1dHRvblwiOiBcItCX0LDQutGW0L3Rh9C40YLQuCDQtNGW0LDQu9C+0LNcIixcblx0XHRcImNob29zZV9kaWFsb2dfbGFuZ1wiOiBcItCe0LHQtdGA0ZbRgtGMINC80L7QstGDINC00ZbQsNC70L7Qs9GDXCIsXG5cdFx0XCJpbnRyb19tZXNzYWdlXCI6IFwi0JHRg9C00Ywt0LvQsNGB0LrQsCwg0LfQsNC/0L7QstC90ZbRgtGMINC90LXQvtCx0YXRltC00L3RliDQv9C+0LvRj1wiLFxuXHRcdFwib2ZmbGluZV9tZXNzYWdlXCI6IFwi0J3QsNGA0LDQt9GWINC80Lgg0L7RhNGE0LvQsNC50L0sINCx0YPQtNGMINC70LDRgdC60LAsINC30LDQu9C40YjRgtC1INC90LDQvCDQv9C+0LLRltC00L7QvNC70LXQvdC90Y8sINC80Lgg0LfQsifRj9C20LXQvNC+0YHRjyDQtyDQktCw0LzQuCDQvdCw0LnQsdC70LjQttGH0LjQvCDRh9Cw0YHQvtC8XCIsXG5cdFx0XCJzZW5kX21lc3NhZ2VfaGVhZGVyXCI6IFwi0JLRltC00L/RgNCw0LLQuNGC0Lgg0L/QvtCy0ZbQtNC+0LzQu9C10L3QvdGPXCIsXG5cdFx0XCJjbG9zZV9jaGF0X2hlYWRlclwiOiBcItCU0Y/QutGD0ZTQvNC+LCDRidC+INC30LLQtdGA0L3Rg9C70LjRgdGPINC00L4g0L3QsNGBIVwiLFxuXHRcdFwic2VuZF9kaWFsb2dfbGFiZWxcIjogXCLQktGW0LTQv9GA0LDQstC40YLQuCDQtNGW0LDQu9C+0LMg0L3QsCDQstCw0YggZW1haWw/XCIsXG5cdFx0XCJyYXRlX2FnZW50XCI6IFwi0J7RhtGW0L3QuNGC0Lgg0YDQvtCx0L7RgtGDINC+0L/QtdGA0LDRgtC+0YDQsFwiLFxuXHRcdFwicmF0ZXNcIjoge1xuXHRcdFx0XCJleGNlbGxlbnRcIjogXCLQktGW0LTQvNGW0L3QvdC+XCIsXG5cdFx0XHRcImdvb2RcIjogXCLQlNC+0LHRgNC1XCIsXG5cdFx0XHRcImZhaXJcIjogXCLQl9Cw0LTQvtCy0ZbQu9GM0L3QvlwiLFxuXHRcdFx0XCJiYWRcIjogXCLQn9C+0LPQsNC90L5cIlxuXHRcdH0sXG5cdFx0XCJlbWFpbF9zdWJqZWN0c1wiOiB7XG5cdFx0XHRcImRpYWxvZ1wiOiBcItCS0LDRiCDQtNGW0LDQu9C+0LMg0L3QsFwiLFxuXHRcdFx0XCJjb21wbGFpblwiOiBcItCa0L7QvNC10L3RgtCw0YAg0LTQviDQtNGW0LDQu9C+0LPRgyDQstGW0LRcIixcblx0XHRcdFwicmVxdWVzdFwiOiBcItCd0L7QstC1INC/0L7QstGW0LTQvtC80LvQtdC90L3RjyDQstGW0LRcIlxuXHRcdH0sXG5cdFx0XCJyZXF1aXJlZF9lcnJvclwiOiB7XG5cdFx0XHRcImZpZWxkc1wiOiBcItCR0YPQtNGMLdC70LDRgdC60LAsINC30LDQv9C+0LLQvdGW0YLRjCDQstGB0ZYg0L3QtdC+0LHRhdGW0LTQvdGWINC/0L7Qu9GPXCIsXG5cdFx0XHRcImVtYWlsXCI6IFwi0JHRg9C00Ywt0LvQsNGB0LrQsCwg0LLQstC10LTRltGC0Ywg0YHQstC+0Y4g0LXQu9C10LrRgtGA0L7QvdC90YMg0LDQtNGA0LXRgdGDXCIsXG5cdFx0XHRcInRlbFwiOiBcItCR0YPQtNGMLdC70LDRgdC60LAsINCy0LLQtdC00ZbRgtGMINGB0LLRltC5INC90L7QvNC10YAg0YLQtdC70LXRhNC+0L3Rg1wiXG5cdFx0fSxcblx0XHRcImZvcm1fc3VibWl0dGVkXCI6IFwi0KTQvtGA0LzQsCDQstGW0LTQv9GA0LDQstC70LXQvdCwLCDQtNGP0LrRg9GU0LzQviFcIixcblx0XHRcImZvcm1fY2FuY2VsZWRcIjogXCLQpNC+0YDQvNCwINCy0ZbQtNGF0LjQu9C10L3QsFwiLFxuXHRcdFwicGhvbGRlclwiOiB7XG5cdFx0XHRcInVuYW1lXCI6IFwi0JLQsNGI0LUg0ZbQvCfRj1wiLFxuXHRcdFx0XCJlbWFpbFwiOiBcItCS0LDRiNCwINC10LvQtdC60YLRgNC+0L3QvdCwINCw0LTRgNC10YHQsFwiLFxuXHRcdFx0XCJwaG9uZVwiOiBcItCS0LDRiCDRgtC10LvQtdGE0L7QvVwiLFxuXHRcdFx0XCJzdWJqZWN0XCI6IFwi0KLQtdC80LAg0LTRltCw0LvQvtCz0YNcIixcblx0XHRcdFwibWVzc2FnZVwiOiBcItCS0LDRiNC1INC/0L7QstGW0LTQvtC80LvQtdC90L3RjyDRgtGD0YIuLi5cIixcblx0XHRcdFwiY29tbWVudFwiOiBcItCR0YPQtNGMLdC70LDRgdC60LAsINC30LDQu9C40YjRgtC1INGC0YPRgiDRgdCy0ZbQuSDQutC+0LzQtdC90YLQsNGALi4uXCJcblx0XHR9LFxuXHRcdFwiaW5pdF9wYW5lXCI6IHtcblx0XHRcdFwiY2hvb3NlX2Nvbm5fdHlwZVwiOiBcItCR0YPQtNGMLdC70LDRgdC60LAsINCy0LjQsdC10YDRltGC0Ywg0YLQuNC/INC3J9GU0LTQvdCw0L3QvdGPXCIsXG5cdFx0XHRcImNhbGxfYWdlbnRfYnRuXCI6IFwi0JLQuNC60LvQuNC6INCw0LPQtdC90YLQsFwiLFxuXHRcdFx0XCJjaGF0X2FnZW50X2J0blwiOiBcItCf0L7Rh9Cw0YLQuCDRh9Cw0YJcIlxuXHRcdH0sXG5cdFx0XCJjYWxsX3BhbmVcIjoge1xuXHRcdFx0XCJjb25maXJtX2FjY2Vzc1wiOiBcItCR0YPQtNGMLdC70LDRgdC60LAsINC/0ZbQtNGC0LLQtdGA0LTRltGC0Ywg0LTQvtGB0YLRg9C/INC00L4g0LzRltC60YDQvtGE0L7QvdCwXCIsXG5cdFx0XHRcImNhbGxpbmdfYWdlbnRcIjogXCLQmdC00LUg0LLQuNC60LvQuNC6XCIsXG5cdFx0XHRcImNvbm5lY3RlZF93aXRoX2FnZW50XCI6IFwi0JLQuNC60LvQuNC6INC3J9GU0LTQvdCw0L3QuNC5XCIsXG5cdFx0XHRcImNhbGxfZW5kZWRcIjogXCLQktC40LrQu9C40Log0LfQsNCy0LXRgNGI0LXQvdC+XCIsXG5cdFx0XHRcImNhbGxfZmFpbGVkXCI6IFwi0JfQsdGW0Lkg0LLQuNC60LvQuNC60YMgXFxuINCR0YPQtNGMLdC70LDRgdC60LAg0YHQv9GA0L7QsdGD0LnRgtC1INC/0ZbQt9C90ZbRiNC1XCIsXG5cdFx0XHRcImNhbGxfY2FuY2VsZWRcIjogXCLQktC40LrQu9C40Log0YHQutCw0YHQvtCy0LDQvdC40LlcIixcblx0XHRcdFwiZW5kX2NhbGxcIjogXCLQl9Cw0LLQtdGA0YjQuNGC0Lgg0LLQuNC60LvQuNC6XCIsXG5cdFx0XHRcInRyeV9hZ2FpblwiOiBcItCh0L/RgNC+0LHRg9Cy0LDRgtC4INGJ0LUg0YDQsNC3XCJcblx0XHR9XG4gICAgfSxcbiAgICBcInJ1XCI6IHtcbiAgICBcdFwibGFuZ1wiOiBcItCg0YPRgdGB0LrQuNC5XCIsXG4gICAgXHRcImRlZmF1bHRfdXNlcl9uYW1lXCI6IFwi0JLRi1wiLFxuXHRcdFwiZGVmYXVsdF90aXRsZVwiOiBcItCe0L3Qu9Cw0LnQvSDRh9Cw0YJcIixcblx0XHRcImRlZmF1bHRfb2ZmZXJcIjogXCLQlNC+0LHRgNC+INC/0L7QttCw0LvQvtCy0LDRgtGMLCDQvdGD0LbQvdCwINC/0L7QvNC+0YnRjD9cIixcbiAgICBcdFwiZ3JlZXRzXCI6IFwi0J/RgNC40LLQtdGC0YHRgtCy0YPQtdC8IVwiLFxuXHRcdFwiY2FuY2VsXCI6IFwi0J7RgtC80LXQvdCwXCIsXG5cdFx0XCJjbG9zZVwiOiBcItCX0LDQutGA0YvRgtGMXCIsXG5cdFx0XCJmaW5pc2hcIjogXCLQl9Cw0LLQtdGA0YjQuNGC0YxcIixcblx0XHRcImJhY2tcIjogXCLQndCw0LfQsNC0XCIsXG5cdFx0XCJzZW5kXCI6IFwi0J7RgtC/0YDQsNCy0LjRgtGMXCIsXG5cdFx0XCJzZW5kX21lc3NhZ2VfYnV0dG9uXCI6IFwi0J7RgtC/0YDQsNCy0LjRgtGMXCIsXG4gICAgXHRcInN0YXJ0X2RpYWxvZ19idXR0b25cIjogXCLQndCw0YfQsNGC0Ywg0LTQuNCw0LvQvtCzXCIsXG4gICAgXHRcImZpbmlzaF9kaWFsb2dfYnV0dG9uXCI6IFwi0JfQsNCy0LXRgNGI0LjRgtGMINC00LjQsNC70L7Qs1wiLFxuXHRcdFwiY2hvb3NlX2RpYWxvZ19sYW5nXCI6IFwi0JLRi9Cx0LXRgNC40YLQtSDRj9C30YvQuiDQtNC40LDQu9C+0LPQsFwiLFxuXHRcdFwiaW50cm9fbWVzc2FnZVwiOiBcItCf0L7QttCw0LvRg9C50YHRgtCwLCDQt9Cy0L/QvtC70L3QuNGC0LUg0L3QtdC+0LHRhdC+0LTQuNC80YvQtSDQv9C+0LvRj1wiLFxuXHRcdFwib2ZmbGluZV9tZXNzYWdlXCI6IFwi0KHQtdC50YfQsNGBINC80Ysg0L7RhNGE0LvQsNC50L0sINC/0L7QttCw0LvRg9C50YHRgtCwLCDQvtGB0YLQsNCy0YzRgtC1INC90LDQvCDRgdC+0L7QsdGJ0LXQvdC40LUsINC80Ysg0YHQstGP0LbQtdC80YHRjyDRgSDQktCw0LzQuCDQsiDQsdC70LjQttCw0LnRiNC10LUg0LLRgNC10LzRj1wiLFxuXHRcdFwic2VuZF9tZXNzYWdlX2hlYWRlclwiOiBcItCe0YLQv9GA0LDQstC40YLRjCDRgdC+0L7QsdGJ0LXQvdC40LVcIixcblx0XHRcImNsb3NlX2NoYXRfaGVhZGVyXCI6IFwi0KHQv9Cw0YHQuNCx0L4sINGH0YLQviDQvtCx0YDQsNGC0LjQu9C40YHRjCDQuiDQvdCw0LwhXCIsXG5cdFx0XCJzZW5kX2RpYWxvZ19sYWJlbFwiOiBcItCe0YLQv9GA0LDQstC40YLRjCDQtNC40LDQu9C+0LMg0L3QsCDQstCw0YggZW1haWw/XCIsXG5cdFx0XCJyYXRlX2FnZW50XCI6IFwi0J7RhtC10L3QuNGC0Ywg0YDQsNCx0L7RgtGDINC+0L/QtdGA0LDRgtC+0YDQsFwiLFxuXHRcdFwicmF0ZXNcIjoge1xuXHRcdFx0XCJleGNlbGxlbnRcIjogXCLQntGC0LvQuNGH0L3QvlwiLFxuXHRcdFx0XCJnb29kXCI6IFwi0KXQvtGA0L7RiNC+XCIsXG5cdFx0XHRcImZhaXJcIjogXCLQndC+0YDQvNCw0LvRjNC90L5cIixcblx0XHRcdFwiYmFkXCI6IFwi0J/Qu9C+0YXQvlwiXG5cdFx0fSxcblx0XHRcImVtYWlsX3N1YmplY3RzXCI6IHtcblx0XHRcdFwiZGlhbG9nXCI6IFwi0JLQsNGIINC00LjQsNC70L7QsyDQvdCwXCIsXG5cdFx0XHRcImNvbXBsYWluXCI6IFwi0JrQvtC80LzQtdC90YLQsNGA0LjQuSDQuiDQtNC40LDQu9C+0LPRgyDQvtGCXCIsXG5cdFx0XHRcInJlcXVlc3RcIjogXCLQndC+0LLQvtC1INGB0L7QvtCx0YnQtdC90LjQtSDQvtGCXCJcblx0XHR9LFxuXHRcdFwicmVxdWlyZWRfZXJyb3JcIjoge1xuXHRcdFx0XCJmaWVsZHNcIjogXCLQn9C+0LbQsNC70YPQudGB0YLQsCwg0LfQsNC/0L7Qu9C90LjRgtC1INCy0YHQtSDQvdC10L7QsdGF0L7QtNC40LzRi9C1INC/0L7Qu9GPXCIsXG5cdFx0XHRcImVtYWlsXCI6IFwi0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INGB0LLQvtC5INGN0LvQtdC60YLRgNC+0L3QvdGL0Lkg0LDQtNGA0LXRgVwiLFxuXHRcdFx0XCJ0ZWxcIjogXCLQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0YHQstC+0Lkg0L3QvtC80LXRgCDRgtC10LvQtdGE0L7QvdCwXCJcblx0XHR9LFxuXHRcdFwiZm9ybV9zdWJtaXR0ZWRcIjogXCLQpNC+0YDQvNCwINC+0YLQv9GA0LDQstC70LXQvdCwLCDRgdC/0LDRgdC40LHQviFcIixcblx0XHRcImZvcm1fY2FuY2VsZWRcIjogXCLQpNC+0YDQvNCwINC+0YLQutC70L7QvdC10L3QsFwiLFxuXHRcdFwicGhvbGRlclwiOiB7XG5cdFx0XHRcInVuYW1lXCI6IFwi0JLQsNGI0LUg0LjQvNGPXCIsXG5cdFx0XHRcImVtYWlsXCI6IFwi0JLQsNGIINGN0LvQtdC60YLRgNC+0L3QvdGL0Lkg0LDQtNGA0LXRgVwiLFxuXHRcdFx0XCJwaG9uZVwiOiBcItCS0LDRiCDRgtC10LvQtdGE0L7QvVwiLFxuXHRcdFx0XCJzdWJqZWN0XCI6IFwi0KLQtdC80LAg0LTQuNCw0LvQvtCz0LBcIixcblx0XHRcdFwibWVzc2FnZVwiOiBcItCS0LDRiNC1INGB0L7QvtCx0YnQtdC90LjQtSDQt9C00LXRgdGMLi4uXCIsXG5cdFx0XHRcImNvbW1lbnRcIjogXCLQn9C+0LbQsNC70YPQudGB0YLQsCwg0L7RgdGC0LDQstGM0YLQtSDQt9C00LXRgdGMINGB0LLQvtC5INC60L7QvNC80LXQvdGC0LDRgNC40LkuLi5cIlxuXHRcdH0sXG5cdFx0XCJpbml0X3BhbmVcIjoge1xuXHRcdFx0XCJjaG9vc2VfY29ubl90eXBlXCI6IFwi0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0YvQsdC10YDQuNGC0LUg0YHQv9C+0YHQvtCxINGB0L7QtdC00LjQvdC10L3QuNGPXCIsXG5cdFx0XHRcImNhbGxfYWdlbnRfYnRuXCI6IFwi0JLRi9C30L7QsiDQsNCz0LXQvdGC0LBcIixcblx0XHRcdFwiY2hhdF9hZ2VudF9idG5cIjogXCLQndCw0YfQsNGC0Ywg0YfQsNGCXCJcblx0XHR9LFxuXHRcdFwiY2FsbF9wYW5lXCI6IHtcblx0XHRcdFwiY29uZmlybV9hY2Nlc3NcIjogXCLQn9C+0LbQsNC70YPQudGB0YLQsCwg0L/QvtC00YLQstC10YDQtNC40YLQtSDQtNC+0YHRgtGD0L8g0Log0LzQuNC60YDQvtGE0L7QvdGDXCIsXG5cdFx0XHRcImNhbGxpbmdfYWdlbnRcIjogXCLQmNC00LXRgiDQstGL0LfQvtCyXCIsXG5cdFx0XHRcImNvbm5lY3RlZF93aXRoX2FnZW50XCI6IFwi0JLRi9C30L7QsiDRgdC+0LXQtNC40L3QtdC9XCIsXG5cdFx0XHRcImNhbGxfZW5kZWRcIjogXCLQktGL0LfQvtCyINC30LDQstC10YjQtdC9XCIsXG5cdFx0XHRcImNhbGxfZmFpbGVkXCI6IFwi0KHQsdC+0Lkg0LLRi9C30L7QstCwIFxcbiDQn9C+0LbQsNC70YPQudGB0YLQsCwg0L/QvtC/0YDQvtCx0YPQudGC0LUg0L/QvtC30LbQtVwiLFxuXHRcdFx0XCJjYWxsX2NhbmNlbGVkXCI6IFwi0JLRi9C30L7QsiDQvtGC0LzQtdC90LXQvVwiLFxuXHRcdFx0XCJlbmRfY2FsbFwiOiBcItCX0LDQstC10YDRiNC40Lkg0LLRi9C30L7QslwiLFxuXHRcdFx0XCJ0cnlfYWdhaW5cIjogXCLQn9C+0L/RgNC+0LHQvtCy0LDRgtGMINC10YnQtSDRgNCw0LdcIlxuXHRcdH1cbiAgICB9XG59O1xuIl19
